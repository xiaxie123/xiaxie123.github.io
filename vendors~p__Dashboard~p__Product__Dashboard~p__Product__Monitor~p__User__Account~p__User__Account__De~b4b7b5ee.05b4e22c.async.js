(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+DwW":function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("Mw2x"),A=function(e){Object(at.b)(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.isGroup=function(){return!0},i.prototype.isEntityGroup=function(){return!1},i.prototype.clone=function(){for(var v=e.prototype.clone.call(this),b=this.getChildren(),S=0;S<b.length;S++){var f=b[S];v.add(f.clone())}return v},i}(a.a);_t.a=A},"+Nd1":function(Un,_t,z){"use strict";var at=z("DdT1"),a=z("FPPI");_t.a=function(){var A=1,e=1,i=0,v=!1;function b(f){var M=f.height+1;return f.x0=f.y0=i,f.x1=A,f.y1=e/M,f.eachBefore(S(e,M)),v&&f.eachBefore(at.a),f}function S(f,M){return function(I){I.children&&Object(a.a)(I,I.x0,f*(I.depth+1)/M,I.x1,f*(I.depth+2)/M);var y=I.x0,n=I.y0,s=I.x1-i,d=I.y1-i;s<y&&(y=s=(y+s)/2),d<n&&(n=d=(n+d)/2),I.x0=y,I.y0=n,I.x1=s,I.y1=d}}return b.round=function(f){return arguments.length?(v=!!f,b):v},b.size=function(f){return arguments.length?(A=+f[0],e=+f[1],b):[A,e]},b.padding=function(f){return arguments.length?(i=+f,b):i},b}},"+wVF":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return d});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("n/J0"),v=z("w02o");function b(E){var O=E.chart,C=E.options,p=C.data,x=C.type,T=C.reflect,N=C.xField,Y=C.yField,q=C.colorField,nt=C.sizeField,vt=C.sizeRatio,ht=C.shape,St=C.color;O.data(p);var wt;x==="density"?wt=O.heatmap().position(N+"*"+Y):wt=O.polygon().position(N+"*"+Y),q&&wt.color(q,St||i.b.GRADIENT.CONTINUOUS),T&&O.coordinate().reflect(T);var xt=1;if((vt||vt===0)&&(!ht&&!nt?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):vt<0||vt>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):xt=vt),ht&&(nt||wt.shape("",function(){return[ht,1,xt]}),nt)){var ft=p.map(function(Ot){return Ot[nt]}),Ft=Math.min.apply(Math,ft),kt=Math.max.apply(Math,ft);wt.shape(nt,function(Ot){return[ht,(Ot-Ft)/(kt-Ft),xt]})}return E}function S(E){var O,C=E.options,p=C.xAxis,x=C.yAxis,T=C.xField,N=C.yField;return Object(A.e)(Object(v.f)((O={},O[T]=p,O[N]=x,O)))(E)}function f(E){var O=E.chart,C=E.options,p=C.xAxis,x=C.yAxis,T=C.xField,N=C.yField;return p===!1?O.axis(T,!1):O.axis(T,p),x===!1?O.axis(N,!1):O.axis(N,x),E}function M(E){var O=E.chart,C=E.options,p=C.legend,x=C.colorField;return p?O.legend(x,p):O.legend(!1),E}function I(E){var O=E.chart,C=E.options,p=C.xField,x=C.yField,T=C.colorField,N=C.sizeField,Y=C.heatmapStyle,q=O.geometries[0];return Y&&q&&(Object(e.isFunction)(Y)?q.style(p+"*"+x+"*"+T+"*"+N,Y):Object(e.isObject)(Y)&&q.style(Y)),E}function y(E){var O=E.chart,C=E.options,p=C.label,x=C.colorField,T=C.type,N=Object(A.c)(O,T==="density"?"heatmap":"polygon");if(!p)N.label(!1);else if(x){var Y=p.callback,q=Object(at.c)(p,["callback"]);N.label({fields:[x],callback:Y,cfg:Object(A.o)(q)})}return E}function n(E){return Object(A.e)(b,S,v.j,f,M,v.k,I,y,Object(v.b)(),v.c,v.a)(E)}var s=z("Ihc8");Object(s.registerShape)("polygon","circle",{draw:function(O,C){var p,x,T=O.x,N=O.y,Y=this.parsePoints(O.points),q=Math.abs(Y[2].x-Y[1].x),nt=Math.abs(Y[1].y-Y[0].y),vt=Math.min(q,nt)/2,ht=Number(O.shape[1]),St=Number(O.shape[2]),wt=Math.sqrt(St),xt=vt*wt*Math.sqrt(ht),ft=((p=O.style)===null||p===void 0?void 0:p.fill)||O.color||((x=O.defaultStyle)===null||x===void 0?void 0:x.fill),Ft=C.addShape("circle",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:T,y:N,r:xt},O.defaultStyle),O.style),{fill:ft})});return Ft}}),Object(s.registerShape)("polygon","square",{draw:function(O,C){var p,x,T=O.x,N=O.y,Y=this.parsePoints(O.points),q=Math.abs(Y[2].x-Y[1].x),nt=Math.abs(Y[1].y-Y[0].y),vt=Math.min(q,nt),ht=Number(O.shape[1]),St=Number(O.shape[2]),wt=Math.sqrt(St),xt=vt*wt*Math.sqrt(ht),ft=((p=O.style)===null||p===void 0?void 0:p.fill)||O.color||((x=O.defaultStyle)===null||x===void 0?void 0:x.fill),Ft=C.addShape("rect",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:T-xt/2,y:N-xt/2,width:xt,height:xt},O.defaultStyle),O.style),{fill:ft})});return Ft}});var d=function(E){Object(at.b)(O,E);function O(){var C=E!==null&&E.apply(this,arguments)||this;return C.type="heatmap",C}return O.prototype.getSchemaAdaptor=function(){return n},O.prototype.getDefaultOptions=function(){return Object(A.b)({},E.prototype.getDefaultOptions.call(this),{type:"polygon",legend:!1,xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}})},O}(a.a)},"/+3i":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return x});var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=z("iTfj"),i=z("w02o"),v=z("n/J0"),b="$$stock-range$$",S="trend",f="up",M="down",I=["#ef5350","#26a69a"],y={showTitle:!1,showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0},itemTpl:'<li class="g2-tooltip-list-item" data-index={index}><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}{value}</li>'};function n(T,N){return Object(e.map)(T,function(Y){if(Object(e.isArray)(N)){var q=N[0],nt=N[1],vt=N[2],ht=N[3];Y[S]=Y[q]<=Y[nt]?f:M,Y[b]=[Y[q],Y[nt],Y[vt],Y[ht]]}return Y})}function s(T){var N=T.chart,Y=T.options,q=Y.xField,nt=Y.yField,vt=Y.data;N.data(n(vt,nt));var ht=N.schema().position(q+"*"+b).shape("candle");return ht.color(S,I),T}function d(T){var N,Y,q=T.chart,nt=T.options,vt=nt.meta,ht=nt.xAxis,St=nt.yAxis,wt=nt.xField,xt=(N={},N[wt]={type:"timeCat",tickCount:6},N[S]={values:[f,M]},N),ft=Object(a.b)(xt,vt,(Y={},Y[wt]=Object(a.k)(ht,v.a),Y[b]=Object(a.k)(St,v.a),Y));return q.scale(ft),T}function E(T){var N=T.chart,Y=T.options,q=Y.xAxis,nt=Y.yAxis,vt=Y.xField;return q===!1?N.axis(vt,!1):N.axis(vt,q),nt===!1?N.axis(b,!1):N.axis(b,nt),T}function O(T){var N=T.chart,Y=T.options,q=Y.xField,nt=Y.yField,vt=Y.meta,ht=vt===void 0?{}:vt,St=Y.tooltip,wt=St===void 0?{}:St,xt=Object(a.c)(N,"schema"),ft=nt[0],Ft=nt[1],kt=nt[2],Ot=nt[3],X=ht[ft]&&ht[ft].alias||ft,ct=ht[Ft]?ht[Ft].alias||ft:Ft,dt=ht[kt]&&ht[kt].alias||kt,pt=ht[Ot]&&ht[Ot].alias||Ot,Mt={fields:[q,ft,Ft,kt,Ot],callback:function(U,P,H,k,h){var g={name:U,value:`
          <br><span data-label="`+X+'" style="padding-left: 16px">'+X+"\uFF1A"+P+`</span>
          <br><span data-label="`+ct+'" style="padding-left: 16px">'+ct+"\uFF1A"+H+`</span>
          <br><span data-label="`+dt+'" style="padding-left: 16px">'+dt+"\uFF1A"+k+`</span>
          <br><span data-label="`+pt+'" style="padding-left: 16px">'+pt+"\uFF1A"+h+`</span>
        `};return g}},tt={crosshairs:{text:function(U,P,H){var k={position:"end"};if(U==="x"){var h=H[0];k.content=h?h.data[q]:P}else k.content=P;return k}}};if(wt){if(Object(e.isObject)(wt)){var lt=Object(a.b)({},tt,wt);N.tooltip(lt),xt.tooltip(Mt)}}else N.tooltip(!1);return T}function C(T){var N=T.chart,Y=T.options,q=Y.legend;return q?N.legend(S,q):q===!1&&N.legend(!1),T}function p(T){Object(a.e)(s,d,i.j,E,O,C,i.c,i.a)(T)}var x=function(T){Object(at.b)(N,T);function N(){var Y=T!==null&&T.apply(this,arguments)||this;return Y.type="stock",Y}return N.prototype.getDefaultOptions=function(){return Object(a.b)({},T.prototype.getDefaultOptions.call(this),{tooltip:y,interactions:[{type:"tooltip"}],legend:{position:"top-left"}})},N.prototype.getSchemaAdaptor=function(){return p},N.prototype.changeData=function(Y){this.updateOption({data:Y});var q=this.options.yField;this.chart.changeData(n(Y,q))},N}(A.a)},"/3+T":function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Line",function(){return M}),z.d(_t,"Circle",function(){return y}),z.d(_t,"Base",function(){return S}),z.d(_t,"Html",function(){return T});var at=z("mrSG"),a=z("5UbV"),A=z("iTfj"),e=z("MeYt"),i=z("jqgP"),v=z("L16w"),b=function(N){Object(at.b)(Y,N);function Y(){return N!==null&&N.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var q=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},q),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:v.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:v.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:v.a.fontFamily}},textBackground:{padding:5,style:{stroke:v.a.lineColor}}}})},Y.prototype.renderInner=function(q){this.get("line")&&this.renderLine(q),this.get("text")&&(this.renderText(q),this.renderBackground(q))},Y.prototype.renderText=function(q){var nt=this.get("text"),vt=nt.style,ht=nt.autoRotate,St=nt.content;if(!Object(A.isNil)(St)){var wt=this.getTextPoint(),xt=null;if(ht){var ft=this.getRotateAngle();xt=Object(i.e)(wt,ft)}this.addShape(q,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Object(at.a)(Object(at.a)(Object(at.a)({},wt),{text:St,matrix:xt}),vt)})}},Y.prototype.renderLine=function(q){var nt=this.getLinePath(),vt=this.get("line"),ht=vt.style;this.addShape(q,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Object(at.a)({path:nt},ht)})},Y.prototype.renderBackground=function(q){var nt=this.getElementId("text"),vt=q.findById(nt),ht=this.get("textBackground");if(ht&&vt){var St=vt.getBBox(),wt=Object(a.c)(ht.padding),xt=ht.style,ft=this.addShape(q,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Object(at.a)({x:St.x-wt[3],y:St.y-wt[0],width:St.width+wt[1]+wt[3],height:St.height+wt[0]+wt[2],matrix:vt.attr("matrix")},xt)});ft.toBack()}},Y}(e.a),S=b,f=function(N){Object(at.b)(Y,N);function Y(){return N!==null&&N.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var q=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},q),{type:"line",locationType:"region",start:null,end:null})},Y.prototype.getRotateAngle=function(){var q=this.getLocation(),nt=q.start,vt=q.end,ht=this.get("text").position,St=Math.atan2(vt.y-nt.y,vt.x-nt.x),wt=ht==="start"?St-Math.PI/2:St+Math.PI/2;return wt},Y.prototype.getTextPoint=function(){var q=this.getLocation(),nt=q.start,vt=q.end,ht=this.get("text"),St=ht.position,wt=ht.offset;return Object(a.f)(nt,vt,St,wt)},Y.prototype.getLinePath=function(){var q=this.getLocation(),nt=q.start,vt=q.end;return[["M",nt.x,nt.y],["L",vt.x,vt.y]]},Y}(S),M=f,I=function(N){Object(at.b)(Y,N);function Y(){return N!==null&&N.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var q=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},q),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},Y.prototype.getRotateAngle=function(){var q=this.getLocation(),nt=q.startAngle,vt=q.endAngle,ht=this.get("text").position,St=ht==="start"?nt+Math.PI/2:vt-Math.PI/2;return St},Y.prototype.getTextPoint=function(){var q=this.get("text"),nt=q.position,vt=q.offset,ht=this.getLocation(),St=ht.center,wt=ht.radius,xt=ht.startAngle,ft=ht.endAngle,Ft=nt==="start"?xt:ft,kt=this.getRotateAngle()-Math.PI,Ot=Object(a.e)(St,wt,Ft),X=Math.cos(kt)*vt,ct=Math.sin(kt)*vt;return{x:Ot.x+X,y:Ot.y+ct}},Y.prototype.getLinePath=function(){var q=this.getLocation(),nt=q.center,vt=q.radius,ht=q.startAngle,St=q.endAngle,wt=null;if(St-ht==Math.PI*2){var xt=nt.x,ft=nt.y;wt=[["M",xt,ft-vt],["A",vt,vt,0,1,1,xt,ft+vt],["A",vt,vt,0,1,1,xt,ft-vt],["Z"]]}else{var Ft=Object(a.e)(nt,vt,ht),kt=Object(a.e)(nt,vt,St),Ot=Math.abs(St-ht)>Math.PI?1:0,X=ht>St?0:1;wt=[["M",Ft.x,Ft.y],["A",vt,vt,0,Ot,X,kt.x,kt.y]]}return wt},Y}(S),y=I,n=z("fIp6"),s=z("de35"),d="g2-crosshair",E=d+"-line",O=d+"-text",C,p=(C={},C[""+d]={position:"relative"},C[""+E]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},C[""+O]={position:"absolute",color:v.a.textColor,fontFamily:v.a.fontFamily},C),x=function(N){Object(at.b)(Y,N);function Y(){return N!==null&&N.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var q=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},q),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+d+'"></div>',crosshairTpl:'<div class="'+E+'"></div>',textTpl:'<span class="'+O+'">{content}</span>',domStyles:null,containerClassName:d,defaultStyles:p,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},Y.prototype.render=function(){this.resetText(),this.resetPosition()},Y.prototype.initCrossHair=function(){var q=this.getContainer(),nt=this.get("crosshairTpl"),vt=Object(n.b)(nt);q.appendChild(vt),this.applyStyle(E,vt),this.set("crosshairEl",vt)},Y.prototype.getTextPoint=function(){var q=this.getLocation(),nt=q.start,vt=q.end,ht=this.get("text"),St=ht.position,wt=ht.offset;return Object(a.f)(nt,vt,St,wt)},Y.prototype.resetText=function(){var q=this.get("text"),nt=this.get("textEl");if(q){var vt=q.content;if(!nt){var ht=this.getContainer(),St=Object(A.substitute)(this.get("textTpl"),q);nt=Object(n.b)(St),ht.appendChild(nt),this.applyStyle(O,nt),this.set("textEl",nt)}nt.innerHTML=vt}else nt&&nt.remove()},Y.prototype.isVertical=function(q,nt){return q.x===nt.x},Y.prototype.resetPosition=function(){var q=this.get("crosshairEl");q||(this.initCrossHair(),q=this.get("crosshairEl"));var nt=this.get("start"),vt=this.get("end"),ht=Math.min(nt.x,vt.x),St=Math.min(nt.y,vt.y);this.isVertical(nt,vt)?Object(n.e)(q,{width:"1px",height:Object(a.l)(Math.abs(vt.y-nt.y))}):Object(n.e)(q,{height:"1px",width:Object(a.l)(Math.abs(vt.x-nt.x))}),Object(n.e)(q,{top:Object(a.l)(St),left:Object(a.l)(ht)}),this.alignText()},Y.prototype.alignText=function(){var q=this.get("textEl");if(q){var nt=this.get("text").align,vt=q.clientWidth,ht=this.getTextPoint();switch(nt){case"center":ht.x=ht.x-vt/2;break;case"right":ht.x=ht.x-vt;case"left":break}Object(n.e)(q,{top:Object(a.l)(ht.y),left:Object(a.l)(ht.x)})}},Y.prototype.updateInner=function(q){Object(A.hasKey)(q,"text")&&this.resetText(),N.prototype.updateInner.call(this,q)},Y}(s.a),T=x},"/ezw":function(Un,_t,z){"use strict";var at=z("rePB"),a=z("wx14"),A=z("U8pU"),e=z("q1tI"),i=z("TSYQ"),v=z.n(i),b=function(kt){var Ot=kt.prefixCls,X=kt.className,ct=kt.width,dt=kt.style;return e.createElement("h3",{className:v()(Ot,X),style:Object(a.a)({width:ct},dt)})},S=b,f=z("KQm4"),M=function(kt){var Ot=function(lt){var it=kt.width,U=kt.rows,P=U===void 0?2:U;if(Array.isArray(it))return it[lt];if(P-1===lt)return it},X=kt.prefixCls,ct=kt.className,dt=kt.style,pt=kt.rows,Mt=Object(f.a)(Array(pt)).map(function(tt,lt){return e.createElement("li",{key:lt,style:{width:Ot(lt)}})});return e.createElement("ul",{className:v()(X,ct),style:dt},Mt)},I=M,y=z("H84U"),n=function(kt){var Ot,X,ct=kt.prefixCls,dt=kt.className,pt=kt.style,Mt=kt.size,tt=kt.shape,lt=v()((Ot={},Object(at.a)(Ot,"".concat(ct,"-lg"),Mt==="large"),Object(at.a)(Ot,"".concat(ct,"-sm"),Mt==="small"),Ot)),it=v()((X={},Object(at.a)(X,"".concat(ct,"-circle"),tt==="circle"),Object(at.a)(X,"".concat(ct,"-square"),tt==="square"),Object(at.a)(X,"".concat(ct,"-round"),tt==="round"),X)),U=typeof Mt=="number"?{width:Mt,height:Mt,lineHeight:"".concat(Mt,"px")}:{};return e.createElement("span",{className:v()(ct,lt,it,dt),style:Object(a.a)(Object(a.a)({},U),pt)})},s=n,d=z("bT9E"),E=function(kt){var Ot=function(ct){var dt=ct.getPrefixCls,pt=kt.prefixCls,Mt=kt.className,tt=kt.active,lt=dt("skeleton",pt),it=Object(d.a)(kt,["prefixCls"]),U=v()(lt,"".concat(lt,"-element"),Object(at.a)({},"".concat(lt,"-active"),tt),Mt);return e.createElement("div",{className:U},e.createElement(s,Object(a.a)({prefixCls:"".concat(lt,"-avatar")},it)))};return e.createElement(y.a,null,Ot)};E.defaultProps={size:"default",shape:"circle"};var O=E,C=function(kt){var Ot=function(ct){var dt=ct.getPrefixCls,pt=kt.prefixCls,Mt=kt.className,tt=kt.active,lt=dt("skeleton",pt),it=Object(d.a)(kt,["prefixCls"]),U=v()(lt,"".concat(lt,"-element"),Object(at.a)({},"".concat(lt,"-active"),tt),Mt);return e.createElement("div",{className:U},e.createElement(s,Object(a.a)({prefixCls:"".concat(lt,"-button")},it)))};return e.createElement(y.a,null,Ot)};C.defaultProps={size:"default"};var p=C,x=function(kt){var Ot=function(ct){var dt=ct.getPrefixCls,pt=kt.prefixCls,Mt=kt.className,tt=kt.active,lt=dt("skeleton",pt),it=Object(d.a)(kt,["prefixCls"]),U=v()(lt,"".concat(lt,"-element"),Object(at.a)({},"".concat(lt,"-active"),tt),Mt);return e.createElement("div",{className:U},e.createElement(s,Object(a.a)({prefixCls:"".concat(lt,"-input")},it)))};return e.createElement(y.a,null,Ot)};x.defaultProps={size:"default"};var T=x,N="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",Y=function(kt){var Ot=function(ct){var dt=ct.getPrefixCls,pt=kt.prefixCls,Mt=kt.className,tt=kt.style,lt=dt("skeleton",pt),it=v()(lt,"".concat(lt,"-element"),Mt);return e.createElement("div",{className:it},e.createElement("div",{className:v()("".concat(lt,"-image"),Mt),style:tt},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(lt,"-image-svg")},e.createElement("path",{d:N,className:"".concat(lt,"-image-path")}))))};return e.createElement(y.a,null,Ot)},q=Y;function nt(Ft){return Ft&&Object(A.a)(Ft)==="object"?Ft:{}}function vt(Ft,kt){return Ft&&!kt?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function ht(Ft,kt){return!Ft&&kt?{width:"38%"}:Ft&&kt?{width:"50%"}:{}}function St(Ft,kt){var Ot={};return(!Ft||!kt)&&(Ot.width="61%"),!Ft&&kt?Ot.rows=3:Ot.rows=2,Ot}var wt=function(kt){var Ot=function(ct){var dt=ct.getPrefixCls,pt=ct.direction,Mt=kt.prefixCls,tt=kt.loading,lt=kt.className,it=kt.children,U=kt.avatar,P=kt.title,H=kt.paragraph,k=kt.active,h=kt.round,g=dt("skeleton",Mt);if(tt||!("loading"in kt)){var G,V=!!U,$=!!P,rt=!!H,ot;if(V){var At=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-avatar")},vt($,rt)),nt(U));ot=e.createElement("div",{className:"".concat(g,"-header")},e.createElement(s,At))}var gt;if($||rt){var mt;if($){var bt=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-title")},ht(V,rt)),nt(P));mt=e.createElement(S,bt)}var jt;if(rt){var Dt=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-paragraph")},St(V,$)),nt(H));jt=e.createElement(I,Dt)}gt=e.createElement("div",{className:"".concat(g,"-content")},mt,jt)}var Ut=v()(g,(G={},Object(at.a)(G,"".concat(g,"-with-avatar"),V),Object(at.a)(G,"".concat(g,"-active"),k),Object(at.a)(G,"".concat(g,"-rtl"),pt==="rtl"),Object(at.a)(G,"".concat(g,"-round"),h),G),lt);return e.createElement("div",{className:Ut},ot,gt)}return it};return e.createElement(y.a,null,Ot)};wt.defaultProps={avatar:!1,title:!0,paragraph:!0},wt.Button=p,wt.Avatar=O,wt.Input=T,wt.Image=q;var xt=wt,ft=_t.a=xt},"027J":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return n});var at=z("mrSG"),a=z("zJSt"),A=z("lFe4"),e=z("w02o"),i=z("YuPD"),v=z("tKoa"),b=z("7cv3"),S=z("DyAw");function f(s){var d,E,O=s.chart,C=s.options,p=C.data,x=C.xAxis,T=C.yAxis,N=C.color,Y=C.columnStyle,q=C.columnWidthRatio,nt=Object(A.a)(p);O.data(nt);var vt=Object(i.b)({},s,{options:{xField:b.b,yField:b.c,widthRatio:q,interval:{style:Y,color:N}}});return Object(v.c)(vt),O.axis(!1),O.legend(!1),O.interaction("element-active"),Object(e.f)((d={},d[b.b]=x,d[b.c]=T,d),(E={},E[b.b]={type:"cat"},E[b.c]=Object(S.a)(nt,b.c),E))(s),s}function M(s){return Object(i.e)(f,e.k,e.j,e.a,Object(e.b)())(s)}var I=z("iTfj"),y={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(d,E){return""+Object(I.get)(E,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},n=function(s){Object(at.b)(d,s);function d(){var E=s!==null&&s.apply(this,arguments)||this;return E.type="tiny-column",E}return d.prototype.changeData=function(E){this.updateOption({data:E}),this.chart.changeData(Object(A.a)(E))},d.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},y),animation:!0}},d.prototype.getSchemaAdaptor=function(){return M},d}(a.a)},"05BJ":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return I});var at=z("mrSG"),a=z("zJSt"),A=z("7cv3"),e=z("lFe4"),i=z("w02o"),v=z("YuPD"),b=z("tKoa"),S=z("DyAw");function f(y){var n,s,d=y.chart,E=y.options,O=E.data,C=E.xAxis,p=E.yAxis,x=E.color,T=E.areaStyle,N=E.point,Y=E.line,q=Object(e.a)(O);d.data(q);var nt=Object(v.b)({},y,{options:{xField:A.b,yField:A.c,area:{color:x,style:T},line:Y,point:N}}),vt=Object(v.b)({},nt,{options:{tooltip:!1}});return Object(b.a)(nt),Object(b.d)(vt),Object(b.e)(vt),d.axis(!1),d.legend(!1),Object(i.f)((n={},n[A.b]=C,n[A.c]=p,n),(s={},s[A.b]={type:"cat"},s[A.c]=Object(S.a)(q,A.c),s))(y),y}function M(y){return Object(v.e)(f,i.k,i.j,i.a,Object(i.b)())(y)}var I=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-area",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(e.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},A.a),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:!0}},n.prototype.getSchemaAdaptor=function(){return M},n}(a.a)},"06Lf":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return ct}),z.d(_t,"b",function(){return H}),z.d(_t,"c",function(){return At}),z.d(_t,"d",function(){return ye});var at=z("q1tI"),a=z.n(at),A=z("ma/q"),e=z("iTfj"),i=function(Yt,Se){var Wt={}.toString;return Wt.call(Yt)==="[object "+Se+"]"},v=function(Yt){if(!Yt)return Yt;var Se={};for(var Wt in Yt)Se[Wt]=Yt[Wt];return Se},b=function(Yt,Se){for(var Wt=Yt,ue=0;ue<Se.length;ue++)if(Wt==null?void 0:Wt[Se[ue]])Wt=Wt[Se[ue]];else{Wt=void 0;break}return Wt},S=function(Yt,Se,Wt){if(!Yt)return Yt;var ue=Yt;return Se.forEach(function(vn,Dn){Dn<Se.length-1?ue=ue[vn]:ue[vn]=Wt}),Yt},f=function(Yt,Se){!Yt||(Object(e.isFunction)(Yt)?Yt(Se):Yt.current=Se)},M={isType:i,clone:v,hasPath:b,setPath:S},I=z("i8i4"),y=z.n(I),n=function(Yt,Se){var Wt=document.createElement("div");return Se==="tooltip"&&(Wt.className="g2-tooltip"),y.a.render(Yt,Wt),Wt},s=n,d=function(){return d=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},d.apply(this,arguments)},E=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se};function O(zt,Yt){var Se=Object(at.useRef)(),Wt=Object(at.useRef)(),ue=Object(at.useRef)(null),vn=Yt.onReady,Dn=Yt.onEvent,zn=function(yt,$t){var me;return yt===void 0&&(yt="image/png"),(me=Se.current)===null||me===void 0?void 0:me.chart.canvas.cfg.el.toDataURL(yt,$t)},Gn=function(yt,$t,me){var Zt;yt===void 0&&(yt="download"),$t===void 0&&($t="image/png");var de=yt;yt.indexOf(".")===-1&&(de=yt+"."+$t.split("/")[1]);var he=(Zt=Se.current)===null||Zt===void 0?void 0:Zt.chart.canvas.cfg.el.toDataURL($t,me),ce=document.createElement("a");return ce.href=he,ce.download=de,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ce=null,de},Ze=function(yt,$t,me){var Zt=M.hasPath,de=M.setPath,he=Zt(yt,$t);de(yt,$t,function(){for(var ce=[],Me=0;Me<arguments.length;Me++)ce[Me]=arguments[Me];var ze=M.isType(he,"Function")?he.apply(void 0,ce):he;return M.isType(ze,"String")||M.isType(ze,"Number")||M.isType(ze,"HTMLDivElement")?ze:s(ze,me)})},Ce=function(){var yt=M.hasPath;yt(Yt,["statistic","content","customHtml"])&&Ze(Yt,["statistic","content","customHtml"]),yt(Yt,["statistic","title","customHtml"])&&Ze(Yt,["statistic","title","customHtml"]),typeof Yt.tooltip=="object"&&(yt(Yt,["tooltip","container"])&&Ze(Yt,["tooltip","container"],"tooltip"),yt(Yt,["tooltip","customContent"])&&Ze(Yt,["tooltip","customContent"],"tooltip"))};return Object(at.useEffect)(function(){if(Se.current&&!Object(e.isEqual)(Wt.current,Yt)){var R=!1;if(Wt.current){var yt=Wt.current,$t=yt.data,me=yt.value,Zt=yt.percent,de=E(yt,["data","value","percent"]),he=Yt.data,ce=Yt.value,Me=Yt.percent,ze=E(Yt,["data","value","percent"]);R=Object(e.isEqual)(de,ze)}if(R){var Ve="data",ke=["percent"],tn=Object.keys(Yt);ke.forEach(function(De){tn.includes(De)&&(Ve=De)}),Se.current.changeData((Yt==null?void 0:Yt[Ve])||[])}else Ce(),Se.current.update(Yt);Wt.current=Yt}},[Yt]),Object(at.useEffect)(function(){if(!ue.current)return function(){return null};Ce();var R=new zt(ue.current,d({},Yt));R.__proto__.toDataURL=function($t,me){return zn($t,me)},R.__proto__.downloadImage=function($t,me,Zt){return Gn($t,me,Zt)},R.render(),Wt.current||(Wt.current=Yt),Se.current=M.clone(R),vn&&vn(R);var yt=function(me){Dn&&Dn(R,me)};return R.on("*",yt),function(){Se.current&&(Se.current.destroy(),Se.current.off("*",yt),Se.current=void 0)}},[]),{chart:Se,container:ue}}var C=function(){var zt=function(Se,Wt){return zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,vn){ue.__proto__=vn}||function(ue,vn){for(var Dn in vn)Object.prototype.hasOwnProperty.call(vn,Dn)&&(ue[Dn]=vn[Dn])},zt(Se,Wt)};return function(Yt,Se){zt(Yt,Se);function Wt(){this.constructor=Yt}Yt.prototype=Se===null?Object.create(Se):(Wt.prototype=Se.prototype,new Wt)}}(),p=function(zt){C(Yt,zt);function Yt(){var Se=zt!==null&&zt.apply(this,arguments)||this;return Se.state={hasError:!1},Se.renderError=function(Wt){var ue=Se.props.errorTemplate;switch(Wt){default:return ue&&typeof ue=="function"?ue(Wt):a.a.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Wt.message)}},Se}return Yt.getDerivedStateFromError=function(Se){return{hasError:!0,error:Se}},Yt.getDerivedStateFromProps=function(Se,Wt){return Wt.children!==Se.children?{children:Se.children,hasError:!1,error:void 0}:null},Yt.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):a.a.createElement(at.Fragment,null,this.props.children)},Yt}(a.a.Component),x=p;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T=function(){return T=Object.assign||function(Se){for(var Wt,ue=1,vn=arguments.length;ue<vn;ue++){Wt=arguments[ue];for(var Dn in Wt)Object.prototype.hasOwnProperty.call(Wt,Dn)&&(Se[Dn]=Wt[Dn])}return Se},T.apply(this,arguments)};function N(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se}var Y=function(){return Math.random().toString(36).substring(6)},q=function(Yt){var Se=Yt.animate,Wt=Yt.backgroundColor,ue=Yt.backgroundOpacity,vn=Yt.baseUrl,Dn=Yt.children,zn=Yt.foregroundColor,Gn=Yt.foregroundOpacity,Ze=Yt.gradientRatio,Ce=Yt.uniqueKey,R=Yt.interval,yt=Yt.rtl,$t=Yt.speed,me=Yt.style,Zt=Yt.title,de=N(Yt,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),he=Ce||Y(),ce=he+"-diff",Me=he+"-animated-diff",ze=he+"-aria",Ve=yt?{transform:"scaleX(-1)"}:null,ke="0; "+R+"; 1",tn=$t+"s";return Object(at.createElement)("svg",T({"aria-labelledby":ze,role:"img",style:T(T({},me),Ve)},de),Zt?Object(at.createElement)("title",{id:ze},Zt):null,Object(at.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+vn+"#"+ce+")",style:{fill:"url("+vn+"#"+Me+")"}}),Object(at.createElement)("defs",{role:"presentation"},Object(at.createElement)("clipPath",{id:ce},Dn),Object(at.createElement)("linearGradient",{id:Me},Object(at.createElement)("stop",{offset:"0%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze+"; "+-Ze+"; 1",keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"50%",stopColor:zn,stopOpacity:Gn},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze/2+"; "+-Ze/2+"; "+(1+Ze/2),keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"100%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ze),keyTimes:ke,dur:tn,repeatCount:"indefinite"})))))};q.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var nt=function(Yt){return Yt.children?Object(at.createElement)(q,T({},Yt)):Object(at.createElement)(vt,T({},Yt))},vt=function(Yt){return Object(at.createElement)(nt,T({viewBox:"0 0 476 124"},Yt),Object(at.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(at.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ht=function(Yt){return Object(at.createElement)(nt,T({viewBox:"0 0 400 460"},Yt),Object(at.createElement)("circle",{cx:"31",cy:"31",r:"15"}),Object(at.createElement)("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},St=function(Yt){return Object(at.createElement)(nt,T({viewBox:"0 0 340 84"},Yt),Object(at.createElement)("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},wt=function(Yt){return Object(at.createElement)(nt,T({viewBox:"0 0 400 110"},Yt),Object(at.createElement)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},xt=function(Yt){return Object(at.createElement)(nt,T({viewBox:"0 0 245 125"},Yt),Object(at.createElement)("circle",{cx:"10",cy:"20",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"50",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"80",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"110",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},ft=nt,Ft=function(Yt){var Se=Yt.loadingTemplate,Wt=function(){return Se||a.a.createElement(ft,{viewBox:"0 0 400 180",width:200,height:90,speed:1},a.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),a.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),a.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),a.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),a.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),a.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),a.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),a.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),a.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),a.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},Wt())},kt=Ft,Ot=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},X=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Ot(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Area,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),ct=X,dt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},pt=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=dt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Bar,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Mt=pt,tt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},lt=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=tt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Bullet,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),it=lt,U=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},P=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=U(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Column,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),H=P,k=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},h=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=k(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Funnel,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),g=h,G=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},V=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=G(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Histogram,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),$=V,rt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},ot=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=rt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Line,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),At=ot,gt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},mt=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=gt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Box,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),bt=mt,jt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Dt=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=jt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Liquid,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Ut=Dt,Ct=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Vt=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Ct(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Heatmap,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Ht=Vt,re=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},pe=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=re(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Pie,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),ye=pe,we=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Ne=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=we(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Gauge,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Ke=Ne,pn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},hn=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=pn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Progress,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),kn=hn,Tn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Rn=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Tn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Radar,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Mn=Rn,Cn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},_n=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Cn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.RingProgress,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Kn=_n,tr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},or=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=tr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Rose,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),nr=or,er=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Sr=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=er(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Scatter,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Vr=Sr,ti=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},hi=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=ti(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyArea,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Fi=hi,to=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},si=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=to(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyColumn,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Ci=si,_i=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Li=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=_i(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.DualAxes,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Vi=Li,ro=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},jr=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=ro(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyLine,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Ji=jr,pr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Yr=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=pr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Waterfall,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Br=Yr,Nr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Xr=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Nr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.WordCloud,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Kr=Xr,ni=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},fi=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=ni(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Sunburst,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),$r=fi,ci=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Qr=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=ci(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Stock,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),gi=Qr,Oi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},bi=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Oi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.RadialBar,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),zi=bi,Qi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},io=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Qi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Sankey,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Wi=io,Zi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Pi=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Zi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Treemap,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),no=Pi,Mo=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},ao=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=Mo(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.MultiView,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),uo=ao,xo=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},oe=Object(at.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,Gn=zt.errorTemplate,Ze=xo(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.BidirectionalBar,Ze),R=Ce.chart,yt=Ce.container;return Object(at.useEffect)(function(){f(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Gn},Dn&&a.a.createElement(kt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:yt}))}),Kt=oe,te=z("fD4D"),Oe=function(){return Oe=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},Oe.apply(this,arguments)};te.default.registerNode("card-node",{draw:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn=Object.assign({radius:2,fill:"#fff"},vn),Wt=vn.stroke||"#5B8FF9";var Dn=vn.radius||0,zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:ue[1],stroke:Wt},vn),name:"main-box",draggable:!0}),Gn=(Yt==null?void 0:Yt.title)||(Yt==null?void 0:Yt.label),Ze,Ce=Yt&&Yt.labelCfg&&Yt.labelCfg.style?Yt.labelCfg.style:{};if(Gn){var R=Object.assign({fill:"#fff"},Ce);Ze=Se.addShape("text",{attrs:Oe(Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+2,text:Gn},R),{fill:"#fff"}),name:"title"})}var yt=Ze?Ze.getBBox():{height:ue[1]/2},$t=Se.addShape("rect",{attrs:{x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:yt.height+4,fill:Wt,radius:[Dn,Dn,0,0]},name:"title-rect",draggable:!0});Ze&&Ze.toFront();var me;(Yt==null?void 0:Yt.children)&&(me=Se.addShape("marker",{attrs:{x:ue[0]/2,y:0,r:6,cursor:"pointer",symbol:Yt.collapsed?te.default.Marker.expand:te.default.Marker.collapse,stroke:Wt,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var Zt=Yt&&Yt.description?Yt.description:void 0,de=$t.getBBox(),he;if(Zt&&(he=Se.addShape("text",{attrs:Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+de.height+8,text:Zt},Ce),name:"description"})),he){var ce=he.getBBox(),Me=de.height+16+ce.height,ze=ue[0]>ce.width+16?ue[0]:ce.width+16;zn.attr({width:ze,height:Me}),$t==null||$t.attr("width",ze),me==null||me.attr({x:ze-ue[0]/2,y:Me/2-ue[1]/2})}return zn},update:void 0},"single-node"),te.default.registerNode("round-rect",{drawShape:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn.stroke&&(Wt=vn.stroke);var Dn=vn&&vn.fill?vn.fill:"#fff";vn=Object.assign({width:ue[0],height:ue[1],radius:ue[1]/2,fill:Dn,lineWidth:1.2,stroke:Wt},vn);var zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2},vn),name:"rect-shape"});return Se.addShape("circle",{attrs:{x:-ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape"}),Se.addShape("circle",{attrs:{x:ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape2"}),zn},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(Yt,Se){var Wt=Se.getContainer(),ue=Wt.get("children"),vn=ue[0],Dn=ue[1],zn=ue[2],Gn=Yt.style&&Yt.style.stroke?Yt.style.stroke:"#5B8FF9";Gn&&(vn.attr("stroke",Gn),Dn.attr("fill",Gn),zn.attr("fill",Gn))}},"single-node");var Qe=function(Yt){te.default.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(Wt,ue){var vn=this.getShapeStyle(Wt),Dn=(Wt||{}).labelCfg,zn=Dn===void 0?{}:Dn,Gn=ue.addShape("rect",{attrs:Oe(Oe({},vn),{x:0,y:0})}),Ze={fill:"#e6fffb"},Ce="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return(Wt==null?void 0:Wt.leftIcon)&&(Ze=Object.assign({},Ze,Wt.leftIcon.style),Ce=Wt.leftIcon.img),ue.addShape("rect",{attrs:Oe({x:1,y:1,width:38,height:vn.height-2},Ze)}),ue.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:Ce},name:"image-shape"}),Yt.enableEdit&&(ue.addShape("marker",{attrs:{x:vn.width/3,y:vn.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:te.default.Marker.expand},name:"add-item"}),ue.addShape("marker",{attrs:{x:vn.width*2/3,y:vn.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:te.default.Marker.collapse},name:"remove-item"})),(Wt==null?void 0:Wt.label)&&ue.addShape("text",{attrs:Oe(Oe({},zn.style),{text:Wt.label,x:vn.width/2,y:vn.height/1.5})}),Gn}},"rect")};te.default.registerEdge("fund-polyline",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=ue.y-Wt.y,Dn=vn!==0?500/Math.abs(vn):0,zn=16,Gn=vn<0?zn:-zn,Ze={x:Wt.x+Dn,y:ue.y+Gn},Ce={x:Ze.x+zn,y:ue.y},R={x:(Ze.x-Wt.x)*(ue.y-Wt.y)/(Ze.y-Wt.y)+Wt.x,y:ue.y},yt=[["M",Wt.x,Wt.y],["L",Ze.x,Ze.y],["Q",R.x,R.y,Ce.x,Ce.y],["L",ue.x,ue.y]];vn===0&&(yt=[["M",Wt.x,Wt.y],["L",ue.x,ue.y]]);var $t=(Yt||{}).style,me=Se.addShape("path",{attrs:{path:yt,stroke:$t.stroke||(Yt==null?void 0:Yt.colorMap)&&Yt.colorMap[Yt.dataType]?(Yt==null?void 0:Yt.colorMap)[Yt==null?void 0:Yt.dataType]:"#5B8FF9",lineWidth:$t.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Zt=0,de=8,he;if((Yt==null?void 0:Yt.label)&&(he=Se.addShape("text",{attrs:{text:Yt.label,x:Ce.x+Zt,y:ue.y-de-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),Yt==null?void 0:Yt.dataType){var ce=he?he.getBBox():{height:0};Se.addShape("text",{attrs:{text:Yt.dataType,x:Ce.x+Zt,y:ue.y-de-ce.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(Yt==null?void 0:Yt.subLabel)&&Se.addShape("text",{attrs:{text:Yt.subLabel,x:Ce.x+Zt,y:ue.y+de+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),me},update:void 0},"single-edge"),te.default.registerEdge("flow-line",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=(Yt||{}).style,Dn=vn===void 0?{}:vn,zn=Se.addShape("path",{attrs:{stroke:Dn.stroke,endArrow:Dn.endArrow,path:[["M",Wt.x,Wt.y],["L",Wt.x,(Wt.y+ue.y)/2],["L",ue.x,(Wt.y+ue.y)/2],["L",ue.x,ue.y]]}});return zn}});var On=function(){return On=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},On.apply(this,arguments)},Vn={show:!1,size:[150,100],type:"keyShape"},Xn=function(Yt,Se,Wt){var ue,vn;return Wt&&Wt.current&&(ue=Wt.current.offsetWidth,vn=Wt.current.offsetHeight||500),!Yt&&!ue||!Se&&!vn?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[Yt||ue||500,Se||vn||500]},$e=function(Yt,Se){if(!(!Se||Se.destroyed)&&Yt&&Yt.show){var Wt=Object.assign(Vn,Yt),ue=new te.default.Minimap(On({},Wt));return Se.addPlugin(ue),ue}};function rn(zt,Yt,Se){var Wt=Object(at.useRef)(),ue=Yt.data,vn=Yt.nodeStyle,Dn=Yt.nodeAnchorPoints,zn=Yt.nodeType,Gn=Yt.edgeType,Ze=Yt.edgeStyle,Ce=Yt.width,R=Yt.height,yt=Yt.layout,$t=Yt.minimapCfg,me=Yt.behaviors,Zt=Yt.nodeLabelCfg,de=Yt.edgeLabelCfg,he;return Object(at.useEffect)(function(){zt&&!zt.destroyed&&(zt.changeData(ue),zt.layout())},[ue]),Object(at.useEffect)(function(){zt&&!zt.destroyed&&zt.getNodes().forEach(function(ce){zt.updateItem(ce,{type:zn,style:vn,anchorPoints:Dn,labelCfg:Zt})})},[vn,Dn,zn]),Object(at.useEffect)(function(){zt&&!zt.destroyed&&zt.getEdges().forEach(function(ce){zt.updateItem(ce,{type:Gn,style:Ze,labelCfg:de})})},[Ze,Gn]),Object(at.useEffect)(function(){if(zt&&!zt.destroyed){var ce=Xn(Ce,R,Se);zt.changeSize(ce[0],ce[1])}},[Se,Ce,R]),Object(at.useEffect)(function(){zt&&!zt.destroyed&&zt.updateLayout(yt)},[yt]),Object(at.useEffect)(function(){if(!(!$t||!zt||zt.destroyed))if($t.show)he=$e($t,zt),he&&he.updateCanvas();else{var ce=zt.get("plugins")[0];ce&&zt.removePlugin(ce)}},[$t]),Object(at.useEffect)(function(){if(zt&&!zt.destroyed){var ce=zt.get("modes").default,Me=[];ce.forEach(function(ze){Object(e.isObject)(ze)?Me.push(ze.type):Object(e.isString)(ze)&&Me.push(ze)}),zt.removeBehaviors(Me,"default"),zt.addBehaviors(me,"default")}},[me]),Object(at.useEffect)(function(){if(Wt.current=zt,zt&&!zt.destroyed)return function(){zt.destroy(),zt=void 0}},[]),{graphHook:Wt}}var on={hover:{stroke:"#1890ff",lineWidth:2}},$n={fill:"#91d5ff",stroke:"#40a9ff",radius:5},vr={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},ar={type:"compactBox",direction:"TB",getId:function(Yt){return Yt.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},rr={style:{fill:"#000",fontSize:12}},Fr=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,Gn=zn===void 0?"rect":zn,Ze=Yt.edgeType,Ce=Ze===void 0?"flow-line":Ze,R=Yt.collapseExpand,yt=R===void 0?!1:R,$t=Yt.nodeSize,me=$t===void 0?[120,40]:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?rr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?rr:he,Me=Yt.layout,ze=Me===void 0?ar:Me,Ve=Yt.enableEdit,ke=Ve===void 0?!1:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?$n:De,fn=Yt.edgeStyle,nn=fn===void 0?vr:fn,dn=Yt.nodeStateStyles,Sn=dn===void 0?on:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?on:Pe,Le=Yt.handleNodeClick,Be=Yt.handleEdgeClick,en=Yt.handleNodeHover,sn=Yt.handleNodeUnHover,Ue=Yt.handleEdgeHover,ln=Yt.handleEdgeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Gn,edgeType:Ce,collapseExpand:yt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,layout:ze,enableEdit:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleNodeClick:Le,handleEdgeClick:Be,handleNodeHover:en,handleNodeUnHover:sn,handleEdgeHover:Ue,handleEdgeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(at.useEffect)(function(){var Hr=Xn(vn,Dn,lr);return(!An||An.destroyed)&&(Gn==="icon-node"&&Qe({enableEdit:ke}),An=new te.default.TreeGraph({container:lr.current,width:Hr[0],height:Hr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:Gn,size:me,style:cn,labelCfg:de},defaultEdge:{type:Ce,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ze}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),yt&&An.addBehaviors({type:"collapse-expand"},"default"),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),sn&&sn(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item,oi=Gr.target,ai=oi.get("type"),Zr=oi.get("name");if(ai==="marker"){var Xi=Mr.getModel();if(Zr==="add-item"){Xi.children||(Xi.children=[]);var $i=Math.random().toString(36).slice(-8);Xi.children.push({id:$i,label:$i}),An.updateChild(Xi,Xi.id)}else Zr==="remove-item"&&An.removeChild(Xi.id)}Le&&Le(Mr,An)}),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),Ue&&Ue(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Be&&Be(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},Ar=Fr,wr={hover:{stroke:"#1890ff",lineWidth:2}},xr=[120,40],Er={stroke:"#40a9ff"},Ir=[[.5,0],[.5,1]],Lr={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Pr={type:"dagre",rankdir:"TB",nodesepFunc:function(Yt){return 0},ranksepFunc:function(Yt){return 0},controlPoints:!0},Dr={style:{fill:"#000",fontSize:12}},ri=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,Gn=zn===void 0?"modelRect":zn,Ze=Yt.edgeType,Ce=Ze===void 0?"polyline":Ze,R=Yt.behaviors,yt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?xr:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?Dr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?Dr:he,Me=Yt.nodeAnchorPoints,ze=Me===void 0?Ir:Me,Ve=Yt.layout,ke=Ve===void 0?Pr:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?Er:De,fn=Yt.edgeStyle,nn=fn===void 0?Lr:fn,dn=Yt.nodeStateStyles,Sn=dn===void 0?wr:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?wr:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,sn=Yt.handleNodeClick,Ue=Yt.handleNodeHover,ln=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Gn,edgeType:Ce,behaviors:yt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:Ue,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(at.useEffect)(function(){var Hr=Xn(vn,Dn,lr);return(!An||An.destroyed)&&(An=new te.default.Graph({container:lr.current,width:Hr[0],height:Hr[1],modes:{default:yt},defaultNode:{type:Gn,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Ce,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),Be&&Be(Mr,An)}),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),Ue&&Ue(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Le&&Le(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item;sn&&sn(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},vi=ri,ii={hover:{stroke:"#1890ff",lineWidth:2}},Si=[150,30],Ui={stroke:"#72CC4A",fill:"#f00"},Yi=[[.5,0],[.5,1]],Bi={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Di={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},ve={style:{fill:"#000000A6",fontSize:10}},F=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,Gn=zn===void 0?"round-rect":zn,Ze=Yt.edgeType,Ce=Ze===void 0?"fund-polyline":Ze,R=Yt.behaviors,yt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?Si:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?ve:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?ve:he,Me=Yt.nodeAnchorPoints,ze=Me===void 0?Yi:Me,Ve=Yt.layout,ke=Ve===void 0?Di:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?Ui:De,fn=Yt.edgeStyle,nn=fn===void 0?Bi:fn,dn=Yt.nodeStateStyles,Sn=dn===void 0?ii:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?ii:Pe,Le=Yt.colorMap,Be=Le===void 0?{}:Le,en=Yt.handleEdgeClick,sn=Yt.handleEdgeHover,Ue=Yt.handleEdgeUnHover,ln=Yt.handleNodeClick,mn=Yt.handleNodeHover,Wn=Yt.handleNodeUnHover,An=Yt.handleCanvasClick,In=Yt.graphRef,lr,Hr=a.a.useRef(null),Gr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Gn,edgeType:Ce,behaviors:yt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,colorMap:Be,handleEdgeClick:en,handleEdgeHover:sn,handleEdgeUnHover:Ue,handleNodeClick:ln,handleNodeHover:mn,handleNodeUnHover:Wn,handleCanvasClick:An,graphRef:In};return rn(lr,Gr,Hr),Object(at.useEffect)(function(){var Mr=Xn(vn,Dn,Hr);(!lr||lr.destroyed)&&(lr=new te.default.Graph({container:Hr.current,width:Mr[0],height:Mr[1],modes:{default:yt},defaultNode:{type:Gn,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Ce,style:nn,colorMap:Be,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),In&&(In.current=lr)),$e(tn,lr),lr.data(Se),lr.render();var oi=lr.getEdges();return oi.forEach(function(ai){var Zr=ai.getKeyShape(),Xi=Zr.attr("stroke"),$i=ai.getTarget();$i.update({style:{stroke:Xi}})}),lr.fitView(),lr.on("edge:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!0),sn&&sn(Zr,lr)}),lr.on("edge:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Ue&&Ue(Zr,lr)}),lr.on("edge:click",function(ai){var Zr=ai.item;en&&en(Zr,lr)}),lr.on("node:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),mn&&mn(Zr,lr)}),lr.on("node:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Wn&&Wn(Zr,lr)}),lr.on("node:click",function(ai){var Zr=ai.item;ln&&ln(Zr,lr)}),lr.on("canvas:click",function(ai){An&&An(lr)}),function(){return lr.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:Hr}))},B=F,Z={hover:{stroke:"#1890ff",lineWidth:2}},ut=[120,40],Bt={stroke:"#40a9ff"},Jt=[[0,.5],[1,.5]],ie={stroke:"#ccc",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#ccc"}},se={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(Yt){return 100}},Te={style:{fill:"#000",fontSize:12}},Ee=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,Gn=zn===void 0?"card-node":zn,Ze=Yt.edgeType,Ce=Ze===void 0?"cubic-horizontal":Ze,R=Yt.behaviors,yt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?ut:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?Te:Zt,he=Yt.nodeAnchorPoints,ce=he===void 0?Jt:he,Me=Yt.layout,ze=Me===void 0?se:Me,Ve=Yt.minimapCfg,ke=Yt.nodeStyle,tn=ke===void 0?Bt:ke,De=Yt.edgeStyle,cn=De===void 0?ie:De,fn=Yt.nodeStateStyles,nn=fn===void 0?Z:fn,dn=Yt.edgeStateStyles,Sn=dn===void 0?Z:dn,Pe=Yt.collapseExpand,le=Pe===void 0?!0:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,sn=Yt.handleNodeClick,Ue=Yt.handleNodeHover,ln=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In=a.a.useRef(null),lr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Gn,edgeType:Ce,behaviors:yt,nodeSize:me,nodeLabelCfg:de,nodeAnchorPoints:ce,layout:ze,minimapCfg:Ve,nodeStyle:tn,edgeStyle:cn,nodeStateStyles:nn,edgeStateStyles:Sn,collapseExpand:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:Ue,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn};return rn(An,lr,In),Object(at.useEffect)(function(){var Hr=Xn(vn,Dn,In);if((!An||An.destroyed)&&(An=new te.default.TreeGraph({container:In.current,width:Hr[0],height:Hr[1],modes:{default:yt},defaultNode:{type:Gn,size:me,style:tn,anchorPoints:ce,labelCfg:de},defaultEdge:{type:Ce,style:cn},nodeStateStyles:nn,edgeStateStyles:Sn,layout:ze}),Wn&&(Wn.current=An)),$e(Ve,An),An.data(Se),An.render(),An.fitView(),le){var Gr=function(oi){var ai=oi.item;oi.target.get("name")==="collapse-icon"?(An.updateItem(ai,{collapsed:!ai.getModel().collapsed}),An.layout()):sn&&sn(ai,An)};An.on("node:click",function(Mr){Gr(Mr)}),An.on("node:touchstart",function(Mr){Gr(Mr)})}return An.on("edge:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!0),Be&&Be(oi,An)}),An.on("edge:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),en&&en(oi,An)}),An.on("edge:click",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("edge:touchstart",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("node:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),Ue&&Ue(oi,An)}),An.on("node:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),ln&&ln(oi,An)}),An.on("canvas:click",function(Mr){mn&&mn(An)}),An.on("canvas:touchstart",function(Mr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:In}))},un=Ee,xn={Area:ct,Bar:Mt,Box:bt,Bullet:it,Column:H,Funnel:g,Histogram:$,Line:At,Liquid:Ut,Heatmap:Ht,Pie:ye,Progress:kn,Radar:Mn,RingProgress:Kn,Rose:nr,Scatter:Vr,TinyArea:Fi,TinyColumn:Ci,TinyLine:Ji,Waterfall:Br,WordCloud:Kr,Sunburst:$r,DualAxes:Vi,Stock:gi,RadialBar:zi,Gauge:Ke,Sankey:Wi,Treemap:no,MultiView:uo,BidirectionalBar:Kt,OrganizationTreeGraph:Ar,DagreGraph:vi,IndentedTree:un,DagreFundFlowGraph:B,G2:A.G2}},"0JQy":function(Un,_t){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",v="["+z+"]",b="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+S+")",M="[^"+z+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=f+"?",d="["+i+"]?",E="(?:"+n+"(?:"+[M,I,y].join("|")+")"+d+s+")*",O=d+s+E,C="(?:"+[M+b+"?",b,I,y,v].join("|")+")",p=RegExp(S+"(?="+S+")|"+C+O,"g");function x(T){return T.match(p)||[]}Un.exports=x},"0Xep":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at}),z.d(_t,"d",function(){return a}),z.d(_t,"b",function(){return A}),z.d(_t,"c",function(){return e});var at=0,a=1/2,A=1/2,e=.05},"1//c":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("aFU3");function a(A,e,i){var v=new at.Event(e,i);v.target=A,v.propagationPath.push(A),A.emitDelegation(e,v);for(var b=A.getParent();b;)b.emitDelegation(e,v),v.propagationPath.push(b),b=b.getParent()}},"17Tr":function(Un,_t,z){"use strict";var at=z("uCX8");z.d(_t,"Annotation",function(){return at});var a=z("fP0w");z.d(_t,"Axis",function(){return a});var A=z("/3+T");z.d(_t,"Crosshair",function(){return A});var e=z("x3EW");z.d(_t,"Grid",function(){return e});var i=z("5bFI");z.d(_t,"Legend",function(){return i});var v=z("Ch+T");z.d(_t,"Tooltip",function(){return v});var b=z("NmWf"),S=z("MeYt"),f=z("de35"),M=z("fFDA");z.d(_t,"Slider",function(){return M.a});var I=z("3u8d");z.d(_t,"Scrollbar",function(){return I.a});var y=z("vk7d"),n=z.n(y),s=z("uzHj"),d=z.n(s),E=z("1//c");z.d(_t,"propagationDelegate",function(){return E.a});var O=z("u60a");z.d(_t,"TOOLTIP_CSS_CONST",function(){return O})},"1MZV":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return A});var at=new Map;function a(x,T){at.set(x,T)}function A(x){return at.get(x)}var e=function(x){var T=x.attr(),N=T.x,Y=T.y,q=T.width,nt=T.height;return{x:N,y:Y,width:q,height:nt}},i=function(x){var T=x.attr(),N=T.x,Y=T.y,q=T.r;return{x:N-q,y:Y-q,width:q*2,height:q*2}},v=z("EYNi");function b(x,T){return!x||!T?x||T:{minX:Math.min(x.minX,T.minX),minY:Math.min(x.minY,T.minY),maxX:Math.max(x.maxX,T.maxX),maxY:Math.max(x.maxY,T.maxY)}}function S(x,T){var N=x.get("startArrowShape"),Y=x.get("endArrowShape"),q=null,nt=null;return N&&(q=N.getCanvasBBox(),T=b(T,q)),Y&&(nt=Y.getCanvasBBox(),T=b(T,nt)),T}var f=function(x){for(var T=x.attr(),N=T.points,Y=[],q=[],nt=0;nt<N.length;nt++){var vt=N[nt];Y.push(vt[0]),q.push(vt[1])}var ht=v.f.getBBoxByArray(Y,q),St=ht.x,wt=ht.y,xt=ht.width,ft=ht.height,Ft={minX:St,minY:wt,maxX:St+xt,maxY:wt+ft};return Ft=S(x,Ft),{x:Ft.minX,y:Ft.minY,width:Ft.maxX-Ft.minX,height:Ft.maxY-Ft.minY}},M=function(x){for(var T=x.attr(),N=T.points,Y=[],q=[],nt=0;nt<N.length;nt++){var vt=N[nt];Y.push(vt[0]),q.push(vt[1])}return v.f.getBBoxByArray(Y,q)},I=z("vIgC"),y=function(x){var T=x.attr(),N=T.x,Y=T.y,q=T.text,nt=T.fontSize,vt=T.lineHeight,ht=T.font;ht||(ht=Object(I.a)(T));var St=Object(I.c)(q,ht),wt;if(!St)wt={x:N,y:Y,width:0,height:0};else{var xt=T.textAlign,ft=T.textBaseline,Ft=Object(I.b)(q,nt,vt),kt={x:N,y:Y-Ft};xt&&(xt==="end"||xt==="right"?kt.x-=St:xt==="center"&&(kt.x-=St/2)),ft&&(ft==="top"?kt.y+=Ft:ft==="middle"&&(kt.y+=Ft/2)),wt={x:kt.x,y:kt.y,width:St,height:Ft}}return wt},n=z("LvGN"),s=z("iTfj");function d(x,T){for(var N=[],Y=[],q=[],nt=0;nt<x.length;nt++){var vt=x[nt],ht=vt.currentPoint,St=vt.params,wt=vt.prePoint,xt=void 0;switch(vt.command){case"Q":xt=v.e.box(wt[0],wt[1],St[1],St[2],St[3],St[4]);break;case"C":xt=v.b.box(wt[0],wt[1],St[1],St[2],St[3],St[4],St[5],St[6]);break;case"A":var ft=vt.arcParams;xt=v.a.box(ft.cx,ft.cy,ft.rx,ft.ry,ft.xRotation,ft.startAngle,ft.endAngle);break;default:N.push(ht[0]),Y.push(ht[1]);break}xt&&(vt.box=xt,N.push(xt.x,xt.x+xt.width),Y.push(xt.y,xt.y+xt.height)),T&&(vt.command==="L"||vt.command==="M")&&vt.prePoint&&vt.nextPoint&&q.push(vt)}N=N.filter(function(dt){return!Number.isNaN(dt)}),Y=Y.filter(function(dt){return!Number.isNaN(dt)});var Ft=Math.min.apply(null,N),kt=Math.min.apply(null,Y),Ot=Math.max.apply(null,N),X=Math.max.apply(null,Y);if(q.length===0)return{x:Ft,y:kt,width:Ot-Ft,height:X-kt};for(var nt=0;nt<q.length;nt++){var vt=q[nt],ht=vt.currentPoint,ct=void 0;ht[0]===Ft?(ct=E(vt,T),Ft=Ft-ct.xExtra):ht[0]===Ot&&(ct=E(vt,T),Ot=Ot+ct.xExtra),ht[1]===kt?(ct=E(vt,T),kt=kt-ct.yExtra):ht[1]===X&&(ct=E(vt,T),X=X+ct.yExtra)}return{x:Ft,y:kt,width:Ot-Ft,height:X-kt}}function E(x,T){var N=x.prePoint,Y=x.currentPoint,q=x.nextPoint,nt=Math.pow(Y[0]-N[0],2)+Math.pow(Y[1]-N[1],2),vt=Math.pow(Y[0]-q[0],2)+Math.pow(Y[1]-q[1],2),ht=Math.pow(N[0]-q[0],2)+Math.pow(N[1]-q[1],2),St=Math.acos((nt+vt-ht)/(2*Math.sqrt(nt)*Math.sqrt(vt)));if(!St||Math.sin(St)===0||Object(s.isNumberEqual)(St,0))return{xExtra:0,yExtra:0};var wt=Math.abs(Math.atan2(q[1]-Y[1],q[0]-Y[0])),xt=Math.abs(Math.atan2(q[0]-Y[0],q[1]-Y[1]));wt=wt>Math.PI/2?Math.PI-wt:wt,xt=xt>Math.PI/2?Math.PI-xt:xt;var ft={xExtra:Math.cos(St/2-wt)*(T/2*(1/Math.sin(St/2)))-T/2||0,yExtra:Math.cos(xt-St/2)*(T/2*(1/Math.sin(St/2)))-T/2||0};return ft}var O=function(x){var T=x.attr(),N=T.path,Y=T.stroke,q=Y?T.lineWidth:0,nt=x.get("segments")||Object(n.e)(N),vt=d(nt,q),ht=vt.x,St=vt.y,wt=vt.width,xt=vt.height,ft={minX:ht,minY:St,maxX:ht+wt,maxY:St+xt};return ft=S(x,ft),{x:ft.minX,y:ft.minY,width:ft.maxX-ft.minX,height:ft.maxY-ft.minY}},C=function(x){var T=x.attr(),N=T.x1,Y=T.y1,q=T.x2,nt=T.y2,vt=Math.min(N,q),ht=Math.max(N,q),St=Math.min(Y,nt),wt=Math.max(Y,nt),xt={minX:vt,maxX:ht,minY:St,maxY:wt};return xt=S(x,xt),{x:xt.minX,y:xt.minY,width:xt.maxX-xt.minX,height:xt.maxY-xt.minY}},p=function(x){var T=x.attr(),N=T.x,Y=T.y,q=T.rx,nt=T.ry;return{x:N-q,y:Y-nt,width:q*2,height:nt*2}};a("rect",e),a("image",e),a("circle",i),a("marker",i),a("polyline",f),a("polygon",M),a("text",y),a("path",O),a("line",C),a("ellipse",p)},"24YM":function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.SensorTabIndex=_t.SensorClassName=_t.SizeSensorId=void 0;var at="size-sensor-id";_t.SizeSensorId=at;var a="size-sensor-object";_t.SensorClassName=a;var A="-1";_t.SensorTabIndex=A},"3T7b":function(Un,_t){},"3u8d":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return b});var at=z("mrSG"),a=z("fIp6"),A=z("iTfj"),e=z("MeYt"),i={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},v={default:i,hover:{thumbColor:"rgba(0,0,0,0.2)"}},b=function(S){Object(at.b)(f,S);function f(){var M=S!==null&&S.apply(this,arguments)||this;return M.clearEvents=A.noop,M.onStartEvent=function(I){return function(y){M.isMobile=I,y.originalEvent.preventDefault();var n=I?Object(A.get)(y.originalEvent,"touches.0.clientX"):y.clientX,s=I?Object(A.get)(y.originalEvent,"touches.0.clientY"):y.clientY;M.startPos=M.cfg.isHorizontal?n:s,M.bindLaterEvent()}},M.bindLaterEvent=function(){var I=M.getContainerDOM(),y=[];M.isMobile?y=[Object(a.a)(I,"touchmove",M.onMouseMove),Object(a.a)(I,"touchend",M.onMouseUp),Object(a.a)(I,"touchcancel",M.onMouseUp)]:y=[Object(a.a)(I,"mousemove",M.onMouseMove),Object(a.a)(I,"mouseup",M.onMouseUp),Object(a.a)(I,"mouseleave",M.onMouseUp)],M.clearEvents=function(){y.forEach(function(n){n.remove()})}},M.onMouseMove=function(I){var y=M.cfg,n=y.isHorizontal,s=y.thumbOffset;I.preventDefault();var d=M.isMobile?Object(A.get)(I,"touches.0.clientX"):I.clientX,E=M.isMobile?Object(A.get)(I,"touches.0.clientY"):I.clientY,O=n?d:E,C=O-M.startPos;M.startPos=O,M.updateThumbOffset(s+C)},M.onMouseUp=function(I){I.preventDefault(),M.clearEvents()},M.onTrackClick=function(I){var y=M.cfg,n=y.isHorizontal,s=y.x,d=y.y,E=y.thumbLen,O=M.getContainerDOM(),C=O.getBoundingClientRect(),p=I.clientX,x=I.clientY,T=n?p-C.left-s-E/2:x-C.top-d-E/2,N=M.validateRange(T);M.updateThumbOffset(N)},M.onThumbMouseOver=function(){var I=M.cfg.theme.hover.thumbColor;M.getElementByLocalId("thumb").attr("stroke",I),M.draw()},M.onThumbMouseOut=function(){var I=M.cfg.theme.default.thumbColor;M.getElementByLocalId("thumb").attr("stroke",I),M.draw()},M}return f.prototype.setRange=function(M,I){this.set("minLimit",M),this.set("maxLimit",I);var y=this.getValue(),n=Object(A.clamp)(y,M,I);y!==n&&!this.get("isInit")&&this.setValue(n)},f.prototype.getRange=function(){var M=this.get("minLimit")||0,I=this.get("maxLimit")||1;return{min:M,max:I}},f.prototype.setValue=function(M){var I=this.getRange(),y=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Object(A.clamp)(M,I.min,I.max)}),this.delegateEmit("valuechange",{originalValue:y,value:this.getValue()})},f.prototype.getValue=function(){return Object(A.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},f.prototype.getDefaultCfg=function(){var M=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},M),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:v})},f.prototype.renderInner=function(M){this.renderTrackShape(M),this.renderThumbShape(M)},f.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},f.prototype.initEvent=function(){this.bindEvents()},f.prototype.renderTrackShape=function(M){var I=this.cfg,y=I.trackLen,n=I.theme,s=n===void 0?{default:{}}:n,d=s.default,E=d.lineCap,O=d.trackColor,C=d.size,p=this.get("isHorizontal")?{x1:0+C/2,y1:C/2,x2:y-C/2,y2:C/2,lineWidth:C,stroke:O,lineCap:E}:{x1:C/2,y1:0+C/2,x2:C/2,y2:y-C/2,lineWidth:C,stroke:O,lineCap:E};return this.addShape(M,{id:this.getElementId("track"),name:"track",type:"line",attrs:p})},f.prototype.renderThumbShape=function(M){var I=this.cfg,y=I.thumbOffset,n=I.thumbLen,s=I.theme,d=s===void 0?{default:{}}:s,E=d.default,O=E.size,C=E.lineCap,p=E.thumbColor,x=this.get("isHorizontal")?{x1:y+O/2,y1:O/2,x2:y+n-O/2,y2:O/2,lineWidth:O,stroke:p,lineCap:C,cursor:"default"}:{x1:O/2,y1:y+O/2,x2:O/2,y2:y+n-O/2,lineWidth:O,stroke:p,lineCap:C,cursor:"default"};return this.addShape(M,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:x})},f.prototype.bindEvents=function(){var M=this.get("group");M.on("mousedown",this.onStartEvent(!1)),M.on("mouseup",this.onMouseUp),M.on("touchstart",this.onStartEvent(!0)),M.on("touchend",this.onMouseUp);var I=M.findById(this.getElementId("track"));I.on("click",this.onTrackClick);var y=M.findById(this.getElementId("thumb"));y.on("mouseover",this.onThumbMouseOver),y.on("mouseout",this.onThumbMouseOut)},f.prototype.getContainerDOM=function(){var M=this.get("container"),I=M&&M.get("canvas");return I&&I.get("container")},f.prototype.validateRange=function(M){var I=this.cfg,y=I.thumbLen,n=I.trackLen,s=M;return M+y>n?s=n-y:M+y<y&&(s=0),s},f.prototype.draw=function(){var M=this.get("container"),I=M&&M.get("canvas");I&&I.draw()},f.prototype.updateThumbOffset=function(M){var I=this.cfg,y=I.thumbOffset,n=I.isHorizontal,s=I.thumbLen,d=I.size,E=this.validateRange(M);if(E!==y){var O=this.getElementByLocalId("thumb");n?O.attr({x1:E+d/2,x2:E+s-d/2}):O.attr({y1:E+d/2,y2:E+s-d/2}),this.emitOffsetChange(E)}},f.prototype.emitOffsetChange=function(M){var I=this.cfg,y=I.thumbOffset,n=I.trackLen,s=I.thumbLen;this.cfg.thumbOffset=M,this.emit("scrollchange",{thumbOffset:M,ratio:Object(A.clamp)(M/(n-s),0,1)}),this.delegateEmit("valuechange",{originalValue:y,value:M})},f}(e.a)},"46lQ":function(Un,_t,z){"use strict";var at=z("QG4C"),a;(function(i){i.DEV="DEV",i.BETA="BETA",i.STABLE="STABLE"})(a||(a={}));function A(i,v){console.warn(i===a.DEV?"Plot '"+v+"' is in DEV stage, just give us issues.":i===a.BETA?"Plot '"+v+"' is in BETA stage, DO NOT use it in production env.":i===a.STABLE?"Plot '"+v+`' is in STABLE stage, import it by "import { `+v+` } from '@antv/g2plot'".`:"invalid Stage type.")}var e=function(){function i(){}return Object.defineProperty(i,"MultiView",{get:function(){return A(a.STABLE,"MultiView"),at.a},enumerable:!1,configurable:!0}),i}()},"4Olw":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at});function at(a,A){return a.views.find(function(e){return e.id===A})}},"4cbP":function(Un,_t){},"5HRO":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("iTfj");function a(A,e){if(A===!1)return{fields:!1};var i=Object(at.get)(A,"fields"),v=Object(at.get)(A,"formatter");return v&&!i&&(i=e),{fields:i,formatter:v}}},"5OoT":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("iTfj");function a(A,e){return!Object(at.isNumber)(A)||!Object(at.isNumber)(e)?"-":A===e?"100%":A===0?"\u221E":e===0?"-\u221E":(100*e/A).toFixed(2)+"%"}},"5UbV":function(Un,_t,z){"use strict";z.d(_t,"c",function(){return a}),z.d(_t,"a",function(){return A}),z.d(_t,"h",function(){return e}),z.d(_t,"k",function(){return i}),z.d(_t,"j",function(){return v}),z.d(_t,"b",function(){return b}),z.d(_t,"g",function(){return S}),z.d(_t,"e",function(){return f}),z.d(_t,"i",function(){return y}),z.d(_t,"d",function(){return d}),z.d(_t,"m",function(){return E}),z.d(_t,"l",function(){return O}),z.d(_t,"f",function(){return C});var at=z("iTfj");function a(p){var x=0,T=0,N=0,Y=0;return Object(at.isNumber)(p)?x=T=N=Y=p:Object(at.isArray)(p)&&(x=p[0],N=Object(at.isNil)(p[1])?p[0]:p[1],Y=Object(at.isNil)(p[2])?p[0]:p[2],T=Object(at.isNil)(p[3])?N:p[3]),[x,N,Y,T]}function A(p){for(var x=p.childNodes,T=x.length,N=T-1;N>=0;N--)p.removeChild(x[N])}function e(p,x){return!!p.className.match(new RegExp("(\\s|^)"+x+"(\\s|$)"))}function i(p){var x=p.start,T=p.end,N=Math.min(x.x,T.x),Y=Math.min(x.y,T.y),q=Math.max(x.x,T.x),nt=Math.max(x.y,T.y);return{x:N,y:Y,minX:N,minY:Y,maxX:q,maxY:nt,width:q-N,height:nt-Y}}function v(p){var x=p.map(function(vt){return vt.x}),T=p.map(function(vt){return vt.y}),N=Math.min.apply(Math,x),Y=Math.min.apply(Math,T),q=Math.max.apply(Math,x),nt=Math.max.apply(Math,T);return{x:N,y:Y,minX:N,minY:Y,maxX:q,maxY:nt,width:q-N,height:nt-Y}}function b(p,x,T,N){var Y=p+T,q=x+N;return{x:p,y:x,width:T,height:N,minX:p,minY:x,maxX:isNaN(Y)?0:Y,maxY:isNaN(q)?0:q}}function S(p,x,T){return(1-T)*p+x*T}function f(p,x,T){return{x:p.x+Math.cos(T)*x,y:p.y+Math.sin(T)*x}}function M(p,x){var T=x.x-p.x,N=x.y-p.y;return Math.sqrt(T*T+N*N)}var I=function(x){return new Promise(function(T){setTimeout(T,x)})},y=function(x,T,N){return N===void 0&&(N=Math.pow(Number.EPSILON,.5)),[x,T].includes(Infinity)?Math.abs(x)===Math.abs(T):Math.abs(x-T)<N};function n(p,x){var T=Math.max(p.minX,x.minX),N=Math.max(p.minY,x.minY),Y=Math.min(p.maxX,x.maxX),q=Math.min(p.maxY,x.maxY);return b(T,N,Y-T,q-N)}function s(p,x){var T=Math.min(p.minX,x.minX),N=Math.min(p.minY,x.minY),Y=Math.max(p.maxX,x.maxX),q=Math.max(p.maxY,x.maxY);return b(T,N,Y-T,q-N)}function d(p){var x=p.getClip(),T=x&&x.getBBox(),N;if(!p.isGroup())N=p.getBBox();else{var Y=Infinity,q=-Infinity,nt=Infinity,vt=-Infinity,ht=p.getChildren();ht.length>0?Object(at.each)(ht,function(St){if(St.get("visible")){if(St.isGroup()&&St.get("children").length===0)return!0;var wt=d(St),xt=St.applyToMatrix([wt.minX,wt.minY,1]),ft=St.applyToMatrix([wt.minX,wt.maxY,1]),Ft=St.applyToMatrix([wt.maxX,wt.minY,1]),kt=St.applyToMatrix([wt.maxX,wt.maxY,1]),Ot=Math.min(xt[0],ft[0],Ft[0],kt[0]),X=Math.max(xt[0],ft[0],Ft[0],kt[0]),ct=Math.min(xt[1],ft[1],Ft[1],kt[1]),dt=Math.max(xt[1],ft[1],Ft[1],kt[1]);Ot<Y&&(Y=Ot),X>q&&(q=X),ct<nt&&(nt=ct),dt>vt&&(vt=dt)}}):(Y=0,q=0,nt=0,vt=0),N=b(Y,nt,q-Y,vt-nt)}return T?n(N,T):N}function E(p,x){if(!(!p.getClip()&&!x.getClip())){var T=x.getClip();if(!T){p.setClip(null);return}var N={type:T.get("type"),attrs:T.attr()};p.setClip(N)}}function O(p){return p+"px"}function C(p,x,T,N){var Y=M(p,x),q=N/Y,nt=0;return T==="start"?nt=0-q:T==="end"&&(nt=1+q),{x:S(p.x,x.x,nt),y:S(p.y,x.y,nt)}}},"5bFI":function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Category",function(){return y}),z.d(_t,"Continuous",function(){return E}),z.d(_t,"Base",function(){return M});var at=z("mrSG"),a=z("iTfj"),A=z("BgvD"),e=z("jqgP"),i=z("l3hu"),v=z("L16w"),b=z("MeYt"),S=z("5UbV"),f=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var p=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},p),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},C.prototype.getLayoutBBox=function(){var p=O.prototype.getLayoutBBox.call(this),x=this.get("maxWidth"),T=this.get("maxHeight"),N=p.width,Y=p.height;return x&&(N=Math.min(N,x)),T&&(Y=Math.min(Y,T)),Object(S.b)(p.minX,p.minY,N,Y)},C.prototype.setLocation=function(p){this.set("x",p.x),this.set("y",p.y),this.resetLocation()},C.prototype.resetLocation=function(){var p=this.get("x"),x=this.get("y"),T=this.get("offsetX"),N=this.get("offsetY");this.moveElementTo(this.get("group"),{x:p+T,y:x+N})},C.prototype.applyOffset=function(){this.resetLocation()},C.prototype.getDrawPoint=function(){return this.get("currentPoint")},C.prototype.setDrawPoint=function(p){return this.set("currentPoint",p)},C.prototype.renderInner=function(p){this.resetDraw(),this.get("title")&&this.drawTitle(p),this.drawLegendContent(p),this.get("background")&&this.drawBackground(p)},C.prototype.drawBackground=function(p){var x=this.get("background"),T=p.getBBox(),N=Object(S.c)(x.padding),Y=Object(at.a)({x:0,y:0,width:T.width+N[1]+N[3],height:T.height+N[0]+N[2]},x.style),q=this.addShape(p,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:Y});q.toBack()},C.prototype.drawTitle=function(p){var x=this.get("currentPoint"),T=this.get("title"),N=T.spacing,Y=T.style,q=T.text,nt=this.addShape(p,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Object(at.a)({text:q,x:x.x,y:x.y},Y)}),vt=nt.getBBox();this.set("currentPoint",{x:x.x,y:vt.maxY+N})},C.prototype.resetDraw=function(){var p=this.get("background"),x={x:0,y:0};if(p){var T=Object(S.c)(p.padding);x.x=T[3],x.y=T[0]}this.set("currentPoint",x)},C}(b.a),M=f,I=function(O){Object(at.b)(C,O);function C(){var p=O!==null&&O.apply(this,arguments)||this;return p.currentPageIndex=1,p.totalPagesCnt=1,p.pageWidth=0,p.pageHeight=0,p.startX=0,p.startY=0,p.onNavigationBack=function(){var x=p.getElementByLocalId("item-group");if(p.currentPageIndex>1){p.currentPageIndex-=1,p.updateNavigation();var T=p.getCurrentNavigationMatrix();p.get("animate")?x.animate({matrix:T},100):x.attr({matrix:T})}},p.onNavigationAfter=function(){var x=p.getElementByLocalId("item-group");if(p.currentPageIndex<p.totalPagesCnt){p.currentPageIndex+=1,p.updateNavigation();var T=p.getCurrentNavigationMatrix();p.get("animate")?x.animate({matrix:T},100):x.attr({matrix:T})}},p}return C.prototype.getDefaultCfg=function(){var p=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},p),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:v.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:v.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:v.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:v.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:v.a.uncheckedColor},markerStyle:{fill:v.a.uncheckedColor,stroke:v.a.uncheckedColor}},inactive:{nameStyle:{fill:v.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},C.prototype.isList=function(){return!0},C.prototype.getItems=function(){return this.get("items")},C.prototype.setItems=function(p){this.update({items:p})},C.prototype.updateItem=function(p,x){Object(a.mix)(p,x),this.clear(),this.render()},C.prototype.clearItems=function(){var p=this.getElementByLocalId("item-group");p&&p.clear()},C.prototype.setItemState=function(p,x,T){p[x]=T;var N=this.getElementByLocalId("item-"+p.id);if(N){var Y=this.getItems(),q=Y.indexOf(p),nt=this.createOffScreenGroup(),vt=this.drawItem(p,q,this.getItemHeight(),nt);this.updateElements(vt,N),this.clearUpdateStatus(N)}},C.prototype.hasState=function(p,x){return!!p[x]},C.prototype.getItemStates=function(p){var x=this.get("itemStates"),T=[];return Object(a.each)(x,function(N,Y){p[Y]&&T.push(Y)}),T},C.prototype.clearItemsState=function(p){var x=this,T=this.getItemsByState(p);Object(a.each)(T,function(N){x.setItemState(N,p,!1)})},C.prototype.getItemsByState=function(p){var x=this,T=this.getItems();return Object(a.filter)(T,function(N){return x.hasState(N,p)})},C.prototype.drawLegendContent=function(p){this.processItems(),this.drawItems(p)},C.prototype.processItems=function(){var p=this.get("items");Object(a.each)(p,function(x){x.id||(x.id=x.name)})},C.prototype.drawItems=function(p){var x=this,T=this.addGroup(p,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),N=this.addGroup(T,{id:this.getElementId("item-group"),name:"legend-item-group"}),Y=this.getItemHeight(),q=this.get("itemWidth"),nt=this.get("itemSpacing"),vt=this.get("itemMarginBottom"),ht=this.get("currentPoint"),St=ht.x,wt=ht.y,xt=this.get("layout"),ft=this.get("items"),Ft=!1,kt=0,Ot=this.get("maxWidth"),X=this.get("maxHeight");Object(a.each)(ft,function(ct,dt){var pt=x.drawItem(ct,dt,Y,N),Mt=pt.getBBox(),tt=q||Mt.width;tt>kt&&(kt=tt),xt==="horizontal"?(Ot&&Ot<ht.x+tt-St&&(Ft=!0,ht.x=St,ht.y+=Y+vt),x.moveElementTo(pt,ht),ht.x+=tt+nt):(X&&X<ht.y+Y+vt-wt&&(Ft=!0,ht.x+=kt+nt,ht.y=wt,kt=0),x.moveElementTo(pt,ht),ht.y+=Y+vt)}),Ft&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=St,this.startY=wt,this.adjustNavigation(p,N))},C.prototype.getItemHeight=function(){var p=this.get("itemHeight");if(!p){var x=this.get("itemName");x&&(p=x.style.fontSize)}return p},C.prototype.drawMarker=function(p,x,T,N){var Y=Object(at.a)(Object(at.a)(Object(at.a)({x:0,y:N/2},x.style),{symbol:Object(a.get)(T.marker,"symbol","circle")}),Object(a.get)(T.marker,"style",{})),q=this.addShape(p,{type:"marker",id:this.getElementId("item-"+T.id+"-marker"),name:"legend-item-marker",attrs:Y}),nt=q.getBBox();q.attr("x",nt.width/2);var vt=q.attr(),ht=vt.stroke,St=vt.fill;return ht&&q.set("isStroke",!0),St&&q.set("isFill",!0),q},C.prototype.drawItemText=function(p,x,T,N,Y,q,nt){var vt=T.formatter,ht=Object(at.a)({x:q,y:Y/2,text:vt?vt(N[x],N,nt):N[x]},T.style);return this.addShape(p,{type:"text",id:this.getElementId("item-"+N.id+"-"+x),name:"legend-item-"+x,attrs:ht})},C.prototype.drawItem=function(p,x,T,N){var Y="item-"+p.id,q=this.addGroup(N,{name:"legend-item-container",id:this.getElementId("item-container-"+Y),delegateObject:{item:p,index:x}}),nt=this.addGroup(q,{name:"legend-item",id:this.getElementId(Y),delegateObject:{item:p,index:x}}),vt=this.get("marker"),ht=this.get("itemName"),St=this.get("itemValue"),wt=this.get("itemBackground"),xt=this.getLimitItemWidth(),ft=0;if(vt){var Ft=this.drawMarker(nt,vt,p,T);ft=Ft.getBBox().maxX+vt.spacing}if(ht){var kt=this.drawItemText(nt,"name",ht,p,T,ft,x);xt&&Object(A.a)(!0,kt,Object(a.clamp)(xt-ft,0,xt)),ft=kt.getBBox().maxX+ht.spacing}if(St){var Ot=this.drawItemText(nt,"value",St,p,T,ft,x);xt&&(St.alignRight?(Ot.attr({textAlign:"right",x:xt}),Object(A.a)(!0,Ot,Object(a.clamp)(xt-ft,0,xt),"head")):Object(A.a)(!0,Ot,Object(a.clamp)(xt-ft,0,xt)))}if(wt){var X=nt.getBBox(),ct=this.addShape(nt,{type:"rect",name:"legend-item-background",id:this.getElementId(Y+"-background"),attrs:Object(at.a)({x:0,y:0,width:X.width,height:T},wt.style)});ct.toBack()}return this.applyItemStates(p,nt),nt},C.prototype.adjustNavigation=function(p,x){var T=this,N=this.startX,Y=this.startY,q=this.get("layout"),nt=x.findAll(function(tt){return tt.get("name")==="legend-item"}),vt=this.get("maxWidth"),ht=this.get("maxHeight"),St=this.get("itemWidth"),wt=this.get("itemSpacing"),xt=this.getItemHeight(),ft=this.drawNavigation(p,q,"00/00",12),Ft=ft.getBBox(),kt={x:N,y:Y},Ot=1,X=0,ct=0,dt=0;if(q==="horizontal")this.pageHeight=xt,Object(a.each)(nt,function(tt){var lt=tt.getBBox(),it=St||lt.width;(X&&X<kt.x+it+wt||vt<kt.x+it+wt+Ft.width)&&(Ot===1&&(X=kt.x+wt,T.pageWidth=X,T.moveElementTo(ft,{x:vt-wt-Ft.width-Ft.minX,y:kt.y+xt/2-Ft.height/2-Ft.minY})),Ot+=1,kt.x=N,kt.y+=xt),T.moveElementTo(tt,kt),tt.getParent().setClip({type:"rect",attrs:{x:kt.x,y:kt.y,width:it+wt,height:xt}}),kt.x+=it+wt});else{var pt=this.get("itemMarginBottom");Object(a.each)(nt,function(tt){var lt=tt.getBBox();lt.width>ct&&(ct=lt.width)}),dt=ct,ct+=wt,vt&&(ct=Math.min(vt,ct),dt=Math.min(vt,dt)),this.pageWidth=ct,this.pageHeight=ht-Math.max(Ft.height,xt+pt);var Mt=Math.floor(this.pageHeight/(xt+pt));Object(a.each)(nt,function(tt,lt){lt!==0&&lt%Mt==0&&(Ot+=1,kt.x+=ct,kt.y=Y),T.moveElementTo(tt,kt),tt.getParent().setClip({type:"rect",attrs:{x:kt.x,y:kt.y,width:ct,height:xt}}),kt.y+=xt+pt}),this.totalPagesCnt=Ot,this.moveElementTo(ft,{x:N+dt/2-Ft.width/2-Ft.minX,y:ht-Ft.height-Ft.minY})}this.pageHeight&&this.pageWidth&&x.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=Ot,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(ft),x.attr("matrix",this.getCurrentNavigationMatrix())},C.prototype.drawNavigation=function(p,x,T,N){var Y={x:0,y:0},q=this.addGroup(p,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),nt=this.drawArrow(q,Y,"navigation-arrow-left",x==="horizontal"?"up":"left",N);nt.on("click",this.onNavigationBack);var vt=nt.getBBox();Y.x+=vt.width+2;var ht=this.addShape(q,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:Y.x,y:Y.y+N/2,text:T,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),St=ht.getBBox();Y.x+=St.width+2;var wt=this.drawArrow(q,Y,"navigation-arrow-right",x==="horizontal"?"down":"right",N);return wt.on("click",this.onNavigationAfter),q},C.prototype.updateNavigation=function(p){var x=this.currentPageIndex+"/"+this.totalPagesCnt,T=p?p.getChildren()[1]:this.getElementByLocalId("navigation-text"),N=p?p.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),Y=p?p.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),q=T.getBBox();T.attr("text",x);var nt=T.getBBox();T.attr("x",T.attr("x")-(nt.width-q.width)/2),N.attr("opacity",this.currentPageIndex===1?.45:1),N.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),Y.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),Y.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},C.prototype.drawArrow=function(p,x,T,N,Y){var q=x.x,nt=x.y,vt={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},ht=this.addShape(p,{type:"path",id:this.getElementId(T),name:T,attrs:{path:[["M",q+Y/2,nt],["L",q,nt+Y],["L",q+Y,nt+Y],["Z"]],fill:"#000",cursor:"pointer"}});return ht.attr("matrix",Object(e.e)({x:q+Y/2,y:nt+Y/2},vt[N])),ht},C.prototype.getCurrentNavigationMatrix=function(){var p=this,x=p.currentPageIndex,T=p.pageWidth,N=p.pageHeight,Y=this.get("layout"),q=Y==="horizontal"?{x:0,y:N*(1-x)}:{x:T*(1-x),y:0};return Object(e.f)(q)},C.prototype.applyItemStates=function(p,x){var T=this.getItemStates(p),N=T.length>0;if(N){var Y=x.getChildren(),q=this.get("itemStates");Object(a.each)(Y,function(nt){var vt=nt.get("name"),ht=vt.split("-")[2],St=Object(i.a)(p,ht,q);St&&(nt.attr(St),ht==="marker"&&!(nt.get("isStroke")&&nt.get("isFill"))&&(nt.get("isStroke")&&nt.attr("fill",null),nt.get("isFill")&&nt.attr("stroke",null)))})}},C.prototype.getLimitItemWidth=function(){var p=this.get("itemWidth"),x=this.get("maxItemWidth");return x?p&&(x=p<=x?p:x):p&&(x=p),x},C}(M),y=I,n=1.4,s=.4,d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var p=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},p),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:v.a.textColor,textBaseline:"middle",fontFamily:v.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:v.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},C.prototype.isSlider=function(){return!0},C.prototype.getValue=function(){return this.getCurrentValue()},C.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},C.prototype.setRange=function(p,x){this.update({min:p,max:x})},C.prototype.setValue=function(p){var x=this.getValue();this.set("value",p);var T=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(T),this.delegateEmit("valuechanged",{originValue:x,value:p})},C.prototype.initEvent=function(){var p=this.get("group");this.bindSliderEvent(p),this.bindRailEvent(p),this.bindTrackEvent(p)},C.prototype.drawLegendContent=function(p){this.drawRail(p),this.drawLabels(p),this.fixedElements(p),this.resetTrack(p),this.resetTrackClip(p),this.get("slidable")&&this.resetHandlers(p)},C.prototype.bindSliderEvent=function(p){this.bindHandlersEvent(p)},C.prototype.bindHandlersEvent=function(p){var x=this;p.on("legend-handler-min:drag",function(T){var N=x.getValueByCanvasPoint(T.x,T.y),Y=x.getCurrentValue(),q=Y[1];q<N&&(q=N),x.setValue([N,q])}),p.on("legend-handler-max:drag",function(T){var N=x.getValueByCanvasPoint(T.x,T.y),Y=x.getCurrentValue(),q=Y[0];q>N&&(q=N),x.setValue([q,N])})},C.prototype.bindRailEvent=function(p){},C.prototype.bindTrackEvent=function(p){var x=this,T=null;p.on("legend-track:dragstart",function(N){T={x:N.x,y:N.y}}),p.on("legend-track:drag",function(N){if(!!T){var Y=x.getValueByCanvasPoint(T.x,T.y),q=x.getValueByCanvasPoint(N.x,N.y),nt=x.getCurrentValue(),vt=nt[1]-nt[0],ht=x.getRange(),St=q-Y;St<0?nt[0]+St>ht.min?x.setValue([nt[0]+St,nt[1]+St]):x.setValue([ht.min,ht.min+vt]):St>0&&(St>0&&nt[1]+St<ht.max?x.setValue([nt[0]+St,nt[1]+St]):x.setValue([ht.max-vt,ht.max])),T={x:N.x,y:N.y}}}),p.on("legend-track:dragend",function(N){T=null})},C.prototype.drawLabels=function(p){this.drawLabel("min",p),this.drawLabel("max",p)},C.prototype.drawLabel=function(p,x){var T=this.get("label"),N=T.style,Y=T.align,q=this.get(p),nt=this.getLabelAlignAttrs(p,Y),vt="label-"+p;this.addShape(x,{type:"text",id:this.getElementId(vt),name:"legend-label-"+p,attrs:Object(at.a)(Object(at.a)({x:0,y:0,text:q},N),nt)})},C.prototype.getLabelAlignAttrs=function(p,x){var T=this.isVertical(),N="center",Y="middle";return T?(N="start",x!=="rail"?p==="min"?Y="top":Y="bottom":Y="top"):x!=="rail"?(Y="top",p==="min"?N="start":N="end"):(N="start",Y="middle"),{textAlign:N,textBaseline:Y}},C.prototype.getRailPath=function(p,x,T,N){var Y=this.get("rail"),q=Y.size,nt=Y.defaultLength,vt=Y.type,ht=this.isVertical(),St=nt,wt=T,xt=N;wt||(wt=ht?q:St),xt||(xt=ht?St:q);var ft=[];return vt==="color"?(ft.push(["M",p,x]),ft.push(["L",p+wt,x]),ft.push(["L",p+wt,x+xt]),ft.push(["L",p,x+xt]),ft.push(["Z"])):(ft.push(["M",p+wt,x]),ft.push(["L",p+wt,x+xt]),ft.push(["L",p,x+xt]),ft.push(["Z"])),ft},C.prototype.drawRail=function(p){var x=this.get("rail"),T=x.style;this.addShape(p,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Object(at.a)({path:this.getRailPath(0,0)},T)})},C.prototype.getTrackColor=function(p){var x=p.length;if(!x)return null;if(x===1)return p[0];var T;this.isVertical()?T="l(90)":T="l(0)";for(var N=0;N<x;N++){var Y=N/(x-1);T+=" "+Y+":"+p[N]}return T},C.prototype.getTrackPath=function(p){var x=this.getRailShape(p),T=x.attr("path");return Object(a.clone)(T)},C.prototype.getClipTrackAttrs=function(p){var x=this.getCurrentValue(),T=x[0],N=x[1],Y=this.getRailBBox(p),q=this.getPointByValue(T,p),nt=this.getPointByValue(N,p),vt=this.isVertical(),ht,St,wt,xt;return vt?(ht=Y.minX,St=q.y,wt=Y.width,xt=nt.y-q.y):(ht=q.x,St=Y.minY,wt=nt.x-q.x,xt=Y.height),{x:ht,y:St,width:wt,height:xt}},C.prototype.getTrackAttrs=function(p){var x=this.get("track"),T=this.get("colors"),N=this.getTrackPath(p);return Object(a.mix)({path:N,fill:this.getTrackColor(T)},x.style)},C.prototype.resetTrackClip=function(p){var x=p||this.get("group"),T=this.getElementId("track"),N=x.findById(T),Y=N.getClip(),q=this.getClipTrackAttrs(p);Y?Y.attr(q):N.setClip({type:"rect",attrs:q})},C.prototype.resetTrack=function(p){var x=this.getElementId("track"),T=p.findById(x),N=this.getTrackAttrs(p);T?T.attr(N):this.addShape(p,{type:"path",id:x,draggable:this.get("slidable"),name:"legend-track",attrs:N})},C.prototype.getPointByValue=function(p,x){var T=this.getRange(),N=T.min,Y=T.max,q=(p-N)/(Y-N),nt=this.getRailBBox(x),vt=this.isVertical(),ht={x:0,y:0};return vt?(ht.x=nt.minX+nt.width/2,ht.y=Object(S.g)(nt.minY,nt.maxY,q)):(ht.x=Object(S.g)(nt.minX,nt.maxX,q),ht.y=nt.minY+nt.height/2),ht},C.prototype.getRailShape=function(p){var x=p||this.get("group");return x.findById(this.getElementId("rail"))},C.prototype.getRailBBox=function(p){var x=this.getRailShape(p),T=x.getBBox();return T},C.prototype.getRailCanvasBBox=function(){var p=this.get("group"),x=p.findById(this.getElementId("rail")),T=x.getCanvasBBox();return T},C.prototype.isVertical=function(){return this.get("layout")==="vertical"},C.prototype.getValueByCanvasPoint=function(p,x){var T=this.getRange(),N=T.min,Y=T.max,q=this.getRailCanvasBBox(),nt=this.isVertical(),vt=this.get("step"),ht;nt?ht=(x-q.minY)/q.height:ht=(p-q.minX)/q.width;var St=Object(S.g)(N,Y,ht);if(vt){var wt=Math.round((St-N)/vt);St=N+wt*vt}return St>Y&&(St=Y),St<N&&(St=N),St},C.prototype.getCurrentValue=function(){var p=this.get("value");return p||(p=[this.get("min"),this.get("max")]),p},C.prototype.resetHandlers=function(p){var x=this.getCurrentValue(),T=x[0],N=x[1];this.resetHandler(p,"min",T),this.resetHandler(p,"max",N)},C.prototype.getHandlerPath=function(p,x){var T=this.isVertical(),N=[],Y=p.size,q=x.x,nt=x.y,vt=Y*n,ht=Y/2,St=Y/6;if(T){var wt=q+vt*s;N.push(["M",q,nt]),N.push(["L",wt,nt+ht]),N.push(["L",q+vt,nt+ht]),N.push(["L",q+vt,nt-ht]),N.push(["L",wt,nt-ht]),N.push(["Z"]),N.push(["M",wt,nt+St]),N.push(["L",q+vt-2,nt+St]),N.push(["M",wt,nt-St]),N.push(["L",q+vt-2,nt-St])}else{var xt=nt+vt*s;N.push(["M",q,nt]),N.push(["L",q-ht,xt]),N.push(["L",q-ht,nt+vt]),N.push(["L",q+ht,nt+vt]),N.push(["L",q+ht,xt]),N.push(["Z"]),N.push(["M",q-St,xt]),N.push(["L",q-St,nt+vt-2]),N.push(["M",q+St,xt]),N.push(["L",q+St,nt+vt-2])}return N},C.prototype.resetHandler=function(p,x,T){var N=this.getPointByValue(T,p),Y=this.get("handler"),q=this.getHandlerPath(Y,N),nt=this.getElementId("handler-"+x),vt=p.findById(nt),ht=this.isVertical();vt?vt.attr("path",q):this.addShape(p,{type:"path",name:"legend-handler-"+x,draggable:!0,id:nt,attrs:Object(at.a)(Object(at.a)({path:q},Y.style),{cursor:ht?"ns-resize":"ew-resize"})})},C.prototype.fixedElements=function(p){var x=p.findById(this.getElementId("rail")),T=p.findById(this.getElementId("label-min")),N=p.findById(this.getElementId("label-max")),Y=this.getDrawPoint();this.isVertical()?this.fixedVertail(T,N,x,Y):this.fixedHorizontal(T,N,x,Y)},C.prototype.fitRailLength=function(p,x,T,N){var Y=this.isVertical(),q=Y?"height":"width",nt=this.get("label"),vt=nt.align,ht=nt.spacing,St=this.get("max"+Object(a.upperFirst)(q));if(St){var wt=vt==="rail"?T[q]+p[q]+x[q]+ht*2:T[q],xt=wt-St;xt>0&&this.changeRailLength(N,q,T[q]-xt)}},C.prototype.changeRailLength=function(p,x,T){var N=p.getBBox(),Y;x==="height"?Y=this.getRailPath(N.x,N.y,N.width,T):Y=this.getRailPath(N.x,N.y,T,N.height),p.attr("path",Y)},C.prototype.changeRailPosition=function(p,x,T){var N=p.getBBox(),Y=this.getRailPath(x,T,N.width,N.height);p.attr("path",Y)},C.prototype.fixedHorizontal=function(p,x,T,N){var Y=this.get("label"),q=Y.align,nt=Y.spacing,vt=T.getBBox(),ht=p.getBBox(),St=x.getBBox(),wt=vt.height;this.fitRailLength(ht,St,vt,T),vt=T.getBBox(),q==="rail"?(p.attr({x:N.x,y:N.y+wt/2}),this.changeRailPosition(T,N.x+ht.width+nt,N.y),x.attr({x:N.x+ht.width+vt.width+nt*2,y:N.y+wt/2})):q==="top"?(p.attr({x:N.x,y:N.y}),x.attr({x:N.x+vt.width,y:N.y}),this.changeRailPosition(T,N.x,N.y+ht.height+nt)):(this.changeRailPosition(T,N.x,N.y),p.attr({x:N.x,y:N.y+vt.height+nt}),x.attr({x:N.x+vt.width,y:N.y+vt.height+nt}))},C.prototype.fixedVertail=function(p,x,T,N){var Y=this.get("label"),q=Y.align,nt=Y.spacing,vt=T.getBBox(),ht=p.getBBox(),St=x.getBBox();if(this.fitRailLength(ht,St,vt,T),vt=T.getBBox(),q==="rail")p.attr({x:N.x,y:N.y}),this.changeRailPosition(T,N.x,N.y+ht.height+nt),x.attr({x:N.x,y:N.y+ht.height+vt.height+nt*2});else if(q==="right")p.attr({x:N.x+vt.width+nt,y:N.y}),this.changeRailPosition(T,N.x,N.y),x.attr({x:N.x+vt.width+nt,y:N.y+vt.height});else{var wt=Math.max(ht.width,St.width);p.attr({x:N.x,y:N.y}),this.changeRailPosition(T,N.x+wt+nt,N.y),x.attr({x:N.x,y:N.y+vt.height})}},C}(M),E=d},"5eLp":function(Un,_t,z){"use strict";var at=function(){function a(A,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=A,this.name=A,this.originalEvent=e,this.timeStamp=e.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var A=this.type;return"[Event (type="+A+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}();_t.a=at},"5kt6":function(Un,_t,z){"use strict";z.d(_t,"f",function(){return at}),z.d(_t,"e",function(){return a}),z.d(_t,"d",function(){return A}),z.d(_t,"a",function(){return e}),z.d(_t,"b",function(){return i}),z.d(_t,"g",function(){return v}),z.d(_t,"c",function(){return b});var at="range",a="type",A="percent",e="#f0f0f0",i="indicator-view",v="range-view",b="range-mask-view"},"5z4m":function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("iTfj"),e=z("aN7R"),i=z("c0lT"),v=z("APlK"),b=z("IvmH"),S=z("c+wO"),f=function(M){Object(at.b)(I,M);function I(){return M!==null&&M.apply(this,arguments)||this}return I.prototype.isEntityGroup=function(){return!0},I.prototype.createDom=function(){var y=Object(S.b)("g");this.set("el",y);var n=this.getParent();if(n){var s=n.get("el");s||(s=n.createDom(),n.set("el",s)),s.appendChild(y)}return y},I.prototype.afterAttrsChange=function(y){M.prototype.afterAttrsChange.call(this,y);var n=this.get("canvas");if(n&&n.get("autoDraw")){var s=n.get("context");this.createPath(s,y)}},I.prototype.onCanvasChange=function(y){Object(i.b)(this,y)},I.prototype.getShapeBase=function(){return e},I.prototype.getGroupBase=function(){return I},I.prototype.draw=function(y){var n=this.getChildren(),s=this.get("el");this.get("destroyed")?s&&s.parentNode.removeChild(s):(s||this.createDom(),Object(v.a)(this,y),this.createPath(y),n.length&&Object(i.a)(y,n))},I.prototype.createPath=function(y,n){var s=this.attr(),d=this.get("el");Object(A.each)(n||s,function(E,O){b.b[O]&&d.setAttribute(b.b[O],E)}),Object(v.c)(this)},I}(a.AbstractGroup);_t.a=f},"6D9b":function(Un,_t,z){},"6JdA":function(Un,_t,z){"use strict";z.d(_t,"b",function(){return at}),z.d(_t,"c",function(){return ct}),z.d(_t,"d",function(){return dt}),z.d(_t,"a",function(){return a});var at={};z.r(at),z.d(at,"create",function(){return e}),z.d(at,"fromMat4",function(){return i}),z.d(at,"clone",function(){return v}),z.d(at,"copy",function(){return b}),z.d(at,"fromValues",function(){return S}),z.d(at,"set",function(){return f}),z.d(at,"identity",function(){return M}),z.d(at,"transpose",function(){return I}),z.d(at,"invert",function(){return y}),z.d(at,"adjoint",function(){return n}),z.d(at,"determinant",function(){return s}),z.d(at,"multiply",function(){return d}),z.d(at,"translate",function(){return E}),z.d(at,"rotate",function(){return O}),z.d(at,"scale",function(){return C}),z.d(at,"fromTranslation",function(){return p}),z.d(at,"fromRotation",function(){return x}),z.d(at,"fromScaling",function(){return T}),z.d(at,"fromMat2d",function(){return N}),z.d(at,"fromQuat",function(){return Y}),z.d(at,"normalFromMat4",function(){return q}),z.d(at,"projection",function(){return nt}),z.d(at,"str",function(){return vt}),z.d(at,"frob",function(){return ht}),z.d(at,"add",function(){return St}),z.d(at,"subtract",function(){return wt}),z.d(at,"multiplyScalar",function(){return xt}),z.d(at,"multiplyScalarAndAdd",function(){return ft}),z.d(at,"exactEquals",function(){return Ft}),z.d(at,"equals",function(){return kt}),z.d(at,"mul",function(){return Ot}),z.d(at,"sub",function(){return X});var a={};z.r(a),z.d(a,"leftTranslate",function(){return pt}),z.d(a,"leftRotate",function(){return Mt}),z.d(a,"leftScale",function(){return tt}),z.d(a,"transform",function(){return it}),z.d(a,"direction",function(){return U}),z.d(a,"angleTo",function(){return P}),z.d(a,"vertical",function(){return H});var A=z("yU0y");function e(){var k=new A.a(9);return A.a!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function i(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[4],k[4]=h[5],k[5]=h[6],k[6]=h[8],k[7]=h[9],k[8]=h[10],k}function v(k){var h=new A.a(9);return h[0]=k[0],h[1]=k[1],h[2]=k[2],h[3]=k[3],h[4]=k[4],h[5]=k[5],h[6]=k[6],h[7]=k[7],h[8]=k[8],h}function b(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[3],k[4]=h[4],k[5]=h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function S(k,h,g,G,V,$,rt,ot,At){var gt=new A.a(9);return gt[0]=k,gt[1]=h,gt[2]=g,gt[3]=G,gt[4]=V,gt[5]=$,gt[6]=rt,gt[7]=ot,gt[8]=At,gt}function f(k,h,g,G,V,$,rt,ot,At,gt){return k[0]=h,k[1]=g,k[2]=G,k[3]=V,k[4]=$,k[5]=rt,k[6]=ot,k[7]=At,k[8]=gt,k}function M(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function I(k,h){if(k===h){var g=h[1],G=h[2],V=h[5];k[1]=h[3],k[2]=h[6],k[3]=g,k[5]=h[7],k[6]=G,k[7]=V}else k[0]=h[0],k[1]=h[3],k[2]=h[6],k[3]=h[1],k[4]=h[4],k[5]=h[7],k[6]=h[2],k[7]=h[5],k[8]=h[8];return k}function y(k,h){var g=h[0],G=h[1],V=h[2],$=h[3],rt=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8],bt=mt*rt-ot*gt,jt=-mt*$+ot*At,Dt=gt*$-rt*At,Ut=g*bt+G*jt+V*Dt;return Ut?(Ut=1/Ut,k[0]=bt*Ut,k[1]=(-mt*G+V*gt)*Ut,k[2]=(ot*G-V*rt)*Ut,k[3]=jt*Ut,k[4]=(mt*g-V*At)*Ut,k[5]=(-ot*g+V*$)*Ut,k[6]=Dt*Ut,k[7]=(-gt*g+G*At)*Ut,k[8]=(rt*g-G*$)*Ut,k):null}function n(k,h){var g=h[0],G=h[1],V=h[2],$=h[3],rt=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8];return k[0]=rt*mt-ot*gt,k[1]=V*gt-G*mt,k[2]=G*ot-V*rt,k[3]=ot*At-$*mt,k[4]=g*mt-V*At,k[5]=V*$-g*ot,k[6]=$*gt-rt*At,k[7]=G*At-g*gt,k[8]=g*rt-G*$,k}function s(k){var h=k[0],g=k[1],G=k[2],V=k[3],$=k[4],rt=k[5],ot=k[6],At=k[7],gt=k[8];return h*(gt*$-rt*At)+g*(-gt*V+rt*ot)+G*(At*V-$*ot)}function d(k,h,g){var G=h[0],V=h[1],$=h[2],rt=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],bt=h[8],jt=g[0],Dt=g[1],Ut=g[2],Ct=g[3],Vt=g[4],Ht=g[5],re=g[6],pe=g[7],ye=g[8];return k[0]=jt*G+Dt*rt+Ut*gt,k[1]=jt*V+Dt*ot+Ut*mt,k[2]=jt*$+Dt*At+Ut*bt,k[3]=Ct*G+Vt*rt+Ht*gt,k[4]=Ct*V+Vt*ot+Ht*mt,k[5]=Ct*$+Vt*At+Ht*bt,k[6]=re*G+pe*rt+ye*gt,k[7]=re*V+pe*ot+ye*mt,k[8]=re*$+pe*At+ye*bt,k}function E(k,h,g){var G=h[0],V=h[1],$=h[2],rt=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],bt=h[8],jt=g[0],Dt=g[1];return k[0]=G,k[1]=V,k[2]=$,k[3]=rt,k[4]=ot,k[5]=At,k[6]=jt*G+Dt*rt+gt,k[7]=jt*V+Dt*ot+mt,k[8]=jt*$+Dt*At+bt,k}function O(k,h,g){var G=h[0],V=h[1],$=h[2],rt=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],bt=h[8],jt=Math.sin(g),Dt=Math.cos(g);return k[0]=Dt*G+jt*rt,k[1]=Dt*V+jt*ot,k[2]=Dt*$+jt*At,k[3]=Dt*rt-jt*G,k[4]=Dt*ot-jt*V,k[5]=Dt*At-jt*$,k[6]=gt,k[7]=mt,k[8]=bt,k}function C(k,h,g){var G=g[0],V=g[1];return k[0]=G*h[0],k[1]=G*h[1],k[2]=G*h[2],k[3]=V*h[3],k[4]=V*h[4],k[5]=V*h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function p(k,h){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=h[0],k[7]=h[1],k[8]=1,k}function x(k,h){var g=Math.sin(h),G=Math.cos(h);return k[0]=G,k[1]=g,k[2]=0,k[3]=-g,k[4]=G,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function T(k,h){return k[0]=h[0],k[1]=0,k[2]=0,k[3]=0,k[4]=h[1],k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function N(k,h){return k[0]=h[0],k[1]=h[1],k[2]=0,k[3]=h[2],k[4]=h[3],k[5]=0,k[6]=h[4],k[7]=h[5],k[8]=1,k}function Y(k,h){var g=h[0],G=h[1],V=h[2],$=h[3],rt=g+g,ot=G+G,At=V+V,gt=g*rt,mt=G*rt,bt=G*ot,jt=V*rt,Dt=V*ot,Ut=V*At,Ct=$*rt,Vt=$*ot,Ht=$*At;return k[0]=1-bt-Ut,k[3]=mt-Ht,k[6]=jt+Vt,k[1]=mt+Ht,k[4]=1-gt-Ut,k[7]=Dt-Ct,k[2]=jt-Vt,k[5]=Dt+Ct,k[8]=1-gt-bt,k}function q(k,h){var g=h[0],G=h[1],V=h[2],$=h[3],rt=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8],bt=h[9],jt=h[10],Dt=h[11],Ut=h[12],Ct=h[13],Vt=h[14],Ht=h[15],re=g*ot-G*rt,pe=g*At-V*rt,ye=g*gt-$*rt,we=G*At-V*ot,Ne=G*gt-$*ot,Ke=V*gt-$*At,pn=mt*Ct-bt*Ut,hn=mt*Vt-jt*Ut,kn=mt*Ht-Dt*Ut,Tn=bt*Vt-jt*Ct,Rn=bt*Ht-Dt*Ct,Mn=jt*Ht-Dt*Vt,Cn=re*Mn-pe*Rn+ye*Tn+we*kn-Ne*hn+Ke*pn;return Cn?(Cn=1/Cn,k[0]=(ot*Mn-At*Rn+gt*Tn)*Cn,k[1]=(At*kn-rt*Mn-gt*hn)*Cn,k[2]=(rt*Rn-ot*kn+gt*pn)*Cn,k[3]=(V*Rn-G*Mn-$*Tn)*Cn,k[4]=(g*Mn-V*kn+$*hn)*Cn,k[5]=(G*kn-g*Rn-$*pn)*Cn,k[6]=(Ct*Ke-Vt*Ne+Ht*we)*Cn,k[7]=(Vt*ye-Ut*Ke-Ht*pe)*Cn,k[8]=(Ut*Ne-Ct*ye+Ht*re)*Cn,k):null}function nt(k,h,g){return k[0]=2/h,k[1]=0,k[2]=0,k[3]=0,k[4]=-2/g,k[5]=0,k[6]=-1,k[7]=1,k[8]=1,k}function vt(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function ht(k){return Math.hypot(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])}function St(k,h,g){return k[0]=h[0]+g[0],k[1]=h[1]+g[1],k[2]=h[2]+g[2],k[3]=h[3]+g[3],k[4]=h[4]+g[4],k[5]=h[5]+g[5],k[6]=h[6]+g[6],k[7]=h[7]+g[7],k[8]=h[8]+g[8],k}function wt(k,h,g){return k[0]=h[0]-g[0],k[1]=h[1]-g[1],k[2]=h[2]-g[2],k[3]=h[3]-g[3],k[4]=h[4]-g[4],k[5]=h[5]-g[5],k[6]=h[6]-g[6],k[7]=h[7]-g[7],k[8]=h[8]-g[8],k}function xt(k,h,g){return k[0]=h[0]*g,k[1]=h[1]*g,k[2]=h[2]*g,k[3]=h[3]*g,k[4]=h[4]*g,k[5]=h[5]*g,k[6]=h[6]*g,k[7]=h[7]*g,k[8]=h[8]*g,k}function ft(k,h,g,G){return k[0]=h[0]+g[0]*G,k[1]=h[1]+g[1]*G,k[2]=h[2]+g[2]*G,k[3]=h[3]+g[3]*G,k[4]=h[4]+g[4]*G,k[5]=h[5]+g[5]*G,k[6]=h[6]+g[6]*G,k[7]=h[7]+g[7]*G,k[8]=h[8]+g[8]*G,k}function Ft(k,h){return k[0]===h[0]&&k[1]===h[1]&&k[2]===h[2]&&k[3]===h[3]&&k[4]===h[4]&&k[5]===h[5]&&k[6]===h[6]&&k[7]===h[7]&&k[8]===h[8]}function kt(k,h){var g=k[0],G=k[1],V=k[2],$=k[3],rt=k[4],ot=k[5],At=k[6],gt=k[7],mt=k[8],bt=h[0],jt=h[1],Dt=h[2],Ut=h[3],Ct=h[4],Vt=h[5],Ht=h[6],re=h[7],pe=h[8];return Math.abs(g-bt)<=A.b*Math.max(1,Math.abs(g),Math.abs(bt))&&Math.abs(G-jt)<=A.b*Math.max(1,Math.abs(G),Math.abs(jt))&&Math.abs(V-Dt)<=A.b*Math.max(1,Math.abs(V),Math.abs(Dt))&&Math.abs($-Ut)<=A.b*Math.max(1,Math.abs($),Math.abs(Ut))&&Math.abs(rt-Ct)<=A.b*Math.max(1,Math.abs(rt),Math.abs(Ct))&&Math.abs(ot-Vt)<=A.b*Math.max(1,Math.abs(ot),Math.abs(Vt))&&Math.abs(At-Ht)<=A.b*Math.max(1,Math.abs(At),Math.abs(Ht))&&Math.abs(gt-re)<=A.b*Math.max(1,Math.abs(gt),Math.abs(re))&&Math.abs(mt-pe)<=A.b*Math.max(1,Math.abs(mt),Math.abs(pe))}var Ot=d,X=wt,ct=z("ZxFD"),dt=z("n+fv");function pt(k,h,g){var G=[0,0,0,0,0,0,0,0,0];return at.fromTranslation(G,g),at.multiply(k,G,h)}function Mt(k,h,g){var G=[0,0,0,0,0,0,0,0,0];return at.fromRotation(G,g),at.multiply(k,G,h)}function tt(k,h,g){var G=[0,0,0,0,0,0,0,0,0];return at.fromScaling(G,g),at.multiply(k,G,h)}function lt(k,h,g){return at.multiply(k,g,h)}function it(k,h){for(var g=k?[].concat(k):[1,0,0,0,1,0,0,0,1],G=0,V=h.length;G<V;G++){var $=h[G];switch($[0]){case"t":pt(g,g,[$[1],$[2]]);break;case"s":tt(g,g,[$[1],$[2]]);break;case"r":Mt(g,g,$[1]);break;case"m":lt(g,g,$[1]);break;default:break}}return g}function U(k,h){return k[0]*h[1]-h[0]*k[1]}function P(k,h,g){var G=ct.angle(k,h),V=U(k,h)>=0;return g?V?Math.PI*2-G:G:V?G:Math.PI*2-G}function H(k,h,g){return g?(k[0]=h[1],k[1]=-1*h[0]):(k[0]=-1*h[1],k[1]=h[0]),k}},"6UX8":function(Un,_t,z){"use strict";var at=z("iTfj"),a=/rgba?\(([\s.,0-9]+)\)/,A=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,v=function(C){return/^[r,R,L,l]{1}[\s]*\(/.test(C)},b=function(){var C=document.createElement("i");return C.title="Web Colour Picker",C.style.display="none",document.body.appendChild(C),C},S=function(C,p,x,T){return C[T]+(p[T]-C[T])*x};function f(O){return"#"+I(O[0])+I(O[1])+I(O[2])}var M=function(C){return[parseInt(C.substr(1,2),16),parseInt(C.substr(3,2),16),parseInt(C.substr(5,2),16)]},I=function(C){var p=Math.round(C).toString(16);return p.length===1?"0"+p:p},y=function(C,p){var x=isNaN(Number(p))||p<0?0:p>1?1:Number(p),T=C.length-1,N=Math.floor(T*x),Y=T*x-N,q=C[N],nt=N===T?q:C[N+1];return f([S(q,nt,Y,0),S(q,nt,Y,1),S(q,nt,Y,2)])},n,s=function(C){if(C[0]==="#"&&C.length===7)return C;n||(n=b()),n.style.color=C;var p=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),x=a.exec(p),T=x[1].split(/\s*,\s*/).map(function(N){return Number(N)});return p=f(T),p},d=function(C){var p=Object(at.isString)(C)?C.split("-"):C,x=Object(at.map)(p,function(T){return M(T.indexOf("#")===-1?s(T):T)});return function(T){return y(x,T)}},E=function(C){if(v(C)){var p,x=void 0;if(C[0]==="l"){var T=A.exec(C),N=+T[1]+90;x=T[2],p="linear-gradient("+N+"deg, "}else if(C[0]==="r"){p="radial-gradient(";var T=e.exec(C);x=T[4]}var Y=x.match(i);return Object(at.each)(Y,function(q,nt){var vt=q.split(":");p+=vt[1]+" "+vt[0]*100+"%",nt!==Y.length-1&&(p+=", ")}),p+=")",p}return C};_t.a={rgb2arr:M,gradient:d,toRGB:Object(at.memoize)(s),toCSSGradient:E}},"7+4w":function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=function(i){Object(at.b)(v,i);function v(b,S,f,M){var I=i.call(this,b,Object(a.b)({},M,S))||this;return I.type="g2-plot",I.defaultOptions=M,I.adaptor=f,I}return v.prototype.getDefaultOptions=function(){return this.defaultOptions},v.prototype.getSchemaAdaptor=function(){return this.adaptor},v}(A.a)},"711d":function(Un,_t){function z(at){return function(a){return a==null?void 0:a[at]}}Un.exports=z},"7IPS":function(Un,_t,z){"use strict";_t.a=function(at,a,A,e,i){for(var v=at.children,b,S=-1,f=v.length,M=at.value&&(i-A)/at.value;++S<f;)b=v[S],b.x0=a,b.x1=e,b.y0=A,b.y1=A+=b.value*M}},"7ZbV":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return N});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("w02o"),v=z("tKoa"),b="first-axes-view",S="second-axes-view",f="series-field-key";function M(Y,q,nt,vt,ht){var St=[];q.forEach(function(Ot){vt.forEach(function(X){var ct,dt=(ct={},ct[Y]=X[Y],ct[nt]=Ot,ct[Ot]=X[Ot],ct);St.push(dt)})});var wt=Object.values(Object(e.groupBy)(St,nt)),xt=wt[0],ft=xt===void 0?[]:xt,Ft=wt[1],kt=Ft===void 0?[]:Ft;return ht?[ft.reverse(),kt.reverse()]:[ft,kt]}function I(Y){return Y!=="vertical"}function y(Y,q,nt){var vt=q[0],ht=q[1],St=vt.autoPadding,wt=ht.autoPadding,xt=Y.__axisPosition,ft=xt.layout,Ft=xt.position;if(I(ft)&&Ft==="top"&&(vt.autoPadding=nt.instance(St.top,0,St.bottom,St.left),ht.autoPadding=nt.instance(wt.top,St.left,wt.bottom,0)),I(ft)&&Ft==="bottom"&&(vt.autoPadding=nt.instance(St.top,St.right/2+5,St.bottom,St.left),ht.autoPadding=nt.instance(wt.top,wt.right,wt.bottom,St.right/2+5)),!I(ft)&&Ft==="bottom"){var kt=St.left>=wt.left?St.left:wt.left;vt.autoPadding=nt.instance(St.top,St.right,St.bottom/2+5,kt),ht.autoPadding=nt.instance(St.bottom/2+5,wt.right,wt.bottom,kt)}if(!I(ft)&&Ft==="top"){var kt=St.left>=wt.left?St.left:wt.left;vt.autoPadding=nt.instance(St.top,St.right,0,kt),ht.autoPadding=nt.instance(0,wt.right,St.top,kt)}}function n(Y){var q=Y.chart,nt=Y.options,vt=nt.data,ht=nt.xField,St=nt.yField,wt=nt.color,xt=nt.barStyle,ft=nt.widthRatio,Ft=nt.legend,kt=nt.layout,Ot=M(ht,St,f,vt,I(kt));Ft?q.legend(f,Ft):Ft===!1&&q.legend(!1);var X,ct,dt=Ot[0],pt=Ot[1];I(kt)?(X=q.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:b}),X.coordinate().transpose().reflect("x"),ct=q.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:S}),ct.coordinate().transpose(),X.data(dt),ct.data(pt)):(X=q.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:b}),ct=q.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:S}),ct.coordinate().reflect("y").rotate(Math.PI*0),X.data(dt),ct.data(pt));var Mt=Object(A.b)({},Y,{chart:X,options:{widthRatio:ft,xField:ht,yField:St[0],seriesField:f,interval:{color:wt,style:xt}}});Object(v.c)(Mt);var tt=Object(A.b)({},Y,{chart:ct,options:{xField:ht,yField:St[1],seriesField:f,widthRatio:ft,interval:{color:wt,style:xt}}});return Object(v.c)(tt),Y}function s(Y){var q,nt,vt,ht=Y.options,St=Y.chart,wt=ht.xAxis,xt=ht.yAxis,ft=ht.xField,Ft=ht.yField,kt=Object(A.d)(St,b),Ot=Object(A.d)(St,S),X={};return Object(e.keys)((ht==null?void 0:ht.meta)||{}).map(function(ct){Object(e.get)(ht==null?void 0:ht.meta,[ct,"alias"])&&(X[ct]=ht.meta[ct].alias)}),St.scale((q={},q[f]={sync:!0,formatter:function(dt){return Object(e.get)(X,dt,dt)}},q)),Object(i.f)((nt={},nt[ft]=wt,nt[Ft[0]]=xt[Ft[0]],nt))(Object(A.b)({},Y,{chart:kt})),Object(i.f)((vt={},vt[ft]=wt,vt[Ft[1]]=xt[Ft[1]],vt))(Object(A.b)({},Y,{chart:Ot})),Y}function d(Y){var q=Y.chart,nt=Y.options,vt=nt.xAxis,ht=nt.yAxis,St=nt.xField,wt=nt.yField,xt=nt.layout,ft=Object(A.d)(q,b),Ft=Object(A.d)(q,S);return Ft.axis(St,!1),vt===!1?ft.axis(St,!1):ft.axis(St,Object(at.a)({position:I(xt)?"top":"bottom"},vt)),ht===!1?(ft.axis(wt[0],!1),Ft.axis(wt[1],!1)):(ft.axis(wt[0],ht[wt[0]]),Ft.axis(wt[1],ht[wt[1]])),q.__axisPosition={position:ft.getOptions().axes[St].position,layout:xt},Y}function E(Y){var q=Y.chart;return Object(i.c)(Object(A.b)({},Y,{chart:Object(A.d)(q,b)})),Object(i.c)(Object(A.b)({},Y,{chart:Object(A.d)(q,S)})),Y}function O(Y){var q=Y.chart,nt=Y.options,vt=nt.yField,ht=nt.yAxis;return Object(i.e)(Object(A.b)({},Y,{chart:Object(A.d)(q,b),options:{yAxis:ht[vt[0]]}})),Object(i.e)(Object(A.b)({},Y,{chart:Object(A.d)(q,S),options:{yAxis:ht[vt[1]]}})),Y}function C(Y){var q=Y.chart;return Object(i.j)(Object(A.b)({},Y,{chart:Object(A.d)(q,b)})),Object(i.j)(Object(A.b)({},Y,{chart:Object(A.d)(q,S)})),Y}function p(Y){var q=Y.chart;return Object(i.a)(Object(A.b)({},Y,{chart:Object(A.d)(q,b)})),Object(i.a)(Object(A.b)({},Y,{chart:Object(A.d)(q,S)})),Y}function x(Y){var q=Y.chart,nt=Y.options,vt=nt.label,ht=nt.yField,St=Object(A.d)(q,b),wt=Object(A.d)(q,S),xt=Object(A.c)(St,"interval"),ft=Object(A.c)(wt,"interval");if(!vt)xt.label(!1),ft.label(!1);else{var Ft=vt.callback,kt=Object(at.c)(vt,["callback"]);xt.label({fields:[ht[0]],callback:Ft,cfg:Object(A.o)(kt)}),ft.label({fields:[ht[1]],callback:Ft,cfg:Object(A.o)(kt)})}return Y}function T(Y){return Object(A.e)(n,s,d,O,C,x,i.k,E,p)(Y)}var N=function(Y){Object(at.b)(q,Y);function q(){var nt=Y!==null&&Y.apply(this,arguments)||this;return nt.type="bidirectional-bar",nt}return q.prototype.getDefaultOptions=function(){return Object(A.b)({},Y.prototype.getDefaultOptions.call(this),{syncViewPadding:y})},q.prototype.getSchemaAdaptor=function(){return T},q}(a.a)},"7cv3":function(Un,_t,z){"use strict";z.d(_t,"b",function(){return a}),z.d(_t,"c",function(){return A}),z.d(_t,"a",function(){return e});var at=z("iTfj"),a="x",A="y",e={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(v,b){return""+Object(at.get)(b,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}}},"7s0d":function(Un,_t,z){"use strict";var at=z("FH2j");z.d(_t,"getAdjust",function(){return at.getAdjust});var a=z("Qci9"),A=z("lOPJ"),e=z("KavR"),i=z("8FoI"),v=z("96lr"),b=z("WbAE"),S=z.n(b);Object(at.registerAdjust)("Dodge",A.a),Object(at.registerAdjust)("Jitter",e.a),Object(at.registerAdjust)("Stack",i.a),Object(at.registerAdjust)("Symmetric",v.a)},"8FoI":function(Un,_t,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("Qci9"),e=a.Cache,i=function(v){Object(at.b)(b,v);function b(S){var f=v.call(this,S)||this,M=S.adjustNames,I=M===void 0?["y"]:M,y=S.height,n=y===void 0?NaN:y,s=S.size,d=s===void 0?10:s,E=S.reverseOrder,O=E===void 0?!1:E;return f.adjustNames=I,f.height=n,f.size=d,f.reverseOrder=O,f}return b.prototype.process=function(S){var f=this,M=f.yField,I=f.reverseOrder,y=M?this.processStack(S):this.processOneDimStack(S);return I?this.reverse(y):y},b.prototype.reverse=function(S){return S.slice(0).reverse()},b.prototype.processStack=function(S){var f=this,M=f.xField,I=f.yField,y=f.reverseOrder,n=y?this.reverse(S):S,s=new e,d=new e;return n.map(function(E){return E.map(function(O){var C,p=a.get(O,M,0),x=a.get(O,[I]),T=p.toString();if(x=a.isArray(x)?x[1]:x,!a.isNil(x)){var N=x>=0?s:d;N.has(T)||N.set(T,0);var Y=N.get(T),q=x+Y;return N.set(T,q),Object(at.a)(Object(at.a)({},O),(C={},C[I]=[Y,q],C))}return O})})},b.prototype.processOneDimStack=function(S){var f=this,M=this,I=M.xField,y=M.height,n=M.reverseOrder,s="y",d=n?this.reverse(S):S,E=new e;return d.map(function(O){return O.map(function(C){var p,x=f.size,T=C[I],N=x*2/y;E.has(T)||E.set(T,N/2);var Y=E.get(T);return E.set(T,Y+N),Object(at.a)(Object(at.a)({},C),(p={},p[s]=Y,p))})})},b}(A.a);_t.a=i},"8vsG":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return M}),z.d(_t,"b",function(){return Ut}),z.d(_t,"c",function(){return b}),z.d(_t,"d",function(){return Mn});var at={};z.r(at),z.d(at,"default",function(){return it}),z.d(at,"assign",function(){return x}),z.d(at,"format",function(){return Mt}),z.d(at,"parse",function(){return tt}),z.d(at,"defaultI18n",function(){return nt}),z.d(at,"setGlobalDateI18n",function(){return ht}),z.d(at,"setGlobalDateMasks",function(){return pt});var a=z("iTfj"),A={};function e(oe){return A[oe]}function i(oe,Kt){A[oe]=Kt}var v=function(){function oe(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return oe.prototype.translate=function(Kt){return Kt},oe.prototype.change=function(Kt){Object(a.assign)(this.__cfg__,Kt),this.init()},oe.prototype.clone=function(){return this.constructor(this.__cfg__)},oe.prototype.getTicks=function(){var Kt=this;return Object(a.map)(this.ticks,function(te,Oe){return Object(a.isObject)(te)?te:{text:Kt.getText(te,Oe),tickValue:te,value:Kt.scale(te)}})},oe.prototype.getText=function(Kt,te){var Oe=this.formatter,Qe=Oe?Oe(Kt,te):Kt;return Object(a.isNil)(Qe)||!Object(a.isFunction)(Qe.toString)?"":Qe.toString()},oe.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},oe.prototype.init=function(){Object(a.assign)(this,this.__cfg__),this.setDomain(),Object(a.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},oe.prototype.initCfg=function(){},oe.prototype.setDomain=function(){},oe.prototype.calculateTicks=function(){var Kt=this.tickMethod,te=[];if(Object(a.isString)(Kt)){var Oe=e(Kt);if(!Oe)throw new Error("There is no method to to calculate ticks!");te=Oe(this)}else Object(a.isFunction)(Kt)&&(te=Kt(this));return te},oe.prototype.rangeMin=function(){return Object(a.head)(this.range)},oe.prototype.rangeMax=function(){return Object(a.last)(this.range)},oe.prototype.calcPercent=function(Kt,te,Oe){return Object(a.isNumber)(Kt)?(Kt-te)/(Oe-te):NaN},oe.prototype.calcValue=function(Kt,te,Oe){return te+Kt*(Oe-te)},oe}(),b=v,S=z("mrSG"),f=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="cat",te.isCategory=!0,te.cache=new Map,te}return Kt.prototype.translate=function(te){if(this.cache.has(te))return this.cache.get(te);var Oe=Object(a.indexOf)(this.values,te);return Oe===-1&&(Oe=Object(a.isNumber)(te)?te:NaN),this.cache.set(te,Oe),Oe},Kt.prototype.scale=function(te){var Oe=this.translate(te),Qe=this.calcPercent(Oe,this.min,this.max);return this.calcValue(Qe,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(te){var Oe=this.max-this.min,Qe=this.calcPercent(te,this.rangeMin(),this.rangeMax()),On=Math.round(Oe*Qe)+this.min;return On<this.min||On>this.max?NaN:this.values[On]},Kt.prototype.getText=function(te){for(var Oe=[],Qe=1;Qe<arguments.length;Qe++)Oe[Qe-1]=arguments[Qe];var On=te;return Object(a.isNumber)(te)&&!this.values.includes(te)&&(On=this.values[On]),oe.prototype.getText.apply(this,Object(S.d)([On],Oe))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if(Object(a.isNil)(this.getConfig("min"))&&(this.min=0),Object(a.isNil)(this.getConfig("max"))){var te=this.values.length;this.max=te>1?te-1:te}this.cache&&this.cache.clear()},Kt}(b),M=f,I=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,y="[1-9]\\d?",n="\\d\\d",s="\\d{3}",d="\\d{4}",E="[^\\s]+",O=/\[([^]*?)\]/gm;function C(oe,Kt){for(var te=[],Oe=0,Qe=oe.length;Oe<Qe;Oe++)te.push(oe[Oe].substr(0,Kt));return te}var p=function(Kt){return function(te,Oe){var Qe=Oe[Kt].map(function(Vn){return Vn.toLowerCase()}),On=Qe.indexOf(te.toLowerCase());return On>-1?On:null}};function x(oe){for(var Kt=[],te=1;te<arguments.length;te++)Kt[te-1]=arguments[te];for(var Oe=0,Qe=Kt;Oe<Qe.length;Oe++){var On=Qe[Oe];for(var Vn in On)oe[Vn]=On[Vn]}return oe}var T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=C(N,3),q=C(T,3),nt={dayNamesShort:q,dayNames:T,monthNamesShort:Y,monthNames:N,amPm:["am","pm"],DoFn:function(Kt){return Kt+["th","st","nd","rd"][Kt%10>3?0:(Kt-Kt%10!=10?1:0)*Kt%10]}},vt=x({},nt),ht=function(Kt){return vt=x(vt,Kt)},St=function(Kt){return Kt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},wt=function(Kt,te){for(te===void 0&&(te=2),Kt=String(Kt);Kt.length<te;)Kt="0"+Kt;return Kt},xt={D:function(Kt){return String(Kt.getDate())},DD:function(Kt){return wt(Kt.getDate())},Do:function(Kt,te){return te.DoFn(Kt.getDate())},d:function(Kt){return String(Kt.getDay())},dd:function(Kt){return wt(Kt.getDay())},ddd:function(Kt,te){return te.dayNamesShort[Kt.getDay()]},dddd:function(Kt,te){return te.dayNames[Kt.getDay()]},M:function(Kt){return String(Kt.getMonth()+1)},MM:function(Kt){return wt(Kt.getMonth()+1)},MMM:function(Kt,te){return te.monthNamesShort[Kt.getMonth()]},MMMM:function(Kt,te){return te.monthNames[Kt.getMonth()]},YY:function(Kt){return wt(String(Kt.getFullYear()),4).substr(2)},YYYY:function(Kt){return wt(Kt.getFullYear(),4)},h:function(Kt){return String(Kt.getHours()%12||12)},hh:function(Kt){return wt(Kt.getHours()%12||12)},H:function(Kt){return String(Kt.getHours())},HH:function(Kt){return wt(Kt.getHours())},m:function(Kt){return String(Kt.getMinutes())},mm:function(Kt){return wt(Kt.getMinutes())},s:function(Kt){return String(Kt.getSeconds())},ss:function(Kt){return wt(Kt.getSeconds())},S:function(Kt){return String(Math.round(Kt.getMilliseconds()/100))},SS:function(Kt){return wt(Math.round(Kt.getMilliseconds()/10),2)},SSS:function(Kt){return wt(Kt.getMilliseconds(),3)},a:function(Kt,te){return Kt.getHours()<12?te.amPm[0]:te.amPm[1]},A:function(Kt,te){return Kt.getHours()<12?te.amPm[0].toUpperCase():te.amPm[1].toUpperCase()},ZZ:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60)*100+Math.abs(te)%60,4)},Z:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60),2)+":"+wt(Math.abs(te)%60,2)}},ft=function(Kt){return+Kt-1},Ft=[null,y],kt=[null,E],Ot=["isPm",E,function(oe,Kt){var te=oe.toLowerCase();return te===Kt.amPm[0]?0:te===Kt.amPm[1]?1:null}],X=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(oe){var Kt=(oe+"").match(/([+-]|\d\d)/gi);if(Kt){var te=+Kt[1]*60+parseInt(Kt[2],10);return Kt[0]==="+"?te:-te}return 0}],ct={D:["day",y],DD:["day",n],Do:["day",y+E,function(oe){return parseInt(oe,10)}],M:["month",y,ft],MM:["month",n,ft],YY:["year",n,function(oe){var Kt=new Date,te=+(""+Kt.getFullYear()).substr(0,2);return+(""+(+oe>68?te-1:te)+oe)}],h:["hour",y,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",y],HH:["hour",n],m:["minute",y],mm:["minute",n],s:["second",y],ss:["second",n],YYYY:["year",d],S:["millisecond","\\d",function(oe){return+oe*100}],SS:["millisecond",n,function(oe){return+oe*10}],SSS:["millisecond",s],d:Ft,dd:Ft,ddd:kt,dddd:kt,MMM:["month",E,p("monthNamesShort")],MMMM:["month",E,p("monthNames")],a:Ot,A:Ot,ZZ:X,Z:X},dt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},pt=function(Kt){return x(dt,Kt)},Mt=function(Kt,te,Oe){if(te===void 0&&(te=dt.default),Oe===void 0&&(Oe={}),typeof Kt=="number"&&(Kt=new Date(Kt)),Object.prototype.toString.call(Kt)!=="[object Date]"||isNaN(Kt.getTime()))throw new Error("Invalid Date pass to format");te=dt[te]||te;var Qe=[];te=te.replace(O,function(Vn,Xn){return Qe.push(Xn),"@@@"});var On=x(x({},vt),Oe);return te=te.replace(I,function(Vn){return xt[Vn](Kt,On)}),te.replace(/@@@/g,function(){return Qe.shift()})};function tt(oe,Kt,te){if(te===void 0&&(te={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=dt[Kt]||Kt,oe.length>1e3)return null;var Oe=new Date,Qe={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},On=[],Vn=[],Xn=Kt.replace(O,function(Ir,Lr){return Vn.push(St(Lr)),"@@@"}),$e={},rn={};Xn=St(Xn).replace(I,function(Ir){var Lr=ct[Ir],Pr=Lr[0],Dr=Lr[1],ri=Lr[3];if($e[Pr])throw new Error("Invalid format. "+Pr+" specified twice in format");return $e[Pr]=!0,ri&&(rn[ri]=!0),On.push(Lr),"("+Dr+")"}),Object.keys(rn).forEach(function(Ir){if(!$e[Ir])throw new Error("Invalid format. "+Ir+" is required in specified format")}),Xn=Xn.replace(/@@@/g,function(){return Vn.shift()});var on=oe.match(new RegExp(Xn,"i"));if(!on)return null;for(var $n=x(x({},vt),te),vr=1;vr<on.length;vr++){var ar=On[vr-1],rr=ar[0],Fr=ar[2],Ar=Fr?Fr(on[vr],$n):+on[vr];if(Ar==null)return null;Qe[rr]=Ar}Qe.isPm===1&&Qe.hour!=null&&+Qe.hour!=12?Qe.hour=+Qe.hour+12:Qe.isPm===0&&+Qe.hour==12&&(Qe.hour=0);for(var wr=new Date(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute,Qe.second,Qe.millisecond),xr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],vr=0,Er=xr.length;vr<Er;vr++)if($e[xr[vr][0]]&&Qe[xr[vr][0]]!==wr[xr[vr][1]]())return null;return Qe.timezoneOffset==null?wr:new Date(Date.UTC(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute-Qe.timezoneOffset,Qe.second,Qe.millisecond))}var lt={format:Mt,parse:tt,defaultI18n:nt,setGlobalDateI18n:ht,setGlobalDateMasks:pt},it=lt,U=function(oe){return function(Kt,te,Oe,Qe){for(var On=Object(a.isNil)(Oe)?0:Oe,Vn=Object(a.isNil)(Qe)?Kt.length:Qe;On<Vn;){var Xn=On+Vn>>>1;oe(Kt[Xn])>te?Vn=Xn:On=Xn+1}return On}},P="format";function H(oe,Kt){var te=at[P]||it[P];return te(oe,Kt)}function k(oe){return Object(a.isString)(oe)&&(oe.indexOf("T")>0?oe=new Date(oe).getTime():oe=new Date(oe.replace(/-/gi,"/")).getTime()),Object(a.isDate)(oe)&&(oe=oe.getTime()),oe}var h=1e3,g=60*h,G=60*g,V=24*G,$=V*31,rt=V*365,ot=[["HH:mm:ss",h],["HH:mm:ss",h*10],["HH:mm:ss",h*30],["HH:mm",g],["HH:mm",g*10],["HH:mm",g*30],["HH",G],["HH",G*6],["HH",G*12],["YYYY-MM-DD",V],["YYYY-MM-DD",V*4],["YYYY-WW",V*7],["YYYY-MM",$],["YYYY-MM",$*4],["YYYY-MM",$*6],["YYYY",V*380]];function At(oe,Kt,te){var Oe=(Kt-oe)/te,Qe=U(function(Vn){return Vn[1]})(ot,Oe)-1,On=ot[Qe];return Qe<0?On=ot[0]:Qe>=ot.length&&(On=Object(a.last)(ot)),On}var gt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="timeCat",te}return Kt.prototype.translate=function(te){te=k(te);var Oe=this.values.indexOf(te);return Oe===-1&&(Object(a.isNumber)(te)&&te<this.values.length?Oe=te:Oe=NaN),Oe},Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te);if(Qe>-1){var On=this.values[Qe],Vn=this.formatter;return On=Vn?Vn(On,Oe):H(On,this.mask),On}return te},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var te=this.values;Object(a.each)(te,function(Oe,Qe){te[Qe]=k(Oe)}),te.sort(function(Oe,Qe){return Oe-Qe}),oe.prototype.setDomain.call(this)},Kt}(M),mt=gt,bt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.isContinuous=!0,te}return Kt.prototype.scale=function(te){if(Object(a.isNil)(te))return NaN;var Oe=this.rangeMin(),Qe=this.rangeMax(),On=this.max,Vn=this.min;if(On===Vn)return Oe;var Xn=this.getScalePercent(te);return Oe+Xn*(Qe-Oe)},Kt.prototype.init=function(){oe.prototype.init.call(this);var te=this.ticks,Oe=Object(a.head)(te),Qe=Object(a.last)(te);Oe<this.min&&(this.min=Oe),Qe>this.max&&(this.max=Qe),Object(a.isNil)(this.minLimit)||(this.min=Oe),Object(a.isNil)(this.maxLimit)||(this.max=Qe)},Kt.prototype.setDomain=function(){var te=Object(a.getRange)(this.values),Oe=te.min,Qe=te.max;Object(a.isNil)(this.min)&&(this.min=Oe),Object(a.isNil)(this.max)&&(this.max=Qe),this.min>this.max&&(this.min=Oe,this.max=Qe)},Kt.prototype.calculateTicks=function(){var te=this,Oe=oe.prototype.calculateTicks.call(this);return this.nice||(Oe=Object(a.filter)(Oe,function(Qe){return Qe>=te.min&&Qe<=te.max})),Oe},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;return(te-Qe)/(Oe-Qe)},Kt.prototype.getInvertPercent=function(te){return(te-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(b),jt=bt,Dt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="linear",te.isLinear=!0,te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te);return this.min+Oe*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(jt),Ut=Dt;function Ct(oe,Kt){var te=Math.E,Oe;return Kt>=0?Oe=Math.pow(te,Math.log(Kt)/oe):Oe=Math.pow(te,Math.log(-Kt)/oe)*-1,Oe}function Vt(oe,Kt){return oe===1?1:Math.log(Kt)/Math.log(oe)}function Ht(oe,Kt,te){Object(a.isNil)(te)&&(te=Math.max.apply(null,oe));var Oe=te;return Object(a.each)(oe,function(Qe){Qe>0&&Qe<Oe&&(Oe=Qe)}),Oe===te&&(Oe=te/Kt),Oe>1&&(Oe=1),Oe}var re=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="log",te}return Kt.prototype.invert=function(te){var Oe=this.base,Qe=Vt(Oe,this.max),On=this.rangeMin(),Vn=this.rangeMax()-On,Xn,$e=this.positiveMin;if($e){if(te===0)return 0;Xn=Vt(Oe,$e/Oe);var rn=1/(Qe-Xn)*Vn;if(te<rn)return te/rn*$e}else Xn=Vt(Oe,this.min);var on=(te-On)/Vn,$n=on*(Qe-Xn)+Xn;return Math.pow(Oe,$n)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){oe.prototype.setDomain.call(this);var te=this.min;if(te<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");te===0&&(this.positiveMin=Ht(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe||te<=0)return 0;var On=this.base,Vn=this.positiveMin;Vn&&(Qe=Vn*1/On);var Xn;return te<Vn?Xn=te/Vn/(Vt(On,Oe)-Vt(On,Qe)):Xn=(Vt(On,te)-Vt(On,Qe))/(Vt(On,Oe)-Vt(On,Qe)),Xn},Kt}(jt),pe=re,ye=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="pow",te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te),Qe=this.exponent,On=Ct(Qe,this.max),Vn=Ct(Qe,this.min),Xn=Oe*(On-Vn)+Vn,$e=Xn>=0?1:-1;return Math.pow(Xn,Qe)*$e},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe)return 0;var On=this.exponent,Vn=(Ct(On,te)-Ct(On,Qe))/(Ct(On,Oe)-Ct(On,Qe));return Vn},Kt}(jt),we=ye,Ne=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="time",te}return Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te),On=this.formatter;return On?On(Qe,Oe):H(Qe,this.mask)},Kt.prototype.scale=function(te){var Oe=te;return(Object(a.isString)(Oe)||Object(a.isDate)(Oe))&&(Oe=this.translate(Oe)),oe.prototype.scale.call(this,Oe)},Kt.prototype.translate=function(te){return k(te)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var te=this.values,Oe=this.getConfig("min"),Qe=this.getConfig("max");if((!Object(a.isNil)(Oe)||!Object(a.isNumber)(Oe))&&(this.min=this.translate(this.min)),(!Object(a.isNil)(Qe)||!Object(a.isNumber)(Qe))&&(this.max=this.translate(this.max)),te&&te.length){var On=[],Vn=Infinity,Xn=Vn,$e=0;Object(a.each)(te,function(rn){var on=k(rn);if(isNaN(on))throw new TypeError("Invalid Time: "+rn+" in time scale!");Vn>on?(Xn=Vn,Vn=on):Xn>on&&(Xn=on),$e<on&&($e=on),On.push(on)}),te.length>1&&(this.minTickInterval=Xn-Vn),Object(a.isNil)(Oe)&&(this.min=Vn),Object(a.isNil)(Qe)&&(this.max=$e)}},Kt}(Ut),Ke=Ne,pn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantize",te}return Kt.prototype.invert=function(te){var Oe=this.ticks,Qe=Oe.length,On=this.getInvertPercent(te),Vn=Math.floor(On*(Qe-1));if(Vn>=Qe-1)return Object(a.last)(Oe);if(Vn<0)return Object(a.head)(Oe);var Xn=Oe[Vn],$e=Oe[Vn+1],rn=Vn/(Qe-1),on=(Vn+1)/(Qe-1);return Xn+(On-rn)/(on-rn)*($e-Xn)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var te=oe.prototype.calculateTicks.call(this);return this.nice||(Object(a.last)(te)!==this.max&&te.push(this.max),Object(a.head)(te)!==this.min&&te.unshift(this.min)),te},Kt.prototype.getScalePercent=function(te){var Oe=this.ticks;if(te<Object(a.head)(Oe))return 0;if(te>Object(a.last)(Oe))return 1;var Qe=0;return Object(a.each)(Oe,function(On,Vn){if(te>=On)Qe=Vn;else return!1}),Qe/(Oe.length-1)},Kt}(jt),hn=pn,kn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantile",te}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(hn),Tn=kn,Rn={};function Mn(oe){return Rn[oe]}function Cn(oe,Kt){if(Mn(oe))throw new Error("type '"+oe+"' existed.");Rn[oe]=Kt}var _n=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="identity",te.isIdentity=!0,te}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(te){return this.values[0]!==te&&Object(a.isNumber)(te)?te:this.range[0]},Kt.prototype.invert=function(te){var Oe=this.range;return te<Oe[0]||te>Oe[1]?NaN:this.values[0]},Kt}(b),Kn=_n,tr=[1,5,2,2.5,4,3],or=[1,5,2,2.5,4,3,1.5,7,6,8,9],nr=Number.EPSILON*100;function er(oe,Kt){return(oe%Kt+Kt)%Kt}function Sr(oe,Kt,te,Oe,Qe,On){var Vn=Object(a.size)(Kt),Xn=Object(a.indexOf)(Kt,oe),$e=0,rn=er(Oe,On);return(rn<nr||On-rn<nr)&&Oe<=0&&Qe>=0&&($e=1),1-Xn/(Vn-1)-te+$e}function Vr(oe,Kt,te){var Oe=Object(a.size)(Kt),Qe=Object(a.indexOf)(Kt,oe),On=1;return 1-Qe/(Oe-1)-te+On}function ti(oe,Kt,te,Oe,Qe,On){var Vn=(oe-1)/(On-Qe),Xn=(Kt-1)/(Math.max(On,Oe)-Math.min(te,Qe));return 2-Math.max(Vn/Xn,Xn/Vn)}function hi(oe,Kt){return oe>=Kt?2-(oe-1)/(Kt-1):1}function Fi(oe,Kt,te,Oe){var Qe=Kt-oe;return 1-.5*(Math.pow(Kt-Oe,2)+Math.pow(oe-te,2))/Math.pow(.1*Qe,2)}function to(oe,Kt,te){var Oe=Kt-oe;if(te>Oe){var Qe=(te-Oe)/2;return 1-Math.pow(Qe,2)/Math.pow(.1*Oe,2)}return 1}function si(){return 1}function Ci(oe,Kt,te,Oe,Qe,On){if(te===void 0&&(te=5),Oe===void 0&&(Oe=!0),Qe===void 0&&(Qe=tr),On===void 0&&(On=[.25,.2,.5,.05]),typeof oe!="number"||typeof Kt!="number")return{min:0,max:0,ticks:[]};if(oe===Kt||te===1)return{min:oe,max:Kt,ticks:[oe]};for(var Vn={score:-2,lmin:0,lmax:0,lstep:0},Xn=1;Xn<Infinity;){for(var $e=0,rn=Qe;$e<rn.length;$e++){var on=rn[$e],$n=Vr(on,Qe,Xn);if(Number.isNaN($n))throw new Error("NaN");if(On[0]*$n+On[1]+On[2]+On[3]<Vn.score){Xn=Infinity;break}for(var vr=2;vr<Infinity;){var ar=hi(vr,te);if(On[0]*$n+On[1]+On[2]*ar+On[3]<Vn.score)break;for(var rr=(Kt-oe)/(vr+1)/Xn/on,Fr=Math.ceil(Math.log10(rr));Fr<Infinity;){var Ar=Xn*on*Math.pow(10,Fr),wr=to(oe,Kt,Ar*(vr-1));if(On[0]*$n+On[1]*wr+On[2]*ar+On[3]<Vn.score)break;var xr=Math.floor(Kt/Ar)*Xn-(vr-1)*Xn,Er=Math.ceil(oe/Ar)*Xn;if(xr>Er){Fr=Fr+1;continue}for(var Ir=xr;Ir<=Er;Ir=Ir+1){var Lr=Ir*(Ar/Xn),Pr=Lr+Ar*(vr-1),Dr=Ar,ri=Sr(on,Qe,Xn,Lr,Pr,Dr),vi=Fi(oe,Kt,Lr,Pr),ii=ti(vr,te,oe,Kt,Lr,Pr),Si=si(),Ui=On[0]*ri+On[1]*vi+On[2]*ii+On[3]*Si;Ui>Vn.score&&(!Oe||Lr<=oe&&Pr>=Kt)&&(Vn.lmin=Lr,Vn.lmax=Pr,Vn.lstep=Dr,Vn.score=Ui)}Fr=Fr+1}vr=vr+1}}Xn=Xn+1}for(var Yi=Number.isInteger(Vn.lstep)?0:Math.ceil(Math.abs(Math.log10(Vn.lstep))),Bi=[],Di=Vn.lmin;Di<=Vn.lmax;Di+=Vn.lstep)Bi.push(Di);var ve=Yi?Object(a.map)(Bi,function(F){return Number.parseFloat(F.toFixed(Yi))}):Bi;return{min:Math.min(oe,Object(a.head)(ve)),max:Math.max(Kt,Object(a.last)(ve)),ticks:ve}}function _i(oe){var Kt=oe.values,te=oe.tickInterval,Oe=oe.tickCount,Qe=Kt;if(Object(a.isNumber)(te))return Object(a.filter)(Qe,function(rn,on){return on%te==0});var On=oe.min,Vn=oe.max;if(Object(a.isNil)(On)&&(On=0),Object(a.isNil)(Vn)&&(Vn=Kt.length-1),Object(a.isNumber)(Oe)&&Oe<Vn-On){var Xn=Ci(On,Vn,Oe,!1,[1,2,5,3,4,7,6,8,9]).ticks,$e=Object(a.filter)(Xn,function(rn){return rn>=On&&rn<=Vn});return $e.map(function(rn){return Kt[rn]})}return Kt.slice(On,Vn+1)}function Li(oe){var Kt=oe.min,te=oe.max,Oe=oe.nice,Qe=oe.tickCount,On=new pr;return On.domain([Kt,te]),Oe&&On.nice(Qe),On.ticks(Qe)}var Vi=5,ro=Math.sqrt(50),jr=Math.sqrt(10),Ji=Math.sqrt(2),pr=function(){function oe(){this._domain=[0,1]}return oe.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},oe.prototype.nice=function(Kt){var te,Oe;Kt===void 0&&(Kt=Vi);var Qe=this._domain.slice(),On=0,Vn=this._domain.length-1,Xn=this._domain[On],$e=this._domain[Vn],rn;return $e<Xn&&(te=[$e,Xn],Xn=te[0],$e=te[1],Oe=[Vn,On],On=Oe[0],Vn=Oe[1]),rn=Br(Xn,$e,Kt),rn>0?(Xn=Math.floor(Xn/rn)*rn,$e=Math.ceil($e/rn)*rn,rn=Br(Xn,$e,Kt)):rn<0&&(Xn=Math.ceil(Xn*rn)/rn,$e=Math.floor($e*rn)/rn,rn=Br(Xn,$e,Kt)),rn>0?(Qe[On]=Math.floor(Xn/rn)*rn,Qe[Vn]=Math.ceil($e/rn)*rn,this.domain(Qe)):rn<0&&(Qe[On]=Math.ceil(Xn*rn)/rn,Qe[Vn]=Math.floor($e*rn)/rn,this.domain(Qe)),this},oe.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=Vi),Yr(this._domain[0],this._domain[this._domain.length-1],Kt||Vi)},oe}();function Yr(oe,Kt,te){var Oe,Qe=-1,On,Vn,Xn;if(Kt=+Kt,oe=+oe,te=+te,oe===Kt&&te>0)return[oe];if((Oe=Kt<oe)&&(On=oe,oe=Kt,Kt=On),(Xn=Br(oe,Kt,te))===0||!isFinite(Xn))return[];if(Xn>0)for(oe=Math.ceil(oe/Xn),Kt=Math.floor(Kt/Xn),Vn=new Array(On=Math.ceil(Kt-oe+1));++Qe<On;)Vn[Qe]=(oe+Qe)*Xn;else for(oe=Math.floor(oe*Xn),Kt=Math.ceil(Kt*Xn),Vn=new Array(On=Math.ceil(oe-Kt+1));++Qe<On;)Vn[Qe]=(oe-Qe)/Xn;return Oe&&Vn.reverse(),Vn}function Br(oe,Kt,te){var Oe=(Kt-oe)/Math.max(0,te),Qe=Math.floor(Math.log(Oe)/Math.LN10),On=Oe/Math.pow(10,Qe);return Qe>=0?(On>=ro?10:On>=jr?5:On>=Ji?2:1)*Math.pow(10,Qe):-Math.pow(10,-Qe)/(On>=ro?10:On>=jr?5:On>=Ji?2:1)}function Nr(oe,Kt,te){var Oe;return te==="ceil"?Oe=Math.ceil(oe/Kt):te==="floor"?Oe=Math.floor(oe/Kt):Oe=Math.round(oe/Kt),Oe*Kt}function Xr(oe,Kt,te){var Oe=Nr(oe,te,"floor"),Qe=Nr(Kt,te,"ceil");Oe=Object(a.fixedBase)(Oe,te),Qe=Object(a.fixedBase)(Qe,te);for(var On=[],Vn=Oe;Vn<=Qe;Vn=Vn+te){var Xn=Object(a.fixedBase)(Vn,te);On.push(Xn)}return{min:Oe,max:Qe,ticks:On}}function Kr(oe,Kt,te){var Oe,Qe=oe.minLimit,On=oe.maxLimit,Vn=oe.min,Xn=oe.max,$e=oe.tickCount,rn=$e===void 0?5:$e,on=Object(a.isNil)(Qe)?Object(a.isNil)(Kt)?Vn:Kt:Qe,$n=Object(a.isNil)(On)?Object(a.isNil)(te)?Xn:te:On;if(on>$n&&(Oe=[on,$n],$n=Oe[0],on=Oe[1]),rn<=2)return[on,$n];for(var vr=($n-on)/(rn-1),ar=[],rr=0;rr<rn;rr++)ar.push(on+vr*rr);return ar}function ni(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickInterval,Qe=oe.minLimit,On=oe.maxLimit,Vn=Li(oe);return!Object(a.isNil)(Qe)||!Object(a.isNil)(On)?Kr(oe,Object(a.head)(Vn),Object(a.last)(Vn)):Oe?Xr(Kt,te,Oe).ticks:Vn}function fi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.nice,On=oe.tickInterval,Vn=oe.minLimit,Xn=oe.maxLimit,$e=Ci(Kt,te,Oe,Qe).ticks;return!Object(a.isNil)(Vn)||!Object(a.isNil)(Xn)?Kr(oe,Object(a.head)($e),Object(a.last)($e)):On?Xr(Kt,te,On).ticks:$e}function $r(oe){var Kt=oe.base,te=oe.tickCount,Oe=oe.min,Qe=oe.max,On=oe.values,Vn,Xn=Vt(Kt,Qe);if(Oe>0)Vn=Math.floor(Vt(Kt,Oe));else{var $e=Ht(On,Kt,Qe);Vn=Math.floor(Vt(Kt,$e))}for(var rn=Xn-Vn,on=Math.ceil(rn/te),$n=[],vr=Vn;vr<Xn+on;vr=vr+on)$n.push(Math.pow(Kt,vr));return Oe<=0&&$n.unshift(0),$n}function ci(oe,Kt,te){te===void 0&&(te=5);var Oe={max:0,min:0,ticks:[]};if(oe===Kt)return{max:Kt,min:oe,ticks:[oe]};var Qe=1.5,On=.5+1.5*Qe,Vn=Kt-oe,Xn=Vn/te,$e=Math.pow(10,Math.floor(Math.log10(Xn))),rn=$e<1?Math.ceil(Math.abs(Math.log10($e))):0,on=$e;2*$e-Xn<Qe*(Xn-on)&&(on=2*$e,5*$e-Xn<On*(Xn-on)&&(on=5*$e,10*$e-Xn<Qe*(Xn-on)&&(on=10*$e)));var $n=Math.ceil(Kt/on),vr=Math.floor(oe/on);Oe.max=Math.max($n*on,Kt),Oe.min=Math.min(vr*on,oe);for(var ar=Number.parseFloat((vr*on).toFixed(rn));ar<Kt;)Oe.ticks.push(ar),ar+=on,rn&&(ar=Number.parseFloat(ar.toFixed(rn)));return Oe.ticks.push(ar),Oe}function Qr(oe){var Kt=oe.exponent,te=oe.tickCount,Oe=Math.ceil(Ct(Kt,oe.max)),Qe=Math.floor(Ct(Kt,oe.min)),On=ci(Qe,Oe,te).ticks;return On.map(function(Vn){var Xn=Vn>=0?1:-1;return Math.pow(Vn,Kt)*Xn})}function gi(oe,Kt){var te=oe.length*Kt;return Kt===1?oe[oe.length-1]:Kt===0?oe[0]:te%1!=0?oe[Math.ceil(te)-1]:oe.length%2==0?(oe[te-1]+oe[te])/2:oe[te]}function Oi(oe){var Kt=oe.tickCount,te=oe.values;if(!te||!te.length)return[];for(var Oe=te.slice().sort(function(Xn,$e){return Xn-$e}),Qe=[],On=0;On<Kt;On++){var Vn=On/(Kt-1);Qe.push(gi(Oe,Vn))}return Qe}function bi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.tickInterval,On=oe.minLimit,Vn=oe.maxLimit,Xn=ci(Kt,te,Oe).ticks;return!Object(a.isNil)(On)||!Object(a.isNil)(Vn)?Kr(oe,Object(a.head)(Xn),Object(a.last)(Xn)):Qe?Xr(Kt,te,Qe).ticks:Xn}function zi(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickInterval,On=oe.tickCount;if(Qe)On=Math.ceil((te-Kt)/Qe);else{Qe=At(Kt,te,On)[1];var Vn=(te-Kt)/Qe,Xn=Vn/On;Xn>1&&(Qe=Qe*Math.ceil(Xn)),Oe&&Qe<Oe&&(Qe=Oe)}for(var $e=[],rn=Kt;rn<te+Qe;rn+=Qe)$e.push(rn);return $e}function Qi(oe){var Kt=_i(oe),te=Object(a.last)(oe.values);return te!==Object(a.last)(Kt)&&Kt.push(te),Kt}function io(oe){return new Date(oe).getFullYear()}function Wi(oe){return new Date(oe,0,1).getTime()}function Zi(oe){return new Date(oe).getMonth()}function Pi(oe,Kt){var te=io(oe),Oe=io(Kt),Qe=Zi(oe),On=Zi(Kt);return(Oe-te)*12+(On-Qe)%12}function no(oe,Kt){return new Date(oe,Kt,1).getTime()}function Mo(oe,Kt){return Math.ceil((Kt-oe)/V)}function ao(oe,Kt){return Math.ceil((Kt-oe)/G)}function uo(oe,Kt){return Math.ceil((Kt-oe)/(60*1e3))}function xo(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickCount,On=oe.tickInterval,Vn=[];On||(On=(te-Kt)/Qe,Oe&&On<Oe&&(On=Oe));var Xn=io(Kt);if(On>rt)for(var $e=io(te),rn=Math.ceil(On/rt),on=Xn;on<=$e+rn;on=on+rn)Vn.push(Wi(on));else if(On>$)for(var $n=Math.ceil(On/$),vr=Zi(Kt),ar=Pi(Kt,te),on=0;on<=ar+$n;on=on+$n)Vn.push(no(Xn,on+vr));else if(On>V)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),wr=rr.getDate(),xr=Math.ceil(On/V),Er=Mo(Kt,te),on=0;on<Er+xr;on=on+xr)Vn.push(new Date(Fr,Ar,wr+on).getTime());else if(On>G)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),xr=rr.getDate(),Ir=rr.getHours(),Lr=Math.ceil(On/G),Pr=ao(Kt,te),on=0;on<=Pr+Lr;on=on+Lr)Vn.push(new Date(Fr,Ar,xr,Ir+on).getTime());else if(On>g)for(var Dr=uo(Kt,te),ri=Math.ceil(On/g),on=0;on<=Dr+ri;on=on+ri)Vn.push(Kt+on*g);else{var vi=On;vi<h&&(vi=h);for(var ii=Math.floor(Kt/h)*h,Si=Math.ceil((te-Kt)/h),Ui=Math.ceil(vi/h),on=0;on<Si+Ui;on=on+Ui)Vn.push(ii+on*h)}return Vn.length>=512&&console.warn("Notice: current ticks length("+Vn.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+On+") is too small, increase the value to solve the problem!"),Vn}i("cat",_i),i("time-cat",Qi),i("wilkinson-extended",fi),i("r-pretty",bi),i("time",zi),i("time-pretty",xo),i("log",$r),i("pow",Qr),i("quantile",Oi),i("d3-linear",ni),Cn("cat",M),Cn("category",M),Cn("identity",Kn),Cn("linear",Ut),Cn("log",pe),Cn("pow",we),Cn("time",Ke),Cn("timeCat",mt),Cn("quantize",hn),Cn("quantile",Tn)},"96lr":function(Un,_t,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("Qci9"),e=function(i){Object(at.b)(v,i);function v(){return i!==null&&i.apply(this,arguments)||this}return v.prototype.process=function(b){var S=a.flatten(b),f=this,M=f.xField,I=f.yField,y=this.getXValuesMaxMap(S),n=Math.max.apply(Math,Object.keys(y).map(function(s){return y[s]}));return a.map(b,function(s){return a.map(s,function(d){var E,O,C=d[I],p=d[M];if(a.isArray(C)){var x=(n-y[p])/2;return Object(at.a)(Object(at.a)({},d),(E={},E[I]=a.map(C,function(N){return x+N}),E))}var T=(n-C)/2;return Object(at.a)(Object(at.a)({},d),(O={},O[I]=[T,C+T],O))})})},v.prototype.getXValuesMaxMap=function(b){var S=this,f=this,M=f.xField,I=f.yField,y=a.groupBy(b,function(n){return n[M]});return a.mapValues(y,function(n){return S.getDimMaxValue(n,I)})},v.prototype.getDimMaxValue=function(b,S){var f=a.map(b,function(I){return a.get(I,S,[])}),M=a.flatten(f);return Math.max.apply(Math,M)},v}(A.a);_t.a=e},"9eUa":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return b}),z.d(_t,"d",function(){return S}),z.d(_t,"b",function(){return f}),z.d(_t,"c",function(){return I}),z.d(_t,"e",function(){return s}),z.d(_t,"h",function(){return d}),z.d(_t,"f",function(){return O}),z.d(_t,"g",function(){return C});var at=z("iTfj"),a=z("r0DC"),A=z("nCnq"),e=z("cyZq"),i=z("nycV"),v={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function b(p,x){var T=x.attr();for(var N in T){var Y=T[N],q=v[N]?v[N]:N;q==="matrix"&&Y?p.transform(Y[0],Y[1],Y[3],Y[4],Y[6],Y[7]):q==="lineDash"&&p.setLineDash?Object(at.isArray)(Y)&&p.setLineDash(Y):(q==="strokeStyle"||q==="fillStyle"?Y=Object(a.b)(p,x,Y):q==="globalAlpha"&&(Y=Y*p.globalAlpha),p[q]=Y)}}function S(p,x,T){for(var N=0;N<x.length;N++){var Y=x[N];Y.cfg.visible?Y.draw(p,T):Y.skipDraw()}}function f(p,x,T){var N=p.get("refreshElements");Object(at.each)(N,function(Y){if(Y!==p)for(var q=Y.cfg.parent;q&&q!==p&&!q.cfg.refresh;)q.cfg.refresh=!0,q=q.cfg.parent}),N[0]===p?y(x,T):M(x,T)}function M(p,x){for(var T=0;T<p.length;T++){var N=p[T];if(N.cfg.visible)if(N.cfg.hasChanged)N.cfg.refresh=!0,N.isGroup()&&y(N.cfg.children,x);else if(N.cfg.refresh)N.isGroup()&&M(N.cfg.children,x);else{var Y=n(N,x);N.cfg.refresh=Y,Y&&N.isGroup()&&M(N.cfg.children,x)}}}function I(p){for(var x=0;x<p.length;x++){var T=p[x];T.cfg.hasChanged=!1,T.isGroup()&&!T.destroyed&&I(T.cfg.children)}}function y(p,x){for(var T=0;T<p.length;T++){var N=p[T];N.cfg.refresh=!0,N.isGroup()&&y(N.get("children"),x)}}function n(p,x){var T=p.cfg.cacheCanvasBBox,N=p.cfg.isInView&&T&&Object(e.f)(T,x);return N}function s(p,x,T,N){var Y=T.path,q=T.startArrow,nt=T.endArrow;if(!!Y){var vt=[0,0],ht=[0,0],St={dx:0,dy:0};x.beginPath();for(var wt=0;wt<Y.length;wt++){var xt=Y[wt],ft=xt[0];if(wt===0&&q&&q.d){var Ft=p.getStartTangent();St=i.c(Ft[0][0],Ft[0][1],Ft[1][0],Ft[1][1],q.d)}else if(wt===Y.length-2&&Y[wt+1][0]==="Z"&&nt&&nt.d){var kt=Y[wt+1];if(kt[0]==="Z"){var Ft=p.getEndTangent();St=i.c(Ft[0][0],Ft[0][1],Ft[1][0],Ft[1][1],nt.d)}}else if(wt===Y.length-1&&nt&&nt.d&&Y[0]!=="Z"){var Ft=p.getEndTangent();St=i.c(Ft[0][0],Ft[0][1],Ft[1][0],Ft[1][1],nt.d)}var Ot=St.dx,X=St.dy;switch(ft){case"M":x.moveTo(xt[1]-Ot,xt[2]-X),ht=[xt[1],xt[2]];break;case"L":x.lineTo(xt[1]-Ot,xt[2]-X);break;case"Q":x.quadraticCurveTo(xt[1],xt[2],xt[3]-Ot,xt[4]-X);break;case"C":x.bezierCurveTo(xt[1],xt[2],xt[3],xt[4],xt[5]-Ot,xt[6]-X);break;case"A":{var ct=void 0;N?(ct=N[wt],ct||(ct=Object(A.a)(vt,xt),N[wt]=ct)):ct=Object(A.a)(vt,xt);var dt=ct.cx,pt=ct.cy,Mt=ct.rx,tt=ct.ry,lt=ct.startAngle,it=ct.endAngle,U=ct.xRotation,P=ct.sweepFlag;if(x.ellipse)x.ellipse(dt,pt,Mt,tt,U,lt,it,1-P);else{var H=Mt>tt?Mt:tt,k=Mt>tt?1:Mt/tt,h=Mt>tt?tt/Mt:1;x.translate(dt,pt),x.rotate(U),x.scale(k,h),x.arc(0,0,H,lt,it,1-P),x.scale(1/k,1/h),x.rotate(-U),x.translate(-dt,-pt)}break}case"Z":x.closePath();break;default:break}if(ft==="Z")vt=ht;else{var g=xt.length;vt=[xt[g-2],xt[g-1]]}}}}function d(p,x){var T=p.get("canvas");T&&(x==="remove"&&(p._cacheCanvasBBox=p.get("cacheCanvasBBox")),p.get("hasChanged")||(p.set("hasChanged",!0),p.cfg.parent&&p.cfg.parent.get("hasChanged")||(T.refreshElement(p,x,T),T.get("autoDraw")&&T.draw())))}function E(p){var x;if(p.destroyed)x=p._cacheCanvasBBox;else{var T=p.get("cacheCanvasBBox"),N=T&&!!(T.width&&T.height),Y=p.getCanvasBBox(),q=Y&&!!(Y.width&&Y.height);N&&q?x=Object(e.l)(T,Y):N?x=T:q&&(x=Y)}return x}function O(p){if(!p.length)return null;var x=[],T=[],N=[],Y=[];return Object(at.each)(p,function(q){var nt=E(q);nt&&(x.push(nt.minX),T.push(nt.minY),N.push(nt.maxX),Y.push(nt.maxY))}),{minX:Math.min.apply(null,x),minY:Math.min.apply(null,T),maxX:Math.max.apply(null,N),maxY:Math.max.apply(null,Y)}}function C(p,x){return!p||!x||!Object(e.f)(p,x)?null:{minX:Math.max(p.minX,x.minX),minY:Math.max(p.minY,x.minY),maxX:Math.min(p.maxX,x.maxX),maxY:Math.min(p.maxY,x.maxY)}}},AA7f:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return a}),z.d(_t,"a",function(){return A});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(vt,ht){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,wt){St.__proto__=wt}||function(St,wt){for(var xt in wt)wt.hasOwnProperty(xt)&&(St[xt]=wt[xt])},at(vt,ht)};function a(nt,vt){at(nt,vt);function ht(){this.constructor=nt}nt.prototype=vt===null?Object.create(vt):(ht.prototype=vt.prototype,new ht)}var A=function(){return A=Object.assign||function(ht){for(var St,wt=1,xt=arguments.length;wt<xt;wt++){St=arguments[wt];for(var ft in St)Object.prototype.hasOwnProperty.call(St,ft)&&(ht[ft]=St[ft])}return ht},A.apply(this,arguments)};function e(nt,vt){var ht={};for(var St in nt)Object.prototype.hasOwnProperty.call(nt,St)&&vt.indexOf(St)<0&&(ht[St]=nt[St]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,St=Object.getOwnPropertySymbols(nt);wt<St.length;wt++)vt.indexOf(St[wt])<0&&Object.prototype.propertyIsEnumerable.call(nt,St[wt])&&(ht[St[wt]]=nt[St[wt]]);return ht}function i(nt,vt,ht,St){var wt=arguments.length,xt=wt<3?vt:St===null?St=Object.getOwnPropertyDescriptor(vt,ht):St,ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xt=Reflect.decorate(nt,vt,ht,St);else for(var Ft=nt.length-1;Ft>=0;Ft--)(ft=nt[Ft])&&(xt=(wt<3?ft(xt):wt>3?ft(vt,ht,xt):ft(vt,ht))||xt);return wt>3&&xt&&Object.defineProperty(vt,ht,xt),xt}function v(nt,vt){return function(ht,St){vt(ht,St,nt)}}function b(nt,vt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,vt)}function S(nt,vt,ht,St){function wt(xt){return xt instanceof ht?xt:new ht(function(ft){ft(xt)})}return new(ht||(ht=Promise))(function(xt,ft){function Ft(X){try{Ot(St.next(X))}catch(ct){ft(ct)}}function kt(X){try{Ot(St.throw(X))}catch(ct){ft(ct)}}function Ot(X){X.done?xt(X.value):wt(X.value).then(Ft,kt)}Ot((St=St.apply(nt,vt||[])).next())})}function f(nt,vt){var ht={label:0,sent:function(){if(xt[0]&1)throw xt[1];return xt[1]},trys:[],ops:[]},St,wt,xt,ft;return ft={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function Ft(Ot){return function(X){return kt([Ot,X])}}function kt(Ot){if(St)throw new TypeError("Generator is already executing.");for(;ht;)try{if(St=1,wt&&(xt=Ot[0]&2?wt.return:Ot[0]?wt.throw||((xt=wt.return)&&xt.call(wt),0):wt.next)&&!(xt=xt.call(wt,Ot[1])).done)return xt;switch(wt=0,xt&&(Ot=[Ot[0]&2,xt.value]),Ot[0]){case 0:case 1:xt=Ot;break;case 4:return ht.label++,{value:Ot[1],done:!1};case 5:ht.label++,wt=Ot[1],Ot=[0];continue;case 7:Ot=ht.ops.pop(),ht.trys.pop();continue;default:if(xt=ht.trys,!(xt=xt.length>0&&xt[xt.length-1])&&(Ot[0]===6||Ot[0]===2)){ht=0;continue}if(Ot[0]===3&&(!xt||Ot[1]>xt[0]&&Ot[1]<xt[3])){ht.label=Ot[1];break}if(Ot[0]===6&&ht.label<xt[1]){ht.label=xt[1],xt=Ot;break}if(xt&&ht.label<xt[2]){ht.label=xt[2],ht.ops.push(Ot);break}xt[2]&&ht.ops.pop(),ht.trys.pop();continue}Ot=vt.call(nt,ht)}catch(X){Ot=[6,X],wt=0}finally{St=xt=0}if(Ot[0]&5)throw Ot[1];return{value:Ot[0]?Ot[1]:void 0,done:!0}}}function M(nt,vt,ht,St){St===void 0&&(St=ht),nt[St]=vt[ht]}function I(nt,vt){for(var ht in nt)ht!=="default"&&!vt.hasOwnProperty(ht)&&(vt[ht]=nt[ht])}function y(nt){var vt=typeof Symbol=="function"&&Symbol.iterator,ht=vt&&nt[vt],St=0;if(ht)return ht.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&St>=nt.length&&(nt=void 0),{value:nt&&nt[St++],done:!nt}}};throw new TypeError(vt?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(nt,vt){var ht=typeof Symbol=="function"&&nt[Symbol.iterator];if(!ht)return nt;var St=ht.call(nt),wt,xt=[],ft;try{for(;(vt===void 0||vt-- >0)&&!(wt=St.next()).done;)xt.push(wt.value)}catch(Ft){ft={error:Ft}}finally{try{wt&&!wt.done&&(ht=St.return)&&ht.call(St)}finally{if(ft)throw ft.error}}return xt}function s(){for(var nt=[],vt=0;vt<arguments.length;vt++)nt=nt.concat(n(arguments[vt]));return nt}function d(){for(var nt=0,vt=0,ht=arguments.length;vt<ht;vt++)nt+=arguments[vt].length;for(var St=Array(nt),wt=0,vt=0;vt<ht;vt++)for(var xt=arguments[vt],ft=0,Ft=xt.length;ft<Ft;ft++,wt++)St[wt]=xt[ft];return St}function E(nt){return this instanceof E?(this.v=nt,this):new E(nt)}function O(nt,vt,ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St=ht.apply(nt,vt||[]),wt,xt=[];return wt={},ft("next"),ft("throw"),ft("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function ft(dt){St[dt]&&(wt[dt]=function(pt){return new Promise(function(Mt,tt){xt.push([dt,pt,Mt,tt])>1||Ft(dt,pt)})})}function Ft(dt,pt){try{kt(St[dt](pt))}catch(Mt){ct(xt[0][3],Mt)}}function kt(dt){dt.value instanceof E?Promise.resolve(dt.value.v).then(Ot,X):ct(xt[0][2],dt)}function Ot(dt){Ft("next",dt)}function X(dt){Ft("throw",dt)}function ct(dt,pt){dt(pt),xt.shift(),xt.length&&Ft(xt[0][0],xt[0][1])}}function C(nt){var vt,ht;return vt={},St("next"),St("throw",function(wt){throw wt}),St("return"),vt[Symbol.iterator]=function(){return this},vt;function St(wt,xt){vt[wt]=nt[wt]?function(ft){return(ht=!ht)?{value:E(nt[wt](ft)),done:wt==="return"}:xt?xt(ft):ft}:xt}}function p(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=nt[Symbol.asyncIterator],ht;return vt?vt.call(nt):(nt=typeof y=="function"?y(nt):nt[Symbol.iterator](),ht={},St("next"),St("throw"),St("return"),ht[Symbol.asyncIterator]=function(){return this},ht);function St(xt){ht[xt]=nt[xt]&&function(ft){return new Promise(function(Ft,kt){ft=nt[xt](ft),wt(Ft,kt,ft.done,ft.value)})}}function wt(xt,ft,Ft,kt){Promise.resolve(kt).then(function(Ot){xt({value:Ot,done:Ft})},ft)}}function x(nt,vt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:vt}):nt.raw=vt,nt}function T(nt){if(nt&&nt.__esModule)return nt;var vt={};if(nt!=null)for(var ht in nt)Object.hasOwnProperty.call(nt,ht)&&(vt[ht]=nt[ht]);return vt.default=nt,vt}function N(nt){return nt&&nt.__esModule?nt:{default:nt}}function Y(nt,vt){if(!vt.has(nt))throw new TypeError("attempted to get private field on non-instance");return vt.get(nt)}function q(nt,vt,ht){if(!vt.has(nt))throw new TypeError("attempted to set private field on non-instance");return vt.set(nt,ht),ht}},APlK:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return a}),z.d(_t,"c",function(){return A}),z.d(_t,"a",function(){return e});var at=z("c+wO");function a(i,v){var b=i.cfg.el,S=i.attr(),f={dx:S.shadowOffsetX,dy:S.shadowOffsetY,blur:S.shadowBlur,color:S.shadowColor};if(!f.dx&&!f.dy&&!f.blur&&!f.color)b.removeAttribute("filter");else{var M=v.find("filter",f);M||(M=v.addShadow(f)),b.setAttribute("filter","url(#"+M+")")}}function A(i){var v=i.attr().matrix;if(v){for(var b=i.cfg.el,S=[],f=0;f<9;f+=3)S.push(v[f]+","+v[f+1]);S=S.join(","),S.indexOf("NaN")===-1?b.setAttribute("transform","matrix("+S+")"):console.warn("invalid matrix:",v)}}function e(i,v){var b=i.getClip(),S=i.get("el");if(!b)S.removeAttribute("clip-path");else if(b&&!S.hasAttribute("clip-path")){Object(at.a)(b),b.createPath(v);var f=v.addClip(b);S.setAttribute("clip-path","url(#"+f+")")}}},"B+CY":function(Un,_t){},B0vJ:function(Un,_t){},"B2d+":function(Un,_t){},B3DA:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return A});var at=z("iTfj"),a=z("F/eT");function A(e){var i=Object(at.clamp)(Object(a.a)(e)?e:0,0,1);return[{type:"current",percent:i},{type:"target",percent:1-i}]}},"B6l+":function(Un,_t,z){var at=z("Sq3C"),a=z("Z1HP"),A=z("Sxd8"),e=z("dt0z");function i(v,b,S){v=e(v),b=A(b);var f=b?a(v):0;return b&&f<b?v+at(b-f,S):v}Un.exports=i},BYeR:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return s});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("w02o"),v=z("tKoa");function b(d){var E=d.data,O=d.xField,C=d.measureField,p=d.rangeField,x=d.targetField,T=d.layout,N=[],Y=[];E.forEach(function(vt,ht){var St;vt[p].sort(function(wt,xt){return wt-xt}),vt[p].forEach(function(wt,xt){var ft,Ft=xt===0?wt:vt[p][xt]-vt[p][xt-1];N.push((ft={rKey:p+"_"+xt},ft[O]=O?vt[O]:String(ht),ft[p]=Ft,ft))}),vt[C].forEach(function(wt,xt){var ft;N.push((ft={mKey:vt[C].length>1?C+"_"+xt:""+C},ft[O]=O?vt[O]:String(ht),ft[C]=wt,ft))}),N.push((St={tKey:""+x},St[O]=O?vt[O]:String(ht),St[x]=vt[x],St)),Y.push(vt[p],vt[C],vt[x])});var q=Math.min.apply(Math,Y.flat(Infinity)),nt=Math.max.apply(Math,Y.flat(Infinity));return q=q>0?0:q,T==="vertical"&&N.reverse(),{min:q,max:nt,ds:N}}function S(d){var E=d.chart,O=d.options,C=O.bulletStyle,p=O.targetField,x=O.rangeField,T=O.measureField,N=O.xField,Y=O.color,q=O.layout,nt=O.size,vt=O.label,ht=b(O),St=ht.min,wt=ht.max,xt=ht.ds;E.data(xt);var ft=Object(A.b)({},d,{options:{xField:N,yField:x,seriesField:"rKey",isStack:!0,label:Object(e.get)(vt,"range"),interval:{color:Object(e.get)(Y,"range"),style:Object(e.get)(C,"range"),size:Object(e.get)(nt,"range")}}});Object(v.c)(ft),E.geometries[0].tooltip(!1);var Ft=Object(A.b)({},d,{options:{xField:N,yField:T,seriesField:"mKey",isStack:!0,label:Object(e.get)(vt,"measure"),interval:{color:Object(e.get)(Y,"measure"),style:Object(e.get)(C,"measure"),size:Object(e.get)(nt,"measure")}}});Object(v.c)(Ft);var kt=Object(A.b)({},d,{options:{xField:N,yField:p,seriesField:"tKey",label:Object(e.get)(vt,"target"),point:{color:Object(e.get)(Y,"target"),style:Object(e.get)(C,"target"),size:Object(e.get)(nt,"target")/2,shape:q==="horizontal"?"line":"hyphen"}}});return Object(v.e)(kt),q==="horizontal"&&E.coordinate().transpose(),Object(at.a)(Object(at.a)({},d),{ext:{data:{min:St,max:wt}}})}function f(d){var E,O,C=d.options,p=d.ext,x=C.xAxis,T=C.yAxis,N=C.targetField,Y=C.rangeField,q=C.measureField,nt=C.xField,vt=p.data;return Object(A.e)(Object(i.f)((E={},E[nt]=x,E[q]=T,E),(O={},O[q]={min:vt==null?void 0:vt.min,max:vt==null?void 0:vt.max},O[N]={sync:""+q},O[Y]={sync:""+q},O)))(d)}function M(d){var E=d.chart,O=d.options,C=O.xAxis,p=O.yAxis,x=O.xField,T=O.measureField,N=O.rangeField,Y=O.targetField;return E.axis(""+N,!1),E.axis(""+Y,!1),C===!1?E.axis(""+x,!1):E.axis(""+x,C),p===!1?E.axis(""+T,!1):E.axis(""+T,p),d}function I(d){var E=d.chart,O=d.options,C=O.legend;return E.removeInteraction("legend-filter"),E.legend(C),E.legend("rKey",!1),E.legend("mKey",!1),E.legend("tKey",!1),d}function y(d){var E=d.chart,O=d.options,C=O.label,p=O.measureField,x=O.targetField,T=O.rangeField,N=E.geometries,Y=N[0],q=N[1],nt=N[2];return Object(e.get)(C,"range")?Y.label(""+T,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.range))):Y.label(!1),Object(e.get)(C,"measure")?q.label(""+p,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.measure))):q.label(!1),Object(e.get)(C,"target")?nt.label(""+x,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.target))):nt.label(!1),d}function n(d){Object(A.e)(S,f,M,I,i.j,y,i.k,i.c,i.a)(d)}var s=function(d){Object(at.b)(E,d);function E(){var O=d!==null&&d.apply(this,arguments)||this;return O.type="bullet",O}return E.prototype.changeData=function(O){this.updateOption({data:O});var C=b(this.options),p=C.min,x=C.max,T=C.ds;f({options:this.options,ext:{data:{min:p,max:x}},chart:this.chart}),this.chart.changeData(T)},E.prototype.getSchemaAdaptor=function(){return n},E.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}})},E}(a.a)},BgvD:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return M}),z.d(_t,"a",function(){return n});var at=z("iTfj"),a="\u2026";function A(s){for(var d=0,E=0;E<s.length;E++)d+=e(s,E);return d}function e(s,d){return s.charCodeAt(d)>0&&s.charCodeAt(d)<128?1:2}function i(s,d,E){E===void 0&&(E="tail");var O=s.length,C="";if(E==="tail"){for(var p=0,x=0;p<d;){var T=e(s,x);if(p+T<=d)C+=s[x],p+=e(s,x),x++;else break}C+=a}else if(E==="head"){for(var p=0,x=O-1;p<d;){var T=e(s,x);if(p+T<=d)C+=s[x],p+=e(s,x),x--;else break}C=a+C}else{for(var N="",Y="",p=0,q=0,nt=O-1;p<d;){var vt=e(s,q),ht=!1;vt+p<=d&&(N+=s[q],q++,p+=vt,ht=!0);var St=e(s,nt);if(St+p<=d&&(Y=s[nt]+Y,p+=St,nt--,ht=!0),!ht)break}C=N+a+Y}return C}var v="\u2026",b=2,S=400;function f(s){for(var d=s.map(function(N){var Y=N.attr("text");return Object(at.isNil)(Y)?"":""+Y}),E=0,O=0,C=0;C<d.length;C+=1){for(var p=0,x=0;x<=d[C].length;x+=1){var T=d[C].charCodeAt(x);T>=19968&&T<=40869?p+=2:p+=1}p>E&&(E=p,O=C)}return s[O].getBBox().width}function M(s){if(s.length>S)return f(s);var d=0;return Object(at.each)(s,function(E){var O=E.getBBox(),C=O.width;d<C&&(d=C)}),d}function I(s,d){var E=d.getCanvasBBox();return s?E.width:E.height}function y(s,d){return s.getBBox().width<d}function n(s,d,E,O){O===void 0&&(O="tail");var C=d.attr("text"),p=I(s,d),x=A(C),T=!1;if(E<p){var N=Math.floor(E/p*x)-b,Y=void 0;N>=0?Y=i(C,N,O):Y=v,Y&&(d.attr("text",Y),T=!0)}return T?d.set("tip",C):d.set("tip",null),T}},BwSJ:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return d});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj");function i(E,O){var C=Math.floor(E/O);return[O*C,O*(C+1)]}function v(E){return Math.ceil(Math.log(E.length)/Math.LN2)+1}function b(E,O,C,p,x){var T=Object(e.clone)(E);Object(e.sortBy)(T,O);var N=Object(e.valuesOfKey)(T,O),Y=Object(e.getRange)(N),q=Y.max-Y.min,nt=C;if(!C&&p&&(nt=q/p),!C&&!p){var vt=v(N);nt=q/vt}var ht={},St=Object(e.groupBy)(T,x);Object(e.isEmpty)(St)?Object(e.each)(T,function(xt){var ft=xt[O],Ft=i(ft,nt),kt=Ft[0]+"-"+Ft[1];Object(e.hasKey)(ht,kt)||(ht[kt]={range:Ft,count:0}),ht[kt].count+=1}):Object.keys(St).forEach(function(xt){Object(e.each)(St[xt],function(ft){var Ft=ft[O],kt=i(Ft,nt),Ot=kt[0]+"-"+kt[1],X=Ot+"-"+xt;Object(e.hasKey)(ht,X)||(ht[X]={range:kt,count:0},ht[X][x]=xt),ht[X].count+=1})});var wt=[];return Object(e.each)(ht,function(xt){wt.push(xt)}),wt}var S=z("w02o"),f=z("tKoa");function M(E){var O=E.chart,C=E.options,p=C.data,x=C.binField,T=C.binNumber,N=C.binWidth,Y=C.color,q=C.stackField,nt=C.legend,vt=C.columnStyle,ht=b(p,x,N,T,q);O.data(ht);var St=Object(A.b)({},E,{options:{xField:"range",yField:"count",seriesField:q,isStack:!0,interval:{color:Y,style:vt}}});return Object(f.c)(St),nt&&q&&O.legend(q,nt),E}function I(E){var O=E.options,C=O.xAxis,p=O.yAxis;return Object(A.e)(Object(S.f)({range:C,count:p}))(E)}function y(E){var O=E.chart,C=E.options,p=C.xAxis,x=C.yAxis;return p===!1?O.axis("range",!1):O.axis("range",p),x===!1?O.axis("count",!1):O.axis("count",x),E}function n(E){var O=E.chart,C=E.options,p=C.label,x=Object(A.c)(O,"interval");if(!p)x.label(!1);else{var T=p.callback,N=Object(at.c)(p,["callback"]);x.label({fields:["count"],callback:T,cfg:Object(A.o)(N)})}return E}function s(E){return Object(A.e)(M,I,y,S.j,n,S.k,S.c,S.a)(E)}var d=function(E){Object(at.b)(O,E);function O(){var C=E!==null&&E.apply(this,arguments)||this;return C.type="histogram",C}return O.prototype.changeData=function(C){this.updateOption({data:C});var p=this.options,x=p.binField,T=p.binNumber,N=p.binWidth,Y=p.stackField;this.chart.changeData(b(C,x,N,T,Y))},O.prototype.getDefaultOptions=function(){return Object(A.b)({},E.prototype.getDefaultOptions.call(this),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},O.prototype.getSchemaAdaptor=function(){return s},O}(a.a)},CBiR:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.getReplaceAttrs=_t.getPolygonCentroid=_t.getAngle=_t.getArcPath=_t.getSectorPath=_t.polarToCartesian=void 0;var at=z("iTfj");function a(f){if(at.isEmpty(f))return null;var M=f[0].x,I=f[0].x,y=f[0].y,n=f[0].y;return at.each(f,function(s){M=M>s.x?s.x:M,I=I<s.x?s.x:I,y=y>s.y?s.y:y,n=n<s.y?s.y:n}),{minX:M,maxX:I,minY:y,maxY:n,centerX:(M+I)/2,centerY:(y+n)/2}}function A(f,M,I,y){return{x:f+I*Math.cos(y),y:M+I*Math.sin(y)}}_t.polarToCartesian=A;function e(f,M,I,y,n,s){s===void 0&&(s=0);var d=A(f,M,I,y),E=A(f,M,I,n),O=A(f,M,s,y),C=A(f,M,s,n);if(n-y==Math.PI*2){var p=A(f,M,I,y+Math.PI),x=A(f,M,s,y+Math.PI),T=[["M",d.x,d.y],["A",I,I,0,1,1,p.x,p.y],["A",I,I,0,1,1,E.x,E.y],["M",O.x,O.y]];return s&&(T.push(["A",s,s,0,1,0,x.x,x.y]),T.push(["A",s,s,0,1,0,C.x,C.y])),T.push(["M",d.x,d.y]),T.push(["Z"]),T}var N=n-y<=Math.PI?0:1,Y=[["M",d.x,d.y],["A",I,I,0,N,1,E.x,E.y],["L",C.x,C.y]];return s&&Y.push(["A",s,s,0,N,0,O.x,O.y]),Y.push(["L",d.x,d.y]),Y.push(["Z"]),Y}_t.getSectorPath=e;function i(f,M,I,y,n){var s=A(f,M,I,y),d=A(f,M,I,n);if(at.isNumberEqual(n-y,Math.PI*2)){var E=A(f,M,I,y+Math.PI);return[["M",s.x,s.y],["A",I,I,0,1,1,E.x,E.y],["A",I,I,0,1,1,s.x,s.y],["A",I,I,0,1,0,E.x,E.y],["A",I,I,0,1,0,s.x,s.y],["Z"]]}var O=n-y<=Math.PI?0:1;return[["M",s.x,s.y],["A",I,I,0,O,1,d.x,d.y]]}_t.getArcPath=i;function v(f,M){var I=f.points,y=a(I),n,s,d=M.startAngle,E=M.endAngle,O=E-d;return M.isTransposed?(n=y.maxY*O,s=y.minY*O):(n=y.maxX*O,s=y.minX*O),n+=d,s+=d,{startAngle:s,endAngle:n}}_t.getAngle=v;function b(f,M){if(at.isNumber(f)&&at.isNumber(M))return[f,M];for(var I=-1,y=0,n=0,s,d=f.length-1,E,O=0;++I<f.length;)s=d,d=I,O+=E=f[s]*M[d]-f[d]*M[s],y+=(f[s]+f[d])*E,n+=(M[s]+M[d])*E;return O*=3,[y/O,n/O]}_t.getPolygonCentroid=b;function S(f,M){var I=f.attr(),y=M.attr();return at.each(I,function(n,s){y[s]===void 0&&(y[s]=void 0)}),y}_t.getReplaceAttrs=S},CSvP:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at});function at(){return 0}_t.b=function(a){return function(){return a}}},"Ch+T":function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Html",function(){return E});var at=z("mrSG"),a=z("6UX8"),A=z("fIp6"),e=z("iTfj"),i=z("de35"),v=z("5UbV"),b=z("u60a"),S=z("L16w"),f,M=(f={},f[""+b.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:S.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},f[""+b.TITLE_CLASS]={marginBottom:"4px"},f[""+b.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},f[""+b.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},f[""+b.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},f[""+b.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},f[""+b.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},f[""+b.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},f);function I(O,C,p,x,T){var N={left:O<T.x,right:O+p>T.x+T.width,top:C<T.y,bottom:C+x>T.y+T.height};return N}function y(O,C,p,x,T,N){var Y=O,q=C;switch(N){case"left":Y=O-x-p,q=C-T/2;break;case"right":Y=O+p,q=C-T/2;break;case"top":Y=O-x/2,q=C-T-p;break;case"bottom":Y=O-x/2,q=C+p;break;default:Y=O+p,q=C-T-p;break}return{x:Y,y:q}}function n(O,C,p,x,T,N,Y){var q=y(O,C,p,x,T,N);if(Y){var nt=I(q.x,q.y,x,T,Y);N==="auto"?(nt.right&&(q.x=Math.max(0,O-x-p)),nt.top&&(q.y=Math.max(0,C-T-p))):N==="top"||N==="bottom"?(nt.left&&(q.x=Y.x),nt.right&&(q.x=Y.x+Y.width-x),N==="top"&&nt.top&&(q.y=C+p),N==="bottom"&&nt.bottom&&(q.y=C-T-p)):(nt.top&&(q.y=Y.y),nt.bottom&&(q.y=Y.y+Y.height-T),N==="left"&&nt.left&&(q.x=O+p),N==="right"&&nt.right&&(q.x=O-x-p))}return q}function s(O,C){var p=!1;return Object(e.each)(C,function(x){if(Object(e.hasKey)(O,x))return p=!0,!1}),p}var d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var p=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},p),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+b.CONTAINER_CLASS+'"><div class="'+b.TITLE_CLASS+'"></div><ul class="'+b.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+b.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+b.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+b.NAME_CLASS+`">{name}</span>:
          <span class="`+b.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+b.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+b.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:b.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:M})},C.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},C.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},C.prototype.show=function(){var p=this.getContainer();!p||this.destroyed||(this.set("visible",!0),Object(A.e)(p,{visibility:"visible"}),this.setCrossHairsVisible(!0))},C.prototype.hide=function(){var p=this.getContainer();!p||this.destroyed||(this.set("visible",!1),Object(A.e)(p,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},C.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},C.prototype.setLocation=function(p){this.set("x",p.x),this.set("y",p.y),this.resetPosition()},C.prototype.setCrossHairsVisible=function(p){var x=p?"":"none",T=this.get("xCrosshairDom"),N=this.get("yCrosshairDom");T&&Object(A.e)(T,{display:x}),N&&Object(A.e)(N,{display:x})},C.prototype.initContainer=function(){if(O.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var p=this.getHtmlContentNode();this.get("parent").appendChild(p),this.set("container",p),this.resetStyles(),this.applyStyles()}},C.prototype.updateInner=function(p){this.get("customContent")?this.renderCustomContent():(s(p,["title","showTitle"])&&this.resetTitle(),Object(e.hasKey)(p,"items")&&this.renderItems()),O.prototype.updateInner.call(this,p)},C.prototype.initDom=function(){this.cacheDoms()},C.prototype.removeDom=function(){O.prototype.removeDom.call(this),this.clearCrosshairs()},C.prototype.resetPosition=function(){var p=this.get("x"),x=this.get("y"),T=this.get("offset"),N=this.getOffset(),Y=N.offsetX,q=N.offsetY,nt=this.get("position"),vt=this.get("region"),ht=this.getContainer(),St=this.getBBox(),wt=St.width,xt=St.height,ft;vt&&(ft=Object(v.k)(vt));var Ft=n(p,x,T,wt,xt,nt,ft);Object(A.e)(ht,{left:Object(v.l)(Ft.x+Y),top:Object(v.l)(Ft.y+q)}),this.resetCrosshairs()},C.prototype.renderCustomContent=function(){var p=this.getHtmlContentNode(),x=this.get("parent"),T=this.get("container");T&&T.parentNode===x?x.replaceChild(p,T):x.appendChild(p),this.set("container",p),this.resetStyles(),this.applyStyles()},C.prototype.getHtmlContentNode=function(){var p,x=this.get("customContent");if(x){var T=x(this.get("title"),this.get("items"));Object(e.isElement)(T)?p=T:p=Object(A.b)(T)}return p},C.prototype.cacheDoms=function(){var p=this.getContainer(),x=p.getElementsByClassName(b.TITLE_CLASS)[0],T=p.getElementsByClassName(b.LIST_CLASS)[0];this.set("titleDom",x),this.set("listDom",T)},C.prototype.resetTitle=function(){var p=this.get("title"),x=this.get("showTitle");x&&p?this.setTitle(p):this.setTitle("")},C.prototype.setTitle=function(p){var x=this.get("titleDom");x&&(x.innerText=p)},C.prototype.resetCrosshairs=function(){var p=this.get("crosshairsRegion"),x=this.get("crosshairs");if(!p||!x)this.clearCrosshairs();else{var T=Object(v.k)(p),N=this.get("xCrosshairDom"),Y=this.get("yCrosshairDom");x==="x"?(this.resetCrosshair("x",T),Y&&(Y.remove(),this.set("yCrosshairDom",null))):x==="y"?(this.resetCrosshair("y",T),N&&(N.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",T),this.resetCrosshair("y",T)),this.setCrossHairsVisible(this.get("visible"))}},C.prototype.resetCrosshair=function(p,x){var T=this.checkCrosshair(p),N=this.get(p);p==="x"?Object(A.e)(T,{left:Object(v.l)(N),top:Object(v.l)(x.y),height:Object(v.l)(x.height)}):Object(A.e)(T,{top:Object(v.l)(N),left:Object(v.l)(x.x),width:Object(v.l)(x.width)})},C.prototype.checkCrosshair=function(p){var x=p+"CrosshairDom",T=p+"CrosshairTpl",N="CROSSHAIR_"+p.toUpperCase(),Y=b[N],q=this.get(x),nt=this.get("parent");return q||(q=Object(A.b)(this.get(T)),this.applyStyle(Y,q),nt.appendChild(q),this.set(x,q)),q},C.prototype.renderItems=function(){this.clearItemDoms();var p=this.get("items"),x=this.get("itemTpl"),T=this.get("listDom");T&&(Object(e.each)(p,function(N){var Y=a.a.toCSSGradient(N.color),q=Object(at.a)(Object(at.a)({},N),{color:Y}),nt=Object(e.substitute)(x,q),vt=Object(A.b)(nt);T.appendChild(vt)}),this.applyChildrenStyles(T,this.get("domStyles")))},C.prototype.clearItemDoms=function(){this.get("listDom")&&Object(v.a)(this.get("listDom"))},C.prototype.clearCrosshairs=function(){var p=this.get("xCrosshairDom"),x=this.get("yCrosshairDom");p&&p.remove(),x&&x.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},C}(i.a),E=d},Cr25:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return q});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),i=z("tKoa"),v=z("YuPD"),b=Object(v.b)({},a.a.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function S(nt,vt){var ht=null;return Object(A.each)(nt,function(St){typeof St[vt]=="number"&&(ht+=St[vt])}),ht}function f(nt,vt){var ht;switch(nt){case"inner":return ht="-30%",Object(A.isString)(vt)&&vt.endsWith("%")?parseFloat(vt)*.01>0?ht:vt:vt<0?vt:ht;case"outer":return ht=12,Object(A.isString)(vt)&&vt.endsWith("%")?parseFloat(vt)*.01<0?ht:vt:vt>0?vt:ht;default:return vt}}function M(nt,vt){var ht=Object(A.filter)(nt,function(St){var wt=St[vt];return typeof wt=="number"&&!isNaN(wt)||wt===null});return Object(v.j)(v.a.WARN,ht.length===nt.length,"illegal data existed in chart data."),ht}function I(nt,vt){return Object(A.every)(nt,function(ht){return ht[vt]===0})}function y(nt){var vt=nt.chart,ht=nt.options,St=ht.data,wt=ht.angleField,xt=ht.colorField,ft=ht.color,Ft=ht.pieStyle,kt=M(St,wt);if(I(kt,wt)){var Ot="$$percentage$$";kt=kt.map(function(ct){var dt;return Object(at.a)(Object(at.a)({},ct),(dt={},dt[Ot]=1/kt.length,dt))}),vt.data(kt);var X=Object(v.b)({},nt,{options:{xField:"1",yField:Ot,seriesField:xt,isStack:!0,interval:{color:ft,style:Ft},args:{zIndexReversed:!0}}});Object(i.c)(X),vt.geometries[0].tooltip(xt+"*"+wt)}else{vt.data(kt);var X=Object(v.b)({},nt,{options:{xField:"1",yField:wt,seriesField:xt,isStack:!0,interval:{color:ft,style:Ft},args:{zIndexReversed:!0}}});Object(i.c)(X)}return nt}function n(nt){var vt,ht=nt.chart,St=nt.options,wt=St.meta,xt=St.colorField,ft=Object(v.b)({},wt);return ht.scale(ft,(vt={},vt[xt]={type:"cat"},vt)),nt}function s(nt){var vt=nt.chart,ht=nt.options,St=ht.radius,wt=ht.innerRadius,xt=ht.startAngle,ft=ht.endAngle;return vt.coordinate({type:"theta",cfg:{radius:St,innerRadius:wt,startAngle:xt,endAngle:ft}}),nt}function d(nt){var vt=nt.chart,ht=nt.options,St=ht.label,wt=ht.colorField,xt=ht.angleField,ft=vt.geometries[0];if(!St)ft.label(!1);else{var Ft=St.callback,kt=Object(at.c)(St,["callback"]),Ot=Object(v.o)(kt);if(Ot.content){var X=Ot.content;Ot.content=function(Mt,tt,lt){var it=Mt[wt],U=Mt[xt],P=vt.getScaleByField(xt),H=P==null?void 0:P.scale(U);return Object(A.isFunction)(X)?X(Object(at.a)(Object(at.a)({},Mt),{percent:H}),tt,lt):Object(A.isString)(X)?Object(v.n)(X,{value:U,name:it,percentage:Object(A.isNumber)(H)&&!Object(A.isNil)(U)?(H*100).toFixed(2)+"%":null}):X}}var ct={inner:"",outer:"pie-outer",spider:"pie-spider"},dt=Ot.type?ct[Ot.type]:"pie-outer",pt=Ot.layout?Object(A.isArray)(Ot.layout)?Ot.layout:[Ot.layout]:[];Ot.layout=(dt?[{type:dt}]:[]).concat(pt),ft.label({fields:wt?[xt,wt]:[xt],callback:Ft,cfg:Object(at.a)(Object(at.a)({},Ot),{offset:f(Ot.type,Ot.offset),type:"pie"})})}return nt}function E(nt){var vt=nt.chart,ht=nt.options,St=ht.innerRadius,wt=ht.statistic,xt=ht.angleField,ft=ht.colorField,Ft=ht.meta;if(vt.getController("annotation").clear(!0),Object(v.e)(Object(e.b)())(nt),St&&wt){var kt=Object(v.b)({},b.statistic,wt),Ot=kt.title,X=kt.content;Ot!==!1&&(Ot=Object(v.b)({},{formatter:function(dt){return dt?dt[ft]:"\u603B\u8BA1"}},Ot)),X!==!1&&(X=Object(v.b)({},{formatter:function(dt,pt){var Mt=Object(A.get)(Ft,[xt,"formatter"]),tt=dt?dt[xt]:S(pt,xt);return Mt?Mt(tt):tt}},X)),Object(v.m)(vt,{statistic:{title:Ot,content:X},plotType:"pie"})}return nt}function O(nt){return Object(A.get)(nt,["options","tooltip"])!==!1?Object(v.b)({},nt,{options:{tooltip:{shared:!1}}}):nt}function C(nt){return Object(v.e)(y,n,e.j,s,e.d,function(vt){return Object(e.k)(O(vt))},d,e.i,E,e.c,e.a)(nt)}var p=z("Ihc8"),x=z("qaDU"),T=function(nt){Object(at.b)(vt,nt);function vt(){return nt!==null&&nt.apply(this,arguments)||this}return vt.prototype.getActiveElements=function(){var ht=p.Util.getDelegationObject(this.context);if(ht){var St=this.context.view,wt=ht.component,xt=ht.item,ft=wt.get("field");if(ft){var Ft=St.geometries[0].elements;return Ft.filter(function(kt){return kt.getModel().data[ft]===xt.value})}}return[]},vt.prototype.getActiveElementLabels=function(){var ht=this.context.view,St=this.getActiveElements(),wt=ht.geometries[0].labelsContainer.getChildren();return wt.filter(function(xt){return St.find(function(ft){return Object(A.isEqual)(ft.getData(),xt.get("data"))})})},vt.prototype.transfrom=function(ht){ht===void 0&&(ht=7.5);var St=this.getActiveElements(),wt=this.getActiveElementLabels();St.forEach(function(xt,ft){var Ft=wt[ft],kt=xt.geometry.coordinate;if(kt.isPolar&&kt.isTransposed){var Ot=p.Util.getAngle(xt.getModel(),kt),X=Ot.startAngle,ct=Ot.endAngle,dt=(X+ct)/2,pt=ht,Mt=pt*Math.cos(dt),tt=pt*Math.sin(dt);xt.shape.setMatrix(Object(x.a)([["t",Mt,tt]])),Ft.setMatrix(Object(x.a)([["t",Mt,tt]]))}})},vt.prototype.active=function(){this.transfrom()},vt.prototype.reset=function(){this.transfrom(0)},vt}(p.Action),N=z("mj6g"),Y=function(nt){Object(at.b)(vt,nt);function vt(){return nt!==null&&nt.apply(this,arguments)||this}return vt.prototype.getAnnotations=function(ht){var St=ht||this.context.view;return St.getController("annotation").option},vt.prototype.getInitialAnnotation=function(){return this.initialAnnotation},vt.prototype.init=function(){var ht=this,St=this.context.view;St.removeInteraction("tooltip"),St.on("afterchangesize",function(){var wt=ht.getAnnotations(St);ht.initialAnnotation=wt})},vt.prototype.change=function(){var ht=this.context,St=ht.view,wt=ht.event,xt=this.getAnnotations();this.initialAnnotation||(this.initialAnnotation=xt);var ft=((wt==null?void 0:wt.data)||{}).data;if(wt.type.match("legend-item")){var Ft=p.Util.getDelegationObject(this.context),kt=St.getGroupedFields()[0];if(Ft&&kt){var Ot=Ft.item;ft=St.getData().find(function(H){return H[kt]===Ot.value})}}if(ft){var X=St.getController("annotation");X.clear(!0);var ct=St.getScaleFields(),dt=ct[1],pt=ct[2],Mt=St.getScaleByField(dt),tt=St.getScaleByField(pt),lt=xt.filter(function(H){return!Object(A.get)(H,"key","").match("statistic")}),it=xt.filter(function(H){return Object(A.get)(H,"key","").match("statistic")}),U=it.filter(function(H){return H.key==="top-statistic"}),P=it.filter(function(H){return H.key==="bottom-statistic"});Object(A.each)(it,function(H){var k,h;H.key==="top-statistic"?(k=tt?tt.getText(ft[pt]):null,h=P?"translate(-50%, -100%)":"translate(-50%, -50%)"):(k=Mt?Mt.getText(ft[dt]):ft[dt],h=U?"translate(-50%, 0)":"translate(-50%,-50%)"),lt.push(Object(at.a)(Object(at.a)({},H),{html:function(G,V){var $=V.getCoordinate(),rt=$.getRadius()*$.innerRadius*2,ot=Object(A.isFunction)(H.style)?H.style():H.style;Object(N.d)(G,Object(at.a)({width:rt+"px",transform:h},Object(N.a)(ot)));var At=V.getData();return H.customHtml?H.customHtml(G,V,ft,At):(H.formatter&&(k=H.formatter(ft,At)),k?Object(A.isString)(k)?k:""+k:"<div></div>")}})),lt.forEach(function(g){X.annotation(g)}),St.render(!0)})}},vt.prototype.reset=function(){var ht=this.context.view,St=ht.getController("annotation");St.clear(!0);var wt=this.getInitialAnnotation();Object(A.each)(wt,function(xt){ht.annotation()[xt.type](xt)}),ht.render(!0)},vt}(p.Action);Object(p.registerAction)("pie-statistic",Y),Object(p.registerInteraction)("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Object(p.registerAction)("pie-legend",T),Object(p.registerInteraction)("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var q=function(nt){Object(at.b)(vt,nt);function vt(){var ht=nt!==null&&nt.apply(this,arguments)||this;return ht.type="pie",ht}return vt.getDefaultOptions=function(){return b},vt.prototype.changeData=function(ht){var St=this.options,wt=this.options.angleField,xt=M(St.data,wt),ft=M(ht,wt);I(xt,wt)||I(ft,wt)?this.update({data:ht}):(this.updateOption({data:ht}),this.chart.data(ft),E({chart:this.chart,options:this.options}),this.chart.render(!0))},vt.prototype.getDefaultOptions=function(){return vt.getDefaultOptions()},vt.prototype.getSchemaAdaptor=function(){return C},vt}(a.a)},DMQx:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return q});var at=z("mrSG"),a=z("YuPD"),A=z("w02o"),e=z("iTfj"),i=z("Ihc8"),v=z("5OoT");function b(nt,vt){return Object(a.b)({size:vt?32:80,spacing:vt?8:12,offset:vt?32:0,arrow:nt.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:nt.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:v.a}},nt)}function S(nt,vt){return Object(e.map)(vt.getModel().points,function(ht){return nt.convertPoint(ht)})}function f(nt,vt,ht){var St=nt.view,wt=nt.geometry,xt=nt.group,ft=nt.options,Ft=nt.horizontal,kt=ft.offset,Ot=ft.size,X=ft.arrow,ct=St.getCoordinate(),dt=S(ct,vt)[Ft?3:0],pt=S(ct,ht)[Ft?0:3],Mt=pt.y-dt.y,tt=pt.x-dt.x;if(typeof X!="boolean"){var lt=X.headSize,it=ft.spacing,U;Ft?(tt-lt)/2<it?(it=Math.max(1,(tt-lt)/2),U=[[dt.x+it,dt.y-kt],[dt.x+it,dt.y-kt-Ot],[pt.x-it,pt.y-kt-Ot/2]]):U=[[dt.x+it,dt.y-kt],[dt.x+it,dt.y-kt-Ot],[pt.x-it-lt,pt.y-kt-Ot],[pt.x-it,pt.y-kt-Ot/2],[pt.x-it-lt,pt.y-kt]]:(Mt-lt)/2<it?(it=Math.max(1,(Mt-lt)/2),U=[[dt.x+kt,dt.y+it],[dt.x+kt+Ot,dt.y+it],[pt.x+kt+Ot/2,pt.y-it]]):U=[[dt.x+kt,dt.y+it],[dt.x+kt+Ot,dt.y+it],[pt.x+kt+Ot,pt.y-it-lt],[pt.x+kt+Ot/2,pt.y-it],[pt.x+kt,pt.y-it-lt]],xt.addShape("polygon",{id:St.id+"-conversion-tag-arrow-"+wt.getElementId(vt.getModel().mappingData),name:"conversion-tag-arrow",attrs:Object(at.a)(Object(at.a)({},X.style||{}),{points:U})})}}function M(nt,vt,ht){var St,wt,xt,ft=nt.view,Ft=nt.geometry,kt=nt.group,Ot=nt.options,X=nt.field,ct=nt.horizontal,dt=Ot.offset,pt=Ot.size;if(typeof Ot.text!="boolean"){var Mt=ft.getCoordinate(),tt=((St=Ot.text)===null||St===void 0?void 0:St.formatter)&&((wt=Ot.text)===null||wt===void 0?void 0:wt.formatter(vt.getData()[X],ht.getData()[X])),lt=S(Mt,vt)[ct?3:0],it=S(Mt,ht)[ct?0:3],U=kt.addShape("text",{id:ft.id+"-conversion-tag-text-"+Ft.getElementId(vt.getModel().mappingData),name:"conversion-tag-text",attrs:Object(at.a)(Object(at.a)({},((xt=Ot.text)===null||xt===void 0?void 0:xt.style)||{}),{text:tt,x:ct?(lt.x+it.x)/2:lt.x+dt+pt/2,y:ct?lt.y-dt-pt/2:(lt.y+it.y)/2})});if(ct){var P=it.x-lt.x,H=U.getBBox().width;if(H>P){var k=H/tt.length,h=Math.max(1,Math.ceil(P/k)-1),g=tt.slice(0,h)+"...";U.attr("text",g)}}}}function I(nt,vt,ht){f(nt,vt,ht),M(nt,vt,ht)}function y(nt,vt,ht){return vt===void 0&&(vt=!0),ht===void 0&&(ht=!1),function(St){var wt=St.options,xt=St.chart,ft=wt.conversionTag,Ft=wt.theme;return ft&&!ht&&(xt.theme(Object(a.b)({},Object(e.isObject)(Ft)?Ft:Object(i.getTheme)(Ft),{columnWidthRatio:1/3})),xt.annotation().shape({render:function(Ot,X){var ct=Ot.addGroup({id:xt.id+"-conversion-tag-group",name:"conversion-tag-group"}),dt=Object(e.find)(xt.geometries,function(tt){return tt.type==="interval"}),pt={view:X,geometry:dt,group:ct,field:nt,horizontal:vt,options:b(ft,vt)},Mt=vt?dt.elements:dt.elements.slice().reverse();Object(e.each)(Mt,function(tt,lt){lt>0&&I(pt,Mt[lt-1],tt)})}})),St}}var n={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};Object(i.registerInteraction)(n.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Object(i.registerInteraction)(n.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function s(nt){return nt===void 0&&(nt=!1),function(vt){var ht=vt.chart,St=vt.options,wt=St.connectedArea,xt=function(){ht.removeInteraction(n.hover),ht.removeInteraction(n.click)};if(!nt&&wt){var ft=wt.trigger||"hover";xt(),ht.interaction(n[ft])}else xt();return vt}}var d=z("tKoa"),E=z("sqD9"),O=z("DyAw");function C(nt){var vt=nt.options,ht=vt.legend,St=vt.seriesField,wt=vt.isStack;return St?ht!==!1&&(ht=Object(at.a)({position:wt?"right-top":"top-left"},ht)):ht=!1,nt.options.legend=ht,nt}function p(nt){var vt=nt.chart,ht=nt.options,St=ht.data,wt=ht.columnStyle,xt=ht.color,ft=ht.columnWidthRatio,Ft=ht.isPercent,kt=ht.xField,Ot=ht.yField,X=ht.seriesField,ct=ht.tooltip;vt.data(Object(E.a)(St,Ot,kt,Ot,Ft));var dt=Ft?Object(at.a)({formatter:function(tt){return{name:tt[X]||tt[kt],value:(Number(tt[Ot])*100).toFixed(2)+"%"}}},ct):ct,pt=Object(a.b)({},nt,{options:{widthRatio:ft,tooltip:dt,interval:{style:wt,color:xt}}});return Object(d.c)(pt),nt}function x(nt){var vt,ht,St=nt.options,wt=St.xAxis,xt=St.yAxis,ft=St.xField,Ft=St.yField,kt=St.data,Ot=St.isPercent,X=Ot?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Object(a.e)(Object(A.f)((vt={},vt[ft]=wt,vt[Ft]=xt,vt),(ht={},ht[ft]={type:"cat"},ht[Ft]=Object(at.a)(Object(at.a)({},Object(O.a)(kt,Ft)),X),ht)))(nt)}function T(nt){var vt=nt.chart,ht=nt.options,St=ht.xAxis,wt=ht.yAxis,xt=ht.xField,ft=ht.yField;return St===!1?vt.axis(xt,!1):vt.axis(xt,St),wt===!1?vt.axis(ft,!1):vt.axis(ft,wt),nt}function N(nt){var vt=nt.chart,ht=nt.options,St=ht.legend,wt=ht.seriesField;return St&&wt?vt.legend(wt,St):St===!1&&vt.legend(!1),nt}function Y(nt){var vt=nt.chart,ht=nt.options,St=ht.label,wt=ht.yField,xt=ht.isRange,ft=Object(a.c)(vt,"interval");if(!St)ft.label(!1);else{var Ft=St.callback,kt=Object(at.c)(St,["callback"]);ft.label({fields:[wt],callback:Ft,cfg:Object(at.a)({layout:(kt==null?void 0:kt.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(a.o)(xt?Object(at.a)({content:function(X){var ct;return(ct=X[wt])===null||ct===void 0?void 0:ct.join("-")}},kt):kt))})}return nt}function q(nt,vt){vt===void 0&&(vt=!1);var ht=nt.options,St=ht.seriesField;return Object(a.e)(C,A.j,p,x,T,N,A.k,A.h,A.g,Y,A.c,A.a,Object(A.b)(),y(ht.yField,!vt,!!St),s(!ht.isStack),A.e)(nt)}},DdT1:function(Un,_t,z){"use strict";_t.a=function(at){at.x0=Math.round(at.x0),at.y0=Math.round(at.y0),at.x1=Math.round(at.x1),at.y1=Math.round(at.y1)}},Djfg:function(Un,_t,z){"use strict";var at=z("XiRp"),a=z.n(at),A=z("h4/5"),e=z.n(A),i=z("N9hJ"),v=z.n(i),b=z("3T7b"),S=z.n(b),f=z("B0vJ"),M=z.n(f),I=z("B2d+"),y=z.n(I)},DyAw:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a}),z.d(_t,"b",function(){return A});var at=z("iTfj");function a(e,i){var v=e.filter(function(f){var M=Object(at.get)(f,[i]);return Object(at.isNumber)(M)&&!isNaN(M)}),b=v.every(function(f){return Object(at.get)(f,[i])>=0}),S=v.every(function(f){return Object(at.get)(f,[i])<=0});return b?{min:0}:S?{max:0}:{}}function A(e,i,v,b){if(!Array.isArray(e))return{nodes:[],links:[]};var S=[],f={},M=-1;return e.forEach(function(I){var y=I[i],n=I[v],s=I[b];f[y]||(f[y]={id:++M,name:y}),f[n]||(f[n]={id:++M,name:n}),S.push({source:f[y].id,target:f[n].id,value:s})}),{nodes:Object.values(f),links:S}}},EYNi:function(Un,_t,z){"use strict";z.d(_t,"e",function(){return p}),z.d(_t,"b",function(){return nt}),z.d(_t,"a",function(){return dt}),z.d(_t,"c",function(){return M}),z.d(_t,"d",function(){return U}),z.d(_t,"f",function(){return at});var at={};z.r(at),z.d(at,"distance",function(){return e}),z.d(at,"isNumberEqual",function(){return i}),z.d(at,"getBBoxByArray",function(){return v}),z.d(at,"getBBoxRange",function(){return b}),z.d(at,"piMod",function(){return S});function a(k){return Math.min.apply(null,k)}function A(k){return Math.max.apply(null,k)}function e(k,h,g,G){var V=k-g,$=h-G;return Math.sqrt(V*V+$*$)}function i(k,h){return Math.abs(k-h)<.001}function v(k,h){var g=a(k),G=a(h),V=A(k),$=A(h);return{x:g,y:G,width:V-g,height:$-G}}function b(k,h,g,G){return{minX:a([k,g]),maxX:A([k,g]),minY:a([h,G]),maxY:A([h,G])}}function S(k){return(k+Math.PI*2)%(Math.PI*2)}var f=z("ZxFD"),M={box:function(h,g,G,V){return v([h,G],[g,V])},length:function(h,g,G,V){return e(h,g,G,V)},pointAt:function(h,g,G,V,$){return{x:(1-$)*h+$*G,y:(1-$)*g+$*V}},pointDistance:function(h,g,G,V,$,rt){var ot=(G-h)*($-h)+(V-g)*(rt-g);if(ot<0)return e(h,g,$,rt);var At=(G-h)*(G-h)+(V-g)*(V-g);return ot>At?e(G,V,$,rt):this.pointToLine(h,g,G,V,$,rt)},pointToLine:function(h,g,G,V,$,rt){var ot=[G-h,V-g];if(f.exactEquals(ot,[0,0]))return Math.sqrt(($-h)*($-h)+(rt-g)*(rt-g));var At=[-ot[1],ot[0]];f.normalize(At,At);var gt=[$-h,rt-g];return Math.abs(f.dot(gt,At))},tangentAngle:function(h,g,G,V){return Math.atan2(V-g,G-h)}},I=1e-4;function y(k,h,g,G,V,$){var rt,ot=Infinity,At=[g,G],gt=20;$&&$>200&&(gt=$/10);for(var mt=1/gt,bt=mt/10,jt=0;jt<=gt;jt++){var Dt=jt*mt,Ut=[V.apply(null,k.concat([Dt])),V.apply(null,h.concat([Dt]))],Ct=e(At[0],At[1],Ut[0],Ut[1]);Ct<ot&&(rt=Dt,ot=Ct)}if(rt===0)return{x:k[0],y:h[0]};if(rt===1){var Vt=k.length;return{x:k[Vt-1],y:h[Vt-1]}}ot=Infinity;for(var jt=0;jt<32&&!(bt<I);jt++){var Ht=rt-bt,re=rt+bt,Ut=[V.apply(null,k.concat([Ht])),V.apply(null,h.concat([Ht]))],Ct=e(At[0],At[1],Ut[0],Ut[1]);if(Ht>=0&&Ct<ot)rt=Ht,ot=Ct;else{var pe=[V.apply(null,k.concat([re])),V.apply(null,h.concat([re]))],ye=e(At[0],At[1],pe[0],pe[1]);re<=1&&ye<ot?(rt=re,ot=ye):bt*=.5}}return{x:V.apply(null,k.concat([rt])),y:V.apply(null,h.concat([rt]))}}function n(k,h){for(var g=0,G=k.length,V=0;V<G;V++){var $=k[V],rt=h[V],ot=k[(V+1)%G],At=h[(V+1)%G];g+=e($,rt,ot,At)}return g/2}function s(k,h,g,G){var V=1-G;return V*V*k+2*G*V*h+G*G*g}function d(k,h,g){var G=k+g-2*h;if(i(G,0))return[.5];var V=(k-h)/G;return V<=1&&V>=0?[V]:[]}function E(k,h,g,G){return 2*(1-G)*(h-k)+2*G*(g-h)}function O(k,h,g,G,V,$,rt){var ot=s(k,g,V,rt),At=s(h,G,$,rt),gt=M.pointAt(k,h,g,G,rt),mt=M.pointAt(g,G,V,$,rt);return[[k,h,gt.x,gt.y,ot,At],[ot,At,mt.x,mt.y,V,$]]}function C(k,h,g,G,V,$,rt){if(rt===0)return(e(k,h,g,G)+e(g,G,V,$)+e(k,h,V,$))/2;var ot=O(k,h,g,G,V,$,.5),At=ot[0],gt=ot[1];return At.push(rt-1),gt.push(rt-1),C.apply(null,At)+C.apply(null,gt)}var p={box:function(h,g,G,V,$,rt){var ot=d(h,G,$)[0],At=d(g,V,rt)[0],gt=[h,$],mt=[g,rt];return ot!==void 0&&gt.push(s(h,G,$,ot)),At!==void 0&&mt.push(s(g,V,rt,At)),v(gt,mt)},length:function(h,g,G,V,$,rt){return C(h,g,G,V,$,rt,3)},nearestPoint:function(h,g,G,V,$,rt,ot,At){return y([h,G,$],[g,V,rt],ot,At,s)},pointDistance:function(h,g,G,V,$,rt,ot,At){var gt=this.nearestPoint(h,g,G,V,$,rt,ot,At);return e(gt.x,gt.y,ot,At)},interpolationAt:s,pointAt:function(h,g,G,V,$,rt,ot){return{x:s(h,G,$,ot),y:s(g,V,rt,ot)}},divide:function(h,g,G,V,$,rt,ot){return O(h,g,G,V,$,rt,ot)},tangentAngle:function(h,g,G,V,$,rt,ot){var At=E(h,G,$,ot),gt=E(g,V,rt,ot),mt=Math.atan2(gt,At);return S(mt)}};function x(k,h,g,G,V){var $=1-V;return $*$*$*k+3*h*V*$*$+3*g*V*V*$+G*V*V*V}function T(k,h,g,G,V){var $=1-V;return 3*($*$*(h-k)+2*$*V*(g-h)+V*V*(G-g))}function N(k,h,g,G){var V=-3*k+9*h-9*g+3*G,$=6*k-12*h+6*g,rt=3*h-3*k,ot=[],At,gt,mt;if(i(V,0))i($,0)||(At=-rt/$,At>=0&&At<=1&&ot.push(At));else{var bt=$*$-4*V*rt;i(bt,0)?ot.push(-$/(2*V)):bt>0&&(mt=Math.sqrt(bt),At=(-$+mt)/(2*V),gt=(-$-mt)/(2*V),At>=0&&At<=1&&ot.push(At),gt>=0&&gt<=1&&ot.push(gt))}return ot}function Y(k,h,g,G,V,$,rt,ot,At){var gt=x(k,g,V,rt,At),mt=x(h,G,$,ot,At),bt=M.pointAt(k,h,g,G,At),jt=M.pointAt(g,G,V,$,At),Dt=M.pointAt(V,$,rt,ot,At),Ut=M.pointAt(bt.x,bt.y,jt.x,jt.y,At),Ct=M.pointAt(jt.x,jt.y,Dt.x,Dt.y,At);return[[k,h,bt.x,bt.y,Ut.x,Ut.y,gt,mt],[gt,mt,Ct.x,Ct.y,Dt.x,Dt.y,rt,ot]]}function q(k,h,g,G,V,$,rt,ot,At){if(At===0)return n([k,g,V,rt],[h,G,$,ot]);var gt=Y(k,h,g,G,V,$,rt,ot,.5),mt=gt[0],bt=gt[1];return mt.push(At-1),bt.push(At-1),q.apply(null,mt)+q.apply(null,bt)}var nt={extrema:N,box:function(h,g,G,V,$,rt,ot,At){for(var gt=[h,ot],mt=[g,At],bt=N(h,G,$,ot),jt=N(g,V,rt,At),Dt=0;Dt<bt.length;Dt++)gt.push(x(h,G,$,ot,bt[Dt]));for(var Dt=0;Dt<jt.length;Dt++)mt.push(x(g,V,rt,At,jt[Dt]));return v(gt,mt)},length:function(h,g,G,V,$,rt,ot,At){return q(h,g,G,V,$,rt,ot,At,3)},nearestPoint:function(h,g,G,V,$,rt,ot,At,gt,mt,bt){return y([h,G,$,ot],[g,V,rt,At],gt,mt,x,bt)},pointDistance:function(h,g,G,V,$,rt,ot,At,gt,mt,bt){var jt=this.nearestPoint(h,g,G,V,$,rt,ot,At,gt,mt,bt);return e(jt.x,jt.y,gt,mt)},interpolationAt:x,pointAt:function(h,g,G,V,$,rt,ot,At,gt){return{x:x(h,G,$,ot,gt),y:x(g,V,rt,At,gt)}},divide:function(h,g,G,V,$,rt,ot,At,gt){return Y(h,g,G,V,$,rt,ot,At,gt)},tangentAngle:function(h,g,G,V,$,rt,ot,At,gt){var mt=T(h,G,$,ot,gt),bt=T(g,V,rt,At,gt);return S(Math.atan2(bt,mt))}};function vt(k,h){var g=Math.abs(k);return h>0?g:g*-1}var ht={box:function(h,g,G,V){return{x:h-G,y:g-V,width:G*2,height:V*2}},length:function(h,g,G,V){return Math.PI*(3*(G+V)-Math.sqrt((3*G+V)*(G+3*V)))},nearestPoint:function(h,g,G,V,$,rt){var ot=G,At=V;if(ot===0||At===0)return{x:h,y:g};for(var gt=$-h,mt=rt-g,bt=Math.abs(gt),jt=Math.abs(mt),Dt=ot*ot,Ut=At*At,Ct=Math.PI/4,Vt,Ht,re=0;re<4;re++){Vt=ot*Math.cos(Ct),Ht=At*Math.sin(Ct);var pe=(Dt-Ut)*Math.pow(Math.cos(Ct),3)/ot,ye=(Ut-Dt)*Math.pow(Math.sin(Ct),3)/At,we=Vt-pe,Ne=Ht-ye,Ke=bt-pe,pn=jt-ye,hn=Math.hypot(Ne,we),kn=Math.hypot(pn,Ke),Tn=hn*Math.asin((we*pn-Ne*Ke)/(hn*kn)),Rn=Tn/Math.sqrt(Dt+Ut-Vt*Vt-Ht*Ht);Ct+=Rn,Ct=Math.min(Math.PI/2,Math.max(0,Ct))}return{x:h+vt(Vt,gt),y:g+vt(Ht,mt)}},pointDistance:function(h,g,G,V,$,rt){var ot=this.nearestPoint(h,g,G,V,$,rt);return e(ot.x,ot.y,$,rt)},pointAt:function(h,g,G,V,$){var rt=2*Math.PI*$;return{x:h+G*Math.cos(rt),y:g+V*Math.sin(rt)}},tangentAngle:function(h,g,G,V,$){var rt=2*Math.PI*$,ot=Math.atan2(V*Math.cos(rt),-G*Math.sin(rt));return S(ot)}};function St(k,h,g,G,V,$,rt,ot){return-1*g*Math.cos(V)*Math.sin(ot)-G*Math.sin(V)*Math.cos(ot)}function wt(k,h,g,G,V,$,rt,ot){return-1*g*Math.sin(V)*Math.sin(ot)+G*Math.cos(V)*Math.cos(ot)}function xt(k,h,g){return Math.atan(-h/k*Math.tan(g))}function ft(k,h,g){return Math.atan(h/(k*Math.tan(g)))}function Ft(k,h,g,G,V,$){return g*Math.cos(V)*Math.cos($)-G*Math.sin(V)*Math.sin($)+k}function kt(k,h,g,G,V,$){return g*Math.sin(V)*Math.cos($)+G*Math.cos(V)*Math.sin($)+h}function Ot(k,h,g,G){var V=Math.atan2(G*k,g*h);return(V+Math.PI*2)%(Math.PI*2)}function X(k,h,g){return{x:k*Math.cos(g),y:h*Math.sin(g)}}function ct(k,h,g){var G=Math.cos(g),V=Math.sin(g);return[k*G-h*V,k*V+h*G]}var dt={box:function(h,g,G,V,$,rt,ot){for(var At=xt(G,V,$),gt=Infinity,mt=-Infinity,bt=[rt,ot],jt=-Math.PI*2;jt<=Math.PI*2;jt+=Math.PI){var Dt=At+jt;rt<ot?rt<Dt&&Dt<ot&&bt.push(Dt):ot<Dt&&Dt<rt&&bt.push(Dt)}for(var jt=0;jt<bt.length;jt++){var Ut=Ft(h,g,G,V,$,bt[jt]);Ut<gt&&(gt=Ut),Ut>mt&&(mt=Ut)}for(var Ct=ft(G,V,$),Vt=Infinity,Ht=-Infinity,re=[rt,ot],jt=-Math.PI*2;jt<=Math.PI*2;jt+=Math.PI){var pe=Ct+jt;rt<ot?rt<pe&&pe<ot&&re.push(pe):ot<pe&&pe<rt&&re.push(pe)}for(var jt=0;jt<re.length;jt++){var ye=kt(h,g,G,V,$,re[jt]);ye<Vt&&(Vt=ye),ye>Ht&&(Ht=ye)}return{x:gt,y:Vt,width:mt-gt,height:Ht-Vt}},length:function(h,g,G,V,$,rt,ot){},nearestPoint:function(h,g,G,V,$,rt,ot,At,gt){var mt=ct(At-h,gt-g,-$),bt=mt[0],jt=mt[1],Dt=ht.nearestPoint(0,0,G,V,bt,jt),Ut=Ot(G,V,Dt.x,Dt.y);Ut<rt?Dt=X(G,V,rt):Ut>ot&&(Dt=X(G,V,ot));var Ct=ct(Dt.x,Dt.y,$);return{x:Ct[0]+h,y:Ct[1]+g}},pointDistance:function(h,g,G,V,$,rt,ot,At,gt){var mt=this.nearestPoint(h,g,G,V,At,gt);return e(mt.x,mt.y,At,gt)},pointAt:function(h,g,G,V,$,rt,ot,At){var gt=(ot-rt)*At+rt;return{x:Ft(h,g,G,V,$,gt),y:kt(h,g,G,V,$,gt)}},tangentAngle:function(h,g,G,V,$,rt,ot,At){var gt=(ot-rt)*At+rt,mt=St(h,g,G,V,$,rt,ot,gt),bt=wt(h,g,G,V,$,rt,ot,gt);return S(Math.atan2(bt,mt))}};function pt(k){for(var h=0,g=[],G=0;G<k.length-1;G++){var V=k[G],$=k[G+1],rt=e(V[0],V[1],$[0],$[1]),ot={from:V,to:$,length:rt};g.push(ot),h+=rt}return{segments:g,totalLength:h}}function Mt(k){if(k.length<2)return 0;for(var h=0,g=0;g<k.length-1;g++){var G=k[g],V=k[g+1];h+=e(G[0],G[1],V[0],V[1])}return h}function tt(k,h){if(h>1||h<0||k.length<2)return null;var g=pt(k),G=g.segments,V=g.totalLength;if(V===0)return{x:k[0][0],y:k[0][1]};for(var $=0,rt=null,ot=0;ot<G.length;ot++){var At=G[ot],gt=At.from,mt=At.to,bt=At.length/V;if(h>=$&&h<=$+bt){var jt=(h-$)/bt;rt=M.pointAt(gt[0],gt[1],mt[0],mt[1],jt);break}$+=bt}return rt}function lt(k,h){if(h>1||h<0||k.length<2)return 0;for(var g=pt(k),G=g.segments,V=g.totalLength,$=0,rt=0,ot=0;ot<G.length;ot++){var At=G[ot],gt=At.from,mt=At.to,bt=At.length/V;if(h>=$&&h<=$+bt){rt=Math.atan2(mt[1]-gt[1],mt[0]-gt[0]);break}$+=bt}return rt}function it(k,h,g){for(var G=Infinity,V=0;V<k.length-1;V++){var $=k[V],rt=k[V+1],ot=M.pointDistance($[0],$[1],rt[0],rt[1],h,g);ot<G&&(G=ot)}return G}var U={box:function(h){for(var g=[],G=[],V=0;V<h.length;V++){var $=h[V];g.push($[0]),G.push($[1])}return v(g,G)},length:function(h){return Mt(h)},pointAt:function(h,g){return tt(h,g)},pointDistance:function(h,g,G){return it(h,g,G)},tangentAngle:function(h,g){return lt(h,g)}};function P(k){var h=k.slice(0);return k.length&&h.push(k[0]),h}var H={box:function(h){return U.box(h)},length:function(h){return Mt(P(h))},pointAt:function(h,g){return tt(P(h),g)},pointDistance:function(h,g,G){return it(P(h),g,G)},tangentAngle:function(h,g){return lt(P(h),g)}}},EkMX:function(Un,_t,z){"use strict";var at={};z.r(at),z.d(at,"easeLinear",function(){return ht}),z.d(at,"easeQuad",function(){return xt}),z.d(at,"easeQuadIn",function(){return St}),z.d(at,"easeQuadOut",function(){return wt}),z.d(at,"easeQuadInOut",function(){return xt}),z.d(at,"easeCubic",function(){return kt}),z.d(at,"easeCubicIn",function(){return ft}),z.d(at,"easeCubicOut",function(){return Ft}),z.d(at,"easeCubicInOut",function(){return kt}),z.d(at,"easePoly",function(){return dt}),z.d(at,"easePolyIn",function(){return X}),z.d(at,"easePolyOut",function(){return ct}),z.d(at,"easePolyInOut",function(){return dt}),z.d(at,"easeSin",function(){return it}),z.d(at,"easeSinIn",function(){return tt}),z.d(at,"easeSinOut",function(){return lt}),z.d(at,"easeSinInOut",function(){return it}),z.d(at,"easeExp",function(){return k}),z.d(at,"easeExpIn",function(){return P}),z.d(at,"easeExpOut",function(){return H}),z.d(at,"easeExpInOut",function(){return k}),z.d(at,"easeCircle",function(){return G}),z.d(at,"easeCircleIn",function(){return h}),z.d(at,"easeCircleOut",function(){return g}),z.d(at,"easeCircleInOut",function(){return G}),z.d(at,"easeBounce",function(){return Ct}),z.d(at,"easeBounceIn",function(){return Ut}),z.d(at,"easeBounceOut",function(){return Ct}),z.d(at,"easeBounceInOut",function(){return Vt}),z.d(at,"easeBack",function(){return ye}),z.d(at,"easeBackIn",function(){return re}),z.d(at,"easeBackOut",function(){return pe}),z.d(at,"easeBackInOut",function(){return ye}),z.d(at,"easeElastic",function(){return hn}),z.d(at,"easeElasticIn",function(){return pn}),z.d(at,"easeElasticOut",function(){return hn}),z.d(at,"easeElasticInOut",function(){return kn});var a=z("mrSG"),A=z("e0ae"),e=z("Mw2x"),i=z("sstZ"),v=z("iTfj"),b=0,S=0,f=0,M=1e3,I,y,n=0,s=0,d=0,E=typeof performance=="object"&&performance.now?performance:Date,O=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(F){setTimeout(F,17)};function C(){return s||(O(p),s=E.now()+d)}function p(){s=0}function x(){this._call=this._time=this._next=null}x.prototype=T.prototype={constructor:x,restart:function(B,Z,ut){if(typeof B!="function")throw new TypeError("callback is not a function");ut=(ut==null?C():+ut)+(Z==null?0:+Z),!this._next&&y!==this&&(y?y._next=this:I=this,y=this),this._call=B,this._time=ut,vt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,vt())}};function T(F,B,Z){var ut=new x;return ut.restart(F,B,Z),ut}function N(){C(),++b;for(var F=I,B;F;)(B=s-F._time)>=0&&F._call.call(null,B),F=F._next;--b}function Y(){s=(n=E.now())+d,b=S=0;try{N()}finally{b=0,nt(),s=0}}function q(){var F=E.now(),B=F-n;B>M&&(d-=B,n=F)}function nt(){for(var F,B=I,Z,ut=Infinity;B;)B._call?(ut>B._time&&(ut=B._time),F=B,B=B._next):(Z=B._next,B._next=null,B=F?F._next=Z:I=Z);y=F,vt(ut)}function vt(F){if(!b){S&&(S=clearTimeout(S));var B=F-s;B>24?(F<Infinity&&(S=setTimeout(Y,F-E.now()-d)),f&&(f=clearInterval(f))):(f||(n=E.now(),f=setInterval(q,M)),b=1,O(Y))}}function ht(F){return+F}function St(F){return F*F}function wt(F){return F*(2-F)}function xt(F){return((F*=2)<=1?F*F:--F*(2-F)+1)/2}function ft(F){return F*F*F}function Ft(F){return--F*F*F+1}function kt(F){return((F*=2)<=1?F*F*F:(F-=2)*F*F+2)/2}var Ot=3,X=function F(B){B=+B;function Z(ut){return Math.pow(ut,B)}return Z.exponent=F,Z}(Ot),ct=function F(B){B=+B;function Z(ut){return 1-Math.pow(1-ut,B)}return Z.exponent=F,Z}(Ot),dt=function F(B){B=+B;function Z(ut){return((ut*=2)<=1?Math.pow(ut,B):2-Math.pow(2-ut,B))/2}return Z.exponent=F,Z}(Ot),pt=Math.PI,Mt=pt/2;function tt(F){return+F==1?1:1-Math.cos(F*Mt)}function lt(F){return Math.sin(F*Mt)}function it(F){return(1-Math.cos(pt*F))/2}function U(F){return(Math.pow(2,-10*F)-.0009765625)*1.0009775171065494}function P(F){return U(1-+F)}function H(F){return 1-U(F)}function k(F){return((F*=2)<=1?U(1-F):2-U(F-1))/2}function h(F){return 1-Math.sqrt(1-F*F)}function g(F){return Math.sqrt(1- --F*F)}function G(F){return((F*=2)<=1?1-Math.sqrt(1-F*F):Math.sqrt(1-(F-=2)*F)+1)/2}var V=4/11,$=6/11,rt=8/11,ot=3/4,At=9/11,gt=10/11,mt=15/16,bt=21/22,jt=63/64,Dt=1/V/V;function Ut(F){return 1-Ct(1-F)}function Ct(F){return(F=+F)<V?Dt*F*F:F<rt?Dt*(F-=$)*F+ot:F<gt?Dt*(F-=At)*F+mt:Dt*(F-=bt)*F+jt}function Vt(F){return((F*=2)<=1?1-Ct(1-F):Ct(F-1)+1)/2}var Ht=1.70158,re=function F(B){B=+B;function Z(ut){return(ut=+ut)*ut*(B*(ut-1)+ut)}return Z.overshoot=F,Z}(Ht),pe=function F(B){B=+B;function Z(ut){return--ut*ut*((ut+1)*B+ut)+1}return Z.overshoot=F,Z}(Ht),ye=function F(B){B=+B;function Z(ut){return((ut*=2)<1?ut*ut*((B+1)*ut-B):(ut-=2)*ut*((B+1)*ut+B)+2)/2}return Z.overshoot=F,Z}(Ht),we=2*Math.PI,Ne=1,Ke=.3,pn=function F(B,Z){var ut=Math.asin(1/(B=Math.max(1,B)))*(Z/=we);function Bt(Jt){return B*U(- --Jt)*Math.sin((ut-Jt)/Z)}return Bt.amplitude=function(Jt){return F(Jt,Z*we)},Bt.period=function(Jt){return F(B,Jt)},Bt}(Ne,Ke),hn=function F(B,Z){var ut=Math.asin(1/(B=Math.max(1,B)))*(Z/=we);function Bt(Jt){return 1-B*U(Jt=+Jt)*Math.sin((Jt+ut)/Z)}return Bt.amplitude=function(Jt){return F(Jt,Z*we)},Bt.period=function(Jt){return F(B,Jt)},Bt}(Ne,Ke),kn=function F(B,Z){var ut=Math.asin(1/(B=Math.max(1,B)))*(Z/=we);function Bt(Jt){return((Jt=Jt*2-1)<0?B*U(-Jt)*Math.sin((ut-Jt)/Z):2-B*U(Jt)*Math.sin((ut+Jt)/Z))/2}return Bt.amplitude=function(Jt){return F(Jt,Z*we)},Bt.period=function(Jt){return F(B,Jt)},Bt}(Ne,Ke),Tn=function(F,B,Z){F.prototype=B.prototype=Z,Z.constructor=F};function Rn(F,B){var Z=Object.create(F.prototype);for(var ut in B)Z[ut]=B[ut];return Z}function Mn(){}var Cn=.7,_n=1/Cn,Kn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,er=new RegExp("^rgb\\("+[Kn,Kn,Kn]+"\\)$"),Sr=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),Vr=new RegExp("^rgba\\("+[Kn,Kn,Kn,tr]+"\\)$"),ti=new RegExp("^rgba\\("+[or,or,or,tr]+"\\)$"),hi=new RegExp("^hsl\\("+[tr,or,or]+"\\)$"),Fi=new RegExp("^hsla\\("+[tr,or,or,tr]+"\\)$"),to={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(Mn,Li,{copy:function(B){return Object.assign(new this.constructor,this,B)},displayable:function(){return this.rgb().displayable()},hex:si,formatHex:si,formatHsl:Ci,formatRgb:_i,toString:_i});function si(){return this.rgb().formatHex()}function Ci(){return Kr(this).formatHsl()}function _i(){return this.rgb().formatRgb()}function Li(F){var B,Z;return F=(F+"").trim().toLowerCase(),(B=nr.exec(F))?(Z=B[1].length,B=parseInt(B[1],16),Z===6?Vi(B):Z===3?new pr(B>>8&15|B>>4&240,B>>4&15|B&240,(B&15)<<4|B&15,1):Z===8?ro(B>>24&255,B>>16&255,B>>8&255,(B&255)/255):Z===4?ro(B>>12&15|B>>8&240,B>>8&15|B>>4&240,B>>4&15|B&240,((B&15)<<4|B&15)/255):null):(B=er.exec(F))?new pr(B[1],B[2],B[3],1):(B=Sr.exec(F))?new pr(B[1]*255/100,B[2]*255/100,B[3]*255/100,1):(B=Vr.exec(F))?ro(B[1],B[2],B[3],B[4]):(B=ti.exec(F))?ro(B[1]*255/100,B[2]*255/100,B[3]*255/100,B[4]):(B=hi.exec(F))?Xr(B[1],B[2]/100,B[3]/100,1):(B=Fi.exec(F))?Xr(B[1],B[2]/100,B[3]/100,B[4]):to.hasOwnProperty(F)?Vi(to[F]):F==="transparent"?new pr(NaN,NaN,NaN,0):null}function Vi(F){return new pr(F>>16&255,F>>8&255,F&255,1)}function ro(F,B,Z,ut){return ut<=0&&(F=B=Z=NaN),new pr(F,B,Z,ut)}function jr(F){return F instanceof Mn||(F=Li(F)),F?(F=F.rgb(),new pr(F.r,F.g,F.b,F.opacity)):new pr}function Ji(F,B,Z,ut){return arguments.length===1?jr(F):new pr(F,B,Z,ut==null?1:ut)}function pr(F,B,Z,ut){this.r=+F,this.g=+B,this.b=+Z,this.opacity=+ut}Tn(pr,Ji,Rn(Mn,{brighter:function(B){return B=B==null?_n:Math.pow(_n,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},darker:function(B){return B=B==null?Cn:Math.pow(Cn,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yr,formatHex:Yr,formatRgb:Br,toString:Br}));function Yr(){return"#"+Nr(this.r)+Nr(this.g)+Nr(this.b)}function Br(){var F=this.opacity;return F=isNaN(F)?1:Math.max(0,Math.min(1,F)),(F===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(F===1?")":", "+F+")")}function Nr(F){return F=Math.max(0,Math.min(255,Math.round(F)||0)),(F<16?"0":"")+F.toString(16)}function Xr(F,B,Z,ut){return ut<=0?F=B=Z=NaN:Z<=0||Z>=1?F=B=NaN:B<=0&&(F=NaN),new fi(F,B,Z,ut)}function Kr(F){if(F instanceof fi)return new fi(F.h,F.s,F.l,F.opacity);if(F instanceof Mn||(F=Li(F)),!F)return new fi;if(F instanceof fi)return F;F=F.rgb();var B=F.r/255,Z=F.g/255,ut=F.b/255,Bt=Math.min(B,Z,ut),Jt=Math.max(B,Z,ut),ie=NaN,se=Jt-Bt,Te=(Jt+Bt)/2;return se?(B===Jt?ie=(Z-ut)/se+(Z<ut)*6:Z===Jt?ie=(ut-B)/se+2:ie=(B-Z)/se+4,se/=Te<.5?Jt+Bt:2-Jt-Bt,ie*=60):se=Te>0&&Te<1?0:ie,new fi(ie,se,Te,F.opacity)}function ni(F,B,Z,ut){return arguments.length===1?Kr(F):new fi(F,B,Z,ut==null?1:ut)}function fi(F,B,Z,ut){this.h=+F,this.s=+B,this.l=+Z,this.opacity=+ut}Tn(fi,ni,Rn(Mn,{brighter:function(B){return B=B==null?_n:Math.pow(_n,B),new fi(this.h,this.s,this.l*B,this.opacity)},darker:function(B){return B=B==null?Cn:Math.pow(Cn,B),new fi(this.h,this.s,this.l*B,this.opacity)},rgb:function(){var B=this.h%360+(this.h<0)*360,Z=isNaN(B)||isNaN(this.s)?0:this.s,ut=this.l,Bt=ut+(ut<.5?ut:1-ut)*Z,Jt=2*ut-Bt;return new pr($r(B>=240?B-240:B+120,Jt,Bt),$r(B,Jt,Bt),$r(B<120?B+240:B-120,Jt,Bt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var B=this.opacity;return B=isNaN(B)?1:Math.max(0,Math.min(1,B)),(B===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(B===1?")":", "+B+")")}}));function $r(F,B,Z){return(F<60?B+(Z-B)*F/60:F<180?Z:F<240?B+(Z-B)*(240-F)/60:B)*255}function ci(F,B,Z,ut,Bt){var Jt=F*F,ie=Jt*F;return((1-3*F+3*Jt-ie)*B+(4-6*Jt+3*ie)*Z+(1+3*F+3*Jt-3*ie)*ut+ie*Bt)/6}var Qr=function(F){var B=F.length-1;return function(Z){var ut=Z<=0?Z=0:Z>=1?(Z=1,B-1):Math.floor(Z*B),Bt=F[ut],Jt=F[ut+1],ie=ut>0?F[ut-1]:2*Bt-Jt,se=ut<B-1?F[ut+2]:2*Jt-Bt;return ci((Z-ut/B)*B,ie,Bt,Jt,se)}},gi=function(F){var B=F.length;return function(Z){var ut=Math.floor(((Z%=1)<0?++Z:Z)*B),Bt=F[(ut+B-1)%B],Jt=F[ut%B],ie=F[(ut+1)%B],se=F[(ut+2)%B];return ci((Z-ut/B)*B,Bt,Jt,ie,se)}},Oi=function(F){return function(){return F}};function bi(F,B){return function(Z){return F+Z*B}}function zi(F,B,Z){return F=Math.pow(F,Z),B=Math.pow(B,Z)-F,Z=1/Z,function(ut){return Math.pow(F+ut*B,Z)}}function Qi(F,B){var Z=B-F;return Z?bi(F,Z>180||Z<-180?Z-360*Math.round(Z/360):Z):Oi(isNaN(F)?B:F)}function io(F){return(F=+F)==1?Wi:function(B,Z){return Z-B?zi(B,Z,F):Oi(isNaN(B)?Z:B)}}function Wi(F,B){var Z=B-F;return Z?bi(F,Z):Oi(isNaN(F)?B:F)}var Zi=function F(B){var Z=io(B);function ut(Bt,Jt){var ie=Z((Bt=Ji(Bt)).r,(Jt=Ji(Jt)).r),se=Z(Bt.g,Jt.g),Te=Z(Bt.b,Jt.b),Ee=Wi(Bt.opacity,Jt.opacity);return function(un){return Bt.r=ie(un),Bt.g=se(un),Bt.b=Te(un),Bt.opacity=Ee(un),Bt+""}}return ut.gamma=F,ut}(1);function Pi(F){return function(B){var Z=B.length,ut=new Array(Z),Bt=new Array(Z),Jt=new Array(Z),ie,se;for(ie=0;ie<Z;++ie)se=Ji(B[ie]),ut[ie]=se.r||0,Bt[ie]=se.g||0,Jt[ie]=se.b||0;return ut=F(ut),Bt=F(Bt),Jt=F(Jt),se.opacity=1,function(Te){return se.r=ut(Te),se.g=Bt(Te),se.b=Jt(Te),se+""}}}var no=Pi(Qr),Mo=Pi(gi),ao=function(F,B){B||(B=[]);var Z=F?Math.min(B.length,F.length):0,ut=B.slice(),Bt;return function(Jt){for(Bt=0;Bt<Z;++Bt)ut[Bt]=F[Bt]*(1-Jt)+B[Bt]*Jt;return ut}};function uo(F){return ArrayBuffer.isView(F)&&!(F instanceof DataView)}var xo=function(F,B){return(uo(B)?ao:oe)(F,B)};function oe(F,B){var Z=B?B.length:0,ut=F?Math.min(Z,F.length):0,Bt=new Array(ut),Jt=new Array(Z),ie;for(ie=0;ie<ut;++ie)Bt[ie]=rn(F[ie],B[ie]);for(;ie<Z;++ie)Jt[ie]=B[ie];return function(se){for(ie=0;ie<ut;++ie)Jt[ie]=Bt[ie](se);return Jt}}var Kt=function(F,B){var Z=new Date;return F=+F,B=+B,function(ut){return Z.setTime(F*(1-ut)+B*ut),Z}},te=function(F,B){return F=+F,B=+B,function(Z){return F*(1-Z)+B*Z}},Oe=function(F,B){var Z={},ut={},Bt;(F===null||typeof F!="object")&&(F={}),(B===null||typeof B!="object")&&(B={});for(Bt in B)Bt in F?Z[Bt]=rn(F[Bt],B[Bt]):ut[Bt]=B[Bt];return function(Jt){for(Bt in Z)ut[Bt]=Z[Bt](Jt);return ut}},Qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,On=new RegExp(Qe.source,"g");function Vn(F){return function(){return F}}function Xn(F){return function(B){return F(B)+""}}var $e=function(F,B){var Z=Qe.lastIndex=On.lastIndex=0,ut,Bt,Jt,ie=-1,se=[],Te=[];for(F=F+"",B=B+"";(ut=Qe.exec(F))&&(Bt=On.exec(B));)(Jt=Bt.index)>Z&&(Jt=B.slice(Z,Jt),se[ie]?se[ie]+=Jt:se[++ie]=Jt),(ut=ut[0])===(Bt=Bt[0])?se[ie]?se[ie]+=Bt:se[++ie]=Bt:(se[++ie]=null,Te.push({i:ie,x:te(ut,Bt)})),Z=On.lastIndex;return Z<B.length&&(Jt=B.slice(Z),se[ie]?se[ie]+=Jt:se[++ie]=Jt),se.length<2?Te[0]?Xn(Te[0].x):Vn(B):(B=Te.length,function(Ee){for(var un=0,xn;un<B;++un)se[(xn=Te[un]).i]=xn.x(Ee);return se.join("")})},rn=function(F,B){var Z=typeof B,ut;return B==null||Z==="boolean"?Oi(B):(Z==="number"?te:Z==="string"?(ut=Li(B))?(B=ut,Zi):$e:B instanceof Li?Zi:B instanceof Date?Kt:uo(B)?ao:Array.isArray(B)?oe:typeof B.valueOf!="function"&&typeof B.toString!="function"||isNaN(B)?Oe:te)(F,B)},on=z("tvuL"),$n=function(B){return["fill","stroke","fillStyle","strokeStyle"].includes(B)},vr=function(B){return/^[r,R,L,l]{1}[\s]*\(/.test(B)},ar=[1,0,0,0,1,0,0,0,1];function rr(F,B,Z){var ut={},Bt=B.fromAttrs,Jt=B.toAttrs;if(!F.destroyed){var ie;for(var se in Jt)if(!Object(v.isEqual)(Bt[se],Jt[se]))if(se==="path"){var Te=Jt[se],Ee=Bt[se];Te.length>Ee.length?(Te=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.fillPathByDiff(Ee,Te),Ee=on.formatPath(Ee,Te),B.fromAttrs.path=Ee,B.toAttrs.path=Te):B.pathFormatted||(Te=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.formatPath(Ee,Te),B.fromAttrs.path=Ee,B.toAttrs.path=Te,B.pathFormatted=!0),ut[se]=[];for(var un=0;un<Te.length;un++){for(var xn=Te[un],zt=Ee[un],Yt=[],Se=0;Se<xn.length;Se++)Object(v.isNumber)(xn[Se])&&zt&&Object(v.isNumber)(zt[Se])?(ie=rn(zt[Se],xn[Se]),Yt.push(ie(Z))):Yt.push(xn[Se]);ut[se].push(Yt)}}else if(se==="matrix"){var Wt=xo(Bt[se]||ar,Jt[se]||ar),ue=Wt(Z);ut[se]=ue}else $n(se)&&vr(Jt[se])?ut[se]=Jt[se]:Object(v.isFunction)(Jt[se])||(ie=rn(Bt[se],Jt[se]),ut[se]=ie(Z));F.attr(ut)}}function Fr(F,B,Z){var ut=B.startTime,Bt=B.delay;if(Z<ut+Bt||B._paused)return!1;var Jt,ie=B.duration,se=B.easing;if(Z=Z-ut-B.delay,B.repeat)Jt=Z%ie/ie,Jt=at[se](Jt);else if(Jt=Z/ie,Jt<1)Jt=at[se](Jt);else return B.onFrame?F.attr(B.onFrame(1)):F.attr(B.toAttrs),!0;if(B.onFrame){var Te=B.onFrame(Jt);F.attr(Te)}else rr(F,B,Jt);return!1}var Ar=function(){function F(B){this.animators=[],this.current=0,this.timer=null,this.canvas=B}return F.prototype.initTimer=function(){var B=this,Z=!1,ut,Bt,Jt;this.timer=T(function(ie){if(B.current=ie,B.animators.length>0){for(var se=B.animators.length-1;se>=0;se--){if(ut=B.animators[se],ut.destroyed){B.removeAnimator(se);continue}if(!ut.isAnimatePaused()){Bt=ut.get("animations");for(var Te=Bt.length-1;Te>=0;Te--)Jt=Bt[Te],Z=Fr(ut,Jt,ie),Z&&(Bt.splice(Te,1),Z=!1,Jt.callback&&Jt.callback())}Bt.length===0&&B.removeAnimator(se)}var Ee=B.canvas.get("autoDraw");Ee||B.canvas.draw()}})},F.prototype.addAnimator=function(B){this.animators.push(B)},F.prototype.removeAnimator=function(B){this.animators.splice(B,1)},F.prototype.isAnimating=function(){return!!this.animators.length},F.prototype.stop=function(){this.timer&&this.timer.stop()},F.prototype.stopAllAnimations=function(B){B===void 0&&(B=!0),this.animators.forEach(function(Z){Z.stopAnimate(B)}),this.animators=[],this.canvas.draw()},F.prototype.getTime=function(){return this.current},F}(),wr=Ar,xr=z("5eLp"),Er=40,Ir=0,Lr=":",Pr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Dr(F,B){for(var Z in F)if(F.hasOwnProperty(Z)&&Z.indexOf(Lr+B)>=0)return!0;return!1}function ri(F,B,Z){Z.name=B,Z.target=F,Z.currentTarget=F,Z.delegateTarget=F,F.emit(B,Z)}function vi(F,B,Z){if(Z.bubbles){var ut=void 0,Bt=!1;if(B==="mouseenter"?(ut=Z.fromShape,Bt=!0):B==="mouseleave"&&(Bt=!0,ut=Z.toShape),F.isCanvas()&&Bt)return;if(ut&&Object(i.g)(F,ut)){Z.bubbles=!1;return}Z.name=B,Z.currentTarget=F,Z.delegateTarget=F,F.emit(B,Z)}}var ii=function(){function F(B){var Z=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ut){var Bt=ut.type;Z._triggerEvent(Bt,ut)},this._onDocumentMove=function(ut){var Bt=Z.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&(Z.dragging||Z.currentShape)){var ie=Z._getPointInfo(ut);Z.dragging&&Z._emitEvent("drag",ut,ie,Z.draggingShape)}},this._onDocumentMouseUp=function(ut){var Bt=Z.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&Z.dragging){var ie=Z._getPointInfo(ut);Z.draggingShape&&Z._emitEvent("drop",ut,ie,null),Z._emitEvent("dragend",ut,ie,Z.draggingShape),Z._afterDrag(Z.draggingShape,ie,ut)}},this.canvas=B.canvas}return F.prototype.init=function(){this._bindEvents()},F.prototype._bindEvents=function(){var B=this,Z=this.canvas.get("el");Object(i.a)(Pr,function(ut){Z.addEventListener(ut,B._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},F.prototype._clearEvents=function(){var B=this,Z=this.canvas.get("el");Object(i.a)(Pr,function(ut){Z.removeEventListener(ut,B._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},F.prototype._getEventObj=function(B,Z,ut,Bt,Jt,ie){var se=new xr.a(B,Z);return se.fromShape=Jt,se.toShape=ie,se.x=ut.x,se.y=ut.y,se.clientX=ut.clientX,se.clientY=ut.clientY,se.propagationPath.push(Bt),se},F.prototype._getShape=function(B,Z){return this.canvas.getShape(B.x,B.y,Z)},F.prototype._getPointInfo=function(B){var Z=this.canvas,ut=Z.getClientByEvent(B),Bt=Z.getPointByEvent(B);return{x:Bt.x,y:Bt.y,clientX:ut.x,clientY:ut.y}},F.prototype._triggerEvent=function(B,Z){var ut=this._getPointInfo(Z),Bt=this._getShape(ut,Z),Jt=this["_on"+B],ie=!1;if(Jt)Jt.call(this,ut,Bt,Z);else{var se=this.currentShape;B==="mouseenter"||B==="dragenter"||B==="mouseover"?(this._emitEvent(B,Z,ut,null,null,Bt),Bt&&this._emitEvent(B,Z,ut,Bt,null,Bt),B==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",Z,ut,null)):B==="mouseleave"||B==="dragleave"||B==="mouseout"?(ie=!0,se&&this._emitEvent(B,Z,ut,se,se,null),this._emitEvent(B,Z,ut,null,se,null),B==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",Z,ut,null)):this._emitEvent(B,Z,ut,Bt,null,null)}if(ie||(this.currentShape=Bt),Bt&&!Bt.get("destroyed")){var Te=this.canvas,Ee=Te.get("el");Ee.style.cursor=Bt.attr("cursor")||Te.get("cursor")}},F.prototype._onmousedown=function(B,Z,ut){ut.button===Ir&&(this.mousedownShape=Z,this.mousedownPoint=B,this.mousedownTimeStamp=ut.timeStamp),this._emitEvent("mousedown",ut,B,Z,null,null)},F.prototype._emitMouseoverEvents=function(B,Z,ut,Bt){var Jt=this.canvas.get("el");ut!==Bt&&(ut&&(this._emitEvent("mouseout",B,Z,ut,ut,Bt),this._emitEvent("mouseleave",B,Z,ut,ut,Bt),(!Bt||Bt.get("destroyed"))&&(Jt.style.cursor=this.canvas.get("cursor"))),Bt&&(this._emitEvent("mouseover",B,Z,Bt,ut,Bt),this._emitEvent("mouseenter",B,Z,Bt,ut,Bt)))},F.prototype._emitDragoverEvents=function(B,Z,ut,Bt,Jt){Bt?(Bt!==ut&&(ut&&this._emitEvent("dragleave",B,Z,ut,ut,Bt),this._emitEvent("dragenter",B,Z,Bt,ut,Bt)),Jt||this._emitEvent("dragover",B,Z,Bt)):ut&&this._emitEvent("dragleave",B,Z,ut,ut,Bt),Jt&&this._emitEvent("dragover",B,Z,Bt)},F.prototype._afterDrag=function(B,Z,ut){B&&(B.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Bt=this._getShape(Z,ut);Bt!==B&&this._emitMouseoverEvents(ut,Z,B,Bt),this.currentShape=Bt},F.prototype._onmouseup=function(B,Z,ut){if(ut.button===Ir){var Bt=this.draggingShape;this.dragging?(Bt&&this._emitEvent("drop",ut,B,Z),this._emitEvent("dragend",ut,B,Bt),this._afterDrag(Bt,B,ut)):(this._emitEvent("mouseup",ut,B,Z),Z===this.mousedownShape&&this._emitEvent("click",ut,B,Z),this.mousedownShape=null,this.mousedownPoint=null)}},F.prototype._ondragover=function(B,Z,ut){ut.preventDefault();var Bt=this.currentShape;this._emitDragoverEvents(ut,B,Bt,Z,!0)},F.prototype._onmousemove=function(B,Z,ut){var Bt=this.canvas,Jt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(ut,B,Jt,Z,!1),this._emitEvent("drag",ut,B,ie);else{var se=this.mousedownPoint;if(se){var Te=this.mousedownShape,Ee=ut.timeStamp,un=Ee-this.mousedownTimeStamp,xn=se.clientX-B.clientX,zt=se.clientY-B.clientY,Yt=xn*xn+zt*zt;un>120||Yt>Er?Te&&Te.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",ut,B,ie),this.mousedownShape=null,this.mousedownPoint=null):!Te&&Bt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ut,B,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ut,B,Jt,Z),this._emitEvent("mousemove",ut,B,Z)):(this._emitMouseoverEvents(ut,B,Jt,Z),this._emitEvent("mousemove",ut,B,Z))}else this._emitMouseoverEvents(ut,B,Jt,Z),this._emitEvent("mousemove",ut,B,Z)}},F.prototype._emitEvent=function(B,Z,ut,Bt,Jt,ie){var se=this._getEventObj(B,Z,ut,Bt,Jt,ie);if(Bt){se.shape=Bt,ri(Bt,B,se);for(var Te=Bt.getParent();Te;)Te.emitDelegation(B,se),se.propagationStopped||vi(Te,B,se),se.propagationPath.push(Te),Te=Te.getParent()}else{var Ee=this.canvas;ri(Ee,B,se)}},F.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},F}(),Si=ii,Ui="px",Yi=Object(A.a)(),Bi=Yi&&Yi.name==="firefox",Di=function(F){Object(a.b)(B,F);function B(Z){var ut=F.call(this,Z)||this;return ut.initContainer(),ut.initDom(),ut.initEvents(),ut.initTimeline(),ut}return B.prototype.getDefaultCfg=function(){var Z=F.prototype.getDefaultCfg.call(this);return Z.cursor="default",Z.supportCSSTransform=!1,Z},B.prototype.initContainer=function(){var Z=this.get("container");Object(i.h)(Z)&&(Z=document.getElementById(Z),this.set("container",Z))},B.prototype.initDom=function(){var Z=this.createDom();this.set("el",Z);var ut=this.get("container");ut.appendChild(Z),this.setDOMSize(this.get("width"),this.get("height"))},B.prototype.initEvents=function(){var Z=new Si({canvas:this});Z.init(),this.set("eventController",Z)},B.prototype.initTimeline=function(){var Z=new wr(this);this.set("timeline",Z)},B.prototype.setDOMSize=function(Z,ut){var Bt=this.get("el");i.c&&(Bt.style.width=Z+Ui,Bt.style.height=ut+Ui)},B.prototype.changeSize=function(Z,ut){this.setDOMSize(Z,ut),this.set("width",Z),this.set("height",ut),this.onCanvasChange("changeSize")},B.prototype.getRenderer=function(){return this.get("renderer")},B.prototype.getCursor=function(){return this.get("cursor")},B.prototype.setCursor=function(Z){this.set("cursor",Z);var ut=this.get("el");i.c&&ut&&(ut.style.cursor=Z)},B.prototype.getPointByEvent=function(Z){var ut=this.get("supportCSSTransform");if(ut){if(Bi&&!Object(i.e)(Z.layerX)&&Z.layerX!==Z.offsetX)return{x:Z.layerX,y:Z.layerY};if(!Object(i.e)(Z.offsetX))return{x:Z.offsetX,y:Z.offsetY}}var Bt=this.getClientByEvent(Z),Jt=Bt.x,ie=Bt.y;return this.getPointByClient(Jt,ie)},B.prototype.getClientByEvent=function(Z){var ut=Z;return Z.touches&&(Z.type==="touchend"?ut=Z.changedTouches[0]:ut=Z.touches[0]),{x:ut.clientX,y:ut.clientY}},B.prototype.getPointByClient=function(Z,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:Z-Jt.left,y:ut-Jt.top}},B.prototype.getClientByPoint=function(Z,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:Z+Jt.left,y:ut+Jt.top}},B.prototype.draw=function(){},B.prototype.removeDom=function(){var Z=this.get("el");Z.parentNode.removeChild(Z)},B.prototype.clearEvents=function(){var Z=this.get("eventController");Z.destroy()},B.prototype.isCanvas=function(){return!0},B.prototype.getParent=function(){return null},B.prototype.destroy=function(){var Z=this.get("timeline");this.get("destroyed")||(this.clear(),Z&&Z.stop(),this.clearEvents(),this.removeDom(),F.prototype.destroy.call(this))},B}(e.a),ve=_t.a=Di},Em2t:function(Un,_t,z){var at=z("bahg"),a=z("quyA"),A=z("0JQy");function e(i){return a(i)?A(i):at(i)}Un.exports=e},"F/eT":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at});function at(a){return typeof a=="number"&&!isNaN(a)}},FAXy:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return T});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),i=z("YuPD"),v=z("tKoa"),b="liquid";function S(N){return[{percent:N,type:b}]}function f(N){var Y=N.chart,q=N.options,nt=q.percent,vt=q.color,ht=q.liquidStyle,St=q.radius,wt=q.outline,xt=q.wave;Y.scale({percent:{min:0,max:1}}),Y.data(S(nt));var ft=Object(i.b)({},N,{options:{xField:"type",yField:"percent",widthRatio:St,interval:{color:vt,style:ht,shape:"liquid-fill-gauge"}}}),Ft=Object(v.c)(ft).ext,kt=Ft.geometry;return kt.customInfo({radius:St,outline:wt,wave:xt}),Y.legend(!1),Y.axis(!1),Y.tooltip(!1),N}function M(N,Y){var q=N.chart,nt=N.options,vt=nt.statistic,ht=nt.percent,St=nt.meta;if(q.getController("annotation").clear(!0),vt.content&&!vt.content.formatter){var wt=Object(A.get)(St,["percent","formatter"]);vt.content.formatter=function(xt){var ft=xt.percent;return wt?wt(ft):(ft*100).toFixed(2)+"%"}}return Object(i.m)(q,{statistic:vt,plotType:"liquid"},{percent:ht}),Y&&q.render(!0),N}function I(N){return Object(i.e)(f,M,Object(e.f)({}),e.a,e.j,e.c)(N)}var y=z("Ihc8"),n=z("qaDU"),s=5e3;function d(N,Y,q){return N+(Y-N)*q}function E(N){var Y=Object(at.a)({opacity:1},N.style);return N.color&&!Y.fill&&(Y.fill=N.color),Y}function O(N){var Y={fill:"#fff",fillOpacity:0,lineWidth:4},q=Object(A.mix)({},Y,N.style);return N.color&&!q.stroke&&(q.stroke=N.color),Object(A.isNumber)(N.opacity)&&(q.opacity=q.strokeOpacity=N.opacity),q}function C(N,Y,q,nt){return Y===0?[[N+1/2*q/Math.PI/2,nt/2],[N+1/2*q/Math.PI,nt],[N+q/4,nt]]:Y===1?[[N+1/2*q/Math.PI/2*(Math.PI-2),nt],[N+1/2*q/Math.PI/2*(Math.PI-1),nt/2],[N+q/4,0]]:Y===2?[[N+1/2*q/Math.PI/2,-nt/2],[N+1/2*q/Math.PI,-nt],[N+q/4,-nt]]:[[N+1/2*q/Math.PI/2*(Math.PI-2),-nt],[N+1/2*q/Math.PI/2*(Math.PI-1),-nt/2],[N+q/4,0]]}function p(N,Y,q,nt,vt,ht,St){for(var wt=Math.ceil(2*N/q*4)*4,xt=[],ft=nt;ft<-Math.PI*2;)ft+=Math.PI*2;for(;ft>0;)ft-=Math.PI*2;ft=ft/Math.PI/2*q;var Ft=ht-N+ft-N*2;xt.push(["M",Ft,Y]);for(var kt=0,Ot=0;Ot<wt;++Ot){var X=Ot%4,ct=C(Ot*q/4,X,q,vt);xt.push(["C",ct[0][0]+Ft,-ct[0][1]+Y,ct[1][0]+Ft,-ct[1][1]+Y,ct[2][0]+Ft,-ct[2][1]+Y]),Ot===wt-1&&(kt=ct[2][0])}return xt.push(["L",kt+Ft,St+N]),xt.push(["L",Ft,St+N]),xt.push(["Z"]),xt}function x(N,Y,q,nt,vt,ht,St,wt,xt){for(var ft=vt.fill,Ft=vt.opacity,kt=St.getBBox(),Ot=kt.maxX-kt.minX,X=kt.maxY-kt.minY,ct=0;ct<nt;ct++){var dt=nt<=1?0:ct/(nt-1),pt=ht.addShape("path",{name:"waterwave-path",attrs:{path:p(wt,kt.minY+X*q,xt,0,Ot/32,N,Y),fill:ft,opacity:d(.2,.9,dt)*Ft}});try{var Mt=Object(n.a)([["t",xt,0]]);pt.stopAnimate(),pt.animate({matrix:Mt},{duration:d(.5*s,s,dt),repeat:!0})}catch(tt){console.warn("off-screen group animate error!")}}}Object(y.registerShape)("interval","liquid-fill-gauge",{draw:function(Y,q){var nt=.5,vt=.5,ht=Y.customInfo,St=ht.radius,wt=ht.outline,xt=ht.wave,ft=wt.border,Ft=wt.distance,kt=xt.count,Ot=xt.length,X=Object(A.reduce)(Y.points,function(P,H){return Math.min(P,H.x)},Infinity),ct=this.parsePoint({x:nt,y:vt}),dt=this.parsePoint({x:X,y:vt}),pt=ct.x-dt.x,Mt=Math.min(pt,dt.y*St),tt=E(Y),lt=O(Y);q.addShape("circle",{name:"wrap",attrs:Object(A.mix)(lt,{x:ct.x,y:ct.y,r:Mt,fill:"transparent",lineWidth:ft})});var it=q.addGroup({name:"waves"}),U=it.setClip({type:"circle",attrs:{x:ct.x,y:ct.y,r:Mt-Ft-ft/2}});return x(ct.x,ct.y,1-Y.points[1].y,kt,tt,it,U,Mt*2,Ot),q}});var T=function(N){Object(at.b)(Y,N);function Y(){var q=N!==null&&N.apply(this,arguments)||this;return q.type="liquid",q}return Y.prototype.getDefaultOptions=function(){return{color:"#6a99f9",radius:.9,statistic:{title:!1,content:{formatter:function(nt){var vt=nt.percent;return(vt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192}}},Y.prototype.changeData=function(q){this.updateOption({percent:q}),this.chart.data(S(q)),M({chart:this.chart,options:this.options},!0)},Y.prototype.getSchemaAdaptor=function(){return I},Y}(a.a)},FH2j:function(Un,_t,z){"use strict";z.d(_t,"getAdjust",function(){return i}),z.d(_t,"registerAdjust",function(){return v});var at=z("Qci9"),a=z("WbAE"),A=z.n(a),e={},i=function(S){return e[S.toLowerCase()]},v=function(S,f){if(i(S))throw new Error("Adjust type '"+S+"' existed.");e[S.toLowerCase()]=f}},FLLP:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return Y});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),i=z("tKoa"),v=z("YuPD"),b="$$yField$$",S="$$diffField$$",f="$$absoluteField$$",M="$$isTotal$$";function I(q,nt,vt,ht,St){var wt,xt=[];if(Object(A.reduce)(q,function(Ft,kt){var Ot;Object(v.j)(v.a.WARN,Object(A.isNumber)(kt[vt]),kt[vt]+" is not a valid number");var X=Object(A.isUndefined)(kt[vt])?null:kt[vt];return xt.push(Object(at.a)(Object(at.a)({},kt),(Ot={},Ot[ht]=[Ft,Ft+X],Ot))),Ft+X},0),xt.length&&St){var ft=Object(A.get)(xt,[[q.length-1],ht,[1]]);xt.push((wt={},wt[nt]=St.label,wt[vt]=ft,wt[ht]=[0,ft],wt))}return xt}function y(q,nt,vt,ht){var St=I(q,nt,vt,b,ht);return St.map(function(wt,xt){var ft;return Object(A.isObject)(wt)?Object(at.a)(Object(at.a)({},wt),(ft={},ft[f]=wt[b][1],ft[S]=wt[b][1]-wt[b][0],ft[M]=xt===q.length,ft)):wt})}var n=z("Ihc8");function s(q){for(var nt=[],vt=0;vt<q.length;vt++){var ht=q[vt];if(ht){var St=vt===0?"M":"L";nt.push([St,ht.x,ht.y])}}var wt=q[0];return nt.push(["L",wt.x,wt.y]),nt.push(["z"]),nt}function d(q){return Object(v.b)({},q.defaultStyle,q.style,{fill:q.color})}Object(n.registerShape)("interval","waterfall",{draw:function(nt,vt){var ht=nt.customInfo,St=nt.points,wt=nt.nextPoints,xt=vt.addGroup(),ft=this.parsePath(s(St)),Ft=d(nt);xt.addShape("path",{attrs:Object(at.a)(Object(at.a)({},Ft),{path:ft})});var kt=Object(A.get)(ht,"leaderLine");if(kt&&wt){var Ot=[["M",St[2].x,St[2].y],["L",wt[0].x,wt[0].y]];St[2].y===wt[1].y&&(Ot[1]=["L",wt[1].x,wt[1].y]),Ot=this.parsePath(Ot),xt.addShape("path",{attrs:Object(at.a)({path:Ot},kt.style||{})})}return xt}});function E(q){var nt=q.chart,vt=q.options,ht=vt.data,St=vt.xField,wt=vt.yField,xt=vt.total,ft=vt.leaderLine,Ft=vt.columnWidthRatio,kt=vt.waterfallStyle,Ot=vt.risingFill,X=vt.fallingFill,ct=vt.color;nt.data(y(ht,St,wt,xt));var dt=ct||function(lt){return Object(A.get)(lt,[M])?Object(A.get)(xt,["style","fill"],""):Object(A.get)(lt,[b,1])-Object(A.get)(lt,[b,0])>0?Ot:X},pt=Object(v.b)({},q,{options:{xField:St,yField:b,seriesField:St,rawFields:[wt,S,M,b],widthRatio:Ft,interval:{style:kt,shape:"waterfall",color:dt}}}),Mt=Object(i.c)(pt).ext,tt=Mt.geometry;return tt.customInfo({leaderLine:ft}),q}function O(q){var nt,vt,ht=q.options,St=ht.xAxis,wt=ht.yAxis,xt=ht.xField,ft=ht.yField,Ft=ht.meta,kt=Object(v.b)({},{alias:ft},Object(A.get)(Ft,ft));return Object(v.e)(Object(e.f)((nt={},nt[xt]=St,nt[ft]=wt,nt[b]=wt,nt),Object(v.b)({},Ft,(vt={},vt[b]=kt,vt[S]=kt,vt[f]=kt,vt))))(q)}function C(q){var nt=q.chart,vt=q.options,ht=vt.xAxis,St=vt.yAxis,wt=vt.xField,xt=vt.yField;return ht===!1?nt.axis(wt,!1):nt.axis(wt,ht),St===!1?(nt.axis(xt,!1),nt.axis(b,!1)):(nt.axis(xt,St),nt.axis(b,St)),q}function p(q){var nt=q.chart,vt=q.options,ht=vt.legend,St=vt.total,wt=vt.risingFill,xt=vt.fallingFill;if(ht===!1)nt.legend(!1);else{var ft=[{name:"\u589E\u52A0",value:"increase",marker:{symbol:"square",style:{r:5,fill:wt}}},{name:"\u51CF\u5C11",value:"decrease",marker:{symbol:"square",style:{r:5,fill:xt}}}];St&&ft.push({name:St.label||"",value:"total",marker:{symbol:"square",style:Object(v.b)({},{r:5},Object(A.get)(St,"style"))}}),nt.legend(Object(v.b)({},{custom:!0,position:"top",items:ft},ht)),nt.removeInteraction("legend-filter")}return q}function x(q){var nt=q.chart,vt=q.options,ht=vt.label,St=vt.labelMode,wt=vt.xField,xt=Object(v.c)(nt,"interval");if(!ht)xt.label(!1);else{var ft=ht.callback,Ft=Object(at.c)(ht,["callback"]);xt.label({fields:St==="absolute"?[f,wt]:[S,wt],callback:ft,cfg:Object(v.o)(Ft)})}return q}function T(q){var nt=q.chart,vt=q.options,ht=vt.tooltip,St=vt.xField,wt=vt.yField;if(ht!==!1){nt.tooltip(Object(at.a)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[wt]},ht));var xt=nt.geometries[0];(ht==null?void 0:ht.formatter)?xt.tooltip(St+"*"+wt,ht.formatter):xt.tooltip(wt)}else nt.tooltip(!1);return q}function N(q){return Object(v.e)(E,O,C,p,T,x,e.i,e.j,e.c,e.a,Object(e.b)())(q)}var Y=function(q){Object(at.b)(nt,q);function nt(){var vt=q!==null&&q.apply(this,arguments)||this;return vt.type="waterfall",vt}return nt.prototype.changeData=function(vt){var ht=this.options,St=ht.xField,wt=ht.yField,xt=ht.total;this.updateOption({data:vt}),this.chart.changeData(y(vt,St,wt,xt))},nt.prototype.getSchemaAdaptor=function(){return N},nt.prototype.getDefaultOptions=function(){return{label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{label:"\u603B\u8BA1",style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}}},nt}(a.a)},FPPI:function(Un,_t,z){"use strict";_t.a=function(at,a,A,e,i){for(var v=at.children,b,S=-1,f=v.length,M=at.value&&(e-a)/at.value;++S<f;)b=v[S],b.y0=A,b.y1=i,b.x0=a,b.x1=a+=b.value*M}},FxDU:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.createSensor=void 0;var at=z("QO+J"),a=z("j5sG"),A=typeof ResizeObserver!="undefined"?a.createSensor:at.createSensor;_t.createSensor=A},I4jL:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return A}),z.d(_t,"c",function(){return e});var at=z("FPPI"),a=z("7IPS"),A=(1+Math.sqrt(5))/2;function e(i,v,b,S,f,M){for(var I=[],y=v.children,n,s,d=0,E=0,O=y.length,C,p,x=v.value,T,N,Y,q,nt,vt,ht;d<O;){C=f-b,p=M-S;do T=y[E++].value;while(!T&&E<O);for(N=Y=T,vt=Math.max(p/C,C/p)/(x*i),ht=T*T*vt,nt=Math.max(Y/ht,ht/N);E<O;++E){if(T+=s=y[E].value,s<N&&(N=s),s>Y&&(Y=s),ht=T*T*vt,q=Math.max(Y/ht,ht/N),q>nt){T-=s;break}nt=q}I.push(n={value:T,dice:C<p,children:y.slice(d,E)}),n.dice?Object(at.a)(n,b,S,f,x?S+=p*T/x:M):Object(a.a)(n,b,S,x?b+=C*T/x:f,M),x-=T,d=E}return I}_t.a=function i(v){function b(S,f,M,I,y){e(v,S,f,M,I,y)}return b.ratio=function(S){return i((S=+S)>1?S:1)},b}(A)},I7nc:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return A}),z.d(_t,"a",function(){return e});var at=z("iTfj"),a="Invalid field: it must be a string!";function A(i,v){var b=i.field,S=i.fields;if(Object(at.isString)(b))return b;if(Object(at.isArray)(b))return console.warn(a),b[0];if(console.warn(a+" will try to get fields instead."),Object(at.isString)(S))return S;if(Object(at.isArray)(S)&&S.length)return S[0];if(v)return v;throw new TypeError(a)}function e(i){var v=[];return i&&i.each?i.each(function(b){v.push(b)}):i&&i.eachNode&&i.eachNode(function(b){v.push(b)}),v}},IeU1:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at}),z.d(_t,"b",function(){return a});function at(A){return A==null?null:a(A)}function a(A){if(typeof A!="function")throw new Error;return A}},Ihc8:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"VERSION",function(){return Or}),z.d(_t,"Chart",function(){return gu}),z.d(_t,"View",function(){return es}),z.d(_t,"Event",function(){return Vo}),z.d(_t,"ComponentController",function(){return Do}),z.d(_t,"TooltipController",function(){return Fs}),z.d(_t,"Geometry",function(){return la}),z.d(_t,"Element",function(){return ca}),z.d(_t,"GeometryLabel",function(){return Fe}),z.d(_t,"Interaction",function(){return lr}),z.d(_t,"Action",function(){return ut}),z.d(_t,"Facet",function(){return Di}),z.d(_t,"InteractionAction",function(){return ut}),z.d(_t,"registerComponentController",function(){return yr}),z.d(_t,"registerGeometry",function(){return Ho}),z.d(_t,"registerShape",function(){return fo}),z.d(_t,"registerShapeFactory",function(){return oa}),z.d(_t,"getShapeFactory",function(){return bs}),z.d(_t,"registerGeometryLabel",function(){return jn}),z.d(_t,"registerGeometryLabelLayout",function(){return Wo}),z.d(_t,"getGeometryLabel",function(){return ys}),z.d(_t,"getGeometryLabelLayout",function(){return Us}),z.d(_t,"getInteraction",function(){return Xi}),z.d(_t,"registerInteraction",function(){return $i}),z.d(_t,"registerAction",function(){return Ee}),z.d(_t,"getActionClass",function(){return Te}),z.d(_t,"getFacet",function(){return F}),z.d(_t,"registerFacet",function(){return B}),z.d(_t,"getTheme",function(){return xi}),z.d(_t,"registerTheme",function(){return ks}),z.d(_t,"registerEngine",function(){return C}),z.d(_t,"getEngine",function(){return O}),z.d(_t,"registerAnimation",function(){return Eo}),z.d(_t,"getAnimation",function(){return Gs}),z.d(_t,"LAYER",function(){return A}),z.d(_t,"DIRECTION",function(){return e}),z.d(_t,"Types",function(){return _e}),z.d(_t,"Coordinate",function(){return pr}),z.d(_t,"Scale",function(){return we.c}),z.d(_t,"Util",function(){return ei});var at=z("mrSG"),a=z("iTfj"),A;(function(c){c.FORE="fore",c.MID="mid",c.BG="bg"})(A||(A={}));var e;(function(c){c.TOP="top",c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.RIGHT="right",c.RIGHT_TOP="right-top",c.RIGHT_BOTTOM="right-bottom",c.LEFT="left",c.LEFT_TOP="left-top",c.LEFT_BOTTOM="left-bottom",c.BOTTOM="bottom",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c.RADIUS="radius",c.CIRCLE="circle",c.NONE="none"})(e||(e={}));var i;(function(c){c.AXIS="axis",c.GRID="grid",c.LEGEND="legend",c.TOOLTIP="tooltip",c.ANNOTATION="annotation",c.SLIDER="slider",c.SCROLLBAR="scrollbar",c.OTHER="other"})(i||(i={}));var v={FORE:3,MID:2,BG:1},b;(function(c){c.BEFORE_RENDER="beforerender",c.AFTER_RENDER="afterrender",c.BEFORE_PAINT="beforepaint",c.AFTER_PAINT="afterpaint",c.BEFORE_CHANGE_DATA="beforechangedata",c.AFTER_CHANGE_DATA="afterchangedata",c.BEFORE_CLEAR="beforeclear",c.AFTER_CLEAR="afterclear",c.BEFORE_DESTROY="beforedestroy",c.BEFORE_CHANGE_SIZE="beforechangesize",c.AFTER_CHANGE_SIZE="afterchangesize"})(b||(b={}));var S;(function(c){c.BEFORE_DRAW_ANIMATE="beforeanimate",c.AFTER_DRAW_ANIMATE="afteranimate"})(S||(S={}));var f;(function(c){c.MOUSE_ENTER="plot:mouseenter",c.MOUSE_DOWN="plot:mousedown",c.MOUSE_MOVE="plot:mousemove",c.MOUSE_UP="plot:mouseup",c.MOUSE_LEAVE="plot:mouseleave",c.TOUCH_START="plot:touchstart",c.TOUCH_MOVE="plot:touchmove",c.TOUCH_END="plot:touchend",c.TOUCH_CANCEL="plot:touchcancel",c.CLICK="plot:click",c.DBLCLICK="plot:dblclick",c.CONTEXTMENU="plot:contextmenu",c.LEAVE="plot:leave",c.ENTER="plot:enter"})(f||(f={}));var M;(function(c){c.ACTIVE="active",c.INACTIVE="inactive",c.SELECTED="selected",c.DEFAULT="default"})(M||(M={}));var I=["color","shape","size"],y="_origin",n=1,s=1,d=.25,E={};function O(c){var o=E[c];if(!o)throw new Error("G engine '"+c+"' is not exist, please register it at first.");return o}function C(c,o){E[c]=o}var p=z("fIp6");function x(c){var o=getComputedStyle(c);return{width:(c.clientWidth||parseInt(o.width,10))-parseInt(o.paddingLeft,10)-parseInt(o.paddingRight,10),height:(c.clientHeight||parseInt(o.height,10))-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10)}}function T(c){return typeof c=="number"&&!isNaN(c)}function N(c,o,t,r){var m=t,D=r;if(o){var et=x(c);m=et.width?et.width:m,D=et.height?et.height:D}return{width:Math.max(T(m)?m:n,n),height:Math.max(T(D)?D:s,s)}}function Y(c){var o=c.parentNode;o&&o.removeChild(c)}var q=z("f6Jy"),nt=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this)||this;r.destroyed=!1;var m=t.visible,D=m===void 0?!0:m;return r.visible=D,r}return o.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},o.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},o.prototype.destroy=function(){this.off(),this.destroyed=!0},o.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},o}(q.a),vt=nt,ht=z("aFU3"),St=z("7s0d"),wt=function(o,t){return Object(a.isString)(t)?t:o.invert(o.scale(t))},xt=function(){function c(o){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(o)}return c.prototype.mapping=function(){for(var o=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var m=t.map(function(D,et){return o._toOriginParam(D,o.scales[et])});return this.callback.apply(this,m)},c.prototype.getLinearValue=function(o){var t=this.values.length-1,r=Math.floor(t*o),m=t*o-r,D=this.values[r],et=r===t?D:this.values[r+1];return D+(et-D)*m},c.prototype.getNames=function(){for(var o=this.scales,t=this.names,r=Math.min(o.length,t.length),m=[],D=0;D<r;D+=1)m.push(t[D]);return m},c.prototype.getFields=function(){return this.scales.map(function(o){return o.field})},c.prototype.getScale=function(o){return this.scales[this.names.indexOf(o)]},c.prototype.defaultCallback=function(){for(var o=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===0?this.values:t.map(function(m,D){var et=o.scales[D];return et.type==="identity"?et.values[0]:o._getAttributeValue(et,m)})},c.prototype._parseCfg=function(o){var t=this,r=o.type,m=r===void 0?"base":r,D=o.names,et=D===void 0?[]:D,Et=o.scales,Lt=Et===void 0?[]:Et,ne=o.values,ge=ne===void 0?[]:ne,be=o.callback;this.type=m,this.scales=Lt,this.values=ge,this.names=et,this.callback=function(){for(var Ae=[],We=0;We<arguments.length;We++)Ae[We]=arguments[We];if(be){var an=be.apply(void 0,Ae);if(!Object(a.isNil)(an))return[an]}return t.defaultCallback.apply(t,Ae)}},c.prototype._getAttributeValue=function(o,t){if(o.isCategory&&!this.linear){var r=o.translate(t);return this.values[r%this.values.length]}var m=o.scale(t);return this.getLinearValue(m)},c.prototype._toOriginParam=function(o,t){return t.isLinear?o:Object(a.isArray)(o)?o.map(function(r){return wt(t,r)}):wt(t,o)},c}(),ft=xt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ft=function(o,t){return Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,m){r.__proto__=m}||function(r,m){for(var D in m)m.hasOwnProperty(D)&&(r[D]=m[D])},Ft(o,t)};function kt(c,o){Ft(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Ot=function(){return Ot=Object.assign||function(t){for(var r,m=1,D=arguments.length;m<D;m++){r=arguments[m];for(var et in r)Object.prototype.hasOwnProperty.call(r,et)&&(t[et]=r[et])}return t},Ot.apply(this,arguments)};function X(c,o){var t={};for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&o.indexOf(r)<0&&(t[r]=c[r]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,r=Object.getOwnPropertySymbols(c);m<r.length;m++)o.indexOf(r[m])<0&&Object.prototype.propertyIsEnumerable.call(c,r[m])&&(t[r[m]]=c[r[m]]);return t}function ct(c,o,t,r){var m=arguments.length,D=m<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,r);else for(var Et=c.length-1;Et>=0;Et--)(et=c[Et])&&(D=(m<3?et(D):m>3?et(o,t,D):et(o,t))||D);return m>3&&D&&Object.defineProperty(o,t,D),D}function dt(c,o){return function(t,r){o(t,r,c)}}function pt(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Mt(c,o,t,r){function m(D){return D instanceof t?D:new t(function(et){et(D)})}return new(t||(t=Promise))(function(D,et){function Et(ge){try{ne(r.next(ge))}catch(be){et(be)}}function Lt(ge){try{ne(r.throw(ge))}catch(be){et(be)}}function ne(ge){ge.done?D(ge.value):m(ge.value).then(Et,Lt)}ne((r=r.apply(c,o||[])).next())})}function tt(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},r,m,D,et;return et={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function Et(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,m&&(D=ne[0]&2?m.return:ne[0]?m.throw||((D=m.return)&&D.call(m),0):m.next)&&!(D=D.call(m,ne[1])).done)return D;switch(m=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,m=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],m=0}finally{r=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function lt(c,o,t,r){r===void 0&&(r=t),c[r]=o[t]}function it(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function U(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],r=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var r=t.call(c),m,D=[],et;try{for(;(o===void 0||o-- >0)&&!(m=r.next()).done;)D.push(m.value)}catch(Et){et={error:Et}}finally{try{m&&!m.done&&(t=r.return)&&t.call(r)}finally{if(et)throw et.error}}return D}function H(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(P(arguments[o]));return c}function k(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var r=Array(c),m=0,o=0;o<t;o++)for(var D=arguments[o],et=0,Et=D.length;et<Et;et++,m++)r[m]=D[et];return r}function h(c){return this instanceof h?(this.v=c,this):new h(c)}function g(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(c,o||[]),m,D=[];return m={},et("next"),et("throw"),et("return"),m[Symbol.asyncIterator]=function(){return this},m;function et(Ae){r[Ae]&&(m[Ae]=function(We){return new Promise(function(an,gn){D.push([Ae,We,an,gn])>1||Et(Ae,We)})})}function Et(Ae,We){try{Lt(r[Ae](We))}catch(an){be(D[0][3],an)}}function Lt(Ae){Ae.value instanceof h?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Et("next",Ae)}function ge(Ae){Et("throw",Ae)}function be(Ae,We){Ae(We),D.shift(),D.length&&Et(D[0][0],D[0][1])}}function G(c){var o,t;return o={},r("next"),r("throw",function(m){throw m}),r("return"),o[Symbol.iterator]=function(){return this},o;function r(m,D){o[m]=c[m]?function(et){return(t=!t)?{value:h(c[m](et)),done:m==="return"}:D?D(et):et}:D}}function V(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof U=="function"?U(c):c[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(D){t[D]=c[D]&&function(et){return new Promise(function(Et,Lt){et=c[D](et),m(Et,Lt,et.done,et.value)})}}function m(D,et,Et,Lt){Promise.resolve(Lt).then(function(ne){D({value:ne,done:Et})},et)}}function $(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function rt(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function ot(c){return c&&c.__esModule?c:{default:c}}function At(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function gt(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var mt=z("6UX8"),bt=function(c){kt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="color",r.names=["color"],Object(a.isString)(r.values)&&(r.linear=!0),r.gradient=mt.a.gradient(r.values),r}return o.prototype.getLinearValue=function(t){return this.gradient(t)},o}(ft),jt=bt,Dt=function(c){kt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="opacity",r.names=["opacity"],r}return o}(ft),Ut=Dt,Ct=function(c){kt(o,c);function o(t){var r=c.call(this,t)||this;return r.names=["x","y"],r.type="position",r}return o.prototype.mapping=function(t,r){var m=this.scales,D=m[0],et=m[1];return Object(a.isNil)(t)||Object(a.isNil)(r)?[]:[Object(a.isArray)(t)?t.map(function(Et){return D.scale(Et)}):D.scale(t),Object(a.isArray)(r)?r.map(function(Et){return et.scale(Et)}):et.scale(r)]},o}(ft),Vt=Ct,Ht=function(c){kt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="shape",r.names=["shape"],r}return o.prototype.getLinearValue=function(t){var r=Math.round((this.values.length-1)*t);return this.values[r]},o}(ft),re=Ht,pe=function(c){kt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="size",r.names=["size"],r}return o}(ft),ye=pe,we=z("8vsG"),Ne={},Ke=function(o){return Ne[o.toLowerCase()]},pn=function(o,t){if(Ke(o))throw new Error("Attribute type '"+o+"' existed.");Ne[o.toLowerCase()]=t};pn("Color",jt),pn("Opacity",Ut),pn("Position",Vt),pn("Shape",re),pn("Size",ye);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hn=function(o,t){return hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,m){r.__proto__=m}||function(r,m){for(var D in m)m.hasOwnProperty(D)&&(r[D]=m[D])},hn(o,t)};function kn(c,o){hn(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Tn=function(){return Tn=Object.assign||function(t){for(var r,m=1,D=arguments.length;m<D;m++){r=arguments[m];for(var et in r)Object.prototype.hasOwnProperty.call(r,et)&&(t[et]=r[et])}return t},Tn.apply(this,arguments)};function Rn(c,o){var t={};for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&o.indexOf(r)<0&&(t[r]=c[r]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,r=Object.getOwnPropertySymbols(c);m<r.length;m++)o.indexOf(r[m])<0&&Object.prototype.propertyIsEnumerable.call(c,r[m])&&(t[r[m]]=c[r[m]]);return t}function Mn(c,o,t,r){var m=arguments.length,D=m<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,r);else for(var Et=c.length-1;Et>=0;Et--)(et=c[Et])&&(D=(m<3?et(D):m>3?et(o,t,D):et(o,t))||D);return m>3&&D&&Object.defineProperty(o,t,D),D}function Cn(c,o){return function(t,r){o(t,r,c)}}function _n(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Kn(c,o,t,r){function m(D){return D instanceof t?D:new t(function(et){et(D)})}return new(t||(t=Promise))(function(D,et){function Et(ge){try{ne(r.next(ge))}catch(be){et(be)}}function Lt(ge){try{ne(r.throw(ge))}catch(be){et(be)}}function ne(ge){ge.done?D(ge.value):m(ge.value).then(Et,Lt)}ne((r=r.apply(c,o||[])).next())})}function tr(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},r,m,D,et;return et={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function Et(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,m&&(D=ne[0]&2?m.return:ne[0]?m.throw||((D=m.return)&&D.call(m),0):m.next)&&!(D=D.call(m,ne[1])).done)return D;switch(m=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,m=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],m=0}finally{r=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function or(c,o,t,r){r===void 0&&(r=t),c[r]=o[t]}function nr(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function er(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],r=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var r=t.call(c),m,D=[],et;try{for(;(o===void 0||o-- >0)&&!(m=r.next()).done;)D.push(m.value)}catch(Et){et={error:Et}}finally{try{m&&!m.done&&(t=r.return)&&t.call(r)}finally{if(et)throw et.error}}return D}function Vr(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(Sr(arguments[o]));return c}function ti(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var r=Array(c),m=0,o=0;o<t;o++)for(var D=arguments[o],et=0,Et=D.length;et<Et;et++,m++)r[m]=D[et];return r}function hi(c){return this instanceof hi?(this.v=c,this):new hi(c)}function Fi(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(c,o||[]),m,D=[];return m={},et("next"),et("throw"),et("return"),m[Symbol.asyncIterator]=function(){return this},m;function et(Ae){r[Ae]&&(m[Ae]=function(We){return new Promise(function(an,gn){D.push([Ae,We,an,gn])>1||Et(Ae,We)})})}function Et(Ae,We){try{Lt(r[Ae](We))}catch(an){be(D[0][3],an)}}function Lt(Ae){Ae.value instanceof hi?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Et("next",Ae)}function ge(Ae){Et("throw",Ae)}function be(Ae,We){Ae(We),D.shift(),D.length&&Et(D[0][0],D[0][1])}}function to(c){var o,t;return o={},r("next"),r("throw",function(m){throw m}),r("return"),o[Symbol.iterator]=function(){return this},o;function r(m,D){o[m]=c[m]?function(et){return(t=!t)?{value:hi(c[m](et)),done:m==="return"}:D?D(et):et}:D}}function si(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof er=="function"?er(c):c[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(D){t[D]=c[D]&&function(et){return new Promise(function(Et,Lt){et=c[D](et),m(Et,Lt,et.done,et.value)})}}function m(D,et,Et,Lt){Promise.resolve(Lt).then(function(ne){D({value:ne,done:Et})},et)}}function Ci(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function _i(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function Li(c){return c&&c.__esModule?c:{default:c}}function Vi(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function ro(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var jr=z("6JdA"),Ji=function(){function c(o){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=o.start,r=o.end,m=o.matrix,D=m===void 0?[1,0,0,0,1,0,0,0,1]:m,et=o.isTransposed,Et=et===void 0?!1:et;this.start=t,this.end=r,this.matrix=D,this.originalMatrix=ti(D),this.isTransposed=Et}return c.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},c.prototype.update=function(o){Object(a.assign)(this,o),this.initial()},c.prototype.convertDim=function(o,t){var r,m=this[t],D=m.start,et=m.end;return this.isReflect(t)&&(r=[et,D],D=r[0],et=r[1]),D+o*(et-D)},c.prototype.invertDim=function(o,t){var r,m=this[t],D=m.start,et=m.end;return this.isReflect(t)&&(r=[et,D],D=r[0],et=r[1]),(o-D)/(et-D)},c.prototype.applyMatrix=function(o,t,r){r===void 0&&(r=0);var m=this.matrix,D=[o,t,r];return jr.d.transformMat3(D,D,m),D},c.prototype.invertMatrix=function(o,t,r){r===void 0&&(r=0);var m=this.matrix,D=jr.b.invert([0,0,0,0,0,0,0,0,0],m),et=[o,t,r];return D&&jr.d.transformMat3(et,et,D),et},c.prototype.convert=function(o){var t=this.convertPoint(o),r=t.x,m=t.y,D=this.applyMatrix(r,m,1);return{x:D[0],y:D[1]}},c.prototype.invert=function(o){var t=this.invertMatrix(o.x,o.y,1);return this.invertPoint({x:t[0],y:t[1]})},c.prototype.rotate=function(o){var t=this.matrix,r=this.center;return jr.a.leftTranslate(t,t,[-r.x,-r.y]),jr.a.leftRotate(t,t,o),jr.a.leftTranslate(t,t,[r.x,r.y]),this},c.prototype.reflect=function(o){return o==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},c.prototype.scale=function(o,t){var r=this.matrix,m=this.center;return jr.a.leftTranslate(r,r,[-m.x,-m.y]),jr.a.leftScale(r,r,[o,t]),jr.a.leftTranslate(r,r,[m.x,m.y]),this},c.prototype.translate=function(o,t){var r=this.matrix;return jr.a.leftTranslate(r,r,[o,t]),this},c.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},c.prototype.getCenter=function(){return this.center},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getRadius=function(){return this.radius},c.prototype.isReflect=function(o){return o==="x"?this.isReflectX:this.isReflectY},c.prototype.resetMatrix=function(o){this.matrix=o||ti(this.originalMatrix)},c}(),pr=Ji,Yr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;return r.isRect=!0,r.type="cartesian",r.initial(),r}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=this.start,r=this.end;this.x={start:t.x,end:r.x},this.y={start:t.y,end:r.y}},o.prototype.convertPoint=function(t){var r,m=t.x,D=t.y;return this.isTransposed&&(r=[D,m],m=r[0],D=r[1]),{x:this.convertDim(m,"x"),y:this.convertDim(D,"y")}},o.prototype.invertPoint=function(t){var r,m=this.invertDim(t.x,"x"),D=this.invertDim(t.y,"y");return this.isTransposed&&(r=[D,m],m=r[0],D=r[1]),{x:m,y:D}},o}(pr),Br=Yr,Nr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;r.isHelix=!0,r.type="helix";var m=t.startAngle,D=m===void 0?1.25*Math.PI:m,et=t.endAngle,Et=et===void 0?7.25*Math.PI:et,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return r.startAngle=D,r.endAngle=Et,r.innerRadius=ne,r.radius=ge,r.initial(),r}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,r=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(r=r*this.radius),this.d=Math.floor(r*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*r,end:this.innerRadius*r+this.d*.99}},o.prototype.convertPoint=function(t){var r,m=t.x,D=t.y;this.isTransposed&&(r=[D,m],m=r[0],D=r[1]);var et=this.convertDim(m,"x"),Et=this.a*et,Lt=this.convertDim(D,"y");return{x:this.center.x+Math.cos(et)*(Et+Lt),y:this.center.y+Math.sin(et)*(Et+Lt)}},o.prototype.invertPoint=function(t){var r,m=this.d+this.y.start,D=jr.c.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),et=jr.a.angleTo(D,[1,0],!0),Et=et*this.a;jr.c.length(D)<Et&&(Et=jr.c.length(D));var Lt=Math.floor((jr.c.length(D)-Et)/m);et=2*Lt*Math.PI+et;var ne=this.a*et,ge=jr.c.length(D)-ne;ge=Object(a.isNumberEqual)(ge,0)?0:ge;var be=this.invertDim(et,"x"),Ae=this.invertDim(ge,"y");return be=Object(a.isNumberEqual)(be,0)?0:be,Ae=Object(a.isNumberEqual)(Ae,0)?0:Ae,this.isTransposed&&(r=[Ae,be],be=r[0],Ae=r[1]),{x:be,y:Ae}},o}(pr),Xr=Nr,Kr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;r.isPolar=!0,r.type="polar";var m=t.startAngle,D=m===void 0?-Math.PI/2:m,et=t.endAngle,Et=et===void 0?Math.PI*3/2:et,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return r.startAngle=D,r.endAngle=Et,r.innerRadius=ne,r.radius=ge,r.initial(),r}return o.prototype.initial=function(){for(c.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),r=t.maxX-t.minX,m=t.maxY-t.minY,D=Math.abs(t.minX)/r,et=Math.abs(t.minY)/m,Et;this.height/m>this.width/r?(Et=this.width/r,this.circleCenter={x:this.center.x-(.5-D)*this.width,y:this.center.y-(.5-et)*Et*m}):(Et=this.height/m,this.circleCenter={x:this.center.x-(.5-D)*Et*r,y:this.center.y-(.5-et)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Et*this.radius:(this.radius<=0||this.radius>Et)&&(this.polarRadius=Et):this.polarRadius=Et,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},o.prototype.getRadius=function(){return this.polarRadius},o.prototype.convertPoint=function(t){var r,m=this.getCenter(),D=t.x,et=t.y;return this.isTransposed&&(r=[et,D],D=r[0],et=r[1]),D=this.convertDim(D,"x"),et=this.convertDim(et,"y"),{x:m.x+Math.cos(D)*et,y:m.y+Math.sin(D)*et}},o.prototype.invertPoint=function(t){var r=this.getCenter(),m=[t.x-r.x,t.y-r.y],D=[1,0,0,0,1,0,0,0,1];jr.a.leftRotate(D,D,this.startAngle);var et=[1,0,0];jr.d.transformMat3(et,et,D);var Et=[et[0],et[1]],Lt=jr.a.angleTo(Et,m,this.endAngle<this.startAngle);Object(a.isNumberEqual)(Lt,Math.PI*2)&&(Lt=0);var ne=jr.c.length(m),ge=Lt/(this.endAngle-this.startAngle);ge=this.endAngle-this.startAngle>0?ge:-ge;var be=this.invertDim(ne,"y"),Ae={x:0,y:0};return Ae.x=this.isTransposed?be:ge,Ae.y=this.isTransposed?ge:be,Ae},o.prototype.getCenter=function(){return this.circleCenter},o.prototype.getOneBox=function(){var t=this.startAngle,r=this.endAngle;if(Math.abs(r-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var m=[0,Math.cos(t),Math.cos(r)],D=[0,Math.sin(t),Math.sin(r)],et=Math.min(t,r);et<Math.max(t,r);et+=Math.PI/18)m.push(Math.cos(et)),D.push(Math.sin(et));return{minX:Math.min.apply(Math,m),maxX:Math.max.apply(Math,m),minY:Math.min.apply(Math,D),maxY:Math.max.apply(Math,D)}},o}(pr),ni=Kr,fi={},$r=function(o){return fi[o.toLowerCase()]},ci=function(o,t){fi[o.toLowerCase()]=t};ci("rect",Br),ci("cartesian",Br),ci("polar",ni),ci("helix",Xr);var Qr=z("17Tr"),gi=Qr.Axis.Line,Oi=Qr.Axis.Circle,bi=Qr.Grid.Line,zi=Qr.Grid.Circle,Qi=Qr.Legend.Category,io=Qr.Legend.Continuous,Wi=Qr.Tooltip.Html;function Zi(c){if(Object(a.isEmpty)(c))return null;var o=c[0].x,t=c[0].x,r=c[0].y,m=c[0].y;return Object(a.each)(c,function(D){o=o>D.x?D.x:o,t=t<D.x?D.x:t,r=r>D.y?D.y:r,m=m<D.y?D.y:m}),{minX:o,maxX:t,minY:r,maxY:m,centerX:(o+t)/2,centerY:(r+m)/2}}function Pi(c,o,t,r){return{x:c+t*Math.cos(r),y:o+t*Math.sin(r)}}function no(c,o,t,r,m,D){D===void 0&&(D=0);var et=Pi(c,o,t,r),Et=Pi(c,o,t,m),Lt=Pi(c,o,D,r),ne=Pi(c,o,D,m);if(m-r==Math.PI*2){var ge=Pi(c,o,t,r+Math.PI),be=Pi(c,o,D,r+Math.PI),Ae=[["M",et.x,et.y],["A",t,t,0,1,1,ge.x,ge.y],["A",t,t,0,1,1,Et.x,Et.y],["M",Lt.x,Lt.y]];return D&&(Ae.push(["A",D,D,0,1,0,be.x,be.y]),Ae.push(["A",D,D,0,1,0,ne.x,ne.y])),Ae.push(["M",et.x,et.y]),Ae.push(["Z"]),Ae}var We=m-r<=Math.PI?0:1,an=[["M",et.x,et.y],["A",t,t,0,We,1,Et.x,Et.y],["L",ne.x,ne.y]];return D&&an.push(["A",D,D,0,We,0,Lt.x,Lt.y]),an.push(["L",et.x,et.y]),an.push(["Z"]),an}function Mo(c,o,t,r,m){var D=Pi(c,o,t,r),et=Pi(c,o,t,m);if(Object(a.isNumberEqual)(m-r,Math.PI*2)){var Et=Pi(c,o,t,r+Math.PI);return[["M",D.x,D.y],["A",t,t,0,1,1,Et.x,Et.y],["A",t,t,0,1,1,D.x,D.y],["A",t,t,0,1,0,Et.x,Et.y],["A",t,t,0,1,0,D.x,D.y],["Z"]]}var Lt=m-r<=Math.PI?0:1;return[["M",D.x,D.y],["A",t,t,0,Lt,1,et.x,et.y]]}function ao(c,o){var t=c.points,r=Zi(t),m,D,et=o.startAngle,Et=o.endAngle,Lt=Et-et;return o.isTransposed?(m=r.maxY*Lt,D=r.minY*Lt):(m=r.maxX*Lt,D=r.minX*Lt),m+=et,D+=et,{startAngle:D,endAngle:m}}function uo(c,o){if(Object(a.isNumber)(c)&&Object(a.isNumber)(o))return[c,o];for(var t=-1,r=0,m=0,D,et=c.length-1,Et,Lt=0;++t<c.length;)D=et,et=t,Lt+=Et=c[D]*o[et]-c[et]*o[D],r+=(c[D]+c[et])*Et,m+=(o[D]+o[et])*Et;return Lt*=3,[r/Lt,m/Lt]}function xo(c,o){var t=c.attr(),r=o.attr();return Object(a.each)(t,function(m,D){r[D]===void 0&&(r[D]=void 0)}),r}function oe(c,o,t){var r=Math.min(o,t),m=Math.max(o,t);return c>=r&&c<=m}function Kt(c,o,t){if(Object(a.isString)(c))return c.padEnd(o,t);if(Object(a.isArray)(c)){var r=c.length;if(r<o)for(var m=o-r,D=0;D<m;D++)c.push(t)}return c}function te(c,o){return o.forEach(function(t){delete c[t]}),c}function Oe(c,o,t){o===void 0&&(o=[]),t===void 0&&(t={});for(var r=0,m=c;r<m.length;r++){var D=m[r];t[D]||(o.push(D),t[D]=!0)}return o}var Qe=function(){function c(o,t,r,m){o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),m===void 0&&(m=0),this.x=o,this.y=t,this.height=m,this.width=r}return c.fromRange=function(o,t,r,m){return new c(o,t,r-o,m-t)},c.fromObject=function(o){return new c(o.minX,o.minY,o.width,o.height)},Object.defineProperty(c.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(o){return this.x===o.x&&this.y===o.y&&this.width===o.width&&this.height===o.height},c.prototype.contains=function(o){return o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY},c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.add=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var r=this.clone();return Object(a.each)(o,function(m){r.x=Math.min(m.x,r.x),r.y=Math.min(m.y,r.y),r.width=Math.max(m.maxX,r.maxX)-r.x,r.height=Math.max(m.maxY,r.maxY)-r.y}),r},c.prototype.merge=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var r=this.clone();return Object(a.each)(o,function(m){r.x=Math.max(m.x,r.x),r.y=Math.max(m.y,r.y),r.width=Math.min(m.maxX,r.maxX)-r.x,r.height=Math.min(m.maxY,r.maxY)-r.y}),r},c.prototype.cut=function(o,t){var r=o.width,m=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:return c.fromRange(this.minX,this.minY+m,this.maxX,this.maxY);case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:return c.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:return c.fromRange(this.minX,this.minY,this.maxX,this.maxY-m);case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:return c.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},c.prototype.shrink=function(o){var t=o[0],r=o[1],m=o[2],D=o[3];return new c(this.x+D,this.y+t,this.width-D-r,this.height-t-m)},c.prototype.expand=function(o){var t=o[0],r=o[1],m=o[2],D=o[3];return new c(this.x-D,this.y-t,this.width+D+r,this.height+t+m)},c.prototype.exceed=function(o){return[Math.max(-this.minY+o.minY,0),Math.max(this.maxX-o.maxX,0),Math.max(this.maxY-o.maxY,0),Math.max(-this.minX+o.minX,0)]},c.prototype.collide=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},c.prototype.size=function(){return this.width*this.height},c.prototype.isPointIn=function(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY},c}(),On=function(o,t){var r=t.start,m=t.end;return new Qe(o.x+o.width*r.x,o.y+o.height*r.y,o.width*Math.abs(m.x-r.x),o.height*Math.abs(m.y-r.y))};function Vn(c){return[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,c.maxY],[c.minX,c.maxY]]}function Xn(c){if(c.isPolar&&!c.isTransposed)return(c.endAngle-c.startAngle)*c.getRadius();var o=c.convert({x:0,y:0}),t=c.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function $e(c){if(c.isPolar){var o=c.startAngle,t=c.endAngle;return t-o==Math.PI*2}return!1}function rn(c,o){var t=c.getCenter();return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}function on(c,o){var t=!1;if(c)if(c.type==="theta"){var r=c.start,m=c.end;t=oe(o.x,r.x,m.x)&&oe(o.y,r.y,m.y)}else{var D=c.invert(o);t=oe(D.x,0,1)&&oe(D.y,0,1)}return t}function $n(c,o){var t=c.getCenter();return Math.atan2(o.y-t.y,o.x-t.x)}function vr(c,o){o===void 0&&(o=0);var t=c.start,r=c.end,m=c.getWidth(),D=c.getHeight();if(c.isPolar){var et=c.startAngle,Et=c.endAngle,Lt=c.getCenter(),ne=c.getRadius();return{type:"path",startState:{path:no(Lt.x,Lt.y,ne+o,et,et)},endState:function(Ae){var We=(Et-et)*Ae+et,an=no(Lt.x,Lt.y,ne+o,et,We);return{path:an}},attrs:{path:no(Lt.x,Lt.y,ne+o,et,Et)}}}var ge;return c.isTransposed?ge={height:D+o*2}:ge={width:m+o*2},{type:"rect",startState:{x:t.x-o,y:r.y-o,width:c.isTransposed?m+o*2:0,height:c.isTransposed?0:D+o*2},endState:ge,attrs:{x:t.x-o,y:r.y-o,width:m+o*2,height:D+o*2}}}function ar(c,o){o===void 0&&(o=0);var t=c.start,r=c.end,m=c.getWidth(),D=c.getHeight(),et=Math.min(t.x,r.x),Et=Math.min(t.y,r.y);return Qe.fromRange(et-o,Et-o,et+m+o,Et+D+o)}var rr=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Fr(c){var o="linear";return rr.test(c)?o="timeCat":Object(a.isString)(c)&&(o="cat"),o}function Ar(c,o,t){var r=o||[];if(Object(a.isNumber)(c)||Object(a.isNil)(Object(a.firstValue)(r,c))&&Object(a.isEmpty)(t)){var m=Object(we.d)("identity");return new m({field:c.toString(),values:[c]})}var D=Object(a.valuesOfKey)(r,c),et=Object(a.get)(t,"type",Fr(D[0])),Et=Object(we.d)(et);return new Et(Object(at.a)({field:c,values:D},t))}function wr(c,o){if(c.type!=="identity"&&o.type!=="identity"){var t={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);c.change(t)}}function xr(c){return c.alias||c.field}function Er(c,o,t){var r=c.values,m=r.length,D;if(m===1)D=[.5,1];else{var et=1,Et=0;$e(o)?o.isTransposed?(et=Object(a.get)(t,"widthRatio.multiplePie",1/1.3),Et=1/m*et,D=[Et/2,1-Et/2]):D=[0,1-1/m]:(Et=1/m/2,D=[Et,1-Et])}return D}function Ir(c){var o,t;switch(c){case e.TOP:o={x:0,y:1},t={x:1,y:1};break;case e.RIGHT:o={x:1,y:0},t={x:1,y:1};break;case e.BOTTOM:o={x:0,y:0},t={x:1,y:0};break;case e.LEFT:o={x:0,y:0},t={x:0,y:1};break;default:o=t={x:0,y:0}}return{start:o,end:t}}function Lr(c){var o,t;return c.isTransposed?(o={x:0,y:0},t={x:1,y:0}):(o={x:0,y:0},t={x:0,y:1}),{start:o,end:t}}function Pr(c,o){var t={start:{x:0,y:0},end:{x:0,y:0}};c.isRect?t=Ir(o):c.isPolar&&(t=Lr(c));var r=t.start,m=t.end;return{start:c.convert(r),end:c.convert(m)}}function Dr(c,o){if(c.isRect)return c.isTransposed?[e.RIGHT,e.BOTTOM].includes(o)?1:-1:[e.BOTTOM,e.RIGHT].includes(o)?-1:1;if(c.isPolar){var t=c.x.start;return t<0?-1:1}return 1}function ri(c){var o=c.start,t=c.end;return o.x===t.x}function vi(c,o){var t=c.start,r=c.end,m=ri(c);return m?(t.y-r.y)*(o.x-t.x)>0?1:-1:(r.x-t.x)*(t.y-o.y)>0?-1:1}function ii(c,o){return Object(a.get)(c,["components","axis",o],{})}function Si(c){var o=c.x,t=c.y,r=c.circleCenter,m=t.start>t.end,D=c.isTransposed?c.convert({x:m?0:1,y:0}):c.convert({x:0,y:m?0:1}),et=[D.x-r.x,D.y-r.y],Et=[1,0],Lt=D.y>r.y?jr.c.angle(et,Et):jr.c.angle(et,Et)*-1,ne=Lt+(o.end-o.start),ge=Math.sqrt(Math.pow(D.x-r.x,2)+Math.pow(D.y-r.y,2));return{center:r,radius:ge,startAngle:Lt,endAngle:ne}}function Ui(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o])}function Yi(c,o){return Object(a.get)(c,"position",o)}function Bi(c,o){return Object(a.get)(o,["title","text"],xr(c))}var Di=function(){function c(o,t){this.destroyed=!1,this.facets=[],this.view=o,this.cfg=Object(a.deepMix)({},this.getDefaultCfg(),t)}return c.prototype.init=function(){this.container||(this.container=this.createContainer());var o=this.view.getData();this.facets=this.generateFacets(o)},c.prototype.render=function(){this.renderViews()},c.prototype.update=function(){},c.prototype.clear=function(){this.clearFacetViews()},c.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},c.prototype.facetToView=function(o){var t=o.region,r=o.data,m=o.padding,D=m===void 0?this.cfg.padding:m,et=this.view.createView({region:t,padding:D});et.data(r||[]),o.view=et,this.beforeEachView(et,o);var Et=this.cfg.eachView;return Et&&Et(et,o),this.afterEachView(et,o),et},c.prototype.createContainer=function(){var o=this.view.getLayer(A.FORE);return o.addGroup()},c.prototype.renderViews=function(){this.createFacetViews()},c.prototype.createFacetViews=function(){var o=this;return this.facets.map(function(t){return o.facetToView(t)})},c.prototype.clearFacetViews=function(){var o=this;Object(a.each)(this.facets,function(t){t.view&&(o.view.removeView(t.view),t.view=void 0)})},c.prototype.getFieldValues=function(o,t){var r=[],m={};return Object(a.each)(o,function(D){var et=D[t];!Object(a.isNil)(et)&&!m[et]&&(r.push(et),m[et]=!0)}),r},c.prototype.getRegion=function(o,t,r,m){var D=1/(t===0?1:t),et=1/(o===0?1:o),Et={x:D*r,y:et*m},Lt={x:D*(r+1),y:et*(m+1)};return{start:Et,end:Lt}},c.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},c.prototype.getDefaultTitleCfg=function(){var o=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:o}}},c.prototype.processAxis=function(o,t){var r=o.getOptions(),m=r.coordinate,D=o.geometries,et=Object(a.get)(m,"type","rect");if(et==="rect"&&D.length){Object(a.isNil)(r.axes)&&(r.axes={});var Et=r.axes,Lt=D[0].getXYFields(),ne=Lt[0],ge=Lt[1],be=Ui(Et,ne),Ae=Ui(Et,ge);be!==!1&&(r.axes[ne]=this.getXAxisOption(ne,Et,be,t)),Ae!==!1&&(r.axes[ge]=this.getYAxisOption(ge,Et,Ae,t))}},c.prototype.getFacetDataFilter=function(o){return function(t){return Object(a.every)(o,function(r){var m=r.field,D=r.value;return!Object(a.isNil)(D)&&m?t[m]===D:!0})}},c}(),ve={},F=function(o){return ve[Object(a.lowerCase)(o)]},B=function(o,t){ve[Object(a.lowerCase)(o)]=t},Z=function(){function c(o,t){this.context=o,this.cfg=t,o.addAction(this)}return c.prototype.applyCfg=function(o){Object(a.assign)(this,o)},c.prototype.init=function(){this.applyCfg(this.cfg)},c.prototype.destroy=function(){this.context.removeAction(this),this.context=null},c}(),ut=Z,Bt=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.execute=function(){this.callback&&this.callback(this.context)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.callback=null},o}(ut),Jt=Bt,ie={};function se(c,o){var t=ie[c],r=null;if(t){var m=t.ActionClass,D=t.cfg;r=new m(o,D),r.name=c,r.init()}return r}function Te(c){var o=ie[c];return Object(a.get)(o,"ActionClass")}function Ee(c,o,t){ie[c]={ActionClass:o,cfg:t}}function un(c){delete ie[c]}function xn(c,o){var t=new Jt(o);return t.callback=c,t.name="callback",t}function zt(c,o){var t=[];if(c.length){t.push(["M",c[0].x,c[0].y]);for(var r=1,m=c.length;r<m;r+=1){var D=c[r];t.push(["L",D.x,D.y])}o&&t.push(["Z"])}return t}function Yt(c,o){for(var t=[c[0]],r=1,m=c.length;r<m;r=r+2){var D=o.convert({x:c[r],y:c[r+1]});t.push(D.x,D.y)}return t}function Se(c,o){var t=o.isTransposed,r=c[1],m=c[6],D=c[7],et=o.convert({x:m,y:D}),Et=t?0:1;return["A",r,r,0,0,Et,et.x,et.y]}function Wt(c,o,t){var r=t.isTransposed,m=t.startAngle,D=t.endAngle,et=c[0].toLowerCase()==="a"?{x:c[6],y:c[7]}:{x:c[1],y:c[2]},Et={x:o[1],y:o[2]},Lt=[],ne=r?"y":"x",ge=Math.abs(Et[ne]-et[ne])*(D-m),be=Et[ne]>=et[ne]?1:0,Ae=ge>Math.PI?1:0,We=t.convert(Et),an=rn(t,We);if(an>=.5)if(ge===Math.PI*2){var gn={x:(Et.x+et.x)/2,y:(Et.y+et.y)/2},Yn=t.convert(gn);Lt.push(["A",an,an,0,Ae,be,Yn.x,Yn.y]),Lt.push(["A",an,an,0,Ae,be,We.x,We.y])}else Lt.push(["A",an,an,0,Ae,be,We.x,We.y]);return Lt}function ue(c){Object(a.each)(c,function(o,t){var r=o;if(r[0].toLowerCase()==="a"){var m=c[t-1],D=c[t+1];D&&D[0].toLowerCase()==="a"?m&&m[0].toLowerCase()==="l"&&(m[0]="M"):m&&m[0].toLowerCase()==="a"&&D&&D[0].toLowerCase()==="l"&&(D[0]="M")}})}var vn=function(o,t,r,m){var D=[],et,Et,Lt=!!m,ne,ge;if(Lt){ne=[Infinity,Infinity],ge=[-Infinity,-Infinity];for(var be=0,Ae=o.length;be<Ae;be++){var We=o[be];ne=jr.c.min([0,0],ne,We),ge=jr.c.max([0,0],ge,We)}ne=jr.c.min([0,0],ne,m[0]),ge=jr.c.max([0,0],ge,m[1])}for(var be=0,an=o.length;be<an;be++){var We=o[be];if(r)et=o[be?be-1:an-1],Et=o[(be+1)%an];else if(be===0||be===an-1){D.push(We);continue}else et=o[be-1],Et=o[be+1];var gn=[0,0];gn=jr.c.sub(gn,Et,et),gn=jr.c.scale(gn,gn,t);var Yn=jr.c.distance(We,et),Hn=jr.c.distance(We,Et),ir=Yn+Hn;ir!==0&&(Yn/=ir,Hn/=ir);var cr=jr.c.scale([0,0],gn,-Yn),Rr=jr.c.scale([0,0],gn,Hn),zr=jr.c.add([0,0],We,cr),Ur=jr.c.add([0,0],We,Rr);Lt&&(zr=jr.c.max([0,0],zr,ne),zr=jr.c.min([0,0],zr,ge),Ur=jr.c.max([0,0],Ur,ne),Ur=jr.c.min([0,0],Ur,ge)),D.push(zr),D.push(Ur)}return r&&D.push(D.shift()),D};function Dn(c,o,t){for(var r=!!o,m=[],D=0,et=c.length;D<et;D+=2)m.push([c[D],c[D+1]]);for(var Et=vn(m,.4,r,t),Lt=m.length,ne=[],ge,be,Ae,D=0;D<Lt-1;D++)ge=Et[D*2],be=Et[D*2+1],Ae=m[D+1],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]]);return r&&(ge=Et[Lt],be=Et[Lt+1],Ae=m[0],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]])),ne}function zn(c,o){return zt(c,o)}function Gn(c,o,t){var r=[],m=c[0],D=null;if(c.length<=2)return zn(c,o);for(var et=0,Et=c.length;et<Et;et++){var Lt=c[et];(!D||!(D.x===Lt.x&&D.y===Lt.y))&&(r.push(Lt.x),r.push(Lt.y),D=Lt)}var ne=t||[[0,0],[1,1]],ge=Dn(r,o,ne);return ge.unshift(["M",m.x,m.y]),ge}function Ze(c,o){var t=[];return Object(a.each)(o,function(r){var m=r[0];switch(m.toLowerCase()){case"m":case"l":case"c":t.push(Yt(r,c));break;case"a":t.push(Se(r,c));break;case"z":default:t.push(r);break}}),t}function Ce(c,o){var t=[],r,m,D,et;return Object(a.each)(o,function(Et,Lt){var ne=Et[0];switch(ne.toLowerCase()){case"m":case"c":case"q":t.push(Yt(Et,c));break;case"l":r=o[Lt-1],m=Et,D=c.isTransposed,et=D?r[r.length-2]===m[1]:r[r.length-1]===m[2],et?t=t.concat(Wt(r,m,c)):t.push(Yt(Et,c));break;case"a":t.push(Se(Et,c));break;case"z":default:t.push(Et);break}}),ue(t),t}var R=z("LvGN");function yt(c,o){var t=c.event,r=t.target,m=r.getCanvasBBox();return m.width>=o||m.height>=o?m:null}function $t(c,o){var t=c.event,r=t.target,m=r.getCanvasBBox();return m.width>=o||m.height>=o?r.attr("path"):null}function me(c){var o=c.event,t,r=o.target;return r&&(t=r.get("element")),t}function Zt(c){var o=c.event,t=o.target,r;return t&&(r=t.get("delegateObject")),r}function de(c){var o=c.event.gEvent;return!(o&&o.fromShape&&o.toShape&&o.fromShape.get("element")===o.toShape.get("element"))}function he(c){return c&&c.component&&c.component.isList()}function ce(c){return c&&c.component&&c.component.isSlider()}function Me(c){var o=c.event,t=o.target;return t&&t.get("name")==="mask"}function ze(c,o){var t=c.event.target;if(t.get("type")==="path"){var r=$t(c,o);return r?Sn(c.view,r):void 0}var m=yt(c,o);return m?nn(c.view,m):null}function Ve(c,o,t){var r=yt(c,t);if(!r)return null;var m=c.view,D=Ue(m,o,{x:r.x,y:r.y}),et=Ue(m,o,{x:r.maxX,y:r.maxY}),Et={minX:D.x,minY:D.y,maxX:et.x,maxY:et.y};return nn(o,Et)}function ke(c){var o=c.geometries,t=[];return Object(a.each)(o,function(r){var m=r.elements;t=t.concat(m)}),c.views&&c.views.length&&Object(a.each)(c.views,function(r){t=t.concat(ke(r))}),t}function tn(c,o,t){var r=ke(c);return r.filter(function(m){return cn(m,o)===t})}function De(c,o){var t=c.geometries,r=[];return Object(a.each)(t,function(m){var D=m.getElementsBy(function(et){return et.hasState(o)});r=r.concat(D)}),r}function cn(c,o){var t=c.getModel(),r=t.data,m;return Object(a.isArray)(r)?m=r[0][o]:m=r[o],m}function fn(c,o){return!(o.minX>c.maxX||o.maxX<c.minX||o.minY>c.maxY||o.maxY<c.minY)}function nn(c,o){var t=ke(c),r=[];return Object(a.each)(t,function(m){var D=m.shape,et=D.getCanvasBBox();fn(o,et)&&r.push(m)}),r}function dn(c){var o=[];return Object(a.each)(c,function(t){var r=t[0];if(r!=="A")for(var m=1;m<t.length;m=m+2)o.push([t[m],t[m+1]]);else{var D=t.length;o.push([t[D-2],t[D-1]])}}),o}function Sn(c,o){var t=ke(c),r=dn(o),m=t.filter(function(D){var et=D.shape,Et;if(et.get("type")==="path")Et=dn(et.attr("path"));else{var Lt=et.getCanvasBBox();Et=Vn(Lt)}return Object(R.b)(r,Et)});return m}function Pe(c){return c.getComponents().map(function(o){return o.component})}function le(c,o){var t=o.x-c.x,r=o.y-c.y;return Math.sqrt(t*t+r*r)}function Le(c,o){if(c.length<=2)return zn(c,!1);var t=c[0],r=[];Object(a.each)(c,function(D){r.push(D.x),r.push(D.y)});var m=Dn(r,o,null);return m.unshift(["M",t.x,t.y]),m}function Be(c,o){return c.x<=o.x&&c.maxX>=o.x&&c.y<=o.y&&c.maxY>o.y}function en(c){var o=c.parent,t=null;return o&&(t=o.views.filter(function(r){return r!==c})),t}function sn(c,o){var t=c.getCoordinate();return t.invert(o)}function Ue(c,o,t){var r=sn(c,t);return o.getCoordinate().convert(r)}function ln(c,o,t,r){var m=!1;return Object(a.each)(c,function(D){if(D[t]===o[t]&&D[r]===o[r])return m=!0,!1}),m}function mn(c,o){var t=c.getScaleByField(o);return!t&&c.views&&Object(a.each)(c.views,function(r){if(t=mn(r,o),t)return!1}),t}var Wn=function(){function c(o){this.actions=[],this.event=null,this.cacheMap={},this.view=o}return c.prototype.cache=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(o.length===1)return this.cacheMap[o[0]];o.length===2&&(this.cacheMap[o[0]]=o[1])},c.prototype.getAction=function(o){return this.actions.find(function(t){return t.name===o})},c.prototype.addAction=function(o){this.actions.push(o)},c.prototype.removeAction=function(o){var t=this.actions,r=this.actions.indexOf(o);r>=0&&t.splice(r,1)},c.prototype.getCurrentPoint=function(){var o=this.event;if(o)if(o.target instanceof HTMLElement){var t=this.view.getCanvas(),r=t.getPointByClient(o.clientX,o.clientY);return r}else return{x:o.x,y:o.y};return null},c.prototype.getCurrentShape=function(){return Object(a.get)(this.event,["gEvent","shape"])},c.prototype.isInPlot=function(){var o=this.getCurrentPoint();return o?this.view.isPointInPlot(o):!1},c.prototype.isInShape=function(o){var t=this.getCurrentShape();return t?t.get("name")===o:!1},c.prototype.isInComponent=function(o){var t=Pe(this.view),r=this.getCurrentPoint();return r?!!t.find(function(m){var D=m.getBBox();return o?m.get("name")===o&&Be(D,r):Be(D,r)}):!1},c.prototype.destroy=function(){this.view=null,this.event=null,Object(a.each)(this.actions.slice(),function(o){o.destroy()}),this.actions=null,this.cacheMap=null},c}(),An=Wn,In=function(){function c(o,t){this.view=o,this.cfg=t}return c.prototype.init=function(){this.initEvents()},c.prototype.initEvents=function(){},c.prototype.clearEvents=function(){},c.prototype.destroy=function(){this.clearEvents()},c}(),lr=In;function Hr(c,o){var t=c.split(":"),r=t[0],m=o.getAction(r)||se(r,o);if(!m)throw new Error("There is no action named "+r);var D=t[1];return{action:m,methodName:D}}function Gr(c){var o=c.action,t=c.methodName;if(o[t])o[t]();else throw new Error("Action("+o.name+") doesn't have a method called "+t)}var Mr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},oi=function(c){Object(at.b)(o,c);function o(t,r){var m=c.call(this,t,r)||this;return m.callbackCaches={},m.emitCaches={},m.steps=r,m}return o.prototype.init=function(){this.initContext(),c.prototype.init.call(this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},o.prototype.initEvents=function(){var t=this;Object(a.each)(this.steps,function(r,m){Object(a.each)(r,function(D){var et=t.getActionCallback(m,D);et&&t.bindEvent(D.trigger,et)})})},o.prototype.clearEvents=function(){var t=this;Object(a.each)(this.steps,function(r,m){Object(a.each)(r,function(D){var et=t.getActionCallback(m,D);et&&t.offEvent(D.trigger,et)})})},o.prototype.initContext=function(){var t=this.view,r=new An(t);this.context=r;var m=this.steps;Object(a.each)(m,function(D){Object(a.each)(D,function(et){if(Object(a.isFunction)(et.action))et.actionObject={action:xn(et.action,r),methodName:"execute"};else if(Object(a.isString)(et.action))et.actionObject=Hr(et.action,r);else if(Object(a.isArray)(et.action)){var Et=et.action;et.actionObject=[],Object(a.each)(Et,function(Lt){et.actionObject.push(Hr(Lt,r))})}})})},o.prototype.isAllowStep=function(t){var r=this.currentStepName,m=this.steps;if(r===t||t===Mr.SHOW_ENABLE)return!0;if(t===Mr.PROCESSING)return r===Mr.START;if(t===Mr.START)return r!==Mr.PROCESSING;if(t===Mr.END)return r===Mr.PROCESSING||r===Mr.START;if(t===Mr.ROLLBACK){if(m[Mr.END])return r===Mr.END;if(r===Mr.START)return!0}return!1},o.prototype.isAllowExecute=function(t,r){if(this.isAllowStep(t)){var m=this.getKey(t,r);return r.once&&this.emitCaches[m]?!1:r.isEnable?r.isEnable(this.context):!0}return!1},o.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},o.prototype.afterExecute=function(t,r){t!==Mr.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var m=this.getKey(t,r);this.emitCaches[m]=!0},o.prototype.getKey=function(t,r){return t+r.trigger+r.action},o.prototype.getActionCallback=function(t,r){var m=this,D=this.context,et=this.callbackCaches,Et=r.actionObject;if(r.action&&Et){var Lt=this.getKey(t,r);if(!et[Lt]){var ne=function(be){D.event=be,m.isAllowExecute(t,r)?(Object(a.isArray)(Et)?Object(a.each)(Et,function(Ae){D.event=be,Gr(Ae)}):(D.event=be,Gr(Et)),m.afterExecute(t,r),r.callback&&(D.event=be,r.callback(D))):D.event=null};r.debounce?et[Lt]=Object(a.debounce)(ne,r.debounce.wait,r.debounce.immediate):r.throttle?et[Lt]=Object(a.throttle)(ne,r.throttle.wait,{leading:r.throttle.leading,trailing:r.throttle.trailing}):et[Lt]=ne}return et[Lt]}return null},o.prototype.bindEvent=function(t,r){var m=t.split(":");m[0]==="window"?window.addEventListener(m[1],r):m[0]==="document"?document.addEventListener(m[1],r):this.view.on(t,r)},o.prototype.offEvent=function(t,r){var m=t.split(":");m[0]==="window"?window.removeEventListener(m[1],r):m[0]==="document"?document.removeEventListener(m[1],r):this.view.off(t,r)},o}(lr),ai=oi,Zr={};function Xi(c){return Zr[Object(a.lowerCase)(c)]}function $i(c,o){Zr[Object(a.lowerCase)(c)]=o}function Go(c,o,t){var r=Xi(c);if(!r)return null;if(Object(a.isPlainObject)(r)){var m=Object(a.mix)(Object(a.clone)(r),t);return new ai(o,m)}else{var D=r;return new D(o,t)}}function _o(c){return{title:{autoRotate:!0,position:"center",spacing:c.axisTitleSpacing,style:{fill:c.axisTitleTextFillColor,fontSize:c.axisTitleTextFontSize,lineHeight:c.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:c.axisLabelOffset,style:{fill:c.axisLabelFillColor,fontSize:c.axisLabelFontSize,lineHeight:c.axisLabelLineHeight,fontFamily:c.fontFamily}},line:{style:{lineWidth:c.axisLineBorder,stroke:c.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:c.axisGridBorderColor,lineWidth:c.axisGridBorder,lineDash:c.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:c.axisTickLineBorder,stroke:c.axisTickLineBorderColor},alignTick:!0,length:c.axisTickLineLength},subTickLine:null,animate:!0}}function Uo(c){return{title:null,marker:{symbol:"circle",spacing:c.legendMarkerSpacing,style:{r:c.legendCircleMarkerSize,fill:c.legendMarkerColor}},itemName:{spacing:5,style:{fill:c.legendItemNameFillColor,fontFamily:c.fontFamily,fontSize:c.legendItemNameFontSize,lineHeight:c.legendItemNameLineHeight,fontWeight:c.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:200,itemSpacing:c.legendItemSpacing,itemMarginBottom:c.legendItemMarginBottom,padding:c.legendPadding}}function ta(c){var o,t={point:{default:{fill:c.pointFillColor,r:c.pointSize,stroke:c.pointBorderColor,lineWidth:c.pointBorder,fillOpacity:c.pointFillOpacity},active:{stroke:c.pointActiveBorderColor,lineWidth:c.pointActiveBorder},selected:{stroke:c.pointSelectedBorderColor,lineWidth:c.pointSelectedBorder},inactive:{fillOpacity:c.pointInactiveFillOpacity,strokeOpacity:c.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:c.hollowPointFillColor,lineWidth:c.hollowPointBorder,stroke:c.hollowPointBorderColor,strokeOpacity:c.hollowPointBorderOpacity,r:c.hollowPointSize},active:{stroke:c.hollowPointActiveBorderColor,strokeOpacity:c.hollowPointActiveBorderOpacity},selected:{lineWidth:c.hollowPointSelectedBorder,stroke:c.hollowPointSelectedBorderColor,strokeOpacity:c.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:c.hollowPointInactiveBorderOpacity}},area:{default:{fill:c.areaFillColor,fillOpacity:c.areaFillOpacity,stroke:null},active:{fillOpacity:c.areaActiveFillOpacity},selected:{fillOpacity:c.areaSelectedFillOpacity},inactive:{fillOpacity:c.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:c.hollowAreaBorderColor,lineWidth:c.hollowAreaBorder,strokeOpacity:c.hollowAreaBorderOpacity},active:{fill:null,lineWidth:c.hollowAreaActiveBorder},selected:{fill:null,lineWidth:c.hollowAreaSelectedBorder},inactive:{strokeOpacity:c.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:c.intervalFillColor,fillOpacity:c.intervalFillOpacity},active:{stroke:c.intervalActiveBorderColor,lineWidth:c.intervalActiveBorder},selected:{stroke:c.intervalSelectedBorderColor,lineWidth:c.intervalSelectedBorder},inactive:{fillOpacity:c.intervalInactiveFillOpacity,strokeOpacity:c.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:c.hollowIntervalFillColor,stroke:c.hollowIntervalBorderColor,lineWidth:c.hollowIntervalBorder,strokeOpacity:c.hollowIntervalBorderOpacity},active:{stroke:c.hollowIntervalActiveBorderColor,lineWidth:c.hollowIntervalActiveBorder,strokeOpacity:c.hollowIntervalActiveBorderOpacity},selected:{stroke:c.hollowIntervalSelectedBorderColor,lineWidth:c.hollowIntervalSelectedBorder,strokeOpacity:c.hollowIntervalSelectedBorderOpacity},inactive:{stroke:c.hollowIntervalInactiveBorderColor,lineWidth:c.hollowIntervalInactiveBorder,strokeOpacity:c.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:c.lineBorderColor,lineWidth:c.lineBorder,strokeOpacity:c.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:c.lineActiveBorder},selected:{lineWidth:c.lineSelectedBorder},inactive:{strokeOpacity:c.lineInactiveBorderOpacity}}},r=_o(c),m=Uo(c);return{background:c.backgroundColor,defaultColor:c.brandColor,padding:"auto",fontFamily:c.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:c.paletteQualitative10,colors20:c.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(et){var Et=et.geometry.coordinate;if(Et.isPolar&&Et.isTransposed){var Lt=ao(et.getModel(),Et),ne=Lt.startAngle,ge=Lt.endAngle,be=(ne+ge)/2,Ae=7.5,We=Ae*Math.cos(be),an=Ae*Math.sin(be);return{matrix:jr.a.transform(null,[["t",We,an]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{common:r,top:Object(a.deepMix)({},r,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:Object(a.deepMix)({},r,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:Object(a.deepMix)({},r,{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),right:Object(a.deepMix)({},r,{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),circle:Object(a.deepMix)({},r,{title:null,grid:Object(a.deepMix)({},r.grid,{line:{type:"line"}})}),radius:Object(a.deepMix)({},r,{title:null,grid:Object(a.deepMix)({},r.grid,{line:{type:"circle"}})})},legend:{common:m,right:Object(a.deepMix)({},m,{layout:"vertical",padding:c.legendVerticalPadding}),left:Object(a.deepMix)({},m,{layout:"vertical",padding:c.legendVerticalPadding}),top:Object(a.deepMix)({},m,{layout:"horizontal",padding:c.legendHorizontalPadding}),bottom:Object(a.deepMix)({},m,{layout:"horizontal",padding:c.legendHorizontalPadding}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:c.sliderRailHeight,defaultLength:c.sliderRailWidth,style:{fill:c.sliderRailFillColor,stroke:c.sliderRailBorderColor,lineWidth:c.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:c.sliderLabelTextFillColor,fontSize:c.sliderLabelTextFontSize,lineHeight:c.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},handler:{size:c.sliderHandlerWidth,style:{fill:c.sliderHandlerFillColor,stroke:c.sliderHandlerBorderColor}},slidable:!0,padding:m.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:c.tooltipCrosshairsBorderColor,lineWidth:c.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(o={},o[""+Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:c.tooltipContainerFillColor,opacity:c.tooltipContainerFillOpacity,boxShadow:c.tooltipContainerShadow,borderRadius:c.tooltipContainerBorderRadius+"px",color:c.tooltipTextFillColor,fontSize:c.tooltipTextFontSize+"px",fontFamily:c.fontFamily,lineHeight:c.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},o[""+Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},o[""+Qr.TOOLTIP_CSS_CONST.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},o[""+Qr.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},o[""+Qr.TOOLTIP_CSS_CONST.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},o[""+Qr.TOOLTIP_CSS_CONST.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},o)},annotation:{arc:{style:{stroke:c.annotationArcBorderColor,lineWidth:c.annotationArcBorder},animate:!0},line:{style:{stroke:c.annotationLineBorderColor,lineDash:c.annotationLineDash,lineWidth:c.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textAlign:"start",fontFamily:c.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:c.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:c.annotationRegionBorder,stroke:c.annotationRegionBorderColor,fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:c.brandColor,lineWidth:2}},line:{style:{stroke:c.annotationLineBorderColor,lineWidth:c.annotationLineBorder},length:c.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8]}},scrollbar:{common:{padding:[8,8,8,8]}}},labels:{offset:12,style:{fill:c.labelFillColor,fontSize:c.labelFontSize,fontFamily:c.fontFamily,stroke:c.labelBorderColor,lineWidth:c.labelBorder},fillColorDark:c.labelFillColorDark,fillColorLight:c.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:c.innerLabelFillColor,fontSize:c.innerLabelFontSize,fontFamily:c.fontFamily,stroke:c.innerLabelBorderColor,lineWidth:c.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:c.overflowLabelFillColor,fontSize:c.overflowLabelFontSize,fontFamily:c.fontFamily,stroke:c.overflowLabelBorderColor,lineWidth:c.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:c.labelLineBorder}},autoRotate:!0}}}var li={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Oo={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},qi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],zo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Yo=function(o){o===void 0&&(o={});var t=o.backgroundColor,r=t===void 0?"transparent":t,m=o.paletteQualitative10,D=m===void 0?qi:m,et=o.paletteQualitative20,Et=et===void 0?zo:et,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Hn=Yn===void 0?D[0]:Yn;return{backgroundColor:r,brandColor:Hn,paletteQualitative10:D,paletteQualitative20:Et,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:li[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:li[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:li[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:li[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:li[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:li[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:li[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Hn,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:li[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:li[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:li[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:li[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:li[25],annotationArcBorderColor:li[15],annotationArcBorder:1,annotationLineBorderColor:li[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:li[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:li[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:li[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:li[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:li[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Oo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:li[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Oo[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:li[25],pointFillColor:Hn,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Oo[100],pointBorderOpacity:1,pointActiveBorderColor:li[100],pointSelectedBorder:2,pointSelectedBorderColor:li[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Hn,hollowPointBorderOpacity:.95,hollowPointFillColor:Oo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:li[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:li[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Hn,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Hn,areaFillOpacity:.25,areaActiveFillColor:Hn,areaActiveFillOpacity:.5,areaSelectedFillColor:Hn,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Hn,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:li[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:li[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Hn,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:li[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:li[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Hn,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Oo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:li[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:li[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Xo=Yo();function ua(c){var o=c.styleSheet,t=o===void 0?{}:o,r=Object(at.c)(c,["styleSheet"]),m=Yo(t);return Object(a.deepMix)({},ta(m),r)}var di=ua({}),ea={default:di};function xi(c){return Object(a.get)(ea,Object(a.lowerCase)(c),ea.default)}function ks(c,o){ea[Object(a.lowerCase)(c)]=ua(o)}function Ri(c,o,t){var r=t.translate(c),m=t.translate(o);return Object(a.isNumberEqual)(r,m)}function Rs(c,o){var t=o.coordinate,r=o.getXScale(),m=r.range,D=m[m.length-1],et=m[0],Et=t.invert(c),Lt=Et.x;return t.isPolar&&Lt>(1+D)/2&&(Lt=et),r.translate(r.invert(Lt))}function Mi(c,o,t){var r=t.coordinate,m=t.getYScale(),D=m.field,et=r.invert(o),Et=m.invert(et.y),Lt=Object(a.find)(c,function(ne){var ge=ne[y];return ge[D][0]<=Et&&ge[D][1]>=Et});return Lt||c[c.length-1]}var hu=Object(a.memoize)(function(c){if(c.isCategory)return 1;for(var o=c.values,t=o.length,r=c.translate(o[0]),m=r,D=0;D<t;D++){var et=o[D],Et=c.translate(et);Et<r&&(r=Et),Et>m&&(m=Et)}return(m-r)/(t-1)});function ui(c,o,t){var r=o.getAttribute("position"),m=r.getFields(),D=o.scales,et=Object(a.isFunction)(t)||!t?m[0]:t,Et=D[et],Lt=Et?Et.getText(c[et]):c[et]||et;return Object(a.isFunction)(t)?t(Lt,c):Lt}function du(c){var o=Object(a.values)(c.attributes);return Object(a.filter)(o,function(t){return Object(a.contains)(I,t.type)})}function eo(c){for(var o=du(c),t,r=0,m=o;r<m.length;r++){var D=m[r],et=D.getScale(D.type);if(et&&et.isLinear){t=et;break}}var Et=c.getXScale(),Lt=c.getYScale();return t||Lt||Et}function vu(c,o){var t=o.field,r=c[t];if(Object(a.isArray)(r)){var m=r.map(function(D){return o.getText(D)});return m.join("-")}return o.getText(r)}function na(c,o){var t,r=o.getGroupScales();if(r.length&&(t=r[0]),t){var m=t.field;return t.getText(c[m])}var D=eo(o);return xr(D)}function ra(c,o,t){if(o.length===0)return null;var r=t.type,m=t.getXScale(),D=t.getYScale(),et=m.field,Et=D.field,Lt=null;if(r==="heatmap"||r==="point"){for(var ne=t.coordinate,ge=ne.invert(c),be=m.invert(ge.x),Ae=D.invert(ge.y),We=Infinity,an=0;an<o.length;an++){var gn=o[an],Yn=gn[y],Hn=Math.pow(Yn[et]-be,2)+Math.pow(Yn[Et]-Ae,2);Hn<We&&(We=Hn,Lt=gn)}return Lt}var ir=o[0],cr=o[o.length-1],Rr=Rs(c,t),zr=ir[y][et],Ur=ir[y][Et],ki=cr[y][et],Ai=D.isLinear&&Object(a.isArray)(Ur);if(Object(a.isArray)(zr)){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(m.translate(Yn[et][0])<=Rr&&m.translate(Yn[et][1])>=Rr)if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{var Ki=void 0;if(!m.isLinear&&m.type!=="timeCat"){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(Ri(Yn[et],Rr,m))if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}else m.translate(Yn[et])<=Rr&&(cr=mi,Ki=o[an+1])}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{if((Rr>m.translate(ki)||Rr<m.translate(zr))&&(Rr>m.max||Rr<m.min))return null;for(var vo=0,po=o.length-1,yo=void 0;vo<=po;){yo=Math.floor((vo+po)/2);var wo=o[yo][y][et];if(Ri(wo,Rr,m))return o[yo];m.translate(wo)<=m.translate(Rr)?(vo=yo+1,cr=o[yo],Ki=o[yo+1]):(po===0&&(cr=o[0]),po=yo-1)}}cr&&Ki&&Math.abs(m.translate(cr[y][et])-Rr)>Math.abs(m.translate(Ki[y][et])-Rr)&&(cr=Ki)}var Q=hu(t.getXScale());return!Lt&&Math.abs(m.translate(cr[y][et])-Rr)<=Q/2&&(Lt=cr),Lt}function ia(c,o,t,r){t===void 0&&(t=""),r===void 0&&(r=!1);var m=c[y],D=ui(m,o,t),et=o.tooltipOption,Et=o.theme.defaultColor,Lt=[],ne,ge;function be(ki,Ai){if(r||!Object(a.isNil)(Ai)&&Ai!==""){var mi={title:D,data:m,mappingData:c,name:ki,value:Ai,color:c.color||Et,marker:!0};Lt.push(mi)}}if(Object(a.isObject)(et)){var Ae=et.fields,We=et.callback;if(We){var an=Ae.map(function(ki){return c[y][ki]}),gn=We.apply(void 0,an),Yn=Object(at.a)({data:c[y],mappingData:c,title:D,color:c.color||Et,marker:!0},gn);Lt.push(Yn)}else for(var Hn=o.scales,ir=0,cr=Ae;ir<cr.length;ir++){var Rr=cr[ir];if(!Object(a.isNil)(m[Rr])){var zr=Hn[Rr];ne=xr(zr),ge=zr.getText(m[Rr]),be(ne,ge)}}}else{var Ur=eo(o);ge=vu(m,Ur),ne=na(m,o),be(ne,ge)}return Lt}function tc(c){return!Object(a.isNumber)(c)&&!Object(a.isArray)(c)}function ya(c){c===void 0&&(c=0);var o=Object(a.isArray)(c)?c:[c];switch(o.length){case 0:o=[0,0,0,0];break;case 1:o=new Array(4).fill(o[0]);break;case 2:o=Object(at.d)(o,o);break;case 3:o=Object(at.d)(o,[o[1]]);break;default:o=o.slice(0,4);break}return o}var _r={};function yr(c,o){_r[c]=o}function Xc(c){delete _r[c]}function pu(){return Object.keys(_r)}function ds(c){return _r[c]}var ec=function(){function c(o){this.option=this.wrapperOption(o)}return c.prototype.update=function(o){return this.option=this.wrapperOption(o),this},c.prototype.hasAction=function(o){var t=this.option.actions;return Object(a.some)(t,function(r){return r[0]===o})},c.prototype.create=function(o,t){var r=this.option,m=r.type,D=r.cfg,et=m==="theta",Et=Object(at.a)({start:o,end:t},D),Lt=$r(et?"polar":m);return this.coordinate=new Lt(Et),this.coordinate.type=m,et&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},c.prototype.adjust=function(o,t){return this.coordinate.update({start:o,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},c.prototype.rotate=function(o){return this.option.actions.push(["rotate",o]),this},c.prototype.reflect=function(o){return this.option.actions.push(["reflect",o]),this},c.prototype.scale=function(o,t){return this.option.actions.push(["scale",o,t]),this},c.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},c.prototype.getOption=function(){return this.option},c.prototype.getCoordinate=function(){return this.coordinate},c.prototype.wrapperOption=function(o){return Object(at.a)({type:"rect",actions:[],cfg:{}},o)},c.prototype.execActions=function(o){var t=this,r=this.option.actions;Object(a.each)(r,function(m){var D,et=m[0],Et=m.slice(1),Lt=Object(a.isNil)(o)?!0:o.includes(et);Lt&&(D=t.coordinate)[et].apply(D,Et)})},c}(),Qo=ec,nc=function(){function c(o,t,r){this.view=o,this.gEvent=t,this.data=r,this.type=t.type}return c.fromData=function(o,t,r){return new c(o,new ht.Event(t,{}),r)},Object.defineProperty(c.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.clone=function(){return new c(this.view,this.gEvent,this.data)},c}(),Vo=nc;function Aa(c){var o=c.getController("axis"),t=c.getController("legend"),r=c.getController("annotation"),m=c.getController("slider"),D=c.getController("scrollbar");[o,m,D,t,r].forEach(function(et){et&&et.layout()})}var Co=function(){function c(){this.scales=new Map,this.syncScales=new Map}return c.prototype.createScale=function(o,t,r,m){var D=r,et=this.getScaleMeta(m);if(t.length===0&&et){var Et=et.scale,Lt={type:Et.type};Et.isCategory&&(Lt.values=Et.values),D=Object(a.deepMix)(Lt,et.scaleDef,r)}var ne=Ar(o,t,D);return this.cacheScale(ne,r,m),ne},c.prototype.sync=function(o,t){var r=this;this.syncScales.forEach(function(m,D){var et=Number.MAX_SAFE_INTEGER,Et=Number.MIN_SAFE_INTEGER,Lt=[];Object(a.each)(m,function(ne){var ge=r.getScale(ne);Et=Object(a.isNumber)(ge.max)?Math.max(Et,ge.max):Et,et=Object(a.isNumber)(ge.min)?Math.min(et,ge.min):et,Object(a.each)(ge.values,function(be){Lt.includes(be)||Lt.push(be)})}),Object(a.each)(m,function(ne){var ge=r.getScale(ne);if(ge.isContinuous)ge.change({min:et,max:Et,values:Lt});else if(ge.isCategory){var be=ge.range,Ae=r.getScaleMeta(ne);Lt&&!Object(a.get)(Ae,["scaleDef","range"])&&(be=Er(Object(a.deepMix)({},ge,{values:Lt}),o,t)),ge.change({values:Lt,range:be})}})})},c.prototype.cacheScale=function(o,t,r){var m=this.getScaleMeta(r);m&&m.scale.type===o.type?(wr(m.scale,o),m.scaleDef=t):(m={key:r,scale:o,scaleDef:t},this.scales.set(r,m));var D=this.getSyncKey(m);if(m.syncKey=D,this.removeFromSyncScales(r),D){var et=this.syncScales.get(D);et||(et=[],this.syncScales.set(D,et)),et.push(r)}},c.prototype.getScale=function(o){var t=this.getScaleMeta(o);if(!t){var r=Object(a.last)(o.split("-")),m=this.syncScales.get(r);m&&m.length&&(t=this.getScaleMeta(m[0]))}return t&&t.scale},c.prototype.deleteScale=function(o){var t=this.getScaleMeta(o);if(t){var r=t.syncKey,m=this.syncScales.get(r);if(m&&m.length){var D=m.indexOf(o);D!==-1&&m.splice(D,1)}}this.scales.delete(o)},c.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},c.prototype.removeFromSyncScales=function(o){var t=this;this.syncScales.forEach(function(r,m){var D=r.indexOf(o);if(D!==-1)return r.splice(D,1),r.length===0&&t.syncScales.delete(m),!1})},c.prototype.getSyncKey=function(o){var t=o.scale,r=o.scaleDef,m=t.field,D=Object(a.get)(r,["sync"]);return D===!0?m:D===!1?void 0:D},c.prototype.getScaleMeta=function(o){return this.scales.get(o)},c}(),vs=function(){function c(o,t,r,m){o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),m===void 0&&(m=0),this.top=o,this.right=t,this.bottom=r,this.left=m}return c.instance=function(o,t,r,m){return o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),m===void 0&&(m=0),new c(o,t,r,m)},c.prototype.max=function(o){var t=o[0],r=o[1],m=o[2],D=o[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,m),this.left=Math.max(this.left,D),this},c.prototype.shrink=function(o){var t=o[0],r=o[1],m=o[2],D=o[3];return this.top+=t,this.right+=r,this.bottom+=m,this.left+=D,this},c.prototype.inc=function(o,t){var r=o.width,m=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:this.top+=m;break;case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:this.right+=r;break;case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:this.bottom+=m;break;case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:this.left+=r;break;default:break}return this},c.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},c.prototype.clone=function(){return new(c.bind.apply(c,Object(at.d)([void 0],this.getPadding())))},c}();function Ns(c){var o=c.padding;if(!tc(o))return new(vs.bind.apply(vs,Object(at.d)([void 0],ya(o))));var t=c.viewBBox,r=new vs,m=[],D=[],et=[];return Object(a.each)(c.getComponents(),function(Et){var Lt=Et.type;Lt===i.AXIS?m.push(Et):[i.LEGEND,i.SLIDER,i.SCROLLBAR].includes(Lt)?D.push(Et):Lt!==i.GRID&&Lt!==i.TOOLTIP&&et.push(Et)}),Object(a.each)(m,function(Et){var Lt=Et.component,ne=Lt.getLayoutBBox(),ge=new Qe(ne.x,ne.y,ne.width,ne.height),be=ge.exceed(t);r.max(be)}),Object(a.each)(D,function(Et){var Lt=Et.component,ne=Et.direction,ge=Lt.getLayoutBBox(),be=Lt.get("padding"),Ae=new Qe(ge.x,ge.y,ge.width,ge.height).expand(be);r.inc(Ae,ne)}),Object(a.each)(et,function(Et){var Lt=Et.component,ne=Et.direction,ge=Lt.getLayoutBBox(),be=new Qe(ge.x,ge.y,ge.width,ge.height);r.inc(be,ne)}),r}function ts(c,o,t){var r=t.instance();o.forEach(function(m){m.autoPadding=r.max(m.autoPadding.getPadding())})}var Ls=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,{visible:t.visible})||this;r.views=[],r.geometries=[],r.controllers=[],r.interactions={},r.limitInPlot=!1,r.options={data:[],animate:!0},r.usedControllers=pu(),r.scalePool=new Co,r.layoutFunc=Aa,r.isPreMouseInPlot=!1,r.isDataChanged=!1,r.isCoordinateChanged=!1,r.createdScaleKeys=new Map,r.onCanvasEvent=function(cr){var Rr=cr.name;if(!Rr.includes(":")){var zr=r.createViewEvent(cr);r.doPlotEvent(zr),r.emit(Rr,zr)}},r.onDelegateEvents=function(cr){var Rr=cr.name;if(!!Rr.includes(":")){var zr=r.createViewEvent(cr);r.emit(Rr,zr)}};var m=t.id,D=m===void 0?Object(a.uniqueId)("view"):m,et=t.parent,Et=t.canvas,Lt=t.backgroundGroup,ne=t.middleGroup,ge=t.foregroundGroup,be=t.region,Ae=be===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:be,We=t.padding,an=t.appendPadding,gn=t.theme,Yn=t.options,Hn=t.limitInPlot,ir=t.syncViewPadding;return r.parent=et,r.canvas=Et,r.backgroundGroup=Lt,r.middleGroup=ne,r.foregroundGroup=ge,r.region=Ae,r.padding=We,r.appendPadding=an,r.options=Object(at.a)(Object(at.a)({},r.options),Yn),r.limitInPlot=Hn,r.id=D,r.syncViewPadding=ir,r.themeObject=Object(a.isObject)(gn)?Object(a.deepMix)({},xi("default"),ua(gn)):xi(gn),r.init(),r}return o.prototype.setLayout=function(t){this.layoutFunc=t},o.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},o.prototype.render=function(t){t===void 0&&(t=!1),this.emit(b.BEFORE_RENDER),this.paint(t),this.emit(b.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this;this.emit(b.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var r=this.geometries,m=0;m<r.length;m++)r[m].clear(),r[m].container.remove(!0);this.geometries=[];for(var D=this.controllers,m=0;m<D.length;m++)D[m].name==="annotation"?D[m].clear(!0):D[m].clear();this.createdScaleKeys.forEach(function(Et,Lt){t.getRootView().scalePool.deleteScale(Lt)}),this.createdScaleKeys.clear();for(var et=this.views,m=0;m<et.length;m++)et[m].clear();this.emit(b.AFTER_CLEAR)},o.prototype.destroy=function(){this.emit(b.BEFORE_DESTROY);var t=this.interactions;Object(a.each)(t,function(Et){Et&&Et.destroy()}),this.clear();for(var r=this.controllers,m=0,D=r.length;m<D;m++){var et=r[m];et.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var r=this.geometries,m=0,D=r.length;m<D;m++){var et=r[m];et.changeVisible(t)}for(var Et=this.controllers,m=0,D=Et.length;m<D;m++){var Lt=Et[m];Lt.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},o.prototype.data=function(t){return Object(a.set)(this.options,"data",t),this.isDataChanged=!0,this},o.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},o.prototype.filter=function(t,r){return Object(a.isFunction)(r)?(Object(a.set)(this.options,["filters",t],r),this):(!r&&Object(a.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},o.prototype.axis=function(t,r){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["axes"],t):Object(a.set)(this.options,["axes",t],r),this},o.prototype.legend=function(t,r){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["legends"],t):Object(a.isString)(t)?Object(a.set)(this.options,["legends",t],r):Object(a.set)(this.options,["legends"],t),this},o.prototype.scale=function(t,r){var m=this;return Object(a.isString)(t)?Object(a.set)(this.options,["scales",t],r):Object(a.isObject)(t)&&Object(a.each)(t,function(D,et){Object(a.set)(m.options,["scales",et],D)}),this},o.prototype.tooltip=function(t){return Object(a.set)(this.options,"tooltip",t),this},o.prototype.annotation=function(){return this.getController("annotation")},o.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},o.prototype.coordinate=function(t,r){return Object(a.isString)(t)?Object(a.set)(this.options,"coordinate",{type:t,cfg:r}):Object(a.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},o.prototype.coord=function(t,r){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,r)},o.prototype.facet=function(t,r){this.facetInstance&&this.facetInstance.destroy();var m=F(t);if(!m)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new m(this,Object(at.a)(Object(at.a)({},r),{type:t})),this},o.prototype.animate=function(t){return Object(a.set)(this.options,"animate",t),this},o.prototype.updateOptions=function(t){return this.clear(),Object(a.mix)(this.options,t),this.views.forEach(function(r){return r.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},o.prototype.option=function(t,r){if(o.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return Object(a.set)(this.options,t,r),this},o.prototype.theme=function(t){return this.themeObject=Object(a.isObject)(t)?Object(a.deepMix)({},this.themeObject,ua(t)):xi(t),this},o.prototype.interaction=function(t,r){var m=this.interactions[t];m&&m.destroy();var D=Go(t,this,r);return D&&(D.init(),this.interactions[t]=D),this},o.prototype.removeInteraction=function(t){var r=this.interactions[t];r&&(r.destroy(),this.interactions[t]=void 0)},o.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(b.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var r=this.views,m=0,D=r.length;m<D;m++){var et=r[m];et.changeData(t)}this.emit(b.AFTER_CHANGE_DATA)},o.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var r={data:this.options.data,scales:Object(a.clone)(this.options.scales),axes:Object(a.clone)(this.options.axes),coordinate:Object(a.clone)(this.coordinateController.getOption()),tooltip:Object(a.clone)(this.options.tooltip),legends:Object(a.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},m=new o(Object(at.a)(Object(at.a)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:v.BG}),middleGroup:this.middleGroup.addGroup({zIndex:v.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:v.FORE}),theme:this.themeObject,padding:this.padding},t),{options:Object(at.a)(Object(at.a)({},r),Object(a.get)(t,"options",{}))}));return this.views.push(m),m},o.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},o.prototype.removeView=function(t){var r=Object(a.remove)(this.views,function(m){return m===t})[0];return r&&r.destroy(),r},o.prototype.getCoordinate=function(){return this.coordinateInstance},o.prototype.getTheme=function(){return this.themeObject},o.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},o.prototype.getYScales=function(){var t={};return this.geometries.map(function(r){var m=r.getYScale(),D=m.field;if(!t[D])return t[D]=!0,m})},o.prototype.getScalesByDim=function(t){for(var r=this.geometries,m={},D=0,et=r.length;D<et;D++){var Et=r[D],Lt=t==="x"?Et.getXScale():Et.getYScale();Lt&&!m[Lt.field]&&(m[Lt.field]=Lt)}return m},o.prototype.getScaleByField=function(t,r){var m=r||this.getScaleKey(t);return this.getRootView().scalePool.getScale(m)},o.prototype.getOptions=function(){return this.options},o.prototype.getData=function(){return this.filteredData},o.prototype.getLayer=function(t){return t===A.BG?this.backgroundGroup:t===A.MID?this.middleGroup:t===A.FORE?this.foregroundGroup:this.foregroundGroup},o.prototype.isPointInPlot=function(t){return on(this.getCoordinate(),t)},o.prototype.getLegendAttributes=function(){return Object(a.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},o.prototype.getGroupScales=function(){var t=this.geometries.map(function(r){return r.getGroupScales()});return Oe(Object(a.flatten)(t))},o.prototype.getCanvas=function(){return this.getRootView().canvas},o.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},o.prototype.getXY=function(t){var r=this.getCoordinate(),m=this.getScalesByDim("x"),D=this.getScalesByDim("y"),et,Et;if(Object(a.each)(t,function(Lt,ne){m[ne]&&(et=m[ne].scale(Lt)),D[ne]&&(Et=D[ne].scale(Lt))}),!Object(a.isNil)(et)&&!Object(a.isNil)(Et))return r.convert({x:et,y:Et})},o.prototype.getController=function(t){return Object(a.find)(this.controllers,function(r){return r.name===t})},o.prototype.showTooltip=function(t){var r=this.getController("tooltip");return r&&r.showTooltip(t),this},o.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},o.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},o.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},o.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},o.prototype.getTooltipItems=function(t){var r=this.getController("tooltip");return r?r.getTooltipItems(t):[]},o.prototype.getSnapRecords=function(t){for(var r=this.geometries,m=[],D=0,et=r.length;D<et;D++){var Et=r[D],Lt=Et.dataArray;Et.sort(Lt);for(var ne=void 0,ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ra(t,Ae,Et),ne&&m.push(ne)}}for(var We=this.views,D=0,et=We.length;D<et;D++){var an=We[D],gn=an.getSnapRecords(t);m=m.concat(gn)}return m},o.prototype.getComponents=function(){for(var t=[],r=this.controllers,m=0,D=r.length;m<D;m++){var et=r[m];t=t.concat(et.getComponents())}return t},o.prototype.filterData=function(t){var r=this.options.filters;return Object(a.size)(r)===0?t:Object(a.filter)(t,function(m,D){var et=Object.keys(r);return et.every(function(Et){var Lt=r[Et];return Lt(m[Et],m,D)})})},o.prototype.filterFieldData=function(t,r){var m=this.options.filters,D=Object(a.get)(m,t);return Object(a.isUndefined)(D)?r:r.filter(function(et,Et){return D(et[t],et,Et)})},o.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),r=t.start,m=t.end,D=this.coordinateBBox.bl,et=this.coordinateBBox.tr;if(Object(a.isEqual)(r,D)&&Object(a.isEqual)(m,et)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(D,et)},o.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(b.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(b.AFTER_PAINT),this.isDataChanged=!1},o.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=Object(a.get)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var r=this.viewBBox,m=r.x,D=r.y,et=r.width,Et=r.height;this.backgroundStyleRectShape.attr({fill:t,x:m,y:D,width:et,height:Et})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},o.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Ns(this).shrink(ya(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var r=this.views,m=0,D=r.length;m<D;m++){var et=r[m];et.renderPaddingRecursive(t)}},o.prototype.renderLayoutRecursive=function(t){var r=this.syncViewPadding===!0?ts:Object(a.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;r&&(r(this,this.views,vs),this.views.forEach(function(Lt){Lt.coordinateBBox=Lt.viewBBox.shrink(Lt.autoPadding.getPadding()),Lt.adjustCoordinate()})),this.doLayout();for(var m=this.views,D=0,et=m.length;D<et;D++){var Et=m[D];Et.renderLayoutRecursive(t)}},o.prototype.renderPaintRecursive=function(t){var r=this.middleGroup;if(this.limitInPlot){var m=vr(this.coordinateInstance),D=m.type,et=m.attrs;r.setClip({type:D,attrs:et})}else r.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var Et=this.views,Lt=0,ne=Et.length;Lt<ne;Lt++){var ge=Et[Lt];ge.renderPaintRecursive(t)}},o.prototype.createScale=function(t,r,m,D){var et=Object(a.get)(this.options.scales,[t]),Et=Object(at.a)(Object(at.a)({},et),m);return this.parent?this.parent.createScale(t,r,Et,D):this.scalePool.createScale(t,r,Et,D)},o.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var r=this.views,m=0,D=r.length;m<D;m++){var et=r[m];et.renderDataRecursive(t)}},o.prototype.calculateViewBBox=function(){var t,r,m,D;if(this.parent){var et=this.parent.coordinateBBox;t=et.x,r=et.y,m=et.width,D=et.height}else t=0,r=0,m=this.canvas.get("width"),D=this.canvas.get("height");var Et=this.region,Lt=Et.start,ne=Et.end,ge=new Qe(t+m*Lt.x,r+D*Lt.y,m*(ne.x-Lt.x),D*(ne.y-Lt.y));(!this.viewBBox||!this.viewBBox.isEqual(ge))&&(this.viewBBox=new Qe(t+m*Lt.x,r+D*Lt.y,m*(ne.x-Lt.x),D*(ne.y-Lt.y))),this.coordinateBBox=this.viewBBox},o.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},o.prototype.initComponentController=function(){for(var t=this.usedControllers,r=0,m=t.length;r<m;r++){var D=t[r],et=ds(D);et&&this.controllers.push(new et(this))}},o.prototype.createViewEvent=function(t){var r=t.shape,m=t.name,D=r?r.get("origin"):null,et=new Vo(this,t,D);return et.type=m,et},o.prototype.doPlotEvent=function(t){var r=t.type,m=t.x,D=t.y,et={x:m,y:D},Et=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(Et.includes(r)){var Lt=this.isPointInPlot(et);if(Lt){var ne="plot:"+r;t.type=ne,this.emit(ne,t),(r==="mouseleave"||r==="touchend")&&(this.isPreMouseInPlot=!1)}r==="mousemove"||r==="touchmove"?(this.isPreMouseInPlot&&!Lt?(r==="mousemove"&&(t.type=f.MOUSE_LEAVE,this.emit(f.MOUSE_LEAVE,t)),t.type=f.LEAVE,this.emit(f.LEAVE,t)):!this.isPreMouseInPlot&&Lt&&(r==="mousemove"&&(t.type=f.MOUSE_ENTER,this.emit(f.MOUSE_ENTER,t)),t.type=f.ENTER,this.emit(f.ENTER,t)),this.isPreMouseInPlot=Lt):(r==="mouseleave"||r==="touchend")&&this.isPreMouseInPlot&&(r==="mouseleave"&&(t.type=f.MOUSE_LEAVE,this.emit(f.MOUSE_LEAVE,t)),t.type=f.LEAVE,this.emit(f.LEAVE,t),this.isPreMouseInPlot=!1)}},o.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},o.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var r=this.getCoordinate(),m=Object(a.get)(this.options,"scales",{}),D=this.geometries,et=0,Et=D.length;et<Et;et++){var Lt=D[et];Lt.scales=this.getGeometryScales();var ne={coordinate:r,scaleDefs:m,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?Lt.update(ne):Lt.init(ne)}this.adjustScales()},o.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),r=this.getGroupedFields(),m=this.getOptions(),D=m.data,et=m.scales,Et=et===void 0?{}:et,Lt=this.filteredData,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=Et[be],We=this.getScaleKey(be);this.createScale(be,r.includes(be)?D:Lt,Ae,We),this.createdScaleKeys.set(We,!0)}},o.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},o.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),r={},m=0;m<t.length;m++){var D=t[m];r[D]=this.getScaleByField(D)}return r},o.prototype.getScaleFields=function(){for(var t=[],r={},m=this.geometries,D=0;D<m.length;D++){var et=m[D],Et=et.getScaleFields();Oe(Et,t,r)}return t},o.prototype.getGroupedFields=function(){for(var t=[],r={},m=this.geometries,D=0;D<m.length;D++){var et=m[D],Et=et.getGroupFields();Oe(Et,t,r)}return t},o.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},o.prototype.adjustCategoryScaleRange=function(){var t=this,r=Object(at.d)([this.getXScale()],this.getYScales()).filter(function(et){return!!et}),m=this.getCoordinate(),D=this.options.scales;Object(a.each)(r,function(et){var Et=et.field,Lt=et.values,ne=et.isCategory,ge=et.isIdentity;(ne||ge)&&Lt&&!Object(a.get)(D,[Et,"range"])&&(et.range=Er(et,m,t.theme))})},o.prototype.initComponents=function(t){for(var r=this.controllers,m=0;m<r.length;m++){var D=r[m];t?D.update():(D.clear(),D.render())}},o.prototype.doLayout=function(){this.layoutFunc(this)},o.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,r=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,r)},o.prototype.paintGeometries=function(t){for(var r=this.options.animate,m=this.getCoordinate(),D={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},et=this.geometries,Et=0;Et<et.length;Et++){var Lt=et[Et];Lt.coordinate=m,Lt.canvasRegion=D,r||Lt.animate(!1),Lt.paint(t)}},o.prototype.renderComponents=function(t){for(var r=0;r<this.getComponents().length;r++){var m=this.getComponents()[r];m.component.render()}},o.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},o.prototype.initOptions=function(){var t=this,r=this.options,m=r.geometries,D=m===void 0?[]:m,et=r.interactions,Et=et===void 0?[]:et,Lt=r.views,ne=Lt===void 0?[]:Lt,ge=r.annotations,be=ge===void 0?[]:ge,Ae=r.coordinate,We=r.events,an=r.facets;this.coordinateController?Ae&&this.coordinateController.update(Ae):this.coordinateController=new Qo(Ae);for(var gn=0;gn<D.length;gn++){var Yn=D[gn];this.createGeometry(Yn)}for(var Hn=0;Hn<Et.length;Hn++){var ir=Et[Hn],cr=ir.type,Rr=ir.cfg;this.interaction(cr,Rr)}for(var zr=0;zr<ne.length;zr++){var Ur=ne[zr];this.createView(Ur)}for(var ki=this.getController("annotation"),Ai=0;Ai<be.length;Ai++){var mi=be[Ai];ki.annotation(mi)}We&&Object(a.each)(We,function(Ki,vo){t.on(vo,Ki)}),an&&Object(a.each)(an,function(Ki){var vo=Ki.type,po=Object(at.c)(Ki,["type"]);t.facet(vo,po)})},o.prototype.createGeometry=function(t){var r=t.type,m=t.cfg,D=m===void 0?{}:m;if(this[r]){var et=this[r](D);Object(a.each)(t,function(Et,Lt){Object(a.isFunction)(et[Lt])&&et[Lt](Et)})}},o.prototype.getScaleKey=function(t){return this.id+"-"+t},o}(vt);function Ho(c,o){Ls.prototype[c.toLowerCase()]=function(t){t===void 0&&(t={});var r=Object(at.a)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),m=new o(r);return this.geometries.push(m),m}}var es=Ls,Bs=function(c){Object(at.b)(o,c);function o(t){var r=this,m=t.container,D=t.width,et=t.height,Et=t.autoFit,Lt=Et===void 0?!1:Et,ne=t.padding,ge=t.appendPadding,be=t.renderer,Ae=be===void 0?"canvas":be,We=t.pixelRatio,an=t.localRefresh,gn=an===void 0?!0:an,Yn=t.visible,Hn=Yn===void 0?!0:Yn,ir=t.supportCSSTransform,cr=ir===void 0?!1:ir,Rr=t.defaultInteractions,zr=Rr===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:Rr,Ur=t.options,ki=t.limitInPlot,Ai=t.theme,mi=t.syncViewPadding,Ki=Object(a.isString)(m)?document.getElementById(m):m,vo=Object(p.b)('<div style="position:relative;"></div>');Ki.appendChild(vo);var po=N(Ki,Lt,D,et),yo=O(Ae),wo=new yo.Canvas(Object(at.a)({container:vo,pixelRatio:We,localRefresh:gn,supportCSSTransform:cr},po));return r=c.call(this,{parent:null,canvas:wo,backgroundGroup:wo.addGroup({zIndex:v.BG}),middleGroup:wo.addGroup({zIndex:v.MID}),foregroundGroup:wo.addGroup({zIndex:v.FORE}),padding:ne,appendPadding:ge,visible:Hn,options:Ur,limitInPlot:ki,theme:Ai,syncViewPadding:mi})||this,r.onResize=Object(a.debounce)(function(){r.forceFit()},300),r.ele=Ki,r.canvas=wo,r.width=po.width,r.height=po.height,r.autoFit=Lt,r.localRefresh=gn,r.renderer=Ae,r.wrapperElement=vo,r.updateCanvasStyle(),r.bindAutoFit(),r.initDefaultInteractions(zr),r}return o.prototype.initDefaultInteractions=function(t){var r=this;Object(a.each)(t,function(m){r.interaction(m)})},o.prototype.changeSize=function(t,r){return this.width===t&&this.height===r?this:(this.emit(b.BEFORE_CHANGE_SIZE),this.width=t,this.height=r,this.canvas.changeSize(t,r),this.render(!0),this.emit(b.AFTER_CHANGE_SIZE),this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Y(this.wrapperElement),this.wrapperElement=null},o.prototype.changeVisible=function(t){return c.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},o.prototype.forceFit=function(){if(!this.destroyed){var t=N(this.ele,!0,this.width,this.height),r=t.width,m=t.height;this.changeSize(r,m)}},o.prototype.updateCanvasStyle=function(){Object(p.e)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},o.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},o.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},o}(es),gu=Bs,Do=function(){function c(o){this.visible=!0,this.components=[],this.view=o}return c.prototype.clear=function(o){Object(a.each)(this.components,function(t){t.component.destroy()}),this.components=[]},c.prototype.destroy=function(){this.clear()},c.prototype.getComponents=function(){return this.components},c.prototype.changeVisible=function(o){this.visible!==o&&(this.components.forEach(function(t){o?t.component.show():t.component.hide()}),this.visible=o)},c}();function ps(c){for(var o=[],t=function(D){var et=c[D],Et=Object(a.find)(o,function(Lt){return Lt.color===et.color&&Lt.name===et.name&&Lt.value===et.value&&Lt.title===et.title});Et||o.push(et)},r=0;r<c.length;r++)t(r);return o}var yu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(o.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},o.prototype.render=function(){},o.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var r=this.view,m=this.getTooltipItems(t);if(!m.length){this.hideTooltip();return}var D=this.getTitle(m),et={x:m[0].x,y:m[0].y};r.emit("tooltip:show",Vo.fromData(r,"tooltip:show",Object(at.a)({items:m,title:D},t)));var Et=this.getTooltipCfg(),Lt=Et.follow,ne=Et.showMarkers,ge=Et.showCrosshairs,be=Et.showContent,Ae=Et.marker,We=this.items,an=this.title;if(!Object(a.isEqual)(an,D)||!Object(a.isEqual)(We,m)?(r.emit("tooltip:change",Vo.fromData(r,"tooltip:change",Object(at.a)({items:m,title:D},t))),be&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Object(a.mix)({},Et,{items:this.getItemsAfterProcess(m),title:D},Lt?t:{})),this.tooltip.show()),ne&&this.renderTooltipMarkers(m,Ae)):(this.tooltip&&Lt&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=m,this.title=D,ge){var gn=Object(a.get)(Et,["crosshairs","follow"],!1);this.renderCrosshairs(gn?t:et,Et)}}},o.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var r=this.tooltipMarkersGroup;r&&r.hide();var m=this.xCrosshair,D=this.yCrosshair;m&&m.hide(),D&&D.hide();var et=this.tooltip;et&&et.hide(),this.view.emit("tooltip:hide",Vo.fromData(this.view,"tooltip:hide",{})),this.point=null},o.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},o.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},o.prototype.isTooltipLocked=function(){return this.isLocked},o.prototype.clear=function(){var t=this,r=t.tooltip,m=t.xCrosshair,D=t.yCrosshair,et=t.tooltipMarkersGroup;r&&(r.hide(),r.clear()),m&&m.clear(),D&&D.clear(),et&&et.clear(),this.reset()},o.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},o.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},o.prototype.changeVisible=function(t){if(this.visible!==t){var r=this,m=r.tooltip,D=r.tooltipMarkersGroup,et=r.xCrosshair,Et=r.yCrosshair;t?(m&&m.show(),D&&D.show(),et&&et.show(),Et&&Et.show()):(m&&m.hide(),D&&D.hide(),et&&et.hide(),Et&&Et.hide()),this.visible=t}},o.prototype.getTooltipItems=function(t){var r=this.findItemsFromView(this.view,t);if(r.length){r=Object(a.flatten)(r);for(var m=0,D=r;m<D.length;m++)for(var et=D[m],Et=0,Lt=et;Et<Lt.length;Et++){var ne=Lt[Et],ge=ne.mappingData,be=ge.x,Ae=ge.y;ne.x=Object(a.isArray)(be)?be[be.length-1]:be,ne.y=Object(a.isArray)(Ae)?Ae[Ae.length-1]:Ae}var We=this.getTooltipCfg().shared;if(We===!1&&r.length>1){for(var an=r[0],gn=Math.abs(t.y-an[0].y),Yn=0,Hn=r;Yn<Hn.length;Yn++){var ir=Hn[Yn],cr=Math.abs(t.y-ir[0].y);cr<=gn&&(an=ir,gn=cr)}r=[an]}return ps(Object(a.flatten)(r))}return[]},o.prototype.layout=function(){},o.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},o.prototype.isCursorEntered=function(t){if(this.tooltip){var r=this.tooltip.getContainer(),m=this.tooltip.get("capture");if(r&&m){var D=r.getBoundingClientRect(),et=D.x,Et=D.y,Lt=D.width,ne=D.height;return new Qe(et,Et,Lt,ne).isPointIn(t)}}return!1},o.prototype.getTooltipCfg=function(){var t=this.view,r=t.getOptions().tooltip,m=this.processCustomContent(r),D=t.getTheme(),et=Object(a.get)(D,["components","tooltip"],{}),Et=Object(a.get)(m,"enterable",et.enterable);return Object(a.deepMix)({},et,m,{capture:!!(Et||this.isLocked)})},o.prototype.processCustomContent=function(t){if(Object(a.isBoolean)(t)||!Object(a.get)(t,"customContent"))return t;var r=t.customContent,m=function(et,Et){var Lt=r(et,Et)||"";return Object(a.isString)(Lt)?'<div class="g2-tooltip">'+Lt+"</div>":Lt};return Object(at.a)(Object(at.a)({},t),{customContent:m})},o.prototype.getTitle=function(t){var r=t[0].title||t[0].name;return this.title=r,r},o.prototype.renderTooltip=function(){var t=this.view.getCanvas(),r={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},m=this.getTooltipCfg(),D=new Wi(Object(at.a)(Object(at.a)({parent:t.get("el").parentNode,region:r},m),{visible:!1,crosshairs:null}));D.init(),this.tooltip=D},o.prototype.renderTooltipMarkers=function(t,r){for(var m=this.getTooltipMarkersGroup(),D=0,et=t;D<et.length;D++){var Et=et[D],Lt=Et.x,ne=Et.y,ge=Object(at.a)(Object(at.a)({fill:Et.color,symbol:"circle",shadowColor:Et.color},r),{x:Lt,y:ne});m.addShape("marker",{attrs:ge})}},o.prototype.renderCrosshairs=function(t,r){var m=Object(a.get)(r,["crosshairs","type"],"x");m==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,r)):m==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,r)):m==="xy"&&(this.renderXCrosshairs(t,r),this.renderYCrosshairs(t,r))},o.prototype.renderXCrosshairs=function(t,r){var m=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(m,t)){var D,et;if(m.isRect)m.isTransposed?(D={x:m.start.x,y:t.y},et={x:m.end.x,y:t.y}):(D={x:t.x,y:m.end.y},et={x:t.x,y:m.start.y});else{var Et=$n(m,t),Lt=m.getCenter(),ne=m.getRadius();et=Pi(Lt.x,Lt.y,ne,Et),D=Lt}var ge=Object(a.deepMix)({start:D,end:et,container:this.getTooltipCrosshairsGroup()},Object(a.get)(r,"crosshairs",{}),this.getCrosshairsText("x",t,r));delete ge.type;var be=this.xCrosshair;be?be.update(ge):(be=new Qr.Crosshair.Line(ge),be.init()),be.render(),be.show(),this.xCrosshair=be}},o.prototype.renderYCrosshairs=function(t,r){var m=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(m,t)){var D,et;if(m.isRect){var Et=void 0,Lt=void 0;m.isTransposed?(Et={x:t.x,y:m.end.y},Lt={x:t.x,y:m.start.y}):(Et={x:m.start.x,y:t.y},Lt={x:m.end.x,y:t.y}),D={start:Et,end:Lt},et="Line"}else D={center:m.getCenter(),radius:rn(m,t),startAngle:m.startAngle,endAngle:m.endAngle},et="Circle";D=Object(a.deepMix)({container:this.getTooltipCrosshairsGroup()},D,Object(a.get)(r,"crosshairs",{}),this.getCrosshairsText("y",t,r)),delete D.type;var ne=this.yCrosshair;ne?m.isRect&&ne.get("type")==="circle"||!m.isRect&&ne.get("type")==="line"?(ne=new Qr.Crosshair[et](D),ne.init()):ne.update(D):(ne=new Qr.Crosshair[et](D),ne.init()),ne.render(),ne.show(),this.yCrosshair=ne}},o.prototype.getCrosshairsText=function(t,r,m){var D=Object(a.get)(m,["crosshairs","text"]),et=Object(a.get)(m,["crosshairs","follow"]),Et=this.items;if(D){var Lt=this.getViewWithGeometry(this.view),ne=Et[0],ge=Lt.getXScale(),be=Lt.getYScales()[0],Ae=void 0,We=void 0;if(et){var an=this.view.getCoordinate().invert(r);Ae=ge.invert(an.x),We=be.invert(an.y)}else Ae=ne.data[ge.field],We=ne.data[be.field];var gn=t==="x"?Ae:We;return Object(a.isFunction)(D)?D=D(t,gn,Et,r):D.content=gn,{text:D}}},o.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},o.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},o.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},o.prototype.getTooltipItemsByHitShape=function(t,r,m){var D=this.getTooltipCfg().showNil,et=[],Et=t.container,Lt=Et.getShape(r.x,r.y);if(Lt&&Lt.get("visible")&&Lt.get("origin")){var ne=Lt.get("origin").mappingData,ge=ia(ne,t,m,D);ge.length&&et.push(ge)}return et},o.prototype.getTooltipItemsByFindData=function(t,r,m){var D=this.getTooltipCfg().showNil,et=[],Et=t.dataArray;if(!Object(a.isEmpty)(Et)){t.sort(Et);for(var Lt=0,ne=Et;Lt<ne.length;Lt++){var ge=ne[Lt],be=ra(r,ge,t);if(be){var Ae=t.getElementId(be),We=t.elementsMap[Ae];if(t.type==="heatmap"||We.visible){var an=ia(be,t,m,D);an.length&&et.push(an)}}}}return et},o.prototype.findItemsFromView=function(t,r){if(t.getOptions().tooltip===!1)return[];for(var m=[],D=t.geometries,et=this.getTooltipCfg(),Et=et.shared,Lt=et.title,ne=et.reversed,ge=0,be=D;ge<be.length;ge++){var Ae=be[ge];if(Ae.visible&&Ae.tooltipOption!==!1){var We=Ae.type,an=void 0;["point","edge","polygon"].includes(We)?an=this.getTooltipItemsByHitShape(Ae,r,Lt):["area","line","path","heatmap"].includes(We)?an=this.getTooltipItemsByFindData(Ae,r,Lt):Et!==!1?an=this.getTooltipItemsByFindData(Ae,r,Lt):an=this.getTooltipItemsByHitShape(Ae,r,Lt),an.length&&(ne&&an.reverse(),m.push(an))}}for(var gn=0,Yn=t.views;gn<Yn.length;gn++){var Hn=Yn[gn];m=m.concat(this.findItemsFromView(Hn,r))}return m},o.prototype.getViewWithGeometry=function(t){var r=this;return t.geometries.length?t:Object(a.find)(t.views,function(m){return r.getViewWithGeometry(m)})},o.prototype.getItemsAfterProcess=function(t){var r=this.getTooltipCfg().customItems,m=r||function(D){return D};return m(t)},o}(Do),Fs=yu,mr={};function Gs(c){return mr[c.toLowerCase()]}function Eo(c,o){mr[c.toLowerCase()]=o}var ma={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},mu={interval:function(o){return{enter:{animation:o.isRect?o.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:o.isPolar&&o.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},bu={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",o.isPolar&&o.isTransposed&&(t="wave-in")),{animation:t}},schema:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Jn(c,o){return{delay:Object(a.isFunction)(c.delay)?c.delay(o):c.delay,easing:Object(a.isFunction)(c.easing)?c.easing(o):c.easing,duration:Object(a.isFunction)(c.duration)?c.duration(o):c.duration,callback:c.callback}}function fe(c,o,t){var r=mu[c];return r&&(Object(a.isFunction)(r)&&(r=r(o)),r=Object(a.deepMix)({},ma,r),t)?r[t]:r}function Ta(c,o,t){var r=Object(a.get)(c.get("origin"),"data",y),m=o.animation,D=Jn(o,r);if(m){var et=Gs(m);et&&et(c,D,t)}else c.animate(t.toAttrs,D)}function _s(c,o,t,r,m){if(bu[t]){var D=bu[t](r),et=Gs(Object(a.get)(D,"animation",""));if(et){var Et=Object(at.a)(Object(at.a)(Object(at.a)({},ma.appear),D),o);c.stopAnimate(),et(c,Et,{coordinate:r,minYPoint:m,toAttrs:null})}}}var ns="element-background",ba=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.states=[];var m=t.shapeFactory,D=t.container,et=t.offscreenGroup,Et=t.visible,Lt=Et===void 0?!0:Et;return r.shapeFactory=m,r.container=D,r.offscreenGroup=et,r.visible=Lt,r}return o.prototype.draw=function(t,r){r===void 0&&(r=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,r),this.visible===!1&&this.changeVisible(!1)},o.prototype.update=function(t){var r=this,m=r.shapeFactory,D=r.shape;if(!!D){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(D,t);var et=this.getOffscreenGroup(),Et=m.drawShape(this.shapeType,t,et);Et.cfg.data=this.data,Et.cfg.origin=t,Et.cfg.element=this,this.syncShapeStyle(D,Et,this.getStates(),this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var t=this,r=t.shapeFactory,m=t.shape;if(m){var D=this.getAnimateCfg("leave");D?Ta(m,D,{coordinate:r.coordinate,toAttrs:Object(at.a)({},m.attr())}):m.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(r){r.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(r){r.hide()}))},o.prototype.setState=function(t,r){var m=this,D=m.states,et=m.shapeFactory,Et=m.model,Lt=m.shape,ne=m.shapeType,ge=D.indexOf(t);if(r){if(ge>-1)return;D.push(t),(t==="active"||t==="selected")&&Lt.toFront()}else{if(ge===-1)return;D.splice(ge,1),(t==="active"||t==="selected")&&Lt.toBack()}var be=et.drawShape(ne,Et,this.getOffscreenGroup());D.length?this.syncShapeStyle(Lt,be,D,null):this.syncShapeStyle(Lt,be,["reset"],null),be.remove(!0);var Ae={state:t,stateStatus:r,element:this,target:this.container};this.container.emit("statechange",Ae),Object(Qr.propagationDelegate)(this.shape,"statechange",Ae)},o.prototype.clearStates=function(){var t=this,r=this.states;Object(a.each)(r,function(m){t.setState(m,!1)}),this.states=[]},o.prototype.hasState=function(t){return this.states.includes(t)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var t=this,r=t.shape,m=t.labelShape,D={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return r&&(D=r.getCanvasBBox()),m&&m.forEach(function(et){var Et=et.getCanvasBBox();D.x=Math.min(Et.x,D.x),D.y=Math.min(Et.y,D.y),D.minX=Math.min(Et.minX,D.minX),D.minY=Math.min(Et.minY,D.minY),D.maxX=Math.max(Et.maxX,D.maxX),D.maxY=Math.max(Et.maxY,D.maxY)}),D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,r=t.shapeType,m=t.geometry,D=t.shapeFactory,et=m.stateOption,Et=D.defaultShapeType,Lt=D.theme[r]||D.theme[Et];this.statesStyle=Object(a.deepMix)({},Lt,et)}return this.statesStyle},o.prototype.getStateStyle=function(t,r){var m=this.getStatesStyle(),D=Object(a.get)(m,[t,"style"],{}),et=D[r]||D;return Object(a.isFunction)(et)?et(this):et},o.prototype.getAnimateCfg=function(t){var r=this,m=this.animate;if(m){var D=m[t];return D&&Object(at.a)(Object(at.a)({},D),{callback:function(){var Et;Object(a.isFunction)(D.callback)&&D.callback(),(Et=r.geometry)===null||Et===void 0||Et.emit(S.AFTER_DRAW_ANIMATE)}})}return null},o.prototype.drawShape=function(t,r){var m;r===void 0&&(r=!1);var D=this,et=D.shapeFactory,Et=D.container,Lt=D.shapeType;if(this.shape=et.drawShape(Lt,t,Et),this.shape){this.setShapeInfo(this.shape,t);var ne=this.shape.cfg.name;ne?Object(a.isString)(ne)&&(this.shape.cfg.name=["element",ne]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ge=r?"enter":"appear",be=this.getAnimateCfg(ge);be&&((m=this.geometry)===null||m===void 0||m.emit(S.BEFORE_DRAW_ANIMATE),Ta(this.shape,be,{coordinate:et.coordinate,toAttrs:Object(at.a)({},this.shape.attr())}))}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(t,r){var m=this;if(t.cfg.origin=r,t.cfg.element=this,t.isGroup()){var D=t.get("children");D.forEach(function(et){m.setShapeInfo(et,r)})}},o.prototype.syncShapeStyle=function(t,r,m,D,et){var Et=this,Lt;if(m===void 0&&(m=[]),et===void 0&&(et=0),!(!t||!r)){var ne=t.get("clipShape"),ge=r.get("clipShape");if(this.syncShapeStyle(ne,ge,m,D),t.isGroup())for(var be=t.get("children"),Ae=r.get("children"),We=0;We<be.length;We++)this.syncShapeStyle(be[We],Ae[We],m,D,et+We);else{if(!Object(a.isEmpty)(m)&&!Object(a.isEqual)(m,["reset"])){var an=t.get("name");Object(a.isArray)(an)&&(an=an[1]),Object(a.each)(m,function(Yn){if(r.get("name")!==ns){var Hn=Et.getStateStyle(Yn,an||et);r.attr(Hn)}})}var gn=xo(t,r);this.animate?D?((Lt=this.geometry)===null||Lt===void 0||Lt.emit(S.BEFORE_DRAW_ANIMATE),Ta(t,D,{coordinate:this.shapeFactory.coordinate,toAttrs:gn,shapeModel:this.model})):Object(a.isEmpty)(m)?(t.stopAnimate(),t.animate(gn,{duration:300})):t.attr(gn):t.attr(gn)}}},o.prototype.getShapeType=function(t){var r=Object(a.get)(t,"shape");return Object(a.isArray)(r)?r[0]:r},o}(vt),ca=ba,gs={},Fa={};function ys(c){return gs[c.toLowerCase()]}function jn(c,o){gs[c.toLowerCase()]=o}function Us(c){return Fa[c.toLowerCase()]}function Wo(c,o){Fa[c.toLowerCase()]=o}var rc={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(o,t){var r=this.getShape(o);return r.getPoints?r.getPoints(t):this.getDefaultPoints(t)},getShape:function(o){var t=this[o]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(o){return Object(a.get)(o,[this.defaultShapeType,"default","style"],{})},getMarker:function(o,t){var r=this.getShape(o);if(!r.getMarker){var m=this.defaultShapeType;r=this.getShape(m)}var D=this.theme,et=Object(a.get)(D,[o,"default"],{}),Et=r.getMarker(t);return Object(a.deepMix)({},et,Et)},drawShape:function(o,t,r){var m=this.getShape(o);return m.draw(t,r)}},ic={coordinate:null,parsePath:function(o){var t=this.coordinate,r=Object(R.c)(o);return t.isPolar?r=Ce(t,r):r=Ze(t,r),r},parsePoint:function(o){var t=this.coordinate;return t.convert(o)},parsePoints:function(o){var t=this.coordinate;return o.map(function(r){return t.convert(r)})},draw:function(o,t){}},ms={};function oa(c,o){var t=Object(a.upperFirst)(c),r=Object(at.a)(Object(at.a)(Object(at.a)({},rc),o),{geometryType:c});return ms[t]=r,r}function fo(c,o,t){var r=Object(a.upperFirst)(c),m=ms[r],D=Object(at.a)(Object(at.a)({},ic),t);return m[o]=D,D}function bs(c){var o=Object(a.upperFirst)(c);return ms[o]}function zs(c,o,t){if(t===void 0&&(t={}),!o)return[c];var r=Object(a.groupToMap)(c,o),m=[];if(o.length===1&&t[o[0]])for(var D=t[o[0]],et=0,Et=D;et<Et.length;et++){var Lt=Et[et],ne=r["_"+Lt];ne&&m.push(ne)}else for(var ge in r)if(r.hasOwnProperty(ge)){var be=r[ge];m.push(be)}return m}function Ga(c,o){return Object(a.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!Object(a.isEqual)(c[t],o[t])})}function _a(c){return Object(a.isArray)(c)?c:c.split("*")}function xu(c,o){var t=[];return Object(a.each)(o,function(r,m){var D=m.split(" ")[0];D===c&&t.push(r)}),t}var Ou=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="base",r.attributes={},r.elements=[],r.elementsMap={},r.animateOption=!0,r.attributeOption={},r.lastElementsMap={},r.generatePoints=!1,r.beforeMappingData=null,r.adjusts={},r.idFields=[],r.hasSorted=!1,r.isCoordinateChanged=!1;var m=t.container,D=t.labelsContainer,et=t.coordinate,Et=t.data,Lt=t.sortable,ne=Lt===void 0?!1:Lt,ge=t.visible,be=ge===void 0?!0:ge,Ae=t.theme,We=t.scales,an=We===void 0?{}:We,gn=t.scaleDefs,Yn=gn===void 0?{}:gn,Hn=t.intervalPadding,ir=t.dodgePadding,cr=t.maxColumnWidth,Rr=t.minColumnWidth,zr=t.columnWidthRatio,Ur=t.roseWidthRatio,ki=t.multiplePieWidthRatio,Ai=t.zIndexReversed;return r.container=m,r.labelsContainer=D,r.coordinate=et,r.data=Et,r.sortable=ne,r.visible=be,r.userTheme=Ae,r.scales=an,r.scaleDefs=Yn,r.intervalPadding=Hn,r.dodgePadding=ir,r.maxColumnWidth=cr,r.minColumnWidth=Rr,r.columnWidthRatio=zr,r.roseWidthRatio=Ur,r.multiplePieWidthRatio=ki,r.zIndexReversed=Ai,r}return o.prototype.position=function(t){var r=t;Object(a.isPlainObject)(t)||(r={fields:_a(t)});var m=Object(a.get)(r,"fields");return m.length===1&&(m.unshift("1"),Object(a.set)(r,"fields",m)),Object(a.set)(this.attributeOption,"position",r),this},o.prototype.color=function(t,r){return this.createAttrOption("color",t,r),this},o.prototype.shape=function(t,r){return this.createAttrOption("shape",t,r),this},o.prototype.size=function(t,r){return this.createAttrOption("size",t,r),this},o.prototype.adjust=function(t){var r=t;return(Object(a.isString)(t)||Object(a.isPlainObject)(t))&&(r=[t]),Object(a.each)(r,function(m,D){Object(a.isObject)(m)||(r[D]={type:m})}),this.adjustOption=r,this},o.prototype.style=function(t,r){if(Object(a.isString)(t)){var m=_a(t);this.styleOption={fields:m,callback:r}}else{var D=t,m=D.fields,et=D.callback,Et=D.cfg;m||et||Et?this.styleOption=t:this.styleOption={cfg:t}}return this},o.prototype.tooltip=function(t,r){if(Object(a.isString)(t)){var m=_a(t);this.tooltipOption={fields:m,callback:r}}else this.tooltipOption=t;return this},o.prototype.animate=function(t){return this.animateOption=t,this},o.prototype.label=function(t,r,m){if(Object(a.isString)(t)){var D={},et=_a(t);D.fields=et,Object(a.isFunction)(r)?D.callback=r:Object(a.isPlainObject)(r)&&(D.cfg=r),m&&(D.cfg=m),this.labelOption=D}else this.labelOption=t;return this},o.prototype.state=function(t){return this.stateOption=t,this},o.prototype.customInfo=function(t){return this.customOption=t,this},o.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},o.prototype.update=function(t){t===void 0&&(t={});var r=t.data,m=t.isDataChanged,D=t.isCoordinateChanged,et=this,Et=et.attributeOption,Lt=et.lastAttributeOption;Object(a.isEqual)(Et,Lt)?r&&(m||!Object(a.isEqual)(r,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(r)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=D},o.prototype.paint=function(t){var r=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=Object(a.deepMix)({},fe(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var m=this.getOffscreenGroup();m.clear();for(var D=this.beforeMappingData,et=this.beforeMapping(D),Et=[],Lt=0,ne=et.length;Lt<ne;Lt++){var ge=et[Lt],be=this.mapping(ge);Et.push(be),this.createElements(be,Lt,t)}if(this.canDoGroupAnimation(t)){var Ae=this.container,We=this.type,an=this.coordinate,gn=Object(a.get)(this.animateOption,"appear"),Yn=this.getYScale(),Hn=an.convert({x:0,y:Yn.scale(this.getYMinValue())});_s(Ae,gn,We,an,Hn)}this.labelOption&&this.renderLabels(Object(a.flatten)(Et),t),this.dataArray=Et,Object(a.each)(this.lastElementsMap,function(ir){ir.animate=r.animateOption,ir.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Object(at.a)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this,r=t.container,m=t.geometryLabel,D=t.offscreenGroup;r&&r.clear(),m&&m.clear(),D&&D.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},o.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,c.prototype.destroy.call(this)},o.prototype.getGroupScales=function(){return this.groupScales},o.prototype.getAttribute=function(t){return this.attributes[t]},o.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},o.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},o.prototype.getGroupAttributes=function(){var t=[];return Object(a.each)(this.attributes,function(r){I.includes(r.type)&&t.push(r)}),t},o.prototype.getDefaultValue=function(t){var r,m=this.getAttribute(t);return m&&Object(a.isEmpty)(m.scales)&&(r=m.values[0]),r},o.prototype.getAttributeValues=function(t,r){for(var m=[],D=t.scales,et=0,Et=D.length;et<Et;et++){var Lt=D[et],ne=Lt.field;Lt.isIdentity?m.push(Lt.values):m.push(r[ne])}return t.mapping.apply(t,m)},o.prototype.getAdjust=function(t){return this.adjusts[t]},o.prototype.getShapeMarker=function(t,r){var m=this.getShapeFactory();return m.getMarker(t,r)},o.prototype.getElementsBy=function(t){return this.elements.filter(function(r){return t(r)})},o.prototype.getElementId=function(t){t=Object(a.isArray)(t)?t[0]:t;var r=t[y];if(this.idFields.length){for(var m=r[this.idFields[0]],D=1;D<this.idFields.length;D++)m+="-"+r[this.idFields[D]];return m}var et=this.type,Et=this.getXScale(),Lt=this.getYScale(),ne=Et.field||"x",ge=Lt.field||"y",be=r[ge],Ae;Et.type==="identity"?Ae=Et.values[0]:Ae=r[ne];var We;et==="interval"||et==="schema"?We=""+Ae:et==="line"||et==="area"||et==="path"?We=et:We=Ae+"-"+be;for(var an=this.groupScales,D=0,gn=an.length;D<gn;D++){var Yn=an[D],Hn=Yn.field;We=We+"-"+r[Hn]}var ir=this.getAdjust("dodge");if(ir){var cr=ir.dodgeBy;cr&&(We=We+"-"+r[cr])}return this.getAdjust("jitter")&&(We=We+"-"+t.x+"-"+t.y),We},o.prototype.getScaleFields=function(){var t=[],r={},m=this,D=m.attributeOption,et=m.labelOption,Et=m.tooltipOption;for(var Lt in D)if(D.hasOwnProperty(Lt)){var ne=D[Lt];ne.fields?Oe(ne.fields,t,r):ne.values&&Oe(ne.values,t,r)}return et&&et.fields&&Oe(et.fields,t,r),Object(a.isObject)(Et)&&Et.fields&&Oe(Et.fields,t,r),t},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var r=this.elements,m=0,D=r.length;m<D;m++){var et=r[m];et.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},o.prototype.getGroupFields=function(){for(var t=[],r={},m=0,D=I.length;m<D;m++){var et=I[m],Et=this.attributeOption[et];Et&&Et.fields&&Oe(Et.fields,t,r)}return t},o.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,r=t[0],m=t[1];return[r,m]},o.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.sort=function(t){if(!this.hasSorted)for(var r=this.getXScale(),m=r.field,D=0;D<t.length;D++){var et=t[D];et.sort(function(Et,Lt){return r.translate(Et[y][m])-r.translate(Lt[y][m])})}this.hasSorted=!0},o.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},o.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!bs(t))return this.shapeFactory||(this.shapeFactory=Object(a.clone)(bs(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},o.prototype.createShapePointsCfg=function(t){var r=this.getXScale(),m=this.getYScale(),D=this.normalizeValues(t[r.field],r),et;return m?et=this.normalizeValues(t[m.field],m):et=t.y?t.y:.1,{x:D,y:et,y0:m?m.scale(this.getYMinValue()):void 0}},o.prototype.createElement=function(t,r){r===void 0&&(r=!1);var m=this.container,D=this.getDrawCfg(t),et=this.getShapeFactory(),Et=new ca({shapeFactory:et,container:m,offscreenGroup:this.getOffscreenGroup()});return Et.animate=this.animateOption,Et.geometry=this,Et.draw(D,r),Et},o.prototype.getDrawCfg=function(t){var r=t[y],m={mappingData:t,data:r,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},D=t.shape;!D&&this.getShapeFactory()&&(D=this.getShapeFactory().defaultShapeType),m.shape=D;var et=this.theme.geometries[this.shapeType];m.defaultStyle=Object(a.get)(et,[D,"default"],{}).style,!m.defaultStyle&&this.getShapeFactory()&&(m.defaultStyle=this.getShapeFactory().getDefaultStyle(et));var Et=this.styleOption;return Et&&(m.style=this.getStyleCfg(Et,r)),this.generatePoints&&(m.points=t.points,m.nextPoints=t.nextPoints),m},o.prototype.createElements=function(t,r,m){m===void 0&&(m=!1);for(var D=this,et=D.lastElementsMap,Et=D.elementsMap,Lt=D.elements,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=this.getElementId(be);Et[Ae]&&(Ae=Ae+"-"+r+"-"+ne);var We=et[Ae];if(!We)We=this.createElement(be,m);else{var an=this.getDrawCfg(be),gn=We.getModel();(this.isCoordinateChanged||Ga(an,gn))&&(We.animate=this.animateOption,We.update(an)),delete et[Ae]}Lt.push(We),Et[Ae]=We}if(this.zIndexReversed){var Yn=Lt.length;Lt.forEach(function(Hn,ir){Hn.shape.setZIndex(Yn-ir)})}return Lt},o.prototype.getLabelType=function(){var t=this,r=t.labelOption,m=t.coordinate,D=t.type,et=m.type,Et=m.isTransposed,Lt=Object(a.get)(r,["cfg","type"]);return Lt||(et==="polar"?Lt=Et?"pie":"polar":et==="theta"?Lt="pie":D==="interval"||D==="polygon"?Lt="interval":Lt="base"),Lt},o.prototype.getYMinValue=function(){var t=this.getYScale(),r=t.min,m=t.max,D;return r>=0?D=r:m<=0?D=m:D=0,D},o.prototype.createAttrOption=function(t,r,m){if(Object(a.isNil)(r)||Object(a.isObject)(r))Object(a.isObject)(r)&&Object(a.isEqual)(Object.keys(r),["values"])?Object(a.set)(this.attributeOption,t,{fields:r.values}):Object(a.set)(this.attributeOption,t,r);else{var D={};Object(a.isNumber)(r)?D.values=[r]:D.fields=_a(r),m&&(Object(a.isFunction)(m)?D.callback=m:D.values=m),Object(a.set)(this.attributeOption,t,D)}},o.prototype.initAttributes=function(){var t=this,r=this,m=r.attributes,D=r.attributeOption,et=r.theme,Et=r.shapeType;this.groupScales=[];var Lt={},ne=function(We){if(D.hasOwnProperty(We)){var an=D[We];if(!an)return{value:void 0};var gn=Object(at.a)({},an),Yn=gn.callback,Hn=gn.values,ir=gn.fields,cr=ir===void 0?[]:ir,Rr=cr.map(function(Ur){var ki=t.scales[Ur];return ki.isCategory&&!Lt[Ur]&&I.includes(We)&&(t.groupScales.push(ki),Lt[Ur]=!0),ki});gn.scales=Rr,We!=="position"&&Rr.length===1&&Rr[0].type==="identity"?gn.values=Rr[0].values:!Yn&&!Hn&&(We==="size"?gn.values=et.sizes:We==="shape"?gn.values=et.shapes[Et]||[]:We==="color"&&(Rr.length?gn.values=Rr[0].values.length<=10?et.colors10:et.colors20:gn.values=et.colors10));var zr=Ke(We);m[We]=new zr(gn)}};for(var ge in D){var be=ne(ge);if(typeof be=="object")return be.value}},o.prototype.processData=function(t){this.hasSorted=!1;for(var r=this.getAttribute("position").scales,m=r.filter(function(zr){return zr.isCategory}),D=this.groupData(t),et=[],Et=0,Lt=D.length;Et<Lt;Et++){for(var ne=D[Et],ge=[],be=0,Ae=ne.length;be<Ae;be++){var We=ne[be],an={};for(var gn in We)an[gn]=We[gn];an[y]=We;for(var Yn=0,Hn=m;Yn<Hn.length;Yn++){var ir=Hn[Yn],cr=ir.field;an[cr]=ir.translate(an[cr])}ge.push(an)}et.push(ge)}var Rr=this.adjustData(et);return this.beforeMappingData=Rr,Rr},o.prototype.adjustData=function(t){var r=this.adjustOption,m=this,D=m.intervalPadding,et=m.dodgePadding,Et=m.theme,Lt=this.maxColumnWidth||Et.maxColumnWidth,ne=this.minColumnWidth||Et.minColumnWidth,ge=this.columnWidthRatio||Et.columnWidthRatio,be=t;if(r){var Ae=this.getXScale(),We=this.getYScale(),an=Ae.field,gn=We?We.field:null,Yn=Xn(this.coordinate),Hn=Ae.values.length,ir=this.getAttribute("size"),cr=void 0;ir&&(cr=ir.values[0]);for(var Rr=0,zr=r.length;Rr<zr;Rr++){var Ur=r[Rr],ki=Object(at.a)({xField:an,yField:gn,intervalPadding:D,dodgePadding:et,xDimensionLength:Yn,groupNum:Hn,defaultSize:cr,maxColumnWidth:Lt,minColumnWidth:ne,columnWidthRatio:ge},Ur),Ai=Ur.type;if(Ai==="dodge"){var mi=[];if(Ae.isCategory||Ae.type==="identity")mi.push("x");else if(!We)mi.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");ki.adjustNames=mi,ki.dodgeRatio=ge}else if(Ai==="stack"){var Ki=this.coordinate;if(!We){ki.height=Ki.getHeight();var vo=this.getDefaultValue("size")||3;ki.size=vo}!Ki.isTransposed&&Object(a.isNil)(ki.reverseOrder)&&(ki.reverseOrder=!0)}var po=Object(St.getAdjust)(Ai),yo=new po(ki);be=yo.process(be),this.adjusts[Ai]=yo}}return be},o.prototype.groupData=function(t){for(var r=this.getGroupScales(),m=this.scaleDefs,D={},et=[],Et=0;Et<r.length;Et++){var Lt=r[Et],ne=Lt.field;et.push(ne),Object(a.get)(m,[ne,"values"])&&(D[ne]=m[ne].values)}return zs(t,et,D)},o.prototype.updateStackRange=function(t,r){for(var m=Object(a.flatten)(r),D=t.field,et=t.min,Et=t.max,Lt=0;Lt<m.length;Lt++){var ne=m[Lt],ge=Math.min.apply(null,ne[D]),be=Math.max.apply(null,ne[D]);ge<et&&(et=ge),be>Et&&(Et=be)}var Ae=this.scaleDefs,We={};et<t.min&&!Object(a.get)(Ae,[D,"min"])&&(We.min=et),Et>t.max&&!Object(a.get)(Ae,[D,"max"])&&(We.max=Et),t.change(We)},o.prototype.beforeMapping=function(t){var r=t;if(this.sortable&&this.sort(r),this.generatePoints)for(var m=0,D=r.length;m<D;m++){var et=r[m];this.generateShapePoints(et);var Et=r[m+1];Et&&(this.generateShapePoints(Et),et[0].nextPoints=Et[0].points)}return r},o.prototype.generateShapePoints=function(t){for(var r=this.getShapeFactory(),m=this.getAttribute("shape"),D=0;D<t.length;D++){var et=t[D],Et=this.createShapePointsCfg(et),Lt=m?this.getAttributeValues(m,et):null,ne=r.getShapePoints(Lt,Et);et.points=ne}},o.prototype.normalizeValues=function(t,r){var m=[];if(Object(a.isArray)(t))for(var D=0;D<t.length;D++){var et=t[D];m.push(r.scale(et))}else m=r.scale(t);return m},o.prototype.mapping=function(t){for(var r=this.attributes,m=[],D=0;D<t.length;D++){var et=t[D],Et={_origin:et[y],points:et.points,nextPoints:et.nextPoints};for(var Lt in r)if(r.hasOwnProperty(Lt)){var ne=r[Lt],ge=ne.names,be=this.getAttributeValues(ne,et);if(ge.length>1)for(var Ae=0;Ae<be.length;Ae+=1){var We=be[Ae],an=ge[Ae];Et[an]=Object(a.isArray)(We)&&We.length===1?We[0]:We}else Et[ge[0]]=be.length===1?be[0]:be}this.convertPoint(Et),m.push(Et)}return m},o.prototype.convertPoint=function(t){var r=t.x,m=t.y,D,et,Et,Lt=this.coordinate;if(Object(a.isArray)(r)&&Object(a.isArray)(m)){D=[],et=[];for(var ne=0,ge=0,be=r.length,Ae=m.length;ne<be&&ge<Ae;ne+=1,ge+=1)Et=Lt.convert({x:r[ne],y:m[ge]}),D.push(Et.x),et.push(Et.y)}else if(Object(a.isArray)(m)){et=[];for(var We=0;We<m.length;We++){var an=m[We];Et=Lt.convert({x:r,y:an}),D&&D!==Et.x?(Object(a.isArray)(D)||(D=[D]),D.push(Et.x)):D=Et.x,et.push(Et.y)}}else if(Object(a.isArray)(r)){D=[];for(var We=0;We<r.length;We++){var gn=r[We];Et=Lt.convert({x:gn,y:m}),et&&et!==Et.y?(Object(a.isArray)(et)||(et=[et]),et.push(Et.y)):et=Et.y,D.push(Et.x)}}else{var Yn=Lt.convert({x:r,y:m});D=Yn.x,et=Yn.y}t.x=D,t.y=et},o.prototype.getStyleCfg=function(t,r){var m=t.fields,D=m===void 0?[]:m,et=t.callback,Et=t.cfg;if(Et)return Et;var Lt=D.map(function(ne){return r[ne]});return et.apply(void 0,Lt)},o.prototype.setCfg=function(t){var r=this,m=t.coordinate,D=t.data,et=t.theme,Et=t.scaleDefs;m&&(this.coordinate=m),D&&(this.data=D),Et&&(this.scaleDefs=Et,this.idFields=[],Object(a.each)(Et,function(Lt,ne){Lt&&Lt.key&&r.idFields.push(ne)})),et&&(this.theme=this.userTheme?Object(a.deepMix)({},et,this.userTheme):et)},o.prototype.renderLabels=function(t,r){r===void 0&&(r=!1);var m=this.geometryLabel;if(!m){var D=this.getLabelType(),et=ys(D);m=new et(this),this.geometryLabel=m}m.render(t,r);var Et=m.labelsRenderer.shapesMap;Object(a.each)(this.elementsMap,function(Lt,ne){var ge=xu(ne,Et);if(ge.length){Lt.labelShape=ge;for(var be=0;be<ge.length;be++)for(var Ae=ge[be],We=Ae.getChildren(),an=0;an<We.length;an++){var gn=We[an];gn.cfg.name=["element","label"],gn.cfg.element=Lt}}})},o.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(Object(a.get)(this.animateOption,"appear")===void 0||Object(a.get)(this.animateOption,"appear")&&Object(a.get)(this.animateOption,["appear","animation"])===void 0)},o}(vt),la=Ou,rs=jr.a.transform;function Ca(c,o,t){var r=rs(c.getMatrix(),[["t",o,t]]);c.setMatrix(r)}function Vs(c,o){var t=c.attr(),r=t.x,m=t.y,D=rs(c.getMatrix(),[["t",-r,-m],["r",o],["t",r,m]]);return D}function Rt(c,o){var t=Vs(c,o);c.setMatrix(t)}function l(){return[1,0,0,0,1,0,0,0,1]}function u(c,o){var t=c.getBBox(),r=(t.minX+t.maxX)/2,m=(t.minY+t.maxY)/2;c.applyToMatrix([r,m,1]);var D=rs(c.getMatrix(),[["t",-r,-m],["s",o,o],["t",r,m]]);c.setMatrix(D)}function j(c){return c.find(function(o){return o.get("type")==="text"})}function W(c,o,t){t===void 0&&(t=[0,0,0,0]);var r=c.getChildren()[0];if(r){var m=r.clone();(o==null?void 0:o.rotate)&&Rt(m,-o.rotate);var D=m.getCanvasBBox(),et=D.x,Et=D.y,Lt=D.width,ne=D.height;m.destroy();var ge=t;return Object(a.isNil)(ge)?ge=[2,2,2,2]:Object(a.isNumber)(ge)&&(ge=new Array(4).fill(ge)),{x:et-ge[3],y:Et-ge[0],width:Lt+ge[1]+ge[3],height:ne+ge[0]+ge[2],rotation:(o==null?void 0:o.rotate)||0}}}function st(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),m=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*m}function Tt(c,o){var t=c.getBBox();return Object(a.some)(o,function(r){var m=r.getBBox();return st(t,m,2)>0})}function Gt(c,o,t){var r=t.data,m=t.origin,D=t.animateCfg,et=t.coordinate,Et=Object(a.get)(D,"update");c.set("data",r),c.set("origin",m),c.set("animateCfg",D),c.set("coordinate",et),c.set("visible",o.get("visible")),c.getChildren().forEach(function(Lt,ne){var ge=o.getChildByIndex(ne);if(!ge)c.removeChild(Lt),Lt.remove(!0);else{Lt.set("data",r),Lt.set("origin",m),Lt.set("animateCfg",D),Lt.set("coordinate",et);var be=xo(Lt,ge);Et?Ta(Lt,Et,{toAttrs:be,coordinate:et}):Lt.attr(be),ge.isGroup()&&Gt(Lt,ge,t)}}),Object(a.each)(o.getChildren(),function(Lt,ne){ne>=c.getCount()&&(Lt.destroyed||c.add(Lt))})}var Xt=function(){function c(o){this.shapesMap={},this.lastShapesMap={};var t=o.layout,r=o.container;this.layout=t,this.container=r}return c.prototype.render=function(o,t,r){var m=this;r===void 0&&(r=!1),this.shapesMap={};var D=this.container,et=this.createOffscreenGroup();if(o.length){for(var Et=0,Lt=o;Et<Lt.length;Et++){var ne=Lt[Et];ne&&this.renderLabel(ne,et)}this.doLayout(o,t),this.renderLabelLine(o),this.renderLabelBackground(o),this.adjustLabel(o)}var ge=this.lastShapesMap,be=this.shapesMap;Object(a.each)(be,function(Ae,We){if(Ae.destroyed)delete be[We];else{if(ge[We]){var an=Ae.get("data"),gn=Ae.get("origin"),Yn=Ae.get("coordinate"),Hn=Ae.get("animateCfg"),ir=ge[We];Gt(ir,be[We],{data:an,origin:gn,animateCfg:Hn,coordinate:Yn}),m.shapesMap[We]=ir}else{D.add(Ae);var cr=Object(a.get)(Ae.get("animateCfg"),r?"enter":"appear");cr&&Ta(Ae,cr,{toAttrs:Object(at.a)({},Ae.attr()),coordinate:Ae.get("coordinate")})}delete ge[We]}}),Object(a.each)(ge,function(Ae){var We=Object(a.get)(Ae.get("animateCfg"),"leave");We?Ta(Ae,We,{toAttrs:null,coordinate:Ae.get("coordinate")}):Ae.remove(!0)}),this.lastShapesMap=be,et.destroy()},c.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},c.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},c.prototype.renderLabel=function(o,t){var r=o.id,m=o.elementId,D=o.data,et=o.mappingData,Et=o.coordinate,Lt=o.animate,ne=o.content,ge={id:r,elementId:m,data:D,origin:Object(at.a)(Object(at.a)({},et),{data:et[y]}),coordinate:Et},be=t.addGroup(Object(at.a)({name:"label",animateCfg:this.animate===!1||Lt===null||Lt===!1?!1:Object(a.deepMix)({},this.animate,Lt)},ge)),Ae;if(ne.isGroup&&ne.isGroup()||ne.isShape&&ne.isShape()){var We=ne.getCanvasBBox(),an=We.width,gn=We.height,Yn=Object(a.get)(o,"textAlign","left"),Hn=o.x,ir=o.y-gn/2;Yn==="center"?Hn=Hn-an/2:(Yn==="right"||Yn==="end")&&(Hn=Hn-an),Ca(ne,Hn,ir),Ae=ne,be.add(ne)}else{var cr=Object(a.get)(o,["style","fill"]);Ae=be.addShape("text",Object(at.a)({attrs:Object(at.a)(Object(at.a)({x:o.x,y:o.y,textAlign:o.textAlign,textBaseline:Object(a.get)(o,"textBaseline","middle"),text:o.content},o.style),{fill:Object(a.isNull)(cr)?o.color:cr})},ge))}o.rotate&&Rt(Ae,o.rotate),this.shapesMap[r]=be},c.prototype.doLayout=function(o,t){var r=this;if(this.layout){var m=Object(a.isArray)(this.layout)?this.layout:[this.layout];Object(a.each)(m,function(D){var et=Us(Object(a.get)(D,"type",""));if(et){var Et=[],Lt=[];Object(a.each)(r.shapesMap,function(ne,ge){Et.push(ne),Lt.push(t[ne.get("elementId")])}),et(o,Et,Lt,r.region,D.cfg)}})}},c.prototype.renderLabelLine=function(o){var t=this;Object(a.each)(o,function(r){var m=Object(a.get)(r,"coordinate");if(!(!r||!m)){var D=m.getCenter(),et=m.getRadius();if(!!r.labelLine){var Et=Object(a.get)(r,"labelLine",{}),Lt=r.id,ne=Et.path;if(!ne){var ge=Pi(D.x,D.y,et,r.angle);ne=[["M",ge.x,ge.y],["L",r.x,r.y]]}var be=t.shapesMap[Lt];be.destroyed||be.addShape("path",{capture:!1,attrs:Object(at.a)({path:ne,stroke:r.color?r.color:Object(a.get)(r,["style","fill"],"#000"),fill:null},Et.style),id:Lt,origin:r.mappingData,data:r.data,coordinate:r.coordinate})}}})},c.prototype.renderLabelBackground=function(o){var t=this;Object(a.each)(o,function(r){var m=Object(a.get)(r,"coordinate"),D=Object(a.get)(r,"background");if(!(!D||!m)){var et=r.id,Et=t.shapesMap[et];if(!Et.destroyed){var Lt=Et.getChildren()[0];if(Lt){var ne=W(Et,r,D.padding),ge=ne.rotation,be=Object(at.c)(ne,["rotation"]),Ae=Et.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},be),D.style||{}),id:et,origin:r.mappingData,data:r.data,coordinate:r.coordinate});if(Ae.setZIndex(-1),ge){var We=Lt.getMatrix();Ae.setMatrix(We)}}}}})},c.prototype.createOffscreenGroup=function(){var o=this.container,t=o.getGroupBase(),r=new t({});return r},c.prototype.adjustLabel=function(o){var t=this;Object(a.each)(o,function(r){if(r){var m=r.id,D=t.shapesMap[m];if(!D.destroyed){var et=D.findAll(function(Et){return Et.get("type")!=="path"});Object(a.each)(et,function(Et){Et&&(r.offsetX&&Et.attr("x",Et.attr("x")+r.offsetX),r.offsetY&&Et.attr("y",Et.attr("y")+r.offsetY))})}}})},c}(),ee=Xt;function ae(c){var o=0;return Object(a.each)(c,function(t){o+=t}),o/c.length}var je=function(){function c(o){this.geometry=o}return c.prototype.getLabelItems=function(o){var t=this,r=[],m=this.getLabelCfgs(o);return Object(a.each)(o,function(D,et){var Et=m[et];if(!Et||Object(a.isNil)(D.x)||Object(a.isNil)(D.y)){r.push(null);return}var Lt=Object(a.isArray)(Et.content)?Et.content:[Et.content];Et.content=Lt;var ne=Lt.length;Object(a.each)(Lt,function(ge,be){if(Object(a.isNil)(ge)||ge===""){r.push(null);return}var Ae=Object(at.a)(Object(at.a)({},Et),t.getLabelPoint(Et,D,be));Ae.textAlign||(Ae.textAlign=t.getLabelAlign(Ae,be,ne)),Ae.offset<=0&&(Ae.labelLine=null),r.push(Ae)})}),r},c.prototype.render=function(o,t){t===void 0&&(t=!1);var r=this.getLabelItems(o),m=this.getLabelsRenderer(),D=this.getGeometryShapes();m.render(r,D,t)},c.prototype.clear=function(){var o=this.labelsRenderer;o&&o.clear()},c.prototype.destroy=function(){var o=this.labelsRenderer;o&&o.destroy(),this.labelsRenderer=null},c.prototype.getCoordinate=function(){return this.geometry.coordinate},c.prototype.getDefaultLabelCfg=function(o,t){var r=this.geometry,m=r.type,D=r.theme;return m==="polygon"||m==="interval"&&t==="middle"||o<0&&!["line","point","path"].includes(m)?Object(a.get)(D,"innerLabels",{}):Object(a.get)(D,"labels",{})},c.prototype.getThemedLabelCfg=function(o){var t=this.geometry,r=this.getDefaultLabelCfg(),m=t.type,D=t.theme,et;return m==="polygon"||o.offset<0&&!["line","point","path"].includes(m)?et=Object(a.deepMix)({},r,D.innerLabels,o):et=Object(a.deepMix)({},r,D.labels,o),et},c.prototype.setLabelPosition=function(o,t,r,m){},c.prototype.getLabelOffset=function(o){var t=this.getCoordinate(),r=this.getOffsetVector(o);return t.isTransposed?r[0]:r[1]},c.prototype.getLabelOffsetPoint=function(o,t,r){var m=o.offset,D=this.getCoordinate(),et=D.isTransposed,Et=et?"x":"y",Lt=et?1:-1,ne={x:0,y:0};return t>0||r===1?ne[Et]=m*Lt:ne[Et]=m*Lt*-1,ne},c.prototype.getLabelPoint=function(o,t,r){var m=this.getCoordinate(),D=o.content.length;function et(Yn,Hn,ir){ir===void 0&&(ir=!1);var cr=Yn;return Object(a.isArray)(cr)&&(o.content.length===1?ir?cr=ae(cr):cr.length<=2?cr=cr[Yn.length-1]:cr=ae(cr):cr=cr[Hn]),cr}var Et={content:o.content[r],x:0,y:0,start:{x:0,y:0},color:"#fff"},Lt=Object(a.isArray)(t.shape)?t.shape[0]:t.shape,ne=Lt==="funnel"||Lt==="pyramid";if(this.geometry.type==="polygon"){var ge=uo(t.x,t.y);Et.x=ge[0],Et.y=ge[1]}else this.geometry.type==="interval"&&!ne?(Et.x=et(t.x,r,!0),Et.y=et(t.y,r)):(Et.x=et(t.x,r),Et.y=et(t.y,r));if(ne){var be=Object(a.get)(t,"nextPoints"),Ae=Object(a.get)(t,"points");if(be){var We=m.convert(Ae[1]),an=m.convert(be[1]);Et.x=(We.x+an.x)/2,Et.y=(We.y+an.y)/2}else if(Lt==="pyramid"){var We=m.convert(Ae[1]),an=m.convert(Ae[2]);Et.x=(We.x+an.x)/2,Et.y=(We.y+an.y)/2}}o.position&&this.setLabelPosition(Et,t,r,o.position);var gn=this.getLabelOffsetPoint(o,r,D);return Et.start={x:Et.x,y:Et.y},Et.x+=gn.x,Et.y+=gn.y,Et.color=t.color,Et},c.prototype.getLabelAlign=function(o,t,r){var m="center",D=this.getCoordinate();if(D.isTransposed){var et=o.offset;et<0?m="right":et===0?m="center":m="left",r>1&&t===0&&(m==="right"?m="left":m==="left"&&(m="right"))}return m},c.prototype.getLabelId=function(o){var t=this.geometry,r=t.type,m=t.getXScale(),D=t.getYScale(),et=o[y],Et=t.getElementId(o);return r==="line"||r==="area"?Et+=" "+et[m.field]:r==="path"&&(Et+=" "+et[m.field]+"-"+et[D.field]),Et},c.prototype.getLabelsRenderer=function(){var o=this.geometry,t=o.labelsContainer,r=o.labelOption,m=o.canvasRegion,D=o.animateOption,et=this.geometry.coordinate,Et=this.labelsRenderer;return Et||(Et=new ee({container:t,layout:Object(a.get)(r,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=Et),Et.region=m,Et.animate=D?fe("label",et):!1,Et},c.prototype.getLabelCfgs=function(o){var t=this,r=this.geometry,m=r.labelOption,D=r.scales,et=r.coordinate,Et=m,Lt=Et.fields,ne=Et.callback,ge=Et.cfg,be=Lt.map(function(We){return D[We]}),Ae=[];return Object(a.each)(o,function(We,an){var gn=We[y],Yn=t.getLabelText(gn,be),Hn;if(ne){var ir=Lt.map(function(ki){return gn[ki]});if(Hn=ne.apply(void 0,ir),Object(a.isNil)(Hn)){Ae.push(null);return}}var cr=Object(at.a)(Object(at.a)({id:t.getLabelId(We),elementId:t.geometry.getElementId(We),data:gn,mappingData:We,coordinate:et},ge),Hn);Object(a.isFunction)(cr.position)&&(cr.position=cr.position(gn,We,an));var Rr=t.getLabelOffset(cr.offset||0),zr=t.getDefaultLabelCfg(Rr,cr.position);cr=Object(a.deepMix)({},zr,cr),cr.offset=t.getLabelOffset(cr.offset||0);var Ur=cr.content;Object(a.isFunction)(Ur)?cr.content=Ur(gn,We,an):Object(a.isUndefined)(Ur)&&(cr.content=Yn[0]),Ae.push(cr)}),Ae},c.prototype.getLabelText=function(o,t){var r=[];return Object(a.each)(t,function(m){var D=o[m.field];Object(a.isArray)(D)?D=D.map(function(et){return m.getText(et)}):D=m.getText(D),Object(a.isNil)(D)||D===""?r.push(null):r.push(D)}),r},c.prototype.getOffsetVector=function(o){o===void 0&&(o=0);var t=this.getCoordinate(),r=0;return Object(a.isNumber)(o)&&(r=o),t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},c.prototype.getGeometryShapes=function(){var o=this.geometry,t={};return Object(a.each)(o.elementsMap,function(r,m){t[m]=r.shape}),Object(a.each)(o.getOffscreenGroup().getChildren(),function(r){var m=o.getElementId(r.get("origin").mappingData);t[m]=r}),t},c}(),Fe=je,_e=z("B+CY");function He(c,o,t){if(!c)return t;var r;if(c.callback&&c.callback.length>1){var m=Array(c.callback.length-1).fill("");r=c.mapping.apply(c,Object(at.d)([o],m)).join("")}else r=c.mapping(o).join("");return r||t}var bn={hexagon:function(o,t,r){var m=r/2*Math.sqrt(3);return[["M",o,t-r],["L",o+m,t-r/2],["L",o+m,t+r/2],["L",o,t+r],["L",o-m,t+r/2],["L",o-m,t-r/2],["Z"]]},bowtie:function(o,t,r){var m=r-1.5;return[["M",o-r,t-m],["L",o+r,t+m],["L",o+r,t-m],["L",o-r,t+m],["Z"]]},cross:function(o,t,r){return[["M",o-r,t-r],["L",o+r,t+r],["M",o+r,t-r],["L",o-r,t+r]]},tick:function(o,t,r){return[["M",o-r/2,t-r],["L",o+r/2,t-r],["M",o,t-r],["L",o,t+r],["M",o-r/2,t+r],["L",o+r/2,t+r]]},plus:function(o,t,r){return[["M",o-r,t],["L",o+r,t],["M",o,t-r],["L",o,t+r]]},hyphen:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},line:function(o,t,r){return[["M",o,t-r],["L",o,t+r]]}},wn=["line","cross","tick","plus","hyphen"];function Nn(c,o){var t=c.symbol;Object(a.isString)(t)&&wn.indexOf(t)!==-1&&(c.style=Object(a.deepMix)({},c.style,{lineWidth:1,stroke:o,fill:null}))}function Bn(c){var o=c.symbol;Object(a.isString)(o)&&bn[o]&&(c.symbol=bn[o])}function Fn(c){return c.startsWith(e.LEFT)||c.startsWith(e.RIGHT)?"vertical":"horizontal"}function sr(c,o,t,r,m){var D=t.getScale(t.type);if(D.isCategory){var et=D.field,Et=o.getAttribute("color"),Lt=o.getAttribute("shape"),ne=c.getTheme().defaultColor,ge=o.coordinate.isPolar;return D.getTicks().map(function(be){var Ae,We=be.text,an=be.value,gn=We,Yn=D.invert(an),Hn=c.filterFieldData(et,[(Ae={},Ae[et]=Yn,Ae)]).length===0;Object(a.each)(c.views,function(zr){var Ur;zr.filterFieldData(et,[(Ur={},Ur[et]=Yn,Ur)]).length||(Hn=!0)});var ir=He(Et,Yn,ne),cr=He(Lt,Yn,"point"),Rr=o.getShapeMarker(cr,{color:ir,isInPolar:ge});return Rr=Object(a.deepMix)({},r,Rr,m),Nn(Rr,ir),Bn(Rr),{id:Yn,name:gn,value:Yn,marker:Rr,unchecked:Hn}})}return[]}function ur(c,o,t){return t.map(function(r){var m=Object(a.deepMix)({},c,o,r.marker);return Bn(m),r.marker=m,r})}var Or="4.1.9",ei={getLegendItems:sr,translate:Ca,rotate:Rt,zoom:u,transform:rs,getAngle:ao,getSectorPath:no,polarToCartesian:Pi,getDelegationObject:Zt,getTooltipItems:ia},Ti={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},kr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},yi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],oo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],so=function(o){o===void 0&&(o={});var t=o.backgroundColor,r=t===void 0?"#141414":t,m=o.paletteQualitative10,D=m===void 0?yi:m,et=o.paletteQualitative20,Et=et===void 0?oo:et,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Hn=Yn===void 0?D[0]:Yn;return{backgroundColor:r,brandColor:Hn,paletteQualitative10:D,paletteQualitative20:Et,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:kr[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:kr[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:kr[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:kr[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:kr[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:kr[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:kr[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:yi[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:kr[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:kr[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:kr[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ti[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ti[25],annotationArcBorderColor:kr[15],annotationArcBorder:1,annotationLineBorderColor:kr[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:kr[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:kr[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:kr[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:kr[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:kr[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ti[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:kr[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ti[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:kr[25],pointFillColor:yi[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ti[100],pointBorderOpacity:1,pointActiveBorderColor:kr[100],pointSelectedBorder:2,pointSelectedBorderColor:kr[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:yi[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ti[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:kr[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:kr[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:yi[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:yi[0],areaFillOpacity:.25,areaActiveFillColor:yi[0],areaActiveFillOpacity:.5,areaSelectedFillColor:yi[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:yi[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:kr[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:kr[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:yi[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:kr[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:kr[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:yi[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ti[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:kr[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:kr[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},co=so(),lo=z("U8jP"),Hi=z("v7Ed");function Io(c){return c?!1:c==null||isNaN(c)}function ko(c){if(Object(a.isArray)(c))return Io(c[1].y);var o=c.y;return Object(a.isArray)(o)?Io(o[0]):Io(o)}function Ro(c,o,t){if(o===void 0&&(o=!1),t===void 0&&(t=!0),!c.length||c.length===1&&!t)return[];if(o){for(var r=[],m=0,D=c.length;m<D;m++){var et=c[m];ko(et)||r.push(et)}return[r]}for(var Et=[],Lt=[],m=0,D=c.length;m<D;m++){var et=c[m];ko(et)?Lt.length&&(Lt.length===1&&!t||Et.push(Lt),Lt=[]):Lt.push(et)}return Lt.length&&Et.push(Lt),Et}function bo(c,o,t,r){r===void 0&&(r="");var m=c.style,D=m===void 0?{}:m,et=c.defaultStyle,Et=c.color,Lt=c.size,ne=Object(at.a)(Object(at.a)({},et),D);return Et&&(o&&(D.stroke||(ne.stroke=Et)),t&&(D.fill||(ne.fill=Et))),r&&Object(a.isNil)(D[r])&&!Object(a.isNil)(Lt)&&(ne[r]=Lt),ne}function jo(c){return Object(a.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},Object(a.get)(c,["background","style"]))}function ho(c){var o=c.x,t=Object(a.isArray)(c.y)?c.y:[c.y];return t.map(function(r,m){return{x:Object(a.isArray)(o)?o[m]:o,y:r}})}var fa={line:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},dot:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},dash:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},smooth:function(o,t,r){return[["M",o-r,t],["A",r/2,r/2,0,1,1,o,t],["A",r/2,r/2,0,1,0,o+r,t]]},hv:function(o,t,r){return[["M",o-r-1,t-2.5],["L",o,t-2.5],["L",o,t+2.5],["L",o+r+1,t+2.5]]},vh:function(o,t,r){return[["M",o-r-1,t+2.5],["L",o,t+2.5],["L",o,t-2.5],["L",o+r+1,t-2.5]]},hvh:function(o,t,r){return[["M",o-(r+1),t+2.5],["L",o-r/2,t+2.5],["L",o-r/2,t-2.5],["L",o+r/2,t-2.5],["L",o+r/2,t+2.5],["L",o+r+1,t+2.5]]},vhv:function(o,t){return[["M",o-5,t+2.5],["L",o-5,t],["L",o,t],["L",o,t-3],["L",o,t+3],["L",o+6.5,t+3]]}};function Zo(c,o){var t=c.color;return{symbol:fa[o],style:{lineWidth:2,r:6,stroke:t}}}function Hc(c,o,t){for(var r=c.isStack,m=c.connectNulls,D=c.isInCircle,et=c.showSinglePoint,Et=bo(c,!0,!1,"lineWidth"),Lt=Ro(c.points,m,et),ne=[],ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ne.concat(Jc(Ae,D,r,o,t,Et))}return Et.path=ne,Et}function Su(c,o,t,r,m){if(c.length===1)return[["M",c[0].x,c[0].y-m.lineWidth/2],["L",c[0].x,c[0].y],["L",c[0].x,c[0].y+m.lineWidth/2]];var D;return t?(o&&c.length&&c.push({x:c[0].x,y:c[0].y}),D=Gn(c,!1,r)):(D=zn(c,!1),o&&D.push(["Z"])),D}function Kc(c,o,t,r,m,D){var et=[],Et=[];Object(a.each)(c,function(ge){var be=ho(ge);et.push(be[1]),Et.push(be[0])});var Lt=Su(et,o,r,m,D),ne=Su(Et,o,r,m,D);return t?Lt:Lt.concat(ne)}function Jc(c,o,t,r,m,D){if(c.length){var et=c[0];return Object(a.isArray)(et.y)?Kc(c,o,t,r,m,D):Su(c,o,r,m,D)}return[]}var Qc=oa("line",{defaultShapeType:"line"});Object(a.each)(["line","dot","dash","smooth"],function(c){fo("line",c,{draw:function(t,r){var m=c==="smooth",D;if(m){var et=this.coordinate,Et=et.start,Lt=et.end;D=[[Et.x,Lt.y],[Lt.x,Et.y]]}var ne=Hc(t,m,D),ge=r.addShape({type:"path",attrs:ne,name:"line",capture:!m});return ge},getMarker:function(t){return Zo(t,c)}})});var mh=Qc,Zc=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="path",r.shapeType="line";var m=t.connectNulls,D=m===void 0?!1:m,et=t.showSinglePoint,Et=et===void 0?!0:et;return r.connectNulls=D,r.showSinglePoint=Et,r}return o.prototype.createElements=function(t,r,m){m===void 0&&(m=!1);var D=this,et=D.lastElementsMap,Et=D.elementsMap,Lt=D.elements,ne=D.container,ge=this.getElementId(t),be=this.getShapeInfo(t),Ae=et[ge];if(Ae){var an=Ae.getModel();(this.isCoordinateChanged||Ga(an,be))&&(Ae.animate=this.animateOption,Ae.update(be)),delete et[ge]}else{var We=this.getShapeFactory();Ae=new ca({shapeFactory:We,container:ne,offscreenGroup:this.getOffscreenGroup()}),Ae.geometry=this,Ae.animate=this.animateOption,Ae.draw(be,m)}return Lt.push(Ae),Et[ge]=Ae,Lt},o.prototype.getPointsAndData=function(t){for(var r=[],m=[],D=0,et=t.length;D<et;D++){var Et=t[D];r.push({x:Et.x,y:Et.y}),m.push(Et[y])}return{points:r,data:m}},o.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]),m=this.getPointsAndData(t),D=m.points,et=m.data;return r.mappingData=t,r.data=et,r.isStack=!!this.getAdjust("stack"),r.points=D,r.connectNulls=this.connectNulls,r.showSinglePoint=this.showSinglePoint,r},o}(la),wu=Zc;function $c(c,o,t,r,m){var D=[];if(c.length){for(var et=[],Et=[],Lt=0,ne=c.length;Lt<ne;Lt++){var ge=c[Lt];et.push(ge[1]),Et.push(ge[0])}Et=Et.reverse(),Object(a.each)([et,Et],function(be,Ae){var We=[],an=r.parsePoints(be),gn=an[0];et.length===1&&Et.length===1?We=Ae===0?[["M",gn.x-.5,gn.y],["L",gn.x+.5,gn.y]]:[["L",gn.x+.5,gn.y],["L",gn.x-.5,gn.y]]:(o&&an.push({x:gn.x,y:gn.y}),t?We=Gn(an,!1,m):We=zn(an,!1),Ae>0&&(We[0][0]="L")),D=D.concat(We)}),D.push(["Z"])}return D}function Eu(c,o,t,r,m){for(var D=bo(c,o,!o,"lineWidth"),et=c.connectNulls,Et=c.isInCircle,Lt=c.points,ne=c.showSinglePoint,ge=Ro(Lt,et,ne),be=[],Ae=0,We=ge.length;Ae<We;Ae++){var an=ge[Ae];be=be.concat($c(an,Et,t,r,m))}return D.path=be,D}function Ws(c){var o=c.start,t=c.end;return[[o.x,t.y],[t.x,o.y]]}var qc=oa("area",{defaultShapeType:"area",getDefaultPoints:function(o){var t=o.x,r=o.y0,m=Object(a.isArray)(o.y)?o.y:[r,o.y];return m.map(function(D){return{x:t,y:D}})}});fo("area","area",{draw:function(o,t){var r=Eu(o,!1,!1,this),m=t.addShape({type:"path",attrs:r,name:"area"});return m},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return et===void 0&&(et=5.5),[["M",m-et,D-4],["L",m+et,D-4],["L",m+et,D+4],["L",m-et,D+4],["Z"]]},style:{r:5,fill:t}}}});var bh=qc,tl=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="area",r.shapeType="area",r.generatePoints=!0,r.startOnZero=!0;var m=t.startOnZero,D=m===void 0?!0:m,et=t.sortable,Et=et===void 0?!1:et,Lt=t.showSinglePoint,ne=Lt===void 0?!1:Lt;return r.startOnZero=D,r.sortable=Et,r.showSinglePoint=ne,r}return o.prototype.getPointsAndData=function(t){for(var r=[],m=[],D=0,et=t.length;D<et;D++){var Et=t[D];r.push(Et.points),m.push(Et[y])}return{points:r,data:m}},o.prototype.getYMinValue=function(){if(this.startOnZero)return c.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},o}(wu),el=tl,nl=oa("edge",{defaultShapeType:"line",getDefaultPoints:function(o){return ho(o)}});fo("edge","line",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),m=zn(this.parsePoints(o.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var oc=nl,rl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return o}(la),il=rl,ol=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return o.prototype.createElements=function(t,r,m){m===void 0&&(m=!1);var D=this.prepareRange(t),et=this.prepareSize(),Et=Object(a.get)(this.styleOption,["style","shadowBlur"]);return Object(a.isNumber)(Et)||(Et=et/2),this.prepareGreyScaleBlurredCircle(et,Et),this.drawWithRange(t,D,et,Et),null},o.prototype.clear=function(){c.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},o.prototype.prepareRange=function(t){var r=this.getAttribute("color"),m=r.getFields()[0],D=Infinity,et=-Infinity;return t.forEach(function(Et){var Lt=Et[y][m];Lt>et&&(et=Lt),Lt<D&&(D=Lt)}),D===et&&(D=et-1),[D,et]},o.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return Object(a.isNumber)(t)||(t=this.getDefaultSize()),t},o.prototype.prepareGreyScaleBlurredCircle=function(t,r){var m=this.getGrayScaleBlurredCanvas(),D=t+r,et=m.getContext("2d");m.width=m.height=D*2,et.clearRect(0,0,m.width,m.height),et.shadowOffsetX=et.shadowOffsetY=D*2,et.shadowBlur=r,et.shadowColor="black",et.beginPath(),et.arc(-D,-D,t,0,Math.PI*2,!0),et.closePath(),et.fill()},o.prototype.drawWithRange=function(t,r,m,D){var et=this.coordinate,Et=et.start,Lt=et.end,ne=this.coordinate.getWidth(),ge=this.coordinate.getHeight(),be=this.getAttribute("color"),Ae=be.getFields()[0];this.clearShadowCanvasCtx();var We=this.getShadowCanvasCtx();r&&(t=t.filter(function(Ai){return Ai[y][Ae]<=r[1]&&Ai[y][Ae]>=r[0]}));for(var an=this.scales[Ae],gn=0,Yn=t;gn<Yn.length;gn++){var Hn=Yn[gn],ir=this.getDrawCfg(Hn),cr=ir.x,Rr=ir.y,zr=an.scale(Hn[y][Ae]);this.drawGrayScaleBlurredCircle(cr-Et.x,Rr-Lt.y,m+D,zr,We)}var Ur=We.getImageData(0,0,ne,ge);this.clearShadowCanvasCtx(),this.colorize(Ur),We.putImageData(Ur,0,0);var ki=this.getImageShape();ki.attr("x",Et.x),ki.attr("y",Lt.y),ki.attr("width",ne),ki.attr("height",ge),ki.attr("img",We.canvas),ki.set("origin",this.getShapeInfo(t))},o.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),r=this.coordinate;return Math.min(r.getWidth()/(t.scales[0].ticks.length*4),r.getHeight()/(t.scales[1].ticks.length*4))},o.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},o.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},o.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},o.prototype.drawGrayScaleBlurredCircle=function(t,r,m,D,et){var Et=this.getGrayScaleBlurredCanvas();et.globalAlpha=D,et.drawImage(Et,t-m,r-m)},o.prototype.colorize=function(t){for(var r=this.getAttribute("color"),m=t.data,D=this.paletteCache,et=3;et<m.length;et+=4){var Et=m[et];if(Object(a.isNumber)(Et)){var Lt=D[Et]?D[Et]:mt.a.rgb2arr(r.gradient(Et/256));m[et-3]=Lt[0],m[et-2]=Lt[1],m[et-1]=Lt[2],m[et]=Et}}},o.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var r=this.container;return t=r.addShape({type:"image",attrs:{}}),this.imageShape=t,t},o.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]);return Object(at.a)(Object(at.a)({},r),{mappingData:t,data:this.getData(t)})},o.prototype.getData=function(t){return t.map(function(r){return r[y]})},o}(la),al=ol;function Mu(c,o){o===void 0&&(o=!1);var t=c.x,r=c.y,m=c.y0,D=c.size,et,Et;Object(a.isArray)(r)?(et=r[0],Et=r[1]):(et=m,Et=r);var Lt,ne;Object(a.isArray)(t)?(Lt=t[0],ne=t[1]):(Lt=t-D/2,ne=t+D/2);var ge=[{x:Lt,y:et},{x:Lt,y:Et}];return o?ge.push({x:ne,y:(Et+et)/2}):ge.push({x:ne,y:Et},{x:ne,y:et}),ge}function Au(c,o){o===void 0&&(o=!0);var t=[],r=c[0];t.push(["M",r.x,r.y]);for(var m=1,D=c.length;m<D;m++)t.push(["L",c[m].x,c[m].y]);return o&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}function xs(c,o){var t=0,r=0,m=0,D=0;return Object(a.isArray)(c)?c.length===1?t=r=m=D=c[0]:c.length===2?(t=m=c[0],r=D=c[1]):c.length===3?(t=c[0],r=D=c[1],m=c[2]):(t=c[0],r=c[1],m=c[2],D=c[3]):t=r=m=D=c,t+r>o&&(t=t?o/(1+r/t):0,r=o-t),m+D>o&&(m=m?o/(1+D/m):0,D=o-m),[t||0,r||0,m||0,D||0]}function ac(c,o,t){var r=[];if(t.isRect){var m=t.isTransposed?{x:t.start.x,y:o[0].y}:{x:o[0].x,y:t.start.y},D=t.isTransposed?{x:t.end.x,y:o[2].y}:{x:o[3].x,y:t.end.y},et=Object(a.get)(c,["background","style","radius"]);if(et){var Et=t.isTransposed?Math.abs(o[0].y-o[2].y):o[2].x-o[1].x,Lt=t.isTransposed?t.getWidth():t.getHeight(),ne=xs(et,Math.min(Et,Lt)),ge=ne[0],be=ne[1],Ae=ne[2],We=ne[3];r.push(["M",m.x,D.y+ge]),ge!==0&&r.push(["A",ge,ge,0,0,1,m.x+ge,D.y]),r.push(["L",D.x-be,D.y]),be!==0&&r.push(["A",be,be,0,0,1,D.x,D.y+be]),r.push(["L",D.x,m.y-Ae]),Ae!==0&&r.push(["A",Ae,Ae,0,0,1,D.x-Ae,m.y]),r.push(["L",m.x+We,m.y]),We!==0&&r.push(["A",We,We,0,0,1,m.x,m.y-We])}else r.push(["M",m.x,m.y]),r.push(["L",D.x,m.y]),r.push(["L",D.x,D.y]),r.push(["L",m.x,D.y]),r.push(["L",m.x,m.y]);r.push(["z"])}if(t.isPolar){var an=t.getCenter(),gn=ao(c,t),Yn=gn.startAngle,Hn=gn.endAngle;if(t.type!=="theta"&&!t.isTransposed)r=no(an.x,an.y,t.getRadius(),Yn,Hn);else{var ir=function(Ur){return Math.pow(Ur,2)},ge=Math.sqrt(ir(an.x-o[0].x)+ir(an.y-o[0].y)),be=Math.sqrt(ir(an.x-o[2].x)+ir(an.y-o[2].y));r=no(an.x,an.y,ge,t.startAngle,t.endAngle,be)}}return r}function sl(c,o,t){var r=t.getWidth(),m=t.getHeight(),D=t.type==="rect",et=[],Et=(c[2].x-c[1].x)/2,Lt=t.isTransposed?Et*m/r:Et*r/m;return o==="round"?(D?(et.push(["M",c[0].x,c[0].y+Lt]),et.push(["L",c[1].x,c[1].y-Lt]),et.push(["A",Et,Et,0,0,1,c[2].x,c[2].y-Lt]),et.push(["L",c[3].x,c[3].y+Lt]),et.push(["A",Et,Et,0,0,1,c[0].x,c[0].y+Lt])):(et.push(["M",c[0].x,c[0].y]),et.push(["L",c[1].x,c[1].y]),et.push(["A",Et,Et,0,0,1,c[2].x,c[2].y]),et.push(["L",c[3].x,c[3].y]),et.push(["A",Et,Et,0,0,1,c[0].x,c[0].y])),et.push(["z"])):et=Au(c),et}function sc(c,o,t){var r=[];return Object(a.isNil)(o)?t?r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[2].x,c[2].y],["Z"]):r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[3].x,c[3].y],["Z"]):r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",o[1].x,o[1].y],["L",o[0].x,o[0].y],["Z"]),r}function Os(c,o,t){var r,m,D,et,Et=c[0],Lt=c[1],ne=c[2],ge=c[3],be=[0,0,0,0],Ae=be[0],We=be[1],an=be[2],gn=be[3];Et.y<Lt.y?(Lt=c[0],Et=c[1],ge=c[2],ne=c[3],r=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),gn=r[0],an=r[1],We=r[2],Ae=r[3]):(m=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),Ae=m[0],We=m[1],an=m[2],gn=m[3]),o.isTransposed&&(Et=c[0],ge=c[1],ne=c[2],Lt=c[3],c[0].x>c[1].x?(ge=c[0],Et=c[1],Lt=c[2],ne=c[3],D=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),Ae=D[0],gn=D[1],an=D[2],We=D[3]):(et=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),We=et[0],an=et[1],gn=et[2],Ae=et[3]));var Yn=[];return Yn.push(["M",Lt.x,Lt.y+Ae]),Ae!==0&&Yn.push(["A",Ae,Ae,0,0,1,Lt.x+Ae,Lt.y]),Yn.push(["L",ne.x-We,ne.y]),We!==0&&Yn.push(["A",We,We,0,0,1,ne.x,ne.y+We]),Yn.push(["L",ge.x,ge.y-an]),an!==0&&Yn.push(["A",an,an,0,0,1,ge.x-an,ge.y]),Yn.push(["L",Et.x+gn,Et.y]),gn!==0&&Yn.push(["A",gn,gn,0,0,1,Et.x,Et.y-gn]),Yn.push(["L",Lt.x,Lt.y+Ae]),Yn.push(["z"]),Yn}var ul=oa("interval",{defaultShapeType:"rect",getDefaultPoints:function(o){return Mu(o)}});fo("interval","rect",{draw:function(o,t){var r=bo(o,!1,!0),m=t,D=o==null?void 0:o.background;if(D){m=t.addGroup();var et=jo(o),Et=ac(o,this.parsePoints(o.points),this.coordinate);m.addShape("path",{attrs:Object(at.a)(Object(at.a)({},et),{path:Et}),zIndex:-1,name:ns})}var Lt;r.radius&&this.coordinate.isRect?Lt=Os(this.parsePoints(o.points),this.coordinate,r.radius):Lt=this.parsePath(sl(o.points,r.lineCap,this.coordinate));var ne=m.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:Lt}),name:"interval"});return D?m:ne},getMarker:function(o){var t=o.color,r=o.isInPolar;return r?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var xh=ul;function cl(c,o){var t=c.length,r=c;Object(a.isString)(r[0])&&(r=c.map(function(Et){return o.translate(Et)}));for(var m=r[1]-r[0],D=2;D<t;D++){var et=r[D]-r[D-1];m>et&&(m=et)}return m}function ll(c,o){if(o){var t=Object(a.flatten)(c),r=Object(a.valuesOfKey)(t,o);return r.length}return c.length}function uc(c){var o=c.theme,t=c.coordinate,r=c.getXScale(),m=r.values,D=c.beforeMappingData,et=m.length,Et=Xn(c.coordinate),Lt=c.intervalPadding,ne=c.dodgePadding,ge=c.maxColumnWidth||o.maxColumnWidth,be=c.minColumnWidth||o.minColumnWidth,Ae=c.columnWidthRatio||o.columnWidthRatio,We=c.multiplePieWidthRatio||o.multiplePieWidthRatio,an=c.roseWidthRatio||o.roseWidthRatio;if(r.isLinear&&m.length>1){m.sort();var gn=cl(m,r);et=(r.max-r.min)/gn,m.length>et&&(et=m.length)}var Yn=r.range,Hn=1/et,ir=1;if(t.isPolar?t.isTransposed&&et>1?ir=We:ir=an:(r.isLinear&&(Hn*=Yn[1]-Yn[0]),ir=Ae),!Object(a.isNil)(Lt)&&Lt>=0){var cr=Lt/Et;Hn=(1-(et-1)*cr)/et}else Hn*=ir;if(c.getAdjust("dodge")){var Rr=c.getAdjust("dodge"),zr=Rr.dodgeBy,Ur=ll(D,zr);if(!Object(a.isNil)(ne)&&ne>=0){var ki=ne/Et;Hn=(Hn-ki*(Ur-1))/Ur}else!Object(a.isNil)(Lt)&&Lt>=0&&(Hn*=ir),Hn=Hn/Ur;Hn=Hn>=0?Hn:0}if(!Object(a.isNil)(ge)&&ge>=0){var Ai=ge/Et;Hn>Ai&&(Hn=Ai)}if(!Object(a.isNil)(be)&&be>=0){var mi=be/Et;Hn<mi&&(Hn=mi)}return Hn}var fl=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="interval",r.shapeType="interval",r.generatePoints=!0;var m=t.background;return r.background=m,r}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),m,D=this.getAttribute("size");if(D){m=this.getAttributeValues(D,t)[0];var et=this.coordinate,Et=Xn(et);m=m/Et}else this.defaultSize||(this.defaultSize=uc(this)),m=this.defaultSize;return r.size=m,r},o.prototype.adjustScale=function(){c.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var r=this.scaleDefs,m=t.field,D=t.min,et=t.max,Et=t.type;Et!=="time"&&(D>0&&!Object(a.get)(r,[m,"min"])&&t.change({min:0}),et<=0&&!Object(a.get)(r,[m,"max"])&&t.change({max:0}))}},o.prototype.getDrawCfg=function(t){var r=c.prototype.getDrawCfg.call(this,t);return r.background=this.background,r},o}(la),Ss=fl,Tu=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="line";var m=t.sortable,D=m===void 0?!1:m;return r.sortable=D,r}return o}(wu),cc=Tu,lc=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],hl=["cross","tick","plus","hyphen","line"];function Cu(c,o,t,r,m){var D=bo(o,m,!m,"r"),et=c.parsePoints(o.points),Et=et[0];if(o.isStack)Et=et[1];else if(et.length>1){for(var Lt=t.addGroup(),ne=0,ge=et;ne<ge.length;ne++){var be=ge[ne];Lt.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[r]||r}),be)})}return Lt}return t.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[r]||r}),Et)})}var dl=oa("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(o){return ho(o)}});Object(a.each)(lc,function(c){fo("point","hollow-"+c,{draw:function(t,r){return Cu(this,t,r,c,!0)},getMarker:function(t){var r=t.color;return{symbol:bn[c]||c,style:{r:4.5,stroke:r,fill:null}}}})});var Oh=dl,vl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return o.prototype.getDrawCfg=function(t){var r=c.prototype.getDrawCfg.call(this,t);return Object(at.a)(Object(at.a)({},r),{isStack:!!this.getAdjust("stack")})},o}(la),pl=vl;function gl(c){for(var o=c[0],t=1,r=[["M",o.x,o.y]];t<c.length;){var m=c[t];(m.x!==c[t-1].x||m.y!==c[t-1].y)&&(r.push(["L",m.x,m.y]),m.x===o.x&&m.y===o.y&&t<c.length-1&&(o=c[t+1],r.push(["Z"]),r.push(["M",o.x,o.y]),t++)),t++}return Object(a.isEqual)(Object(a.last)(r),o)||r.push(["L",o.x,o.y]),r.push(["Z"]),r}var ws=oa("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var t=[];return Object(a.each)(o.x,function(r,m){var D=o.y[m];t.push({x:r,y:D})}),t}});fo("polygon","polygon",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var r=bo(o,!0,!0),m=this.parsePath(gl(o.points));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m}),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Sh=ws,yl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),m=r.x,D=r.y,et;if(!(Object(a.isArray)(m)&&Object(a.isArray)(D))){var Et=this.getXScale(),Lt=this.getYScale(),ne=Et.values.length,ge=Lt.values.length,be=.5*1/ne,Ae=.5*1/ge;Et.isCategory&&Lt.isCategory?(m=[m-be,m-be,m+be,m+be],D=[D-Ae,D+Ae,D+Ae,D-Ae]):Object(a.isArray)(m)?(et=m,m=[et[0],et[0],et[1],et[1]],D=[D-Ae/2,D+Ae/2,D+Ae/2,D-Ae/2]):Object(a.isArray)(D)&&(et=D,D=[et[0],et[1],et[1],et[0]],m=[m-be/2,m-be/2,m+be/2,m+be/2]),r.x=m,r.y=D}return r},o}(la),ml=yl,bl=oa("schema",{defaultShapeType:""}),jd=bl,xl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),m,D=this.getAttribute("size");if(D){m=this.getAttributeValues(D,t)[0];var et=this.coordinate,Et=Xn(et);m=m/Et}else this.defaultSize||(this.defaultSize=uc(this)),m=this.defaultSize;return r.size=m,r},o}(la),fc=xl;fo("area","line",{draw:function(o,t){var r=Eu(o,!0,!1,this),m=t.addShape({type:"path",attrs:r,name:"area"});return m},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return et===void 0&&(et=5.5),[["M",m-et,D-4],["L",m+et,D-4],["L",m+et,D+4],["L",m-et,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}}),fo("area","smooth",{draw:function(o,t){var r=this.coordinate,m=Eu(o,!1,!0,this,Ws(r)),D=t.addShape({type:"path",attrs:m,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return et===void 0&&(et=5.5),[["M",m-et,D-4],["L",m+et,D-4],["L",m+et,D+4],["L",m-et,D+4],["Z"]]},style:{r:5,fill:t}}}}),fo("area","smooth-line",{draw:function(o,t){var r=this.coordinate,m=Eu(o,!0,!0,this,Ws(r)),D=t.addShape({type:"path",attrs:m,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return et===void 0&&(et=5.5),[["M",m-et,D-4],["L",m+et,D-4],["L",m+et,D+4],["L",m-et,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function hc(c,o){return["C",c.x*1/2+o.x*1/2,c.y,c.x*1/2+o.x*1/2,o.y,o.x,o.y]}function dc(c,o){var t=[];t.push({x:o.x,y:o.y}),t.push(c);var r=["Q"];return Object(a.each)(t,function(m){r.push(m.x,m.y)}),r}function Ol(c,o,t){var r=dc(o,t),m=[["M",c.x,c.y]];return m.push(r),m}function Sl(c,o){var t=dc(c[1],o),r=dc(c[3],o),m=[["M",c[0].x,c[0].y]];return m.push(r),m.push(["L",c[3].x,c[3].y]),m.push(["L",c[2].x,c[2].y]),m.push(t),m.push(["L",c[1].x,c[1].y]),m.push(["L",c[0].x,c[0].y]),m.push(["Z"]),m}fo("edge","arc",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),m=o.points,D=m.length>2?"weight":"normal",et;if(o.isInCircle){var Et={x:0,y:1};return D==="normal"?et=Ol(m[0],m[1],Et):(r.fill=r.stroke,et=Sl(m,Et)),et=this.parsePath(et),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})})}else{if(D==="normal")return m=this.parsePoints(m),et=Mo((m[1].x+m[0].x)/2,m[0].y,Math.abs(m[1].x-m[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})});var Lt=hc(m[1],m[3]),ne=hc(m[2],m[0]);return et=[["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],Lt,["L",m[3].x,m[3].y],["L",m[2].x,m[2].y],ne,["Z"]],et=this.parsePath(et),r.fill=r.stroke,t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})})}},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});function wl(c,o){var t=hc(c,o),r=[["M",c.x,c.y]];return r.push(t),r}fo("edge","smooth",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),m=o.points,D=this.parsePath(wl(m[0],m[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var Ys=1/3;function El(c,o){var t=[];t.push({x:c.x,y:c.y*(1-Ys)+o.y*Ys}),t.push({x:o.x,y:c.y*(1-Ys)+o.y*Ys}),t.push(o);var r=[["M",c.x,c.y]];return Object(a.each)(t,function(m){r.push(["L",m.x,m.y])}),r}fo("edge","vhv",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),m=o.points,D=this.parsePath(El(m[0],m[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}}),fo("interval","funnel",{getPoints:function(o){return o.size=o.size*2,Mu(o)},draw:function(o,t){var r=bo(o,!1,!0),m=this.parsePath(sc(o.points,o.nextPoints,!1)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}}),fo("interval","hollow-rect",{draw:function(o,t){var r=bo(o,!0,!1),m=t,D=o==null?void 0:o.background;if(D){m=t.addGroup();var et=jo(o),Et=ac(o,this.parsePoints(o.points),this.coordinate);m.addShape("path",{attrs:Object(at.a)(Object(at.a)({},et),{path:Et}),zIndex:-1,name:ns})}var Lt=this.parsePath(Au(o.points)),ne=m.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:Lt}),name:"interval"});return D?m:ne},getMarker:function(o){var t=o.color,r=o.isInPolar;return r?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function Xs(c){var o=c.x,t=c.y,r=c.y0;return Object(a.isArray)(t)?t.map(function(m,D){return{x:Object(a.isArray)(o)?o[D]:o,y:m}}):[{x:o,y:r},{x:o,y:t}]}fo("interval","line",{getPoints:function(o){return Xs(o)},draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),m=te(Object(at.a)({},r),["fill"]),D=this.parsePath(Au(o.points,!1)),et=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},m),{path:D}),name:"interval"});return et},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return[["M",m,D-et],["L",m,D+et]]},style:{r:5,stroke:t}}}}),fo("interval","pyramid",{getPoints:function(o){return o.size=o.size*2,Mu(o,!0)},draw:function(o,t){var r=bo(o,!1,!0),m=this.parsePath(sc(o.points,o.nextPoints,!0)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});function Ml(c){var o=c.x,t=c.y,r=c.y0,m=c.size,D,et;Object(a.isArray)(t)?(D=t[0],et=t[1]):(D=r,et=t);var Et=o+m/2,Lt=o-m/2;return[{x:o,y:D},{x:o,y:et},{x:Lt,y:D},{x:Et,y:D},{x:Lt,y:et},{x:Et,y:et}]}function Al(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y]]}fo("interval","tick",{getPoints:function(o){return Ml(o)},draw:function(o,t){var r=bo(o,!0,!1),m=this.parsePath(Al(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){return[["M",m-et/2,D-et],["L",m+et/2,D-et],["M",m,D-et],["L",m,D+et],["M",m-et/2,D+et],["L",m+et/2,D+et]]},style:{r:5,stroke:t}}}});var Tl=function(o,t,r){var m=o.x,D=o.y,et=t.x,Et=t.y,Lt;switch(r){case"hv":Lt=[{x:et,y:D}];break;case"vh":Lt=[{x:m,y:Et}];break;case"hvh":var ne=(et+m)/2;Lt=[{x:ne,y:D},{x:ne,y:Et}];break;case"vhv":var ge=(D+Et)/2;Lt=[{x:m,y:ge},{x:et,y:ge}];break;default:break}return Lt};function wh(c,o){var t=[];return Object(a.each)(c,function(r,m){var D=c[m+1];if(t.push(r),D){var et=Tl(r,D,o);t=t.concat(et)}}),t}function Eh(c){return c.map(function(o,t){return t===0?["M",o.x,o.y]:["L",o.x,o.y]})}function Mh(c,o){var t=Ro(c.points,c.connectNulls,c.showSinglePoint),r=[];return Object(a.each)(t,function(m){var D=wh(m,o);r=r.concat(Eh(D))}),Object(at.a)(Object(at.a)({},bo(c,!0,!1,"lineWidth")),{path:r})}Object(a.each)(["hv","vh","hvh","vhv"],function(c){fo("line",c,{draw:function(t,r){var m=Mh(t,c),D=r.addShape({type:"path",attrs:m,name:"line"});return D},getMarker:function(t){return Zo(t,c)}})}),Object(a.each)(hl,function(c){fo("point",c,{draw:function(t,r){return Cu(this,t,r,c,!0)},getMarker:function(t){var r=t.color;return{symbol:bn[c],style:{r:4.5,stroke:r,fill:null}}}})}),fo("point","image",{draw:function(o,t){var r=bo(o,!1,!1,"r").r,m=this.parsePoints(o.points),D=m[0];if(o.isStack)D=m[1];else if(m.length>1){for(var et=t.addGroup(),Et=0,Lt=m;Et<Lt.length;Et++){var ne=Lt[Et];et.addShape("image",{attrs:{x:ne.x-r/2,y:ne.y-r,width:r,height:r,img:o.shape[1]}})}return et}return t.addShape("image",{attrs:{x:D.x-r/2,y:D.y-r,width:r,height:r,img:o.shape[1]}})},getMarker:function(o){var t=o.color;return{symbol:"circle",style:{r:4.5,fill:t}}}}),Object(a.each)(lc,function(c){fo("point",c,{draw:function(t,r){return Cu(this,t,r,c,!1)},getMarker:function(t){var r=t.color;return{symbol:bn[c]||c,style:{r:4.5,fill:r}}}})});function vc(c){var o=Object(a.isArray)(c)?c:[c],t=o[0],r=o[o.length-1],m=o.length>1?o[1]:t,D=o.length>3?o[3]:r,et=o.length>2?o[2]:m;return{min:t,max:r,min1:m,max1:D,median:et}}function pc(c,o,t){var r=t/2,m;if(Object(a.isArray)(o)){var D=vc(o),et=D.min,Et=D.max,Lt=D.median,ne=D.min1,ge=D.max1,be=c-r,Ae=c+r;m=[[be,Et],[Ae,Et],[c,Et],[c,ge],[be,ne],[be,ge],[Ae,ge],[Ae,ne],[c,ne],[c,et],[be,et],[Ae,et],[be,Lt],[Ae,Lt]]}else{o=Object(a.isNil)(o)?.5:o;var We=vc(c),et=We.min,Et=We.max,Lt=We.median,ne=We.min1,ge=We.max1,an=o-r,gn=o+r;m=[[et,an],[et,gn],[et,o],[ne,o],[ne,an],[ne,gn],[ge,gn],[ge,an],[ge,o],[Et,o],[Et,an],[Et,gn],[Lt,an],[Lt,gn]]}return m.map(function(Yn){return{x:Yn[0],y:Yn[1]}})}function Cl(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y],["L",c[6].x,c[6].y],["L",c[7].x,c[7].y],["L",c[4].x,c[4].y],["Z"],["M",c[8].x,c[8].y],["L",c[9].x,c[9].y],["M",c[10].x,c[10].y],["L",c[11].x,c[11].y],["M",c[12].x,c[12].y],["L",c[13].x,c[13].y]]}fo("schema","box",{getPoints:function(o){var t=o.x,r=o.y,m=o.size;return pc(t,r,m)},draw:function(o,t){var r=bo(o,!0,!1),m=this.parsePath(Cl(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){var Et=[D-6,D-3,D,D+3,D+6],Lt=pc(m,Et,et);return[["M",Lt[0].x+1,Lt[0].y],["L",Lt[1].x-1,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["M",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["L",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y],["L",Lt[4].x,Lt[4].y],["Z"],["M",Lt[8].x,Lt[8].y],["L",Lt[9].x,Lt[9].y],["M",Lt[10].x+1,Lt[10].y],["L",Lt[11].x-1,Lt[11].y],["M",Lt[12].x,Lt[12].y],["L",Lt[13].x,Lt[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function jl(c){var o=Object(a.isArray)(c)?c:[c],t=o.sort(function(r,m){return m-r});return Kt(t,4,t[t.length-1])}function ju(c,o,t){var r=jl(o);return[{x:c,y:r[0]},{x:c,y:r[1]},{x:c-t/2,y:r[2]},{x:c-t/2,y:r[1]},{x:c+t/2,y:r[1]},{x:c+t/2,y:r[2]},{x:c,y:r[2]},{x:c,y:r[3]}]}function Il(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["L",c[4].x,c[4].y],["L",c[5].x,c[5].y],["Z"],["M",c[6].x,c[6].y],["L",c[7].x,c[7].y]]}fo("schema","candle",{getPoints:function(o){var t=o.x,r=o.y,m=o.size;return ju(t,r,m)},draw:function(o,t){var r=bo(o,!0,!0),m=this.parsePath(Il(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:m,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(m,D,et){var Et=[D+7.5,D+3,D-3,D-7.5],Lt=ju(m,Et,et);return[["M",Lt[0].x,Lt[0].y],["L",Lt[1].x,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["L",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["Z"],["M",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function Pl(c,o){var t=Math.abs(c[0].x-c[2].x),r=Math.abs(c[0].y-c[2].y),m=Math.min(t,r);o&&(m=Object(a.clamp)(o,0,Math.min(t,r))),m=m/2;var D=(c[0].x+c[2].x)/2,et=(c[0].y+c[2].y)/2;return{x:D-m,y:et-m,width:m*2,height:m*2}}fo("polygon","square",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var r=bo(o,!0,!0),m=this.parsePoints(o.points);return t.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},r),Pl(m,o.size)),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Ah=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelValueDir=function(t){var r="y",m=t.points;return m[0][r]<=m[2][r]?1:-1},o.prototype.getLabelOffsetPoint=function(t,r,m){var D,et=c.prototype.getLabelOffsetPoint.call(this,t,r,m),Et=this.getCoordinate().isTransposed,Lt=Et?"x":"y",ne=this.getLabelValueDir(t.mappingData);return Object(at.a)(Object(at.a)({},et),(D={},D[Lt]=et[Lt]*ne,D))},o.prototype.getThemedLabelCfg=function(t){var r=this.geometry,m=this.getDefaultLabelCfg(),D=r.theme;return Object(a.deepMix)({},m,D.labels,t.position==="middle"?{offset:0}:{},t)},o.prototype.setLabelPosition=function(t,r,m,D){var et=this.getCoordinate(),Et=et.isTransposed,Lt=r.points,ne=et.convert(Lt[0]),ge=et.convert(Lt[2]),be=this.getLabelValueDir(r),Ae,We,an,gn,Yn=Object(a.isArray)(r.shape)?r.shape[0]:r.shape;if(Yn==="funnel"||Yn==="pyramid"){var Hn=Object(a.get)(r,"nextPoints"),ir=Object(a.get)(r,"points");if(Hn){var cr=et.convert(ir[0]),Rr=et.convert(ir[1]),zr=et.convert(Hn[0]),Ur=et.convert(Hn[1]);Et?(Ae=Math.min(zr.y,cr.y),an=Math.max(zr.y,cr.y),We=(Rr.x+Ur.x)/2,gn=(cr.x+zr.x)/2):(Ae=Math.min((Rr.y+Ur.y)/2,(cr.y+zr.y)/2),an=Math.max((Rr.y+Ur.y)/2,(cr.y+zr.y)/2),We=Ur.x,gn=cr.x)}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x;switch(D){case"right":t.x=We,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"left":t.x=gn,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"bottom":Et&&(t.x=(We+gn)/2),t.y=an,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;case"middle":Et&&(t.x=(We+gn)/2),t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline","middle");break;case"top":Et&&(t.x=(We+gn)/2),t.y=Ae,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;default:break}},o}(Fe),Th=Ah,Iu=Math.PI/2,Ch=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelOffset=function(t){var r=this.getCoordinate(),m=0;if(Object(a.isNumber)(t))m=t;else if(Object(a.isString)(t)&&t.indexOf("%")!==-1){var D=r.getRadius();r.innerRadius>0&&(D=D*(1-r.innerRadius)),m=parseFloat(t)*.01*D}return m},o.prototype.getLabelItems=function(t){var r=c.prototype.getLabelItems.call(this,t),m=this.geometry.getYScale();return Object(a.map)(r,function(D){if(D&&m){var et=m.scale(Object(a.get)(D.data,m.field));return Object(at.a)(Object(at.a)({},D),{percent:et})}return D})},o.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),m;if(t.labelEmit)m=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!r.isTransposed)m="center";else{var D=r.getCenter(),et=t.offset;Math.abs(t.x-D.x)<1?m="center":t.angle>Math.PI||t.angle<=0?m=et>0?"left":"right":m=et>0?"right":"left"}return m},o.prototype.getLabelPoint=function(t,r,m){var D=1,et,Et=t.content[m];this.isToMiddle(r)?et=this.getMiddlePoint(r.points):(t.content.length===1&&m===0?m=1:m===0&&(D=-1),et=this.getArcPoint(r,m));var Lt=t.offset*D,ne=this.getPointAngle(et),ge=t.labelEmit,be=this.getCirclePoint(ne,Lt,et,ge);return be.r===0?be.content="":(be.content=Et,be.angle=ne,be.color=r.color),be.rotate=t.autoRotate?this.getLabelRotate(ne,Lt,ge):t.rotate,be.start={x:et.x,y:et.y},be},o.prototype.getArcPoint=function(t,r){return r===void 0&&(r=0),!Object(a.isArray)(t.x)&&!Object(a.isArray)(t.y)?{x:t.x,y:t.y}:{x:Object(a.isArray)(t.x)?t.x[r]:t.x,y:Object(a.isArray)(t.y)?t.y[r]:t.y}},o.prototype.getPointAngle=function(t){return $n(this.getCoordinate(),t)},o.prototype.getCirclePoint=function(t,r,m,D){var et=this.getCoordinate(),Et=et.getCenter(),Lt=rn(et,m);if(Lt===0)return Object(at.a)(Object(at.a)({},Et),{r:Lt});var ne=t;if(et.isTransposed&&Lt>r&&!D){var ge=Math.asin(r/(2*Lt));ne=t+ge*2}else Lt=Lt+r;return{x:Et.x+Lt*Math.cos(ne),y:Et.y+Lt*Math.sin(ne),r:Lt}},o.prototype.getLabelRotate=function(t,r,m){var D=t+Iu;return m&&(D-=Iu),D&&(D>Iu?D=D-Math.PI:D<-Iu&&(D=D+Math.PI)),D},o.prototype.getMiddlePoint=function(t){var r=this.getCoordinate(),m=t.length,D={x:0,y:0};return Object(a.each)(t,function(et){D.x+=et.x,D.y+=et.y}),D.x/=m,D.y/=m,D=r.convert(D),D},o.prototype.isToMiddle=function(t){return t.x.length>2},o}(Fe),gc=Ch,Dl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return o.prototype.getDefaultLabelCfg=function(t,r){var m=c.prototype.getDefaultLabelCfg.call(this,t,r);return Object(a.deepMix)({},m,Object(a.get)(this.geometry.theme,"pieLabels",{}))},o.prototype.getLabelOffset=function(t){return c.prototype.getLabelOffset.call(this,t)||0},o.prototype.getLabelRotate=function(t,r,m){var D;return r<0&&(D=t,D>Math.PI/2&&(D=D-Math.PI),D<-Math.PI/2&&(D=D+Math.PI)),D},o.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),m=r.getCenter(),D;return t.angle<=Math.PI/2&&t.x>=m.x?D="left":D="right",t.offset<=0&&(D==="right"?D="left":D="right"),D},o.prototype.getArcPoint=function(t){return t},o.prototype.getPointAngle=function(t){var r=this.getCoordinate(),m={x:Object(a.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},D={x:Object(a.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},et,Et=$n(r,m);if(t.points&&t.points[0].y===t.points[1].y)et=Et;else{var Lt=$n(r,D);Et>=Lt&&(Lt=Lt+Math.PI*2),et=Et+(Lt-Et)/2}return et},o.prototype.getCirclePoint=function(t,r){var m=this.getCoordinate(),D=m.getCenter(),et=m.getRadius()+r;return Object(at.a)(Object(at.a)({},Pi(D.x,D.y,et,t)),{angle:t,r:et})},o}(gc),jh=Dl,kl=4;function Ih(c,o,t,r,m,D){var et=!0,Et=r.start,Lt=r.end,ne=Math.min(Et.y,Lt.y),ge=Math.abs(Et.y-Lt.y),be,Ae=0,We=Number.MIN_VALUE,an=o.map(function(zr){return zr.y>Ae&&(Ae=zr.y),zr.y<We&&(We=zr.y),{size:t,targets:[zr.y-ne]}});for(We-=ne,Ae-ne>ge&&(ge=Ae-ne);et;)for(an.forEach(function(zr){var Ur=(Math.min.apply(We,zr.targets)+Math.max.apply(We,zr.targets))/2;zr.pos=Math.min(Math.max(We,Ur-zr.size/2),ge-zr.size)}),et=!1,be=an.length;be--;)if(be>0){var gn=an[be-1],Yn=an[be];gn.pos+gn.size>Yn.pos&&(gn.size+=Yn.size,gn.targets=gn.targets.concat(Yn.targets),gn.pos+gn.size>ge&&(gn.pos=ge-gn.size),an.splice(be,1),et=!0)}be=0,an.forEach(function(zr){var Ur=ne+t/2;zr.targets.forEach(function(){o[be].y=zr.pos+Ur,Ur+=t,be++})});for(var Hn={},ir=0,cr=c;ir<cr.length;ir++){var Rr=cr[ir];Hn[Rr.get("id")]=Rr}o.forEach(function(zr){var Ur=zr.r*zr.r,ki=Math.pow(Math.abs(zr.y-m.y),2);if(Ur<ki)zr.x=m.x;else{var Ai=Math.sqrt(Ur-ki);D?zr.x=m.x+Ai:zr.x=m.x-Ai}var mi=Hn[zr.id];mi.attr("x",zr.x),mi.attr("y",zr.y);var Ki=Object(a.find)(mi.getChildren(),function(vo){return vo.get("type")==="text"});Ki&&(Ki.attr("y",zr.y),Ki.attr("x",zr.x))})}function Ph(c,o,t,r){if(!(!c.length||!o.length)){var m=c[0]?c[0].offset:0,D=o[0].get("coordinate"),et=D.getRadius(),Et=D.getCenter();if(m>0){var Lt=14,ne=et+m,ge=ne*2+Lt*2,be={start:D.start,end:D.end},Ae=[[],[]];c.forEach(function(We){!We||(We.textAlign==="right"?Ae[0].push(We):Ae[1].push(We))}),Ae.forEach(function(We,an){var gn=ge/Lt;We.length>gn&&(We.sort(function(Yn,Hn){return Hn["..percent"]-Yn["..percent"]}),We.splice(gn,We.length-gn)),We.sort(function(Yn,Hn){return Yn.y-Hn.y}),Ih(o,We,Lt,be,Et,an)})}Object(a.each)(c,function(We){if(We&&We.labelLine){var an=We.offset,gn=We.angle,Yn=Pi(Et.x,Et.y,et,gn),Hn=Pi(Et.x,Et.y,et+an/2,gn),ir=We.x+Object(a.get)(We,"offsetX",0),cr=We.y+Object(a.get)(We,"offsetY",0),Rr={x:ir-Math.cos(gn)*kl,y:cr-Math.sin(gn)*kl};Object(a.isObject)(We.labelLine)||(We.labelLine={}),We.labelLine.path=["M "+Yn.x,Yn.y+" Q"+Hn.x,Hn.y+" "+Rr.x,Rr.y].join(",")}})}}function Rl(c,o,t){var r=c.filter(function(an){return!an.invisible});r.sort(function(an,gn){return an.y-gn.y});var m=!0,D=t.minY,et=t.maxY,Et=Math.abs(D-et),Lt,ne=0,ge=Number.MIN_VALUE,be=r.map(function(an){return an.y>ne&&(ne=an.y),an.y<ge&&(ge=an.y),{content:an.content,size:o,targets:[an.y-D],pos:null}});for(ge-=D,ne-D>Et&&(Et=ne-D);m;)for(be.forEach(function(an){var gn=(Math.min.apply(ge,an.targets)+Math.max.apply(ge,an.targets))/2;an.pos=Math.min(Math.max(ge,gn-an.size/2),Et-an.size),an.pos=Math.max(0,an.pos)}),m=!1,Lt=be.length;Lt--;)if(Lt>0){var Ae=be[Lt-1],We=be[Lt];Ae.pos+Ae.size>We.pos&&(Ae.size+=We.size,Ae.targets=Ae.targets.concat(We.targets),Ae.pos+Ae.size>Et&&(Ae.pos=Et-Ae.size),be.splice(Lt,1),m=!0)}Lt=0,be.forEach(function(an){var gn=D+o/2;an.targets.forEach(function(){r[Lt].y=an.pos+gn,gn+=o,Lt++})})}var yc=4;function Dh(c,o){var t=o.getCenter(),r=o.getRadius();if(c&&c.labelLine){var m=c.angle,D=c.offset,et=Pi(t.x,t.y,r,m),Et=c.x+Object(a.get)(c,"offsetX",0)*(Math.cos(m)>0?1:-1),Lt=c.y+Object(a.get)(c,"offsetY",0)*(Math.sin(m)>0?1:-1),ne={x:Et-Math.cos(m)*yc,y:Lt-Math.sin(m)*yc},ge=c.labelLine.smooth,be=[],Ae=ne.x-t.x,We=ne.y-t.y,an=Math.atan(We/Ae);if(Ae<0&&(an+=Math.PI),ge===!1){Object(a.isObject)(c.labelLine)||(c.labelLine={});var gn=0;(m<0&&m>-Math.PI/2||m>Math.PI*1.5)&&ne.y>et.y&&(gn=1),m>=0&&m<Math.PI/2&&ne.y>et.y&&(gn=1),m>=Math.PI/2&&m<Math.PI&&et.y>ne.y&&(gn=1),(m<-Math.PI/2||m>=Math.PI&&m<Math.PI*1.5)&&et.y>ne.y&&(gn=1);var Yn=D/2>4?4:Math.max(D/2-1,0),Hn=Pi(t.x,t.y,r+Yn,m),ir=Pi(t.x,t.y,r+D/2,an),cr=0;be.push("M "+et.x+" "+et.y),be.push("L "+Hn.x+" "+Hn.y),be.push("A "+t.x+" "+t.y+" 0 "+cr+" "+gn+" "+ir.x+" "+ir.y),be.push("L "+ne.x+" "+ne.y)}else{var Hn=Pi(t.x,t.y,r+(D/2>4?4:Math.max(D/2-1,0)),m),Rr=et.x<t.x?1:-1;be.push("M "+ne.x+" "+ne.y);var zr=(et.y-t.y)/(et.x-t.x),Ur=(ne.y-t.y)/(ne.x-t.x);Math.abs(zr-Ur)>Math.pow(Math.E,-16)&&be.push.apply(be,["C",ne.x+Rr*4,ne.y,2*Hn.x-et.x,2*Hn.y-et.y,et.x,et.y]),be.push("L "+et.x+" "+et.y)}c.labelLine.path=be.join(" ")}}function Nl(c,o,t,r){var m=Object(a.filter)(c,function(Ur){return!Object(a.isNil)(Ur)}),D=o[0]&&o[0].get("coordinate");if(!!D){for(var et=D.getCenter(),Et=D.getRadius(),Lt={},ne=0,ge=o;ne<ge.length;ne++){var be=ge[ne];Lt[be.get("id")]=be}var Ae=Object(a.get)(m[0],"labelHeight",14),We=Object(a.get)(m[0],"offset",0);if(!(We<=0)){var an="left",gn="right",Yn=Object(a.groupBy)(m,function(Ur){return Ur.x<et.x?an:gn}),Hn=D.start,ir=D.end,cr=Math.min((Et+We+Ae)*2,D.getHeight()),Rr=cr/2,zr={minX:Hn.x,maxX:ir.x,minY:et.y-Rr,maxY:et.y+Rr};Object(a.each)(Yn,function(Ur,ki){var Ai=Math.floor(cr/Ae);Ur.length>Ai&&(Ur.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(Ur,function(mi,Ki){Ki+1>Ai&&(Lt[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(Ur,Ae,zr)}),Object(a.each)(Yn,function(Ur,ki){Object(a.each)(Ur,function(Ai){var mi=ki===gn,Ki=Lt[Ai.id],vo=Ki.getChildByIndex(0);if(vo){var po=Et+We,yo=Ai.y-et.y,wo=Math.pow(po,2),Q=Math.pow(yo,2),_=wo-Q>0?wo-Q:0,w=Math.sqrt(_),L=Math.abs(Math.cos(Ai.angle)*po);mi?Ai.x=et.x+Math.max(w,L):Ai.x=et.x-Math.max(w,L)}vo&&(vo.attr("y",Ai.y),vo.attr("x",Ai.x)),Dh(Ai,D)})})}}}var Pu=4,Hs=4,Ll=4;function kh(c,o,t){var r=o.getCenter(),m=o.getRadius(),D={x:c.x-(t?Ll:-Ll),y:c.y},et=Pi(r.x,r.y,m+Pu,c.angle),Et={x:D.x,y:D.y},Lt={x:et.x,y:et.y},ne=Pi(r.x,r.y,m,c.angle),ge="";if(D.y!==et.y){var be=t?4:-4;Et.y=D.y,c.angle<0&&c.angle>=-Math.PI/2&&(Et.x=Math.max(et.x,D.x-be),D.y<et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.max(Lt.x,Et.x-be))),c.angle>0&&c.angle<Math.PI/2&&(Et.x=Math.max(et.x,D.x-be),D.y>et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.max(Lt.x,Et.x-be))),c.angle>Math.PI/2&&(Et.x=Math.min(et.x,D.x-be),D.y>et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.min(Lt.x,Et.x-be))),c.angle<-Math.PI/2&&(Et.x=Math.min(et.x,D.x-be),D.y<et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.min(Lt.x,Et.x-be)))}ge=["M "+D.x+","+D.y,"L "+Et.x+","+Et.y,"L "+Lt.x+","+Lt.y,"L "+et.x+","+et.y,"L "+ne.x+","+ne.y].join(" "),c.labelLine=Object(a.deepMix)({},c.labelLine,{path:ge})}function Rh(c,o,t,r){var m=o[0]&&o[0].get("coordinate");if(!!m){for(var D=m.getCenter(),et=m.getRadius(),Et={},Lt=0,ne=o;Lt<ne.length;Lt++){var ge=ne[Lt];Et[ge.get("id")]=ge}var be=Object(a.get)(c[0],"labelHeight",14),Ae=Math.max(Object(a.get)(c[0],"offset",0),Pu);Object(a.each)(c,function(Ur){var ki=Object(a.get)(Et,Ur.id);if(!!ki){var Ai=Ur.x>D.x||Ur.x===D.x&&Ur.y>D.y,mi=Object(a.isNil)(Ur.offsetX)?Hs:Ur.offsetX,Ki=Pi(D.x,D.y,et+Pu,Ur.angle),vo=Ae+mi;Ur.x=D.x+(Ai?1:-1)*(et+vo),Ur.y=Ki.y}});var We=m.start,an=m.end,gn="left",Yn="right",Hn=Object(a.groupBy)(c,function(Ur){return Ur.x<D.x?gn:Yn}),ir=(et+Ae)*2+be;Object(a.each)(Hn,function(Ur){var ki=Ur.length*be;ki>ir&&(ir=Math.min(ki,Math.abs(We.y-an.y)))});var cr={minX:We.x,maxX:an.x,minY:D.y-ir/2,maxY:D.y+ir/2};Object(a.each)(Hn,function(Ur,ki){var Ai=ir/be;Ur.length>Ai&&(Ur.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(Ur,function(mi,Ki){Ki>Ai&&(Et[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(Ur,be,cr)});var Rr=cr.minY,zr=cr.maxY;Object(a.each)(Hn,function(Ur,ki){var Ai=ki===Yn;Object(a.each)(Ur,function(mi){var Ki=Object(a.get)(Et,mi&&mi.id);if(!!Ki){if(mi.y<Rr||mi.y>zr){Ki.set("visible",!1);return}var vo=Ki.getChildByIndex(0),po=vo.getCanvasBBox(),yo={x:Ai?po.x:po.maxX,y:po.y+po.height/2};Ca(vo,mi.x-yo.x,mi.y-yo.y),mi.labelLine&&kh(mi,m,Ai)}})})}}function ha(c,o,t,r){Object(a.each)(o,function(m){var D=r.minX,et=r.minY,Et=r.maxX,Lt=r.maxY,ne=m.getCanvasBBox(),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY,an=ne.x,gn=ne.y,Yn=ne.width,Hn=ne.height,ir=an,cr=gn;(ge<D||Ae<D)&&(ir=D),(be<et||We<et)&&(cr=et),ge>Et?ir=Et-Yn:Ae>Et&&(ir=ir-(Ae-Et)),be>Lt?cr=Lt-Hn:We>Lt&&(cr=cr-(We-Lt)),(ir!==an||cr!==gn)&&Ca(m,ir-an,cr-gn)})}function Nh(c,o,t,r){Object(a.each)(o,function(m,D){var et=m.getCanvasBBox(),Et=t[D].getBBox();(et.minX<Et.minX||et.minY<Et.minY||et.maxX>Et.maxX||et.maxY>Et.maxY)&&m.remove(!0)})}var Bl=100,Ua=function(){function c(o){o===void 0&&(o={}),this.bitmap={};var t=o.xGap,r=t===void 0?1:t,m=o.yGap,D=m===void 0?8:m;this.xGap=r,this.yGap=D}return c.prototype.hasGap=function(o){for(var t=!0,r=this.bitmap,m=Math.round(o.minX),D=Math.round(o.maxX),et=Math.round(o.minY),Et=Math.round(o.maxY),Lt=m;Lt<=D;Lt+=1){if(!r[Lt]){r[Lt]={};continue}if(Lt===m||Lt===D){for(var ne=et;ne<=Et;ne++)if(r[Lt][ne]){t=!1;break}}else if(r[Lt][et]||r[Lt][Et]){t=!1;break}}return t},c.prototype.fillGap=function(o){for(var t=this.bitmap,r=Math.round(o.minX),m=Math.round(o.maxX),D=Math.round(o.minY),et=Math.round(o.maxY),Et=r;Et<=m;Et+=1)t[Et]||(t[Et]={});for(var Et=r;Et<=m;Et+=this.xGap){for(var Lt=D;Lt<=et;Lt+=this.yGap)t[Et][Lt]=!0;t[Et][et]=!0}if(this.yGap!==1)for(var Et=D;Et<=et;Et+=1)t[r][Et]=!0,t[m][Et]=!0;if(this.xGap!==1)for(var Et=r;Et<=m;Et+=1)t[Et][D]=!0,t[Et][et]=!0},c.prototype.destroy=function(){this.bitmap={}},c}();function Fl(c,o,t){t===void 0&&(t=Bl);var r=-1,m=c.attr(),D=m.x,et=m.y,Et=c.getCanvasBBox(),Lt=Math.sqrt(Et.width*Et.width+Et.height*Et.height),ne,ge=-r,be=0,Ae=0,We=function(ir){var cr=ir*.1;return[cr*Math.cos(cr),cr*Math.sin(cr)]};if(o.hasGap(Et))return o.fillGap(Et),!0;for(var an=!1,gn=0,Yn={};Math.min(Math.abs(be),Math.abs(Ae))<Lt&&gn<t;)if(ne=We(ge+=r),be=~~ne[0],Ae=~~ne[1],!(!be&&!Ae||Yn[be+"-"+Ae])&&(c.attr({x:D+be,y:et+Ae}),be+Ae<0&&c.attr("textAlign","right"),gn++,o.hasGap(c.getCanvasBBox()))){o.fillGap(c.getCanvasBBox()),an=!0,Yn[be+"-"+Ae]=!0;break}return an}function za(c,o,t,r){var m=c.getCanvasBBox(),D=m.width,et=m.height,Et={x:o,y:t,textAlign:"center"};switch(r){case 0:Et.y-=et+1,Et.x+=1,Et.textAlign="left";break;case 1:Et.y-=et+1,Et.x-=1,Et.textAlign="right";break;case 2:Et.y+=et+1,Et.x-=1,Et.textAlign="right";break;case 3:Et.y+=et+1,Et.x+=1,Et.textAlign="left";break;case 5:Et.y-=et*2+2;break;case 6:Et.y+=et*2+2;break;case 7:Et.x+=D+1,Et.textAlign="left";break;case 8:Et.x-=D+1,Et.textAlign="right";break;default:break}return c.attr(Et),c.getCanvasBBox()}function Ks(c,o,t,r){var m=new Ua;Object(a.each)(o,function(D){var et=D.find(function(Et){return Et.get("type")==="text"});Fl(et,m)||D.remove(!0)}),m.destroy()}function $o(c,o,t,r){var m=new Ua;Object(a.each)(o,function(D){for(var et=D.find(function(We){return We.get("type")==="text"}),Et=et.attr(),Lt=Et.x,ne=Et.y,ge=!1,be=0;be<=8;be++){var Ae=za(et,Lt,ne,be);if(m.hasGap(Ae)){m.fillGap(Ae),ge=!0;break}}ge||D.remove(!0)}),m.destroy()}var ja=jr.c.dot;function Va(c){if(c.length>4)return[];var o=function(D,et){return[et.x-D.x,et.y-D.y]},t=o(c[0],c[1]),r=o(c[1],c[2]);return[t,r]}function Js(c,o,t){o===void 0&&(o=0),t===void 0&&(t={x:0,y:0});var r=c.x,m=c.y;return{x:(r-t.x)*Math.cos(-o)+(m-t.y)*Math.sin(-o)+t.x,y:(t.x-r)*Math.sin(-o)+(m-t.y)*Math.cos(-o)+t.y}}function mc(c){var o=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],t=c.rotation;return t?[Js(o[0],t,o[0]),Js(o[1],t,o[0]),Js(o[2],t,o[0]),Js(o[3],t,o[0])]:o}function bc(c,o){if(c.length>4)return{min:0,max:0};var t=[];return c.forEach(function(r){t.push(ja([r.x,r.y],o))}),{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}function xc(c,o){return c.max>o.min&&c.min<o.max}function Gl(c,o,t){return t===void 0&&(t=0),!(o.x>c.x+c.width+t||o.x+o.width<c.x-t||o.y>c.y+c.height+t||o.y+o.height<c.y-t)}function So(c,o){if(!c.rotation&&!o.rotation)return Gl(c,o);for(var t=mc(c),r=mc(o),m=Object(at.d)(Va(t),Va(r)),D=0;D<m.length;D++){var et=m[D],Et=bc(t,et),Lt=bc(r,et);if(!xc(Et,Lt))return!1}return!0}function Du(c,o,t,r){for(var m=0;m<o.length;m++){var D=o[m];if(o[m].get("visible"))for(var et=m+1;et<o.length;et++){var Et=o[et];if(D&&Et&&D!==Et&&Et.get("visible")){var Lt=W(D,c[m],Object(a.get)(c[m],"background.padding")),ne=W(Et,c[et],Object(a.get)(c[et],"background.padding"));So(Lt,ne)&&o[et].set("visible",!1)}}}}var Wa={"#5B8FF9":!0},_l=function(o){var t=mt.a.toRGB(o).toUpperCase();if(Wa[t])return Wa[t];var r=mt.a.rgb2arr(t),m=r[0],D=r[1],et=r[2],Et=(m*299+D*587+et*114)/1e3<128;return Et};function Ul(c,o,t){if(t.length!==0){var r=t[0].get("element"),m=r.geometry.theme,D=m.labels||{},et=D.fillColorLight,Et=D.fillColorDark;t.forEach(function(Lt,ne){var ge=o[ne],be=ge.find(function(Hn){return Hn.get("type")==="text"}),Ae=Qe.fromObject(Lt.getBBox()),We=Qe.fromObject(be.getCanvasBBox()),an=!Ae.contains(We),gn=Lt.attr("fill"),Yn=_l(gn);an?be.attr(m.overflowLabels.style):Yn?et&&be.attr("fill",et):Et&&be.attr("fill",Et)})}}function zl(c,o,t){var r=c.coordinate,m=j(o),D=Qe.fromObject(m.getCanvasBBox()),et=Qe.fromObject(t.getBBox());return r.isTransposed?et.height>=D.height:et.width>=D.width}function Vl(c,o,t){var r=!!c.getAdjust("stack");return r||o.every(function(m,D){var et=t[D];return zl(c,m,et)})}function Wl(c,o,t){var r=c.coordinate,m=Qe.fromObject(t.getBBox()),D=j(o);r.isTransposed?D.attr({x:m.minX+m.width/2,textAlign:"center"}):D.attr({y:m.minY+m.height/2,textBaseline:"middle"})}function ku(c,o,t){var r;if(t.length!==0){var m=(r=t[0])===null||r===void 0?void 0:r.get("element"),D=m==null?void 0:m.geometry;if(!(!D||D.type!=="interval")){var et=Vl(D,o,t);et&&t.forEach(function(Et,Lt){var ne=o[Lt];Wl(D,ne,Et)})}}}function Yl(c){var o=500,t=[],r=Math.max(Math.floor(c.length/o),1);return Object(a.each)(c,function(m,D){D%r==0?t.push(m):m.set("visible",!1)}),t}function Xl(c,o,t){var r;if(t.length!==0){var m=(r=t[0])===null||r===void 0?void 0:r.get("element"),D=m==null?void 0:m.geometry;if(!(!D||D.type!=="interval")){var et=Yl(o),Et=D.getXYFields()[0],Lt=[],ne=[],ge=Object(a.groupBy)(et,function(gn){return gn.get("data")[Et]}),be=Object(a.uniq)(Object(a.map)(et,function(gn){return gn.get("data")[Et]})),Ae;et.forEach(function(gn){gn.set("visible",!0)});var We=function(Yn){Yn&&(Yn.length&&ne.push(Yn.pop()),ne.push.apply(ne,Yn))};for(Object(a.size)(be)>0&&(Ae=be.shift(),We(ge[Ae])),Object(a.size)(be)>0&&(Ae=be.pop(),We(ge[Ae])),Object(a.each)(be.reverse(),function(gn){We(ge[gn])});ne.length>0;){var an=ne.shift();an.get("visible")&&(Tt(an,Lt)?an.set("visible",!1):Lt.push(an))}}}}function Ia(c,o){var t=c.getXYFields()[1],r=[],m=o.sort(function(D,et){return D.get("data")[t]-D.get("data")[t]});return m.length>0&&r.push(m.shift()),m.length>0&&r.push(m.pop()),r.push.apply(r,m),r}function is(c,o,t){return c.some(function(r){return t(r,o)})}function Hl(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),m=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*m}function Kl(c,o){return is(c,o,function(t,r){var m=j(t),D=j(r);return Hl(m.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ru(c,o,t,r,m){var D,et;if(t.length!==0){var Et=(D=t[0])===null||D===void 0?void 0:D.get("element"),Lt=Et==null?void 0:Et.geometry;if(!(!Lt||Lt.type!=="point")){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=m&&m.offset||((et=c[0])===null||et===void 0?void 0:et.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Ia(Lt,Ae[gn]);Yn.length;){var Hn=Yn.shift(),ir=j(Hn);if(is(We,Hn,function(zr,Ur){return zr.get("data")[ge]===Ur.get("data")[ge]&&zr.get("data")[be]===Ur.get("data")[be]})){ir.set("visible",!1);continue}var cr=Kl(We,Hn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Kl(We,Hn)),Rr){ir.set("visible",!1);continue}We.push(Hn)}})}}}function Lh(c,o){var t=c.getXYFields()[1],r=[],m=o.sort(function(D,et){return D.get("data")[t]-D.get("data")[t]});return m.length>0&&r.push(m.shift()),m.length>0&&r.push(m.pop()),r.push.apply(r,m),r}function Jl(c,o,t){return c.some(function(r){return t(r,o)})}function Wr(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),m=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*m}function Oc(c,o){return Jl(c,o,function(t,r){var m=j(t),D=j(r);return Wr(m.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ql(c,o,t,r,m){var D,et;if(t.length!==0){var Et=(D=t[0])===null||D===void 0?void 0:D.get("element"),Lt=Et==null?void 0:Et.geometry;if(!(!Lt||["path","line","area"].indexOf(Lt.type)<0)){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=m&&m.offset||((et=c[0])===null||et===void 0?void 0:et.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Lh(Lt,Ae[gn]);Yn.length;){var Hn=Yn.shift(),ir=j(Hn);if(Jl(We,Hn,function(zr,Ur){return zr.get("data")[ge]===Ur.get("data")[ge]&&zr.get("data")[be]===Ur.get("data")[be]})){ir.set("visible",!1);continue}var cr=Oc(We,Hn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Oc(We,Hn)),Rr){ir.set("visible",!1);continue}We.push(Hn)}})}}}var Nu;function Zl(){return Nu||(Nu=document.createElement("canvas").getContext("2d")),Nu}var Qs=Object(a.memoize)(function(c,o){o===void 0&&(o={});var t=o.fontSize,r=o.fontFamily,m=o.fontWeight,D=o.fontStyle,et=o.fontVariant,Et=Zl();return Et.font=[D,et,m,t+"px",r].join(" "),Et.measureText(Object(a.isString)(c)?c:"").width},function(c,o){return o===void 0&&(o={}),Object(at.d)([c],Object(a.values)(o)).join("")}),$l=function(o,t,r){var m=16,D=Qs("...",r),et;Object(a.isString)(o)?et=o:et=Object(a.toString)(o);var Et=t,Lt=[],ne,ge;if(Qs(o,r)<=t)return o;for(;ne=et.substr(0,m),ge=Qs(ne,r),!(ge+D>Et&&ge>Et);)if(Lt.push(ne),Et-=ge,et=et.substr(m),!et)return Lt.join("");for(;ne=et.substr(0,1),ge=Qs(ne,r),!(ge+D>Et);)if(Lt.push(ne),Et-=ge,et=et.substr(1),!et)return Lt.join("");return Lt.join("")+"..."};function ql(c,o,t,r,m){if(!(o.length<=0)){var D=(m==null?void 0:m.direction)||["top","right","bottom","left"],et=(m==null?void 0:m.action)||"translate",Et=(m==null?void 0:m.margin)||0,Lt=o[0].get("coordinate");if(!!Lt){var ne=ar(Lt,Et),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY;Object(a.each)(o,function(an){var gn=an.getCanvasBBox(),Yn=gn.minX,Hn=gn.minY,ir=gn.maxX,cr=gn.maxY,Rr=gn.x,zr=gn.y,Ur=gn.width,ki=gn.height,Ai=Rr,mi=zr;if(D.indexOf("left")>=0&&(Yn<ge||ir<ge)&&(Ai=ge),D.indexOf("top")>=0&&(Hn<be||cr<be)&&(mi=be),D.indexOf("right")>=0&&(Yn>Ae?Ai=Ae-Ur:ir>Ae&&(Ai=Ai-(ir-Ae))),D.indexOf("bottom")>=0&&(Hn>We?mi=We-ki:cr>We&&(mi=mi-(cr-We))),Ai!==Rr||mi!==zr){var Ki=Ai-Rr;if(et==="translate")Ca(an,Ki,mi-zr);else if(et==="ellipsis"){var vo=an.findAll(function(po){return po.get("type")==="text"});vo.forEach(function(po){var yo=Object(a.pick)(po.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),wo=po.getCanvasBBox(),Q=$l(po.attr("text"),wo.width-Math.abs(Ki),yo);po.attr("text",Q)})}else an.hide()}})}}}function tf(c,o,t){var r={fillOpacity:Object(a.isNil)(c.attr("fillOpacity"))?1:c.attr("fillOpacity"),strokeOpacity:Object(a.isNil)(c.attr("strokeOpacity"))?1:c.attr("strokeOpacity"),opacity:Object(a.isNil)(c.attr("opacity"))?1:c.attr("opacity")};c.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),c.animate(r,o)}function ef(c,o,t){var r={fillOpacity:0,strokeOpacity:0,opacity:0},m=o.easing,D=o.duration,et=o.delay;c.animate(r,D,m,function(){c.remove(!0)},et)}function nf(c,o,t){var r,m=o[0],D=o[1];return c.applyToMatrix([m,D,1]),t==="x"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",.01,1],["t",m,D]])),r=jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",100,1],["t",m,D]])):t==="y"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",1,.01],["t",m,D]])),r=jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",1,100],["t",m,D]])):t==="xy"&&(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",.01,.01],["t",m,D]])),r=jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",100,100],["t",m,D]])),r}function Ya(c,o,t,r,m){var D=t.start,et=t.end,Et=t.getWidth(),Lt=t.getHeight(),ne,ge;m==="y"?(ne=D.x+Et/2,ge=r.y<D.y?r.y:D.y):m==="x"?(ne=r.x>D.x?r.x:D.x,ge=D.y+Lt/2):m==="xy"&&(t.isPolar?(ne=t.getCenter().x,ge=t.getCenter().y):(ne=(D.x+et.x)/2,ge=(D.y+et.y)/2));var be=nf(c,[ne,ge],m);c.animate({matrix:be},o)}function rf(c,o,t){var r=t.coordinate,m=t.minYPoint;Ya(c,o,r,m,"x")}function of(c,o,t){var r=t.coordinate,m=t.minYPoint;Ya(c,o,r,m,"y")}function af(c,o,t){var r=t.coordinate,m=t.minYPoint;Ya(c,o,r,m,"xy")}function sf(c,o,t){var r=c.getTotalLength();c.attr("lineDash",[r]),c.animate(function(m){return{lineDashOffset:(1-m)*r}},o)}function Lu(c,o,t){var r=t.toAttrs,m=r.x,D=r.y;delete r.x,delete r.y,c.attr(r),c.animate({x:m,y:D},o)}function uf(c,o,t){var r=c.getBBox(),m=c.get("origin").mappingData,D=m.points,et=D[0].y-D[1].y>0?r.maxX:r.minX,Et=(r.minY+r.maxY)/2;c.applyToMatrix([et,Et,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-et,-Et],["s",.01,1],["t",et,Et]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-et,-Et],["s",100,1],["t",et,Et]])},o)}function Pa(c,o,t){var r=c.getBBox(),m=c.get("origin").mappingData,D=(r.minX+r.maxX)/2,et=m.points,Et=et[0].y-et[1].y<=0?r.maxY:r.minY;c.applyToMatrix([D,Et,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-D,-Et],["s",1,.01],["t",D,Et]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-D,-Et],["s",1,100],["t",D,Et]])},o)}function Es(c,o){var t,r=Object(lo.getArcParams)(c,o),m=r.startAngle,D=r.endAngle;return!Object(a.isNumberEqual)(m,-Math.PI*.5)&&m<-Math.PI*.5&&(m+=Math.PI*2),!Object(a.isNumberEqual)(D,-Math.PI*.5)&&D<-Math.PI*.5&&(D+=Math.PI*2),o[5]===0&&(t=[D,m],m=t[0],D=t[1]),Object(a.isNumberEqual)(m,Math.PI*1.5)&&(m=Math.PI*-.5),Object(a.isNumberEqual)(D,Math.PI*-.5)&&(D=Math.PI*1.5),{startAngle:m,endAngle:D}}function xa(c){var o;return c[0]==="M"||c[0]==="L"?o=[c[1],c[2]]:(c[0]==="a"||c[0]==="A")&&(o=[c[c.length-2],c[c.length-1]]),o}function qo(c){var o,t,r,m=c.filter(function(cr){return cr[0]==="A"||cr[0]==="a"}),D=m[0],et=m.length>1?m[1]:m[0],Et=c.indexOf(D),Lt=c.indexOf(et),ne=xa(c[Et-1]),ge=xa(c[Lt-1]),be=Es(ne,D),Ae=be.startAngle,We=be.endAngle,an=Es(ge,et),gn=an.startAngle,Yn=an.endAngle;Object(a.isNumberEqual)(Ae,gn)&&Object(a.isNumberEqual)(We,Yn)?(t=Ae,r=We):(t=Math.min(Ae,gn),r=Math.max(We,Yn));var Hn=D[1],ir=m[m.length-1][1];return Hn<ir?(o=[ir,Hn],Hn=o[0],ir=o[1]):Hn===ir&&(ir=0),{startAngle:t,endAngle:r,radius:Hn,innerRadius:ir}}function Zs(c,o,t){var r=t.toAttrs,m=t.coordinate,D=r.path||[],et=D.map(function(ir){return ir[0]});if(!(D.length<1)){var Et=qo(D),Lt=Et.startAngle,ne=Et.endAngle,ge=Et.radius,be=Et.innerRadius,Ae=qo(c.attr("path")),We=Ae.startAngle,an=Ae.endAngle,gn=m.getCenter(),Yn=Lt-We,Hn=ne-an;c.animate(function(ir){var cr=We+ir*Yn,Rr=an+ir*Hn;return Object(at.a)(Object(at.a)({},r),{path:Object(a.isEqual)(et,["M","A","A","Z"])?Mo(gn.x,gn.y,ge,cr,Rr):no(gn.x,gn.y,ge,cr,Rr,be)})},Object(at.a)(Object(at.a)({},o),{callback:function(){c.attr("path",D)}}))}}function Xa(c,o,t){var r=vr(t.coordinate,20),m=r.type,D=r.startState,et=r.endState,Et=c.setClip({type:m,attrs:D});Et.animate(et,Object(at.a)(Object(at.a)({},o),{callback:function(){c&&!c.get("destroyed")&&c.set("clipShape",null),Et.remove(!0)}}))}function os(c,o,t){if(c.isGroup())Object(a.each)(c.getChildren(),function(Et){os(Et,o,t)});else{var r=c.getBBox(),m=(r.minX+r.maxX)/2,D=(r.minY+r.maxY)/2;if(c.applyToMatrix([m,D,1]),t==="zoomIn"){var et=jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",.01,.01],["t",m,D]]);c.setMatrix(et),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",100,100],["t",m,D]])},o)}else c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-m,-D],["s",.01,.01],["t",m,D]])},Object(at.a)(Object(at.a)({},o),{callback:function(){c.remove(!0)}}))}}function Bu(c,o,t){os(c,o,"zoomIn")}function Oa(c,o,t){os(c,o,"zoomOut")}function Ko(c){return[e.TOP,e.BOTTOM].includes(c)?{offsetX:0,offsetY:c===e.TOP?-8:8,style:{textAlign:"center",textBaseline:c===e.TOP?"bottom":"top"}}:[e.LEFT,e.RIGHT].includes(c)?{offsetX:c===e.LEFT?-8:8,offsetY:0,style:{textAlign:c===e.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Bo(c,o,t){return{x:c.x+o*Math.cos(t),y:c.y+o*Math.sin(t)}}var Sa=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(t,r){var m=1/2,D={x:.5,y:.5},et=Math.PI*2/t,Et=-1*Math.PI/2+et*r,Lt=m/(1+1/Math.sin(et/2)),ne=Bo(D,m-Lt,Et),ge=Math.PI*5/4,be=Math.PI*1/4;return{start:Bo(ne,Lt,ge),end:Bo(ne,Lt,be)}},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){var r=this,m=this.cfg,D=m.fields,et=m.type,Et=D[0];if(!Et)throw new Error("No `fields` specified!");var Lt=this.getFieldValues(t,Et),ne=Lt.length,ge=[];return Lt.forEach(function(be,Ae){var We=[{field:Et,value:be,values:Lt}],an=Object(a.filter)(t,r.getFacetDataFilter(We)),gn={type:et,data:an,region:r.getRegion(ne,Ae),columnValue:be,columnField:Et,columnIndex:Ae,columnValuesLength:ne,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};ge.push(gn)}),ge},o.prototype.getXAxisOption=function(t,r,m,D){return m},o.prototype.getYAxisOption=function(t,r,m,D){return m},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var m=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(m):m},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o}(Di),wa=Sa,Fu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){var r=this,m=this.cfg.fields,D=this.cfg.cols,et=m[0];if(!et)throw new Error("No `fields` specified!");var Et=this.getFieldValues(t,et),Lt=Et.length;D=D||Lt;var ne=this.getPageCount(Lt,D),ge=[];return Et.forEach(function(be,Ae){var We=r.getRowCol(Ae,D),an=We.row,gn=We.col,Yn=[{field:et,value:be,values:Et}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Yn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(ne,D,gn,an),columnValue:be,rowValue:be,columnField:et,rowField:null,columnIndex:gn,rowIndex:an,columnValuesLength:D,rowValuesLength:ne,total:Lt};ge.push(ir)}),ge},o.prototype.getXAxisOption=function(t,r,m,D){return D.rowIndex!==D.rowValuesLength-1&&D.columnValuesLength*D.rowIndex+D.columnIndex+1+D.columnValuesLength<=D.total?Object(at.a)(Object(at.a)({},m),{label:null,title:null}):m},o.prototype.getYAxisOption=function(t,r,m,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):m},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var m=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(m):m},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o.prototype.getPageCount=function(t,r){return Math.floor((t+r-1)/r)},o.prototype.getRowCol=function(t,r){var m=Math.floor(t/r),D=t%r;return{row:m,col:D}},o}(Di),cf=Fu,Ha=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){for(var r=this.cfg,m=r.fields,D=r.type,et=m.length,Et=et,Lt=[],ne=0;ne<Et;ne++)for(var ge=m[ne],be=0;be<et;be++){var Ae=m[be],We={type:D,data:t,region:this.getRegion(et,Et,ne,be),columnValue:ge,rowValue:Ae,columnField:ge,rowField:Ae,columnIndex:ne,rowIndex:be,columnValuesLength:Et,rowValuesLength:et};Lt.push(We)}return Lt},o.prototype.getXAxisOption=function(t,r,m,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},m),{label:null,title:null}):m},o.prototype.getYAxisOption=function(t,r,m,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):m},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,m){var D=r.columnIndex,et=r.rowIndex,Et=r.columnValuesLength,Lt=r.rowValuesLength,ne=r.columnValue,ge=r.rowValue,be=r.view;if(et===0){var Ae=Object(a.get)(t.cfg.columnTitle,"formatter"),We=Object(a.deepMix)({position:["50%","0%"],content:Ae?Ae(ne):ne},Ko(e.TOP),t.cfg.columnTitle);be.annotation().text(We)}if(D===Et-1){var Ae=Object(a.get)(t.cfg.rowTitle,"formatter"),We=Object(a.deepMix)({position:["100%","50%"],content:Ae?Ae(ge):ge},Ko(e.RIGHT),t.cfg.rowTitle);be.annotation().text(We)}})},o}(Di),Bh=Ha,Fh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this),transpose:!1})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.beforeEachView=function(t,r){this.cfg.transpose?r.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():r.rowIndex%2!=0&&t.coordinate().reflect("y")},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.generateFacets=function(t){var r=this,m=this.cfg.fields[0],D=[],et=1,Et=1,Lt=[""],ne=[""],ge,be;return this.cfg.transpose?(ge=m,Lt=this.getFieldValues(t,ge).slice(0,2),et=Lt.length):(be=m,ne=this.getFieldValues(t,be).slice(0,2),Et=ne.length),Lt.forEach(function(Ae,We){ne.forEach(function(an,gn){var Yn=[{field:ge,value:Ae,values:Lt},{field:be,value:an,values:ne}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Yn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(Et,et,We,gn),columnValue:Ae,rowValue:an,columnField:ge,rowField:be,columnIndex:We,rowIndex:gn,columnValuesLength:et,rowValuesLength:Et};D.push(ir)})}),D},o.prototype.getXAxisOption=function(t,r,m,D){return D.columnIndex===1||D.rowIndex===1?Object(at.a)(Object(at.a)({},m),{label:null,title:null}):m},o.prototype.getYAxisOption=function(t,r,m,D){return m},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,m){var D=r.columnValue,et=r.rowValue,Et=r.view,Lt=Object(a.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var ne=Object(a.deepMix)({position:["50%","0%"],content:Lt?Lt(D):D},Ko(e.TOP),t.cfg.title);Et.annotation().text(ne)}else{var ne=Object(a.deepMix)({position:["100%","50%"],content:Lt?Lt(et):et},Ko(e.RIGHT),t.cfg.title);Et.annotation().text(ne)}})},o}(Di),Gh=Fh,_h=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(t){var r=this,m=this.cfg.fields,D=m[0],et=m[1],Et=[],Lt=1,ne=1,ge=[""],be=[""];return D&&(ge=this.getFieldValues(t,D),Lt=ge.length),et&&(be=this.getFieldValues(t,et),ne=be.length),ge.forEach(function(Ae,We){be.forEach(function(an,gn){var Yn=[{field:D,value:Ae,values:ge},{field:et,value:an,values:be}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Yn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(ne,Lt,We,gn),columnValue:Ae,rowValue:an,columnField:D,rowField:et,columnIndex:We,rowIndex:gn,columnValuesLength:Lt,rowValuesLength:ne};Et.push(ir)})}),Et},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,m){var D=r.columnIndex,et=r.rowIndex,Et=r.columnValuesLength,Lt=r.columnValue,ne=r.rowValue,ge=r.view;if(et===0){var be=Object(a.get)(t.cfg.columnTitle,"formatter"),Ae=Object(a.deepMix)({position:["50%","0%"],content:be?be(Lt):Lt},Ko(e.TOP),t.cfg.columnTitle);ge.annotation().text(Ae)}if(D===Et-1){var be=Object(a.get)(t.cfg.rowTitle,"formatter"),Ae=Object(a.deepMix)({position:["100%","50%"],content:be?be(ne):ne},Ko(e.RIGHT),t.cfg.rowTitle);ge.annotation().text(Ae)}})},o.prototype.getXAxisOption=function(t,r,m,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):D.columnIndex!==Math.floor((D.columnValuesLength-1)/2)?Object(at.a)(Object(at.a)({},m),{title:null}):m},o.prototype.getYAxisOption=function(t,r,m,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):D.rowIndex!==Math.floor((D.rowValuesLength-1)/2)?Object(at.a)(Object(at.a)({},m),{title:null}):m},o}(Di),lf=_h,Sc=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.init=function(){c.prototype.init.call(this),this.view.on(b.AFTER_RENDER,this.afterChartRender)},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.generateFacets=function(t){var r=this.cfg.fields;if(!r.length)throw new Error("Please specify for the fields for rootFacet!");var m=[],D={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return m.push(D),D.children=this.getChildFacets(t,1,m),this.setRegion(m),m},o.prototype.setRegion=function(t){var r=this;this.forceColIndex(t),t.forEach(function(m){m.region=r.getRegion(m.rowValuesLength,m.columnValuesLength,m.columnIndex,m.rowIndex)})},o.prototype.getRegion=function(t,r,m,D){var et=1/r,Et=1/t,Lt={x:et*m,y:Et*D},ne={x:Lt.x+et,y:Lt.y+Et*2/3};return{start:Lt,end:ne}},o.prototype.forceColIndex=function(t){var r=this,m=[],D=0;t.forEach(function(Ae){r.isLeaf(Ae)&&(m.push(Ae),Ae.columnIndex=D,D++)}),m.forEach(function(Ae){Ae.columnValuesLength=m.length});for(var et=this.cfg.fields.length,Et=et-1;Et>=0;Et--)for(var Lt=this.getFacetsByLevel(t,Et),ne=0,ge=Lt;ne<ge.length;ne++){var be=ge[ne];this.isLeaf(be)||(be.originColIndex=be.columnIndex,be.columnIndex=this.getRegionIndex(be.children),be.columnValuesLength=m.length)}},o.prototype.getFacetsByLevel=function(t,r){var m=[];return t.forEach(function(D){D.rowIndex===r&&m.push(D)}),m},o.prototype.getRegionIndex=function(t){var r=t[0],m=t[t.length-1];return(m.columnIndex-r.columnIndex)/2+r.columnIndex},o.prototype.isLeaf=function(t){return!t.children||!t.children.length},o.prototype.getRows=function(){return this.cfg.fields.length+1},o.prototype.getChildFacets=function(t,r,m){var D=this,et=this.cfg.fields,Et=et.length;if(!(Et<r)){var Lt=[],ne=et[r-1],ge=this.getFieldValues(t,ne);return ge.forEach(function(be,Ae){var We=[{field:ne,value:be,values:ge}],an=t.filter(D.getFacetDataFilter(We));if(an.length){var gn={type:D.cfg.type,data:an,region:null,columnValue:be,rowValue:"",columnField:ne,rowField:"",columnIndex:Ae,rowValuesLength:D.getRows(),columnValuesLength:1,rowIndex:r,children:D.getChildFacets(an,r+1,m)};Lt.push(gn),m.push(gn)}}),Lt}},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var m=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(m):m},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o.prototype.drawLines=function(t){var r=this;t.forEach(function(m){if(!r.isLeaf(m)){var D=m.children;r.addFacetLines(m,D)}})},o.prototype.addFacetLines=function(t,r){var m=this,D=t.view,et=D.coordinateBBox,Et={x:et.x+et.width/2,y:et.y+et.height};r.forEach(function(Lt){var ne=Lt.view.coordinateBBox,ge={x:ne.bl.x+(ne.tr.x-ne.bl.x)/2,y:ne.tr.y},be={x:Et.x,y:Et.y+(ge.y-Et.y)/2},Ae={x:ge.x,y:be.y};m.drawLine([Et,be,Ae,ge])})},o.prototype.getPath=function(t){var r=[],m=this.cfg.line.smooth;return m?(r.push(["M",t[0].x,t[0].y]),r.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(D,et){et===0?r.push(["M",D.x,D.y]):r.push(["L",D.x,D.y])}),r},o.prototype.drawLine=function(t){var r=this.getPath(t),m=this.cfg.line.style;this.container.addShape("path",{attrs:Object(a.assign)({path:r},m)})},o.prototype.getXAxisOption=function(t,r,m,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):m},o.prototype.getYAxisOption=function(t,r,m,D){return D.originColIndex!==0&&D.columnIndex!==0?Object(at.a)(Object(at.a)({},m),{title:null,label:null}):m},o}(Di),Uh=Sc;function ff(c){var o=Object(at.d)(c);o.sort(function(r,m){return r-m});var t=o.length;return t===0?0:t%2==1?o[(t-1)/2]:(o[t/2]+o[t/2-1])/2}function hf(c){var o=Object(a.reduce)(c,function(t,r){return t+=isNaN(r)||!Object(a.isNumber)(r)?0:r},0);return c.length===0?0:o/c.length}function $s(c,o){var t;switch(c){case"start":return 0;case"end":return 1;case"median":{t=o.isCategory?ff(o.values.map(function(r,m){return m})):ff(o.values);break}case"mean":{t=o.isCategory?(o.values.length-1)/2:hf(o.values);break}case"min":t=o.isCategory?0:o[c];break;case"max":t=o.isCategory?o.values.length-1:o[c];break;default:t=c;break}return o.scale(t)}var Gu=["regionFilter","shape"],zh=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.cache=new Map,r.foregroundContainer=r.view.getLayer(A.FORE).addGroup(),r.backgroundContainer=r.view.getLayer(A.BG).addGroup(),r.option=[],r}return Object.defineProperty(o.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.layout=function(){this.update()},o.prototype.render=function(){},o.prototype.update=function(){var t=this;this.onAfterRender(function(){var m=new Map;Object(a.each)(t.option,function(D){if(Object(a.includes)(Gu,D.type)){var et=t.updateOrCreate(D);et&&m.set(t.getCacheKey(D),et)}}),t.cache=t.syncCache(m)});var r=new Map;Object(a.each)(this.option,function(m){if(!Object(a.includes)(Gu,m.type)){var D=t.updateOrCreate(m);D&&r.set(t.getCacheKey(m),D)}}),this.cache=this.syncCache(r)},o.prototype.clear=function(t){t===void 0&&(t=!1),c.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},o.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},o.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},o.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach(function(r){r.animateOption&&r.once(S.AFTER_DRAW_ANIMATE,function(){t()})}):this.view.getRootView().once(b.AFTER_RENDER,function(){t()})},o.prototype.createAnnotation=function(t){var r=t.type,m=Qr.Annotation[Object(a.upperFirst)(r)];if(m){var D=this.getAnnotationTheme(r),et=this.getAnnotationCfg(r,t,D),Et=new m(et);return{component:Et,layer:this.isTop(et)?A.FORE:A.BG,direction:e.NONE,type:i.ANNOTATION,extra:t}}},o.prototype.annotation=function(t){this.option.push(t)},o.prototype.arc=function(t){return this.annotation(Object(at.a)({type:"arc"},t)),this},o.prototype.image=function(t){return this.annotation(Object(at.a)({type:"image"},t)),this},o.prototype.line=function(t){return this.annotation(Object(at.a)({type:"line"},t)),this},o.prototype.region=function(t){return this.annotation(Object(at.a)({type:"region"},t)),this},o.prototype.text=function(t){return this.annotation(Object(at.a)({type:"text"},t)),this},o.prototype.dataMarker=function(t){return this.annotation(Object(at.a)({type:"dataMarker"},t)),this},o.prototype.dataRegion=function(t){this.annotation(Object(at.a)({type:"dataRegion"},t))},o.prototype.regionFilter=function(t){this.annotation(Object(at.a)({type:"regionFilter"},t))},o.prototype.shape=function(t){this.annotation(Object(at.a)({type:"shape"},t))},o.prototype.html=function(t){this.annotation(Object(at.a)({type:"html"},t))},o.prototype.parsePosition=function(t){var r=this.view.getXScale(),m=this.view.getScalesByDim("y"),D=Object(a.isFunction)(t)?t.call(null,r,m):t,et=0,Et=0;if(Object(a.isArray)(D)){var Lt=D[0],ne=D[1];if(Object(a.isString)(Lt)&&Lt.indexOf("%")!==-1&&!isNaN(Lt.slice(0,-1)))return this.parsePercentPosition(D);et=$s(Lt,r),Et=$s(ne,Object.values(m)[0])}else if(!Object(a.isNil)(D))for(var ge=0,be=Object(a.keys)(D);ge<be.length;ge++){var Ae=be[ge],We=D[Ae];Ae===r.field&&(et=$s(We,r)),m[Ae]&&(Et=$s(We,m[Ae]))}return this.view.getCoordinate().convert({x:et,y:Et})},o.prototype.getRegionPoints=function(t,r){var m=this,D=this.view.getXScale(),et=this.view.getScalesByDim("y"),Et=Object.values(et)[0],Lt=D.field,ne=this.view.getData(),ge=Object(a.isArray)(t)?t[0]:t[Lt],be=Object(a.isArray)(r)?r[0]:r[Lt],Ae=[],We;return Object(a.each)(ne,function(an,gn){if(an[Lt]===ge&&(We=gn),gn>=We){var Yn=m.parsePosition([an[Lt],an[Et.field]]);Yn&&Ae.push(Yn)}if(an[Lt]===be)return!1}),Ae},o.prototype.parsePercentPosition=function(t){var r=parseFloat(t[0])/100,m=parseFloat(t[1])/100,D=this.view.getCoordinate(),et=D.start,Et=D.end,Lt={x:Math.min(et.x,Et.x),y:Math.min(et.y,Et.y)},ne=D.getWidth()*r+Lt.x,ge=D.getHeight()*m+Lt.y;return{x:ne,y:ge}},o.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),r=t.start,m=t.end,D=t.getWidth(),et=t.getHeight(),Et={x:Math.min(r.x,m.x),y:Math.min(r.y,m.y)};return{x:Et.x,y:Et.y,minX:Et.x,minY:Et.y,maxX:Et.x+D,maxY:Et.y+et,width:D,height:et}},o.prototype.getAnnotationCfg=function(t,r,m){var D=this,et=this.view.getCoordinate(),Et=this.view.getCanvas(),Lt={};if(Object(a.isNil)(r))return null;if(t==="arc"){var ne=r,ge=ne.start,be=ne.end,Ae=this.parsePosition(ge),We=this.parsePosition(be),an=$n(et,Ae),gn=$n(et,We);an>gn&&(gn=Math.PI*2+gn),Lt={center:et.getCenter(),radius:rn(et,Ae),startAngle:an,endAngle:gn}}else if(t==="image"){var Yn=r,ge=Yn.start,be=Yn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),src:r.src}}else if(t==="line"){var Hn=r,ge=Hn.start,be=Hn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),text:Object(a.get)(r,"text",null)}}else if(t==="region"){var ir=r,ge=ir.start,be=ir.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="text"){var cr=this.view.getData(),Rr=r,zr=Rr.position,Ur=Rr.content,ki=Object(at.c)(Rr,["position","content"]),Ai=Ur;Object(a.isFunction)(Ur)&&(Ai=Ur(cr)),Lt=Object(at.a)(Object(at.a)(Object(at.a)({},this.parsePosition(zr)),ki),{content:Ai})}else if(t==="dataMarker"){var mi=r,zr=mi.position,Ki=mi.point,vo=mi.line,po=mi.text,yo=mi.autoAdjust,wo=mi.direction;Lt=Object(at.a)(Object(at.a)({},this.parsePosition(zr)),{coordinateBBox:this.getCoordinateBBox(),point:Ki,line:vo,text:po,autoAdjust:yo,direction:wo})}else if(t==="dataRegion"){var Q=r,ge=Q.start,be=Q.end,_=Q.region,po=Q.text,w=Q.lineLength;Lt={points:this.getRegionPoints(ge,be),region:_,text:po,lineLength:w}}else if(t==="regionFilter"){var L=r,ge=L.start,be=L.end,J=L.apply,It=L.color,Nt=this.view.geometries,K=[],Pt=function yn(Pn){!Pn||(Pn.isGroup()?Pn.getChildren().forEach(function(En){return yn(En)}):K.push(Pn))};Object(a.each)(Nt,function(yn){J?Object(a.contains)(J,yn.type)&&Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)}):Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)})}),Lt={color:It,shapes:K,start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="shape"){var Qt=r,qt=Qt.render,xe=Object(at.c)(Qt,["render"]),Ie=function(qe){if(Object(a.isFunction)(r.render))return qt(qe,D.view,{parsePosition:D.parsePosition.bind(D)})};Lt=Object(at.a)(Object(at.a)({},xe),{render:Ie})}else if(t==="html"){var Ye=r,Re=Ye.html,zr=Ye.position,xe=Object(at.c)(Ye,["html","position"]),Xe=function(Pn){return Object(a.isFunction)(Re)?Re(Pn,D.view):Re};Lt=Object(at.a)(Object(at.a)(Object(at.a)({},xe),this.parsePosition(zr)),{parent:Et.get("el").parentNode,html:Xe})}var Je=Object(a.deepMix)({},m,Object(at.a)(Object(at.a)({},Lt),{top:r.top,style:r.style,offsetX:r.offsetX,offsetY:r.offsetY}));return t!=="html"&&(Je.container=this.getComponentContainer(Je)),Je.animate=this.view.getOptions().animate&&Je.animate&&Object(a.get)(r,"animate",Je.animate),Je.animateOption=Object(a.deepMix)({},ma,Je.animateOption,r.animateOption),Je},o.prototype.isTop=function(t){return Object(a.get)(t,"top",!0)},o.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},o.prototype.getAnnotationTheme=function(t){return Object(a.get)(this.view.getTheme(),["components","annotation",t],{})},o.prototype.updateOrCreate=function(t){var r=this.cache.get(this.getCacheKey(t));if(r){var m=t.type,D=this.getAnnotationTheme(m),et=this.getAnnotationCfg(m,t,D);te(et,["container"]),r.component.update(et),Object(a.includes)(Gu,t.type)&&r.component.render()}else r=this.createAnnotation(t),r&&(r.component.init(),Object(a.includes)(Gu,t.type)&&r.component.render());return r},o.prototype.syncCache=function(t){var r=this,m=new Map(this.cache);return t.forEach(function(D,et){m.set(et,D)}),m.forEach(function(D,et){Object(a.find)(r.option,function(Et){return et===r.getCacheKey(Et)})||(D.component.destroy(),m.delete(et))}),m},o.prototype.getCacheKey=function(t){return t},o}(Do),df=zh;function qs(c,o){return Object(a.get)(c,["components","axis",o,"grid"],{})}function _u(c,o,t,r){var m=[],D=o.getTicks();return c.isPolar&&D.push({value:1,text:"",tickValue:""}),D.reduce(function(et,Et,Lt){var ne=Et.value;if(r)m.push({points:[c.convert(t==="y"?{x:0,y:ne}:{x:ne,y:0}),c.convert(t==="y"?{x:1,y:ne}:{x:ne,y:1})]});else if(Lt){var ge=et.value,be=(ge+ne)/2;m.push({points:[c.convert(t==="y"?{x:0,y:be}:{x:be,y:0}),c.convert(t==="y"?{x:1,y:be}:{x:be,y:1})]})}return Et},D[0]),m}function Ka(c,o,t,r,m){var D=o.values.length,et=[],Et=t.getTicks();return Et.reduce(function(Lt,ne){var ge=Lt?Lt.value:ne.value,be=ne.value,Ae=(ge+be)/2;return m==="x"?et.push({points:[c.convert({x:r?be:Ae,y:0}),c.convert({x:r?be:Ae,y:1})]}):et.push({points:Object(a.map)(Array(D+1),function(We,an){return c.convert({x:an/D,y:r?be:Ae})})}),ne},Et[0]),et}function vf(c,o){var t=Object(a.get)(o,"grid");if(t===null)return!1;var r=Object(a.get)(c,"grid");return!(t===void 0&&r===null)}var Ja=["container"],pf=Object(at.a)(Object(at.a)({},ma),{appear:null}),No=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.cache=new Map,r.gridContainer=r.view.getLayer(A.BG).addGroup(),r.axisContainer=r.view.getLayer(A.BG).addGroup(),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this,r=this.view.getCoordinate();Object(a.each)(this.getComponents(),function(m){var D=m.component,et=m.direction,Et=m.type,Lt=m.extra,ne=Lt.dim,ge=Lt.scale,be=Lt.alignTick,Ae;if(Et===i.AXIS)r.isPolar?ne==="x"?Ae=r.isTransposed?Pr(r,et):Si(r):ne==="y"&&(Ae=r.isTransposed?Si(r):Pr(r,et)):Ae=Pr(r,et);else if(Et===i.GRID)if(r.isPolar){var We=void 0;r.isTransposed?We=ne==="x"?Ka(r,t.view.getYScales()[0],ge,be,ne):_u(r,ge,ne,be):We=ne==="x"?_u(r,ge,ne,be):Ka(r,t.view.getXScale(),ge,be,ne),Ae={items:We,center:t.view.getCoordinate().getCenter()}}else Ae={items:_u(r,ge,ne,be)};D.update(Ae)})},o.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var r=new Map;this.cache.forEach(function(m,D){t.has(D)?r.set(D,m):m.component.destroy()}),this.cache=r},o.prototype.clear=function(){c.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},o.prototype.updateXAxes=function(t){var r=this.view.getXScale();if(!(!r||r.isIdentity)){var m=Ui(this.option,r.field);if(m!==!1){var D=Yi(m,e.BOTTOM),et=A.BG,Et="x",Lt=this.view.getCoordinate(),ne=this.getId("axis",r.field),ge=this.getId("grid",r.field);if(Lt.isRect){var be=this.cache.get(ne);if(be){var Ae=this.getLineAxisCfg(r,m,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else be=this.createLineAxis(r,m,et,D,Et),this.cache.set(ne,be),t.set(ne,be);var We=this.cache.get(ge);if(We){var Ae=this.getLineGridCfg(r,m,D,Et);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else We=this.createLineGrid(r,m,et,D,Et),We&&(this.cache.set(ge,We),t.set(ge,We))}else if(Lt.isPolar){var be=this.cache.get(ne);if(be){var Ae=Lt.isTransposed?this.getLineAxisCfg(r,m,e.RADIUS):this.getCircleAxisCfg(r,m,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(m))return;be=this.createLineAxis(r,m,et,e.RADIUS,Et)}else be=this.createCircleAxis(r,m,et,D,Et);this.cache.set(ne,be),t.set(ne,be)}var We=this.cache.get(ge);if(We){var Ae=Lt.isTransposed?this.getCircleGridCfg(r,m,e.RADIUS,Et):this.getLineGridCfg(r,m,e.CIRCLE,Et);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(m))return;We=this.createCircleGrid(r,m,et,e.RADIUS,Et)}else We=this.createLineGrid(r,m,et,e.CIRCLE,Et);We&&(this.cache.set(ge,We),t.set(ge,We))}}}}},o.prototype.updateYAxes=function(t){var r=this,m=this.view.getYScales();Object(a.each)(m,function(D,et){if(!(!D||D.isIdentity)){var Et=D.field,Lt=Ui(r.option,Et);if(Lt!==!1){var ne=A.BG,ge="y",be=r.getId("axis",Et),Ae=r.getId("grid",Et),We=r.view.getCoordinate();if(We.isRect){var an=Yi(Lt,et===0?e.LEFT:e.RIGHT),gn=r.cache.get(be);if(gn){var Yn=r.getLineAxisCfg(D,Lt,an);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else gn=r.createLineAxis(D,Lt,ne,an,ge),r.cache.set(be,gn),t.set(be,gn);var Hn=r.cache.get(Ae);if(Hn){var Yn=r.getLineGridCfg(D,Lt,an,ge);te(Yn,Ja),Hn.component.update(Yn),t.set(Ae,Hn)}else Hn=r.createLineGrid(D,Lt,ne,an,ge),Hn&&(r.cache.set(Ae,Hn),t.set(Ae,Hn))}else if(We.isPolar){var gn=r.cache.get(be);if(gn){var Yn=We.isTransposed?r.getCircleAxisCfg(D,Lt,e.CIRCLE):r.getLineAxisCfg(D,Lt,e.RADIUS);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;gn=r.createCircleAxis(D,Lt,ne,e.CIRCLE,ge)}else gn=r.createLineAxis(D,Lt,ne,e.RADIUS,ge);r.cache.set(be,gn),t.set(be,gn)}var Hn=r.cache.get(Ae);if(Hn){var Yn=We.isTransposed?r.getLineGridCfg(D,Lt,e.CIRCLE,ge):r.getCircleGridCfg(D,Lt,e.RADIUS,ge);te(Yn,Ja),Hn.component.update(Yn),t.set(Ae,Hn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;Hn=r.createLineGrid(D,Lt,ne,e.CIRCLE,ge)}else Hn=r.createCircleGrid(D,Lt,ne,e.RADIUS,ge);Hn&&(r.cache.set(Ae,Hn),t.set(Ae,Hn))}}}}})},o.prototype.createLineAxis=function(t,r,m,D,et){var Et={component:new gi(this.getLineAxisCfg(t,r,D)),layer:m,direction:D===e.RADIUS?e.NONE:D,type:i.AXIS,extra:{dim:et,scale:t}};return Et.component.set("field",t.field),Et.component.init(),Et},o.prototype.createLineGrid=function(t,r,m,D,et){var Et=this.getLineGridCfg(t,r,D,et);if(Et){var Lt={component:new bi(Et),layer:m,direction:e.NONE,type:i.GRID,extra:{dim:et,scale:t,alignTick:Object(a.get)(Et,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.createCircleAxis=function(t,r,m,D,et){var Et={component:new Oi(this.getCircleAxisCfg(t,r,D)),layer:m,direction:D,type:i.AXIS,extra:{dim:et,scale:t}};return Et.component.set("field",t.field),Et.component.init(),Et},o.prototype.createCircleGrid=function(t,r,m,D,et){var Et=this.getCircleGridCfg(t,r,D,et);if(Et){var Lt={component:new zi(Et),layer:m,direction:e.NONE,type:i.GRID,extra:{dim:et,scale:t,alignTick:Object(a.get)(Et,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.getLineAxisCfg=function(t,r,m){var D=this.axisContainer,et=this.view.getCoordinate(),Et=Pr(et,m),Lt=Bi(t,r),ne=ii(this.view.getTheme(),m),ge=Object(a.get)(r,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},r):r,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Et),{ticks:t.getTicks().map(function(cr){return{id:""+cr.tickValue,name:cr.text,value:cr.value}}),verticalFactor:et.isPolar?vi(Et,et.getCenter())*-1:vi(Et,et.getCenter()),theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;be.animateOption=an,be.animate=We;var gn=ri(Et),Yn=Object(a.get)(be,"verticalLimitLength",gn?1/3:1/2);if(Yn<=1){var Hn=this.view.getCanvas().get("width"),ir=this.view.getCanvas().get("height");be.verticalLimitLength=Yn*(gn?Hn:ir)}return be},o.prototype.getLineGridCfg=function(t,r,m,D){if(!!vf(ii(this.view.getTheme(),m),r)){var et=qs(this.view.getTheme(),m),Et=Object(a.deepMix)({container:this.gridContainer},et,Object(a.get)(r,"grid"),this.getAnimateCfg(r));return Et.items=_u(this.view.getCoordinate(),t,D,Object(a.get)(Et,"alignTick",!0)),Et}},o.prototype.getCircleAxisCfg=function(t,r,m){var D=this.axisContainer,et=this.view.getCoordinate(),Et=t.getTicks().map(function(gn){return{id:""+gn.tickValue,name:gn.text,value:gn.value}});!t.isCategory&&Math.abs(et.endAngle-et.startAngle)===Math.PI*2&&Et.pop();var Lt=Bi(t,r),ne=ii(this.view.getTheme(),e.CIRCLE),ge=Object(a.get)(r,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},r):r,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Si(this.view.getCoordinate())),{ticks:Et,verticalFactor:1,theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;return be.animate=We,be.animateOption=an,be},o.prototype.getCircleGridCfg=function(t,r,m,D){if(!!vf(ii(this.view.getTheme(),m),r)){var et=qs(this.view.getTheme(),e.RADIUS),Et=Object(a.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},et,Object(a.get)(r,"grid"),this.getAnimateCfg(r)),Lt=Object(a.get)(Et,"alignTick",!0),ne=D==="x"?this.view.getYScales()[0]:this.view.getXScale();return Et.items=Ka(this.view.getCoordinate(),ne,t,Lt,D),Et}},o.prototype.getId=function(t,r){var m=this.view.getCoordinate();return t+"-"+r+"-"+m.type},o.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&Object(a.get)(t,"animate"),animateOption:t&&t.animateOption?Object(a.deepMix)({},pf,t.animateOption):pf}},o}(Do),gf=No;function Da(c,o,t){return t===e.TOP?[c.minX+c.width/2-o.width/2,c.minY]:t===e.BOTTOM?[c.minX+c.width/2-o.width/2,c.maxY-o.height]:t===e.LEFT?[c.minX,c.minY+c.height/2-o.height/2]:t===e.RIGHT?[c.maxX-o.width,c.minY+c.height/2-o.height/2]:t===e.TOP_LEFT||t===e.LEFT_TOP?[c.tl.x,c.tl.y]:t===e.TOP_RIGHT||t===e.RIGHT_TOP?[c.tr.x-o.width,c.tr.y]:t===e.BOTTOM_LEFT||t===e.LEFT_BOTTOM?[c.bl.x,c.bl.y-o.height]:t===e.BOTTOM_RIGHT||t===e.RIGHT_BOTTOM?[c.br.x-o.width,c.br.y-o.height]:[0,0]}function yf(c,o){if(o.isTransposed)switch(c){case e.BOTTOM:return e.LEFT;case e.LEFT:return e.BOTTOM;case e.RIGHT:return e.TOP;case e.TOP:return e.RIGHT}return c}function mf(c){return c===e.LEFT?e.RIGHT:c===e.RIGHT?e.LEFT:c}function bf(c){return c===e.TOP?e.BOTTOM:c===e.BOTTOM?e.TOP:c}function Vh(c,o){var t=o.matrix[0],r=o.matrix[4],m=c;return t<0&&(m=mf(m)),r<0&&(m=bf(m)),m}function Wh(c,o){var t=c;return o.isReflect("x")&&(t=mf(t)),o.isReflect("y")&&(t=bf(t)),t}function Yh(c,o){var t=c;return t=yf(t,o),t=Vh(t,o),t=Wh(t,o),t}function xf(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o],c)}function Uu(c){return Object(a.get)(c,"position",e.BOTTOM)}var tu=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.container=r.view.getLayer(A.FORE).addGroup(),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,Object(a.each)(this.components,function(r){var m=r.component,D=r.direction,et=Fn(D),Et=t.getCategoryLegendSizeCfg(et),Lt=m.get("maxWidth"),ne=m.get("maxHeight");m.update({maxWidth:Math.min(Et.maxWidth,Lt||0),maxHeight:Math.min(Et.maxHeight,ne||0)});var ge=m.get("padding"),be=m.getLayoutBBox(),Ae=new Qe(be.x,be.y,be.width,be.height).expand(ge),We=Da(t.view.viewBBox,Ae,D),an=We[0],gn=We[1],Yn=Da(t.layoutBBox,Ae,D),Hn=Yn[0],ir=Yn[1],cr=0,Rr=0;D.startsWith("top")||D.startsWith("bottom")?(cr=an,Rr=ir):(cr=Hn,Rr=gn),m.setLocation({x:cr+ge[3],y:Rr+ge[0]}),t.layoutBBox=t.layoutBBox.cut(Ae,D)})},o.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var r={},m=function(We,an,gn){var Yn=t.getId(gn.field),Hn=t.getComponentById(Yn);if(Hn){var ir=void 0,cr=xf(t.option,gn.field);cr!==!1&&(Object(a.get)(cr,"custom")?ir=t.getCategoryCfg(We,an,gn,cr,!0):gn.isLinear?ir=t.getContinuousCfg(We,an,gn,cr):gn.isCategory&&(ir=t.getCategoryCfg(We,an,gn,cr))),ir&&(te(ir,["container"]),Hn.direction=Uu(cr),Hn.component.update(ir),r[Yn]=!0)}else{var Rr=t.createFieldLegend(We,an,gn);Rr&&(Rr.component.init(),t.components.push(Rr),r[Yn]=!0)}};if(Object(a.get)(this.option,"custom")){var D="global-custom",et=this.getComponentById(D);if(et){var Et=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);te(Et,["container"]),et.component.update(Et),r[D]=!0}else{var Lt=this.createCustomLegend(void 0,void 0,void 0,this.option);if(Lt){Lt.init();var ne=A.FORE,ge=Uu(this.option);this.components.push({id:D,component:Lt,layer:ne,direction:ge,type:i.LEGEND,extra:void 0}),r[D]=!0}}}else this.loopLegends(m);var be=[];Object(a.each)(this.getComponents(),function(Ae){r[Ae.id]?be.push(Ae):Ae.component.destroy()}),this.components=be},o.prototype.clear=function(){c.prototype.clear.call(this),this.container.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.container.remove(!0)},o.prototype.getGeometries=function(t){var r=this,m=t.geometries;return Object(a.each)(t.views,function(D){m=m.concat(r.getGeometries(D))}),m},o.prototype.loopLegends=function(t){var r=this.view.getRootView()===this.view;if(!!r){var m=this.getGeometries(this.view),D={};Object(a.each)(m,function(et){var Et=et.getGroupAttributes();Object(a.each)(Et,function(Lt){var ne=Lt.getScale(Lt.type);!ne||ne.type==="identity"||D[ne.field]||(t(et,Lt,ne),D[ne.field]=!0)})})}},o.prototype.createFieldLegend=function(t,r,m){var D,et=xf(this.option,m.field),Et=A.FORE,Lt=Uu(et);if(et!==!1&&(Object(a.get)(et,"custom")?D=this.createCustomLegend(t,r,m,et):m.isLinear?D=this.createContinuousLegend(t,r,m,et):m.isCategory&&(D=this.createCategoryLegend(t,r,m,et))),D)return D.set("field",m.field),{id:this.getId(m.field),component:D,layer:Et,direction:Lt,type:i.LEGEND,extra:{scale:m}}},o.prototype.createCustomLegend=function(t,r,m,D){var et=this.getCategoryCfg(t,r,m,D,!0);return new Qi(et)},o.prototype.createContinuousLegend=function(t,r,m,D){var et=this.getContinuousCfg(t,r,m,D);return new io(et)},o.prototype.createCategoryLegend=function(t,r,m,D){var et=this.getCategoryCfg(t,r,m,D);return new Qi(et)},o.prototype.getContinuousCfg=function(t,r,m,D){var et=m.getTicks(),Et=Object(a.find)(et,function(gn){return gn.value===0}),Lt=Object(a.find)(et,function(gn){return gn.value===1}),ne=et.map(function(gn){var Yn=gn.value,Hn=gn.tickValue,ir=r.mapping(m.invert(Yn)).join("");return{value:Hn,attrValue:ir,color:ir,scaleValue:Yn}});Et||ne.push({value:m.min,attrValue:r.mapping(m.invert(0)).join(""),color:r.mapping(m.invert(0)).join(""),scaleValue:0}),Lt||ne.push({value:m.max,attrValue:r.mapping(m.invert(1)).join(""),color:r.mapping(m.invert(1)).join(""),scaleValue:1}),ne.sort(function(gn,Yn){return gn.value-Yn.value});var ge={min:Object(a.head)(ne).value,max:Object(a.last)(ne).value,colors:[],rail:{type:r.type},track:{}};r.type==="size"&&(ge.track={style:{fill:r.type==="size"?this.view.getTheme().defaultColor:void 0}}),r.type==="color"&&(ge.colors=ne.map(function(gn){return gn.attrValue}));var be=this.container,Ae=Uu(D),We=Fn(Ae),an=Object(a.get)(D,"title");return an&&(an=Object(a.deepMix)({text:xr(m)},an)),ge.container=be,ge.layout=We,ge.title=an,ge.animateOption=ma,this.mergeLegendCfg(ge,D,"continuous")},o.prototype.getCategoryCfg=function(t,r,m,D,et){var Et=this.container,Lt=Object(a.get)(D,"position",e.BOTTOM),ne=Object(a.get)(this.view.getTheme(),["components","legend",Lt,"marker"]),ge=Object(a.get)(D,"marker"),be=Fn(Lt),Ae=et?ur(ne,ge,D.items):sr(this.view,t,r,ne,ge),We=Object(a.get)(D,"title");We&&(We=Object(a.deepMix)({text:m?xr(m):""},We));var an=this.getCategoryLegendSizeCfg(be);an.container=Et,an.layout=be,an.items=Ae,an.title=We,an.animateOption=ma;var gn=this.mergeLegendCfg(an,D,Lt);gn.reversed&&gn.items.reverse();var Yn=Object(a.get)(gn,"maxItemWidth");return Yn&&Yn<=1&&(gn.maxItemWidth=this.view.viewBBox.width*Yn),gn},o.prototype.mergeLegendCfg=function(t,r,m){var D=m.split("-")[0],et=Object(a.get)(this.view.getTheme(),["components","legend",D],{});return Object(a.deepMix)({},et,t,r)},o.prototype.getId=function(t){return this.name+"-"+t},o.prototype.getComponentById=function(t){return Object(a.find)(this.components,function(r){return r.id===t})},o.prototype.getCategoryLegendSizeCfg=function(t){var r=this.view.viewBBox,m=r.width,D=r.height;return t==="vertical"?{maxWidth:m*d,maxHeight:D}:{maxWidth:m,maxHeight:D*d}},o}(Do),Of=tu,Ms=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.onChangeFn=a.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(m){var D=m[0],et=m[1];r.start=D,r.end=et,r.changeViewData(D,et)},r.container=r.view.getLayer(A.FORE).addGroup(),r.onChangeFn=Object(a.throttle)(r.onValueChange,20,{leading:!0}),r.width=0,r.view.on(b.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(b.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(b.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(b.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),r=t.start,m=t.end;Object(a.isNil)(this.start)&&(this.start=r,this.end=m);var D=this.view.getOptions().data;this.option&&!Object(a.isEmpty)(D)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var r=this.view.coordinateBBox.width,m=this.slider.component.get("padding"),D=m[0],et=m[1],Et=m[2],Lt=m[3],ne=this.slider.component.getLayoutBBox(),ge=new Qe(ne.x,ne.y,Math.min(ne.width,r),ne.height).expand(m),be=this.getMinMaxText(this.start,this.end),Ae=be.minText,We=be.maxText,an=Da(this.view.viewBBox,ge,e.BOTTOM),gn=an[0],Yn=an[1],Hn=Da(this.view.coordinateBBox,ge,e.BOTTOM),ir=Hn[0],cr=Hn[1];this.slider.component.update(Object(at.a)(Object(at.a)({},this.getSliderCfg()),{x:ir+Lt,y:Yn+D,width:this.width,start:this.start,end:this.end,minText:Ae,maxText:We})),this.view.viewBBox=this.view.viewBBox.cut(ge,e.BOTTOM)}},o.prototype.update=function(){this.render()},o.prototype.createSlider=function(){var t=this.getSliderCfg(),r=new Qr.Slider(Object(at.a)({container:this.container},t));return r.init(),{component:r,layer:A.FORE,direction:e.BOTTOM,type:i.SLIDER}},o.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var r=this.getMinMaxText(this.start,this.end),m=r.minText,D=r.maxText;t=Object(at.a)(Object(at.a)({},t),{width:this.width,start:this.start,end:this.end,minText:m,maxText:D})}return this.slider.component.update(t),this.slider},o.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},o.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Object(a.isObject)(this.option)){var r=Object(at.a)({data:this.getData()},Object(a.get)(this.option,"trendCfg",{}));t=Object(a.deepMix)({},t,this.getThemeOptions(),this.option),t=Object(at.a)(Object(at.a)({},t),{trendCfg:r})}return t.start=Object(a.clamp)(Math.min(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t.end=Object(a.clamp)(Math.max(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t},o.prototype.getData=function(){var t=this.view.getOptions().data,r=this.view.getYScales()[0],m=this.view.getGroupScales();if(m.length){var D=m[0],et=D.field,Et=D.ticks;return t.reduce(function(Lt,ne){return ne[et]===Et[0]&&Lt.push(ne[r.field]),Lt},[])}return t.map(function(Lt){return Lt[r.field]||0})},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.getMinMaxText=function(t,r){var m=this.view.getOptions().data,D=this.view.getXScale(),et=!0,Et=Object(a.valuesOfKey)(m,D.field),Lt=et?Et:Et.reverse(),ne=Object(a.size)(m);if(!D||!ne)return{};var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(r*(ge-1)),We=Object(a.get)(Lt,[be]),an=Object(a.get)(Lt,[Ae]),gn=this.getSliderCfg().formatter;return gn&&(We=gn(We,m[be],be),an=gn(an,m[Ae],Ae)),{minText:We,maxText:an}},o.prototype.changeViewData=function(t,r){var m=this.view.getOptions().data,D=this.view.getXScale(),et=!0,Et=Object(a.valuesOfKey)(m,D.field),Lt=et?Et:Et.reverse(),ne=Object(a.size)(m);if(!(!D||!ne)){var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(r*(ge-1));this.view.filter(D.field,function(We,an){var gn=Lt.indexOf(We);return gn>-1?oe(gn,be,Ae):!0}),this.view.render(!0)}},o.prototype.getComponents=function(){return this.slider?[this.slider]:[]},o.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},o}(Do),Sf=Ms,as=0,wf=8,Xh=32,Hh=20,Kh=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.onChangeFn=a.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(m){var D=m.ratio,et=r.getValidScrollbarCfg().animate;r.ratio=Object(a.clamp)(D,0,1);var Et=r.view.getOptions().animate;et||r.view.animate(!1),r.changeViewData(r.getScrollRange(),!0),r.view.animate(Et)},r.container=r.view.getLayer(A.FORE).addGroup(),r.onChangeFn=Object(a.throttle)(r.onValueChange,20,{leading:!0}),r.trackLen=0,r.thumbLen=0,r.ratio=0,r.view.on(b.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(b.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(b.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(b.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var r=this.view.coordinateBBox.width,m=this.scrollbar.component.get("padding"),D=this.scrollbar.component.getLayoutBBox(),et=new Qe(D.x,D.y,Math.min(D.width,r),D.height).expand(m),Et=this.getScrollbarComponentCfg(),Lt=void 0,ne=void 0;if(Et.isHorizontal){var ge=Da(this.view.viewBBox,et,e.BOTTOM),be=ge[0],Ae=ge[1],We=Da(this.view.coordinateBBox,et,e.BOTTOM),an=We[0],gn=We[1];Lt=an,ne=Ae}else{var Yn=Da(this.view.viewBBox,et,e.RIGHT),be=Yn[0],Ae=Yn[1],Hn=Da(this.view.viewBBox,et,e.RIGHT),an=Hn[0],gn=Hn[1];Lt=an,ne=Ae}Lt+=m[3],ne+=m[0],this.trackLen?this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Et),{x:Lt,y:ne,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Et),{x:Lt,y:ne})),this.view.viewBBox=this.view.viewBBox.cut(et,Et.isHorizontal?e.BOTTOM:e.RIGHT)}},o.prototype.update=function(){this.render()},o.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},o.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.measureScrollbar=function(){var t=this.view.getXScale(),r=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var m=this.getScrollbarComponentCfg(),D=m.trackLen,et=m.thumbLen;this.trackLen=D,this.thumbLen=et,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=r},o.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Object(a.clamp)(this.ratio,0,1)),r=Math.min(t+this.step-1,this.cnt-1);return[t,r]},o.prototype.changeViewData=function(t,r){var m=this,D=t[0],et=t[1],Et=this.getValidScrollbarCfg().type,Lt=Et!=="vertical",ne=Object(a.valuesOfKey)(this.data,this.xScaleCfg.field),ge=Lt?ne:ne.reverse();this.yScalesCfg.forEach(function(be){m.view.scale(be.field,{formatter:be.formatter,type:be.type,min:be.min,max:be.max})}),this.view.filter(this.xScaleCfg.field,function(be){var Ae=ge.indexOf(be);return Ae>-1?oe(Ae,D,et):!0}),this.view.render(!0)},o.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,r=t!=="vertical",m=new Qr.Scrollbar(Object(at.a)(Object(at.a)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return m.init(),{component:m,layer:A.FORE,direction:r?e.BOTTOM:e.RIGHT,type:i.SCROLLBAR}},o.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),r=this.trackLen?Object(at.a)(Object(at.a)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Object(at.a)({},t);return this.scrollbar.component.update(r),this.scrollbar},o.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,r=this.getValidScrollbarCfg(),m=r.type,D=r.categorySize,et=m!=="vertical";return Math.floor((et?t.width:t.height)/D)},o.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),r=this.view.getOptions().data,m=Object(a.valuesOfKey)(r,t.field);return Object(a.size)(m)},o.prototype.getScrollbarComponentCfg=function(){var t=this.view,r=t.coordinateBBox,m=t.viewBBox,D=this.view.getXScale(),et=this.getValidScrollbarCfg(),Et=et.type,Lt=et.padding,ne=et.width,ge=et.height,be=Et!=="vertical",Ae=Lt[0],We=Lt[1],an=Lt[2],gn=Lt[3],Yn=be?{x:r.minX+gn,y:m.maxY-ge-an}:{x:m.maxX-ne-We,y:r.minY+Ae},Hn=this.getStep(),ir=this.getCnt(),cr=be?r.width-gn-We:r.height-Ae-an,Rr=Math.max(cr*Object(a.clamp)(Hn/ir,0,1),Hh);return Object(at.a)(Object(at.a)({},this.getThemeOptions()),{x:Yn.x,y:Yn.y,size:be?ge:ne,isHorizontal:be,trackLen:cr,thumbLen:Rr,thumbOffset:0})},o.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:Xh,width:wf,height:wf,padding:[0,0,0,0],animate:!0};return Object(a.isObject)(this.option)&&(t=Object(at.a)(Object(at.a)({},t),this.option)),(!Object(a.isObject)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[as,0,as,0]:[0,as,0,as]),t},o}(Do),Jh=Kh,Qh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.show=function(){var t=this.context.view,r=this.context.event,m=t.getTooltipItems({x:r.x,y:r.y});if(!Object(a.isEqual)(m,this.items)&&(this.items=m,m.length)){var D=t.getXScale().field,et=m[0].data[D],Et=[],Lt=t.geometries;if(Object(a.each)(Lt,function(yo){if(yo.type==="interval"||yo.type==="schema"){var wo=yo.getElementsBy(function(Q){var _=Q.getData();return _[D]===et});Et=Et.concat(wo)}}),Et.length){var ne=t.getCoordinate(),ge=Et[0].shape.getCanvasBBox(),be=Et[0].shape.getCanvasBBox(),Ae=ge;Object(a.each)(Et,function(yo){var wo=yo.shape.getCanvasBBox();ne.isTransposed?(wo.minY<ge.minY&&(ge=wo),wo.maxY>be.maxY&&(be=wo)):(wo.minX<ge.minX&&(ge=wo),wo.maxX>be.maxX&&(be=wo)),Ae.x=Math.min(wo.minX,Ae.minX),Ae.y=Math.min(wo.minY,Ae.minY),Ae.width=Math.max(wo.maxX,Ae.maxX)-Ae.x,Ae.height=Math.max(wo.maxY,Ae.maxY)-Ae.y});var We=t.backgroundGroup,an=t.coordinateBBox,gn=void 0;if(ne.isRect){var Yn=t.getXScale(),Hn=Yn.isLinear?0:.25,ir=void 0,cr=void 0,Rr=void 0,zr=void 0;ne.isTransposed?(ir=an.minX,cr=Math.min(be.minY,ge.minY)-Hn*be.height,Rr=an.width,zr=Ae.height+Hn*2*be.height):(ir=Math.min(ge.minX,be.minX)-Hn*ge.width,cr=Math.min(an.minY,ge.minY),Rr=Ae.width+Hn*2*ge.width,zr=an.height),gn=[["M",ir,cr],["L",ir+Rr,cr],["L",ir+Rr,cr+zr],["L",ir,cr+zr],["Z"]]}else{var Ur=Object(a.head)(Et),ki=Object(a.last)(Et),Ai=ao(Ur.getModel(),ne).startAngle,mi=ao(ki.getModel(),ne).endAngle,Ki=ne.getCenter(),vo=ne.getRadius(),po=ne.innerRadius*vo;gn=no(Ki.x,Ki.y,vo,Ai,mi,po)}this.regionPath?(this.regionPath.attr("path",gn),this.regionPath.show()):this.regionPath=We.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:gn,fill:"#CCD6EC",opacity:.3}})}}},o.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},o.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),c.prototype.destroy.call(this)},o}(ut),Ef=Qh,ka=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.show=function(){var t=this.context,r=t.event,m=t.view,D=m.isTooltipLocked();if(!D){var et=this.timeStamp,Et=+new Date,Lt=Object(a.get)(t.view.getOptions(),"tooltip.showDelay",16);if(Et-et>Lt){var ne=this.location,ge={x:r.x,y:r.y};(!ne||!Object(a.isEqual)(ne,ge))&&this.showTooltip(m,ge),this.timeStamp=Et,this.location=ge}}},o.prototype.hide=function(){var t=this.context.view,r=t.getController("tooltip"),m=this.context.event,D=m.clientX,et=m.clientY;r.isCursorEntered({x:D,y:et})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},o.prototype.showTooltip=function(t,r){t.showTooltip(r)},o.prototype.hideTooltip=function(t){t.hideTooltip()},o}(ut),da=ka,ss=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.showTooltip=function(t,r){var m=en(t);Object(a.each)(m,function(D){var et=Ue(t,D,r);D.showTooltip(et)})},o.prototype.hideTooltip=function(t){var r=en(t);Object(a.each)(r,function(m){m.hideTooltip()})},o}(da),Jo=ss,As=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.destroy=function(){c.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},o.prototype.show=function(){var t=this.context,r=t.event,m=this.timeStamp,D=+new Date;if(D-m>16){var et=this.location,Et={x:r.x,y:r.y};(!et||!Object(a.isEqual)(et,Et))&&this.showTooltip(Et),this.timeStamp=D,this.location=Et}},o.prototype.hide=function(){this.hideTooltip(),this.location=null},o.prototype.showTooltip=function(t){var r=this.context,m=r.event,D=m.target;if(D&&D.get("tip")){this.tooltip||this.renderTooltip();var et=D.get("tip");this.tooltip.update(Object(at.a)({title:et},t)),this.tooltip.show()}},o.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},o.prototype.renderTooltip=function(){var t,r=this.context.view,m=r.canvas,D={start:{x:0,y:0},end:{x:m.get("width"),y:m.get("height")}},et=r.getTheme(),Et=Object(a.get)(et,["components","tooltip","domStyles"],{}),Lt=new Wi({parent:m.get("el").parentNode,region:D,visible:!1,crosshairs:null,domStyles:Object(at.a)({},Object(a.deepMix)({},Et,(t={},t[Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={"max-width":"50%"},t[Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={"word-break":"break-all"},t)))});Lt.init(),Lt.setCapture(!1),this.tooltip=Lt},o}(ut),zu=As,eu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t}return o.prototype.hasState=function(t){return t.hasState(this.stateName)},o.prototype.setElementState=function(t,r){t.setState(this.stateName,r)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},o.prototype.clearViewState=function(t){var r=this,m=De(t,this.stateName);Object(a.each)(m,function(D){r.setElementState(D,!1)})},o}(ut),wc=eu;function us(c){return Object(a.get)(c.get("delegateObject"),"item")}var Zh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return o.prototype.isItemIgnore=function(t,r){var m=this.ignoreListItemStates,D=m.filter(function(et){return r.hasState(t,et)});return!!D.length},o.prototype.setStateByComponent=function(t,r,m){var D=this.context.view,et=t.get("field"),Et=ke(D);this.setElementsStateByItem(Et,et,r,m)},o.prototype.setStateByElement=function(t,r){this.setElementState(t,r)},o.prototype.isMathItem=function(t,r,m){var D=this.context.view,et=mn(D,r),Et=cn(t,r);return!Object(a.isNil)(Et)&&m.name===et.getText(Et)},o.prototype.setElementsStateByItem=function(t,r,m,D){var et=this;Object(a.each)(t,function(Et){et.isMathItem(Et,r,m)&&Et.setState(et.stateName,D)})},o.prototype.setStateEnable=function(t){var r=me(this.context);if(r)de(this.context)&&this.setStateByElement(r,t);else{var m=Zt(this.context);if(he(m)){var D=m.item,et=m.component;if(D&&et&&!this.isItemIgnore(D,et)){var Et=this.context.event.gEvent;if(Et&&Et.fromShape&&Et.toShape&&us(Et.fromShape)===us(Et.toShape))return;this.setStateByComponent(et,D,t)}}}},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=t.hasState(this.stateName);this.setElementState(t,!r)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),nu=Zh,$h=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(nu),qh=$h,td=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.cache={},t}return o.prototype.getColorScale=function(t,r){var m=r.geometry.getAttribute("color");if(!m)return null;var D=t.getScaleByField(m.getFields()[0]);return D},o.prototype.getLinkPath=function(t,r){var m=this.context.view,D=m.getCoordinate().isTransposed,et=t.shape.getCanvasBBox(),Et=r.shape.getCanvasBBox(),Lt=D?[["M",et.minX,et.minY],["L",Et.minX,Et.maxY],["L",Et.maxX,Et.maxY],["L",et.maxX,et.minY],["Z"]]:[["M",et.maxX,et.minY],["L",Et.minX,Et.minY],["L",Et.minX,Et.maxY],["L",et.maxX,et.maxY],["Z"]];return Lt},o.prototype.addLinkShape=function(t,r,m){t.addShape({type:"path",attrs:{opacity:.4,fill:r.shape.attr("fill"),path:this.getLinkPath(r,m)}})},o.prototype.linkByElement=function(t){var r=this,m=this.context.view,D=this.getColorScale(m,t);if(!!D){var et=cn(t,D.field);if(!this.cache[et]){var Et=tn(m,D.field,et),Lt=this.linkGroup,ne=Lt.addGroup();this.cache[et]=ne;var ge=Et.length;Object(a.each)(Et,function(be,Ae){if(Ae<ge-1){var We=Et[Ae+1];r.addLinkShape(ne,be,We)}})}}},o.prototype.removeLink=function(t){var r=this.getColorScale(this.context.view,t);if(!!r){var m=cn(t,r.field);this.cache[m]&&(this.cache[m].remove(),this.cache[m]=null)}},o.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var r=me(t);r&&this.linkByElement(r)},o.prototype.unlink=function(){var t=me(this.context);t&&this.removeLink(t)},o.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},o}(ut),ed=td,nd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},o.prototype.getIntersectElements=function(){var t=null;if(Me(this.context))t=ze(this.context,10);else{var r=this.startPoint,m=this.isStarted?this.getCurrentPoint():this.endPoint;if(!r||!m)return;var D={minX:Math.min(r.x,m.x),minY:Math.min(r.y,m.y),maxX:Math.max(r.x,m.x),maxY:Math.max(r.y,m.y)},et=this.context.view;t=nn(et,D)}return t},o.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var r=ke(this.context.view),m=this.getIntersectElements();m&&m.length?this.effectByRecord?this.setSiblingsStateByRecord(m,t):this.setElementsState(m,t,r):this.clear()}},o.prototype.setSiblingsStateByRecord=function(t,r){var m=this,D=this.context.view,et=en(D),Et=t.map(function(ge){return ge.getModel().data}),Lt=D.getXScale().field,ne=D.getYScales()[0].field;Object(a.each)(et,function(ge){var be=ke(ge),Ae=be.filter(function(We){var an=We.getModel().data;return ln(Et,an,Lt,ne)});m.setElementsState(Ae,r,be)})},o.prototype.setSiblingsState=function(t){var r=this,m=this.context.view,D=en(m);Me(this.context)&&Object(a.each)(D,function(et){var Et=ke(et),Lt=Ve(r.context,et,10);Lt&&Lt.length?r.setElementsState(Lt,t,Et):r.clearViewState(et)})},o.prototype.setElementsState=function(t,r,m){var D=this;Object(a.each)(m,function(et){t.includes(et)?D.setElementState(et,r):D.setElementState(et,!1)})},o.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},o.prototype.clear=function(){var t=this,r=this.context.view;if(this.effectSiblings){var m=en(r);Object(a.each)(m,function(D){t.clearViewState(D)})}else this.clearViewState(r)},o}(wc),Vu=nd,Wu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(Vu),rd=Wu,Mf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateEnable=function(t){var r=me(this.context);if(r){if(!de(this.context))return;t?(this.clear(),this.setElementState(r,!0)):this.hasState(r)&&this.setElementState(r,!1)}},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=this.hasState(t);r||this.clear(),this.setElementState(t,!r)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),ru=Mf,id=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ru),od=id,iu="inactive",Ts="active";function Qa(c){var o=ke(c);Object(a.each)(o,function(t){t.hasState(Ts)&&t.setState(Ts,!1),t.hasState(iu)&&t.setState(iu,!1)})}function Af(c,o,t){Object(a.each)(c,function(r){o(r)?(r.hasState(iu)&&r.setState(iu,!1),r.setState(Ts,t)):(r.hasState(Ts)&&r.setState(Ts,!1),r.setState(iu,t))})}var Za=M.INACTIVE,Ea=M.ACTIVE,Tf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=Ea,t}return o.prototype.setElementsStateByItem=function(t,r,m,D){var et=this,Et=function(ne){return et.isMathItem(ne,r,m)};this.setHighlightBy(t,Et,D)},o.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):t.hasState(Ea)||t.setState(Za,!0)},o.prototype.setHighlightBy=function(t,r,m){var D=this;if(m)Object(a.each)(t,function(Lt){D.setElementHighlight(Lt,r)});else{var et=De(this.context.view,Ea),Et=!0;Object(a.each)(et,function(Lt){if(!r(Lt))return Et=!1,!1}),Et?this.clear():Object(a.each)(t,function(Lt){r(Lt)&&(Lt.hasState(Ea)&&Lt.setState(Ea,!1),Lt.setState(Za,!0))})}},o.prototype.setElementState=function(t,r){var m=this.context.view,D=ke(m);this.setHighlightBy(D,function(et){return t===et},r)},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(nu),Yu=Tf,Cf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateByElement=function(t,r){var m=this.context.view,D=t.geometry.getAttribute("color");if(!!D){var et=m.getScaleByField(D.getFields()[0]),Et=cn(t,et.field),Lt=ke(m),ne=Lt.filter(function(ge){return cn(ge,et.field)===Et});this.setHighlightBy(Lt,function(ge){return ne.includes(ge)},r)}},o}(Yu),jf=Cf,If=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):(t.setState(Za,!0),t.hasState(Ea)&&t.setState(Ea,!1))},o.prototype.setStateByElement=function(t,r){var m=this.context.view,D=m.getXScale(),et=cn(t,D.field),Et=ke(m),Lt=Et.filter(function(ne){return cn(ne,D.field)===et});this.setHighlightBy(Et,function(ne){return Lt.includes(ne)},r)},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=t.hasState(this.stateName);this.setStateByElement(t,!r)}},o}(Yu),Pf=If,ou=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.clearViewState=function(t){Qa(t)},o.prototype.highlight=function(){this.setState()},o.prototype.setElementsState=function(t,r,m){Af(m,function(D){return t.indexOf(D)>=0},r)},o}(Vu),Ec=ou,Df=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.highlight=function(){this.setState()},o.prototype.setElementState=function(t,r){var m=this.context.view,D=ke(m);Af(D,function(et){return t===et},r)},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(ru),kf=Df,ad=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(Vu),sd=ad,ud=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(nu),cd=ud,ld=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ru),Xu=ld,cs=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return o.prototype.getTriggerListInfo=function(){var t=Zt(this.context),r=null;return he(t)&&(r={item:t.item,list:t.component}),r},o.prototype.getAllowComponents=function(){var t=this,r=this.context.view,m=Pe(r),D=[];return Object(a.each)(m,function(et){et.isList()&&t.allowSetStateByElement(et)&&D.push(et)}),D},o.prototype.hasState=function(t,r){return t.hasState(r,this.stateName)},o.prototype.clearAllComponentsState=function(){var t=this,r=this.getAllowComponents();Object(a.each)(r,function(m){m.clearItemsState(t.stateName)})},o.prototype.allowSetStateByElement=function(t){var r=t.get("field");if(!r)return!1;if(this.cfg&&this.cfg.componentNames){var m=t.get("name");if(this.cfg.componentNames.indexOf(m)===-1)return!1}var D=this.context.view,et=mn(D,r);return et&&et.isCategory},o.prototype.allowSetStateByItem=function(t,r){var m=this.ignoreItemStates;if(m.length){var D=m.filter(function(et){return r.hasState(t,et)});return D.length===0}return!0},o.prototype.setStateByElement=function(t,r,m){var D=t.get("field"),et=this.context.view,Et=mn(et,D),Lt=cn(r,D),ne=Et.getText(Lt);this.setItemsState(t,ne,m)},o.prototype.setStateEnable=function(t){var r=this,m=me(this.context);if(m){var D=this.getAllowComponents();Object(a.each)(D,function(ne){r.setStateByElement(ne,m,t)})}else{var et=Zt(this.context);if(he(et)){var Et=et.item,Lt=et.component;this.allowSetStateByElement(Lt)&&this.allowSetStateByItem(Et,Lt)&&this.setItemState(Lt,Et,t)}}},o.prototype.setItemsState=function(t,r,m){var D=this,et=t.getItems();Object(a.each)(et,function(Et){Et.name===r&&D.setItemState(t,Et,m)})},o.prototype.setItemState=function(t,r,m){t.setItemState(r,this.stateName,m)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var r=t.list,m=t.item,D=this.hasState(r,m);this.setItemState(r,m,!D)}},o.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(ut),ls=cs,au=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ls),Rf=au,Mc="inactive",Ac="active";function Nf(c){var o=c.getItems();Object(a.each)(o,function(t){c.hasState(t,Ac)&&c.setItemState(t,Ac,!1),c.hasState(t,Mc)&&c.setItemState(t,Mc,!1)})}var Cs="inactive",$a="active",Lf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=$a,t.ignoreItemStates=["unchecked"],t}return o.prototype.setItemsState=function(t,r,m){this.setHighlightBy(t,function(D){return D.name===r},m)},o.prototype.setItemState=function(t,r,m){var D=t.getItems();this.setHighlightBy(t,function(et){return et===r},m)},o.prototype.setHighlightBy=function(t,r,m){var D=t.getItems();if(m)Object(a.each)(D,function(Lt){r(Lt)?(t.hasState(Lt,Cs)&&t.setItemState(Lt,Cs,!1),t.setItemState(Lt,$a,!0)):t.hasState(Lt,$a)||t.setItemState(Lt,Cs,!0)});else{var et=t.getItemsByState($a),Et=!0;Object(a.each)(et,function(Lt){if(!r(Lt))return Et=!1,!1}),Et?this.clear():Object(a.each)(D,function(Lt){r(Lt)&&(t.hasState(Lt,$a)&&t.setItemState(Lt,$a,!1),t.setItemState(Lt,Cs,!0))})}},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Nf(t.list);else{var r=this.getAllowComponents();Object(a.each)(r,function(m){m.clearItemsState($a),m.clearItemsState(Cs)})}},o}(ls),fs=Lf,Bf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ls),Ff=Bf,Gf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="unchecked",t}return o.prototype.unchecked=function(){this.setState()},o}(ls),fd=Gf,_f=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.emitEvent=function(t){var r="mask:"+t,m=this.context.view,D=this.context.event;m.emit(r,{target:this.maskShape,shape:this.maskShape,points:this.points,x:D.x,y:D.y})},o.prototype.createMask=function(){var t=this.context.view,r=this.getMaskAttrs(),m=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Object(at.a)({fill:"#C5D4EB",opacity:.3},r)});return m},o.prototype.getMaskPath=function(){return[]},o.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},o.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},o.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},o.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),r=this.preMovePoint,m=t.x-r.x,D=t.y-r.y,et=this.points;Object(a.each)(et,function(Et){Et.x+=m,Et.y+=D}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},o.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},o.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},o.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},o.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},o.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},o.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,c.prototype.destroy.call(this)},o}(ut),Hu=_f,Uf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="circle",t}return o.prototype.getMaskAttrs=function(){var t=this.points,r=Object(a.last)(this.points),m=0,D=0,et=0;if(t.length){var Et=t[0];m=le(Et,r)/2,D=(r.x+Et.x)/2,et=(r.y+Et.y)/2}return{x:D,y:et,r:m}},o}(Hu),zf=Uf,Vf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="rect",t}return o.prototype.getRegion=function(){var t=this.points;return{start:Object(a.head)(t),end:Object(a.last)(t)}},o.prototype.getMaskAttrs=function(){var t=this.getRegion(),r=t.start,m=t.end,D=Math.min(r.x,m.x),et=Math.min(r.y,m.y),Et=Math.abs(m.x-r.x),Lt=Math.abs(m.y-r.y);return{x:D,y:et,width:Et,height:Lt}},o}(Hu),Tc=Vf;function Cc(c){c.x=Object(a.clamp)(c.x,0,1),c.y=Object(a.clamp)(c.y,0,1)}var su=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return o.prototype.getRegion=function(){var t=null,r=null,m=this.points,D=this.dim,et=this.context.view.getCoordinate(),Et=et.invert(Object(a.head)(m)),Lt=et.invert(Object(a.last)(m));return this.inPlot&&(Cc(Et),Cc(Lt)),D==="x"?(t=et.convert({x:Et.x,y:0}),r=et.convert({x:Lt.x,y:1})):(t=et.convert({x:0,y:Et.y}),r=et.convert({x:1,y:Lt.y})),{start:t,end:r}},o}(Tc),jc=su,Wf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points,r=[];return t.length&&(Object(a.each)(t,function(m,D){D===0?r.push(["M",m.x,m.y]):r.push(["L",m.x,m.y])}),r.push(["L",t[0].x,t[0].y])),r},o.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},o.prototype.addPoint=function(){this.resize()},o}(Hu),Ic=Wf,hd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points;return Le(t,!0)},o}(Ic),Yf=hd,dd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setCursor=function(t){var r=this.context.view;r.getCanvas().setCursor(t)},o.prototype.default=function(){this.setCursor("default")},o.prototype.pointer=function(){this.setCursor("pointer")},o.prototype.move=function(){this.setCursor("move")},o.prototype.crosshair=function(){this.setCursor("crosshair")},o.prototype.wait=function(){this.setCursor("wait")},o.prototype.help=function(){this.setCursor("help")},o.prototype.text=function(){this.setCursor("text")},o.prototype.eResize=function(){this.setCursor("e-resize")},o.prototype.wResize=function(){this.setCursor("w-resize")},o.prototype.nResize=function(){this.setCursor("n-resize")},o.prototype.sResize=function(){this.setCursor("s-resize")},o.prototype.neResize=function(){this.setCursor("ne-resize")},o.prototype.nwResize=function(){this.setCursor("nw-resize")},o.prototype.seResize=function(){this.setCursor("se-resize")},o.prototype.swResize=function(){this.setCursor("sw-resize")},o.prototype.nsResize=function(){this.setCursor("ns-resize")},o.prototype.ewResize=function(){this.setCursor("ew-resize")},o}(ut),vd=dd,Xf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,r,m){var D=this;t.getScaleByField(r)&&t.filter(r,m),t.views&&t.views.length&&Object(a.each)(t.views,function(et){D.filterView(et,r,m)})},o.prototype.filter=function(){var t=Zt(this.context);if(t){var r=this.context.view,m=t.component,D=m.get("field");if(he(t)){if(D){var et=m.getItemsByState("unchecked"),Et=mn(r,D),Lt=et.map(function(Ae){return Ae.name});Lt.length?this.filterView(r,D,function(Ae){var We=Et.getText(Ae);return!Lt.includes(We)}):this.filterView(r,D,null),r.render(!0)}}else if(ce(t)){var ne=m.getValue(),ge=ne[0],be=ne[1];this.filterView(r,D,function(Ae){return Ae>=ge&&Ae<=be}),r.render(!0)}}},o}(ut),Hf=Xf;function Pc(c,o,t,r){var m=Math.min(t[o],r[o]),D=Math.max(t[o],r[o]),et=c.range,Et=et[0],Lt=et[1];if(m<Et&&(m=Et),D>Lt&&(D=Lt),m===Lt&&D===Lt)return null;var ne=c.invert(m),ge=c.invert(D);if(c.isCategory){var be=c.values.indexOf(ne),Ae=c.values.indexOf(ge),We=c.values.slice(be,Ae+1);return function(an){return We.includes(an)}}else return function(an){return an>=ne&&an<=ge}}var Kf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},o.prototype.filter=function(){var t,r;if(Me(this.context)){var m=this.context.event.target,D=m.getCanvasBBox();t={x:D.x,y:D.y},r={x:D.maxX,y:D.maxY}}else{if(!this.isStarted)return;t=this.startPoint,r=this.context.getCurrentPoint()}if(!(Math.abs(t.x-r.x)<5||Math.abs(t.x-r.y)<5)){var et=this.context.view,Et=et.getCoordinate(),Lt=Et.invert(r),ne=Et.invert(t);if(this.hasDim("x")){var ge=et.getXScale(),be=Pc(ge,"x",Lt,ne);this.filterView(et,ge.field,be)}if(this.hasDim("y")){var Ae=et.getYScales()[0],be=Pc(Ae,"y",Lt,ne);this.filterView(et,Ae.field,be)}this.reRender(et)}},o.prototype.end=function(){this.isStarted=!1},o.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var r=t.getXScale();this.filterView(t,r.field,null)}if(this.hasDim("y")){var m=t.getYScales()[0];this.filterView(t,m.field,null)}this.reRender(t)},o.prototype.filterView=function(t,r,m){t.filter(r,m)},o.prototype.reRender=function(t){t.render(!0)},o}(ut),uu=Kf,cu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,r,m){var D=en(t);Object(a.each)(D,function(et){et.filter(r,m)})},o.prototype.reRender=function(t){var r=en(t);Object(a.each)(r,function(m){m.render(!0)})},o}(uu),Ku=cu,Jf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filter=function(){var t=Zt(this.context),r=this.context.view,m=ke(r);if(Me(this.context)){var D=ze(this.context,10);D&&Object(a.each)(m,function(an){D.includes(an)?an.show():an.hide()})}else if(t){var et=t.component,Et=et.get("field");if(he(t)){if(Et){var Lt=et.getItemsByState("unchecked"),ne=mn(r,Et),ge=Lt.map(function(an){return an.name});Object(a.each)(m,function(an){var gn=cn(an,Et),Yn=ne.getText(gn);ge.indexOf(Yn)>=0?an.hide():an.show()})}}else if(ce(t)){var be=et.getValue(),Ae=be[0],We=be[1];Object(a.each)(m,function(an){var gn=cn(an,Et);gn>=Ae&&gn<=We?an.show():an.hide()})}}},o.prototype.clear=function(){var t=ke(this.context.view);Object(a.each)(t,function(r){r.show()})},o.prototype.reset=function(){this.clear()},o}(ut),Qf=Jf,pd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.byRecord=!1,t}return o.prototype.filter=function(){Me(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},o.prototype.filterByRecord=function(){var t=this.context.view,r=ze(this.context,10);if(!!r){var m=t.getXScale().field,D=t.getYScales()[0].field,et=r.map(function(Lt){return Lt.getModel().data}),Et=en(t);Object(a.each)(Et,function(Lt){var ne=ke(Lt);Object(a.each)(ne,function(ge){var be=ge.getModel().data;ln(et,be,m,D)?ge.show():ge.hide()})})}},o.prototype.filterByBBox=function(){var t=this,r=this.context.view,m=en(r);Object(a.each)(m,function(D){var et=Ve(t.context,D,10),Et=ke(D);et&&Object(a.each)(Et,function(Lt){et.includes(Lt)?Lt.show():Lt.hide()})})},o.prototype.reset=function(){var t=en(this.context.view);Object(a.each)(t,function(r){var m=ke(r);Object(a.each)(m,function(D){D.show()})})},o}(ut),Dc=pd,Zf=10,$f=5,qf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return o.prototype.getButtonCfg=function(){return Object(a.deepMix)(this.buttonCfg,this.cfg)},o.prototype.drawButton=function(){var t=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:t.name}),m=r.addShape({type:"text",name:"button-text",attrs:Object(at.a)({text:t.text},t.textStyle)}),D=m.getBBox(),et=ya(t.padding),Et=r.addShape({type:"rect",name:"button-rect",attrs:Object(at.a)({x:D.x-et[3],y:D.y-et[0],width:D.width+et[1]+et[3],height:D.height+et[0]+et[2]},t.style)});Et.toBack(),r.on("mouseenter",function(){Et.attr(t.activeStyle)}),r.on("mouseleave",function(){Et.attr(t.style)}),this.buttonGroup=r},o.prototype.resetPosition=function(){var t=this.context.view,r=t.getCoordinate(),m=r.convert({x:1,y:1}),D=this.buttonGroup,et=D.getBBox(),Et=jr.a.transform(null,[["t",m.x-et.width-Zf,m.y+et.height+$f]]);D.setMatrix(Et)},o.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},o.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},o.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),c.prototype.destroy.call(this)},o}(ut),th=qf,eh=4,nh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},o.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),r=this.context.view,m=this.context.event;this.dragStart?r.emit("drag",{target:m.target,x:m.x,y:m.y}):le(t,this.startPoint)>eh&&(r.emit("dragstart",{target:m.target,x:m.x,y:m.y}),this.dragStart=!0)}},o.prototype.end=function(){if(this.dragStart){var t=this.context.view,r=this.context.event;t.emit("dragend",{target:r.target,x:r.x,y:r.y})}this.starting=!1,this.dragStart=!1},o}(ut),kc=nh,rh=5,ih=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},o.prototype.move=function(){if(!!this.starting){var t=this.startPoint,r=this.context.getCurrentPoint(),m=le(t,r);if(m>rh&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var D=this.context.view,et=jr.a.transform(this.startMatrix,[["t",r.x-t.x,r.y-t.y]]);D.backgroundGroup.setMatrix(et),D.foregroundGroup.setMatrix(et),D.middleGroup.setMatrix(et)}}},o.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},o.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},o}(ut),oh=ih,Rc="x",Ju="y",ah=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=[Rc,Ju],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.getScale=function(t){var r=this.context.view;return t==="x"?r.getXScale():r.getYScales()[0]},o.prototype.resetDim=function(t){var r=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var m=this.getScale(t);r.scale(m.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},o.prototype.reset=function(){this.resetDim(Rc),this.resetDim(Ju);var t=this.context.view;t.render(!0)},o}(ut),Nc=ah,sh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return o.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var r=this.dims;Object(a.each)(r,function(m){var D=t.getScale(m),et=D.min,Et=D.max,Lt=D.values;t.startCache[m]={min:et,max:Et,values:Lt}})},o.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},o.prototype.translate=function(){var t=this;if(!!this.starting){var r=this.startPoint,m=this.context.view.getCoordinate(),D=this.context.getCurrentPoint(),et=m.invert(r),Et=m.invert(D),Lt=Et.x-et.x,ne=Et.y-et.y,ge=this.context.view,be=this.dims;Object(a.each)(be,function(Ae){t.translateDim(Ae,{x:Lt*-1,y:ne*-1})}),ge.render(!0)}},o.prototype.translateDim=function(t,r){if(this.hasDim(t)){var m=this.getScale(t);m.isLinear&&this.translateLinear(t,m,r)}},o.prototype.translateLinear=function(t,r,m){var D=this.context.view,et=this.startCache[t],Et=et.min,Lt=et.max,ne=Lt-Et,ge=m[t]*ne;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:Et,max:Lt}),D.scale(r.field,{nice:!1,min:Et+ge,max:Lt+ge})},o.prototype.reset=function(){c.prototype.reset.call(this),this.startPoint=null,this.starting=!1},o}(Nc),uh=sh,ch=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.zoomRatio=.05,t}return o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(t){var r=this,m=this.dims;Object(a.each)(m,function(D){r.zoomDim(D,t)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(t,r){if(this.hasDim(t)){var m=this.getScale(t);m.isLinear&&this.zoomLinear(t,m,r)}},o.prototype.zoomLinear=function(t,r,m){var D=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:r.min,max:r.max});var et=this.cacheScaleDefs[t],Et=et.max-et.min,Lt=r.min,ne=r.max,ge=m*Et,be=Lt-ge,Ae=ne+ge,We=Ae-be,an=We/Et;Ae>be&&an<100&&an>.01&&D.scale(r.field,{nice:!1,min:Lt-ge,max:ne+ge})},o}(Nc),gd=ch;ks("dark",ta(co)),C("canvas",lo),C("svg",Hi),Ho("Polygon",ml),Ho("Interval",Ss),Ho("Schema",fc),Ho("Path",wu),Ho("Point",pl),Ho("Line",cc),Ho("Area",el),Ho("Edge",il),Ho("Heatmap",al),jn("base",Fe),jn("interval",Th),jn("pie",jh),jn("polar",gc),Wo("overlap",$o),Wo("distribute",Ph),Wo("fixed-overlap",Ks),Wo("hide-overlap",Du),Wo("limit-in-shape",Nh),Wo("limit-in-canvas",ha),Wo("limit-in-plot",ql),Wo("pie-outer",Nl),Wo("adjust-color",Ul),Wo("interval-adjust-position",ku),Wo("interval-hide-overlap",Xl),Wo("point-adjust-position",Ru),Wo("pie-spider",Rh),Wo("path-adjust-position",Ql),Eo("fade-in",tf),Eo("fade-out",ef),Eo("grow-in-x",rf),Eo("grow-in-xy",af),Eo("grow-in-y",of),Eo("scale-in-x",uf),Eo("scale-in-y",Pa),Eo("wave-in",Xa),Eo("zoom-in",Bu),Eo("zoom-out",Oa),Eo("position-update",Lu),Eo("sector-path-update",Zs),Eo("path-in",sf),B("rect",lf),B("mirror",Gh),B("list",cf),B("matrix",Bh),B("circle",wa),B("tree",Uh),yr("axis",gf),yr("legend",Of),yr("tooltip",Fs),yr("annotation",df),yr("slider",Sf),yr("scrollbar",Jh),Ee("tooltip",da),Ee("sibling-tooltip",Jo),Ee("ellipsis-text",zu),Ee("element-active",qh),Ee("element-single-active",od),Ee("element-range-active",rd),Ee("element-highlight",Yu),Ee("element-highlight-by-x",Pf),Ee("element-highlight-by-color",jf),Ee("element-single-highlight",kf),Ee("element-range-highlight",Ec),Ee("element-sibling-highlight",Ec,{effectSiblings:!0,effectByRecord:!0}),Ee("element-selected",cd),Ee("element-single-selected",Xu),Ee("element-range-selected",sd),Ee("element-link-by-color",ed),Ee("active-region",Ef),Ee("list-active",Rf),Ee("list-selected",Ff),Ee("list-highlight",fs),Ee("list-unchecked",fd),Ee("legend-item-highlight",fs,{componentNames:["legend"]}),Ee("axis-label-highlight",fs,{componentNames:["axis"]}),Ee("rect-mask",Tc),Ee("x-rect-mask",jc,{dim:"x"}),Ee("y-rect-mask",jc,{dim:"y"}),Ee("circle-mask",zf),Ee("path-mask",Ic),Ee("smooth-path-mask",Yf),Ee("cursor",vd),Ee("data-filter",Hf),Ee("brush",uu),Ee("brush-x",uu,{dims:["x"]}),Ee("brush-y",uu,{dims:["y"]}),Ee("sibling-filter",Ku),Ee("sibling-x-filter",Ku),Ee("sibling-y-filter",Ku),Ee("element-filter",Qf),Ee("element-sibling-filter",Dc),Ee("element-sibling-filter-record",Dc,{byRecord:!0}),Ee("view-drag",kc),Ee("view-move",oh),Ee("scale-translate",uh),Ee("scale-zoom",gd),Ee("reset-button",th,{name:"reset-button",text:"reset"});function va(c){return c.isInPlot()}$i("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),$i("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),$i("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),$i("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),$i("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),$i("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),$i("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),$i("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),$i("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),$i("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),$i("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),$i("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(o){return!o.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(o){return!o.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),$i("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),$i("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),$i("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),$i("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:"path-mask:start"},{trigger:"mousedown",isEnable:va,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),$i("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),$i("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),$i("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),$i("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),$i("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),$i("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function hs(c){return c.gEvent.preventDefault(),c.gEvent.originalEvent.deltaY>0}$i("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(o){return hs(o.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(o){return!hs(o.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),$i("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]})},IvmH:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at}),z.d(_t,"b",function(){return a});var at={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},a={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},A=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},KMYG:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return i});var at=z("mrSG"),a=z("5HRO"),A=z("YuPD"),e=z("WOQw");function i(v){var b=v.options,S=b.polygon,f=b.xField,M=b.yField,I=b.seriesField,y=b.tooltip,n=Object(a.a)(y,[f,M,I]),s=n.fields,d=n.formatter;return S?Object(e.a)(Object(A.b)({},v,{options:{type:"polygon",colorField:I,tooltipFields:s,mapping:Object(at.a)({tooltip:d},S)}})):v}},KavR:function(Un,_t,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("0Xep"),e=z("Qci9");function i(b,S){return(S-b)*Math.random()+b}var v=function(b){Object(at.b)(S,b);function S(){return b!==null&&b.apply(this,arguments)||this}return S.prototype.process=function(f){var M=a.clone(f),I=a.flatten(M);return this.adjustData(M,I),M},S.prototype.adjustDim=function(f,M,I){var y=this,n=this.groupData(I,f);return a.each(n,function(s,d){return y.adjustGroup(s,f,parseFloat(d),M)})},S.prototype.getAdjustOffset=function(f){var M=f.pre,I=f.next,y=(I-M)*A.c;return i(M+y,I-y)},S.prototype.adjustGroup=function(f,M,I,y){var n=this,s=this.getAdjustRange(M,I,y);return a.each(f,function(d){d[M]=n.getAdjustOffset(s)}),f},S}(e.a);_t.a=v},KxBF:function(Un,_t){function z(at,a,A){var e=-1,i=at.length;a<0&&(a=-a>i?0:i+a),A=A>i?i:A,A<0&&(A+=i),i=a>A?0:A-a>>>0,a>>>=0;for(var v=Array(i);++e<i;)v[e]=at[e+a];return v}Un.exports=z},L16w:function(Un,_t,z){"use strict";_t.a={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},LmB6:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("f6Jy"),A=z("sstZ"),e=function(i){Object(at.b)(v,i);function v(b){var S=i.call(this)||this;S.destroyed=!1;var f=S.getDefaultCfg();return S.cfg=Object(A.i)(f,b),S}return v.prototype.getDefaultCfg=function(){return{}},v.prototype.get=function(b){return this.cfg[b]},v.prototype.set=function(b,S){this.cfg[b]=S},v.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},v}(a.a);_t.a=e},LvGN:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return v}),z.d(_t,"c",function(){return T}),z.d(_t,"d",function(){return q}),z.d(_t,"e",function(){return G}),z.d(_t,"b",function(){return Ut});var at=z("iTfj"),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,A=/[^\s\,]+/ig;function e(Ct){var Vt=Ct||[];if(Object(at.isArray)(Vt))return Vt;if(Object(at.isString)(Vt))return Vt=Vt.match(a),Object(at.each)(Vt,function(Ht,re){if(Ht=Ht.match(A),Ht[0].length>1){var pe=Ht[0].charAt(0);Ht.splice(1,0,Ht[0].substr(1)),Ht[0]=pe}Object(at.each)(Ht,function(ye,we){isNaN(ye)||(Ht[we]=+ye)}),Vt[re]=Ht}),Vt}var i=e;function v(Ct,Vt){for(var Ht=[],re=0,pe=Ct.length;pe-2*!Vt>re;re+=2){var ye=[{x:+Ct[re-2],y:+Ct[re-1]},{x:+Ct[re],y:+Ct[re+1]},{x:+Ct[re+2],y:+Ct[re+3]},{x:+Ct[re+4],y:+Ct[re+5]}];Vt?re?pe-4===re?ye[3]={x:+Ct[0],y:+Ct[1]}:pe-2===re&&(ye[2]={x:+Ct[0],y:+Ct[1]},ye[3]={x:+Ct[2],y:+Ct[3]}):ye[0]={x:+Ct[pe-2],y:+Ct[pe-1]}:pe-4===re?ye[3]=ye[2]:re||(ye[0]={x:+Ct[re],y:+Ct[re+1]}),Ht.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return Ht}function b(Ct,Vt){var Ht=[],re=[];function pe(ye,we){if(ye.length===1)Ht.push(ye[0]),re.push(ye[0]);else{for(var Ne=[],Ke=0;Ke<ye.length-1;Ke++)Ke===0&&Ht.push(ye[0]),Ke===ye.length-2&&re.push(ye[Ke+1]),Ne[Ke]=[(1-we)*ye[Ke][0]+we*ye[Ke+1][0],(1-we)*ye[Ke][1]+we*ye[Ke+1][1]];pe(Ne,we)}}return Ct.length&&pe(Ct,Vt),{left:Ht,right:re.reverse()}}function S(Ct,Vt,Ht){var re=[[Ct[1],Ct[2]]];Ht=Ht||2;var pe=[];Vt[0]==="A"?(re.push(Vt[6]),re.push(Vt[7])):Vt[0]==="C"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]]),re.push([Vt[5],Vt[6]])):Vt[0]==="S"||Vt[0]==="Q"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]])):re.push([Vt[1],Vt[2]]);for(var ye=re,we=1/Ht,Ne=0;Ne<Ht-1;Ne++){var Ke=we/(1-we*Ne),pn=b(ye,Ke);pe.push(pn.left),ye=pn.right}pe.push(ye);var hn=pe.map(function(kn){var Tn=[];return kn.length===4&&(Tn.push("C"),Tn=Tn.concat(kn[2])),kn.length>=3&&(kn.length===3&&Tn.push("Q"),Tn=Tn.concat(kn[1])),kn.length===2&&Tn.push("L"),Tn=Tn.concat(kn[kn.length-1]),Tn});return hn}function f(Ct,Vt,Ht){if(Ht===1)return[[].concat(Ct)];var re=[];if(Vt[0]==="L"||Vt[0]==="C"||Vt[0]==="Q")re=re.concat(S(Ct,Vt,Ht));else{var pe=[].concat(Ct);pe[0]==="M"&&(pe[0]="L");for(var ye=0;ye<=Ht-1;ye++)re.push(pe)}return re}function M(Ct,Vt){if(Ct.length===1)return Ct;var Ht=Ct.length-1,re=Vt.length-1,pe=Ht/re,ye=[];if(Ct.length===1&&Ct[0][0]==="M"){for(var we=0;we<re-Ht;we++)Ct.push(Ct[0]);return Ct}for(var we=0;we<re;we++){var Ne=Math.floor(pe*we);ye[Ne]=(ye[Ne]||0)+1}var Ke=ye.reduce(function(pn,hn,kn){return kn===Ht?pn.concat(Ct[Ht]):pn.concat(f(Ct[kn],Ct[kn+1],hn))},[]);return Ke.unshift(Ct[0]),(Vt[re]==="Z"||Vt[re]==="z")&&Ke.push("Z"),Ke}function I(Ct,Vt,Ht){var re=null,pe=Ht;return Vt<pe&&(pe=Vt,re="add"),Ct<pe&&(pe=Ct,re="del"),{type:re,min:pe}}var y=function(Vt,Ht){var re=Vt.length,pe=Ht.length,ye,we,Ne=0;if(re===0||pe===0)return null;for(var Ke=[],pn=0;pn<=re;pn++)Ke[pn]=[],Ke[pn][0]={min:pn};for(var hn=0;hn<=pe;hn++)Ke[0][hn]={min:hn};for(var pn=1;pn<=re;pn++){ye=Vt[pn-1];for(var hn=1;hn<=pe;hn++){we=Ht[hn-1],Object(at.isEqual)(ye,we)?Ne=0:Ne=1;var kn=Ke[pn-1][hn].min+1,Tn=Ke[pn][hn-1].min+1,Rn=Ke[pn-1][hn-1].min+Ne;Ke[pn][hn]=I(kn,Tn,Rn)}}return Ke};function n(Ct,Vt){var Ht=y(Ct,Vt),re=Ct.length,pe=Vt.length,ye=[],we=1,Ne=1;if(Ht[re][pe]!==re){for(var Ke=1;Ke<=re;Ke++){var pn=Ht[Ke][Ke].min;Ne=Ke;for(var hn=we;hn<=pe;hn++)Ht[Ke][hn].min<pn&&(pn=Ht[Ke][hn].min,Ne=hn);we=Ne,Ht[Ke][we].type&&ye.push({index:Ke-1,type:Ht[Ke][we].type})}for(var Ke=ye.length-1;Ke>=0;Ke--)we=ye[Ke].index,ye[Ke].type==="add"?Ct.splice(we,0,[].concat(Ct[we])):Ct.splice(we,1)}if(re=Ct.length,re<pe)for(var Ke=0;Ke<pe-re;Ke++)Ct[re-1][0]==="z"||Ct[re-1][0]==="Z"?Ct.splice(re-2,0,Ct[re-2]):Ct.push(Ct[re-1]);return Ct}function s(Ct){var Vt=[];switch(Ct[0]){case"M":Vt.push([Ct[1],Ct[2]]);break;case"L":Vt.push([Ct[1],Ct[2]]);break;case"A":Vt.push([Ct[6],Ct[7]]);break;case"Q":Vt.push([Ct[3],Ct[4]]),Vt.push([Ct[1],Ct[2]]);break;case"T":Vt.push([Ct[1],Ct[2]]);break;case"C":Vt.push([Ct[5],Ct[6]]),Vt.push([Ct[1],Ct[2]]),Vt.push([Ct[3],Ct[4]]);break;case"S":Vt.push([Ct[3],Ct[4]]),Vt.push([Ct[1],Ct[2]]);break;case"H":Vt.push([Ct[1],Ct[1]]);break;case"V":Vt.push([Ct[1],Ct[1]]);break;default:}return Vt}function d(Ct,Vt,Ht){for(var re=[].concat(Ct),pe,ye=1/(Ht+1),we=s(Vt)[0],Ne=1;Ne<=Ht;Ne++)ye*=Ne,pe=Math.floor(Ct.length*ye),pe===0?re.unshift([we[0]*ye+Ct[pe][0]*(1-ye),we[1]*ye+Ct[pe][1]*(1-ye)]):re.splice(pe,0,[we[0]*ye+Ct[pe][0]*(1-ye),we[1]*ye+Ct[pe][1]*(1-ye)]);return re}function E(Ct,Vt){if(Ct.length<=1)return Ct;for(var Ht,re=0;re<Vt.length;re++)if(Ct[re][0]!==Vt[re][0])switch(Ht=s(Ct[re]),Vt[re][0]){case"M":Ct[re]=["M"].concat(Ht[0]);break;case"L":Ct[re]=["L"].concat(Ht[0]);break;case"A":Ct[re]=[].concat(Vt[re]),Ct[re][6]=Ht[0][0],Ct[re][7]=Ht[0][1];break;case"Q":if(Ht.length<2)if(re>0)Ht=d(Ht,Ct[re-1],1);else{Ct[re]=Vt[re];break}Ct[re]=["Q"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"T":Ct[re]=["T"].concat(Ht[0]);break;case"C":if(Ht.length<3)if(re>0)Ht=d(Ht,Ct[re-1],2);else{Ct[re]=Vt[re];break}Ct[re]=["C"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"S":if(Ht.length<2)if(re>0)Ht=d(Ht,Ct[re-1],1);else{Ct[re]=Vt[re];break}Ct[re]=["S"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;default:Ct[re]=Vt[re]}return Ct}function O(Ct,Vt,Ht,re,pe){return pe?[["M",+Ct+ +pe,Vt],["l",Ht-pe*2,0],["a",pe,pe,0,0,1,pe,pe],["l",0,re-pe*2],["a",pe,pe,0,0,1,-pe,pe],["l",pe*2-Ht,0],["a",pe,pe,0,0,1,-pe,-pe],["l",0,pe*2-re],["a",pe,pe,0,0,1,pe,-pe],["z"]]:[["M",Ct,Vt],["l",Ht,0],["l",0,re],["l",-Ht,0],["z"]]}var C=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,p=new RegExp("([a-z])["+C+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+C+"]*,?["+C+"]*)+)","ig"),x=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+C+"]*,?["+C+"]*","ig");function T(Ct){if(!Ct)return null;if(Object(at.isArray)(Ct))return Ct;var Vt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ht=[];return String(Ct).replace(p,function(re,pe,ye){var we=[],Ne=pe.toLowerCase();if(ye.replace(x,function(Ke,pn){pn&&we.push(+pn)}),Ne==="m"&&we.length>2&&(Ht.push([pe].concat(we.splice(0,2))),Ne="l",pe=pe==="m"?"l":"L"),Ne==="o"&&we.length===1&&Ht.push([pe,we[0]]),Ne==="r")Ht.push([pe].concat(we));else for(;we.length>=Vt[Ne]&&(Ht.push([pe].concat(we.splice(0,Vt[Ne]))),!!Vt[Ne]););return""}),Ht}var N=/[a-z]/;function Y(Ct,Vt){return[Vt[0]+(Vt[0]-Ct[0]),Vt[1]+(Vt[1]-Ct[1])]}function q(Ct){var Vt=T(Ct);if(!Vt||!Vt.length)return[["M",0,0]];for(var Ht=!1,re=0;re<Vt.length;re++){var pe=Vt[re][0];if(N.test(pe)||["V","H","T","S"].indexOf(pe)>=0){Ht=!0;break}}if(!Ht)return Vt;var ye=[],we=0,Ne=0,Ke=0,pn=0,hn=0,kn,Tn,Rn=Vt[0];(Rn[0]==="M"||Rn[0]==="m")&&(we=+Rn[1],Ne=+Rn[2],Ke=we,pn=Ne,hn++,ye[0]=["M",we,Ne]);for(var re=hn,Mn=Vt.length;re<Mn;re++){var Cn=Vt[re],_n=ye[re-1],Kn=[],pe=Cn[0],tr=pe.toUpperCase();if(pe!==tr)switch(Kn[0]=tr,tr){case"A":Kn[1]=Cn[1],Kn[2]=Cn[2],Kn[3]=Cn[3],Kn[4]=Cn[4],Kn[5]=Cn[5],Kn[6]=+Cn[6]+we,Kn[7]=+Cn[7]+Ne;break;case"V":Kn[1]=+Cn[1]+Ne;break;case"H":Kn[1]=+Cn[1]+we;break;case"M":Ke=+Cn[1]+we,pn=+Cn[2]+Ne;break;default:for(var or=1,nr=Cn.length;or<nr;or++)Kn[or]=+Cn[or]+(or%2?we:Ne)}else Kn=Vt[re];switch(tr){case"Z":we=+Ke,Ne=+pn;break;case"H":we=Kn[1],Kn=["L",we,Ne];break;case"V":Ne=Kn[1],Kn=["L",we,Ne];break;case"T":we=Kn[1],Ne=Kn[2];var er=Y([_n[1],_n[2]],[_n[3],_n[4]]);Kn=["Q",er[0],er[1],we,Ne];break;case"S":we=Kn[Kn.length-2],Ne=Kn[Kn.length-1];var Sr=_n.length,Vr=Y([_n[Sr-4],_n[Sr-3]],[_n[Sr-2],_n[Sr-1]]);Kn=["C",Vr[0],Vr[1],Kn[1],Kn[2],we,Ne];break;case"M":Ke=Kn[Kn.length-2],pn=Kn[Kn.length-1];break;default:we=Kn[Kn.length-2],Ne=Kn[Kn.length-1]}ye.push(Kn)}return ye}var nt=function Ct(Vt,Ht,re,pe,ye,we,Ne,Ke,pn,hn){re===pe&&(re+=1);var kn=Math.PI*120/180,Tn=Math.PI/180*(+ye||0),Rn=[],Mn,Cn,_n,Kn,tr,or=function(ci,Qr,gi){var Oi=ci*Math.cos(gi)-Qr*Math.sin(gi),bi=ci*Math.sin(gi)+Qr*Math.cos(gi);return{x:Oi,y:bi}};if(hn)Cn=hn[0],_n=hn[1],Kn=hn[2],tr=hn[3];else{Mn=or(Vt,Ht,-Tn),Vt=Mn.x,Ht=Mn.y,Mn=or(Ke,pn,-Tn),Ke=Mn.x,pn=Mn.y,Vt===Ke&&Ht===pn&&(Ke+=1,pn+=1);var nr=(Vt-Ke)/2,er=(Ht-pn)/2,Sr=nr*nr/(re*re)+er*er/(pe*pe);Sr>1&&(Sr=Math.sqrt(Sr),re=Sr*re,pe=Sr*pe);var Vr=re*re,ti=pe*pe,hi=(we===Ne?-1:1)*Math.sqrt(Math.abs((Vr*ti-Vr*er*er-ti*nr*nr)/(Vr*er*er+ti*nr*nr)));Kn=hi*re*er/pe+(Vt+Ke)/2,tr=hi*-pe*nr/re+(Ht+pn)/2,Cn=Math.asin(Number(((Ht-tr)/pe).toFixed(9))),_n=Math.asin(Number(((pn-tr)/pe).toFixed(9))),Cn=Vt<Kn?Math.PI-Cn:Cn,_n=Ke<Kn?Math.PI-_n:_n,Cn<0&&(Cn=Math.PI*2+Cn),_n<0&&(_n=Math.PI*2+_n),Ne&&Cn>_n&&(Cn=Cn-Math.PI*2),!Ne&&_n>Cn&&(_n=_n-Math.PI*2)}var Fi=_n-Cn;if(Math.abs(Fi)>kn){var to=_n,si=Ke,Ci=pn;_n=Cn+kn*(Ne&&_n>Cn?1:-1),Ke=Kn+re*Math.cos(_n),pn=tr+pe*Math.sin(_n),Rn=Ct(Ke,pn,re,pe,ye,0,Ne,si,Ci,[_n,to,Kn,tr])}Fi=_n-Cn;var _i=Math.cos(Cn),Li=Math.sin(Cn),Vi=Math.cos(_n),ro=Math.sin(_n),jr=Math.tan(Fi/4),Ji=4/3*re*jr,pr=4/3*pe*jr,Yr=[Vt,Ht],Br=[Vt+Ji*Li,Ht-pr*_i],Nr=[Ke+Ji*ro,pn-pr*Vi],Xr=[Ke,pn];if(Br[0]=2*Yr[0]-Br[0],Br[1]=2*Yr[1]-Br[1],hn)return[Br,Nr,Xr].concat(Rn);Rn=[Br,Nr,Xr].concat(Rn).join().split(",");for(var Kr=[],ni=0,fi=Rn.length;ni<fi;ni++)Kr[ni]=ni%2?or(Rn[ni-1],Rn[ni],Tn).y:or(Rn[ni],Rn[ni+1],Tn).x;return Kr},vt=function(Vt,Ht,re,pe){return[Vt,Ht,re,pe,re,pe]},ht=function(Vt,Ht,re,pe,ye,we){var Ne=1/3,Ke=2/3;return[Ne*Vt+Ke*re,Ne*Ht+Ke*pe,Ne*ye+Ke*re,Ne*we+Ke*pe,ye,we]};function St(Ct,Vt){var Ht=q(Ct),re=Vt&&q(Vt),pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},we=[],Ne=[],Ke="",pn="",hn,kn=function(nr,er,Sr){var Vr,ti;if(!nr)return["C",er.x,er.y,er.x,er.y,er.x,er.y];switch(!(nr[0]in{T:1,Q:1})&&(er.qx=er.qy=null),nr[0]){case"M":er.X=nr[1],er.Y=nr[2];break;case"A":nr=["C"].concat(nt.apply(0,[er.x,er.y].concat(nr.slice(1))));break;case"S":Sr==="C"||Sr==="S"?(Vr=er.x*2-er.bx,ti=er.y*2-er.by):(Vr=er.x,ti=er.y),nr=["C",Vr,ti].concat(nr.slice(1));break;case"T":Sr==="Q"||Sr==="T"?(er.qx=er.x*2-er.qx,er.qy=er.y*2-er.qy):(er.qx=er.x,er.qy=er.y),nr=["C"].concat(ht(er.x,er.y,er.qx,er.qy,nr[1],nr[2]));break;case"Q":er.qx=nr[1],er.qy=nr[2],nr=["C"].concat(ht(er.x,er.y,nr[1],nr[2],nr[3],nr[4]));break;case"L":nr=["C"].concat(vt(er.x,er.y,nr[1],nr[2]));break;case"H":nr=["C"].concat(vt(er.x,er.y,nr[1],er.y));break;case"V":nr=["C"].concat(vt(er.x,er.y,er.x,nr[1]));break;case"Z":nr=["C"].concat(vt(er.x,er.y,er.X,er.Y));break;default:break}return nr},Tn=function(nr,er){if(nr[er].length>7){nr[er].shift();for(var Sr=nr[er];Sr.length;)we[er]="A",re&&(Ne[er]="A"),nr.splice(er++,0,["C"].concat(Sr.splice(0,6)));nr.splice(er,1),hn=Math.max(Ht.length,re&&re.length||0)}},Rn=function(nr,er,Sr,Vr,ti){nr&&er&&nr[ti][0]==="M"&&er[ti][0]!=="M"&&(er.splice(ti,0,["M",Vr.x,Vr.y]),Sr.bx=0,Sr.by=0,Sr.x=nr[ti][1],Sr.y=nr[ti][2],hn=Math.max(Ht.length,re&&re.length||0))};hn=Math.max(Ht.length,re&&re.length||0);for(var Mn=0;Mn<hn;Mn++){Ht[Mn]&&(Ke=Ht[Mn][0]),Ke!=="C"&&(we[Mn]=Ke,Mn&&(pn=we[Mn-1])),Ht[Mn]=kn(Ht[Mn],pe,pn),we[Mn]!=="A"&&Ke==="C"&&(we[Mn]="C"),Tn(Ht,Mn),re&&(re[Mn]&&(Ke=re[Mn][0]),Ke!=="C"&&(Ne[Mn]=Ke,Mn&&(pn=Ne[Mn-1])),re[Mn]=kn(re[Mn],ye,pn),Ne[Mn]!=="A"&&Ke==="C"&&(Ne[Mn]="C"),Tn(re,Mn)),Rn(Ht,re,pe,ye,Mn),Rn(re,Ht,ye,pe,Mn);var Cn=Ht[Mn],_n=re&&re[Mn],Kn=Cn.length,tr=re&&_n.length;pe.x=Cn[Kn-2],pe.y=Cn[Kn-1],pe.bx=parseFloat(Cn[Kn-4])||pe.x,pe.by=parseFloat(Cn[Kn-3])||pe.y,ye.bx=re&&(parseFloat(_n[tr-4])||ye.x),ye.by=re&&(parseFloat(_n[tr-3])||ye.y),ye.x=re&&_n[tr-2],ye.y=re&&_n[tr-1]}return re?[Ht,re]:Ht}var wt=function(Vt,Ht,re,pe,ye){var we=-3*Ht+9*re-9*pe+3*ye,Ne=Vt*we+6*Ht-12*re+6*pe;return Vt*Ne-3*Ht+3*re},xt=function(Vt,Ht,re,pe,ye,we,Ne,Ke,pn){pn===null&&(pn=1),pn=pn>1?1:pn<0?0:pn;for(var hn=pn/2,kn=12,Tn=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Rn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Mn=0,Cn=0;Cn<kn;Cn++){var _n=hn*Tn[Cn]+hn,Kn=wt(_n,Vt,re,ye,Ne),tr=wt(_n,Ht,pe,we,Ke),or=Kn*Kn+tr*tr;Mn+=Rn[Cn]*Math.sqrt(or)}return hn*Mn},ft=function(Vt,Ht,re,pe,ye,we,Ne,Ke){for(var pn=[],hn=[[],[]],kn,Tn,Rn,Mn,Cn=0;Cn<2;++Cn){if(Cn===0?(Tn=6*Vt-12*re+6*ye,kn=-3*Vt+9*re-9*ye+3*Ne,Rn=3*re-3*Vt):(Tn=6*Ht-12*pe+6*we,kn=-3*Ht+9*pe-9*we+3*Ke,Rn=3*pe-3*Ht),Math.abs(kn)<1e-12){if(Math.abs(Tn)<1e-12)continue;Mn=-Rn/Tn,Mn>0&&Mn<1&&pn.push(Mn);continue}var _n=Tn*Tn-4*Rn*kn,Kn=Math.sqrt(_n);if(!(_n<0)){var tr=(-Tn+Kn)/(2*kn);tr>0&&tr<1&&pn.push(tr);var or=(-Tn-Kn)/(2*kn);or>0&&or<1&&pn.push(or)}}for(var nr=pn.length,er=nr,Sr;nr--;)Mn=pn[nr],Sr=1-Mn,hn[0][nr]=Sr*Sr*Sr*Vt+3*Sr*Sr*Mn*re+3*Sr*Mn*Mn*ye+Mn*Mn*Mn*Ne,hn[1][nr]=Sr*Sr*Sr*Ht+3*Sr*Sr*Mn*pe+3*Sr*Mn*Mn*we+Mn*Mn*Mn*Ke;return hn[0][er]=Vt,hn[1][er]=Ht,hn[0][er+1]=Ne,hn[1][er+1]=Ke,hn[0].length=hn[1].length=er+2,{min:{x:Math.min.apply(0,hn[0]),y:Math.min.apply(0,hn[1])},max:{x:Math.max.apply(0,hn[0]),y:Math.max.apply(0,hn[1])}}},Ft=function(Vt,Ht,re,pe,ye,we,Ne,Ke){if(!(Math.max(Vt,re)<Math.min(ye,Ne)||Math.min(Vt,re)>Math.max(ye,Ne)||Math.max(Ht,pe)<Math.min(we,Ke)||Math.min(Ht,pe)>Math.max(we,Ke))){var pn=(Vt*pe-Ht*re)*(ye-Ne)-(Vt-re)*(ye*Ke-we*Ne),hn=(Vt*pe-Ht*re)*(we-Ke)-(Ht-pe)*(ye*Ke-we*Ne),kn=(Vt-re)*(we-Ke)-(Ht-pe)*(ye-Ne);if(!!kn){var Tn=pn/kn,Rn=hn/kn,Mn=+Tn.toFixed(2),Cn=+Rn.toFixed(2);if(!(Mn<+Math.min(Vt,re).toFixed(2)||Mn>+Math.max(Vt,re).toFixed(2)||Mn<+Math.min(ye,Ne).toFixed(2)||Mn>+Math.max(ye,Ne).toFixed(2)||Cn<+Math.min(Ht,pe).toFixed(2)||Cn>+Math.max(Ht,pe).toFixed(2)||Cn<+Math.min(we,Ke).toFixed(2)||Cn>+Math.max(we,Ke).toFixed(2)))return{x:Tn,y:Rn}}}},kt=function(Vt,Ht,re){return Ht>=Vt.x&&Ht<=Vt.x+Vt.width&&re>=Vt.y&&re<=Vt.y+Vt.height},Ot=function(Vt,Ht,re,pe){return Vt===null&&(Vt=Ht=re=pe=0),Ht===null&&(Ht=Vt.y,re=Vt.width,pe=Vt.height,Vt=Vt.x),{x:Vt,y:Ht,width:re,w:re,height:pe,h:pe,x2:Vt+re,y2:Ht+pe,cx:Vt+re/2,cy:Ht+pe/2,r1:Math.min(re,pe)/2,r2:Math.max(re,pe)/2,r0:Math.sqrt(re*re+pe*pe)/2,path:O(Vt,Ht,re,pe),vb:[Vt,Ht,re,pe].join(" ")}},X=function(Vt,Ht){return Vt=Ot(Vt),Ht=Ot(Ht),kt(Ht,Vt.x,Vt.y)||kt(Ht,Vt.x2,Vt.y)||kt(Ht,Vt.x,Vt.y2)||kt(Ht,Vt.x2,Vt.y2)||kt(Vt,Ht.x,Ht.y)||kt(Vt,Ht.x2,Ht.y)||kt(Vt,Ht.x,Ht.y2)||kt(Vt,Ht.x2,Ht.y2)||(Vt.x<Ht.x2&&Vt.x>Ht.x||Ht.x<Vt.x2&&Ht.x>Vt.x)&&(Vt.y<Ht.y2&&Vt.y>Ht.y||Ht.y<Vt.y2&&Ht.y>Vt.y)},ct=function(Vt,Ht,re,pe,ye,we,Ne,Ke){Object(at.isArray)(Vt)||(Vt=[Vt,Ht,re,pe,ye,we,Ne,Ke]);var pn=ft.apply(null,Vt);return Ot(pn.min.x,pn.min.y,pn.max.x-pn.min.x,pn.max.y-pn.min.y)},dt=function(Vt,Ht,re,pe,ye,we,Ne,Ke,pn){var hn=1-pn,kn=Math.pow(hn,3),Tn=Math.pow(hn,2),Rn=pn*pn,Mn=Rn*pn,Cn=kn*Vt+Tn*3*pn*re+hn*3*pn*pn*ye+Mn*Ne,_n=kn*Ht+Tn*3*pn*pe+hn*3*pn*pn*we+Mn*Ke,Kn=Vt+2*pn*(re-Vt)+Rn*(ye-2*re+Vt),tr=Ht+2*pn*(pe-Ht)+Rn*(we-2*pe+Ht),or=re+2*pn*(ye-re)+Rn*(Ne-2*ye+re),nr=pe+2*pn*(we-pe)+Rn*(Ke-2*we+pe),er=hn*Vt+pn*re,Sr=hn*Ht+pn*pe,Vr=hn*ye+pn*Ne,ti=hn*we+pn*Ke,hi=90-Math.atan2(Kn-or,tr-nr)*180/Math.PI;return{x:Cn,y:_n,m:{x:Kn,y:tr},n:{x:or,y:nr},start:{x:er,y:Sr},end:{x:Vr,y:ti},alpha:hi}},pt=function(Vt,Ht,re){var pe=ct(Vt),ye=ct(Ht);if(!X(pe,ye))return re?0:[];for(var we=xt.apply(0,Vt),Ne=xt.apply(0,Ht),Ke=~~(we/8),pn=~~(Ne/8),hn=[],kn=[],Tn={},Rn=re?0:[],Mn=0;Mn<Ke+1;Mn++){var Cn=dt.apply(0,Vt.concat(Mn/Ke));hn.push({x:Cn.x,y:Cn.y,t:Mn/Ke})}for(var Mn=0;Mn<pn+1;Mn++){var Cn=dt.apply(0,Ht.concat(Mn/pn));kn.push({x:Cn.x,y:Cn.y,t:Mn/pn})}for(var Mn=0;Mn<Ke;Mn++)for(var _n=0;_n<pn;_n++){var Kn=hn[Mn],tr=hn[Mn+1],or=kn[_n],nr=kn[_n+1],er=Math.abs(tr.x-Kn.x)<.001?"y":"x",Sr=Math.abs(nr.x-or.x)<.001?"y":"x",Vr=Ft(Kn.x,Kn.y,tr.x,tr.y,or.x,or.y,nr.x,nr.y);if(Vr){if(Tn[Vr.x.toFixed(4)]===Vr.y.toFixed(4))continue;Tn[Vr.x.toFixed(4)]=Vr.y.toFixed(4);var ti=Kn.t+Math.abs((Vr[er]-Kn[er])/(tr[er]-Kn[er]))*(tr.t-Kn.t),hi=or.t+Math.abs((Vr[Sr]-or[Sr])/(nr[Sr]-or[Sr]))*(nr.t-or.t);ti>=0&&ti<=1&&hi>=0&&hi<=1&&(re?Rn++:Rn.push({x:Vr.x,y:Vr.y,t1:ti,t2:hi}))}}return Rn},Mt=function(Vt,Ht,re){Vt=St(Vt),Ht=St(Ht);for(var pe,ye,we,Ne,Ke,pn,hn,kn,Tn,Rn,Mn=re?0:[],Cn=0,_n=Vt.length;Cn<_n;Cn++){var Kn=Vt[Cn];if(Kn[0]==="M")pe=Ke=Kn[1],ye=pn=Kn[2];else{Kn[0]==="C"?(Tn=[pe,ye].concat(Kn.slice(1)),pe=Tn[6],ye=Tn[7]):(Tn=[pe,ye,pe,ye,Ke,pn,Ke,pn],pe=Ke,ye=pn);for(var tr=0,or=Ht.length;tr<or;tr++){var nr=Ht[tr];if(nr[0]==="M")we=hn=nr[1],Ne=kn=nr[2];else{nr[0]==="C"?(Rn=[we,Ne].concat(nr.slice(1)),we=Rn[6],Ne=Rn[7]):(Rn=[we,Ne,we,Ne,hn,kn,hn,kn],we=hn,Ne=kn);var er=pt(Tn,Rn,re);if(re)Mn+=er;else{for(var Sr=0,Vr=er.length;Sr<Vr;Sr++)er[Sr].segment1=Cn,er[Sr].segment2=tr,er[Sr].bez1=Tn,er[Sr].bez2=Rn;Mn=Mn.concat(er)}}}}}return Mn};function tt(Ct,Vt){return Mt(Ct,Vt)}var lt=/,?([a-z]),?/gi;function it(Ct){return Ct.join(",").replace(lt,"$1")}function U(Ct){return Math.sqrt(Ct[0]*Ct[0]+Ct[1]*Ct[1])}function P(Ct,Vt){return U(Ct)*U(Vt)?(Ct[0]*Vt[0]+Ct[1]*Vt[1])/(U(Ct)*U(Vt)):1}function H(Ct,Vt){return(Ct[0]*Vt[1]<Ct[1]*Vt[0]?-1:1)*Math.acos(P(Ct,Vt))}function k(Ct,Vt){return Ct[0]===Vt[0]&&Ct[1]===Vt[1]}function h(Ct,Vt){var Ht=Vt[1],re=Vt[2],pe=Object(at.mod)(Object(at.toRadian)(Vt[3]),Math.PI*2),ye=Vt[4],we=Vt[5],Ne=Ct[0],Ke=Ct[1],pn=Vt[6],hn=Vt[7],kn=Math.cos(pe)*(Ne-pn)/2+Math.sin(pe)*(Ke-hn)/2,Tn=-1*Math.sin(pe)*(Ne-pn)/2+Math.cos(pe)*(Ke-hn)/2,Rn=kn*kn/(Ht*Ht)+Tn*Tn/(re*re);Rn>1&&(Ht*=Math.sqrt(Rn),re*=Math.sqrt(Rn));var Mn=Ht*Ht*(Tn*Tn)+re*re*(kn*kn),Cn=Mn?Math.sqrt((Ht*Ht*(re*re)-Mn)/Mn):1;ye===we&&(Cn*=-1),isNaN(Cn)&&(Cn=0);var _n=re?Cn*Ht*Tn/re:0,Kn=Ht?Cn*-re*kn/Ht:0,tr=(Ne+pn)/2+Math.cos(pe)*_n-Math.sin(pe)*Kn,or=(Ke+hn)/2+Math.sin(pe)*_n+Math.cos(pe)*Kn,nr=[(kn-_n)/Ht,(Tn-Kn)/re],er=[(-1*kn-_n)/Ht,(-1*Tn-Kn)/re],Sr=H([1,0],nr),Vr=H(nr,er);return P(nr,er)<=-1&&(Vr=Math.PI),P(nr,er)>=1&&(Vr=0),we===0&&Vr>0&&(Vr=Vr-2*Math.PI),we===1&&Vr<0&&(Vr=Vr+2*Math.PI),{cx:tr,cy:or,rx:k(Ct,[pn,hn])?0:Ht,ry:k(Ct,[pn,hn])?0:re,startAngle:Sr,endAngle:Sr+Vr,xRotation:pe,arcFlag:ye,sweepFlag:we}}function g(Ct,Vt){return[Vt[0]+(Vt[0]-Ct[0]),Vt[1]+(Vt[1]-Ct[1])]}function G(Ct){Ct=i(Ct);for(var Vt=[],Ht=null,re=null,pe=null,ye=0,we=Ct.length,Ne=0;Ne<we;Ne++){var Ke=Ct[Ne];re=Ct[Ne+1];var pn=Ke[0],hn={command:pn,prePoint:Ht,params:Ke,startTangent:null,endTangent:null};switch(pn){case"M":pe=[Ke[1],Ke[2]],ye=Ne;break;case"A":var kn=h(Ht,Ke);hn.arcParams=kn;break;default:break}if(pn==="Z")Ht=pe,re=Ct[ye+1];else{var Tn=Ke.length;Ht=[Ke[Tn-2],Ke[Tn-1]]}re&&re[0]==="Z"&&(re=Ct[ye],Vt[ye]&&(Vt[ye].prePoint=Ht)),hn.currentPoint=Ht,Vt[ye]&&k(Ht,Vt[ye].currentPoint)&&(Vt[ye].prePoint=hn.prePoint);var Rn=re?[re[re.length-2],re[re.length-1]]:null;hn.nextPoint=Rn;var Mn=hn.prePoint;if(["L","H","V"].includes(pn))hn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],hn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]];else if(pn==="Q"){var Cn=[Ke[1],Ke[2]];hn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],hn.endTangent=[Ht[0]-Cn[0],Ht[1]-Cn[1]]}else if(pn==="T"){var _n=Vt[Ne-1],Cn=g(_n.currentPoint,Mn);_n.command==="Q"?(hn.command="Q",hn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],hn.endTangent=[Ht[0]-Cn[0],Ht[1]-Cn[1]]):(hn.command="TL",hn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],hn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]])}else if(pn==="C"){var Kn=[Ke[1],Ke[2]],tr=[Ke[3],Ke[4]];hn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]}else if(pn==="S"){var _n=Vt[Ne-1],Kn=g(_n.currentPoint,Mn),tr=[Ke[1],Ke[2]];_n.command==="C"?(hn.command="C",hn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]):(hn.command="SQ",hn.startTangent=[Mn[0]-tr[0],Mn[1]-tr[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]])}else if(pn==="A"){var or=.001,nr=hn.arcParams||{},er=nr.cx,Sr=er===void 0?0:er,Vr=nr.cy,ti=Vr===void 0?0:Vr,hi=nr.rx,Fi=hi===void 0?0:hi,to=nr.ry,si=to===void 0?0:to,Ci=nr.sweepFlag,_i=Ci===void 0?0:Ci,Li=nr.startAngle,Vi=Li===void 0?0:Li,ro=nr.endAngle,jr=ro===void 0?0:ro;_i===0&&(or*=-1);var Ji=Fi*Math.cos(Vi-or)+Sr,pr=si*Math.sin(Vi-or)+ti;hn.startTangent=[Ji-pe[0],pr-pe[1]];var Yr=Fi*Math.cos(Vi+jr+or)+Sr,Br=si*Math.sin(Vi+jr-or)+ti;hn.endTangent=[Mn[0]-Yr,Mn[1]-Br]}Vt.push(hn)}return Vt}var V=function(Vt,Ht,re){return Vt>=Ht&&Vt<=re};function $(Ct,Vt,Ht,re){var pe=.001,ye={x:Ht.x-Ct.x,y:Ht.y-Ct.y},we={x:Vt.x-Ct.x,y:Vt.y-Ct.y},Ne={x:re.x-Ht.x,y:re.y-Ht.y},Ke=we.x*Ne.y-we.y*Ne.x,pn=Ke*Ke,hn=we.x*we.x+we.y*we.y,kn=Ne.x*Ne.x+Ne.y*Ne.y,Tn=null;if(pn>pe*hn*kn){var Rn=(ye.x*Ne.y-ye.y*Ne.x)/Ke,Mn=(ye.x*we.y-ye.y*we.x)/Ke;V(Rn,0,1)&&V(Mn,0,1)&&(Tn={x:Ct.x+Rn*we.x,y:Ct.y+Rn*we.y})}return Tn}var rt=1e-6;function ot(Ct){return Math.abs(Ct)<rt?0:Ct<0?-1:1}function At(Ct,Vt,Ht){return(Ht[0]-Ct[0])*(Vt[1]-Ct[1])==(Vt[0]-Ct[0])*(Ht[1]-Ct[1])&&Math.min(Ct[0],Vt[0])<=Ht[0]&&Ht[0]<=Math.max(Ct[0],Vt[0])&&Math.min(Ct[1],Vt[1])<=Ht[1]&&Ht[1]<=Math.max(Ct[1],Vt[1])}function gt(Ct,Vt,Ht){var re=!1,pe=Ct.length;if(pe<=2)return!1;for(var ye=0;ye<pe;ye++){var we=Ct[ye],Ne=Ct[(ye+1)%pe];if(At(we,Ne,[Vt,Ht]))return!0;ot(we[1]-Ht)>0!=ot(Ne[1]-Ht)>0&&ot(Vt-(Ht-we[1])*(we[0]-Ne[0])/(we[1]-Ne[1])-we[0])<0&&(re=!re)}return re}function mt(Ct){for(var Vt=[],Ht=Ct.length,re=0;re<Ht-1;re++){var pe=Ct[re],ye=Ct[re+1];Vt.push({from:{x:pe[0],y:pe[1]},to:{x:ye[0],y:ye[1]}})}if(Vt.length>1){var we=Ct[0],Ne=Ct[Ht-1];Vt.push({from:{x:Ne[0],y:Ne[1]},to:{x:we[0],y:we[1]}})}return Vt}function bt(Ct,Vt){var Ht=!1;return Object(at.each)(Ct,function(re){if($(re.from,re.to,Vt.from,Vt.to))return Ht=!0,!1}),Ht}function jt(Ct){var Vt=Ct.map(function(re){return re[0]}),Ht=Ct.map(function(re){return re[1]});return{minX:Math.min.apply(null,Vt),maxX:Math.max.apply(null,Vt),minY:Math.min.apply(null,Ht),maxY:Math.max.apply(null,Ht)}}function Dt(Ct,Vt){return!(Vt.minX>Ct.maxX||Vt.maxX<Ct.minX||Vt.minY>Ct.maxY||Vt.maxY<Ct.minY)}function Ut(Ct,Vt){if(Ct.length<2||Vt.length<2)return!1;var Ht=jt(Ct),re=jt(Vt);if(!Dt(Ht,re))return!1;var pe=!1;if(Object(at.each)(Vt,function(Ke){if(gt(Ct,Ke[0],Ke[1]))return pe=!0,!1}),pe||(Object(at.each)(Ct,function(Ke){if(gt(Vt,Ke[0],Ke[1]))return pe=!0,!1}),pe))return!0;var ye=mt(Ct),we=mt(Vt),Ne=!1;return Object(at.each)(we,function(Ke){if(bt(ye,Ke))return Ne=!0,!1}),Ne}},MaEA:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("zK8m"),A=z("aSjE"),e=function(i){Object(at.b)(v,i);function v(b){return i.call(this,b)||this}return v.prototype._isInBBox=function(b,S){var f=this.getBBox();return f.minX<=b&&f.maxX>=b&&f.minY<=S&&f.maxY>=S},v.prototype.afterAttrsChange=function(b){i.prototype.afterAttrsChange.call(this,b),this.clearCacheBBox()},v.prototype.getBBox=function(){var b=this.cfg.bbox;return b||(b=this.calculateBBox(),this.set("bbox",b)),b},v.prototype.getCanvasBBox=function(){var b=this.cfg.canvasBBox;return b||(b=this.calculateCanvasBBox(),this.set("canvasBBox",b)),b},v.prototype.applyMatrix=function(b){i.prototype.applyMatrix.call(this,b),this.set("canvasBBox",null)},v.prototype.calculateCanvasBBox=function(){var b=this.getBBox(),S=this.getTotalMatrix(),f=b.minX,M=b.minY,I=b.maxX,y=b.maxY;if(S){var n=Object(A.c)(S,[b.minX,b.minY]),s=Object(A.c)(S,[b.maxX,b.minY]),d=Object(A.c)(S,[b.minX,b.maxY]),E=Object(A.c)(S,[b.maxX,b.maxY]);f=Math.min(n[0],s[0],d[0],E[0]),I=Math.max(n[0],s[0],d[0],E[0]),M=Math.min(n[1],s[1],d[1],E[1]),y=Math.max(n[1],s[1],d[1],E[1])}var O=this.attrs;if(O.shadowColor){var C=O.shadowBlur,p=C===void 0?0:C,x=O.shadowOffsetX,T=x===void 0?0:x,N=O.shadowOffsetY,Y=N===void 0?0:N,q=f-p+T,nt=I+p+T,vt=M-p+Y,ht=y+p+Y;f=Math.min(f,q),I=Math.max(I,nt),M=Math.min(M,vt),y=Math.max(y,ht)}return{x:f,y:M,minX:f,minY:M,maxX:I,maxY:y,width:I-f,height:y-M}},v.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},v.prototype.isClipShape=function(){return this.get("isClipShape")},v.prototype.isInShape=function(b,S){return!1},v.prototype.isOnlyHitBox=function(){return!1},v.prototype.isHit=function(b,S){var f=this.get("startArrowShape"),M=this.get("endArrowShape"),I=[b,S,1];I=this.invertFromMatrix(I);var y=I[0],n=I[1],s=this._isInBBox(y,n);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(y,n)&&(this.isInShape(y,n)||f&&f.isHit(y,n)||M&&M.isHit(y,n)))},v}(a.a);_t.a=e},MeYt:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("iTfj"),A=z("1//c"),e=z("jqgP"),i=z("5UbV"),v=z("NmWf"),b="update_status",S=["visible","tip","delegateObject"],f=["container","group","shapesMap","isRegister","isUpdating","destroyed"],M=function(I){Object(at.b)(y,I);function y(){return I!==null&&I.apply(this,arguments)||this}return y.prototype.getDefaultCfg=function(){var n=I.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},n),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},y.prototype.remove=function(){this.clear();var n=this.get("group");n.remove()},y.prototype.clear=function(){var n=this.get("group");n.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},y.prototype.getChildComponentById=function(n){var s=this.getElementById(n),d=s&&s.get("component");return d},y.prototype.getElementById=function(n){return this.get("shapesMap")[n]},y.prototype.getElementByLocalId=function(n){var s=this.getElementId(n);return this.getElementById(s)},y.prototype.getElementsByName=function(n){var s=[];return Object(a.each)(this.get("shapesMap"),function(d){d.get("name")===n&&s.push(d)}),s},y.prototype.getContainer=function(){return this.get("container")},y.prototype.updateInner=function(n){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},y.prototype.render=function(){var n=this.get("offScreenGroup");n||(n=this.offScreenRender());var s=this.get("group");this.updateElements(n,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},y.prototype.show=function(){var n=this.get("group");n.show(),this.set("visible",!0)},y.prototype.hide=function(){var n=this.get("group");n.hide(),this.set("visible",!1)},y.prototype.setCapture=function(n){var s=this.get("group");s.set("capture",n),this.set("capture",n)},y.prototype.destroy=function(){this.removeEvent(),this.remove(),I.prototype.destroy.call(this)},y.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},y.prototype.getLayoutBBox=function(){var n=this.get("group"),s=this.getInnerLayoutBBox(),d=n.getTotalMatrix();return d&&(s=Object(e.a)(d,s)),s},y.prototype.on=function(n,s,d){var E=this.get("group");return E.on(n,s,d),this},y.prototype.off=function(n,s){var d=this.get("group");return d&&d.off(n,s),this},y.prototype.emit=function(n,s){var d=this.get("group");d.emit(n,s)},y.prototype.init=function(){I.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},y.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},y.prototype.delegateEmit=function(n,s){var d=this.get("group");s.target=d,d.emit(n,s),Object(A.a)(d,n,s)},y.prototype.createOffScreenGroup=function(){var n=this.get("group"),s=n.getGroupBase(),d=new s({delegateObject:this.getDelegateObject()});return d},y.prototype.applyOffset=function(){var n=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:n,y:s})},y.prototype.initGroup=function(){var n=this.get("container");this.set("group",n.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},y.prototype.offScreenRender=function(){this.clearOffScreenCache();var n=this.createOffScreenGroup();return this.renderInner(n),this.set("offScreenGroup",n),this.set("offScreenBBox",Object(i.d)(n)),n},y.prototype.addGroup=function(n,s){this.appendDelegateObject(n,s);var d=n.addGroup(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addShape=function(n,s){this.appendDelegateObject(n,s);var d=n.addShape(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addComponent=function(n,s){var d=s.id,E=s.component,O=Object(at.c)(s,["id","component"]),C=new E(Object(at.a)(Object(at.a)({},O),{id:d,container:n,updateAutoRender:this.get("updateAutoRender")}));return C.init(),C.render(),this.get("isRegister")&&this.registerElement(C.get("group")),C},y.prototype.initEvent=function(){},y.prototype.removeEvent=function(){var n=this.get("group");n.off()},y.prototype.getElementId=function(n){var s=this.get("id"),d=this.get("name");return s+"-"+d+"-"+n},y.prototype.registerElement=function(n){var s=n.get("id");this.get("shapesMap")[s]=n},y.prototype.unregisterElement=function(n){var s=n.get("id");delete this.get("shapesMap")[s]},y.prototype.moveElementTo=function(n,s){var d=Object(e.f)(s);n.attr("matrix",d)},y.prototype.addAnimation=function(n,s,d){var E=s.attr("opacity");Object(a.isNil)(E)&&(E=1),s.attr("opacity",0),s.animate({opacity:E},d)},y.prototype.removeAnimation=function(n,s,d){s.animate({opacity:0},d)},y.prototype.updateAnimation=function(n,s,d,E){s.animate(d,E)},y.prototype.updateElements=function(n,s){var d=this,E=this.get("animate"),O=this.get("animateOption"),C=n.getChildren().slice(0),p;Object(a.each)(C,function(x){var T=x.get("id"),N=d.getElementById(T),Y=x.get("name");if(N)if(x.get("isComponent")){var q=x.get("component"),nt=N.get("component"),vt=Object(a.pick)(q.cfg,Object(a.difference)(Object(a.keys)(q.cfg),f));nt.update(vt),N.set(b,"update")}else{var ht=d.getReplaceAttrs(N,x);E&&O.update?d.updateAnimation(Y,N,ht,O.update):N.attr(ht),x.isGroup()&&d.updateElements(x,N),Object(a.each)(S,function(ft){N.set(ft,x.get(ft))}),Object(i.m)(N,x),p=N,N.set(b,"update")}else{s.add(x);var St=s.getChildren();if(St.splice(St.length-1,1),p){var wt=St.indexOf(p);St.splice(wt+1,0,x)}else St.unshift(x);if(d.registerElement(x),x.set(b,"add"),x.get("isComponent")){var q=x.get("component");q.set("container",s)}else x.isGroup()&&d.registerNewGroup(x);if(p=x,E){var xt=d.get("isInit")?O.appear:O.enter;xt&&d.addAnimation(Y,x,xt)}}})},y.prototype.clearUpdateStatus=function(n){var s=n.getChildren();Object(a.each)(s,function(d){d.set(b,null)})},y.prototype.clearOffScreenCache=function(){var n=this.get("offScreenGroup");n&&n.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},y.prototype.getDelegateObject=function(){var n,s=this.get("name"),d=(n={},n[s]=this,n.component=this,n);return d},y.prototype.appendDelegateObject=function(n,s){var d=n.get("delegateObject");s.delegateObject||(s.delegateObject={}),Object(a.mix)(s.delegateObject,d)},y.prototype.getReplaceAttrs=function(n,s){var d=n.attr(),E=s.attr();return Object(a.each)(d,function(O,C){E[C]===void 0&&(E[C]=void 0)}),E},y.prototype.registerNewGroup=function(n){var s=this,d=n.getChildren();Object(a.each)(d,function(E){s.registerElement(E),E.set(b,"add"),E.isGroup()&&s.registerNewGroup(E)})},y.prototype.deleteElements=function(){var n=this,s=this.get("shapesMap"),d=[];Object(a.each)(s,function(C,p){!C.get(b)||C.destroyed?d.push([p,C]):C.set(b,null)});var E=this.get("animate"),O=this.get("animateOption");Object(a.each)(d,function(C){var p=C[0],x=C[1];if(!x.destroyed){var T=x.get("name");if(E&&O.leave){var N=Object(a.mix)({callback:function(){n.removeElement(x)}},O.leave);n.removeAnimation(T,x,N)}else n.removeElement(x)}delete s[p]})},y.prototype.removeElement=function(n){if(n.get("isGroup")){var s=n.get("component");s&&s.destroy()}n.remove()},y}(v.a);_t.a=M},Mj7Y:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return k});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),i=z("tKoa"),v=z("iTfj"),b={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function S(h,g){return g=Object(v.assign)({},b,g),f(h,g)}function f(h,g){var G=wt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(gt){Object(v.isNil)(g[gt])||G[gt](g[gt])}),G.words(h),g.imageMask&&G.createMask(g.imageMask);var V=G.start(),$=V._tags;$.forEach(function(gt){gt.x+=g.size[0]/2,gt.y+=g.size[1]/2});var rt=g.size,ot=rt[0],At=rt[1];return $.push({text:"",value:0,x:0,y:0,opacity:0}),$.push({text:"",value:0,x:ot,y:At,opacity:0}),$}var M=Math.PI/180,I=1<<11>>5,y=1<<11;function n(h){return h.text}function s(){return"serif"}function d(){return"normal"}function E(h){return h.value}function O(){return~~(Math.random()*2)*90}function C(){return 1}function p(h,g,G,V){if(!g.sprite){var $=h.context,rt=h.ratio;$.clearRect(0,0,(I<<5)/rt,y/rt);var ot=0,At=0,gt=0,mt=G.length;for(--V;++V<mt;){g=G[V],$.save(),$.font=g.style+" "+g.weight+" "+~~((g.size+1)/rt)+"px "+g.font;var bt=$.measureText(g.text+"m").width*rt,jt=g.size<<1;if(g.rotate){var Dt=Math.sin(g.rotate*M),Ut=Math.cos(g.rotate*M),Ct=bt*Ut,Vt=bt*Dt,Ht=jt*Ut,re=jt*Dt;bt=Math.max(Math.abs(Ct+re),Math.abs(Ct-re))+31>>5<<5,jt=~~Math.max(Math.abs(Vt+Ht),Math.abs(Vt-Ht))}else bt=bt+31>>5<<5;if(jt>gt&&(gt=jt),ot+bt>=I<<5&&(ot=0,At+=gt,gt=0),At+jt>=y)break;$.translate((ot+(bt>>1))/rt,(At+(jt>>1))/rt),g.rotate&&$.rotate(g.rotate*M),$.fillText(g.text,0,0),g.padding&&($.lineWidth=2*g.padding,$.strokeText(g.text,0,0)),$.restore(),g.width=bt,g.height=jt,g.xoff=ot,g.yoff=At,g.x1=bt>>1,g.y1=jt>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,ot+=bt}for(var pe=$.getImageData(0,0,(I<<5)/rt,y/rt).data,ye=[];--V>=0;)if(g=G[V],!!g.hasText){for(var bt=g.width,we=bt>>5,jt=g.y1-g.y0,Ne=0;Ne<jt*we;Ne++)ye[Ne]=0;if(ot=g.xoff,ot==null)return;At=g.yoff;for(var Ke=0,pn=-1,hn=0;hn<jt;hn++){for(var Ne=0;Ne<bt;Ne++){var kn=we*hn+(Ne>>5),Tn=pe[(At+hn)*(I<<5)+(ot+Ne)<<2]?1<<31-Ne%32:0;ye[kn]|=Tn,Ke|=Tn}Ke?pn=hn:(g.y0++,jt--,hn--,At++)}g.y1=g.y0+pn,g.sprite=ye.slice(0,(g.y1-g.y0)*we)}}}function x(h,g,G){G>>=5;for(var V=h.sprite,$=h.width>>5,rt=h.x-($<<4),ot=rt&127,At=32-ot,gt=h.y1-h.y0,mt=(h.y+h.y0)*G+(rt>>5),bt,jt=0;jt<gt;jt++){bt=0;for(var Dt=0;Dt<=$;Dt++)if((bt<<At|(Dt<$?(bt=V[jt*$+Dt])>>>ot:0))&g[mt+Dt])return!0;mt+=G}return!1}function T(h,g){var G=h[0],V=h[1];g.x+g.x0<G.x&&(G.x=g.x+g.x0),g.y+g.y0<G.y&&(G.y=g.y+g.y0),g.x+g.x1>V.x&&(V.x=g.x+g.x1),g.y+g.y1>V.y&&(V.y=g.y+g.y1)}function N(h,g){return h.x+h.x1>g[0].x&&h.x+h.x0<g[1].x&&h.y+h.y1>g[0].y&&h.y+h.y0<g[1].y}function Y(h){var g=h[0]/h[1];return function(G){return[g*(G*=.1)*Math.cos(G),G*Math.sin(G)]}}function q(h){var g=4,G=g*h[0]/h[1],V=0,$=0;return function(rt){var ot=rt<0?-1:1;switch(Math.sqrt(1+4*ot*rt)-ot&3){case 0:V+=G;break;case 1:$+=g;break;case 2:V-=G;break;default:$-=g;break}return[V,$]}}function nt(h){for(var g=[],G=-1;++G<h;)g[G]=0;return g}function vt(){return document.createElement("canvas")}function ht(h){return Object(v.isFunction)(h)?h:function(){return h}}var St={archimedean:Y,rectangular:q};function wt(){var h=[256,256],g=s,G=E,V=d,$=O,rt=C,ot=Y,At=Math.random,gt=[],mt=Infinity,bt=n,jt=d,Dt=vt,Ut={};Ut.start=function(){var Ht=h[0],re=h[1],pe=Ct(Dt()),ye=Ut.board?Ut.board:nt((h[0]>>5)*h[1]),we=gt.length,Ne=[],Ke=gt.map(function(Tn,Rn,Mn){return Tn.text=bt.call(this,Tn,Rn,Mn),Tn.font=g.call(this,Tn,Rn,Mn),Tn.style=jt.call(this,Tn,Rn,Mn),Tn.weight=V.call(this,Tn,Rn,Mn),Tn.rotate=$.call(this,Tn,Rn,Mn),Tn.size=~~G.call(this,Tn,Rn,Mn),Tn.padding=rt.call(this,Tn,Rn,Mn),Tn}).sort(function(Tn,Rn){return Rn.size-Tn.size}),pn=-1,hn=Ut.board?[{x:0,y:0},{x:Ht,y:re}]:null;kn();function kn(){for(var Tn=Date.now();Date.now()-Tn<mt&&++pn<we;){var Rn=Ke[pn];Rn.x=Ht*(At()+.5)>>1,Rn.y=re*(At()+.5)>>1,p(pe,Rn,Ke,pn),Rn.hasText&&Vt(ye,Rn,hn)&&(Ne.push(Rn),hn?Ut.hasImage||T(hn,Rn):hn=[{x:Rn.x+Rn.x0,y:Rn.y+Rn.y0},{x:Rn.x+Rn.x1,y:Rn.y+Rn.y1}],Rn.x-=h[0]>>1,Rn.y-=h[1]>>1)}Ut._tags=Ne,Ut._bounds=hn}return Ut};function Ct(Ht){Ht.width=Ht.height=1;var re=Math.sqrt(Ht.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ht.width=(I<<5)/re,Ht.height=y/re;var pe=Ht.getContext("2d");return pe.fillStyle=pe.strokeStyle="red",pe.textAlign="center",{context:pe,ratio:re}}function Vt(Ht,re,pe){for(var ye=re.x,we=re.y,Ne=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Ke=ot(h),pn=At()<.5?1:-1,hn,kn=-pn,Tn,Rn;(hn=Ke(kn+=pn))&&(Tn=~~hn[0],Rn=~~hn[1],!(Math.min(Math.abs(Tn),Math.abs(Rn))>=Ne));)if(re.x=ye+Tn,re.y=we+Rn,!(re.x+re.x0<0||re.y+re.y0<0||re.x+re.x1>h[0]||re.y+re.y1>h[1])&&(!pe||!x(re,Ht,h[0]))&&(!pe||N(re,pe))){for(var Mn=re.sprite,Cn=re.width>>5,_n=h[0]>>5,Kn=re.x-(Cn<<4),tr=Kn&127,or=32-tr,nr=re.y1-re.y0,er=void 0,Sr=(re.y+re.y0)*_n+(Kn>>5),Vr=0;Vr<nr;Vr++){er=0;for(var ti=0;ti<=Cn;ti++)Ht[Sr+ti]|=er<<or|(ti<Cn?(er=Mn[Vr*Cn+ti])>>>tr:0);Sr+=_n}return delete re.sprite,!0}return!1}return Ut.createMask=function(Ht){var re=document.createElement("canvas"),pe=h[0],ye=h[1];if(!(!pe||!ye)){var we=pe>>5,Ne=nt((pe>>5)*ye);re.width=pe,re.height=ye;var Ke=re.getContext("2d");Ke.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,pe,ye);for(var pn=Ke.getImageData(0,0,pe,ye).data,hn=0;hn<ye;hn++)for(var kn=0;kn<pe;kn++){var Tn=we*hn+(kn>>5),Rn=hn*pe+kn<<2,Mn=pn[Rn]>=250&&pn[Rn+1]>=250&&pn[Rn+2]>=250,Cn=Mn?1<<31-kn%32:0;Ne[Tn]|=Cn}Ut.board=Ne,Ut.hasImage=!0}},Ut.timeInterval=function(Ht){mt=Ht==null?Infinity:Ht},Ut.words=function(Ht){gt=Ht},Ut.size=function(Ht){h=[+Ht[0],+Ht[1]]},Ut.font=function(Ht){g=ht(Ht)},Ut.fontWeight=function(Ht){V=ht(Ht)},Ut.rotate=function(Ht){$=ht(Ht)},Ut.spiral=function(Ht){ot=St[Ht]||Ht},Ut.fontSize=function(Ht){G=ht(Ht)},Ut.padding=function(Ht){rt=ht(Ht)},Ut.random=function(Ht){At=ht(Ht)},Ut}function xt(h){var g=h.options,G=h.chart,V=G,$=V.width,rt=V.height,ot=V.padding,At=V.appendPadding,gt=V.ele,mt=g.data,bt=g.imageMask,jt=g.wordField,Dt=g.weightField,Ut=g.colorField,Ct=g.wordStyle,Vt=g.timeInterval,Ht=g.random,re=g.spiral,pe=g.autoFit,ye=pe===void 0?!0:pe,we=g.placementStrategy;if(!mt||!mt.length)return[];var Ne=Ct.fontFamily,Ke=Ct.fontWeight,pn=Ct.padding,hn=Ct.fontSize,kn=ct(mt,Dt),Tn=[Mt(kn),tt(kn)],Rn=mt.map(function(_n){return{text:_n[jt],value:_n[Dt],color:_n[Ut],datum:_n}}),Mn={imageMask:bt,font:Ne,fontSize:X(hn,Tn),fontWeight:Ke,size:ft({width:$,height:rt,padding:ot,appendPadding:At,autoFit:ye,container:gt}),padding:pn,timeInterval:Vt,random:Ht,spiral:re,rotate:dt(g)};if(Object(v.isFunction)(we)){var Cn=Rn.map(function(_n,Kn,tr){return Object(at.a)(Object(at.a)(Object(at.a)({},_n),{hasText:!!_n.text,font:ht(Mn.font)(_n,Kn,tr),weight:ht(Mn.fontWeight)(_n,Kn,tr),rotate:ht(Mn.rotate)(_n,Kn,tr),size:ht(Mn.fontSize)(_n,Kn,tr),style:"normal"}),we.call(G,_n,Kn,tr))});return Cn.push({text:"",value:0,x:0,y:0,opacity:0}),Cn.push({text:"",value:0,x:Mn.size[0],y:Mn.size[1],opacity:0}),Cn}return S(Rn,Mn)}function ft(h){var g=h.width,G=h.height,V=h.container,$=h.autoFit,rt=h.padding,ot=h.appendPadding;if($){var At=Object(A.g)(V);g=At.width,G=At.height}g=g||400,G=G||400;var gt=Ft({padding:rt,appendPadding:ot}),mt=gt[0],bt=gt[1],jt=gt[2],Dt=gt[3],Ut=[g-(Dt+bt),G-(mt+jt)];return Ut}function Ft(h){var g=kt(h.padding),G=kt(h.appendPadding),V=g[0]+G[0],$=g[1]+G[1],rt=g[2]+G[2],ot=g[3]+G[3];return[V,$,rt,ot]}function kt(h){if(Object(v.isNumber)(h))return[h,h,h,h];if(Object(v.isArray)(h)){var g=h.length;if(g===1)return[h[0],h[0],h[0],h[0]];if(g===2)return[h[0],h[1],h[0],h[1]];if(g===3)return[h[0],h[1],h[2],h[1]];if(g===4)return h}return[0,0,0,0]}function Ot(h){return new Promise(function(g,G){if(h instanceof HTMLImageElement){g(h);return}if(Object(v.isString)(h)){var V=new Image;V.crossOrigin="anonymous",V.src=h,V.onload=function(){g(V)},V.onerror=function(){Object(A.j)(A.a.ERROR,!1,"image %s load failed !!!",h),G()};return}Object(A.j)(A.a.WARN,h===void 0,"The type of imageMask option must be String or HTMLImageElement."),G()})}function X(h,g){if(Object(v.isFunction)(h))return h;if(Object(v.isArray)(h)){var G=h[0],V=h[1];if(!g)return function(){return(V+G)/2};var $=g[0],rt=g[1];return rt===$?function(){return(V+G)/2}:function(At){var gt=At.value;return(V-G)/(rt-$)*(gt-$)+G}}return function(){return h}}function ct(h,g){return h.map(function(G){return G[g]}).filter(function(G){return typeof G=="number"&&!isNaN(G)})}function dt(h){var g=pt(h),G=g.rotation,V=g.rotationSteps;if(!Object(v.isArray)(G))return G;var $=G[0],rt=G[1],ot=V===1?0:(rt-$)/(V-1);return function(){return rt===$?rt:Math.floor(Math.random()*V)*ot}}function pt(h){var g=h.wordStyle.rotationSteps;return g<1&&(Object(A.j)(A.a.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),g=1),{rotation:h.wordStyle.rotation,rotationSteps:g}}function Mt(h){return Math.min.apply(Math,h)}function tt(h){return Math.max.apply(Math,h)}function lt(h){var g=h.chart,G=h.options,V=G.colorField,$=G.color,rt=xt(h);g.data(rt);var ot=Object(A.b)({},h,{options:{xField:"x",yField:"y",seriesField:V&&"color",point:{color:$,shape:"word-cloud"}}}),At=Object(i.e)(ot).ext;return At.geometry.label(!1),g.coordinate().reflect("y"),g.axis(!1),h}function it(h){return Object(A.e)(Object(e.f)({x:{nice:!1},y:{nice:!1}}))(h)}function U(h){Object(A.e)(lt,it,e.k,e.d,e.c,e.a,e.j,e.i)(h)}var P=z("Ihc8");Object(P.registerShape)("point","word-cloud",{draw:function(g,G){var V=g.x,$=g.y,rt=G.addShape("text",{attrs:Object(at.a)(Object(at.a)({},H(g)),{x:V,y:$})}),ot=g.data.rotate;return typeof ot=="number"&&P.Util.rotate(rt,ot*Math.PI/180),rt}});function H(h){return{fontSize:h.data.size,text:h.data.text,textAlign:"center",fontFamily:h.data.font,fontWeight:h.data.weight,fill:h.color||h.defaultStyle.stroke,textBaseline:"alphabetic"}}var k=function(h){Object(at.b)(g,h);function g(){var G=h!==null&&h.apply(this,arguments)||this;return G.type="word-cloud",G}return g.prototype.changeData=function(G){this.updateOption({data:G}),this.options.imageMask?this.render():this.chart.changeData(xt({chart:this.chart,options:this.options}))},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(V){return{name:V.text,value:V.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}})},g.prototype.render=function(){var G=this;return new Promise(function(V){var $=G.options.imageMask;if(!$){h.prototype.render.call(G),V();return}var rt=function(At){G.options=Object(at.a)(Object(at.a)({},G.options),{imageMask:At||null}),h.prototype.render.call(G),V()};Ot($).then(rt).catch(rt)})},g.prototype.getSchemaAdaptor=function(){return U},g.prototype.triggerResize=function(){var G=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){h.prototype.triggerResize.call(G)}))},g}(a.a)},Mw2x:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("zK8m"),A=z("sstZ"),e={},i="_INDEX";function v(y,n){if(y.set("canvas",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){v(d,n)})}}function b(y,n){if(y.set("timeline",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){b(d,n)})}}function S(y,n){var s=y.getChildren();return s.indexOf(n)>=0}function f(y,n,s){s===void 0&&(s=!0),s?n.destroy():(n.set("parent",null),n.set("canvas",null)),Object(A.j)(y.getChildren(),n)}function M(y){return function(n,s){var d=y(n,s);return d===0?n[i]-s[i]:d}}var I=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var s=Infinity,d=-Infinity,E=Infinity,O=-Infinity,C=[],p=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var Y=N.getBBox();C.push(Y.minX,Y.maxX),p.push(Y.minY,Y.maxY)}),s=Math.min.apply(null,C),d=Math.max.apply(null,C),E=Math.min.apply(null,p),O=Math.max.apply(null,p)):(s=0,d=0,E=0,O=0);var T={x:s,y:E,minX:s,minY:E,maxX:d,maxY:O,width:d-s,height:O-E};return T},n.prototype.getCanvasBBox=function(){var s=Infinity,d=-Infinity,E=Infinity,O=-Infinity,C=[],p=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var Y=N.getCanvasBBox();C.push(Y.minX,Y.maxX),p.push(Y.minY,Y.maxY)}),s=Math.min.apply(null,C),d=Math.max.apply(null,C),E=Math.min.apply(null,p),O=Math.max.apply(null,p)):(s=0,d=0,E=0,O=0);var T={x:s,y:E,minX:s,minY:E,maxX:d,maxY:O,width:d-s,height:O-E};return T},n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return s.children=[],s},n.prototype.onAttrChange=function(s,d,E){if(y.prototype.onAttrChange.call(this,s,d,E),s==="matrix"){var O=this.getTotalMatrix();this._applyChildrenMarix(O)}},n.prototype.applyMatrix=function(s){var d=this.getTotalMatrix();y.prototype.applyMatrix.call(this,s);var E=this.getTotalMatrix();E!==d&&this._applyChildrenMarix(E)},n.prototype._applyChildrenMarix=function(s){var d=this.getChildren();Object(A.a)(d,function(E){E.applyMatrix(s)})},n.prototype.addShape=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var E=s[0],O=s[1];Object(A.f)(E)?O=E:O.type=E;var C=e[O.type];C||(C=Object(A.k)(O.type),e[O.type]=C);var p=this.getShapeBase(),x=new p[C](O);return this.add(x),x},n.prototype.addGroup=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var E=s[0],O=s[1],C;if(Object(A.d)(E))O?C=new E(O):C=new E({parent:this});else{var p=E||{},x=this.getGroupBase();C=new x(p)}return this.add(C),C},n.prototype.getCanvas=function(){var s;return this.isCanvas()?s=this:s=this.get("canvas"),s},n.prototype.getShape=function(s,d,E){if(!Object(A.b)(this))return null;var O=this.getChildren(),C;if(this.isCanvas())C=this._findShape(O,s,d,E);else{var p=[s,d,1];p=this.invertFromMatrix(p),this.isClipped(p[0],p[1])||(C=this._findShape(O,p[0],p[1],E))}return C},n.prototype._findShape=function(s,d,E,O){for(var C=null,p=s.length-1;p>=0;p--){var x=s[p];if(Object(A.b)(x)&&(x.isGroup()?C=x.getShape(d,E,O):x.isHit(d,E)&&(C=x)),C)break}return C},n.prototype.add=function(s){var d=this.getCanvas(),E=this.getChildren(),O=this.get("timeline"),C=s.getParent();C&&f(C,s,!1),s.set("parent",this),d&&v(s,d),O&&b(s,O),E.push(s),s.onCanvasChange("add"),this._applyElementMatrix(s)},n.prototype._applyElementMatrix=function(s){var d=this.getTotalMatrix();d&&s.applyMatrix(d)},n.prototype.getChildren=function(){return this.get("children")},n.prototype.sort=function(){var s=this.getChildren();Object(A.a)(s,function(d,E){return d[i]=E,d}),s.sort(M(function(d,E){return d.get("zIndex")-E.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var s=this.getChildren(),d=s.length-1;d>=0;d--)s[d].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),y.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var s=this.getChildren();return this.getChildByIndex(s.length-1)},n.prototype.getChildByIndex=function(s){var d=this.getChildren();return d[s]},n.prototype.getCount=function(){var s=this.getChildren();return s.length},n.prototype.contain=function(s){var d=this.getChildren();return d.indexOf(s)>-1},n.prototype.removeChild=function(s,d){d===void 0&&(d=!0),this.contain(s)&&s.remove(d)},n.prototype.findAll=function(s){var d=[],E=this.getChildren();return Object(A.a)(E,function(O){s(O)&&d.push(O),O.isGroup()&&(d=d.concat(O.findAll(s)))}),d},n.prototype.find=function(s){var d=null,E=this.getChildren();return Object(A.a)(E,function(O){if(s(O)?d=O:O.isGroup()&&(d=O.find(s)),d)return!1}),d},n.prototype.findById=function(s){return this.find(function(d){return d.get("id")===s})},n.prototype.findByClassName=function(s){return this.find(function(d){return d.get("className")===s})},n.prototype.findAllByName=function(s){return this.findAll(function(d){return d.get("name")===s})},n}(a.a);_t.a=I},N9hJ:function(Un,_t){},NmWf:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("iTfj"),e={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},i=function(v){Object(at.b)(b,v);function b(S){var f=v.call(this,S)||this;return f.initCfg(),f}return b.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},b.prototype.clear=function(){},b.prototype.update=function(S){var f=this,M=this.get("defaultCfg");Object(A.each)(S,function(I,y){var n=f.get(y),s=I;n!==I&&(Object(A.isObject)(I)&&M[y]&&(s=Object(A.deepMix)({},M[y],I)),f.set(y,s))}),this.updateInner(S),this.afterUpdate(S)},b.prototype.updateInner=function(S){},b.prototype.afterUpdate=function(S){Object(A.hasKey)(S,"visible")&&(S.visible?this.show():this.hide()),Object(A.hasKey)(S,"capture")&&this.setCapture(S.capture)},b.prototype.getLayoutBBox=function(){return this.getBBox()},b.prototype.getLocationType=function(){return this.get("locationType")},b.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},b.prototype.setOffset=function(S,f){this.update({offsetX:S,offsetY:f})},b.prototype.setLocation=function(S){var f=Object(at.a)({},S);this.update(f)},b.prototype.getLocation=function(){var S=this,f={},M=this.get("locationType"),I=e[M];return Object(A.each)(I,function(y){f[y]=S.get(y)}),f},b.prototype.isList=function(){return!1},b.prototype.isSlider=function(){return!1},b.prototype.init=function(){},b.prototype.initCfg=function(){var S=this,f=this.get("defaultCfg");Object(A.each)(f,function(M,I){var y=S.get(I);if(Object(A.isObject)(y)){var n=Object(A.deepMix)({},M,y);S.set(I,n)}})},b}(a.Base);_t.a=i},NohK:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var at=function(A){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,i=null;return function(){for(var v=this,b=arguments.length,S=new Array(b),f=0;f<b;f++)S[f]=arguments[f];clearTimeout(i),i=setTimeout(function(){A.apply(v,S)},e)}};_t.default=at},NzZ7:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return b});var at=z("tvR+"),a=z("yUfG"),A=z("a8tM"),e=z("iTfj"),i=z("I7nc"),v={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function b(S,f){f=Object(e.assign)({},v,f);var M=f.as;if(!Object(e.isArray)(M)||M.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var I;try{I=Object(i.b)(f)}catch(E){console.warn(E)}var y=function(O){return at.a().tile(a[f.tile]).size(f.size).round(f.round).padding(f.padding).paddingInner(f.paddingInner).paddingOuter(f.paddingOuter).paddingTop(f.paddingTop).paddingRight(f.paddingRight).paddingBottom(f.paddingBottom).paddingLeft(f.paddingLeft)(A.c(O).sum(function(C){return f.ignoreParentValue&&C.children?0:C[I]}))},n=y(S),s=M[0],d=M[1];return n.each(function(E){E[s]=[E.x0,E.x1,E.x1,E.x0],E[d]=[E.y1,E.y1,E.y0,E.y0],["x0","x1","y0","y1"].forEach(function(O){M.indexOf(O)===-1&&delete E[O]})}),Object(i.a)(n)}},P4Qj:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.removeSensor=_t.getSensor=void 0;var at=e(z("chpo")),a=z("FxDU"),A=z("24YM");function e(S){return S&&S.__esModule?S:{default:S}}var i={},v=function(f){var M=f.getAttribute(A.SizeSensorId);if(M&&i[M])return i[M];var I=(0,at.default)();f.setAttribute(A.SizeSensorId,I);var y=(0,a.createSensor)(f);return i[I]=y,y};_t.getSensor=v;var b=function(f){var M=f.element.getAttribute(A.SizeSensorId);f.element.removeAttribute(A.SizeSensorId),f.destroy(),M&&i[M]&&delete i[M]};_t.removeSensor=b},QG4C:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return M});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("WOQw"),i=z("w02o"),v=z("YuPD"),b=z("n/J0");function S(I){var y=I.chart,n=I.options,s=n.views,d=n.legend,E=n.tooltip;return Object(A.each)(s,function(O){var C=O.region,p=O.data,x=O.meta,T=O.axes,N=O.coordinate,Y=O.interactions,q=O.annotations,nt=O.geometries,vt=y.createView({region:C});vt.data(p);var ht={};T&&Object(A.each)(T,function(St,wt){ht[wt]=Object(v.k)(St,b.a)}),ht=Object(v.b)({},x,ht),vt.scale(ht),T?Object(A.each)(T,function(St,wt){vt.axis(wt,St)}):vt.axis(!1),vt.coordinate(N),Object(A.each)(nt,function(St){var wt=Object(e.a)({chart:vt,options:St}).ext,xt=St.adjust;xt&&wt.geometry.adjust(xt)}),Object(A.each)(Y,function(St){St.enable===!1?vt.removeInteraction(St.type):vt.interaction(St.type,St.cfg)}),Object(A.each)(q,function(St){vt.annotation()[St.type](Object(at.a)({},St))})}),d?Object(A.each)(d,function(O,C){y.legend(C,O)}):y.legend(!1),y.tooltip(E),I}function f(I){return Object(v.e)(i.a,S,i.c,i.a,i.j,i.k)(I)}var M=function(I){Object(at.b)(y,I);function y(){var n=I!==null&&I.apply(this,arguments)||this;return n.type="multi-view",n}return y.prototype.getSchemaAdaptor=function(){return f},y}(a.a)},"QO+J":function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.createSensor=void 0;var at=A(z("NohK")),a=z("24YM");function A(i){return i&&i.__esModule?i:{default:i}}var e=function(v){var b=void 0,S=[],f=function(){getComputedStyle(v).position==="static"&&(v.style.position="relative");var d=document.createElement("object");return d.onload=function(){d.contentDocument.defaultView.addEventListener("resize",M),M()},d.style.display="block",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.opacity="0",d.setAttribute("class",a.SensorClassName),d.setAttribute("tabindex",a.SensorTabIndex),d.type="text/html",v.appendChild(d),d.data="about:blank",d},M=(0,at.default)(function(){S.forEach(function(s){s(v)})}),I=function(d){b||(b=f()),S.indexOf(d)===-1&&S.push(d)},y=function(){b&&b.parentNode&&(b.contentDocument&&b.contentDocument.defaultView.removeEventListener("resize",M),b.parentNode.removeChild(b),b=void 0,S=[])},n=function(d){var E=S.indexOf(d);E!==-1&&S.splice(E,1),S.length===0&&b&&y()};return{element:v,bind:I,destroy:y,unbind:n}};_t.createSensor=e},"QQZ/":function(Un,_t,z){var at=z("Sq3C"),a=z("Z1HP"),A=z("Sxd8"),e=z("dt0z");function i(v,b,S){v=e(v),b=A(b);var f=b?a(v):0;return b&&f<b?at(b-f,S)+v:v}Un.exports=i},Qci9:function(Un,_t,z){"use strict";var at=z("iTfj"),a=z("0Xep"),A=function(){function e(i){var v=i.xField,b=i.yField,S=i.adjustNames,f=S===void 0?["x","y"]:S;this.adjustNames=f,this.xField=v,this.yField=b}return e.prototype.isAdjust=function(i){return this.adjustNames.indexOf(i)>=0},e.prototype.getAdjustRange=function(i,v,b){var S=this.yField,f=b.indexOf(v),M=b.length,I,y;return!S&&this.isAdjust("y")?(I=0,y=1):M>1?(I=b[f===0?0:f-1],y=b[f===M-1?M-1:f+1],f!==0?I+=(v-I)/2:I-=(y-v)/2,f!==M-1?y-=(y-v)/2:y+=(v-b[M-2])/2):(I=v===0?0:v-.5,y=v===0?1:v+.5),{pre:I,next:y}},e.prototype.adjustData=function(i,v){var b=this,S=this.getDimValues(v);at.each(i,function(f,M){at.each(S,function(I,y){b.adjustDim(y,I,f,M)})})},e.prototype.groupData=function(i,v){return at.each(i,function(b){b[v]===void 0&&(b[v]=a.a)}),at.groupBy(i,v)},e.prototype.adjustDim=function(i,v,b,S){},e.prototype.getDimValues=function(i){var v=this,b=v.xField,S=v.yField,f={},M=[];if(b&&this.isAdjust("x")&&M.push(b),S&&this.isAdjust("y")&&M.push(S),M.forEach(function(y){f[y]=at.valuesOfKey(i,y).sort(function(n,s){return n-s})}),!S&&this.isAdjust("y")){var I="y";f[I]=[a.a,1]}return f},e}();_t.a=A},R5nb:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Base",function(){return S}),z.d(_t,"Circle",function(){return M}),z.d(_t,"Ellipse",function(){return n}),z.d(_t,"Image",function(){return E}),z.d(_t,"Line",function(){return T}),z.d(_t,"Marker",function(){return vt}),z.d(_t,"Path",function(){return it}),z.d(_t,"Polygon",function(){return H}),z.d(_t,"Polyline",function(){return h}),z.d(_t,"Rect",function(){return rt}),z.d(_t,"Text",function(){return At});var at={};z.r(at),z.d(at,"Base",function(){return S}),z.d(at,"Circle",function(){return M}),z.d(at,"Ellipse",function(){return n}),z.d(at,"Image",function(){return E}),z.d(at,"Line",function(){return T}),z.d(at,"Marker",function(){return vt}),z.d(at,"Path",function(){return it}),z.d(at,"Polygon",function(){return H}),z.d(at,"Polyline",function(){return h}),z.d(at,"Rect",function(){return rt}),z.d(at,"Text",function(){return At});var a=z("mrSG"),A=z("aFU3"),e=z("cyZq"),i=z("9eUa"),v=z("wq2r"),b=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},mt.prototype.getShapeBase=function(){return at},mt.prototype.getGroupBase=function(){return v.a},mt.prototype.onCanvasChange=function(bt){Object(i.h)(this,bt)},mt.prototype.calculateBBox=function(){var bt=this.get("type"),jt=this.getHitLineWidth(),Dt=Object(A.getBBoxMethod)(bt),Ut=Dt(this),Ct=jt/2,Vt=Ut.x-Ct,Ht=Ut.y-Ct,re=Ut.x+Ut.width+Ct,pe=Ut.y+Ut.height+Ct;return{x:Vt,minX:Vt,y:Ht,minY:Ht,width:Ut.width+jt,height:Ut.height+jt,maxX:re,maxY:pe}},mt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},mt.prototype.isStroke=function(){return!!this.attrs.stroke},mt.prototype._applyClip=function(bt,jt){jt&&(bt.save(),Object(i.a)(bt,jt),jt.createPath(bt),bt.restore(),bt.clip(),jt._afterDraw())},mt.prototype.draw=function(bt,jt){var Dt=this.cfg.clipShape;if(jt){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var Ut=this.getCanvasBBox();if(!Object(e.f)(jt,Ut)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}bt.save(),Object(i.a)(bt,this),this._applyClip(bt,Dt),this.drawPath(bt),bt.restore(),this._afterDraw()},mt.prototype.getCanvasViewBox=function(){var bt=this.cfg.canvas;return bt?bt.getViewRange():null},mt.prototype.cacheCanvasBBox=function(){var bt=this.getCanvasViewBox();if(bt){var jt=this.getCanvasBBox(),Dt=Object(e.f)(jt,bt);this.set("isInView",Dt),Dt?this.set("cacheCanvasBBox",jt):this.set("cacheCanvasBBox",null)}},mt.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},mt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},mt.prototype.drawPath=function(bt){this.createPath(bt),this.strokeAndFill(bt),this.afterDrawPath(bt)},mt.prototype.fill=function(bt){bt.fill()},mt.prototype.stroke=function(bt){bt.stroke()},mt.prototype.strokeAndFill=function(bt){var jt=this.attrs,Dt=jt.lineWidth,Ut=jt.opacity,Ct=jt.strokeOpacity,Vt=jt.fillOpacity;this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(bt.globalAlpha=Vt,this.fill(bt),bt.globalAlpha=Ut):this.fill(bt)),this.isStroke()&&Dt>0&&(!Object(e.i)(Ct)&&Ct!==1&&(bt.globalAlpha=Ct),this.stroke(bt)),this.afterDrawPath(bt)},mt.prototype.createPath=function(bt){},mt.prototype.afterDrawPath=function(bt){},mt.prototype.isInShape=function(bt,jt){var Dt=this.isStroke(),Ut=this.isFill(),Ct=this.getHitLineWidth();return this.isInStrokeOrPath(bt,jt,Dt,Ut,Ct)},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){return!1},mt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var bt=this.attrs;return bt.lineWidth+bt.lineAppendWidth},mt}(A.AbstractShape),S=b,f=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,r:0})},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.r,ye=Ct/2,we=Object(e.b)(Ht,re,bt,jt);return Ut&&Dt?we<=pe+ye:Ut?we<=pe:Dt?we>=pe-ye&&we<=pe+ye:!1},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.x,Ut=jt.y,Ct=jt.r;bt.beginPath(),bt.arc(Dt,Ut,Ct,0,Math.PI*2,!1),bt.closePath()},mt}(S),M=f;function I(gt,mt,bt,jt){return gt/(bt*bt)+mt/(jt*jt)}var y=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,rx:0,ry:0})},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){var Vt=this.attr(),Ht=Ct/2,re=Vt.x,pe=Vt.y,ye=Vt.rx,we=Vt.ry,Ne=(bt-re)*(bt-re),Ke=(jt-pe)*(jt-pe);return Ut&&Dt?I(Ne,Ke,ye+Ht,we+Ht)<=1:Ut?I(Ne,Ke,ye,we)<=1:Dt?I(Ne,Ke,ye-Ht,we-Ht)>=1&&I(Ne,Ke,ye+Ht,we+Ht)<=1:!1},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.x,Ut=jt.y,Ct=jt.rx,Vt=jt.ry;if(bt.beginPath(),bt.ellipse)bt.ellipse(Dt,Ut,Ct,Vt,0,0,Math.PI*2,!1);else{var Ht=Ct>Vt?Ct:Vt,re=Ct>Vt?1:Ct/Vt,pe=Ct>Vt?Vt/Ct:1;bt.save(),bt.translate(Dt,Ut),bt.scale(re,pe),bt.arc(0,0,Ht,0,Math.PI*2),bt.restore(),bt.closePath()}},mt}(S),n=y;function s(gt){return gt instanceof HTMLElement&&Object(e.k)(gt.nodeName)&&gt.nodeName.toUpperCase()==="CANVAS"}var d=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,width:0,height:0})},mt.prototype.initAttrs=function(bt){this._setImage(bt.img)},mt.prototype.isStroke=function(){return!1},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var bt=this.get("canvas");bt?bt.draw():this.createPath(this.get("context"))}},mt.prototype._setImage=function(bt){var jt=this,Dt=this.attrs;if(Object(e.k)(bt)){var Ut=new Image;Ut.onload=function(){if(jt.destroyed)return!1;jt.attr("img",Ut),jt.set("loading",!1),jt._afterLoading();var Ct=jt.get("callback");Ct&&Ct.call(jt)},Ut.crossOrigin="Anonymous",Ut.src=bt,this.set("loading",!0)}else bt instanceof Image?(Dt.width||(Dt.width=bt.width),Dt.height||(Dt.height=bt.height)):s(bt)&&(Dt.width||(Dt.width=Number(bt.getAttribute("width"))),Dt.height||(Dt.height,Number(bt.getAttribute("height"))))},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),bt==="img"&&this._setImage(jt)},mt.prototype.createPath=function(bt){if(this.get("loading")){this.set("toDraw",!0),this.set("context",bt);return}var jt=this.attr(),Dt=jt.x,Ut=jt.y,Ct=jt.width,Vt=jt.height,Ht=jt.sx,re=jt.sy,pe=jt.swidth,ye=jt.sheight,we=jt.img;(we instanceof Image||s(we))&&(!Object(e.i)(Ht)&&!Object(e.i)(re)&&!Object(e.i)(pe)&&!Object(e.i)(ye)?bt.drawImage(we,Ht,re,pe,ye,Dt,Ut,Ct,Vt):bt.drawImage(we,Dt,Ut,Ct,Vt))},mt}(S),E=d,O=z("EYNi");function C(gt,mt,bt,jt,Dt,Ut,Ct){var Vt=Math.min(gt,bt),Ht=Math.max(gt,bt),re=Math.min(mt,jt),pe=Math.max(mt,jt),ye=Dt/2;return Ut>=Vt-ye&&Ut<=Ht+ye&&Ct>=re-ye&&Ct<=pe+ye?O.c.pointToLine(gt,mt,bt,jt,Ut,Ct)<=Dt/2:!1}var p=z("nycV"),x=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(bt){this.setArrow()},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),this.setArrow()},mt.prototype.setArrow=function(){var bt=this.attr(),jt=bt.x1,Dt=bt.y1,Ut=bt.x2,Ct=bt.y2,Vt=bt.startArrow,Ht=bt.endArrow;Vt&&p.b(this,bt,Ut,Ct,jt,Dt),Ht&&p.a(this,bt,jt,Dt,Ut,Ct)},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){if(!Dt||!Ct)return!1;var Vt=this.attr(),Ht=Vt.x1,re=Vt.y1,pe=Vt.x2,ye=Vt.y2;return C(Ht,re,pe,ye,Ct,bt,jt)},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.x1,Ut=jt.y1,Ct=jt.x2,Vt=jt.y2,Ht=jt.startArrow,re=jt.endArrow,pe={dx:0,dy:0},ye={dx:0,dy:0};Ht&&Ht.d&&(pe=p.c(Dt,Ut,Ct,Vt,jt.startArrow.d)),re&&re.d&&(ye=p.c(Dt,Ut,Ct,Vt,jt.endArrow.d)),bt.beginPath(),bt.moveTo(Dt+pe.dx,Ut+pe.dy),bt.lineTo(Ct-ye.dx,Vt-ye.dy)},mt.prototype.afterDrawPath=function(bt){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(bt),Dt&&Dt.draw(bt)},mt.prototype.getTotalLength=function(){var bt=this.attr(),jt=bt.x1,Dt=bt.y1,Ut=bt.x2,Ct=bt.y2;return O.c.length(jt,Dt,Ut,Ct)},mt.prototype.getPoint=function(bt){var jt=this.attr(),Dt=jt.x1,Ut=jt.y1,Ct=jt.x2,Vt=jt.y2;return O.c.pointAt(Dt,Ut,Ct,Vt,bt)},mt}(S),T=x,N=z("iTfj"),Y=z("LvGN"),q={circle:function(mt,bt,jt){return[["M",mt-jt,bt],["A",jt,jt,0,1,0,mt+jt,bt],["A",jt,jt,0,1,0,mt-jt,bt]]},square:function(mt,bt,jt){return[["M",mt-jt,bt-jt],["L",mt+jt,bt-jt],["L",mt+jt,bt+jt],["L",mt-jt,bt+jt],["Z"]]},diamond:function(mt,bt,jt){return[["M",mt-jt,bt],["L",mt,bt-jt],["L",mt+jt,bt],["L",mt,bt+jt],["Z"]]},triangle:function(mt,bt,jt){var Dt=jt*Math.sin(1/3*Math.PI);return[["M",mt-jt,bt+Dt],["L",mt,bt-Dt],["L",mt+jt,bt+Dt],["Z"]]},"triangle-down":function(mt,bt,jt){var Dt=jt*Math.sin(1/3*Math.PI);return[["M",mt-jt,bt-Dt],["L",mt+jt,bt-Dt],["L",mt,bt+Dt],["Z"]]}},nt=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.initAttrs=function(bt){this._resetParamsCache()},mt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),["symbol","x","y","r","radius"].indexOf(bt)!==-1&&this._resetParamsCache()},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype._getR=function(bt){return Object(N.isNil)(bt.r)?bt.radius:bt.r},mt.prototype._getPath=function(){var bt=this.attr(),jt=bt.x,Dt=bt.y,Ut=bt.symbol||"circle",Ct=this._getR(bt),Vt,Ht;if(Object(e.h)(Ut))Vt=Ut,Ht=Vt(jt,Dt,Ct),Ht=Object(Y.d)(Ht);else{if(Vt=mt.Symbols[Ut],!Vt)return console.warn(Ut+" marker is not supported."),null;Ht=Vt(jt,Dt,Ct)}return Ht},mt.prototype.createPath=function(bt){var jt=this._getPath(),Dt=this.get("paramsCache");Object(i.e)(this,bt,{path:jt},Dt)},mt.Symbols=q,mt}(S),vt=nt;function ht(gt,mt,bt){var jt=Object(A.getOffScreenContext)();return gt.createPath(jt),jt.isPointInPath(mt,bt)}var St=1e-6;function wt(gt){return Math.abs(gt)<St?0:gt<0?-1:1}function xt(gt,mt,bt){return(bt[0]-gt[0])*(mt[1]-gt[1])==(mt[0]-gt[0])*(bt[1]-gt[1])&&Math.min(gt[0],mt[0])<=bt[0]&&bt[0]<=Math.max(gt[0],mt[0])&&Math.min(gt[1],mt[1])<=bt[1]&&bt[1]<=Math.max(gt[1],mt[1])}function ft(gt,mt,bt){var jt=!1,Dt=gt.length;if(Dt<=2)return!1;for(var Ut=0;Ut<Dt;Ut++){var Ct=gt[Ut],Vt=gt[(Ut+1)%Dt];if(xt(Ct,Vt,[mt,bt]))return!0;wt(Ct[1]-bt)>0!=wt(Vt[1]-bt)>0&&wt(mt-(bt-Ct[1])*(Ct[0]-Vt[0])/(Ct[1]-Vt[1])-Ct[0])<0&&(jt=!jt)}return jt}var Ft=z("6JdA"),kt=z("n+fv");function Ot(gt,mt,bt,jt,Dt,Ut,Ct,Vt){var Ht=(Math.atan2(Vt-mt,Ct-gt)+Math.PI*2)%(Math.PI*2);if(Ht<jt||Ht>Dt)return!1;var re={x:gt+bt*Math.cos(Ht),y:mt+bt*Math.sin(Ht)};return Object(e.b)(re.x,re.y,Ct,Vt)<=Ut/2}var X=Ft.a.transform;function ct(gt){for(var mt=!1,bt=gt.length,jt=0;jt<bt;jt++){var Dt=gt[jt],Ut=Dt[0];if(Ut==="C"||Ut==="A"||Ut==="Q"){mt=!0;break}}return mt}function dt(gt,mt,bt,jt,Dt){for(var Ut=!1,Ct=mt/2,Vt=0;Vt<gt.length;Vt++){var Ht=gt[Vt],re=Ht.currentPoint,pe=Ht.params,ye=Ht.prePoint,we=Ht.box;if(!(we&&!Object(e.e)(we.x-Ct,we.y-Ct,we.width+mt,we.height+mt,bt,jt))){switch(Ht.command){case"L":case"Z":Ut=C(ye[0],ye[1],re[0],re[1],mt,bt,jt);break;case"Q":var Ne=O.e.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],bt,jt);Ut=Ne<=mt/2;break;case"C":var Ke=O.b.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],bt,jt,Dt);Ut=Ke<=mt/2;break;case"A":var pn=Ht.arcParams,hn=pn.cx,kn=pn.cy,Tn=pn.rx,Rn=pn.ry,Mn=pn.startAngle,Cn=pn.endAngle,_n=pn.xRotation,Kn=[bt,jt,1],tr=Tn>Rn?Tn:Rn,or=Tn>Rn?1:Tn/Rn,nr=Tn>Rn?Rn/Tn:1,er=X(null,[["t",-hn,-kn],["r",-_n],["s",1/or,1/nr]]);kt.transformMat3(Kn,Kn,er),Ut=Ot(0,0,tr,Mn,Cn,mt,Kn[0],Kn[1]);break;default:break}if(Ut)break}}return Ut}function pt(gt){for(var mt=gt.length,bt=[],jt=[],Dt=[],Ut=0;Ut<mt;Ut++){var Ct=gt[Ut],Vt=Ct[0];Vt==="M"?(Dt.length&&(jt.push(Dt),Dt=[]),Dt.push([Ct[1],Ct[2]])):Vt==="Z"?Dt.length&&(bt.push(Dt),Dt=[]):Dt.push([Ct[1],Ct[2]])}return Dt.length>0&&jt.push(Dt),{polygons:bt,polylines:jt}}var Mt=Object(a.a)({hasArc:ct,extractPolygons:pt,isPointInStroke:dt},A.PathUtil);function tt(gt,mt,bt){for(var jt=!1,Dt=0;Dt<gt.length;Dt++){var Ut=gt[Dt];if(jt=ft(Ut,mt,bt),jt)break}return jt}var lt=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(bt){this._setPathArr(bt.path),this.setArrow()},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),bt==="path"&&this._setPathArr(jt),this.setArrow()},mt.prototype._setPathArr=function(bt){this.attrs.path=Object(Y.d)(bt);var jt=Mt.hasArc(bt);this.set("hasArc",jt),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},mt.prototype.getSegments=function(){var bt=this.get("segements");return bt||(bt=Object(Y.e)(this.attr("path")),this.set("segments",bt)),bt},mt.prototype.setArrow=function(){var bt=this.attr(),jt=bt.startArrow,Dt=bt.endArrow;if(jt){var Ut=this.getStartTangent();p.b(this,bt,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}if(Dt){var Ut=this.getEndTangent();p.a(this,bt,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){var Vt=this.getSegments(),Ht=this.get("hasArc"),re=!1;if(Dt){var pe=this.getTotalLength();re=Mt.isPointInStroke(Vt,Ct,bt,jt,pe)}if(!re&&Ut)if(Ht)re=ht(this,bt,jt);else{var ye=this.attr("path"),we=Mt.extractPolygons(ye);re=tt(we.polygons,bt,jt)||tt(we.polylines,bt,jt)}return re},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=this.get("paramsCache");Object(i.e)(this,bt,jt,Dt)},mt.prototype.afterDrawPath=function(bt){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(bt),Dt&&Dt.draw(bt)},mt.prototype.getTotalLength=function(){var bt=this.get("totalLength");return Object(N.isNil)(bt)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):bt},mt.prototype.getPoint=function(bt){var jt=this.get("tCache");jt||(this._calculateCurve(),this._setTcache(),jt=this.get("tCache"));var Dt,Ut,Ct=this.get("curve");if(!jt||jt.length===0)return Ct?{x:Ct[0][1],y:Ct[0][2]}:null;Object(N.each)(jt,function(pe,ye){bt>=pe[0]&&bt<=pe[1]&&(Dt=(bt-pe[0])/(pe[1]-pe[0]),Ut=ye)});var Vt=Ct[Ut];if(Object(N.isNil)(Vt)||Object(N.isNil)(Ut))return null;var Ht=Vt.length,re=Ct[Ut+1];return O.b.pointAt(Vt[Ht-2],Vt[Ht-1],re[1],re[2],re[3],re[4],re[5],re[6],Dt)},mt.prototype._calculateCurve=function(){var bt=this.attr().path;this.set("curve",Mt.pathToCurve(bt))},mt.prototype._setTcache=function(){var bt=0,jt=0,Dt=[],Ut,Ct,Vt,Ht,re=this.get("curve");if(!!re){if(Object(N.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(bt+=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6])||0)}),this.set("totalLength",bt),bt===0){this.set("tCache",[]);return}Object(N.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(Ut=[],Ut[0]=jt/bt,Ct=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6]),jt+=Ct||0,Ut[1]=jt/bt,Dt.push(Ut))}),this.set("tCache",Dt)}},mt.prototype.getStartTangent=function(){var bt=this.getSegments(),jt;if(bt.length>1){var Dt=bt[0].currentPoint,Ut=bt[1].currentPoint,Ct=bt[1].startTangent;jt=[],Ct?(jt.push([Dt[0]-Ct[0],Dt[1]-Ct[1]]),jt.push([Dt[0],Dt[1]])):(jt.push([Ut[0],Ut[1]]),jt.push([Dt[0],Dt[1]]))}return jt},mt.prototype.getEndTangent=function(){var bt=this.getSegments(),jt=bt.length,Dt;if(jt>1){var Ut=bt[jt-2].currentPoint,Ct=bt[jt-1].currentPoint,Vt=bt[jt-1].endTangent;Dt=[],Vt?(Dt.push([Ct[0]-Vt[0],Ct[1]-Vt[1]]),Dt.push([Ct[0],Ct[1]])):(Dt.push([Ut[0],Ut[1]]),Dt.push([Ct[0],Ct[1]]))}return Dt},mt}(S),it=lt;function U(gt,mt,bt,jt,Dt){var Ut=gt.length;if(Ut<2)return!1;for(var Ct=0;Ct<Ut-1;Ct++){var Vt=gt[Ct][0],Ht=gt[Ct][1],re=gt[Ct+1][0],pe=gt[Ct+1][1];if(C(Vt,Ht,re,pe,mt,bt,jt))return!0}if(Dt){var ye=gt[0],we=gt[Ut-1];if(C(ye[0],ye[1],we[0],we[1],mt,bt,jt))return!0}return!1}var P=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){var Vt=this.attr().points,Ht=!1;return Dt&&(Ht=U(Vt,Ct,bt,jt,!0)),!Ht&&Ut&&(Ht=ft(Vt,bt,jt)),Ht},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.points;if(!(Dt.length<2)){bt.beginPath();for(var Ut=0;Ut<Dt.length;Ut++){var Ct=Dt[Ut];Ut===0?bt.moveTo(Ct[0],Ct[1]):bt.lineTo(Ct[0],Ct[1])}bt.closePath()}},mt}(S),H=P,k=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(bt){this.setArrow()},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),this.setArrow(),["points"].indexOf(bt)!==-1&&this._resetCache()},mt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},mt.prototype.setArrow=function(){var bt=this.attr(),jt=this.attrs,Dt=jt.points,Ut=jt.startArrow,Ct=jt.endArrow,Vt=Dt.length,Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];Ut&&p.b(this,bt,Dt[1][0],Dt[1][1],Ht,re),Ct&&p.a(this,bt,Dt[Vt-2][0],Dt[Vt-2][1],pe,ye)},mt.prototype.isFill=function(){return!1},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){if(!Dt||!Ct)return!1;var Vt=this.attr().points;return U(Vt,Ct,bt,jt,!1)},mt.prototype.isStroke=function(){return!0},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.points,Ut=jt.startArrow,Ct=jt.endArrow,Vt=Dt.length;if(!(Dt.length<2)){var Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];if(Ut&&Ut.d){var we=p.c(Ht,re,Dt[1][0],Dt[1][1],Ut.d);Ht+=we.dx,re+=we.dy}if(Ct&&Ct.d){var we=p.c(Dt[Vt-2][0],Dt[Vt-2][1],pe,ye,Ct.d);pe-=we.dx,ye-=we.dy}bt.beginPath(),bt.moveTo(Ht,re);for(var Ne=0;Ne<Vt-1;Ne++){var Ke=Dt[Ne];bt.lineTo(Ke[0],Ke[1])}bt.lineTo(pe,ye)}},mt.prototype.afterDrawPath=function(bt){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(bt),Dt&&Dt.draw(bt)},mt.prototype.getTotalLength=function(){var bt=this.attr().points,jt=this.get("totalLength");return Object(N.isNil)(jt)?(this.set("totalLength",O.d.length(bt)),this.get("totalLength")):jt},mt.prototype.getPoint=function(bt){var jt=this.attr().points,Dt=this.get("tCache");Dt||(this._setTcache(),Dt=this.get("tCache"));var Ut,Ct;return Object(N.each)(Dt,function(Vt,Ht){bt>=Vt[0]&&bt<=Vt[1]&&(Ut=(bt-Vt[0])/(Vt[1]-Vt[0]),Ct=Ht)}),O.c.pointAt(jt[Ct][0],jt[Ct][1],jt[Ct+1][0],jt[Ct+1][1],Ut)},mt.prototype._setTcache=function(){var bt=this.attr().points;if(!(!bt||bt.length===0)){var jt=this.getTotalLength();if(!(jt<=0)){var Dt=0,Ut=[],Ct,Vt;Object(N.each)(bt,function(Ht,re){bt[re+1]&&(Ct=[],Ct[0]=Dt/jt,Vt=O.c.length(Ht[0],Ht[1],bt[re+1][0],bt[re+1][1]),Dt+=Vt,Ct[1]=Dt/jt,Ut.push(Ct))}),this.set("tCache",Ut)}}},mt.prototype.getStartTangent=function(){var bt=this.attr().points,jt=[];return jt.push([bt[1][0],bt[1][1]]),jt.push([bt[0][0],bt[0][1]]),jt},mt.prototype.getEndTangent=function(){var bt=this.attr().points,jt=bt.length-1,Dt=[];return Dt.push([bt[jt-1][0],bt[jt-1][1]]),Dt.push([bt[jt][0],bt[jt][1]]),Dt},mt}(S),h=k,g=z("r0DC");function G(gt,mt,bt,jt,Dt,Ut,Ct){var Vt=Dt/2;return Object(e.e)(gt-Vt,mt-Vt,bt,Dt,Ut,Ct)||Object(e.e)(gt+bt-Vt,mt-Vt,Dt,jt,Ut,Ct)||Object(e.e)(gt+Vt,mt+jt-Vt,bt,Dt,Ut,Ct)||Object(e.e)(gt-Vt,mt+Vt,Dt,jt,Ut,Ct)}function V(gt,mt,bt,jt,Dt,Ut,Ct,Vt){var Ht=Ut/2;return C(gt+Dt,mt,gt+bt-Dt,mt,Ut,Ct,Vt)||C(gt+bt,mt+Dt,gt+bt,mt+jt-Dt,Ut,Ct,Vt)||C(gt+bt-Dt,mt+jt,gt+Dt,mt+jt,Ut,Ct,Vt)||C(gt,mt+jt-Dt,gt,mt+Dt,Ut,Ct,Vt)||Ot(gt+bt-Dt,mt+Dt,Dt,1.5*Math.PI,2*Math.PI,Ut,Ct,Vt)||Ot(gt+bt-Dt,mt+jt-Dt,Dt,0,.5*Math.PI,Ut,Ct,Vt)||Ot(gt+Dt,mt+jt-Dt,Dt,.5*Math.PI,Math.PI,Ut,Ct,Vt)||Ot(gt+Dt,mt+Dt,Dt,Math.PI,1.5*Math.PI,Ut,Ct,Vt)}var $=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,width:0,height:0,radius:0})},mt.prototype.isInStrokeOrPath=function(bt,jt,Dt,Ut,Ct){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.width,ye=Vt.height,we=Vt.radius;if(we){var Ke=!1;return Dt&&(Ke=V(Ht,re,pe,ye,we,Ct,bt,jt)),!Ke&&Ut&&(Ke=ht(this,bt,jt)),Ke}else{var Ne=Ct/2;if(Ut&&Dt)return Object(e.e)(Ht-Ne,re-Ne,pe+Ne,ye+Ne,bt,jt);if(Ut)return Object(e.e)(Ht,re,pe,ye,bt,jt);if(Dt)return G(Ht,re,pe,ye,Ct,bt,jt)}},mt.prototype.createPath=function(bt){var jt=this.attr(),Dt=jt.x,Ut=jt.y,Ct=jt.width,Vt=jt.height,Ht=jt.radius;if(bt.beginPath(),Ht===0)bt.rect(Dt,Ut,Ct,Vt);else{var re=Object(g.a)(Ht),pe=re[0],ye=re[1],we=re[2],Ne=re[3];bt.moveTo(Dt+pe,Ut),bt.lineTo(Dt+Ct-ye,Ut),ye!==0&&bt.arc(Dt+Ct-ye,Ut+ye,ye,-Math.PI/2,0),bt.lineTo(Dt+Ct,Ut+Vt-we),we!==0&&bt.arc(Dt+Ct-we,Ut+Vt-we,we,0,Math.PI/2),bt.lineTo(Dt+Ne,Ut+Vt),Ne!==0&&bt.arc(Dt+Ne,Ut+Vt-Ne,Ne,Math.PI/2,Math.PI),bt.lineTo(Dt,Ut+pe),pe!==0&&bt.arc(Dt+pe,Ut+pe,pe,Math.PI,Math.PI*1.5),bt.closePath()}},mt}(S),rt=$,ot=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var bt=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype.initAttrs=function(bt){this._assembleFont(),bt.text&&this._setText(bt.text)},mt.prototype._assembleFont=function(){var bt=this.attrs;bt.font=Object(A.assembleFont)(bt)},mt.prototype._setText=function(bt){var jt=null;Object(e.k)(bt)&&bt.indexOf(`
`)!==-1&&(jt=bt.split(`
`)),this.set("textArr",jt)},mt.prototype.onAttrChange=function(bt,jt,Dt){gt.prototype.onAttrChange.call(this,bt,jt,Dt),bt.startsWith("font")&&this._assembleFont(),bt==="text"&&this._setText(jt)},mt.prototype._getSpaceingY=function(){var bt=this.attrs,jt=bt.lineHeight,Dt=bt.fontSize*1;return jt?jt-Dt:Dt*.14},mt.prototype._drawTextArr=function(bt,jt,Dt){var Ut=this.attrs,Ct=Ut.textBaseline,Vt=Ut.x,Ht=Ut.y,re=Ut.fontSize*1,pe=this._getSpaceingY(),ye=Object(A.getTextHeight)(Ut.text,Ut.fontSize,Ut.lineHeight),we;Object(e.c)(jt,function(Ne,Ke){we=Ht+Ke*(pe+re)-ye+re,Ct==="middle"&&(we+=ye-re-(ye-re)/2),Ct==="top"&&(we+=ye-re),Dt?bt.fillText(Ne,Vt,we):bt.strokeText(Ne,Vt,we)})},mt.prototype._drawText=function(bt,jt){var Dt=this.attr(),Ut=Dt.x,Ct=Dt.y,Vt=this.get("textArr");if(Vt)this._drawTextArr(bt,Vt,jt);else{var Ht=Dt.text;jt?bt.fillText(Ht,Ut,Ct):bt.strokeText(Ht,Ut,Ct)}},mt.prototype.strokeAndFill=function(bt){var jt=this.attrs,Dt=jt.lineWidth,Ut=jt.opacity,Ct=jt.strokeOpacity,Vt=jt.fillOpacity;this.isStroke()&&Dt>0&&(!Object(e.i)(Ct)&&Ct!==1&&(bt.globalAlpha=Ut),this.stroke(bt)),this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(bt.globalAlpha=Vt,this.fill(bt),bt.globalAlpha=Ut):this.fill(bt)),this.afterDrawPath(bt)},mt.prototype.fill=function(bt){this._drawText(bt,!0)},mt.prototype.stroke=function(bt){this._drawText(bt,!1)},mt}(S),At=ot},SZbK:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at});var at=["#FAAD14","#E8EDF3"]},ShmH:function(Un,_t,z){var at=z("o0o1");(function(a,A){Un.exports=A()})(this,function(){return function(a){var A={};function e(i){if(A[i])return A[i].exports;var v=A[i]={i,l:!1,exports:{}};return a[i].call(v.exports,v,v.exports,e),v.l=!0,v.exports}return e.m=a,e.c=A,e.d=function(i,v,b){e.o(i,v)||Object.defineProperty(i,v,{enumerable:!0,get:b})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,v){if(1&v&&(i=e(i)),8&v||4&v&&typeof i=="object"&&i&&i.__esModule)return i;var b=Object.create(null);if(e.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:i}),2&v&&typeof i!="string")for(var S in i)e.d(b,S,function(f){return i[f]}.bind(null,S));return b},e.n=function(i){var v=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(v,"a",v),v},e.o=function(i,v){return Object.prototype.hasOwnProperty.call(i,v)},e.p="",e(e.s=262)}([function(a,A,e){"use strict";e.d(A,"j",function(){return C}),e.d(A,"k",function(){return T}),e.d(A,"y",function(){return N}),e.d(A,"g",function(){return v}),e.d(A,"J",function(){return Y}),e.d(A,"h",function(){return q}),e.d(A,"u",function(){return vt}),e.d(A,"B",function(){return ht}),e.d(A,"G",function(){return wt}),e.d(A,"I",function(){return ft}),e.d(A,"m",function(){return I}),e.d(A,"n",function(){return Ot}),e.d(A,"o",function(){return X}),e.d(A,"r",function(){return f}),e.d(A,"s",function(){return M}),e.d(A,"t",function(){return nt}),e.d(A,"v",function(){return n}),e.d(A,"w",function(){return O}),e.d(A,"x",function(){return x}),e.d(A,"D",function(){return pt}),e.d(A,"b",function(){return Mt}),e.d(A,"c",function(){return U}),e.d(A,"d",function(){return P}),e.d(A,"e",function(){return k}),e.d(A,"f",function(){return s}),e.d(A,"l",function(){return h}),e.d(A,"p",function(){return G}),e.d(A,"q",function(){return V}),e.d(A,"z",function(){return $}),e.d(A,"A",function(){return lt}),e.d(A,"a",function(){return lt}),e.d(A,"i",function(){return rt}),e.d(A,"F",function(){return ot}),e.d(A,"H",function(){return gt}),e.d(A,"C",function(){return mt}),e.d(A,"E",function(){return bt});var i=function(Dt){return Dt!==null&&typeof Dt!="function"&&isFinite(Dt.length)},v=function(Dt,Ut){if(!i(Dt))return Dt;for(var Ct=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];Ut(Ht,Vt)&&Ct.push(Ht)}return Ct},b={}.toString,S=function(Dt,Ut){return b.call(Dt)==="[object "+Ut+"]"},f=function(Dt){return S(Dt,"Function")},M=function(Dt){return Dt==null},I=function(Dt){return Array.isArray?Array.isArray(Dt):S(Dt,"Array")};function y(jt){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var n=function(Dt){var Ut=y(Dt);return Dt!==null&&Ut==="object"||Ut==="function"},s=function(Dt,Ut){if(Dt){if(I(Dt))for(var Ct=0,Vt=Dt.length;Ct<Vt&&Ut(Dt[Ct],Ct)!==!1;Ct++);else if(n(Dt)){for(var Ht in Dt)if(Dt.hasOwnProperty(Ht)&&Ut(Dt[Ht],Ht)===!1)break}}};function d(jt){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var E=function(Dt){return d(Dt)==="object"&&Dt!==null},O=function(Dt){if(!E(Dt)||!S(Dt,"Object"))return!1;if(Object.getPrototypeOf(Dt)===null)return!0;for(var Ut=Dt;Object.getPrototypeOf(Ut)!==null;)Ut=Object.getPrototypeOf(Ut);return Object.getPrototypeOf(Dt)===Ut},C=function(Dt){var Ut=Dt.filter(function(re){return!isNaN(re)});if(!Ut.length)return{min:0,max:0};if(I(Dt[0])){for(var Ct=[],Vt=0;Vt<Dt.length;Vt++)Ct=Ct.concat(Dt[Vt]);Ut=Ct}var Ht=Math.max.apply(null,Ut);return{min:Math.min.apply(null,Ut),max:Ht}},p=Array.prototype,x=(p.splice,p.indexOf,Array.prototype.splice,function(jt){return S(jt,"String")});function T(jt){if(i(jt))return jt[0]}function N(jt){if(i(jt))return jt[jt.length-1]}var Y=function(Dt,Ut){if(Dt["_wrap_"+Ut])return Dt["_wrap_"+Ut];var Ct=function(Ht){Dt[Ut](Ht)};return Dt["_wrap_"+Ut]=Ct,Ct},q=function(Dt,Ut){var Ct=Ut.toString(),Vt=Ct.indexOf(".");if(Vt===-1)return Math.round(Dt);var Ht=Ct.substr(Vt+1).length;return Ht>20&&(Ht=20),parseFloat(Dt.toFixed(Ht))},nt=function(Dt){return S(Dt,"Number")};Number.isInteger&&Number.isInteger;function vt(jt,Dt,Ut){return Ut===void 0&&(Ut=1e-5),Math.abs(jt-Dt)<Ut}var ht=function(Dt,Ut){return(Dt%Ut+Ut)%Ut},St=(parseInt,Math.PI/180),wt=function(Dt){return St*Dt},xt=function(jt){return M(jt)?"":jt.toString()},ft=function(Dt){var Ut=xt(Dt);return Ut.charAt(0).toUpperCase()+Ut.substring(1)},Ft={}.toString,kt=function(Dt){return Ft.call(Dt).replace(/^\[object /,"").replace(/]$/,"")},Ot=function(Dt){return S(Dt,"Boolean")},X=function(Dt){return S(Dt,"Date")},ct=Object.prototype,dt=function(Dt){var Ut=Dt&&Dt.constructor;return Dt===(typeof Ut=="function"&&Ut.prototype||ct)};function pt(jt){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Dt){return setTimeout(Dt,16)})(jt)}function Mt(jt){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(jt)}function tt(jt,Dt){for(var Ut in Dt)Dt.hasOwnProperty(Ut)&&Ut!=="constructor"&&Dt[Ut]!==void 0&&(jt[Ut]=Dt[Ut])}function lt(jt,Dt,Ut,Ct){return Dt&&tt(jt,Dt),Ut&&tt(jt,Ut),Ct&&tt(jt,Ct),jt}function it(jt){return(it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var U=function jt(Dt){if(it(Dt)!=="object"||Dt===null)return Dt;var Ut;if(I(Dt)){Ut=[];for(var Ct=0,Vt=Dt.length;Ct<Vt;Ct++)it(Dt[Ct])==="object"&&Dt[Ct]!=null?Ut[Ct]=jt(Dt[Ct]):Ut[Ct]=Dt[Ct]}else for(var Ht in Ut={},Dt)it(Dt[Ht])==="object"&&Dt[Ht]!=null?Ut[Ht]=jt(Dt[Ht]):Ut[Ht]=Dt[Ht];return Ut},P=function(Dt,Ut,Ct){var Vt;return function(){var Ht=this,re=arguments,pe=function(){Vt=null,Ct||Dt.apply(Ht,re)},ye=Ct&&!Vt;clearTimeout(Vt),Vt=setTimeout(pe,Ut),ye&&Dt.apply(Ht,re)}};function H(jt,Dt,Ut,Ct){for(var Vt in Ut=Ut||0,Ct=Ct||5,Dt)if(Dt.hasOwnProperty(Vt)){var Ht=Dt[Vt];Ht!==null&&O(Ht)?(O(jt[Vt])||(jt[Vt]={}),Ut<Ct?H(jt[Vt],Ht,Ut+1,Ct):jt[Vt]=Dt[Vt]):I(Ht)?(jt[Vt]=[],jt[Vt]=jt[Vt].concat(Ht)):Ht!==void 0&&(jt[Vt]=Ht)}}var k=function(Dt){for(var Ut=[],Ct=1;Ct<arguments.length;Ct++)Ut[Ct-1]=arguments[Ct];for(var Vt=0;Vt<Ut.length;Vt+=1)H(Dt,Ut[Vt]);return Dt},h=function(Dt,Ut){if(!i(Dt))return-1;var Ct=Array.prototype.indexOf;if(Ct)return Ct.call(Dt,Ut);for(var Vt=-1,Ht=0;Ht<Dt.length;Ht++)if(Dt[Ht]===Ut){Vt=Ht;break}return Vt},g=Object.prototype.hasOwnProperty,G=function(Dt){if(M(Dt))return!0;if(i(Dt))return!Dt.length;var Ut=kt(Dt);if(Ut==="Map"||Ut==="Set")return!Dt.size;if(dt(Dt))return!Object.keys(Dt).length;for(var Ct in Dt)if(g.call(Dt,Ct))return!1;return!0},V=function jt(Dt,Ut){if(Dt===Ut)return!0;if(!Dt||!Ut||x(Dt)||x(Ut))return!1;if(i(Dt)||i(Ut)){if(Dt.length!==Ut.length)return!1;for(var Ct=!0,Vt=0;Vt<Dt.length&&(Ct=jt(Dt[Vt],Ut[Vt]));Vt++);return Ct}if(E(Dt)||E(Ut)){var Ht=Object.keys(Dt),re=Object.keys(Ut);if(Ht.length!==re.length)return!1;for(Ct=!0,Vt=0;Vt<Ht.length&&(Ct=jt(Dt[Ht[Vt]],Ut[Ht[Vt]]));Vt++);return Ct}return!1},$=function(Dt,Ut){if(!i(Dt))return Dt;for(var Ct=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];Ct.push(Ut(Ht,Vt))}return Ct},rt=function(Dt,Ut,Ct){for(var Vt=0,Ht=x(Ut)?Ut.split("."):Ut;Dt&&Vt<Ht.length;)Dt=Dt[Ht[Vt++]];return Dt===void 0||Vt<Ht.length?Ct:Dt},ot=function(jt){return i(jt)?Array.prototype.slice.call(jt):[]},At={},gt=function(Dt){return At[Dt=Dt||"g"]?At[Dt]+=1:At[Dt]=1,Dt+At[Dt]},mt=function(){};function bt(jt){return M(jt)?0:i(jt)?jt.length:Object.keys(jt).length}(function(){function jt(){this.map={}}jt.prototype.has=function(Dt){return this.map[Dt]!==void 0},jt.prototype.get=function(Dt,Ut){var Ct=this.map[Dt];return Ct===void 0?Ut:Ct},jt.prototype.set=function(Dt,Ut){this.map[Dt]=Ut},jt.prototype.clear=function(){this.map={}},jt.prototype.delete=function(Dt){delete this.map[Dt]},jt.prototype.size=function(){return Object.keys(this.map).length}})()},function(a,A,e){"use strict";e.d(A,"b",function(){return v}),e.d(A,"a",function(){return b}),e.d(A,"c",function(){return S}),e.d(A,"d",function(){return f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(I,y){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])})(I,y)};function v(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function y(){this.constructor=M}i(M,I),M.prototype=I===null?Object.create(I):(y.prototype=I.prototype,new y)}var b=function(){return(b=Object.assign||function(I){for(var y,n=1,s=arguments.length;n<s;n++)for(var d in y=arguments[n])Object.prototype.hasOwnProperty.call(y,d)&&(I[d]=y[d]);return I}).apply(this,arguments)};function S(M,I){var y={};for(var n in M)Object.prototype.hasOwnProperty.call(M,n)&&I.indexOf(n)<0&&(y[n]=M[n]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(M);s<n.length;s++)I.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(M,n[s])&&(y[n[s]]=M[n[s]])}return y}function f(){for(var M=0,I=0,y=arguments.length;I<y;I++)M+=arguments[I].length;var n=Array(M),s=0;for(I=0;I<y;I++)for(var d=arguments[I],E=0,O=d.length;E<O;E++,s++)n[s]=d[E];return n}},function(a,A,e){"use strict";e.d(A,"a",function(){return i}),e.d(A,"b",function(){return v}),e.d(A,"c",function(){return S}),e.d(A,"d",function(){return Ce}),e.d(A,"e",function(){return si}),e.d(A,"f",function(){return b});var i={};e.r(i),e.d(i,"create",function(){return M}),e.d(i,"fromMat4",function(){return I}),e.d(i,"clone",function(){return y}),e.d(i,"copy",function(){return n}),e.d(i,"fromValues",function(){return s}),e.d(i,"set",function(){return d}),e.d(i,"identity",function(){return E}),e.d(i,"transpose",function(){return O}),e.d(i,"invert",function(){return C}),e.d(i,"adjoint",function(){return p}),e.d(i,"determinant",function(){return x}),e.d(i,"multiply",function(){return T}),e.d(i,"translate",function(){return N}),e.d(i,"rotate",function(){return Y}),e.d(i,"scale",function(){return q}),e.d(i,"fromTranslation",function(){return nt}),e.d(i,"fromRotation",function(){return vt}),e.d(i,"fromScaling",function(){return ht}),e.d(i,"fromMat2d",function(){return St}),e.d(i,"fromQuat",function(){return wt}),e.d(i,"normalFromMat4",function(){return xt}),e.d(i,"projection",function(){return ft}),e.d(i,"str",function(){return Ft}),e.d(i,"frob",function(){return kt}),e.d(i,"add",function(){return Ot}),e.d(i,"subtract",function(){return X}),e.d(i,"multiplyScalar",function(){return ct}),e.d(i,"multiplyScalarAndAdd",function(){return dt}),e.d(i,"exactEquals",function(){return pt}),e.d(i,"equals",function(){return Mt}),e.d(i,"mul",function(){return tt}),e.d(i,"sub",function(){return lt});var v={};e.r(v),e.d(v,"create",function(){return it}),e.d(v,"clone",function(){return U}),e.d(v,"copy",function(){return P}),e.d(v,"fromValues",function(){return H}),e.d(v,"set",function(){return k}),e.d(v,"identity",function(){return h}),e.d(v,"transpose",function(){return g}),e.d(v,"invert",function(){return G}),e.d(v,"adjoint",function(){return V}),e.d(v,"determinant",function(){return $}),e.d(v,"multiply",function(){return rt}),e.d(v,"translate",function(){return ot}),e.d(v,"scale",function(){return At}),e.d(v,"rotate",function(){return gt}),e.d(v,"rotateX",function(){return mt}),e.d(v,"rotateY",function(){return bt}),e.d(v,"rotateZ",function(){return jt}),e.d(v,"fromTranslation",function(){return Dt}),e.d(v,"fromScaling",function(){return Ut}),e.d(v,"fromRotation",function(){return Ct}),e.d(v,"fromXRotation",function(){return Vt}),e.d(v,"fromYRotation",function(){return Ht}),e.d(v,"fromZRotation",function(){return re}),e.d(v,"fromRotationTranslation",function(){return pe}),e.d(v,"fromQuat2",function(){return ye}),e.d(v,"getTranslation",function(){return we}),e.d(v,"getScaling",function(){return Ne}),e.d(v,"getRotation",function(){return Ke}),e.d(v,"fromRotationTranslationScale",function(){return pn}),e.d(v,"fromRotationTranslationScaleOrigin",function(){return hn}),e.d(v,"fromQuat",function(){return kn}),e.d(v,"frustum",function(){return Tn}),e.d(v,"perspective",function(){return Rn}),e.d(v,"perspectiveFromFieldOfView",function(){return Mn}),e.d(v,"ortho",function(){return Cn}),e.d(v,"lookAt",function(){return _n}),e.d(v,"targetTo",function(){return Kn}),e.d(v,"str",function(){return tr}),e.d(v,"frob",function(){return or}),e.d(v,"add",function(){return nr}),e.d(v,"subtract",function(){return er}),e.d(v,"multiplyScalar",function(){return Sr}),e.d(v,"multiplyScalarAndAdd",function(){return Vr}),e.d(v,"exactEquals",function(){return ti}),e.d(v,"equals",function(){return hi}),e.d(v,"mul",function(){return Fi}),e.d(v,"sub",function(){return to});var b={};e.r(b),e.d(b,"create",function(){return Ci}),e.d(b,"clone",function(){return _i}),e.d(b,"fromValues",function(){return Li}),e.d(b,"copy",function(){return Vi}),e.d(b,"set",function(){return ro}),e.d(b,"add",function(){return jr}),e.d(b,"subtract",function(){return Ji}),e.d(b,"multiply",function(){return pr}),e.d(b,"divide",function(){return Yr}),e.d(b,"ceil",function(){return Br}),e.d(b,"floor",function(){return Nr}),e.d(b,"min",function(){return Xr}),e.d(b,"max",function(){return Kr}),e.d(b,"round",function(){return ni}),e.d(b,"scale",function(){return fi}),e.d(b,"scaleAndAdd",function(){return $r}),e.d(b,"distance",function(){return ci}),e.d(b,"squaredDistance",function(){return Qr}),e.d(b,"length",function(){return gi}),e.d(b,"squaredLength",function(){return Oi}),e.d(b,"negate",function(){return bi}),e.d(b,"inverse",function(){return zi}),e.d(b,"normalize",function(){return Qi}),e.d(b,"dot",function(){return io}),e.d(b,"cross",function(){return Wi}),e.d(b,"lerp",function(){return Zi}),e.d(b,"random",function(){return Pi}),e.d(b,"transformMat4",function(){return no}),e.d(b,"transformQuat",function(){return Mo}),e.d(b,"zero",function(){return ao}),e.d(b,"str",function(){return uo}),e.d(b,"exactEquals",function(){return xo}),e.d(b,"equals",function(){return oe}),e.d(b,"sub",function(){return te}),e.d(b,"mul",function(){return Oe}),e.d(b,"div",function(){return Qe}),e.d(b,"dist",function(){return On}),e.d(b,"sqrDist",function(){return Vn}),e.d(b,"len",function(){return Xn}),e.d(b,"sqrLen",function(){return $e}),e.d(b,"forEach",function(){return rn});var S={};e.r(S),e.d(S,"create",function(){return on}),e.d(S,"identity",function(){return $n}),e.d(S,"setAxisAngle",function(){return vr}),e.d(S,"getAxisAngle",function(){return ar}),e.d(S,"getAngle",function(){return rr}),e.d(S,"multiply",function(){return Fr}),e.d(S,"rotateX",function(){return Ar}),e.d(S,"rotateY",function(){return wr}),e.d(S,"rotateZ",function(){return xr}),e.d(S,"calculateW",function(){return Er}),e.d(S,"exp",function(){return Ir}),e.d(S,"ln",function(){return Lr}),e.d(S,"pow",function(){return Pr}),e.d(S,"slerp",function(){return Dr}),e.d(S,"random",function(){return ri}),e.d(S,"invert",function(){return vi}),e.d(S,"conjugate",function(){return ii}),e.d(S,"fromMat3",function(){return Si}),e.d(S,"fromEuler",function(){return Ui}),e.d(S,"str",function(){return Yi}),e.d(S,"clone",function(){return ut}),e.d(S,"fromValues",function(){return Bt}),e.d(S,"copy",function(){return Jt}),e.d(S,"set",function(){return ie}),e.d(S,"add",function(){return se}),e.d(S,"mul",function(){return Te}),e.d(S,"scale",function(){return Ee}),e.d(S,"dot",function(){return un}),e.d(S,"lerp",function(){return xn}),e.d(S,"length",function(){return zt}),e.d(S,"len",function(){return Yt}),e.d(S,"squaredLength",function(){return Se}),e.d(S,"sqrLen",function(){return Wt}),e.d(S,"normalize",function(){return ue}),e.d(S,"exactEquals",function(){return vn}),e.d(S,"equals",function(){return Dn}),e.d(S,"rotationTo",function(){return zn}),e.d(S,"sqlerp",function(){return Gn}),e.d(S,"setAxes",function(){return Ze});var f=e(11);function M(){var R=new f.a(9);return f.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}function I(R,yt){return R[0]=yt[0],R[1]=yt[1],R[2]=yt[2],R[3]=yt[4],R[4]=yt[5],R[5]=yt[6],R[6]=yt[8],R[7]=yt[9],R[8]=yt[10],R}function y(R){var yt=new f.a(9);return yt[0]=R[0],yt[1]=R[1],yt[2]=R[2],yt[3]=R[3],yt[4]=R[4],yt[5]=R[5],yt[6]=R[6],yt[7]=R[7],yt[8]=R[8],yt}function n(R,yt){return R[0]=yt[0],R[1]=yt[1],R[2]=yt[2],R[3]=yt[3],R[4]=yt[4],R[5]=yt[5],R[6]=yt[6],R[7]=yt[7],R[8]=yt[8],R}function s(R,yt,$t,me,Zt,de,he,ce,Me){var ze=new f.a(9);return ze[0]=R,ze[1]=yt,ze[2]=$t,ze[3]=me,ze[4]=Zt,ze[5]=de,ze[6]=he,ze[7]=ce,ze[8]=Me,ze}function d(R,yt,$t,me,Zt,de,he,ce,Me,ze){return R[0]=yt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=de,R[5]=he,R[6]=ce,R[7]=Me,R[8]=ze,R}function E(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function O(R,yt){if(R===yt){var $t=yt[1],me=yt[2],Zt=yt[5];R[1]=yt[3],R[2]=yt[6],R[3]=$t,R[5]=yt[7],R[6]=me,R[7]=Zt}else R[0]=yt[0],R[1]=yt[3],R[2]=yt[6],R[3]=yt[1],R[4]=yt[4],R[5]=yt[7],R[6]=yt[2],R[7]=yt[5],R[8]=yt[8];return R}function C(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=yt[4],ce=yt[5],Me=yt[6],ze=yt[7],Ve=yt[8],ke=Ve*he-ce*ze,tn=-Ve*de+ce*Me,De=ze*de-he*Me,cn=$t*ke+me*tn+Zt*De;return cn?(cn=1/cn,R[0]=ke*cn,R[1]=(-Ve*me+Zt*ze)*cn,R[2]=(ce*me-Zt*he)*cn,R[3]=tn*cn,R[4]=(Ve*$t-Zt*Me)*cn,R[5]=(-ce*$t+Zt*de)*cn,R[6]=De*cn,R[7]=(-ze*$t+me*Me)*cn,R[8]=(he*$t-me*de)*cn,R):null}function p(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=yt[4],ce=yt[5],Me=yt[6],ze=yt[7],Ve=yt[8];return R[0]=he*Ve-ce*ze,R[1]=Zt*ze-me*Ve,R[2]=me*ce-Zt*he,R[3]=ce*Me-de*Ve,R[4]=$t*Ve-Zt*Me,R[5]=Zt*de-$t*ce,R[6]=de*ze-he*Me,R[7]=me*Me-$t*ze,R[8]=$t*he-me*de,R}function x(R){var yt=R[0],$t=R[1],me=R[2],Zt=R[3],de=R[4],he=R[5],ce=R[6],Me=R[7],ze=R[8];return yt*(ze*de-he*Me)+$t*(-ze*Zt+he*ce)+me*(Me*Zt-de*ce)}function T(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=yt[8],tn=$t[0],De=$t[1],cn=$t[2],fn=$t[3],nn=$t[4],dn=$t[5],Sn=$t[6],Pe=$t[7],le=$t[8];return R[0]=tn*me+De*he+cn*ze,R[1]=tn*Zt+De*ce+cn*Ve,R[2]=tn*de+De*Me+cn*ke,R[3]=fn*me+nn*he+dn*ze,R[4]=fn*Zt+nn*ce+dn*Ve,R[5]=fn*de+nn*Me+dn*ke,R[6]=Sn*me+Pe*he+le*ze,R[7]=Sn*Zt+Pe*ce+le*Ve,R[8]=Sn*de+Pe*Me+le*ke,R}function N(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=yt[8],tn=$t[0],De=$t[1];return R[0]=me,R[1]=Zt,R[2]=de,R[3]=he,R[4]=ce,R[5]=Me,R[6]=tn*me+De*he+ze,R[7]=tn*Zt+De*ce+Ve,R[8]=tn*de+De*Me+ke,R}function Y(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=yt[8],tn=Math.sin($t),De=Math.cos($t);return R[0]=De*me+tn*he,R[1]=De*Zt+tn*ce,R[2]=De*de+tn*Me,R[3]=De*he-tn*me,R[4]=De*ce-tn*Zt,R[5]=De*Me-tn*de,R[6]=ze,R[7]=Ve,R[8]=ke,R}function q(R,yt,$t){var me=$t[0],Zt=$t[1];return R[0]=me*yt[0],R[1]=me*yt[1],R[2]=me*yt[2],R[3]=Zt*yt[3],R[4]=Zt*yt[4],R[5]=Zt*yt[5],R[6]=yt[6],R[7]=yt[7],R[8]=yt[8],R}function nt(R,yt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=yt[0],R[7]=yt[1],R[8]=1,R}function vt(R,yt){var $t=Math.sin(yt),me=Math.cos(yt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=-$t,R[4]=me,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function ht(R,yt){return R[0]=yt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=yt[1],R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function St(R,yt){return R[0]=yt[0],R[1]=yt[1],R[2]=0,R[3]=yt[2],R[4]=yt[3],R[5]=0,R[6]=yt[4],R[7]=yt[5],R[8]=1,R}function wt(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,fn=de*he,nn=de*ce,dn=de*Me;return R[0]=1-ke-cn,R[3]=Ve-dn,R[6]=tn+nn,R[1]=Ve+dn,R[4]=1-ze-cn,R[7]=De-fn,R[2]=tn-nn,R[5]=De+fn,R[8]=1-ze-ke,R}function xt(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=yt[4],ce=yt[5],Me=yt[6],ze=yt[7],Ve=yt[8],ke=yt[9],tn=yt[10],De=yt[11],cn=yt[12],fn=yt[13],nn=yt[14],dn=yt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*fn-ke*cn,Ue=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*fn,Wn=ke*dn-De*fn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*Ue+en*sn;return In?(In=1/In,R[0]=(ce*An-Me*Wn+ze*mn)*In,R[1]=(Me*ln-he*An-ze*Ue)*In,R[2]=(he*Wn-ce*ln+ze*sn)*In,R[3]=(Zt*Wn-me*An-de*mn)*In,R[4]=($t*An-Zt*ln+de*Ue)*In,R[5]=(me*ln-$t*Wn-de*sn)*In,R[6]=(fn*en-nn*Be+dn*Le)*In,R[7]=(nn*le-cn*en-dn*Pe)*In,R[8]=(cn*Be-fn*le+dn*Sn)*In,R):null}function ft(R,yt,$t){return R[0]=2/yt,R[1]=0,R[2]=0,R[3]=0,R[4]=-2/$t,R[5]=0,R[6]=-1,R[7]=1,R[8]=1,R}function Ft(R){return"mat3("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+")"}function kt(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8])}function Ot(R,yt,$t){return R[0]=yt[0]+$t[0],R[1]=yt[1]+$t[1],R[2]=yt[2]+$t[2],R[3]=yt[3]+$t[3],R[4]=yt[4]+$t[4],R[5]=yt[5]+$t[5],R[6]=yt[6]+$t[6],R[7]=yt[7]+$t[7],R[8]=yt[8]+$t[8],R}function X(R,yt,$t){return R[0]=yt[0]-$t[0],R[1]=yt[1]-$t[1],R[2]=yt[2]-$t[2],R[3]=yt[3]-$t[3],R[4]=yt[4]-$t[4],R[5]=yt[5]-$t[5],R[6]=yt[6]-$t[6],R[7]=yt[7]-$t[7],R[8]=yt[8]-$t[8],R}function ct(R,yt,$t){return R[0]=yt[0]*$t,R[1]=yt[1]*$t,R[2]=yt[2]*$t,R[3]=yt[3]*$t,R[4]=yt[4]*$t,R[5]=yt[5]*$t,R[6]=yt[6]*$t,R[7]=yt[7]*$t,R[8]=yt[8]*$t,R}function dt(R,yt,$t,me){return R[0]=yt[0]+$t[0]*me,R[1]=yt[1]+$t[1]*me,R[2]=yt[2]+$t[2]*me,R[3]=yt[3]+$t[3]*me,R[4]=yt[4]+$t[4]*me,R[5]=yt[5]+$t[5]*me,R[6]=yt[6]+$t[6]*me,R[7]=yt[7]+$t[7]*me,R[8]=yt[8]+$t[8]*me,R}function pt(R,yt){return R[0]===yt[0]&&R[1]===yt[1]&&R[2]===yt[2]&&R[3]===yt[3]&&R[4]===yt[4]&&R[5]===yt[5]&&R[6]===yt[6]&&R[7]===yt[7]&&R[8]===yt[8]}function Mt(R,yt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=R[4],ce=R[5],Me=R[6],ze=R[7],Ve=R[8],ke=yt[0],tn=yt[1],De=yt[2],cn=yt[3],fn=yt[4],nn=yt[5],dn=yt[6],Sn=yt[7],Pe=yt[8];return Math.abs($t-ke)<=f.b*Math.max(1,Math.abs($t),Math.abs(ke))&&Math.abs(me-tn)<=f.b*Math.max(1,Math.abs(me),Math.abs(tn))&&Math.abs(Zt-De)<=f.b*Math.max(1,Math.abs(Zt),Math.abs(De))&&Math.abs(de-cn)<=f.b*Math.max(1,Math.abs(de),Math.abs(cn))&&Math.abs(he-fn)<=f.b*Math.max(1,Math.abs(he),Math.abs(fn))&&Math.abs(ce-nn)<=f.b*Math.max(1,Math.abs(ce),Math.abs(nn))&&Math.abs(Me-dn)<=f.b*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(ze-Sn)<=f.b*Math.max(1,Math.abs(ze),Math.abs(Sn))&&Math.abs(Ve-Pe)<=f.b*Math.max(1,Math.abs(Ve),Math.abs(Pe))}var tt=T,lt=X;function it(){var R=new f.a(16);return f.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R}function U(R){var yt=new f.a(16);return yt[0]=R[0],yt[1]=R[1],yt[2]=R[2],yt[3]=R[3],yt[4]=R[4],yt[5]=R[5],yt[6]=R[6],yt[7]=R[7],yt[8]=R[8],yt[9]=R[9],yt[10]=R[10],yt[11]=R[11],yt[12]=R[12],yt[13]=R[13],yt[14]=R[14],yt[15]=R[15],yt}function P(R,yt){return R[0]=yt[0],R[1]=yt[1],R[2]=yt[2],R[3]=yt[3],R[4]=yt[4],R[5]=yt[5],R[6]=yt[6],R[7]=yt[7],R[8]=yt[8],R[9]=yt[9],R[10]=yt[10],R[11]=yt[11],R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15],R}function H(R,yt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn){var nn=new f.a(16);return nn[0]=R,nn[1]=yt,nn[2]=$t,nn[3]=me,nn[4]=Zt,nn[5]=de,nn[6]=he,nn[7]=ce,nn[8]=Me,nn[9]=ze,nn[10]=Ve,nn[11]=ke,nn[12]=tn,nn[13]=De,nn[14]=cn,nn[15]=fn,nn}function k(R,yt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn,nn){return R[0]=yt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=de,R[5]=he,R[6]=ce,R[7]=Me,R[8]=ze,R[9]=Ve,R[10]=ke,R[11]=tn,R[12]=De,R[13]=cn,R[14]=fn,R[15]=nn,R}function h(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function g(R,yt){if(R===yt){var $t=yt[1],me=yt[2],Zt=yt[3],de=yt[6],he=yt[7],ce=yt[11];R[1]=yt[4],R[2]=yt[8],R[3]=yt[12],R[4]=$t,R[6]=yt[9],R[7]=yt[13],R[8]=me,R[9]=de,R[11]=yt[14],R[12]=Zt,R[13]=he,R[14]=ce}else R[0]=yt[0],R[1]=yt[4],R[2]=yt[8],R[3]=yt[12],R[4]=yt[1],R[5]=yt[5],R[6]=yt[9],R[7]=yt[13],R[8]=yt[2],R[9]=yt[6],R[10]=yt[10],R[11]=yt[14],R[12]=yt[3],R[13]=yt[7],R[14]=yt[11],R[15]=yt[15];return R}function G(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=yt[4],ce=yt[5],Me=yt[6],ze=yt[7],Ve=yt[8],ke=yt[9],tn=yt[10],De=yt[11],cn=yt[12],fn=yt[13],nn=yt[14],dn=yt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*fn-ke*cn,Ue=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*fn,Wn=ke*dn-De*fn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*Ue+en*sn;return In?(In=1/In,R[0]=(ce*An-Me*Wn+ze*mn)*In,R[1]=(Zt*Wn-me*An-de*mn)*In,R[2]=(fn*en-nn*Be+dn*Le)*In,R[3]=(tn*Be-ke*en-De*Le)*In,R[4]=(Me*ln-he*An-ze*Ue)*In,R[5]=($t*An-Zt*ln+de*Ue)*In,R[6]=(nn*le-cn*en-dn*Pe)*In,R[7]=(Ve*en-tn*le+De*Pe)*In,R[8]=(he*Wn-ce*ln+ze*sn)*In,R[9]=(me*ln-$t*Wn-de*sn)*In,R[10]=(cn*Be-fn*le+dn*Sn)*In,R[11]=(ke*le-Ve*Be-De*Sn)*In,R[12]=(ce*Ue-he*mn-Me*sn)*In,R[13]=($t*mn-me*Ue+Zt*sn)*In,R[14]=(fn*Pe-cn*Le-nn*Sn)*In,R[15]=(Ve*Le-ke*Pe+tn*Sn)*In,R):null}function V(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=yt[4],ce=yt[5],Me=yt[6],ze=yt[7],Ve=yt[8],ke=yt[9],tn=yt[10],De=yt[11],cn=yt[12],fn=yt[13],nn=yt[14],dn=yt[15];return R[0]=ce*(tn*dn-De*nn)-ke*(Me*dn-ze*nn)+fn*(Me*De-ze*tn),R[1]=-(me*(tn*dn-De*nn)-ke*(Zt*dn-de*nn)+fn*(Zt*De-de*tn)),R[2]=me*(Me*dn-ze*nn)-ce*(Zt*dn-de*nn)+fn*(Zt*ze-de*Me),R[3]=-(me*(Me*De-ze*tn)-ce*(Zt*De-de*tn)+ke*(Zt*ze-de*Me)),R[4]=-(he*(tn*dn-De*nn)-Ve*(Me*dn-ze*nn)+cn*(Me*De-ze*tn)),R[5]=$t*(tn*dn-De*nn)-Ve*(Zt*dn-de*nn)+cn*(Zt*De-de*tn),R[6]=-($t*(Me*dn-ze*nn)-he*(Zt*dn-de*nn)+cn*(Zt*ze-de*Me)),R[7]=$t*(Me*De-ze*tn)-he*(Zt*De-de*tn)+Ve*(Zt*ze-de*Me),R[8]=he*(ke*dn-De*fn)-Ve*(ce*dn-ze*fn)+cn*(ce*De-ze*ke),R[9]=-($t*(ke*dn-De*fn)-Ve*(me*dn-de*fn)+cn*(me*De-de*ke)),R[10]=$t*(ce*dn-ze*fn)-he*(me*dn-de*fn)+cn*(me*ze-de*ce),R[11]=-($t*(ce*De-ze*ke)-he*(me*De-de*ke)+Ve*(me*ze-de*ce)),R[12]=-(he*(ke*nn-tn*fn)-Ve*(ce*nn-Me*fn)+cn*(ce*tn-Me*ke)),R[13]=$t*(ke*nn-tn*fn)-Ve*(me*nn-Zt*fn)+cn*(me*tn-Zt*ke),R[14]=-($t*(ce*nn-Me*fn)-he*(me*nn-Zt*fn)+cn*(me*Me-Zt*ce)),R[15]=$t*(ce*tn-Me*ke)-he*(me*tn-Zt*ke)+Ve*(me*Me-Zt*ce),R}function $(R){var yt=R[0],$t=R[1],me=R[2],Zt=R[3],de=R[4],he=R[5],ce=R[6],Me=R[7],ze=R[8],Ve=R[9],ke=R[10],tn=R[11],De=R[12],cn=R[13],fn=R[14],nn=R[15];return(yt*he-$t*de)*(ke*nn-tn*fn)-(yt*ce-me*de)*(Ve*nn-tn*cn)+(yt*Me-Zt*de)*(Ve*fn-ke*cn)+($t*ce-me*he)*(ze*nn-tn*De)-($t*Me-Zt*he)*(ze*fn-ke*De)+(me*Me-Zt*ce)*(ze*cn-Ve*De)}function rt(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=yt[8],tn=yt[9],De=yt[10],cn=yt[11],fn=yt[12],nn=yt[13],dn=yt[14],Sn=yt[15],Pe=$t[0],le=$t[1],Le=$t[2],Be=$t[3];return R[0]=Pe*me+le*ce+Le*ke+Be*fn,R[1]=Pe*Zt+le*Me+Le*tn+Be*nn,R[2]=Pe*de+le*ze+Le*De+Be*dn,R[3]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[4],le=$t[5],Le=$t[6],Be=$t[7],R[4]=Pe*me+le*ce+Le*ke+Be*fn,R[5]=Pe*Zt+le*Me+Le*tn+Be*nn,R[6]=Pe*de+le*ze+Le*De+Be*dn,R[7]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[8],le=$t[9],Le=$t[10],Be=$t[11],R[8]=Pe*me+le*ce+Le*ke+Be*fn,R[9]=Pe*Zt+le*Me+Le*tn+Be*nn,R[10]=Pe*de+le*ze+Le*De+Be*dn,R[11]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[12],le=$t[13],Le=$t[14],Be=$t[15],R[12]=Pe*me+le*ce+Le*ke+Be*fn,R[13]=Pe*Zt+le*Me+Le*tn+Be*nn,R[14]=Pe*de+le*ze+Le*De+Be*dn,R[15]=Pe*he+le*Ve+Le*cn+Be*Sn,R}function ot(R,yt,$t){var me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn=$t[0],nn=$t[1],dn=$t[2];return yt===R?(R[12]=yt[0]*fn+yt[4]*nn+yt[8]*dn+yt[12],R[13]=yt[1]*fn+yt[5]*nn+yt[9]*dn+yt[13],R[14]=yt[2]*fn+yt[6]*nn+yt[10]*dn+yt[14],R[15]=yt[3]*fn+yt[7]*nn+yt[11]*dn+yt[15]):(me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=yt[8],tn=yt[9],De=yt[10],cn=yt[11],R[0]=me,R[1]=Zt,R[2]=de,R[3]=he,R[4]=ce,R[5]=Me,R[6]=ze,R[7]=Ve,R[8]=ke,R[9]=tn,R[10]=De,R[11]=cn,R[12]=me*fn+ce*nn+ke*dn+yt[12],R[13]=Zt*fn+Me*nn+tn*dn+yt[13],R[14]=de*fn+ze*nn+De*dn+yt[14],R[15]=he*fn+Ve*nn+cn*dn+yt[15]),R}function At(R,yt,$t){var me=$t[0],Zt=$t[1],de=$t[2];return R[0]=yt[0]*me,R[1]=yt[1]*me,R[2]=yt[2]*me,R[3]=yt[3]*me,R[4]=yt[4]*Zt,R[5]=yt[5]*Zt,R[6]=yt[6]*Zt,R[7]=yt[7]*Zt,R[8]=yt[8]*de,R[9]=yt[9]*de,R[10]=yt[10]*de,R[11]=yt[11]*de,R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15],R}function gt(R,yt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn,nn,dn,Sn,Pe,le,Le,Be,en,sn,Ue,ln,mn,Wn=me[0],An=me[1],In=me[2],lr=Math.hypot(Wn,An,In);return lr<f.b?null:(Wn*=lr=1/lr,An*=lr,In*=lr,Zt=Math.sin($t),he=1-(de=Math.cos($t)),ce=yt[0],Me=yt[1],ze=yt[2],Ve=yt[3],ke=yt[4],tn=yt[5],De=yt[6],cn=yt[7],fn=yt[8],nn=yt[9],dn=yt[10],Sn=yt[11],Pe=Wn*Wn*he+de,le=An*Wn*he+In*Zt,Le=In*Wn*he-An*Zt,Be=Wn*An*he-In*Zt,en=An*An*he+de,sn=In*An*he+Wn*Zt,Ue=Wn*In*he+An*Zt,ln=An*In*he-Wn*Zt,mn=In*In*he+de,R[0]=ce*Pe+ke*le+fn*Le,R[1]=Me*Pe+tn*le+nn*Le,R[2]=ze*Pe+De*le+dn*Le,R[3]=Ve*Pe+cn*le+Sn*Le,R[4]=ce*Be+ke*en+fn*sn,R[5]=Me*Be+tn*en+nn*sn,R[6]=ze*Be+De*en+dn*sn,R[7]=Ve*Be+cn*en+Sn*sn,R[8]=ce*Ue+ke*ln+fn*mn,R[9]=Me*Ue+tn*ln+nn*mn,R[10]=ze*Ue+De*ln+dn*mn,R[11]=Ve*Ue+cn*ln+Sn*mn,yt!==R&&(R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15]),R)}function mt(R,yt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=yt[4],he=yt[5],ce=yt[6],Me=yt[7],ze=yt[8],Ve=yt[9],ke=yt[10],tn=yt[11];return yt!==R&&(R[0]=yt[0],R[1]=yt[1],R[2]=yt[2],R[3]=yt[3],R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15]),R[4]=de*Zt+ze*me,R[5]=he*Zt+Ve*me,R[6]=ce*Zt+ke*me,R[7]=Me*Zt+tn*me,R[8]=ze*Zt-de*me,R[9]=Ve*Zt-he*me,R[10]=ke*Zt-ce*me,R[11]=tn*Zt-Me*me,R}function bt(R,yt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=yt[0],he=yt[1],ce=yt[2],Me=yt[3],ze=yt[8],Ve=yt[9],ke=yt[10],tn=yt[11];return yt!==R&&(R[4]=yt[4],R[5]=yt[5],R[6]=yt[6],R[7]=yt[7],R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15]),R[0]=de*Zt-ze*me,R[1]=he*Zt-Ve*me,R[2]=ce*Zt-ke*me,R[3]=Me*Zt-tn*me,R[8]=de*me+ze*Zt,R[9]=he*me+Ve*Zt,R[10]=ce*me+ke*Zt,R[11]=Me*me+tn*Zt,R}function jt(R,yt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=yt[0],he=yt[1],ce=yt[2],Me=yt[3],ze=yt[4],Ve=yt[5],ke=yt[6],tn=yt[7];return yt!==R&&(R[8]=yt[8],R[9]=yt[9],R[10]=yt[10],R[11]=yt[11],R[12]=yt[12],R[13]=yt[13],R[14]=yt[14],R[15]=yt[15]),R[0]=de*Zt+ze*me,R[1]=he*Zt+Ve*me,R[2]=ce*Zt+ke*me,R[3]=Me*Zt+tn*me,R[4]=ze*Zt-de*me,R[5]=Ve*Zt-he*me,R[6]=ke*Zt-ce*me,R[7]=tn*Zt-Me*me,R}function Dt(R,yt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=yt[0],R[13]=yt[1],R[14]=yt[2],R[15]=1,R}function Ut(R,yt){return R[0]=yt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=yt[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=yt[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Ct(R,yt,$t){var me,Zt,de,he=$t[0],ce=$t[1],Me=$t[2],ze=Math.hypot(he,ce,Me);return ze<f.b?null:(he*=ze=1/ze,ce*=ze,Me*=ze,me=Math.sin(yt),de=1-(Zt=Math.cos(yt)),R[0]=he*he*de+Zt,R[1]=ce*he*de+Me*me,R[2]=Me*he*de-ce*me,R[3]=0,R[4]=he*ce*de-Me*me,R[5]=ce*ce*de+Zt,R[6]=Me*ce*de+he*me,R[7]=0,R[8]=he*Me*de+ce*me,R[9]=ce*Me*de-he*me,R[10]=Me*Me*de+Zt,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}function Vt(R,yt){var $t=Math.sin(yt),me=Math.cos(yt);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=me,R[6]=$t,R[7]=0,R[8]=0,R[9]=-$t,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Ht(R,yt){var $t=Math.sin(yt),me=Math.cos(yt);return R[0]=me,R[1]=0,R[2]=-$t,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=$t,R[9]=0,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function re(R,yt){var $t=Math.sin(yt),me=Math.cos(yt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=0,R[4]=-$t,R[5]=me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function pe(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=me+me,Me=Zt+Zt,ze=de+de,Ve=me*ce,ke=me*Me,tn=me*ze,De=Zt*Me,cn=Zt*ze,fn=de*ze,nn=he*ce,dn=he*Me,Sn=he*ze;return R[0]=1-(De+fn),R[1]=ke+Sn,R[2]=tn-dn,R[3]=0,R[4]=ke-Sn,R[5]=1-(Ve+fn),R[6]=cn+nn,R[7]=0,R[8]=tn+dn,R[9]=cn-nn,R[10]=1-(Ve+De),R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function ye(R,yt){var $t=new f.a(3),me=-yt[0],Zt=-yt[1],de=-yt[2],he=yt[3],ce=yt[4],Me=yt[5],ze=yt[6],Ve=yt[7],ke=me*me+Zt*Zt+de*de+he*he;return ke>0?($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt)/ke,$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de)/ke,$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)/ke):($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt),$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de),$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)),pe(R,yt,$t),R}function we(R,yt){return R[0]=yt[12],R[1]=yt[13],R[2]=yt[14],R}function Ne(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[4],he=yt[5],ce=yt[6],Me=yt[8],ze=yt[9],Ve=yt[10];return R[0]=Math.hypot($t,me,Zt),R[1]=Math.hypot(de,he,ce),R[2]=Math.hypot(Me,ze,Ve),R}function Ke(R,yt){var $t=new f.a(3);Ne($t,yt);var me=1/$t[0],Zt=1/$t[1],de=1/$t[2],he=yt[0]*me,ce=yt[1]*Zt,Me=yt[2]*de,ze=yt[4]*me,Ve=yt[5]*Zt,ke=yt[6]*de,tn=yt[8]*me,De=yt[9]*Zt,cn=yt[10]*de,fn=he+Ve+cn,nn=0;return fn>0?(nn=2*Math.sqrt(fn+1),R[3]=.25*nn,R[0]=(ke-De)/nn,R[1]=(tn-Me)/nn,R[2]=(ce-ze)/nn):he>Ve&&he>cn?(nn=2*Math.sqrt(1+he-Ve-cn),R[3]=(ke-De)/nn,R[0]=.25*nn,R[1]=(ce+ze)/nn,R[2]=(tn+Me)/nn):Ve>cn?(nn=2*Math.sqrt(1+Ve-he-cn),R[3]=(tn-Me)/nn,R[0]=(ce+ze)/nn,R[1]=.25*nn,R[2]=(ke+De)/nn):(nn=2*Math.sqrt(1+cn-he-Ve),R[3]=(ce-ze)/nn,R[0]=(tn+Me)/nn,R[1]=(ke+De)/nn,R[2]=.25*nn),R}function pn(R,yt,$t,me){var Zt=yt[0],de=yt[1],he=yt[2],ce=yt[3],Me=Zt+Zt,ze=de+de,Ve=he+he,ke=Zt*Me,tn=Zt*ze,De=Zt*Ve,cn=de*ze,fn=de*Ve,nn=he*Ve,dn=ce*Me,Sn=ce*ze,Pe=ce*Ve,le=me[0],Le=me[1],Be=me[2];return R[0]=(1-(cn+nn))*le,R[1]=(tn+Pe)*le,R[2]=(De-Sn)*le,R[3]=0,R[4]=(tn-Pe)*Le,R[5]=(1-(ke+nn))*Le,R[6]=(fn+dn)*Le,R[7]=0,R[8]=(De+Sn)*Be,R[9]=(fn-dn)*Be,R[10]=(1-(ke+cn))*Be,R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function hn(R,yt,$t,me,Zt){var de=yt[0],he=yt[1],ce=yt[2],Me=yt[3],ze=de+de,Ve=he+he,ke=ce+ce,tn=de*ze,De=de*Ve,cn=de*ke,fn=he*Ve,nn=he*ke,dn=ce*ke,Sn=Me*ze,Pe=Me*Ve,le=Me*ke,Le=me[0],Be=me[1],en=me[2],sn=Zt[0],Ue=Zt[1],ln=Zt[2],mn=(1-(fn+dn))*Le,Wn=(De+le)*Le,An=(cn-Pe)*Le,In=(De-le)*Be,lr=(1-(tn+dn))*Be,Hr=(nn+Sn)*Be,Gr=(cn+Pe)*en,Mr=(nn-Sn)*en,oi=(1-(tn+fn))*en;return R[0]=mn,R[1]=Wn,R[2]=An,R[3]=0,R[4]=In,R[5]=lr,R[6]=Hr,R[7]=0,R[8]=Gr,R[9]=Mr,R[10]=oi,R[11]=0,R[12]=$t[0]+sn-(mn*sn+In*Ue+Gr*ln),R[13]=$t[1]+Ue-(Wn*sn+lr*Ue+Mr*ln),R[14]=$t[2]+ln-(An*sn+Hr*Ue+oi*ln),R[15]=1,R}function kn(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,fn=de*he,nn=de*ce,dn=de*Me;return R[0]=1-ke-cn,R[1]=Ve+dn,R[2]=tn-nn,R[3]=0,R[4]=Ve-dn,R[5]=1-ze-cn,R[6]=De+fn,R[7]=0,R[8]=tn+nn,R[9]=De-fn,R[10]=1-ze-ke,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Tn(R,yt,$t,me,Zt,de,he){var ce=1/($t-yt),Me=1/(Zt-me),ze=1/(de-he);return R[0]=2*de*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*de*Me,R[6]=0,R[7]=0,R[8]=($t+yt)*ce,R[9]=(Zt+me)*Me,R[10]=(he+de)*ze,R[11]=-1,R[12]=0,R[13]=0,R[14]=he*de*2*ze,R[15]=0,R}function Rn(R,yt,$t,me,Zt){var de,he=1/Math.tan(yt/2);return R[0]=he/$t,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=he,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,Zt!=null&&Zt!==1/0?(de=1/(me-Zt),R[10]=(Zt+me)*de,R[14]=2*Zt*me*de):(R[10]=-1,R[14]=-2*me),R}function Mn(R,yt,$t,me){var Zt=Math.tan(yt.upDegrees*Math.PI/180),de=Math.tan(yt.downDegrees*Math.PI/180),he=Math.tan(yt.leftDegrees*Math.PI/180),ce=Math.tan(yt.rightDegrees*Math.PI/180),Me=2/(he+ce),ze=2/(Zt+de);return R[0]=Me,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=ze,R[6]=0,R[7]=0,R[8]=-(he-ce)*Me*.5,R[9]=(Zt-de)*ze*.5,R[10]=me/($t-me),R[11]=-1,R[12]=0,R[13]=0,R[14]=me*$t/($t-me),R[15]=0,R}function Cn(R,yt,$t,me,Zt,de,he){var ce=1/(yt-$t),Me=1/(me-Zt),ze=1/(de-he);return R[0]=-2*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*Me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*ze,R[11]=0,R[12]=(yt+$t)*ce,R[13]=(Zt+me)*Me,R[14]=(he+de)*ze,R[15]=1,R}function _n(R,yt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn=yt[0],fn=yt[1],nn=yt[2],dn=me[0],Sn=me[1],Pe=me[2],le=$t[0],Le=$t[1],Be=$t[2];return Math.abs(cn-le)<f.b&&Math.abs(fn-Le)<f.b&&Math.abs(nn-Be)<f.b?h(R):(Ve=cn-le,ke=fn-Le,tn=nn-Be,Zt=Sn*(tn*=De=1/Math.hypot(Ve,ke,tn))-Pe*(ke*=De),de=Pe*(Ve*=De)-dn*tn,he=dn*ke-Sn*Ve,(De=Math.hypot(Zt,de,he))?(Zt*=De=1/De,de*=De,he*=De):(Zt=0,de=0,he=0),ce=ke*he-tn*de,Me=tn*Zt-Ve*he,ze=Ve*de-ke*Zt,(De=Math.hypot(ce,Me,ze))?(ce*=De=1/De,Me*=De,ze*=De):(ce=0,Me=0,ze=0),R[0]=Zt,R[1]=ce,R[2]=Ve,R[3]=0,R[4]=de,R[5]=Me,R[6]=ke,R[7]=0,R[8]=he,R[9]=ze,R[10]=tn,R[11]=0,R[12]=-(Zt*cn+de*fn+he*nn),R[13]=-(ce*cn+Me*fn+ze*nn),R[14]=-(Ve*cn+ke*fn+tn*nn),R[15]=1,R)}function Kn(R,yt,$t,me){var Zt=yt[0],de=yt[1],he=yt[2],ce=me[0],Me=me[1],ze=me[2],Ve=Zt-$t[0],ke=de-$t[1],tn=he-$t[2],De=Ve*Ve+ke*ke+tn*tn;De>0&&(Ve*=De=1/Math.sqrt(De),ke*=De,tn*=De);var cn=Me*tn-ze*ke,fn=ze*Ve-ce*tn,nn=ce*ke-Me*Ve;return(De=cn*cn+fn*fn+nn*nn)>0&&(cn*=De=1/Math.sqrt(De),fn*=De,nn*=De),R[0]=cn,R[1]=fn,R[2]=nn,R[3]=0,R[4]=ke*nn-tn*fn,R[5]=tn*cn-Ve*nn,R[6]=Ve*fn-ke*cn,R[7]=0,R[8]=Ve,R[9]=ke,R[10]=tn,R[11]=0,R[12]=Zt,R[13]=de,R[14]=he,R[15]=1,R}function tr(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}function or(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15])}function nr(R,yt,$t){return R[0]=yt[0]+$t[0],R[1]=yt[1]+$t[1],R[2]=yt[2]+$t[2],R[3]=yt[3]+$t[3],R[4]=yt[4]+$t[4],R[5]=yt[5]+$t[5],R[6]=yt[6]+$t[6],R[7]=yt[7]+$t[7],R[8]=yt[8]+$t[8],R[9]=yt[9]+$t[9],R[10]=yt[10]+$t[10],R[11]=yt[11]+$t[11],R[12]=yt[12]+$t[12],R[13]=yt[13]+$t[13],R[14]=yt[14]+$t[14],R[15]=yt[15]+$t[15],R}function er(R,yt,$t){return R[0]=yt[0]-$t[0],R[1]=yt[1]-$t[1],R[2]=yt[2]-$t[2],R[3]=yt[3]-$t[3],R[4]=yt[4]-$t[4],R[5]=yt[5]-$t[5],R[6]=yt[6]-$t[6],R[7]=yt[7]-$t[7],R[8]=yt[8]-$t[8],R[9]=yt[9]-$t[9],R[10]=yt[10]-$t[10],R[11]=yt[11]-$t[11],R[12]=yt[12]-$t[12],R[13]=yt[13]-$t[13],R[14]=yt[14]-$t[14],R[15]=yt[15]-$t[15],R}function Sr(R,yt,$t){return R[0]=yt[0]*$t,R[1]=yt[1]*$t,R[2]=yt[2]*$t,R[3]=yt[3]*$t,R[4]=yt[4]*$t,R[5]=yt[5]*$t,R[6]=yt[6]*$t,R[7]=yt[7]*$t,R[8]=yt[8]*$t,R[9]=yt[9]*$t,R[10]=yt[10]*$t,R[11]=yt[11]*$t,R[12]=yt[12]*$t,R[13]=yt[13]*$t,R[14]=yt[14]*$t,R[15]=yt[15]*$t,R}function Vr(R,yt,$t,me){return R[0]=yt[0]+$t[0]*me,R[1]=yt[1]+$t[1]*me,R[2]=yt[2]+$t[2]*me,R[3]=yt[3]+$t[3]*me,R[4]=yt[4]+$t[4]*me,R[5]=yt[5]+$t[5]*me,R[6]=yt[6]+$t[6]*me,R[7]=yt[7]+$t[7]*me,R[8]=yt[8]+$t[8]*me,R[9]=yt[9]+$t[9]*me,R[10]=yt[10]+$t[10]*me,R[11]=yt[11]+$t[11]*me,R[12]=yt[12]+$t[12]*me,R[13]=yt[13]+$t[13]*me,R[14]=yt[14]+$t[14]*me,R[15]=yt[15]+$t[15]*me,R}function ti(R,yt){return R[0]===yt[0]&&R[1]===yt[1]&&R[2]===yt[2]&&R[3]===yt[3]&&R[4]===yt[4]&&R[5]===yt[5]&&R[6]===yt[6]&&R[7]===yt[7]&&R[8]===yt[8]&&R[9]===yt[9]&&R[10]===yt[10]&&R[11]===yt[11]&&R[12]===yt[12]&&R[13]===yt[13]&&R[14]===yt[14]&&R[15]===yt[15]}function hi(R,yt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=R[4],ce=R[5],Me=R[6],ze=R[7],Ve=R[8],ke=R[9],tn=R[10],De=R[11],cn=R[12],fn=R[13],nn=R[14],dn=R[15],Sn=yt[0],Pe=yt[1],le=yt[2],Le=yt[3],Be=yt[4],en=yt[5],sn=yt[6],Ue=yt[7],ln=yt[8],mn=yt[9],Wn=yt[10],An=yt[11],In=yt[12],lr=yt[13],Hr=yt[14],Gr=yt[15];return Math.abs($t-Sn)<=f.b*Math.max(1,Math.abs($t),Math.abs(Sn))&&Math.abs(me-Pe)<=f.b*Math.max(1,Math.abs(me),Math.abs(Pe))&&Math.abs(Zt-le)<=f.b*Math.max(1,Math.abs(Zt),Math.abs(le))&&Math.abs(de-Le)<=f.b*Math.max(1,Math.abs(de),Math.abs(Le))&&Math.abs(he-Be)<=f.b*Math.max(1,Math.abs(he),Math.abs(Be))&&Math.abs(ce-en)<=f.b*Math.max(1,Math.abs(ce),Math.abs(en))&&Math.abs(Me-sn)<=f.b*Math.max(1,Math.abs(Me),Math.abs(sn))&&Math.abs(ze-Ue)<=f.b*Math.max(1,Math.abs(ze),Math.abs(Ue))&&Math.abs(Ve-ln)<=f.b*Math.max(1,Math.abs(Ve),Math.abs(ln))&&Math.abs(ke-mn)<=f.b*Math.max(1,Math.abs(ke),Math.abs(mn))&&Math.abs(tn-Wn)<=f.b*Math.max(1,Math.abs(tn),Math.abs(Wn))&&Math.abs(De-An)<=f.b*Math.max(1,Math.abs(De),Math.abs(An))&&Math.abs(cn-In)<=f.b*Math.max(1,Math.abs(cn),Math.abs(In))&&Math.abs(fn-lr)<=f.b*Math.max(1,Math.abs(fn),Math.abs(lr))&&Math.abs(nn-Hr)<=f.b*Math.max(1,Math.abs(nn),Math.abs(Hr))&&Math.abs(dn-Gr)<=f.b*Math.max(1,Math.abs(dn),Math.abs(Gr))}var Fi=rt,to=er,si=e(40);function Ci(){var R=new f.a(4);return f.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}function _i(R){var yt=new f.a(4);return yt[0]=R[0],yt[1]=R[1],yt[2]=R[2],yt[3]=R[3],yt}function Li(R,yt,$t,me){var Zt=new f.a(4);return Zt[0]=R,Zt[1]=yt,Zt[2]=$t,Zt[3]=me,Zt}function Vi(R,yt){return R[0]=yt[0],R[1]=yt[1],R[2]=yt[2],R[3]=yt[3],R}function ro(R,yt,$t,me,Zt){return R[0]=yt,R[1]=$t,R[2]=me,R[3]=Zt,R}function jr(R,yt,$t){return R[0]=yt[0]+$t[0],R[1]=yt[1]+$t[1],R[2]=yt[2]+$t[2],R[3]=yt[3]+$t[3],R}function Ji(R,yt,$t){return R[0]=yt[0]-$t[0],R[1]=yt[1]-$t[1],R[2]=yt[2]-$t[2],R[3]=yt[3]-$t[3],R}function pr(R,yt,$t){return R[0]=yt[0]*$t[0],R[1]=yt[1]*$t[1],R[2]=yt[2]*$t[2],R[3]=yt[3]*$t[3],R}function Yr(R,yt,$t){return R[0]=yt[0]/$t[0],R[1]=yt[1]/$t[1],R[2]=yt[2]/$t[2],R[3]=yt[3]/$t[3],R}function Br(R,yt){return R[0]=Math.ceil(yt[0]),R[1]=Math.ceil(yt[1]),R[2]=Math.ceil(yt[2]),R[3]=Math.ceil(yt[3]),R}function Nr(R,yt){return R[0]=Math.floor(yt[0]),R[1]=Math.floor(yt[1]),R[2]=Math.floor(yt[2]),R[3]=Math.floor(yt[3]),R}function Xr(R,yt,$t){return R[0]=Math.min(yt[0],$t[0]),R[1]=Math.min(yt[1],$t[1]),R[2]=Math.min(yt[2],$t[2]),R[3]=Math.min(yt[3],$t[3]),R}function Kr(R,yt,$t){return R[0]=Math.max(yt[0],$t[0]),R[1]=Math.max(yt[1],$t[1]),R[2]=Math.max(yt[2],$t[2]),R[3]=Math.max(yt[3],$t[3]),R}function ni(R,yt){return R[0]=Math.round(yt[0]),R[1]=Math.round(yt[1]),R[2]=Math.round(yt[2]),R[3]=Math.round(yt[3]),R}function fi(R,yt,$t){return R[0]=yt[0]*$t,R[1]=yt[1]*$t,R[2]=yt[2]*$t,R[3]=yt[3]*$t,R}function $r(R,yt,$t,me){return R[0]=yt[0]+$t[0]*me,R[1]=yt[1]+$t[1]*me,R[2]=yt[2]+$t[2]*me,R[3]=yt[3]+$t[3]*me,R}function ci(R,yt){var $t=yt[0]-R[0],me=yt[1]-R[1],Zt=yt[2]-R[2],de=yt[3]-R[3];return Math.hypot($t,me,Zt,de)}function Qr(R,yt){var $t=yt[0]-R[0],me=yt[1]-R[1],Zt=yt[2]-R[2],de=yt[3]-R[3];return $t*$t+me*me+Zt*Zt+de*de}function gi(R){var yt=R[0],$t=R[1],me=R[2],Zt=R[3];return Math.hypot(yt,$t,me,Zt)}function Oi(R){var yt=R[0],$t=R[1],me=R[2],Zt=R[3];return yt*yt+$t*$t+me*me+Zt*Zt}function bi(R,yt){return R[0]=-yt[0],R[1]=-yt[1],R[2]=-yt[2],R[3]=-yt[3],R}function zi(R,yt){return R[0]=1/yt[0],R[1]=1/yt[1],R[2]=1/yt[2],R[3]=1/yt[3],R}function Qi(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=$t*$t+me*me+Zt*Zt+de*de;return he>0&&(he=1/Math.sqrt(he)),R[0]=$t*he,R[1]=me*he,R[2]=Zt*he,R[3]=de*he,R}function io(R,yt){return R[0]*yt[0]+R[1]*yt[1]+R[2]*yt[2]+R[3]*yt[3]}function Wi(R,yt,$t,me){var Zt=$t[0]*me[1]-$t[1]*me[0],de=$t[0]*me[2]-$t[2]*me[0],he=$t[0]*me[3]-$t[3]*me[0],ce=$t[1]*me[2]-$t[2]*me[1],Me=$t[1]*me[3]-$t[3]*me[1],ze=$t[2]*me[3]-$t[3]*me[2],Ve=yt[0],ke=yt[1],tn=yt[2],De=yt[3];return R[0]=ke*ze-tn*Me+De*ce,R[1]=-Ve*ze+tn*he-De*de,R[2]=Ve*Me-ke*he+De*Zt,R[3]=-Ve*ce+ke*de-tn*Zt,R}function Zi(R,yt,$t,me){var Zt=yt[0],de=yt[1],he=yt[2],ce=yt[3];return R[0]=Zt+me*($t[0]-Zt),R[1]=de+me*($t[1]-de),R[2]=he+me*($t[2]-he),R[3]=ce+me*($t[3]-ce),R}function Pi(R,yt){var $t,me,Zt,de,he,ce;yt=yt||1;do he=($t=2*f.c()-1)*$t+(me=2*f.c()-1)*me;while(he>=1);do ce=(Zt=2*f.c()-1)*Zt+(de=2*f.c()-1)*de;while(ce>=1);var Me=Math.sqrt((1-he)/ce);return R[0]=yt*$t,R[1]=yt*me,R[2]=yt*Zt*Me,R[3]=yt*de*Me,R}function no(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3];return R[0]=$t[0]*me+$t[4]*Zt+$t[8]*de+$t[12]*he,R[1]=$t[1]*me+$t[5]*Zt+$t[9]*de+$t[13]*he,R[2]=$t[2]*me+$t[6]*Zt+$t[10]*de+$t[14]*he,R[3]=$t[3]*me+$t[7]*Zt+$t[11]*de+$t[15]*he,R}function Mo(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=$t[0],ce=$t[1],Me=$t[2],ze=$t[3],Ve=ze*me+ce*de-Me*Zt,ke=ze*Zt+Me*me-he*de,tn=ze*de+he*Zt-ce*me,De=-he*me-ce*Zt-Me*de;return R[0]=Ve*ze+De*-he+ke*-Me-tn*-ce,R[1]=ke*ze+De*-ce+tn*-he-Ve*-Me,R[2]=tn*ze+De*-Me+Ve*-ce-ke*-he,R[3]=yt[3],R}function ao(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=0,R}function uo(R){return"vec4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}function xo(R,yt){return R[0]===yt[0]&&R[1]===yt[1]&&R[2]===yt[2]&&R[3]===yt[3]}function oe(R,yt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=yt[0],ce=yt[1],Me=yt[2],ze=yt[3];return Math.abs($t-he)<=f.b*Math.max(1,Math.abs($t),Math.abs(he))&&Math.abs(me-ce)<=f.b*Math.max(1,Math.abs(me),Math.abs(ce))&&Math.abs(Zt-Me)<=f.b*Math.max(1,Math.abs(Zt),Math.abs(Me))&&Math.abs(de-ze)<=f.b*Math.max(1,Math.abs(de),Math.abs(ze))}var Kt,te=Ji,Oe=pr,Qe=Yr,On=ci,Vn=Qr,Xn=gi,$e=Oi,rn=(Kt=Ci(),function(R,yt,$t,me,Zt,de){var he,ce;for(yt||(yt=4),$t||($t=0),ce=me?Math.min(me*yt+$t,R.length):R.length,he=$t;he<ce;he+=yt)Kt[0]=R[he],Kt[1]=R[he+1],Kt[2]=R[he+2],Kt[3]=R[he+3],Zt(Kt,Kt,de),R[he]=Kt[0],R[he+1]=Kt[1],R[he+2]=Kt[2],R[he+3]=Kt[3];return R});function on(){var R=new f.a(4);return f.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R[3]=1,R}function $n(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=1,R}function vr(R,yt,$t){$t*=.5;var me=Math.sin($t);return R[0]=me*yt[0],R[1]=me*yt[1],R[2]=me*yt[2],R[3]=Math.cos($t),R}function ar(R,yt){var $t=2*Math.acos(yt[3]),me=Math.sin($t/2);return me>f.b?(R[0]=yt[0]/me,R[1]=yt[1]/me,R[2]=yt[2]/me):(R[0]=1,R[1]=0,R[2]=0),$t}function rr(R,yt){var $t=un(R,yt);return Math.acos(2*$t*$t-1)}function Fr(R,yt,$t){var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=$t[0],Me=$t[1],ze=$t[2],Ve=$t[3];return R[0]=me*Ve+he*ce+Zt*ze-de*Me,R[1]=Zt*Ve+he*Me+de*ce-me*ze,R[2]=de*Ve+he*ze+me*Me-Zt*ce,R[3]=he*Ve-me*ce-Zt*Me-de*ze,R}function Ar(R,yt,$t){$t*=.5;var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+he*ce,R[1]=Zt*Me+de*ce,R[2]=de*Me-Zt*ce,R[3]=he*Me-me*ce,R}function wr(R,yt,$t){$t*=.5;var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me-de*ce,R[1]=Zt*Me+he*ce,R[2]=de*Me+me*ce,R[3]=he*Me-Zt*ce,R}function xr(R,yt,$t){$t*=.5;var me=yt[0],Zt=yt[1],de=yt[2],he=yt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+Zt*ce,R[1]=Zt*Me-me*ce,R[2]=de*Me+he*ce,R[3]=he*Me-de*ce,R}function Er(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2];return R[0]=$t,R[1]=me,R[2]=Zt,R[3]=Math.sqrt(Math.abs(1-$t*$t-me*me-Zt*Zt)),R}function Ir(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=Math.exp(de),Me=he>0?ce*Math.sin(he)/he:0;return R[0]=$t*Me,R[1]=me*Me,R[2]=Zt*Me,R[3]=ce*Math.cos(he),R}function Lr(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=he>0?Math.atan2(he,de)/he:0;return R[0]=$t*ce,R[1]=me*ce,R[2]=Zt*ce,R[3]=.5*Math.log($t*$t+me*me+Zt*Zt+de*de),R}function Pr(R,yt,$t){return Lr(R,yt),Ee(R,R,$t),Ir(R,R),R}function Dr(R,yt,$t,me){var Zt,de,he,ce,Me,ze=yt[0],Ve=yt[1],ke=yt[2],tn=yt[3],De=$t[0],cn=$t[1],fn=$t[2],nn=$t[3];return(de=ze*De+Ve*cn+ke*fn+tn*nn)<0&&(de=-de,De=-De,cn=-cn,fn=-fn,nn=-nn),1-de>f.b?(Zt=Math.acos(de),he=Math.sin(Zt),ce=Math.sin((1-me)*Zt)/he,Me=Math.sin(me*Zt)/he):(ce=1-me,Me=me),R[0]=ce*ze+Me*De,R[1]=ce*Ve+Me*cn,R[2]=ce*ke+Me*fn,R[3]=ce*tn+Me*nn,R}function ri(R){var yt=f.c(),$t=f.c(),me=f.c(),Zt=Math.sqrt(1-yt),de=Math.sqrt(yt);return R[0]=Zt*Math.sin(2*Math.PI*$t),R[1]=Zt*Math.cos(2*Math.PI*$t),R[2]=de*Math.sin(2*Math.PI*me),R[3]=de*Math.cos(2*Math.PI*me),R}function vi(R,yt){var $t=yt[0],me=yt[1],Zt=yt[2],de=yt[3],he=$t*$t+me*me+Zt*Zt+de*de,ce=he?1/he:0;return R[0]=-$t*ce,R[1]=-me*ce,R[2]=-Zt*ce,R[3]=de*ce,R}function ii(R,yt){return R[0]=-yt[0],R[1]=-yt[1],R[2]=-yt[2],R[3]=yt[3],R}function Si(R,yt){var $t,me=yt[0]+yt[4]+yt[8];if(me>0)$t=Math.sqrt(me+1),R[3]=.5*$t,$t=.5/$t,R[0]=(yt[5]-yt[7])*$t,R[1]=(yt[6]-yt[2])*$t,R[2]=(yt[1]-yt[3])*$t;else{var Zt=0;yt[4]>yt[0]&&(Zt=1),yt[8]>yt[3*Zt+Zt]&&(Zt=2);var de=(Zt+1)%3,he=(Zt+2)%3;$t=Math.sqrt(yt[3*Zt+Zt]-yt[3*de+de]-yt[3*he+he]+1),R[Zt]=.5*$t,$t=.5/$t,R[3]=(yt[3*de+he]-yt[3*he+de])*$t,R[de]=(yt[3*de+Zt]+yt[3*Zt+de])*$t,R[he]=(yt[3*he+Zt]+yt[3*Zt+he])*$t}return R}function Ui(R,yt,$t,me){var Zt=.5*Math.PI/180;yt*=Zt,$t*=Zt,me*=Zt;var de=Math.sin(yt),he=Math.cos(yt),ce=Math.sin($t),Me=Math.cos($t),ze=Math.sin(me),Ve=Math.cos(me);return R[0]=de*Me*Ve-he*ce*ze,R[1]=he*ce*Ve+de*Me*ze,R[2]=he*Me*ze-de*ce*Ve,R[3]=he*Me*Ve+de*ce*ze,R}function Yi(R){return"quat("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}var Bi,Di,ve,F,B,Z,ut=_i,Bt=Li,Jt=Vi,ie=ro,se=jr,Te=Fr,Ee=fi,un=io,xn=Zi,zt=gi,Yt=zt,Se=Oi,Wt=Se,ue=Qi,vn=xo,Dn=oe,zn=(Bi=si.create(),Di=si.fromValues(1,0,0),ve=si.fromValues(0,1,0),function(R,yt,$t){var me=si.dot(yt,$t);return me<-.999999?(si.cross(Bi,Di,yt),si.len(Bi)<1e-6&&si.cross(Bi,ve,yt),si.normalize(Bi,Bi),vr(R,Bi,Math.PI),R):me>.999999?(R[0]=0,R[1]=0,R[2]=0,R[3]=1,R):(si.cross(Bi,yt,$t),R[0]=Bi[0],R[1]=Bi[1],R[2]=Bi[2],R[3]=1+me,ue(R,R))}),Gn=(F=on(),B=on(),function(R,yt,$t,me,Zt,de){return Dr(F,yt,Zt,de),Dr(B,$t,me,de),Dr(R,F,B,2*de*(1-de)),R}),Ze=(Z=M(),function(R,yt,$t,me){return Z[0]=$t[0],Z[3]=$t[1],Z[6]=$t[2],Z[1]=me[0],Z[4]=me[1],Z[7]=me[2],Z[2]=-yt[0],Z[5]=-yt[1],Z[8]=-yt[2],ue(R,Si(R,Z))}),Ce=e(80)},function(a,A){a.exports=function(e,i,v){return i in e?Object.defineProperty(e,i,{value:v,enumerable:!0,configurable:!0,writable:!0}):e[i]=v,e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.METADATA_KEY=void 0;var i=e(32);A.METADATA_KEY=i;var v=e(446);Object.defineProperty(A,"Container",{enumerable:!0,get:function(){return v.Container}});var b=e(55);Object.defineProperty(A,"BindingScopeEnum",{enumerable:!0,get:function(){return b.BindingScopeEnum}}),Object.defineProperty(A,"BindingTypeEnum",{enumerable:!0,get:function(){return b.BindingTypeEnum}}),Object.defineProperty(A,"TargetTypeEnum",{enumerable:!0,get:function(){return b.TargetTypeEnum}});var S=e(462);Object.defineProperty(A,"AsyncContainerModule",{enumerable:!0,get:function(){return S.AsyncContainerModule}}),Object.defineProperty(A,"ContainerModule",{enumerable:!0,get:function(){return S.ContainerModule}});var f=e(463);Object.defineProperty(A,"injectable",{enumerable:!0,get:function(){return f.injectable}});var M=e(464);Object.defineProperty(A,"tagged",{enumerable:!0,get:function(){return M.tagged}});var I=e(465);Object.defineProperty(A,"named",{enumerable:!0,get:function(){return I.named}});var y=e(222);Object.defineProperty(A,"inject",{enumerable:!0,get:function(){return y.inject}}),Object.defineProperty(A,"LazyServiceIdentifer",{enumerable:!0,get:function(){return y.LazyServiceIdentifer}});var n=e(466);Object.defineProperty(A,"optional",{enumerable:!0,get:function(){return n.optional}});var s=e(467);Object.defineProperty(A,"unmanaged",{enumerable:!0,get:function(){return s.unmanaged}});var d=e(468);Object.defineProperty(A,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var E=e(469);Object.defineProperty(A,"targetName",{enumerable:!0,get:function(){return E.targetName}});var O=e(470);Object.defineProperty(A,"postConstruct",{enumerable:!0,get:function(){return O.postConstruct}});var C=e(220);Object.defineProperty(A,"MetadataReader",{enumerable:!0,get:function(){return C.MetadataReader}});var p=e(67);Object.defineProperty(A,"id",{enumerable:!0,get:function(){return p.id}});var x=e(59);Object.defineProperty(A,"decorate",{enumerable:!0,get:function(){return x.decorate}});var T=e(225);Object.defineProperty(A,"traverseAncerstors",{enumerable:!0,get:function(){return T.traverseAncerstors}}),Object.defineProperty(A,"taggedConstraint",{enumerable:!0,get:function(){return T.taggedConstraint}}),Object.defineProperty(A,"namedConstraint",{enumerable:!0,get:function(){return T.namedConstraint}}),Object.defineProperty(A,"typeConstraint",{enumerable:!0,get:function(){return T.typeConstraint}});var N=e(88);Object.defineProperty(A,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return N.getServiceIdentifierAsString}});var Y=e(471);Object.defineProperty(A,"multiBindToService",{enumerable:!0,get:function(){return Y.multiBindToService}})},function(a,A,e){"use strict";e.d(A,"i",function(){return jt}),e.d(A,"h",function(){return Er}),e.d(A,"d",function(){return Ir}),e.d(A,"m",function(){return Pr}),e.d(A,"l",function(){return Nr}),e.d(A,"g",function(){return Br}),e.d(A,"f",function(){return Xr}),e.d(A,"j",function(){return Qe}),e.d(A,"k",function(){return Lr}),e.d(A,"r",function(){return Si}),e.d(A,"p",function(){return Yi}),e.d(A,"b",function(){return Vn}),e.d(A,"n",function(){return ri}),e.d(A,"q",function(){return Ui}),e.d(A,"o",function(){return Bi}),e.d(A,"c",function(){return vi}),e.d(A,"a",function(){return ii}),e.d(A,"e",function(){return Di});var i={};e.r(i),e.d(i,"compare",function(){return C}),e.d(i,"getLineIntersect",function(){return x}),e.d(i,"getRectIntersectByPoint",function(){return T}),e.d(i,"getCircleIntersectByPoint",function(){return N}),e.d(i,"getEllipseIntersectByPoint",function(){return Y}),e.d(i,"applyMatrix",function(){return q}),e.d(i,"invertMatrix",function(){return nt}),e.d(i,"getCircleCenterByPoints",function(){return vt}),e.d(i,"distance",function(){return ht}),e.d(i,"scaleMatrix",function(){return St}),e.d(i,"floydWarshall",function(){return wt}),e.d(i,"getAdjMatrix",function(){return xt}),e.d(i,"translate",function(){return ft}),e.d(i,"move",function(){return Ft}),e.d(i,"scale",function(){return kt}),e.d(i,"rotate",function(){return Ot}),e.d(i,"getDegree",function(){return X}),e.d(i,"isPointInPolygon",function(){return dt}),e.d(i,"intersectBBox",function(){return pt}),e.d(i,"isPolygonsIntersect",function(){return Mt}),e.d(i,"Line",function(){return tt}),e.d(i,"getBBoxBoundLine",function(){return lt}),e.d(i,"itemIntersectByLine",function(){return U}),e.d(i,"fractionToLine",function(){return P}),e.d(i,"getPointsCenter",function(){return H}),e.d(i,"squareDist",function(){return k}),e.d(i,"pointLineSquareDist",function(){return h}),e.d(i,"isPointsOverlap",function(){return g}),e.d(i,"pointRectSquareDist",function(){return G});var v={};e.r(v),e.d(v,"uniqueId",function(){return Dt}),e.d(v,"formatPadding",function(){return Ut}),e.d(v,"cloneEvent",function(){return Ct}),e.d(v,"isViewportChanged",function(){return Vt}),e.d(v,"isNaN",function(){return Ht}),e.d(v,"calculationItemsBBox",function(){return re}),e.d(v,"processParallelEdges",function(){return pe});var b={};e.r(b),e.d(b,"getBBox",function(){return Tn}),e.d(b,"getLoopCfgs",function(){return Rn}),e.d(b,"getLabelPosition",function(){return Mn}),e.d(b,"traverseTree",function(){return _n}),e.d(b,"traverseTreeUp",function(){return Kn}),e.d(b,"getLetterWidth",function(){return tr}),e.d(b,"getTextSize",function(){return or}),e.d(b,"plainCombosToTrees",function(){return nr}),e.d(b,"reconstructTree",function(){return er}),e.d(b,"getComboBBox",function(){return Sr}),e.d(b,"shouldRefreshEdge",function(){return Vr}),e.d(b,"cloneBesidesImg",function(){return ti});var S={};e.r(S),e.d(S,"getSpline",function(){return Qr}),e.d(S,"getControlPoint",function(){return gi}),e.d(S,"pointsToPolygon",function(){return Oi}),e.d(S,"pathToPoints",function(){return bi}),e.d(S,"getClosedSpline",function(){return zi}),e.d(S,"roundedHull",function(){return Zi}),e.d(S,"paddedHull",function(){return Pi});var f=e(0),M={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(F){return Object.assign(this,F),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(F){var B=this,Z=this.events;this.graph=F,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||F.get("canvas").set("draggable",!0),Object(f.f)(Z,function(ut,Bt){F.on(Bt,ut)}),document.addEventListener("visibilitychange",function(){B.keydown=!1})},unbind:function(F){var B=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||F.get("canvas").set("draggable",!1),Object(f.f)(B,function(Z,ut){F.off(ut,Z)})},get:function(F){return this[F]},set:function(F,B){return this[F]=B,this}},I=function(){function ve(){}return ve.registerBehavior=function(F,B){if(!B)throw new Error("please specify handler for this behavior: "+F);var Z=Object(f.c)(M);Object.assign(Z,B);var ut=function(Jt){var ie=this;Object.assign(this,this.getDefaultCfg(),Jt);var se=this.getEvents();this.events=null;var Te={};se&&(Object(f.f)(se,function(Ee,un){Te[un]=Object(f.J)(ie,Ee)}),this.events=Te)};ut.prototype=Z,ve.types[F]=ut},ve.hasBehavior=function(F){return!!ve.types[F]},ve.getBehavior=function(F){return ve.types[F]},ve.types={},ve}(),y=I,n=e(1),s=e(79),d=e(10),E=e(33),O=d.a.transform,C=function(F){return function(B,Z){return B[F]-Z[F]}},p=function(F,B,Z){return F>=B&&F<=Z},x=function(F,B,Z,ut){var Bt=Z.x-F.x,Jt=Z.y-F.y,ie=B.x-F.x,se=B.y-F.y,Te=ut.x-Z.x,Ee=ut.y-Z.y,un=ie*Ee-se*Te,xn=1/un,zt=null;if(un*un>1e-4*(ie*ie+se*se)*(Te*Te+Ee*Ee)){var Yt=(Bt*Ee-Jt*Te)*xn,Se=(Bt*se-Jt*ie)*xn;p(Yt,0,1)&&p(Se,0,1)&&(zt={x:F.x+Yt*ie,y:F.y+Yt*se})}return zt},T=function(F,B){var Z=F.x,ut=F.y,Bt=F.width,Jt=F.height,ie=[],se={x:Z+Bt/2,y:ut+Jt/2};ie.push({x:Z,y:ut}),ie.push({x:Z+Bt,y:ut}),ie.push({x:Z+Bt,y:ut+Jt}),ie.push({x:Z,y:ut+Jt}),ie.push({x:Z,y:ut});for(var Te=null,Ee=1;Ee<ie.length&&!(Te=x(ie[Ee-1],ie[Ee],se,B));Ee++);return Te},N=function(F,B){var Z=F.x,ut=F.y,Bt=F.r,Jt=B.x-Z,ie=B.y-ut;if(Math.sqrt(Jt*Jt+ie*ie)<Bt)return null;var se=Math.sign(Jt),Te=Math.sign(ie),Ee=Math.atan(ie/Jt);return{x:Z+Math.abs(Bt*Math.cos(Ee))*se,y:ut+Math.abs(Bt*Math.sin(Ee))*Te}},Y=function(F,B){var Z=F.rx,ut=F.ry,Bt=F.x,Jt=F.y,ie=B.x-Bt,se=B.y-Jt,Te=Math.atan2(se/ut,ie/Z);return Te<0&&(Te+=2*Math.PI),{x:Bt+Z*Math.cos(Te),y:Jt+ut*Math.sin(Te)}},q=function(F,B,Z){Z===void 0&&(Z=1);var ut=[F.x,F.y,Z];return B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]),d.d.transformMat3(ut,ut,B),{x:ut[0],y:ut[1]}},nt=function(F,B,Z){Z===void 0&&(Z=1),B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]);var ut=d.b.invert([1,0,0,0,1,0,0,0,1],B);ut||(ut=[1,0,0,0,1,0,0,0,1]);var Bt=[F.x,F.y,Z];return d.d.transformMat3(Bt,Bt,ut),{x:Bt[0],y:Bt[1]}},vt=function(F,B,Z){var ut=F.x-B.x,Bt=F.y-B.y,Jt=F.x-Z.x,ie=F.y-Z.y,se=(F.x*F.x-B.x*B.x-B.y*B.y+F.y*F.y)/2,Te=(F.x*F.x-Z.x*Z.x-Z.y*Z.y+F.y*F.y)/2,Ee=Bt*Jt-ut*ie;return{x:-(ie*se-Bt*Te)/Ee,y:-(ut*Te-Jt*se)/Ee}},ht=function(F,B){var Z=F.x-B.x,ut=F.y-B.y;return Math.sqrt(Z*Z+ut*ut)},St=function(F,B){var Z=[];return F.forEach(function(ut){var Bt=[];ut.forEach(function(Jt){Bt.push(Jt*B)}),Z.push(Bt)}),Z},wt=function(F){for(var B=[],Z=F.length,ut=0;ut<Z;ut+=1){B[ut]=[];for(var Bt=0;Bt<Z;Bt+=1)ut===Bt?B[ut][Bt]=0:F[ut][Bt]!==0&&F[ut][Bt]?B[ut][Bt]=F[ut][Bt]:B[ut][Bt]=1/0}for(var Jt=0;Jt<Z;Jt+=1)for(ut=0;ut<Z;ut+=1)for(Bt=0;Bt<Z;Bt+=1)B[ut][Bt]>B[ut][Jt]+B[Jt][Bt]&&(B[ut][Bt]=B[ut][Jt]+B[Jt][Bt]);return B},xt=function(F,B){var Z=F.nodes,ut=F.edges,Bt=[],Jt={};if(!Z)throw new Error("invalid nodes data!");return Z&&Z.forEach(function(ie,se){Jt[ie.id]=se,Bt.push([])}),ut&&ut.forEach(function(ie){var se=ie.source,Te=ie.target,Ee=Jt[se],un=Jt[Te];Bt[Ee][un]=1,B||(Bt[un][Ee]=1)}),Bt},ft=function(F,B){F.translate(B.x,B.y)},Ft=function(F,B){var Z=F.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=F.getCanvasBBox(),Bt=B.x-ut.minX,Jt=B.y-ut.minY,ie=O(Z,[["t",Bt,Jt]]);F.setMatrix(ie)},kt=function(F,B){var Z=F.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=B;Object(f.m)(B)||(ut=[B,B]),Object(f.m)(B)&&B.length===1&&(ut=[B[0],B[0]]),Z=O(Z,[["s",ut[0],ut[1]]]),F.setMatrix(Z)},Ot=function(F,B){var Z=F.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]),Z=O(Z,[["r",B]]),F.setMatrix(Z)},X=function(F,B,Z){for(var ut=[],Bt=0;Bt<F;Bt++)ut[Bt]=0;return Z.forEach(function(Jt){Jt.source&&(ut[B[Jt.source]]+=1),Jt.target&&(ut[B[Jt.target]]+=1)}),ut};function ct(ve,F,B){return(B[0]-ve[0])*(F[1]-ve[1])==(F[0]-ve[0])*(B[1]-ve[1])&&Math.min(ve[0],F[0])<=B[0]&&B[0]<=Math.max(ve[0],F[0])&&Math.min(ve[1],F[1])<=B[1]&&B[1]<=Math.max(ve[1],F[1])}var dt=function(F,B,Z){var ut=!1,Bt=F.length;function Jt(Ee){return Math.abs(Ee)<1e-6?0:Ee<0?-1:1}if(Bt<=2)return!1;for(var ie=0;ie<Bt;ie++){var se=F[ie],Te=F[(ie+1)%Bt];if(ct(se,Te,[B,Z]))return!0;Jt(se[1]-Z)>0!=Jt(Te[1]-Z)>0&&Jt(B-(Z-se[1])*(se[0]-Te[0])/(se[1]-Te[1])-se[0])<0&&(ut=!ut)}return ut},pt=function(F,B){return!(B.minX>F.maxX||B.maxX<F.minX||B.minY>F.maxY||B.maxY<F.minY)},Mt=function(F,B){var Z=function(xn){var zt=xn.map(function(Se){return Se[0]}),Yt=xn.map(function(Se){return Se[1]});return{minX:Math.min.apply(null,zt),maxX:Math.max.apply(null,zt),minY:Math.min.apply(null,Yt),maxY:Math.max.apply(null,Yt)}},ut=function(xn){for(var zt=[],Yt=xn.length,Se=0;Se<Yt-1;Se++){var Wt=xn[Se],ue=xn[Se+1];zt.push({from:{x:Wt[0],y:Wt[1]},to:{x:ue[0],y:ue[1]}})}if(zt.length>1){var vn=xn[0],Dn=xn[Yt-1];zt.push({from:{x:Dn[0],y:Dn[1]},to:{x:vn[0],y:vn[1]}})}return zt};if(F.length<2||B.length<2)return!1;var Bt=Z(F),Jt=Z(B);if(!pt(Bt,Jt))return!1;var ie=!1;if(Object(f.f)(B,function(un){if(dt(F,un[0],un[1]))return ie=!0,!1}),ie||(Object(f.f)(F,function(un){if(dt(B,un[0],un[1]))return ie=!0,!1}),ie))return!0;var se=ut(F),Te=ut(B),Ee=!1;return Object(f.f)(Te,function(un){if(function(xn,zt){var Yt=!1;return Object(f.f)(xn,function(Se){if(x(Se.from,Se.to,zt.from,zt.to))return Yt=!0,!1}),Yt}(se,un))return Ee=!0,!1}),Ee},tt=function(){function ve(F,B,Z,ut){this.x1=F,this.y1=B,this.x2=Z,this.y2=ut}return ve.prototype.getBBox=function(){var F=Math.min(this.x1,this.x2),B=Math.min(this.y1,this.y2),Z=Math.max(this.x1,this.x2),ut=Math.max(this.y1,this.y2);return{x:F,y:B,minX:F,minY:B,maxX:Z,maxY:ut,width:Z-F,height:ut-B}},ve}(),lt=function(F,B){return{top:[F.minX,F.minY,F.maxX,F.minY],left:[F.minX,F.minY,F.minX,F.maxY],bottom:[F.minX,F.maxY,F.maxX,F.maxY],right:[F.maxX,F.minY,F.maxX,F.maxY]}[B]},it=function(F,B){var Z=(B.x2-B.x1)*(F.y1-B.y1)-(B.y2-B.y1)*(F.x1-B.x1),ut=(F.x2-F.x1)*(F.y1-B.y1)-(F.y2-F.y1)*(F.x1-B.x1),Bt=(B.y2-B.y1)*(F.x2-F.x1)-(B.x2-B.x1)*(F.y2-F.y1);if(Bt){var Jt=Z/Bt,ie=ut/Bt;if(Jt>=0&&Jt<=1&&ie>=0&&ie<=1)return Jt}return Number.POSITIVE_INFINITY},U=function(F,B){for(var Z=["top","left","bottom","right"],ut=F.getBBox(),Bt=0,Jt=[],ie=0;ie<4;ie++){var se=lt(ut,Z[ie]),Te=se[0],Ee=se[1],un=se[2],xn=se[3];Jt[ie]=x({x:B.x1,y:B.y1},{x:B.x2,y:B.y2},{x:Te,y:Ee},{x:un,y:xn}),Jt[ie]&&(Bt+=1)}return[Jt,Bt]},P=function(F,B){for(var Z=["top","left","bottom","right"],ut=F.getBBox(),Bt=Number.POSITIVE_INFINITY,Jt=0,ie=0;ie<4;ie++){var se=lt(ut,Z[ie]),Te=se[0],Ee=se[1],un=se[2],xn=se[3],zt=it(B,new tt(Te,Ee,un,xn));(zt=Math.abs(zt-.5))>=0&&zt<=1&&(Jt+=1,Bt=zt<Bt?zt:Bt)}return Jt===0?-1:Bt},H=function(F){var B=0,Z=0;if(F.length>0){for(var ut=0,Bt=F;ut<Bt.length;ut++){var Jt=Bt[ut];B+=Jt.x,Z+=Jt.y}B/=F.length,Z/=F.length}return{x:B,y:Z}},k=function(F,B){return Math.pow(F.x-B.x,2)+Math.pow(F.y-B.y,2)},h=function(F,B){var Z,ut=B.x1,Bt=B.y1,Jt=B.x2-ut,ie=B.y2-Bt,se=F.x-ut,Te=F.y-Bt,Ee=se*Jt+Te*ie;Z=Ee<=0||(Ee=(se=Jt-se)*Jt+(Te=ie-Te)*ie)<=0?0:Ee*Ee/(Jt*Jt+ie*ie);var un=se*se+Te*Te-Z;return un<0&&(un=0),un},g=function(F,B,Z){return Z===void 0&&(Z=.001),Math.pow(F.x-B.x,2)+Math.pow(F.y-B.y,2)<Math.pow(Z,2)},G=function(F,B){var Z=F.x<B.x,ut=F.x>B.x+B.width,Bt=F.y>B.y+B.height,Jt=F.y<B.y;if(!(Z||ut||Bt||Jt))return 0;if(Bt&&!Z&&!ut)return Math.pow(B.y+B.height-F.y,2);if(Jt&&!Z&&!ut)return Math.pow(F.y-B.y,2);if(Z&&!Bt&&!Jt)return Math.pow(B.x-F.x,2);if(ut&&!Bt&&!Jt)return Math.pow(B.x+B.width-F.x,2);var ie=Math.min(Math.abs(B.x-F.x),Math.abs(B.x+B.width-F.x)),se=Math.min(Math.abs(B.y-F.y),Math.abs(B.y+B.height-F.y));return ie*ie+se*se},V="rgb(95, 149, 255)",$="rgb(253, 253, 253)",rt="rgb(247, 250, 255)",ot="rgb(224, 224, 224)",At="rgb(224, 224, 224)",gt={version:"0.0.9",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:V,fill:"rgb(239, 244, 255)"},size:20,color:V,linkPoints:{size:8,lineWidth:1,fill:rt,stroke:V}},nodeStateStyles:{active:{fill:rt,stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:V,lineWidth:4,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ot,lineAppendWidth:2},color:ot},edgeStateStyles:{active:{stroke:V,lineWidth:1},selected:{stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:V,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:$,lineWidth:1,stroke:At,r:5,width:20,height:10},size:[20,5],color:At,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:V,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:V,lineWidth:2,fill:$,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:$,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:$,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},mt=function(){function ve(F){this.graph=F,this.destroyed=!1,this.modes=F.get("modes")||{default:[]},this.formatModes(),this.mode=F.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ve.prototype.formatModes=function(){var F=this.modes;Object(f.f)(F,function(B){Object(f.f)(B,function(Z,ut){Object(f.x)(Z)&&(B[ut]={type:Z})})})},ve.prototype.setBehaviors=function(F){var B,Z=this.graph,ut=this.modes[F],Bt=[];Object(f.f)(ut||[],function(Jt){var ie=I.getBehavior(Jt.type||Jt);ie&&(B=new ie(Jt))&&(B.bind(Z),Bt.push(B))}),this.currentBehaves=Bt},ve.mergeBehaviors=function(F,B){return Object(f.f)(B,function(Z){F.indexOf(Z)<0&&(Object(f.x)(Z)&&(Z={type:Z}),F.push(Z))}),F},ve.filterBehaviors=function(F,B){var Z=[];return F.forEach(function(ut){var Bt="";Bt=Object(f.x)(ut)?ut:ut.type,B.indexOf(Bt)<0&&Z.push(ut)}),Z},ve.prototype.setMode=function(F){var B=this.modes,Z=this.graph,ut=F;B[ut]&&(Z.emit("beforemodechange",{mode:F}),Object(f.f)(this.currentBehaves,function(Bt){Bt.delegate&&Bt.delegate.remove(),Bt.unbind(Z)}),this.setBehaviors(ut),Z.emit("aftermodechange",{mode:F}),this.mode=F)},ve.prototype.getMode=function(){return this.mode},ve.prototype.manipulateBehaviors=function(F,B,Z){var ut,Bt=this;if(ut=Object(f.m)(F)?F:[F],Object(f.m)(B))return Object(f.f)(B,function(ie){Bt.modes[ie]?Bt.modes[ie]=Z?ve.mergeBehaviors(Bt.modes[ie]||[],ut):ve.filterBehaviors(Bt.modes[ie]||[],ut):Z&&(Bt.modes[ie]=ut)}),this;var Jt=B;return B||(Jt=this.mode),this.modes[Jt]||Z&&(this.modes[Jt]=ut),this.modes[Jt]=Z?ve.mergeBehaviors(this.modes[Jt]||[],ut):ve.filterBehaviors(this.modes[Jt]||[],ut),this.setMode(this.mode),this},ve.prototype.updateBehavior=function(F,B,Z){Object(f.x)(F)&&(F={type:F});var ut=[];if(Z&&Z!==this.mode&&Z!=="default"){if(!(ut=this.modes[Z])||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var Bt=ut.length;for(ie=0;ie<Bt;ie++){if((se=ut[ie]).type===F.type||se===F.type)return se===F.type&&(se={type:se}),Object.assign(se,B),ut[ie]=se,this;ie===Bt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(ut=this.currentBehaves)||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Jt=ut.length,ie=0;ie<Jt;ie++){var se;if((se=ut[ie]).type===F.type)return se.updateCfg(B),this;ie===Jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ve.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ve}(),bt=e(14),jt=function(ve){function F(B,Z){var ut=ve.call(this,B,Z)||this;return ut.item=Z.item,ut.canvasX=Z.canvasX,ut.canvasY=Z.canvasY,ut.wheelDelta=Z.wheelDelta,ut.detail=Z.detail,ut}return Object(n.b)(F,ve),F}(e(18).Event),Dt=function(F){return F+"-"+Math.random()+Date.now()},Ut=function(F){var B=0,Z=0,ut=0,Bt=0;return Object(f.t)(F)?B=Z=ut=Bt=F:Object(f.x)(F)?B=Z=ut=Bt=parseInt(F,10):Object(f.m)(F)&&(B=F[0],ut=Object(f.s)(F[1])?F[0]:F[1],Bt=Object(f.s)(F[2])?F[0]:F[2],Z=Object(f.s)(F[3])?ut:F[3]),[B,ut,Bt,Z]},Ct=function(F){var B=new jt(F.type,F);return B.clientX=F.clientX,B.clientY=F.clientY,B.x=F.x,B.y=F.y,B.target=F.target,B.currentTarget=F.currentTarget,B.bubbles=!0,B.item=F.item,B},Vt=function(F){if(!F)return!1;for(var B=[1,0,0,0,1,0,0,0,1],Z=0;Z<9;Z++)if(F[Z]!==B[Z])return!0;return!1},Ht=function(F){return Number.isNaN(Number(F))},re=function(F){for(var B=1/0,Z=-1/0,ut=1/0,Bt=-1/0,Jt=0;Jt<F.length;Jt++){var ie=F[Jt].getBBox(),se=ie.minX,Te=ie.minY,Ee=ie.maxX,un=ie.maxY;se<B&&(B=se),Te<ut&&(ut=Te),Ee>Z&&(Z=Ee),un>Bt&&(Bt=un)}return{x:Math.floor(B),y:Math.floor(ut),width:Math.ceil(Z)-Math.floor(B),height:Math.ceil(Bt)-Math.floor(ut),minX:B,minY:ut,maxX:Z,maxY:Bt}},pe=function(F,B,Z,ut,Bt){B===void 0&&(B=15),Z===void 0&&(Z="quadratic");for(var Jt=F.length,ie=2*B,se=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],Te={},Ee=[],un={},xn=0;xn<Jt;xn++){var zt=F[xn],Yt=zt.source,Se=zt.target,Wt=Yt+"-"+Se;if(!Ee[xn]){Te[Wt]||(Te[Wt]=[]),Ee[xn]=!0,Te[Wt].push(zt);for(var ue=0;ue<Jt;ue++)if(xn!==ue){var vn=F[ue],Dn=vn.source,zn=vn.target;Ee[ue]||(Yt===zn&&Se===Dn?(Te[Wt].push(vn),Ee[ue]=!0,un[Dn+"|"+zn+"|"+(Te[Wt].length-1)]=!0):Yt===Dn&&Se===zn&&(Te[Wt].push(vn),Ee[ue]=!0))}}}for(var Gn in Te)for(var Ze=Te[Gn],Ce=Ze.length,R=0;R<Ce;R++){var yt=Ze[R];if(yt.source!==yt.target)if(Ce===1&&ut&&yt.source!==yt.target)yt.type=ut;else{yt.type=Z;var $t=(R%2==0?1:-1)*(un[yt.source+"|"+yt.target+"|"+R]?-1:1);yt.curveOffset=Ce%2==1?$t*Math.ceil(R/2)*ie:$t*(Math.floor(R/2)*ie+B)}else Bt&&(yt.type=Bt),yt.loopCfg={position:se[R%8],dist:20*Math.floor(R/8)+50}}return F},ye=function(){function ve(F){this.destroyed=!1,this.graph=F,this.destroyed=!1}return ve.prototype.getViewCenter=function(){var F=this.getFormatPadding(),B=this.graph,Z=this.graph.get("width"),ut=B.get("height");return{x:(Z-F[1]-F[3])/2+F[3],y:(ut-F[0]-F[2])/2+F[0]}},ve.prototype.fitCenter=function(){var F=this.graph,B=F.get("group");B.resetMatrix();var Z=B.getCanvasBBox();if(Z.width!==0&&Z.height!==0){var ut=this.getViewCenter(),Bt=Z.x+Z.width/2,Jt=Z.y+Z.height/2;F.translate(ut.x-Bt,ut.y-Jt)}},ve.prototype.fitView=function(){var F=this.graph,B=this.getFormatPadding(),Z=F.get("width"),ut=F.get("height"),Bt=F.get("group");Bt.resetMatrix();var Jt=Bt.getCanvasBBox();if(Jt.width!==0&&Jt.height!==0){var ie=this.getViewCenter(),se=Jt.x+Jt.width/2,Te=Jt.y+Jt.height/2;F.translate(ie.x-se,ie.y-Te);var Ee=(Z-B[1]-B[3])/Jt.width,un=(ut-B[0]-B[2])/Jt.height,xn=Ee;Ee>un&&(xn=un),F.zoom(xn,ie)}},ve.prototype.getFormatPadding=function(){var F=this.graph.get("fitViewPadding");return Ut(F)},ve.prototype.focusPoint=function(F,B,Z){var ut=this,Bt=this.getViewCenter(),Jt=this.getPointByCanvas(Bt.x,Bt.y),ie=this.graph.get("group").getMatrix();if(ie||(ie=[1,0,0,0,1,0,0,0,1]),B){var se=(Jt.x-F.x)*ie[0],Te=(Jt.y-F.y)*ie[4],Ee=0,un=0,xn=0,zt=0;this.graph.get("canvas").animate(function(Yt){xn=se*Yt,zt=Te*Yt,ut.graph.translate(xn-Ee,zt-un),Ee=xn,un=zt},Object(n.a)({},Z))}else this.graph.translate((Jt.x-F.x)*ie[0],(Jt.y-F.y)*ie[4])},ve.prototype.getPointByCanvas=function(F,B){var Z=this.graph.get("group").getMatrix();return Z||(Z=[1,0,0,0,1,0,0,0,1]),nt({x:F,y:B},Z)},ve.prototype.getPointByClient=function(F,B){var Z=this.graph.get("canvas").getPointByClient(F,B);return this.getPointByCanvas(Z.x,Z.y)},ve.prototype.getClientByPoint=function(F,B){var Z=this.graph.get("canvas"),ut=this.getCanvasByPoint(F,B),Bt=Z.getClientByPoint(ut.x,ut.y);return{x:Bt.x,y:Bt.y}},ve.prototype.getCanvasByPoint=function(F,B){var Z=this.graph.get("group").getMatrix();return Z||(Z=[1,0,0,0,1,0,0,0,1]),q({x:F,y:B},Z)},ve.prototype.focus=function(F,B,Z){Object(f.x)(F)&&(F=this.graph.findById(F));var ut=F.get("group").getMatrix();ut||(ut=[1,0,0,0,1,0,0,0,1]),F&&this.focusPoint({x:ut[6],y:ut[7]},B,Z)},ve.prototype.changeSize=function(F,B){var Z=this.graph;if(!Object(f.t)(F)||!Object(f.t)(B))throw Error("invalid canvas width & height, please make sure width & height type is number");Z.set({width:F,height:B}),Z.get("canvas").changeSize(F,B),Z.get("plugins").forEach(function(ut){if(ut.get("gridContainer")){var Bt=Z.get("minZoom");Object(bt.c)(ut.get("container"),{width:F+"px",height:B+"px"}),Object(bt.c)(ut.get("gridContainer"),{width:F/Bt+"px",height:B/Bt+"px",left:0,top:0})}})},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ve}(),we={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ne=Math.PI,Ke=Math.sin,pn=Math.cos,hn=Ke(Ne/8),kn=pn(Ne/8),Tn=function(F,B){var Z=F.getBBox(),ut={x:Z.minX,y:Z.minY},Bt={x:Z.maxX,y:Z.maxY};if(B){var Jt=B.getMatrix();Jt||(Jt=[1,0,0,0,1,0,0,0,1]),ut=q(ut,Jt),Bt=q(Bt,Jt)}var ie=ut.x,se=ut.y,Te=Bt.x,Ee=Bt.y;return{x:ie,y:se,minX:ie,minY:se,maxX:Te,maxY:Ee,width:Te-ie,height:Ee-se}},Rn=function(F){var B=F.sourceNode||F.targetNode,Z=B.get("group").getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=B.getKeyShape().getBBox(),Bt=F.loopCfg||{},Jt=Bt.dist||2*Math.max(ut.width,ut.height),ie=Bt.position||gt.defaultLoopPosition,se=[Z[6],Z[7]],Te=[F.startPoint.x,F.startPoint.y],Ee=[F.endPoint.x,F.endPoint.y],un=ut.height/2,xn=ut.height/2,zt=un*hn,Yt=un*kn,Se=xn*hn,Wt=xn*kn;if(Te[0]===Ee[0]&&Te[1]===Ee[1]){switch(ie){case"top":Te=[se[0]-zt,se[1]-Yt],Ee=[se[0]+Se,se[1]-Wt];break;case"top-right":un=ut.height/2,xn=ut.width/2,Te=[se[0]+(zt=un*hn),se[1]-(Yt=un*kn)],Ee=[se[0]+(Wt=xn*kn),se[1]-(Se=xn*hn)];break;case"right":un=ut.width/2,xn=ut.width/2,Te=[se[0]+(Yt=un*kn),se[1]-(zt=un*hn)],Ee=[se[0]+(Wt=xn*kn),se[1]+(Se=xn*hn)];break;case"bottom-right":un=ut.width/2,xn=ut.height/2,Te=[se[0]+(Yt=un*kn),se[1]+(zt=un*hn)],Ee=[se[0]+(Se=xn*hn),se[1]+(Wt=xn*kn)];break;case"bottom":un=ut.height/2,xn=ut.height/2,Te=[se[0]+(zt=un*hn),se[1]+(Yt=un*kn)],Ee=[se[0]-(Se=xn*hn),se[1]+(Wt=xn*kn)];break;case"bottom-left":un=ut.height/2,xn=ut.width/2,Te=[se[0]-(zt=un*hn),se[1]+(Yt=un*kn)],Ee=[se[0]-(Wt=xn*kn),se[1]+(Se=xn*hn)];break;case"left":un=ut.width/2,xn=ut.width/2,Te=[se[0]-(Yt=un*kn),se[1]+(zt=un*hn)],Ee=[se[0]-(Wt=xn*kn),se[1]-(Se=xn*hn)];break;case"top-left":un=ut.width/2,xn=ut.height/2,Te=[se[0]-(Yt=un*kn),se[1]-(zt=un*hn)],Ee=[se[0]-(Se=xn*hn),se[1]-(Wt=xn*kn)];break;default:un=ut.width/2,xn=ut.width/2,Te=[se[0]-(zt=un*hn),se[1]-(Yt=un*kn)],Ee=[se[0]+(Se=xn*hn),se[1]-(Wt=xn*kn)]}if(Bt.clockwise===!1){var ue=[Te[0],Te[1]];Te=[Ee[0],Ee[1]],Ee=[ue[0],ue[1]]}}var vn=[Te[0]-se[0],Te[1]-se[1]],Dn=(un+Jt)/un,zn=(xn+Jt)/xn;Bt.clockwise===!1&&(Dn=(xn+Jt)/xn,zn=(un+Jt)/un);var Gn=d.c.scale([0,0],vn,Dn),Ze=[se[0]+Gn[0],se[1]+Gn[1]],Ce=[Ee[0]-se[0],Ee[1]-se[1]],R=d.c.scale([0,0],Ce,zn),yt=[se[0]+R[0],se[1]+R[1]];return F.startPoint={x:Te[0],y:Te[1]},F.endPoint={x:Ee[0],y:Ee[1]},F.controlPoints=[{x:Ze[0],y:Ze[1]},{x:yt[0],y:yt[1]}],F},Mn=function(F,B,Z,ut,Bt){var Jt=[],ie=F.getPoint(B);if(ie===null)return{x:0,y:0,angle:0};if(B<1e-4)Jt=F.getStartTangent().reverse();else if(B>.9999)Jt=F.getEndTangent();else{var se=F.getPoint(B+1e-4);Jt.push([ie.x,ie.y]),Jt.push([se.x,se.y])}var Te=Math.atan2(Jt[1][1]-Jt[0][1],Jt[1][0]-Jt[0][0]);if(Te<0&&(Te+=2*Ne),Z&&(ie.x+=pn(Te)*Z,ie.y+=Ke(Te)*Z),ut){var Ee=Te-Ne/2;Te>.5*Ne&&Te<1.5*Ne&&(Ee-=Ne),ie.x+=pn(Ee)*ut,ie.y+=Ke(Ee)*ut}var un={x:ie.x,y:ie.y,angle:Te};return Bt?(Te>.5*Ne&&Te<1.5*Ne&&(Te-=Ne),Object(n.a)({rotate:Te},un)):un},Cn=function ve(F,B){if(B(F)===!1)return!1;if(F&&F.children){for(var Z=F.children.length-1;Z>=0;Z--)if(!ve(F.children[Z],B))return!1}return!0},_n=function(F,B){typeof B=="function"&&Cn(F,B)},Kn=function(F,B){typeof B=="function"&&function Z(ut,Bt){if(ut&&ut.children){for(var Jt=ut.children.length-1;Jt>=0;Jt--)if(!Z(ut.children[Jt],Bt))return}return Bt(ut)!==!1}(F,B)},tr=function(F,B){return B*(we[F]||1)},or=function(F,B){var Z=0,ut=new RegExp("[\u4E00-\u9FA5]+");return F.split("").forEach(function(Bt){ut.test(Bt)?Z+=B:Z+=tr(Bt,B)}),[Z,B]},nr=function(F,B){var Z=[],ut={},Bt={};F.forEach(function(se){Bt[se.id]=se}),F.forEach(function(se,Te){var Ee=Object(f.c)(se);Ee.itemType="combo",Ee.children=void 0,Ee.parentId===Ee.id?(console.warn("The parentId for combo "+Ee.id+" can not be the same as the combo's id"),delete Ee.parentId):Ee.parentId&&!Bt[Ee.parentId]&&(console.warn("The parent combo for combo "+Ee.id+" does not exist!"),delete Ee.parentId);var un=ut[Ee.id];if(un){if(Ee.children=un.children,ut[Ee.id]=Ee,!(un=Ee).parentId)return void Z.push(un);var xn=ut[un.parentId];if(xn)xn.children?xn.children.push(Ee):xn.children=[Ee];else{var zt={id:un.parentId,children:[un]};ut[un.parentId]=zt,ut[Ee.id]=Ee}}else if(Object(f.x)(se.parentId)){var Yt=ut[se.parentId];if(Yt)Yt.children?Yt.children.push(Ee):Yt.children=[Ee],ut[Ee.id]=Ee;else{var Se={id:se.parentId,children:[Ee]};ut[Se.id]=Se,ut[Ee.id]=Ee}}else Z.push(Ee),ut[Ee.id]=Ee});var Jt={};(B||[]).forEach(function(se){Jt[se.id]=se;var Te=ut[se.comboId];if(Te){var Ee={id:se.id,comboId:se.comboId};Te.children?Te.children.push(Ee):Te.children=[Ee],Ee.itemType="node",ut[se.id]=Ee}});var ie=0;return Z.forEach(function(se){se.depth=ie+10,Cn(se,function(Te){var Ee,un=ut[Te.id].itemType;Ee=un==="node"?ut[Te.comboId]:ut[Te.parentId],Te.depth=Ee&&un==="node"?ie+1:ie+10,ie<Te.depth&&(ie=Te.depth);var xn=Jt[Te.id];return xn&&(xn.depth=Te.depth),!0})}),Z},er=function(F,B,Z){var ut,Bt=F,Jt={root:{children:F}},ie=!1,se="root";(F||[]).forEach(function(zt){if(!ie)return zt.id===B?(ut=zt,zt.itemType==="combo"?ut.parentId=Z:ut.comboId=Z,void(ie=!0)):void _n(zt,function(Yt){return Jt[Yt.id]={children:Yt.children},Bt=Jt[Yt.parentId||Yt.comboId||"root"].children,!Yt||!Yt.removed&&B!==Yt.id||!Bt||(se=Yt.parentId||Yt.comboId||"root",ut=Yt,Yt.itemType==="combo"?ut.parentId=Z:ut.comboId=Z,ie=!0,!1)})});var Te=(Bt=Jt[se].children)?Bt.indexOf(ut):-1;if(Te>-1&&Bt.splice(Te,1),ie||(ut={id:B,itemType:"node",comboId:Z},Jt[B]={children:void 0}),B){var Ee=!1;if(Z){var un=0;(F||[]).forEach(function(zt){Ee||_n(zt,function(Yt){return Z!==Yt.id||(Ee=!0,Yt.children?Yt.children.push(ut):Yt.children=[ut],un=Yt.depth,ut.itemType==="node"?ut.depth=un+2:ut.depth=un+1,!1)})})}else Z&&Ee||ut.itemType==="node"||F.push(ut);var xn=ut.depth;_n(ut,function(zt){return zt.itemType==="node"?xn+=2:xn+=1,zt.depth=xn,!0})}return F},Sr=function(F,B){var Z={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return F&&F.length!==0&&(F.forEach(function(ut){var Bt=B.findById(ut.id);if(Bt&&Bt.isVisible()){Bt.set("bboxCanvasCache",void 0);var Jt=Bt.getCanvasBBox();Jt.x&&Z.minX>Jt.minX&&(Z.minX=Jt.minX),Jt.y&&Z.minY>Jt.minY&&(Z.minY=Jt.minY),Jt.x&&Z.maxX<Jt.maxX&&(Z.maxX=Jt.maxX),Jt.y&&Z.maxY<Jt.maxY&&(Z.maxY=Jt.maxY)}}),Z.x=(Z.minX+Z.maxX)/2,Z.y=(Z.minY+Z.maxY)/2,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Object.keys(Z).forEach(function(ut){Z[ut]!==1/0&&Z[ut]!==-1/0||(Z[ut]=void 0)})),Z},Vr=function(F){var B=Object(f.t)(F.x)||Object(f.t)(F.y)||F.type||F.anchorPoints||F.size;return F.style&&(B=B||Object(f.t)(F.style.r)||Object(f.t)(F.style.width)||Object(f.t)(F.style.height)||Object(f.t)(F.style.rx)||Object(f.t)(F.style.ry)),B},ti=function(F){var B={};return Object.keys(F).forEach(function(Z){var ut=F[Z];if(Object(f.v)(ut)){var Bt={};Object.keys(ut).forEach(function(Jt){var ie=ut[Jt];(Jt!=="img"||Object(f.x)(ie))&&(Bt[Jt]=Object(f.c)(ie))}),B[Z]=Bt}else B[Z]=Object(f.c)(ut)}),B};function hi(ve){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(ve)}function Fi(ve){if(typeof ve!="string")return ve;var F=function(Ze){if(typeof Ze!="string")return Ze;try{return JSON.parse(Ze.trim())}catch(Ce){return Ze.trim()}},B=F(ve);if(typeof B!="string")return B;for(var Z=function(Ze){return Ze[Ze.length-1]},ut=ve.trim(),Bt=[],Jt=[],ie=function(){for(var Ze=[],Ce=0;Ce<arguments.length;Ce++)Ze[Ce]=arguments[Ce];return Ze.some(function(R){return Z(Jt)===R})},se=null,Te=0,Ee="";Te<ut.length;){var un=ut[Te],xn=ie('"',"'");if(xn||un.trim()){var zt=ut[Te-1]==="\\",Yt=ie("}"),Se=ie("]"),Wt=ie(","),ue=Z(Bt);if(xn)if(Z(Jt)!==un||zt)Ee+=un;else{Jt.pop();var vn=F(Ee);ue.push(vn),se=vn,Ee=""}else if(Se&&un===",")Ee&&(ue.push(F(Ee)),Ee="");else if(Yt&&un===":")Jt.push(","),Ee&&(ue.push(Ee),Ee="");else if(Wt&&un===",")Ee&&(ue.push(F(Ee)),Ee=""),Jt.pop();else if(un==="}"&&(Yt||Wt)){Ee&&(ue.push(F(Ee)),Ee=""),Wt&&Jt.pop();for(var Dn={},zn=1;zn<ue.length;zn+=2)Dn[ue[zn-1]]=ue[zn];Bt.pop(),Bt.length&&Z(Bt).push(Dn),Jt.pop(),se=Dn}else un==="]"&&Se?(Ee&&(ue.push(F(Ee)),Ee=""),Bt.pop(),Bt.length&&Z(Bt).push(ue),Jt.pop(),se=ue):un==="{"?(Bt.push([]),Jt.push("}")):un==="["?(Bt.push([]),Jt.push("]")):un==='"'?Jt.push('"'):un==="'"?Jt.push("'"):Ee+=un;Te+=1}else Te+=1}return se||Ee}function to(ve,F){var B;F===void 0&&(F={x:0,y:0});var Z=Object(n.a)({x:0,y:0,width:0,height:0},F);if((B=ve.children)===null||B===void 0?void 0:B.length){var ut=ve.attrs,Bt=ut===void 0?{}:ut,Jt=Bt.marginTop,ie=Object(n.a)({},F);Jt&&(ie.y+=Jt);for(var se=0;se<ve.children.length;se++){ve.children[se].attrs.key=(Bt.key||"root")+" -"+se+" ";var Te=to(ve.children[se],ie);if(Te.bbox){var Ee=Te.bbox;Te.attrs.next==="inline"?ie.x+=Te.bbox.width:ie.y+=Te.bbox.height,Ee.width+Ee.x>Z.width&&(Z.width=Ee.width+Ee.x),Ee.height+Ee.y>Z.height&&(Z.height=Ee.height+Ee.y)}}}return ve.bbox=function(un,xn,zt){var Yt,Se,Wt=un.attrs,ue=Wt===void 0?{}:Wt,vn={x:xn.x||0,y:xn.y||0,width:zt.width||0,height:zt.height||0};switch(un.type){case"maker":case"circle":ue.r&&(Se=2*ue.r,Yt=2*ue.r);break;case"text":ue.text&&(Se=or(ue.text,ue.fontSize||12)[0],Yt=16,vn.y+=Yt,vn.height=Yt,vn.width=Se,un.attrs=Object(n.a)({fontSize:12,fill:"#000"},ue));break;default:ue.width&&(Se=ue.width),ue.height&&(Yt=ue.height)}return Yt>=0&&(vn.height=Yt),Se>=0&&(vn.width=Se),ue.marginTop&&(vn.y+=ue.marginTop),ue.marginLeft&&(vn.x+=ue.marginLeft),vn}(ve,F,Z),ve.attrs=Object(n.a)(Object(n.a)({},ve.attrs),ve.bbox),ve}function si(ve){var F={},B=function(ut){var Bt=function(se){return function(Te){for(var Ee=se.length,un=[],xn=0,zt="";xn<Ee;)if(se[xn]==="{"&&se[xn+1]==="{")un.push(zt),zt="",xn+=2;else if(se[xn]==="}"&&se[xn+1]==="}"){if(un.length){var Yt=un.pop();zt=Object(f.i)(Te,zt,Yt.endsWith("=")?'"{'+zt+'}"':zt),un.push(Yt+zt)}xn+=2,zt=""}else zt+=se[xn],xn+=1;return un.push(zt),un.map(function(Se,Wt){return un[Wt-1]&&un[Wt-1].endsWith("=")?'"{'+Se+'}"':Se}).join("")}}(typeof ve=="function"?ve(ut):ve)(ut),Jt=document.createElement("div");Jt.innerHTML=Bt;var ie=to(function se(Te,Ee){var un={},xn=Te.getAttributeNames&&Te.getAttributeNames()||[],zt=Te.children&&Array.from(Te.children).map(function(Wt){return se(Wt,Ee)}),Yt={},Se=Te.tagName?Te.tagName.toLowerCase():"group";return Se==="text"&&(un.text=Te.innerText),Yt.type=Se,Se==="img"&&(Yt.type="image"),Array.from(xn).forEach(function(Wt){var ue=Wt.split("-").reduce(function(zn,Gn){return zn+Gn.charAt(0).toUpperCase()+Gn.slice(1)}),vn=Te.getAttribute(Wt);try{if(ue==="style"||ue==="attrs"){var Dn=Fi(vn);un=Object(n.a)(Object(n.a)({},un),Dn)}else Yt[ue]=Fi(vn)}catch(zn){if(ue==="style")throw zn;Yt[ue]=vn}}),Yt.attrs=un,Ee&&Ee.style&&Yt.name&&hi(Ee.style[Yt.name])==="object"&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style[Yt.name])),Ee&&Ee.style&&Yt.keyshape&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style)),zt.length&&(Yt.children=zt),Yt}(Jt.children[0],ut));return Jt.remove(),ie};return{draw:function(ut,Bt){var Jt=B(ut),ie=Bt;return function se(Te){var Ee=Te.attrs,un=Ee===void 0?{}:Ee,xn=Te.bbox,zt=Te.type,Yt=Te.children,Se=Object(n.c)(Te,["attrs","bbox","type","children"]);if(Te.type!=="group"){var Wt=Bt.addShape(Te.type,Object(n.a)({attrs:un,origin:{bbox:xn,type:zt,children:Yt}},Se));Te.keyshape&&(ie=Wt)}Te.children&&Te.children.forEach(function(ue){return se(ue)})}(Jt),F[ut.id]=[Jt],ie},update:function(ut,Bt){F[ut.id]||(F[ut.id]=[]);var Jt=Bt.getContainer(),ie=Jt.get("children"),se=B(ut),Te=function xn(zt,Yt){var Se,Wt,ue,vn,Dn=(zt||{}).type,zn=((Yt==null?void 0:Yt.attrs)||{}).key;if(zn&&zt&&(zt.attrs.key=zn),!zt&&Yt)return{action:"delete",val:Yt,type:Dn,key:zn};if(zt&&!Yt)return{action:"add",val:zt,type:Dn};if(!zt&&!Yt)return{action:"same",type:Dn};var Gn=[];if(((Se=zt.children)===null||Se===void 0?void 0:Se.length)>0||((Wt=Yt.children)===null||Wt===void 0?void 0:Wt.length)>0)for(var Ze=Math.max((ue=zt.children)===null||ue===void 0?void 0:ue.length,(vn=Yt.children)===null||vn===void 0?void 0:vn.length),Ce=Yt.children||[],R=zt.children||[],yt=0;yt<Ze;yt+=1)Gn.push(xn(R[yt],Ce[yt]));var $t=Object.keys(Yt.attrs),me=Object.keys(zt.attrs);return Yt.type!==zt.type?{action:"restructure",nowTarget:zt,formerTarget:Yt,key:zn,children:Gn}:$t.filter(function(Zt){return Zt!=="children"}).some(function(Zt){return zt.attrs[Zt]!==Yt.attrs[Zt]||!me.includes(Zt)})?{action:"change",val:zt,children:Gn,type:Dn,key:zn}:{action:"same",children:Gn,type:Dn,key:zn}}(se,F[ut.id].pop()),Ee=function xn(zt){var Yt;zt.type!=="group"&&Jt.addShape(zt.type,{attrs:zt.attrs}),((Yt=zt.children)===null||Yt===void 0?void 0:Yt.length)&&zt.children.map(function(Se){return xn(Se)})},un=function xn(zt){var Yt,Se=ie.find(function(Wt){return Wt.attrs.key===zt.attrs.key});Se&&Jt.removeChild(Se),((Yt=zt.children)===null||Yt===void 0?void 0:Yt.length)&&zt.children.map(function(Wt){return xn(Wt)})};(function xn(zt){var Yt=zt.key;if(zt.type!=="group"){var Se=ie.find(function(ue){return ue.attrs.key===Yt});switch(zt.action){case"change":if(Se){var Wt=zt.val.keyshape?Bt.getOriginStyle():{};Se.attr(Object(n.a)(Object(n.a)({},Wt),zt.val.attrs))}break;case"add":Ee(zt.val);break;case"delete":un(zt.val);break;case"restructure":un(zt.formerTarget),Ee(zt.nowTarget)}}zt.children&&zt.children.forEach(function(ue){return xn(ue)})})(Te),F[ut.id].push(se)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ci={};function _i(ve){return Ci[ve]||(Ci[ve]=Object(f.I)(ve)),Ci[ve]}var Li={defaultShapeType:"defaultType",className:null,getShape:function(F){return this[F]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(F,B,Z){var ut=this.getShape(F),Bt=ut.draw(B,Z);return ut.afterDraw&&ut.afterDraw(B,Z,Bt),Bt},baseUpdate:function(F,B,Z){var ut=this.getShape(F);ut.update&&ut.update(B,Z),ut.afterUpdate&&ut.afterUpdate(B,Z)},setState:function(F,B,Z,ut){this.getShape(F).setState(B,Z,ut)},shouldUpdate:function(F){return!!this.getShape(F).update},getControlPoints:function(F,B){return this.getShape(F).getControlPoints(B)},getAnchorPoints:function(F,B){return this.getShape(F).getAnchorPoints(B)}},Vi={options:{},draw:function(F,B){return this.drawShape(F,B)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(F){return F.controlPoints},getAnchorPoints:function(F){var B=this.options.anchorPoints;return F.anchorPoints||B}},ro=function(){function ve(){}return ve.registerFactory=function(F,B){var Z=_i(F),ut=Li,Bt=Object(n.a)(Object(n.a)({},ut),B);return ve[Z]=Bt,Bt.className=Z,Bt},ve.getFactory=function(F){return ve[_i(F)]},ve.registerNode=function(F,B,Z){var ut,Bt=ve.Node;if(typeof B=="string"||typeof B=="function"){var Jt=si(B);ut=Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt)}else if(B.jsx)Jt=si(B.jsx),ut=Object(n.a)(Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt),B);else{Bt.getShape(Z);var ie=Z?Bt.getShape(Z):Vi;ut=Object(n.a)(Object(n.a)({},ie),B)}return ut.type=F,ut.itemType="node",Bt[F]=ut,ut},ve.registerEdge=function(F,B,Z){var ut=ve.Edge,Bt=Z?ut.getShape(Z):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),B);return Jt.type=F,Jt.itemType="edge",ut[F]=Jt,Jt},ve.registerCombo=function(F,B,Z){var ut=ve.Combo,Bt=Z?ut.getShape(Z):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),B);return Jt.type=F,Jt.itemType="combo",ut[F]=Jt,Jt},ve}(),jr=ro;ro.registerFactory("node",{defaultShapeType:"circle"}),ro.registerFactory("edge",{defaultShapeType:"line"}),ro.registerFactory("combo",{defaultShapeType:"circle"});var Ji=["startArrow","endArrow"],pr=function(){function ve(F){this._cfg={},this.destroyed=!1;var B={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(B,this.getDefaultCfg(),F);var Z=this.get("model"),ut=Z.id,Bt=this.get("type");ut||(ut=Dt(Bt),this.get("model").id=ut),this.set("id",ut);var Jt=F.group;Jt&&(Jt.set("item",this),Jt.set("id",ut)),this.init(),this.draw();var ie=Z.shape||Z.type||(Bt==="edge"?"line":"circle"),se=this.get("shapeFactory");if(se&&se[ie]){var Te=se[ie].options;if(Te&&Te.stateStyles){var Ee=this.get("styles")||Z.stateStyles;Ee=Object(f.e)({},Te.stateStyles,Ee),this.set("styles",Ee)}}}return ve.prototype.calculateBBox=function(){var F=this.get("keyShape"),B=this.get("group"),Z=Tn(F,B);return Z.x=Z.minX,Z.y=Z.minY,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Z},ve.prototype.calculateCanvasBBox=function(){var F=this.get("keyShape"),B=this.get("group"),Z=Tn(F,B);return Z.x=Z.minX,Z.y=Z.minY,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Z},ve.prototype.drawInner=function(){var F=this.get("shapeFactory"),B=this.get("group"),Z=this.get("model");B.clear();var ut=Z.visible;if(ut===void 0||ut||this.changeVisibility(ut),F){this.updatePosition(Z);var Bt=this.getShapeCfg(Z),Jt=Bt.type,ie=F.draw(Jt,Bt,B);ie&&(this.set("keyShape",ie),ie.set("isKeyShape",!0),ie.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Jt),this.restoreStates(F,Jt)}},ve.prototype.setOriginStyle=function(F){var B=this.get("group").get("children"),Z=this.getKeyShape(),ut=this,Bt=Z.get("name");if(this.get("originStyle")){var Jt=this.getOriginStyle();Bt&&!Jt[Bt]&&(Jt[Bt]={});var ie=this.getCurrentStatesStyle();Object(f.f)(B,function(Te){var Ee=Te.get("name"),un=Te.attr();if(Ee&&Ee!==Bt){var xn=ie[Ee];Jt[Ee]||(Jt[Ee]={}),xn?Object.keys(un).forEach(function(Se){var Wt=un[Se];Wt!==xn[Se]&&(Jt[Ee][Se]=Wt)}):Jt[Ee]=Object(f.c)(un)}else{var zt=Te.attr(),Yt=Object(n.a)(Object(n.a)({},ie),ie[Bt]);Object.keys(zt).forEach(function(Se){var Wt=zt[Se];Object(f.w)(Wt)&&Ji.indexOf(Ee)===-1||Yt[Se]!==Wt&&(Bt?Jt[Bt][Se]=Wt:Jt[Se]=Wt)})}}),Jt.path&&delete Jt.path,Jt.matrix&&delete Jt.matrix,ut.set("originStyle",Jt)}else{var se={};Object(f.f)(B,function(Te){var Ee=Te.get("type"),un=Te.get("name");if(un&&un!==Bt)se[un]=Ee!=="image"?Object(f.c)(Te.attr()):ut.getShapeStyleByName(un);else{var xn=ut.getShapeStyleByName();if(xn.path&&delete xn.path,xn.matrix&&delete xn.matrix,Bt)if(un)se[Bt]=xn;else{var zt=Dt("shape");Te.set("name",zt),se[zt]=Ee!=="image"?Object(f.c)(Te.attr()):ut.getShapeStyleByName(un)}else Object.assign(se,xn)}}),ut.set("originStyle",se)}},ve.prototype.restoreStates=function(F,B){var Z=this,ut=Z.get("states");Object(f.f)(ut,function(Bt){F.setState(B,Bt,!0,Z)})},ve.prototype.init=function(){var F=jr.getFactory(this.get("type"));this.set("shapeFactory",F)},ve.prototype.get=function(F){return this._cfg[F]},ve.prototype.set=function(F,B){Object(f.w)(F)?this._cfg=Object(n.a)(Object(n.a)({},this._cfg),F):this._cfg[F]=B},ve.prototype.getDefaultCfg=function(){return{}},ve.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},ve.prototype.beforeDraw=function(){},ve.prototype.afterDraw=function(){},ve.prototype.afterUpdate=function(){},ve.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ve.prototype.getShapeStyleByName=function(F){var B,Z=this.get("group");if(B=F?Z.find(function(Bt){return Bt.get("name")===F}):this.getKeyShape()){var ut={};return Object(f.f)(B.attr(),function(Bt,Jt){Jt!=="img"&&(ut[Jt]=Bt)}),ut}return{}},ve.prototype.getShapeCfg=function(F){var B=this.get("styles");if(B){var Z=F;return Z.style=Object(n.a)(Object(n.a)({},B),F.style),Z}return F},ve.prototype.getStateStyle=function(F){var B=this.get("styles");return B&&B[F]},ve.prototype.getOriginStyle=function(){return this.get("originStyle")},ve.prototype.getCurrentStatesStyle=function(){var F=this,B={},Z=F.getStates();return Z&&Z.length?(Object(f.f)(F.getStates(),function(ut){B=Object.assign(B,F.getStateStyle(ut))}),B):this.getOriginStyle()},ve.prototype.setState=function(F,B){var Z=this.get("states"),ut=this.get("shapeFactory"),Bt=F,Jt=F;Object(f.x)(B)&&(Bt=F+":"+B,Jt=F+":");var ie=Z;if(Object(f.n)(B)){var se=Z.indexOf(Jt);if(B){if(se>-1)return;Z.push(Bt)}else se>-1&&Z.splice(se,1)}else if(Object(f.x)(B)){var Te=Z.filter(function(un){return un.includes(Jt)});Te.length>0&&this.clearStates(Te),(ie=ie.filter(function(un){return!un.includes(Jt)})).push(Bt),this.set("states",ie)}if(ut){var Ee=this.get("model").type;ut.setState(Ee,F,B,this)}},ve.prototype.clearStates=function(F){var B=this,Z=B.getStates(),ut=B.get("shapeFactory"),Bt=B.get("model").type;F||(F=Z),Object(f.x)(F)&&(F=[F]);var Jt=Z.filter(function(ie){return F.indexOf(ie)===-1});B.set("states",Jt),F.forEach(function(ie){ut.setState(Bt,ie,!1,B)})},ve.prototype.getContainer=function(){return this.get("group")},ve.prototype.getKeyShape=function(){return this.get("keyShape")},ve.prototype.getModel=function(){return this.get("model")},ve.prototype.getType=function(){return this.get("type")},ve.prototype.getID=function(){return this.get("id")},ve.prototype.isItem=function(){return!0},ve.prototype.getStates=function(){return this.get("states")},ve.prototype.hasState=function(F){return this.getStates().indexOf(F)>=0},ve.prototype.refresh=function(){var F=this.get("model");this.updatePosition(F),this.updateShape(),this.afterUpdate(),this.clearCache()},ve.prototype.isOnlyMove=function(F){return!1},ve.prototype.update=function(F,B){B===void 0&&(B=!1);var Z=this.get("model"),ut=Z.visible,Bt=F.visible;ut!==Bt&&Bt!==void 0&&this.changeVisibility(Bt);var Jt=Z.x,ie=Z.y;F.x=isNaN(F.x)?Z.x:F.x,F.y=isNaN(F.y)?Z.y:F.y;var se=this.get("styles");if(F.stateStyles){var Te=F.stateStyles;Object(f.A)(se,Te),delete F.stateStyles}Object.assign(Z,F),B?this.updatePosition(F):(Jt===F.x&&ie===F.y||this.updatePosition(F),this.updateShape()),this.afterUpdate(),this.clearCache()},ve.prototype.updateShape=function(){var F=this.get("shapeFactory"),B=this.get("model"),Z=B.type;if(F.shouldUpdate(Z)&&Z===this.get("currentShape")){var ut=this.getShapeCfg(B);F.baseUpdate(Z,ut,this)}else this.draw();this.setOriginStyle(B),this.restoreStates(F,Z)},ve.prototype.updatePosition=function(F){var B=this.get("model"),Z=Object(f.s)(F.x)?B.x:F.x,ut=Object(f.s)(F.y)?B.y:F.y,Bt=this.get("group");Object(f.s)(Z)||Object(f.s)(ut)||(Bt.resetMatrix(),ft(Bt,{x:Z,y:ut}),B.x=Z,B.y=ut,this.clearCache())},ve.prototype.getBBox=function(){var F=this.get("bboxCache");return F||(F=this.calculateBBox(),this.set("bboxCache",F)),F},ve.prototype.getCanvasBBox=function(){var F=this.get("bboxCanvasCache");return F||(F=this.calculateCanvasBBox(),this.set("bboxCanvasCache",F)),F},ve.prototype.toFront=function(){this.get("group").toFront()},ve.prototype.toBack=function(){this.get("group").toBack()},ve.prototype.show=function(){this.changeVisibility(!0)},ve.prototype.hide=function(){this.changeVisibility(!1)},ve.prototype.changeVisibility=function(F){var B=this.get("group");F?B.show():B.hide(),this.set("visible",F)},ve.prototype.isVisible=function(){return this.get("visible")},ve.prototype.enableCapture=function(F){var B=this.get("group");B&&B.set("capture",F)},ve.prototype.destroy=function(){if(!this.destroyed){var F=this.get("animate"),B=this.get("group");F&&B.stopAnimate(),this.clearCache(),B.remove(),this._cfg=null,this.destroyed=!0}},ve}(),Yr={source:"start",target:"end"},Br=function(ve){function F(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(F,ve),F.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},F.prototype.setEnd=function(B,Z){var ut=Yr[B]+"Point",Bt=B+"Node",Jt=this.get(Bt);Jt&&!Jt.destroyed&&Jt.removeEdge(this),Object(f.w)(Z)?(this.set(ut,Z),this.set(Bt,null)):(Z.addEdge(this),this.set(Bt,Z),this.set(ut,null))},F.prototype.getLinkPoint=function(B,Z,ut){var Bt=Yr[B]+"Point",Jt=B+"Node",ie=this.get(Bt);if(!ie){var se=this.get(Jt),Te=B+"Anchor",Ee=this.getPrePoint(B,ut),un=Z[Te];Object(f.s)(un)||(ie=se.getLinkPointByAnchor(un)),ie=ie||se.getLinkPoint(Ee),Object(f.s)(ie.index)||this.set(B+"AnchorIndex",ie.index)}return ie},F.prototype.getPrePoint=function(B,Z){if(Z&&Z.length)return Z[B==="source"?0:Z.length-1];var ut=B==="source"?"target":"source";return this.getEndPoint(ut)},F.prototype.getEndPoint=function(B){var Z=B+"Node",ut=Yr[B]+"Point",Bt=this.get(Z);return Bt?Bt.get("model"):this.get(ut)},F.prototype.getControlPointsByCenter=function(B){var Z=this.getEndPoint("source"),ut=this.getEndPoint("target"),Bt=this.get("shapeFactory"),Jt=B.type;return Bt.getControlPoints(Jt,{startPoint:Z,endPoint:ut})},F.prototype.getEndCenter=function(B){var Z=B+"Node",ut=Yr[B]+"Point",Bt=this.get(Z);if(Bt){var Jt=Bt.getBBox();return{x:Jt.centerX,y:Jt.centerY}}return this.get(ut)},F.prototype.init=function(){ve.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},F.prototype.getShapeCfg=function(B){var Z=this.get("linkCenter"),ut=ve.prototype.getShapeCfg.call(this,B);if(Z)ut.startPoint=this.getEndCenter("source"),ut.endPoint=this.getEndCenter("target");else{var Bt=ut.controlPoints||this.getControlPointsByCenter(ut);ut.startPoint=this.getLinkPoint("source",B,Bt),ut.endPoint=this.getLinkPoint("target",B,Bt)}return ut.sourceNode=this.get("sourceNode"),ut.targetNode=this.get("targetNode"),ut},F.prototype.getModel=function(){var B=this.get("model"),Z=this.get("sourceNode"),ut=this.get("targetNode");return Z?delete B.sourceNode:B.source=this.get("startPoint"),ut?delete B.targetNode:B.target=this.get("endPoint"),Object(f.x)(B.source)||Object(f.w)(B.source)||(B.source=B.source.getID()),Object(f.x)(B.target)||Object(f.w)(B.target)||(B.target=B.target.getID()),B},F.prototype.setSource=function(B){this.setEnd("source",B),this.set("source",B)},F.prototype.setTarget=function(B){this.setEnd("target",B),this.set("target",B)},F.prototype.getSource=function(){return this.get("source")},F.prototype.getTarget=function(){return this.get("target")},F.prototype.updatePosition=function(){},F.prototype.update=function(B,Z){Z===void 0&&(Z=!1);var ut=this.get("model"),Bt=ut.visible,Jt=B.visible;Bt!==Jt&&Jt!==void 0&&this.changeVisibility(Jt);var ie=this.get("styles");if(B.stateStyles){var se=B.stateStyles;Object(f.A)(ie,se),delete B.stateStyles}Object.assign(ut,B),this.updateShape(),this.afterUpdate(),this.clearCache()},F.prototype.destroy=function(){var B=this.get("sourceNode"),Z=this.get("targetNode");B&&!B.destroyed&&B.removeEdge(this),Z&&!Z.destroyed&&Z.removeEdge(this),ve.prototype.destroy.call(this)},F}(pr),Nr=function(ve){function F(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(F,ve),F.prototype.getNearestPoint=function(B,Z){for(var ut=0,Bt=B[0],Jt=ht(B[0],Z),ie=0;ie<B.length;ie++){var se=B[ie],Te=ht(se,Z);Te<Jt&&(Bt=se,Jt=Te,ut=ie)}return Bt.anchorIndex=ut,Bt},F.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},F.prototype.getEdges=function(){return this.get("edges")},F.prototype.getInEdges=function(){var B=this;return this.get("edges").filter(function(Z){return Z.get("target")===B})},F.prototype.getOutEdges=function(){var B=this;return this.get("edges").filter(function(Z){return Z.get("source")===B})},F.prototype.getNeighbors=function(B){var Z=this,ut=this.get("edges");return B==="target"?ut.filter(function(Bt){return Bt.getSource()===Z}).map(function(Bt){return Bt.getTarget()}):B==="source"?ut.filter(function(Bt){return Bt.getTarget()===Z}).map(function(Bt){return Bt.getSource()}):ut.map(function(Bt){return Bt.getSource()===Z?Bt.getTarget():Bt.getSource()})},F.prototype.getLinkPointByAnchor=function(B){return this.getAnchorPoints()[B]},F.prototype.getLinkPoint=function(B){var Z,ut,Bt=this.get("keyShape").get("type"),Jt=this.get("type"),ie=this.getBBox();Jt==="combo"?(Z=ie.centerX||(ie.maxX+ie.minX)/2,ut=ie.centerY||(ie.maxY+ie.minY)/2):(Z=ie.centerX,ut=ie.centerY);var se,Te=this.getAnchorPoints();switch(Bt){case"circle":se=N({x:Z,y:ut,r:ie.width/2},B);break;case"ellipse":se=Y({x:Z,y:ut,rx:ie.width/2,ry:ie.height/2},B);break;default:se=T(ie,B)}var Ee=se;return Te.length&&(Ee||(Ee=B),Ee=this.getNearestPoint(Te,Ee)),Ee||(Ee={x:Z,y:ut}),Ee},F.prototype.getAnchorPoints=function(){var B=this.get("anchorPointsCache");if(!B){B=[];var Z=this.get("shapeFactory"),ut=this.getBBox(),Bt=this.get("model"),Jt=this.getShapeCfg(Bt),ie=Bt.type,se=Z.getAnchorPoints(ie,Jt)||[];Object(f.f)(se,function(Te,Ee){var un={x:ut.minX+Te[0]*ut.width,y:ut.minY+Te[1]*ut.height,anchorIndex:Ee};B.push(un)}),this.set("anchorPointsCache",B)}return B},F.prototype.addEdge=function(B){this.get("edges").push(B)},F.prototype.lock=function(){this.set("locked",!0)},F.prototype.unlock=function(){this.set("locked",!1)},F.prototype.hasLocked=function(){return this.get("locked")},F.prototype.removeEdge=function(B){var Z=this.getEdges(),ut=Z.indexOf(B);ut>-1&&Z.splice(ut,1)},F.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},F.prototype.isOnlyMove=function(B){if(!B)return!1;var Z=!Object(f.s)(B.x),ut=!Object(f.s)(B.y),Bt=Object.keys(B);return Bt.length===1&&(Z||ut)||Bt.length===2&&Z&&ut},F}(pr),Xr=function(ve){function F(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(F,ve),F.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},F.prototype.getShapeCfg=function(B){var Z=this.get("styles"),ut=this.get("bbox");if(Z&&ut){var Bt=B,Jt={r:Math.hypot(ut.height,ut.width)/2||gt.defaultCombo.size[0]/2,width:ut.width||gt.defaultCombo.size[0],height:ut.height||gt.defaultCombo.size[1]};Bt.style=Object(n.a)(Object(n.a)(Object(n.a)({},Z),B.style),Jt);var ie=B.padding||gt.defaultCombo.padding;return Object(f.t)(ie)?(Jt.r+=ie,Jt.width+=2*ie,Jt.height+=2*ie):(Jt.r+=ie[0],Jt.width+=ie[1]+ie[3]||2*ie[1],Jt.height+=ie[0]+ie[2]||2*ie[0]),this.set("sizeCache",Jt),Bt}return B},F.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var B=this.get("keyShape"),Z=this.get("group"),ut=Tn(B,Z);ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2;var Bt=this.get("sizeCache"),Jt=this.get("bboxCache")||{},ie=Jt.x,se=Jt.x;return Bt?(B.get("type")==="circle"?(ut.width=2*Bt.r,ut.height=2*Bt.r):(ut.width=Bt.width,ut.height=Bt.height),ut.minX=ut.centerX-ut.width/2,ut.minY=ut.centerY-ut.height/2,ut.maxX=ut.centerX+ut.width/2,ut.maxY=ut.centerY+ut.height/2):(ut.width=ut.maxX-ut.minX,ut.height=ut.maxY-ut.minY,ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2),ut.x=ut.minX,ut.y=ut.minY,ut.x===ie&&ut.y===se||this.set("anchorPointsCache",null),ut}},F.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},F.prototype.getNodes=function(){return this.get("nodes")},F.prototype.getCombos=function(){return this.get("combos")},F.prototype.addChild=function(B){switch(B.getType()){case"node":this.addNode(B);break;case"combo":this.addCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},F.prototype.addCombo=function(B){return this.get("combos").push(B),!0},F.prototype.addNode=function(B){return this.get("nodes").push(B),!0},F.prototype.removeChild=function(B){switch(B.getType()){case"node":this.removeNode(B);break;case"combo":this.removeCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},F.prototype.removeCombo=function(B){if(B){var Z=this.getCombos(),ut=Z.indexOf(B);return ut>-1&&(Z.splice(ut,1),!0)}},F.prototype.removeNode=function(B){if(B){var Z=this.getNodes(),ut=Z.indexOf(B);return ut>-1&&(Z.splice(ut,1),!0)}},F.prototype.isOnlyMove=function(B){return!1},F.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},F.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},F.prototype.destroy=function(){if(!this.destroyed){var B=this.get("animate"),Z=this.get("group");B&&Z.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),Z.remove(),this._cfg=null,this.destroyed=!0}},F}(Nr),Kr=function(){function ve(F){this.graph=F,this.destroyed=!1}return ve.prototype.addItem=function(F,B){var Z=this,ut=this.graph,Bt=F==="vedge"?"edge":F,Jt=ut.get(Bt+"Group")||ut.get("group"),ie=Object(f.I)(Bt),se=null,Te=ut.get(Bt+Object(f.I)("stateStyles"))||{},Ee=ut.get("default"+ie);B.stateStyles&&(Te=B.stateStyles),Ee&&Object(f.f)(Ee,function(Dn,zn){Object(f.v)(Dn)&&!Object(f.m)(Dn)?B[zn]=Object(f.e)({},Dn,B[zn]):Object(f.m)(Dn)?B[zn]=B[zn]||Object(f.c)(Ee[zn]):B[zn]=B[zn]||Ee[zn]});var un=ut.get(Bt+"Mapper");if(un){var xn=un(B);xn.stateStyles&&(Te=xn.stateStyles,delete xn.stateStyles),Object(f.f)(xn,function(Dn,zn){Object(f.v)(Dn)&&!Object(f.m)(Dn)?B[zn]=Object(f.e)({},B[zn],Dn):B[zn]=xn[zn]||B[zn]})}if(ut.emit("beforeadditem",{type:F,model:B}),F==="edge"||F==="vedge"){var zt=void 0,Yt=void 0;if(zt=B.source,Yt=B.target,zt&&Object(f.x)(zt)&&(zt=ut.findById(zt)),Yt&&Object(f.x)(Yt)&&(Yt=ut.findById(Yt)),!zt||!Yt)return void console.warn("The source or target node of edge "+B.id+" does not exist!");zt.getType&&zt.getType()==="combo"&&(B.isComboEdge=!0),Yt.getType&&Yt.getType()==="combo"&&(B.isComboEdge=!0),se=new Br({model:B,source:zt,target:Yt,styles:Te,linkCenter:ut.get("linkCenter"),group:Jt.addGroup()})}else if(F==="node")se=new Nr({model:B,styles:Te,group:Jt.addGroup()});else if(F==="combo"){var Se=B.children,Wt=Sr(Se,ut);B.x=Wt.x||B.x||100*Math.random(),B.y=Wt.y||B.y||100*Math.random();var ue=Jt.addGroup();ue.setZIndex(B.depth);var vn=(se=new Xr({model:B,styles:Te,bbox:Wt,group:ue})).getModel();(Se||[]).forEach(function(Dn){var zn=ut.findById(Dn.id);se.addChild(zn),Dn.depth=vn.depth+2}),B.collapsed&&setTimeout(function(){ut.collapseCombo(se),Z.updateCombo(se,[])},250)}if(se)return ut.get(F+"s").push(se),ut.get("itemMap")[se.get("id")]=se,ut.emit("afteradditem",{item:se,model:B}),se},ve.prototype.updateItem=function(F,B){var Z,ut,Bt=this.graph;if(Object(f.x)(F)&&(F=Bt.findById(F)),F&&!F.destroyed){var Jt="";F.getType&&(Jt=F.getType());var ie=Bt.get(Jt+"Mapper"),se=F.getModel(),Te=F.isOnlyMove(B);if(ie){var Ee=ie(Object(f.e)({},se,B)),un=Object(f.e)({},se,Ee,B);Ee.stateStyles&&(F.set("styles",un.stateStyles),delete un.stateStyles),Object(f.f)(un,function(vn,Dn){B[Dn]=vn})}else Object(f.f)(B,function(vn,Dn){se[Dn]&&Object(f.v)(vn)&&!Object(f.m)(vn)&&(B[Dn]=Object(n.a)(Object(n.a)({},se[Dn]),B[Dn]))});if(Bt.emit("beforeupdateitem",{item:F,cfg:B}),Jt==="edge"){if(B.source){var xn=B.source;Object(f.x)(xn)&&(xn=Bt.findById(xn)),F.setSource(xn)}if(B.target){var zt=B.target;Object(f.x)(zt)&&(zt=Bt.findById(zt)),F.setTarget(zt)}F.update(B)}if(Jt==="node"||Jt==="combo"){F.update(B,Te);var Yt=F.getEdges(),Se=Vr(B);if(Se&&Jt==="node")Object(f.f)(Yt,function(vn){vn.refresh()});else if(Se&&Jt==="combo"){var Wt=F.get("shapeFactory"),ue=se.type||"circle";(se.animate===void 0||B.animate===void 0?(ut=(Z=Wt[ue])===null||Z===void 0?void 0:Z.options)===null||ut===void 0?void 0:ut.animate:se.animate||B.animate)?setTimeout(function(){if(F&&!F.destroyed){var vn=F.getKeyShape();vn&&!vn.destroyed&&Object(f.f)(Yt,function(Dn){Dn&&!Dn.destroyed&&Dn.refresh()})}},201):Object(f.f)(Yt,function(vn){vn.refresh()})}}Bt.emit("afterupdateitem",{item:F,cfg:B})}},ve.prototype.updateCombo=function(F,B){var Z,ut,Bt=this.graph;if(Object(f.x)(F)&&(F=Bt.findById(F)),F&&!F.destroyed){var Jt=Sr(B,Bt);F.set("bbox",Jt),F.update({x:Jt.x,y:Jt.y});var ie=F.getEdges()||[],se=ie.length,Te=F.getModel(),Ee=F.get("shapeFactory"),un=Te.type||"circle";if(Te.animate===void 0?(ut=(Z=Ee[un])===null||Z===void 0?void 0:Z.options)===null||ut===void 0?void 0:ut.animate:Te.animate)setTimeout(function(){if(F&&!F.destroyed){var Yt=F.getKeyShape();if(Yt&&!Yt.destroyed)for(var Se=0;Se<se;Se++){var Wt=ie[Se];Wt&&!Wt.destroyed&&Wt.refresh()}}},201);else for(var xn=0;xn<se;xn++){var zt=ie[xn];zt&&!zt.destroyed&&zt.refresh()}}},ve.prototype.collapseCombo=function(F){var B=this.graph;Object(f.x)(F)&&(F=B.findById(F));var Z=F.getChildren();Z.nodes.forEach(function(ut){B.hideItem(ut)}),Z.combos.forEach(function(ut){B.hideItem(ut)})},ve.prototype.expandCombo=function(F){var B=this.graph;Object(f.x)(F)&&(F=B.findById(F));var Z=F.getChildren();Z.nodes.forEach(function(ut){B.showItem(ut)}),Z.combos.forEach(function(ut){ut.getModel().collapsed?ut.show():B.showItem(ut)})},ve.prototype.removeItem=function(F){var B=this,Z=this.graph;if(Object(f.x)(F)&&(F=Z.findById(F)),F&&!F.destroyed){var ut=Object(f.c)(F.getModel());Z.emit("beforeremoveitem",{item:ut});var Bt="";F.getType&&(Bt=F.getType());var Jt=Z.get(Bt+"s"),ie=Jt.indexOf(F);if(ie>-1&&Jt.splice(ie,1),Bt==="edge"){var se=Z.get("v"+Bt+"s"),Te=se.indexOf(F);Te>-1&&se.splice(Te,1)}var Ee=F.get("id");delete Z.get("itemMap")[Ee];var un=Z.get("comboTrees"),xn=F.get("id");if(Bt==="node"){var zt=F.getModel().comboId;if(un){var Yt=un,Se=!1;un.forEach(function(Gn){Se||_n(Gn,function(Ze){if(Ze.id===xn&&Yt){var Ce=Yt.indexOf(Ze);return Yt.splice(Ce,1),Se=!0,!1}return Yt=Ze.children,!0})})}for(var Wt=(zn=F.getEdges()).length-1;Wt>=0;Wt--)Z.removeItem(zn[Wt],!1);zt&&Z.updateCombo(zt)}else if(Bt==="combo"){var ue,vn=F.getModel().parentId,Dn=!1;(un||[]).forEach(function(Gn){Dn||_n(Gn,function(Ze){return Ze.id!==xn||(ue=Ze,Dn=!0,!1)})}),ue.removed=!0,ue&&ue.children&&ue.children.forEach(function(Gn){B.removeItem(Gn.id)});var zn;for(Wt=(zn=F.getEdges()).length;Wt>=0;Wt--)Z.removeItem(zn[Wt],!1);vn&&Z.updateCombo(vn)}F.destroy(),Z.emit("afterremoveitem",{item:ut})}},ve.prototype.setItemState=function(F,B,Z){var ut=this.graph,Bt=B;Object(f.x)(Z)&&(Bt=B+":"+Z),F.hasState(Bt)===Z&&Z||Object(f.x)(Z)&&F.hasState(Bt)||(ut.emit("beforeitemstatechange",{item:F,state:Bt,enabled:Z}),F.setState(B,Z),ut.autoPaint(),ut.emit("afteritemstatechange",{item:F,state:Bt,enabled:Z}))},ve.prototype.priorityState=function(F,B){var Z=this.graph,ut=F;Object(f.x)(F)&&(ut=Z.findById(F)),this.setItemState(ut,B,!1),this.setItemState(ut,B,!0)},ve.prototype.clearItemStates=function(F,B){var Z=this.graph;Object(f.x)(F)&&(F=Z.findById(F)),Z.emit("beforeitemstatesclear",{item:F,states:B}),F.clearStates(B),Z.emit("afteritemstatesclear",{item:F,states:B})},ve.prototype.refreshItem=function(F){var B=this.graph;Object(f.x)(F)&&(F=B.findById(F)),B.emit("beforeitemrefresh",{item:F}),F.refresh(),B.emit("afteritemrefresh",{item:F})},ve.prototype.addCombos=function(F,B){var Z=this,ut=this.graph;(F||[]).forEach(function(Jt){Kn(Jt,function(ie){var se;return B.forEach(function(Te){Te.id===ie.id&&(Te.children=ie.children,Te.depth=ie.depth,se=Te)}),se&&Z.addItem("combo",se),!0})});var Bt=ut.get("comboGroup");Bt&&Bt.sort()},ve.prototype.changeItemVisibility=function(F,B){var Z=this,ut=this.graph;if(Object(f.x)(F)&&(F=ut.findById(F)),F){if(ut.emit("beforeitemvisibilitychange",{item:F,visible:B}),F.changeVisibility(B),F.getType&&F.getType()==="node"){var Bt=F.getEdges();Object(f.f)(Bt,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&Z.changeItemVisibility(Ee,B)})}else if(F.getType&&F.getType()==="combo"){var Jt=ut.get("comboTrees"),ie=F.get("id"),se=[],Te=!1;(Jt||[]).forEach(function(Ee){Te||Ee.children&&Ee.children.length!==0&&_n(Ee,function(un){return un.id!==ie||(se=un.children,Te=!0,!1)})}),se&&se.forEach(function(Ee){var un=ut.findById(Ee.id);Z.changeItemVisibility(un,B)}),Bt=F.getEdges(),Object(f.f)(Bt,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&Z.changeItemVisibility(Ee,B)})}return ut.emit("afteritemvisibilitychange",{item:F,visible:B}),F}console.warn("The item to be shown or hidden does not exist!")},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ve}(),ni=null,fi=function(){function ve(F){this.graph=F,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return ve.checkCache=function(F,B,Z){if(Z[B]){var ut=Z[B].indexOf(F);ut>=0&&Z[B].splice(ut,1)}},ve.cacheState=function(F,B,Z){Z[B]||(Z[B]=[]),Z[B].push(F)},ve.prototype.updateState=function(F,B,Z){var ut=this,Bt=ve.checkCache,Jt=ve.cacheState;if(!F.destroyed){var ie=this.cachedStates,se=ie.enabled,Te=ie.disabled;Z?(Bt(F,B,Te),Jt(F,B,se)):(Bt(F,B,se),Jt(F,B,Te)),ni&&clearTimeout(ni),ni=setTimeout(function(){ni=null,ut.updateGraphStates()},16)}},ve.prototype.updateStates=function(F,B,Z){var ut=this;Object(f.x)(B)?this.updateState(F,B,Z):B.forEach(function(Bt){ut.updateState(F,Bt,Z)})},ve.prototype.updateGraphStates=function(){var F=this.graph.get("states"),B=this.cachedStates;Object(f.f)(B.disabled,function(Z,ut){F[ut]&&(F[ut]=F[ut].filter(function(Bt){return Z.indexOf(Bt)<0&&!Z.destroyed}))}),Object(f.f)(B.enabled,function(Z,ut){if(F[ut]){var Bt={};F[ut].forEach(function(Jt){Jt.destroyed||(Bt[Jt.get("id")]=!0)}),Z.forEach(function(Jt){if(!Jt.destroyed){var ie=Jt.get("id");Bt[ie]||(Bt[ie]=!0,F[ut].push(Jt))}})}else F[ut]=Z}),this.graph.emit("graphstatechange",{states:F}),this.cachedStates={enabled:{},disabled:{}}},ve.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ni&&clearTimeout(ni),ni=null,this.destroyed=!0},ve}(),$r=e(31),ci=function(F,B){return F&&B?F.replace(/\\?\{([^{}]+)\}/g,function(Z,ut){if(Z.charAt(0)==="\\")return Z.slice(1);var Bt=B[ut];return Bt===0&&(Bt="0"),Bt||""}):F},Qr=function(F){var B=[];if(F.length<2)throw new Error("point length must largn than 2, now it's "+F.length);for(var Z=0,ut=F;Z<ut.length;Z++){var Bt=ut[Z],Jt=Bt.x,ie=Bt.y;B.push(Jt),B.push(ie)}var se=Object($r.a)(B);return se.unshift(["M",F[0].x,F[0].y]),se},gi=function(F,B,Z,ut){Z===void 0&&(Z=0),ut===void 0&&(ut=0);var Bt={x:(1-Z)*F.x+Z*B.x,y:(1-Z)*F.y+Z*B.y},Jt=[0,0];d.c.normalize(Jt,[B.x-F.x,B.y-F.y]),Jt&&(Jt[0]||Jt[1])||(Jt=[0,0]);var ie=[-Jt[1]*ut,Jt[0]*ut];return Bt.x+=ie[0],Bt.y+=ie[1],Bt},Oi=function(F,B){var Z=F.length;if(!Z)return"";for(var ut="",Bt=0;Bt<Z;Bt++){var Jt=F[Bt];ut+=ci(Bt===0?"M{x} {y}":"L{x} {y}",Jt)}return B&&(ut+="Z"),ut},bi=function(F){var B=[];return F.forEach(function(Z){if(Z[0]!=="A")for(var ut=1;ut<Z.length;ut+=2)B.push([Z[ut],Z[ut+1]]);else{var Bt=Z.length;B.push([Z[Bt-2],Z[Bt-1]])}}),B},zi=function(F){if(F.length<2)throw new Error("point length must largn than 2, now it's "+F.length);var B=F[0],Z=F[1],ut=F[F.length-1],Bt=F[F.length-2];F.unshift(ut),F.unshift(Bt),F.push(B),F.push(Z);for(var Jt=[],ie=1;ie<F.length-2;ie+=1){var se=F[ie-1].x,Te=F[ie-1].y,Ee=F[ie].x,un=F[ie].y,xn=F[ie+1].x,zt=F[ie+1].y,Yt=Ee+(xn-se)/6,Se=un+(zt-Te)/6,Wt=xn-((ie!==F.length-2?F[ie+2].x:xn)-Ee)/6,ue=zt-((ie!==F.length-2?F[ie+2].y:zt)-un)/6;Jt.push(["C",Yt,Se,Wt,ue,xn,zt])}return Jt.unshift(["M",ut.x,ut.y]),Jt},Qi=function(F,B){return d.c.scale([0,0],d.c.normalize([0,0],F),B)},io=function(F,B){var Z=[F[1]-B[1],B[0]-F[0]],ut=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);if(ut===0)throw new Error("p0 should not be equal to p1");return[Z[0]/ut,Z[1]/ut]},Wi=function(F,B){return[B[0]-F[0],B[1]-F[1]]};function Zi(ve,F){if(!ve||ve.length<1)return"";if(ve.length===1)return function(se){var Te=[se[0][0],se[0][1]-F],Ee=[se[0][0],se[0][1]+F];return"M "+Te+" A "+F+","+F+",0,0,0,"+Ee+" A "+F+","+F+",0,0,0,"+Te}(ve);if(ve.length===2)return function(se){var Te=d.c.scale([0,0],io(se[0],se[1]),F),Ee=d.c.scale([0,0],Te,-1),un=d.c.add([0,0],se[0],Te),xn=d.c.add([0,0],se[1],Te),zt=d.c.add([0,0],se[1],Ee),Yt=d.c.add([0,0],se[0],Ee);return"M "+un+" L "+xn+" A "+[F,F,"0,0,0",zt].join(",")+" L "+Yt+" A "+[F,F,"0,0,0",un].join(",")}(ve);for(var B=new Array(ve.length),Z=0;Z<B.length;++Z){var ut=Z===0?ve[ve.length-1]:ve[Z-1],Bt=ve[Z],Jt=d.c.scale([0,0],io(ut,Bt),F);B[Z]=[d.c.add([0,0],ut,Jt),d.c.add([0,0],Bt,Jt)]}var ie="A "+[F,F,"0,0,0,"].join(",");return(B=B.map(function(se,Te){var Ee="";return Te===0&&(Ee="M "+B[B.length-1][1]+" "),Ee+=ie+se[0]+" L "+se[1]})).join(" ")}function Pi(ve,F){var B,Z,ut,Bt=ve.length;if(!ve||Bt<1)return"";if(Bt===1)return Z=[(B=ve)[0][0],B[0][1]-F],ut=[B[0][0],B[0][1]+F],"M "+Z+" A "+[F,F,"0,0,0",ut].join(",")+" A "+[F,F,"0,0,0",Z].join(",");if(Bt===2)return function(Ee){var un=Wi(Ee[0],Ee[1]),xn=Qi(un,F),zt=d.c.add([0,0],Ee[0],d.c.scale([0,0],xn,-1)),Yt=d.c.add([0,0],Ee[1],xn),Se=1.2*F,Wt=Qi(d.c.normalize([0,0],un),Se),ue=d.c.scale([0,0],Wt,-1),vn=d.c.add([0,0],zt,ue),Dn=d.c.add([0,0],Yt,ue),zn=d.c.add([0,0],zt,Wt);return"M "+zt+" C "+[vn,Dn,Yt].join(",")+" S "+[zn,zt].join(",")+" Z"}(ve);for(var Jt=ve.map(function(Ee,un){var xn=ve[(un+1)%Bt];return{p:Ee,v:d.c.normalize([0,0],Wi(Ee,xn))}}),ie=0;ie<Jt.length;++ie){var se=ie>0?ie-1:Bt-1,Te=d.c.normalize([0,0],d.c.add([0,0],Jt[se].v,d.c.scale([0,0],Jt[ie].v,-1)));Jt[ie].p=d.c.add([0,0],Jt[ie].p,d.c.scale([0,0],Te,F))}return Jt.map(function(Ee){var un=Ee.p;return{x:un[0],y:un[1]}})}var no=function(F,B,Z){return(F.y-Z.y)*(B.x-Z.x)-(F.x-Z.x)*(B.y-Z.y)},Mo=function(F){var B=F.map(function(Jt){return{x:Jt.getModel().x,y:Jt.getModel().y}});if(B.sort(function(Jt,ie){return Jt.x===ie.x?Jt.y-ie.y:Jt.x-ie.x}),B.length===1)return B;for(var Z=[],ut=0;ut<B.length;ut++){for(;Z.length>=2&&no(Z[Z.length-2],Z[Z.length-1],B[ut])<=0;)Z.pop();Z.push(B[ut])}var Bt=[];for(ut=B.length-1;ut>=0;ut--){for(;Bt.length>=2&&no(Bt[Bt.length-2],Bt[Bt.length-1],B[ut])<=0;)Bt.pop();Bt.push(B[ut])}return Bt.pop(),Z.pop(),Z.concat(Bt)},ao={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function uo(ve,F,B){var Z=!1,ut=function(se,Te){return F.cells[se+Te*F.width]},Bt=function(se,Te){var Ee=0;return ut(se-1,Te-1)>=B&&(Ee+=1),ut(se,Te-1)>B&&(Ee+=2),ut(se-1,Te)>B&&(Ee+=4),ut(se,Te)>B&&(Ee+=8),Ee},Jt=function(se,Te){for(var Ee,un,xn=se,zt=Te,Yt=0;Yt<F.width*F.height;Yt++){if(Ee=xn,un=zt,ve.findIndex(function(Wt){return Wt.x===xn&&Wt.y===zt})>-1){if(ve[0].x===xn&&ve[0].y===zt)return!0}else ve.push({x:xn,y:zt});var Se=Bt(xn,zt);switch(Se){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:xn++;break;case 12:case 14:case 4:xn--;break;case 6:Ee===0&&(un===-1?xn-=1:xn+=1);break;case 1:case 13:case 5:zt--;break;case 9:Ee===1&&(un===0?zt-=1:zt+=1);break;case 10:case 8:case 11:zt++;break;default:return console.warn("Marching squares invalid state: "+Se),!0}}};this.march=function(){for(var ie=0;ie<F.width&&!Z;ie+=1)for(var se=0;se<F.height&&!Z;se+=1)ut(ie,se)>B&&Bt(ie,se)!==15&&(Z=Jt(ie,se));return Z}}var xo=function(F,B){var Z=Number.POSITIVE_INFINITY,ut=null;return F.forEach(function(Bt){var Jt=P(Bt,B);Jt>=0&&Jt<Z&&(ut=Bt,Z=Jt)}),ut};function oe(ve,F,B,Z,ut){var Bt=function(Jt,ie,se){var Te=null,Ee=Number.POSITIVE_INFINITY;return ie.forEach(function(un){var xn={x:Jt.getModel().x,y:Jt.getModel().y},zt={x:un.getModel().x,y:un.getModel().y},Yt=k(xn,zt),Se=new tt(xn.x,xn.y,zt.x,zt.y),Wt=se.reduce(function(ue,vn){return P(vn,Se)>0?ue+1:ue},0);Yt*Math.pow(Wt+1,2)<Ee&&(Te=un,Ee=Yt*Math.pow(Wt+1,2))}),Te}(ve,B,F);return Bt===null?[]:function(Jt){for(var ie=[];Jt.length>0;){var se=Jt.pop();if(Jt.length===0){ie.push(se);break}var Te=Jt.pop(),Ee=new tt(se.x1,se.y1,Te.x2,Te.y2);xo(F,Ee)?(ie.push(se),Jt.push(Te)):Jt.push(Ee)}return ie}(function(Jt,ie,se,Te){var Ee=[],un=[];un.push(Jt);for(var xn=!0,zt=0,Yt=function(vn,Dn){var zn=!1;return Dn.forEach(function(Gn){zn||(g(vn,{x:Gn.x1,y:Gn.y1})||g(vn,{x:Gn.x2,y:Gn.y2}))&&(zn=!0)}),zn},Se=function(vn,Dn){for(var zn=0,Gn=Dn;zn<Gn.length;zn++){var Ze=Gn[zn].getBBox(),Ce=[[Ze.x,Ze.y],[Ze.x+Ze.width,Ze.y],[Ze.x,Ze.y+Ze.height],[Ze.x+Ze.width,Ze.y+Ze.height]];if(dt(Ce,vn.x,vn.y))return!0}return!1};xn&&zt<se;){xn=!1;for(var Wt=function(){var vn=un.pop(),Dn=xo(ie,vn);if(Dn){var zn=U(Dn,vn),Gn=zn[0];if(zn[1]===2){var Ze=function(R){for(var yt=Te,$t=Oe(Dn,yt,Gn,R),me=Yt($t,un)||Yt($t,Ee),Zt=Se($t,ie);!me&&Zt&&yt>=1;)$t=Oe(Dn,yt/=1.5,Gn,R),me=Yt($t,un)||Yt($t,Ee),Zt=Se($t,ie);!$t||me||R&&Zt||(un.push(new tt(vn.x1,vn.y1,$t.x,$t.y)),un.push(new tt($t.x,$t.y,vn.x2,vn.y2)),xn=!0)};Ze(!0),xn||Ze(!1)}}xn||Ee.push(vn),zt+=1};!xn&&un.length;)Wt()}for(;un.length;)Ee.push(un.pop());return Ee}(new tt(ve.getModel().x,ve.getModel().y,Bt.getModel().x,Bt.getModel().y),F,Z,ut))}var Kt=function(F,B,Z){var ut=Object.assign(ao,Z),Bt=H(F.map(function(Ze){return{x:Ze.getModel().x,y:Ze.getModel().y}}));F=F.sort(function(Ze,Ce){return k({x:Ze.getModel().x,y:Ze.getModel().y},Bt)-k({x:Ce.getModel().x,y:Ce.getModel().y},Bt)});var Jt=[],ie=[];F.forEach(function(Ze){oe(Ze,B,Jt,ut.maxRoutingIterations,ut.morphBuffer).forEach(function(Ce){ie.push(Ce)}),Jt.push(Ze)});for(var se,Te,Ee,un,xn,zt=function(Ze,Ce,R){var yt={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},$t=[];Ze.forEach(function(he){$t.push(he.getBBox())}),Ce.forEach(function(he){$t.push(he.getBBox())});for(var me=0,Zt=$t;me<Zt.length;me++){var de=Zt[me];yt.minX=(de.minX<yt.minX?de.minX:yt.minX)-R,yt.minY=(de.minY<yt.minY?de.minY:yt.minY)-R,yt.maxX=(de.maxX>yt.maxX?de.maxX:yt.maxX)+R,yt.maxY=(de.maxY>yt.maxY?de.maxY:yt.maxY)+R}return yt.width=yt.maxX-yt.minX,yt.height=yt.maxY-yt.minY,yt.x=yt.minX,yt.y=yt.minY,yt}(F,ie,ut.nodeR0),Yt=(se=zt.width,Te=zt.height,Ee=ut.pixelGroupSize,un=Math.ceil(se/Ee),xn=Math.ceil(Te/Ee),{cells:new Float32Array(Math.max(0,un*xn)).fill(0),width:un,height:xn}),Se=[],Wt=[],ue=0;ue<ut.maxMarchingIterations;ue++)if(te(F,B,ie,zt,Yt,ut),Wt=[],new uo(Se=[],Yt,ut.threshold).march()){var vn=Se.map(function(Ze){return{x:Math.round(Ze.x*ut.pixelGroupSize+zt.minX),y:Math.round(Ze.y*ut.pixelGroupSize+zt.minY)}});if(vn){var Dn=vn.length;if(ut.skip>1)for(Dn=Math.floor(vn.length/ut.skip);Dn<3&&ut.skip>1;)ut.skip-=1,Dn=Math.floor(vn.length/ut.skip);for(var zn=0,Gn=0;Gn<Dn;Gn+=1,zn+=ut.skip)Wt.push({x:vn[zn].x,y:vn[zn].y})}if(Wt&&function(){for(var Ze=0,Ce=F;Ze<Ce.length;Ze++){var R=Ce[Ze],yt=Wt.map(function($t){return[$t.x,$t.y]});if(!dt(yt,R.getBBox().centerX,R.getBBox().centerY))return!1}return!0}())return Wt;if(ut.threshold*=.9,ue<=.5*ut.maxMarchingIterations)ut.memberInfluenceFactor*=1.2,ut.edgeInfluenceFactor*=1.2;else{if(!(ut.nonMemberInfluenceFactor!==0&&B.length>0))break;ut.nonMemberInfluenceFactor*=.8}}return Wt};function te(ve,F,B,Z,ut,Bt){function Jt(xn,zt){var Yt=Math.floor((xn-zt)/Bt.pixelGroupSize);return Yt<0?0:Yt}function ie(xn,zt){return xn*Bt.pixelGroupSize+zt}var se=(Bt.nodeR0-Bt.nodeR1)*(Bt.nodeR0-Bt.nodeR1),Te=(Bt.edgeR0-Bt.edgeR1)*(Bt.edgeR0-Bt.edgeR1),Ee=function(zt,Yt){return[Math.min(Jt(zt.minX,Yt+Z.minX),ut.width),Math.min(Jt(zt.minY,Yt+Z.minY),ut.height),Math.min(Jt(zt.maxX,-Yt+Z.minX),ut.width),Math.min(Jt(zt.maxY,-Yt+Z.minY),ut.height)]},un=function(zt,Yt){for(var Se=zt.getBBox(),Wt=Ee(Se,Bt.nodeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],Gn=vn;Gn<zn;Gn+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Yt<0&&ut[Ze+Gn*ut.width]<=0)){var Ce=ie(Ze,Z.minX),R=ie(Gn,Z.minY),yt=G({x:Ce,y:R},{x:Se.minX,y:Se.minY,width:Se.width,height:Se.height});if(yt<Math.pow(Bt.nodeR1,2)){var $t=Math.sqrt(yt)-Bt.nodeR1;ut.cells[Ze+Gn*ut.width]+=Yt*$t*$t}}};Bt.nodeInfluenceFactor&&ve.forEach(function(xn){un(xn,Bt.nodeInfluenceFactor/se)}),Bt.edgeInfluenceFactor&&B.forEach(function(xn){(function(zt,Yt){for(var Se=zt.getBBox(),Wt=Ee(Se,Bt.edgeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],Gn=vn;Gn<zn;Gn+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Yt<0&&ut.cells[Ze+Gn*ut.width]<=0)){var Ce=ie(Ze,Z.minX),R=ie(Gn,Z.minY),yt=h({x:Ce,y:R},zt);if(yt<Math.pow(Bt.edgeR1,2)){var $t=Math.sqrt(yt)-Bt.edgeR1;ut.cells[Ze+Gn*ut.width]+=Yt*$t*$t}}})(xn,Bt.edgeInfluenceFactor/Te)}),Bt.negativeNodeInfluenceFactor&&F.forEach(function(xn){un(xn,Bt.negativeNodeInfluenceFactor/se)})}function Oe(ve,F,B,Z){var ut=ve.getBBox(),Bt=B[0],Jt=B[1],ie=B[2],se=B[3],Te={topLeft:{x:ut.minX-F,y:ut.minY-F},topRight:{x:ut.maxX+F,y:ut.minY-F},bottomLeft:{x:ut.minX-F,y:ut.maxY+F},bottomRight:{x:ut.maxX+F,y:ut.maxY+F}},Ee=ut.height*ut.width;function un(xn,zt){return ut.width*(.5*(xn.y-ut.minY+(zt.y-ut.minY)))}if(Jt)return Bt?Z?Te.topLeft:Te.bottomRight:ie?Z?Te.bottomLeft:Te.topRight:un(Jt,se)<.5*Ee?Jt.y>se.y?Z?Te.topLeft:Te.bottomRight:Z?Te.topRight:Te.bottomLeft:Jt.y<se.y?Z?Te.bottomLeft:Te.topRight:Z?Te.bottomRight:Te.topLeft;if(se){if(Bt)return Z?Te.topRight:Te.bottomLeft;if(ie)return Z?Te.bottomRight:Te.topLeft}return un(Bt,ie)<.5*Ee?Bt.x>ie.x?Z?Te.topLeft:Te.bottomRight:Z?Te.bottomLeft:Te.topRight:Bt.x<ie.x?Z?Te.topRight:Te.bottomLeft:Z?Te.bottomRight:Te.topLeft}var Qe=function(){function ve(F,B){this.cfg=Object(f.e)(this.getDefaultCfg(),B),this.graph=F,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(Z){return Object(f.x)(Z)?F.findById(Z):Z}),this.nonMembers=this.cfg.nonMembers.map(function(Z){return Object(f.x)(Z)?F.findById(Z):Z}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ve.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ve.prototype.setPadding=function(){var F=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+F:10+F,this.cfg.bubbleCfg={nodeR0:this.padding-F,nodeR1:this.padding-F,morphBuffer:this.padding-F}},ve.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ve.prototype.calcPath=function(F,B){var Z,ut,Bt;switch(this.type){case"round-convex":Bt=Zi((Z=Mo(F)).map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt);break;case"smooth-convex":(Z=Mo(F)).length===2?(Bt=Zi(Z.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt)):Z.length>2&&(Bt=Pi(Z.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=zi(Bt));break;case"bubble":ut=(Z=Kt(F,B,this.cfg.bubbleCfg)).length>=2&&zi(Z)}return ut},ve.prototype.render=function(){this.group.addShape("path",{attrs:Object(n.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},ve.prototype.addMember=function(F){if(F){Object(f.x)(F)&&(F=this.graph.findById(F)),this.members.push(F);var B=this.nonMembers.indexOf(F);return B>-1&&this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.addNonMember=function(F){if(F){Object(f.x)(F)&&(F=this.graph.findById(F)),this.nonMembers.push(F);var B=this.members.indexOf(F);return B>-1&&this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.removeMember=function(F){if(F){Object(f.x)(F)&&(F=this.graph.findById(F));var B=this.members.indexOf(F);return B>-1&&(this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.removeNonMember=function(F){if(F){Object(f.x)(F)&&(F=this.graph.findById(F));var B=this.nonMembers.indexOf(F);return B>-1&&(this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.updateData=function(F,B){var Z=this;this.group.findById(this.id).remove(),F&&(this.members=F.map(function(ut){return Object(f.x)(ut)?Z.graph.findById(ut):ut})),B&&(this.nonMembers=B.map(function(ut){return Object(f.x)(ut)?Z.graph.findById(ut):ut})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.updateStyle=function(F){this.group.findById(this.id).attr(Object(n.a)({},F))},ve.prototype.updateCfg=function(F){var B=this;this.cfg=Object(f.e)(this.cfg,F),this.id=this.cfg.id,this.group=this.cfg.group,F.members&&(this.members=this.cfg.members.map(function(Z){return Object(f.x)(Z)?B.graph.findById(Z):Z})),F.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(Z){return Object(f.x)(Z)?B.graph.findById(Z):Z})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.contain=function(F){var B,Z,ut=this,Bt=(B=Object(f.x)(F)?this.graph.findById(F):F).getKeyShape();if(B.get("type")==="path")Z=bi(Bt.attr("path"));else{var Jt=Bt.getCanvasBBox();Z=[[Jt.minX,Jt.minY],[Jt.maxX,Jt.minY],[Jt.maxX,Jt.maxY],[Jt.minX,Jt.maxY]]}return Z=Z.map(function(ie){var se=ut.graph.getPointByCanvas(ie[0],ie[1]);return[se.x,se.y]}),Mt(Z,bi(this.path))},ve.prototype.destroy=function(){this.group.remove(),this.cfg=null},ve}(),On=d.a.transform,Vn=function(ve){function F(B){var Z=ve.call(this)||this;return Z.cfg=Object(f.e)(Z.getDefaultCfg(),B),Z.init(),Z.animating=!1,Z.destroyed=!1,Z.cfg.enabledStack&&(Z.undoStack=new E.Stack(Z.cfg.maxStep),Z.redoStack=new E.Stack(Z.cfg.maxStep)),Z}return Object(n.b)(F,ve),F.prototype.init=function(){this.initCanvas();var B=new ye(this),Z=new mt(this),ut=new Kr(this),Bt=new fi(this);this.set({viewController:B,modeController:Z,itemController:ut,stateController:Bt}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},F.prototype.initGroups=function(){var B=this.get("canvas"),Z=this.get("canvas").get("el").id,ut=B.addGroup({id:Z+"-root",className:gt.rootContainerClassName});if(this.get("groupByTypes")){var Bt=ut.addGroup({id:Z+"-edge",className:gt.edgeContainerClassName}),Jt=ut.addGroup({id:Z+"-node",className:gt.nodeContainerClassName}),ie=ut.addGroup({id:Z+"-combo",className:gt.comboContainerClassName});ie.toBack(),this.set({nodeGroup:Jt,edgeGroup:Bt,comboGroup:ie})}var se=ut.addGroup({id:Z+"-delegate",className:gt.delegateContainerClassName});this.set({delegateGroup:se}),this.set("group",ut)},F.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},F.prototype.set=function(B,Z){return Object(f.w)(B)?this.cfg=Object(n.a)(Object(n.a)({},this.cfg),B):this.cfg[B]=Z,this},F.prototype.get=function(B){return this.cfg[B]},F.prototype.getGroup=function(){return this.get("group")},F.prototype.getContainer=function(){return this.get("container")},F.prototype.getMinZoom=function(){return this.get("minZoom")},F.prototype.setMinZoom=function(B){return this.set("minZoom",B)},F.prototype.getMaxZoom=function(){return this.get("maxZoom")},F.prototype.setMaxZoom=function(B){return this.set("maxZoom",B)},F.prototype.getWidth=function(){return this.get("width")},F.prototype.getHeight=function(){return this.get("height")},F.prototype.clearItemStates=function(B,Z){Object(f.x)(B)&&(B=this.findById(B));var ut=this.get("itemController");Z||(Z=B.get("states")),ut.clearItemStates(B,Z),this.get("stateController").updateStates(B,Z,!1)},F.prototype.node=function(B){typeof B=="function"&&this.set("nodeMapper",B)},F.prototype.edge=function(B){typeof B=="function"&&this.set("edgeMapper",B)},F.prototype.combo=function(B){typeof B=="function"&&this.set("comboMapper",B)},F.prototype.findById=function(B){return this.get("itemMap")[B]},F.prototype.find=function(B,Z){var ut,Bt=this.get(B+"s");return Object(f.f)(Bt,function(Jt,ie){if(Z(Jt,ie))return ut=Jt}),ut},F.prototype.findAll=function(B,Z){var ut=[];return Object(f.f)(this.get(B+"s"),function(Bt,Jt){Z(Bt,Jt)&&ut.push(Bt)}),ut},F.prototype.findAllByState=function(B,Z){return this.findAll(B,function(ut){return ut.hasState(Z)})},F.prototype.translate=function(B,Z){var ut=this.get("group"),Bt=Object(f.c)(ut.getMatrix());Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,[["t",B,Z]]),ut.setMatrix(Bt),this.emit("viewportchange",{action:"translate",matrix:ut.getMatrix()}),this.autoPaint()},F.prototype.moveTo=function(B,Z){var ut=this.get("group");Ft(ut,{x:B,y:Z}),this.emit("viewportchange",{action:"move",matrix:ut.getMatrix()})},F.prototype.fitView=function(B){B&&this.set("fitViewPadding",B),this.get("viewController").fitView(),this.autoPaint()},F.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},F.prototype.addBehaviors=function(B,Z){return this.get("modeController").manipulateBehaviors(B,Z,!0),this},F.prototype.removeBehaviors=function(B,Z){return this.get("modeController").manipulateBehaviors(B,Z,!1),this},F.prototype.updateBehavior=function(B,Z,ut){return this.get("modeController").updateBehavior(B,Z,ut),this},F.prototype.zoom=function(B,Z){var ut=this.get("group"),Bt=Object(f.c)(ut.getMatrix()),Jt=this.get("minZoom"),ie=this.get("maxZoom");Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,Z?[["t",-Z.x,-Z.y],["s",B,B],["t",Z.x,Z.y]]:[["s",B,B]]),Jt&&Bt[0]<Jt||ie&&Bt[0]>ie||(ut.setMatrix(Bt),this.emit("viewportchange",{action:"zoom",matrix:Bt}),this.autoPaint())},F.prototype.zoomTo=function(B,Z){var ut=B/this.getZoom();this.zoom(ut,Z)},F.prototype.focusItem=function(B,Z,ut){var Bt=this.get("viewController"),Jt=!1;Z?Jt=!0:Z===void 0&&(Jt=this.get("animate"));var ie={};ut?ie=ut:ut===void 0&&(ie=this.get("animateCfg")),Bt.focus(B,Jt,ie),this.autoPaint()},F.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},F.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},F.prototype.getPointByClient=function(B,Z){return this.get("viewController").getPointByClient(B,Z)},F.prototype.getClientByPoint=function(B,Z){return this.get("viewController").getClientByPoint(B,Z)},F.prototype.getPointByCanvas=function(B,Z){return this.get("viewController").getPointByCanvas(B,Z)},F.prototype.getCanvasByPoint=function(B,Z){return this.get("viewController").getCanvasByPoint(B,Z)},F.prototype.showItem=function(B,Z){Z===void 0&&(Z=!0);var ut=this.get("itemController").changeItemVisibility(B,!0);if(Z&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!1}],ie.nodes=[{id:Bt,visible:!0}];break;case"edge":Jt.nodes=[{id:Bt,visible:!1}],ie.edges=[{id:Bt,visible:!0}];break;case"combo":Jt.nodes=[{id:Bt,visible:!1}],ie.combos=[{id:Bt,visible:!0}]}this.pushStack("visible",{before:Jt,after:ie})}},F.prototype.hideItem=function(B,Z){Z===void 0&&(Z=!0);var ut=this.get("itemController").changeItemVisibility(B,!1);if(Z&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!0}],ie.nodes=[{id:Bt,visible:!1}];break;case"edge":Jt.nodes=[{id:Bt,visible:!0}],ie.edges=[{id:Bt,visible:!1}];break;case"combo":Jt.nodes=[{id:Bt,visible:!0}],ie.combos=[{id:Bt,visible:!1}]}this.pushStack("visible",{before:Jt,after:ie})}},F.prototype.refreshItem=function(B){this.get("itemController").refreshItem(B)},F.prototype.setAutoPaint=function(B){this.set("autoPaint",B),this.get("canvas").set("autoDraw",B)},F.prototype.remove=function(B,Z){Z===void 0&&(Z=!0),this.removeItem(B,Z)},F.prototype.removeItem=function(B,Z){Z===void 0&&(Z=!0);var ut=B;if(Object(f.x)(B)&&(ut=this.findById(B)),!ut&&Object(f.x)(B))console.warn("The item to be removed does not exist!");else if(ut){var Bt="";if(ut.getType&&(Bt=ut.getType()),Z&&this.get("enabledStack")){var Jt=Object(n.a)(Object(n.a)({},ut.getModel()),{itemType:Bt}),ie={};switch(Bt){case"node":ie.nodes=[Jt],ie.edges=[];for(var se=ut.getEdges(),Te=se.length-1;Te>=0;Te--)ie.edges.push(Object(n.a)(Object(n.a)({},se[Te].getModel()),{itemType:"edge"}));break;case"edge":ie.edges=[Jt];break;case"combo":ie.combos=[Jt]}this.pushStack("delete",{before:ie,after:{}})}if(Bt==="node"&&ut.getModel().comboId&&this.updateComboTree(ut),this.get("itemController").removeItem(ut),Bt==="combo"){var Ee=er(this.get("comboTrees"));this.set("comboTrees",Ee)}}},F.prototype.addItem=function(B,Z,ut,Bt){ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0);var Jt=this.get("comboSorted");this.set("comboSorted",Jt&&!Bt);var ie=this.get("itemController");if(!Z.id||!this.findById(Z.id)){var se,Te=this.get("comboTrees");if(Te||(Te=[]),B==="combo"){var Ee=this.get("itemMap"),un=!1;if(Te.forEach(function(zn){un||Kn(zn,function(Gn){if(Z.parentId===Gn.id){un=!0;var Ze=Object(n.a)({id:Z.id,depth:Gn.depth+2},Z);Gn.children?Gn.children.push(Ze):Gn.children=[Ze],Z.depth=Ze.depth,se=ie.addItem(B,Z)}var Ce=Ee[Gn.id];return un&&Ce&&Ce.getType&&Ce.getType()==="combo"&&ie.updateCombo(Ce,Gn.children),!0})}),!un){var xn=Object(n.a)({id:Z.id,depth:0},Z);Z.depth=xn.depth,Te.push(xn),se=ie.addItem(B,Z)}this.set("comboTrees",Te)}else if(B==="node"&&Object(f.x)(Z.comboId)&&Te){var zt;if((zt=this.findById(Z.comboId))&&zt.getType&&zt.getType()!=="combo")return void console.warn("'"+Z.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");se=ie.addItem(B,Z);var Yt=this.get("itemMap"),Se=!1,Wt=!1;(Te||[]).forEach(function(zn){Wt||Se||Kn(zn,function(Gn){if(Gn.id===Z.id)return Wt=!0,!1;if(Z.comboId===Gn.id&&!Wt){Se=!0;var Ze=Object(f.c)(Z);Ze.itemType="node",Gn.children?Gn.children.push(Ze):Gn.children=[Ze],Z.depth=Gn.depth+1}return Se&&Yt[Gn.id].getType&&Yt[Gn.id].getType()==="combo"&&ie.updateCombo(Yt[Gn.id],Gn.children),!0})})}else se=ie.addItem(B,Z);(B==="node"&&Z.comboId||B==="combo"&&Z.parentId)&&(zt=this.findById(Z.comboId||Z.parentId))&&zt.addChild(se);var ue=this.get("combos");if(ue&&ue.length>0&&this.sortCombos(),this.autoPaint(),ut&&this.get("enabledStack")){var vn=Object(n.a)(Object(n.a)({},se.getModel()),{itemType:B}),Dn={};switch(B){case"node":Dn.nodes=[vn];break;case"edge":Dn.edges=[vn];break;case"combo":Dn.combos=[vn]}this.pushStack("add",{before:{},after:Dn})}return se}console.warn("This item exists already. Be sure the id %c"+Z.id+"%c is unique.","font-size: 20px; color: red;","")},F.prototype.add=function(B,Z,ut,Bt){return ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0),this.addItem(B,Z,ut,Bt)},F.prototype.updateItem=function(B,Z,ut){var Bt=this;ut===void 0&&(ut=!0);var Jt,ie=this.get("itemController");Jt=Object(f.x)(B)?this.findById(B):B;var se=Object(f.c)(Jt.getModel()),Te="";Jt.getType&&(Te=Jt.getType());var Ee=Object(n.d)(Jt.getStates());if(Te==="combo"&&Object(f.f)(Ee,function(Yt){return Bt.setItemState(Jt,Yt,!1)}),ie.updateItem(Jt,Z),Te==="combo"&&Object(f.f)(Ee,function(Yt){return Bt.setItemState(Jt,Yt,!0)}),ut&&this.get("enabledStack")){var un={nodes:[],edges:[],combos:[]},xn={nodes:[],edges:[],combos:[]},zt=Object(n.a)({id:se.id},Z);switch(Te){case"node":un.nodes.push(se),xn.nodes.push(zt);break;case"edge":un.edges.push(se),xn.edges.push(zt);break;case"combo":un.combos.push(se),xn.combos.push(zt)}Te==="node"&&un.nodes.push(se),this.pushStack("update",{before:un,after:xn})}},F.prototype.update=function(B,Z,ut){ut===void 0&&(ut=!0),this.updateItem(B,Z,ut)},F.prototype.setItemState=function(B,Z,ut){Object(f.x)(B)&&(B=this.findById(B)),this.get("itemController").setItemState(B,Z,ut);var Bt=this.get("stateController");Object(f.x)(ut)?Bt.updateState(B,Z+":"+ut,!0):Bt.updateState(B,Z,ut)},F.prototype.priorityState=function(B,Z){this.get("itemController").priorityState(B,Z)},F.prototype.data=function(B){this.set("data",B)},F.prototype.render=function(){var B=this;this.set("comboSorted",!1);var Z=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!Z)throw new Error("data must be defined first");var ut=Z.nodes,Bt=ut===void 0?[]:ut,Jt=Z.edges,ie=Jt===void 0?[]:Jt,se=Z.combos,Te=se===void 0?[]:se;if(this.clear(),this.emit("beforerender"),Object(f.f)(Bt,function(zt){B.add("node",zt,!1,!1)}),Te&&Te.length!==0){var Ee=nr(Te,Bt);this.set("comboTrees",Ee),B.addCombos(Te)}Object(f.f)(ie,function(zt){B.add("edge",zt,!1,!1)});var un=B.get("animate");(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",!1);var xn=B.get("layoutController");if(xn){if(xn.layout(function(){B.get("fitView")?B.fitView():B.get("fitCenter")&&B.fitCenter(),B.autoPaint(),B.emit("afterrender"),(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",un)}),this.destroyed)return}else B.get("fitView")&&B.fitView(),B.get("fitCenter")&&B.fitCenter(),B.emit("afterrender"),B.set("animate",un);this.get("groupByTypes")||(Te&&Te.length!==0?this.sortCombos():Z.nodes&&Z.edges&&Z.nodes.length<Z.edges.length?this.getNodes().forEach(function(zt){zt.toFront()}):this.getEdges().forEach(function(zt){zt.toBack()})),this.get("enabledStack")&&this.pushStack("render")},F.prototype.read=function(B){this.data(B),this.render()},F.prototype.diffItems=function(B,Z,ut){var Bt,Jt=this,ie=this.get("itemMap");Object(f.f)(ut,function(se){if(Bt=ie[se.id]){if(Jt.get("animate")&&B==="node"){var Te=Bt.getContainer().getMatrix();Te||(Te=[1,0,0,0,1,0,0,0,1]),Bt.set("originAttrs",{x:Te[6],y:Te[7]})}Jt.updateItem(Bt,se,!1)}else Bt=Jt.addItem(B,se,!1);Bt&&Z[B+"s"].push(Bt)})},F.prototype.changeData=function(B,Z){Z===void 0&&(Z=!0);var ut=this;if(!B)return this;Z&&this.get("enabledStack")&&this.pushStack("changedata",{before:ut.save(),after:B}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Yt){return ut.clearItemStates(Yt)}),this.getEdges().map(function(Yt){return ut.clearItemStates(Yt)});var Bt=this.get("canvas"),Jt=Bt.get("localRefresh");Bt.set("localRefresh",!1),ut.get("data")||(ut.data(B),ut.render());var ie=this.get("itemMap"),se={nodes:[],edges:[]},Te=B.combos;if(Te){var Ee=nr(Te,B.nodes);this.set("comboTrees",Ee)}this.diffItems("node",se,B.nodes),Object(f.f)(ie,function(Yt,Se){ie[Se].getModel().depth=0,Yt.getType&&Yt.getType()==="edge"||(Yt.getType&&Yt.getType()==="combo"?(delete ie[Se],Yt.destroy()):se.nodes.indexOf(Yt)<0&&(delete ie[Se],ut.remove(Yt,!1)))});for(var un=this.getCombos(),xn=un.length-1;xn>=0;xn--)un[xn].destroyed&&un.splice(xn,1);Te&&(ut.addCombos(Te),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",se,B.edges),Object(f.f)(ie,function(Yt,Se){(!Yt.getType||Yt.getType()!=="node"&&Yt.getType()!=="combo")&&se.edges.indexOf(Yt)<0&&(delete ie[Se],ut.remove(Yt,!1))}),this.set({nodes:se.nodes,edges:se.edges});var zt=this.get("layoutController");return zt&&(zt.changeData(),ut.get("animate")&&!zt.getLayoutType()?ut.positionsAnimate():ut.autoPaint()),setTimeout(function(){Bt.set("localRefresh",Jt)},16),this},F.prototype.addCombos=function(B){var Z=this.get("comboTrees");this.get("itemController").addCombos(Z,B)},F.prototype.createCombo=function(B,Z){var ut=this;this.set("comboSorted",!1);var Bt,Jt="";if(B){if(Object(f.x)(B))Jt=B,Bt={id:B};else{if(!(Jt=B.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");Bt=B}var ie=Z.map(function(Te){var Ee=ut.findById(Te),un="";Ee.getType&&(un=Ee.getType());var xn={id:Ee.getID(),itemType:un};return un==="combo"?xn.parentId=Jt:un==="node"&&(xn.comboId=Jt),xn});Bt.children=ie,this.addItem("combo",Bt,!1),this.set("comboSorted",!1);var se=this.get("comboTrees");(se||[]).forEach(function(Te){Kn(Te,function(Ee){return Ee.id!==Jt||(Ee.itemType="combo",Ee.children=ie,!1)})}),se&&this.sortCombos()}},F.prototype.uncombo=function(B){var Z=this,ut=B;if(Object(f.x)(B)&&(ut=this.findById(B)),!ut||ut.getType&&ut.getType()!=="combo")console.warn("The item is not a combo!");else{var Bt=ut.getModel().parentId,Jt=this.get("comboTrees");Jt||(Jt=[]);var ie,se=this.get("itemMap"),Te=ut.get("id"),Ee=[],un=this.get("combos"),xn=this.findById(Bt);if(Jt.forEach(function(Yt){ie||Kn(Yt,function(Se){if(Se.id===Te){ie=Se,ut.getEdges().forEach(function(ue){Z.removeItem(ue,!1)});var Wt=un.indexOf(B);un.splice(Wt,1),delete se[Te],ut.destroy()}return!Bt||!ie||Se.id!==Bt||(xn.removeCombo(ut),(Wt=(Ee=Se.children).indexOf(ie))!==-1&&Ee.splice(Wt,1),ie.children.forEach(function(ue){var vn=Z.findById(ue.id),Dn=vn.getModel();vn.getType&&vn.getType()==="combo"?(ue.parentId=Bt,delete ue.comboId,Dn.parentId=Bt,delete Dn.comboId):vn.getType&&vn.getType()==="node"&&(ue.comboId=Bt,Dn.comboId=Bt),xn.addChild(vn),Ee.push(ue)}),!1)})}),!Bt&&ie){var zt=Jt.indexOf(ie);Jt.splice(zt,1),ie.children.forEach(function(Yt){Yt.parentId=void 0,Z.findById(Yt.id).getModel().parentId=void 0,Yt.itemType!=="node"&&Jt.push(Yt)})}}},F.prototype.updateCombos=function(){var B=this,Z=this.get("comboTrees"),ut=this.get("itemController"),Bt=this.get("itemMap");(Z||[]).forEach(function(Jt){Kn(Jt,function(ie){if(!ie)return!0;var se=Bt[ie.id];if(se&&se.getType&&se.getType()==="combo"){var Te=Object(n.d)(se.getStates());Object(f.f)(Te,function(Ee){return B.setItemState(se,Ee,!1)}),ut.updateCombo(se,ie.children),Object(f.f)(Te,function(Ee){return B.setItemState(se,Ee,!0)})}return!0})}),this.sortCombos()},F.prototype.updateCombo=function(B){var Z,ut=this,Bt=B;if(Object(f.x)(B)&&(Bt=this.findById(B)),!Bt||Bt.getType&&Bt.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{Z=Bt.get("id");var Jt=this.get("comboTrees"),ie=this.get("itemController"),se=this.get("itemMap");(Jt||[]).forEach(function(Te){Kn(Te,function(Ee){if(!Ee)return!0;var un=se[Ee.id];if(Z===Ee.id&&un&&un.getType&&un.getType()==="combo"){var xn=Object(n.d)(un.getStates());Object(f.f)(xn,function(zt){un.getStateStyle(zt)&&ut.setItemState(un,zt,!1)}),ie.updateCombo(un,Ee.children),Object(f.f)(xn,function(zt){un.getStateStyle(zt)&&ut.setItemState(un,zt,!0)}),Z&&(Z=Ee.parentId)}return!0})})}},F.prototype.updateComboTree=function(B,Z,ut){ut===void 0&&(ut=!0);var Bt;this.set("comboSorted",!1);var Jt,ie=(Bt=Object(f.x)(B)?this.findById(B):B).getModel(),se=ie.comboId||ie.parentId,Te="";if(Bt.getType&&(Te=Bt.getType()),Z&&Te==="combo"){var Ee,un=this.get("comboTrees"),xn=!0;if((un||[]).forEach(function(ue){Ee||_n(ue,function(vn){if(!Ee)return vn.id===Bt.getID()&&(Ee=vn),!0})}),_n(Ee,function(ue){return ue.id!==Z||(xn=!1,!1)}),!xn)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(ut&&this.get("enabledStack")){var zt={},Yt={};Te==="combo"?(zt.combos=[{id:ie.id,parentId:ie.parentId}],Yt.combos=[{id:ie.id,parentId:Z}]):Te==="node"&&(zt.nodes=[{id:ie.id,parentId:ie.comboId}],Yt.nodes=[{id:ie.id,parentId:Z}]),this.pushStack("updateComboTree",{before:zt,after:Yt})}if(ie.parentId||ie.comboId){var Se=this.findById(ie.parentId||ie.comboId);Se&&Se.removeChild(Bt)}Te==="combo"?ie.parentId=Z:Te==="node"&&(ie.comboId=Z),Z&&(Jt=this.findById(Z))&&Jt.addChild(Bt),se&&(Jt=this.findById(se))&&Jt.removeChild(Bt);var Wt=er(this.get("comboTrees"),ie.id,Z);this.set("comboTrees",Wt),this.updateCombos()},F.prototype.save=function(){var B=[],Z=[],ut=[];return Object(f.f)(this.get("nodes"),function(Bt){B.push(Bt.getModel())}),Object(f.f)(this.get("edges"),function(Bt){Z.push(Bt.getModel())}),Object(f.f)(this.get("combos"),function(Bt){ut.push(Bt.getModel())}),{nodes:B,edges:Z,combos:ut}},F.prototype.changeSize=function(B,Z){return this.get("viewController").changeSize(B,Z),this},F.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var B=this.get("nodes"),Z=this.get("edges"),ut=this.get("edges");Object(f.f)(B,function(Bt){Bt.refresh()}),Object(f.f)(Z,function(Bt){Bt.refresh()}),Object(f.f)(ut,function(Bt){Bt.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},F.prototype.getNodes=function(){return this.get("nodes")},F.prototype.getEdges=function(){return this.get("edges")},F.prototype.getCombos=function(){return this.get("combos")},F.prototype.getComboChildren=function(B){if(Object(f.x)(B)&&(B=this.findById(B)),B&&(!B.getType||B.getType()==="combo"))return B.getChildren();console.warn("The combo does not exist!")},F.prototype.positionsAnimate=function(){var B=this;B.emit("beforeanimate");var Z=B.get("animateCfg"),ut=Z.onFrame,Bt=B.getNodes(),Jt=Bt.map(function(ie){var se=ie.getModel();return{id:se.id,x:se.x,y:se.y}});B.isAnimating()&&B.stopAnimate(),B.get("canvas").animate(function(ie){Object(f.f)(Jt,function(se){var Te=B.findById(se.id);if(Te&&!Te.destroyed){var Ee=Te.get("originAttrs"),un=Te.get("model");if(!Ee){var xn=Te.getContainer().getMatrix();xn||(xn=[1,0,0,0,1,0,0,0,1]),Ee={x:xn[6],y:xn[7]},Te.set("originAttrs",Ee)}if(ut){var zt=ut(Te,ie,se,Ee);Te.set("model",Object.assign(un,zt))}else un.x=Ee.x+(se.x-Ee.x)*ie,un.y=Ee.y+(se.y-Ee.y)*ie}}),B.refreshPositions()},{duration:Z.duration,easing:Z.easing,callback:function(){Object(f.f)(Bt,function(se){se.set("originAttrs",null)}),Z.callback&&Z.callback(),B.emit("afteranimate"),B.animating=!1}})},F.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var B,Z=this.get("nodes"),ut=this.get("edges"),Bt=this.get("vedges"),Jt=this.get("combos"),ie={};Object(f.f)(Z,function(se){B=se.getModel();var Te=se.get("originAttrs");Te&&B.x===Te.x&&B.y===Te.y||(se.updatePosition({x:B.x,y:B.y}),ie[B.id]=!0,B.comboId&&(ie[B.comboId]=!0))}),Jt&&Jt.length!==0&&this.updateCombos(),Object(f.f)(ut,function(se){var Te=se.getSource().getModel(),Ee=se.getTarget().getModel();(ie[Te.id]||ie[Ee.id]||se.getModel().isComboEdge)&&se.refresh()}),Object(f.f)(Bt,function(se){se.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},F.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},F.prototype.isAnimating=function(){return this.animating},F.prototype.getZoom=function(){var B=this.get("group").getMatrix();return B?B[0]:1},F.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},F.prototype.setMode=function(B){return this.get("modeController").setMode(B),this},F.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},F.prototype.updateLayout=function(B){var Z,ut=this.get("layoutController");Object(f.x)(B)?B={type:Z=B}:Z=B.type;var Bt=this.get("layout"),Jt=Bt?Bt.type:void 0;if(Z&&Jt!==Z||B.gpuEnabled!==void 0&&B.gpuEnabled!==Bt.gpuEnabled)Z||(Z=Jt),this.set("layout",B),ut.changeLayout(Z);else{var ie={};Object.assign(ie,Bt,B),ie.type=Jt||"random",this.set("layout",ie),ut.updateLayoutCfg(ie)}},F.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},F.prototype.layout=function(){var B=this.get("layoutController"),Z=this.get("layout");Z&&B&&(Z.workerEnabled?B.layout():B.layoutMethod?B.relayout(!0):B.layout())},F.prototype.collapseCombo=function(B){var Z=this;if(Object(f.x)(B)&&(B=this.findById(B)),B){this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var ut=B.getModel();this.get("itemController").collapseCombo(B),ut.collapsed=!0;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Te=!1,Ee={};(se||[]).forEach(function(zt){Ee[zt.id]=zt}),(se||[]).forEach(function(zt){Te||_n(zt,function(Yt){if(Te&&Ee[Yt.id])return!1;if(ut.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Yt.id&&(Te=!0),Te){var Se=Z.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn=[];Bt.forEach(function(zt){if(!zt.isVisible()||zt.getModel().isVEdge){var Yt=zt.getSource(),Se=zt.getTarget();if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Yt.getModel().id===ut.id){if((Dn=zt.getModel()).isVEdge)return void Z.removeItem(zt,!1);for(var Wt=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(Wt.parentId||Wt.comboId))||!Wt.parentId&&!Wt.comboId)return;Wt=Se.getModel()}var ue=Wt.id;if(un[ut.id+"-"+ue])return void(un[ut.id+"-"+ue]+=Dn.size||1);var vn=Z.addItem("vedge",{source:ut.id,target:ue,isVEdge:!0},!1);un[ut.id+"-"+ue]=Dn.size||1,xn.push(vn)}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||Se.getModel().id===ut.id){var Dn;if((Dn=zt.getModel()).isVEdge)return void Z.removeItem(zt,!1);for(var zn=Yt.getModel();!Yt.isVisible();){if(!(Yt=Z.findById(zn.parentId||zn.comboId))||!zn.parentId&&!zn.comboId)return;zn=Yt.getModel()}var Gn=zn.id;if(un[Gn+"-"+ut.id])return void(un[Gn+"-"+ut.id]+=Dn.size||1);vn=Z.addItem("vedge",{target:ut.id,source:Gn,isVEdge:!0},!1),un[Gn+"-"+ut.id]=Dn.size||1,xn.push(vn)}}}),xn.forEach(function(zt){var Yt=zt.getModel();Z.updateItem(zt,{size:un[Yt.source+"-"+Yt.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:B})}else console.warn("The combo to be collapsed does not exist!")},F.prototype.expandCombo=function(B){var Z=this;if(Object(f.x)(B)&&(B=this.findById(B)),!B||B.getType&&B.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var ut=B.getModel();this.get("itemController").expandCombo(B),ut.collapsed=!1;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Te=!1,Ee={};(se||[]).forEach(function(zt){Ee[zt.id]=zt}),(se||[]).forEach(function(zt){Te||_n(zt,function(Yt){if(Te&&Ee[Yt.id])return!1;if(ut.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Yt.id&&(Te=!0),Te){var Se=Z.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn={};Bt.forEach(function(zt){if(!zt.isVisible()||zt.getModel().isVEdge){var Yt=zt.getSource(),Se=zt.getTarget(),Wt=Yt.get("id"),ue=Se.get("id");if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Wt===ut.id){if(zt.getModel().isVEdge)return void Z.removeItem(zt,!1);for(var vn=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;vn=Se.getModel()}ue=vn.id;for(var Dn=Yt.getModel();!Yt.isVisible();){if(!(Yt=Z.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;if(Dn.comboId===ut.id||Dn.parentId===ut.id)break;Dn=Yt.getModel()}if(Wt=Dn.id,ue){if(un[Gn=Wt+"-"+ue])return un[Gn]+=zt.getModel().size||1,void Z.updateItem(xn[Gn],{size:un[Gn]},!1);var zn=Z.addItem("vedge",{source:Wt,target:ue,isVEdge:!0},!1);un[Gn]=zt.getModel().size||1,xn[Gn]=zn}}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||ue===ut.id){if(zt.getModel().isVEdge)return void Z.removeItem(zt,!1);for(Dn=Yt.getModel();!Yt.isVisible();){if(!(Yt=Z.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;Dn=Yt.getModel()}for(Wt=Dn.id,vn=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;if(vn.comboId===ut.id||vn.parentId===ut.id)break;vn=Se.getModel()}if(ue=vn.id,Wt){var Gn;if(un[Gn=Wt+"-"+ue])return un[Gn]+=zt.getModel().size||1,void Z.updateItem(xn[Gn],{size:un[Gn]},!1);zn=Z.addItem("vedge",{target:ue,source:Wt,isVEdge:!0},!1),un[Gn]=zt.getModel().size||1,xn[Gn]=zn}}else(Jt.includes(Yt)||ie.includes(Yt))&&(Jt.includes(Se)||ie.includes(Se))&&Yt.isVisible()&&Se.isVisible()&&zt.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:B})}},F.prototype.collapseExpandCombo=function(B){if(Object(f.x)(B)&&(B=this.findById(B)),!B.getType||B.getType()==="combo"){for(var Z=B.getModel(),ut=this.findById(Z.parentId);ut;){var Bt=ut.getModel();if(Bt.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(ut=void 0);ut=this.findById(Bt.parentId)}Z.collapsed?this.expandCombo(B):this.collapseCombo(B),this.updateCombo(B)}},F.prototype.sortCombos=function(){var B=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var Z=[],ut={};(this.get("comboTrees")||[]).forEach(function(Bt){_n(Bt,function(Jt){return Z[Jt.depth]?Z[Jt.depth].push(Jt.id):Z[Jt.depth]=[Jt.id],ut[Jt.id]=Jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(Bt){var Jt=Bt.getModel(),ie=ut[Jt.source]||0,se=ut[Jt.target]||0,Te=Math.max(ie,se);Z[Te]?Z[Te].push(Jt.id):Z[Te]=[Jt.id]}),Z.forEach(function(Bt){if(Bt&&Bt.length)for(var Jt=Bt.length-1;Jt>=0;Jt--){var ie=B.findById(Bt[Jt]);ie&&ie.toFront()}})}},F.prototype.getNeighbors=function(B,Z){var ut=B;return Object(f.x)(B)&&(ut=this.findById(B)),ut.getNeighbors(Z)},F.prototype.getNodeDegree=function(B,Z){Z===void 0&&(Z=void 0);var ut=B;Object(f.x)(B)&&(ut=this.findById(B));var Bt=this.get("degrees");Bt||(Bt=Object(E.getDegree)(this.get("data"))),this.set("degees",Bt);var Jt,ie=Bt[ut.getID()];switch(Z){case"in":Jt=ie.inDegree;break;case"out":Jt=ie.outDegree;break;case"all":Jt=ie;break;default:Jt=ie.degree}return Jt},F.prototype.getUndoStack=function(){return this.undoStack},F.prototype.getRedoStack=function(){return this.redoStack},F.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},F.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},F.prototype.pushStack=function(B,Z,ut){if(B===void 0&&(B="update"),ut===void 0&&(ut="undo"),this.get("enabledStack")){var Bt=Z?Object(f.c)(Z):{before:{},after:Object(f.c)(this.save())};ut==="redo"?this.redoStack.push({action:B,data:Bt}):this.undoStack.push({action:B,data:Bt}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},F.prototype.getAdjMatrix=function(B,Z){B===void 0&&(B=!0),Z===void 0&&(Z=this.get("directed"));var ut=this.get("adjMatrix");return ut&&B||(ut=Object(E.getAdjMatrix)(this.save(),Z),this.set("adjMatrix",ut)),ut},F.prototype.getShortestPathMatrix=function(B,Z){B===void 0&&(B=!0),Z===void 0&&(Z=this.get("directed"));var ut=this.get("adjMatrix"),Bt=this.get("shortestPathMatrix");return ut&&B||(ut=Object(E.getAdjMatrix)(this.save(),Z),this.set("adjMatrix",ut)),Bt&&B||(Bt=Object(E.floydWarshall)(this.save(),Z),this.set("shortestPathMatrix",Bt)),Bt},F.prototype.on=function(B,Z,ut){return ve.prototype.on.call(this,B,Z,ut)},F.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},F.prototype.createHull=function(B){if(B.members&&!(B.members.length<1)){var Z=this.get("hullGroup"),ut=this.get("hullMap");if(ut||(ut={},this.set("hullMap",ut)),Z||((Z=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",Z)),ut[B.id])return console.warn("Existed hull id."),ut[B.id];var Bt=Z.addGroup({id:B.id+"-container"}),Jt=new Qe(this,Object(n.a)(Object(n.a)({},B),{group:Bt}));return ut[Jt.id]=Jt,Jt}console.warn("Create hull failed! The members is empty.")},F.prototype.getHulls=function(){return this.get("hullMap")},F.prototype.getHullById=function(B){return this.get("hullMap")[B]},F.prototype.removeHull=function(B){var Z;Z=Object(f.x)(B)?this.getHullById(B):B,delete this.get("hullMap")[Z.id],Z.destroy()},F.prototype.removeHulls=function(){var B=this.getHulls();B&&Object.keys(B).length&&(B.forEach(function(Z){Z.destroy()}),this.set("hullMap",{}))},F}(s.a);function Xn(ve){return(Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(ve)}var $e=d.a.transform,rn=["startArrow","endArrow"],on={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$n={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:on,combo:on},vr={options:{},itemType:"",type:"",getCustomConfig:function(F){return{}},getOptions:function(F){return Object(f.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(F)||{},F)},draw:function(F,B){var Z=this.drawShape(F,B);return Z.set("className",this.itemType+"-shape"),F.label&&this.drawLabel(F,B).set("className",this.itemType+"-label"),Z},afterDraw:function(F,B,Z){},drawShape:function(F,B){return null},drawLabel:function(F,B){var Z=this.getOptions(F).labelCfg||{},ut=this.getLabelStyle(F,Z,B),Bt=ut.rotate;delete ut.rotate;var Jt=B.addShape("text",{attrs:ut,draggable:!0,className:"text-shape",name:"text-shape"});if(Bt){var ie=Jt.getBBox(),se=Jt.getMatrix();if(se||(se=[1,0,0,0,1,0,0,0,1]),ut.rotateCenter)switch(ut.rotateCenter){case"center":se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]]);break;case"lefttop":se=$e(se,[["t",-ut.x,-ut.y],["r",Bt],["t",ut.x,ut.y]]);break;case"leftcenter":se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);break;default:se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]])}else se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);Jt.setMatrix(se)}if(ut.background){var Te=this.drawLabelBg(F,B,Jt),Ee=this.itemType+"-label-bg";Te.set("classname",Ee),Jt.toFront()}return Jt},drawLabelBg:function(F,B,Z){var ut=this.options.labelCfg,Bt=Object(f.A)({},ut,F.labelCfg),Jt=this.getLabelBgStyleByPosition(Z,F,Bt,B);return B.addShape("rect",{name:"text-bg-shape",attrs:Jt})},getLabelStyleByPosition:function(F,B,Z){return{text:F.label}},getLabelBgStyleByPosition:function(F,B,Z,ut){return{}},getLabelStyle:function(F,B,Z){var ut=this.getLabelStyleByPosition(F,B,Z),Bt=this.itemType+"Label",Jt=gt[Bt]?gt[Bt].style:null;return Object(n.a)(Object(n.a)(Object(n.a)({},Jt),ut),B.style)},getShapeStyle:function(F){return F.style},update:function(F,B){this.updateShapeStyle(F,B),this.updateLabel(F,B)},updateShapeStyle:function(F,B){var Z=B.getContainer(),ut=B.getKeyShape(),Bt=Object(f.A)({},ut.attr(),F.style),Jt=function(Te){var Ee,un=Bt[Te];if(Object(f.w)(un)){var xn=Z.find(function(zt){return zt.get("name")===Te});xn&&xn.attr(un)}else ut.attr(((Ee={})[Te]=un,Ee))};for(var ie in Bt)Jt(ie)},updateLabel:function(F,B){var Z=B.getContainer(),ut=this.getOptions({}).labelCfg,Bt=this.itemType+"-label",Jt=Z.find(function(zn){return zn.get("className")===Bt}),ie=this.itemType+"-label-bg",se=Z.find(function(zn){return zn.get("classname")===ie});if(F.label||F.label==="")if(Jt){var Te={};B.getModel&&(Te=B.getModel().labelCfg);var Ee=Object(f.e)({},ut,Te,F.labelCfg),un=this.getLabelStyleByPosition(F,Ee,Z),xn=F.labelCfg?F.labelCfg.style:void 0,zt=Ee.style&&Ee.style.background,Yt=Object(n.a)(Object(n.a)(Object(n.a)({},Jt.attr()),un),xn),Se=Yt.rotate;if(delete Yt.rotate,Se){var Wt=[1,0,0,0,1,0,0,0,1];Wt=$e(Wt,[["t",-Yt.x,-Yt.y],["r",Se],["t",Yt.x,Yt.y]]),Jt.resetMatrix(),Jt.attr(Object(n.a)(Object(n.a)({},Yt),{matrix:Wt}))}else Jt.resetMatrix(),Jt.attr(Yt);if(se)if(Yt.background){var ue=this.getLabelBgStyleByPosition(Jt,F,Ee,Z),vn=Object(n.a)(Object(n.a)({},ue),zt);if(se.resetMatrix(),Se){var Dn=[1,0,0,0,1,0,0,0,1];Dn=$e(Dn,[["t",-vn.x,-vn.y],["r",Se],["t",vn.x,vn.y]]),vn.matrix=Dn}se.attr(vn)}else Z.removeChild(se);else Yt.background&&((se=this.drawLabelBg(F,Z,Jt)).set("classname",ie),Jt.toFront())}else this.drawLabel(F,Z).set("className",Bt)},afterUpdate:function(F,B){},setState:function(F,B,Z){var ut,Bt,Jt=Z.get("keyShape");if(Jt){var ie=Z.getType(),se=Object(f.n)(B)?F:F+":"+B,Te=this.getStateStyle(se,Z),Ee=Z.getStateStyle(se);if(Ee||Te){var un=Object(f.A)({},Ee||Te),xn=Z.getContainer(),zt={x:1,y:1,cx:1,cy:1};if(ie==="combo"&&(zt.r=1,zt.width=1,zt.height=1),B){var Yt=function(ce){var Me,ze=un[ce];if(Object(f.w)(ze)&&!rn.includes(ce)){var Ve=xn.find(function(ke){return ke.get("name")===ce});Ve&&Ve.attr(ze)}else Jt.attr(((Me={})[ce]=ze,Me))};for(var Se in un)Yt(Se)}else{var Wt=ti(Z.getCurrentStatesStyle()),ue=Z.getModel(),vn=Object(f.A)({},ue.style,ti(Z.getOriginStyle())),Dn=Jt.get("name"),zn=Jt.attr(),Gn={};Object.keys(zn).forEach(function(he){if(he!=="img"){var ce=zn[he];ce&&Xn(ce)==="object"?Gn[he]=Object(f.c)(ce):Gn[he]=ce}});var Ze={},Ce=function(ce){var Me=un[ce];if(Object(f.w)(Me)&&!rn.includes(ce)){var ze=xn.find(function(tn){return tn.get("name")===ce});if(ze){var Ve=Object(f.c)(ze.attr());Object(f.f)(Me,function(tn,De){if(ce===Dn&&Gn[De]&&!zt[De]){delete Gn[De];var cn=vn[ce][De]||$n[ie][De];Jt.attr(De,cn)}else if(Ve[De]||Ve[De]===0){delete Ve[De];var fn=vn[ce][De]||$n[ie][De];ze.attr(De,fn)}}),Ze[ce]=Ve}}else if(Gn[ce]&&!zt[ce]){delete Gn[ce];var ke=vn[ce]||(vn[Dn]?vn[Dn][ce]:void 0)||$n[ie][ce];Jt.attr(ce,ke)}};for(var R in un)Ce(R);for(var Se in Dn?Ze[Dn]=Gn:Object(f.A)(Ze,Gn),Wt)if(!zt[Se]){var yt=Wt[Se];Object(f.w)(yt)&&!rn.includes(Se)||(Dn?(Object(f.A)(vn[Dn],((Bt={})[Se]=yt,Bt)),delete vn[Se]):Object(f.A)(vn,((ut={})[Se]=yt,ut)),delete Wt[Se])}var $t={};Object(f.e)($t,vn,Ze,Wt);var me=!1,Zt=function(ce){var Me,ze,Ve=$t[ce];if(Object(f.w)(Ve)&&!rn.includes(ce)){var ke=xn.find(function(De){return De.get("name")===ce});ke&&(ce===Dn&&(ie==="combo"&&(delete Ve.r,delete Ve.width,delete Ve.height),me=!0),ke.attr(Ve))}else if(!me){var tn=Ve||$n[ie][ce];ie==="combo"?Dn||Jt.attr(((Me={})[ce]=tn,Me)):Jt.attr(((ze={})[ce]=tn,ze))}};for(var de in $t)Zt(de)}}}},getStateStyle:function(F,B){var Z=B.getModel(),ut=B.getType(),Bt=this.getOptions(Z),Jt=Bt.stateStyles,ie=Bt.style,se=ie===void 0?{}:ie,Te=Z.stateStyles?Z.stateStyles[F]:Jt&&Jt[F];return ut==="combo"?Object(f.c)(Te):Object(f.A)({},se,Te)},getControlPoints:function(F){return F.controlPoints},getAnchorPoints:function(F){return this.getOptions(F).anchorPoints}},ar={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:gt.nodeLabel.offset,getSize:function(F){var B=F.size||this.getOptions({}).size||gt.defaultNode.size;return Object(f.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(f.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(F,B){var Z=B.position||this.labelPosition;if(Z==="center")return{x:0,y:0,text:F.label};var ut=B.offset;Object(f.s)(ut)&&(ut=this.offset);var Bt,Jt=this.getSize(F),ie=Jt[0],se=Jt[1];switch(Z){case"top":Bt={x:0,y:0-se/2-ut,textBaseline:"bottom"};break;case"bottom":Bt={x:0,y:se/2+ut,textBaseline:"top"};break;case"left":Bt={x:0-ie/2-ut,y:0,textAlign:"right"};break;default:Bt={x:ie/2+ut,y:0,textAlign:"left"}}return Bt.text=F.label,Bt},getLabelBgStyleByPosition:function(F,B,Z,ut){if(!F)return{};var Bt=F.getBBox(),Jt=Z.style&&Z.style.background;if(!Jt)return{};var ie,se=Ut(Jt.padding),Te=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],un=Z.offset;return Object(f.s)(un)&&(un=this.offset),ie={x:Bt.minX-se[3],y:Bt.minY-se[0]},ie=Object(n.a)(Object(n.a)(Object(n.a)({},ie),Jt),{width:Te,height:Ee})},drawShape:function(F,B){var Z=this.shapeType,ut=this.getShapeStyle(F);return B.addShape(Z,{attrs:ut,draggable:!0,name:"node-shape"})},updateLinkPoints:function(F,B){var Z,ut=this.getOptions(F).linkPoints,Bt=B.find(function(Ce){return Ce.get("className")==="link-point-left"}),Jt=B.find(function(Ce){return Ce.get("className")==="link-point-right"}),ie=B.find(function(Ce){return Ce.get("className")==="link-point-top"}),se=B.find(function(Ce){return Ce.get("className")==="link-point-bottom"});Bt&&(Z=Bt.attr()),Jt&&!Z&&(Z=Jt.attr()),ie&&!Z&&(Z=ie.attr()),se&&!Z&&(Z=se.attr()),Z||(Z=ut);var Te=Object(f.A)({},Z,F.linkPoints),Ee=Te.fill,un=Te.stroke,xn=Te.lineWidth,zt=Te.size/2;zt||(zt=Te.r);var Yt=F.linkPoints?F.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Se=Yt.left,Wt=Yt.right,ue=Yt.top,vn=Yt.bottom,Dn=this.getSize(F),zn=Dn[0],Gn=Dn[1],Ze={r:zt,fill:Ee,stroke:un,lineWidth:xn};Bt?Se||Se===void 0?Bt.attr(Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0})):Bt.remove():Se&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Jt?(Wt||Wt===void 0||Jt.remove(),Jt.attr(Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}))):Wt&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),ie?(ue||ue===void 0||ie.remove(),ie.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Gn/2}))):ue&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Gn/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),se?vn||vn===void 0?se.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:Gn/2})):se.remove():vn&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:Gn/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(F,B,Z,ut){B.get("keyShape").attr(Object(n.a)({},Z)),this.updateLabel(F,B),ut&&this.updateIcon(F,B)},updateIcon:function(F,B){var Z=this,ut=B.getContainer(),Bt=this.getOptions(F).icon,Jt=(F.icon?F.icon:{show:void 0}).show,ie=ut.find(function(xn){return xn.get("className")===Z.type+"-icon"});if(ie)if(Jt||Jt===void 0){var se=Object(f.A)({},ie.attr(),Bt),Te=se.width,Ee=se.height;ie.attr(Object(n.a)(Object(n.a)({},se),{x:-Te/2,y:-Ee/2}))}else ie.remove();else if(Jt){Te=Bt.width,Ee=Bt.height,ut.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Bt),{x:-Te/2,y:-Ee/2}),className:this.type+"-icon",name:this.type+"-icon"});var un=ut.find(function(xn){return xn.get("className")==="node-label"});un&&un.toFront()}}},rr=Object(n.a)(Object(n.a)({},vr),ar);jr.registerNode("single-node",rr);var Fr={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:gt.defaultEdge.size,style:{x:0,y:0,stroke:gt.defaultEdge.style.stroke,lineAppendWidth:gt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:gt.edgeLabel.style.fill,fontSize:gt.edgeLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.edgeStateStyles)},getPath:function(F){var B=[];return Object(f.f)(F,function(Z,ut){ut===0?B.push(["M",Z.x,Z.y]):B.push(["L",Z.x,Z.y])}),B},getShapeStyle:function(F){var B=this.options.style,Z={stroke:F.color},ut=Object(f.A)({},B,Z,F.style),Bt=F.size||gt.defaultEdge.size,Jt=(F=this.getPathPoints(F)).startPoint,ie=F.endPoint,se=this.getControlPoints(F),Te=[Jt];se&&(Te=Te.concat(se)),Te.push(ie);var Ee=this.getPath(Te);return Object(f.A)({},gt.defaultEdge.style,{stroke:gt.defaultEdge.color,lineWidth:Bt,path:Ee},ut)},updateShapeStyle:function(F,B){var Z=B.getContainer(),ut={stroke:F.color},Bt=Z.find(function(vn){return vn.get("className")==="edge-shape"})||B.getKeyShape(),Jt=F.size,ie=(F=this.getPathPoints(F)).startPoint,se=F.endPoint,Te=this.getControlPoints(F),Ee=[ie];Te&&(Ee=Ee.concat(Te)),Ee.push(se);var un=Bt.attr(),xn=Object(f.A)({},ut,un,F.style),zt=F.sourceNode,Yt=F.targetNode,Se={radius:xn.radius};Te||(Se={source:zt,target:Yt,offset:xn.offset,radius:xn.radius}),un.endArrow&&xn.endArrow===!1&&(F.style.endArrow={path:""}),un.startArrow&&xn.startArrow===!1&&(F.style.startArrow={path:""});var Wt=this.getPath(Ee,Se),ue=Object(f.A)(ut,Bt.attr(),{lineWidth:Jt,path:Wt},F.style);Bt&&Bt.attr(ue)},getLabelStyleByPosition:function(F,B,Z){var ut,Bt=B.position||this.labelPosition,Jt={},ie=Z&&Z.find(function(xn){return xn.get("className")==="edge-shape"});ut=Bt==="start"?0:Bt==="end"?1:.5;var se=B.refX||this.refX,Te=B.refY||this.refY;if(F.startPoint.x===F.endPoint.x&&F.startPoint.y===F.endPoint.y)return Jt.x=F.startPoint.x+se,Jt.y=F.startPoint.y+Te,Jt.text=F.label,Jt;var Ee=Object(f.s)(B.autoRotate)?this.labelAutoRotate:B.autoRotate,un=Mn(ie,ut,se,Te,Ee);return Jt.x=un.x,Jt.y=un.y,Jt.rotate=un.rotate,Jt.textAlign=this._getTextAlign(Bt,un.angle),Jt.text=F.label,Jt},getLabelBgStyleByPosition:function(F,B,Z,ut){if(!F)return{};var Bt=F.getBBox(),Jt=Z.style&&Z.style.background;if(!Jt)return{};var ie,se=Jt.padding,Te=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],un=Z.position||this.labelPosition,xn=Object(n.a)(Object(n.a)({},Jt),{width:Te,height:Ee,x:Bt.minX-se[2],y:Bt.minY-se[0],rotate:0}),zt=Object(f.s)(Z.autoRotate)?this.labelAutoRotate:Z.autoRotate,Yt=ut&&ut.find(function(Dn){return Dn.get("className")==="edge-shape"});ie=un==="start"?0:un==="end"?1:.5;var Se=Z.refX||this.refX,Wt=Z.refY||this.refY;if(B.startPoint.x===B.endPoint.x&&B.startPoint.y===B.endPoint.y)return xn.x=B.startPoint.x+Se-Te/2,xn.y=B.startPoint.y+Wt-Ee/2,xn;var ue=Mn(Yt,ie,Se-Te/2,Wt+Ee/2,zt),vn=ue.angle;return vn>.5*Math.PI&&vn<1.5*Math.PI&&(ue=Mn(Yt,ie,Se+Te/2,Wt+Ee/2,zt)),zt&&(xn.x=ue.x,xn.y=ue.y),xn.rotate=ue.rotate,xn},_getTextAlign:function(F,B){var Z="center";return B?(B%=2*Math.PI,F!=="center"&&(Z=B>=0&&B<=Math.PI/2||B>=1.5*Math.PI&&B<2*Math.PI?F:function(ut){var Bt=ut;return ut==="start"?Bt="end":ut==="end"&&(Bt="start"),Bt}(F)),Z):F},getControlPoints:function(F){return F.controlPoints},getPathPoints:function(F){return F},drawShape:function(F,B){var Z=this.getShapeStyle(F);return B.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:Z})},drawLabel:function(F,B){var Z=this.options.labelCfg,ut=Object(f.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Z,F.labelCfg),Bt=this.getLabelStyle(F,ut,B),Jt=Bt.rotate;delete Bt.rotate;var ie=B.addShape("text",{attrs:Bt,name:"text-shape"});if(Jt&&ie.rotateAtStart(Jt),Bt.background){var se=this.drawLabelBg(F,B,ie),Te=this.itemType+"-label-bg";se.set("classname",Te),ie.toFront()}return ie},drawLabelBg:function(F,B,Z){var ut=this.options.labelCfg,Bt=Object(f.e)({},ut,F.labelCfg),Jt=this.getLabelStyle(F,Bt,B).rotate,ie=this.getLabelBgStyleByPosition(Z,F,Bt,B);delete ie.rotate;var se=B.addShape("rect",{name:"text-bg-shape",attrs:ie});return Jt&&se.rotateAtStart(Jt),se}},Ar=Object(n.a)(Object(n.a)({},vr),Fr);jr.registerEdge("single-edge",Ar),jr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),jr.registerEdge("spline",{getPath:function(F){return Qr(F)}},"single-edge"),jr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(F){var B,Z,ut=F.startPoint,Bt=F.endPoint,Jt=(ut.x+Bt.x)/2,ie=(ut.y+Bt.y)/2;if(F.controlPoints!==void 0){if(Z=F.controlPoints[0],B=vt(ut,Z,Bt),ut.x<=Bt.x&&ut.y>Bt.y?this.clockwise=B.x>Z.x?0:1:ut.x<=Bt.x&&ut.y<Bt.y?this.clockwise=B.x>Z.x?1:0:ut.x>Bt.x&&ut.y<=Bt.y?this.clockwise=B.y<Z.y?0:1:this.clockwise=B.y<Z.y?1:0,(Z.x-ut.x)/(Z.y-ut.y)==(Bt.x-ut.x)/(Bt.y-ut.y))return[]}else{F.curveOffset===void 0&&(F.curveOffset=this.curveOffset),Object(f.m)(F.curveOffset)&&(F.curveOffset=F.curveOffset[0]),F.curveOffset<0?this.clockwise=0:this.clockwise=1;var se={x:Bt.x-ut.x,y:Bt.y-ut.y},Te=Math.atan2(se.y,se.x);Z={x:F.curveOffset*Math.cos(-Math.PI/2+Te)+Jt,y:F.curveOffset*Math.sin(-Math.PI/2+Te)+ie},B=vt(ut,Z,Bt)}var Ee=ht(ut,B);return[{x:Ee,y:Ee}]},getPath:function(F){var B=[];return B.push(["M",F[0].x,F[0].y]),F.length===2?B.push(["L",F[1].x,F[1].y]):B.push(["A",F[1].x,F[1].y,0,0,this.clockwise,F[2].x,F[2].y]),B}},"single-edge"),jr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(F){var B=F.controlPoints;if(!B||!B.length){var Z=F.startPoint,ut=F.endPoint;F.curveOffset===void 0&&(F.curveOffset=this.curveOffset),F.curvePosition===void 0&&(F.curvePosition=this.curvePosition),Object(f.m)(this.curveOffset)&&(F.curveOffset=F.curveOffset[0]),Object(f.m)(this.curvePosition)&&(F.curvePosition=F.curveOffset[0]),B=[gi(Z,ut,F.curvePosition,F.curveOffset)]}return B},getPath:function(F){var B=[];return B.push(["M",F[0].x,F[0].y]),B.push(["Q",F[1].x,F[1].y,F[2].x,F[2].y]),B}},"single-edge"),jr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(F){var B=F.controlPoints;if(F.curveOffset===void 0&&(F.curveOffset=this.curveOffset),F.curvePosition===void 0&&(F.curvePosition=this.curvePosition),Object(f.t)(F.curveOffset)&&(F.curveOffset=[F.curveOffset,-F.curveOffset]),Object(f.t)(F.curvePosition)&&(F.curvePosition=[F.curvePosition,1-F.curvePosition]),!B||!B.length||B.length<2){var Z=F.startPoint,ut=F.endPoint;B=[gi(Z,ut,F.curvePosition[0],F.curveOffset[0]),gi(Z,ut,F.curvePosition[1],F.curveOffset[1])]}return B},getPath:function(F){var B=[];return B.push(["M",F[0].x,F[0].y]),B.push(["C",F[1].x,F[1].y,F[2].x,F[2].y,F[3].x,F[3].y]),B}},"single-edge"),jr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(F){var B=F.startPoint,Z=F.endPoint;return F.curvePosition!==void 0&&(this.curvePosition=F.curvePosition),Object(f.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:B.x,y:(Z.y-B.y)*this.curvePosition[0]+B.y},{x:Z.x,y:(Z.y-B.y)*this.curvePosition[1]+B.y}]}},"cubic"),jr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(F){var B=F.startPoint,Z=F.endPoint;return F.curvePosition!==void 0&&(this.curvePosition=F.curvePosition),Object(f.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(Z.x-B.x)*this.curvePosition[0]+B.x,y:B.y},{x:(Z.x-B.x)*this.curvePosition[1]+B.x,y:Z.y}]}},"cubic"),jr.registerEdge("loop",{getPathPoints:function(F){return Rn(F)},getControlPoints:function(F){return F.controlPoints},afterDraw:function(F){F.controlPoints=void 0},afterUpdate:function(F){F.controlPoints=void 0}},"cubic");var wr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:gt.comboLabel.refX,refY:gt.comboLabel.refY,options:{style:{stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.comboStateStyles)},getSize:function(F){var B=Object(f.c)(F.size||this.options.size||gt.defaultCombo.size);return Object(f.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(f.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(F,B){var Z=B.position||this.labelPosition,ut=F.style,Bt=F.padding||this.options.padding;Object(f.m)(Bt)&&(Bt=Bt[0]);var Jt=B.refX,ie=B.refY;Object(f.s)(Jt)&&(Jt=this.refX),Object(f.s)(ie)&&(ie=this.refY);var se,Te=this.getSize(F),Ee=(Math.max(ut.r,Te[0]/2)||Te[0]/2)+Bt;switch(Z){case"top":se={x:0,y:-Ee-ie,textBaseline:"bottom",textAlign:"center"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:-Ee+Jt,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:F.label,textAlign:"center"};break;default:se={x:Ee+Jt,y:0,textAlign:"right"}}return se.text=F.label,se},drawShape:function(F,B){var Z=this.shapeType,ut=this.getShapeStyle(F);return B.addShape(Z,{attrs:ut,draggable:!0,name:"combo-shape"})},updateShape:function(F,B,Z){var ut=B.get("keyShape");(F.animate===void 0?this.options.animate:F.animate)&&ut.animate?ut.animate(Z,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},Z)),this.updateLabel(F,B)}},xr=Object(n.a)(Object(n.a)({},vr),wr);jr.registerCombo("single-combo",xr),jr.registerCombo("circle",{options:{size:[gt.defaultCombo.size[0],gt.defaultCombo.size[0]],padding:gt.defaultCombo.padding[0],animate:!0,style:{stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(n.a)({},gt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(F,B){var Z=this.getShapeStyle(F);return delete Z.height,delete Z.width,B.addShape("circle",{attrs:Z,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(F){var B=this.options.style,Z=F.padding||this.options.padding;Object(f.m)(Z)&&(Z=Z[0]);var ut,Bt={stroke:F.color},Jt=Object(f.A)({},B,Bt,F.style),ie=this.getSize(F);ut=!Object(f.t)(Jt.r)||isNaN(Jt.r)?ie[0]/2||gt.defaultCombo.style.r:Math.max(Jt.r,ie[0]/2)||ie[0]/2,Jt.r=ut+Z;var se=Object(n.a)({x:0,y:0},Jt);return F.style?F.style.r=ut:F.style={r:ut},se},update:function(F,B){var Z=this.getSize(F),ut=F.padding||this.options.padding;Object(f.m)(ut)&&(ut=ut[0]);var Bt=Object(f.c)(F.style),Jt=Math.max(Bt.r,Z[0]/2)||Z[0]/2;Bt.r=Jt+ut;var ie=B.get("sizeCache");ie&&(ie.r=Bt.r);var se={stroke:F.color},Te=B.get("keyShape"),Ee=Object(f.A)({},Te.attr(),se,Bt);F.style?F.style.r=Jt:F.style={r:Jt},this.updateShape(F,B,Ee,!0)}},"single-combo"),jr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},gt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(F,B){var Z=this.getShapeStyle(F);return B.addShape("rect",{attrs:Z,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(F,B){var Z=B.position||this.labelPosition,ut=F.style,Bt=F.padding||this.options.padding;Object(f.t)(Bt)&&(Bt=[Bt,Bt,Bt,Bt]);var Jt=B.refX,ie=B.refY;Object(f.s)(Jt)&&(Jt=this.refX),Object(f.s)(ie)&&(ie=this.refY);var se,Te=ut.width/2+Bt[3],Ee=ut.height/2+Bt[0];switch(Z){case"top":se={x:0-Te+Jt,y:0-Ee+ie,textBaseline:"top",textAlign:"left"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:0-Te+ie,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:F.label,textAlign:"center"};break;default:se={x:Te+Jt,y:0,textAlign:"right"}}return se.text=F.label,se},getShapeStyle:function(F){var B=this.options.style,Z=F.padding||this.options.padding;Object(f.t)(Z)&&(Z=[Z,Z,Z,Z]);var ut,Bt,Jt={stroke:F.color},ie=Object(f.A)({},B,Jt,F.style),se=this.getSize(F);ut=!Object(f.t)(ie.width)||isNaN(ie.width)?se[0]||gt.defaultCombo.style.width:Math.max(ie.width,se[0])||se[0],Bt=!Object(f.t)(ie.height)||isNaN(ie.height)?se[1]||gt.defaultCombo.style.height:Math.max(ie.height,se[1])||se[1];var Te=-ut/2-Z[3],Ee=-Bt/2-Z[0];ie.width=ut+Z[1]+Z[3],ie.height=Bt+Z[0]+Z[2];var un=Object(n.a)({x:Te,y:Ee},ie);return F.style?(F.style.width=ut,F.style.height=Bt):F.style={width:ut,height:Bt},un},update:function(F,B){var Z=this.getSize(F),ut=F.padding||this.options.padding;Object(f.t)(ut)&&(ut=[ut,ut,ut,ut]);var Bt=Object(f.c)(F.style),Jt=Math.max(Bt.width,Z[0])||Z[0],ie=Math.max(Bt.height,Z[1])||Z[1];Bt.width=Jt+ut[1]+ut[3],Bt.height=ie+ut[0]+ut[2];var se=B.get("sizeCache");se&&(se.width=Bt.width,se.height=Bt.height),Bt.x=-Jt/2-ut[3],Bt.y=-ie/2-ut[0];var Te={stroke:F.color},Ee=B.get("keyShape"),un=Object(f.A)({},Ee.attr(),Te,Bt);F.style?(F.style.width=Jt,F.style.height=ie):F.style={width:Jt,height:ie},this.updateShape(F,B,un,!1)},updateShape:function(F,B,Z){var ut=B.get("keyShape");(F.animate===void 0?this.options.animate:F.animate)&&ut.animate?ut.animate(Z,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},Z)),this.updateLabel(F,B)}},"single-combo"),jr.registerNode("simple-circle",{options:{size:gt.defaultNode.size,style:{x:0,y:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(F,B){var Z=this.getShapeStyle(F);return B.addShape("circle",{attrs:Z,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(F){var B=this.getOptions(F).style,Z={stroke:F.color},ut=Object(f.e)({},B,Z),Bt=this.getSize(F)[0]/2;return Object(n.a)({x:0,y:0,r:Bt},ut)},update:function(F,B){var Z=this.getSize(F),ut={stroke:F.color,r:Z[0]/2},Bt=B.get("keyShape"),Jt=Object(f.e)({},Bt.attr(),ut,F.style);this.updateShape(F,B,Jt,!0)}},"single-node"),jr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},gt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(F,B){var Z=this.getShapeStyle(F);return B.addShape("rect",{attrs:Z,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(F){var B=this.getOptions(F).style,Z={stroke:F.color},ut=Object(f.A)({},B,Z),Bt=this.getSize(F),Jt=ut.width||Bt[0],ie=ut.height||Bt[1];return Object(n.a)({x:-Jt/2,y:-ie/2,width:Jt,height:ie},ut)},update:function(F,B){B.getContainer();var Z=this.getOptions({}).style,ut=this.getSize(F),Bt=B.get("keyShape");F.size||(ut[0]=Bt.attr("width")||Z.width,ut[1]=Bt.attr("height")||Z.height);var Jt={stroke:F.color,x:-ut[0]/2,y:-ut[1]/2,width:ut[0],height:ut[1]},ie=Object(f.A)({},Z,Bt.attr(),Jt);ie=Object(f.A)(ie,F.style),this.updateShape(F,B,ie,!1)}},"single-node"),jr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(F,B){var Z=this.shapeType,ut=this.getShapeStyle(F);delete ut.fill;var Bt=B.addShape(Z,{attrs:ut,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(F,Bt),Bt},drawClip:function(F,B){var Z=this.getOptions(F).clipCfg;if(Z.show){var ut=Z.type,Bt=Z.x,Jt=Z.y,ie=Z.style;if(ut==="circle"){var se=Z.r;B.setClip({type:"circle",attrs:Object(n.a)({r:se,x:Bt,y:Jt},ie)})}else if(ut==="rect"){var Te=Z.width,Ee=Z.height,un=Bt-Te/2,xn=Jt-Ee/2;B.setClip({type:"rect",attrs:Object(n.a)({x:un,y:xn,width:Te,height:Ee},ie)})}else if(ut==="ellipse"){var zt=Z.rx,Yt=Z.ry;B.setClip({type:"ellipse",attrs:Object(n.a)({x:Bt,y:Jt,rx:zt,ry:Yt},ie)})}else if(ut==="polygon"){var Se=Z.points;B.setClip({type:"polygon",attrs:Object(n.a)({points:Se},ie)})}else if(ut==="path"){var Wt=Z.path;B.setClip({type:"path",attrs:Object(n.a)({path:Wt},ie)})}}},getShapeStyle:function(F){var B=this.getOptions(F).style,Z=this.getSize(F),ut=this.getOptions(F).img,Bt=Z[0],Jt=Z[1];return B&&(Bt=B.width||Z[0],Jt=B.height||Z[1]),Object(n.a)({x:-Bt/2,y:-Jt/2,width:Bt,height:Jt,img:ut},B)},updateShapeStyle:function(F,B){var Z=B.getContainer(),ut=this.itemType+"-shape",Bt=Z.find(function(ie){return ie.get("className")===ut})||B.getKeyShape(),Jt=this.getShapeStyle(F);Bt&&Bt.attr(Jt)}},"single-node");var Er,Ir={triangle:function(F,B,Z){F===void 0&&(F=10),B===void 0&&(B=15),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+",0 L "+(ut+B)+",-"+F/2+" L "+(ut+B)+","+F/2+" Z"},vee:function(F,B,Z){F===void 0&&(F=15),B===void 0&&(B=20),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+",0 L "+(ut+B)+",-"+F/2+`
        L `+(ut+2*B/3)+",0 L "+(ut+B)+","+F/2+" Z"},circle:function(F,B){return F===void 0&&(F=5),B===void 0&&(B=0),"M "+2*B+`, 0
            a `+F+","+F+" 0 1,0 "+2*F+`,0
            a `+F+","+F+" 0 1,0 "+2*-F+",0"},rect:function(F,B,Z){F===void 0&&(F=10),B===void 0&&(B=10),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+","+-F/2+` 
        L `+(ut+B)+","+-F/2+` 
        L `+(ut+B)+","+F/2+` 
        L `+ut+","+F/2+" Z"},diamond:function(F,B,Z){F===void 0&&(F=15),B===void 0&&(B=15),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+`,0 
        L `+(ut+B/2)+","+-F/2+` 
        L `+(ut+B)+`,0 
        L `+(ut+B/2)+","+F/2+" Z"},triangleRect:function(F,B,Z,ut,Bt,Jt){F===void 0&&(F=15),B===void 0&&(B=15),Z===void 0&&(Z=15),ut===void 0&&(ut=3),Bt===void 0&&(Bt=5),Jt===void 0&&(Jt=0);var ie=2*Jt,se=ie+B+Bt;return"M "+ie+",0 L "+(ie+B)+",-"+F/2+" L "+(ie+B)+","+F/2+` Z
            M `+se+", -"+Z/2+`
            L `+(se+ut)+" -"+Z/2+`
            L `+(se+ut)+" "+Z/2+`
            L `+se+" "+Z/2+`
            Z`}},Lr={collapse:function(F,B,Z){return[["M",F-Z,B],["a",Z,Z,0,1,0,2*Z,0],["a",Z,Z,0,1,0,2*-Z,0],["M",F-Z+4,B],["L",F+Z-4,B]]},expand:function(F,B,Z){return[["M",F-Z,B],["a",Z,Z,0,1,0,2*Z,0],["a",Z,Z,0,1,0,2*-Z,0],["M",F-Z+4,B],["L",F-Z+2*Z-4,B],["M",F-Z+Z,B-Z+4],["L",F,B+Z-4]]},upTriangle:function(F,B,Z){var ut=Z*Math.cos(Math.PI/6),Bt=Z*Math.sin(Math.PI/6);return[["M",F-ut,B+Bt],["L",F+ut,B+Bt],["L",F,B-Z],["Z"]]},downTriangle:function(F,B,Z){var ut=Z*Math.cos(Math.PI/6),Bt=Z*Math.sin(Math.PI/6);return[["M",F-ut,B-Bt],["L",F+ut,B-Bt],["L",F,B+Z],["Z"]]}},Pr=jr,Dr=d.a.transform,ri=Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},v),b),S),i),{transform:Dr,mat3:d.b}),vi=function(){function ve(F){this.graph=F,this.layoutCfg=F.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return ve.prototype.initLayout=function(){},ve.prototype.getLayoutType=function(){return this.layoutCfg.type},ve.prototype.refreshLayout=function(){var F=this.graph;F&&(F.get("animate")?F.positionsAnimate():F.refreshPositions())},ve.prototype.changeLayout=function(F){var B=this.graph,Z=this.layoutMethod;this.layoutType=F,this.layoutCfg=B.get("layout")||{},this.layoutCfg.type=F,Z&&Z.destroy(),this.layout()},ve.prototype.changeData=function(){var F=this.layoutMethod;F&&F.destroy(),this.layout()},ve.prototype.destroyLayout=function(){var F=this.layoutMethod,B=this.graph;F&&F.destroy(),B.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},ve.prototype.setDataFromGraph=function(){for(var F=[],B=[],Z=[],ut=this.graph.getNodes(),Bt=this.graph.getEdges(),Jt=this.graph.getCombos(),ie=ut.length,se=0;se<ie;se++){var Te=ut[se];if(Te.isVisible()){var Ee=Te.getModel();F.push(Ee)}}var un=Bt.length;for(se=0;se<un;se++){var xn=Bt[se];xn&&!xn.destroyed&&xn.isVisible()&&((Ee=xn.getModel()).isComboEdge||B.push(Ee))}var zt=Jt.length;for(se=0;se<zt;se++){var Yt=Jt[se];!Yt.destroyed&&Yt.isVisible()&&(Ee=Yt.getModel(),Z.push(Ee))}return{nodes:F,edges:B,combos:Z}},ve.prototype.relayout=function(F){var B=this.graph,Z=this.layoutMethod,ut=this.layoutCfg;if(F){this.data=this.setDataFromGraph();var Bt=this.data.nodes;if(!Bt)return!1;this.initPositions(ut.center,Bt),Z.init(this.data)}this.layoutType==="force"&&(Z.ticking=!1,Z.forceSimulation.stop()),B.emit("beforelayout"),Z.execute(F),Z.isCustomLayout&&ut.onLayoutEnd&&ut.onLayoutEnd()},ve.prototype.layoutAnimate=function(){},ve.prototype.moveToZero=function(){var F=this.graph.get("data").nodes;if(F[0].x!==void 0&&F[0].x!==null&&!Ht(F[0].x)){for(var B=[0,0],Z=F.length,ut=0;ut<Z;ut++){var Bt=F[ut];B[0]+=Bt.x,B[1]+=Bt.y}for(B[0]/=F.length,B[1]/=F.length,ut=0;ut<Z;ut++)(Bt=F[ut]).x-=B[0],Bt.y-=B[1]}},ve.prototype.initPositions=function(F,B){var Z=this.graph;if(!B)return!1;var ut=!0,Bt=.85*Z.get("width"),Jt=.85*Z.get("height"),ie=B.length,se=Math.ceil(Math.sqrt(ie)*(Bt/Jt)),Te=Bt/(se-1),Ee=Jt/(Math.ceil(ie/se)-1);isFinite(Te)&&Te||(Te=0),isFinite(Ee)&&Te||(Ee=0);for(var un=F[0]-Bt/2,xn=F[1]-Jt/2,zt=B.length,Yt=0;Yt<zt;Yt++){var Se=B[Yt];Ht(Se.x)&&(ut=!1,Se.x=Yt%se*Te+un),Ht(Se.y)&&(ut=!1,Se.y=Math.floor(Yt/se)*Ee+xn)}return ut},ve.prototype.destroy=function(){var F=this.layoutMethod;this.graph=null,F&&(F.destroy(),F.destroyed=!0),this.destroyed=!0},ve}(),ii=function(F){this.graph=F,this.destroyed=!1,this.initEvents()};(function(ve){ve.CLICK="click",ve.DBLCLICK="dblclick",ve.MOUSEDOWN="mousedown",ve.MOUDEUP="mouseup",ve.CONTEXTMENU="contextmenu",ve.MOUSEENTER="mouseenter",ve.MOUSEOUT="mouseout",ve.MOUSEOVER="mouseover",ve.MOUSEMOVE="mousemove",ve.MOUSELEAVE="mouseleave",ve.DRAGSTART="dragstart",ve.DRAGEND="dragend",ve.DRAG="drag",ve.DRAGENTER="dragenter",ve.DRAGLEAVE="dragleave",ve.DRAGOVER="dragover",ve.DRAGOUT="dragout",ve.DDROP="drop",ve.KEYUP="keyup",ve.KEYDOWN="keydown",ve.WHEEL="wheel",ve.FOCUS="focus",ve.BLUR="blur",ve.TOUCHSTART="touchstart",ve.TOUCHMOVE="touchmove",ve.TOUCHEND="touchend",ve.NODE_CONTEXTMENU="node:contextmenu",ve.NODE_CLICK="node:click",ve.NODE_DBLCLICK="node:dblclick",ve.NODE_MOUSEDOWN="node:mousedown",ve.NODE_MOUSEUP="node:mouseup",ve.NODE_MOUSEENTER="node:mouseenter",ve.NODE_MOUSELEAVE="node:mouseleave",ve.NODE_MOUSEMOVE="node:mousemove",ve.NODE_MOUSEOUT="node:mouseout",ve.NODE_MOUSEOVER="node:mouseover",ve.NODE_DROP="node:drop",ve.NODE_DRAGOVER="node:dragover",ve.NODE_DRAGENTER="node:dragenter",ve.NODE_DRAGLEAVE="node:dragleave",ve.NODE_DRAGSTART="node:dragstart",ve.NODE_DRAG="node:drag",ve.NODE_DRAGEND="node:dragend",ve.COMBO_CONTEXTMENU="combo:contextmenu",ve.COMBO_CLICK="combo:click",ve.COMBO_DBLCLICK="combo:dblclick",ve.COMBO_MOUSEDOWN="combo:mousedown",ve.COMBO_MOUSEUP="combo:mouseup",ve.COMBO_MOUSEENTER="combo:mouseenter",ve.COMBO_MOUSELEAVE="combo:mouseleave",ve.COMBO_MOUSEMOVE="combo:mousemove",ve.COMBO_MOUSEOUT="combo:mouseout",ve.COMBO_MOUSEOVER="combo:mouseover",ve.COMBO_DROP="combo:drop",ve.COMBO_DRAGOVER="combo:dragover",ve.COMBO_DRAGENTER="combo:dragenter",ve.COMBO_DRAGLEAVE="combo:dragleave",ve.COMBO_DRAGSTART="combo:dragstart",ve.COMBO_DRAG="combo:drag",ve.COMBO_DRAGEND="combo:dragend",ve.EDGE_CONTEXTMENU="edge:contextmenu",ve.EDGE_CLICK="edge:click",ve.EDGE_DBLCLICK="edge:dblclick",ve.EDGE_MOUSEDOWN="edge:mousedown",ve.EDGE_MOUSEUP="edge:mouseup",ve.EDGE_MOUSEENTER="edge:mouseenter",ve.EDGE_MOUSELEAVE="edge:mouseleave",ve.EDGE_MOUSEMOVE="edge:mousemove",ve.EDGE_MOUSEOUT="edge:mouseout",ve.EDGE_MOUSEOVER="edge:mouseover",ve.EDGE_DROP="edge:drop",ve.EDGE_DRAGOVER="edge:dragover",ve.EDGE_DRAGENTER="edge:dragenter",ve.EDGE_DRAGLEAVE="edge:dragleave",ve.CANVAS_CONTEXTMENU="canvas:contextmenu",ve.CANVAS_CLICK="canvas:click",ve.CANVAS_DBLCLICK="canvas:dblclick",ve.CANVAS_MOUSEDOWN="canvas:mousedown",ve.CANVAS_MOUSEUP="canvas:mouseup",ve.CANVAS_MOUSEENTER="canvas:mouseenter",ve.CANVAS_MOUSELEAVE="canvas:mouseleave",ve.CANVAS_MOUSEMOVE="canvas:mousemove",ve.CANVAS_MOUSEOUT="canvas:mouseout",ve.CANVAS_MOUSEOVER="canvas:mouseover",ve.CANVAS_DROP="canvas:drop",ve.CANVAS_DRAGENTER="canvas:dragenter",ve.CANVAS_DRAGLEAVE="canvas:dragleave",ve.CANVAS_DRAGSTART="canvas:dragstart",ve.CANVAS_DRAG="canvas:drag",ve.CANVAS_DRAGEND="canvas:dragend",ve.BEFORERENDER="beforerender",ve.AFTERRENDER="afterrender",ve.BEFOREADDITEM="beforeadditem",ve.AFTERADDITEM="afteradditem",ve.BEFOREREMOVEITEM="beforeremoveitem",ve.AFTERREMOVEITEM="afterremoveitem",ve.BEFOREUPDATEITEM="beforeupdateitem",ve.AFTERUPDATEITEM="afterupdateitem",ve.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",ve.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",ve.BEFOREITEMSTATECHANGE="beforeitemstatechange",ve.AFTERITEMSTATECHANGE="afteritemstatechange",ve.BEFOREITEMREFRESH="beforeitemrefresh",ve.AFTERITEMREFRESH="afteritemrefresh",ve.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",ve.AFTERITEMSTATESCLEAR="afteritemstatesclear",ve.BEFOREMODECHANGE="beforemodechange",ve.AFTERMODECHANGE="aftermodechange",ve.BEFORELAYOUT="beforelayout",ve.AFTERLAYOUT="afterlayout",ve.BEFORECREATEEDGE="beforecreateedge",ve.AFTERCREATEEDGE="aftercreateedge",ve.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",ve.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",ve.BEFOREGRAPHREFRESH="beforegraphrefresh",ve.AFTERGRAPHREFRESH="aftergraphrefresh",ve.BEFOREANIMATE="beforeanimate",ve.AFTERANIMATE="afteranimate",ve.BEFOREPAINT="beforepaint",ve.AFTERPAINT="afterpaint",ve.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",ve.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",ve.GRAPHSTATECHANGE="graphstatechange",ve.AFTERACTIVATERELATIONS="afteractivaterelations",ve.NODESELECTCHANGE="nodeselectchange",ve.TOOLTIPCHANGE="tooltipchange",ve.WHEELZOOM="wheelzoom",ve.VIEWPORTCHANGE="viewportchange",ve.DRAGNODEEND="dragnodeend",ve.STACKCHANGE="stackchange"})(Er||(Er={}));var Si=Pr.registerNode,Ui=Pr.registerEdge,Yi=Pr.registerCombo,Bi=y.registerBehavior,Di=gt;Pr.registerNode,Pr.registerEdge,Pr.registerCombo,y.registerBehavior},function(a,A){a.exports=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),function(i){i.TextureCompressionBC="texture-compression-bc"}(A.ExtensionName||(A.ExtensionName={})),function(i){i.ClampToEdge="clamp-to-edge",i.Repeat="repeat",i.MirrorRepeat="mirror-repeat"}(A.AddressMode||(A.AddressMode={})),function(i){i.UniformBuffer="uniform-buffer",i.StorageBuffer="storage-buffer",i.ReadonlyStorageBuffer="readonly-storage-buffer",i.Sampler="sampler",i.ComparisonSampler="comparison-sampler",i.SampledTexture="sampled-texture",i.ReadonlyStorageTexture="readonly-storage-texture",i.WriteonlyStorageTexture="writeonly-storage-texture"}(A.BindingType||(A.BindingType={})),function(i){i.Zero="zero",i.One="one",i.SrcColor="src-color",i.OneMinusSrcColor="one-minus-src-color",i.SrcAlpha="src-alpha",i.OneMinusSrcAlpha="one-minus-src-alpha",i.DstColor="dst-color",i.OneMinusDstColor="one-minus-dst-color",i.DstAlpha="dst-alpha",i.OneMinusDstAlpha="one-minus-dst-alpha",i.SrcAlphaSaturated="src-alpha-saturated",i.BlendColor="blend-color",i.OneMinusBlendColor="one-minus-blend-color"}(A.BlendFactor||(A.BlendFactor={})),function(i){i.Add="add",i.Subtract="subtract",i.ReverseSubtract="reverse-subtract",i.Min="min",i.Max="max"}(A.BlendOperation||(A.BlendOperation={})),function(i){i.Never="never",i.Less="less",i.Equal="equal",i.LessEqual="less-equal",i.Greater="greater",i.NotEqual="not-equal",i.GreaterEqual="greater-equal",i.Always="always"}(A.CompareFunction||(A.CompareFunction={})),function(i){i.None="none",i.Front="front",i.Back="back"}(A.CullMode||(A.CullMode={})),function(i){i.Nearest="nearest",i.Linear="linear"}(A.FilterMode||(A.FilterMode={})),function(i){i.CCW="ccw",i.CW="cw"}(A.FrontFace||(A.FrontFace={})),function(i){i.Uint16="uint16",i.Uint32="uint32"}(A.IndexFormat||(A.IndexFormat={})),function(i){i.Vertex="vertex",i.Instance="instance"}(A.InputStepMode||(A.InputStepMode={})),function(i){i.Load="load"}(A.LoadOp||(A.LoadOp={})),function(i){i.PointList="point-list",i.LineList="line-list",i.LineStrip="line-strip",i.TriangleList="triangle-list",i.TriangleStrip="triangle-strip"}(A.PrimitiveTopology||(A.PrimitiveTopology={})),function(i){i.Keep="keep",i.Zero="zero",i.Replace="replace",i.Invert="invert",i.IncrementClamp="increment-clamp",i.DecrementClamp="decrement-clamp",i.IncrementWrap="increment-wrap",i.DecrementWrap="decrement-wrap"}(A.StencilOperation||(A.StencilOperation={})),function(i){i.Store="store",i.Clear="clear"}(A.StoreOp||(A.StoreOp={})),function(i){i.E1d="1d",i.E2d="2d",i.E3d="3d"}(A.TextureDimension||(A.TextureDimension={})),function(i){i.R8Unorm="r8unorm",i.R8Snorm="r8snorm",i.R8Uint="r8uint",i.R8Sint="r8sint",i.R16Uint="r16uint",i.R16Sint="r16sint",i.R16Float="r16float",i.RG8Unorm="rg8unorm",i.RG8Snorm="rg8snorm",i.RG8Uint="rg8uint",i.RG8Sint="rg8sint",i.R32Uint="r32uint",i.R32Sint="r32sint",i.R32Float="r32float",i.RG16Uint="rg16uint",i.RG16Sint="rg16sint",i.RG16Float="rg16float",i.RGBA8Unorm="rgba8unorm",i.RGBA8UnormSRGB="rgba8unorm-srgb",i.RGBA8Snorm="rgba8snorm",i.RGBA8Uint="rgba8uint",i.RGBA8Sint="rgba8sint",i.BGRA8Unorm="bgra8unorm",i.BGRA8UnormSRGB="bgra8unorm-srgb",i.RGB10A2Unorm="rgb10a2unorm",i.RG11B10Float="rg11b10float",i.RG32Uint="rg32uint",i.RG32Sint="rg32sint",i.RG32Float="rg32float",i.RGBA16Uint="rgba16uint",i.RGBA16Sint="rgba16sint",i.RGBA16Float="rgba16float",i.RGBA32Uint="rgba32uint",i.RGBA32Sint="rgba32sint",i.RGBA32Float="rgba32float",i.Depth32Float="depth32float",i.Depth24Plus="depth24plus",i.Depth24PlusStencil8="depth24plus-stencil8"}(A.TextureFormat||(A.TextureFormat={})),function(i){i.Float="float",i.Sint="sint",i.Uint="uint"}(A.TextureComponentType||(A.TextureComponentType={})),function(i){i.E1d="1d",i.E2d="2d",i.E2dArray="2d-array",i.Cube="cube",i.CubeArray="cube-array",i.E3d="3d"}(A.TextureViewDimension||(A.TextureViewDimension={})),function(i){i.Uchar2="uchar2",i.Uchar4="uchar4",i.Char2="char2",i.Char4="char4",i.Uchar2Norm="uchar2norm",i.Uchar4Norm="uchar4norm",i.Char2Norm="char2norm",i.Char4Norm="char4norm",i.Ushort2="ushort2",i.Ushort4="ushort4",i.Short2="short2",i.Short4="short4",i.Ushort2Norm="ushort2norm",i.Ushort4Norm="ushort4norm",i.Short2Norm="short2norm",i.Short4Norm="short4norm",i.Half2="half2",i.Half4="half4",i.Float="float",i.Float2="float2",i.Float3="float3",i.Float4="float4",i.Uint="uint",i.Uint2="uint2",i.Uint3="uint3",i.Uint4="uint4",i.Int="int",i.Int2="int2",i.Int3="int3",i.Int4="int4"}(A.VertexFormat||(A.VertexFormat={})),function(i){i.All="all",i.StencilOnly="stencil-only",i.DepthOnly="depth-only"}(A.TextureAspect||(A.TextureAspect={})),function(i){i.Error="error",i.Warning="warning",i.Info="info"}(A.CompilationMessageType||(A.CompilationMessageType={})),function(i){i.Occlusion="occlusion"}(A.QueryType||(A.QueryType={})),function(i){i[i.MapRead=1]="MapRead",i[i.MapWrite=2]="MapWrite",i[i.CopySrc=4]="CopySrc",i[i.CopyDst=8]="CopyDst",i[i.Index=16]="Index",i[i.Vertex=32]="Vertex",i[i.Uniform=64]="Uniform",i[i.Storage=128]="Storage",i[i.Indirect=256]="Indirect",i[i.QueryResolve=512]="QueryResolve"}(A.BufferUsage||(A.BufferUsage={})),function(i){i[i.Red=1]="Red",i[i.Green=2]="Green",i[i.Blue=4]="Blue",i[i.Alpha=8]="Alpha",i[i.All=15]="All"}(A.ColorWrite||(A.ColorWrite={})),function(i){i[i.Vertex=1]="Vertex",i[i.Fragment=2]="Fragment",i[i.Compute=4]="Compute"}(A.ShaderStage||(A.ShaderStage={})),function(i){i[i.CopySrc=1]="CopySrc",i[i.CopyDst=2]="CopyDst",i[i.Sampled=4]="Sampled",i[i.Storage=8]="Storage",i[i.OutputAttachment=16]="OutputAttachment"}(A.TextureUsage||(A.TextureUsage={})),function(i){i[i.Read=1]="Read",i[i.Write=2]="Write"}(A.MapMode||(A.MapMode={}))},function(a,A){function e(i,v){for(var b=0;b<v.length;b++){var S=v[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(i,S.key,S)}}a.exports=function(i,v,b){return v&&e(i.prototype,v),b&&e(i,b),i}},function(a,A,e){a.exports=e(442)},function(a,A,e){"use strict";e.d(A,"b",function(){return v.a}),e.d(A,"c",function(){return v.d}),e.d(A,"d",function(){return v.e}),e.d(A,"a",function(){return i});var i={};e.r(i),e.d(i,"leftTranslate",function(){return b}),e.d(i,"leftRotate",function(){return S}),e.d(i,"leftScale",function(){return f}),e.d(i,"transform",function(){return M}),e.d(i,"direction",function(){return I}),e.d(i,"angleTo",function(){return y}),e.d(i,"vertical",function(){return n});var v=e(2);function b(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromTranslation(O,E),v.a.multiply(s,O,d)}function S(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromRotation(O,E),v.a.multiply(s,O,d)}function f(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromScaling(O,E),v.a.multiply(s,O,d)}function M(s,d){for(var E,O,C,p=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,T=d.length;x<T;x++){var N=d[x];switch(N[0]){case"t":b(p,p,[N[1],N[2]]);break;case"s":f(p,p,[N[1],N[2]]);break;case"r":S(p,p,N[1]);break;case"m":E=p,O=p,C=N[1],v.a.multiply(E,C,O)}}return p}function I(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,E){var O=v.d.angle(s,d),C=I(s,d)>=0;return E?C?2*Math.PI-O:O:C?O:2*Math.PI-O}function n(s,d,E){return E?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.d(A,"b",function(){return i}),e.d(A,"a",function(){return v}),e.d(A,"c",function(){return b});var i=1e-6,v=typeof Float32Array!="undefined"?Float32Array:Array,b=Math.random;Math.hypot||(Math.hypot=function(){for(var S=0,f=arguments.length;f--;)S+=arguments[f]*arguments[f];return Math.sqrt(S)})},function(a,A){a.exports=function(e,i,v,b){v&&Object.defineProperty(e,i,{enumerable:v.enumerable,configurable:v.configurable,writable:v.writable,value:v.initializer?v.initializer.call(b):void 0})}},function(a,A){a.exports=function(e,i,v,b,S){var f={};return Object.keys(b).forEach(function(M){f[M]=b[M]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=v.slice().reverse().reduce(function(M,I){return I(e,i,M)||M},f),S&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(S):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(e,i,f),f=null),f}},function(a,A,e){"use strict";function i(y,n,s){if(y){if(typeof y.addEventListener=="function")return y.addEventListener(n,s,!1),{remove:function(){y.removeEventListener(n,s,!1)}};if(typeof y.attachEvent=="function")return y.attachEvent("on"+n,s),{remove:function(){y.detachEvent("on"+n,s)}}}}var v,b,S,f;function M(y){v||(v=document.createElement("table"),b=document.createElement("tr"),S=/^\s*<(\w+|!)[^>]*>/,f={tr:document.createElement("tbody"),tbody:v,thead:v,tfoot:v,td:b,th:b,"*":document.createElement("div")});var n=S.test(y)&&RegExp.$1;n&&n in f||(n="*");var s=f[n];y=y.replace(/(^\s*)|(\s*$)/g,""),s.innerHTML=""+y;var d=s.childNodes[0];return s.removeChild(d),d}function I(y,n){if(y)for(var s in n)n.hasOwnProperty(s)&&(y.style[s]=n[s]);return y}e.d(A,"a",function(){return i}),e.d(A,"b",function(){return M}),e.d(A,"c",function(){return I})},function(a,A){function e(i,v,b,S,f,M,I){try{var y=i[M](I),n=y.value}catch(s){return void b(s)}y.done?v(n):Promise.resolve(n).then(S,f)}a.exports=function(i){return function(){var v=this,b=arguments;return new Promise(function(S,f){var M=i.apply(v,b);function I(n){e(M,S,f,I,y,"next",n)}function y(n){e(M,S,f,I,y,"throw",n)}I(void 0)})}}},function(a,A,e){"use strict";e.d(A,"a",function(){return i}),e.d(A,"b",function(){return v});var i={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},v={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(a,A,e){"use strict";e.d(A,"d",function(){return v}),e.d(A,"b",function(){return b}),e.d(A,"e",function(){return S}),e.d(A,"f",function(){return f}),e.d(A,"l",function(){return M}),e.d(A,"j",function(){return I});var i=e(0);function v(){return window?window.devicePixelRatio:1}function b(y,n,s,d){var E=y-s,O=n-d;return Math.sqrt(E*E+O*O)}function S(y,n,s,d,E,O){return E>=y&&E<=y+s&&O>=n&&O<=n+d}function f(y,n){return!(n.minX>y.maxX||n.maxX<y.minX||n.minY>y.maxY||n.maxY<y.minY)}function M(y,n){return y&&n?{minX:Math.min(y.minX,n.minX),minY:Math.min(y.minY,n.minY),maxX:Math.max(y.maxX,n.maxX),maxY:Math.max(y.maxY,n.maxY)}:y||n}function I(y,n){return y[0]===n[0]&&y[1]===n[1]}e.d(A,"i",function(){return i.s}),e.d(A,"k",function(){return i.x}),e.d(A,"h",function(){return i.r}),e.d(A,"g",function(){return i.m}),e.d(A,"c",function(){return i.f}),e.d(A,"o",function(){return i.G}),e.d(A,"m",function(){return i.B}),e.d(A,"n",function(){return i.D}),e.d(A,"a",function(){return i.b})},function(a,A,e){"use strict";var i=e(51);e.d(A,"PathUtil",function(){return i});var v=e(156);e.o(v,"ICanvas")&&e.d(A,"ICanvas",function(){return v.ICanvas}),e.o(v,"IGroup")&&e.d(A,"IGroup",function(){return v.IGroup}),e.o(v,"IShape")&&e.d(A,"IShape",function(){return v.IShape});var b=e(157);e.o(b,"ICanvas")&&e.d(A,"ICanvas",function(){return b.ICanvas}),e.o(b,"IGroup")&&e.d(A,"IGroup",function(){return b.IGroup}),e.o(b,"IShape")&&e.d(A,"IShape",function(){return b.IShape});var S=e(114);e.d(A,"Event",function(){return S.a}),e(115);var f=e(247);e.d(A,"AbstractCanvas",function(){return f.a});var M=e(159);e.d(A,"AbstractGroup",function(){return M.a});var I=e(160);e.d(A,"AbstractShape",function(){return I.a});var y=e(248);e.d(A,"getBBoxMethod",function(){return y.a});var n=e(68);e.d(A,"getTextHeight",function(){return n.b}),e.d(A,"assembleFont",function(){return n.a});var s=e(19);e.d(A,"isAllowCapture",function(){return s.b});var d=e(39);e.d(A,"multiplyVec2",function(){return d.c}),e.d(A,"invert",function(){return d.a});var E=e(116);e.d(A,"getOffScreenContext",function(){return E.a})},function(a,A,e){"use strict";e.d(A,"j",function(){return v}),e.d(A,"c",function(){return b}),e.d(A,"g",function(){return S}),e.d(A,"b",function(){return f});var i=e(0);function v(M,I){var y=M.indexOf(I);y!==-1&&M.splice(y,1)}e.d(A,"e",function(){return i.s}),e.d(A,"d",function(){return i.r}),e.d(A,"h",function(){return i.x}),e.d(A,"f",function(){return i.v}),e.d(A,"i",function(){return i.A}),e.d(A,"a",function(){return i.f}),e.d(A,"k",function(){return i.I});var b=typeof window!="undefined"&&window.document!==void 0;function S(M,I){if(M.isCanvas())return!0;for(var y=I.getParent(),n=!1;y;){if(y===M){n=!0;break}y=y.getParent()}return n}function f(M){return M.cfg.visible&&M.cfg.capture}},function(a,A,e){"use strict";e.d(A,"e",function(){return x}),e.d(A,"b",function(){return vt}),e.d(A,"a",function(){return kt}),e.d(A,"c",function(){return s}),e.d(A,"d",function(){return Mt}),e.d(A,"f",function(){return i});var i={};function v(tt){return Math.min.apply(null,tt)}function b(tt){return Math.max.apply(null,tt)}function S(tt,lt,it,U){var P=tt-it,H=lt-U;return Math.sqrt(P*P+H*H)}function f(tt,lt){return Math.abs(tt-lt)<.001}function M(tt,lt){var it=v(tt),U=v(lt);return{x:it,y:U,width:b(tt)-it,height:b(lt)-U}}function I(tt,lt,it,U){return{minX:v([tt,it]),maxX:b([tt,it]),minY:v([lt,U]),maxY:b([lt,U])}}function y(tt){return(tt+2*Math.PI)%(2*Math.PI)}e.r(i),e.d(i,"distance",function(){return S}),e.d(i,"isNumberEqual",function(){return f}),e.d(i,"getBBoxByArray",function(){return M}),e.d(i,"getBBoxRange",function(){return I}),e.d(i,"piMod",function(){return y});var n=e(80),s={box:function(lt,it,U,P){return M([lt,U],[it,P])},length:function(lt,it,U,P){return S(lt,it,U,P)},pointAt:function(lt,it,U,P,H){return{x:(1-H)*lt+H*U,y:(1-H)*it+H*P}},pointDistance:function(lt,it,U,P,H,k){var h=(U-lt)*(H-lt)+(P-it)*(k-it);return h<0?S(lt,it,H,k):h>(U-lt)*(U-lt)+(P-it)*(P-it)?S(U,P,H,k):this.pointToLine(lt,it,U,P,H,k)},pointToLine:function(lt,it,U,P,H,k){var h=[U-lt,P-it];if(n.exactEquals(h,[0,0]))return Math.sqrt((H-lt)*(H-lt)+(k-it)*(k-it));var g=[-h[1],h[0]];n.normalize(g,g);var G=[H-lt,k-it];return Math.abs(n.dot(G,g))},tangentAngle:function(lt,it,U,P){return Math.atan2(P-it,U-lt)}};function d(tt,lt,it,U,P,H){var k,h=1/0,g=[it,U],G=20;H&&H>200&&(G=H/10);for(var V=1/G,$=V/10,rt=0;rt<=G;rt++){var ot=rt*V,At=[P.apply(null,tt.concat([ot])),P.apply(null,lt.concat([ot]))];(jt=S(g[0],g[1],At[0],At[1]))<h&&(k=ot,h=jt)}if(k===0)return{x:tt[0],y:lt[0]};if(k===1){var gt=tt.length;return{x:tt[gt-1],y:lt[gt-1]}}for(h=1/0,rt=0;rt<32&&!($<1e-4);rt++){var mt=k-$,bt=k+$,jt=(At=[P.apply(null,tt.concat([mt])),P.apply(null,lt.concat([mt]))],S(g[0],g[1],At[0],At[1]));if(mt>=0&&jt<h)k=mt,h=jt;else{var Dt=[P.apply(null,tt.concat([bt])),P.apply(null,lt.concat([bt]))],Ut=S(g[0],g[1],Dt[0],Dt[1]);bt<=1&&Ut<h?(k=bt,h=Ut):$*=.5}}return{x:P.apply(null,tt.concat([k])),y:P.apply(null,lt.concat([k]))}}function E(tt,lt,it,U){var P=1-U;return P*P*tt+2*U*P*lt+U*U*it}function O(tt,lt,it){var U=tt+it-2*lt;if(f(U,0))return[.5];var P=(tt-lt)/U;return P<=1&&P>=0?[P]:[]}function C(tt,lt,it,U){return 2*(1-U)*(lt-tt)+2*U*(it-lt)}function p(tt,lt,it,U,P,H,k){var h=E(tt,it,P,k),g=E(lt,U,H,k),G=s.pointAt(tt,lt,it,U,k),V=s.pointAt(it,U,P,H,k);return[[tt,lt,G.x,G.y,h,g],[h,g,V.x,V.y,P,H]]}var x={box:function(lt,it,U,P,H,k){var h=O(lt,U,H)[0],g=O(it,P,k)[0],G=[lt,H],V=[it,k];return h!==void 0&&G.push(E(lt,U,H,h)),g!==void 0&&V.push(E(it,P,k,g)),M(G,V)},length:function(lt,it,U,P,H,k){return function h(g,G,V,$,rt,ot,At){if(At===0)return(S(g,G,V,$)+S(V,$,rt,ot)+S(g,G,rt,ot))/2;var gt=p(g,G,V,$,rt,ot,.5),mt=gt[0],bt=gt[1];return mt.push(At-1),bt.push(At-1),h.apply(null,mt)+h.apply(null,bt)}(lt,it,U,P,H,k,3)},nearestPoint:function(lt,it,U,P,H,k,h,g){return d([lt,U,H],[it,P,k],h,g,E)},pointDistance:function(lt,it,U,P,H,k,h,g){var G=this.nearestPoint(lt,it,U,P,H,k,h,g);return S(G.x,G.y,h,g)},interpolationAt:E,pointAt:function(lt,it,U,P,H,k,h){return{x:E(lt,U,H,h),y:E(it,P,k,h)}},divide:function(lt,it,U,P,H,k,h){return p(lt,it,U,P,H,k,h)},tangentAngle:function(lt,it,U,P,H,k,h){var g=C(lt,U,H,h),G=C(it,P,k,h);return y(Math.atan2(G,g))}};function T(tt,lt,it,U,P){var H=1-P;return H*H*H*tt+3*lt*P*H*H+3*it*P*P*H+U*P*P*P}function N(tt,lt,it,U,P){var H=1-P;return 3*(H*H*(lt-tt)+2*H*P*(it-lt)+P*P*(U-it))}function Y(tt,lt,it,U){var P,H,k,h=-3*tt+9*lt-9*it+3*U,g=6*tt-12*lt+6*it,G=3*lt-3*tt,V=[];if(f(h,0))f(g,0)||(P=-G/g)>=0&&P<=1&&V.push(P);else{var $=g*g-4*h*G;f($,0)?V.push(-g/(2*h)):$>0&&(H=(-g-(k=Math.sqrt($)))/(2*h),(P=(-g+k)/(2*h))>=0&&P<=1&&V.push(P),H>=0&&H<=1&&V.push(H))}return V}function q(tt,lt,it,U,P,H,k,h,g){var G=T(tt,it,P,k,g),V=T(lt,U,H,h,g),$=s.pointAt(tt,lt,it,U,g),rt=s.pointAt(it,U,P,H,g),ot=s.pointAt(P,H,k,h,g),At=s.pointAt($.x,$.y,rt.x,rt.y,g),gt=s.pointAt(rt.x,rt.y,ot.x,ot.y,g);return[[tt,lt,$.x,$.y,At.x,At.y,G,V],[G,V,gt.x,gt.y,ot.x,ot.y,k,h]]}function nt(tt,lt,it,U,P,H,k,h,g){if(g===0)return function(rt,ot){for(var At=0,gt=rt.length,mt=0;mt<gt;mt++)At+=S(rt[mt],ot[mt],rt[(mt+1)%gt],ot[(mt+1)%gt]);return At/2}([tt,it,P,k],[lt,U,H,h]);var G=q(tt,lt,it,U,P,H,k,h,.5),V=G[0],$=G[1];return V.push(g-1),$.push(g-1),nt.apply(null,V)+nt.apply(null,$)}var vt={extrema:Y,box:function(lt,it,U,P,H,k,h,g){for(var G=[lt,h],V=[it,g],$=Y(lt,U,H,h),rt=Y(it,P,k,g),ot=0;ot<$.length;ot++)G.push(T(lt,U,H,h,$[ot]));for(ot=0;ot<rt.length;ot++)V.push(T(it,P,k,g,rt[ot]));return M(G,V)},length:function(lt,it,U,P,H,k,h,g){return nt(lt,it,U,P,H,k,h,g,3)},nearestPoint:function(lt,it,U,P,H,k,h,g,G,V,$){return d([lt,U,H,h],[it,P,k,g],G,V,T,$)},pointDistance:function(lt,it,U,P,H,k,h,g,G,V,$){var rt=this.nearestPoint(lt,it,U,P,H,k,h,g,G,V,$);return S(rt.x,rt.y,G,V)},interpolationAt:T,pointAt:function(lt,it,U,P,H,k,h,g,G){return{x:T(lt,U,H,h,G),y:T(it,P,k,g,G)}},divide:function(lt,it,U,P,H,k,h,g,G){return q(lt,it,U,P,H,k,h,g,G)},tangentAngle:function(lt,it,U,P,H,k,h,g,G){var V=N(lt,U,H,h,G),$=N(it,P,k,g,G);return y(Math.atan2($,V))}};function ht(tt,lt){var it=Math.abs(tt);return lt>0?it:-1*it}var St=function(lt,it,U,P,H,k){var h=U,g=P;if(h===0||g===0)return{x:lt,y:it};for(var G,V,$=H-lt,rt=k-it,ot=Math.abs($),At=Math.abs(rt),gt=h*h,mt=g*g,bt=Math.PI/4,jt=0;jt<4;jt++){G=h*Math.cos(bt),V=g*Math.sin(bt);var Dt=(gt-mt)*Math.pow(Math.cos(bt),3)/h,Ut=(mt-gt)*Math.pow(Math.sin(bt),3)/g,Ct=G-Dt,Vt=V-Ut,Ht=ot-Dt,re=At-Ut,pe=Math.hypot(Vt,Ct),ye=Math.hypot(re,Ht);bt+=pe*Math.asin((Ct*re-Vt*Ht)/(pe*ye))/Math.sqrt(gt+mt-G*G-V*V),bt=Math.min(Math.PI/2,Math.max(0,bt))}return{x:lt+ht(G,$),y:it+ht(V,rt)}};function wt(tt,lt,it,U,P,H){return it*Math.cos(P)*Math.cos(H)-U*Math.sin(P)*Math.sin(H)+tt}function xt(tt,lt,it,U,P,H){return it*Math.sin(P)*Math.cos(H)+U*Math.cos(P)*Math.sin(H)+lt}function ft(tt,lt,it){return{x:tt*Math.cos(it),y:lt*Math.sin(it)}}function Ft(tt,lt,it){var U=Math.cos(it),P=Math.sin(it);return[tt*U-lt*P,tt*P+lt*U]}var kt={box:function(lt,it,U,P,H,k,h){for(var g=function(Ct,Vt,Ht){return Math.atan(-Vt/Ct*Math.tan(Ht))}(U,P,H),G=1/0,V=-1/0,$=[k,h],rt=2*-Math.PI;rt<=2*Math.PI;rt+=Math.PI){var ot=g+rt;k<h?k<ot&&ot<h&&$.push(ot):h<ot&&ot<k&&$.push(ot)}for(rt=0;rt<$.length;rt++){var At=wt(lt,0,U,P,H,$[rt]);At<G&&(G=At),At>V&&(V=At)}var gt=function(Ct,Vt,Ht){return Math.atan(Vt/(Ct*Math.tan(Ht)))}(U,P,H),mt=1/0,bt=-1/0,jt=[k,h];for(rt=2*-Math.PI;rt<=2*Math.PI;rt+=Math.PI){var Dt=gt+rt;k<h?k<Dt&&Dt<h&&jt.push(Dt):h<Dt&&Dt<k&&jt.push(Dt)}for(rt=0;rt<jt.length;rt++){var Ut=xt(0,it,U,P,H,jt[rt]);Ut<mt&&(mt=Ut),Ut>bt&&(bt=Ut)}return{x:G,y:mt,width:V-G,height:bt-mt}},length:function(lt,it,U,P,H,k,h){},nearestPoint:function(lt,it,U,P,H,k,h,g,G){var V=Ft(g-lt,G-it,-H),$=V[0],rt=V[1],ot=St(0,0,U,P,$,rt),At=function(mt,bt,jt,Dt){return(Math.atan2(Dt*mt,jt*bt)+2*Math.PI)%(2*Math.PI)}(U,P,ot.x,ot.y);At<k?ot=ft(U,P,k):At>h&&(ot=ft(U,P,h));var gt=Ft(ot.x,ot.y,H);return{x:gt[0]+lt,y:gt[1]+it}},pointDistance:function(lt,it,U,P,H,k,h,g,G){var V=this.nearestPoint(lt,it,U,P,g,G);return S(V.x,V.y,g,G)},pointAt:function(lt,it,U,P,H,k,h,g){var G=(h-k)*g+k;return{x:wt(lt,0,U,P,H,G),y:xt(0,it,U,P,H,G)}},tangentAngle:function(lt,it,U,P,H,k,h,g){var G=(h-k)*g+k,V=function(rt,ot,At,gt,mt,bt,jt,Dt){return-1*At*Math.cos(mt)*Math.sin(Dt)-gt*Math.sin(mt)*Math.cos(Dt)}(0,0,U,P,H,0,0,G),$=function(rt,ot,At,gt,mt,bt,jt,Dt){return-1*At*Math.sin(mt)*Math.sin(Dt)+gt*Math.cos(mt)*Math.cos(Dt)}(0,0,U,P,H,0,0,G);return y(Math.atan2($,V))}};function Ot(tt){for(var lt=0,it=[],U=0;U<tt.length-1;U++){var P=tt[U],H=tt[U+1],k=S(P[0],P[1],H[0],H[1]),h={from:P,to:H,length:k};it.push(h),lt+=k}return{segments:it,totalLength:lt}}function X(tt){if(tt.length<2)return 0;for(var lt=0,it=0;it<tt.length-1;it++){var U=tt[it],P=tt[it+1];lt+=S(U[0],U[1],P[0],P[1])}return lt}function ct(tt,lt){if(lt>1||lt<0||tt.length<2)return null;var it=Ot(tt),U=it.segments,P=it.totalLength;if(P===0)return{x:tt[0][0],y:tt[0][1]};for(var H=0,k=null,h=0;h<U.length;h++){var g=U[h],G=g.from,V=g.to,$=g.length/P;if(lt>=H&&lt<=H+$){var rt=(lt-H)/$;k=s.pointAt(G[0],G[1],V[0],V[1],rt);break}H+=$}return k}function dt(tt,lt){if(lt>1||lt<0||tt.length<2)return 0;for(var it=Ot(tt),U=it.segments,P=it.totalLength,H=0,k=0,h=0;h<U.length;h++){var g=U[h],G=g.from,V=g.to,$=g.length/P;if(lt>=H&&lt<=H+$){k=Math.atan2(V[1]-G[1],V[0]-G[0]);break}H+=$}return k}function pt(tt,lt,it){for(var U=1/0,P=0;P<tt.length-1;P++){var H=tt[P],k=tt[P+1],h=s.pointDistance(H[0],H[1],k[0],k[1],lt,it);h<U&&(U=h)}return U}var Mt={box:function(lt){for(var it=[],U=[],P=0;P<lt.length;P++){var H=lt[P];it.push(H[0]),U.push(H[1])}return M(it,U)},length:function(lt){return X(lt)},pointAt:function(lt,it){return ct(lt,it)},pointDistance:function(lt,it,U){return pt(lt,it,U)},tangentAngle:function(lt,it){return dt(lt,it)}}},function(a,A){function e(i){return a.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},e(i)}a.exports=e},function(a,A,e){"use strict";e.d(A,"b",function(){return b}),e.d(A,"a",function(){return S}),e.d(A,"d",function(){return f}),e.d(A,"c",function(){return M});var i=e(0),v=e(16);function b(I){return document.createElementNS("http://www.w3.org/2000/svg",I)}function S(I){var y=v.a[I.type],n=I.getParent();if(!y)throw new Error("the type "+I.type+" is not supported by svg");var s=b(y);if(I.get("id")&&(s.id=I.get("id")),I.set("el",s),I.set("attrs",{}),n){var d=n.get("el");d||(d=n.createDom(),n.set("el",d)),d.appendChild(s)}return s}function f(I,y){var n=I.get("el"),s=Object(i.F)(n.children).sort(y),d=document.createDocumentFragment();s.forEach(function(E){d.appendChild(E)}),n.appendChild(d)}function M(I,y){var n=I.parentNode,s=Array.from(n.childNodes).filter(function(C){return C.nodeType===1&&C.nodeName.toLowerCase()!=="defs"}),d=s[y],E=s.indexOf(I);if(d){if(E>y)n.insertBefore(I,d);else if(E<y){var O=s[y+1];O?n.insertBefore(I,O):n.appendChild(I)}}else n.appendChild(I)}},function(a,A,e){var i=e(474),v=e(475),b=e(218),S=e(476);a.exports=function(f){return i(f)||v(f)||b(f)||S()}},function(a,A,e){var i;try{i={cloneDeep:e(383),constant:e(134),defaults:e(384),each:e(181),filter:e(184),find:e(385),flatten:e(212),forEach:e(182),forIn:e(390),has:e(195),isUndefined:e(196),last:e(391),map:e(197),mapValues:e(392),max:e(393),merge:e(395),min:e(400),minBy:e(401),now:e(402),pick:e(403),range:e(408),reduce:e(199),sortBy:e(411),uniqueId:e(416),values:e(205),zipObject:e(417)}}catch(v){}i||(i=window._),a.exports=i},function(a,A){a.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(a,A){var e=Array.isArray;a.exports=e},function(a,A,e){var i=e(472);a.exports=function(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),b&&i(v,b)}},function(a,A,e){var i=e(90),v=e(25);a.exports=function(b,S){return!S||i(S)!=="object"&&typeof S!="function"?v(b):S}},function(a,A,e){"use strict";e.d(A,"a",function(){return I}),e.d(A,"d",function(){return y}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return s}),e.d(A,"e",function(){return O}),e.d(A,"h",function(){return C}),e.d(A,"f",function(){return p}),e.d(A,"g",function(){return x});var i=e(0),v=e(120),b=e(89),S=e(17),f=e(34),M={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function I(T,N){var Y=N.attr();for(var q in Y){var nt=Y[q],vt=M[q]?M[q]:q;vt==="matrix"&&nt?T.transform(nt[0],nt[1],nt[3],nt[4],nt[6],nt[7]):vt==="lineDash"&&T.setLineDash?Object(i.m)(nt)&&T.setLineDash(nt):(vt==="strokeStyle"||vt==="fillStyle"?nt=Object(v.b)(T,N,nt):vt==="globalAlpha"&&(nt*=T.globalAlpha),T[vt]=nt)}}function y(T,N,Y){for(var q=0;q<N.length;q++){var nt=N[q];nt.cfg.visible?nt.draw(T,Y):nt.skipDraw()}}function n(T,N,Y){var q=T.get("refreshElements");Object(i.f)(q,function(nt){if(nt!==T)for(var vt=nt.cfg.parent;vt&&vt!==T&&!vt.cfg.refresh;)vt.cfg.refresh=!0,vt=vt.cfg.parent}),q[0]===T?d(N,Y):function nt(vt,ht){for(var St=0;St<vt.length;St++){var wt=vt[St];if(wt.cfg.visible)if(wt.cfg.hasChanged)wt.cfg.refresh=!0,wt.isGroup()&&d(wt.cfg.children,ht);else if(wt.cfg.refresh)wt.isGroup()&&nt(wt.cfg.children,ht);else{var xt=E(wt,ht);wt.cfg.refresh=xt,xt&&wt.isGroup()&&nt(wt.cfg.children,ht)}}}(N,Y)}function s(T){for(var N=0;N<T.length;N++){var Y=T[N];Y.cfg.hasChanged=!1,Y.isGroup()&&!Y.destroyed&&s(Y.cfg.children)}}function d(T,N){for(var Y=0;Y<T.length;Y++){var q=T[Y];q.cfg.refresh=!0,q.isGroup()&&d(q.get("children"),N)}}function E(T,N){var Y=T.cfg.cacheCanvasBBox;return T.cfg.isInView&&Y&&Object(S.f)(Y,N)}function O(T,N,Y,q){var nt=Y.path,vt=Y.startArrow,ht=Y.endArrow;if(nt){var St=[0,0],wt=[0,0],xt={dx:0,dy:0};N.beginPath();for(var ft=0;ft<nt.length;ft++){var Ft=nt[ft],kt=Ft[0];if(ft===0&&vt&&vt.d){var Ot=T.getStartTangent();xt=f.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],vt.d)}else ft===nt.length-2&&nt[ft+1][0]==="Z"&&ht&&ht.d?nt[ft+1][0]==="Z"&&(Ot=T.getEndTangent(),xt=f.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],ht.d)):ft===nt.length-1&&ht&&ht.d&&nt[0]!=="Z"&&(Ot=T.getEndTangent(),xt=f.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],ht.d));var X=xt.dx,ct=xt.dy;switch(kt){case"M":N.moveTo(Ft[1]-X,Ft[2]-ct),wt=[Ft[1],Ft[2]];break;case"L":N.lineTo(Ft[1]-X,Ft[2]-ct);break;case"Q":N.quadraticCurveTo(Ft[1],Ft[2],Ft[3]-X,Ft[4]-ct);break;case"C":N.bezierCurveTo(Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]-X,Ft[6]-ct);break;case"A":var dt=void 0;q?(dt=q[ft])||(dt=Object(b.a)(St,Ft),q[ft]=dt):dt=Object(b.a)(St,Ft);var pt=dt.cx,Mt=dt.cy,tt=dt.rx,lt=dt.ry,it=dt.startAngle,U=dt.endAngle,P=dt.xRotation,H=dt.sweepFlag;if(N.ellipse)N.ellipse(pt,Mt,tt,lt,P,it,U,1-H);else{var k=tt>lt?tt:lt,h=tt>lt?1:tt/lt,g=tt>lt?lt/tt:1;N.translate(pt,Mt),N.rotate(P),N.scale(h,g),N.arc(0,0,k,it,U,1-H),N.scale(1/h,1/g),N.rotate(-P),N.translate(-pt,-Mt)}break;case"Z":N.closePath()}if(kt==="Z")St=wt;else{var G=Ft.length;St=[Ft[G-2],Ft[G-1]]}}}}function C(T,N){var Y=T.get("canvas");Y&&(N==="remove"&&(T._cacheCanvasBBox=T.get("cacheCanvasBBox")),T.get("hasChanged")||(T.set("hasChanged",!0),T.cfg.parent&&T.cfg.parent.get("hasChanged")||(Y.refreshElement(T,N,Y),Y.get("autoDraw")&&Y.draw())))}function p(T){if(!T.length)return null;var N=[],Y=[],q=[],nt=[];return Object(i.f)(T,function(vt){var ht=function(St){var wt;if(St.destroyed)wt=St._cacheCanvasBBox;else{var xt=St.get("cacheCanvasBBox"),ft=xt&&!(!xt.width||!xt.height),Ft=St.getCanvasBBox(),kt=Ft&&!(!Ft.width||!Ft.height);ft&&kt?wt=Object(S.l)(xt,Ft):ft?wt=xt:kt&&(wt=Ft)}return wt}(vt);ht&&(N.push(ht.minX),Y.push(ht.minY),q.push(ht.maxX),nt.push(ht.maxY))}),{minX:Math.min.apply(null,N),minY:Math.min.apply(null,Y),maxX:Math.max.apply(null,q),maxY:Math.max.apply(null,nt)}}function x(T,N){return T&&N&&Object(S.f)(T,N)?{minX:Math.max(T.minX,N.minX),minY:Math.max(T.minY,N.minY),maxX:Math.min(T.maxX,N.maxX),maxY:Math.min(T.maxY,N.maxY)}:null}},function(a,A){a.exports=function(e,i){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(a,A,e){"use strict";e.d(A,"a",function(){return f}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return E}),e.d(A,"d",function(){return Y});var i=e(0),v=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,b=/[^\s\,]+/gi,S=function(nt){var vt=nt||[];return Object(i.m)(vt)?vt:Object(i.x)(vt)?(vt=vt.match(v),Object(i.f)(vt,function(ht,St){if((ht=ht.match(b))[0].length>1){var wt=ht[0].charAt(0);ht.splice(1,0,ht[0].substr(1)),ht[0]=wt}Object(i.f)(ht,function(xt,ft){isNaN(xt)||(ht[ft]=+xt)}),vt[St]=ht}),vt):void 0};function f(q,nt){for(var vt=[],ht=0,St=q.length;St-2*!nt>ht;ht+=2){var wt=[{x:+q[ht-2],y:+q[ht-1]},{x:+q[ht],y:+q[ht+1]},{x:+q[ht+2],y:+q[ht+3]},{x:+q[ht+4],y:+q[ht+5]}];nt?ht?St-4===ht?wt[3]={x:+q[0],y:+q[1]}:St-2===ht&&(wt[2]={x:+q[0],y:+q[1]},wt[3]={x:+q[2],y:+q[3]}):wt[0]={x:+q[St-2],y:+q[St-1]}:St-4===ht?wt[3]=wt[2]:ht||(wt[0]={x:+q[ht],y:+q[ht+1]}),vt.push(["C",(-wt[0].x+6*wt[1].x+wt[2].x)/6,(-wt[0].y+6*wt[1].y+wt[2].y)/6,(wt[1].x+6*wt[2].x-wt[3].x)/6,(wt[1].y+6*wt[2].y-wt[3].y)/6,wt[2].x,wt[2].y])}return vt}var M=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,I=new RegExp("([a-z])["+M+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+M+"]*,?["+M+"]*)+)","ig"),y=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+M+"]*,?["+M+"]*","ig");function n(q){if(!q)return null;if(Object(i.m)(q))return q;var nt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},vt=[];return String(q).replace(I,function(ht,St,wt){var xt=[],ft=St.toLowerCase();if(wt.replace(y,function(Ft,kt){kt&&xt.push(+kt)}),ft==="m"&&xt.length>2&&(vt.push([St].concat(xt.splice(0,2))),ft="l",St=St==="m"?"l":"L"),ft==="o"&&xt.length===1&&vt.push([St,xt[0]]),ft==="r")vt.push([St].concat(xt));else for(;xt.length>=nt[ft]&&(vt.push([St].concat(xt.splice(0,nt[ft]))),nt[ft]););return""}),vt}var s=/[a-z]/;function d(q,nt){return[nt[0]+(nt[0]-q[0]),nt[1]+(nt[1]-q[1])]}function E(q){var nt=n(q);if(!nt||!nt.length)return[["M",0,0]];for(var vt=!1,ht=0;ht<nt.length;ht++){var St=nt[ht][0];if(s.test(St)||["V","H","T","S"].indexOf(St)>=0){vt=!0;break}}if(!vt)return nt;var wt=[],xt=0,ft=0,Ft=0,kt=0,Ot=0,X=nt[0];X[0]!=="M"&&X[0]!=="m"||(Ft=xt=+X[1],kt=ft=+X[2],Ot++,wt[0]=["M",xt,ft]),ht=Ot;for(var ct=nt.length;ht<ct;ht++){var dt=nt[ht],pt=wt[ht-1],Mt=[],tt=(St=dt[0]).toUpperCase();if(St!==tt)switch(Mt[0]=tt,tt){case"A":Mt[1]=dt[1],Mt[2]=dt[2],Mt[3]=dt[3],Mt[4]=dt[4],Mt[5]=dt[5],Mt[6]=+dt[6]+xt,Mt[7]=+dt[7]+ft;break;case"V":Mt[1]=+dt[1]+ft;break;case"H":Mt[1]=+dt[1]+xt;break;case"M":Ft=+dt[1]+xt,kt=+dt[2]+ft;break;default:for(var lt=1,it=dt.length;lt<it;lt++)Mt[lt]=+dt[lt]+(lt%2?xt:ft)}else Mt=nt[ht];switch(tt){case"Z":xt=+Ft,ft=+kt;break;case"H":Mt=["L",xt=Mt[1],ft];break;case"V":Mt=["L",xt,ft=Mt[1]];break;case"T":xt=Mt[1],ft=Mt[2];var U=d([pt[1],pt[2]],[pt[3],pt[4]]);Mt=["Q",U[0],U[1],xt,ft];break;case"S":xt=Mt[Mt.length-2],ft=Mt[Mt.length-1];var P=pt.length,H=d([pt[P-4],pt[P-3]],[pt[P-2],pt[P-1]]);Mt=["C",H[0],H[1],Mt[1],Mt[2],xt,ft];break;case"M":Ft=Mt[Mt.length-2],kt=Mt[Mt.length-1];break;default:xt=Mt[Mt.length-2],ft=Mt[Mt.length-1]}wt.push(Mt)}return wt}function O(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])}function C(q,nt){return O(q)*O(nt)?(q[0]*nt[0]+q[1]*nt[1])/(O(q)*O(nt)):1}function p(q,nt){return(q[0]*nt[1]<q[1]*nt[0]?-1:1)*Math.acos(C(q,nt))}function x(q,nt){return q[0]===nt[0]&&q[1]===nt[1]}function T(q,nt){var vt=nt[1],ht=nt[2],St=Object(i.B)(Object(i.G)(nt[3]),2*Math.PI),wt=nt[4],xt=nt[5],ft=q[0],Ft=q[1],kt=nt[6],Ot=nt[7],X=Math.cos(St)*(ft-kt)/2+Math.sin(St)*(Ft-Ot)/2,ct=-1*Math.sin(St)*(ft-kt)/2+Math.cos(St)*(Ft-Ot)/2,dt=X*X/(vt*vt)+ct*ct/(ht*ht);dt>1&&(vt*=Math.sqrt(dt),ht*=Math.sqrt(dt));var pt=vt*vt*(ct*ct)+ht*ht*(X*X),Mt=pt?Math.sqrt((vt*vt*(ht*ht)-pt)/pt):1;wt===xt&&(Mt*=-1),isNaN(Mt)&&(Mt=0);var tt=ht?Mt*vt*ct/ht:0,lt=vt?Mt*-ht*X/vt:0,it=(ft+kt)/2+Math.cos(St)*tt-Math.sin(St)*lt,U=(Ft+Ot)/2+Math.sin(St)*tt+Math.cos(St)*lt,P=[(X-tt)/vt,(ct-lt)/ht],H=[(-1*X-tt)/vt,(-1*ct-lt)/ht],k=p([1,0],P),h=p(P,H);return C(P,H)<=-1&&(h=Math.PI),C(P,H)>=1&&(h=0),xt===0&&h>0&&(h-=2*Math.PI),xt===1&&h<0&&(h+=2*Math.PI),{cx:it,cy:U,rx:x(q,[kt,Ot])?0:vt,ry:x(q,[kt,Ot])?0:ht,startAngle:k,endAngle:k+h,xRotation:St,arcFlag:wt,sweepFlag:xt}}function N(q,nt){return[nt[0]+(nt[0]-q[0]),nt[1]+(nt[1]-q[1])]}function Y(q){for(var nt=[],vt=null,ht=null,St=null,wt=0,xt=(q=S(q)).length,ft=0;ft<xt;ft++){var Ft=q[ft];ht=q[ft+1];var kt=Ft[0],Ot={command:kt,prePoint:vt,params:Ft,startTangent:null,endTangent:null};switch(kt){case"M":St=[Ft[1],Ft[2]],wt=ft;break;case"A":var X=T(vt,Ft);Ot.arcParams=X}if(kt==="Z")vt=St,ht=q[wt+1];else{var ct=Ft.length;vt=[Ft[ct-2],Ft[ct-1]]}ht&&ht[0]==="Z"&&(ht=q[wt],nt[wt]&&(nt[wt].prePoint=vt)),Ot.currentPoint=vt,nt[wt]&&x(vt,nt[wt].currentPoint)&&(nt[wt].prePoint=Ot.prePoint);var dt=ht?[ht[ht.length-2],ht[ht.length-1]]:null;Ot.nextPoint=dt;var pt=Ot.prePoint;if(["L","H","V"].includes(kt))Ot.startTangent=[pt[0]-vt[0],pt[1]-vt[1]],Ot.endTangent=[vt[0]-pt[0],vt[1]-pt[1]];else if(kt==="Q"){var Mt=[Ft[1],Ft[2]];Ot.startTangent=[pt[0]-Mt[0],pt[1]-Mt[1]],Ot.endTangent=[vt[0]-Mt[0],vt[1]-Mt[1]]}else if(kt==="T")Mt=N((it=nt[ft-1]).currentPoint,pt),it.command==="Q"?(Ot.command="Q",Ot.startTangent=[pt[0]-Mt[0],pt[1]-Mt[1]],Ot.endTangent=[vt[0]-Mt[0],vt[1]-Mt[1]]):(Ot.command="TL",Ot.startTangent=[pt[0]-vt[0],pt[1]-vt[1]],Ot.endTangent=[vt[0]-pt[0],vt[1]-pt[1]]);else if(kt==="C"){var tt=[Ft[1],Ft[2]],lt=[Ft[3],Ft[4]];Ot.startTangent=[pt[0]-tt[0],pt[1]-tt[1]],Ot.endTangent=[vt[0]-lt[0],vt[1]-lt[1]]}else if(kt==="S"){var it;tt=N((it=nt[ft-1]).currentPoint,pt),lt=[Ft[1],Ft[2]],it.command==="C"?(Ot.command="C",Ot.startTangent=[pt[0]-tt[0],pt[1]-tt[1]],Ot.endTangent=[vt[0]-lt[0],vt[1]-lt[1]]):(Ot.command="SQ",Ot.startTangent=[pt[0]-lt[0],pt[1]-lt[1]],Ot.endTangent=[vt[0]-lt[0],vt[1]-lt[1]])}else if(kt==="A"){var U=.001,P=Ot.arcParams||{},H=P.cx,k=H===void 0?0:H,h=P.cy,g=h===void 0?0:h,G=P.rx,V=G===void 0?0:G,$=P.ry,rt=$===void 0?0:$,ot=P.sweepFlag,At=ot===void 0?0:ot,gt=P.startAngle,mt=gt===void 0?0:gt,bt=P.endAngle,jt=bt===void 0?0:bt;At===0&&(U*=-1);var Dt=V*Math.cos(mt-U)+k,Ut=rt*Math.sin(mt-U)+g;Ot.startTangent=[Dt-St[0],Ut-St[1]];var Ct=V*Math.cos(mt+jt+U)+k,Vt=rt*Math.sin(mt+jt-U)+g;Ot.endTangent=[pt[0]-Ct,pt[1]-Vt]}nt.push(Ot)}return nt}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.POST_CONSTRUCT=A.DESIGN_PARAM_TYPES=A.PARAM_TYPES=A.TAGGED_PROP=A.TAGGED=A.MULTI_INJECT_TAG=A.INJECT_TAG=A.OPTIONAL_TAG=A.UNMANAGED_TAG=A.NAME_TAG=A.NAMED_TAG=void 0,A.NAMED_TAG="named",A.NAME_TAG="name",A.UNMANAGED_TAG="unmanaged",A.OPTIONAL_TAG="optional",A.INJECT_TAG="inject",A.MULTI_INJECT_TAG="multi_inject",A.TAGGED="inversify:tagged",A.TAGGED_PROP="inversify:tagged_props",A.PARAM_TYPES="inversify:paramtypes",A.DESIGN_PARAM_TYPES="design:paramtypes",A.POST_CONSTRUCT="post_construct"},function(a,A,e){var i,v,b;function S(f){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}(function(f,M){S(A)=="object"&&a!==void 0?M(A):(v=[A],(b=typeof(i=M)=="function"?i.apply(A,v):i)===void 0||(a.exports=b))})(0,function(f){"use strict";var M=function(ct,dt){var pt=ct.nodes,Mt=ct.edges,tt=[],lt={};if(!pt)throw Error("invalid nodes data!");return pt&&pt.forEach(function(it,U){lt[it.id]=U,tt.push([])}),Mt&&Mt.forEach(function(it){var U=lt[it.source],P=lt[it.target];tt[U][P]=1,dt||(tt[P][U]=1)}),tt};function I(X,ct){if(!(X instanceof ct))throw new TypeError("Cannot call a class as a function")}function y(X,ct){for(var dt=0;ct.length>dt;dt++){var pt=ct[dt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(X,pt.key,pt)}}function n(X,ct,dt){return ct&&y(X.prototype,ct),dt&&y(X,dt),X}function s(X){return function(ct){if(Array.isArray(ct))return E(ct)}(X)||function(ct){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(ct))return Array.from(ct)}(X)||d(X)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(X,ct){if(X){if(typeof X=="string")return E(X,ct);var dt=Object.prototype.toString.call(X).slice(8,-1);return dt==="Object"&&X.constructor&&(dt=X.constructor.name),dt==="Map"||dt==="Set"?Array.from(X):dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt)?E(X,ct):void 0}}function E(X,ct){(ct==null||ct>X.length)&&(ct=X.length);for(var dt=0,pt=Array(ct);ct>dt;dt++)pt[dt]=X[dt];return pt}function O(X,ct){var dt;if(typeof Symbol=="undefined"||X[Symbol.iterator]==null){if(Array.isArray(X)||(dt=d(X))||ct&&X&&typeof X.length=="number"){dt&&(X=dt);var pt=0,Mt=function(){};return{s:Mt,n:function(){return X.length>pt?{done:!1,value:X[pt++]}:{done:!0}},e:function(P){throw P},f:Mt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tt,lt=!0,it=!1;return{s:function(){dt=X[Symbol.iterator]()},n:function(){var P=dt.next();return lt=P.done,P},e:function(P){it=!0,tt=P},f:function(){try{lt||dt.return==null||dt.return()}finally{if(it)throw tt}}}}var C=function(ct,dt){return ct===dt},p=function(){function X(ct){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;I(this,X),this.value=ct,this.next=dt}return n(X,[{key:"toString",value:function(dt){return dt?dt(this.value):"".concat(this.value)}}]),X}(),x=function(){function X(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;I(this,X),this.head=null,this.tail=null,this.compare=ct}return n(X,[{key:"prepend",value:function(dt){var pt=new p(dt,this.head);return this.head=pt,this.tail||(this.tail=pt),this}},{key:"append",value:function(dt){var pt=new p(dt);return this.head?(this.tail.next=pt,this.tail=pt,this):(this.head=pt,this.tail=pt,this)}},{key:"delete",value:function(dt){if(!this.head)return null;for(var pt=null;this.head&&this.compare(this.head.value,dt);)pt=this.head,this.head=this.head.next;var Mt=this.head;if(Mt!==null)for(;Mt.next;)this.compare(Mt.next.value,dt)?(pt=Mt.next,Mt.next=Mt.next.next):Mt=Mt.next;return this.compare(this.tail.value,dt)&&(this.tail=Mt),pt}},{key:"find",value:function(dt){var pt=dt.value,Mt=pt===void 0?void 0:pt,tt=dt.callback,lt=tt===void 0?void 0:tt;if(!this.head)return null;for(var it=this.head;it;){if(lt&&lt(it.value)||Mt!==void 0&&this.compare(it.value,Mt))return it;it=it.next}return null}},{key:"deleteTail",value:function(){var dt=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,dt;for(var pt=this.head;pt.next;)pt.next.next?pt=pt.next:pt.next=null;return this.tail=pt,dt}},{key:"deleteHead",value:function(){if(!this.head)return null;var dt=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),dt}},{key:"fromArray",value:function(dt){var pt=this;return dt.forEach(function(Mt){return pt.append(Mt)}),this}},{key:"toArray",value:function(){for(var dt=[],pt=this.head;pt;)dt.push(pt),pt=pt.next;return dt}},{key:"reverse",value:function(){for(var dt=this.head,pt=null,Mt=null;dt;)Mt=dt.next,dt.next=pt,pt=dt,dt=Mt;this.tail=this.head,this.head=pt}},{key:"toString",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return""+this.toArray().map(function(pt){return pt.toString(dt)})}}]),X}(),T=function(){function X(){I(this,X),this.linkedList=new x}return n(X,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"peek",value:function(){return this.linkedList.head?this.linkedList.head.value:null}},{key:"enqueue",value:function(dt){this.linkedList.append(dt)}},{key:"dequeue",value:function(){var dt=this.linkedList.deleteHead();return dt?dt.value:null}},{key:"toString",value:function(dt){return this.linkedList.toString(dt)}}]),X}(),N=function(ct){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],pt=arguments.length>2?arguments[2]:void 0,Mt=dt.filter(function(U){return U.source===ct||U.target===ct});if(pt==="target"){var tt=function(P){return P.source===ct};return Mt.filter(tt).map(function(U){return U.target})}if(pt==="source"){var lt=function(P){return P.target===ct};return Mt.filter(lt).map(function(U){return U.source})}var it=function(P){return P.source===ct?P.target:P.source};return Mt.map(it)},Y=function(ct,dt){return dt.filter(function(pt){return pt.source===ct||pt.target===ct})},q=function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,dt="".concat(Math.random()).split(".")[1].substr(0,5),pt="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ct,"-").concat(dt).concat(pt)},nt=function(ct){var dt={},pt=ct.nodes,Mt=ct.edges,tt=Mt===void 0?[]:Mt;return(pt===void 0?[]:pt).forEach(function(lt){dt[lt.id]={degree:0,inDegree:0,outDegree:0}}),tt.forEach(function(lt){dt[lt.source].degree++,dt[lt.source].outDegree++,dt[lt.target].degree++,dt[lt.target].inDegree++}),dt};function vt(X,ct,dt){(function pt(Mt,tt,lt,it){it.enter({current:tt,previous:lt});var U=Mt.edges;N(tt,U===void 0?[]:U,"target").forEach(function(P){it.allowTraversal({previous:lt,current:tt,next:P})&&pt(Mt,P,tt,it)}),it.leave({current:tt,previous:lt})})(X,ct,"",function(){var pt,Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=Mt,lt=function(){},it=(pt={},function(U){var P=U.next;return!pt[P]&&(pt[P]=!0,!0)});return tt.allowTraversal=Mt.allowTraversal||it,tt.enter=Mt.enter||lt,tt.leave=Mt.leave||lt,tt}(dt))}var ht=function(ct,dt,pt,Mt){var tt=ct.nodes,lt=tt===void 0?[]:tt,it=ct.edges,U=it===void 0?[]:it,P={},H={},k={};lt.forEach(function(At,gt){var mt=At.id;H[mt]=1/0,mt===dt&&(H[mt]=0)});for(var h=lt.length,g=function(gt){var mt=function(jt,Dt,Ut){for(var Ct,Vt=1/0,Ht=0;Dt.length>Ht;Ht++){var re=Dt[Ht].id;Ut[re]||jt[re]>Vt||(Vt=jt[re],Ct=Dt[Ht])}return Ct}(H,lt,P),bt=mt.id;if(P[bt]=!0,H[bt]===1/0)return"continue";(pt?function(jt,Dt){return Dt.filter(function(Ut){return Ut.source===jt})}(bt,U):Y(bt,U)).forEach(function(jt){var Dt=jt.target,Ut=Dt===bt?jt.source:Dt,Ct=Mt&&jt[Mt]?jt[Mt]:1;H[Ut]>H[mt.id]+Ct?(H[Ut]=H[mt.id]+Ct,k[Ut]=[mt.id]):H[Ut]===H[mt.id]+Ct&&k[Ut].push(mt.id)})},G=0;h>G;G++)g();k[dt]=[dt];var V={};for(var $ in H)H[$]!==1/0&&St(dt,$,k,V);var rt={};for(var ot in V)rt[ot]=V[ot][0];return{length:H,path:rt,allPaths:V}};function St(X,ct,dt,pt){if(X===ct)return[X];if(pt[ct])return pt[ct];var Mt,tt=[],lt=O(dt[ct]);try{for(lt.s();!(Mt=lt.n()).done;){var it,U=O(St(X,Mt.value,dt,pt));try{for(U.s();!(it=U.n()).done;)tt.push([].concat(s(it.value),[ct]))}catch(P){U.e(P)}finally{U.f()}}}catch(P){lt.e(P)}finally{lt.f()}pt[ct]=tt}var wt=function(ct,dt,pt,Mt){for(var tt=dt.length,lt=2*Mt,it=0,U=0;tt>U;U++)for(var P=ct[U].clusterId,H=0;tt>H;H++)P===ct[H].clusterId&&(it+=(dt[U][H]||0)-(pt[U]||0)*(pt[H]||0)/lt);return it*(1/lt)},xt=function(){function X(ct){I(this,X),this.count=ct.length,this.parent={};var dt,pt=O(ct);try{for(pt.s();!(dt=pt.n()).done;){var Mt=dt.value;this.parent[Mt]=Mt}}catch(tt){pt.e(tt)}finally{pt.f()}}return n(X,[{key:"find",value:function(dt){for(;this.parent[dt]!==dt;)dt=this.parent[dt];return dt}},{key:"union",value:function(dt,pt){var Mt=this.find(dt),tt=this.find(pt);Mt!==tt&&(tt>Mt?(this.parent[pt]!==pt&&this.union(this.parent[pt],dt),this.parent[pt]=this.parent[dt]):(this.parent[dt]!==dt&&this.union(this.parent[dt],pt),this.parent[dt]=this.parent[pt]))}},{key:"connected",value:function(dt,pt){return this.find(dt)===this.find(pt)}}]),X}(),ft=function(ct,dt){return ct-dt},Ft=function(){function X(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ft;I(this,X),this.compareFn=ct,this.list=[]}return n(X,[{key:"getLeft",value:function(dt){return 2*dt+1}},{key:"getRight",value:function(dt){return 2*dt+2}},{key:"getParent",value:function(dt){return dt===0?null:Math.floor((dt-1)/2)}},{key:"isEmpty",value:function(){return 0>=this.list.length}},{key:"top",value:function(){return this.isEmpty()?void 0:this.list[0]}},{key:"delMin",value:function(){var dt=this.top(),pt=this.list.pop();return this.list.length>0&&(this.list[0]=pt,this.moveDown(0)),dt}},{key:"insert",value:function(dt){return dt!==null&&(this.list.push(dt),this.moveUp(this.list.length-1),!0)}},{key:"moveUp",value:function(dt){for(var pt=this.getParent(dt);dt&&dt>0&&this.compareFn(this.list[pt],this.list[dt])>0;){var Mt=this.list[pt];this.list[pt]=this.list[dt],this.list[dt]=Mt,pt=this.getParent(dt=pt)}}},{key:"moveDown",value:function(dt){var pt=dt,Mt=this.getLeft(dt),tt=this.getRight(dt),lt=this.list.length;if(Mt!==null&&lt>Mt&&this.compareFn(this.list[pt],this.list[Mt])>0?pt=Mt:tt!==null&&lt>tt&&this.compareFn(this.list[pt],this.list[tt])>0&&(pt=tt),dt!==pt){var it=[this.list[pt],this.list[dt]];this.list[dt]=it[0],this.list[pt]=it[1],this.moveDown(pt)}}}]),X}(),kt=function(ct,dt){var pt=[],Mt=ct.nodes,tt=Mt===void 0?[]:Mt,lt=ct.edges,it=lt===void 0?[]:lt;if(tt.length===0)return pt;var U=tt[0],P=new Set;P.add(U);var H=new Ft(function(G,V){return dt?G.weight-V.weight:0});for(Y(U.id,it).forEach(function(G){H.insert(G)});!H.isEmpty();){var k=H.delMin(),h=k.source,g=k.target;P.has(h)&&P.has(g)||(pt.push(k),P.has(h)||(P.add(h),Y(h,it).forEach(function(G){H.insert(G)})),P.has(g)||(P.add(g),Y(g,it).forEach(function(G){H.insert(G)})))}return pt},Ot=function(ct,dt){var pt=[],Mt=ct.nodes,tt=Mt===void 0?[]:Mt,lt=ct.edges;if(tt.length===0)return pt;var it=(lt===void 0?[]:lt).map(function(h){return h});dt&&it.sort(function(h,g){return h.weight-g.weight});for(var U=new xt(tt.map(function(h){return h.id}));it.length>0;){var P=it.shift(),H=P.source,k=P.target;U.connected(H,k)||(pt.push(P),U.union(H,k))}return pt};f.Stack=function(){function X(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;I(this,X),this.linkedList=new x,this.maxStep=ct}return n(X,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"isMaxStack",value:function(){return this.toArray().length>=this.maxStep}},{key:"peek",value:function(){return this.isEmpty()?null:this.linkedList.head.value}},{key:"push",value:function(dt){this.linkedList.prepend(dt),this.length>this.maxStep&&this.linkedList.deleteTail()}},{key:"pop",value:function(){var dt=this.linkedList.deleteHead();return dt?dt.value:null}},{key:"toArray",value:function(){return this.linkedList.toArray().map(function(dt){return dt.value})}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}},{key:"length",get:function(){return this.linkedList.toArray().length}}]),X}(),f.breadthFirstSearch=function(X,ct,dt){var pt=function(){var P,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=H,h=function(){},g=(P={},function(G){var V=G.next;return!P[V]&&(P[V]=!0,!0)});return k.allowTraversal=H.allowTraversal||g,k.enter=H.enter||h,k.leave=H.leave||h,k}(dt),Mt=new T,tt=X.edges,lt=tt===void 0?[]:tt;Mt.enqueue(ct);for(var it="",U=function(){var H=Mt.dequeue();pt.enter({current:H,previous:it}),N(H,lt,"target").forEach(function(k){pt.allowTraversal({previous:it,current:H,next:k})&&Mt.enqueue(k)}),pt.leave({current:H,previous:it}),it=H};!Mt.isEmpty();)U()},f.connectedComponent=function(X,ct){return ct?function(dt){var pt,Mt=dt.nodes,tt=Mt===void 0?[]:Mt,lt=dt.edges,it=lt===void 0?[]:lt,U=[],P={},H={},k={},h=[],g=0,G=function rt(ot){H[ot.id]=g,k[ot.id]=g,g+=1,U.push(ot),P[ot.id]=!0;for(var At=N(ot.id,it,"target").filter(function(Dt){return tt.map(function(Ut){return Ut.id}).indexOf(Dt)>-1}),gt=function(Ut){var Ct=At[Ut];if(H[Ct]||H[Ct]===0)P[Ct]&&(k[ot.id]=Math.min(k[ot.id],H[Ct]));else{var Vt=tt.filter(function(Ht){return Ht.id===Ct});Vt.length>0&&rt(Vt[0]),k[ot.id]=Math.min(k[ot.id],k[Ct])}},mt=0;At.length>mt;mt++)gt(mt);if(k[ot.id]===H[ot.id]){for(var bt=[];U.length>0;){var jt=U.pop();if(P[jt.id]=!1,bt.push(jt),jt===ot)break}bt.length>0&&h.push(bt)}},V=O(tt);try{for(V.s();!(pt=V.n()).done;){var $=pt.value;H[$.id]||H[$.id]===0||G($)}}catch(rt){V.e(rt)}finally{V.f()}return h}(X):function(dt){for(var pt=dt.nodes,Mt=pt===void 0?[]:pt,tt=dt.edges,lt=tt===void 0?[]:tt,it=[],U={},P=[],H=function G(V){P.push(V),U[V.id]=!0;for(var $=N(V.id,lt),rt=function(gt){var mt=$[gt];if(!U[mt]){var bt=Mt.filter(function(jt){return jt.id===mt});bt.length>0&&G(bt[0])}},ot=0;$.length>ot;++ot)rt(ot)},k=0;Mt.length>k;k++){var h=Mt[k];if(!U[h.id]){H(h);for(var g=[];P.length>0;)g.push(P.pop());it.push(g)}}return it}(X)},f.depthFirstSearch=vt,f.detectCycle=function(X){var ct=null,dt=X.nodes,pt={},Mt={},tt={},lt={};(dt===void 0?[]:dt).forEach(function(U){Mt[U.id]=U});for(var it={enter:function(P){var H=P.current,k=P.previous;if(tt[H]){ct={};for(var h=H,g=k;g!==H;)ct[h]=g,h=g,g=pt[g];ct[h]=g}else tt[H]=H,delete Mt[H],pt[H]=k},leave:function(P){var H=P.current;lt[H]=H,delete tt[H]},allowTraversal:function(P){return!ct&&!lt[P.next]}};Object.keys(Mt).length;)vt(X,Object.keys(Mt)[0],it);return ct},f.dijkstra=ht,f.findAllPath=function(X,ct,dt,pt){if(ct===dt)return[[ct]];var Mt,tt,lt=X.edges,it=lt===void 0?[]:lt,U=[ct],P=((tt=ct)in(Mt={})?Object.defineProperty(Mt,tt,{value:!0,enumerable:!0,configurable:!0,writable:!0}):Mt[tt]=!0,Mt),H=[],k=[],h=pt?N(ct,it,"target"):N(ct,it);for(H.push(h);U.length>0&&H.length>0;){var g=H[H.length-1];if(g.length){var G=g.shift();if(G&&(U.push(G),P[G]=!0,h=pt?N(G,it,"target"):N(G,it),H.push(h.filter(function(ot){return!P[ot]}))),U[U.length-1]===dt){var V=U.map(function(ot){return ot});k.push(V);var $=U.pop();P[$]=!1,H.pop()}}else{var rt=U.pop();P[rt]=!1,H.pop()}}return k},f.findShortestPath=function(X,ct,dt,pt,Mt){var tt=ht(X,ct,pt,Mt);return{length:tt.length[dt],path:tt.path[dt],allPath:tt.allPaths[dt]}},f.floydWarshall=function(X,ct){for(var dt=M(X,ct),pt=[],Mt=dt.length,tt=0;Mt>tt;tt+=1){pt[tt]=[];for(var lt=0;Mt>lt;lt+=1)pt[tt][lt]=tt===lt?0:dt[tt][lt]!==0&&dt[tt][lt]?dt[tt][lt]:1/0}for(var it=0;Mt>it;it+=1)for(var U=0;Mt>U;U+=1)for(var P=0;Mt>P;P+=1)pt[U][P]>pt[U][it]+pt[it][P]&&(pt[U][P]=pt[U][it]+pt[it][P]);return pt},f.getAdjMatrix=M,f.getDegree=nt,f.getInDegree=function(X,ct){return nt(X)[ct]?nt(X)[ct].inDegree:0},f.getNeighbors=N,f.getOutDegree=function(X,ct){return nt(X)[ct]?nt(X)[ct].outDegree:0},f.labelPropagation=function(X){var ct=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e3,Mt=X.nodes,tt=Mt===void 0?[]:Mt,lt=X.edges,it=lt===void 0?[]:lt,U={},P={};tt.forEach(function(rt,ot){var At=q();rt.clusterId=At,U[At]={id:At,nodes:[rt]},P[rt.id]={node:rt,idx:ot}});var H=M(X,ct),k={};H.forEach(function(rt,ot){var At=tt[ot].id;k[At]={},rt.forEach(function(gt,mt){gt&&(k[At][tt[mt].id]=gt)})});for(var h=0;pt>h;){var g=!1;if(tt.forEach(function(rt){var ot={};Object.keys(k[rt.id]).forEach(function(Ct){var Vt=k[rt.id][Ct],Ht=P[Ct].node.clusterId;ot[Ht]||(ot[Ht]=0),ot[Ht]+=Vt});var At=-1/0,gt=[];if(Object.keys(ot).forEach(function(Ct){ot[Ct]>At?(At=ot[Ct],gt=[Ct]):At===ot[Ct]&&gt.push(Ct)}),gt.length!==1||gt[0]!==rt.clusterId){var mt=gt.indexOf(rt.clusterId);if(0>mt||gt.splice(mt,1),gt&&gt.length){g=!0;var bt=U[rt.clusterId],jt=bt.nodes.indexOf(rt);bt.nodes.splice(jt,1);var Dt=Math.floor(Math.random()*gt.length),Ut=U[gt[Dt]];Ut.nodes.push(rt),rt.clusterId=Ut.id}}}),!g)break;h++}Object.keys(U).forEach(function(rt){var ot=U[rt];ot.nodes&&ot.nodes.length||delete U[rt]});var G=[],V={};it.forEach(function(rt){var ot=rt[dt]||1,At=P[rt.source].node.clusterId,gt=P[rt.target].node.clusterId,mt="".concat(At,"---").concat(gt);if(V[mt])V[mt].weight+=ot,V[mt].count++;else{var bt={source:At,target:gt,weight:ot,count:1};V[mt]=bt,G.push(bt)}});var $=[];return Object.keys(U).forEach(function(rt){$.push(U[rt])}),{clusters:$,clusterEdges:G}},f.louvain=function(X){var ct=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-4,Mt=X.nodes,tt=Mt===void 0?[]:Mt,lt=X.edges,it=lt===void 0?[]:lt,U={},P={};tt.forEach(function(gt,mt){var bt=q();gt.clusterId=bt,U[bt]={id:bt,nodes:[gt]},P[gt.id]={node:gt,idx:mt}});var H=M(X,ct),k=[],h={},g=0;H.forEach(function(gt,mt){var bt=0,jt=tt[mt].id;h[jt]={},gt.forEach(function(Dt,Ut){Dt&&(bt+=Dt,h[jt][tt[Ut].id]=Dt,g+=Dt)}),k.push(bt)}),g/=2;for(var G=1/0,V=1/0,$=0;G=wt(tt,H,k,g),Math.abs(G-V)>=pt&&100>=$;)V=G,$++,Object.keys(U).forEach(function(gt){var mt=0;it.forEach(function(bt){var jt=P[bt.source].node.clusterId,Dt=P[bt.target].node.clusterId;(jt===gt&&Dt!==gt||Dt===gt&&jt!==gt)&&(mt+=bt[dt]||1)}),U[gt].sumTot=mt}),tt.forEach(function(gt,mt){var bt,jt=U[gt.clusterId],Dt=0,Ut=k[mt]/(2*g),Ct=0;jt.nodes.forEach(function(we){Ct+=H[mt][P[we.id].idx]||0});var Vt=Ct-jt.sumTot*Ut;if(Object.keys(h[gt.id]).forEach(function(we){var Ne=P[we].node.clusterId;if(Ne!==gt.clusterId){var Ke=U[Ne],pn=Ke.nodes;if(pn&&pn.length){var hn=0;pn.forEach(function(Tn){hn+=H[mt][P[Tn.id].idx]||0});var kn=hn-Ke.sumTot*Ut-Vt;kn>Dt&&(Dt=kn,bt=Ke)}}}),Dt>0){bt.nodes.push(gt);var Ht=gt.clusterId;gt.clusterId=bt.id;var re=jt.nodes.indexOf(gt);jt.nodes.splice(re,1);var pe=0,ye=0;it.forEach(function(we){var Ne=P[we.source].node.clusterId,Ke=P[we.target].node.clusterId;(Ne===bt.id&&Ke!==bt.id||Ke===bt.id&&Ne!==bt.id)&&(pe+=we[dt]||1),(Ne===Ht&&Ke!==Ht||Ke===Ht&&Ne!==Ht)&&(ye+=we[dt]||1)}),bt.sumTot=pe,jt.sumTot=ye}});Object.keys(U).forEach(function(gt){var mt=U[gt];mt.nodes&&mt.nodes.length||delete U[gt]});var rt=[],ot={};it.forEach(function(gt){var mt=gt[dt]||1,bt=P[gt.source].node.clusterId,jt=P[gt.target].node.clusterId,Dt="".concat(bt,"---").concat(jt);if(ot[Dt])ot[Dt].weight+=mt,ot[Dt].count++;else{var Ut={source:bt,target:jt,weight:mt,count:1};ot[Dt]=Ut,rt.push(Ut)}});var At=[];return Object.keys(U).forEach(function(gt){At.push(U[gt])}),{clusters:At,clusterEdges:rt}},f.minimumSpanningTree=function(X,ct,dt){return dt?{prim:kt,kruskal:Ot}[dt](X,ct):Ot(X,ct)},f.pageRank=function(X,ct,dt){typeof ct!="number"&&(ct=1e-6),typeof dt!="number"&&(dt=.85);for(var pt,Mt=1,tt=0,lt=1e3,it=X.nodes,U=it===void 0?[]:it,P=X.edges,H=P===void 0?[]:P,k=U.length,h={},g={},G=0;k>G;++G){var V=U[G].id;h[V]=1/k,g[V]=1/k}for(var $=nt(X);lt>0&&Mt>ct;){tt=0;for(var rt=0;k>rt;++rt){var ot=U[rt],At=ot.id;if(pt=0,$[ot.id].inDegree===0)h[At]=0;else{for(var gt=N(At,H,"source"),mt=0;gt.length>mt;++mt){var bt=gt[mt],jt=$[bt].outDegree;jt>0&&(pt+=g[bt]/jt)}h[At]=dt*pt,tt+=h[At]}}tt=(1-tt)/k,Mt=0;for(var Dt=0;k>Dt;++Dt){var Ut=U[Dt].id;Mt+=Math.abs((pt=h[Ut]+tt)-g[Ut]),g[Ut]=pt}lt-=1}return g},Object.defineProperty(f,"__esModule",{value:!0})})},function(a,A,e){"use strict";e.d(A,"c",function(){return s}),e.d(A,"b",function(){return d}),e.d(A,"a",function(){return E});var i=e(1),v=e(56);function b(O){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(O)}var S=Math.sin,f=Math.cos,M=Math.atan2,I=Math.PI;function y(O,C,p,x,T,N,Y){var q=C.stroke,nt=C.lineWidth,vt=M(x-N,p-T),ht=new v.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*f(I/6)+","+10*S(I/6)+" L0,0 L"+10*f(I/6)+",-"+10*S(I/6),stroke:q,lineWidth:nt}});ht.translate(T,N),ht.rotateAtPoint(T,N,vt),O.set(Y?"startArrowShape":"endArrowShape",ht)}function n(O,C,p,x,T,N,Y){var q=C.startArrow,nt=C.endArrow,vt=C.stroke,ht=C.lineWidth,St=Y?q:nt,wt=St.d,xt=St.fill,ft=St.stroke,Ft=St.lineWidth,kt=Object(i.c)(St,["d","fill","stroke","lineWidth"]),Ot=M(x-N,p-T);wt&&(T-=f(Ot)*wt,N-=S(Ot)*wt);var X=new v.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:Object(i.a)(Object(i.a)({},kt),{stroke:ft||vt,lineWidth:Ft||ht,fill:xt})});X.translate(T,N),X.rotateAtPoint(T,N,Ot),O.set(Y?"startArrowShape":"endArrowShape",X)}function s(O,C,p,x,T){var N=M(x-C,p-O);return{dx:f(N)*T,dy:S(N)*T}}function d(O,C,p,x,T,N){b(C.startArrow)==="object"?n(O,C,p,x,T,N,!0):C.startArrow?y(O,C,p,x,T,N,!0):O.set("startArrowShape",null)}function E(O,C,p,x,T,N){b(C.endArrow)==="object"?n(O,C,p,x,T,N,!1):C.endArrow?y(O,C,p,x,T,N,!1):O.set("startArrowShape",null)}},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"leftTranslate",function(){return nt}),e.d(i,"leftRotate",function(){return vt}),e.d(i,"leftScale",function(){return ht}),e.d(i,"transform",function(){return St}),e.d(i,"direction",function(){return wt}),e.d(i,"angleTo",function(){return xt}),e.d(i,"vertical",function(){return ft});var v={};e.r(v),e.d(v,"default",function(){return or}),e.d(v,"assign",function(){return Ut}),e.d(v,"format",function(){return Kn}),e.d(v,"parse",function(){return tr}),e.d(v,"defaultI18n",function(){return re}),e.d(v,"setGlobalDateI18n",function(){return ye}),e.d(v,"setGlobalDateMasks",function(){return _n});var b={};e.r(b),e.d(b,"compare",function(){return ue}),e.d(b,"getLineIntersect",function(){return Dn}),e.d(b,"getRectIntersectByPoint",function(){return zn}),e.d(b,"getCircleIntersectByPoint",function(){return Gn}),e.d(b,"getEllipseIntersectByPoint",function(){return Ze}),e.d(b,"applyMatrix",function(){return Ce}),e.d(b,"invertMatrix",function(){return R}),e.d(b,"getCircleCenterByPoints",function(){return yt}),e.d(b,"distance",function(){return $t}),e.d(b,"scaleMatrix",function(){return me}),e.d(b,"floydWarshall",function(){return Zt}),e.d(b,"getAdjMatrix",function(){return de}),e.d(b,"translate",function(){return he}),e.d(b,"move",function(){return ce}),e.d(b,"scale",function(){return Me}),e.d(b,"rotate",function(){return ze}),e.d(b,"getDegree",function(){return Ve}),e.d(b,"isPointInPolygon",function(){return tn}),e.d(b,"intersectBBox",function(){return De}),e.d(b,"isPolygonsIntersect",function(){return cn}),e.d(b,"Line",function(){return fn}),e.d(b,"getBBoxBoundLine",function(){return nn}),e.d(b,"itemIntersectByLine",function(){return Sn}),e.d(b,"fractionToLine",function(){return Pe}),e.d(b,"getPointsCenter",function(){return le}),e.d(b,"squareDist",function(){return Le}),e.d(b,"pointLineSquareDist",function(){return Be}),e.d(b,"isPointsOverlap",function(){return en}),e.d(b,"pointRectSquareDist",function(){return sn});var S={};e.r(S),e.d(S,"uniqueId",function(){return Gr}),e.d(S,"formatPadding",function(){return Mr}),e.d(S,"cloneEvent",function(){return oi}),e.d(S,"isViewportChanged",function(){return ai}),e.d(S,"isNaN",function(){return Zr}),e.d(S,"calculationItemsBBox",function(){return Xi}),e.d(S,"processParallelEdges",function(){return $i});var f={};e.r(f),e.d(f,"getBBox",function(){return zo}),e.d(f,"getLoopCfgs",function(){return Yo}),e.d(f,"getLabelPosition",function(){return Xo}),e.d(f,"traverseTree",function(){return di}),e.d(f,"traverseTreeUp",function(){return ea}),e.d(f,"getLetterWidth",function(){return xi}),e.d(f,"getTextSize",function(){return ks}),e.d(f,"plainCombosToTrees",function(){return Ri}),e.d(f,"reconstructTree",function(){return Rs}),e.d(f,"getComboBBox",function(){return Mi}),e.d(f,"shouldRefreshEdge",function(){return hu}),e.d(f,"cloneBesidesImg",function(){return ui});var M={};e.r(M),e.d(M,"getSpline",function(){return Ns}),e.d(M,"getControlPoint",function(){return ts}),e.d(M,"pointsToPolygon",function(){return Ls}),e.d(M,"pathToPoints",function(){return Ho}),e.d(M,"getClosedSpline",function(){return es}),e.d(M,"roundedHull",function(){return ps}),e.d(M,"paddedHull",function(){return yu});var I,y=e(14),n=e(0),s=function(){function Rt(l){this._cfgs=Object(n.e)(this.getDefaultCfgs(),l),this._events={},this.destroyed=!1}return Rt.prototype.getDefaultCfgs=function(){return{}},Rt.prototype.initPlugin=function(l){var u=this;u.set("graph",l);var j=u.getEvents(),W={};Object(n.f)(j,function(st,Tt){var Gt=Object(n.J)(u,st);W[Tt]=Gt,l.on(Tt,Gt)}),this._events=W,this.init()},Rt.prototype.getEvents=function(){return{}},Rt.prototype.get=function(l){return this._cfgs[l]},Rt.prototype.set=function(l,u){this._cfgs[l]=u},Rt.prototype.destroy=function(){},Rt.prototype.destroyPlugin=function(){this.destroy();var l=this.get("graph"),u=this._events;Object(n.f)(u,function(j,W){l.off(W,j)}),this._events=null,this._cfgs=null,this.destroyed=!0},Rt}(),d=(I=function(l,u){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,W){j.__proto__=W}||function(j,W){for(var st in W)Object.prototype.hasOwnProperty.call(W,st)&&(j[st]=W[st])})(l,u)},function(Rt,l){function u(){this.constructor=Rt}I(Rt,l),Rt.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}),E="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",O=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return d(l,Rt),l.prototype.getDefaultCfgs=function(){return{img:E}},l.prototype.init=function(){var u=this.get("graph"),j=u.get("minZoom"),W=u.get("container"),st=u.get("canvas").get("el"),Tt=u.get("width"),Gt=u.get("height"),Xt=this.get("img")||E,ee=Object(y.b)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),ae=Object(y.b)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+Xt+`;
        user-select: none
        '></div>`);ee.appendChild(ae),Object(y.c)(ee,{width:Tt+"px",height:Gt+"px",left:W.offsetLeft+"px",top:W.offsetTop+"px"}),Object(y.c)(ae,{width:Tt/j+"px",height:Gt/j+"px",left:"0px",top:"0px"}),W.insertBefore(ee,st),this.set("container",ee),this.set("gridContainer",ae)},l.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},l.prototype.updateGrid=function(u){var j=this.get("gridContainer"),W=u.matrix;W||(W=[1,0,0,0,1,0,0,0,1]);var st="matrix("+W[0]+", "+W[1]+", "+W[3]+", "+W[4]+", 0, 0)";Object(y.c)(j,{transform:st})},l.prototype.getContainer=function(){return this.get("container")},l.prototype.destroy=function(){var u=this.get("graph").get("container"),j=this.get("container");u.removeChild(j)},l}(s),C=e(81),p=e.n(C),x=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}();p()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var T=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return x(l,Rt),l.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(j){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(j){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},l.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},l.prototype.init=function(){var u=this.get("className"),j=Object(y.b)("<div class="+(u||"g6-component-contextmenu")+"></div>");Object(y.c)(j,{top:"0px",position:"absolute",visibility:"hidden"});var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.appendChild(j),this.set("menu",j)},l.prototype.onMenuShow=function(u){var j=this;u.preventDefault(),u.stopPropagation();var W=this.get("itemTypes");if(u.item){if(u.item&&u.item.getType&&W.indexOf(u.item.getType())===-1)return void j.onMenuHide()}else if(W.indexOf("canvas")===-1)return;if(this.get("shouldBegin")(u)){var st=this.get("menu"),Tt=this.get("getContent"),Gt=this.get("graph"),Xt=Tt(u,Gt);Object(n.x)(Xt)?st.innerHTML=Xt:st.innerHTML=Xt.outerHTML,this.removeMenuEventListener();var ee=this.get("handleMenuClick");if(ee){var ae=function(Or){ee(Or.target,u.item,Gt)};this.set("handleMenuClickWrapper",ae),st.addEventListener("click",ae)}var je=Gt.get("width"),Fe=Gt.get("height"),_e=st.getBoundingClientRect(),He=this.get("offsetX")||0,bn=this.get("offsetY")||0,wn=Gt.getContainer().offsetTop,Nn=Gt.getContainer().offsetLeft,Bn=u.canvasX+Nn+He,Fn=u.canvasY+wn+bn;Bn+_e.width>je&&(Bn=u.canvasX-_e.width-He+Nn),Fn+_e.height>Fe&&(Fn=u.canvasY-_e.height-bn+wn),Object(y.c)(st,{top:Fn+"px",left:Bn+"px",visibility:"visible"});var sr=function(Or){j.onMenuHide()};document.body.addEventListener("click",sr),this.set("handler",sr)}},l.prototype.removeMenuEventListener=function(){var u=this.get("handleMenuClickWrapper"),j=this.get("handler");u&&(this.get("menu").removeEventListener("click",u),this.set("handleMenuClickWrapper",null)),j&&document.body.removeEventListener("click",j)},l.prototype.onMenuHide=function(){var u=this.get("menu");u&&Object(y.c)(u,{visibility:"hidden"}),this.removeMenuEventListener()},l.prototype.destroy=function(){var u=this.get("menu");if(this.removeMenuEventListener(),u){var j=this.get("container");j||(j=this.get("graph").get("container")),Object(n.x)(j)&&(j=document.getElementById(j)),j.removeChild(u)}},l}(s),N=e(52),Y=e(62),q=e(2);function nt(Rt,l,u){var j=[0,0,0,0,0,0,0,0,0];return q.a.fromTranslation(j,u),q.a.multiply(Rt,j,l)}function vt(Rt,l,u){var j=[0,0,0,0,0,0,0,0,0];return q.a.fromRotation(j,u),q.a.multiply(Rt,j,l)}function ht(Rt,l,u){var j=[0,0,0,0,0,0,0,0,0];return q.a.fromScaling(j,u),q.a.multiply(Rt,j,l)}function St(Rt,l){for(var u,j,W,st=Rt?[].concat(Rt):[1,0,0,0,1,0,0,0,1],Tt=0,Gt=l.length;Tt<Gt;Tt++){var Xt=l[Tt];switch(Xt[0]){case"t":nt(st,st,[Xt[1],Xt[2]]);break;case"s":ht(st,st,[Xt[1],Xt[2]]);break;case"r":vt(st,st,Xt[1]);break;case"m":u=st,j=st,W=Xt[1],q.a.multiply(u,W,j)}}return st}function wt(Rt,l){return Rt[0]*l[1]-l[0]*Rt[1]}function xt(Rt,l,u){var j=q.d.angle(Rt,l),W=wt(Rt,l)>=0;return u?W?2*Math.PI-j:j:W?j:2*Math.PI-j}function ft(Rt,l,u){return u?(Rt[0]=l[1],Rt[1]=-1*l[0]):(Rt[0]=-1*l[1],Rt[1]=l[0]),Rt}var Ft=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}(),kt=function(){return(kt=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Ot=Math.max,X=i.transform,ct=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.handleUpdateCanvas=Object(n.d)(function(j){var W=u;W.destroyed||W.updateCanvas()},100,!1),u}return Ft(l,Rt),l.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},l.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},l.prototype.disableRefresh=function(){this.set("refresh",!1)},l.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},l.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},l.prototype.initViewport=function(){var u=this,j=this._cfgs,W=j.size,st=j.graph;if(!this.destroyed){var Tt=this.get("canvas").get("container"),Gt=Object(y.b)(`
      <div
        class=`+j.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),Xt=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ee=0,ae=0,je=!1,Fe=0,_e=0,He=0,bn=0,wn=0,Nn=0;Gt.addEventListener("dragstart",function(Bn){var Fn,sr;if(Bn.dataTransfer){var ur=new Image;ur.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(sr=(Fn=Bn.dataTransfer).setDragImage)===null||sr===void 0||sr.call(Fn,ur,0,0);try{Bn.dataTransfer.setData("text/html","view-port-minimap")}catch(ei){Bn.dataTransfer.setData("text","view-port-minimap")}}if(j.refresh=!1,Bn.target===Gt){var Or=Gt.style;Fe=parseInt(Or.left,10),_e=parseInt(Or.top,10),He=parseInt(Or.width,10),bn=parseInt(Or.height,10),He>W[0]||bn>W[1]||(Nn=st.getZoom(),wn=u.get("ratio"),je=!0,ee=Bn.clientX,ae=Bn.clientY)}},!1),Gt.addEventListener(Xt?"dragover":"drag",function(Bn){if(je&&!Object(n.s)(Bn.clientX)&&!Object(n.s)(Bn.clientY)){var Fn=ee-Bn.clientX,sr=ae-Bn.clientY;(Fe-Fn<0||Fe-Fn+He>=W[0])&&(Fn=0),(_e-sr<0||_e-sr+bn>=W[1])&&(sr=0),Fe-=Fn,_e-=sr,Object(y.c)(Gt,{left:Fe+"px",top:_e+"px"}),st.translate(Fn*Nn/wn,sr*Nn/wn),ee=Bn.clientX,ae=Bn.clientY}},!1),Gt.addEventListener("dragend",function(){je=!1,j.refresh=!0},!1),this.set("viewport",Gt),Tt.appendChild(Gt)}},l.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),j=(this.get("dx"),this.get("dy"),this.get("totaldx")),W=this.get("totaldy"),st=this.get("graph"),Tt=this.get("size"),Gt=st.get("width"),Xt=st.get("height"),ee=st.getPointByCanvas(0,0),ae=st.getPointByCanvas(Gt,Xt),je=this.get("viewport");je||this.initViewport(),st.getZoom();var Fe=(ae.x-ee.x)*u,_e=(ae.y-ee.y)*u,He=ee.x*u+j,bn=ee.y*u+W,wn=He+Fe,Nn=bn+_e;He<0&&(Fe+=He,He=0),wn>Tt[0]&&(Fe-=wn-Tt[0]),bn<0&&(_e+=bn,bn=0),Nn>Tt[1]&&(_e-=Nn-Tt[1]),this.set("ratio",u);var Bn=He+"px",Fn=bn+"px";Object(y.c)(je,{left:Bn,top:Fn,width:Fe+"px",height:_e+"px"})}},l.prototype.updateGraphShapes=function(){var u=this._cfgs.graph,j=this.get("canvas"),W=u.get("group");if(!W.destroyed){var st=W.clone();st.resetMatrix(),j.clear(),j.add(st),u.get("renderer")==="svg"&&this.updateVisible(st)}},l.prototype.updateVisible=function(u){var j=this;if(u.isGroup()||u.get("visible")){var W=u.get("children");if(!W||!W.length)return;W.forEach(function(st){st.get("visible")||st.hide(),j.updateVisible(st)})}else u.hide()},l.prototype.updateKeyShapes=function(){var u=this,j=this._cfgs.graph;Object(n.f)(j.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(j.getNodes(),function(W){u.updateOneNodeKeyShape(W)}),this.clearDestroyedShapes()},l.prototype.updateOneNodeKeyShape=function(u){var j=this.get("canvas"),W=j.get("children")[0]||j.addGroup(),st=this.get("itemMap")||{},Tt=st[u.get("id")],Gt=u.getBBox(),Xt=u.get("keyShape").clone(),ee=Xt.attr(),ae={x:Gt.centerX,y:Gt.centerY};Tt?ae=Object.assign(ee,ae):(Tt=Xt,W.add(Tt));var je=Tt.get("type");je!=="rect"&&je!=="image"||(ae.x=Gt.minX,ae.y=Gt.minY),Tt.attr(ae),u.isVisible()||Tt.hide(),Tt.exist=!0,st[u.get("id")]=Tt,this.set("itemMap",st)},l.prototype.updateDelegateShapes=function(){var u=this,j=this._cfgs.graph;Object(n.f)(j.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(j.getNodes(),function(W){u.updateOneNodeDelegateShape(W)}),this.clearDestroyedShapes()},l.prototype.clearDestroyedShapes=function(){var u=this.get("itemMap")||{},j=Object.keys(u);if(j&&j.length!==0)for(var W=j.length-1;W>=0;W--){var st=u[j[W]],Tt=st.exist;st.exist=!1,Tt||(st.remove(),delete u[j[W]])}},l.prototype.updateOneEdgeKeyShape=function(u){var j=this.get("canvas"),W=j.get("children")[0]||j.addGroup(),st=this.get("itemMap")||{},Tt=st[u.get("id")];if(Tt){var Gt=u.get("keyShape").attr("path");Tt.attr("path",Gt)}else Tt=u.get("keyShape").clone(),W.add(Tt),Tt.toBack();u.isVisible()||Tt.hide(),Tt.exist=!0,st[u.get("id")]=Tt,this.set("itemMap",st)},l.prototype.updateOneNodeDelegateShape=function(u){var j=this.get("canvas"),W=j.get("children")[0]||j.addGroup(),st=this.get("delegateStyle"),Tt=this.get("itemMap")||{},Gt=Tt[u.get("id")],Xt=u.getBBox();if(Gt){var ee={x:Xt.minX,y:Xt.minY,width:Xt.width,height:Xt.height};Gt.attr(ee)}else Gt=W.addShape("rect",{attrs:kt({x:Xt.minX,y:Xt.minY,width:Xt.width,height:Xt.height},st),name:"minimap-node-shape"});u.isVisible()||Gt.hide(),Gt.exist=!0,Tt[u.get("id")]=Gt,this.set("itemMap",Tt)},l.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},l.prototype.initContainer=function(){var u=this.get("graph"),j=this.get("size"),W=this.get("className"),st=this.get("container"),Tt=Object(y.b)("<div class='"+W+"' style='width: "+j[0]+"px; height: "+j[1]+"px; overflow: hidden'></div>");Object(n.x)(st)&&(st=document.getElementById(st)),st?st.appendChild(Tt):u.get("container").appendChild(Tt),this.set("container",Tt);var Gt,Xt=Object(y.b)('<div class="g6-minimap-container" style="position: relative;"></div>');Tt.appendChild(Xt),Gt=u.get("renderer")==="svg"?new Y.Canvas({container:Xt,width:j[0],height:j[1]}):new N.Canvas({container:Xt,width:j[0],height:j[1]}),this.set("canvas",Gt),this.updateCanvas()},l.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var j=this.get("size"),W=this.get("canvas"),st=this.get("type"),Tt=this.get("padding");if(!W.destroyed){switch(st){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var Gt=W.get("children")[0];if(Gt){Gt.resetMatrix();var Xt=Gt.getCanvasBBox(),ee=u.get("canvas").getCanvasBBox(),ae=ee.width,je=ee.height;Number.isFinite(Xt.width)&&(ae=Ot(Xt.width,ae),je=Ot(Xt.height,je)),ae+=2*Tt,je+=2*Tt;var Fe=Math.min(j[0]/ae,j[1]/je),_e=[1,0,0,0,1,0,0,0,1],He=0,bn=0;Number.isFinite(Xt.minX)&&(He=-Xt.minX),Number.isFinite(Xt.minY)&&(bn=-Xt.minY);var wn=(j[0]-(ae-2*Tt)*Fe)/2,Nn=(j[1]-(je-2*Tt)*Fe)/2;_e=X(_e,[["t",He,bn],["s",Fe,Fe],["t",wn,Nn]]),Gt.setMatrix(_e),this.set("ratio",Fe),this.set("totaldx",wn+He*Fe),this.set("totaldy",Nn+bn*Fe),this.set("dx",wn),this.set("dy",Nn),this.updateViewport()}}}}},l.prototype.getCanvas=function(){return this.get("canvas")},l.prototype.getViewport=function(){return this.get("viewport")},l.prototype.getContainer=function(){return this.get("container")},l.prototype.destroy=function(){this.get("canvas").destroy();var u=this.get("container");u.parentNode.removeChild(u)},l}(s),dt=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}();function pt(Rt,l,u){var j=Rt.x-l.x,W=Rt.y-l.y;return!u||Math.abs(j)>u||Math.abs(W)>u?Math.sqrt(j*j+W*W):u}function Mt(Rt,l){var u=(l.source.y-l.target.y)/(l.source.x-l.target.x),j=(u*u*l.source.x+u*(Rt.y-l.source.y)+Rt.x)/(u*u+1);return{x:j,y:u*(j-l.source.x)+l.source.y}}var tt=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return dt(l,Rt),l.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},l.prototype.init=function(){var u=this.get("graph"),j=this.get("onTick");this.set("tick",function(){j&&j(),u.refreshPositions()})},l.prototype.bundling=function(u){var j=this;if(j.set("data",u),!j.isTicking()){var W=u.edges||[],st=u.nodes||[],Tt={},Gt=!1;if(st.forEach(function(Fn){Fn.x!==null&&!Fn.y!==null&&Fn.x!==void 0&&!Fn.y!==void 0||(Gt=!0),Tt[Fn.id]=Fn}),Gt)throw new Error("please layout the graph or assign x and y for nodes first");j.set("nodeIdMap",Tt);var Xt=j.get("divisions"),ee=j.get("divRate"),ae=j.divideEdges(Xt);j.set("edgePoints",ae);var je=j.getEdgeBundles();j.set("edgeBundles",je);for(var Fe=j.get("cycles"),_e=j.get("iterations"),He=j.get("iterRate"),bn=j.get("lambda"),wn=0;wn<Fe;wn++){for(var Nn=function(sr){var ur=[];W.forEach(function(Or,ei){if(Or.source!==Or.target){var Ti=Tt[Or.source],kr=Tt[Or.target];ur[ei]=j.getEdgeForces({source:Ti,target:kr},ei,Xt,bn);for(var yi=0;yi<Xt+1;yi++)ae[ei][yi].x+=ur[ei][yi].x,ae[ei][yi].y+=ur[ei][yi].y}})},Bn=0;Bn<_e;Bn++)Nn();bn/=2,Xt*=ee,_e*=He,ae=j.divideEdges(Xt),j.set("edgePoints",ae)}W.forEach(function(Fn,sr){Fn.source!==Fn.target&&(Fn.type="polyline",Fn.controlPoints=ae[sr].slice(1,ae[sr].length-1))}),j.get("graph").refresh()}},l.prototype.updateBundling=function(u){var j=this,W=u.data;if(W&&j.set("data",W),j.get("ticking")&&j.set("ticking",!1),Object.keys(u).forEach(function(Tt){j.set(Tt,u[Tt])}),u.onTick){var st=this.get("graph");j.set("tick",function(){u.onTick(),st.refresh()})}j.bundling(W)},l.prototype.divideEdges=function(u){var j=this,W=j.get("data").edges,st=j.get("nodeIdMap"),Tt=j.get("edgePoints");return Tt&&Tt!==void 0||(Tt=[]),W.forEach(function(Gt,Xt){Tt[Xt]&&Tt[Xt]!==void 0||(Tt[Xt]=[]);var ee=st[Gt.source],ae=st[Gt.target];if(u===1)Tt[Xt].push({x:ee.x,y:ee.y}),Tt[Xt].push({x:.5*(ee.x+ae.x),y:.5*(ee.y+ae.y)}),Tt[Xt].push({x:ae.x,y:ae.y});else{var je=(Tt[Xt]&&Tt[Xt]!==[]?j.getEdgeLength(Tt[Xt]):pt({x:ee.x,y:ee.y},{x:ae.x,y:ae.y}))/(u+1),Fe=je,_e=[{x:ee.x,y:ee.y}];Tt[Xt].forEach(function(He,bn){if(bn!==0){for(var wn=pt(He,Tt[Xt][bn-1]);wn>Fe;){var Nn=Fe/wn,Bn={x:Tt[Xt][bn-1].x,y:Tt[Xt][bn-1].y};Bn.x+=Nn*(He.x-Tt[Xt][bn-1].x),Bn.y+=Nn*(He.y-Tt[Xt][bn-1].y),_e.push(Bn),wn-=Fe,Fe=je}Fe-=wn}}),_e.push({x:ae.x,y:ae.y}),Tt[Xt]=_e}}),Tt},l.prototype.getEdgeLength=function(u){var j=0;return u.forEach(function(W,st){st!==0&&(j+=pt(W,u[st-1]))}),j},l.prototype.getEdgeBundles=function(){var u=this,j=u.get("data").edges||[],W=u.get("bundleThreshold"),st=u.get("nodeIdMap"),Tt=u.get("edgeBundles");return Tt||(Tt=[]),j.forEach(function(Gt,Xt){Tt[Xt]&&Tt[Xt]!==void 0||(Tt[Xt]=[])}),j.forEach(function(Gt,Xt){var ee=st[Gt.source],ae=st[Gt.target];j.forEach(function(je,Fe){if(!(Fe<=Xt)){var _e=st[je.source],He=st[je.target];u.getBundleScore({source:ee,target:ae},{source:_e,target:He})>=W&&(Tt[Xt].push(Fe),Tt[Fe].push(Xt))}})}),Tt},l.prototype.getBundleScore=function(u,j){return u.vx=u.target.x-u.source.x,u.vy=u.target.y-u.source.y,j.vx=j.target.x-j.source.x,j.vy=j.target.y-j.source.y,u.length=pt({x:u.source.x,y:u.source.y},{x:u.target.x,y:u.target.y}),j.length=pt({x:j.source.x,y:j.source.y},{x:j.target.x,y:j.target.y}),this.getAngleScore(u,j)*this.getScaleScore(u,j)*this.getPositionScore(u,j)*this.getVisibilityScore(u,j)},l.prototype.getAngleScore=function(u,j){return function(W,st){return W.x*st.x+W.y*st.y}({x:u.vx,y:u.vy},{x:j.vx,y:j.vy})/(u.length*j.length)},l.prototype.getScaleScore=function(u,j){var W=(u.length+j.length)/2;return 2/(W/Math.min(u.length,j.length)+Math.max(u.length,j.length)/W)},l.prototype.getPositionScore=function(u,j){var W=(u.length+j.length)/2;return W/(W+pt({x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2},{x:(j.source.x+j.target.x)/2,y:(j.source.y+j.target.y)/2}))},l.prototype.getVisibilityScore=function(u,j){var W=this.getEdgeVisibility(u,j),st=this.getEdgeVisibility(j,u);return W<st?W:st},l.prototype.getEdgeVisibility=function(u,j){var W=Mt(j.source,u),st=Mt(j.target,u),Tt={x:(W.x+st.x)/2,y:(W.y+st.y)/2},Gt={x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2};return Math.max(0,1-2*pt(Tt,Gt)/pt(W,st))},l.prototype.getEdgeForces=function(u,j,W,st){for(var Tt=this.get("edgePoints"),Gt=this.get("K")/(pt(u.source,u.target)*(W+1)),Xt=[{x:0,y:0}],ee=1;ee<W;ee++){var ae={x:0,y:0},je=this.getSpringForce({pre:Tt[j][ee-1],cur:Tt[j][ee],next:Tt[j][ee+1]},Gt),Fe=this.getElectrostaticForce(ee,j);ae.x=st*(je.x+Fe.x),ae.y=st*(je.y+Fe.y),Xt.push(ae)}return Xt.push({x:0,y:0}),Xt},l.prototype.getSpringForce=function(u,j){var W=u.pre.x+u.next.x-2*u.cur.x,st=u.pre.y+u.next.y-2*u.cur.y;return{x:W*=j,y:st*=j}},l.prototype.getElectrostaticForce=function(u,j){var W=this.get("eps"),st=this.get("edgeBundles"),Tt=this.get("edgePoints"),Gt=st[j],Xt={x:0,y:0};return Gt.forEach(function(ee){var ae={x:Tt[ee][u].x-Tt[j][u].x,y:Tt[ee][u].y-Tt[j][u].y};if(Math.abs(ae.x)>W||Math.abs(ae.y)>W){var je=1/pt(Tt[ee][u],Tt[j][u]);Xt.x+=ae.x*je,Xt.y+=ae.y*je}}),Xt},l.prototype.isTicking=function(){return this.get("ticking")},l.prototype.getSimulation=function(){return this.get("forceSimulation")},l.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),Rt.prototype.destroy.call(this)},l}(s),lt=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}(),it=function(){return(it=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},U={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},P=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return lt(l,Rt),l.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(n.c)(U),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},l.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"magnify"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"magnify"}}return u},l.prototype.init=function(){var u=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",u*u);var j=this.get("d");this.set("molecularParam",(j+1)*u)},l.prototype.createDelegate=function(u){var j=this,W=this,st=W.get("delegate");st&&!st.destroyed||(W.magnify(u),(st=W.get("delegate")).on("dragstart",function(Tt){W.set("delegateCenterDiff",{x:st.attr("x")-Tt.x,y:st.attr("y")-Tt.y})}),st.on("drag",function(Tt){W.magnify(Tt)}),this.get("scaleDBy")==="wheel"&&st.on("mousewheel",function(Tt){j.scaleDByWheel(Tt)}),this.get("scaleRBy")==="wheel"&&st.on("mousewheel",function(Tt){W.scaleRByWheel(Tt)}))},l.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var j,W=this.get("graph"),st=this.get("delegate"),Tt=(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY);j=u.originalEvent.wheelDelta<0?.95:1/.95;var Gt=this.get("maxR"),Xt=this.get("minR"),ee=this.get("r");(ee>(Gt||W.get("height"))&&j>1||ee<(Xt||.05*W.get("height"))&&j<1)&&(j=1),ee*=j,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.set("delegateCenterDiff",void 0),this.magnify(u,Tt)}},l.prototype.scaleRByDrag=function(u){if(u){var j,W=this.get("dragPrePos"),st=this.get("graph"),Tt=st.getPointByClient(u.clientX,u.clientY);j=u.x-W.x<0?.95:1/.95;var Gt=this.get("maxR"),Xt=this.get("minR"),ee=this.get("r");(ee>(Gt||st.get("height"))&&j>1||ee<(Xt||.05*st.get("height"))&&j<1)&&(j=1),ee*=j,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.magnify(u,Tt),this.set("dragPrePos",{x:u.x,y:u.y})}},l.prototype.scaleDByWheel=function(u){if(u||u.originalEvent){u.preventDefault&&u.preventDefault();var j=0;j=u.originalEvent.wheelDelta<0?-.1:.1;var W=this.get("d")+j,st=this.get("maxD"),Tt=this.get("minD");if(W<st&&W>Tt){this.set("d",W);var Gt=this.get("r");this.set("molecularParam",(W+1)*Gt);var Xt=this.get("delegate"),ee=Xt?{x:Xt.attr("x"),y:Xt.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(u,ee)}}},l.prototype.scaleDByDrag=function(u){var j=this.get("dragPrePos"),W=u.x-j.x>0?.1:-.1,st=this.get("d")+W,Tt=this.get("maxD"),Gt=this.get("minD");if(st<Tt&&st>Gt){this.set("d",st);var Xt=this.get("r");this.set("molecularParam",(st+1)*Xt),this.magnify(u)}this.set("dragPrePos",{x:u.x,y:u.y})},l.prototype.magnify=function(u,j){this.restoreCache();var W=this.get("graph"),st=this.get("cachedMagnifiedModels"),Tt=this.get("cachedOriginPositions"),Gt=this.get("showLabel"),Xt=this.get("r"),ee=this.get("r2"),ae=this.get("d"),je=this.get("molecularParam"),Fe=W.getNodes(),_e=Fe.length,He=j?{x:j.x,y:j.y}:{x:u.x,y:u.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(He=this.get("cacheCenter"));var bn=this.get("delegateCenterDiff");bn&&(He.x+=bn.x,He.y+=bn.y),this.updateDelegate(He,Xt);for(var wn=0;wn<_e;wn++){var Nn=Fe[wn].getModel(),Bn=Nn.x,Fn=Nn.y;if(!isNaN(Bn)&&!isNaN(Fn)){var sr=(Bn-He.x)*(Bn-He.x)+(Fn-He.y)*(Fn-He.y);if(!isNaN(sr)&&sr<ee&&sr!==0){var ur=Math.sqrt(sr),Or=je*ur/(ae*ur+Xt),ei=(Bn-He.x)/ur,Ti=(Fn-He.y)/ur;if(Nn.x=ei*Or+He.x,Nn.y=Ti*Or+He.y,Tt[Nn.id]||(Tt[Nn.id]={x:Bn,y:Fn,texts:[]}),st.push(Nn),Gt&&2*ur<Xt)for(var kr=Fe[wn].getContainer().getChildren(),yi=kr.length,oo=0;oo<yi;oo++){var so=kr[oo];so.get("type")==="text"&&(Tt[Nn.id].texts.push({visible:so.get("visible"),shape:so}),so.set("visible",!0))}}}}W.refreshPositions()},l.prototype.restoreCache=function(){for(var u=this.get("cachedMagnifiedModels"),j=this.get("cachedOriginPositions"),W=u.length,st=0;st<W;st++){var Tt=u[st],Gt=j[Tt.id];Tt.x=Gt.x,Tt.y=Gt.y;for(var Xt=Gt.texts.length,ee=0;ee<Xt;ee++){var ae=Gt.texts[ee];ae.shape.set("visible",ae.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},l.prototype.updateParams=function(u){var j=u.r,W=u.d,st=u.trigger,Tt=u.minD,Gt=u.maxD,Xt=u.minR,ee=u.maxR,ae=u.scaleDBy,je=u.scaleRBy;isNaN(u.r)||(this.set("r",j),this.set("r2",j*j)),isNaN(W)||this.set("d",W),isNaN(Gt)||this.set("maxD",Gt),isNaN(Tt)||this.set("minD",Tt),isNaN(ee)||this.set("maxR",ee),isNaN(Xt)||this.set("minR",Xt);var Fe,_e=this.get("d"),He=this.get("r");this.set("molecularParam",(_e+1)*He),st!=="mousemove"&&st!=="click"&&st!=="drag"||this.set("trigger",st),(ae==="drag"||ae==="wheel"||ae==="unset")&&(this.set("scaleDBy",ae),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy())),je!=="drag"&&je!=="wheel"&&je!=="unset"||(this.set("scaleRBy",je),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy()))},l.prototype.updateDelegate=function(u,j){var W=this,st=this,Tt=st.get("graph"),Gt=st.get("delegate");if(!Gt||Gt.destroyed){var Xt=Tt.get("group"),ee=st.get("delegateStyle")||U;Gt=Xt.addShape("circle",{attrs:it({r:j/1.5,x:u.x,y:u.y},ee),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?Gt.on("mousewheel",function(_e){st.scaleRByWheel(_e)}):this.get("scaleRBy")==="drag"&&(Gt.on("dragstart",function(_e){st.set("dragging",!0),st.set("cacheCenter",{x:_e.x,y:_e.y}),st.set("dragPrePos",{x:_e.x,y:_e.y})}),Gt.on("drag",function(_e){st.scaleRByDrag(_e)}),Gt.on("dragend",function(_e){st.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?Gt.on("mousewheel",function(_e){W.scaleDByWheel(_e)}):this.get("scaleDBy")==="drag"&&(Gt.on("dragstart",function(_e){st.set("dragging",!0),st.set("cacheCenter",{x:_e.x,y:_e.y}),st.set("dragPrePos",{x:_e.x,y:_e.y})}),Gt.on("drag",function(_e){W.scaleDByDrag(_e)}),Gt.on("dragend",function(_e){st.set("dragging",!1)})))}else Gt.attr({x:u.x,y:u.y,r:j/1.5});if(st.get("showDPercent")){var ae=Math.round((st.get("d")-st.get("minD"))/(st.get("maxD")-st.get("minD"))*100),je=st.get("dPercentText"),Fe=u.y+j/1.5+16;!je||je.destroyed?(je=Tt.get("group").addShape("text",{attrs:{text:ae+"%",x:u.x,y:Fe,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),st.set("dPercentText",je)):je.attr({text:ae+"%",x:u.x,y:Fe})}st.set("delegate",Gt)},l.prototype.clear=function(){var u=this.get("graph");this.restoreCache(),u.refreshPositions();var j=this.get("delegate");j&&!j.destroyed&&(j.remove(),j.destroy());var W=this.get("dPercentText");W&&!W.destroyed&&(W.remove(),W.destroy())},l.prototype.destroy=function(){this.clear()},l}(s),H=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}();p()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var k=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return H(l,Rt),l.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(j){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},l.prototype.init=function(){var u=this,j=this.get("graph"),W=this.get("getContent")(j),st=W;Object(n.x)(W)&&(st=Object(y.b)(W));var Tt=this.get("className");st.setAttribute("class",Tt||"g6-component-toolbar");var Gt=this.get("container");Gt||(Gt=this.get("graph").get("container")),Object(n.x)(Gt)&&(Gt=document.getElementById(Gt)),Gt.appendChild(st),this.set("toolBar",st);var Xt=this.get("handleClick");st.addEventListener("click",function(ae){var je=function(_e){if(!_e)return[];if(_e.composedPath)return _e.composedPath();for(var He=[],bn=_e.target;bn;){if(He.push(bn),bn.tagName==="HTML")return He.push(document,window),He;bn=bn.parentElement}return He}(ae).filter(function(_e){return _e.nodeName==="LI"});if(je.length!==0){var Fe=je[0].getAttribute("code");Fe&&(Xt?Xt(Fe,j):u.handleDefaultOperator(Fe,j))}});var ee=this.get("position");ee&&Object(y.c)(st,{top:ee.y+"px",left:ee.x+"px"}),this.bindUndoRedo()},l.prototype.bindUndoRedo=function(){var u=this.get("graph"),j=document.querySelector('.g6-component-toolbar li[code="undo"]'),W=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),st=document.querySelector('.g6-component-toolbar li[code="redo"]'),Tt=document.querySelector('.g6-component-toolbar li[code="redo"] svg');j&&W&&st&&Tt&&u.on("stackchange",function(Gt){var Xt=Gt.undoStack,ee=Gt.redoStack,ae=Xt.length,je=ee.length;ae===1?(j.setAttribute("style","cursor: not-allowed"),W.setAttribute("style","opacity: 0.4")):(j.removeAttribute("style"),W.removeAttribute("style")),je===0?(st.setAttribute("style","cursor: not-allowed"),Tt.setAttribute("style","opacity: 0.4")):(st.removeAttribute("style"),Tt.removeAttribute("style"))})},l.prototype.undo=function(){var u=this.get("graph"),j=u.getUndoStack();if(j&&j.length!==0){var W=j.pop();if(W){var st=W.action;u.pushStack(st,Object(n.c)(W.data),"redo");var Tt=W.data.before;if(st==="add"&&(Tt=W.data.after),!Tt)return;switch(st){case"visible":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Tt,!1);break;case"delete":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"add":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){u.removeItem(ee.id,!1)})});break;case"updateComboTree":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},l.prototype.redo=function(){var u=this.get("graph"),j=u.getRedoStack();if(j&&j.length!==0){var W=j.pop();if(W){var st=W.action,Tt=W.data.after;if(u.pushStack(st,Object(n.c)(W.data)),st==="delete"&&(Tt=W.data.before),!Tt)return;switch(st){case"visible":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Tt,!1);break;case"delete":Tt.edges&&Tt.edges.forEach(function(Gt){u.removeItem(Gt.id,!1)}),Tt.nodes&&Tt.nodes.forEach(function(Gt){u.removeItem(Gt.id,!1)}),Tt.combos&&Tt.combos.forEach(function(Gt){u.removeItem(Gt.id,!1)});break;case"add":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"updateComboTree":Object.keys(Tt).forEach(function(Gt){var Xt=Tt[Gt];Xt&&Xt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},l.prototype.handleDefaultOperator=function(u,j){var W=j.getZoom();switch(u){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var st=1/(1-.05*this.get("zoomSensitivity"));if(st*W>(this.get("maxZoom")||j.get("maxZoom")))return;j.zoomTo(W*st);break;case"zoomIn":var Tt=1-.05*this.get("zoomSensitivity");if(Tt*W<(this.get("minZoom")||j.get("minZoom")))return;j.zoomTo(W*Tt);break;case"realZoom":j.zoomTo(1);break;case"autoZoom":j.fitView([20,20])}},l.prototype.destroy=function(){var u=this.get("toolBar");if(u){var j=this.get("container");j||(j=this.get("graph").get("container")),Object(n.x)(j)&&(j=document.getElementById(j)),j.removeChild(u)}var W=this.get("handleClick");W&&u.removeEventListener("click",W)},l}(s),h=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}();p()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var g=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return h(l,Rt),l.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(j){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+j.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+j.item.getID()+`</span>
        `},shouldBegin:function(j){return!0},itemTypes:["node","edge","combo"]}},l.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},l.prototype.init=function(){var u=this.get("className")||"g6-component-tooltip",j=Object(y.b)("<div class="+u+"></div>"),W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),Object(y.c)(j,{position:"absolute",visibility:"hidden"}),W.appendChild(j),this.set("tooltip",j)},l.prototype.onMouseEnter=function(u){var j=this.get("itemTypes");if(!u.item||!u.item.getType||j.indexOf(u.item.getType())!==-1){var W=u.item,st=this.get("graph");this.currentTarget=W,this.showTooltip(u),st.emit("tooltipchange",{item:u.item,action:"show"})}},l.prototype.onMouseMove=function(u){var j=this.get("itemTypes");u.item&&u.item.getType&&j.indexOf(u.item.getType())===-1||this.currentTarget&&u.item===this.currentTarget&&this.showTooltip(u)},l.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},l.prototype.showTooltip=function(u){if(u.item){var j=this.get("itemTypes");if(!u.item.getType||j.indexOf(u.item.getType())!==-1){var W=this.get("tooltip"),st=this.get("getContent")(u);Object(n.x)(st)?W.innerHTML=st:W.innerHTML=st.outerHTML,this.updatePosition(u)}}},l.prototype.hideTooltip=function(){var u=this.get("tooltip");u&&Object(y.c)(u,{visibility:"hidden"})},l.prototype.updatePosition=function(u){var j=this.get("shouldBegin"),W=this.get("tooltip");if(j(u)){var st=this.get("graph"),Tt=st.get("width"),Gt=st.get("height"),Xt=this.get("offsetX")||0,ee=this.get("offsetY")||0,ae=st.getPointByClient(u.clientX,u.clientY),je=st.getCanvasByPoint(ae.x,ae.y),Fe=je.x,_e=je.y;Fe+=Xt,_e+=ee;var He=W.getBoundingClientRect();Fe+He.width>Tt&&(Fe=Fe-He.width-Xt),_e+He.height>Gt&&(_e=_e-He.height-ee),Object(y.c)(W,{left:Fe+"px",top:_e+"px",visibility:"visible"})}else Object(y.c)(W,{visibility:"hidden"})},l.prototype.hide=function(){this.onMouseLeave()},l.prototype.destroy=function(){var u=this.get("tooltip");if(u){var j=this.get("container");j||(j=this.get("graph").get("container")),Object(n.x)(j)&&(j=document.getElementById(j)),j.removeChild(u)}},l}(s),G=e(31),V={};function $(Rt,l){V[Rt]=l}var rt=function(){function Rt(l){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=l,this.initCfg(),this.init()}return Rt.prototype.translate=function(l){return l},Rt.prototype.change=function(l){Object(n.a)(this.__cfg__,l),this.init()},Rt.prototype.clone=function(){return this.constructor(this.__cfg__)},Rt.prototype.getTicks=function(){var l=this;return Object(n.z)(this.ticks,function(u,j){return Object(n.v)(u)?u:{text:l.getText(u,j),tickValue:u,value:l.scale(u)}})},Rt.prototype.getText=function(l,u){var j=this.formatter,W=j?j(l,u):l;return Object(n.s)(W)||!Object(n.r)(W.toString)?"":W.toString()},Rt.prototype.getConfig=function(l){return this.__cfg__[l]},Rt.prototype.init=function(){Object(n.a)(this,this.__cfg__),this.setDomain(),Object(n.p)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},Rt.prototype.initCfg=function(){},Rt.prototype.setDomain=function(){},Rt.prototype.calculateTicks=function(){var l=this.tickMethod,u=[];if(Object(n.x)(l)){var j=V[l];if(!j)throw new Error("There is no method to to calculate ticks!");u=j(this)}else Object(n.r)(l)&&(u=l(this));return u},Rt.prototype.rangeMin=function(){return Object(n.k)(this.range)},Rt.prototype.rangeMax=function(){return Object(n.y)(this.range)},Rt.prototype.calcPercent=function(l,u,j){return Object(n.t)(l)?(l-u)/(j-u):NaN},Rt.prototype.calcValue=function(l,u,j){return u+l*(j-u)},Rt}(),ot=e(1),At=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="cat",u.isCategory=!0,u.cache=new Map,u}return Object(ot.b)(l,Rt),l.prototype.translate=function(u){if(this.cache.has(u))return this.cache.get(u);var j=Object(n.l)(this.values,u);return j===-1&&(j=Object(n.t)(u)?u:NaN),this.cache.set(u,j),j},l.prototype.scale=function(u){var j=this.translate(u),W=this.calcPercent(j,this.min,this.max);return this.calcValue(W,this.rangeMin(),this.rangeMax())},l.prototype.invert=function(u){var j=this.max-this.min,W=this.calcPercent(u,this.rangeMin(),this.rangeMax()),st=Math.round(j*W)+this.min;return st<this.min||st>this.max?NaN:this.values[st]},l.prototype.getText=function(u){for(var j=[],W=1;W<arguments.length;W++)j[W-1]=arguments[W];var st=u;return Object(n.t)(u)&&!this.values.includes(u)&&(st=this.values[st]),Rt.prototype.getText.apply(this,Object(ot.d)([st],j))},l.prototype.initCfg=function(){this.tickMethod="cat"},l.prototype.setDomain=function(){if(Object(n.s)(this.getConfig("min"))&&(this.min=0),Object(n.s)(this.getConfig("max"))){var u=this.values.length;this.max=u>1?u-1:u}this.cache&&this.cache.clear()},l}(rt),gt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,mt="[^\\s]+",bt=/\[([^]*?)\]/gm;function jt(Rt,l){for(var u=[],j=0,W=Rt.length;j<W;j++)u.push(Rt[j].substr(0,l));return u}var Dt=function(l){return function(u,j){var W=j[l].map(function(st){return st.toLowerCase()}).indexOf(u.toLowerCase());return W>-1?W:null}};function Ut(Rt){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];for(var j=0,W=l;j<W.length;j++){var st=W[j];for(var Tt in st)Rt[Tt]=st[Tt]}return Rt}var Ct=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Vt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ht=jt(Vt,3),re={dayNamesShort:jt(Ct,3),dayNames:Ct,monthNamesShort:Ht,monthNames:Vt,amPm:["am","pm"],DoFn:function(l){return l+["th","st","nd","rd"][l%10>3?0:(l-l%10!=10?1:0)*l%10]}},pe=Ut({},re),ye=function(l){return pe=Ut(pe,l)},we=function(l){return l.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ne=function(l,u){for(u===void 0&&(u=2),l=String(l);l.length<u;)l="0"+l;return l},Ke={D:function(l){return String(l.getDate())},DD:function(l){return Ne(l.getDate())},Do:function(l,u){return u.DoFn(l.getDate())},d:function(l){return String(l.getDay())},dd:function(l){return Ne(l.getDay())},ddd:function(l,u){return u.dayNamesShort[l.getDay()]},dddd:function(l,u){return u.dayNames[l.getDay()]},M:function(l){return String(l.getMonth()+1)},MM:function(l){return Ne(l.getMonth()+1)},MMM:function(l,u){return u.monthNamesShort[l.getMonth()]},MMMM:function(l,u){return u.monthNames[l.getMonth()]},YY:function(l){return Ne(String(l.getFullYear()),4).substr(2)},YYYY:function(l){return Ne(l.getFullYear(),4)},h:function(l){return String(l.getHours()%12||12)},hh:function(l){return Ne(l.getHours()%12||12)},H:function(l){return String(l.getHours())},HH:function(l){return Ne(l.getHours())},m:function(l){return String(l.getMinutes())},mm:function(l){return Ne(l.getMinutes())},s:function(l){return String(l.getSeconds())},ss:function(l){return Ne(l.getSeconds())},S:function(l){return String(Math.round(l.getMilliseconds()/100))},SS:function(l){return Ne(Math.round(l.getMilliseconds()/10),2)},SSS:function(l){return Ne(l.getMilliseconds(),3)},a:function(l,u){return l.getHours()<12?u.amPm[0]:u.amPm[1]},A:function(l,u){return l.getHours()<12?u.amPm[0].toUpperCase():u.amPm[1].toUpperCase()},ZZ:function(l){var u=l.getTimezoneOffset();return(u>0?"-":"+")+Ne(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4)},Z:function(l){var u=l.getTimezoneOffset();return(u>0?"-":"+")+Ne(Math.floor(Math.abs(u)/60),2)+":"+Ne(Math.abs(u)%60,2)}},pn=function(l){return+l-1},hn=[null,"[1-9]\\d?"],kn=[null,mt],Tn=["isPm",mt,function(Rt,l){var u=Rt.toLowerCase();return u===l.amPm[0]?0:u===l.amPm[1]?1:null}],Rn=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(Rt){var l=(Rt+"").match(/([+-]|\d\d)/gi);if(l){var u=60*+l[1]+parseInt(l[2],10);return l[0]==="+"?u:-u}return 0}],Mn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+mt,function(Rt){return parseInt(Rt,10)}],M:["month","[1-9]\\d?",pn],MM:["month","\\d\\d",pn],YY:["year","\\d\\d",function(Rt){var l=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+Rt>68?l-1:l)+Rt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(Rt){return 100*+Rt}],SS:["millisecond","\\d\\d",function(Rt){return 10*+Rt}],SSS:["millisecond","\\d{3}"],d:hn,dd:hn,ddd:kn,dddd:kn,MMM:["month",mt,Dt("monthNamesShort")],MMMM:["month",mt,Dt("monthNames")],a:Tn,A:Tn,ZZ:Rn,Z:Rn},Cn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},_n=function(l){return Ut(Cn,l)},Kn=function(l,u,j){if(u===void 0&&(u=Cn.default),j===void 0&&(j={}),typeof l=="number"&&(l=new Date(l)),Object.prototype.toString.call(l)!=="[object Date]"||isNaN(l.getTime()))throw new Error("Invalid Date pass to format");var W=[];u=(u=Cn[u]||u).replace(bt,function(Tt,Gt){return W.push(Gt),"@@@"});var st=Ut(Ut({},pe),j);return(u=u.replace(gt,function(Tt){return Ke[Tt](l,st)})).replace(/@@@/g,function(){return W.shift()})};function tr(Rt,l,u){if(u===void 0&&(u={}),typeof l!="string")throw new Error("Invalid format in fecha parse");if(l=Cn[l]||l,Rt.length>1e3)return null;var j={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},W=[],st=[],Tt=l.replace(bt,function(Fn,sr){return st.push(we(sr)),"@@@"}),Gt={},Xt={};Tt=we(Tt).replace(gt,function(Fn){var sr=Mn[Fn],ur=sr[0],Or=sr[1],ei=sr[3];if(Gt[ur])throw new Error("Invalid format. "+ur+" specified twice in format");return Gt[ur]=!0,ei&&(Xt[ei]=!0),W.push(sr),"("+Or+")"}),Object.keys(Xt).forEach(function(Fn){if(!Gt[Fn])throw new Error("Invalid format. "+Fn+" is required in specified format")}),Tt=Tt.replace(/@@@/g,function(){return st.shift()});var ee=Rt.match(new RegExp(Tt,"i"));if(!ee)return null;for(var ae=Ut(Ut({},pe),u),je=1;je<ee.length;je++){var Fe=W[je-1],_e=Fe[0],He=Fe[2],bn=He?He(ee[je],ae):+ee[je];if(bn==null)return null;j[_e]=bn}j.isPm===1&&j.hour!=null&&+j.hour!=12?j.hour=+j.hour+12:j.isPm===0&&+j.hour==12&&(j.hour=0);for(var wn=new Date(j.year,j.month,j.day,j.hour,j.minute,j.second,j.millisecond),Nn=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Bn=(je=0,Nn.length);je<Bn;je++)if(Gt[Nn[je][0]]&&j[Nn[je][0]]!==wn[Nn[je][1]]())return null;return j.timezoneOffset==null?wn:new Date(Date.UTC(j.year,j.month,j.day,j.hour,j.minute-j.timezoneOffset,j.second,j.millisecond))}var or={format:Kn,parse:tr,defaultI18n:re,setGlobalDateI18n:ye,setGlobalDateMasks:_n};function nr(Rt,l){return(v.format||or.format)(Rt,l)}function er(Rt){return Object(n.x)(Rt)&&(Rt=Rt.indexOf("T")>0?new Date(Rt).getTime():new Date(Rt.replace(/-/gi,"/")).getTime()),Object(n.o)(Rt)&&(Rt=Rt.getTime()),Rt}var Sr=36e5,Vr=24*Sr,ti=31*Vr,hi=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Sr],["HH",6*Sr],["HH",12*Sr],["YYYY-MM-DD",Vr],["YYYY-MM-DD",4*Vr],["YYYY-WW",7*Vr],["YYYY-MM",ti],["YYYY-MM",4*ti],["YYYY-MM",6*ti],["YYYY",380*Vr]];function Fi(Rt,l,u){var j,W=(j=function(Gt){return Gt[1]},function(Tt,Gt,Xt,ee){for(var ae=Object(n.s)(Xt)?0:Xt,je=Object(n.s)(ee)?Tt.length:ee;ae<je;){var Fe=ae+je>>>1;j(Tt[Fe])>Gt?je=Fe:ae=Fe+1}return ae})(hi,(l-Rt)/u)-1,st=hi[W];return W<0?st=hi[0]:W>=hi.length&&(st=Object(n.y)(hi)),st}var to=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="timeCat",u}return Object(ot.b)(l,Rt),l.prototype.translate=function(u){u=er(u);var j=this.values.indexOf(u);return j===-1&&(j=Object(n.t)(u)&&u<this.values.length?u:NaN),j},l.prototype.getText=function(u,j){var W=this.translate(u);if(W>-1){var st=this.values[W],Tt=this.formatter;return st=Tt?Tt(st,j):nr(st,this.mask)}return u},l.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},l.prototype.setDomain=function(){var u=this.values;Object(n.f)(u,function(j,W){u[W]=er(j)}),u.sort(function(j,W){return j-W}),Rt.prototype.setDomain.call(this)},l}(At),si=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.isContinuous=!0,u}return Object(ot.b)(l,Rt),l.prototype.scale=function(u){if(Object(n.s)(u))return NaN;var j=this.rangeMin(),W=this.rangeMax();return this.max===this.min?j:j+this.getScalePercent(u)*(W-j)},l.prototype.init=function(){Rt.prototype.init.call(this);var u=this.ticks,j=Object(n.k)(u),W=Object(n.y)(u);j<this.min&&(this.min=j),W>this.max&&(this.max=W),Object(n.s)(this.minLimit)||(this.min=j),Object(n.s)(this.maxLimit)||(this.max=W)},l.prototype.setDomain=function(){var u=Object(n.j)(this.values),j=u.min,W=u.max;Object(n.s)(this.min)&&(this.min=j),Object(n.s)(this.max)&&(this.max=W),this.min>this.max&&(this.min=j,this.max=W)},l.prototype.calculateTicks=function(){var u=this,j=Rt.prototype.calculateTicks.call(this);return this.nice||(j=Object(n.g)(j,function(W){return W>=u.min&&W<=u.max})),j},l.prototype.getScalePercent=function(u){var j=this.max,W=this.min;return(u-W)/(j-W)},l.prototype.getInvertPercent=function(u){return(u-this.rangeMin())/(this.rangeMax()-this.rangeMin())},l}(rt),Ci=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="linear",u.isLinear=!0,u}return Object(ot.b)(l,Rt),l.prototype.invert=function(u){var j=this.getInvertPercent(u);return this.min+j*(this.max-this.min)},l.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},l}(si);function _i(Rt,l){var u=Math.E;return l>=0?Math.pow(u,Math.log(l)/Rt):-1*Math.pow(u,Math.log(-l)/Rt)}function Li(Rt,l){return Rt===1?1:Math.log(l)/Math.log(Rt)}function Vi(Rt,l,u){Object(n.s)(u)&&(u=Math.max.apply(null,Rt));var j=u;return Object(n.f)(Rt,function(W){W>0&&W<j&&(j=W)}),j===u&&(j=u/l),j>1&&(j=1),j}var ro=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="log",u}return Object(ot.b)(l,Rt),l.prototype.invert=function(u){var j,W=this.base,st=Li(W,this.max),Tt=this.rangeMin(),Gt=this.rangeMax()-Tt,Xt=this.positiveMin;if(Xt){if(u===0)return 0;var ee=1/(st-(j=Li(W,Xt/W)))*Gt;if(u<ee)return u/ee*Xt}else j=Li(W,this.min);var ae=(u-Tt)/Gt*(st-j)+j;return Math.pow(W,ae)},l.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},l.prototype.setDomain=function(){Rt.prototype.setDomain.call(this);var u=this.min;if(u<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");u===0&&(this.positiveMin=Vi(this.values,this.base,this.max))},l.prototype.getScalePercent=function(u){var j=this.max,W=this.min;if(j===W||u<=0)return 0;var st=this.base,Tt=this.positiveMin;return Tt&&(W=1*Tt/st),u<Tt?u/Tt/(Li(st,j)-Li(st,W)):(Li(st,u)-Li(st,W))/(Li(st,j)-Li(st,W))},l}(si),jr=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="pow",u}return Object(ot.b)(l,Rt),l.prototype.invert=function(u){var j=this.getInvertPercent(u),W=this.exponent,st=_i(W,this.max),Tt=_i(W,this.min),Gt=j*(st-Tt)+Tt,Xt=Gt>=0?1:-1;return Math.pow(Gt,W)*Xt},l.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},l.prototype.getScalePercent=function(u){var j=this.max,W=this.min;if(j===W)return 0;var st=this.exponent;return(_i(st,u)-_i(st,W))/(_i(st,j)-_i(st,W))},l}(si),Ji=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="time",u}return Object(ot.b)(l,Rt),l.prototype.getText=function(u,j){var W=this.translate(u),st=this.formatter;return st?st(W,j):nr(W,this.mask)},l.prototype.scale=function(u){var j=u;return(Object(n.x)(j)||Object(n.o)(j))&&(j=this.translate(j)),Rt.prototype.scale.call(this,j)},l.prototype.translate=function(u){return er(u)},l.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},l.prototype.setDomain=function(){var u=this.values,j=this.getConfig("min"),W=this.getConfig("max");if(Object(n.s)(j)&&Object(n.t)(j)||(this.min=this.translate(this.min)),Object(n.s)(W)&&Object(n.t)(W)||(this.max=this.translate(this.max)),u&&u.length){var st=[],Tt=1/0,Gt=Tt,Xt=0;Object(n.f)(u,function(ee){var ae=er(ee);if(isNaN(ae))throw new TypeError("Invalid Time: "+ee+" in time scale!");Tt>ae?(Gt=Tt,Tt=ae):Gt>ae&&(Gt=ae),Xt<ae&&(Xt=ae),st.push(ae)}),u.length>1&&(this.minTickInterval=Gt-Tt),Object(n.s)(j)&&(this.min=Tt),Object(n.s)(W)&&(this.max=Xt)}},l}(Ci),pr=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="quantize",u}return Object(ot.b)(l,Rt),l.prototype.invert=function(u){var j=this.ticks,W=j.length,st=this.getInvertPercent(u),Tt=Math.floor(st*(W-1));if(Tt>=W-1)return Object(n.y)(j);if(Tt<0)return Object(n.k)(j);var Gt=j[Tt],Xt=Tt/(W-1);return Gt+(st-Xt)/((Tt+1)/(W-1)-Xt)*(j[Tt+1]-Gt)},l.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},l.prototype.calculateTicks=function(){var u=Rt.prototype.calculateTicks.call(this);return this.nice||(Object(n.y)(u)!==this.max&&u.push(this.max),Object(n.k)(u)!==this.min&&u.unshift(this.min)),u},l.prototype.getScalePercent=function(u){var j=this.ticks;if(u<Object(n.k)(j))return 0;if(u>Object(n.y)(j))return 1;var W=0;return Object(n.f)(j,function(st,Tt){if(!(u>=st))return!1;W=Tt}),W/(j.length-1)},l}(si),Yr=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="quantile",u}return Object(ot.b)(l,Rt),l.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},l}(pr),Br={};function Nr(Rt,l){if(function(u){return Br[u]}(Rt))throw new Error("type '"+Rt+"' existed.");Br[Rt]=l}var Xr=function(Rt){function l(){var u=Rt!==null&&Rt.apply(this,arguments)||this;return u.type="identity",u.isIdentity=!0,u}return Object(ot.b)(l,Rt),l.prototype.calculateTicks=function(){return this.values},l.prototype.scale=function(u){return this.values[0]!==u&&Object(n.t)(u)?u:this.range[0]},l.prototype.invert=function(u){var j=this.range;return u<j[0]||u>j[1]?NaN:this.values[0]},l}(rt),Kr=[1,5,2,2.5,4,3],ni=100*Number.EPSILON;function fi(Rt,l,u,j,W,st){var Tt=Object(n.E)(l),Gt=Object(n.l)(l,Rt),Xt=0,ee=function(ae,je){return(ae%je+je)%je}(j,st);return(ee<ni||st-ee<ni)&&j<=0&&W>=0&&(Xt=1),1-Gt/(Tt-1)-u+Xt}function $r(Rt,l,u){var j=Object(n.E)(l);return 1-Object(n.l)(l,Rt)/(j-1)-u+1}function ci(Rt,l,u,j,W,st){var Tt=(Rt-1)/(st-W),Gt=(l-1)/(Math.max(st,j)-Math.min(u,W));return 2-Math.max(Tt/Gt,Gt/Tt)}function Qr(Rt,l){return Rt>=l?2-(Rt-1)/(l-1):1}function gi(Rt,l,u,j){var W=l-Rt;return 1-.5*(Math.pow(l-j,2)+Math.pow(Rt-u,2))/Math.pow(.1*W,2)}function Oi(Rt,l,u){var j=l-Rt;if(u>j){var W=(u-j)/2;return 1-Math.pow(W,2)/Math.pow(.1*j,2)}return 1}function bi(Rt,l,u,j,W,st){if(u===void 0&&(u=5),j===void 0&&(j=!0),W===void 0&&(W=Kr),st===void 0&&(st=[.25,.2,.5,.05]),typeof Rt!="number"||typeof l!="number")return{min:0,max:0,ticks:[]};if(Rt===l||u===1)return{min:Rt,max:l,ticks:[Rt]};for(var Tt={score:-2,lmin:0,lmax:0,lstep:0},Gt=1;Gt<1/0;){for(var Xt=0,ee=W;Xt<ee.length;Xt++){var ae=ee[Xt],je=$r(ae,W,Gt);if(Number.isNaN(je))throw new Error("NaN");if(st[0]*je+st[1]+st[2]+st[3]<Tt.score){Gt=1/0;break}for(var Fe=2;Fe<1/0;){var _e=Qr(Fe,u);if(st[0]*je+st[1]+st[2]*_e+st[3]<Tt.score)break;for(var He=(l-Rt)/(Fe+1)/Gt/ae,bn=Math.ceil(Math.log10(He));bn<1/0;){var wn=Gt*ae*Math.pow(10,bn),Nn=Oi(Rt,l,wn*(Fe-1));if(st[0]*je+st[1]*Nn+st[2]*_e+st[3]<Tt.score)break;var Bn=Math.floor(l/wn)*Gt-(Fe-1)*Gt,Fn=Math.ceil(Rt/wn)*Gt;if(Bn>Fn)bn+=1;else{for(var sr=Bn;sr<=Fn;sr+=1){var ur=sr*(wn/Gt),Or=ur+wn*(Fe-1),ei=wn,Ti=fi(ae,W,Gt,ur,Or,ei),kr=gi(Rt,l,ur,Or),yi=ci(Fe,u,Rt,l,ur,Or),oo=st[0]*Ti+st[1]*kr+st[2]*yi+1*st[3];oo>Tt.score&&(!j||ur<=Rt&&Or>=l)&&(Tt.lmin=ur,Tt.lmax=Or,Tt.lstep=ei,Tt.score=oo)}bn+=1}}Fe+=1}}Gt+=1}for(var so=Number.isInteger(Tt.lstep)?0:Math.ceil(Math.abs(Math.log10(Tt.lstep))),co=[],lo=Tt.lmin;lo<=Tt.lmax;lo+=Tt.lstep)co.push(lo);var Hi=so?Object(n.z)(co,function(Io){return Number.parseFloat(Io.toFixed(so))}):co;return{min:Math.min(Rt,Object(n.k)(Hi)),max:Math.max(l,Object(n.y)(Hi)),ticks:Hi}}function zi(Rt){var l=Rt.values,u=Rt.tickInterval,j=Rt.tickCount,W=l;if(Object(n.t)(u))return Object(n.g)(W,function(Xt,ee){return ee%u==0});var st=Rt.min,Tt=Rt.max;if(Object(n.s)(st)&&(st=0),Object(n.s)(Tt)&&(Tt=l.length-1),Object(n.t)(j)&&j<Tt-st){var Gt=bi(st,Tt,j,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(n.g)(Gt,function(Xt){return Xt>=st&&Xt<=Tt}).map(function(Xt){return l[Xt]})}return l.slice(st,Tt+1)}var Qi=Math.sqrt(50),io=Math.sqrt(10),Wi=Math.sqrt(2),Zi=function(){function Rt(){this._domain=[0,1]}return Rt.prototype.domain=function(l){return l?(this._domain=Array.from(l,Number),this):this._domain.slice()},Rt.prototype.nice=function(l){var u,j;l===void 0&&(l=5);var W,st=this._domain.slice(),Tt=0,Gt=this._domain.length-1,Xt=this._domain[Tt],ee=this._domain[Gt];return ee<Xt&&(Xt=(u=[ee,Xt])[0],ee=u[1],Tt=(j=[Gt,Tt])[0],Gt=j[1]),(W=Pi(Xt,ee,l))>0?W=Pi(Xt=Math.floor(Xt/W)*W,ee=Math.ceil(ee/W)*W,l):W<0&&(W=Pi(Xt=Math.ceil(Xt*W)/W,ee=Math.floor(ee*W)/W,l)),W>0?(st[Tt]=Math.floor(Xt/W)*W,st[Gt]=Math.ceil(ee/W)*W,this.domain(st)):W<0&&(st[Tt]=Math.ceil(Xt*W)/W,st[Gt]=Math.floor(ee*W)/W,this.domain(st)),this},Rt.prototype.ticks=function(l){return l===void 0&&(l=5),function(u,j,W){var st,Tt,Gt,Xt,ee=-1;if(W=+W,(u=+u)==(j=+j)&&W>0)return[u];if((st=j<u)&&(Tt=u,u=j,j=Tt),(Xt=Pi(u,j,W))===0||!isFinite(Xt))return[];if(Xt>0)for(u=Math.ceil(u/Xt),j=Math.floor(j/Xt),Gt=new Array(Tt=Math.ceil(j-u+1));++ee<Tt;)Gt[ee]=(u+ee)*Xt;else for(u=Math.floor(u*Xt),j=Math.ceil(j*Xt),Gt=new Array(Tt=Math.ceil(u-j+1));++ee<Tt;)Gt[ee]=(u-ee)/Xt;return st&&Gt.reverse(),Gt}(this._domain[0],this._domain[this._domain.length-1],l||5)},Rt}();function Pi(Rt,l,u){var j=(l-Rt)/Math.max(0,u),W=Math.floor(Math.log(j)/Math.LN10),st=j/Math.pow(10,W);return W>=0?(st>=Qi?10:st>=io?5:st>=Wi?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(st>=Qi?10:st>=io?5:st>=Wi?2:1)}function no(Rt,l,u){return(u==="ceil"?Math.ceil(Rt/l):u==="floor"?Math.floor(Rt/l):Math.round(Rt/l))*l}function Mo(Rt,l,u){var j=no(Rt,u,"floor"),W=no(l,u,"ceil");j=Object(n.h)(j,u),W=Object(n.h)(W,u);for(var st=[],Tt=j;Tt<=W;Tt+=u){var Gt=Object(n.h)(Tt,u);st.push(Gt)}return{min:j,max:W,ticks:st}}function ao(Rt,l,u){var j,W=Rt.minLimit,st=Rt.maxLimit,Tt=Rt.min,Gt=Rt.max,Xt=Rt.tickCount,ee=Xt===void 0?5:Xt,ae=Object(n.s)(W)?Object(n.s)(l)?Tt:l:W,je=Object(n.s)(st)?Object(n.s)(u)?Gt:u:st;if(ae>je&&(je=(j=[ae,je])[0],ae=j[1]),ee<=2)return[ae,je];for(var Fe=(je-ae)/(ee-1),_e=[],He=0;He<ee;He++)_e.push(ae+Fe*He);return _e}function uo(Rt,l,u){u===void 0&&(u=5);var j={max:0,min:0,ticks:[]};if(Rt===l)return{max:l,min:Rt,ticks:[Rt]};var W=(l-Rt)/u,st=Math.pow(10,Math.floor(Math.log10(W))),Tt=st<1?Math.ceil(Math.abs(Math.log10(st))):0,Gt=st;2*st-W<1.5*(W-Gt)&&5*st-W<2.75*(W-(Gt=2*st))&&10*st-W<1.5*(W-(Gt=5*st))&&(Gt=10*st);var Xt=Math.ceil(l/Gt),ee=Math.floor(Rt/Gt);j.max=Math.max(Xt*Gt,l),j.min=Math.min(ee*Gt,Rt);for(var ae=Number.parseFloat((ee*Gt).toFixed(Tt));ae<l;)j.ticks.push(ae),ae+=Gt,Tt&&(ae=Number.parseFloat(ae.toFixed(Tt)));return j.ticks.push(ae),j}function xo(Rt,l){var u=Rt.length*l;return l===1?Rt[Rt.length-1]:l===0?Rt[0]:u%1!=0?Rt[Math.ceil(u)-1]:Rt.length%2==0?(Rt[u-1]+Rt[u])/2:Rt[u]}function oe(Rt){return new Date(Rt).getFullYear()}function Kt(Rt){return new Date(Rt,0,1).getTime()}function te(Rt){return new Date(Rt).getMonth()}function Oe(Rt,l){return new Date(Rt,l,1).getTime()}$("cat",zi),$("time-cat",function(Rt){var l=zi(Rt),u=Object(n.y)(Rt.values);return u!==Object(n.y)(l)&&l.push(u),l}),$("wilkinson-extended",function(Rt){var l=Rt.min,u=Rt.max,j=Rt.tickCount,W=Rt.nice,st=Rt.tickInterval,Tt=Rt.minLimit,Gt=Rt.maxLimit,Xt=bi(l,u,j,W).ticks;return Object(n.s)(Tt)&&Object(n.s)(Gt)?st?Mo(l,u,st).ticks:Xt:ao(Rt,Object(n.k)(Xt),Object(n.y)(Xt))}),$("r-pretty",function(Rt){var l=Rt.min,u=Rt.max,j=Rt.tickCount,W=Rt.tickInterval,st=Rt.minLimit,Tt=Rt.maxLimit,Gt=uo(l,u,j).ticks;return Object(n.s)(st)&&Object(n.s)(Tt)?W?Mo(l,u,W).ticks:Gt:ao(Rt,Object(n.k)(Gt),Object(n.y)(Gt))}),$("time",function(Rt){var l=Rt.min,u=Rt.max,j=Rt.minTickInterval,W=Rt.tickInterval,st=Rt.tickCount;if(W)st=Math.ceil((u-l)/W);else{var Tt=(u-l)/(W=Fi(l,u,st)[1])/st;Tt>1&&(W*=Math.ceil(Tt)),j&&W<j&&(W=j)}for(var Gt=[],Xt=l;Xt<u+W;Xt+=W)Gt.push(Xt);return Gt}),$("time-pretty",function(Rt){var l=Rt.min,u=Rt.max,j=Rt.minTickInterval,W=Rt.tickCount,st=Rt.tickInterval,Tt=[];st||(st=(u-l)/W,j&&st<j&&(st=j));var Gt=oe(l);if(st>31536e6)for(var Xt=oe(u),ee=Math.ceil(st/31536e6),ae=Gt;ae<=Xt+ee;ae+=ee)Tt.push(Kt(ae));else if(st>ti){var je=Math.ceil(st/ti),Fe=te(l),_e=function(co,lo){var Hi=oe(co),Io=oe(lo),ko=te(co);return 12*(Io-Hi)+(te(lo)-ko)%12}(l,u);for(ae=0;ae<=_e+je;ae+=je)Tt.push(Oe(Gt,ae+Fe))}else if(st>Vr){var He=(Fn=new Date(l)).getFullYear(),bn=Fn.getMonth(),wn=Fn.getDate(),Nn=Math.ceil(st/Vr),Bn=function(co,lo){return Math.ceil((lo-co)/Vr)}(l,u);for(ae=0;ae<Bn+Nn;ae+=Nn)Tt.push(new Date(He,bn,wn+ae).getTime())}else if(st>Sr){He=(Fn=new Date(l)).getFullYear(),bn=Fn.getMonth(),Nn=Fn.getDate();var Fn,sr=Fn.getHours(),ur=Math.ceil(st/Sr),Or=function(co,lo){return Math.ceil((lo-co)/Sr)}(l,u);for(ae=0;ae<=Or+ur;ae+=ur)Tt.push(new Date(He,bn,Nn,sr+ae).getTime())}else if(st>6e4){var ei=function(co,lo){return Math.ceil((lo-co)/6e4)}(l,u),Ti=Math.ceil(st/6e4);for(ae=0;ae<=ei+Ti;ae+=Ti)Tt.push(l+6e4*ae)}else{var kr=st;kr<1e3&&(kr=1e3);var yi=1e3*Math.floor(l/1e3),oo=Math.ceil((u-l)/1e3),so=Math.ceil(kr/1e3);for(ae=0;ae<oo+so;ae+=so)Tt.push(yi+1e3*ae)}return Tt.length>=512&&console.warn("Notice: current ticks length("+Tt.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+st+") is too small, increase the value to solve the problem!"),Tt}),$("log",function(Rt){var l,u=Rt.base,j=Rt.tickCount,W=Rt.min,st=Rt.max,Tt=Rt.values,Gt=Li(u,st);if(W>0)l=Math.floor(Li(u,W));else{var Xt=Vi(Tt,u,st);l=Math.floor(Li(u,Xt))}for(var ee=Gt-l,ae=Math.ceil(ee/j),je=[],Fe=l;Fe<Gt+ae;Fe+=ae)je.push(Math.pow(u,Fe));return W<=0&&je.unshift(0),je}),$("pow",function(Rt){var l=Rt.exponent,u=Rt.tickCount,j=Math.ceil(_i(l,Rt.max));return uo(Math.floor(_i(l,Rt.min)),j,u).ticks.map(function(W){var st=W>=0?1:-1;return Math.pow(W,l)*st})}),$("quantile",function(Rt){var l=Rt.tickCount,u=Rt.values;if(!u||!u.length)return[];for(var j=u.slice().sort(function(Gt,Xt){return Gt-Xt}),W=[],st=0;st<l;st++){var Tt=st/(l-1);W.push(xo(j,Tt))}return W}),$("d3-linear",function(Rt){var l=Rt.min,u=Rt.max,j=Rt.tickInterval,W=Rt.minLimit,st=Rt.maxLimit,Tt=function(Gt){var Xt=Gt.min,ee=Gt.max,ae=Gt.nice,je=Gt.tickCount,Fe=new Zi;return Fe.domain([Xt,ee]),ae&&Fe.nice(je),Fe.ticks(je)}(Rt);return Object(n.s)(W)&&Object(n.s)(st)?j?Mo(l,u,j).ticks:Tt:ao(Rt,Object(n.k)(Tt),Object(n.y)(Tt))}),Nr("cat",At),Nr("category",At),Nr("identity",Xr),Nr("linear",Ci),Nr("log",ro),Nr("pow",jr),Nr("time",Ji),Nr("timeCat",to),Nr("quantize",pr),Nr("quantile",Yr);var Qe=function(){for(var l=0,u=0,j=arguments.length;u<j;u++)l+=arguments[u].length;var W=Array(l),st=0;for(u=0;u<j;u++)for(var Tt=arguments[u],Gt=0,Xt=Tt.length;Gt<Xt;Gt++,st++)W[st]=Tt[Gt];return W};function On(Rt){return function(l){return Object(n.z)(l,function(u,j){return[j===0?"M":"L",u[0],u[1]]})}(Rt)}function Vn(Rt,l,u,j){j===void 0&&(j=!0);var W=new Ci({values:Rt}),st=new At({values:Object(n.z)(Rt,function(Gt,Xt){return Xt})}),Tt=Object(n.z)(Rt,function(Gt,Xt){return[st.scale(Xt)*l,u-W.scale(Gt)*u]});return j?function(Gt){if(Gt.length<=2)return On(Gt);var Xt=[];Object(n.f)(Gt,function(_e){Object(n.q)(_e,Xt.slice(Xt.length-2))||Xt.push(_e[0],_e[1])});var ee=G.a(Xt,!1),ae=Object(n.k)(Gt),je=ae[0],Fe=ae[1];return ee.unshift(["M",je,Fe]),ee}(Tt):On(Tt)}function Xn(Rt,l,u){for(var j=new Ci({values:Rt}),W=new At({values:Object(n.z)(Rt,function(ae,je){return je})}),st=Object(n.z)(Rt,function(ae,je){return[W.scale(je)*l,u-j.scale(ae)*u]}),Tt=[],Gt=0;Gt<st.length;Gt++){var Xt=st[Gt],ee=rn({x:Xt[0],y:Xt[1],y0:u,size:5});Tt.push.apply(Tt,ee)}return function(ae,je){je===void 0&&(je=!0);var Fe=[],_e=ae[0];Fe.push(["M",_e.x,_e.y]);for(var He=1,bn=ae.length;He<bn;He++)Fe.push(["L",ae[He].x,ae[He].y]);return je&&(Fe.push(["L",_e.x,_e.y]),Fe.push(["z"])),Fe}(Tt)}function $e(Rt,l,u,j){var W=Qe(Rt),st=function(Tt,Gt){var Xt=new Ci({values:Tt}),ee=Math.max(0,Xt.min);return Gt-Xt.scale(ee)*Gt}(j,u);return W.push(["L",l,st]),W.push(["L",0,st]),W.push(["Z"]),W}function rn(Rt){var l,u,j,W,st=Rt.x,Tt=Rt.y,Gt=Rt.y0,Xt=Rt.size;Object(n.m)(Tt)?(l=Tt[0],u=Tt[1]):(l=Gt,u=Tt),Object(n.m)(st)?(j=st[0],W=st[1]):(j=st-Xt/2,W=st+Xt/2);var ee=[{x:j,y:l},{x:j,y:u}];return ee.push({x:W,y:u},{x:W,y:l}),ee}var on=function(){return(on=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},$n={stroke:"#C5C5C5",strokeOpacity:.85},vr={fill:"#CACED4",opacity:.85},ar=function(){function Rt(l){var u=l.x,j=u===void 0?0:u,W=l.y,st=W===void 0?0:W,Tt=l.width,Gt=Tt===void 0?200:Tt,Xt=l.height,ee=Xt===void 0?26:Xt,ae=l.smooth,je=ae===void 0||ae,Fe=l.isArea,_e=Fe!==void 0&&Fe,He=l.data,bn=He===void 0?[]:He,wn=l.lineStyle,Nn=l.areaStyle,Bn=l.group,Fn=l.interval,sr=Fn===void 0?null:Fn;this.group=Bn,this.x=j,this.y=st,this.width=Gt,this.height=ee,this.data=bn,this.smooth=je,this.isArea=_e,this.lineStyle=Object.assign({},$n,wn),this.areaStyle=Object.assign({},vr,Nn),this.intervalConfig=sr,this.renderLine()}return Rt.prototype.renderLine=function(){var l=this,u=l.x,j=l.y,W=l.width,st=l.height,Tt=l.data,Gt=l.smooth,Xt=l.isArea,ee=(l.backgroundStyle,l.lineStyle),ae=l.areaStyle,je=this.group.addGroup({name:"trend-group"});if(Tt){var Fe=Vn(Tt,W,st,Gt);if(je.addShape("path",{attrs:on({path:Fe},ee)}),Xt){var _e=$e(Fe,W,st,Tt);je.addShape("path",{attrs:on({path:_e},ae)})}}this.intervalConfig&&je.addShape("path",{attrs:on({path:Xn(this.intervalConfig.data,W,st)},this.intervalConfig.style)}),je.move(u,j)},Rt.prototype.destory=function(){this.group.destroy()},Rt}(),rr=function(){return(rr=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Fr={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ar={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},wr=function(){function Rt(l){var u=l.group,j=l.name,W=l.type,st=l.x,Tt=st===void 0?0:st,Gt=l.y,Xt=Gt===void 0?0:Gt,ee=l.width,ae=ee===void 0?2:ee,je=l.height,Fe=je===void 0?24:je,_e=l.style,He=_e===void 0?{}:_e;this.group=u,this.name=j,this.handleType=W,this.x=Tt,this.y=Xt,this.width=ae,this.height=Fe,W==="trend"?this.style=rr(rr({},Fr),He):W==="simple"&&(this.style=rr(rr({},Ar),He)),this.renderHandle()}return Rt.prototype.setX=function(l){this.setXY(l,void 0)},Rt.prototype.setY=function(l){this.setXY(void 0,l)},Rt.prototype.setXY=function(l,u){Object(n.t)(l)&&(this.x=l),Object(n.t)(u)&&(this.y=u),this.updateXY()},Rt.prototype.renderHandle=function(){var l=this.width,u=this.height,j=this.style,W=this.name,st=j.fill,Tt=j.stroke,Gt=j.radius,Xt=j.opacity,ee=j.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:l,height:u,fill:st,stroke:Tt,radius:Gt,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:l/2,y:0,r:2*l,fill:st,stroke:Tt,radius:Gt,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:l/2,y:u,r:2*l,fill:st,stroke:Tt,radius:Gt,opacity:Xt,cursor:ee},name:W+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:l/2,y:u/2,r:2*l,fill:st,stroke:Tt,radius:Gt,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:l/2,y:u/2,r:2*l,fill:st,stroke:Tt,radius:Gt,opacity:Xt,cursor:ee},name:W+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},Rt.prototype.bindEvents=function(){var l=this,u=this.name;this.handleGroup.on(u+"-handler:mouseenter",function(){var j=l.style.highLightFill;l.background.attr("fill",j)}),this.handleGroup.on(u+"-handler:mouseleave",function(){var j=l.style.fill;l.background.attr("fill",j)})},Rt.prototype.show=function(){this.handleGroup.show()},Rt.prototype.hide=function(){this.handleGroup.hide()},Rt.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},Rt}(),xr=function(){return(xr=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Er=function(){function Rt(l){this.config=Object(n.e)({},l),this.init()}return Rt.prototype.update=function(l){this.config=Object(n.e)({},this.config,l),this.updateElement(),this.renderMarker()},Rt.prototype.init=function(){this.initElement(),this.renderMarker()},Rt.prototype.initElement=function(){var l=this.config,u=l.group,j=l.style;this.circle=u.addShape("circle",{attrs:xr({x:this.config.x,y:this.config.y,r:this.config.r},j)}),this.startMarker=u.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=u.addGroup();var W=1/4*this.config.r,st=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:2.5*W,height:st,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"})},Rt.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var l=1/4*this.config.r,u=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-u/2),this.pauseLeftMarker.attr("width",l),this.pauseLeftMarker.attr("height",u),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-u/2),this.pauseRightMarker.attr("width",l),this.pauseRightMarker.attr("height",u)},Rt.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},Rt.prototype.getStartMarkerPath=function(){var l=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-l/Math.sqrt(3)/2,this.config.y-l/2],["L",this.config.x+l/Math.sqrt(3),this.config.y],["L",this.config.x-l/Math.sqrt(3)/2,this.config.y+l/2]]},Rt}(),Ir=function(){return(Ir=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Lr={fill:"#607889",stroke:"#607889"},Pr={fill:"#fff"},Dr={fill:"green"},ri={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},vi=function(){function Rt(l){this.controllerCfg=Object(n.e)({},ri,l),this.group=l.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=l.fontFamily||"Arial, sans-serif",this.init()}return Rt.prototype.init=function(){this.renderPlayButton()},Rt.prototype.getNextMarkerPath=function(l,u,j){return[["M",l,u-j],["L",l+j,u],["L",l,u+j]]},Rt.prototype.getPreMarkerPath=function(l,u,j){return[["M",l,u-j],["L",l-j,u],["L",l,u+j]]},Rt.prototype.renderPlayButton=function(){var l=this.controllerCfg,u=l.width,j=l.height,W=l.x,st=l.y,Tt=l.hiddleToggle,Gt=l.fill,Xt=Gt===void 0?"#ccc":Gt,ee=l.stroke,ae=ee===void 0?"green":ee,je=l.playBtnStyle,Fe=je===void 0?Lr:je,_e=l.preBtnStyle,He=_e===void 0?Pr:_e,bn=l.nextBtnStyle,wn=bn===void 0?Dr:bn,Nn=j/2-5,Bn=st+10,Fn=this.group.addShape("rect",{attrs:{x:W,y:Bn,width:u,height:j,stroke:ae,fill:Xt},name:"container-rect"});this.playButton?this.playButton.update({x:u/2,y:Bn,r:Nn}):this.playButton=new Er({group:this.group,x:u/2,y:Bn+Nn+5,r:Nn,isPlay:this.isPlay,style:Fe}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-5*Nn,Bn+Nn+5,.5*Nn)},He),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-4.5*Nn,Bn+Nn+5,.5*Nn)},He),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+4.5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),Fn.toBack(),this.renderSpeedBtn(),Tt||this.renderToggleTime(),this.bindEvent()},Rt.prototype.renderSpeedBtn=function(){var l=this.controllerCfg,u=l.y,j=l.width,W=l.hiddleToggle,st=this.group.addGroup({name:"speed-group"});this.speedGroup=st;for(var Tt=1,Gt=[],Xt=9,ee=0;ee<5;ee++){var ae=u+15+ee*(ee+1)+Tt;st.addShape("rect",{attrs:{x:j-(W?50:110),y:ae,width:15,height:2,fill:"#ccc"},speed:Xt,name:"speed-rect"}),this.speedAxisY.push(ae),Gt.push(Xt),Xt-=2,Tt++}for(ee=0;ee<4;ee++)st.addShape("rect",{attrs:{x:j-(W?50:110),y:this.speedAxisY[ee]+2,width:15,height:2*ee+1,fill:"#fff",opacity:.3},speed:Gt[ee]-1,name:"speed-rect"});this.speedText=st.addShape("text",{attrs:{x:j-(W?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc",fontFamily:this.fontFamily||"Arial, sans-serif"}}),this.speedPoint=st.addShape("path",{attrs:{path:this.getPath(j-(W?50:110),this.speedAxisY[4]),fill:"#ccc"}})},Rt.prototype.getPath=function(l,u){return[["M",l,u],["L",l-12,u-6],["L",l-12,u+6],["Z"]]},Rt.prototype.renderToggleTime=function(){var l,u=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:u-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",u-50+3,this.speedAxisY[1]+6],["L",u-50+7,this.speedAxisY[1]+10],["L",u-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:((l=this.controllerCfg)===null||l===void 0?void 0:l.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:u-50+20,y:this.speedAxisY[1]+15,fill:"#ccc",fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}})},Rt.prototype.bindEvent=function(){var l=this,u=this.controllerCfg,j=u.width,W=u.hiddleToggle;this.speedGroup.on("speed-rect:click",function(st){l.speedPoint.attr("path",l.getPath(j-(W?50:110),st.y)),l.currentSpeed=st.target.get("speed"),l.speedText.attr("text",l.currentSpeed+".0X"),l.group.emit("timebarConfigChanged",{speed:l.currentSpeed,type:l.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(st){var Tt,Gt,Xt=st.target.get("isChecked");Xt?(l.checkedIcon.hide(),l.checkedText.attr("text",((Gt=l.controllerCfg)===null||Gt===void 0?void 0:Gt.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),l.currentType="range"):(l.checkedIcon.show(),l.checkedText.attr("text",((Tt=l.controllerCfg)===null||Tt===void 0?void 0:Tt.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),l.currentType="single"),st.target.set("isChecked",!Xt),l.group.emit("timebarConfigChanged",{type:l.currentType,speed:l.currentSpeed})})},Rt.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},Rt}(),ii=function(){return(ii=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Si={fill:"#416180",opacity:.05},Ui={fill:"#416180",opacity:.15,radius:5},Yi={fill:"#5B8FF9",opacity:.3,cursor:"move"},Bi={width:2,height:24},Di={textBaseline:"middle",fill:"#000",opacity:.45},ve=function(){function Rt(l){var u=this;this.prevX=0,this.onMouseDown=function(jo){return function(ho){u.currentHandler=jo;var fa=ho.originalEvent;fa.stopPropagation(),fa.preventDefault(),u.prevX=Object(n.i)(fa,"touches.0.pageX",fa.pageX);var Zo=u.canvas.get("container");Zo.addEventListener("mousemove",u.onMouseMove),Zo.addEventListener("mouseup",u.onMouseUp),Zo.addEventListener("mouseleave",u.onMouseUp),Zo.addEventListener("touchmove",u.onMouseMove),Zo.addEventListener("touchend",u.onMouseUp),Zo.addEventListener("touchcancel",u.onMouseUp)}},this.onMouseMove=function(jo){jo.stopPropagation(),jo.preventDefault();var ho=Object(n.i)(jo,"touches.0.pageX",jo.pageX),fa=ho-u.prevX,Zo=u.adjustOffsetRange(fa/u.width);u.updateStartEnd(Zo),u.updateUI(),u.prevX=ho},this.onMouseUp=function(){u.currentHandler&&(u.currentHandler=void 0);var jo=u.canvas.get("container");jo&&(jo.removeEventListener("mousemove",u.onMouseMove),jo.removeEventListener("mouseup",u.onMouseUp),jo.removeEventListener("mouseleave",u.onMouseUp),jo.removeEventListener("touchmove",u.onMouseMove),jo.removeEventListener("touchend",u.onMouseUp),jo.removeEventListener("touchcancel",u.onMouseUp))};var j=l.x,W=j===void 0?0:j,st=l.y,Tt=st===void 0?0:st,Gt=l.width,Xt=Gt===void 0?100:Gt,ee=l.height,ae=l.padding,je=ae===void 0?10:ae,Fe=l.trendCfg,_e=l.controllerCfg,He=_e===void 0?{speed:1}:_e,bn=l.backgroundStyle,wn=bn===void 0?{}:bn,Nn=l.foregroundStyle,Bn=Nn===void 0?{}:Nn,Fn=l.handlerStyle,sr=Fn===void 0?{}:Fn,ur=l.textStyle,Or=ur===void 0?{}:ur,ei=l.start,Ti=ei===void 0?0:ei,kr=l.end,yi=kr===void 0?1:kr,oo=l.minText,so=oo===void 0?"":oo,co=l.maxText,lo=co===void 0?"":co,Hi=l.group,Io=l.graph,ko=l.canvas,Ro=l.ticks,bo=l.type;this.graph=Io,this.canvas=ko,this.group=Hi,this.timeBarType=bo,this.x=W,this.y=Tt,this.width=Xt,this.height=ee,this.padding=je,this.ticks=Ro,this.trendCfg=Fe,this.controllerCfg=He,this.currentSpeed=He.speed||1,bo==="trend"?this.backgroundStyle=ii(ii({},Si),wn):bo==="simple"&&(this.backgroundStyle=ii(ii({},Ui),wn)),this.foregroundStyle=ii(ii({},Yi),Bn),this.handlerStyle=ii(ii({},Bi),sr),this.textStyle=ii(ii({},Di),Or),this.currentMode="range",this.start=Ti,this.end=yi,this.minText=so,this.maxText=lo,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return Rt.prototype.update=function(l){var u=l.x,j=l.y,W=l.width,st=l.height,Tt=l.minText,Gt=l.maxText,Xt=l.start,ee=l.end;this.start=Math.min(1,Math.max(Xt,0)),this.end=Math.min(1,Math.max(ee,0)),Object(n.a)(this,{x:u,y:j,width:W,height:st,minText:Tt,maxText:Gt}),this.updateUI()},Rt.prototype.setText=function(l,u){this.minTextShape.attr("text",l),this.maxTextShape.attr("text",u)},Rt.prototype.renderSlider=function(){var l=this,u=this.width,j=this.height,W=this.timeBarType;if(W==="trend"&&Object(n.E)(Object(n.i)(this.trendCfg,"data"))){var st=new ar(ii(ii({x:this.x,y:this.y,width:u,height:j},this.trendCfg),{group:this.group}));this.trendComponent=st}var Tt=this.group.addGroup({name:"slider-group"});Tt.addShape("rect",{attrs:ii({x:0,y:0,width:u,height:j},this.backgroundStyle)});var Gt=this.group.addGroup();W==="trend"?(this.minTextShape=Gt.addShape("text",{attrs:ii({x:0,y:j/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Gt.addShape("text",{attrs:ii({y:j/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=Gt.addShape("text",{attrs:ii({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Gt.addShape("text",{attrs:ii({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:ii({x:0,y:this.y,height:j},this.foregroundStyle)});var Xt=Object(n.i)(this.handlerStyle,"width",2),ee=Object(n.i)(this.handlerStyle,"height",24),ae=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new wr(ii({name:"minHandlerShape",group:ae,type:W,x:this.x,y:this.y,width:Xt,height:ee,cursor:"ew-resize"},this.handlerStyle));var je=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new wr(ii({name:"maxHandlerShape",group:je,type:W,x:this.x,y:this.y,width:Xt,height:ee,cursor:"ew-resize"},this.handlerStyle));var Fe=this.ticks,_e=u/(Fe.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(bn){bn.destroy()});var He=-1/0;this.textList=Fe.map(function(bn,wn){l.tickPosList.push(l.x+wn*_e);var Nn=l.group.addShape("text",{attrs:{x:l.x+wn*_e,y:l.y+j+5,text:bn,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35,fontFamily:l.fontFamily||"Arial, sans-serif"}}),Bn=l.group.addShape("line",{attrs:{x1:l.x+wn*_e,y1:l.y+j+2,x2:l.x+wn*_e,y2:l.y+j+6,lineWidth:1,stroke:"#ccc"}}),Fn=Nn.getBBox();return Fn.minX>He?(Nn.show(),Bn.show(),He=Fn.minX+Fn.width+10):(Nn.hide(),Bn.hide()),Nn}),this.controllerBtnGroup=new vi(ii({group:this.group,x:this.x,y:this.y+j+25,width:u,height:40},this.controllerCfg)),this.updateUI(),Tt.move(this.x,this.y),this.bindEvents()},Rt.prototype.bindEvents=function(){var l=this,u=this.group.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),u.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var j=this.group.find(function(W){return W.get("name")==="maxHandlerShape"});j&&(j.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),j.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){l.isPlay=!l.isPlay,l.currentHandler=l.maxHandlerShape,l.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){l.currentHandler=l.maxHandlerShape,l.updateStartEnd(.01),l.updateUI()}),this.group.on("preStepBtn:click",function(){l.currentHandler=l.maxHandlerShape,l.updateStartEnd(-.01),l.updateUI()}),this.group.on("timebarConfigChanged",function(W){var st=W.type,Tt=W.speed;l.currentSpeed=Tt,l.currentMode=st,st==="single"?(l.minHandlerShape.hide(),l.foregroundShape.hide(),l.minTextShape.hide()):st==="range"&&(l.minHandlerShape.show(),l.foregroundShape.show(),l.minTextShape.show())})},Rt.prototype.adjustTickIndex=function(l){for(var u=0;u<this.tickPosList.length-1;u++)if(this.tickPosList[u]<=l&&l<=this.tickPosList[u+1])return Math.abs(this.tickPosList[u]-l)<Math.abs(l-this.tickPosList[u+1])?u:u+1},Rt.prototype.adjustOffsetRange=function(l){switch(this.currentHandler){case this.minHandlerShape:var u=0-this.start,j=1-this.start;return Math.min(j,Math.max(u,l));case this.maxHandlerShape:return u=0-this.end,j=1-this.end,Math.min(j,Math.max(u,l));case this.foregroundShape:return u=0-this.start,j=1-this.end,Math.min(j,Math.max(u,l));default:return 0}},Rt.prototype.updateStartEnd=function(l){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=l,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=l,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=l,this.end+=l,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},Rt.prototype.updateUI=function(){var l=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var u=this.start*this.width,j=this.end*this.width;this.foregroundShape.attr("x",u),this.foregroundShape.attr("width",j-u);var W=Object(n.i)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var st=this.dodgeText([u,j]),Tt=st[0],Gt=st[1];this.minHandlerShape.setX(u-W/2),Object(n.f)(Tt,function(Xt,ee){return l.minTextShape.attr(ee,Xt)}),this.maxHandlerShape.setX(j-W/2),Object(n.f)(Gt,function(Xt,ee){return l.maxTextShape.attr(ee,Xt)}),this.currentMode==="range"?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valueChange",{value:[this.end,this.end]})},Rt.prototype.dodgeText=function(l){var u,j,W=Object(n.i)(this.handlerStyle,"width",2),st=this.minTextShape,Tt=this.maxTextShape,Gt=l[0],Xt=l[1],ee=!1;Gt>Xt&&(Gt=(u=[Xt,Gt])[0],Xt=u[1],st=(j=[Tt,st])[0],Tt=j[1],ee=!0);var ae=st.getBBox(),je=Tt.getBBox(),Fe=null,_e=null;return this.timeBarType==="trend"?(Fe=ae.width>Gt-2?{x:Gt+W/2+2,textAlign:"left"}:{x:Gt-W/2-2,textAlign:"right"},_e=je.width>this.width-Xt-2?{x:Xt-W/2-2,textAlign:"right"}:{x:Xt+W/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(Fe=ae.width>Gt-2?{x:Gt+W/2+2,textAlign:"center"}:{x:Gt-W/2-2,textAlign:"center"},_e=je.width>this.width-Xt-2?{x:Xt-W/2-2,textAlign:"center"}:{x:Xt+W/2+2,textAlign:"center"}),ee?[_e,Fe]:[Fe,_e]},Rt.prototype.startPlay=function(){var l=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=l,j=u.ticks,W=u.width,st=l.currentSpeed,Tt=W/j.length/(1e3*(10-st)/60),Gt=l.adjustOffsetRange(Tt/l.width);l.updateStartEnd(Gt),l.updateUI(),l.isPlay&&(l.playHandler=l.startPlay())}):void 0},Rt.prototype.changePlayStatus=function(l){l===void 0&&(l=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),l&&this.graph.emit("timelineend",null))},Rt.prototype.destory=function(){this.graph.off("valueChange");var l=this.group,u=l.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.off("minHandlerShape-handler:mousedown"),u.off("minHandlerShape-handler:touchstart"),u.destroy());var j=l.find(function(W){return W.get("name")==="maxHandlerShape"});j&&(j.off("maxHandlerShape-handler:mousedown"),j.off("maxHandlerShape-handler:touchstart"),j.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),l.off("playPauseBtn:click"),l.off("nextStepBtn:click"),l.off("preStepBtn:click"),l.off("timebarConfigChanged"),l.destroy(),this.trendComponent&&this.trendComponent.destory()},Rt}(),F=function(){function Rt(l){var u=l.x,j=u===void 0?0:u,W=l.y,st=W===void 0?0:W,Tt=l.container,Gt=l.text,Xt=l.padding,ee=Xt===void 0?[4,4,4,4]:Xt,ae=l.className,je=ae===void 0?"g6-component-timebar-tooltip":ae,Fe=l.backgroundColor,_e=Fe===void 0?"#000":Fe,He=l.textColor,bn=He===void 0?"#fff":He,wn=l.opacity,Nn=wn===void 0?.8:wn,Bn=l.fontSize,Fn=Bn===void 0?12:Bn;this.container=Tt,this.className=je,this.backgroundColor=_e,this.textColor=bn,this.x=j,this.y=st,this.text=Gt,this.padding=ee,this.opacity=Nn,this.fontSize=Fn,this.render()}return Rt.prototype.render=function(){var l=this.className,u=(this.x,this.y,this.backgroundColor),j=this.textColor,W=this.text,st=this.padding,Tt=this.opacity,Gt=this.fontSize,Xt=this.container,ee=Object(y.b)("<div class='"+l+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+Tt+'"></div>');Object(n.x)(Xt)&&(Xt=document.getElementById(Xt)),Xt.appendChild(ee),this.parentHeight=Xt.offsetHeight,this.parentWidth=Xt.offsetWidth,Object(y.c)(ee,{visibility:"hidden",top:0,left:0});var ae=Object(y.b)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+u+"; font-size: "+Gt+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+j+"; padding: "+st[0]+"px "+st[1]+"px "+st[2]+"px "+st[3]+"px'></div>");ae.innerHTML=W,ee.appendChild(ae),this.backgroundDOM=ae;var je=Object(y.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+u+"'></div>");ee.appendChild(je),this.arrowDOM=je,this.container=ee},Rt.prototype.show=function(l){var u=l.text,j=l.x;l.y,l.clientX,l.clientY,this.backgroundDOM.innerHTML=u;var W=this.backgroundDOM.offsetWidth,st=this.backgroundDOM.offsetHeight,Tt=this.arrowDOM.offsetWidth,Gt=this.arrowDOM.offsetHeight;Object(y.c)(this.container,{top:-st-Gt+"px",left:j+"px",visibility:"visible"}),Object(y.c)(this.backgroundDOM,{marginLeft:-W/2+"px"}),Object(y.c)(this.arrowDOM,{marginLeft:-Tt/2+"px",top:st+"px"});var Xt=j-W/2,ee=j+W/2;Xt<0?Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-Xt+"px"}):ee>this.parentWidth&&Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-ee+this.parentWidth+12+"px"})},Rt.prototype.hide=function(){Object(y.c)(this.container,{top:0,left:0,visibility:"hidden"})},Rt}(),B=function(){return(B=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},Z={fill:"#5B8FF9"},ut={fill:"#e6e8e9"},Bt=function(){function Rt(l){this.frameCount=0,this.fontFamily="Arial, sans-serif";var u=l.graph,j=l.canvas,W=l.group,st=l.width,Tt=l.height,Gt=l.padding,Xt=l.data,ee=l.start,ae=l.end,je=l.x,Fe=je===void 0?0:je,_e=l.y,He=_e===void 0?0:_e,bn=l.tickLabelFormatter,wn=l.selectedTickStyle,Nn=wn===void 0?Z:wn,Bn=l.unselectedTickStyle,Fn=Bn===void 0?ut:Bn,sr=l.tooltipBackgroundColor,ur=l.tooltipFomatter;this.graph=u,this.group=W,this.sliceGroup=W.addGroup({name:"slice-group"}),this.canvas=j,this.width=st,this.height=Tt,this.padding=Gt,this.data=Xt,this.start=ee,this.end=ae,this.tickLabelFormatter=bn,this.selectedTickStyle=Nn,this.unselectedTickStyle=Fn,this.x=Fe,this.y=He,this.tooltipBackgroundColor=sr,this.tooltipFomatter=ur,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return Rt.prototype.renderSlices=function(){var l=this,u=this,j=u.width,W=u.height,st=u.padding,Tt=u.data,Gt=u.start,Xt=u.end,ee=u.tickLabelFormatter,ae=u.selectedTickStyle,je=u.unselectedTickStyle,Fe=j-2*st,_e=W-(3*st+4+10)-2*st,He=Tt.length,bn=(Fe-2*(He-1))/He;this.tickWidth=bn;var wn=this.sliceGroup,Nn=[],Bn=[],Fn=Math.round(He*Gt),sr=Math.round(He*Xt);this.startTickRectId=Fn,this.endTickRectId=sr,Tt.forEach(function(Or,ei){var Ti=ei>=Fn&&ei<=sr?ae:je,kr=wn.addShape("rect",{attrs:B({x:st+ei*(bn+2),y:st,width:bn,height:_e},Ti),draggable:!0,name:"tick-rect-"+ei}),yi=wn.addShape("rect",{attrs:{x:st+ei*bn+2*(2*ei-1)/2,y:st,width:ei===0||ei===He-1?bn+1:bn+2,height:_e,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+ei});yi.toFront();var oo,so=kr.getBBox(),co=(so.minX+so.maxX)/2;if(Nn.push({rect:kr,pickRect:yi,value:Or.date,x:co,y:so.minY}),ee?(oo=ee(Or),!Object(n.x)(oo)&&oo&&(oo=Or.date)):ei%Math.round(He/10)==0&&(oo=Or.date),oo){Bn.push(oo);var lo=so.maxY+2*st;wn.addShape("line",{attrs:{stroke:"#BFBFBF",x1:co,y1:lo,x2:co,y2:lo+4}});var Hi=lo+4+st,Io=wn.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:co,y:Hi,textAlign:"center",text:oo,textBaseline:"top",fontSize:10,fontFamily:l.fontFamily||"Arial, sans-serif"},capture:!1}),ko=Io.getBBox();ko.maxX>j?Io.attr("textAlign","right"):ko.minX<0&&Io.attr("textAlign","left")}}),this.tickRects=Nn;var ur=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vi({group:ur,x:this.x,y:this.y+W+5,width:j,height:40,hiddleToggle:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},Rt.prototype.initEvent=function(){var l=this,u=this.sliceGroup;u.on("click",function(ee){var ae=ee.target;if(ae.get("type")==="rect"&&ae.get("name")){var je=parseInt(ae.get("name").split("-")[2],10);if(!isNaN(je)){var Fe=l.tickRects,_e=l.unselectedTickStyle;Fe.forEach(function(wn){wn.rect.attr(_e)});var He=l.selectedTickStyle;Fe[je].rect.attr(He),l.startTickRectId=je,l.endTickRectId=je;var bn=je/Fe.length;l.graph.emit("valueChange",{value:[bn,bn]})}}}),u.on("dragstart",function(ee){var ae=l.tickRects,je=l.unselectedTickStyle;ae.forEach(function(wn){wn.rect.attr(je)});var Fe=ee.target,_e=parseInt(Fe.get("name").split("-")[2],10),He=l.selectedTickStyle;ae[_e].rect.attr(He),l.startTickRectId=_e;var bn=_e/ae.length;l.graph.emit("valueChange",{value:[bn,bn]}),l.dragging=!0}),u.on("dragover",function(ee){if(l.dragging&&ee.target.get("type")==="rect"){for(var ae=parseInt(ee.target.get("name").split("-")[2],10),je=l.startTickRectId,Fe=l.tickRects,_e=l.selectedTickStyle,He=l.unselectedTickStyle,bn=0;bn<Fe.length;bn++){var wn=bn>=je&&bn<=ae?_e:He;Fe[bn].rect.attr(wn)}var Nn=Fe.length;l.endTickRectId=ae;var Bn=je/Nn,Fn=ae/Nn;l.graph.emit("valueChange",{value:[Bn,Fn]})}}),u.on("drop",function(ee){if(l.dragging&&(l.dragging=!1,ee.target.get("type")==="rect")){var ae=l.startTickRectId,je=parseInt(ee.target.get("name").split("-")[2],10);if(!(je<ae)){var Fe=l.selectedTickStyle,_e=l.tickRects;_e[je].rect.attr(Fe),l.endTickRectId=je;var He=_e.length,bn=ae/He,wn=je/He;l.graph.emit("valueChange",{value:[bn,wn]})}}});var j=this.tooltipBackgroundColor,W=this.tooltipFomatter,st=this.canvas,Tt=new F({container:st.get("container"),backgroundColor:j}),Gt=this.tickRects;Gt.forEach(function(ee){var ae=ee.pickRect;ae.on("mouseenter",function(je){var Fe=je.target;if(Fe.get("type")==="rect"){var _e=parseInt(Fe.get("name").split("-")[2],10),He=st.getClientByPoint(Gt[_e].x,Gt[_e].y);Tt.show({x:Gt[_e].x,y:Gt[_e].y,clientX:He.x,clientY:He.y,text:W?W(Gt[_e].value):Gt[_e].value})}}),ae.on("mouseleave",function(je){Tt.hide()})});var Xt=this.group;Xt.on("playPauseBtn:click",function(){l.isPlay=!l.isPlay,l.changePlayStatus()}),Xt.on("nextStepBtn:click",function(){l.updateStartEnd(1)}),Xt.on("preStepBtn:click",function(){l.updateStartEnd(-1)}),Xt.on("timebarConfigChanged",function(ee){ee.type;var ae=ee.speed;l.currentSpeed=ae})},Rt.prototype.changePlayStatus=function(l){l===void 0&&(l=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),l&&this.graph.emit("timelineend",null))},Rt.prototype.startPlay=function(){var l=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=l.currentSpeed;l.frameCount%(60/u)==0&&(l.frameCount=0,l.updateStartEnd(1)),l.frameCount++,l.isPlay&&(l.playHandler=l.startPlay())}):void 0},Rt.prototype.updateStartEnd=function(l){var u=this.tickRects,j=u.length,W=this.unselectedTickStyle,st=this.selectedTickStyle,Tt=this.endTickRectId;if(l>0?this.endTickRectId++:(u[this.endTickRectId].rect.attr(W),this.endTickRectId--),Tt!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var Gt=this.startTickRectId;Gt<=this.endTickRectId-1;Gt++)u[Gt].rect.attr(W);this.startTickRectId=this.endTickRectId}if(u[this.endTickRectId]){u[this.endTickRectId].rect.attr(st);var Xt=this.startTickRectId/j,ee=this.endTickRectId/j;this.graph.emit("valueChange",{value:[Xt,ee]})}},Rt.prototype.destory=function(){this.graph.off("valueChange");var l=this.sliceGroup;l.off("click"),l.off("dragstart"),l.off("dragover"),l.off("drop"),this.tickRects.forEach(function(u){var j=u.pickRect;j.off("mouseenter"),j.off("mouseleave")}),this.tickRects.length=0,l.off("playPauseBtn:click"),l.off("nextStepBtn:click"),l.off("preStepBtn:click"),l.off("timebarConfigChanged"),this.sliceGroup.destroy()},Rt}(),Jt=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}(),ie=function(){return(ie=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},se=function(l,u){var j={};for(var W in l)Object.prototype.hasOwnProperty.call(l,W)&&u.indexOf(W)<0&&(j[W]=l[W]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var st=0;for(W=Object.getOwnPropertySymbols(l);st<W.length;st++)u.indexOf(W[st])<0&&Object.prototype.propertyIsEnumerable.call(l,W[st])&&(j[W[st]]=l[W[st]])}return j},Te=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Jt(l,Rt),l.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{}}},l.prototype.initContainer=function(){var u,j,W=this.get("graph"),st=this._cfgs,Tt=st.width,Gt=st.height,Xt=this.get("className")||"g6-component-timebar",ee=this.get("container"),ae=this.get("graph").get("container");ee?(Object(n.x)(ee)&&(ee=document.getElementById(ee)),u=ee):(u=Object(y.b)("<div class='"+Xt+"'></div>"),Object(y.c)(u,{position:"relative"})),ae.appendChild(u),this.set("timeBarContainer",u),j=W.get("renderer")==="SVG"?new Y.Canvas({container:u,width:Tt,height:Gt}):new N.Canvas({container:u,width:Tt,height:Gt}),this.set("canvas",j)},l.prototype.init=function(){this.initContainer();var u=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",u),this.renderTrend(),this.initEvent();var j=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",j)},l.prototype.renderTrend=function(){var u=this._cfgs,j=u.width,W=u.x,st=u.y,Tt=u.padding,Gt=u.type,Xt=u.trend,ee=u.slider,ae=u.controllerCfg,je=u.textStyle,Fe=Xt.data,_e=se(Xt,["data"]),He=j-2*Tt,bn=Gt==="trend"?26:8,wn=this.get("graph"),Nn=this.get("timeBarGroup"),Bn=this.get("canvas"),Fn=null;if(Gt==="trend"||Gt==="simple")Fn=new ve(ie(ie({graph:wn,canvas:Bn,group:Nn,type:Gt,x:W+Tt,y:Gt==="trend"?st+Tt:st+Tt+15,width:He,height:bn,padding:Tt,trendCfg:ie(ie({},_e),{data:Fe.map(function(ur){return ur.value})})},ee),{ticks:Fe.map(function(ur){return ur.date}),handlerStyle:ie(ie({},ee.handlerStyle),{height:ee.height||bn}),controllerCfg:ae,textStyle:je}));else if(Gt==="tick"){var sr=this._cfgs.tick;Fn=new Bt(ie({graph:wn,canvas:Bn,group:Nn,x:W+Tt,y:st+Tt},sr))}this.set("timebar",Fn)},l.prototype.filterData=function(u){var j=u.value,W=null,st=this._cfgs.type;if(st==="trend"||st==="simple"?W=this._cfgs.trend.data:st==="tick"&&(W=this._cfgs.tick.data),W&&W.length!==0){var Tt=this.get("rangeChange"),Gt=this.get("graph"),Xt=Math.round(W.length*j[0]),ee=Math.round(W.length*j[1]);ee=ee>=W.length?W.length-1:ee;var ae=W[Xt].date,je=W[ee].date;if(st!=="tick"&&this.get("timebar").setText(ae,je),Tt)Tt(Gt,ae,je);else{var Fe=Gt.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=Fe);var _e=this.cacheGraphData.nodes.filter(function(wn){return wn.date>=ae&&wn.date<=je}),He=_e.map(function(wn){return wn.id}),bn=this.cacheGraphData.edges.filter(function(wn){return He.includes(wn.source)&&He.includes(wn.target)});Gt.changeData({nodes:_e,edges:bn})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},l.prototype.initEvent=function(){var u=this,j=0,W=0,st=this._cfgs.type;st&&st!=="trend"&&st!=="simple"?st==="tick"&&(j=this._cfgs.tick.start,W=this._cfgs.tick.end):(j=this._cfgs.slider.start,W=this._cfgs.slider.end);var Tt=this.get("graph");Tt.on("afterrender",function(){u.filterData({value:[j,W]})}),Tt.on("valueChange",function(Gt){u.filterData(Gt)})},l.prototype.destroy=function(){var u=this.get("timebar");u&&u.destory&&u.destory(),Rt.prototype.destroy.call(this);var j=this.get("timeBarContainer");if(j){var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.removeChild(j)}},l}(s),Ee={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(l){return Object.assign(this,l),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(l){var u=this,j=this.events;this.graph=l,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||l.get("canvas").set("draggable",!0),Object(n.f)(j,function(W,st){l.on(st,W)}),document.addEventListener("visibilitychange",function(){u.keydown=!1})},unbind:function(l){var u=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||l.get("canvas").set("draggable",!1),Object(n.f)(u,function(j,W){l.off(W,j)})},get:function(l){return this[l]},set:function(l,u){return this[l]=u,this}},un=function(){function Rt(){}return Rt.registerBehavior=function(l,u){if(!u)throw new Error("please specify handler for this behavior: "+l);var j=Object(n.c)(Ee);Object.assign(j,u);var W=function(Tt){var Gt=this;Object.assign(this,this.getDefaultCfg(),Tt);var Xt=this.getEvents();this.events=null;var ee={};Xt&&(Object(n.f)(Xt,function(ae,je){ee[je]=Object(n.J)(Gt,ae)}),this.events=ee)};W.prototype=j,Rt.types[l]=W},Rt.hasBehavior=function(l){return!!Rt.types[l]},Rt.getBehavior=function(l){return Rt.types[l]},Rt.types={},Rt}(),xn=un,zt=e(79),Yt=e(10),Se=e(33),Wt=Yt.a.transform,ue=function(l){return function(u,j){return u[l]-j[l]}},vn=function(l,u,j){return l>=u&&l<=j},Dn=function(l,u,j,W){var st=j.x-l.x,Tt=j.y-l.y,Gt=u.x-l.x,Xt=u.y-l.y,ee=W.x-j.x,ae=W.y-j.y,je=Gt*ae-Xt*ee,Fe=null;if(je*je>.001*(Gt*Gt+Xt*Xt)*(ee*ee+ae*ae)){var _e=(st*ae-Tt*ee)/je,He=(st*Xt-Tt*Gt)/je;vn(_e,0,1)&&vn(He,0,1)&&(Fe={x:l.x+_e*Gt,y:l.y+_e*Xt})}return Fe},zn=function(l,u){var j=l.x,W=l.y,st=l.width,Tt=l.height,Gt=[],Xt={x:j+st/2,y:W+Tt/2};Gt.push({x:j,y:W}),Gt.push({x:j+st,y:W}),Gt.push({x:j+st,y:W+Tt}),Gt.push({x:j,y:W+Tt}),Gt.push({x:j,y:W});for(var ee=null,ae=1;ae<Gt.length&&!(ee=Dn(Gt[ae-1],Gt[ae],Xt,u));ae++);return ee},Gn=function(l,u){var j=l.x,W=l.y,st=l.r,Tt=u.x-j,Gt=u.y-W;if(Math.sqrt(Tt*Tt+Gt*Gt)<st)return null;var Xt=Math.sign(Tt),ee=Math.sign(Gt),ae=Math.atan(Gt/Tt);return{x:j+Math.abs(st*Math.cos(ae))*Xt,y:W+Math.abs(st*Math.sin(ae))*ee}},Ze=function(l,u){var j=l.rx,W=l.ry,st=l.x,Tt=l.y,Gt=u.x-st,Xt=u.y-Tt,ee=Math.atan2(Xt/W,Gt/j);return ee<0&&(ee+=2*Math.PI),{x:st+j*Math.cos(ee),y:Tt+W*Math.sin(ee)}},Ce=function(l,u,j){j===void 0&&(j=1);var W=[l.x,l.y,j];return u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]),Yt.d.transformMat3(W,W,u),{x:W[0],y:W[1]}},R=function(l,u,j){j===void 0&&(j=1),u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]);var W=Yt.b.invert([1,0,0,0,1,0,0,0,1],u);W||(W=[1,0,0,0,1,0,0,0,1]);var st=[l.x,l.y,j];return Yt.d.transformMat3(st,st,W),{x:st[0],y:st[1]}},yt=function(l,u,j){var W=l.x-u.x,st=l.y-u.y,Tt=l.x-j.x,Gt=l.y-j.y,Xt=(l.x*l.x-u.x*u.x-u.y*u.y+l.y*l.y)/2,ee=(l.x*l.x-j.x*j.x-j.y*j.y+l.y*l.y)/2,ae=st*Tt-W*Gt;return{x:-(Gt*Xt-st*ee)/ae,y:-(W*ee-Tt*Xt)/ae}},$t=function(l,u){var j=l.x-u.x,W=l.y-u.y;return Math.sqrt(j*j+W*W)},me=function(l,u){var j=[];return l.forEach(function(W){var st=[];W.forEach(function(Tt){st.push(Tt*u)}),j.push(st)}),j},Zt=function(l){for(var u=[],j=l.length,W=0;W<j;W+=1){u[W]=[];for(var st=0;st<j;st+=1)W===st?u[W][st]=0:l[W][st]!==0&&l[W][st]?u[W][st]=l[W][st]:u[W][st]=1/0}for(var Tt=0;Tt<j;Tt+=1)for(W=0;W<j;W+=1)for(st=0;st<j;st+=1)u[W][st]>u[W][Tt]+u[Tt][st]&&(u[W][st]=u[W][Tt]+u[Tt][st]);return u},de=function(l,u){var j=l.nodes,W=l.edges,st=[],Tt={};if(!j)throw new Error("invalid nodes data!");return j&&j.forEach(function(Gt,Xt){Tt[Gt.id]=Xt,st.push([])}),W&&W.forEach(function(Gt){var Xt=Gt.source,ee=Gt.target,ae=Tt[Xt],je=Tt[ee];st[ae][je]=1,u||(st[je][ae]=1)}),st},he=function(l,u){l.translate(u.x,u.y)},ce=function(l,u){var j=l.getMatrix();j||(j=[1,0,0,0,1,0,0,0,1]);var W=l.getCanvasBBox(),st=u.x-W.minX,Tt=u.y-W.minY,Gt=Wt(j,[["t",st,Tt]]);l.setMatrix(Gt)},Me=function(l,u){var j=l.getMatrix();j||(j=[1,0,0,0,1,0,0,0,1]);var W=u;Object(n.m)(u)||(W=[u,u]),Object(n.m)(u)&&u.length===1&&(W=[u[0],u[0]]),j=Wt(j,[["s",W[0],W[1]]]),l.setMatrix(j)},ze=function(l,u){var j=l.getMatrix();j||(j=[1,0,0,0,1,0,0,0,1]),j=Wt(j,[["r",u]]),l.setMatrix(j)},Ve=function(l,u,j){for(var W=[],st=0;st<l;st++)W[st]=0;return j.forEach(function(Tt){Tt.source&&(W[u[Tt.source]]+=1),Tt.target&&(W[u[Tt.target]]+=1)}),W};function ke(Rt,l,u){return(u[0]-Rt[0])*(l[1]-Rt[1])==(l[0]-Rt[0])*(u[1]-Rt[1])&&Math.min(Rt[0],l[0])<=u[0]&&u[0]<=Math.max(Rt[0],l[0])&&Math.min(Rt[1],l[1])<=u[1]&&u[1]<=Math.max(Rt[1],l[1])}var tn=function(l,u,j){var W=!1,st=l.length;function Tt(ae){return Math.abs(ae)<1e-6?0:ae<0?-1:1}if(st<=2)return!1;for(var Gt=0;Gt<st;Gt++){var Xt=l[Gt],ee=l[(Gt+1)%st];if(ke(Xt,ee,[u,j]))return!0;Tt(Xt[1]-j)>0!=Tt(ee[1]-j)>0&&Tt(u-(j-Xt[1])*(Xt[0]-ee[0])/(Xt[1]-ee[1])-Xt[0])<0&&(W=!W)}return W},De=function(l,u){return!(u.minX>l.maxX||u.maxX<l.minX||u.minY>l.maxY||u.maxY<l.minY)},cn=function(l,u){var j=function(Fe){var _e=Fe.map(function(bn){return bn[0]}),He=Fe.map(function(bn){return bn[1]});return{minX:Math.min.apply(null,_e),maxX:Math.max.apply(null,_e),minY:Math.min.apply(null,He),maxY:Math.max.apply(null,He)}},W=function(Fe){for(var _e=[],He=Fe.length,bn=0;bn<He-1;bn++){var wn=Fe[bn],Nn=Fe[bn+1];_e.push({from:{x:wn[0],y:wn[1]},to:{x:Nn[0],y:Nn[1]}})}if(_e.length>1){var Bn=Fe[0],Fn=Fe[He-1];_e.push({from:{x:Fn[0],y:Fn[1]},to:{x:Bn[0],y:Bn[1]}})}return _e};if(l.length<2||u.length<2)return!1;var st=j(l),Tt=j(u);if(!De(st,Tt))return!1;var Gt=!1;if(Object(n.f)(u,function(je){if(tn(l,je[0],je[1]))return Gt=!0,!1}),Gt||(Object(n.f)(l,function(je){if(tn(u,je[0],je[1]))return Gt=!0,!1}),Gt))return!0;var Xt=W(l),ee=W(u),ae=!1;return Object(n.f)(ee,function(je){if(function(Fe,_e){var He=!1;return Object(n.f)(Fe,function(bn){if(Dn(bn.from,bn.to,_e.from,_e.to))return He=!0,!1}),He}(Xt,je))return ae=!0,!1}),ae},fn=function(){function Rt(l,u,j,W){this.x1=l,this.y1=u,this.x2=j,this.y2=W}return Rt.prototype.getBBox=function(){var l=Math.min(this.x1,this.x2),u=Math.min(this.y1,this.y2),j=Math.max(this.x1,this.x2),W=Math.max(this.y1,this.y2);return{x:l,y:u,minX:l,minY:u,maxX:j,maxY:W,width:j-l,height:W-u}},Rt}(),nn=function(l,u){return{top:[l.minX,l.minY,l.maxX,l.minY],left:[l.minX,l.minY,l.minX,l.maxY],bottom:[l.minX,l.maxY,l.maxX,l.maxY],right:[l.maxX,l.minY,l.maxX,l.maxY]}[u]},dn=function(l,u){var j=(u.x2-u.x1)*(l.y1-u.y1)-(u.y2-u.y1)*(l.x1-u.x1),W=(l.x2-l.x1)*(l.y1-u.y1)-(l.y2-l.y1)*(l.x1-u.x1),st=(u.y2-u.y1)*(l.x2-l.x1)-(u.x2-u.x1)*(l.y2-l.y1);if(st){var Tt=j/st,Gt=W/st;if(Tt>=0&&Tt<=1&&Gt>=0&&Gt<=1)return Tt}return Number.POSITIVE_INFINITY},Sn=function(l,u){for(var j=["top","left","bottom","right"],W=l.getBBox(),st=0,Tt=[],Gt=0;Gt<4;Gt++){var Xt=nn(W,j[Gt]),ee=Xt[0],ae=Xt[1],je=Xt[2],Fe=Xt[3];Tt[Gt]=Dn({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},{x:ee,y:ae},{x:je,y:Fe}),Tt[Gt]&&(st+=1)}return[Tt,st]},Pe=function(l,u){for(var j=["top","left","bottom","right"],W=l.getBBox(),st=Number.POSITIVE_INFINITY,Tt=0,Gt=0;Gt<4;Gt++){var Xt=nn(W,j[Gt]),ee=Xt[0],ae=Xt[1],je=Xt[2],Fe=Xt[3],_e=dn(u,new fn(ee,ae,je,Fe));(_e=Math.abs(_e-.5))>=0&&_e<=1&&(Tt+=1,st=_e<st?_e:st)}return Tt===0?-1:st},le=function(l){var u=0,j=0;if(l.length>0){for(var W=0,st=l;W<st.length;W++){var Tt=st[W];u+=Tt.x,j+=Tt.y}u/=l.length,j/=l.length}return{x:u,y:j}},Le=function(l,u){return Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2)},Be=function(l,u){var j,W=u.x1,st=u.y1,Tt=u.x2-W,Gt=u.y2-st,Xt=l.x-W,ee=l.y-st,ae=Xt*Tt+ee*Gt;j=ae<=0||(ae=(Xt=Tt-Xt)*Tt+(ee=Gt-ee)*Gt)<=0?0:ae*ae/(Tt*Tt+Gt*Gt);var je=Xt*Xt+ee*ee-j;return je<0&&(je=0),je},en=function(l,u,j){return j===void 0&&(j=.001),Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2)<Math.pow(j,2)},sn=function(l,u){var j=l.x<u.x,W=l.x>u.x+u.width,st=l.y>u.y+u.height,Tt=l.y<u.y;if(!(j||W||st||Tt))return 0;if(st&&!j&&!W)return Math.pow(u.y+u.height-l.y,2);if(Tt&&!j&&!W)return Math.pow(l.y-u.y,2);if(j&&!st&&!Tt)return Math.pow(u.x-l.x,2);if(W&&!st&&!Tt)return Math.pow(u.x+u.width-l.x,2);var Gt=Math.min(Math.abs(u.x-l.x),Math.abs(u.x+u.width-l.x)),Xt=Math.min(Math.abs(u.y-l.y),Math.abs(u.y+u.height-l.y));return Gt*Gt+Xt*Xt},Ue="rgb(95, 149, 255)",ln="rgb(253, 253, 253)",mn="rgb(247, 250, 255)",Wn="rgb(224, 224, 224)",An="rgb(224, 224, 224)",In={version:"0.0.8",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ue,fill:"rgb(239, 244, 255)"},size:20,color:Ue,linkPoints:{size:8,lineWidth:1,fill:mn,stroke:Ue}},nodeStateStyles:{active:{fill:mn,stroke:Ue,lineWidth:2,shadowColor:Ue,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Ue,lineWidth:4,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Wn,lineAppendWidth:2},color:Wn},edgeStateStyles:{active:{stroke:Ue,lineWidth:1},selected:{stroke:Ue,lineWidth:2,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ue,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ln,lineWidth:1,stroke:An,r:5,width:20,height:10},size:[20,5],color:An,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ue,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:Ue,lineWidth:2,fill:ln,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:ln,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:ln,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},lr=function(){function Rt(l){this.graph=l,this.destroyed=!1,this.modes=l.get("modes")||{default:[]},this.formatModes(),this.mode=l.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return Rt.prototype.formatModes=function(){var l=this.modes;Object(n.f)(l,function(u){Object(n.f)(u,function(j,W){Object(n.x)(j)&&(u[W]={type:j})})})},Rt.prototype.setBehaviors=function(l){var u,j=this.graph,W=this.modes[l],st=[];Object(n.f)(W||[],function(Tt){var Gt=un.getBehavior(Tt.type||Tt);Gt&&(u=new Gt(Tt))&&(u.bind(j),st.push(u))}),this.currentBehaves=st},Rt.mergeBehaviors=function(l,u){return Object(n.f)(u,function(j){l.indexOf(j)<0&&(Object(n.x)(j)&&(j={type:j}),l.push(j))}),l},Rt.filterBehaviors=function(l,u){var j=[];return l.forEach(function(W){var st="";st=Object(n.x)(W)?W:W.type,u.indexOf(st)<0&&j.push(W)}),j},Rt.prototype.setMode=function(l){var u=this.modes,j=this.graph,W=l;u[W]&&(j.emit("beforemodechange",{mode:l}),Object(n.f)(this.currentBehaves,function(st){st.delegate&&st.delegate.remove(),st.unbind(j)}),this.setBehaviors(W),j.emit("aftermodechange",{mode:l}),this.mode=l)},Rt.prototype.getMode=function(){return this.mode},Rt.prototype.manipulateBehaviors=function(l,u,j){var W,st=this;if(W=Object(n.m)(l)?l:[l],Object(n.m)(u))return Object(n.f)(u,function(Gt){st.modes[Gt]?st.modes[Gt]=j?Rt.mergeBehaviors(st.modes[Gt]||[],W):Rt.filterBehaviors(st.modes[Gt]||[],W):j&&(st.modes[Gt]=W)}),this;var Tt=u;return u||(Tt=this.mode),this.modes[Tt]||j&&(this.modes[Tt]=W),this.modes[Tt]=j?Rt.mergeBehaviors(this.modes[Tt]||[],W):Rt.filterBehaviors(this.modes[Tt]||[],W),this.setMode(this.mode),this},Rt.prototype.updateBehavior=function(l,u,j){Object(n.x)(l)&&(l={type:l});var W=[];if(j&&j!==this.mode&&j!=="default"){if(!(W=this.modes[j])||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var st=W.length;for(Gt=0;Gt<st;Gt++){if((Xt=W[Gt]).type===l.type||Xt===l.type)return Xt===l.type&&(Xt={type:Xt}),Object.assign(Xt,u),W[Gt]=Xt,this;Gt===st-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(W=this.currentBehaves)||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Tt=W.length,Gt=0;Gt<Tt;Gt++){var Xt;if((Xt=W[Gt]).type===l.type)return Xt.updateCfg(u),this;Gt===Tt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},Rt.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},Rt}(),Hr=function(Rt){function l(u,j){var W=Rt.call(this,u,j)||this;return W.item=j.item,W.canvasX=j.canvasX,W.canvasY=j.canvasY,W.wheelDelta=j.wheelDelta,W.detail=j.detail,W}return Object(ot.b)(l,Rt),l}(e(18).Event),Gr=function(l){return l+"-"+Math.random()+Date.now()},Mr=function(l){var u=0,j=0,W=0,st=0;return Object(n.t)(l)?u=j=W=st=l:Object(n.x)(l)?u=j=W=st=parseInt(l,10):Object(n.m)(l)&&(u=l[0],W=Object(n.s)(l[1])?l[0]:l[1],st=Object(n.s)(l[2])?l[0]:l[2],j=Object(n.s)(l[3])?W:l[3]),[u,W,st,j]},oi=function(l){var u=new Hr(l.type,l);return u.clientX=l.clientX,u.clientY=l.clientY,u.x=l.x,u.y=l.y,u.target=l.target,u.currentTarget=l.currentTarget,u.bubbles=!0,u.item=l.item,u},ai=function(l){if(!l)return!1;for(var u=[1,0,0,0,1,0,0,0,1],j=0;j<9;j++)if(l[j]!==u[j])return!0;return!1},Zr=function(l){return Number.isNaN(Number(l))},Xi=function(l){for(var u=1/0,j=-1/0,W=1/0,st=-1/0,Tt=0;Tt<l.length;Tt++){var Gt=l[Tt].getBBox(),Xt=Gt.minX,ee=Gt.minY,ae=Gt.maxX,je=Gt.maxY;Xt<u&&(u=Xt),ee<W&&(W=ee),ae>j&&(j=ae),je>st&&(st=je)}return{x:Math.floor(u),y:Math.floor(W),width:Math.ceil(j)-Math.floor(u),height:Math.ceil(st)-Math.floor(W),minX:u,minY:W,maxX:j,maxY:st}},$i=function(l,u,j,W,st){u===void 0&&(u=15),j===void 0&&(j="quadratic");for(var Tt=l.length,Gt=2*u,Xt=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],ee={},ae=[],je={},Fe=0;Fe<Tt;Fe++){var _e=l[Fe],He=_e.source,bn=_e.target,wn=He+"-"+bn;if(!ae[Fe]){ee[wn]||(ee[wn]=[]),ae[Fe]=!0,ee[wn].push(_e);for(var Nn=0;Nn<Tt;Nn++)if(Fe!==Nn){var Bn=l[Nn],Fn=Bn.source,sr=Bn.target;ae[Nn]||(He===sr&&bn===Fn?(ee[wn].push(Bn),ae[Nn]=!0,je[Fn+"|"+sr+"|"+(ee[wn].length-1)]=!0):He===Fn&&bn===sr&&(ee[wn].push(Bn),ae[Nn]=!0))}}}for(var ur in ee)for(var Or=ee[ur],ei=Or.length,Ti=0;Ti<ei;Ti++){var kr=Or[Ti];if(kr.source!==kr.target)if(ei===1&&W&&kr.source!==kr.target)kr.type=W;else{kr.type=j;var yi=(Ti%2==0?1:-1)*(je[kr.source+"|"+kr.target+"|"+Ti]?-1:1);kr.curveOffset=ei%2==1?yi*Math.ceil(Ti/2)*Gt:yi*(Math.floor(Ti/2)*Gt+u)}else st&&(kr.type=st),kr.loopCfg={position:Xt[Ti%8],dist:20*Math.floor(Ti/8)+50}}return l},Go=function(){function Rt(l){this.destroyed=!1,this.graph=l,this.destroyed=!1}return Rt.prototype.getViewCenter=function(){var l=this.getFormatPadding(),u=this.graph,j=this.graph.get("width"),W=u.get("height");return{x:(j-l[1]-l[3])/2+l[3],y:(W-l[0]-l[2])/2+l[0]}},Rt.prototype.fitCenter=function(){var l=this.graph,u=l.get("group");u.resetMatrix();var j=u.getCanvasBBox();if(j.width!==0&&j.height!==0){var W=this.getViewCenter(),st=j.x+j.width/2,Tt=j.y+j.height/2;l.translate(W.x-st,W.y-Tt)}},Rt.prototype.fitView=function(){var l=this.graph,u=this.getFormatPadding(),j=l.get("width"),W=l.get("height"),st=l.get("group");st.resetMatrix();var Tt=st.getCanvasBBox();if(Tt.width!==0&&Tt.height!==0){var Gt=this.getViewCenter(),Xt=Tt.x+Tt.width/2,ee=Tt.y+Tt.height/2;l.translate(Gt.x-Xt,Gt.y-ee);var ae=(j-u[1]-u[3])/Tt.width,je=(W-u[0]-u[2])/Tt.height,Fe=ae;ae>je&&(Fe=je),l.zoom(Fe,Gt)}},Rt.prototype.getFormatPadding=function(){var l=this.graph.get("fitViewPadding");return Mr(l)},Rt.prototype.focusPoint=function(l,u,j){var W=this,st=this.getViewCenter(),Tt=this.getPointByCanvas(st.x,st.y),Gt=this.graph.get("group").getMatrix();if(Gt||(Gt=[1,0,0,0,1,0,0,0,1]),u){var Xt=(Tt.x-l.x)*Gt[0],ee=(Tt.y-l.y)*Gt[4],ae=0,je=0,Fe=0,_e=0;this.graph.get("canvas").animate(function(He){Fe=Xt*He,_e=ee*He,W.graph.translate(Fe-ae,_e-je),ae=Fe,je=_e},Object(ot.a)({},j))}else this.graph.translate((Tt.x-l.x)*Gt[0],(Tt.y-l.y)*Gt[4])},Rt.prototype.getPointByCanvas=function(l,u){var j=this.graph.get("group").getMatrix();return j||(j=[1,0,0,0,1,0,0,0,1]),R({x:l,y:u},j)},Rt.prototype.getPointByClient=function(l,u){var j=this.graph.get("canvas").getPointByClient(l,u);return this.getPointByCanvas(j.x,j.y)},Rt.prototype.getClientByPoint=function(l,u){var j=this.graph.get("canvas"),W=this.getCanvasByPoint(l,u),st=j.getClientByPoint(W.x,W.y);return{x:st.x,y:st.y}},Rt.prototype.getCanvasByPoint=function(l,u){var j=this.graph.get("group").getMatrix();return j||(j=[1,0,0,0,1,0,0,0,1]),Ce({x:l,y:u},j)},Rt.prototype.focus=function(l,u,j){Object(n.x)(l)&&(l=this.graph.findById(l));var W=l.get("group").getMatrix();W||(W=[1,0,0,0,1,0,0,0,1]),l&&this.focusPoint({x:W[6],y:W[7]},u,j)},Rt.prototype.changeSize=function(l,u){var j=this.graph;if(!Object(n.t)(l)||!Object(n.t)(u))throw Error("invalid canvas width & height, please make sure width & height type is number");j.set({width:l,height:u}),j.get("canvas").changeSize(l,u),j.get("plugins").forEach(function(W){if(W.get("gridContainer")){var st=j.get("minZoom");Object(y.c)(W.get("container"),{width:l+"px",height:u+"px"}),Object(y.c)(W.get("gridContainer"),{width:l/st+"px",height:u/st+"px",left:0,top:0})}})},Rt.prototype.destroy=function(){this.graph=null,this.destroyed=!1},Rt}(),_o={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Uo=Math.PI,ta=Math.sin,li=Math.cos,Oo=ta(Uo/8),qi=li(Uo/8),zo=function(l,u){var j=l.getBBox(),W={x:j.minX,y:j.minY},st={x:j.maxX,y:j.maxY};if(u){var Tt=u.getMatrix();Tt||(Tt=[1,0,0,0,1,0,0,0,1]),W=Ce(W,Tt),st=Ce(st,Tt)}var Gt=W.x,Xt=W.y,ee=st.x,ae=st.y;return{x:Gt,y:Xt,minX:Gt,minY:Xt,maxX:ee,maxY:ae,width:ee-Gt,height:ae-Xt}},Yo=function(l){var u=l.sourceNode||l.targetNode,j=u.get("group").getMatrix();j||(j=[1,0,0,0,1,0,0,0,1]);var W=u.getKeyShape().getBBox(),st=l.loopCfg||{},Tt=st.dist||2*Math.max(W.width,W.height),Gt=st.position||In.defaultLoopPosition,Xt=[j[6],j[7]],ee=[l.startPoint.x,l.startPoint.y],ae=[l.endPoint.x,l.endPoint.y],je=W.height/2,Fe=W.height/2,_e=je*Oo,He=je*qi,bn=Fe*Oo,wn=Fe*qi;if(ee[0]===ae[0]&&ee[1]===ae[1]){switch(Gt){case"top":ee=[Xt[0]-_e,Xt[1]-He],ae=[Xt[0]+bn,Xt[1]-wn];break;case"top-right":je=W.height/2,Fe=W.width/2,ee=[Xt[0]+(_e=je*Oo),Xt[1]-(He=je*qi)],ae=[Xt[0]+(wn=Fe*qi),Xt[1]-(bn=Fe*Oo)];break;case"right":je=W.width/2,Fe=W.width/2,ee=[Xt[0]+(He=je*qi),Xt[1]-(_e=je*Oo)],ae=[Xt[0]+(wn=Fe*qi),Xt[1]+(bn=Fe*Oo)];break;case"bottom-right":je=W.width/2,Fe=W.height/2,ee=[Xt[0]+(He=je*qi),Xt[1]+(_e=je*Oo)],ae=[Xt[0]+(bn=Fe*Oo),Xt[1]+(wn=Fe*qi)];break;case"bottom":je=W.height/2,Fe=W.height/2,ee=[Xt[0]+(_e=je*Oo),Xt[1]+(He=je*qi)],ae=[Xt[0]-(bn=Fe*Oo),Xt[1]+(wn=Fe*qi)];break;case"bottom-left":je=W.height/2,Fe=W.width/2,ee=[Xt[0]-(_e=je*Oo),Xt[1]+(He=je*qi)],ae=[Xt[0]-(wn=Fe*qi),Xt[1]+(bn=Fe*Oo)];break;case"left":je=W.width/2,Fe=W.width/2,ee=[Xt[0]-(He=je*qi),Xt[1]+(_e=je*Oo)],ae=[Xt[0]-(wn=Fe*qi),Xt[1]-(bn=Fe*Oo)];break;case"top-left":je=W.width/2,Fe=W.height/2,ee=[Xt[0]-(He=je*qi),Xt[1]-(_e=je*Oo)],ae=[Xt[0]-(bn=Fe*Oo),Xt[1]-(wn=Fe*qi)];break;default:je=W.width/2,Fe=W.width/2,ee=[Xt[0]-(_e=je*Oo),Xt[1]-(He=je*qi)],ae=[Xt[0]+(bn=Fe*Oo),Xt[1]-(wn=Fe*qi)]}if(st.clockwise===!1){var Nn=[ee[0],ee[1]];ee=[ae[0],ae[1]],ae=[Nn[0],Nn[1]]}}var Bn=[ee[0]-Xt[0],ee[1]-Xt[1]],Fn=(je+Tt)/je,sr=(Fe+Tt)/Fe;st.clockwise===!1&&(Fn=(Fe+Tt)/Fe,sr=(je+Tt)/je);var ur=Yt.c.scale([0,0],Bn,Fn),Or=[Xt[0]+ur[0],Xt[1]+ur[1]],ei=[ae[0]-Xt[0],ae[1]-Xt[1]],Ti=Yt.c.scale([0,0],ei,sr),kr=[Xt[0]+Ti[0],Xt[1]+Ti[1]];return l.startPoint={x:ee[0],y:ee[1]},l.endPoint={x:ae[0],y:ae[1]},l.controlPoints=[{x:Or[0],y:Or[1]},{x:kr[0],y:kr[1]}],l},Xo=function(l,u,j,W,st){var Tt=[],Gt=l.getPoint(u);if(Gt===null)return{x:0,y:0,angle:0};if(u<1e-4)Tt=l.getStartTangent().reverse();else if(u>.9999)Tt=l.getEndTangent();else{var Xt=l.getPoint(u+1e-4);Tt.push([Gt.x,Gt.y]),Tt.push([Xt.x,Xt.y])}var ee=Math.atan2(Tt[1][1]-Tt[0][1],Tt[1][0]-Tt[0][0]);if(ee<0&&(ee+=2*Uo),j&&(Gt.x+=li(ee)*j,Gt.y+=ta(ee)*j),W){var ae=ee-Uo/2;ee>.5*Uo&&ee<1.5*Uo&&(ae-=Uo),Gt.x+=li(ae)*W,Gt.y+=ta(ae)*W}var je={x:Gt.x,y:Gt.y,angle:ee};return st?(ee>.5*Uo&&ee<1.5*Uo&&(ee-=Uo),Object(ot.a)({rotate:ee},je)):je},ua=function Rt(l,u){if(u(l)===!1)return!1;if(l&&l.children){for(var j=l.children.length-1;j>=0;j--)if(!Rt(l.children[j],u))return!1}return!0},di=function(l,u){typeof u=="function"&&ua(l,u)},ea=function(l,u){typeof u=="function"&&function j(W,st){if(W&&W.children){for(var Tt=W.children.length-1;Tt>=0;Tt--)if(!j(W.children[Tt],st))return}return st(W)!==!1}(l,u)},xi=function(l,u){return u*(_o[l]||1)},ks=function(l,u){var j=0,W=new RegExp("[\u4E00-\u9FA5]+");return l.split("").forEach(function(st){W.test(st)?j+=u:j+=xi(st,u)}),[j,u]},Ri=function(l,u){var j=[],W={},st={};l.forEach(function(Xt){st[Xt.id]=Xt}),l.forEach(function(Xt,ee){var ae=Object(n.c)(Xt);ae.itemType="combo",ae.children=void 0,ae.parentId===ae.id?(console.warn("The parentId for combo "+ae.id+" can not be the same as the combo's id"),delete ae.parentId):ae.parentId&&!st[ae.parentId]&&(console.warn("The parent combo for combo "+ae.id+" does not exist!"),delete ae.parentId);var je=W[ae.id];if(je){if(ae.children=je.children,W[ae.id]=ae,!(je=ae).parentId)return void j.push(je);var Fe=W[je.parentId];if(Fe)Fe.children?Fe.children.push(ae):Fe.children=[ae];else{var _e={id:je.parentId,children:[je]};W[je.parentId]=_e,W[ae.id]=ae}}else if(Object(n.x)(Xt.parentId)){var He=W[Xt.parentId];if(He)He.children?He.children.push(ae):He.children=[ae],W[ae.id]=ae;else{var bn={id:Xt.parentId,children:[ae]};W[bn.id]=bn,W[ae.id]=ae}}else j.push(ae),W[ae.id]=ae});var Tt={};(u||[]).forEach(function(Xt){Tt[Xt.id]=Xt;var ee=W[Xt.comboId];if(ee){var ae={id:Xt.id,comboId:Xt.comboId};ee.children?ee.children.push(ae):ee.children=[ae],ae.itemType="node",W[Xt.id]=ae}});var Gt=0;return j.forEach(function(Xt){Xt.depth=Gt+10,ua(Xt,function(ee){var ae,je=W[ee.id].itemType;ae=je==="node"?W[ee.comboId]:W[ee.parentId],ee.depth=ae&&je==="node"?Gt+1:Gt+10,Gt<ee.depth&&(Gt=ee.depth);var Fe=Tt[ee.id];return Fe&&(Fe.depth=ee.depth),!0})}),j},Rs=function(l,u,j){var W,st=l,Tt={root:{children:l}},Gt=!1,Xt="root";(l||[]).forEach(function(_e){if(!Gt)return _e.id===u?(W=_e,_e.itemType==="combo"?W.parentId=j:W.comboId=j,void(Gt=!0)):void di(_e,function(He){return Tt[He.id]={children:He.children},st=Tt[He.parentId||He.comboId||"root"].children,!He||!He.removed&&u!==He.id||!st||(Xt=He.parentId||He.comboId||"root",W=He,He.itemType==="combo"?W.parentId=j:W.comboId=j,Gt=!0,!1)})});var ee=(st=Tt[Xt].children)?st.indexOf(W):-1;if(ee>-1&&st.splice(ee,1),Gt||(W={id:u,itemType:"node",comboId:j},Tt[u]={children:void 0}),u){var ae=!1;if(j){var je=0;(l||[]).forEach(function(_e){ae||di(_e,function(He){return j!==He.id||(ae=!0,He.children?He.children.push(W):He.children=[W],je=He.depth,W.itemType==="node"?W.depth=je+2:W.depth=je+1,!1)})})}else j&&ae||W.itemType==="node"||l.push(W);var Fe=W.depth;di(W,function(_e){return _e.itemType==="node"?Fe+=2:Fe+=1,_e.depth=Fe,!0})}return l},Mi=function(l,u){var j={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return l&&l.length!==0&&(l.forEach(function(W){var st=u.findById(W.id);if(st&&st.isVisible()){st.set("bboxCanvasCache",void 0);var Tt=st.getCanvasBBox();Tt.x&&j.minX>Tt.minX&&(j.minX=Tt.minX),Tt.y&&j.minY>Tt.minY&&(j.minY=Tt.minY),Tt.x&&j.maxX<Tt.maxX&&(j.maxX=Tt.maxX),Tt.y&&j.maxY<Tt.maxY&&(j.maxY=Tt.maxY)}}),j.x=(j.minX+j.maxX)/2,j.y=(j.minY+j.maxY)/2,j.width=j.maxX-j.minX,j.height=j.maxY-j.minY,j.centerX=(j.minX+j.maxX)/2,j.centerY=(j.minY+j.maxY)/2,Object.keys(j).forEach(function(W){j[W]!==1/0&&j[W]!==-1/0||(j[W]=void 0)})),j},hu=function(l){var u=Object(n.t)(l.x)||Object(n.t)(l.y)||l.type||l.anchorPoints||l.size;return l.style&&(u=u||Object(n.t)(l.style.r)||Object(n.t)(l.style.width)||Object(n.t)(l.style.height)||Object(n.t)(l.style.rx)||Object(n.t)(l.style.ry)),u},ui=function(l){var u={};return Object.keys(l).forEach(function(j){var W=l[j];if(Object(n.v)(W)){var st={};Object.keys(W).forEach(function(Tt){var Gt=W[Tt];(Tt!=="img"||Object(n.x)(Gt))&&(st[Tt]=Object(n.c)(Gt))}),u[j]=st}else u[j]=Object(n.c)(W)}),u};function du(Rt){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(Rt)}function eo(Rt){if(typeof Rt!="string")return Rt;var l=function(Or){if(typeof Or!="string")return Or;try{return JSON.parse(Or.trim())}catch(ei){return Or.trim()}},u=l(Rt);if(typeof u!="string")return u;for(var j=function(Or){return Or[Or.length-1]},W=Rt.trim(),st=[],Tt=[],Gt=function(){for(var Or=[],ei=0;ei<arguments.length;ei++)Or[ei]=arguments[ei];return Or.some(function(Ti){return j(Tt)===Ti})},Xt=null,ee=0,ae="";ee<W.length;){var je=W[ee],Fe=Gt('"',"'");if(Fe||je.trim()){var _e=W[ee-1]==="\\",He=Gt("}"),bn=Gt("]"),wn=Gt(","),Nn=j(st);if(Fe)if(j(Tt)!==je||_e)ae+=je;else{Tt.pop();var Bn=l(ae);Nn.push(Bn),Xt=Bn,ae=""}else if(bn&&je===",")ae&&(Nn.push(l(ae)),ae="");else if(He&&je===":")Tt.push(","),ae&&(Nn.push(ae),ae="");else if(wn&&je===",")ae&&(Nn.push(l(ae)),ae=""),Tt.pop();else if(je==="}"&&(He||wn)){ae&&(Nn.push(l(ae)),ae=""),wn&&Tt.pop();for(var Fn={},sr=1;sr<Nn.length;sr+=2)Fn[Nn[sr-1]]=Nn[sr];st.pop(),st.length&&j(st).push(Fn),Tt.pop(),Xt=Fn}else je==="]"&&bn?(ae&&(Nn.push(l(ae)),ae=""),st.pop(),st.length&&j(st).push(Nn),Tt.pop(),Xt=Nn):je==="{"?(st.push([]),Tt.push("}")):je==="["?(st.push([]),Tt.push("]")):je==='"'?Tt.push('"'):je==="'"?Tt.push("'"):ae+=je;ee+=1}else ee+=1}return Xt||ae}function vu(Rt,l){var u;l===void 0&&(l={x:0,y:0});var j=Object(ot.a)({x:0,y:0,width:0,height:0},l);if((u=Rt.children)===null||u===void 0?void 0:u.length){var W=Rt.attrs,st=W===void 0?{}:W,Tt=st.marginTop,Gt=Object(ot.a)({},l);Tt&&(Gt.y+=Tt);for(var Xt=0;Xt<Rt.children.length;Xt++){Rt.children[Xt].attrs.key=(st.key||"root")+" -"+Xt+" ";var ee=vu(Rt.children[Xt],Gt);if(ee.bbox){var ae=ee.bbox;ee.attrs.next==="inline"?Gt.x+=ee.bbox.width:Gt.y+=ee.bbox.height,ae.width+ae.x>j.width&&(j.width=ae.width+ae.x),ae.height+ae.y>j.height&&(j.height=ae.height+ae.y)}}}return Rt.bbox=function(je,Fe,_e){var He,bn,wn=je.attrs,Nn=wn===void 0?{}:wn,Bn={x:Fe.x||0,y:Fe.y||0,width:_e.width||0,height:_e.height||0};switch(je.type){case"maker":case"circle":Nn.r&&(bn=2*Nn.r,He=2*Nn.r);break;case"text":Nn.text&&(bn=ks(Nn.text,Nn.fontSize||12)[0],He=16,Bn.y+=He,Bn.height=He,Bn.width=bn,je.attrs=Object(ot.a)({fontSize:12,fill:"#000"},Nn));break;default:Nn.width&&(bn=Nn.width),Nn.height&&(He=Nn.height)}return He>=0&&(Bn.height=He),bn>=0&&(Bn.width=bn),Nn.marginTop&&(Bn.y+=Nn.marginTop),Nn.marginLeft&&(Bn.x+=Nn.marginLeft),Bn}(Rt,l,j),Rt.attrs=Object(ot.a)(Object(ot.a)({},Rt.attrs),Rt.bbox),Rt}function na(Rt){var l={},u=function(W){var st=function(Xt){return function(ee){for(var ae=Xt.length,je=[],Fe=0,_e="";Fe<ae;)if(Xt[Fe]==="{"&&Xt[Fe+1]==="{")je.push(_e),_e="",Fe+=2;else if(Xt[Fe]==="}"&&Xt[Fe+1]==="}"){if(je.length){var He=je.pop();_e=Object(n.i)(ee,_e,He.endsWith("=")?'"{'+_e+'}"':_e),je.push(He+_e)}Fe+=2,_e=""}else _e+=Xt[Fe],Fe+=1;return je.push(_e),je.map(function(bn,wn){return je[wn-1]&&je[wn-1].endsWith("=")?'"{'+bn+'}"':bn}).join("")}}(typeof Rt=="function"?Rt(W):Rt)(W),Tt=document.createElement("div");Tt.innerHTML=st;var Gt=vu(function Xt(ee,ae){var je={},Fe=ee.getAttributeNames&&ee.getAttributeNames()||[],_e=ee.children&&Array.from(ee.children).map(function(wn){return Xt(wn,ae)}),He={},bn=ee.tagName?ee.tagName.toLowerCase():"group";return bn==="text"&&(je.text=ee.innerText),He.type=bn,bn==="img"&&(He.type="image"),Array.from(Fe).forEach(function(wn){var Nn=wn.split("-").reduce(function(sr,ur){return sr+ur.charAt(0).toUpperCase()+ur.slice(1)}),Bn=ee.getAttribute(wn);try{if(Nn==="style"||Nn==="attrs"){var Fn=eo(Bn);je=Object(ot.a)(Object(ot.a)({},je),Fn)}else He[Nn]=eo(Bn)}catch(sr){if(Nn==="style")throw sr;He[Nn]=Bn}}),He.attrs=je,ae&&ae.style&&He.name&&du(ae.style[He.name])==="object"&&(He.attrs=Object(ot.a)(Object(ot.a)({},He.attrs),ae.style[He.name])),ae&&ae.style&&He.keyshape&&(He.attrs=Object(ot.a)(Object(ot.a)({},He.attrs),ae.style)),_e.length&&(He.children=_e),He}(Tt.children[0],W));return Tt.remove(),Gt};return{draw:function(W,st){var Tt=u(W),Gt=st;return function Xt(ee){var ae=ee.attrs,je=ae===void 0?{}:ae,Fe=ee.bbox,_e=ee.type,He=ee.children,bn=Object(ot.c)(ee,["attrs","bbox","type","children"]);if(ee.type!=="group"){var wn=st.addShape(ee.type,Object(ot.a)({attrs:je,origin:{bbox:Fe,type:_e,children:He}},bn));ee.keyshape&&(Gt=wn)}ee.children&&ee.children.forEach(function(Nn){return Xt(Nn)})}(Tt),l[W.id]=[Tt],Gt},update:function(W,st){l[W.id]||(l[W.id]=[]);var Tt=st.getContainer(),Gt=Tt.get("children"),Xt=u(W),ee=function Fe(_e,He){var bn,wn,Nn,Bn,Fn=(_e||{}).type,sr=((He==null?void 0:He.attrs)||{}).key;if(sr&&_e&&(_e.attrs.key=sr),!_e&&He)return{action:"delete",val:He,type:Fn,key:sr};if(_e&&!He)return{action:"add",val:_e,type:Fn};if(!_e&&!He)return{action:"same",type:Fn};var ur=[];if(((bn=_e.children)===null||bn===void 0?void 0:bn.length)>0||((wn=He.children)===null||wn===void 0?void 0:wn.length)>0)for(var Or=Math.max((Nn=_e.children)===null||Nn===void 0?void 0:Nn.length,(Bn=He.children)===null||Bn===void 0?void 0:Bn.length),ei=He.children||[],Ti=_e.children||[],kr=0;kr<Or;kr+=1)ur.push(Fe(Ti[kr],ei[kr]));var yi=Object.keys(He.attrs),oo=Object.keys(_e.attrs);return He.type!==_e.type?{action:"restructure",nowTarget:_e,formerTarget:He,key:sr,children:ur}:yi.filter(function(so){return so!=="children"}).some(function(so){return _e.attrs[so]!==He.attrs[so]||!oo.includes(so)})?{action:"change",val:_e,children:ur,type:Fn,key:sr}:{action:"same",children:ur,type:Fn,key:sr}}(Xt,l[W.id].pop()),ae=function Fe(_e){var He;_e.type!=="group"&&Tt.addShape(_e.type,{attrs:_e.attrs}),((He=_e.children)===null||He===void 0?void 0:He.length)&&_e.children.map(function(bn){return Fe(bn)})},je=function Fe(_e){var He,bn=Gt.find(function(wn){return wn.attrs.key===_e.attrs.key});bn&&Tt.removeChild(bn),((He=_e.children)===null||He===void 0?void 0:He.length)&&_e.children.map(function(wn){return Fe(wn)})};(function Fe(_e){var He=_e.key;if(_e.type!=="group"){var bn=Gt.find(function(Nn){return Nn.attrs.key===He});switch(_e.action){case"change":if(bn){var wn=_e.val.keyshape?st.getOriginStyle():{};bn.attr(Object(ot.a)(Object(ot.a)({},wn),_e.val.attrs))}break;case"add":ae(_e.val);break;case"delete":je(_e.val);break;case"restructure":je(_e.formerTarget),ae(_e.nowTarget)}}_e.children&&_e.children.forEach(function(Nn){return Fe(Nn)})})(ee),l[W.id].push(Xt)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ra={};function ia(Rt){return ra[Rt]||(ra[Rt]=Object(n.I)(Rt)),ra[Rt]}var tc={defaultShapeType:"defaultType",className:null,getShape:function(l){return this[l]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(l,u,j){var W=this.getShape(l),st=W.draw(u,j);return W.afterDraw&&W.afterDraw(u,j,st),st},baseUpdate:function(l,u,j){var W=this.getShape(l);W.update&&W.update(u,j),W.afterUpdate&&W.afterUpdate(u,j)},setState:function(l,u,j,W){this.getShape(l).setState(u,j,W)},shouldUpdate:function(l){return!!this.getShape(l).update},getControlPoints:function(l,u){return this.getShape(l).getControlPoints(u)},getAnchorPoints:function(l,u){return this.getShape(l).getAnchorPoints(u)}},ya={options:{},draw:function(l,u){return this.drawShape(l,u)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(l){return l.controlPoints},getAnchorPoints:function(l){var u=this.options.anchorPoints;return l.anchorPoints||u}},_r=function(){function Rt(){}return Rt.registerFactory=function(l,u){var j=ia(l),W=tc,st=Object(ot.a)(Object(ot.a)({},W),u);return Rt[j]=st,st.className=j,st},Rt.getFactory=function(l){return Rt[ia(l)]},Rt.registerNode=function(l,u,j){var W,st=Rt.Node;if(typeof u=="string"||typeof u=="function"){var Tt=na(u);W=Object(ot.a)(Object(ot.a)({},st.getShape("single-node")),Tt)}else if(u.jsx)Tt=na(u.jsx),W=Object(ot.a)(Object(ot.a)(Object(ot.a)({},st.getShape("single-node")),Tt),u);else{st.getShape(j);var Gt=j?st.getShape(j):ya;W=Object(ot.a)(Object(ot.a)({},Gt),u)}return W.type=l,W.itemType="node",st[l]=W,W},Rt.registerEdge=function(l,u,j){var W=Rt.Edge,st=j?W.getShape(j):ya,Tt=Object(ot.a)(Object(ot.a)({},st),u);return Tt.type=l,Tt.itemType="edge",W[l]=Tt,Tt},Rt.registerCombo=function(l,u,j){var W=Rt.Combo,st=j?W.getShape(j):ya,Tt=Object(ot.a)(Object(ot.a)({},st),u);return Tt.type=l,Tt.itemType="combo",W[l]=Tt,Tt},Rt}(),yr=_r;_r.registerFactory("node",{defaultShapeType:"circle"}),_r.registerFactory("edge",{defaultShapeType:"line"}),_r.registerFactory("combo",{defaultShapeType:"circle"});var Xc=["startArrow","endArrow"],pu=function(){function Rt(l){this._cfg={},this.destroyed=!1;var u={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(u,this.getDefaultCfg(),l);var j=this.get("model"),W=j.id,st=this.get("type");W||(W=Gr(st),this.get("model").id=W),this.set("id",W);var Tt=l.group;Tt&&(Tt.set("item",this),Tt.set("id",W)),this.init(),this.draw();var Gt=j.shape||j.type||(st==="edge"?"line":"circle"),Xt=this.get("shapeFactory");if(Xt&&Xt[Gt]){var ee=Xt[Gt].options;if(ee&&ee.stateStyles){var ae=this.get("styles")||j.stateStyles;ae=Object(n.e)({},ee.stateStyles,ae),this.set("styles",ae)}}}return Rt.prototype.calculateBBox=function(){var l=this.get("keyShape"),u=this.get("group"),j=zo(l,u);return j.x=j.minX,j.y=j.minY,j.width=j.maxX-j.minX,j.height=j.maxY-j.minY,j.centerX=(j.minX+j.maxX)/2,j.centerY=(j.minY+j.maxY)/2,j},Rt.prototype.calculateCanvasBBox=function(){var l=this.get("keyShape"),u=this.get("group"),j=zo(l,u);return j.x=j.minX,j.y=j.minY,j.width=j.maxX-j.minX,j.height=j.maxY-j.minY,j.centerX=(j.minX+j.maxX)/2,j.centerY=(j.minY+j.maxY)/2,j},Rt.prototype.drawInner=function(){var l=this.get("shapeFactory"),u=this.get("group"),j=this.get("model");u.clear();var W=j.visible;if(W===void 0||W||this.changeVisibility(W),l){this.updatePosition(j);var st=this.getShapeCfg(j),Tt=st.type,Gt=l.draw(Tt,st,u);Gt&&(this.set("keyShape",Gt),Gt.set("isKeyShape",!0),Gt.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Tt),this.restoreStates(l,Tt)}},Rt.prototype.setOriginStyle=function(l){var u=this.get("group").get("children"),j=this.getKeyShape(),W=this,st=j.get("name");if(this.get("originStyle")){var Tt=this.getOriginStyle();st&&!Tt[st]&&(Tt[st]={});var Gt=this.getCurrentStatesStyle();Object(n.f)(u,function(ee){var ae=ee.get("name"),je=ee.attr();if(ae&&ae!==st){var Fe=Gt[ae];Tt[ae]||(Tt[ae]={}),Fe?Object.keys(je).forEach(function(bn){var wn=je[bn];wn!==Fe[bn]&&(Tt[ae][bn]=wn)}):Tt[ae]=Object(n.c)(je)}else{var _e=ee.attr(),He=Object(ot.a)(Object(ot.a)({},Gt),Gt[st]);Object.keys(_e).forEach(function(bn){var wn=_e[bn];Object(n.w)(wn)&&Xc.indexOf(ae)===-1||He[bn]!==wn&&(st?Tt[st][bn]=wn:Tt[bn]=wn)})}}),Tt.path&&delete Tt.path,Tt.matrix&&delete Tt.matrix,W.set("originStyle",Tt)}else{var Xt={};Object(n.f)(u,function(ee){var ae=ee.get("type"),je=ee.get("name");if(je&&je!==st)Xt[je]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je);else{var Fe=W.getShapeStyleByName();if(Fe.path&&delete Fe.path,Fe.matrix&&delete Fe.matrix,st)if(je)Xt[st]=Fe;else{var _e=Gr("shape");ee.set("name",_e),Xt[_e]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je)}else Object.assign(Xt,Fe)}}),W.set("originStyle",Xt)}},Rt.prototype.restoreStates=function(l,u){var j=this,W=j.get("states");Object(n.f)(W,function(st){l.setState(u,st,!0,j)})},Rt.prototype.init=function(){var l=yr.getFactory(this.get("type"));this.set("shapeFactory",l)},Rt.prototype.get=function(l){return this._cfg[l]},Rt.prototype.set=function(l,u){Object(n.w)(l)?this._cfg=Object(ot.a)(Object(ot.a)({},this._cfg),l):this._cfg[l]=u},Rt.prototype.getDefaultCfg=function(){return{}},Rt.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},Rt.prototype.beforeDraw=function(){},Rt.prototype.afterDraw=function(){},Rt.prototype.afterUpdate=function(){},Rt.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},Rt.prototype.getShapeStyleByName=function(l){var u,j=this.get("group");if(u=l?j.find(function(st){return st.get("name")===l}):this.getKeyShape()){var W={};return Object(n.f)(u.attr(),function(st,Tt){Tt!=="img"&&(W[Tt]=st)}),W}return{}},Rt.prototype.getShapeCfg=function(l){var u=this.get("styles");if(u){var j=l;return j.style=Object(ot.a)(Object(ot.a)({},u),l.style),j}return l},Rt.prototype.getStateStyle=function(l){var u=this.get("styles");return u&&u[l]},Rt.prototype.getOriginStyle=function(){return this.get("originStyle")},Rt.prototype.getCurrentStatesStyle=function(){var l=this,u={},j=l.getStates();return j&&j.length?(Object(n.f)(l.getStates(),function(W){u=Object.assign(u,l.getStateStyle(W))}),u):this.getOriginStyle()},Rt.prototype.setState=function(l,u){var j=this.get("states"),W=this.get("shapeFactory"),st=l,Tt=l;Object(n.x)(u)&&(st=l+":"+u,Tt=l+":");var Gt=j;if(Object(n.n)(u)){var Xt=j.indexOf(Tt);if(u){if(Xt>-1)return;j.push(st)}else Xt>-1&&j.splice(Xt,1)}else if(Object(n.x)(u)){var ee=j.filter(function(je){return je.includes(Tt)});ee.length>0&&this.clearStates(ee),(Gt=Gt.filter(function(je){return!je.includes(Tt)})).push(st),this.set("states",Gt)}if(W){var ae=this.get("model").type;W.setState(ae,l,u,this)}},Rt.prototype.clearStates=function(l){var u=this,j=u.getStates(),W=u.get("shapeFactory"),st=u.get("model").type;l||(l=j),Object(n.x)(l)&&(l=[l]);var Tt=j.filter(function(Gt){return l.indexOf(Gt)===-1});u.set("states",Tt),l.forEach(function(Gt){W.setState(st,Gt,!1,u)})},Rt.prototype.getContainer=function(){return this.get("group")},Rt.prototype.getKeyShape=function(){return this.get("keyShape")},Rt.prototype.getModel=function(){return this.get("model")},Rt.prototype.getType=function(){return this.get("type")},Rt.prototype.getID=function(){return this.get("id")},Rt.prototype.isItem=function(){return!0},Rt.prototype.getStates=function(){return this.get("states")},Rt.prototype.hasState=function(l){return this.getStates().indexOf(l)>=0},Rt.prototype.refresh=function(){var l=this.get("model");this.updatePosition(l),this.updateShape(),this.afterUpdate(),this.clearCache()},Rt.prototype.isOnlyMove=function(l){return!1},Rt.prototype.update=function(l,u){u===void 0&&(u=!1);var j=this.get("model"),W=j.visible,st=l.visible;W!==st&&st!==void 0&&this.changeVisibility(st);var Tt=j.x,Gt=j.y;l.x=isNaN(l.x)?j.x:l.x,l.y=isNaN(l.y)?j.y:l.y;var Xt=this.get("styles");if(l.stateStyles){var ee=l.stateStyles;Object(n.A)(Xt,ee),delete l.stateStyles}Object.assign(j,l),u?this.updatePosition(l):(Tt===l.x&&Gt===l.y||this.updatePosition(l),this.updateShape()),this.afterUpdate(),this.clearCache()},Rt.prototype.updateShape=function(){var l=this.get("shapeFactory"),u=this.get("model"),j=u.type;if(l.shouldUpdate(j)&&j===this.get("currentShape")){var W=this.getShapeCfg(u);l.baseUpdate(j,W,this)}else this.draw();this.setOriginStyle(u),this.restoreStates(l,j)},Rt.prototype.updatePosition=function(l){var u=this.get("model"),j=Object(n.s)(l.x)?u.x:l.x,W=Object(n.s)(l.y)?u.y:l.y,st=this.get("group");Object(n.s)(j)||Object(n.s)(W)||(st.resetMatrix(),he(st,{x:j,y:W}),u.x=j,u.y=W,this.clearCache())},Rt.prototype.getBBox=function(){var l=this.get("bboxCache");return l||(l=this.calculateBBox(),this.set("bboxCache",l)),l},Rt.prototype.getCanvasBBox=function(){var l=this.get("bboxCanvasCache");return l||(l=this.calculateCanvasBBox(),this.set("bboxCanvasCache",l)),l},Rt.prototype.toFront=function(){this.get("group").toFront()},Rt.prototype.toBack=function(){this.get("group").toBack()},Rt.prototype.show=function(){this.changeVisibility(!0)},Rt.prototype.hide=function(){this.changeVisibility(!1)},Rt.prototype.changeVisibility=function(l){var u=this.get("group");l?u.show():u.hide(),this.set("visible",l)},Rt.prototype.isVisible=function(){return this.get("visible")},Rt.prototype.enableCapture=function(l){var u=this.get("group");u&&u.set("capture",l)},Rt.prototype.destroy=function(){if(!this.destroyed){var l=this.get("animate"),u=this.get("group");l&&u.stopAnimate(),this.clearCache(),u.remove(),this._cfg=null,this.destroyed=!0}},Rt}(),ds={source:"start",target:"end"},ec=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Object(ot.b)(l,Rt),l.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},l.prototype.setEnd=function(u,j){var W=ds[u]+"Point",st=u+"Node",Tt=this.get(st);Tt&&!Tt.destroyed&&Tt.removeEdge(this),Object(n.w)(j)?(this.set(W,j),this.set(st,null)):(j.addEdge(this),this.set(st,j),this.set(W,null))},l.prototype.getLinkPoint=function(u,j,W){var st=ds[u]+"Point",Tt=u+"Node",Gt=this.get(st);if(!Gt){var Xt=this.get(Tt),ee=u+"Anchor",ae=this.getPrePoint(u,W),je=j[ee];Object(n.s)(je)||(Gt=Xt.getLinkPointByAnchor(je)),Gt=Gt||Xt.getLinkPoint(ae),Object(n.s)(Gt.index)||this.set(u+"AnchorIndex",Gt.index)}return Gt},l.prototype.getPrePoint=function(u,j){if(j&&j.length)return j[u==="source"?0:j.length-1];var W=u==="source"?"target":"source";return this.getEndPoint(W)},l.prototype.getEndPoint=function(u){var j=u+"Node",W=ds[u]+"Point",st=this.get(j);return st?st.get("model"):this.get(W)},l.prototype.getControlPointsByCenter=function(u){var j=this.getEndPoint("source"),W=this.getEndPoint("target"),st=this.get("shapeFactory"),Tt=u.type;return st.getControlPoints(Tt,{startPoint:j,endPoint:W})},l.prototype.getEndCenter=function(u){var j=u+"Node",W=ds[u]+"Point",st=this.get(j);if(st){var Tt=st.getBBox();return{x:Tt.centerX,y:Tt.centerY}}return this.get(W)},l.prototype.init=function(){Rt.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},l.prototype.getShapeCfg=function(u){var j=this.get("linkCenter"),W=Rt.prototype.getShapeCfg.call(this,u);if(j)W.startPoint=this.getEndCenter("source"),W.endPoint=this.getEndCenter("target");else{var st=W.controlPoints||this.getControlPointsByCenter(W);W.startPoint=this.getLinkPoint("source",u,st),W.endPoint=this.getLinkPoint("target",u,st)}return W.sourceNode=this.get("sourceNode"),W.targetNode=this.get("targetNode"),W},l.prototype.getModel=function(){var u=this.get("model"),j=this.get("sourceNode"),W=this.get("targetNode");return j?delete u.sourceNode:u.source=this.get("startPoint"),W?delete u.targetNode:u.target=this.get("endPoint"),Object(n.x)(u.source)||Object(n.w)(u.source)||(u.source=u.source.getID()),Object(n.x)(u.target)||Object(n.w)(u.target)||(u.target=u.target.getID()),u},l.prototype.setSource=function(u){this.setEnd("source",u),this.set("source",u)},l.prototype.setTarget=function(u){this.setEnd("target",u),this.set("target",u)},l.prototype.getSource=function(){return this.get("source")},l.prototype.getTarget=function(){return this.get("target")},l.prototype.updatePosition=function(){},l.prototype.update=function(u,j){j===void 0&&(j=!1);var W=this.get("model"),st=W.visible,Tt=u.visible;st!==Tt&&Tt!==void 0&&this.changeVisibility(Tt);var Gt=this.get("styles");if(u.stateStyles){var Xt=u.stateStyles;Object(n.A)(Gt,Xt),delete u.stateStyles}Object.assign(W,u),this.updateShape(),this.afterUpdate(),this.clearCache()},l.prototype.destroy=function(){var u=this.get("sourceNode"),j=this.get("targetNode");u&&!u.destroyed&&u.removeEdge(this),j&&!j.destroyed&&j.removeEdge(this),Rt.prototype.destroy.call(this)},l}(pu),Qo=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Object(ot.b)(l,Rt),l.prototype.getNearestPoint=function(u,j){for(var W=0,st=u[0],Tt=$t(u[0],j),Gt=0;Gt<u.length;Gt++){var Xt=u[Gt],ee=$t(Xt,j);ee<Tt&&(st=Xt,Tt=ee,W=Gt)}return st.anchorIndex=W,st},l.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},l.prototype.getEdges=function(){return this.get("edges")},l.prototype.getInEdges=function(){var u=this;return this.get("edges").filter(function(j){return j.get("target")===u})},l.prototype.getOutEdges=function(){var u=this;return this.get("edges").filter(function(j){return j.get("source")===u})},l.prototype.getNeighbors=function(u){var j=this,W=this.get("edges");return u==="target"?W.filter(function(st){return st.getSource()===j}).map(function(st){return st.getTarget()}):u==="source"?W.filter(function(st){return st.getTarget()===j}).map(function(st){return st.getSource()}):W.map(function(st){return st.getSource()===j?st.getTarget():st.getSource()})},l.prototype.getLinkPointByAnchor=function(u){return this.getAnchorPoints()[u]},l.prototype.getLinkPoint=function(u){var j,W,st=this.get("keyShape").get("type"),Tt=this.get("type"),Gt=this.getBBox();Tt==="combo"?(j=Gt.centerX||(Gt.maxX+Gt.minX)/2,W=Gt.centerY||(Gt.maxY+Gt.minY)/2):(j=Gt.centerX,W=Gt.centerY);var Xt,ee=this.getAnchorPoints();switch(st){case"circle":Xt=Gn({x:j,y:W,r:Gt.width/2},u);break;case"ellipse":Xt=Ze({x:j,y:W,rx:Gt.width/2,ry:Gt.height/2},u);break;default:Xt=zn(Gt,u)}var ae=Xt;return ee.length&&(ae||(ae=u),ae=this.getNearestPoint(ee,ae)),ae||(ae={x:j,y:W}),ae},l.prototype.getAnchorPoints=function(){var u=this.get("anchorPointsCache");if(!u){u=[];var j=this.get("shapeFactory"),W=this.getBBox(),st=this.get("model"),Tt=this.getShapeCfg(st),Gt=st.type,Xt=j.getAnchorPoints(Gt,Tt)||[];Object(n.f)(Xt,function(ee,ae){var je={x:W.minX+ee[0]*W.width,y:W.minY+ee[1]*W.height,anchorIndex:ae};u.push(je)}),this.set("anchorPointsCache",u)}return u},l.prototype.addEdge=function(u){this.get("edges").push(u)},l.prototype.lock=function(){this.set("locked",!0)},l.prototype.unlock=function(){this.set("locked",!1)},l.prototype.hasLocked=function(){return this.get("locked")},l.prototype.removeEdge=function(u){var j=this.getEdges(),W=j.indexOf(u);W>-1&&j.splice(W,1)},l.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},l.prototype.isOnlyMove=function(u){if(!u)return!1;var j=!Object(n.s)(u.x),W=!Object(n.s)(u.y),st=Object.keys(u);return st.length===1&&(j||W)||st.length===2&&j&&W},l}(pu),nc=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Object(ot.b)(l,Rt),l.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},l.prototype.getShapeCfg=function(u){var j=this.get("styles"),W=this.get("bbox");if(j&&W){var st=u,Tt={r:Math.hypot(W.height,W.width)/2||In.defaultCombo.size[0]/2,width:W.width||In.defaultCombo.size[0],height:W.height||In.defaultCombo.size[1]};st.style=Object(ot.a)(Object(ot.a)(Object(ot.a)({},j),u.style),Tt);var Gt=u.padding||In.defaultCombo.padding;return Object(n.t)(Gt)?(Tt.r+=Gt,Tt.width+=2*Gt,Tt.height+=2*Gt):(Tt.r+=Gt[0],Tt.width+=Gt[1]+Gt[3]||2*Gt[1],Tt.height+=Gt[0]+Gt[2]||2*Gt[0]),this.set("sizeCache",Tt),st}return u},l.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var u=this.get("keyShape"),j=this.get("group"),W=zo(u,j);W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2;var st=this.get("sizeCache"),Tt=this.get("bboxCache")||{},Gt=Tt.x,Xt=Tt.x;return st?(u.get("type")==="circle"?(W.width=2*st.r,W.height=2*st.r):(W.width=st.width,W.height=st.height),W.minX=W.centerX-W.width/2,W.minY=W.centerY-W.height/2,W.maxX=W.centerX+W.width/2,W.maxY=W.centerY+W.height/2):(W.width=W.maxX-W.minX,W.height=W.maxY-W.minY,W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2),W.x=W.minX,W.y=W.minY,W.x===Gt&&W.y===Xt||this.set("anchorPointsCache",null),W}},l.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},l.prototype.getNodes=function(){return this.get("nodes")},l.prototype.getCombos=function(){return this.get("combos")},l.prototype.addChild=function(u){switch(u.getType()){case"node":this.addNode(u);break;case"combo":this.addCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},l.prototype.addCombo=function(u){return this.get("combos").push(u),!0},l.prototype.addNode=function(u){return this.get("nodes").push(u),!0},l.prototype.removeChild=function(u){switch(u.getType()){case"node":this.removeNode(u);break;case"combo":this.removeCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},l.prototype.removeCombo=function(u){if(u){var j=this.getCombos(),W=j.indexOf(u);return W>-1&&(j.splice(W,1),!0)}},l.prototype.removeNode=function(u){if(u){var j=this.getNodes(),W=j.indexOf(u);return W>-1&&(j.splice(W,1),!0)}},l.prototype.isOnlyMove=function(u){return!1},l.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},l.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},l.prototype.destroy=function(){if(!this.destroyed){var u=this.get("animate"),j=this.get("group");u&&j.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),j.remove(),this._cfg=null,this.destroyed=!0}},l}(Qo),Vo=function(){function Rt(l){this.graph=l,this.destroyed=!1}return Rt.prototype.addItem=function(l,u){var j=this,W=this.graph,st=l==="vedge"?"edge":l,Tt=W.get(st+"Group")||W.get("group"),Gt=Object(n.I)(st),Xt=null,ee=W.get(st+Object(n.I)("stateStyles"))||{},ae=W.get("default"+Gt);u.stateStyles&&(ee=u.stateStyles),ae&&Object(n.f)(ae,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},Fn,u[sr]):Object(n.m)(Fn)?u[sr]=u[sr]||Object(n.c)(ae[sr]):u[sr]=u[sr]||ae[sr]});var je=W.get(st+"Mapper");if(je){var Fe=je(u);Fe.stateStyles&&(ee=Fe.stateStyles,delete Fe.stateStyles),Object(n.f)(Fe,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},u[sr],Fn):u[sr]=Fe[sr]||u[sr]})}if(W.emit("beforeadditem",{type:l,model:u}),l==="edge"||l==="vedge"){var _e=void 0,He=void 0;if(_e=u.source,He=u.target,_e&&Object(n.x)(_e)&&(_e=W.findById(_e)),He&&Object(n.x)(He)&&(He=W.findById(He)),!_e||!He)return void console.warn("The source or target node of edge "+u.id+" does not exist!");_e.getType&&_e.getType()==="combo"&&(u.isComboEdge=!0),He.getType&&He.getType()==="combo"&&(u.isComboEdge=!0),Xt=new ec({model:u,source:_e,target:He,styles:ee,linkCenter:W.get("linkCenter"),group:Tt.addGroup()})}else if(l==="node")Xt=new Qo({model:u,styles:ee,group:Tt.addGroup()});else if(l==="combo"){var bn=u.children,wn=Mi(bn,W);u.x=wn.x||u.x||100*Math.random(),u.y=wn.y||u.y||100*Math.random();var Nn=Tt.addGroup();Nn.setZIndex(u.depth);var Bn=(Xt=new nc({model:u,styles:ee,bbox:wn,group:Nn})).getModel();(bn||[]).forEach(function(Fn){var sr=W.findById(Fn.id);Xt.addChild(sr),Fn.depth=Bn.depth+2}),u.collapsed&&setTimeout(function(){W.collapseCombo(Xt),j.updateCombo(Xt,[])},250)}if(Xt)return W.get(l+"s").push(Xt),W.get("itemMap")[Xt.get("id")]=Xt,W.emit("afteradditem",{item:Xt,model:u}),Xt},Rt.prototype.updateItem=function(l,u){var j,W,st=this.graph;if(Object(n.x)(l)&&(l=st.findById(l)),l&&!l.destroyed){var Tt="";l.getType&&(Tt=l.getType());var Gt=st.get(Tt+"Mapper"),Xt=l.getModel(),ee=l.isOnlyMove(u);if(Gt){var ae=Gt(Object(n.e)({},Xt,u)),je=Object(n.e)({},Xt,ae,u);ae.stateStyles&&(l.set("styles",je.stateStyles),delete je.stateStyles),Object(n.f)(je,function(Bn,Fn){u[Fn]=Bn})}else Object(n.f)(u,function(Bn,Fn){Xt[Fn]&&Object(n.v)(Bn)&&!Object(n.m)(Bn)&&(u[Fn]=Object(ot.a)(Object(ot.a)({},Xt[Fn]),u[Fn]))});if(st.emit("beforeupdateitem",{item:l,cfg:u}),Tt==="edge"){if(u.source){var Fe=u.source;Object(n.x)(Fe)&&(Fe=st.findById(Fe)),l.setSource(Fe)}if(u.target){var _e=u.target;Object(n.x)(_e)&&(_e=st.findById(_e)),l.setTarget(_e)}l.update(u)}if(Tt==="node"||Tt==="combo"){l.update(u,ee);var He=l.getEdges(),bn=hu(u);if(bn&&Tt==="node")Object(n.f)(He,function(Bn){Bn.refresh()});else if(bn&&Tt==="combo"){var wn=l.get("shapeFactory"),Nn=Xt.type||"circle";(Xt.animate===void 0||u.animate===void 0?(W=(j=wn[Nn])===null||j===void 0?void 0:j.options)===null||W===void 0?void 0:W.animate:Xt.animate||u.animate)?setTimeout(function(){if(l&&!l.destroyed){var Bn=l.getKeyShape();Bn&&!Bn.destroyed&&Object(n.f)(He,function(Fn){Fn&&!Fn.destroyed&&Fn.refresh()})}},201):Object(n.f)(He,function(Bn){Bn.refresh()})}}st.emit("afterupdateitem",{item:l,cfg:u})}},Rt.prototype.updateCombo=function(l,u){var j,W,st=this.graph;if(Object(n.x)(l)&&(l=st.findById(l)),l&&!l.destroyed){var Tt=Mi(u,st);l.set("bbox",Tt),l.update({x:Tt.x,y:Tt.y});var Gt=l.getEdges()||[],Xt=Gt.length,ee=l.getModel(),ae=l.get("shapeFactory"),je=ee.type||"circle";if(ee.animate===void 0?(W=(j=ae[je])===null||j===void 0?void 0:j.options)===null||W===void 0?void 0:W.animate:ee.animate)setTimeout(function(){if(l&&!l.destroyed){var He=l.getKeyShape();if(He&&!He.destroyed)for(var bn=0;bn<Xt;bn++){var wn=Gt[bn];wn&&!wn.destroyed&&wn.refresh()}}},201);else for(var Fe=0;Fe<Xt;Fe++){var _e=Gt[Fe];_e&&!_e.destroyed&&_e.refresh()}}},Rt.prototype.collapseCombo=function(l){var u=this.graph;Object(n.x)(l)&&(l=u.findById(l));var j=l.getChildren();j.nodes.forEach(function(W){u.hideItem(W)}),j.combos.forEach(function(W){u.hideItem(W)})},Rt.prototype.expandCombo=function(l){var u=this.graph;Object(n.x)(l)&&(l=u.findById(l));var j=l.getChildren();j.nodes.forEach(function(W){u.showItem(W)}),j.combos.forEach(function(W){W.getModel().collapsed?W.show():u.showItem(W)})},Rt.prototype.removeItem=function(l){var u=this,j=this.graph;if(Object(n.x)(l)&&(l=j.findById(l)),l&&!l.destroyed){var W=Object(n.c)(l.getModel());j.emit("beforeremoveitem",{item:W});var st="";l.getType&&(st=l.getType());var Tt=j.get(st+"s"),Gt=Tt.indexOf(l);if(Gt>-1&&Tt.splice(Gt,1),st==="edge"){var Xt=j.get("v"+st+"s"),ee=Xt.indexOf(l);ee>-1&&Xt.splice(ee,1)}var ae=l.get("id");delete j.get("itemMap")[ae];var je=j.get("comboTrees"),Fe=l.get("id");if(st==="node"){var _e=l.getModel().comboId;if(je){var He=je,bn=!1;je.forEach(function(ur){bn||di(ur,function(Or){if(Or.id===Fe&&He){var ei=He.indexOf(Or);return He.splice(ei,1),bn=!0,!1}return He=Or.children,!0})})}for(var wn=(sr=l.getEdges()).length-1;wn>=0;wn--)j.removeItem(sr[wn],!1);_e&&j.updateCombo(_e)}else if(st==="combo"){var Nn,Bn=l.getModel().parentId,Fn=!1;(je||[]).forEach(function(ur){Fn||di(ur,function(Or){return Or.id!==Fe||(Nn=Or,Fn=!0,!1)})}),Nn.removed=!0,Nn&&Nn.children&&Nn.children.forEach(function(ur){u.removeItem(ur.id)});var sr;for(wn=(sr=l.getEdges()).length;wn>=0;wn--)j.removeItem(sr[wn],!1);Bn&&j.updateCombo(Bn)}l.destroy(),j.emit("afterremoveitem",{item:W})}},Rt.prototype.setItemState=function(l,u,j){var W=this.graph,st=u;Object(n.x)(j)&&(st=u+":"+j),l.hasState(st)===j&&j||Object(n.x)(j)&&l.hasState(st)||(W.emit("beforeitemstatechange",{item:l,state:st,enabled:j}),l.setState(u,j),W.autoPaint(),W.emit("afteritemstatechange",{item:l,state:st,enabled:j}))},Rt.prototype.priorityState=function(l,u){var j=this.graph,W=l;Object(n.x)(l)&&(W=j.findById(l)),this.setItemState(W,u,!1),this.setItemState(W,u,!0)},Rt.prototype.clearItemStates=function(l,u){var j=this.graph;Object(n.x)(l)&&(l=j.findById(l)),j.emit("beforeitemstatesclear",{item:l,states:u}),l.clearStates(u),j.emit("afteritemstatesclear",{item:l,states:u})},Rt.prototype.refreshItem=function(l){var u=this.graph;Object(n.x)(l)&&(l=u.findById(l)),u.emit("beforeitemrefresh",{item:l}),l.refresh(),u.emit("afteritemrefresh",{item:l})},Rt.prototype.addCombos=function(l,u){var j=this,W=this.graph;(l||[]).forEach(function(Tt){ea(Tt,function(Gt){var Xt;return u.forEach(function(ee){ee.id===Gt.id&&(ee.children=Gt.children,ee.depth=Gt.depth,Xt=ee)}),Xt&&j.addItem("combo",Xt),!0})});var st=W.get("comboGroup");st&&st.sort()},Rt.prototype.changeItemVisibility=function(l,u){var j=this,W=this.graph;if(Object(n.x)(l)&&(l=W.findById(l)),l){if(W.emit("beforeitemvisibilitychange",{item:l,visible:u}),l.changeVisibility(u),l.getType&&l.getType()==="node"){var st=l.getEdges();Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&j.changeItemVisibility(ae,u)})}else if(l.getType&&l.getType()==="combo"){var Tt=W.get("comboTrees"),Gt=l.get("id"),Xt=[],ee=!1;(Tt||[]).forEach(function(ae){ee||ae.children&&ae.children.length!==0&&di(ae,function(je){return je.id!==Gt||(Xt=je.children,ee=!0,!1)})}),Xt&&Xt.forEach(function(ae){var je=W.findById(ae.id);j.changeItemVisibility(je,u)}),st=l.getEdges(),Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&j.changeItemVisibility(ae,u)})}return W.emit("afteritemvisibilitychange",{item:l,visible:u}),l}console.warn("The item to be shown or hidden does not exist!")},Rt.prototype.destroy=function(){this.graph=null,this.destroyed=!0},Rt}(),Aa=null,Co=function(){function Rt(l){this.graph=l,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return Rt.checkCache=function(l,u,j){if(j[u]){var W=j[u].indexOf(l);W>=0&&j[u].splice(W,1)}},Rt.cacheState=function(l,u,j){j[u]||(j[u]=[]),j[u].push(l)},Rt.prototype.updateState=function(l,u,j){var W=this,st=Rt.checkCache,Tt=Rt.cacheState;if(!l.destroyed){var Gt=this.cachedStates,Xt=Gt.enabled,ee=Gt.disabled;j?(st(l,u,ee),Tt(l,u,Xt)):(st(l,u,Xt),Tt(l,u,ee)),Aa&&clearTimeout(Aa),Aa=setTimeout(function(){Aa=null,W.updateGraphStates()},16)}},Rt.prototype.updateStates=function(l,u,j){var W=this;Object(n.x)(u)?this.updateState(l,u,j):u.forEach(function(st){W.updateState(l,st,j)})},Rt.prototype.updateGraphStates=function(){var l=this.graph.get("states"),u=this.cachedStates;Object(n.f)(u.disabled,function(j,W){l[W]&&(l[W]=l[W].filter(function(st){return j.indexOf(st)<0&&!j.destroyed}))}),Object(n.f)(u.enabled,function(j,W){if(l[W]){var st={};l[W].forEach(function(Tt){Tt.destroyed||(st[Tt.get("id")]=!0)}),j.forEach(function(Tt){if(!Tt.destroyed){var Gt=Tt.get("id");st[Gt]||(st[Gt]=!0,l[W].push(Tt))}})}else l[W]=j}),this.graph.emit("graphstatechange",{states:l}),this.cachedStates={enabled:{},disabled:{}}},Rt.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Aa&&clearTimeout(Aa),Aa=null,this.destroyed=!0},Rt}(),vs=function(l,u){return l&&u?l.replace(/\\?\{([^{}]+)\}/g,function(j,W){if(j.charAt(0)==="\\")return j.slice(1);var st=u[W];return st===0&&(st="0"),st||""}):l},Ns=function(l){var u=[];if(l.length<2)throw new Error("point length must largn than 2, now it's "+l.length);for(var j=0,W=l;j<W.length;j++){var st=W[j],Tt=st.x,Gt=st.y;u.push(Tt),u.push(Gt)}var Xt=Object(G.a)(u);return Xt.unshift(["M",l[0].x,l[0].y]),Xt},ts=function(l,u,j,W){j===void 0&&(j=0),W===void 0&&(W=0);var st={x:(1-j)*l.x+j*u.x,y:(1-j)*l.y+j*u.y},Tt=[0,0];Yt.c.normalize(Tt,[u.x-l.x,u.y-l.y]),Tt&&(Tt[0]||Tt[1])||(Tt=[0,0]);var Gt=[-Tt[1]*W,Tt[0]*W];return st.x+=Gt[0],st.y+=Gt[1],st},Ls=function(l,u){var j=l.length;if(!j)return"";for(var W="",st=0;st<j;st++){var Tt=l[st];W+=vs(st===0?"M{x} {y}":"L{x} {y}",Tt)}return u&&(W+="Z"),W},Ho=function(l){var u=[];return l.forEach(function(j){if(j[0]!=="A")for(var W=1;W<j.length;W+=2)u.push([j[W],j[W+1]]);else{var st=j.length;u.push([j[st-2],j[st-1]])}}),u},es=function(l){if(l.length<2)throw new Error("point length must largn than 2, now it's "+l.length);var u=l[0],j=l[1],W=l[l.length-1],st=l[l.length-2];l.unshift(W),l.unshift(st),l.push(u),l.push(j);for(var Tt=[],Gt=1;Gt<l.length-2;Gt+=1){var Xt=l[Gt-1].x,ee=l[Gt-1].y,ae=l[Gt].x,je=l[Gt].y,Fe=l[Gt+1].x,_e=l[Gt+1].y,He=ae+(Fe-Xt)/6,bn=je+(_e-ee)/6,wn=Fe-((Gt!==l.length-2?l[Gt+2].x:Fe)-ae)/6,Nn=_e-((Gt!==l.length-2?l[Gt+2].y:_e)-je)/6;Tt.push(["C",He,bn,wn,Nn,Fe,_e])}return Tt.unshift(["M",W.x,W.y]),Tt},Bs=function(l,u){return Yt.c.scale([0,0],Yt.c.normalize([0,0],l),u)},gu=function(l,u){var j=[l[1]-u[1],u[0]-l[0]],W=Math.sqrt(j[0]*j[0]+j[1]*j[1]);if(W===0)throw new Error("p0 should not be equal to p1");return[j[0]/W,j[1]/W]},Do=function(l,u){return[u[0]-l[0],u[1]-l[1]]};function ps(Rt,l){if(!Rt||Rt.length<1)return"";if(Rt.length===1)return function(Xt){var ee=[Xt[0][0],Xt[0][1]-l],ae=[Xt[0][0],Xt[0][1]+l];return"M "+ee+" A "+l+","+l+",0,0,0,"+ae+" A "+l+","+l+",0,0,0,"+ee}(Rt);if(Rt.length===2)return function(Xt){var ee=Yt.c.scale([0,0],gu(Xt[0],Xt[1]),l),ae=Yt.c.scale([0,0],ee,-1),je=Yt.c.add([0,0],Xt[0],ee),Fe=Yt.c.add([0,0],Xt[1],ee),_e=Yt.c.add([0,0],Xt[1],ae),He=Yt.c.add([0,0],Xt[0],ae);return"M "+je+" L "+Fe+" A "+[l,l,"0,0,0",_e].join(",")+" L "+He+" A "+[l,l,"0,0,0",je].join(",")}(Rt);for(var u=new Array(Rt.length),j=0;j<u.length;++j){var W=j===0?Rt[Rt.length-1]:Rt[j-1],st=Rt[j],Tt=Yt.c.scale([0,0],gu(W,st),l);u[j]=[Yt.c.add([0,0],W,Tt),Yt.c.add([0,0],st,Tt)]}var Gt="A "+[l,l,"0,0,0,"].join(",");return(u=u.map(function(Xt,ee){var ae="";return ee===0&&(ae="M "+u[u.length-1][1]+" "),ae+=Gt+Xt[0]+" L "+Xt[1]})).join(" ")}function yu(Rt,l){var u,j,W,st=Rt.length;if(!Rt||st<1)return"";if(st===1)return j=[(u=Rt)[0][0],u[0][1]-l],W=[u[0][0],u[0][1]+l],"M "+j+" A "+[l,l,"0,0,0",W].join(",")+" A "+[l,l,"0,0,0",j].join(",");if(st===2)return function(ae){var je=Do(ae[0],ae[1]),Fe=Bs(je,l),_e=Yt.c.add([0,0],ae[0],Yt.c.scale([0,0],Fe,-1)),He=Yt.c.add([0,0],ae[1],Fe),bn=1.2*l,wn=Bs(Yt.c.normalize([0,0],je),bn),Nn=Yt.c.scale([0,0],wn,-1),Bn=Yt.c.add([0,0],_e,Nn),Fn=Yt.c.add([0,0],He,Nn),sr=Yt.c.add([0,0],_e,wn);return"M "+_e+" C "+[Bn,Fn,He].join(",")+" S "+[sr,_e].join(",")+" Z"}(Rt);for(var Tt=Rt.map(function(ae,je){var Fe=Rt[(je+1)%st];return{p:ae,v:Yt.c.normalize([0,0],Do(ae,Fe))}}),Gt=0;Gt<Tt.length;++Gt){var Xt=Gt>0?Gt-1:st-1,ee=Yt.c.normalize([0,0],Yt.c.add([0,0],Tt[Xt].v,Yt.c.scale([0,0],Tt[Gt].v,-1)));Tt[Gt].p=Yt.c.add([0,0],Tt[Gt].p,Yt.c.scale([0,0],ee,l))}return Tt.map(function(ae){var je=ae.p;return{x:je[0],y:je[1]}})}var Fs=function(l,u,j){return(l.y-j.y)*(u.x-j.x)-(l.x-j.x)*(u.y-j.y)},mr=function(l){var u=l.map(function(Tt){return{x:Tt.getModel().x,y:Tt.getModel().y}});if(u.sort(function(Tt,Gt){return Tt.x===Gt.x?Tt.y-Gt.y:Tt.x-Gt.x}),u.length===1)return u;for(var j=[],W=0;W<u.length;W++){for(;j.length>=2&&Fs(j[j.length-2],j[j.length-1],u[W])<=0;)j.pop();j.push(u[W])}var st=[];for(W=u.length-1;W>=0;W--){for(;st.length>=2&&Fs(st[st.length-2],st[st.length-1],u[W])<=0;)st.pop();st.push(u[W])}return st.pop(),j.pop(),j.concat(st)},Gs={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Eo(Rt,l,u){var j=!1,W=function(Xt,ee){return l.cells[Xt+ee*l.width]},st=function(Xt,ee){var ae=0;return W(Xt-1,ee-1)>=u&&(ae+=1),W(Xt,ee-1)>u&&(ae+=2),W(Xt-1,ee)>u&&(ae+=4),W(Xt,ee)>u&&(ae+=8),ae},Tt=function(Xt,ee){for(var ae,je,Fe=Xt,_e=ee,He=0;He<l.width*l.height;He++){if(ae=Fe,je=_e,Rt.findIndex(function(wn){return wn.x===Fe&&wn.y===_e})>-1){if(Rt[0].x===Fe&&Rt[0].y===_e)return!0}else Rt.push({x:Fe,y:_e});var bn=st(Fe,_e);switch(bn){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Fe++;break;case 12:case 14:case 4:Fe--;break;case 6:ae===0&&(je===-1?Fe-=1:Fe+=1);break;case 1:case 13:case 5:_e--;break;case 9:ae===1&&(je===0?_e-=1:_e+=1);break;case 10:case 8:case 11:_e++;break;default:return console.warn("Marching squares invalid state: "+bn),!0}}};this.march=function(){for(var Gt=0;Gt<l.width&&!j;Gt+=1)for(var Xt=0;Xt<l.height&&!j;Xt+=1)W(Gt,Xt)>u&&st(Gt,Xt)!==15&&(j=Tt(Gt,Xt));return j}}var ma=function(l,u){var j=Number.POSITIVE_INFINITY,W=null;return l.forEach(function(st){var Tt=Pe(st,u);Tt>=0&&Tt<j&&(W=st,j=Tt)}),W};function mu(Rt,l,u,j,W){var st=function(Tt,Gt,Xt){var ee=null,ae=Number.POSITIVE_INFINITY;return Gt.forEach(function(je){var Fe={x:Tt.getModel().x,y:Tt.getModel().y},_e={x:je.getModel().x,y:je.getModel().y},He=Le(Fe,_e),bn=new fn(Fe.x,Fe.y,_e.x,_e.y),wn=Xt.reduce(function(Nn,Bn){return Pe(Bn,bn)>0?Nn+1:Nn},0);He*Math.pow(wn+1,2)<ae&&(ee=je,ae=He*Math.pow(wn+1,2))}),ee}(Rt,u,l);return st===null?[]:function(Tt){for(var Gt=[];Tt.length>0;){var Xt=Tt.pop();if(Tt.length===0){Gt.push(Xt);break}var ee=Tt.pop(),ae=new fn(Xt.x1,Xt.y1,ee.x2,ee.y2);ma(l,ae)?(Gt.push(Xt),Tt.push(ee)):Tt.push(ae)}return Gt}(function(Tt,Gt,Xt,ee){var ae=[],je=[];je.push(Tt);for(var Fe=!0,_e=0,He=function(Bn,Fn){var sr=!1;return Fn.forEach(function(ur){sr||(en(Bn,{x:ur.x1,y:ur.y1})||en(Bn,{x:ur.x2,y:ur.y2}))&&(sr=!0)}),sr},bn=function(Bn,Fn){for(var sr=0,ur=Fn;sr<ur.length;sr++){var Or=ur[sr].getBBox(),ei=[[Or.x,Or.y],[Or.x+Or.width,Or.y],[Or.x,Or.y+Or.height],[Or.x+Or.width,Or.y+Or.height]];if(tn(ei,Bn.x,Bn.y))return!0}return!1};Fe&&_e<Xt;){Fe=!1;for(var wn=function(){var Bn=je.pop(),Fn=ma(Gt,Bn);if(Fn){var sr=Sn(Fn,Bn),ur=sr[0];if(sr[1]===2){var Or=function(Ti){for(var kr=ee,yi=fe(Fn,kr,ur,Ti),oo=He(yi,je)||He(yi,ae),so=bn(yi,Gt);!oo&&so&&kr>=1;)yi=fe(Fn,kr/=1.5,ur,Ti),oo=He(yi,je)||He(yi,ae),so=bn(yi,Gt);!yi||oo||Ti&&so||(je.push(new fn(Bn.x1,Bn.y1,yi.x,yi.y)),je.push(new fn(yi.x,yi.y,Bn.x2,Bn.y2)),Fe=!0)};Or(!0),Fe||Or(!1)}}Fe||ae.push(Bn),_e+=1};!Fe&&je.length;)wn()}for(;je.length;)ae.push(je.pop());return ae}(new fn(Rt.getModel().x,Rt.getModel().y,st.getModel().x,st.getModel().y),l,j,W))}var bu=function(l,u,j){var W=Object.assign(Gs,j),st=le(l.map(function(Or){return{x:Or.getModel().x,y:Or.getModel().y}}));l=l.sort(function(Or,ei){return Le({x:Or.getModel().x,y:Or.getModel().y},st)-Le({x:ei.getModel().x,y:ei.getModel().y},st)});var Tt=[],Gt=[];l.forEach(function(Or){mu(Or,u,Tt,W.maxRoutingIterations,W.morphBuffer).forEach(function(ei){Gt.push(ei)}),Tt.push(Or)});for(var Xt,ee,ae,je,Fe,_e=function(Or,ei,Ti){var kr={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},yi=[];Or.forEach(function(lo){yi.push(lo.getBBox())}),ei.forEach(function(lo){yi.push(lo.getBBox())});for(var oo=0,so=yi;oo<so.length;oo++){var co=so[oo];kr.minX=(co.minX<kr.minX?co.minX:kr.minX)-Ti,kr.minY=(co.minY<kr.minY?co.minY:kr.minY)-Ti,kr.maxX=(co.maxX>kr.maxX?co.maxX:kr.maxX)+Ti,kr.maxY=(co.maxY>kr.maxY?co.maxY:kr.maxY)+Ti}return kr.width=kr.maxX-kr.minX,kr.height=kr.maxY-kr.minY,kr.x=kr.minX,kr.y=kr.minY,kr}(l,Gt,W.nodeR0),He=(Xt=_e.width,ee=_e.height,ae=W.pixelGroupSize,je=Math.ceil(Xt/ae),Fe=Math.ceil(ee/ae),{cells:new Float32Array(Math.max(0,je*Fe)).fill(0),width:je,height:Fe}),bn=[],wn=[],Nn=0;Nn<W.maxMarchingIterations;Nn++)if(Jn(l,u,Gt,_e,He,W),wn=[],new Eo(bn=[],He,W.threshold).march()){var Bn=bn.map(function(Or){return{x:Math.round(Or.x*W.pixelGroupSize+_e.minX),y:Math.round(Or.y*W.pixelGroupSize+_e.minY)}});if(Bn){var Fn=Bn.length;if(W.skip>1)for(Fn=Math.floor(Bn.length/W.skip);Fn<3&&W.skip>1;)W.skip-=1,Fn=Math.floor(Bn.length/W.skip);for(var sr=0,ur=0;ur<Fn;ur+=1,sr+=W.skip)wn.push({x:Bn[sr].x,y:Bn[sr].y})}if(wn&&function(){for(var Or=0,ei=l;Or<ei.length;Or++){var Ti=ei[Or],kr=wn.map(function(yi){return[yi.x,yi.y]});if(!tn(kr,Ti.getBBox().centerX,Ti.getBBox().centerY))return!1}return!0}())return wn;if(W.threshold*=.9,Nn<=.5*W.maxMarchingIterations)W.memberInfluenceFactor*=1.2,W.edgeInfluenceFactor*=1.2;else{if(!(W.nonMemberInfluenceFactor!==0&&u.length>0))break;W.nonMemberInfluenceFactor*=.8}}return wn};function Jn(Rt,l,u,j,W,st){function Tt(Fe,_e){var He=Math.floor((Fe-_e)/st.pixelGroupSize);return He<0?0:He}function Gt(Fe,_e){return Fe*st.pixelGroupSize+_e}var Xt=(st.nodeR0-st.nodeR1)*(st.nodeR0-st.nodeR1),ee=(st.edgeR0-st.edgeR1)*(st.edgeR0-st.edgeR1),ae=function(_e,He){return[Math.min(Tt(_e.minX,He+j.minX),W.width),Math.min(Tt(_e.minY,He+j.minY),W.height),Math.min(Tt(_e.maxX,-He+j.minX),W.width),Math.min(Tt(_e.maxY,-He+j.minY),W.height)]},je=function(_e,He){for(var bn=_e.getBBox(),wn=ae(bn,st.nodeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(He<0&&W[Or+ur*W.width]<=0)){var ei=Gt(Or,j.minX),Ti=Gt(ur,j.minY),kr=sn({x:ei,y:Ti},{x:bn.minX,y:bn.minY,width:bn.width,height:bn.height});if(kr<Math.pow(st.nodeR1,2)){var yi=Math.sqrt(kr)-st.nodeR1;W.cells[Or+ur*W.width]+=He*yi*yi}}};st.nodeInfluenceFactor&&Rt.forEach(function(Fe){je(Fe,st.nodeInfluenceFactor/Xt)}),st.edgeInfluenceFactor&&u.forEach(function(Fe){(function(_e,He){for(var bn=_e.getBBox(),wn=ae(bn,st.edgeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(He<0&&W.cells[Or+ur*W.width]<=0)){var ei=Gt(Or,j.minX),Ti=Gt(ur,j.minY),kr=Be({x:ei,y:Ti},_e);if(kr<Math.pow(st.edgeR1,2)){var yi=Math.sqrt(kr)-st.edgeR1;W.cells[Or+ur*W.width]+=He*yi*yi}}})(Fe,st.edgeInfluenceFactor/ee)}),st.negativeNodeInfluenceFactor&&l.forEach(function(Fe){je(Fe,st.negativeNodeInfluenceFactor/Xt)})}function fe(Rt,l,u,j){var W=Rt.getBBox(),st=u[0],Tt=u[1],Gt=u[2],Xt=u[3],ee={topLeft:{x:W.minX-l,y:W.minY-l},topRight:{x:W.maxX+l,y:W.minY-l},bottomLeft:{x:W.minX-l,y:W.maxY+l},bottomRight:{x:W.maxX+l,y:W.maxY+l}},ae=W.height*W.width;function je(Fe,_e){return W.width*(.5*(Fe.y-W.minY+(_e.y-W.minY)))}if(Tt)return st?j?ee.topLeft:ee.bottomRight:Gt?j?ee.bottomLeft:ee.topRight:je(Tt,Xt)<.5*ae?Tt.y>Xt.y?j?ee.topLeft:ee.bottomRight:j?ee.topRight:ee.bottomLeft:Tt.y<Xt.y?j?ee.bottomLeft:ee.topRight:j?ee.bottomRight:ee.topLeft;if(Xt){if(st)return j?ee.topRight:ee.bottomLeft;if(Gt)return j?ee.bottomRight:ee.topLeft}return je(st,Gt)<.5*ae?st.x>Gt.x?j?ee.topLeft:ee.bottomRight:j?ee.bottomLeft:ee.topRight:st.x<Gt.x?j?ee.topRight:ee.bottomLeft:j?ee.bottomRight:ee.topLeft}var Ta=function(){function Rt(l,u){this.cfg=Object(n.e)(this.getDefaultCfg(),u),this.graph=l,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(j){return Object(n.x)(j)?l.findById(j):j}),this.nonMembers=this.cfg.nonMembers.map(function(j){return Object(n.x)(j)?l.findById(j):j}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return Rt.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},Rt.prototype.setPadding=function(){var l=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+l:10+l,this.cfg.bubbleCfg={nodeR0:this.padding-l,nodeR1:this.padding-l,morphBuffer:this.padding-l}},Rt.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},Rt.prototype.calcPath=function(l,u){var j,W,st;switch(this.type){case"round-convex":st=ps((j=mr(l)).map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=Object(G.b)(st);break;case"smooth-convex":(j=mr(l)).length===2?(st=ps(j.map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=Object(G.b)(st)):j.length>2&&(st=yu(j.map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=es(st));break;case"bubble":W=(j=bu(l,u,this.cfg.bubbleCfg)).length>=2&&es(j)}return W},Rt.prototype.render=function(){this.group.addShape("path",{attrs:Object(ot.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},Rt.prototype.addMember=function(l){if(l){Object(n.x)(l)&&(l=this.graph.findById(l)),this.members.push(l);var u=this.nonMembers.indexOf(l);return u>-1&&this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},Rt.prototype.addNonMember=function(l){if(l){Object(n.x)(l)&&(l=this.graph.findById(l)),this.nonMembers.push(l);var u=this.members.indexOf(l);return u>-1&&this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},Rt.prototype.removeMember=function(l){if(l){Object(n.x)(l)&&(l=this.graph.findById(l));var u=this.members.indexOf(l);return u>-1&&(this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},Rt.prototype.removeNonMember=function(l){if(l){Object(n.x)(l)&&(l=this.graph.findById(l));var u=this.nonMembers.indexOf(l);return u>-1&&(this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},Rt.prototype.updateData=function(l,u){var j=this;this.group.findById(this.id).remove(),l&&(this.members=l.map(function(W){return Object(n.x)(W)?j.graph.findById(W):W})),u&&(this.nonMembers=u.map(function(W){return Object(n.x)(W)?j.graph.findById(W):W})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Rt.prototype.updateStyle=function(l){this.group.findById(this.id).attr(Object(ot.a)({},l))},Rt.prototype.updateCfg=function(l){var u=this;this.cfg=Object(n.e)(this.cfg,l),this.id=this.cfg.id,this.group=this.cfg.group,l.members&&(this.members=this.cfg.members.map(function(j){return Object(n.x)(j)?u.graph.findById(j):j})),l.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(j){return Object(n.x)(j)?u.graph.findById(j):j})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Rt.prototype.contain=function(l){var u,j,W=this,st=(u=Object(n.x)(l)?this.graph.findById(l):l).getKeyShape();if(u.get("type")==="path")j=Ho(st.attr("path"));else{var Tt=st.getCanvasBBox();j=[[Tt.minX,Tt.minY],[Tt.maxX,Tt.minY],[Tt.maxX,Tt.maxY],[Tt.minX,Tt.maxY]]}return j=j.map(function(Gt){var Xt=W.graph.getPointByCanvas(Gt[0],Gt[1]);return[Xt.x,Xt.y]}),cn(j,Ho(this.path))},Rt.prototype.destroy=function(){this.group.remove(),this.cfg=null},Rt}(),_s=Yt.a.transform;(function(Rt){function l(u){var j=Rt.call(this)||this;return j.cfg=Object(n.e)(j.getDefaultCfg(),u),j.init(),j.animating=!1,j.destroyed=!1,j.cfg.enabledStack&&(j.undoStack=new Se.Stack(j.cfg.maxStep),j.redoStack=new Se.Stack(j.cfg.maxStep)),j}Object(ot.b)(l,Rt),l.prototype.init=function(){this.initCanvas();var u=new Go(this),j=new lr(this),W=new Vo(this),st=new Co(this);this.set({viewController:u,modeController:j,itemController:W,stateController:st}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},l.prototype.initGroups=function(){var u=this.get("canvas"),j=this.get("canvas").get("el").id,W=u.addGroup({id:j+"-root",className:In.rootContainerClassName});if(this.get("groupByTypes")){var st=W.addGroup({id:j+"-edge",className:In.edgeContainerClassName}),Tt=W.addGroup({id:j+"-node",className:In.nodeContainerClassName}),Gt=W.addGroup({id:j+"-combo",className:In.comboContainerClassName});Gt.toBack(),this.set({nodeGroup:Tt,edgeGroup:st,comboGroup:Gt})}var Xt=W.addGroup({id:j+"-delegate",className:In.delegateContainerClassName});this.set({delegateGroup:Xt}),this.set("group",W)},l.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},l.prototype.set=function(u,j){return Object(n.w)(u)?this.cfg=Object(ot.a)(Object(ot.a)({},this.cfg),u):this.cfg[u]=j,this},l.prototype.get=function(u){return this.cfg[u]},l.prototype.getGroup=function(){return this.get("group")},l.prototype.getContainer=function(){return this.get("container")},l.prototype.getMinZoom=function(){return this.get("minZoom")},l.prototype.setMinZoom=function(u){return this.set("minZoom",u)},l.prototype.getMaxZoom=function(){return this.get("maxZoom")},l.prototype.setMaxZoom=function(u){return this.set("maxZoom",u)},l.prototype.getWidth=function(){return this.get("width")},l.prototype.getHeight=function(){return this.get("height")},l.prototype.clearItemStates=function(u,j){Object(n.x)(u)&&(u=this.findById(u));var W=this.get("itemController");j||(j=u.get("states")),W.clearItemStates(u,j),this.get("stateController").updateStates(u,j,!1)},l.prototype.node=function(u){typeof u=="function"&&this.set("nodeMapper",u)},l.prototype.edge=function(u){typeof u=="function"&&this.set("edgeMapper",u)},l.prototype.combo=function(u){typeof u=="function"&&this.set("comboMapper",u)},l.prototype.findById=function(u){return this.get("itemMap")[u]},l.prototype.find=function(u,j){var W,st=this.get(u+"s");return Object(n.f)(st,function(Tt,Gt){if(j(Tt,Gt))return W=Tt}),W},l.prototype.findAll=function(u,j){var W=[];return Object(n.f)(this.get(u+"s"),function(st,Tt){j(st,Tt)&&W.push(st)}),W},l.prototype.findAllByState=function(u,j){return this.findAll(u,function(W){return W.hasState(j)})},l.prototype.translate=function(u,j){var W=this.get("group"),st=Object(n.c)(W.getMatrix());st||(st=[1,0,0,0,1,0,0,0,1]),st=_s(st,[["t",u,j]]),W.setMatrix(st),this.emit("viewportchange",{action:"translate",matrix:W.getMatrix()}),this.autoPaint()},l.prototype.moveTo=function(u,j){var W=this.get("group");ce(W,{x:u,y:j}),this.emit("viewportchange",{action:"move",matrix:W.getMatrix()})},l.prototype.fitView=function(u){u&&this.set("fitViewPadding",u),this.get("viewController").fitView(),this.autoPaint()},l.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},l.prototype.addBehaviors=function(u,j){return this.get("modeController").manipulateBehaviors(u,j,!0),this},l.prototype.removeBehaviors=function(u,j){return this.get("modeController").manipulateBehaviors(u,j,!1),this},l.prototype.updateBehavior=function(u,j,W){return this.get("modeController").updateBehavior(u,j,W),this},l.prototype.zoom=function(u,j){var W=this.get("group"),st=Object(n.c)(W.getMatrix()),Tt=this.get("minZoom"),Gt=this.get("maxZoom");st||(st=[1,0,0,0,1,0,0,0,1]),st=_s(st,j?[["t",-j.x,-j.y],["s",u,u],["t",j.x,j.y]]:[["s",u,u]]),Tt&&st[0]<Tt||Gt&&st[0]>Gt||(W.setMatrix(st),this.emit("viewportchange",{action:"zoom",matrix:st}),this.autoPaint())},l.prototype.zoomTo=function(u,j){var W=u/this.getZoom();this.zoom(W,j)},l.prototype.focusItem=function(u,j,W){var st=this.get("viewController"),Tt=!1;j?Tt=!0:j===void 0&&(Tt=this.get("animate"));var Gt={};W?Gt=W:W===void 0&&(Gt=this.get("animateCfg")),st.focus(u,Tt,Gt),this.autoPaint()},l.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},l.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},l.prototype.getPointByClient=function(u,j){return this.get("viewController").getPointByClient(u,j)},l.prototype.getClientByPoint=function(u,j){return this.get("viewController").getClientByPoint(u,j)},l.prototype.getPointByCanvas=function(u,j){return this.get("viewController").getPointByCanvas(u,j)},l.prototype.getCanvasByPoint=function(u,j){return this.get("viewController").getCanvasByPoint(u,j)},l.prototype.showItem=function(u,j){j===void 0&&(j=!0);var W=this.get("itemController").changeItemVisibility(u,!0);if(j&&this.get("enabledStack")){var st=W.getID(),Tt={},Gt={};switch(W.getType()){case"node":Tt.nodes=[{id:st,visible:!1}],Gt.nodes=[{id:st,visible:!0}];break;case"edge":Tt.nodes=[{id:st,visible:!1}],Gt.edges=[{id:st,visible:!0}];break;case"combo":Tt.nodes=[{id:st,visible:!1}],Gt.combos=[{id:st,visible:!0}]}this.pushStack("visible",{before:Tt,after:Gt})}},l.prototype.hideItem=function(u,j){j===void 0&&(j=!0);var W=this.get("itemController").changeItemVisibility(u,!1);if(j&&this.get("enabledStack")){var st=W.getID(),Tt={},Gt={};switch(W.getType()){case"node":Tt.nodes=[{id:st,visible:!0}],Gt.nodes=[{id:st,visible:!1}];break;case"edge":Tt.nodes=[{id:st,visible:!0}],Gt.edges=[{id:st,visible:!1}];break;case"combo":Tt.nodes=[{id:st,visible:!0}],Gt.combos=[{id:st,visible:!1}]}this.pushStack("visible",{before:Tt,after:Gt})}},l.prototype.refreshItem=function(u){this.get("itemController").refreshItem(u)},l.prototype.setAutoPaint=function(u){this.set("autoPaint",u),this.get("canvas").set("autoDraw",u)},l.prototype.remove=function(u,j){j===void 0&&(j=!0),this.removeItem(u,j)},l.prototype.removeItem=function(u,j){j===void 0&&(j=!0);var W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W&&Object(n.x)(u))console.warn("The item to be removed does not exist!");else if(W){var st="";if(W.getType&&(st=W.getType()),j&&this.get("enabledStack")){var Tt=Object(ot.a)(Object(ot.a)({},W.getModel()),{itemType:st}),Gt={};switch(st){case"node":Gt.nodes=[Tt],Gt.edges=[];for(var Xt=W.getEdges(),ee=Xt.length-1;ee>=0;ee--)Gt.edges.push(Object(ot.a)(Object(ot.a)({},Xt[ee].getModel()),{itemType:"edge"}));break;case"edge":Gt.edges=[Tt];break;case"combo":Gt.combos=[Tt]}this.pushStack("delete",{before:Gt,after:{}})}if(st==="node"&&W.getModel().comboId&&this.updateComboTree(W),this.get("itemController").removeItem(W),st==="combo"){var ae=Rs(this.get("comboTrees"));this.set("comboTrees",ae)}}},l.prototype.addItem=function(u,j,W,st){W===void 0&&(W=!0),st===void 0&&(st=!0);var Tt=this.get("comboSorted");this.set("comboSorted",Tt&&!st);var Gt=this.get("itemController");if(!j.id||!this.findById(j.id)){var Xt,ee=this.get("comboTrees");if(ee||(ee=[]),u==="combo"){var ae=this.get("itemMap"),je=!1;if(ee.forEach(function(sr){je||ea(sr,function(ur){if(j.parentId===ur.id){je=!0;var Or=Object(ot.a)({id:j.id,depth:ur.depth+2},j);ur.children?ur.children.push(Or):ur.children=[Or],j.depth=Or.depth,Xt=Gt.addItem(u,j)}var ei=ae[ur.id];return je&&ei&&ei.getType&&ei.getType()==="combo"&&Gt.updateCombo(ei,ur.children),!0})}),!je){var Fe=Object(ot.a)({id:j.id,depth:0},j);j.depth=Fe.depth,ee.push(Fe),Xt=Gt.addItem(u,j)}this.set("comboTrees",ee)}else if(u==="node"&&Object(n.x)(j.comboId)&&ee){var _e;if((_e=this.findById(j.comboId))&&_e.getType&&_e.getType()!=="combo")return void console.warn("'"+j.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");Xt=Gt.addItem(u,j);var He=this.get("itemMap"),bn=!1,wn=!1;(ee||[]).forEach(function(sr){wn||bn||ea(sr,function(ur){if(ur.id===j.id)return wn=!0,!1;if(j.comboId===ur.id&&!wn){bn=!0;var Or=Object(n.c)(j);Or.itemType="node",ur.children?ur.children.push(Or):ur.children=[Or],j.depth=ur.depth+1}return bn&&He[ur.id].getType&&He[ur.id].getType()==="combo"&&Gt.updateCombo(He[ur.id],ur.children),!0})})}else Xt=Gt.addItem(u,j);(u==="node"&&j.comboId||u==="combo"&&j.parentId)&&(_e=this.findById(j.comboId||j.parentId))&&_e.addChild(Xt);var Nn=this.get("combos");if(Nn&&Nn.length>0&&this.sortCombos(),this.autoPaint(),W&&this.get("enabledStack")){var Bn=Object(ot.a)(Object(ot.a)({},Xt.getModel()),{itemType:u}),Fn={};switch(u){case"node":Fn.nodes=[Bn];break;case"edge":Fn.edges=[Bn];break;case"combo":Fn.combos=[Bn]}this.pushStack("add",{before:{},after:Fn})}return Xt}console.warn("This item exists already. Be sure the id %c"+j.id+"%c is unique.","font-size: 20px; color: red;","")},l.prototype.add=function(u,j,W,st){return W===void 0&&(W=!0),st===void 0&&(st=!0),this.addItem(u,j,W,st)},l.prototype.updateItem=function(u,j,W){var st=this;W===void 0&&(W=!0);var Tt,Gt=this.get("itemController");Tt=Object(n.x)(u)?this.findById(u):u;var Xt=Object(n.c)(Tt.getModel()),ee="";Tt.getType&&(ee=Tt.getType());var ae=Object(ot.d)(Tt.getStates());if(ee==="combo"&&Object(n.f)(ae,function(He){return st.setItemState(Tt,He,!1)}),Gt.updateItem(Tt,j),ee==="combo"&&Object(n.f)(ae,function(He){return st.setItemState(Tt,He,!0)}),W&&this.get("enabledStack")){var je={nodes:[],edges:[],combos:[]},Fe={nodes:[],edges:[],combos:[]},_e=Object(ot.a)({id:Xt.id},j);switch(ee){case"node":je.nodes.push(Xt),Fe.nodes.push(_e);break;case"edge":je.edges.push(Xt),Fe.edges.push(_e);break;case"combo":je.combos.push(Xt),Fe.combos.push(_e)}ee==="node"&&je.nodes.push(Xt),this.pushStack("update",{before:je,after:Fe})}},l.prototype.update=function(u,j,W){W===void 0&&(W=!0),this.updateItem(u,j,W)},l.prototype.setItemState=function(u,j,W){Object(n.x)(u)&&(u=this.findById(u)),this.get("itemController").setItemState(u,j,W);var st=this.get("stateController");Object(n.x)(W)?st.updateState(u,j+":"+W,!0):st.updateState(u,j,W)},l.prototype.priorityState=function(u,j){this.get("itemController").priorityState(u,j)},l.prototype.data=function(u){this.set("data",u)},l.prototype.render=function(){var u=this;this.set("comboSorted",!1);var j=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!j)throw new Error("data must be defined first");var W=j.nodes,st=W===void 0?[]:W,Tt=j.edges,Gt=Tt===void 0?[]:Tt,Xt=j.combos,ee=Xt===void 0?[]:Xt;if(this.clear(),this.emit("beforerender"),Object(n.f)(st,function(_e){u.add("node",_e,!1,!1)}),ee&&ee.length!==0){var ae=Ri(ee,st);this.set("comboTrees",ae),u.addCombos(ee)}Object(n.f)(Gt,function(_e){u.add("edge",_e,!1,!1)});var je=u.get("animate");(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",!1);var Fe=u.get("layoutController");if(Fe){if(Fe.layout(function(){u.get("fitView")?u.fitView():u.get("fitCenter")&&u.fitCenter(),u.autoPaint(),u.emit("afterrender"),(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",je)}),this.destroyed)return}else u.get("fitView")&&u.fitView(),u.get("fitCenter")&&u.fitCenter(),u.emit("afterrender"),u.set("animate",je);this.get("groupByTypes")||(ee&&ee.length!==0?this.sortCombos():j.nodes&&j.edges&&j.nodes.length<j.edges.length?this.getNodes().forEach(function(_e){_e.toFront()}):this.getEdges().forEach(function(_e){_e.toBack()})),this.get("enabledStack")&&this.pushStack("render")},l.prototype.read=function(u){this.data(u),this.render()},l.prototype.diffItems=function(u,j,W){var st,Tt=this,Gt=this.get("itemMap");Object(n.f)(W,function(Xt){if(st=Gt[Xt.id]){if(Tt.get("animate")&&u==="node"){var ee=st.getContainer().getMatrix();ee||(ee=[1,0,0,0,1,0,0,0,1]),st.set("originAttrs",{x:ee[6],y:ee[7]})}Tt.updateItem(st,Xt,!1)}else st=Tt.addItem(u,Xt,!1);st&&j[u+"s"].push(st)})},l.prototype.changeData=function(u,j){j===void 0&&(j=!0);var W=this;if(!u)return this;j&&this.get("enabledStack")&&this.pushStack("changedata",{before:W.save(),after:u}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(He){return W.clearItemStates(He)}),this.getEdges().map(function(He){return W.clearItemStates(He)});var st=this.get("canvas"),Tt=st.get("localRefresh");st.set("localRefresh",!1),W.get("data")||(W.data(u),W.render());var Gt=this.get("itemMap"),Xt={nodes:[],edges:[]},ee=u.combos;if(ee){var ae=Ri(ee,u.nodes);this.set("comboTrees",ae)}this.diffItems("node",Xt,u.nodes),Object(n.f)(Gt,function(He,bn){Gt[bn].getModel().depth=0,He.getType&&He.getType()==="edge"||(He.getType&&He.getType()==="combo"?(delete Gt[bn],He.destroy()):Xt.nodes.indexOf(He)<0&&(delete Gt[bn],W.remove(He,!1)))});for(var je=this.getCombos(),Fe=je.length-1;Fe>=0;Fe--)je[Fe].destroyed&&je.splice(Fe,1);ee&&(W.addCombos(ee),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",Xt,u.edges),Object(n.f)(Gt,function(He,bn){(!He.getType||He.getType()!=="node"&&He.getType()!=="combo")&&Xt.edges.indexOf(He)<0&&(delete Gt[bn],W.remove(He,!1))}),this.set({nodes:Xt.nodes,edges:Xt.edges});var _e=this.get("layoutController");return _e&&(_e.changeData(),W.get("animate")&&!_e.getLayoutType()?W.positionsAnimate():W.autoPaint()),setTimeout(function(){st.set("localRefresh",Tt)},16),this},l.prototype.addCombos=function(u){var j=this.get("comboTrees");this.get("itemController").addCombos(j,u)},l.prototype.createCombo=function(u,j){var W=this;this.set("comboSorted",!1);var st,Tt="";if(u){if(Object(n.x)(u))Tt=u,st={id:u};else{if(!(Tt=u.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");st=u}var Gt=j.map(function(ee){var ae=W.findById(ee),je="";ae.getType&&(je=ae.getType());var Fe={id:ae.getID(),itemType:je};return je==="combo"?Fe.parentId=Tt:je==="node"&&(Fe.comboId=Tt),Fe});st.children=Gt,this.addItem("combo",st,!1),this.set("comboSorted",!1);var Xt=this.get("comboTrees");(Xt||[]).forEach(function(ee){ea(ee,function(ae){return ae.id!==Tt||(ae.itemType="combo",ae.children=Gt,!1)})}),Xt&&this.sortCombos()}},l.prototype.uncombo=function(u){var j=this,W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W||W.getType&&W.getType()!=="combo")console.warn("The item is not a combo!");else{var st=W.getModel().parentId,Tt=this.get("comboTrees");Tt||(Tt=[]);var Gt,Xt=this.get("itemMap"),ee=W.get("id"),ae=[],je=this.get("combos"),Fe=this.findById(st);if(Tt.forEach(function(He){Gt||ea(He,function(bn){if(bn.id===ee){Gt=bn,W.getEdges().forEach(function(Nn){j.removeItem(Nn,!1)});var wn=je.indexOf(u);je.splice(wn,1),delete Xt[ee],W.destroy()}return!st||!Gt||bn.id!==st||(Fe.removeCombo(W),(wn=(ae=bn.children).indexOf(Gt))!==-1&&ae.splice(wn,1),Gt.children.forEach(function(Nn){var Bn=j.findById(Nn.id),Fn=Bn.getModel();Bn.getType&&Bn.getType()==="combo"?(Nn.parentId=st,delete Nn.comboId,Fn.parentId=st,delete Fn.comboId):Bn.getType&&Bn.getType()==="node"&&(Nn.comboId=st,Fn.comboId=st),Fe.addChild(Bn),ae.push(Nn)}),!1)})}),!st&&Gt){var _e=Tt.indexOf(Gt);Tt.splice(_e,1),Gt.children.forEach(function(He){He.parentId=void 0,j.findById(He.id).getModel().parentId=void 0,He.itemType!=="node"&&Tt.push(He)})}}},l.prototype.updateCombos=function(){var u=this,j=this.get("comboTrees"),W=this.get("itemController"),st=this.get("itemMap");(j||[]).forEach(function(Tt){ea(Tt,function(Gt){if(!Gt)return!0;var Xt=st[Gt.id];if(Xt&&Xt.getType&&Xt.getType()==="combo"){var ee=Object(ot.d)(Xt.getStates());Object(n.f)(ee,function(ae){return u.setItemState(Xt,ae,!1)}),W.updateCombo(Xt,Gt.children),Object(n.f)(ee,function(ae){return u.setItemState(Xt,ae,!0)})}return!0})}),this.sortCombos()},l.prototype.updateCombo=function(u){var j,W=this,st=u;if(Object(n.x)(u)&&(st=this.findById(u)),!st||st.getType&&st.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{j=st.get("id");var Tt=this.get("comboTrees"),Gt=this.get("itemController"),Xt=this.get("itemMap");(Tt||[]).forEach(function(ee){ea(ee,function(ae){if(!ae)return!0;var je=Xt[ae.id];if(j===ae.id&&je&&je.getType&&je.getType()==="combo"){var Fe=Object(ot.d)(je.getStates());Object(n.f)(Fe,function(_e){je.getStateStyle(_e)&&W.setItemState(je,_e,!1)}),Gt.updateCombo(je,ae.children),Object(n.f)(Fe,function(_e){je.getStateStyle(_e)&&W.setItemState(je,_e,!0)}),j&&(j=ae.parentId)}return!0})})}},l.prototype.updateComboTree=function(u,j,W){W===void 0&&(W=!0);var st;this.set("comboSorted",!1);var Tt,Gt=(st=Object(n.x)(u)?this.findById(u):u).getModel(),Xt=Gt.comboId||Gt.parentId,ee="";if(st.getType&&(ee=st.getType()),j&&ee==="combo"){var ae,je=this.get("comboTrees"),Fe=!0;if((je||[]).forEach(function(Nn){ae||di(Nn,function(Bn){if(!ae)return Bn.id===st.getID()&&(ae=Bn),!0})}),di(ae,function(Nn){return Nn.id!==j||(Fe=!1,!1)}),!Fe)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(W&&this.get("enabledStack")){var _e={},He={};ee==="combo"?(_e.combos=[{id:Gt.id,parentId:Gt.parentId}],He.combos=[{id:Gt.id,parentId:j}]):ee==="node"&&(_e.nodes=[{id:Gt.id,parentId:Gt.comboId}],He.nodes=[{id:Gt.id,parentId:j}]),this.pushStack("updateComboTree",{before:_e,after:He})}if(Gt.parentId||Gt.comboId){var bn=this.findById(Gt.parentId||Gt.comboId);bn&&bn.removeChild(st)}ee==="combo"?Gt.parentId=j:ee==="node"&&(Gt.comboId=j),j&&(Tt=this.findById(j))&&Tt.addChild(st),Xt&&(Tt=this.findById(Xt))&&Tt.removeChild(st);var wn=Rs(this.get("comboTrees"),Gt.id,j);this.set("comboTrees",wn),this.updateCombos()},l.prototype.save=function(){var u=[],j=[],W=[];return Object(n.f)(this.get("nodes"),function(st){u.push(st.getModel())}),Object(n.f)(this.get("edges"),function(st){j.push(st.getModel())}),Object(n.f)(this.get("combos"),function(st){W.push(st.getModel())}),{nodes:u,edges:j,combos:W}},l.prototype.changeSize=function(u,j){return this.get("viewController").changeSize(u,j),this},l.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var u=this.get("nodes"),j=this.get("edges"),W=this.get("edges");Object(n.f)(u,function(st){st.refresh()}),Object(n.f)(j,function(st){st.refresh()}),Object(n.f)(W,function(st){st.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},l.prototype.getNodes=function(){return this.get("nodes")},l.prototype.getEdges=function(){return this.get("edges")},l.prototype.getCombos=function(){return this.get("combos")},l.prototype.getComboChildren=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),u&&(!u.getType||u.getType()==="combo"))return u.getChildren();console.warn("The combo does not exist!")},l.prototype.positionsAnimate=function(){var u=this;u.emit("beforeanimate");var j=u.get("animateCfg"),W=j.onFrame,st=u.getNodes(),Tt=st.map(function(Gt){var Xt=Gt.getModel();return{id:Xt.id,x:Xt.x,y:Xt.y}});u.isAnimating()&&u.stopAnimate(),u.get("canvas").animate(function(Gt){Object(n.f)(Tt,function(Xt){var ee=u.findById(Xt.id);if(ee&&!ee.destroyed){var ae=ee.get("originAttrs"),je=ee.get("model");if(!ae){var Fe=ee.getContainer().getMatrix();Fe||(Fe=[1,0,0,0,1,0,0,0,1]),ae={x:Fe[6],y:Fe[7]},ee.set("originAttrs",ae)}if(W){var _e=W(ee,Gt,Xt,ae);ee.set("model",Object.assign(je,_e))}else je.x=ae.x+(Xt.x-ae.x)*Gt,je.y=ae.y+(Xt.y-ae.y)*Gt}}),u.refreshPositions()},{duration:j.duration,easing:j.easing,callback:function(){Object(n.f)(st,function(Xt){Xt.set("originAttrs",null)}),j.callback&&j.callback(),u.emit("afteranimate"),u.animating=!1}})},l.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var u,j=this.get("nodes"),W=this.get("edges"),st=this.get("vedges"),Tt=this.get("combos"),Gt={};Object(n.f)(j,function(Xt){u=Xt.getModel();var ee=Xt.get("originAttrs");ee&&u.x===ee.x&&u.y===ee.y||(Xt.updatePosition({x:u.x,y:u.y}),Gt[u.id]=!0,u.comboId&&(Gt[u.comboId]=!0))}),Tt&&Tt.length!==0&&this.updateCombos(),Object(n.f)(W,function(Xt){var ee=Xt.getSource().getModel(),ae=Xt.getTarget().getModel();(Gt[ee.id]||Gt[ae.id]||Xt.getModel().isComboEdge)&&Xt.refresh()}),Object(n.f)(st,function(Xt){Xt.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},l.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},l.prototype.isAnimating=function(){return this.animating},l.prototype.getZoom=function(){var u=this.get("group").getMatrix();return u?u[0]:1},l.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},l.prototype.setMode=function(u){return this.get("modeController").setMode(u),this},l.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},l.prototype.updateLayout=function(u){var j,W=this.get("layoutController");Object(n.x)(u)?u={type:j=u}:j=u.type;var st=this.get("layout"),Tt=st?st.type:void 0;if(j&&Tt!==j||u.gpuEnabled!==void 0&&u.gpuEnabled!==st.gpuEnabled)j||(j=Tt),this.set("layout",u),W.changeLayout(j);else{var Gt={};Object.assign(Gt,st,u),Gt.type=Tt||"random",this.set("layout",Gt),W.updateLayoutCfg(Gt)}},l.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},l.prototype.layout=function(){var u=this.get("layoutController"),j=this.get("layout");j&&u&&(j.workerEnabled?u.layout():u.layoutMethod?u.relayout(!0):u.layout())},l.prototype.collapseCombo=function(u){var j=this;if(Object(n.x)(u)&&(u=this.findById(u)),u){this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").collapseCombo(u),W.collapsed=!0;var st=this.getEdges().concat(this.get("vedges")),Tt=[],Gt=[],Xt=this.get("comboTrees"),ee=!1,ae={};(Xt||[]).forEach(function(_e){ae[_e.id]=_e}),(Xt||[]).forEach(function(_e){ee||di(_e,function(He){if(ee&&ae[He.id])return!1;if(W.parentId===He.id?(ae={},He.children.forEach(function(wn){ae[wn.id]=wn})):W.id===He.id&&(ee=!0),ee){var bn=j.findById(He.id);bn&&bn.getType&&bn.getType()==="combo"&&(Tt=Tt.concat(bn.getNodes()),Gt=Gt.concat(bn.getCombos()))}return!0})});var je={},Fe=[];st.forEach(function(_e){if(!_e.isVisible()||_e.getModel().isVEdge){var He=_e.getSource(),bn=_e.getTarget();if((Tt.includes(He)||Gt.includes(He))&&!Tt.includes(bn)&&!Gt.includes(bn)||He.getModel().id===W.id){if((Fn=_e.getModel()).isVEdge)return void j.removeItem(_e,!1);for(var wn=bn.getModel();!bn.isVisible();){if(!(bn=j.findById(wn.parentId||wn.comboId))||!wn.parentId&&!wn.comboId)return;wn=bn.getModel()}var Nn=wn.id;if(je[W.id+"-"+Nn])return void(je[W.id+"-"+Nn]+=Fn.size||1);var Bn=j.addItem("vedge",{source:W.id,target:Nn,isVEdge:!0},!1);je[W.id+"-"+Nn]=Fn.size||1,Fe.push(Bn)}else if(!Tt.includes(He)&&!Gt.includes(He)&&(Tt.includes(bn)||Gt.includes(bn))||bn.getModel().id===W.id){var Fn;if((Fn=_e.getModel()).isVEdge)return void j.removeItem(_e,!1);for(var sr=He.getModel();!He.isVisible();){if(!(He=j.findById(sr.parentId||sr.comboId))||!sr.parentId&&!sr.comboId)return;sr=He.getModel()}var ur=sr.id;if(je[ur+"-"+W.id])return void(je[ur+"-"+W.id]+=Fn.size||1);Bn=j.addItem("vedge",{target:W.id,source:ur,isVEdge:!0},!1),je[ur+"-"+W.id]=Fn.size||1,Fe.push(Bn)}}}),Fe.forEach(function(_e){var He=_e.getModel();j.updateItem(_e,{size:je[He.source+"-"+He.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:u})}else console.warn("The combo to be collapsed does not exist!")},l.prototype.expandCombo=function(u){var j=this;if(Object(n.x)(u)&&(u=this.findById(u)),!u||u.getType&&u.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").expandCombo(u),W.collapsed=!1;var st=this.getEdges().concat(this.get("vedges")),Tt=[],Gt=[],Xt=this.get("comboTrees"),ee=!1,ae={};(Xt||[]).forEach(function(_e){ae[_e.id]=_e}),(Xt||[]).forEach(function(_e){ee||di(_e,function(He){if(ee&&ae[He.id])return!1;if(W.parentId===He.id?(ae={},He.children.forEach(function(wn){ae[wn.id]=wn})):W.id===He.id&&(ee=!0),ee){var bn=j.findById(He.id);bn&&bn.getType&&bn.getType()==="combo"&&(Tt=Tt.concat(bn.getNodes()),Gt=Gt.concat(bn.getCombos()))}return!0})});var je={},Fe={};st.forEach(function(_e){if(!_e.isVisible()||_e.getModel().isVEdge){var He=_e.getSource(),bn=_e.getTarget(),wn=He.get("id"),Nn=bn.get("id");if((Tt.includes(He)||Gt.includes(He))&&!Tt.includes(bn)&&!Gt.includes(bn)||wn===W.id){if(_e.getModel().isVEdge)return void j.removeItem(_e,!1);for(var Bn=bn.getModel();!bn.isVisible();){if(!(bn=j.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;Bn=bn.getModel()}Nn=Bn.id;for(var Fn=He.getModel();!He.isVisible();){if(!(He=j.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;if(Fn.comboId===W.id||Fn.parentId===W.id)break;Fn=He.getModel()}if(wn=Fn.id,Nn){if(je[ur=wn+"-"+Nn])return je[ur]+=_e.getModel().size||1,void j.updateItem(Fe[ur],{size:je[ur]},!1);var sr=j.addItem("vedge",{source:wn,target:Nn,isVEdge:!0},!1);je[ur]=_e.getModel().size||1,Fe[ur]=sr}}else if(!Tt.includes(He)&&!Gt.includes(He)&&(Tt.includes(bn)||Gt.includes(bn))||Nn===W.id){if(_e.getModel().isVEdge)return void j.removeItem(_e,!1);for(Fn=He.getModel();!He.isVisible();){if(!(He=j.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;Fn=He.getModel()}for(wn=Fn.id,Bn=bn.getModel();!bn.isVisible();){if(!(bn=j.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;if(Bn.comboId===W.id||Bn.parentId===W.id)break;Bn=bn.getModel()}if(Nn=Bn.id,wn){var ur;if(je[ur=wn+"-"+Nn])return je[ur]+=_e.getModel().size||1,void j.updateItem(Fe[ur],{size:je[ur]},!1);sr=j.addItem("vedge",{target:Nn,source:wn,isVEdge:!0},!1),je[ur]=_e.getModel().size||1,Fe[ur]=sr}}else(Tt.includes(He)||Gt.includes(He))&&(Tt.includes(bn)||Gt.includes(bn))&&He.isVisible()&&bn.isVisible()&&_e.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:u})}},l.prototype.collapseExpandCombo=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),!u.getType||u.getType()==="combo"){for(var j=u.getModel(),W=this.findById(j.parentId);W;){var st=W.getModel();if(st.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(W=void 0);W=this.findById(st.parentId)}j.collapsed?this.expandCombo(u):this.collapseCombo(u),this.updateCombo(u)}},l.prototype.sortCombos=function(){var u=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var j=[],W={};(this.get("comboTrees")||[]).forEach(function(st){di(st,function(Tt){return j[Tt.depth]?j[Tt.depth].push(Tt.id):j[Tt.depth]=[Tt.id],W[Tt.id]=Tt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(st){var Tt=st.getModel(),Gt=W[Tt.source]||0,Xt=W[Tt.target]||0,ee=Math.max(Gt,Xt);j[ee]?j[ee].push(Tt.id):j[ee]=[Tt.id]}),j.forEach(function(st){if(st&&st.length)for(var Tt=st.length-1;Tt>=0;Tt--){var Gt=u.findById(st[Tt]);Gt&&Gt.toFront()}})}},l.prototype.getNeighbors=function(u,j){var W=u;return Object(n.x)(u)&&(W=this.findById(u)),W.getNeighbors(j)},l.prototype.getNodeDegree=function(u,j){j===void 0&&(j=void 0);var W=u;Object(n.x)(u)&&(W=this.findById(u));var st=this.get("degrees");st||(st=Object(Se.getDegree)(this.get("data"))),this.set("degees",st);var Tt,Gt=st[W.getID()];switch(j){case"in":Tt=Gt.inDegree;break;case"out":Tt=Gt.outDegree;break;case"all":Tt=Gt;break;default:Tt=Gt.degree}return Tt},l.prototype.getUndoStack=function(){return this.undoStack},l.prototype.getRedoStack=function(){return this.redoStack},l.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},l.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},l.prototype.pushStack=function(u,j,W){if(u===void 0&&(u="update"),W===void 0&&(W="undo"),this.get("enabledStack")){var st=j?Object(n.c)(j):{before:{},after:Object(n.c)(this.save())};W==="redo"?this.redoStack.push({action:u,data:st}):this.undoStack.push({action:u,data:st}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},l.prototype.getAdjMatrix=function(u,j){u===void 0&&(u=!0),j===void 0&&(j=this.get("directed"));var W=this.get("adjMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),j),this.set("adjMatrix",W)),W},l.prototype.getShortestPathMatrix=function(u,j){u===void 0&&(u=!0),j===void 0&&(j=this.get("directed"));var W=this.get("adjMatrix"),st=this.get("shortestPathMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),j),this.set("adjMatrix",W)),st&&u||(st=Object(Se.floydWarshall)(this.save(),j),this.set("shortestPathMatrix",st)),st},l.prototype.on=function(u,j,W){return Rt.prototype.on.call(this,u,j,W)},l.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},l.prototype.createHull=function(u){if(u.members&&!(u.members.length<1)){var j=this.get("hullGroup"),W=this.get("hullMap");if(W||(W={},this.set("hullMap",W)),j||((j=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",j)),W[u.id])return console.warn("Existed hull id."),W[u.id];var st=j.addGroup({id:u.id+"-container"}),Tt=new Ta(this,Object(ot.a)(Object(ot.a)({},u),{group:st}));return W[Tt.id]=Tt,Tt}console.warn("Create hull failed! The members is empty.")},l.prototype.getHulls=function(){return this.get("hullMap")},l.prototype.getHullById=function(u){return this.get("hullMap")[u]},l.prototype.removeHull=function(u){var j;j=Object(n.x)(u)?this.getHullById(u):u,delete this.get("hullMap")[j.id],j.destroy()},l.prototype.removeHulls=function(){var u=this.getHulls();u&&Object.keys(u).length&&(u.forEach(function(j){j.destroy()}),this.set("hullMap",{}))}})(zt.a);function ns(Rt){return(ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(Rt)}var ba=Yt.a.transform,ca=["startArrow","endArrow"],gs={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Fa={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:gs,combo:gs},ys={options:{},itemType:"",type:"",getCustomConfig:function(l){return{}},getOptions:function(l){return Object(n.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(l)||{},l)},draw:function(l,u){var j=this.drawShape(l,u);return j.set("className",this.itemType+"-shape"),l.label&&this.drawLabel(l,u).set("className",this.itemType+"-label"),j},afterDraw:function(l,u,j){},drawShape:function(l,u){return null},drawLabel:function(l,u){var j=this.getOptions(l).labelCfg||{},W=this.getLabelStyle(l,j,u),st=W.rotate;delete W.rotate;var Tt=u.addShape("text",{attrs:W,draggable:!0,className:"text-shape",name:"text-shape"});if(st){var Gt=Tt.getBBox(),Xt=Tt.getMatrix();if(Xt||(Xt=[1,0,0,0,1,0,0,0,1]),W.rotateCenter)switch(W.rotateCenter){case"center":Xt=ba(Xt,[["t",-Gt.width/2,-Gt.height/2],["r",st],["t",Gt.width/2,Gt.height/2]]);break;case"lefttop":Xt=ba(Xt,[["t",-W.x,-W.y],["r",st],["t",W.x,W.y]]);break;case"leftcenter":Xt=ba(Xt,[["t",-W.x,-W.y-Gt.height/2],["r",st],["t",W.x,W.y+Gt.height/2]]);break;default:Xt=ba(Xt,[["t",-Gt.width/2,-Gt.height/2],["r",st],["t",Gt.width/2,Gt.height/2]])}else Xt=ba(Xt,[["t",-W.x,-W.y-Gt.height/2],["r",st],["t",W.x,W.y+Gt.height/2]]);Tt.setMatrix(Xt)}if(W.background){var ee=this.drawLabelBg(l,u,Tt),ae=this.itemType+"-label-bg";ee.set("classname",ae),Tt.toFront()}return Tt},drawLabelBg:function(l,u,j){var W=this.options.labelCfg,st=Object(n.A)({},W,l.labelCfg),Tt=this.getLabelBgStyleByPosition(j,l,st,u);return u.addShape("rect",{name:"text-bg-shape",attrs:Tt})},getLabelStyleByPosition:function(l,u,j){return{text:l.label}},getLabelBgStyleByPosition:function(l,u,j,W){return{}},getLabelStyle:function(l,u,j){var W=this.getLabelStyleByPosition(l,u,j),st=this.itemType+"Label",Tt=In[st]?In[st].style:null;return Object(ot.a)(Object(ot.a)(Object(ot.a)({},Tt),W),u.style)},getShapeStyle:function(l){return l.style},update:function(l,u){this.updateShapeStyle(l,u),this.updateLabel(l,u)},updateShapeStyle:function(l,u){var j=u.getContainer(),W=u.getKeyShape(),st=Object(n.A)({},W.attr(),l.style),Tt=function(ee){var ae,je=st[ee];if(Object(n.w)(je)){var Fe=j.find(function(_e){return _e.get("name")===ee});Fe&&Fe.attr(je)}else W.attr(((ae={})[ee]=je,ae))};for(var Gt in st)Tt(Gt)},updateLabel:function(l,u){var j=u.getContainer(),W=this.getOptions({}).labelCfg,st=this.itemType+"-label",Tt=j.find(function(sr){return sr.get("className")===st}),Gt=this.itemType+"-label-bg",Xt=j.find(function(sr){return sr.get("classname")===Gt});if(l.label||l.label==="")if(Tt){var ee={};u.getModel&&(ee=u.getModel().labelCfg);var ae=Object(n.e)({},W,ee,l.labelCfg),je=this.getLabelStyleByPosition(l,ae,j),Fe=l.labelCfg?l.labelCfg.style:void 0,_e=ae.style&&ae.style.background,He=Object(ot.a)(Object(ot.a)(Object(ot.a)({},Tt.attr()),je),Fe),bn=He.rotate;if(delete He.rotate,bn){var wn=[1,0,0,0,1,0,0,0,1];wn=ba(wn,[["t",-He.x,-He.y],["r",bn],["t",He.x,He.y]]),Tt.resetMatrix(),Tt.attr(Object(ot.a)(Object(ot.a)({},He),{matrix:wn}))}else Tt.resetMatrix(),Tt.attr(He);if(Xt)if(He.background){var Nn=this.getLabelBgStyleByPosition(Tt,l,ae,j),Bn=Object(ot.a)(Object(ot.a)({},Nn),_e);if(Xt.resetMatrix(),bn){var Fn=[1,0,0,0,1,0,0,0,1];Fn=ba(Fn,[["t",-Bn.x,-Bn.y],["r",bn],["t",Bn.x,Bn.y]]),Bn.matrix=Fn}Xt.attr(Bn)}else j.removeChild(Xt);else He.background&&((Xt=this.drawLabelBg(l,j,Tt)).set("classname",Gt),Tt.toFront())}else this.drawLabel(l,j).set("className",st)},afterUpdate:function(l,u){},setState:function(l,u,j){var W,st,Tt=j.get("keyShape");if(Tt){var Gt=j.getType(),Xt=Object(n.n)(u)?l:l+":"+u,ee=this.getStateStyle(Xt,j),ae=j.getStateStyle(Xt);if(ae||ee){var je=Object(n.A)({},ae||ee),Fe=j.getContainer(),_e={x:1,y:1,cx:1,cy:1};if(Gt==="combo"&&(_e.r=1,_e.width=1,_e.height=1),u){var He=function(Hi){var Io,ko=je[Hi];if(Object(n.w)(ko)&&!ca.includes(Hi)){var Ro=Fe.find(function(bo){return bo.get("name")===Hi});Ro&&Ro.attr(ko)}else Tt.attr(((Io={})[Hi]=ko,Io))};for(var bn in je)He(bn)}else{var wn=ui(j.getCurrentStatesStyle()),Nn=j.getModel(),Bn=Object(n.A)({},Nn.style,ui(j.getOriginStyle())),Fn=Tt.get("name"),sr=Tt.attr(),ur={};Object.keys(sr).forEach(function(lo){if(lo!=="img"){var Hi=sr[lo];Hi&&ns(Hi)==="object"?ur[lo]=Object(n.c)(Hi):ur[lo]=Hi}});var Or={},ei=function(Hi){var Io=je[Hi];if(Object(n.w)(Io)&&!ca.includes(Hi)){var ko=Fe.find(function(jo){return jo.get("name")===Hi});if(ko){var Ro=Object(n.c)(ko.attr());Object(n.f)(Io,function(jo,ho){if(Hi===Fn&&ur[ho]&&!_e[ho]){delete ur[ho];var fa=Bn[Hi][ho]||Fa[Gt][ho];Tt.attr(ho,fa)}else if(Ro[ho]||Ro[ho]===0){delete Ro[ho];var Zo=Bn[Hi][ho]||Fa[Gt][ho];ko.attr(ho,Zo)}}),Or[Hi]=Ro}}else if(ur[Hi]&&!_e[Hi]){delete ur[Hi];var bo=Bn[Hi]||(Bn[Fn]?Bn[Fn][Hi]:void 0)||Fa[Gt][Hi];Tt.attr(Hi,bo)}};for(var Ti in je)ei(Ti);for(var bn in Fn?Or[Fn]=ur:Object(n.A)(Or,ur),wn)if(!_e[bn]){var kr=wn[bn];Object(n.w)(kr)&&!ca.includes(bn)||(Fn?(Object(n.A)(Bn[Fn],((st={})[bn]=kr,st)),delete Bn[bn]):Object(n.A)(Bn,((W={})[bn]=kr,W)),delete wn[bn])}var yi={};Object(n.e)(yi,Bn,Or,wn);var oo=!1,so=function(Hi){var Io,ko,Ro=yi[Hi];if(Object(n.w)(Ro)&&!ca.includes(Hi)){var bo=Fe.find(function(ho){return ho.get("name")===Hi});bo&&(Hi===Fn&&(Gt==="combo"&&(delete Ro.r,delete Ro.width,delete Ro.height),oo=!0),bo.attr(Ro))}else if(!oo){var jo=Ro||Fa[Gt][Hi];Gt==="combo"?Fn||Tt.attr(((Io={})[Hi]=jo,Io)):Tt.attr(((ko={})[Hi]=jo,ko))}};for(var co in yi)so(co)}}}},getStateStyle:function(l,u){var j=u.getModel(),W=u.getType(),st=this.getOptions(j),Tt=st.stateStyles,Gt=st.style,Xt=Gt===void 0?{}:Gt,ee=j.stateStyles?j.stateStyles[l]:Tt&&Tt[l];return W==="combo"?Object(n.c)(ee):Object(n.A)({},Xt,ee)},getControlPoints:function(l){return l.controlPoints},getAnchorPoints:function(l){return this.getOptions(l).anchorPoints}},jn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:In.nodeLabel.offset,getSize:function(l){var u=l.size||this.getOptions({}).size||In.defaultNode.size;return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(l,u){var j=u.position||this.labelPosition;if(j==="center")return{x:0,y:0,text:l.label};var W=u.offset;Object(n.s)(W)&&(W=this.offset);var st,Tt=this.getSize(l),Gt=Tt[0],Xt=Tt[1];switch(j){case"top":st={x:0,y:0-Xt/2-W,textBaseline:"bottom"};break;case"bottom":st={x:0,y:Xt/2+W,textBaseline:"top"};break;case"left":st={x:0-Gt/2-W,y:0,textAlign:"right"};break;default:st={x:Gt/2+W,y:0,textAlign:"left"}}return st.text=l.label,st},getLabelBgStyleByPosition:function(l,u,j,W){if(!l)return{};var st=l.getBBox(),Tt=j.style&&j.style.background;if(!Tt)return{};var Gt,Xt=Mr(Tt.padding),ee=st.width+Xt[1]+Xt[3],ae=st.height+Xt[0]+Xt[2],je=j.offset;return Object(n.s)(je)&&(je=this.offset),Gt={x:st.minX-Xt[3],y:st.minY-Xt[0]},Gt=Object(ot.a)(Object(ot.a)(Object(ot.a)({},Gt),Tt),{width:ee,height:ae})},drawShape:function(l,u){var j=this.shapeType,W=this.getShapeStyle(l);return u.addShape(j,{attrs:W,draggable:!0,name:"node-shape"})},updateLinkPoints:function(l,u){var j,W=this.getOptions(l).linkPoints,st=u.find(function(ei){return ei.get("className")==="link-point-left"}),Tt=u.find(function(ei){return ei.get("className")==="link-point-right"}),Gt=u.find(function(ei){return ei.get("className")==="link-point-top"}),Xt=u.find(function(ei){return ei.get("className")==="link-point-bottom"});st&&(j=st.attr()),Tt&&!j&&(j=Tt.attr()),Gt&&!j&&(j=Gt.attr()),Xt&&!j&&(j=Xt.attr()),j||(j=W);var ee=Object(n.A)({},j,l.linkPoints),ae=ee.fill,je=ee.stroke,Fe=ee.lineWidth,_e=ee.size/2;_e||(_e=ee.r);var He=l.linkPoints?l.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},bn=He.left,wn=He.right,Nn=He.top,Bn=He.bottom,Fn=this.getSize(l),sr=Fn[0],ur=Fn[1],Or={r:_e,fill:ae,stroke:je,lineWidth:Fe};st?bn||bn===void 0?st.attr(Object(ot.a)(Object(ot.a)({},Or),{x:-sr/2,y:0})):st.remove():bn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:-sr/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Tt?(wn||wn===void 0||Tt.remove(),Tt.attr(Object(ot.a)(Object(ot.a)({},Or),{x:sr/2,y:0}))):wn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:sr/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Gt?(Nn||Nn===void 0||Gt.remove(),Gt.attr(Object(ot.a)(Object(ot.a)({},Or),{x:0,y:-ur/2}))):Nn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:0,y:-ur/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Xt?Bn||Bn===void 0?Xt.attr(Object(ot.a)(Object(ot.a)({},Or),{x:0,y:ur/2})):Xt.remove():Bn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:0,y:ur/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(l,u,j,W){u.get("keyShape").attr(Object(ot.a)({},j)),this.updateLabel(l,u),W&&this.updateIcon(l,u)},updateIcon:function(l,u){var j=this,W=u.getContainer(),st=this.getOptions(l).icon,Tt=(l.icon?l.icon:{show:void 0}).show,Gt=W.find(function(Fe){return Fe.get("className")===j.type+"-icon"});if(Gt)if(Tt||Tt===void 0){var Xt=Object(n.A)({},Gt.attr(),st),ee=Xt.width,ae=Xt.height;Gt.attr(Object(ot.a)(Object(ot.a)({},Xt),{x:-ee/2,y:-ae/2}))}else Gt.remove();else if(Tt){ee=st.width,ae=st.height,W.addShape("image",{attrs:Object(ot.a)(Object(ot.a)({},st),{x:-ee/2,y:-ae/2}),className:this.type+"-icon",name:this.type+"-icon"});var je=W.find(function(Fe){return Fe.get("className")==="node-label"});je&&je.toFront()}}},Us=Object(ot.a)(Object(ot.a)({},ys),jn);yr.registerNode("single-node",Us);var Wo={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:In.defaultEdge.size,style:{x:0,y:0,stroke:In.defaultEdge.style.stroke,lineAppendWidth:In.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:In.edgeLabel.style.fill,fontSize:In.edgeLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.edgeStateStyles)},getPath:function(l){var u=[];return Object(n.f)(l,function(j,W){W===0?u.push(["M",j.x,j.y]):u.push(["L",j.x,j.y])}),u},getShapeStyle:function(l){var u=this.options.style,j={stroke:l.color},W=Object(n.A)({},u,j,l.style),st=l.size||In.defaultEdge.size,Tt=(l=this.getPathPoints(l)).startPoint,Gt=l.endPoint,Xt=this.getControlPoints(l),ee=[Tt];Xt&&(ee=ee.concat(Xt)),ee.push(Gt);var ae=this.getPath(ee);return Object(n.A)({},In.defaultEdge.style,{stroke:In.defaultEdge.color,lineWidth:st,path:ae},W)},updateShapeStyle:function(l,u){var j=u.getContainer(),W={stroke:l.color},st=j.find(function(Bn){return Bn.get("className")==="edge-shape"})||u.getKeyShape(),Tt=l.size,Gt=(l=this.getPathPoints(l)).startPoint,Xt=l.endPoint,ee=this.getControlPoints(l),ae=[Gt];ee&&(ae=ae.concat(ee)),ae.push(Xt);var je=st.attr(),Fe=Object(n.A)({},W,je,l.style),_e=l.sourceNode,He=l.targetNode,bn={radius:Fe.radius};ee||(bn={source:_e,target:He,offset:Fe.offset,radius:Fe.radius}),je.endArrow&&Fe.endArrow===!1&&(l.style.endArrow={path:""}),je.startArrow&&Fe.startArrow===!1&&(l.style.startArrow={path:""});var wn=this.getPath(ae,bn),Nn=Object(n.A)(W,st.attr(),{lineWidth:Tt,path:wn},l.style);st&&st.attr(Nn)},getLabelStyleByPosition:function(l,u,j){var W,st=u.position||this.labelPosition,Tt={},Gt=j&&j.find(function(Fe){return Fe.get("className")==="edge-shape"});W=st==="start"?0:st==="end"?1:.5;var Xt=u.refX||this.refX,ee=u.refY||this.refY;if(l.startPoint.x===l.endPoint.x&&l.startPoint.y===l.endPoint.y)return Tt.x=l.startPoint.x+Xt,Tt.y=l.startPoint.y+ee,Tt.text=l.label,Tt;var ae=Object(n.s)(u.autoRotate)?this.labelAutoRotate:u.autoRotate,je=Xo(Gt,W,Xt,ee,ae);return Tt.x=je.x,Tt.y=je.y,Tt.rotate=je.rotate,Tt.textAlign=this._getTextAlign(st,je.angle),Tt.text=l.label,Tt},getLabelBgStyleByPosition:function(l,u,j,W){if(!l)return{};var st=l.getBBox(),Tt=j.style&&j.style.background;if(!Tt)return{};var Gt,Xt=Tt.padding,ee=st.width+Xt[1]+Xt[3],ae=st.height+Xt[0]+Xt[2],je=j.position||this.labelPosition,Fe=Object(ot.a)(Object(ot.a)({},Tt),{width:ee,height:ae,x:st.minX-Xt[2],y:st.minY-Xt[0],rotate:0}),_e=Object(n.s)(j.autoRotate)?this.labelAutoRotate:j.autoRotate,He=W&&W.find(function(Fn){return Fn.get("className")==="edge-shape"});Gt=je==="start"?0:je==="end"?1:.5;var bn=j.refX||this.refX,wn=j.refY||this.refY;if(u.startPoint.x===u.endPoint.x&&u.startPoint.y===u.endPoint.y)return Fe.x=u.startPoint.x+bn-ee/2,Fe.y=u.startPoint.y+wn-ae/2,Fe;var Nn=Xo(He,Gt,bn-ee/2,wn+ae/2,_e),Bn=Nn.angle;return Bn>.5*Math.PI&&Bn<1.5*Math.PI&&(Nn=Xo(He,Gt,bn+ee/2,wn+ae/2,_e)),_e&&(Fe.x=Nn.x,Fe.y=Nn.y),Fe.rotate=Nn.rotate,Fe},_getTextAlign:function(l,u){var j="center";return u?(u%=2*Math.PI,l!=="center"&&(j=u>=0&&u<=Math.PI/2||u>=1.5*Math.PI&&u<2*Math.PI?l:function(W){var st=W;return W==="start"?st="end":W==="end"&&(st="start"),st}(l)),j):l},getControlPoints:function(l){return l.controlPoints},getPathPoints:function(l){return l},drawShape:function(l,u){var j=this.getShapeStyle(l);return u.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:j})},drawLabel:function(l,u){var j=this.options.labelCfg,W=Object(n.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},j,l.labelCfg),st=this.getLabelStyle(l,W,u),Tt=st.rotate;delete st.rotate;var Gt=u.addShape("text",{attrs:st,name:"text-shape"});if(Tt&&Gt.rotateAtStart(Tt),st.background){var Xt=this.drawLabelBg(l,u,Gt),ee=this.itemType+"-label-bg";Xt.set("classname",ee),Gt.toFront()}return Gt},drawLabelBg:function(l,u,j){var W=this.options.labelCfg,st=Object(n.e)({},W,l.labelCfg),Tt=this.getLabelStyle(l,st,u).rotate,Gt=this.getLabelBgStyleByPosition(j,l,st,u);delete Gt.rotate;var Xt=u.addShape("rect",{name:"text-bg-shape",attrs:Gt});return Tt&&Xt.rotateAtStart(Tt),Xt}},rc=Object(ot.a)(Object(ot.a)({},ys),Wo);yr.registerEdge("single-edge",rc),yr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),yr.registerEdge("spline",{getPath:function(l){return Ns(l)}},"single-edge"),yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(l){var u,j,W=l.startPoint,st=l.endPoint,Tt=(W.x+st.x)/2,Gt=(W.y+st.y)/2;if(l.controlPoints!==void 0){if(j=l.controlPoints[0],u=yt(W,j,st),W.x<=st.x&&W.y>st.y?this.clockwise=u.x>j.x?0:1:W.x<=st.x&&W.y<st.y?this.clockwise=u.x>j.x?1:0:W.x>st.x&&W.y<=st.y?this.clockwise=u.y<j.y?0:1:this.clockwise=u.y<j.y?1:0,(j.x-W.x)/(j.y-W.y)==(st.x-W.x)/(st.y-W.y))return[]}else{l.curveOffset===void 0&&(l.curveOffset=this.curveOffset),Object(n.m)(l.curveOffset)&&(l.curveOffset=l.curveOffset[0]),l.curveOffset<0?this.clockwise=0:this.clockwise=1;var Xt={x:st.x-W.x,y:st.y-W.y},ee=Math.atan2(Xt.y,Xt.x);j={x:l.curveOffset*Math.cos(-Math.PI/2+ee)+Tt,y:l.curveOffset*Math.sin(-Math.PI/2+ee)+Gt},u=yt(W,j,st)}var ae=$t(W,u);return[{x:ae,y:ae}]},getPath:function(l){var u=[];return u.push(["M",l[0].x,l[0].y]),l.length===2?u.push(["L",l[1].x,l[1].y]):u.push(["A",l[1].x,l[1].y,0,0,this.clockwise,l[2].x,l[2].y]),u}},"single-edge"),yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(l){var u=l.controlPoints;if(!u||!u.length){var j=l.startPoint,W=l.endPoint;l.curveOffset===void 0&&(l.curveOffset=this.curveOffset),l.curvePosition===void 0&&(l.curvePosition=this.curvePosition),Object(n.m)(this.curveOffset)&&(l.curveOffset=l.curveOffset[0]),Object(n.m)(this.curvePosition)&&(l.curvePosition=l.curveOffset[0]),u=[ts(j,W,l.curvePosition,l.curveOffset)]}return u},getPath:function(l){var u=[];return u.push(["M",l[0].x,l[0].y]),u.push(["Q",l[1].x,l[1].y,l[2].x,l[2].y]),u}},"single-edge"),yr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(l){var u=l.controlPoints;if(l.curveOffset===void 0&&(l.curveOffset=this.curveOffset),l.curvePosition===void 0&&(l.curvePosition=this.curvePosition),Object(n.t)(l.curveOffset)&&(l.curveOffset=[l.curveOffset,-l.curveOffset]),Object(n.t)(l.curvePosition)&&(l.curvePosition=[l.curvePosition,1-l.curvePosition]),!u||!u.length||u.length<2){var j=l.startPoint,W=l.endPoint;u=[ts(j,W,l.curvePosition[0],l.curveOffset[0]),ts(j,W,l.curvePosition[1],l.curveOffset[1])]}return u},getPath:function(l){var u=[];return u.push(["M",l[0].x,l[0].y]),u.push(["C",l[1].x,l[1].y,l[2].x,l[2].y,l[3].x,l[3].y]),u}},"single-edge"),yr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(l){var u=l.startPoint,j=l.endPoint;return l.curvePosition!==void 0&&(this.curvePosition=l.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:u.x,y:(j.y-u.y)*this.curvePosition[0]+u.y},{x:j.x,y:(j.y-u.y)*this.curvePosition[1]+u.y}]}},"cubic"),yr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(l){var u=l.startPoint,j=l.endPoint;return l.curvePosition!==void 0&&(this.curvePosition=l.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(j.x-u.x)*this.curvePosition[0]+u.x,y:u.y},{x:(j.x-u.x)*this.curvePosition[1]+u.x,y:j.y}]}},"cubic"),yr.registerEdge("loop",{getPathPoints:function(l){return Yo(l)},getControlPoints:function(l){return l.controlPoints},afterDraw:function(l){l.controlPoints=void 0},afterUpdate:function(l){l.controlPoints=void 0}},"cubic");var ic={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:In.comboLabel.refX,refY:In.comboLabel.refY,options:{style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.comboStateStyles)},getSize:function(l){var u=Object(n.c)(l.size||this.options.size||In.defaultCombo.size);return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(l,u){var j=u.position||this.labelPosition,W=l.style,st=l.padding||this.options.padding;Object(n.m)(st)&&(st=st[0]);var Tt=u.refX,Gt=u.refY;Object(n.s)(Tt)&&(Tt=this.refX),Object(n.s)(Gt)&&(Gt=this.refY);var Xt,ee=this.getSize(l),ae=(Math.max(W.r,ee[0]/2)||ee[0]/2)+st;switch(j){case"top":Xt={x:0,y:-ae-Gt,textBaseline:"bottom",textAlign:"center"};break;case"bottom":Xt={x:0,y:ae+Gt,textBaseline:"bottom",textAlign:"center"};break;case"left":Xt={x:-ae+Tt,y:0,textAlign:"left"};break;case"center":Xt={x:0,y:0,text:l.label,textAlign:"center"};break;default:Xt={x:ae+Tt,y:0,textAlign:"right"}}return Xt.text=l.label,Xt},drawShape:function(l,u){var j=this.shapeType,W=this.getShapeStyle(l);return u.addShape(j,{attrs:W,draggable:!0,name:"combo-shape"})},updateShape:function(l,u,j){var W=u.get("keyShape");(l.animate===void 0?this.options.animate:l.animate)&&W.animate?W.animate(j,{duration:200,easing:"easeLinear"}):W.attr(Object(ot.a)({},j)),this.updateLabel(l,u)}},ms=Object(ot.a)(Object(ot.a)({},ys),ic);yr.registerCombo("single-combo",ms),yr.registerCombo("circle",{options:{size:[In.defaultCombo.size[0],In.defaultCombo.size[0]],padding:In.defaultCombo.padding[0],animate:!0,style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(ot.a)({},In.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(l,u){var j=this.getShapeStyle(l);return delete j.height,delete j.width,u.addShape("circle",{attrs:j,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(l){var u=this.options.style,j=l.padding||this.options.padding;Object(n.m)(j)&&(j=j[0]);var W,st={stroke:l.color},Tt=Object(n.A)({},u,st,l.style),Gt=this.getSize(l);W=!Object(n.t)(Tt.r)||isNaN(Tt.r)?Gt[0]/2||In.defaultCombo.style.r:Math.max(Tt.r,Gt[0]/2)||Gt[0]/2,Tt.r=W+j;var Xt=Object(ot.a)({x:0,y:0},Tt);return l.style?l.style.r=W:l.style={r:W},Xt},update:function(l,u){var j=this.getSize(l),W=l.padding||this.options.padding;Object(n.m)(W)&&(W=W[0]);var st=Object(n.c)(l.style),Tt=Math.max(st.r,j[0]/2)||j[0]/2;st.r=Tt+W;var Gt=u.get("sizeCache");Gt&&(Gt.r=st.r);var Xt={stroke:l.color},ee=u.get("keyShape"),ae=Object(n.A)({},ee.attr(),Xt,st);l.style?l.style.r=Tt:l.style={r:Tt},this.updateShape(l,u,ae,!0)}},"single-combo"),yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(ot.a)({},In.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(l,u){var j=this.getShapeStyle(l);return u.addShape("rect",{attrs:j,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(l,u){var j=u.position||this.labelPosition,W=l.style,st=l.padding||this.options.padding;Object(n.t)(st)&&(st=[st,st,st,st]);var Tt=u.refX,Gt=u.refY;Object(n.s)(Tt)&&(Tt=this.refX),Object(n.s)(Gt)&&(Gt=this.refY);var Xt,ee=W.width/2+st[3],ae=W.height/2+st[0];switch(j){case"top":Xt={x:0-ee+Tt,y:0-ae+Gt,textBaseline:"top",textAlign:"left"};break;case"bottom":Xt={x:0,y:ae+Gt,textBaseline:"bottom",textAlign:"center"};break;case"left":Xt={x:0-ee+Gt,y:0,textAlign:"left"};break;case"center":Xt={x:0,y:0,text:l.label,textAlign:"center"};break;default:Xt={x:ee+Tt,y:0,textAlign:"right"}}return Xt.text=l.label,Xt},getShapeStyle:function(l){var u=this.options.style,j=l.padding||this.options.padding;Object(n.t)(j)&&(j=[j,j,j,j]);var W,st,Tt={stroke:l.color},Gt=Object(n.A)({},u,Tt,l.style),Xt=this.getSize(l);W=!Object(n.t)(Gt.width)||isNaN(Gt.width)?Xt[0]||In.defaultCombo.style.width:Math.max(Gt.width,Xt[0])||Xt[0],st=!Object(n.t)(Gt.height)||isNaN(Gt.height)?Xt[1]||In.defaultCombo.style.height:Math.max(Gt.height,Xt[1])||Xt[1];var ee=-W/2-j[3],ae=-st/2-j[0];Gt.width=W+j[1]+j[3],Gt.height=st+j[0]+j[2];var je=Object(ot.a)({x:ee,y:ae},Gt);return l.style?(l.style.width=W,l.style.height=st):l.style={width:W,height:st},je},update:function(l,u){var j=this.getSize(l),W=l.padding||this.options.padding;Object(n.t)(W)&&(W=[W,W,W,W]);var st=Object(n.c)(l.style),Tt=Math.max(st.width,j[0])||j[0],Gt=Math.max(st.height,j[1])||j[1];st.width=Tt+W[1]+W[3],st.height=Gt+W[0]+W[2];var Xt=u.get("sizeCache");Xt&&(Xt.width=st.width,Xt.height=st.height),st.x=-Tt/2-W[3],st.y=-Gt/2-W[0];var ee={stroke:l.color},ae=u.get("keyShape"),je=Object(n.A)({},ae.attr(),ee,st);l.style?(l.style.width=Tt,l.style.height=Gt):l.style={width:Tt,height:Gt},this.updateShape(l,u,je,!1)},updateShape:function(l,u,j){var W=u.get("keyShape");(l.animate===void 0?this.options.animate:l.animate)&&W.animate?W.animate(j,{duration:200,easing:"easeLinear"}):W.attr(Object(ot.a)({},j)),this.updateLabel(l,u)}},"single-combo"),yr.registerNode("simple-circle",{options:{size:In.defaultNode.size,style:{x:0,y:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(l,u){var j=this.getShapeStyle(l);return u.addShape("circle",{attrs:j,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(l){var u=this.getOptions(l).style,j={stroke:l.color},W=Object(n.e)({},u,j),st=this.getSize(l)[0]/2;return Object(ot.a)({x:0,y:0,r:st},W)},update:function(l,u){var j=this.getSize(l),W={stroke:l.color,r:j[0]/2},st=u.get("keyShape"),Tt=Object(n.e)({},st.attr(),W,l.style);this.updateShape(l,u,Tt,!0)}},"single-node"),yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(ot.a)({},In.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(l,u){var j=this.getShapeStyle(l);return u.addShape("rect",{attrs:j,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(l){var u=this.getOptions(l).style,j={stroke:l.color},W=Object(n.A)({},u,j),st=this.getSize(l),Tt=W.width||st[0],Gt=W.height||st[1];return Object(ot.a)({x:-Tt/2,y:-Gt/2,width:Tt,height:Gt},W)},update:function(l,u){u.getContainer();var j=this.getOptions({}).style,W=this.getSize(l),st=u.get("keyShape");l.size||(W[0]=st.attr("width")||j.width,W[1]=st.attr("height")||j.height);var Tt={stroke:l.color,x:-W[0]/2,y:-W[1]/2,width:W[0],height:W[1]},Gt=Object(n.A)({},j,st.attr(),Tt);Gt=Object(n.A)(Gt,l.style),this.updateShape(l,u,Gt,!1)}},"single-node"),yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(l,u){var j=this.shapeType,W=this.getShapeStyle(l);delete W.fill;var st=u.addShape(j,{attrs:W,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(l,st),st},drawClip:function(l,u){var j=this.getOptions(l).clipCfg;if(j.show){var W=j.type,st=j.x,Tt=j.y,Gt=j.style;if(W==="circle"){var Xt=j.r;u.setClip({type:"circle",attrs:Object(ot.a)({r:Xt,x:st,y:Tt},Gt)})}else if(W==="rect"){var ee=j.width,ae=j.height,je=st-ee/2,Fe=Tt-ae/2;u.setClip({type:"rect",attrs:Object(ot.a)({x:je,y:Fe,width:ee,height:ae},Gt)})}else if(W==="ellipse"){var _e=j.rx,He=j.ry;u.setClip({type:"ellipse",attrs:Object(ot.a)({x:st,y:Tt,rx:_e,ry:He},Gt)})}else if(W==="polygon"){var bn=j.points;u.setClip({type:"polygon",attrs:Object(ot.a)({points:bn},Gt)})}else if(W==="path"){var wn=j.path;u.setClip({type:"path",attrs:Object(ot.a)({path:wn},Gt)})}}},getShapeStyle:function(l){var u=this.getOptions(l).style,j=this.getSize(l),W=this.getOptions(l).img,st=j[0],Tt=j[1];return u&&(st=u.width||j[0],Tt=u.height||j[1]),Object(ot.a)({x:-st/2,y:-Tt/2,width:st,height:Tt,img:W},u)},updateShapeStyle:function(l,u){var j=u.getContainer(),W=this.itemType+"-shape",st=j.find(function(Gt){return Gt.get("className")===W})||u.getKeyShape(),Tt=this.getShapeStyle(l);st&&st.attr(Tt)}},"single-node");var oa,fo=yr,bs=Yt.a.transform,zs=Object(ot.a)(Object(ot.a)(Object(ot.a)(Object(ot.a)(Object(ot.a)({},S),f),M),b),{transform:bs,mat3:Yt.b});(function(){function Rt(l){this.graph=l,this.layoutCfg=l.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}Rt.prototype.initLayout=function(){},Rt.prototype.getLayoutType=function(){return this.layoutCfg.type},Rt.prototype.refreshLayout=function(){var l=this.graph;l&&(l.get("animate")?l.positionsAnimate():l.refreshPositions())},Rt.prototype.changeLayout=function(l){var u=this.graph,j=this.layoutMethod;this.layoutType=l,this.layoutCfg=u.get("layout")||{},this.layoutCfg.type=l,j&&j.destroy(),this.layout()},Rt.prototype.changeData=function(){var l=this.layoutMethod;l&&l.destroy(),this.layout()},Rt.prototype.destroyLayout=function(){var l=this.layoutMethod,u=this.graph;l&&l.destroy(),u.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},Rt.prototype.setDataFromGraph=function(){for(var l=[],u=[],j=[],W=this.graph.getNodes(),st=this.graph.getEdges(),Tt=this.graph.getCombos(),Gt=W.length,Xt=0;Xt<Gt;Xt++){var ee=W[Xt];if(ee.isVisible()){var ae=ee.getModel();l.push(ae)}}var je=st.length;for(Xt=0;Xt<je;Xt++){var Fe=st[Xt];Fe&&!Fe.destroyed&&Fe.isVisible()&&((ae=Fe.getModel()).isComboEdge||u.push(ae))}var _e=Tt.length;for(Xt=0;Xt<_e;Xt++){var He=Tt[Xt];!He.destroyed&&He.isVisible()&&(ae=He.getModel(),j.push(ae))}return{nodes:l,edges:u,combos:j}},Rt.prototype.relayout=function(l){var u=this.graph,j=this.layoutMethod,W=this.layoutCfg;if(l){this.data=this.setDataFromGraph();var st=this.data.nodes;if(!st)return!1;this.initPositions(W.center,st),j.init(this.data)}this.layoutType==="force"&&(j.ticking=!1,j.forceSimulation.stop()),u.emit("beforelayout"),j.execute(l),j.isCustomLayout&&W.onLayoutEnd&&W.onLayoutEnd()},Rt.prototype.layoutAnimate=function(){},Rt.prototype.moveToZero=function(){var l=this.graph.get("data").nodes;if(l[0].x!==void 0&&l[0].x!==null&&!Zr(l[0].x)){for(var u=[0,0],j=l.length,W=0;W<j;W++){var st=l[W];u[0]+=st.x,u[1]+=st.y}for(u[0]/=l.length,u[1]/=l.length,W=0;W<j;W++)(st=l[W]).x-=u[0],st.y-=u[1]}},Rt.prototype.initPositions=function(l,u){var j=this.graph;if(!u)return!1;var W=!0,st=.85*j.get("width"),Tt=.85*j.get("height"),Gt=u.length,Xt=Math.ceil(Math.sqrt(Gt)*(st/Tt)),ee=st/(Xt-1),ae=Tt/(Math.ceil(Gt/Xt)-1);isFinite(ee)&&ee||(ee=0),isFinite(ae)&&ee||(ae=0);for(var je=l[0]-st/2,Fe=l[1]-Tt/2,_e=u.length,He=0;He<_e;He++){var bn=u[He];Zr(bn.x)&&(W=!1,bn.x=He%Xt*ee+je),Zr(bn.y)&&(W=!1,bn.y=Math.floor(He/Xt)*ae+Fe)}return W},Rt.prototype.destroy=function(){var l=this.layoutMethod;this.graph=null,l&&(l.destroy(),l.destroyed=!0),this.destroyed=!0}})(),function(Rt){Rt.CLICK="click",Rt.DBLCLICK="dblclick",Rt.MOUSEDOWN="mousedown",Rt.MOUDEUP="mouseup",Rt.CONTEXTMENU="contextmenu",Rt.MOUSEENTER="mouseenter",Rt.MOUSEOUT="mouseout",Rt.MOUSEOVER="mouseover",Rt.MOUSEMOVE="mousemove",Rt.MOUSELEAVE="mouseleave",Rt.DRAGSTART="dragstart",Rt.DRAGEND="dragend",Rt.DRAG="drag",Rt.DRAGENTER="dragenter",Rt.DRAGLEAVE="dragleave",Rt.DRAGOVER="dragover",Rt.DRAGOUT="dragout",Rt.DDROP="drop",Rt.KEYUP="keyup",Rt.KEYDOWN="keydown",Rt.WHEEL="wheel",Rt.FOCUS="focus",Rt.BLUR="blur",Rt.TOUCHSTART="touchstart",Rt.TOUCHMOVE="touchmove",Rt.TOUCHEND="touchend",Rt.NODE_CONTEXTMENU="node:contextmenu",Rt.NODE_CLICK="node:click",Rt.NODE_DBLCLICK="node:dblclick",Rt.NODE_MOUSEDOWN="node:mousedown",Rt.NODE_MOUSEUP="node:mouseup",Rt.NODE_MOUSEENTER="node:mouseenter",Rt.NODE_MOUSELEAVE="node:mouseleave",Rt.NODE_MOUSEMOVE="node:mousemove",Rt.NODE_MOUSEOUT="node:mouseout",Rt.NODE_MOUSEOVER="node:mouseover",Rt.NODE_DROP="node:drop",Rt.NODE_DRAGOVER="node:dragover",Rt.NODE_DRAGENTER="node:dragenter",Rt.NODE_DRAGLEAVE="node:dragleave",Rt.NODE_DRAGSTART="node:dragstart",Rt.NODE_DRAG="node:drag",Rt.NODE_DRAGEND="node:dragend",Rt.COMBO_CONTEXTMENU="combo:contextmenu",Rt.COMBO_CLICK="combo:click",Rt.COMBO_DBLCLICK="combo:dblclick",Rt.COMBO_MOUSEDOWN="combo:mousedown",Rt.COMBO_MOUSEUP="combo:mouseup",Rt.COMBO_MOUSEENTER="combo:mouseenter",Rt.COMBO_MOUSELEAVE="combo:mouseleave",Rt.COMBO_MOUSEMOVE="combo:mousemove",Rt.COMBO_MOUSEOUT="combo:mouseout",Rt.COMBO_MOUSEOVER="combo:mouseover",Rt.COMBO_DROP="combo:drop",Rt.COMBO_DRAGOVER="combo:dragover",Rt.COMBO_DRAGENTER="combo:dragenter",Rt.COMBO_DRAGLEAVE="combo:dragleave",Rt.COMBO_DRAGSTART="combo:dragstart",Rt.COMBO_DRAG="combo:drag",Rt.COMBO_DRAGEND="combo:dragend",Rt.EDGE_CONTEXTMENU="edge:contextmenu",Rt.EDGE_CLICK="edge:click",Rt.EDGE_DBLCLICK="edge:dblclick",Rt.EDGE_MOUSEDOWN="edge:mousedown",Rt.EDGE_MOUSEUP="edge:mouseup",Rt.EDGE_MOUSEENTER="edge:mouseenter",Rt.EDGE_MOUSELEAVE="edge:mouseleave",Rt.EDGE_MOUSEMOVE="edge:mousemove",Rt.EDGE_MOUSEOUT="edge:mouseout",Rt.EDGE_MOUSEOVER="edge:mouseover",Rt.EDGE_DROP="edge:drop",Rt.EDGE_DRAGOVER="edge:dragover",Rt.EDGE_DRAGENTER="edge:dragenter",Rt.EDGE_DRAGLEAVE="edge:dragleave",Rt.CANVAS_CONTEXTMENU="canvas:contextmenu",Rt.CANVAS_CLICK="canvas:click",Rt.CANVAS_DBLCLICK="canvas:dblclick",Rt.CANVAS_MOUSEDOWN="canvas:mousedown",Rt.CANVAS_MOUSEUP="canvas:mouseup",Rt.CANVAS_MOUSEENTER="canvas:mouseenter",Rt.CANVAS_MOUSELEAVE="canvas:mouseleave",Rt.CANVAS_MOUSEMOVE="canvas:mousemove",Rt.CANVAS_MOUSEOUT="canvas:mouseout",Rt.CANVAS_MOUSEOVER="canvas:mouseover",Rt.CANVAS_DROP="canvas:drop",Rt.CANVAS_DRAGENTER="canvas:dragenter",Rt.CANVAS_DRAGLEAVE="canvas:dragleave",Rt.CANVAS_DRAGSTART="canvas:dragstart",Rt.CANVAS_DRAG="canvas:drag",Rt.CANVAS_DRAGEND="canvas:dragend",Rt.BEFORERENDER="beforerender",Rt.AFTERRENDER="afterrender",Rt.BEFOREADDITEM="beforeadditem",Rt.AFTERADDITEM="afteradditem",Rt.BEFOREREMOVEITEM="beforeremoveitem",Rt.AFTERREMOVEITEM="afterremoveitem",Rt.BEFOREUPDATEITEM="beforeupdateitem",Rt.AFTERUPDATEITEM="afterupdateitem",Rt.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",Rt.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",Rt.BEFOREITEMSTATECHANGE="beforeitemstatechange",Rt.AFTERITEMSTATECHANGE="afteritemstatechange",Rt.BEFOREITEMREFRESH="beforeitemrefresh",Rt.AFTERITEMREFRESH="afteritemrefresh",Rt.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",Rt.AFTERITEMSTATESCLEAR="afteritemstatesclear",Rt.BEFOREMODECHANGE="beforemodechange",Rt.AFTERMODECHANGE="aftermodechange",Rt.BEFORELAYOUT="beforelayout",Rt.AFTERLAYOUT="afterlayout",Rt.BEFORECREATEEDGE="beforecreateedge",Rt.AFTERCREATEEDGE="aftercreateedge",Rt.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",Rt.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",Rt.BEFOREGRAPHREFRESH="beforegraphrefresh",Rt.AFTERGRAPHREFRESH="aftergraphrefresh",Rt.BEFOREANIMATE="beforeanimate",Rt.AFTERANIMATE="afteranimate",Rt.BEFOREPAINT="beforepaint",Rt.AFTERPAINT="afterpaint",Rt.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",Rt.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",Rt.GRAPHSTATECHANGE="graphstatechange",Rt.AFTERACTIVATERELATIONS="afteractivaterelations",Rt.NODESELECTCHANGE="nodeselectchange",Rt.TOOLTIPCHANGE="tooltipchange",Rt.WHEELZOOM="wheelzoom",Rt.VIEWPORTCHANGE="viewportchange",Rt.DRAGNODEEND="dragnodeend",Rt.STACKCHANGE="stackchange"}(oa||(oa={})),fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior,fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior;var Ga=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}(),_a=zs.applyMatrix,xu=function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Ga(l,Rt),l.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},l.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},l.prototype.disableRefresh=function(){this.set("refresh",!1)},l.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},l.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},l.prototype.initViewport=function(){var u=this,j=this._cfgs,W=j.graph;if(!this.destroyed){var st=this.get("container");Object(n.x)(st)&&(st=document.getElementById(st));var Tt=Object(y.b)("<div class="+j.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),Gt=0,Xt=0,ee=!1,ae=0,je=0,Fe=0,_e=0,He=0,bn=0;st.addEventListener("mousedown",function(wn){if(j.refresh=!1,wn.target===Tt){var Nn=Tt.style;Fe=parseInt(Nn.width,10),_e=parseInt(Nn.height,10);var Bn=u.get("width"),Fn=u.get("height");Fe>Bn||_e>Fn||(bn=W.getZoom(),He=u.get("ratio"),ee=!0,Gt=wn.clientX,Xt=wn.clientY)}},!1),st.addEventListener("mousemove",function(wn){if(ee&&!Object(n.s)(wn.clientX)&&!Object(n.s)(wn.clientY)){var Nn=u.get("width"),Bn=u.get("height"),Fn=Tt.style;ae=parseInt(Fn.left,10),je=parseInt(Fn.top,10),Fe=parseInt(Fn.width,10),_e=parseInt(Fn.height,10);var sr=Gt-wn.clientX,ur=Xt-wn.clientY;ae-sr<0?sr=ae:ae-sr+Fe>=Nn&&(sr=0),je-ur<0?ur=je:je-ur+_e>=Bn&&(ur=0),ae-=sr,je-=ur,Object(y.c)(Tt,{left:ae+"px",top:je+"px"}),W.translate(sr*bn/He,ur*bn/He),Gt=wn.clientX,Xt=wn.clientY}},!1),st.addEventListener("mouseleave",function(){ee=!1,j.refresh=!0},!1),st.addEventListener("mouseup",function(){ee=!1,j.refresh=!0},!1),this.set("viewport",Tt),st.appendChild(Tt)}},l.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),j=this.get("width"),W=this.get("height"),st=this.get("graph"),Tt=st.get("width"),Gt=Tt/st.get("height"),Xt=st.getGroup(),ee=Xt.getCanvasBBox(),ae=[(ee.minX+ee.maxX)/2,(ee.minY+ee.maxY)/2],je=[ee.maxX-ee.minX,ee.maxY-ee.minY],Fe={centerX:ae[0],centerY:ae[1],width:0,height:0,minX:0,minY:0};ee[0]/ee[1]>Gt?(Fe.width=je[0],Fe.height=Fe.width/Gt):(Fe.height=je[1],Fe.width=Fe.height*Gt),Fe.minX=ae[0]-Fe.width/2,Fe.minY=ae[1]-Fe.height/2;var _e=Xt.getMatrix();_e||(_e=[1,0,0,0,1,0,0,0,1]);var He=q.a.invert([1,0,0,0,1,0,0,0,1],_e),bn=_a({x:Fe.minX,y:Fe.minY},He),wn=st.getCanvasByPoint(bn.x,bn.y),Nn=this.get("viewport");Nn||this.initViewport();var Bn=Tt/Fe.width,Fn=Bn*j,sr=Bn*W,ur=j*-wn.x/Fe.width,Or=W*-wn.y/Fe.height,ei=ur+Fn,Ti=Or+sr;ur<0&&(Fn+=ur,ur=0),ei>j&&(Fn-=ei-j),Or<0&&(sr+=Or,Or=0),Ti>W&&(sr-=Ti-W),this.set("ratio",u);var kr=ur+"px",yi=Or+"px";Object(y.c)(Nn,{left:kr,top:yi,width:Fn+"px",height:sr+"px"})}},l.prototype.init=function(){this.initContainer()},l.prototype.initContainer=function(){var u=this.get("graph"),j=u.get("width"),W=u.get("height")/j,st=this.get("className"),Tt=this.get("container"),Gt=this.get("width"),Xt=this.get("height");Gt||Xt||(Gt=200),Gt?(Xt=W*Gt,this.set("height",Xt)):(Gt=1/W*Xt,this.set("width",Gt));var ee=Object(y.b)("<div class='"+st+"' style='width: "+Gt+"px; height: "+Xt+"px; overflow: hidden; position: relative;'></div>");Object(n.x)(Tt)&&(Tt=document.getElementById(Tt)),Tt?Tt.appendChild(ee):u.get("container").appendChild(ee),this.set("container",ee);var ae=Object(y.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');ee.appendChild(ae);var je=Object(y.b)('<span style="display: table-cell; vertical-align: middle; "></span>');ae.appendChild(je),this.set("containerDOM",ae),this.set("containerSpan",je);var Fe=Object(y.b)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",Fe),this.updateImgSize(),je.appendChild(Fe),this.updateCanvas()},l.prototype.updateImgSize=function(){var u=this.get("imgDOM"),j=this.get("width"),W=this.get("height");u.onload=function(){var st=function(Tt,Gt){var Xt,ee;if(Tt.naturalWidth)Xt=Tt.naturalWidth,ee=Tt.naturalHeight;else{var ae=new Image;ae.src=Tt.src,ae.onload=function(){Gt&&Gt(ae.width,ae.height)}}return[Xt,ee]}(u);st[0]>st[1]?u.width=j:u.height=W}},l.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var j=this.get("width")/u.get("canvas").getCanvasBBox().width;this.set("ratio",j),this.updateViewport()}}},l.prototype.getViewport=function(){return this.get("viewport")},l.prototype.getContainer=function(){return this.get("container")},l.prototype.updateGraphImg=function(u){this.get("imgDOM").remove(),this.set("graphImg",u);var j=Object(y.b)('<img alt="" src="'+u+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",j),j.src=u,this.updateImgSize(),this.get("containerSpan").appendChild(j),this.updateCanvas()},l.prototype.destroy=function(){var u=this.get("container");u.parentNode.removeChild(u)},l}(s),Ou=function(){var Rt=function(u,j){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,j)};return function(l,u){function j(){this.constructor=l}Rt(l,u),l.prototype=u===null?Object.create(u):(j.prototype=u.prototype,new j)}}(),la=function(){return(la=Object.assign||function(l){for(var u,j=1,W=arguments.length;j<W;j++)for(var st in u=arguments[j])Object.prototype.hasOwnProperty.call(u,st)&&(l[st]=u[st]);return l}).apply(this,arguments)},rs=zs.distance,Ca={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Vs={PluginBase:s,Menu:T,Grid:O,Minimap:ct,Bundling:tt,ToolBar:k,Tooltip:g,Fisheye:P,TimeBar:Te,ImageMinimap:xu,EdgeFilterLens:function(Rt){function l(){return Rt!==null&&Rt.apply(this,arguments)||this}return Ou(l,Rt),l.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(n.c)(Ca),showLabel:"edge",scaleRBy:"wheel"}},l.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"filter"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"filter"}}return u},l.prototype.init=function(){var u=this.get("showLabel"),j=u==="node"||u==="both",W=u==="edge"||u==="both";this.set("showNodeLabel",j),this.set("showEdgeLabel",W),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},l.prototype.createDelegate=function(u){var j=this,W=j.get("delegate");W&&!W.destroyed||(j.filter(u),(W=j.get("delegate")).on("dragstart",function(st){}),W.on("drag",function(st){j.filter(st)}),this.get("scaleRBy")==="wheel"&&W.on("mousewheel",function(st){j.scaleRByWheel(st)}))},l.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var j,W=this.get("graph"),st=this.get("delegate");(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY),j=u.originalEvent.wheelDelta<0?.95:1/.95;var Tt=this.get("maxR"),Gt=this.get("minR"),Xt=this.get("r");(Xt>(Tt||W.get("height"))&&j>1||Xt<(Gt||.05*W.get("height"))&&j<1)&&(j=1),Xt*=j,this.set("r",Xt),this.filter(u)}},l.prototype.filter=function(u){var j=this.get("graph"),W=j.getNodes(),st={},Tt=this.get("r"),Gt=this.get("type"),Xt={x:u.x,y:u.y};this.updateDelegate(Xt,Tt);var ee=this.get("shouldShow"),ae=this.get("vShapes");ae&&ae.forEach(function(wn){wn.remove(),wn.destroy()}),ae=[],W.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.x,Fn=Nn.y;rs({x:Bn,y:Fn},Xt)<Tt&&(st[Nn.id]=wn)});var je=j.getEdges(),Fe=[];je.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.source,Fn=Nn.target;ee(Nn)&&(Gt==="only-source"||Gt==="one"?st[Bn]&&!st[Fn]&&Fe.push(wn):Gt==="only-target"||Gt==="one"?st[Fn]&&!st[Bn]&&Fe.push(wn):Gt==="both"&&st[Bn]&&st[Fn]&&Fe.push(wn))});var _e=this.get("showNodeLabel"),He=this.get("showEdgelabel"),bn=j.get("group");Fe.forEach(function(wn){wn.get("group").get("children").forEach(function(Nn){var Bn=Nn.get("type"),Fn=bn.addShape(Bn,{attrs:Nn.attr()});ae.push(Fn),_e&&Bn==="text"&&Fn.set("visible",!0)})}),Object.keys(st).forEach(function(wn){var Nn=st[wn].get("group").clone();if(bn.add(Nn),ae.push(Nn),He)for(var Bn=Nn.get("children"),Fn=0;Fn<Bn.length;Fn++){var sr=Bn[Fn];sr.get("type")==="text"&&sr.set("visible",!0)}}),this.set("vShapes",ae)},l.prototype.updateParams=function(u){var j=u.r,W=u.trigger,st=u.minR,Tt=u.maxR,Gt=u.scaleRBy,Xt=u.showLabel,ee=u.shouldShow;if(isNaN(u.r)||this.set("r",j),isNaN(Tt)||this.set("maxR",Tt),isNaN(st)||this.set("minR",st),W!=="mousemove"&&W!=="click"||this.set("trigger",W),Gt==="wheel"||Gt==="unset"){this.set("scaleRBy",Gt),this.get("delegate").remove(),this.get("delegate").destroy();var ae=this.get("dPercentText");ae&&(ae.remove(),ae.destroy())}Xt!=="node"&&Xt!=="both"||this.set("showNodeLabel",!0),Xt!=="edge"&&Xt!=="both"||this.set("showEdgeLabel",!0),ee&&this.set("shouldShow",ee)},l.prototype.updateDelegate=function(u,j){var W=this,st=W.get("graph"),Tt=W.get("delegate");if(!Tt||Tt.destroyed){var Gt=st.get("group"),Xt=W.get("delegateStyle")||Ca;Tt=Gt.addShape("circle",{attrs:la({r:j,x:u.x,y:u.y},Xt),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&Tt.on("mousewheel",function(ee){W.scaleRByWheel(ee)})}else Tt.attr({x:u.x,y:u.y,r:j});W.set("delegate",Tt)},l.prototype.clear=function(){var u=this.get("vShapes");u&&u.forEach(function(W){W.remove(),W.destroy()}),u=[],this.set("vShapes",u);var j=this.get("delegate");j&&!j.destroyed&&(j.remove(),j.destroy())},l.prototype.destroy=function(){this.clear()},l}(s)};A.a=Vs},function(a,A,e){"use strict";e.d(A,"b",function(){return v}),e.d(A,"c",function(){return b}),e.d(A,"a",function(){return S});var i=e(22);function v(f,M){var I=f.cfg.el,y=f.attr(),n={dx:y.shadowOffsetX,dy:y.shadowOffsetY,blur:y.shadowBlur,color:y.shadowColor};if(n.dx||n.dy||n.blur||n.color){var s=M.find("filter",n);s||(s=M.addShadow(n)),I.setAttribute("filter","url(#"+s+")")}else I.removeAttribute("filter")}function b(f){var M=f.attr().matrix;if(M){for(var I=f.cfg.el,y=[],n=0;n<9;n+=3)y.push(M[n]+","+M[n+1]);(y=y.join(",")).indexOf("NaN")===-1?I.setAttribute("transform","matrix("+y+")"):console.warn("invalid matrix:",M)}}function S(f,M){var I=f.getClip(),y=f.get("el");if(I){if(I&&!y.hasAttribute("clip-path")){Object(i.a)(I),I.createPath(M);var n=M.addClip(I);y.setAttribute("clip-path","url(#"+n+")")}}else y.removeAttribute("clip-path")}},function(a,A,e){"use strict";var i=e(24),v=e(46).Graph;function b(f,M,I,y){var n;do n=i.uniqueId(y);while(f.hasNode(n));return I.dummy=M,f.setNode(n,I),n}function S(f){return i.max(i.map(f.nodes(),function(M){var I=f.node(M).rank;if(!i.isUndefined(I))return I}))}a.exports={addDummyNode:b,simplify:function(M){var I=new v().setGraph(M.graph());return i.forEach(M.nodes(),function(y){I.setNode(y,M.node(y))}),i.forEach(M.edges(),function(y){var n=I.edge(y.v,y.w)||{weight:0,minlen:1},s=M.edge(y);I.setEdge(y.v,y.w,{weight:n.weight+s.weight,minlen:Math.max(n.minlen,s.minlen)})}),I},asNonCompoundGraph:function(M){var I=new v({multigraph:M.isMultigraph()}).setGraph(M.graph());return i.forEach(M.nodes(),function(y){M.children(y).length||I.setNode(y,M.node(y))}),i.forEach(M.edges(),function(y){I.setEdge(y,M.edge(y))}),I},successorWeights:function(M){var I=i.map(M.nodes(),function(y){var n={};return i.forEach(M.outEdges(y),function(s){n[s.w]=(n[s.w]||0)+M.edge(s).weight}),n});return i.zipObject(M.nodes(),I)},predecessorWeights:function(M){var I=i.map(M.nodes(),function(y){var n={};return i.forEach(M.inEdges(y),function(s){n[s.v]=(n[s.v]||0)+M.edge(s).weight}),n});return i.zipObject(M.nodes(),I)},intersectRect:function(M,I){var y,n,s=M.x,d=M.y,E=I.x-s,O=I.y-d,C=M.width/2,p=M.height/2;if(!E&&!O)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(O)*C>Math.abs(E)*p?(O<0&&(p=-p),y=p*E/O,n=p):(E<0&&(C=-C),y=C,n=C*O/E),{x:s+y,y:d+n}},buildLayerMatrix:function(M){var I=i.map(i.range(S(M)+1),function(){return[]});return i.forEach(M.nodes(),function(y){var n=M.node(y),s=n.rank;i.isUndefined(s)||(I[s][n.order]=y)}),I},normalizeRanks:function(M){var I=i.min(i.map(M.nodes(),function(y){return M.node(y).rank}));i.forEach(M.nodes(),function(y){var n=M.node(y);i.has(n,"rank")&&(n.rank-=I)})},removeEmptyRanks:function(M){var I=i.min(i.map(M.nodes(),function(d){return M.node(d).rank})),y=[];i.forEach(M.nodes(),function(d){var E=M.node(d).rank-I;y[E]||(y[E]=[]),y[E].push(d)});var n=0,s=M.graph().nodeRankFactor;i.forEach(y,function(d,E){i.isUndefined(d)&&E%s!=0?--n:n&&i.forEach(d,function(O){M.node(O).rank+=n})})},addBorderNode:function(M,I,y,n){var s={width:0,height:0};return arguments.length>=4&&(s.rank=y,s.order=n),b(M,"border",s,I)},maxRank:S,partition:function(M,I){var y={lhs:[],rhs:[]};return i.forEach(M,function(n){I(n)?y.lhs.push(n):y.rhs.push(n)}),y},time:function(M,I){var y=i.now();try{return I()}finally{console.log(M+" time: "+(i.now()-y)+"ms")}},notime:function(M,I){return I()}}},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"proccessToFunc",function(){return I}),e.d(i,"buildTextureData",function(){return y}),e.d(i,"buildTextureDataWithOneEdgeAttr",function(){return n}),e.d(i,"buildTextureDataWithTwoEdgeAttr",function(){return s}),e.d(i,"attributesToTextureData",function(){return d}),e.d(i,"arrayToTextureData",function(){return E}),e.d(i,"radialLayout",function(){return O});var v=e(1),b=e(123),S=e(5),f=e(0),M=S.n.traverseTree,I=function(T,N){return T?Object(f.t)(T)?function(Y){return T}:T:function(Y){return N||1}},y=function(T,N){var Y=[],q=[],nt={},vt=0;for(vt=0;vt<T.length;vt++){var ht=T[vt];nt[ht.id]=vt,Y.push(ht.x),Y.push(ht.y),Y.push(0),Y.push(0),q.push([])}for(vt=0;vt<N.length;vt++){var St=N[vt];q[nt[St.source]].push(nt[St.target]),q[nt[St.target]].push(nt[St.source])}var wt=0;for(vt=0;vt<T.length;vt++){var xt=Y.length,ft=q[vt],Ft=ft.length;Y[4*vt+2]=xt,Y[4*vt+3]=ft.length,wt=Math.max(wt,ft.length);for(var kt=0;kt<Ft;++kt){var Ot=ft[kt];Y.push(+Ot)}}for(;Y.length%4!=0;)Y.push(0);return{array:new Float32Array(Y),maxEdgePerVetex:wt}},n=function(T,N,Y){var q=[],nt=[],vt={},ht=0;for(ht=0;ht<T.length;ht++){var St=T[ht];vt[St.id]=ht,q.push(St.x),q.push(St.y),q.push(0),q.push(0),nt.push([])}for(ht=0;ht<N.length;ht++){var wt=N[ht];nt[vt[wt.source]].push(vt[wt.target]),nt[vt[wt.source]].push(Y(wt)),nt[vt[wt.target]].push(vt[wt.source]),nt[vt[wt.target]].push(Y(wt))}var xt=0;for(ht=0;ht<T.length;ht++){var ft=q.length,Ft=nt[ht],kt=Ft.length;q[4*ht+2]=ft,q[4*ht+3]=kt/2,xt=Math.max(xt,kt/2);for(var Ot=0;Ot<kt;++Ot){var X=Ft[Ot];q.push(+X)}}for(;q.length%4!=0;)q.push(0);return{array:new Float32Array(q),maxEdgePerVetex:xt}},s=function(T,N,Y,q){var nt=[],vt=[],ht={},St=0;for(St=0;St<T.length;St++){var wt=T[St];ht[wt.id]=St,nt.push(wt.x),nt.push(wt.y),nt.push(0),nt.push(0),vt.push([])}for(St=0;St<N.length;St++){var xt=N[St];vt[ht[xt.source]].push(ht[xt.target]),vt[ht[xt.source]].push(Y(xt)),vt[ht[xt.source]].push(q(xt)),vt[ht[xt.source]].push(0),vt[ht[xt.target]].push(ht[xt.source]),vt[ht[xt.target]].push(Y(xt)),vt[ht[xt.target]].push(q(xt)),vt[ht[xt.target]].push(0)}var ft=0;for(St=0;St<T.length;St++){var Ft=nt.length,kt=vt[St],Ot=kt.length;nt[4*St+2]=Ft+1048576*Ot/4,nt[4*St+3]=0,ft=Math.max(ft,Ot/4);for(var X=0;X<Ot;++X){var ct=kt[X];nt.push(+ct)}}for(;nt.length%4!=0;)nt.push(0);return{array:new Float32Array(nt),maxEdgePerVetex:ft}},d=function(T,N){var Y=[],q=T.length,nt={};return N.forEach(function(vt){T.forEach(function(ht,St){if(nt[vt[ht]]===void 0&&(nt[vt[ht]]=Object.keys(nt).length),Y.push(nt[vt[ht]]),St===q-1)for(;Y.length%4!=0;)Y.push(0)})}),{array:new Float32Array(Y),count:Object.keys(nt).length}},E=function(T){for(var N=[],Y=T.length,q=T[0].length,nt=function(St){T.forEach(function(wt,xt){if(N.push(wt[St]),xt===Y-1)for(;N.length%4!=0;)N.push(0)})},vt=0;vt<q;vt++)nt(vt);return new Float32Array(N)},O=function(T,N){var Y={x:1/0,y:1/0},q={x:-1/0,y:-1/0},nt="x",vt="y";N&&["V","TB","BT"].indexOf(N)>=0&&(vt="x",nt="y");var ht=0;M(T,function(xt){return ht++,xt.x>q.x&&(q.x=xt.x),xt.x<Y.x&&(Y.x=xt.x),xt.y>q.y&&(q.y=xt.y),xt.y<Y.y&&(Y.y=xt.y),!0});var St=2*Math.PI/ht,wt=q[vt]-Y[vt];return wt===0||M(T,function(xt){var ft=(xt[vt]-Y[vt])/wt*(2*Math.PI-St)+St,Ft=Math.abs(nt==="x"?xt.x-T.x:xt.y-T.y);return xt.x=Ft*Math.cos(ft),xt.y=Ft*Math.sin(ft),!0}),T},C=e(121),p=Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},S.n),b),i),C);A.a=p},function(a,A,e){"use strict";function i(S,f){var M=[],I=S[0],y=S[1],n=S[2],s=S[3],d=S[4],E=S[5],O=S[6],C=S[7],p=S[8],x=f[0],T=f[1],N=f[2],Y=f[3],q=f[4],nt=f[5],vt=f[6],ht=f[7],St=f[8];return M[0]=x*I+T*s+N*O,M[1]=x*y+T*d+N*C,M[2]=x*n+T*E+N*p,M[3]=Y*I+q*s+nt*O,M[4]=Y*y+q*d+nt*C,M[5]=Y*n+q*E+nt*p,M[6]=vt*I+ht*s+St*O,M[7]=vt*y+ht*d+St*C,M[8]=vt*n+ht*E+St*p,M}function v(S,f){var M=[],I=f[0],y=f[1];return M[0]=S[0]*I+S[3]*y+S[6],M[1]=S[1]*I+S[4]*y+S[7],M}function b(S){var f=[],M=S[0],I=S[1],y=S[2],n=S[3],s=S[4],d=S[5],E=S[6],O=S[7],C=S[8],p=C*s-d*O,x=-C*n+d*E,T=O*n-s*E,N=M*p+I*x+y*T;return N?(N=1/N,f[0]=p*N,f[1]=(-C*I+y*O)*N,f[2]=(d*I-y*s)*N,f[3]=x*N,f[4]=(C*M-y*E)*N,f[5]=(-d*M+y*n)*N,f[6]=T*N,f[7]=(-O*M+I*E)*N,f[8]=(s*M-I*n)*N,f):null}e.d(A,"b",function(){return i}),e.d(A,"c",function(){return v}),e.d(A,"a",function(){return b})},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return v}),e.d(A,"clone",function(){return b}),e.d(A,"length",function(){return S}),e.d(A,"fromValues",function(){return f}),e.d(A,"copy",function(){return M}),e.d(A,"set",function(){return I}),e.d(A,"add",function(){return y}),e.d(A,"subtract",function(){return n}),e.d(A,"multiply",function(){return s}),e.d(A,"divide",function(){return d}),e.d(A,"ceil",function(){return E}),e.d(A,"floor",function(){return O}),e.d(A,"min",function(){return C}),e.d(A,"max",function(){return p}),e.d(A,"round",function(){return x}),e.d(A,"scale",function(){return T}),e.d(A,"scaleAndAdd",function(){return N}),e.d(A,"distance",function(){return Y}),e.d(A,"squaredDistance",function(){return q}),e.d(A,"squaredLength",function(){return nt}),e.d(A,"negate",function(){return vt}),e.d(A,"inverse",function(){return ht}),e.d(A,"normalize",function(){return St}),e.d(A,"dot",function(){return wt}),e.d(A,"cross",function(){return xt}),e.d(A,"lerp",function(){return ft}),e.d(A,"hermite",function(){return Ft}),e.d(A,"bezier",function(){return kt}),e.d(A,"random",function(){return Ot}),e.d(A,"transformMat4",function(){return X}),e.d(A,"transformMat3",function(){return ct}),e.d(A,"transformQuat",function(){return dt}),e.d(A,"rotateX",function(){return pt}),e.d(A,"rotateY",function(){return Mt}),e.d(A,"rotateZ",function(){return tt}),e.d(A,"angle",function(){return lt}),e.d(A,"zero",function(){return it}),e.d(A,"str",function(){return U}),e.d(A,"exactEquals",function(){return P}),e.d(A,"equals",function(){return H}),e.d(A,"sub",function(){return h}),e.d(A,"mul",function(){return g}),e.d(A,"div",function(){return G}),e.d(A,"dist",function(){return V}),e.d(A,"sqrDist",function(){return $}),e.d(A,"len",function(){return rt}),e.d(A,"sqrLen",function(){return ot}),e.d(A,"forEach",function(){return At});var i=e(11);function v(){var gt=new i.a(3);return i.a!=Float32Array&&(gt[0]=0,gt[1]=0,gt[2]=0),gt}function b(gt){var mt=new i.a(3);return mt[0]=gt[0],mt[1]=gt[1],mt[2]=gt[2],mt}function S(gt){var mt=gt[0],bt=gt[1],jt=gt[2];return Math.hypot(mt,bt,jt)}function f(gt,mt,bt){var jt=new i.a(3);return jt[0]=gt,jt[1]=mt,jt[2]=bt,jt}function M(gt,mt){return gt[0]=mt[0],gt[1]=mt[1],gt[2]=mt[2],gt}function I(gt,mt,bt,jt){return gt[0]=mt,gt[1]=bt,gt[2]=jt,gt}function y(gt,mt,bt){return gt[0]=mt[0]+bt[0],gt[1]=mt[1]+bt[1],gt[2]=mt[2]+bt[2],gt}function n(gt,mt,bt){return gt[0]=mt[0]-bt[0],gt[1]=mt[1]-bt[1],gt[2]=mt[2]-bt[2],gt}function s(gt,mt,bt){return gt[0]=mt[0]*bt[0],gt[1]=mt[1]*bt[1],gt[2]=mt[2]*bt[2],gt}function d(gt,mt,bt){return gt[0]=mt[0]/bt[0],gt[1]=mt[1]/bt[1],gt[2]=mt[2]/bt[2],gt}function E(gt,mt){return gt[0]=Math.ceil(mt[0]),gt[1]=Math.ceil(mt[1]),gt[2]=Math.ceil(mt[2]),gt}function O(gt,mt){return gt[0]=Math.floor(mt[0]),gt[1]=Math.floor(mt[1]),gt[2]=Math.floor(mt[2]),gt}function C(gt,mt,bt){return gt[0]=Math.min(mt[0],bt[0]),gt[1]=Math.min(mt[1],bt[1]),gt[2]=Math.min(mt[2],bt[2]),gt}function p(gt,mt,bt){return gt[0]=Math.max(mt[0],bt[0]),gt[1]=Math.max(mt[1],bt[1]),gt[2]=Math.max(mt[2],bt[2]),gt}function x(gt,mt){return gt[0]=Math.round(mt[0]),gt[1]=Math.round(mt[1]),gt[2]=Math.round(mt[2]),gt}function T(gt,mt,bt){return gt[0]=mt[0]*bt,gt[1]=mt[1]*bt,gt[2]=mt[2]*bt,gt}function N(gt,mt,bt,jt){return gt[0]=mt[0]+bt[0]*jt,gt[1]=mt[1]+bt[1]*jt,gt[2]=mt[2]+bt[2]*jt,gt}function Y(gt,mt){var bt=mt[0]-gt[0],jt=mt[1]-gt[1],Dt=mt[2]-gt[2];return Math.hypot(bt,jt,Dt)}function q(gt,mt){var bt=mt[0]-gt[0],jt=mt[1]-gt[1],Dt=mt[2]-gt[2];return bt*bt+jt*jt+Dt*Dt}function nt(gt){var mt=gt[0],bt=gt[1],jt=gt[2];return mt*mt+bt*bt+jt*jt}function vt(gt,mt){return gt[0]=-mt[0],gt[1]=-mt[1],gt[2]=-mt[2],gt}function ht(gt,mt){return gt[0]=1/mt[0],gt[1]=1/mt[1],gt[2]=1/mt[2],gt}function St(gt,mt){var bt=mt[0],jt=mt[1],Dt=mt[2],Ut=bt*bt+jt*jt+Dt*Dt;return Ut>0&&(Ut=1/Math.sqrt(Ut)),gt[0]=mt[0]*Ut,gt[1]=mt[1]*Ut,gt[2]=mt[2]*Ut,gt}function wt(gt,mt){return gt[0]*mt[0]+gt[1]*mt[1]+gt[2]*mt[2]}function xt(gt,mt,bt){var jt=mt[0],Dt=mt[1],Ut=mt[2],Ct=bt[0],Vt=bt[1],Ht=bt[2];return gt[0]=Dt*Ht-Ut*Vt,gt[1]=Ut*Ct-jt*Ht,gt[2]=jt*Vt-Dt*Ct,gt}function ft(gt,mt,bt,jt){var Dt=mt[0],Ut=mt[1],Ct=mt[2];return gt[0]=Dt+jt*(bt[0]-Dt),gt[1]=Ut+jt*(bt[1]-Ut),gt[2]=Ct+jt*(bt[2]-Ct),gt}function Ft(gt,mt,bt,jt,Dt,Ut){var Ct=Ut*Ut,Vt=Ct*(2*Ut-3)+1,Ht=Ct*(Ut-2)+Ut,re=Ct*(Ut-1),pe=Ct*(3-2*Ut);return gt[0]=mt[0]*Vt+bt[0]*Ht+jt[0]*re+Dt[0]*pe,gt[1]=mt[1]*Vt+bt[1]*Ht+jt[1]*re+Dt[1]*pe,gt[2]=mt[2]*Vt+bt[2]*Ht+jt[2]*re+Dt[2]*pe,gt}function kt(gt,mt,bt,jt,Dt,Ut){var Ct=1-Ut,Vt=Ct*Ct,Ht=Ut*Ut,re=Vt*Ct,pe=3*Ut*Vt,ye=3*Ht*Ct,we=Ht*Ut;return gt[0]=mt[0]*re+bt[0]*pe+jt[0]*ye+Dt[0]*we,gt[1]=mt[1]*re+bt[1]*pe+jt[1]*ye+Dt[1]*we,gt[2]=mt[2]*re+bt[2]*pe+jt[2]*ye+Dt[2]*we,gt}function Ot(gt,mt){mt=mt||1;var bt=2*i.c()*Math.PI,jt=2*i.c()-1,Dt=Math.sqrt(1-jt*jt)*mt;return gt[0]=Math.cos(bt)*Dt,gt[1]=Math.sin(bt)*Dt,gt[2]=jt*mt,gt}function X(gt,mt,bt){var jt=mt[0],Dt=mt[1],Ut=mt[2],Ct=bt[3]*jt+bt[7]*Dt+bt[11]*Ut+bt[15];return Ct=Ct||1,gt[0]=(bt[0]*jt+bt[4]*Dt+bt[8]*Ut+bt[12])/Ct,gt[1]=(bt[1]*jt+bt[5]*Dt+bt[9]*Ut+bt[13])/Ct,gt[2]=(bt[2]*jt+bt[6]*Dt+bt[10]*Ut+bt[14])/Ct,gt}function ct(gt,mt,bt){var jt=mt[0],Dt=mt[1],Ut=mt[2];return gt[0]=jt*bt[0]+Dt*bt[3]+Ut*bt[6],gt[1]=jt*bt[1]+Dt*bt[4]+Ut*bt[7],gt[2]=jt*bt[2]+Dt*bt[5]+Ut*bt[8],gt}function dt(gt,mt,bt){var jt=bt[0],Dt=bt[1],Ut=bt[2],Ct=bt[3],Vt=mt[0],Ht=mt[1],re=mt[2],pe=Dt*re-Ut*Ht,ye=Ut*Vt-jt*re,we=jt*Ht-Dt*Vt,Ne=Dt*we-Ut*ye,Ke=Ut*pe-jt*we,pn=jt*ye-Dt*pe,hn=2*Ct;return pe*=hn,ye*=hn,we*=hn,Ne*=2,Ke*=2,pn*=2,gt[0]=Vt+pe+Ne,gt[1]=Ht+ye+Ke,gt[2]=re+we+pn,gt}function pt(gt,mt,bt,jt){var Dt=[],Ut=[];return Dt[0]=mt[0]-bt[0],Dt[1]=mt[1]-bt[1],Dt[2]=mt[2]-bt[2],Ut[0]=Dt[0],Ut[1]=Dt[1]*Math.cos(jt)-Dt[2]*Math.sin(jt),Ut[2]=Dt[1]*Math.sin(jt)+Dt[2]*Math.cos(jt),gt[0]=Ut[0]+bt[0],gt[1]=Ut[1]+bt[1],gt[2]=Ut[2]+bt[2],gt}function Mt(gt,mt,bt,jt){var Dt=[],Ut=[];return Dt[0]=mt[0]-bt[0],Dt[1]=mt[1]-bt[1],Dt[2]=mt[2]-bt[2],Ut[0]=Dt[2]*Math.sin(jt)+Dt[0]*Math.cos(jt),Ut[1]=Dt[1],Ut[2]=Dt[2]*Math.cos(jt)-Dt[0]*Math.sin(jt),gt[0]=Ut[0]+bt[0],gt[1]=Ut[1]+bt[1],gt[2]=Ut[2]+bt[2],gt}function tt(gt,mt,bt,jt){var Dt=[],Ut=[];return Dt[0]=mt[0]-bt[0],Dt[1]=mt[1]-bt[1],Dt[2]=mt[2]-bt[2],Ut[0]=Dt[0]*Math.cos(jt)-Dt[1]*Math.sin(jt),Ut[1]=Dt[0]*Math.sin(jt)+Dt[1]*Math.cos(jt),Ut[2]=Dt[2],gt[0]=Ut[0]+bt[0],gt[1]=Ut[1]+bt[1],gt[2]=Ut[2]+bt[2],gt}function lt(gt,mt){var bt=gt[0],jt=gt[1],Dt=gt[2],Ut=mt[0],Ct=mt[1],Vt=mt[2],Ht=Math.sqrt(bt*bt+jt*jt+Dt*Dt)*Math.sqrt(Ut*Ut+Ct*Ct+Vt*Vt),re=Ht&&wt(gt,mt)/Ht;return Math.acos(Math.min(Math.max(re,-1),1))}function it(gt){return gt[0]=0,gt[1]=0,gt[2]=0,gt}function U(gt){return"vec3("+gt[0]+", "+gt[1]+", "+gt[2]+")"}function P(gt,mt){return gt[0]===mt[0]&&gt[1]===mt[1]&&gt[2]===mt[2]}function H(gt,mt){var bt=gt[0],jt=gt[1],Dt=gt[2],Ut=mt[0],Ct=mt[1],Vt=mt[2];return Math.abs(bt-Ut)<=i.b*Math.max(1,Math.abs(bt),Math.abs(Ut))&&Math.abs(jt-Ct)<=i.b*Math.max(1,Math.abs(jt),Math.abs(Ct))&&Math.abs(Dt-Vt)<=i.b*Math.max(1,Math.abs(Dt),Math.abs(Vt))}var k,h=n,g=s,G=d,V=Y,$=q,rt=S,ot=nt,At=(k=v(),function(gt,mt,bt,jt,Dt,Ut){var Ct,Vt;for(mt||(mt=3),bt||(bt=0),Vt=jt?Math.min(jt*mt+bt,gt.length):gt.length,Ct=bt;Ct<Vt;Ct+=mt)k[0]=gt[Ct],k[1]=gt[Ct+1],k[2]=gt[Ct+2],Dt(k,k,Ut),gt[Ct]=k[0],gt[Ct+1]=k[1],gt[Ct+2]=k[2];return gt})},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.STACK_OVERFLOW=A.CIRCULAR_DEPENDENCY_IN_FACTORY=A.POST_CONSTRUCT_ERROR=A.MULTIPLE_POST_CONSTRUCT_METHODS=A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=A.ARGUMENTS_LENGTH_MISMATCH=A.INVALID_DECORATOR_OPERATION=A.INVALID_TO_SELF_VALUE=A.INVALID_FUNCTION_BINDING=A.INVALID_MIDDLEWARE_RETURN=A.NO_MORE_SNAPSHOTS_AVAILABLE=A.INVALID_BINDING_TYPE=A.NOT_IMPLEMENTED=A.CIRCULAR_DEPENDENCY=A.UNDEFINED_INJECT_ANNOTATION=A.MISSING_INJECT_ANNOTATION=A.MISSING_INJECTABLE_ANNOTATION=A.NOT_REGISTERED=A.CANNOT_UNBIND=A.AMBIGUOUS_MATCH=A.KEY_NOT_FOUND=A.NULL_ARGUMENT=A.DUPLICATED_METADATA=A.DUPLICATED_INJECTABLE_DECORATOR=void 0,A.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",A.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",A.NULL_ARGUMENT="NULL argument",A.KEY_NOT_FOUND="Key Not Found",A.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",A.CANNOT_UNBIND="Could not unbind serviceIdentifier:",A.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",A.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",A.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",A.UNDEFINED_INJECT_ANNOTATION=function(i){return"@inject called with undefined this could mean that the class "+i+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},A.CIRCULAR_DEPENDENCY="Circular dependency found:",A.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",A.INVALID_BINDING_TYPE="Invalid binding type:",A.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",A.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",A.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",A.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",A.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",A.ARGUMENTS_LENGTH_MISMATCH=function(){for(var i=[],v=0;v<arguments.length;v++)i[v]=arguments[v];return"The number of constructor arguments in the derived class "+i[0]+" must be >= than the number of constructor arguments of its base class."},A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",A.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",A.POST_CONSTRUCT_ERROR=function(){for(var i=[],v=0;v<arguments.length;v++)i[v]=arguments[v];return"@postConstruct error in class "+i[0]+": "+i[1]},A.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var i=[],v=0;v<arguments.length;v++)i[v]=arguments[v];return"It looks like there is a circular dependency in one of the '"+i[0]+"' bindings. Please investigate bindings withservice identifier '"+i[1]+"'."},A.STACK_OVERFLOW="Maximum call stack size exceeded"},function(a,A,e){var i;try{i={clone:e(272),constant:e(134),each:e(181),filter:e(184),has:e(195),isArray:e(26),isEmpty:e(348),isFunction:e(83),isUndefined:e(196),keys:e(58),map:e(197),reduce:e(199),size:e(351),transform:e(357),union:e(358),values:e(205)}}catch(v){}i||(i=window._),a.exports=i},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(i)}a.exports=function(i){var v=e(i);return i!=null&&(v=="object"||v=="function")}},function(a,A,e){var i=e(305),v=e(103),b=e(129),S=b&&b.isTypedArray,f=S?v(S):i;a.exports=f},function(a,A,e){"use strict";var i=e(123),v=Object(i.getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)");A.a={version:"0.0.12",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:v.mainStroke,fill:v.mainFill},size:20,color:v.mainStroke,linkPoints:{size:8,lineWidth:1,fill:v.activeFill,stroke:v.activeStroke}},nodeStateStyles:{active:{fill:v.activeFill,stroke:v.activeStroke,lineWidth:2,shadowColor:v.mainStroke,shadowBlur:10},selected:{fill:v.selectedFill,stroke:v.selectedStroke,lineWidth:4,shadowColor:v.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:v.highlightFill,stroke:v.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:v.inactiveFill,stroke:v.inactiveStroke,lineWidth:1},disable:{fill:v.disableFill,stroke:v.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:v.edgeMainStroke,lineAppendWidth:2},color:v.edgeMainStroke},edgeStateStyles:{active:{stroke:v.edgeActiveStroke,lineWidth:1},selected:{stroke:v.edgeSelectedStroke,lineWidth:2,shadowColor:v.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:v.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:v.edgeInactiveStroke,lineWidth:1},disable:{stroke:v.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:v.comboMainFill,lineWidth:1,stroke:v.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:v.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:v.comboActiveStroke,lineWidth:1,fill:v.comboActiveFill},selected:{stroke:v.comboSelectedStroke,lineWidth:2,fill:v.comboSelectedFill,shadowColor:v.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:v.comboHighlightStroke,lineWidth:2,fill:v.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:v.comboInactiveStroke,fill:v.comboInactiveFill,lineWidth:1},disable:{stroke:v.comboDisableStroke,fill:v.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"}},function(a,A,e){var i;try{i=e(270)}catch(v){}i||(i=window.graphlib),a.exports=i},function(a,A,e){function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}var v=e(163),b=(typeof self=="undefined"?"undefined":i(self))=="object"&&self&&self.Object===Object&&self,S=v||b||Function("return this")();a.exports=S},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(i)}a.exports=function(i){return i!=null&&e(i)=="object"}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Metadata=void 0;var i=e(32),v=function(){function b(S,f){this.key=S,this.value=f}return b.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},b}();A.Metadata=v},function(a,A){},function(a,A,e){"use strict";e.r(A),e.d(A,"catmullRomToBezier",function(){return M}),e.d(A,"fillPath",function(){return Ft}),e.d(A,"fillPathByDiff",function(){return X}),e.d(A,"formatPath",function(){return pt}),e.d(A,"intersection",function(){return wt}),e.d(A,"parsePathArray",function(){return C}),e.d(A,"parsePathString",function(){return f}),e.d(A,"pathToAbsolute",function(){return y}),e.d(A,"pathToCurve",function(){return E}),e.d(A,"rectPath",function(){return q});var i=e(0),v=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,b=new RegExp("([a-z])["+v+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+v+"]*,?["+v+"]*)+)","ig"),S=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+v+"]*,?["+v+"]*","ig"),f=function(tt){if(!tt)return null;if(Object(i.m)(tt))return tt;var lt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(tt).replace(b,function(U,P,H){var k=[],h=P.toLowerCase();if(H.replace(S,function(g,G){G&&k.push(+G)}),h==="m"&&k.length>2&&(it.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&it.push([P,k[0]]),h==="r")it.push([P].concat(k));else for(;k.length>=lt[h]&&(it.push([P].concat(k.splice(0,lt[h]))),lt[h]););return tt}),it},M=function(tt,lt){for(var it=[],U=0,P=tt.length;P-2*!lt>U;U+=2){var H=[{x:+tt[U-2],y:+tt[U-1]},{x:+tt[U],y:+tt[U+1]},{x:+tt[U+2],y:+tt[U+3]},{x:+tt[U+4],y:+tt[U+5]}];lt?U?P-4===U?H[3]={x:+tt[0],y:+tt[1]}:P-2===U&&(H[2]={x:+tt[0],y:+tt[1]},H[3]={x:+tt[2],y:+tt[3]}):H[0]={x:+tt[P-2],y:+tt[P-1]}:P-4===U?H[3]=H[2]:U||(H[0]={x:+tt[U],y:+tt[U+1]}),it.push(["C",(-H[0].x+6*H[1].x+H[2].x)/6,(-H[0].y+6*H[1].y+H[2].y)/6,(H[1].x+6*H[2].x-H[3].x)/6,(H[1].y+6*H[2].y-H[3].y)/6,H[2].x,H[2].y])}return it},I=function(tt,lt,it,U,P){var H=[];if(P===null&&U===null&&(U=it),tt=+tt,lt=+lt,it=+it,U=+U,P!==null){var k=Math.PI/180,h=tt+it*Math.cos(-U*k),g=tt+it*Math.cos(-P*k);H=[["M",h,lt+it*Math.sin(-U*k)],["A",it,it,0,+(P-U>180),0,g,lt+it*Math.sin(-P*k)]]}else H=[["M",tt,lt],["m",0,-U],["a",it,U,0,1,1,0,2*U],["a",it,U,0,1,1,0,-2*U],["z"]];return H},y=function(tt){if(!(tt=f(tt))||!tt.length)return[["M",0,0]];var lt,it,U=[],P=0,H=0,k=0,h=0,g=0;tt[0][0]==="M"&&(k=P=+tt[0][1],h=H=+tt[0][2],g++,U[0]=["M",P,H]);for(var G=tt.length===3&&tt[0][0]==="M"&&tt[1][0].toUpperCase()==="R"&&tt[2][0].toUpperCase()==="Z",V=void 0,$=void 0,rt=g,ot=tt.length;rt<ot;rt++){if(U.push(V=[]),(lt=($=tt[rt])[0])!==lt.toUpperCase())switch(V[0]=lt.toUpperCase(),V[0]){case"A":V[1]=$[1],V[2]=$[2],V[3]=$[3],V[4]=$[4],V[5]=$[5],V[6]=+$[6]+P,V[7]=+$[7]+H;break;case"V":V[1]=+$[1]+H;break;case"H":V[1]=+$[1]+P;break;case"R":for(var At=2,gt=(it=[P,H].concat($.slice(1))).length;At<gt;At++)it[At]=+it[At]+P,it[++At]=+it[At]+H;U.pop(),U=U.concat(M(it,G));break;case"O":U.pop(),(it=I(P,H,$[1],$[2])).push(it[0]),U=U.concat(it);break;case"U":U.pop(),U=U.concat(I(P,H,$[1],$[2],$[3])),V=["U"].concat(U[U.length-1].slice(-2));break;case"M":k=+$[1]+P,h=+$[2]+H;break;default:for(At=1,gt=$.length;At<gt;At++)V[At]=+$[At]+(At%2?P:H)}else if(lt==="R")it=[P,H].concat($.slice(1)),U.pop(),U=U.concat(M(it,G)),V=["R"].concat($.slice(-2));else if(lt==="O")U.pop(),(it=I(P,H,$[1],$[2])).push(it[0]),U=U.concat(it);else if(lt==="U")U.pop(),U=U.concat(I(P,H,$[1],$[2],$[3])),V=["U"].concat(U[U.length-1].slice(-2));else for(var mt=0,bt=$.length;mt<bt;mt++)V[mt]=$[mt];if((lt=lt.toUpperCase())!=="O")switch(V[0]){case"Z":P=+k,H=+h;break;case"H":P=V[1];break;case"V":H=V[1];break;case"M":k=V[V.length-2],h=V[V.length-1];break;default:P=V[V.length-2],H=V[V.length-1]}}return U},n=function(tt,lt,it,U){return[tt,lt,it,U,it,U]},s=function(tt,lt,it,U,P,H){return[1/3*tt+2/3*it,1/3*lt+2/3*U,1/3*P+2/3*it,1/3*H+2/3*U,P,H]},d=function Mt(tt,lt,it,U,P,H,k,h,g,G){it===U&&(it+=1);var V,$,rt,ot,At,gt=120*Math.PI/180,mt=Math.PI/180*(+P||0),bt=[],jt=function(Vr,ti,hi){return{x:Vr*Math.cos(hi)-ti*Math.sin(hi),y:Vr*Math.sin(hi)+ti*Math.cos(hi)}};if(G)$=G[0],rt=G[1],ot=G[2],At=G[3];else{tt=(V=jt(tt,lt,-mt)).x,lt=V.y,h=(V=jt(h,g,-mt)).x,g=V.y,tt===h&&lt===g&&(h+=1,g+=1);var Dt=(tt-h)/2,Ut=(lt-g)/2,Ct=Dt*Dt/(it*it)+Ut*Ut/(U*U);Ct>1&&(it*=Ct=Math.sqrt(Ct),U*=Ct);var Vt=it*it,Ht=U*U,re=(H===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));ot=re*it*Ut/U+(tt+h)/2,At=re*-U*Dt/it+(lt+g)/2,$=Math.asin(((lt-At)/U).toFixed(9)),rt=Math.asin(((g-At)/U).toFixed(9)),$=tt<ot?Math.PI-$:$,rt=h<ot?Math.PI-rt:rt,$<0&&($=2*Math.PI+$),rt<0&&(rt=2*Math.PI+rt),k&&$>rt&&($-=2*Math.PI),!k&&rt>$&&(rt-=2*Math.PI)}var pe=rt-$;if(Math.abs(pe)>gt){var ye=rt,we=h,Ne=g;rt=$+gt*(k&&rt>$?1:-1),bt=Mt(h=ot+it*Math.cos(rt),g=At+U*Math.sin(rt),it,U,P,0,k,we,Ne,[rt,ye,ot,At])}pe=rt-$;var Ke=Math.cos($),pn=Math.sin($),hn=Math.cos(rt),kn=Math.sin(rt),Tn=Math.tan(pe/4),Rn=4/3*it*Tn,Mn=4/3*U*Tn,Cn=[tt,lt],_n=[tt+Rn*pn,lt-Mn*Ke],Kn=[h+Rn*kn,g-Mn*hn],tr=[h,g];if(_n[0]=2*Cn[0]-_n[0],_n[1]=2*Cn[1]-_n[1],G)return[_n,Kn,tr].concat(bt);for(var or=[],nr=0,er=(bt=[_n,Kn,tr].concat(bt).join().split(",")).length;nr<er;nr++)or[nr]=nr%2?jt(bt[nr-1],bt[nr],mt).y:jt(bt[nr],bt[nr+1],mt).x;return or},E=function(tt,lt){var it,U=y(tt),P=lt&&y(lt),H={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=[],g=[],G="",V="",$=function(Ut,Ct,Vt){var Ht,re;if(!Ut)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(!(Ut[0]in{T:1,Q:1})&&(Ct.qx=Ct.qy=null),Ut[0]){case"M":Ct.X=Ut[1],Ct.Y=Ut[2];break;case"A":Ut=["C"].concat(d.apply(0,[Ct.x,Ct.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=2*Ct.x-Ct.bx,re=2*Ct.y-Ct.by):(Ht=Ct.x,re=Ct.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(Ct.qx=2*Ct.x-Ct.qx,Ct.qy=2*Ct.y-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),Ut=["C"].concat(s(Ct.x,Ct.y,Ct.qx,Ct.qy,Ut[1],Ut[2]));break;case"Q":Ct.qx=Ut[1],Ct.qy=Ut[2],Ut=["C"].concat(s(Ct.x,Ct.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(n(Ct.x,Ct.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(n(Ct.x,Ct.y,Ut[1],Ct.y));break;case"V":Ut=["C"].concat(n(Ct.x,Ct.y,Ct.x,Ut[1]));break;case"Z":Ut=["C"].concat(n(Ct.x,Ct.y,Ct.X,Ct.Y))}return Ut},rt=function(Ut,Ct){if(Ut[Ct].length>7){Ut[Ct].shift();for(var Vt=Ut[Ct];Vt.length;)h[Ct]="A",P&&(g[Ct]="A"),Ut.splice(Ct++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(Ct,1),it=Math.max(U.length,P&&P.length||0)}},ot=function(Ut,Ct,Vt,Ht,re){Ut&&Ct&&Ut[re][0]==="M"&&Ct[re][0]!=="M"&&(Ct.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],it=Math.max(U.length,P&&P.length||0))};it=Math.max(U.length,P&&P.length||0);for(var At=0;At<it;At++){U[At]&&(G=U[At][0]),G!=="C"&&(h[At]=G,At&&(V=h[At-1])),U[At]=$(U[At],H,V),h[At]!=="A"&&G==="C"&&(h[At]="C"),rt(U,At),P&&(P[At]&&(G=P[At][0]),G!=="C"&&(g[At]=G,At&&(V=g[At-1])),P[At]=$(P[At],k,V),g[At]!=="A"&&G==="C"&&(g[At]="C"),rt(P,At)),ot(U,P,H,k,At),ot(P,U,k,H,At);var gt=U[At],mt=P&&P[At],bt=gt.length,jt=P&&mt.length;H.x=gt[bt-2],H.y=gt[bt-1],H.bx=parseFloat(gt[bt-4])||H.x,H.by=parseFloat(gt[bt-3])||H.y,k.bx=P&&(parseFloat(mt[jt-4])||k.x),k.by=P&&(parseFloat(mt[jt-3])||k.y),k.x=P&&mt[jt-2],k.y=P&&mt[jt-1]}return P?[U,P]:U},O=/,?([a-z]),?/gi,C=function(tt){return tt.join(",").replace(O,"$1")},p=function(tt,lt,it,U,P){return tt*(tt*(-3*lt+9*it-9*U+3*P)+6*lt-12*it+6*U)-3*lt+3*it},x=function(tt,lt,it,U,P,H,k,h,g){g===null&&(g=1);for(var G=(g=g>1?1:g<0?0:g)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],$=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],rt=0,ot=0;ot<12;ot++){var At=G*V[ot]+G,gt=p(At,tt,it,P,k),mt=p(At,lt,U,H,h),bt=gt*gt+mt*mt;rt+=$[ot]*Math.sqrt(bt)}return G*rt},T=function(tt,lt,it,U,P,H,k,h){for(var g,G,V,$,rt=[],ot=[[],[]],At=0;At<2;++At)if(At===0?(G=6*tt-12*it+6*P,g=-3*tt+9*it-9*P+3*k,V=3*it-3*tt):(G=6*lt-12*U+6*H,g=-3*lt+9*U-9*H+3*h,V=3*U-3*lt),Math.abs(g)<1e-12){if(Math.abs(G)<1e-12)continue;($=-V/G)>0&&$<1&&rt.push($)}else{var gt=G*G-4*V*g,mt=Math.sqrt(gt);if(!(gt<0)){var bt=(-G+mt)/(2*g);bt>0&&bt<1&&rt.push(bt);var jt=(-G-mt)/(2*g);jt>0&&jt<1&&rt.push(jt)}}for(var Dt,Ut=rt.length,Ct=Ut;Ut--;)Dt=1-($=rt[Ut]),ot[0][Ut]=Dt*Dt*Dt*tt+3*Dt*Dt*$*it+3*Dt*$*$*P+$*$*$*k,ot[1][Ut]=Dt*Dt*Dt*lt+3*Dt*Dt*$*U+3*Dt*$*$*H+$*$*$*h;return ot[0][Ct]=tt,ot[1][Ct]=lt,ot[0][Ct+1]=k,ot[1][Ct+1]=h,ot[0].length=ot[1].length=Ct+2,{min:{x:Math.min.apply(0,ot[0]),y:Math.min.apply(0,ot[1])},max:{x:Math.max.apply(0,ot[0]),y:Math.max.apply(0,ot[1])}}},N=function(tt,lt,it,U,P,H,k,h){if(!(Math.max(tt,it)<Math.min(P,k)||Math.min(tt,it)>Math.max(P,k)||Math.max(lt,U)<Math.min(H,h)||Math.min(lt,U)>Math.max(H,h))){var g=(tt-it)*(H-h)-(lt-U)*(P-k);if(g){var G=((tt*U-lt*it)*(P-k)-(tt-it)*(P*h-H*k))/g,V=((tt*U-lt*it)*(H-h)-(lt-U)*(P*h-H*k))/g,$=+G.toFixed(2),rt=+V.toFixed(2);if(!($<+Math.min(tt,it).toFixed(2)||$>+Math.max(tt,it).toFixed(2)||$<+Math.min(P,k).toFixed(2)||$>+Math.max(P,k).toFixed(2)||rt<+Math.min(lt,U).toFixed(2)||rt>+Math.max(lt,U).toFixed(2)||rt<+Math.min(H,h).toFixed(2)||rt>+Math.max(H,h).toFixed(2)))return{x:G,y:V}}}},Y=function(tt,lt,it){return lt>=tt.x&&lt<=tt.x+tt.width&&it>=tt.y&&it<=tt.y+tt.height},q=function(tt,lt,it,U,P){if(P)return[["M",+tt+ +P,lt],["l",it-2*P,0],["a",P,P,0,0,1,P,P],["l",0,U-2*P],["a",P,P,0,0,1,-P,P],["l",2*P-it,0],["a",P,P,0,0,1,-P,-P],["l",0,2*P-U],["a",P,P,0,0,1,P,-P],["z"]];var H=[["M",tt,lt],["l",it,0],["l",0,U],["l",-it,0],["z"]];return H.parsePathArray=C,H},nt=function(tt,lt,it,U){return tt===null&&(tt=lt=it=U=0),lt===null&&(lt=tt.y,it=tt.width,U=tt.height,tt=tt.x),{x:tt,y:lt,width:it,w:it,height:U,h:U,x2:tt+it,y2:lt+U,cx:tt+it/2,cy:lt+U/2,r1:Math.min(it,U)/2,r2:Math.max(it,U)/2,r0:Math.sqrt(it*it+U*U)/2,path:q(tt,lt,it,U),vb:[tt,lt,it,U].join(" ")}},vt=function(tt,lt,it,U,P,H,k,h){Object(i.m)(tt)||(tt=[tt,lt,it,U,P,H,k,h]);var g=T.apply(null,tt);return nt(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},ht=function(tt,lt,it,U,P,H,k,h,g){var G=1-g,V=Math.pow(G,3),$=Math.pow(G,2),rt=g*g,ot=rt*g,At=tt+2*g*(it-tt)+rt*(P-2*it+tt),gt=lt+2*g*(U-lt)+rt*(H-2*U+lt),mt=it+2*g*(P-it)+rt*(k-2*P+it),bt=U+2*g*(H-U)+rt*(h-2*H+U);return{x:V*tt+3*$*g*it+3*G*g*g*P+ot*k,y:V*lt+3*$*g*U+3*G*g*g*H+ot*h,m:{x:At,y:gt},n:{x:mt,y:bt},start:{x:G*tt+g*it,y:G*lt+g*U},end:{x:G*P+g*k,y:G*H+g*h},alpha:90-180*Math.atan2(At-mt,gt-bt)/Math.PI}},St=function(tt,lt,it){if(!function(Ct,Vt){return Ct=nt(Ct),Vt=nt(Vt),Y(Vt,Ct.x,Ct.y)||Y(Vt,Ct.x2,Ct.y)||Y(Vt,Ct.x,Ct.y2)||Y(Vt,Ct.x2,Ct.y2)||Y(Ct,Vt.x,Vt.y)||Y(Ct,Vt.x2,Vt.y)||Y(Ct,Vt.x,Vt.y2)||Y(Ct,Vt.x2,Vt.y2)||(Ct.x<Vt.x2&&Ct.x>Vt.x||Vt.x<Ct.x2&&Vt.x>Ct.x)&&(Ct.y<Vt.y2&&Ct.y>Vt.y||Vt.y<Ct.y2&&Vt.y>Ct.y)}(vt(tt),vt(lt)))return it?0:[];for(var U=~~(x.apply(0,tt)/8),P=~~(x.apply(0,lt)/8),H=[],k=[],h={},g=it?0:[],G=0;G<U+1;G++){var V=ht.apply(0,tt.concat(G/U));H.push({x:V.x,y:V.y,t:G/U})}for(G=0;G<P+1;G++)V=ht.apply(0,lt.concat(G/P)),k.push({x:V.x,y:V.y,t:G/P});for(G=0;G<U;G++)for(var $=0;$<P;$++){var rt=H[G],ot=H[G+1],At=k[$],gt=k[$+1],mt=Math.abs(ot.x-rt.x)<.001?"y":"x",bt=Math.abs(gt.x-At.x)<.001?"y":"x",jt=N(rt.x,rt.y,ot.x,ot.y,At.x,At.y,gt.x,gt.y);if(jt){if(h[jt.x.toFixed(4)]===jt.y.toFixed(4))continue;h[jt.x.toFixed(4)]=jt.y.toFixed(4);var Dt=rt.t+Math.abs((jt[mt]-rt[mt])/(ot[mt]-rt[mt]))*(ot.t-rt.t),Ut=At.t+Math.abs((jt[bt]-At[bt])/(gt[bt]-At[bt]))*(gt.t-At.t);Dt>=0&&Dt<=1&&Ut>=0&&Ut<=1&&(it?g+=1:g.push({x:jt.x,y:jt.y,t1:Dt,t2:Ut}))}}return g},wt=function(tt,lt){return function(it,U,P){var H,k,h,g,G,V,$,rt,ot,At;it=E(it),U=E(U);for(var gt=P?0:[],mt=0,bt=it.length;mt<bt;mt++){var jt=it[mt];if(jt[0]==="M")H=G=jt[1],k=V=jt[2];else{jt[0]==="C"?(ot=[H,k].concat(jt.slice(1)),H=ot[6],k=ot[7]):(ot=[H,k,H,k,G,V,G,V],H=G,k=V);for(var Dt=0,Ut=U.length;Dt<Ut;Dt++){var Ct=U[Dt];if(Ct[0]==="M")h=$=Ct[1],g=rt=Ct[2];else{Ct[0]==="C"?(At=[h,g].concat(Ct.slice(1)),h=At[6],g=At[7]):(At=[h,g,h,g,$,rt,$,rt],h=$,g=rt);var Vt=St(ot,At,P);if(P)gt+=Vt;else{for(var Ht=0,re=Vt.length;Ht<re;Ht++)Vt[Ht].segment1=mt,Vt[Ht].segment2=Dt,Vt[Ht].bez1=ot,Vt[Ht].bez2=At;gt=gt.concat(Vt)}}}}}return gt}(tt,lt)};function xt(Mt,tt){var lt=[],it=[];return Mt.length&&function U(P,H){if(P.length===1)lt.push(P[0]),it.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&lt.push(P[0]),h===P.length-2&&it.push(P[h+1]),k[h]=[(1-H)*P[h][0]+H*P[h+1][0],(1-H)*P[h][1]+H*P[h+1][1]];U(k,H)}}(Mt,tt),{left:lt,right:it.reverse()}}var ft=function(tt,lt,it){if(it===1)return[[].concat(tt)];var U=[];if(lt[0]==="L"||lt[0]==="C"||lt[0]==="Q")U=U.concat(function(k,h,g){var G=[[k[1],k[2]]];g=g||2;var V=[];h[0]==="A"?(G.push(h[6]),G.push(h[7])):h[0]==="C"?(G.push([h[1],h[2]]),G.push([h[3],h[4]]),G.push([h[5],h[6]])):h[0]==="S"||h[0]==="Q"?(G.push([h[1],h[2]]),G.push([h[3],h[4]])):G.push([h[1],h[2]]);for(var $=G,rt=1/g,ot=0;ot<g-1;ot++){var At=xt($,rt/(1-rt*ot));V.push(At.left),$=At.right}return V.push($),V.map(function(gt){var mt=[];return gt.length===4&&(mt.push("C"),mt=mt.concat(gt[2])),gt.length>=3&&(gt.length===3&&mt.push("Q"),mt=mt.concat(gt[1])),gt.length===2&&mt.push("L"),mt=mt.concat(gt[gt.length-1])})}(tt,lt,it));else{var P=[].concat(tt);P[0]==="M"&&(P[0]="L");for(var H=0;H<=it-1;H++)U.push(P)}return U},Ft=function(tt,lt){if(tt.length===1)return tt;var it=tt.length-1,U=lt.length-1,P=it/U,H=[];if(tt.length===1&&tt[0][0]==="M"){for(var k=0;k<U-it;k++)tt.push(tt[0]);return tt}for(k=0;k<U;k++){var h=Math.floor(P*k);H[h]=(H[h]||0)+1}var g=H.reduce(function(G,V,$){return $===it?G.concat(tt[it]):G.concat(ft(tt[$],tt[$+1],V))},[]);return g.unshift(tt[0]),lt[U]!=="Z"&&lt[U]!=="z"||g.push("Z"),g},kt=function(tt,lt){if(tt.length!==lt.length)return!1;var it=!0;return Object(i.f)(tt,function(U,P){if(U!==lt[P])return it=!1,!1}),it};function Ot(Mt,tt,lt){var it=null,U=lt;return tt<U&&(U=tt,it="add"),Mt<U&&(U=Mt,it="del"),{type:it,min:U}}var X=function(tt,lt){var it=function(rt,ot){var At,gt,mt=rt.length,bt=ot.length,jt=0;if(mt===0||bt===0)return null;for(var Dt=[],Ut=0;Ut<=mt;Ut++)Dt[Ut]=[],Dt[Ut][0]={min:Ut};for(var Ct=0;Ct<=bt;Ct++)Dt[0][Ct]={min:Ct};for(Ut=1;Ut<=mt;Ut++)for(At=rt[Ut-1],Ct=1;Ct<=bt;Ct++){gt=ot[Ct-1],jt=kt(At,gt)?0:1;var Vt=Dt[Ut-1][Ct].min+1,Ht=Dt[Ut][Ct-1].min+1,re=Dt[Ut-1][Ct-1].min+jt;Dt[Ut][Ct]=Ot(Vt,Ht,re)}return Dt}(tt,lt),U=tt.length,P=lt.length,H=[],k=1,h=1;if(it[U][P].min!==U){for(var g=1;g<=U;g++){var G=it[g][g].min;h=g;for(var V=k;V<=P;V++)it[g][V].min<G&&(G=it[g][V].min,h=V);k=h,it[g][k].type&&H.push({index:g-1,type:it[g][k].type})}for(g=H.length-1;g>=0;g--)k=H[g].index,H[g].type==="add"?tt.splice(k,0,[].concat(tt[k])):tt.splice(k,1)}var $=P-(U=tt.length);if(U<P)for(g=0;g<$;g++)tt[U-1][0]==="z"||tt[U-1][0]==="Z"?tt.splice(U-2,0,tt[U-2]):tt.push(tt[U-1]),U+=1;return tt};function ct(Mt,tt,lt){for(var it,U=[].concat(Mt),P=1/(lt+1),H=dt(tt)[0],k=1;k<=lt;k++)P*=k,(it=Math.floor(Mt.length*P))===0?U.unshift([H[0]*P+Mt[it][0]*(1-P),H[1]*P+Mt[it][1]*(1-P)]):U.splice(it,0,[H[0]*P+Mt[it][0]*(1-P),H[1]*P+Mt[it][1]*(1-P)]);return U}function dt(Mt){var tt=[];switch(Mt[0]){case"M":case"L":tt.push([Mt[1],Mt[2]]);break;case"A":tt.push([Mt[6],Mt[7]]);break;case"Q":tt.push([Mt[3],Mt[4]]),tt.push([Mt[1],Mt[2]]);break;case"T":tt.push([Mt[1],Mt[2]]);break;case"C":tt.push([Mt[5],Mt[6]]),tt.push([Mt[1],Mt[2]]),tt.push([Mt[3],Mt[4]]);break;case"S":tt.push([Mt[3],Mt[4]]),tt.push([Mt[1],Mt[2]]);break;case"H":case"V":tt.push([Mt[1],Mt[1]])}return tt}var pt=function(tt,lt){if(tt.length<=1)return tt;for(var it,U=0;U<lt.length;U++)if(tt[U][0]!==lt[U][0])switch(it=dt(tt[U]),lt[U][0]){case"M":tt[U]=["M"].concat(it[0]);break;case"L":tt[U]=["L"].concat(it[0]);break;case"A":tt[U]=[].concat(lt[U]),tt[U][6]=it[0][0],tt[U][7]=it[0][1];break;case"Q":if(it.length<2){if(!(U>0)){tt[U]=lt[U];break}it=ct(it,tt[U-1],1)}tt[U]=["Q"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"T":tt[U]=["T"].concat(it[0]);break;case"C":if(it.length<3){if(!(U>0)){tt[U]=lt[U];break}it=ct(it,tt[U-1],2)}tt[U]=["C"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"S":if(it.length<2){if(!(U>0)){tt[U]=lt[U];break}it=ct(it,tt[U-1],1)}tt[U]=["S"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;default:tt[U]=lt[U]}return tt}},function(a,A,e){"use strict";e(56),e(18);var i=e(250);e.d(A,"Canvas",function(){return i.a}),e(76),e(89)},function(a,A,e){var i=e(83),v=e(128);a.exports=function(b){return b!=null&&v(b.length)&&!i(b)}},function(a,A,e){function i(I){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(I)}var v=e(328),b=e(338),S=e(66),f=e(26),M=e(345);a.exports=function(I){return typeof I=="function"?I:I==null?S:i(I)=="object"?f(I)?b(I[0],I[1]):v(I):M(I)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.TargetTypeEnum=A.BindingTypeEnum=A.BindingScopeEnum=void 0,A.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},A.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},A.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return I}),e.d(A,"Circle",function(){return y}),e.d(A,"Ellipse",function(){return s}),e.d(A,"Image",function(){return E}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return q}),e.d(A,"Path",function(){return X}),e.d(A,"Polygon",function(){return dt}),e.d(A,"Polyline",function(){return pt}),e.d(A,"Rect",function(){return tt}),e.d(A,"Text",function(){return lt});var i={};e.r(i),e.d(i,"Base",function(){return I}),e.d(i,"Circle",function(){return y}),e.d(i,"Ellipse",function(){return s}),e.d(i,"Image",function(){return E}),e.d(i,"Line",function(){return x}),e.d(i,"Marker",function(){return q}),e.d(i,"Path",function(){return X}),e.d(i,"Polygon",function(){return dt}),e.d(i,"Polyline",function(){return pt}),e.d(i,"Rect",function(){return tt}),e.d(i,"Text",function(){return lt});var v=e(1),b=e(18),S=e(17),f=e(29),M=e(76),I=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},U.prototype.getShapeBase=function(){return i},U.prototype.getGroupBase=function(){return M.a},U.prototype.onCanvasChange=function(P){Object(f.h)(this,P)},U.prototype.calculateBBox=function(){var P=this.get("type"),H=this.getHitLineWidth(),k=Object(b.getBBoxMethod)(P)(this),h=H/2,g=k.x-h,G=k.y-h,V=k.x+k.width+h,$=k.y+k.height+h;return{x:g,minX:g,y:G,minY:G,width:k.width+H,height:k.height+H,maxX:V,maxY:$}},U.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},U.prototype.isStroke=function(){return!!this.attrs.stroke},U.prototype._applyClip=function(P,H){H&&(P.save(),Object(f.a)(P,H),H.createPath(P),P.restore(),P.clip(),H._afterDraw())},U.prototype.draw=function(P,H){var k=this.cfg.clipShape;if(H){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var h=this.getCanvasBBox();if(!Object(S.f)(H,h))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}P.save(),Object(f.a)(P,this),this._applyClip(P,k),this.drawPath(P),P.restore(),this._afterDraw()},U.prototype.getCanvasViewBox=function(){var P=this.cfg.canvas;return P?P.getViewRange():null},U.prototype.cacheCanvasBBox=function(){var P=this.getCanvasViewBox();if(P){var H=this.getCanvasBBox(),k=Object(S.f)(H,P);this.set("isInView",k),k?this.set("cacheCanvasBBox",H):this.set("cacheCanvasBBox",null)}},U.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},U.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},U.prototype.drawPath=function(P){this.createPath(P),this.strokeAndFill(P),this.afterDrawPath(P)},U.prototype.fill=function(P){P.fill()},U.prototype.stroke=function(P){P.stroke()},U.prototype.strokeAndFill=function(P){var H=this.attrs,k=H.lineWidth,h=H.opacity,g=H.strokeOpacity,G=H.fillOpacity;this.isFill()&&(Object(S.i)(G)||G===1?this.fill(P):(P.globalAlpha=G,this.fill(P),P.globalAlpha=h)),this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=g),this.stroke(P)),this.afterDrawPath(P)},U.prototype.createPath=function(P){},U.prototype.afterDrawPath=function(P){},U.prototype.isInShape=function(P,H){var k=this.isStroke(),h=this.isFill(),g=this.getHitLineWidth();return this.isInStrokeOrPath(P,H,k,h,g)},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){return!1},U.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var P=this.attrs;return P.lineWidth+P.lineAppendWidth},U}(b.AbstractShape),y=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x:0,y:0,r:0})},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){var G=this.attr(),V=G.x,$=G.y,rt=G.r,ot=g/2,At=Object(S.b)(V,$,P,H);return h&&k?At<=rt+ot:h?At<=rt:!!k&&At>=rt-ot&&At<=rt+ot},U.prototype.createPath=function(P){var H=this.attr(),k=H.x,h=H.y,g=H.r;P.beginPath(),P.arc(k,h,g,0,2*Math.PI,!1),P.closePath()},U}(I);function n(it,U,P,H){return it/(P*P)+U/(H*H)}var s=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x:0,y:0,rx:0,ry:0})},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){var G=this.attr(),V=g/2,$=G.x,rt=G.y,ot=G.rx,At=G.ry,gt=(P-$)*(P-$),mt=(H-rt)*(H-rt);return h&&k?n(gt,mt,ot+V,At+V)<=1:h?n(gt,mt,ot,At)<=1:!!k&&n(gt,mt,ot-V,At-V)>=1&&n(gt,mt,ot+V,At+V)<=1},U.prototype.createPath=function(P){var H=this.attr(),k=H.x,h=H.y,g=H.rx,G=H.ry;if(P.beginPath(),P.ellipse)P.ellipse(k,h,g,G,0,0,2*Math.PI,!1);else{var V=g>G?g:G,$=g>G?1:g/G,rt=g>G?G/g:1;P.save(),P.translate(k,h),P.scale($,rt),P.arc(0,0,V,0,2*Math.PI),P.restore(),P.closePath()}},U}(I);function d(it){return it instanceof HTMLElement&&Object(S.k)(it.nodeName)&&it.nodeName.toUpperCase()==="CANVAS"}var E=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x:0,y:0,width:0,height:0})},U.prototype.initAttrs=function(P){this._setImage(P.img)},U.prototype.isStroke=function(){return!1},U.prototype.isOnlyHitBox=function(){return!0},U.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var P=this.get("canvas");P?P.draw():this.createPath(this.get("context"))}},U.prototype._setImage=function(P){var H=this,k=this.attrs;if(Object(S.k)(P)){var h=new Image;h.onload=function(){if(H.destroyed)return!1;H.attr("img",h),H.set("loading",!1),H._afterLoading();var g=H.get("callback");g&&g.call(H)},h.crossOrigin="Anonymous",h.src=P,this.set("loading",!0)}else P instanceof Image?(k.width||(k.width=P.width),k.height||(k.height=P.height)):d(P)&&(k.width||(k.width=Number(P.getAttribute("width"))),k.height||(k.height,Number(P.getAttribute("height"))))},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P==="img"&&this._setImage(H)},U.prototype.createPath=function(P){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",P);var H=this.attr(),k=H.x,h=H.y,g=H.width,G=H.height,V=H.sx,$=H.sy,rt=H.swidth,ot=H.sheight,At=H.img;(At instanceof Image||d(At))&&(Object(S.i)(V)||Object(S.i)($)||Object(S.i)(rt)||Object(S.i)(ot)?P.drawImage(At,k,h,g,G):P.drawImage(At,V,$,rt,ot,k,h,g,G))},U}(I),O=e(20);function C(it,U,P,H,k,h,g){var G=Math.min(it,P),V=Math.max(it,P),$=Math.min(U,H),rt=Math.max(U,H),ot=k/2;return h>=G-ot&&h<=V+ot&&g>=$-ot&&g<=rt+ot&&O.c.pointToLine(it,U,P,H,h,g)<=k/2}var p=e(34),x=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},U.prototype.initAttrs=function(P){this.setArrow()},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),this.setArrow()},U.prototype.setArrow=function(){var P=this.attr(),H=P.x1,k=P.y1,h=P.x2,g=P.y2,G=P.startArrow,V=P.endArrow;G&&p.b(this,P,h,g,H,k),V&&p.a(this,P,H,k,h,g)},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){if(!k||!g)return!1;var G=this.attr();return C(G.x1,G.y1,G.x2,G.y2,g,P,H)},U.prototype.createPath=function(P){var H=this.attr(),k=H.x1,h=H.y1,g=H.x2,G=H.y2,V=H.startArrow,$=H.endArrow,rt={dx:0,dy:0},ot={dx:0,dy:0};V&&V.d&&(rt=p.c(k,h,g,G,H.startArrow.d)),$&&$.d&&(ot=p.c(k,h,g,G,H.endArrow.d)),P.beginPath(),P.moveTo(k+rt.dx,h+rt.dy),P.lineTo(g-ot.dx,G-ot.dy)},U.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},U.prototype.getTotalLength=function(){var P=this.attr(),H=P.x1,k=P.y1,h=P.x2,g=P.y2;return O.c.length(H,k,h,g)},U.prototype.getPoint=function(P){var H=this.attr(),k=H.x1,h=H.y1,g=H.x2,G=H.y2;return O.c.pointAt(k,h,g,G,P)},U}(I),T=e(0),N=e(31),Y={circle:function(U,P,H){return[["M",U-H,P],["A",H,H,0,1,0,U+H,P],["A",H,H,0,1,0,U-H,P]]},square:function(U,P,H){return[["M",U-H,P-H],["L",U+H,P-H],["L",U+H,P+H],["L",U-H,P+H],["Z"]]},diamond:function(U,P,H){return[["M",U-H,P],["L",U,P-H],["L",U+H,P],["L",U,P+H],["Z"]]},triangle:function(U,P,H){var k=H*Math.sin(1/3*Math.PI);return[["M",U-H,P+k],["L",U,P-k],["L",U+H,P+k],["Z"]]},"triangle-down":function(U,P,H){var k=H*Math.sin(1/3*Math.PI);return[["M",U-H,P-k],["L",U+H,P-k],["L",U,P+k],["Z"]]}},q=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.initAttrs=function(P){this._resetParamsCache()},U.prototype._resetParamsCache=function(){this.set("paramsCache",{})},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),["symbol","x","y","r","radius"].indexOf(P)!==-1&&this._resetParamsCache()},U.prototype.isOnlyHitBox=function(){return!0},U.prototype._getR=function(P){return Object(T.s)(P.r)?P.radius:P.r},U.prototype._getPath=function(){var P,H,k=this.attr(),h=k.x,g=k.y,G=k.symbol||"circle",V=this._getR(k);if(Object(S.h)(G))H=(P=G)(h,g,V),H=Object(N.c)(H);else{if(!(P=U.Symbols[G]))return console.warn(G+" marker is not supported."),null;H=P(h,g,V)}return H},U.prototype.createPath=function(P){var H=this._getPath(),k=this.get("paramsCache");Object(f.e)(this,P,{path:H},k)},U.Symbols=Y,U}(I);function nt(it,U,P){var H=Object(b.getOffScreenContext)();return it.createPath(H),H.isPointInPath(U,P)}function vt(it){return Math.abs(it)<1e-6?0:it<0?-1:1}function ht(it,U,P){return(P[0]-it[0])*(U[1]-it[1])==(U[0]-it[0])*(P[1]-it[1])&&Math.min(it[0],U[0])<=P[0]&&P[0]<=Math.max(it[0],U[0])&&Math.min(it[1],U[1])<=P[1]&&P[1]<=Math.max(it[1],U[1])}function St(it,U,P){var H=!1,k=it.length;if(k<=2)return!1;for(var h=0;h<k;h++){var g=it[h],G=it[(h+1)%k];if(ht(g,G,[U,P]))return!0;vt(g[1]-P)>0!=vt(G[1]-P)>0&&vt(U-(P-g[1])*(g[0]-G[0])/(g[1]-G[1])-g[0])<0&&(H=!H)}return H}var wt=e(10),xt=e(40);function ft(it,U,P,H,k,h,g,G){var V=(Math.atan2(G-U,g-it)+2*Math.PI)%(2*Math.PI);if(V<H||V>k)return!1;var $={x:it+P*Math.cos(V),y:U+P*Math.sin(V)};return Object(S.b)($.x,$.y,g,G)<=h/2}var Ft=wt.a.transform,kt=Object(v.a)({hasArc:function(U){for(var P=!1,H=U.length,k=0;k<H;k++){var h=U[k][0];if(h==="C"||h==="A"||h==="Q"){P=!0;break}}return P},extractPolygons:function(U){for(var P=U.length,H=[],k=[],h=[],g=0;g<P;g++){var G=U[g],V=G[0];V==="M"?(h.length&&(k.push(h),h=[]),h.push([G[1],G[2]])):V==="Z"?h.length&&(H.push(h),h=[]):h.push([G[1],G[2]])}return h.length>0&&k.push(h),{polygons:H,polylines:k}},isPointInStroke:function(U,P,H,k,h){for(var g=!1,G=P/2,V=0;V<U.length;V++){var $=U[V],rt=$.currentPoint,ot=$.params,At=$.prePoint,gt=$.box;if(!gt||Object(S.e)(gt.x-G,gt.y-G,gt.width+P,gt.height+P,H,k)){switch($.command){case"L":case"Z":g=C(At[0],At[1],rt[0],rt[1],P,H,k);break;case"Q":g=O.e.pointDistance(At[0],At[1],ot[1],ot[2],ot[3],ot[4],H,k)<=P/2;break;case"C":g=O.b.pointDistance(At[0],At[1],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6],H,k,h)<=P/2;break;case"A":var mt=$.arcParams,bt=mt.cx,jt=mt.cy,Dt=mt.rx,Ut=mt.ry,Ct=mt.startAngle,Vt=mt.endAngle,Ht=mt.xRotation,re=[H,k,1],pe=Dt>Ut?Dt:Ut,ye=Ft(null,[["t",-bt,-jt],["r",-Ht],["s",1/(Dt>Ut?1:Dt/Ut),1/(Dt>Ut?Ut/Dt:1)]]);xt.transformMat3(re,re,ye),g=ft(0,0,pe,Ct,Vt,P,re[0],re[1])}if(g)break}}return g}},b.PathUtil);function Ot(it,U,P){for(var H=!1,k=0;k<it.length&&!(H=St(it[k],U,P));k++);return H}var X=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{startArrow:!1,endArrow:!1})},U.prototype.initAttrs=function(P){this._setPathArr(P.path),this.setArrow()},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P==="path"&&this._setPathArr(H),this.setArrow()},U.prototype._setPathArr=function(P){this.attrs.path=Object(N.c)(P);var H=kt.hasArc(P);this.set("hasArc",H),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},U.prototype.getSegments=function(){var P=this.get("segements");return P||(P=Object(N.d)(this.attr("path")),this.set("segments",P)),P},U.prototype.setArrow=function(){var P=this.attr(),H=P.startArrow,k=P.endArrow;if(H){var h=this.getStartTangent();p.b(this,P,h[0][0],h[0][1],h[1][0],h[1][1])}k&&(h=this.getEndTangent(),p.a(this,P,h[0][0],h[0][1],h[1][0],h[1][1]))},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){var G=this.getSegments(),V=this.get("hasArc"),$=!1;if(k){var rt=this.getTotalLength();$=kt.isPointInStroke(G,g,P,H,rt)}if(!$&&h)if(V)$=nt(this,P,H);else{var ot=this.attr("path"),At=kt.extractPolygons(ot);$=Ot(At.polygons,P,H)||Ot(At.polylines,P,H)}return $},U.prototype.createPath=function(P){var H=this.attr(),k=this.get("paramsCache");Object(f.e)(this,P,H,k)},U.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},U.prototype.getTotalLength=function(){var P=this.get("totalLength");return Object(T.s)(P)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):P},U.prototype.getPoint=function(P){var H,k,h=this.get("tCache");h||(this._calculateCurve(),this._setTcache(),h=this.get("tCache"));var g=this.get("curve");if(!h||h.length===0)return g?{x:g[0][1],y:g[0][2]}:null;Object(T.f)(h,function(rt,ot){P>=rt[0]&&P<=rt[1]&&(H=(P-rt[0])/(rt[1]-rt[0]),k=ot)});var G=g[k];if(Object(T.s)(G)||Object(T.s)(k))return null;var V=G.length,$=g[k+1];return O.b.pointAt(G[V-2],G[V-1],$[1],$[2],$[3],$[4],$[5],$[6],H)},U.prototype._calculateCurve=function(){var P=this.attr().path;this.set("curve",kt.pathToCurve(P))},U.prototype._setTcache=function(){var P,H,k,h,g=0,G=0,V=[],$=this.get("curve");$&&(Object(T.f)($,function(rt,ot){k=$[ot+1],h=rt.length,k&&(g+=O.b.length(rt[h-2],rt[h-1],k[1],k[2],k[3],k[4],k[5],k[6])||0)}),this.set("totalLength",g),g!==0?(Object(T.f)($,function(rt,ot){k=$[ot+1],h=rt.length,k&&((P=[])[0]=G/g,H=O.b.length(rt[h-2],rt[h-1],k[1],k[2],k[3],k[4],k[5],k[6]),G+=H||0,P[1]=G/g,V.push(P))}),this.set("tCache",V)):this.set("tCache",[]))},U.prototype.getStartTangent=function(){var P,H=this.getSegments();if(H.length>1){var k=H[0].currentPoint,h=H[1].currentPoint,g=H[1].startTangent;P=[],g?(P.push([k[0]-g[0],k[1]-g[1]]),P.push([k[0],k[1]])):(P.push([h[0],h[1]]),P.push([k[0],k[1]]))}return P},U.prototype.getEndTangent=function(){var P,H=this.getSegments(),k=H.length;if(k>1){var h=H[k-2].currentPoint,g=H[k-1].currentPoint,G=H[k-1].endTangent;P=[],G?(P.push([g[0]-G[0],g[1]-G[1]]),P.push([g[0],g[1]])):(P.push([h[0],h[1]]),P.push([g[0],g[1]]))}return P},U}(I);function ct(it,U,P,H,k){var h=it.length;if(h<2)return!1;for(var g=0;g<h-1;g++)if(C(it[g][0],it[g][1],it[g+1][0],it[g+1][1],U,P,H))return!0;if(k){var G=it[0],V=it[h-1];if(C(G[0],G[1],V[0],V[1],U,P,H))return!0}return!1}var dt=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.isInStrokeOrPath=function(P,H,k,h,g){var G=this.attr().points,V=!1;return k&&(V=ct(G,g,P,H,!0)),!V&&h&&(V=St(G,P,H)),V},U.prototype.createPath=function(P){var H=this.attr().points;if(!(H.length<2)){P.beginPath();for(var k=0;k<H.length;k++){var h=H[k];k===0?P.moveTo(h[0],h[1]):P.lineTo(h[0],h[1])}P.closePath()}},U}(I),pt=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{startArrow:!1,endArrow:!1})},U.prototype.initAttrs=function(P){this.setArrow()},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),this.setArrow(),["points"].indexOf(P)!==-1&&this._resetCache()},U.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},U.prototype.setArrow=function(){var P=this.attr(),H=this.attrs,k=H.points,h=H.startArrow,g=H.endArrow,G=k.length,V=k[0][0],$=k[0][1],rt=k[G-1][0],ot=k[G-1][1];h&&p.b(this,P,k[1][0],k[1][1],V,$),g&&p.a(this,P,k[G-2][0],k[G-2][1],rt,ot)},U.prototype.isFill=function(){return!1},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){return!(!k||!g)&&ct(this.attr().points,g,P,H,!1)},U.prototype.isStroke=function(){return!0},U.prototype.createPath=function(P){var H=this.attr(),k=H.points,h=H.startArrow,g=H.endArrow,G=k.length;if(!(k.length<2)){var V,$=k[0][0],rt=k[0][1],ot=k[G-1][0],At=k[G-1][1];h&&h.d&&($+=(V=p.c($,rt,k[1][0],k[1][1],h.d)).dx,rt+=V.dy),g&&g.d&&(ot-=(V=p.c(k[G-2][0],k[G-2][1],ot,At,g.d)).dx,At-=V.dy),P.beginPath(),P.moveTo($,rt);for(var gt=0;gt<G-1;gt++){var mt=k[gt];P.lineTo(mt[0],mt[1])}P.lineTo(ot,At)}},U.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},U.prototype.getTotalLength=function(){var P=this.attr().points,H=this.get("totalLength");return Object(T.s)(H)?(this.set("totalLength",O.d.length(P)),this.get("totalLength")):H},U.prototype.getPoint=function(P){var H,k,h=this.attr().points,g=this.get("tCache");return g||(this._setTcache(),g=this.get("tCache")),Object(T.f)(g,function(G,V){P>=G[0]&&P<=G[1]&&(H=(P-G[0])/(G[1]-G[0]),k=V)}),O.c.pointAt(h[k][0],h[k][1],h[k+1][0],h[k+1][1],H)},U.prototype._setTcache=function(){var P=this.attr().points;if(P&&P.length!==0){var H=this.getTotalLength();if(!(H<=0)){var k,h,g=0,G=[];Object(T.f)(P,function(V,$){P[$+1]&&((k=[])[0]=g/H,h=O.c.length(V[0],V[1],P[$+1][0],P[$+1][1]),g+=h,k[1]=g/H,G.push(k))}),this.set("tCache",G)}}},U.prototype.getStartTangent=function(){var P=this.attr().points,H=[];return H.push([P[1][0],P[1][1]]),H.push([P[0][0],P[0][1]]),H},U.prototype.getEndTangent=function(){var P=this.attr().points,H=P.length-1,k=[];return k.push([P[H-1][0],P[H-1][1]]),k.push([P[H][0],P[H][1]]),k},U}(I),Mt=e(120),tt=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x:0,y:0,width:0,height:0,radius:0})},U.prototype.isInStrokeOrPath=function(P,H,k,h,g){var G=this.attr(),V=G.x,$=G.y,rt=G.width,ot=G.height,At=G.radius;if(At){var gt=!1;return k&&(gt=function(bt,jt,Dt,Ut,Ct,Vt,Ht,re){return C(bt+Ct,jt,bt+Dt-Ct,jt,Vt,Ht,re)||C(bt+Dt,jt+Ct,bt+Dt,jt+Ut-Ct,Vt,Ht,re)||C(bt+Dt-Ct,jt+Ut,bt+Ct,jt+Ut,Vt,Ht,re)||C(bt,jt+Ut-Ct,bt,jt+Ct,Vt,Ht,re)||ft(bt+Dt-Ct,jt+Ct,Ct,1.5*Math.PI,2*Math.PI,Vt,Ht,re)||ft(bt+Dt-Ct,jt+Ut-Ct,Ct,0,.5*Math.PI,Vt,Ht,re)||ft(bt+Ct,jt+Ut-Ct,Ct,.5*Math.PI,Math.PI,Vt,Ht,re)||ft(bt+Ct,jt+Ct,Ct,Math.PI,1.5*Math.PI,Vt,Ht,re)}(V,$,rt,ot,At,g,P,H)),!gt&&h&&(gt=nt(this,P,H)),gt}var mt=g/2;return h&&k?Object(S.e)(V-mt,$-mt,rt+mt,ot+mt,P,H):h?Object(S.e)(V,$,rt,ot,P,H):k?function(bt,jt,Dt,Ut,Ct,Vt,Ht){var re=Ct/2;return Object(S.e)(bt-re,jt-re,Dt,Ct,Vt,Ht)||Object(S.e)(bt+Dt-re,jt-re,Ct,Ut,Vt,Ht)||Object(S.e)(bt+re,jt+Ut-re,Dt,Ct,Vt,Ht)||Object(S.e)(bt-re,jt+re,Ct,Ut,Vt,Ht)}(V,$,rt,ot,g,P,H):void 0},U.prototype.createPath=function(P){var H=this.attr(),k=H.x,h=H.y,g=H.width,G=H.height,V=H.radius;if(P.beginPath(),V===0)P.rect(k,h,g,G);else{var $=Object(Mt.a)(V),rt=$[0],ot=$[1],At=$[2],gt=$[3];P.moveTo(k+rt,h),P.lineTo(k+g-ot,h),ot!==0&&P.arc(k+g-ot,h+ot,ot,-Math.PI/2,0),P.lineTo(k+g,h+G-At),At!==0&&P.arc(k+g-At,h+G-At,At,0,Math.PI/2),P.lineTo(k+gt,h+G),gt!==0&&P.arc(k+gt,h+G-gt,gt,Math.PI/2,Math.PI),P.lineTo(k,h+rt),rt!==0&&P.arc(k+rt,h+rt,rt,Math.PI,1.5*Math.PI),P.closePath()}},U}(I),lt=function(it){function U(){return it!==null&&it.apply(this,arguments)||this}return Object(v.b)(U,it),U.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},P),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},U.prototype.isOnlyHitBox=function(){return!0},U.prototype.initAttrs=function(P){this._assembleFont(),P.text&&this._setText(P.text)},U.prototype._assembleFont=function(){var P=this.attrs;P.font=Object(b.assembleFont)(P)},U.prototype._setText=function(P){var H=null;Object(S.k)(P)&&P.indexOf(`
`)!==-1&&(H=P.split(`
`)),this.set("textArr",H)},U.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P.startsWith("font")&&this._assembleFont(),P==="text"&&this._setText(H)},U.prototype._getSpaceingY=function(){var P=this.attrs,H=P.lineHeight,k=1*P.fontSize;return H?H-k:.14*k},U.prototype._drawTextArr=function(P,H,k){var h,g=this.attrs,G=g.textBaseline,V=g.x,$=g.y,rt=1*g.fontSize,ot=this._getSpaceingY(),At=Object(b.getTextHeight)(g.text,g.fontSize,g.lineHeight);Object(S.c)(H,function(gt,mt){h=$+mt*(ot+rt)-At+rt,G==="middle"&&(h+=At-rt-(At-rt)/2),G==="top"&&(h+=At-rt),k?P.fillText(gt,V,h):P.strokeText(gt,V,h)})},U.prototype._drawText=function(P,H){var k=this.attr(),h=k.x,g=k.y,G=this.get("textArr");if(G)this._drawTextArr(P,G,H);else{var V=k.text;H?P.fillText(V,h,g):P.strokeText(V,h,g)}},U.prototype.strokeAndFill=function(P){var H=this.attrs,k=H.lineWidth,h=H.opacity,g=H.strokeOpacity,G=H.fillOpacity;this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=h),this.stroke(P)),this.isFill()&&(Object(S.i)(G)||G===1?this.fill(P):(P.globalAlpha=G,this.fill(P),P.globalAlpha=h)),this.afterDrawPath(P)},U.prototype.fill=function(P){this._drawText(P,!0)},U.prototype.stroke=function(P){this._drawText(P,!1)},U}(I)},function(a,A,e){var i=e(72),v=e(284),b=e(285),S=i?i.toStringTag:void 0;a.exports=function(f){return f==null?f===void 0?"[object Undefined]":"[object Null]":S&&S in Object(f)?v(f):b(f)}},function(a,A,e){var i=e(167),v=e(130),b=e(53);a.exports=function(S){return b(S)?i(S):v(S)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagProperty=A.tagParameter=A.decorate=void 0;var i=e(41),v=e(32);function b(M,I,y,n,s){var d={},E=typeof s=="number",O=s!==void 0&&E?s.toString():y;if(E&&y!==void 0)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(M,I)&&(d=Reflect.getMetadata(M,I));var C=d[O];if(Array.isArray(C))for(var p=0,x=C;p<x.length;p++){var T=x[p];if(T.key===n.key)throw new Error(i.DUPLICATED_METADATA+" "+T.key.toString())}else C=[];C.push(n),d[O]=C,Reflect.defineMetadata(M,d,I)}function S(M,I){Reflect.decorate(M,I)}function f(M,I){return function(y,n){I(y,n,M)}}A.tagParameter=function(M,I,y,n){b(v.TAGGED,M,I,n,y)},A.tagProperty=function(M,I,y){b(v.TAGGED_PROP,M.constructor,I,y)},A.decorate=function(M,I,y){typeof y=="number"?S([f(y,M)],I):typeof y=="string"?Reflect.decorate([M],I,y):S([M],I)}},function(a,A,e){var i=e(443),v=e(444),b=e(218),S=e(445);a.exports=function(f,M){return i(f)||v(f,M)||b(f,M)||S()}},function(a,A,e){var i=e(57),v=e(48);a.exports=function(b){return typeof b=="number"||v(b)&&i(b)=="[object Number]"}},function(a,A,e){"use strict";e(78),e(18);var i=e(249);e.d(A,"Canvas",function(){return i.a}),e(77)},function(a,A,e){var i=e(236),v=e(235),b=e(243),S=e(150),f=e(244),M=[0,0];a.exports.computeMiter=function(I,y,n,s,d){return i(I,n,s),b(I,I),v(y,-I[1],I[0]),v(M,-n[1],n[0]),d/f(y,M)},a.exports.normal=function(I,y){return v(I,-y[1],y[0]),I},a.exports.direction=function(I,y,n){return S(I,y,n),b(I,I),I}},function(a,A,e){var i=e(283),v=e(288);a.exports=function(b,S){var f=v(b,S);return i(f)?f:void 0}},function(a,A,e){var i=e(167),v=e(308),b=e(53);a.exports=function(S){return b(S)?i(S,!0):v(S)}},function(a,A){a.exports=function(e){return e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.id=void 0;var i=0;A.id=function(){return i++}},function(a,A,e){"use strict";e.d(A,"b",function(){return b}),e.d(A,"c",function(){return S}),e.d(A,"a",function(){return f});var i=e(19),v=e(116);function b(M,I,y){var n=1;return Object(i.h)(M)&&(n=M.split(`
`).length),n>1?I*n+function(s,d){return d?d-s:.14*s}(I,y)*(n-1):I}function S(M,I){var y=Object(v.a)(),n=0;if(Object(i.e)(M)||M==="")return n;if(y.save(),y.font=I,Object(i.h)(M)&&M.includes(`
`)){var s=M.split(`
`);Object(i.a)(s,function(d){var E=y.measureText(d).width;n<E&&(n=E)})}else n=y.measureText(M).width;return y.restore(),n}function f(M){var I=M.fontSize,y=M.fontFamily,n=M.fontWeight;return[M.fontStyle,M.fontVariant,n,I+"px",y].join(" ").trim()}},function(a,A,e){"use strict";e.d(A,"a",function(){return po}),e.d(A,"b",function(){return wo});var i,v,b=function(_){return typeof _=="string"},S=/-(\w)/g,f=(i=function(_){return _.replace(S,function(w,L){return L?L.toUpperCase():""})},v=Object.create(null),Array.isArray),M=function(_){return typeof _=="number"},I=function(_){return Number.isNaN(Number(_))},y=function(_,w,L){for(var J=[],It=0;It<_;It++)J[It]=0;return L&&L.forEach(function(Nt){Nt.source&&(J[w[Nt.source]]+=1),Nt.target&&(J[w[Nt.target]]+=1)}),J},n=function(_){for(var w=[],L=_.length,J=0;J<L;J+=1){w[J]=[];for(var It=0;It<L;It+=1)J===It?w[J][It]=0:_[J][It]!==0&&_[J][It]?w[J][It]=_[J][It]:w[J][It]=1/0}for(var Nt=0;Nt<L;Nt+=1)for(var K=0;K<L;K+=1)for(var Pt=0;Pt<L;Pt+=1)w[K][Pt]>w[K][Nt]+w[Nt][Pt]&&(w[K][Pt]=w[K][Nt]+w[Nt][Pt]);return w},s=function(_,w){var L=_.nodes,J=_.edges,It=[],Nt={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(K,Pt){Nt[K.id]=Pt,It.push([])}),J&&J.forEach(function(K){var Pt=K.source,Qt=K.target,qt=Nt[Pt],xe=Nt[Qt];It[qt][xe]=1,w||(It[xe][qt]=1)}),It},d=function(_,w){typeof w=="function"&&function L(J,It){if(J&&J.children){for(var Nt=J.children.length-1;Nt>=0;Nt--)if(!L(J.children[Nt],It))return}return!!It(J)}(_,w)};function E(Q){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}var O=function Q(_){if(_===null)return _;if(_ instanceof Date)return new Date(_.getTime());if(_ instanceof Array){var w=[];return _.forEach(function(J){w.push(J)}),w.map(function(J){return Q(J)})}if(E(_)==="object"&&_!=={}){var L=Object.assign({},_);return Object.keys(L).forEach(function(J){L[J]=Q(L[J])}),L}return _},C=function(_){return typeof _=="function"};function p(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var x=function(){function Q(){(function(J,It){if(!(J instanceof It))throw new TypeError("Cannot call a class as a function")})(this,Q),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var _,w,L;return _=Q,(w=[{key:"layout",value:function(It){return this.init(It),this.execute(!0)}},{key:"init",value:function(It){this.nodes=It.nodes||[],this.edges=It.edges||[],this.combos=It.combos||[]}},{key:"execute",value:function(It){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(It){It&&Object.assign(this,It)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&p(_.prototype,w),L&&p(_,L),Q}();function T(Q){return(T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function N(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Y(Q,_){return(Y=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function q(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=vt(Q);if(_){var J=vt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return nt(this,w)}}function nt(Q,_){return!_||T(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function vt(Q){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var ht=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Y(Nt,K)})(It,Q);var _,w,L,J=q(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).begin=[0,0],K.preventOverlap=!0,K.preventOverlapPadding=10,K.condense=!1,K.sortBy="degree",K.nodeSize=30,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.row=0,K.col=0,K.cellWidth=0,K.cellHeight=0,K.cellUsed={},K.id2manPos={},K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=Pt.length,qt=K.begin;if(Qt!==0){if(Qt===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.edges,Ie=[];Pt.forEach(function(qn){Ie.push(qn)});var Ye={};if(Ie.forEach(function(qn,fr){Ye[qn.id]=fr}),(K.sortBy==="degree"||!b(K.sortBy)||Ie[0][K.sortBy]===void 0)&&(K.sortBy="degree",I(Pt[0].degree))){var Re=y(Ie.length,Ye,xe);Ie.forEach(function(qn,fr){qn.degree=Re[fr]})}Ie.sort(function(qn,fr){return fr[K.sortBy]-qn[K.sortBy]}),K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var Xe=K.rows,Je=K.cols!=null?K.cols:K.columns;if(K.cells=Qt,Xe!=null&&Je!=null?(K.rows=Xe,K.cols=Je):Xe!=null&&Je==null?(K.rows=Xe,K.cols=Math.ceil(K.cells/K.rows)):Xe==null&&Je!=null?(K.cols=Je,K.rows=Math.ceil(K.cells/K.cols)):(K.splits=Math.sqrt(K.cells*K.height/K.width),K.rows=Math.round(K.splits),K.cols=Math.round(K.width/K.height*K.splits)),K.cols*K.rows>K.cells){var Ge=K.small(),qe=K.large();(Ge-1)*qe>=K.cells?K.small(Ge-1):(qe-1)*Ge>=K.cells&&K.large(qe-1)}else for(;K.cols*K.rows<K.cells;){var yn=K.small(),Pn=K.large();(Pn+1)*yn>=K.cells?K.large(Pn+1):K.small(yn+1)}K.cellWidth=K.width/K.cols,K.cellHeight=K.height/K.rows,K.condense&&(K.cellWidth=0,K.cellHeight=0),K.preventOverlap&&Ie.forEach(function(qn){var fr,br;qn.x&&qn.y||(qn.x=0,qn.y=0),f(qn.size)?(fr=qn.size[0],br=qn.size[1]):M(qn.size)&&(fr=qn.size,br=qn.size),fr!==void 0&&br!==void 0||(f(K.nodeSize)?(fr=K.nodeSize[0],br=K.nodeSize[1]):M(K.nodeSize)?(fr=K.nodeSize,br=K.nodeSize):(fr=30,br=30));var gr=K.preventOverlapPadding,hr=fr+gr,Tr=br+gr;K.cellWidth=Math.max(K.cellWidth,hr),K.cellHeight=Math.max(K.cellHeight,Tr)}),K.cellUsed={},K.row=0,K.col=0,K.id2manPos={};for(var En=0;En<Ie.length;En++){var Ln=Ie[En],Zn=void 0;if(K.position&&(Zn=K.position(Ln)),Zn&&(Zn.row!==void 0||Zn.col!==void 0)){var Qn={row:Zn.row,col:Zn.col};if(Qn.col===void 0)for(Qn.col=0;K.used(Qn.row,Qn.col);)Qn.col++;else if(Qn.row===void 0)for(Qn.row=0;K.used(Qn.row,Qn.col);)Qn.row++;K.id2manPos[Ln.id]=Qn,K.use(Qn.row,Qn.col)}K.getPos(Ln)}return K.onLayoutEnd&&K.onLayoutEnd(),{edges:xe,nodes:Ie}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"small",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.min(Qt,qt):Math.min(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"large",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.max(Qt,qt):Math.max(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"used",value:function(K,Pt){return this.cellUsed["c-".concat(K,"-").concat(Pt)]||!1}},{key:"use",value:function(K,Pt){this.cellUsed["c-".concat(K,"-").concat(Pt)]=!0}},{key:"moveToNextCell",value:function(){var K=this.cols||5;this.col++,this.col>=K&&(this.col=0,this.row++)}},{key:"getPos",value:function(K){var Pt,Qt,qt=this.begin,xe=this.cellWidth,Ie=this.cellHeight,Ye=this.id2manPos[K.id];if(Ye)Pt=Ye.col*xe+xe/2+qt[0],Qt=Ye.row*Ie+Ie/2+qt[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();Pt=this.col*xe+xe/2+qt[0],Qt=this.row*Ie+Ie/2+qt[1],this.use(this.row,this.col),this.moveToNextCell()}K.x=Pt,K.y=Qt}},{key:"getType",value:function(){return"grid"}}])&&N(_.prototype,w),L&&N(_,L),It}(x);function St(Q){return(St=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function wt(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function xt(Q,_){return(xt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function ft(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=kt(Q);if(_){var J=kt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ft(this,w)}}function Ft(Q,_){return!_||St(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function kt(Q){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var Ot=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&xt(Nt,K)})(It,Q);var _,w,L,J=ft(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.width=300,K.height=300,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.center;return K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),Pt&&Pt.forEach(function(qt){qt.x=.9*(Math.random()-.5)*K.width+Qt[0],qt.y=.9*(Math.random()-.5)*K.height+Qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&wt(_.prototype,w),L&&wt(_,L),It}(x);function X(Q){return(X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function ct(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function dt(Q,_){return(dt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function pt(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=tt(Q);if(_){var J=tt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Mt(this,w)}}function Mt(Q,_){return!_||X(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function tt(Q){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var lt=function(_,w){return _?M(_)?function(L){return _}:_:function(L){return w||1}},it=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&dt(Nt,K)})(It,Q);var _,w,L,J=pt(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=.5,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.preventOverlap=!0,K.tick=function(){},K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var K=this,Pt=K.nodes;if(K.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(K.timeInterval),Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var Qt=K.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var qt={},xe={};Pt.forEach(function(Ge,qe){M(Ge.x)||(Ge.x=Math.random()*K.width),M(Ge.y)||(Ge.y=Math.random()*K.height),qt[Ge.id]=Ge,xe[Ge.id]=qe}),K.nodeMap=qt,K.nodeIdxMap=xe,K.linkDistance=lt(K.linkDistance,1),K.nodeStrength=lt(K.nodeStrength,1),K.edgeStrength=lt(K.edgeStrength,1);var Ie,Ye=K.nodeSize;if(K.preventOverlap){var Re,Xe=K.nodeSpacing;Re=M(Xe)?function(){return Xe}:C(Xe)?Xe:function(){return 0},Ie=Ye?f(Ye)?function(Ge){return(Ye[0]>Ye[1]?Ye[0]:Ye[1])+Re(Ge)}:function(Ge){return Ye+Re(Ge)}:function(Ge){return Ge.size?f(Ge.size)?(Ge.size[0]>Ge.size[1]?Ge.size[0]:Ge.size[1])+Re(Ge):Ge.size+Re(Ge):10+Re(Ge)}}K.nodeSize=Ie;var Je=K.edges;K.degrees=y(Pt.length,K.nodeIdxMap,Je),K.getMass||(K.getMass=function(Ge){return K.degrees[K.nodeIdxMap[Ge.id]]}),K.run()}else K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration;if(typeof window!="undefined"){var xe=0;this.timeInterval=window.setInterval(function(){var Ie=[],Ye=[];if(Pt){Pt.forEach(function(Ge,qe){Ie[2*qe]=0,Ie[2*qe+1]=0,Ye[2*qe]=0,Ye[2*qe+1]=0}),K.calRepulsive(Ie,Pt),Qt&&K.calAttractive(Ie,Qt),K.calGravity(Ie,Pt);var Re=Math.max(.02,K.interval-.002*xe);K.updateVelocity(Ie,Ye,Re,Pt);var Xe=[];Pt.forEach(function(Ge){Xe.push({x:Ge.x,y:Ge.y})}),K.updatePosition(Ye,Re,Pt),K.tick&&K.tick();var Je=0;Pt.forEach(function(Ge,qe){var yn=Ge.x-Xe[qe].x,Pn=Ge.y-Xe[qe].y;Je+=Math.sqrt(yn*yn+Pn*Pn)}),(Je/=Pt.length)<K.minMovement&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd()),++xe>qt&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd())}},0)}}},{key:"calRepulsive",value:function(K,Pt){var Qt=this.getMass,qt=this.nodeStrength,xe=this.factor,Ie=this.coulombDisScale,Ye=this.preventOverlap,Re=this.nodeSize;Pt.forEach(function(Xe,Je){var Ge=Qt?Qt(Xe):1;Pt.forEach(function(qe,yn){if(!(Je>=yn)){var Pn=Xe.x-qe.x,En=Xe.y-qe.y,Ln=Math.sqrt(Pn*Pn+En*En)+.01,Zn=(Ln+.1)*Ie,Qn=Pn/Ln,qn=En/Ln,fr=(qt(Xe)+qt(qe))/2*xe/(Zn*Zn),br=Qt?Qt(qe):1;if(K[2*Je]+=Qn*fr/Ge,K[2*Je+1]+=qn*fr/Ge,K[2*yn]-=Qn*fr/br,K[2*yn+1]-=qn*fr/br,Ye&&Ln<(Re(Xe)+Re(qe))/2){var gr=(qt(Xe)+qt(qe))/2/(Ln*Ln);K[2*Je]+=Qn*gr/Ge,K[2*Je+1]+=qn*gr/Ge,K[2*yn]-=Qn*gr/br,K[2*yn+1]-=qn*gr/br}}})})}},{key:"calAttractive",value:function(K,Pt){var Qt=this.nodeMap,qt=this.nodeIdxMap,xe=this.linkDistance,Ie=this.edgeStrength,Ye=this.getMass;Pt.forEach(function(Re,Xe){var Je=Qt[Re.source],Ge=Qt[Re.target],qe=Ge.x-Je.x,yn=Ge.y-Je.y,Pn=Math.sqrt(qe*qe+yn*yn)+.01,En=qe/Pn,Ln=yn/Pn,Zn=((xe(Re)||1)-Pn)*Ie(Re),Qn=qt[Re.source],qn=qt[Re.target],fr=Ye?Ye(Je):1,br=Ye?Ye(Ge):1;K[2*Qn]-=En*Zn/fr,K[2*Qn+1]-=Ln*Zn/fr,K[2*qn]+=En*Zn/br,K[2*qn+1]+=Ln*Zn/br})}},{key:"calGravity",value:function(K,Pt){for(var Qt=this.center,qt=this.gravity,xe=this.degrees,Ie=Pt.length,Ye=0;Ye<Ie;Ye++){var Re=Pt[Ye],Xe=Re.x-Qt[0],Je=Re.y-Qt[1],Ge=qt;if(this.getCenter){var qe=this.getCenter(Re,xe[Ye]);qe&&M(qe[0])&&M(qe[1])&&M(qe[2])&&(Xe=Re.x-qe[0],Je=Re.y-qe[1],Ge=qe[2])}Ge&&(K[2*Ye]-=Ge*Xe,K[2*Ye+1]-=Ge*Je)}}},{key:"updateVelocity",value:function(K,Pt,Qt,qt){var xe=this,Ie=Qt*xe.damping;qt.forEach(function(Ye,Re){var Xe=K[2*Re]*Ie||.01,Je=K[2*Re+1]*Ie||.01,Ge=Math.sqrt(Xe*Xe+Je*Je);if(Ge>xe.maxSpeed){var qe=xe.maxSpeed/Ge;Xe*=qe,Je*=qe}Pt[2*Re]=Xe,Pt[2*Re+1]=Je})}},{key:"updatePosition",value:function(K,Pt,Qt){Qt.forEach(function(qt,xe){var Ie=K[2*xe]*Pt,Ye=K[2*xe+1]*Pt;qt.x+=Ie,qt.y+=Ye})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&ct(_.prototype,w),L&&ct(_,L),It}(x);function U(Q,_,w,L){if(isNaN(_)||isNaN(w))return Q;var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye=Q._root,Re={data:L},Xe=Q._x0,Je=Q._y0,Ge=Q._x1,qe=Q._y1;if(!Ye)return Q._root=Re,Q;for(;Ye.length;)if((Qt=_>=(It=(Xe+Ge)/2))?Xe=It:Ge=It,(qt=w>=(Nt=(Je+qe)/2))?Je=Nt:qe=Nt,J=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return J[xe]=Re,Q;if(K=+Q._x.call(null,Ye.data),Pt=+Q._y.call(null,Ye.data),_===K&&w===Pt)return Re.next=Ye,J?J[xe]=Re:Q._root=Re,Q;do J=J?J[xe]=new Array(4):Q._root=new Array(4),(Qt=_>=(It=(Xe+Ge)/2))?Xe=It:Ge=It,(qt=w>=(Nt=(Je+qe)/2))?Je=Nt:qe=Nt;while((xe=qt<<1|Qt)==(Ie=(Pt>=Nt)<<1|K>=It));return J[Ie]=Ye,J[xe]=Re,Q}var P=function(_,w,L,J,It){this.node=_,this.x0=w,this.y0=L,this.x1=J,this.y1=It};function H(Q){return Q[0]}function k(Q){return Q[1]}function h(Q,_,w){var L=new g(_==null?H:_,w==null?k:w,NaN,NaN,NaN,NaN);return Q==null?L:L.addAll(Q)}function g(Q,_,w,L,J,It){this._x=Q,this._y=_,this._x0=w,this._y0=L,this._x1=J,this._y1=It,this._root=void 0}function G(Q){for(var _={data:Q.data},w=_;Q=Q.next;)w=w.next={data:Q.data};return _}var V=h.prototype=g.prototype;V.copy=function(){var Q,_,w=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),L=this._root;if(!L)return w;if(!L.length)return w._root=G(L),w;for(Q=[{source:L,target:w._root=new Array(4)}];L=Q.pop();)for(var J=0;J<4;++J)(_=L.source[J])&&(_.length?Q.push({source:_,target:L.target[J]=new Array(4)}):L.target[J]=G(_));return w},V.add=function(Q){var _=+this._x.call(null,Q),w=+this._y.call(null,Q);return U(this.cover(_,w),_,w,Q)},V.addAll=function(Q){var _,w,L,J,It=Q.length,Nt=new Array(It),K=new Array(It),Pt=1/0,Qt=1/0,qt=-1/0,xe=-1/0;for(w=0;w<It;++w)isNaN(L=+this._x.call(null,_=Q[w]))||isNaN(J=+this._y.call(null,_))||(Nt[w]=L,K[w]=J,L<Pt&&(Pt=L),L>qt&&(qt=L),J<Qt&&(Qt=J),J>xe&&(xe=J));if(Pt>qt||Qt>xe)return this;for(this.cover(Pt,Qt).cover(qt,xe),w=0;w<It;++w)U(this,Nt[w],K[w],Q[w]);return this},V.cover=function(Q,_){if(isNaN(Q=+Q)||isNaN(_=+_))return this;var w=this._x0,L=this._y0,J=this._x1,It=this._y1;if(isNaN(w))J=(w=Math.floor(Q))+1,It=(L=Math.floor(_))+1;else{for(var Nt,K,Pt=J-w||1,Qt=this._root;w>Q||Q>=J||L>_||_>=It;)switch(K=(_<L)<<1|Q<w,(Nt=new Array(4))[K]=Qt,Qt=Nt,Pt*=2,K){case 0:J=w+Pt,It=L+Pt;break;case 1:w=J-Pt,It=L+Pt;break;case 2:J=w+Pt,L=It-Pt;break;case 3:w=J-Pt,L=It-Pt}this._root&&this._root.length&&(this._root=Qt)}return this._x0=w,this._y0=L,this._x1=J,this._y1=It,this},V.data=function(){var Q=[];return this.visit(function(_){if(!_.length)do Q.push(_.data);while(_=_.next)}),Q},V.extent=function(Q){return arguments.length?this.cover(+Q[0][0],+Q[0][1]).cover(+Q[1][0],+Q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},V.find=function(Q,_,w){var L,J,It,Nt,K,Pt,Qt,qt=this._x0,xe=this._y0,Ie=this._x1,Ye=this._y1,Re=[],Xe=this._root;for(Xe&&Re.push(new P(Xe,qt,xe,Ie,Ye)),w==null?w=1/0:(qt=Q-w,xe=_-w,Ie=Q+w,Ye=_+w,w*=w);Pt=Re.pop();)if(!(!(Xe=Pt.node)||(J=Pt.x0)>Ie||(It=Pt.y0)>Ye||(Nt=Pt.x1)<qt||(K=Pt.y1)<xe))if(Xe.length){var Je=(J+Nt)/2,Ge=(It+K)/2;Re.push(new P(Xe[3],Je,Ge,Nt,K),new P(Xe[2],J,Ge,Je,K),new P(Xe[1],Je,It,Nt,Ge),new P(Xe[0],J,It,Je,Ge)),(Qt=(_>=Ge)<<1|Q>=Je)&&(Pt=Re[Re.length-1],Re[Re.length-1]=Re[Re.length-1-Qt],Re[Re.length-1-Qt]=Pt)}else{var qe=Q-+this._x.call(null,Xe.data),yn=_-+this._y.call(null,Xe.data),Pn=qe*qe+yn*yn;if(Pn<w){var En=Math.sqrt(w=Pn);qt=Q-En,xe=_-En,Ie=Q+En,Ye=_+En,L=Xe.data}}return L},V.remove=function(Q){if(isNaN(It=+this._x.call(null,Q))||isNaN(Nt=+this._y.call(null,Q)))return this;var _,w,L,J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye=this._root,Re=this._x0,Xe=this._y0,Je=this._x1,Ge=this._y1;if(!Ye)return this;if(Ye.length)for(;;){if((Qt=It>=(K=(Re+Je)/2))?Re=K:Je=K,(qt=Nt>=(Pt=(Xe+Ge)/2))?Xe=Pt:Ge=Pt,_=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return this;if(!Ye.length)break;(_[xe+1&3]||_[xe+2&3]||_[xe+3&3])&&(w=_,Ie=xe)}for(;Ye.data!==Q;)if(L=Ye,!(Ye=Ye.next))return this;return(J=Ye.next)&&delete Ye.next,L?(J?L.next=J:delete L.next,this):_?(J?_[xe]=J:delete _[xe],(Ye=_[0]||_[1]||_[2]||_[3])&&Ye===(_[3]||_[2]||_[1]||_[0])&&!Ye.length&&(w?w[Ie]=Ye:this._root=Ye),this):(this._root=J,this)},V.removeAll=function(Q){for(var _=0,w=Q.length;_<w;++_)this.remove(Q[_]);return this},V.root=function(){return this._root},V.size=function(){var Q=0;return this.visit(function(_){if(!_.length)do++Q;while(_=_.next)}),Q},V.visit=function(Q){var _,w,L,J,It,Nt,K=[],Pt=this._root;for(Pt&&K.push(new P(Pt,this._x0,this._y0,this._x1,this._y1));_=K.pop();)if(!Q(Pt=_.node,L=_.x0,J=_.y0,It=_.x1,Nt=_.y1)&&Pt.length){var Qt=(L+It)/2,qt=(J+Nt)/2;(w=Pt[3])&&K.push(new P(w,Qt,qt,It,Nt)),(w=Pt[2])&&K.push(new P(w,L,qt,Qt,Nt)),(w=Pt[1])&&K.push(new P(w,Qt,J,It,qt)),(w=Pt[0])&&K.push(new P(w,L,J,Qt,qt))}return this},V.visitAfter=function(Q){var _,w=[],L=[];for(this._root&&w.push(new P(this._root,this._x0,this._y0,this._x1,this._y1));_=w.pop();){var J=_.node;if(J.length){var It,Nt=_.x0,K=_.y0,Pt=_.x1,Qt=_.y1,qt=(Nt+Pt)/2,xe=(K+Qt)/2;(It=J[0])&&w.push(new P(It,Nt,K,qt,xe)),(It=J[1])&&w.push(new P(It,qt,K,Pt,xe)),(It=J[2])&&w.push(new P(It,Nt,xe,qt,Qt)),(It=J[3])&&w.push(new P(It,qt,xe,Pt,Qt))}L.push(_)}for(;_=L.pop();)Q(_.node,_.x0,_.y0,_.x1,_.y1);return this},V.x=function(Q){return arguments.length?(this._x=Q,this):this._x},V.y=function(Q){return arguments.length?(this._y=Q,this):this._y};var $=function(_){return function(){return _}},rt=function(_){return 1e-6*(_()-.5)},ot={value:function(){}};function At(){for(var Q,_=0,w=arguments.length,L={};_<w;++_){if(!(Q=arguments[_]+"")||Q in L||/[\s.]/.test(Q))throw new Error("illegal type: "+Q);L[Q]=[]}return new gt(L)}function gt(Q){this._=Q}function mt(Q,_){return Q.trim().split(/^|\s+/).map(function(w){var L="",J=w.indexOf(".");if(J>=0&&(L=w.slice(J+1),w=w.slice(0,J)),w&&!_.hasOwnProperty(w))throw new Error("unknown type: "+w);return{type:w,name:L}})}function bt(Q,_){for(var w,L=0,J=Q.length;L<J;++L)if((w=Q[L]).name===_)return w.value}function jt(Q,_,w){for(var L=0,J=Q.length;L<J;++L)if(Q[L].name===_){Q[L]=ot,Q=Q.slice(0,L).concat(Q.slice(L+1));break}return w!=null&&Q.push({name:_,value:w}),Q}gt.prototype=At.prototype={constructor:gt,on:function(_,w){var L,J=this._,It=mt(_+"",J),Nt=-1,K=It.length;if(!(arguments.length<2)){if(w!=null&&typeof w!="function")throw new Error("invalid callback: "+w);for(;++Nt<K;)if(L=(_=It[Nt]).type)J[L]=jt(J[L],_.name,w);else if(w==null)for(L in J)J[L]=jt(J[L],_.name,null);return this}for(;++Nt<K;)if((L=(_=It[Nt]).type)&&(L=bt(J[L],_.name)))return L},copy:function(){var _={},w=this._;for(var L in w)_[L]=w[L].slice();return new gt(_)},call:function(_,w){if((L=arguments.length-2)>0)for(var L,J,It=new Array(L),Nt=0;Nt<L;++Nt)It[Nt]=arguments[Nt+2];if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(Nt=0,L=(J=this._[_]).length;Nt<L;++Nt)J[Nt].value.apply(w,It)},apply:function(_,w,L){if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(var J=this._[_],It=0,Nt=J.length;It<Nt;++It)J[It].value.apply(w,L)}};var Dt=At;function Ut(Q){return(Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}var Ct,Vt,Ht=0,re=0,pe=0,ye=0,we=0,Ne=0,Ke=(typeof performance=="undefined"?"undefined":Ut(performance))==="object"&&performance.now?performance:Date,pn=(typeof window=="undefined"?"undefined":Ut(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Q){setTimeout(Q,17)};function hn(){return we||(pn(kn),we=Ke.now()+Ne)}function kn(){we=0}function Tn(){this._call=this._time=this._next=null}function Rn(Q,_,w){var L=new Tn;return L.restart(Q,_,w),L}function Mn(){we=(ye=Ke.now())+Ne,Ht=re=0;try{(function(){hn(),++Ht;for(var Q,_=Ct;_;)(Q=we-_._time)>=0&&_._call.call(null,Q),_=_._next;--Ht})()}finally{Ht=0,function(){for(var Q,_,w=Ct,L=1/0;w;)w._call?(L>w._time&&(L=w._time),Q=w,w=w._next):(_=w._next,w._next=null,w=Q?Q._next=_:Ct=_);Vt=Q,_n(L)}(),we=0}}function Cn(){var Q=Ke.now(),_=Q-ye;_>1e3&&(Ne-=_,ye=Q)}function _n(Q){Ht||(re&&(re=clearTimeout(re)),Q-we>24?(Q<1/0&&(re=setTimeout(Mn,Q-Ke.now()-Ne)),pe&&(pe=clearInterval(pe))):(pe||(ye=Ke.now(),pe=setInterval(Cn,1e3)),Ht=1,pn(Mn)))}Tn.prototype=Rn.prototype={constructor:Tn,restart:function(_,w,L){if(typeof _!="function")throw new TypeError("callback is not a function");L=(L==null?hn():+L)+(w==null?0:+w),this._next||Vt===this||(Vt?Vt._next=this:Ct=this,Vt=this),this._call=_,this._time=L,_n()},stop:function(){this._call&&(this._call=null,this._time=1/0,_n())}};function Kn(Q){return Q.x}function tr(Q){return Q.y}var or=Math.PI*(3-Math.sqrt(5)),nr=function(_){var w,L,J=1,It=.001,Nt=1-Math.pow(It,1/300),K=0,Pt=.6,Qt=new Map,qt=Rn(Ye),xe=Dt("tick","end"),Ie=(L=1,function(){return(L=(1664525*L+1013904223)%4294967296)/4294967296});function Ye(){Re(),xe.call("tick",w),J<It&&(qt.stop(),xe.call("end",w))}function Re(Ge){var qe,yn,Pn=_.length;Ge===void 0&&(Ge=1);for(var En=0;En<Ge;++En)for(J+=(K-J)*Nt,Qt.forEach(function(Ln){Ln(J)}),qe=0;qe<Pn;++qe)(yn=_[qe]).fx==null?yn.x+=yn.vx*=Pt:(yn.x=yn.fx,yn.vx=0),yn.fy==null?yn.y+=yn.vy*=Pt:(yn.y=yn.fy,yn.vy=0);return w}function Xe(){for(var Ge,qe=0,yn=_.length;qe<yn;++qe){if((Ge=_[qe]).index=qe,Ge.fx!=null&&(Ge.x=Ge.fx),Ge.fy!=null&&(Ge.y=Ge.fy),isNaN(Ge.x)||isNaN(Ge.y)){var Pn=10*Math.sqrt(.5+qe),En=qe*or;Ge.x=Pn*Math.cos(En),Ge.y=Pn*Math.sin(En)}(isNaN(Ge.vx)||isNaN(Ge.vy))&&(Ge.vx=Ge.vy=0)}}function Je(Ge){return Ge.initialize&&Ge.initialize(_,Ie),Ge}return _==null&&(_=[]),Xe(),w={tick:Re,restart:function(){return qt.restart(Ye),w},stop:function(){return qt.stop(),w},nodes:function(qe){return arguments.length?(_=qe,Xe(),Qt.forEach(Je),w):_},alpha:function(qe){return arguments.length?(J=+qe,w):J},alphaMin:function(qe){return arguments.length?(It=+qe,w):It},alphaDecay:function(qe){return arguments.length?(Nt=+qe,w):+Nt},alphaTarget:function(qe){return arguments.length?(K=+qe,w):K},velocityDecay:function(qe){return arguments.length?(Pt=1-qe,w):1-Pt},randomSource:function(qe){return arguments.length?(Ie=qe,Qt.forEach(Je),w):Ie},force:function(qe,yn){return arguments.length>1?(yn==null?Qt.delete(qe):Qt.set(qe,Je(yn)),w):Qt.get(qe)},find:function(qe,yn,Pn){var En,Ln,Zn,Qn,qn,fr=0,br=_.length;for(Pn==null?Pn=1/0:Pn*=Pn,fr=0;fr<br;++fr)(Zn=(En=qe-(Qn=_[fr]).x)*En+(Ln=yn-Qn.y)*Ln)<Pn&&(qn=Qn,Pn=Zn);return qn},on:function(qe,yn){return arguments.length>1?(xe.on(qe,yn),w):xe.on(qe)}}},er=function(){var _,w,L,J,It,Nt=$(-30),K=1,Pt=1/0,Qt=.81;function qt(Re){var Xe,Je=_.length,Ge=h(_,Kn,tr).visitAfter(Ie);for(J=Re,Xe=0;Xe<Je;++Xe)w=_[Xe],Ge.visit(Ye)}function xe(){if(_){var Re,Xe,Je=_.length;for(It=new Array(Je),Re=0;Re<Je;++Re)Xe=_[Re],It[Xe.index]=+Nt(Xe,Re,_)}}function Ie(Re){var Xe,Je,Ge,qe,yn,Pn=0,En=0;if(Re.length){for(Ge=qe=yn=0;yn<4;++yn)(Xe=Re[yn])&&(Je=Math.abs(Xe.value))&&(Pn+=Xe.value,En+=Je,Ge+=Je*Xe.x,qe+=Je*Xe.y);Re.x=Ge/En,Re.y=qe/En}else{(Xe=Re).x=Xe.data.x,Xe.y=Xe.data.y;do Pn+=It[Xe.data.index];while(Xe=Xe.next)}Re.value=Pn}function Ye(Re,Xe,Je,Ge){if(!Re.value)return!0;var qe=Re.x-w.x,yn=Re.y-w.y,Pn=Ge-Xe,En=qe*qe+yn*yn;if(Pn*Pn/Qt<En)return En<Pt&&(qe===0&&(En+=(qe=rt(L))*qe),yn===0&&(En+=(yn=rt(L))*yn),En<K&&(En=Math.sqrt(K*En)),w.vx+=qe*Re.value*J/En,w.vy+=yn*Re.value*J/En),!0;if(!(Re.length||En>=Pt)){(Re.data!==w||Re.next)&&(qe===0&&(En+=(qe=rt(L))*qe),yn===0&&(En+=(yn=rt(L))*yn),En<K&&(En=Math.sqrt(K*En)));do Re.data!==w&&(Pn=It[Re.data.index]*J/En,w.vx+=qe*Pn,w.vy+=yn*Pn);while(Re=Re.next)}}return qt.initialize=function(Re,Xe){_=Re,L=Xe,xe()},qt.strength=function(Re){return arguments.length?(Nt=typeof Re=="function"?Re:$(+Re),xe(),qt):Nt},qt.distanceMin=function(Re){return arguments.length?(K=Re*Re,qt):Math.sqrt(K)},qt.distanceMax=function(Re){return arguments.length?(Pt=Re*Re,qt):Math.sqrt(Pt)},qt.theta=function(Re){return arguments.length?(Qt=Re*Re,qt):Math.sqrt(Qt)},qt};function Sr(Q){return(Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function Vr(Q){return Q.index}function ti(Q,_){var w=Q.get(_);if(!w)throw new Error("node not found: "+_);return w}var hi=function(_){var w,L,J,It,Nt,K,Pt=Vr,Qt=function(Ge){return 1/Math.min(It[Ge.source.index],It[Ge.target.index])},qt=$(30),xe=1;function Ie(Je){for(var Ge=0,qe=_.length;Ge<xe;++Ge)for(var yn,Pn,En,Ln,Zn,Qn,qn,fr=0;fr<qe;++fr)Pn=(yn=_[fr]).source,Ln=(En=yn.target).x+En.vx-Pn.x-Pn.vx||rt(K),Zn=En.y+En.vy-Pn.y-Pn.vy||rt(K),Ln*=Qn=((Qn=Math.sqrt(Ln*Ln+Zn*Zn))-L[fr])/Qn*Je*w[fr],Zn*=Qn,En.vx-=Ln*(qn=Nt[fr]),En.vy-=Zn*qn,Pn.vx+=Ln*(qn=1-qn),Pn.vy+=Zn*qn}function Ye(){if(J){var Je,Ge,qe=J.length,yn=_.length,Pn=new Map(J.map(function(En,Ln){return[Pt(En,Ln,J),En]}));for(Je=0,It=new Array(qe);Je<yn;++Je)(Ge=_[Je]).index=Je,Sr(Ge.source)!=="object"&&(Ge.source=ti(Pn,Ge.source)),Sr(Ge.target)!=="object"&&(Ge.target=ti(Pn,Ge.target)),It[Ge.source.index]=(It[Ge.source.index]||0)+1,It[Ge.target.index]=(It[Ge.target.index]||0)+1;for(Je=0,Nt=new Array(yn);Je<yn;++Je)Ge=_[Je],Nt[Je]=It[Ge.source.index]/(It[Ge.source.index]+It[Ge.target.index]);w=new Array(yn),Re(),L=new Array(yn),Xe()}}function Re(){if(J)for(var Je=0,Ge=_.length;Je<Ge;++Je)w[Je]=+Qt(_[Je],Je,_)}function Xe(){if(J)for(var Je=0,Ge=_.length;Je<Ge;++Je)L[Je]=+qt(_[Je],Je,_)}return _==null&&(_=[]),Ie.initialize=function(Je,Ge){J=Je,K=Ge,Ye()},Ie.links=function(Je){return arguments.length?(_=Je,Ye(),Ie):_},Ie.id=function(Je){return arguments.length?(Pt=Je,Ie):Pt},Ie.iterations=function(Je){return arguments.length?(xe=+Je,Ie):xe},Ie.strength=function(Je){return arguments.length?(Qt=typeof Je=="function"?Je:$(+Je),Re(),Ie):Qt},Ie.distance=function(Je){return arguments.length?(qt=typeof Je=="function"?Je:$(+Je),Xe(),Ie):qt},Ie};function Fi(Q){return Q.x+Q.vx}function to(Q){return Q.y+Q.vy}var si=function(_){var w,L,J,It=1,Nt=1;function K(){for(var qt,xe,Ie,Ye,Re,Xe,Je,Ge=w.length,qe=0;qe<Nt;++qe)for(xe=h(w,Fi,to).visitAfter(Pt),qt=0;qt<Ge;++qt)Ie=w[qt],Xe=L[Ie.index],Je=Xe*Xe,Ye=Ie.x+Ie.vx,Re=Ie.y+Ie.vy,xe.visit(yn);function yn(Pn,En,Ln,Zn,Qn){var qn=Pn.data,fr=Pn.r,br=Xe+fr;if(!qn)return En>Ye+br||Zn<Ye-br||Ln>Re+br||Qn<Re-br;if(qn.index>Ie.index){var gr=Ye-qn.x-qn.vx,hr=Re-qn.y-qn.vy,Tr=gr*gr+hr*hr;Tr<br*br&&(gr===0&&(Tr+=(gr=rt(J))*gr),hr===0&&(Tr+=(hr=rt(J))*hr),Tr=(br-(Tr=Math.sqrt(Tr)))/Tr*It,Ie.vx+=(gr*=Tr)*(br=(fr*=fr)/(Je+fr)),Ie.vy+=(hr*=Tr)*br,qn.vx-=gr*(br=1-br),qn.vy-=hr*br)}}}function Pt(qt){if(qt.data)return qt.r=L[qt.data.index];for(var xe=qt.r=0;xe<4;++xe)qt[xe]&&qt[xe].r>qt.r&&(qt.r=qt[xe].r)}function Qt(){if(w){var qt,xe,Ie=w.length;for(L=new Array(Ie),qt=0;qt<Ie;++qt)xe=w[qt],L[xe.index]=+_(xe,qt,w)}}return typeof _!="function"&&(_=$(_==null?1:+_)),K.initialize=function(qt,xe){w=qt,J=xe,Qt()},K.iterations=function(qt){return arguments.length?(Nt=+qt,K):Nt},K.strength=function(qt){return arguments.length?(It=+qt,K):It},K.radius=function(qt){return arguments.length?(_=typeof qt=="function"?qt:$(+qt),Qt(),K):_},K};function Ci(Q,_){return function(w){if(Array.isArray(w))return w}(Q)||function(w,L){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(w)))){var J=[],It=!0,Nt=!1,K=void 0;try{for(var Pt,Qt=w[Symbol.iterator]();!(It=(Pt=Qt.next()).done)&&(J.push(Pt.value),!L||J.length!==L);It=!0);}catch(qt){Nt=!0,K=qt}finally{try{It||Qt.return==null||Qt.return()}finally{if(Nt)throw K}}return J}}(Q,_)||function(w,L){if(!!w){if(typeof w=="string")return _i(w,L);var J=Object.prototype.toString.call(w).slice(8,-1);if(J==="Object"&&w.constructor&&(J=w.constructor.name),J==="Map"||J==="Set")return Array.from(w);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return _i(w,L)}}(Q,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _i(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}function Li(){function Q(Ln){return function(){return Ln}}var _,w=function(Zn){return Zn.cluster},L=Q(1),J=Q(-1),It=Q(100),Nt=Q(.1),K=[0,0],Pt=[],Qt={},qt=[],xe=100,Ie=100,Ye={none:{x:0,y:0}},Re=[],Xe="force",Je=!0,Ge=.1;function qe(Ln){if(!Je)return qe;_.tick(),Pn();for(var Zn,Qn=0,qn=Pt.length,fr=Ln*Ge;Qn<qn;++Qn)(Zn=Pt[Qn]).vx+=(Ye[w(Zn)].x-Zn.x)*fr,Zn.vy+=(Ye[w(Zn)].y-Zn.y)*fr}function yn(){Pt&&function(){if(!(!Pt||!Pt.length)){if(w(Pt[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ln=(Qn=[],qn=[],fr={},br=[],Zn=function(gr){var hr={};return gr.forEach(function(Tr){var dr=w(Tr);hr[dr]||(hr[dr]={count:0,sumforceNodeSize:0})}),gr.forEach(function(Tr){var dr=w(Tr),Jr=L(Tr),qr=hr[dr];qr.count=qr.count+1,qr.sumforceNodeSize=qr.sumforceNodeSize+Math.PI*(Jr*Jr)*1.3,hr[dr]=qr}),hr}(Pt),br=function(gr){var hr={},Tr=[];return gr.forEach(function(dr){var Jr=function(wi){var Cr=w(Qt[wi.source]),pi=w(Qt[wi.target]);return Cr<=pi?"".concat(Cr,"~").concat(pi):"".concat(pi,"~").concat(Cr)}(dr),qr=0;hr[Jr]!==void 0&&(qr=hr[Jr]),qr+=1,hr[Jr]=qr}),Object.entries(hr).forEach(function(dr){var Jr=Ci(dr,2),qr=Jr[0],wi=Jr[1],Cr=qr.split("~")[0],pi=qr.split("~")[1];Cr!==void 0&&pi!==void 0&&Tr.push({source:Cr,target:pi,count:wi})}),Tr}(qt),Object.keys(Zn).forEach(function(gr,hr){var Tr=Zn[gr];Qn.push({id:gr,size:Tr.count,r:Math.sqrt(Tr.sumforceNodeSize/Math.PI)}),fr[gr]=hr}),br.forEach(function(gr){var hr=fr[gr.source],Tr=fr[gr.target];hr!==void 0&&Tr!==void 0&&qn.push({source:hr,target:Tr,count:gr.count})}),{nodes:Qn,links:qn}),Zn,Qn,qn,fr,br;_=nr(Ln.nodes).force("x",function(gr){var hr,Tr,dr,Jr=$(.1);function qr(Cr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vx+=(dr[Ei]-pi.x)*Tr[Ei]*Cr}function wi(){if(hr){var Cr,pi=hr.length;for(Tr=new Array(pi),dr=new Array(pi),Cr=0;Cr<pi;++Cr)Tr[Cr]=isNaN(dr[Cr]=+gr(hr[Cr],Cr,hr))?0:+Jr(hr[Cr],Cr,hr)}}return typeof gr!="function"&&(gr=$(gr==null?0:+gr)),qr.initialize=function(Cr){hr=Cr,wi()},qr.strength=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:$(+Cr),wi(),qr):Jr},qr.x=function(Cr){return arguments.length?(gr=typeof Cr=="function"?Cr:$(+Cr),wi(),qr):gr},qr}(xe).strength(.1)).force("y",function(gr){var hr,Tr,dr,Jr=$(.1);function qr(Cr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vy+=(dr[Ei]-pi.y)*Tr[Ei]*Cr}function wi(){if(hr){var Cr,pi=hr.length;for(Tr=new Array(pi),dr=new Array(pi),Cr=0;Cr<pi;++Cr)Tr[Cr]=isNaN(dr[Cr]=+gr(hr[Cr],Cr,hr))?0:+Jr(hr[Cr],Cr,hr)}}return typeof gr!="function"&&(gr=$(gr==null?0:+gr)),qr.initialize=function(Cr){hr=Cr,wi()},qr.strength=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:$(+Cr),wi(),qr):Jr},qr.y=function(Cr){return arguments.length?(gr=typeof Cr=="function"?Cr:$(+Cr),wi(),qr):gr},qr}(Ie).strength(.1)).force("collide",si(function(gr){return gr.r}).iterations(4)).force("charge",er().strength(J)).force("links",hi(Ln.nodes.length?Ln.links:[]).distance(It).strength(Nt)),Re=_.nodes(),Pn()}}()}function Pn(){return Ye={none:{x:0,y:0}},Re.forEach(function(Ln){Ye[Ln.id]={x:Ln.x-K[0],y:Ln.y-K[1]}}),Ye}function En(Ln){Qt={},Ln.forEach(function(Zn){Qt[Zn.id]=Zn})}return qe.initialize=function(Ln){Pt=Ln,yn()},qe.template=function(Ln){return arguments.length?(Xe=Ln,yn(),qe):Xe},qe.groupBy=function(Ln){return arguments.length?typeof Ln=="string"?(w=function(Qn){return Qn[Ln]},qe):(w=Ln,qe):w},qe.enableGrouping=function(Ln){return arguments.length?(Je=Ln,qe):Je},qe.strength=function(Ln){return arguments.length?(Ge=Ln,qe):Ge},qe.centerX=function(Ln){return arguments.length?(xe=Ln,qe):xe},qe.centerY=function(Ln){return arguments.length?(Ie=Ln,qe):Ie},qe.nodes=function(Ln){return arguments.length?(En(Ln||[]),Pt=Ln||[],qe):Pt},qe.links=function(Ln){return arguments.length?(qt=Ln||[],yn(),qe):qt},qe.forceNodeSize=function(Ln){return arguments.length?(L=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):L},qe.nodeSize=qe.forceNodeSize,qe.forceCharge=function(Ln){return arguments.length?(J=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):J},qe.forceLinkDistance=function(Ln){return arguments.length?(It=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):It},qe.forceLinkStrength=function(Ln){return arguments.length?(Nt=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):Nt},qe.offset=function(Ln){return arguments.length?(K=Ln,qe):K},qe.getFocis=Pn,qe}var Vi="LAYOUT_RUN",ro="LAYOUT_END",jr="LAYOUT_ERROR",Ji="LAYOUT_TICK",pr="GPU_LAYOUT_RUN",Yr="GPU_LAYOUT_END";function Br(Q){return(Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function Nr(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Xr(Q,_){return(Xr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function Kr(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=fi(Q);if(_){var J=fi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return ni(this,w)}}function ni(Q,_){return!_||Br(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function fi(Q){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var $r=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Xr(Nt,K)})(It,Q);var _,w,L,J=Kr(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.nodeStrength=null,K.edgeStrength=null,K.preventOverlap=!1,K.clusterNodeStrength=null,K.clusterEdgeStrength=null,K.clusterEdgeDistance=null,K.clusterNodeSize=null,K.clusterFociStrength=null,K.linkDistance=50,K.alphaDecay=.028,K.alphaMin=.001,K.alpha=.3,K.collideStrength=1,K.workerEnabled=!1,K.tick=function(){},K.onLayoutEnd=function(){},K.ticking=void 0,Nt&&K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(K){this.nodes=K.nodes||[];var Pt=K.edges||[];this.edges=Pt.map(function(Qt){var qt={},xe=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Qt).forEach(function(Ie){xe.indexOf(Ie)>-1||(qt[Ie]=Qt[Ie])}),qt}),this.ticking=!1}},{key:"execute",value:function(K){var Pt=this,Qt=Pt.nodes,qt=Pt.edges;if(!Pt.ticking){var xe=Pt.forceSimulation,Ie=Pt.alphaMin,Ye=Pt.alphaDecay,Re=Pt.alpha;if(xe){if(K){if(Pt.clustering&&Pt.clusterForce&&(Pt.clusterForce.nodes(Qt),Pt.clusterForce.links(qt)),xe.nodes(Qt),qt&&Pt.edgeForce)Pt.edgeForce.links(qt);else if(qt&&!Pt.edgeForce){var Xe=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&Xe.strength(Pt.edgeStrength),Pt.linkDistance&&Xe.distance(Pt.linkDistance),Pt.edgeForce=Xe,xe.force("link",Xe)}}Pt.preventOverlap&&Pt.overlapProcess(xe),xe.alpha(Re).restart(),this.ticking=!0}else try{var Je=er();if(Pt.nodeStrength&&Je.strength(Pt.nodeStrength),xe=nr().nodes(Qt),Pt.clustering){var Ge=Li();Ge.centerX(Pt.center[0]).centerY(Pt.center[1]).template("force").strength(Pt.clusterFociStrength),qt&&Ge.links(qt),Qt&&Ge.nodes(Qt),Ge.forceLinkDistance(Pt.clusterEdgeDistance).forceLinkStrength(Pt.clusterEdgeStrength).forceCharge(Pt.clusterNodeStrength).forceNodeSize(Pt.clusterNodeSize),Pt.clusterForce=Ge,xe.force("group",Ge)}if(xe.force("center",function(En,Ln){var Zn,Qn=1;function qn(){var fr,br,gr=Zn.length,hr=0,Tr=0;for(fr=0;fr<gr;++fr)hr+=(br=Zn[fr]).x,Tr+=br.y;for(hr=(hr/gr-En)*Qn,Tr=(Tr/gr-Ln)*Qn,fr=0;fr<gr;++fr)(br=Zn[fr]).x-=hr,br.y-=Tr}return En==null&&(En=0),Ln==null&&(Ln=0),qn.initialize=function(fr){Zn=fr},qn.x=function(fr){return arguments.length?(En=+fr,qn):En},qn.y=function(fr){return arguments.length?(Ln=+fr,qn):Ln},qn.strength=function(fr){return arguments.length?(Qn=+fr,qn):Qn},qn}(Pt.center[0],Pt.center[1])).force("charge",Je).alpha(Re).alphaDecay(Ye).alphaMin(Ie),Pt.preventOverlap&&Pt.overlapProcess(xe),qt){var qe=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&qe.strength(Pt.edgeStrength),Pt.linkDistance&&qe.distance(Pt.linkDistance),Pt.edgeForce=qe,xe.force("link",qe)}if(Pt.workerEnabled&&!ci()&&(Pt.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),Pt.workerEnabled){xe.stop();for(var yn=function(En){var Ln=En.alphaMin(),Zn=En.alphaTarget(),Qn=En.alpha(),qn=Math.log((Ln-Zn)/(Qn-Zn))/Math.log(1-En.alphaDecay());return Math.ceil(qn)}(xe),Pn=1;Pn<=yn;Pn++)xe.tick(),postMessage({nodes:Qt,currentTick:Pn,totalTicks:yn,type:Ji},void 0);Pt.ticking=!1}else xe.on("tick",function(){Pt.tick()}).on("end",function(){Pt.ticking=!1,Pt.onLayoutEnd&&Pt.onLayoutEnd()}),Pt.ticking=!0;Pt.forceSimulation=xe,Pt.ticking=!0}catch(En){Pt.ticking=!1,console.warn(En)}}}},{key:"overlapProcess",value:function(K){var Pt,Qt,qt=this.nodeSize,xe=this.nodeSpacing,Ie=this.collideStrength;if(Qt=M(xe)?function(){return xe}:C(xe)?xe:function(){return 0},qt)if(C(qt))Pt=function(Je){return qt(Je)+Qt(Je)};else if(f(qt)){var Ye=(qt[0]>qt[1]?qt[0]:qt[1])/2;Pt=function(Je){return Ye+Qt(Je)}}else if(M(qt)){var Re=qt/2;Pt=function(Je){return Re+Qt(Je)}}else Pt=function(){return 10};else Pt=function(Je){return Je.size?f(Je.size)?(Je.size[0]>Je.size[1]?Je.size[0]:Je.size[1])/2+Qt(Je):Je.size/2+Qt(Je):10+Qt(Je)};K.force("collisionForce",si(Pt).strength(Ie))}},{key:"updateCfg",value:function(K){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,K)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&Nr(_.prototype,w),L&&Nr(_,L),It}(x);function ci(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Qr(Q){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function gi(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oi(Q,_){return(Oi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function bi(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Qi(Q);if(_){var J=Qi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zi(this,w)}}function zi(Q,_){return!_||Qr(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function Qi(Q){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}function io(Q,_,w,L){Q.forEach(function(J,It){Q[It].children=[],Q[It].parent=[]}),L?_.forEach(function(J){var It=0;J.source&&(It=w[J.source]);var Nt=0;J.target&&(Nt=w[J.target]);var K=Q[It].children,Pt=Q[Nt].parent;K.push(Q[Nt].id),Pt.push(Q[It].id)}):_.forEach(function(J){var It=0;J.source&&(It=w[J.source]);var Nt=0;J.target&&(Nt=w[J.target]);var K=Q[It].children,Pt=Q[Nt].children;K.push(Q[Nt].id),Pt.push(Q[It].id)})}function Wi(Q,_,w){for(var L=w.length,J=0;J<L;J++)if(Q.id===w[J].source&&_.id===w[J].target||_.id===w[J].source&&Q.id===w[J].target)return!0;return!1}function Zi(Q,_){var w=Q.degree,L=_.degree;return w<L?-1:w>L?1:0}var Pi=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Oi(Nt,K)})(It,Q);var _,w,L,J=bi(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).radius=null,K.startRadius=null,K.endRadius=null,K.startAngle=0,K.endAngle=2*Math.PI,K.clockwise=!0,K.divisions=1,K.ordering=null,K.angleRatio=1,K.nodes=[],K.edges=[],K.nodeMap={},K.degrees=[],K.width=300,K.height=300,K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=K.length;if(Qt!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var qt=this.center;if(Qt===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.radius,Ie=this.startRadius,Ye=this.endRadius,Re=this.divisions,Xe=this.startAngle,Je=this.endAngle,Ge=(Je-Xe)/Qt,qe={};K.forEach(function(gr,hr){qe[gr.id]=hr}),this.nodeMap=qe;var yn=y(K.length,qe,Pt);this.degrees=yn,xe||Ie||Ye?!Ie&&Ye?Ie=Ye:Ie&&!Ye&&(Ye=Ie):xe=this.height>this.width?this.width/2:this.height/2;var Pn=Ge*this.angleRatio,En=this.ordering,Ln=[];Ln=En==="topology"?this.topologyOrdering():En==="topology-directed"?this.topologyOrdering(!0):En==="degree"?this.degreeOrdering():K;for(var Zn=this.clockwise,Qn=Math.ceil(Qt/Re),qn=0;qn<Qt;++qn){var fr=xe;fr||Ie===null||Ye===null||(fr=Ie+qn*(Ye-Ie)/(Qt-1)),fr||(fr=10+100*qn/(Qt-1));var br=Xe+qn%Qn*Pn+2*Math.PI/Re*Math.floor(qn/Qn);Zn||(br=Je-qn%Qn*Pn-2*Math.PI/Re*Math.floor(qn/Qn)),Ln[qn].x=qt[0]+Math.cos(br)*fr,Ln[qn].y=qt[1]+Math.sin(br)*fr,Ln[qn].weight=yn[qn]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:Ln,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var K=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Pt=this,Qt=Pt.degrees,qt=Pt.edges,xe=Pt.nodes,Ie=O(xe),Ye=Pt.nodeMap,Re=[Ie[0]],Xe=[xe[0]],Je=[],Ge=xe.length;Je[0]=!0,io(Ie,qt,Ye,K);var qe=0;return Ie.forEach(function(yn,Pn){if(Pn!==0)if(Pn!==Ge-1&&Qt[Pn]===Qt[Pn+1]&&!Wi(Re[qe],yn,qt)||Je[Pn]){for(var En=Re[qe].children,Ln=!1,Zn=0;Zn<En.length;Zn++){var Qn=Ye[En[Zn]];if(Qt[Qn]===Qt[Pn]&&!Je[Qn]){Re.push(Ie[Qn]),Xe.push(xe[Ye[Ie[Qn].id]]),Je[Qn]=!0,Ln=!0;break}}for(var qn=0;!Ln&&(Je[qn]||(Re.push(Ie[qn]),Xe.push(xe[Ye[Ie[qn].id]]),Je[qn]=!0,Ln=!0),++qn!==Ge););}else Re.push(yn),Xe.push(xe[Ye[yn.id]]),Je[Pn]=!0,qe++}),Xe}},{key:"degreeOrdering",value:function(){var K=this.nodes,Pt=[],Qt=this.degrees;return K.forEach(function(qt,xe){qt.degree=Qt[xe],Pt.push(qt)}),Pt.sort(Zi),Pt}},{key:"getType",value:function(){return"circular"}}])&&gi(_.prototype,w),L&&gi(_,L),It}(x),no=e(153),Mo=e.n(no);function ao(Q){return(ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function uo(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function xo(Q,_){return(xo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function oe(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=te(Q);if(_){var J=te(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Kt(this,w)}}function Kt(Q,_){return!_||ao(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function te(Q){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var Oe=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&xo(Nt,K)})(It,Q);var _,w,L,J=oe(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).rankdir="TB",K.nodesep=50,K.ranksep=50,K.controlPoints=!1,K.sortByCombo=!1,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.nodeSize,qt=K.rankdir;if(Pt){var xe,Ie=K.edges||[],Ye=new Mo.a.graphlib.Graph;xe=Qt?f(Qt)?function(){return Qt}:function(){return[Qt,Qt]}:function(Ge){return Ge.size?f(Ge.size)?Ge.size:[Ge.size,Ge.size]:[40,40]};var Re,Xe=Qe(K.nodesepFunc,K.nodesep,50),Je=Qe(K.ranksepFunc,K.ranksep,50);return qt!=="LR"&&qt!=="RL"||(Xe=Qe(K.ranksepFunc,K.ranksep,50),Je=Qe(K.nodesepFunc,K.nodesep,50)),Ye.setDefaultEdgeLabel(function(){return{}}),Ye.setGraph(K),Pt.forEach(function(Ge){var qe=xe(Ge),yn=Je(Ge),Pn=Xe(Ge),En=qe[0]+2*Pn,Ln=qe[1]+2*yn;Ye.setNode(Ge.id,{width:En,height:Ln})}),Ie.forEach(function(Ge){Ye.setEdge(Ge.source,Ge.target,{weight:Ge.weight||1})}),Mo.a.layout(Ye),Ye.nodes().forEach(function(Ge){Re=Ye.node(Ge);var qe=Pt.findIndex(function(yn){return yn.id===Ge});Pt[qe].x=Re.x,Pt[qe].y=Re.y}),Ye.edges().forEach(function(Ge){Re=Ye.edge(Ge);var qe=Ie.findIndex(function(yn){return yn.source===Ge.v&&yn.target===Ge.w});K.controlPoints&&Ie[qe].type!=="loop"&&(Ie[qe].controlPoints=Re.points.slice(1,Re.points.length-1))}),K.sortByCombo&&K.sortLevel("comboId"),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Ie}}}},{key:"sortLevel",value:function(K){var Pt=this,Qt=Pt.nodes,qt={};Qt.forEach(function(xe){qt[xe.y]||(qt[xe.y]={y:xe.y,nodes:[]}),qt[xe.y].nodes.push(xe)}),Object.keys(qt).forEach(function(xe){var Ie=qt[xe].nodes,Ye=Ie.length,Re={};if(Ie.forEach(function(qe){var yn=qe.comboId;Re[yn]||(Re[yn]={x:0,y:0,count:0}),Re[yn].x+=qe.x,Re[yn].y+=qe.y,Re[yn].count++}),Object.keys(Re).forEach(function(qe){Re[qe].x/=Re[qe].count,Re[qe].y/=Re[qe].count}),Ye!==1){var Xe=Ie.sort(function(qe,yn){return qe.x-yn.x}),Je=Xe[0].x,Ge=(Xe[Ye-1].x-Je)/(Ye-1);Ie.sort(function(qe,yn){var Pn=qe[K]||"undefined",En=yn[K]||"undefined";return Pn<En?-1:Pn>En?1:0}).forEach(function(qe,yn){qe.x=Je+yn*Ge})}else Pt.onLayoutEnd&&Pt.onLayoutEnd()})}},{key:"getType",value:function(){return"dagre"}}])&&uo(_.prototype,w),L&&uo(_,L),It}(x);function Qe(Q,_,w){return Q||(M(_)?function(){return _}:function(){return w})}var On=Object.prototype.toString;function Vn(Q){return On.call(Q).endsWith("Array]")}var Xn=function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,It=w.toIndex,Nt=It===void 0?_.length:It;if(J<0||J>=_.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=J||Nt>_.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=_[J],Pt=J+1;Pt<Nt;Pt++)_[Pt]>K&&(K=_[Pt]);return K},$e=function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,It=w.toIndex,Nt=It===void 0?_.length:It;if(J<0||J>=_.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=J||Nt>_.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=_[J],Pt=J+1;Pt<Nt;Pt++)_[Pt]<K&&(K=_[Pt]);return K},rn=function(_){var w,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");if(L.output!==void 0){if(!Vn(L.output))throw new TypeError("output option must be an array if specified");w=L.output}else w=new Array(_.length);var J=$e(_),It=Xn(_);if(J===It)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Nt=L.min,K=Nt===void 0?L.autoMinMax?J:0:Nt,Pt=L.max,Qt=Pt===void 0?L.autoMinMax?It:1:Pt;if(K>=Qt)throw new RangeError("min option must be smaller than max option");for(var qt=(Qt-K)/(It-J),xe=0;xe<_.length;xe++)w[xe]=(_[xe]-J)*qt+K;return w},on=" ".repeat(2),$n=" ".repeat(4);function vr(Q){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=_.maxRows,L=w===void 0?15:w,J=_.maxColumns,It=J===void 0?10:J,Nt=_.maxNumSize,K=Nt===void 0?8:Nt;return"".concat(Q.constructor.name,` {
`).concat(on,`[
`).concat($n).concat(ar(Q,L,It,K),`
`).concat(on,`]
`).concat(on,"rows: ").concat(Q.rows,`
`).concat(on,"columns: ").concat(Q.columns,`
}`)}function ar(Q,_,w,L){for(var J=Q.rows,It=Q.columns,Nt=Math.min(J,_),K=Math.min(It,w),Pt=[],Qt=0;Qt<Nt;Qt++){for(var qt=[],xe=0;xe<K;xe++)qt.push(rr(Q.get(Qt,xe),L));Pt.push("".concat(qt.join(" ")))}return K!==It&&(Pt[Pt.length-1]+=" ... ".concat(It-w," more columns")),Nt!==J&&Pt.push("... ".concat(J-_," more rows")),Pt.join(`
`.concat($n))}function rr(Q,_){var w=String(Q);if(w.length<=_)return w.padEnd(_," ");var L=Q.toPrecision(_-2);if(L.length<=_)return L;var J=Q.toExponential(_-2),It=J.indexOf("e"),Nt=J.slice(It);return J.slice(0,_-Nt.length)+Nt}function Fr(Q){return(Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function Ar(Q,_,w){var L=w?Q.rows:Q.rows-1;if(_<0||_>L)throw new RangeError("Row index out of range")}function wr(Q,_,w){var L=w?Q.columns:Q.columns-1;if(_<0||_>L)throw new RangeError("Column index out of range")}function xr(Q,_){if(_.to1DArray&&(_=_.to1DArray()),_.length!==Q.columns)throw new RangeError("vector size must be the same as the number of columns");return _}function Er(Q,_){if(_.to1DArray&&(_=_.to1DArray()),_.length!==Q.rows)throw new RangeError("vector size must be the same as the number of rows");return _}function Ir(Q,_){if(Fr(_)!=="object")throw new TypeError("unexpected type for row indices");if(_.some(function(w){return w<0||w>=Q.rows}))throw new RangeError("row indices are out of range");return Array.isArray(_)||(_=Array.from(_)),_}function Lr(Q,_){if(Fr(_)!=="object")throw new TypeError("unexpected type for column indices");if(_.some(function(w){return w<0||w>=Q.columns}))throw new RangeError("column indices are out of range");return Array.isArray(_)||(_=Array.from(_)),_}function Pr(Q,_,w,L,J){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ri("startRow",_),ri("endRow",w),ri("startColumn",L),ri("endColumn",J),_>w||L>J||_<0||_>=Q.rows||w<0||w>=Q.rows||L<0||L>=Q.columns||J<0||J>=Q.columns)throw new RangeError("Submatrix indices are out of range")}function Dr(Q){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=[],L=0;L<Q;L++)w.push(_);return w}function ri(Q,_){if(typeof _!="number")throw new TypeError("".concat(Q," must be a number"))}function vi(Q){if(Q.isEmpty())throw new Error("Empty matrix has no elements to index")}function ii(Q,_,w){for(var L=Q.rows,J=Q.columns,It=[],Nt=0;Nt<L;Nt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<J;qt++)K+=Qt=Q.get(Nt,qt)-w[Nt],Pt+=Qt*Qt;_?It.push((Pt-K*K/J)/(J-1)):It.push((Pt-K*K/J)/J)}return It}function Si(Q,_,w){for(var L=Q.rows,J=Q.columns,It=[],Nt=0;Nt<J;Nt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<L;qt++)K+=Qt=Q.get(qt,Nt)-w[Nt],Pt+=Qt*Qt;_?It.push((Pt-K*K/L)/(L-1)):It.push((Pt-K*K/L)/L)}return It}function Ui(Q,_,w){for(var L=Q.rows,J=Q.columns,It=L*J,Nt=0,K=0,Pt=0,Qt=0;Qt<L;Qt++)for(var qt=0;qt<J;qt++)Nt+=Pt=Q.get(Qt,qt)-w,K+=Pt*Pt;return _?(K-Nt*Nt/It)/(It-1):(K-Nt*Nt/It)/It}function Yi(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-_[w])}function Bi(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-_[L])}function Di(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-_)}function ve(Q){for(var _=[],w=0;w<Q.rows;w++){for(var L=0,J=0;J<Q.columns;J++)L+=Math.pow(Q.get(w,J),2)/(Q.columns-1);_.push(Math.sqrt(L))}return _}function F(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/_[w])}function B(Q){for(var _=[],w=0;w<Q.columns;w++){for(var L=0,J=0;J<Q.rows;J++)L+=Math.pow(Q.get(J,w),2)/(Q.rows-1);_.push(Math.sqrt(L))}return _}function Z(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/_[L])}function ut(Q){for(var _=Q.size-1,w=0,L=0;L<Q.columns;L++)for(var J=0;J<Q.rows;J++)w+=Math.pow(Q.get(J,L),2)/_;return Math.sqrt(w)}function Bt(Q,_){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/_)}function Jt(Q,_){return(Jt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function ie(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Te(Q);if(_){var J=Te(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return se(this,w)}}function se(Q,_){return!_||Ee(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function Te(Q){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}function Ee(Q){return(Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function un(Q,_){if(!(Q instanceof _))throw new TypeError("Cannot call a class as a function")}function xn(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function zt(Q,_,w){return _&&xn(Q.prototype,_),w&&xn(Q,w),Q}var Yt=function(){function Q(){un(this,Q)}return zt(Q,[{key:"apply",value:function(w){if(typeof w!="function")throw new TypeError("callback must be a function");for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.call(this,L,J);return this}},{key:"to1DArray",value:function(){for(var w=[],L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.push(this.get(L,J));return w}},{key:"to2DArray",value:function(){for(var w=[],L=0;L<this.rows;L++){w.push([]);for(var J=0;J<this.columns;J++)w[L].push(this.get(L,J))}return w}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var w=0;w<this.rows;w++)for(var L=0;L<=w;L++)if(this.get(w,L)!==this.get(L,w))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var w=0,L=0,J=-1,It=!0,Nt=!1;w<this.rows&&It;){for(L=0,Nt=!1;L<this.columns&&Nt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Nt=!0,J=L):(It=!1,Nt=!0);w++}return It}},{key:"isReducedEchelonForm",value:function(){for(var w=0,L=0,J=-1,It=!0,Nt=!1;w<this.rows&&It;){for(L=0,Nt=!1;L<this.columns&&Nt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Nt=!0,J=L):(It=!1,Nt=!0);for(var K=L+1;K<this.rows;K++)this.get(w,K)!==0&&(It=!1);w++}return It}},{key:"echelonForm",value:function(){for(var w=this.clone(),L=0,J=0;L<w.rows&&J<w.columns;){for(var It=L,Nt=L;Nt<w.rows;Nt++)w.get(Nt,J)>w.get(It,J)&&(It=Nt);if(w.get(It,J)===0)J++;else{w.swapRows(L,It);for(var K=w.get(L,J),Pt=J;Pt<w.columns;Pt++)w.set(L,Pt,w.get(L,Pt)/K);for(var Qt=L+1;Qt<w.rows;Qt++){var qt=w.get(Qt,J)/w.get(L,J);w.set(Qt,J,0);for(var xe=J+1;xe<w.columns;xe++)w.set(Qt,xe,w.get(Qt,xe)-w.get(L,xe)*qt)}L++,J++}}return w}},{key:"reducedEchelonForm",value:function(){for(var w=this.echelonForm(),L=w.columns,J=w.rows,It=J-1;It>=0;)if(w.maxRow(It)===0)It--;else{for(var Nt=0,K=!1;Nt<J&&K===!1;)w.get(It,Nt)===1?K=!0:Nt++;for(var Pt=0;Pt<It;Pt++)for(var Qt=w.get(Pt,Nt),qt=Nt;qt<L;qt++){var xe=w.get(Pt,qt)-Qt*w.get(It,qt);w.set(Pt,qt,xe)}It--}return w}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.rows,J=L===void 0?1:L,It=w.columns,Nt=It===void 0?1:It;if(!Number.isInteger(J)||J<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Nt)||Nt<=0)throw new TypeError("columns must be a positive integer");for(var K=new vn(this.rows*J,this.columns*Nt),Pt=0;Pt<J;Pt++)for(var Qt=0;Qt<Nt;Qt++)K.setSubMatrix(this,this.rows*Pt,this.columns*Qt);return K}},{key:"fill",value:function(w){for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,w);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(w){Ar(this,w);for(var L=[],J=0;J<this.columns;J++)L.push(this.get(w,J));return L}},{key:"getRowVector",value:function(w){return vn.rowVector(this.getRow(w))}},{key:"setRow",value:function(w,L){Ar(this,w),L=xr(this,L);for(var J=0;J<this.columns;J++)this.set(w,J,L[J]);return this}},{key:"swapRows",value:function(w,L){Ar(this,w),Ar(this,L);for(var J=0;J<this.columns;J++){var It=this.get(w,J);this.set(w,J,this.get(L,J)),this.set(L,J,It)}return this}},{key:"getColumn",value:function(w){wr(this,w);for(var L=[],J=0;J<this.rows;J++)L.push(this.get(J,w));return L}},{key:"getColumnVector",value:function(w){return vn.columnVector(this.getColumn(w))}},{key:"setColumn",value:function(w,L){wr(this,w),L=Er(this,L);for(var J=0;J<this.rows;J++)this.set(J,w,L[J]);return this}},{key:"swapColumns",value:function(w,L){wr(this,w),wr(this,L);for(var J=0;J<this.rows;J++){var It=this.get(J,w);this.set(J,w,this.get(J,L)),this.set(J,L,It)}return this}},{key:"addRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[J]);return this}},{key:"subRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[J]);return this}},{key:"mulRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[J]);return this}},{key:"divRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[J]);return this}},{key:"addColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[L]);return this}},{key:"subColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[L]);return this}},{key:"mulColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[L]);return this}},{key:"divColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[L]);return this}},{key:"mulRow",value:function(w,L){Ar(this,w);for(var J=0;J<this.columns;J++)this.set(w,J,this.get(w,J)*L);return this}},{key:"mulColumn",value:function(w,L){wr(this,w);for(var J=0;J<this.rows;J++)this.set(J,w,this.get(J,w)*L);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)>w&&(w=this.get(L,J));return w}},{key:"maxIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)this.get(J,It)>w&&(w=this.get(J,It),L[0]=J,L[1]=It);return L}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)<w&&(w=this.get(L,J));return w}},{key:"minIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)this.get(J,It)<w&&(w=this.get(J,It),L[0]=J,L[1]=It);return L}},{key:"maxRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)>L&&(L=this.get(w,J));return L}},{key:"maxRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],It=1;It<this.columns;It++)this.get(w,It)>L&&(L=this.get(w,It),J[1]=It);return J}},{key:"minRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)<L&&(L=this.get(w,J));return L}},{key:"minRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],It=1;It<this.columns;It++)this.get(w,It)<L&&(L=this.get(w,It),J[1]=It);return J}},{key:"maxColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)>L&&(L=this.get(J,w));return L}},{key:"maxColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],It=1;It<this.rows;It++)this.get(It,w)>L&&(L=this.get(It,w),J[0]=It);return J}},{key:"minColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)<L&&(L=this.get(J,w));return L}},{key:"minColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],It=1;It<this.rows;It++)this.get(It,w)<L&&(L=this.get(It,w),J[0]=It);return J}},{key:"diag",value:function(){for(var w=Math.min(this.rows,this.columns),L=[],J=0;J<w;J++)L.push(this.get(J,J));return L}},{key:"norm",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",L=0;if(w==="max")return this.max();if(w==="frobenius"){for(var J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)L+=this.get(J,It)*this.get(J,It);return Math.sqrt(L)}throw new RangeError("unknown norm type: ".concat(w))}},{key:"cumulativeSum",value:function(){for(var w=0,L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w+=this.get(L,J),this.set(L,J,w);return this}},{key:"dot",value:function(w){Q.isMatrix(w)&&(w=w.to1DArray());var L=this.to1DArray();if(L.length!==w.length)throw new RangeError("vectors do not have the same size");for(var J=0,It=0;It<L.length;It++)J+=L[It]*w[It];return J}},{key:"mmul",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,It=w.columns,Nt=new vn(L,It),K=new Float64Array(J),Pt=0;Pt<It;Pt++){for(var Qt=0;Qt<J;Qt++)K[Qt]=w.get(Qt,Pt);for(var qt=0;qt<L;qt++){for(var xe=0,Ie=0;Ie<J;Ie++)xe+=this.get(qt,Ie)*K[Ie];Nt.set(qt,Pt,xe)}}return Nt}},{key:"strassen2x2",value:function(w){w=vn.checkMatrix(w);var L=new vn(2,2),J=this.get(0,0),It=w.get(0,0),Nt=this.get(0,1),K=w.get(0,1),Pt=this.get(1,0),Qt=w.get(1,0),qt=this.get(1,1),xe=w.get(1,1),Ie=(J+qt)*(It+xe),Ye=(Pt+qt)*It,Re=J*(K-xe),Xe=qt*(Qt-It),Je=(J+Nt)*xe,Ge=Ie+Xe-Je+(Nt-qt)*(Qt+xe),qe=Re+Je,yn=Ye+Xe,Pn=Ie-Ye+Re+(Pt-J)*(It+K);return L.set(0,0,Ge),L.set(0,1,qe),L.set(1,0,yn),L.set(1,1,Pn),L}},{key:"strassen3x3",value:function(w){w=vn.checkMatrix(w);var L=new vn(3,3),J=this.get(0,0),It=this.get(0,1),Nt=this.get(0,2),K=this.get(1,0),Pt=this.get(1,1),Qt=this.get(1,2),qt=this.get(2,0),xe=this.get(2,1),Ie=this.get(2,2),Ye=w.get(0,0),Re=w.get(0,1),Xe=w.get(0,2),Je=w.get(1,0),Ge=w.get(1,1),qe=w.get(1,2),yn=w.get(2,0),Pn=w.get(2,1),En=w.get(2,2),Ln=(J-K)*(-Re+Ge),Zn=(-J+K+Pt)*(Ye-Re+Ge),Qn=(K+Pt)*(-Ye+Re),qn=J*Ye,fr=(-J+qt+xe)*(Ye-Xe+qe),br=(-J+qt)*(Xe-qe),gr=(qt+xe)*(-Ye+Xe),hr=(-Nt+xe+Ie)*(Ge+yn-Pn),Tr=(Nt-Ie)*(Ge-Pn),dr=Nt*yn,Jr=(xe+Ie)*(-yn+Pn),qr=(-Nt+Pt+Qt)*(qe+yn-En),wi=(Nt-Qt)*(qe-En),Cr=(Pt+Qt)*(-yn+En),pi=qn+dr+It*Je,Ei=(J+It+Nt-K-Pt-xe-Ie)*Ge+Zn+Qn+qn+hr+dr+Jr,ji=qn+fr+gr+(J+It+Nt-Pt-Qt-qt-xe)*qe+dr+qr+Cr,Ao=Ln+Pt*(-Ye+Re+Je-Ge-qe-yn+En)+Zn+qn+dr+qr+wi,go=Ln+Zn+Qn+qn+Qt*Pn,Ii=dr+qr+wi+Cr+K*Xe,Gi=qn+fr+br+xe*(-Ye+Xe+Je-Ge-qe-yn+Pn)+hr+Tr+dr,Po=hr+Tr+dr+Jr+qt*Re,Fo=qn+fr+br+gr+Ie*En;return L.set(0,0,pi),L.set(0,1,Ei),L.set(0,2,ji),L.set(1,0,Ao),L.set(1,1,go),L.set(1,2,Ii),L.set(2,0,Gi),L.set(2,1,Po),L.set(2,2,Fo),L}},{key:"mmulStrassen",value:function(w){w=vn.checkMatrix(w);var L=this.clone(),J=L.rows,It=L.columns,Nt=w.rows,K=w.columns;function Pt(xe,Ie,Ye){var Re=xe.rows,Xe=xe.columns;if(Re===Ie&&Xe===Ye)return xe;var Je=Q.zeros(Ie,Ye);return Je=Je.setSubMatrix(xe,0,0)}It!==Nt&&console.warn("Multiplying ".concat(J," x ").concat(It," and ").concat(Nt," x ").concat(K," matrix: dimensions do not match."));var Qt=Math.max(J,Nt),qt=Math.max(It,K);return function xe(Ie,Ye,Re,Xe){if(Re<=512||Xe<=512)return Ie.mmul(Ye);Re%2==1&&Xe%2==1?(Ie=Pt(Ie,Re+1,Xe+1),Ye=Pt(Ye,Re+1,Xe+1)):Re%2==1?(Ie=Pt(Ie,Re+1,Xe),Ye=Pt(Ye,Re+1,Xe)):Xe%2==1&&(Ie=Pt(Ie,Re,Xe+1),Ye=Pt(Ye,Re,Xe+1));var Je=parseInt(Ie.rows/2,10),Ge=parseInt(Ie.columns/2,10),qe=Ie.subMatrix(0,Je-1,0,Ge-1),yn=Ye.subMatrix(0,Je-1,0,Ge-1),Pn=Ie.subMatrix(0,Je-1,Ge,Ie.columns-1),En=Ye.subMatrix(0,Je-1,Ge,Ye.columns-1),Ln=Ie.subMatrix(Je,Ie.rows-1,0,Ge-1),Zn=Ye.subMatrix(Je,Ye.rows-1,0,Ge-1),Qn=Ie.subMatrix(Je,Ie.rows-1,Ge,Ie.columns-1),qn=Ye.subMatrix(Je,Ye.rows-1,Ge,Ye.columns-1),fr=xe(Q.add(qe,Qn),Q.add(yn,qn),Je,Ge),br=xe(Q.add(Ln,Qn),yn,Je,Ge),gr=xe(qe,Q.sub(En,qn),Je,Ge),hr=xe(Qn,Q.sub(Zn,yn),Je,Ge),Tr=xe(Q.add(qe,Pn),qn,Je,Ge),dr=xe(Q.sub(Ln,qe),Q.add(yn,En),Je,Ge),Jr=xe(Q.sub(Pn,Qn),Q.add(Zn,qn),Je,Ge),qr=Q.add(fr,hr);qr.sub(Tr),qr.add(Jr);var wi=Q.add(gr,Tr),Cr=Q.add(br,hr),pi=Q.sub(fr,br);pi.add(gr),pi.add(dr);var Ei=Q.zeros(2*qr.rows,2*qr.columns);return(Ei=(Ei=(Ei=(Ei=Ei.setSubMatrix(qr,0,0)).setSubMatrix(wi,qr.rows,0)).setSubMatrix(Cr,0,qr.columns)).setSubMatrix(pi,qr.rows,qr.columns)).subMatrix(0,Re-1,0,Xe-1)}(L=Pt(L,Qt,qt),w=Pt(w,Qt,qt),Qt,qt)}},{key:"scaleRows",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,It=w.max,Nt=It===void 0?1:It;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(J>=Nt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.rows;Pt++){var Qt=this.getRow(Pt);Qt.length>0&&rn(Qt,{min:J,max:Nt,output:Qt}),K.setRow(Pt,Qt)}return K}},{key:"scaleColumns",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,It=w.max,Nt=It===void 0?1:It;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(J>=Nt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.columns;Pt++){var Qt=this.getColumn(Pt);Qt.length&&rn(Qt,{min:J,max:Nt,output:Qt}),K.setColumn(Pt,Qt)}return K}},{key:"flipRows",value:function(){for(var w=Math.ceil(this.columns/2),L=0;L<this.rows;L++)for(var J=0;J<w;J++){var It=this.get(L,J),Nt=this.get(L,this.columns-1-J);this.set(L,J,Nt),this.set(L,this.columns-1-J,It)}return this}},{key:"flipColumns",value:function(){for(var w=Math.ceil(this.rows/2),L=0;L<this.columns;L++)for(var J=0;J<w;J++){var It=this.get(J,L),Nt=this.get(this.rows-1-J,L);this.set(J,L,Nt),this.set(this.rows-1-J,L,It)}return this}},{key:"kroneckerProduct",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,It=w.rows,Nt=w.columns,K=new vn(L*It,J*Nt),Pt=0;Pt<L;Pt++)for(var Qt=0;Qt<J;Qt++)for(var qt=0;qt<It;qt++)for(var xe=0;xe<Nt;xe++)K.set(It*Pt+qt,Nt*Qt+xe,this.get(Pt,Qt)*w.get(qt,xe));return K}},{key:"transpose",value:function(){for(var w=new vn(this.columns,this.rows),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(J,L,this.get(L,J));return w}},{key:"sortRows",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.rows;L++)this.setRow(L,this.getRow(L).sort(w));return this}},{key:"sortColumns",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.columns;L++)this.setColumn(L,this.getColumn(L).sort(w));return this}},{key:"subMatrix",value:function(w,L,J,It){Pr(this,w,L,J,It);for(var Nt=new vn(L-w+1,It-J+1),K=w;K<=L;K++)for(var Pt=J;Pt<=It;Pt++)Nt.set(K-w,Pt-J,this.get(K,Pt));return Nt}},{key:"subMatrixRow",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.columns-1),L>J||L<0||L>=this.columns||J<0||J>=this.columns)throw new RangeError("Argument out of range");for(var It=new vn(w.length,J-L+1),Nt=0;Nt<w.length;Nt++)for(var K=L;K<=J;K++){if(w[Nt]<0||w[Nt]>=this.rows)throw new RangeError("Row index out of range: ".concat(w[Nt]));It.set(Nt,K-L,this.get(w[Nt],K))}return It}},{key:"subMatrixColumn",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.rows-1),L>J||L<0||L>=this.rows||J<0||J>=this.rows)throw new RangeError("Argument out of range");for(var It=new vn(J-L+1,w.length),Nt=0;Nt<w.length;Nt++)for(var K=L;K<=J;K++){if(w[Nt]<0||w[Nt]>=this.columns)throw new RangeError("Column index out of range: ".concat(w[Nt]));It.set(K-L,Nt,this.get(K,w[Nt]))}return It}},{key:"setSubMatrix",value:function(w,L,J){if((w=vn.checkMatrix(w)).isEmpty())return this;Pr(this,L,L+w.rows-1,J,J+w.columns-1);for(var It=0;It<w.rows;It++)for(var Nt=0;Nt<w.columns;Nt++)this.set(L+It,J+Nt,w.get(It,Nt));return this}},{key:"selection",value:function(w,L){for(var J=function(qt,xe,Ie){return{row:Ir(qt,xe),column:Lr(qt,Ie)}}(this,w,L),It=new vn(w.length,L.length),Nt=0;Nt<J.row.length;Nt++)for(var K=J.row[Nt],Pt=0;Pt<J.column.length;Pt++){var Qt=J.column[Pt];It.set(Nt,Pt,this.get(K,Qt))}return It}},{key:"trace",value:function(){for(var w=Math.min(this.rows,this.columns),L=0,J=0;J<w;J++)L+=this.get(J,J);return L}},{key:"clone",value:function(){for(var w=new vn(this.rows,this.columns),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(L,J,this.get(L,J));return w}},{key:"sum",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[It]+=L.get(It,Nt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[Nt]+=L.get(It,Nt);return J}(this);case void 0:return function(L){for(var J=0,It=0;It<L.rows;It++)for(var Nt=0;Nt<L.columns;Nt++)J+=L.get(It,Nt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"product",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows,1),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[It]*=L.get(It,Nt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns,1),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[Nt]*=L.get(It,Nt);return J}(this);case void 0:return function(L){for(var J=1,It=0;It<L.rows;It++)for(var Nt=0;Nt<L.columns;Nt++)J*=L.get(It,Nt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"mean",value:function(w){var L=this.sum(w);switch(w){case"row":for(var J=0;J<this.rows;J++)L[J]/=this.columns;return L;case"column":for(var It=0;It<this.columns;It++)L[It]/=this.rows;return L;case void 0:return L/this.size;default:throw new Error("invalid option: ".concat(w))}}},{key:"variance",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,It=J.unbiased,Nt=It===void 0||It,K=J.mean,Pt=K===void 0?this.mean(w):K;if(typeof Nt!="boolean")throw new TypeError("unbiased must be a boolean");switch(w){case"row":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return ii(this,Nt,Pt);case"column":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return Si(this,Nt,Pt);case void 0:if(typeof Pt!="number")throw new TypeError("mean must be a number");return Ui(this,Nt,Pt);default:throw new Error("invalid option: ".concat(w))}}},{key:"standardDeviation",value:function(w,L){Ee(w)==="object"&&(L=w,w=void 0);var J=this.variance(w,L);if(w===void 0)return Math.sqrt(J);for(var It=0;It<J.length;It++)J[It]=Math.sqrt(J[It]);return J}},{key:"center",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,It=J.center,Nt=It===void 0?this.mean(w):It;switch(w){case"row":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return Yi(this,Nt),this;case"column":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return Bi(this,Nt),this;case void 0:if(typeof Nt!="number")throw new TypeError("center must be a number");return Di(this,Nt),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"scale",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L.scale;switch(w){case"row":if(J===void 0)J=ve(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return F(this,J),this;case"column":if(J===void 0)J=B(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return Z(this,J),this;case void 0:if(J===void 0)J=ut(this);else if(typeof J!="number")throw new TypeError("scale must be a number");return Bt(this,J),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"toString",value:function(w){return vr(this,w)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(w,L,J){if(w*L!==J.length)throw new RangeError("data length does not match given dimensions");for(var It=new vn(w,L),Nt=0;Nt<w;Nt++)for(var K=0;K<L;K++)It.set(Nt,K,J[Nt*L+K]);return It}},{key:"rowVector",value:function(w){for(var L=new vn(1,w.length),J=0;J<w.length;J++)L.set(0,J,w[J]);return L}},{key:"columnVector",value:function(w){for(var L=new vn(w.length,1),J=0;J<w.length;J++)L.set(J,0,w[J]);return L}},{key:"zeros",value:function(w,L){return new vn(w,L)}},{key:"ones",value:function(w,L){return new vn(w,L).fill(1)}},{key:"rand",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");for(var It=J.random,Nt=It===void 0?Math.random:It,K=new vn(w,L),Pt=0;Pt<w;Pt++)for(var Qt=0;Qt<L;Qt++)K.set(Pt,Qt,Nt());return K}},{key:"randInt",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");var It=J.min,Nt=It===void 0?0:It,K=J.max,Pt=K===void 0?1e3:K,Qt=J.random,qt=Qt===void 0?Math.random:Qt;if(!Number.isInteger(Nt))throw new TypeError("min must be an integer");if(!Number.isInteger(Pt))throw new TypeError("max must be an integer");if(Nt>=Pt)throw new RangeError("min must be smaller than max");for(var xe=Pt-Nt,Ie=new vn(w,L),Ye=0;Ye<w;Ye++)for(var Re=0;Re<L;Re++){var Xe=Nt+Math.round(qt()*xe);Ie.set(Ye,Re,Xe)}return Ie}},{key:"eye",value:function(w,L,J){L===void 0&&(L=w),J===void 0&&(J=1);for(var It=Math.min(w,L),Nt=this.zeros(w,L),K=0;K<It;K++)Nt.set(K,K,J);return Nt}},{key:"diag",value:function(w,L,J){var It=w.length;L===void 0&&(L=It),J===void 0&&(J=L);for(var Nt=Math.min(It,L,J),K=this.zeros(L,J),Pt=0;Pt<Nt;Pt++)K.set(Pt,Pt,w[Pt]);return K}},{key:"min",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,It=w.columns,Nt=new vn(J,It),K=0;K<J;K++)for(var Pt=0;Pt<It;Pt++)Nt.set(K,Pt,Math.min(w.get(K,Pt),L.get(K,Pt)));return Nt}},{key:"max",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,It=w.columns,Nt=new this(J,It),K=0;K<J;K++)for(var Pt=0;Pt<It;Pt++)Nt.set(K,Pt,Math.max(w.get(K,Pt),L.get(K,Pt)));return Nt}},{key:"checkMatrix",value:function(w){return Q.isMatrix(w)?w:new vn(w)}},{key:"isMatrix",value:function(w){return w!=null&&w.klass==="Matrix"}}]),Q}();function Se(Q,_){return Q-_}Yt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Yt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return vr(this)}),Yt.random=Yt.rand,Yt.randomInt=Yt.randInt,Yt.diagonal=Yt.diag,Yt.prototype.diagonal=Yt.prototype.diag,Yt.identity=Yt.eye,Yt.prototype.negate=Yt.prototype.neg,Yt.prototype.tensorProduct=Yt.prototype.kroneckerProduct;var Wt,ue,vn=function(Q){(function(L,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(J&&J.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),J&&Jt(L,J)})(w,Q);var _=ie(w);function w(L,J){var It;if(un(this,w),It=_.call(this),w.isMatrix(L))return se(It,L.clone());if(Number.isInteger(L)&&L>=0){if(It.data=[],!(Number.isInteger(J)&&J>=0))throw new TypeError("nColumns must be a positive integer");for(var Nt=0;Nt<L;Nt++)It.data.push(new Float64Array(J))}else{if(!Array.isArray(L))throw new TypeError("First argument must be a positive number or an array");var K=L;if(typeof(J=(L=K.length)?K[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");It.data=[];for(var Pt=0;Pt<L;Pt++){if(K[Pt].length!==J)throw new RangeError("Inconsistent array dimensions");It.data.push(Float64Array.from(K[Pt]))}}return It.rows=L,It.columns=J,It}return zt(w,[{key:"set",value:function(J,It,Nt){return this.data[J][It]=Nt,this}},{key:"get",value:function(J,It){return this.data[J][It]}},{key:"removeRow",value:function(J){return Ar(this,J),this.data.splice(J,1),this.rows-=1,this}},{key:"addRow",value:function(J,It){return It===void 0&&(It=J,J=this.rows),Ar(this,J,!0),It=Float64Array.from(xr(this,It)),this.data.splice(J,0,It),this.rows+=1,this}},{key:"removeColumn",value:function(J){wr(this,J);for(var It=0;It<this.rows;It++){for(var Nt=new Float64Array(this.columns-1),K=0;K<J;K++)Nt[K]=this.data[It][K];for(var Pt=J+1;Pt<this.columns;Pt++)Nt[Pt-1]=this.data[It][Pt];this.data[It]=Nt}return this.columns-=1,this}},{key:"addColumn",value:function(J,It){It===void 0&&(It=J,J=this.columns),wr(this,J,!0),It=Er(this,It);for(var Nt=0;Nt<this.rows;Nt++){for(var K=new Float64Array(this.columns+1),Pt=0;Pt<J;Pt++)K[Pt]=this.data[Nt][Pt];for(K[Pt++]=It[Nt];Pt<this.columns+1;Pt++)K[Pt]=this.data[Nt][Pt-1];this.data[Nt]=K}return this.columns+=1,this}}]),w}(Yt);function Dn(Q){return(Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function zn(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Gn(Q,_){return(Gn=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function Ze(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=R(Q);if(_){var J=R(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ce(this,w)}}function Ce(Q,_){return!_||Dn(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function R(Q){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}ue=vn,(Wt=Yt).prototype.add=function(Q){return typeof Q=="number"?this.addS(Q):this.addM(Q)},Wt.prototype.addS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)+Q);return this},Wt.prototype.addM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)+Q.get(_,w));return this},Wt.add=function(Q,_){return new ue(Q).add(_)},Wt.prototype.sub=function(Q){return typeof Q=="number"?this.subS(Q):this.subM(Q)},Wt.prototype.subS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)-Q);return this},Wt.prototype.subM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)-Q.get(_,w));return this},Wt.sub=function(Q,_){return new ue(Q).sub(_)},Wt.prototype.subtract=Wt.prototype.sub,Wt.prototype.subtractS=Wt.prototype.subS,Wt.prototype.subtractM=Wt.prototype.subM,Wt.subtract=Wt.sub,Wt.prototype.mul=function(Q){return typeof Q=="number"?this.mulS(Q):this.mulM(Q)},Wt.prototype.mulS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)*Q);return this},Wt.prototype.mulM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)*Q.get(_,w));return this},Wt.mul=function(Q,_){return new ue(Q).mul(_)},Wt.prototype.multiply=Wt.prototype.mul,Wt.prototype.multiplyS=Wt.prototype.mulS,Wt.prototype.multiplyM=Wt.prototype.mulM,Wt.multiply=Wt.mul,Wt.prototype.div=function(Q){return typeof Q=="number"?this.divS(Q):this.divM(Q)},Wt.prototype.divS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)/Q);return this},Wt.prototype.divM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)/Q.get(_,w));return this},Wt.div=function(Q,_){return new ue(Q).div(_)},Wt.prototype.divide=Wt.prototype.div,Wt.prototype.divideS=Wt.prototype.divS,Wt.prototype.divideM=Wt.prototype.divM,Wt.divide=Wt.div,Wt.prototype.mod=function(Q){return typeof Q=="number"?this.modS(Q):this.modM(Q)},Wt.prototype.modS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)%Q);return this},Wt.prototype.modM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)%Q.get(_,w));return this},Wt.mod=function(Q,_){return new ue(Q).mod(_)},Wt.prototype.modulus=Wt.prototype.mod,Wt.prototype.modulusS=Wt.prototype.modS,Wt.prototype.modulusM=Wt.prototype.modM,Wt.modulus=Wt.mod,Wt.prototype.and=function(Q){return typeof Q=="number"?this.andS(Q):this.andM(Q)},Wt.prototype.andS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)&Q);return this},Wt.prototype.andM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)&Q.get(_,w));return this},Wt.and=function(Q,_){return new ue(Q).and(_)},Wt.prototype.or=function(Q){return typeof Q=="number"?this.orS(Q):this.orM(Q)},Wt.prototype.orS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)|Q);return this},Wt.prototype.orM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)|Q.get(_,w));return this},Wt.or=function(Q,_){return new ue(Q).or(_)},Wt.prototype.xor=function(Q){return typeof Q=="number"?this.xorS(Q):this.xorM(Q)},Wt.prototype.xorS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)^Q);return this},Wt.prototype.xorM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)^Q.get(_,w));return this},Wt.xor=function(Q,_){return new ue(Q).xor(_)},Wt.prototype.leftShift=function(Q){return typeof Q=="number"?this.leftShiftS(Q):this.leftShiftM(Q)},Wt.prototype.leftShiftS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)<<Q);return this},Wt.prototype.leftShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)<<Q.get(_,w));return this},Wt.leftShift=function(Q,_){return new ue(Q).leftShift(_)},Wt.prototype.signPropagatingRightShift=function(Q){return typeof Q=="number"?this.signPropagatingRightShiftS(Q):this.signPropagatingRightShiftM(Q)},Wt.prototype.signPropagatingRightShiftS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)>>Q);return this},Wt.prototype.signPropagatingRightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)>>Q.get(_,w));return this},Wt.signPropagatingRightShift=function(Q,_){return new ue(Q).signPropagatingRightShift(_)},Wt.prototype.rightShift=function(Q){return typeof Q=="number"?this.rightShiftS(Q):this.rightShiftM(Q)},Wt.prototype.rightShiftS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)>>>Q);return this},Wt.prototype.rightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,this.get(_,w)>>>Q.get(_,w));return this},Wt.rightShift=function(Q,_){return new ue(Q).rightShift(_)},Wt.prototype.zeroFillRightShift=Wt.prototype.rightShift,Wt.prototype.zeroFillRightShiftS=Wt.prototype.rightShiftS,Wt.prototype.zeroFillRightShiftM=Wt.prototype.rightShiftM,Wt.zeroFillRightShift=Wt.rightShift,Wt.prototype.not=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,~this.get(Q,_));return this},Wt.not=function(Q){return new ue(Q).not()},Wt.prototype.abs=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.abs(this.get(Q,_)));return this},Wt.abs=function(Q){return new ue(Q).abs()},Wt.prototype.acos=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.acos(this.get(Q,_)));return this},Wt.acos=function(Q){return new ue(Q).acos()},Wt.prototype.acosh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.acosh(this.get(Q,_)));return this},Wt.acosh=function(Q){return new ue(Q).acosh()},Wt.prototype.asin=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.asin(this.get(Q,_)));return this},Wt.asin=function(Q){return new ue(Q).asin()},Wt.prototype.asinh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.asinh(this.get(Q,_)));return this},Wt.asinh=function(Q){return new ue(Q).asinh()},Wt.prototype.atan=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.atan(this.get(Q,_)));return this},Wt.atan=function(Q){return new ue(Q).atan()},Wt.prototype.atanh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.atanh(this.get(Q,_)));return this},Wt.atanh=function(Q){return new ue(Q).atanh()},Wt.prototype.cbrt=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.cbrt(this.get(Q,_)));return this},Wt.cbrt=function(Q){return new ue(Q).cbrt()},Wt.prototype.ceil=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.ceil(this.get(Q,_)));return this},Wt.ceil=function(Q){return new ue(Q).ceil()},Wt.prototype.clz32=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.clz32(this.get(Q,_)));return this},Wt.clz32=function(Q){return new ue(Q).clz32()},Wt.prototype.cos=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.cos(this.get(Q,_)));return this},Wt.cos=function(Q){return new ue(Q).cos()},Wt.prototype.cosh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.cosh(this.get(Q,_)));return this},Wt.cosh=function(Q){return new ue(Q).cosh()},Wt.prototype.exp=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.exp(this.get(Q,_)));return this},Wt.exp=function(Q){return new ue(Q).exp()},Wt.prototype.expm1=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.expm1(this.get(Q,_)));return this},Wt.expm1=function(Q){return new ue(Q).expm1()},Wt.prototype.floor=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.floor(this.get(Q,_)));return this},Wt.floor=function(Q){return new ue(Q).floor()},Wt.prototype.fround=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.fround(this.get(Q,_)));return this},Wt.fround=function(Q){return new ue(Q).fround()},Wt.prototype.log=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.log(this.get(Q,_)));return this},Wt.log=function(Q){return new ue(Q).log()},Wt.prototype.log1p=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.log1p(this.get(Q,_)));return this},Wt.log1p=function(Q){return new ue(Q).log1p()},Wt.prototype.log10=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.log10(this.get(Q,_)));return this},Wt.log10=function(Q){return new ue(Q).log10()},Wt.prototype.log2=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.log2(this.get(Q,_)));return this},Wt.log2=function(Q){return new ue(Q).log2()},Wt.prototype.round=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.round(this.get(Q,_)));return this},Wt.round=function(Q){return new ue(Q).round()},Wt.prototype.sign=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.sign(this.get(Q,_)));return this},Wt.sign=function(Q){return new ue(Q).sign()},Wt.prototype.sin=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.sin(this.get(Q,_)));return this},Wt.sin=function(Q){return new ue(Q).sin()},Wt.prototype.sinh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.sinh(this.get(Q,_)));return this},Wt.sinh=function(Q){return new ue(Q).sinh()},Wt.prototype.sqrt=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.sqrt(this.get(Q,_)));return this},Wt.sqrt=function(Q){return new ue(Q).sqrt()},Wt.prototype.tan=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.tan(this.get(Q,_)));return this},Wt.tan=function(Q){return new ue(Q).tan()},Wt.prototype.tanh=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.tanh(this.get(Q,_)));return this},Wt.tanh=function(Q){return new ue(Q).tanh()},Wt.prototype.trunc=function(){for(var Q=0;Q<this.rows;Q++)for(var _=0;_<this.columns;_++)this.set(Q,_,Math.trunc(this.get(Q,_)));return this},Wt.trunc=function(Q){return new ue(Q).trunc()},Wt.pow=function(Q,_){return new ue(Q).pow(_)},Wt.prototype.pow=function(Q){return typeof Q=="number"?this.powS(Q):this.powM(Q)},Wt.prototype.powS=function(Q){for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,Math.pow(this.get(_,w),Q));return this},Wt.prototype.powM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var _=0;_<this.rows;_++)for(var w=0;w<this.columns;w++)this.set(_,w,Math.pow(this.get(_,w),Q.get(_,w)));return this};var yt=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Gn(Nt,K)})(It,Q);var _,w,L,J=Ze(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).data=Nt,K.rows=Nt.length,K.columns=Nt[0].length,K}return _=It,(w=[{key:"set",value:function(K,Pt,Qt){return this.data[K][Pt]=Qt,this}},{key:"get",value:function(K,Pt){return this.data[K][Pt]}}])&&zn(_.prototype,w),L&&zn(_,L),It}(Yt);function $t(Q,_){var w=0;return Math.abs(Q)>Math.abs(_)?(w=_/Q,Math.abs(Q)*Math.sqrt(1+w*w)):_!==0?(w=Q/_,Math.abs(_)*Math.sqrt(1+w*w)):0}function me(Q,_){if(!(Q instanceof _))throw new TypeError("Cannot call a class as a function")}function Zt(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var de=function(){function Q(J){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me(this,Q),(J=yt.checkMatrix(J)).isEmpty())throw new Error("Matrix must be non-empty");var Nt,K=J.rows,Pt=J.columns,Qt=It.computeLeftSingularVectors,qt=Qt===void 0||Qt,xe=It.computeRightSingularVectors,Ie=xe===void 0||xe,Ye=It.autoTranspose,Re=Ye!==void 0&&Ye,Xe=Boolean(qt),Je=Boolean(Ie),Ge=!1;if(K<Pt)if(Re){K=(Nt=J.transpose()).rows,Pt=Nt.columns,Ge=!0;var qe=Xe;Xe=Je,Je=qe}else Nt=J.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Nt=J.clone();for(var yn=Math.min(K,Pt),Pn=Math.min(K+1,Pt),En=new Float64Array(Pn),Ln=new vn(K,yn),Zn=new vn(Pt,Pt),Qn=new Float64Array(Pt),qn=new Float64Array(K),fr=new Float64Array(Pn),br=0;br<Pn;br++)fr[br]=br;for(var gr=Math.min(K-1,Pt),hr=Math.max(0,Math.min(Pt-2,K)),Tr=Math.max(gr,hr),dr=0;dr<Tr;dr++){if(dr<gr){En[dr]=0;for(var Jr=dr;Jr<K;Jr++)En[dr]=$t(En[dr],Nt.get(Jr,dr));if(En[dr]!==0){Nt.get(dr,dr)<0&&(En[dr]=-En[dr]);for(var qr=dr;qr<K;qr++)Nt.set(qr,dr,Nt.get(qr,dr)/En[dr]);Nt.set(dr,dr,Nt.get(dr,dr)+1)}En[dr]=-En[dr]}for(var wi=dr+1;wi<Pt;wi++){if(dr<gr&&En[dr]!==0){for(var Cr=0,pi=dr;pi<K;pi++)Cr+=Nt.get(pi,dr)*Nt.get(pi,wi);Cr=-Cr/Nt.get(dr,dr);for(var Ei=dr;Ei<K;Ei++)Nt.set(Ei,wi,Nt.get(Ei,wi)+Cr*Nt.get(Ei,dr))}Qn[wi]=Nt.get(dr,wi)}if(Xe&&dr<gr)for(var ji=dr;ji<K;ji++)Ln.set(ji,dr,Nt.get(ji,dr));if(dr<hr){Qn[dr]=0;for(var Ao=dr+1;Ao<Pt;Ao++)Qn[dr]=$t(Qn[dr],Qn[Ao]);if(Qn[dr]!==0){Qn[dr+1]<0&&(Qn[dr]=0-Qn[dr]);for(var go=dr+1;go<Pt;go++)Qn[go]/=Qn[dr];Qn[dr+1]+=1}if(Qn[dr]=-Qn[dr],dr+1<K&&Qn[dr]!==0){for(var Ii=dr+1;Ii<K;Ii++)qn[Ii]=0;for(var Gi=dr+1;Gi<K;Gi++)for(var Po=dr+1;Po<Pt;Po++)qn[Gi]+=Qn[Po]*Nt.get(Gi,Po);for(var Fo=dr+1;Fo<Pt;Fo++)for(var Ra=-Qn[Fo]/Qn[dr+1],pa=dr+1;pa<K;pa++)Nt.set(pa,Fo,Nt.get(pa,Fo)+Ra*qn[pa])}if(Je)for(var qa=dr+1;qa<Pt;qa++)Zn.set(qa,dr,Qn[qa])}}var To=Math.min(Pt,K+1);if(gr<Pt&&(En[gr]=Nt.get(gr,gr)),K<To&&(En[To-1]=0),hr+1<To&&(Qn[hr]=Nt.get(hr,To-1)),Qn[To-1]=0,Xe){for(var Lc=gr;Lc<yn;Lc++){for(var yd=0;yd<K;yd++)Ln.set(yd,Lc,0);Ln.set(Lc,Lc,1)}for(var Lo=gr-1;Lo>=0;Lo--)if(En[Lo]!==0){for(var Bc=Lo+1;Bc<yn;Bc++){for(var lh=0,fh=Lo;fh<K;fh++)lh+=Ln.get(fh,Lo)*Ln.get(fh,Bc);lh=-lh/Ln.get(Lo,Lo);for(var Fc=Lo;Fc<K;Fc++)Ln.set(Fc,Bc,Ln.get(Fc,Bc)+lh*Ln.get(Fc,Lo))}for(var hh=Lo;hh<K;hh++)Ln.set(hh,Lo,-Ln.get(hh,Lo));Ln.set(Lo,Lo,1+Ln.get(Lo,Lo));for(var md=0;md<Lo-1;md++)Ln.set(md,Lo,0)}else{for(var bd=0;bd<K;bd++)Ln.set(bd,Lo,0);Ln.set(Lo,Lo,1)}}if(Je)for(var aa=Pt-1;aa>=0;aa--){if(aa<hr&&Qn[aa]!==0)for(var Gc=aa+1;Gc<Pt;Gc++){for(var dh=0,vh=aa+1;vh<Pt;vh++)dh+=Zn.get(vh,aa)*Zn.get(vh,Gc);dh=-dh/Zn.get(aa+1,aa);for(var _c=aa+1;_c<Pt;_c++)Zn.set(_c,Gc,Zn.get(_c,Gc)+dh*Zn.get(_c,aa))}for(var xd=0;xd<Pt;xd++)Zn.set(xd,aa,0);Zn.set(aa,aa,1)}for(var Id=To-1,Pd=Number.EPSILON;To>0;){var Ni=void 0,Uc=void 0;for(Ni=To-2;Ni>=-1&&Ni!==-1;Ni--){var kd=Number.MIN_VALUE+Pd*Math.abs(En[Ni]+Math.abs(En[Ni+1]));if(Math.abs(Qn[Ni])<=kd||Number.isNaN(Qn[Ni])){Qn[Ni]=0;break}}if(Ni===To-2)Uc=4;else{var ga=void 0;for(ga=To-1;ga>=Ni&&ga!==Ni;ga--){var Rd=(ga!==To?Math.abs(Qn[ga]):0)+(ga!==Ni+1?Math.abs(Qn[ga-1]):0);if(Math.abs(En[ga])<=Pd*Rd){En[ga]=0;break}}ga===Ni?Uc=3:ga===To-1?Uc=1:(Uc=2,Ni=ga)}switch(Ni++,Uc){case 1:var Od=Qn[To-2];Qn[To-2]=0;for(var Ma=To-2;Ma>=Ni;Ma--){var zc=$t(En[Ma],Od),Sd=En[Ma]/zc,wd=Od/zc;if(En[Ma]=zc,Ma!==Ni&&(Od=-wd*Qn[Ma-1],Qn[Ma-1]=Sd*Qn[Ma-1]),Je)for(var js=0;js<Pt;js++)zc=Sd*Zn.get(js,Ma)+wd*Zn.get(js,To-1),Zn.set(js,To-1,-wd*Zn.get(js,Ma)+Sd*Zn.get(js,To-1)),Zn.set(js,Ma,zc)}break;case 2:var Ed=Qn[Ni-1];Qn[Ni-1]=0;for(var Na=Ni;Na<To;Na++){var Vc=$t(En[Na],Ed),Md=En[Na]/Vc,Ad=Ed/Vc;if(En[Na]=Vc,Ed=-Ad*Qn[Na],Qn[Na]=Md*Qn[Na],Xe)for(var Is=0;Is<K;Is++)Vc=Md*Ln.get(Is,Na)+Ad*Ln.get(Is,Ni-1),Ln.set(Is,Ni-1,-Ad*Ln.get(Is,Na)+Md*Ln.get(Is,Ni-1)),Ln.set(Is,Na,Vc)}break;case 3:var Wc=Math.max(Math.abs(En[To-1]),Math.abs(En[To-2]),Math.abs(Qn[To-2]),Math.abs(En[Ni]),Math.abs(Qn[Ni])),Qu=En[To-1]/Wc,Dd=En[To-2]/Wc,ph=Qn[To-2]/Wc,Td=En[Ni]/Wc,Nd=Qn[Ni]/Wc,lu=((Dd+Qu)*(Dd-Qu)+ph*ph)/2,gh=Qu*ph*(Qu*ph),Cd=0;lu===0&&gh===0||(Cd=gh/(lu+(Cd=lu<0?0-Math.sqrt(lu*lu+gh):Math.sqrt(lu*lu+gh))));for(var fu=(Td+Qu)*(Td-Qu)+Cd,Zu=Td*Nd,mo=Ni;mo<To-1;mo++){var sa=$t(fu,Zu);sa===0&&(sa=Number.MIN_VALUE);var La=fu/sa,Ba=Zu/sa;if(mo!==Ni&&(Qn[mo-1]=sa),fu=La*En[mo]+Ba*Qn[mo],Qn[mo]=La*Qn[mo]-Ba*En[mo],Zu=Ba*En[mo+1],En[mo+1]=La*En[mo+1],Je)for(var Ps=0;Ps<Pt;Ps++)sa=La*Zn.get(Ps,mo)+Ba*Zn.get(Ps,mo+1),Zn.set(Ps,mo+1,-Ba*Zn.get(Ps,mo)+La*Zn.get(Ps,mo+1)),Zn.set(Ps,mo,sa);if((sa=$t(fu,Zu))===0&&(sa=Number.MIN_VALUE),La=fu/sa,Ba=Zu/sa,En[mo]=sa,fu=La*Qn[mo]+Ba*En[mo+1],En[mo+1]=-Ba*Qn[mo]+La*En[mo+1],Zu=Ba*Qn[mo+1],Qn[mo+1]=La*Qn[mo+1],Xe&&mo<K-1)for(var Ds=0;Ds<K;Ds++)sa=La*Ln.get(Ds,mo)+Ba*Ln.get(Ds,mo+1),Ln.set(Ds,mo+1,-Ba*Ln.get(Ds,mo)+La*Ln.get(Ds,mo+1)),Ln.set(Ds,mo,sa)}Qn[To-2]=fu;break;case 4:if(En[Ni]<=0&&(En[Ni]=En[Ni]<0?-En[Ni]:0,Je))for(var yh=0;yh<=Id;yh++)Zn.set(yh,Ni,-Zn.get(yh,Ni));for(;Ni<Id&&!(En[Ni]>=En[Ni+1]);){var Yc=En[Ni];if(En[Ni]=En[Ni+1],En[Ni+1]=Yc,Je&&Ni<Pt-1)for(var $u=0;$u<Pt;$u++)Yc=Zn.get($u,Ni+1),Zn.set($u,Ni+1,Zn.get($u,Ni)),Zn.set($u,Ni,Yc);if(Xe&&Ni<K-1)for(var qu=0;qu<K;qu++)Yc=Ln.get(qu,Ni+1),Ln.set(qu,Ni+1,Ln.get(qu,Ni)),Ln.set(qu,Ni,Yc);Ni++}To--}}if(Ge){var Ld=Zn;Zn=Ln,Ln=Ld}this.m=K,this.n=Pt,this.s=En,this.U=Ln,this.V=Zn}var _,w,L;return _=Q,(w=[{key:"solve",value:function(It){for(var Nt=It,K=this.threshold,Pt=this.s.length,Qt=vn.zeros(Pt,Pt),qt=0;qt<Pt;qt++)Math.abs(this.s[qt])<=K?Qt.set(qt,qt,0):Qt.set(qt,qt,1/this.s[qt]);for(var xe=this.U,Ie=this.rightSingularVectors,Ye=Ie.mmul(Qt),Re=Ie.rows,Xe=xe.rows,Je=vn.zeros(Re,Xe),Ge=0;Ge<Re;Ge++)for(var qe=0;qe<Xe;qe++){for(var yn=0,Pn=0;Pn<Pt;Pn++)yn+=Ye.get(Ge,Pn)*xe.get(qe,Pn);Je.set(Ge,qe,yn)}return Je.mmul(Nt)}},{key:"solveForDiagonal",value:function(It){return this.solve(vn.diag(It))}},{key:"inverse",value:function(){for(var It=this.V,Nt=this.threshold,K=It.rows,Pt=It.columns,Qt=new vn(K,this.s.length),qt=0;qt<K;qt++)for(var xe=0;xe<Pt;xe++)Math.abs(this.s[xe])>Nt&&Qt.set(qt,xe,It.get(qt,xe)/this.s[xe]);for(var Ie=this.U,Ye=Ie.rows,Re=Ie.columns,Xe=new vn(K,Ye),Je=0;Je<K;Je++)for(var Ge=0;Ge<Ye;Ge++){for(var qe=0,yn=0;yn<Re;yn++)qe+=Qt.get(Je,yn)*Ie.get(Ge,yn);Xe.set(Je,Ge,qe)}return Xe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var It=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Nt=0,K=this.s,Pt=0,Qt=K.length;Pt<Qt;Pt++)K[Pt]>It&&Nt++;return Nt}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return vn.diag(this.s)}}])&&Zt(_.prototype,w),L&&Zt(_,L),Q}();function he(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ce=function(){function Q(J){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.distances=J.distances,this.dimension=J.dimension||2,this.linkDistance=J.linkDistance}var _,w,L;return _=Q,(w=[{key:"layout",value:function(){var It=this.dimension,Nt=this.distances,K=this.linkDistance;try{var Pt=vn.mul(vn.pow(Nt,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(qe){return vn.mul([qe],[Ye]).toJSON()[0].splice(0,It)})}catch(qe){for(var Re=[],Xe=0;Xe<Nt.length;Xe++){var Je=Math.random()*K,Ge=Math.random()*K;Re.push([Je,Ge])}return Re}}}])&&he(_.prototype,w),L&&he(_,L),Q}();function Me(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ze=function(){function Q(J){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.disp=[],this.positions=J.positions,this.adjMatrix=J.adjMatrix,this.focusID=J.focusID,this.radii=J.radii,this.iterations=J.iterations||10,this.height=J.height||10,this.width=J.width||10,this.speed=J.speed||100,this.gravity=J.gravity||10,this.nodeSizeFunc=J.nodeSizeFunc,this.k=J.k||5,this.strictRadial=J.strictRadial,this.nodes=J.nodes}var _,w,L;return _=Q,(w=[{key:"layout",value:function(){var It=this.positions,Nt=[],K=this.iterations,Pt=this.width/10;this.maxDisplace=Pt,this.disp=Nt;for(var Qt=0;Qt<K;Qt++)It.forEach(function(qt,xe){Nt[xe]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return It}},{key:"getRepulsion",value:function(){var It=this,Nt=It.positions,K=It.nodes,Pt=It.disp,Qt=It.k,qt=It.radii||[];Nt.forEach(function(xe,Ie){Pt[Ie]={x:0,y:0},Nt.forEach(function(Ye,Re){if(Ie!==Re&&qt[Ie]===qt[Re]){var Xe=xe[0]-Ye[0],Je=xe[1]-Ye[1],Ge=Math.sqrt(Xe*Xe+Je*Je);if(Ge===0){Ge=1;var qe=Ie>Re?1:-1;Xe=.01*qe,Je=.01*qe}if(Ge<It.nodeSizeFunc(K[Ie])/2+It.nodeSizeFunc(K[Re])/2){var yn=Qt*Qt/Ge;Pt[Ie].x+=Xe/Ge*yn,Pt[Ie].y+=Je/Ge*yn}}})})}},{key:"updatePositions",value:function(){var It=this.positions,Nt=this.disp,K=this.speed,Pt=this.strictRadial,Qt=this.focusID,qt=this.maxDisplace||this.width/10;Pt&&Nt.forEach(function(Ie,Ye){var Re=It[Ye][0]-It[Qt][0],Xe=It[Ye][1]-It[Qt][1],Je=Math.sqrt(Re*Re+Xe*Xe),Ge=Xe/Je,qe=-Re/Je,yn=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Pn=Math.acos((Ge*Ie.x+qe*Ie.y)/yn);Pn>Math.PI/2&&(Pn-=Math.PI/2,Ge*=-1,qe*=-1);var En=Math.cos(Pn)*yn;Ie.x=Ge*En,Ie.y=qe*En});var xe=this.radii;It.forEach(function(Ie,Ye){if(Ye!==Qt){var Re=Math.sqrt(Nt[Ye].x*Nt[Ye].x+Nt[Ye].y*Nt[Ye].y);if(Re>0&&Ye!==Qt){var Xe=Math.min(qt*(K/800),Re);if(Ie[0]+=Nt[Ye].x/Re*Xe,Ie[1]+=Nt[Ye].y/Re*Xe,Pt){var Je=Ie[0]-It[Qt][0],Ge=Ie[1]-It[Qt][1],qe=Math.sqrt(Je*Je+Ge*Ge);Je=Je/qe*xe[Ye],Ge=Ge/qe*xe[Ye],Ie[0]=It[Qt][0]+Je,Ie[1]=It[Qt][1]+Ge}}}})}}])&&Me(_.prototype,w),L&&Me(_,L),Q}();function Ve(Q){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function ke(Q){return function(_){if(Array.isArray(_))return tn(_)}(Q)||function(_){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(_))return Array.from(_)}(Q)||function(_,w){if(!!_){if(typeof _=="string")return tn(_,w);var L=Object.prototype.toString.call(_).slice(8,-1);if(L==="Object"&&_.constructor&&(L=_.constructor.name),L==="Map"||L==="Set")return Array.from(_);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return tn(_,w)}}(Q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tn(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}function De(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function cn(Q,_){return(cn=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function fn(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=dn(Q);if(_){var J=dn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return nn(this,w)}}function nn(Q,_){return!_||Ve(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function dn(Q){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}function Sn(Q,_){return Math.sqrt((Q[0]-_[0])*(Q[0]-_[0])+(Q[1]-_[1])*(Q[1]-_[1]))}var Pe=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&cn(Nt,K)})(It,Q);var _,w,L,J=fn(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.focusNode=null,K.unitRadius=null,K.linkDistance=50,K.preventOverlap=!1,K.strictRadial=!0,K.maxPreventOverlapIteration=200,K.sortStrength=10,K.nodes=[],K.edges=[],K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges||[];if(Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var qt=K.center;if(Pt.length===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.linkDistance,Ie=null;if(b(K.focusNode)){for(var Ye=!1,Re=0;Re<Pt.length;Re++)Pt[Re].id===K.focusNode&&(Ie=Pt[Re],K.focusNode=Ie,Ye=!0,Re=Pt.length);Ye||(Ie=null)}else Ie=K.focusNode;Ie||(Ie=Pt[0],K.focusNode=Ie);var Xe,Je,Ge,qe=(Xe=Pt,Je=Ie.id,Ge=-1,Xe.forEach(function(Ii,Gi){Ii.id===Je&&(Ge=Gi)}),Ge);K.focusIndex=qe;var yn=s({nodes:Pt,edges:Qt},!1),Pn=n(yn),En=K.maxToFocus(Pn,qe);K.handleInfinity(Pn,qe,En+1),K.distances=Pn;var Ln=Pn[qe],Zn=K.width||500,Qn=K.height||500,qn=Zn-qt[0]>qt[0]?qt[0]:Zn-qt[0],fr=Qn-qt[1]>qt[1]?qt[1]:Qn-qt[1];qn===0&&(qn=Zn/2),fr===0&&(fr=Qn/2);var br=fr>qn?qn:fr,gr=Math.max.apply(Math,ke(Ln)),hr=[];Ln.forEach(function(Ii,Gi){K.unitRadius||(K.unitRadius=br/gr),hr[Gi]=Ii*K.unitRadius}),K.radii=hr;var Tr=K.eIdealDisMatrix();K.eIdealDistances=Tr;var dr=function(Ii){for(var Gi=Ii.length,Po=Ii[0].length,Fo=[],Ra=0;Ra<Gi;Ra++){for(var pa=[],qa=0;qa<Po;qa++)Ii[Ra][qa]!==0?pa.push(1/(Ii[Ra][qa]*Ii[Ra][qa])):pa.push(0);Fo.push(pa)}return Fo}(Tr);K.weights=dr;var Jr=new ce({linkDistance:xe,distances:Tr}).layout();Jr.forEach(function(Ii){I(Ii[0])&&(Ii[0]=Math.random()*xe),I(Ii[1])&&(Ii[1]=Math.random()*xe)}),K.positions=Jr,Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),Jr.forEach(function(Ii){Ii[0]-=Jr[qe][0],Ii[1]-=Jr[qe][1]}),K.run();var qr,wi=K.preventOverlap,Cr=K.nodeSize,pi=K.strictRadial;if(wi){var Ei,ji=K.nodeSpacing;Ei=M(ji)?function(){return ji}:C(ji)?ji:function(){return 0},qr=Cr?f(Cr)?function(Ii){return(Cr[0]>Cr[1]?Cr[0]:Cr[1])+Ei(Ii)}:function(Ii){return Cr+Ei(Ii)}:function(Ii){return Ii.size?f(Ii.size)?(Ii.size[0]>Ii.size[1]?Ii.size[0]:Ii.size[1])+Ei(Ii):Ii.size+Ei(Ii):10+Ei(Ii)};var Ao={nodes:Pt,nodeSizeFunc:qr,adjMatrix:yn,positions:Jr,radii:hr,height:Qn,width:Zn,strictRadial:pi,focusID:qe,iterations:K.maxPreventOverlapIteration||200,k:Jr.length/4.5},go=new ze(Ao);Jr=go.layout()}return Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){for(var K=this.maxIteration,Pt=this.positions||[],Qt=this.weights||[],qt=this.eIdealDistances||[],xe=this.radii||[],Ie=0;Ie<=K;Ie++){var Ye=Ie/K;this.oneIteration(Ye,Pt,xe,qt,Qt)}}},{key:"oneIteration",value:function(K,Pt,Qt,qt,xe){var Ie=1-K,Ye=this.focusIndex;Pt.forEach(function(Re,Xe){var Je=Sn(Re,[0,0]),Ge=Je===0?0:1/Je;if(Xe!==Ye){var qe=0,yn=0,Pn=0;Pt.forEach(function(Ln,Zn){if(Xe!==Zn){var Qn=Sn(Re,Ln),qn=Qn===0?0:1/Qn,fr=qt[Zn][Xe];Pn+=xe[Xe][Zn],qe+=xe[Xe][Zn]*(Ln[0]+fr*(Re[0]-Ln[0])*qn),yn+=xe[Xe][Zn]*(Ln[1]+fr*(Re[1]-Ln[1])*qn)}});var En=Qt[Xe]===0?0:1/Qt[Xe];Pn*=Ie,Pn+=K*En*En,qe*=Ie,qe+=K*En*Re[0]*Ge,Re[0]=qe/Pn,yn*=Ie,yn+=K*En*Re[1]*Ge,Re[1]=yn/Pn}})}},{key:"eIdealDisMatrix",value:function(){var K=this,Pt=K.nodes;if(!Pt)return[];var Qt=K.distances,qt=K.linkDistance,xe=K.radii||[],Ie=K.unitRadius||50,Ye=[];return Qt&&Qt.forEach(function(Re,Xe){var Je=[];Re.forEach(function(Ge,qe){if(Xe===qe)Je.push(0);else if(xe[Xe]===xe[qe])if(K.sortBy==="data")Je.push(Ge*(Math.abs(Xe-qe)*K.sortStrength)/(xe[Xe]/Ie));else if(K.sortBy){var yn=Pt[Xe][K.sortBy]||0,Pn=Pt[qe][K.sortBy]||0;b(yn)&&(yn=yn.charCodeAt(0)),b(Pn)&&(Pn=Pn.charCodeAt(0)),Je.push(Ge*(Math.abs(yn-Pn)*K.sortStrength)/(xe[Xe]/Ie))}else Je.push(Ge*qt/(xe[Xe]/Ie));else{var En=(qt+Ie)/2;Je.push(Ge*En)}}),Ye.push(Je)}),Ye}},{key:"handleInfinity",value:function(K,Pt,Qt){for(var qt=K.length,xe=0;xe<qt;xe++)if(K[Pt][xe]===1/0){K[Pt][xe]=Qt,K[xe][Pt]=Qt;for(var Ie=0;Ie<qt;Ie++)K[xe][Ie]!==1/0&&K[Pt][Ie]===1/0&&(K[Pt][Ie]=Qt+K[xe][Ie],K[Ie][Pt]=Qt+K[xe][Ie])}for(var Ye=0;Ye<qt;Ye++)if(Ye!==Pt){for(var Re=0;Re<qt;Re++)if(K[Ye][Re]===1/0){var Xe=Math.abs(K[Pt][Ye]-K[Pt][Re]);Xe=Xe===0?1:Xe,K[Ye][Re]=Xe}}}},{key:"maxToFocus",value:function(K,Pt){for(var Qt=0,qt=0;qt<K[Pt].length;qt++)K[Pt][qt]!==1/0&&(Qt=K[Pt][qt]>Qt?K[Pt][qt]:Qt);return Qt}},{key:"getType",value:function(){return"radial"}}])&&De(_.prototype,w),L&&De(_,L),It}(x);function le(Q){return(le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function Le(Q,_){return(Le=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function Be(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Ue(Q);if(_){var J=Ue(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return en(this,w)}}function en(Q,_){return!_||le(_)!=="object"&&typeof _!="function"?sn(Q):_}function sn(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function Ue(Q){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var ln=new Map,mn=function(_,w){if(ln.get(_)&&console.warn("The layout with the name ".concat(_," exists already, it will be overridden")),(J=w)!==null&&E(J)==="object"){var L=function(It){(function(Pt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Qt&&Le(Pt,Qt)})(K,It);var Nt=Be(K);function K(Pt){var Qt;(function(Ye,Re){if(!(Ye instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,K);var qt=sn(Qt=Nt.call(this)),xe={},Ie=qt.getDefaultCfg();return Object.assign(xe,Ie,w,Pt),Object.keys(xe).forEach(function(Ye){var Re=xe[Ye];qt[Ye]=Re}),Qt}return K}(x);ln.set(_,L)}else ln.set(_,w);var J},Wn=function(_){return ln.has(_)?ln.get(_):null};function An(Q){return(An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function In(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function lr(Q,_){return(lr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function Hr(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Mr(Q);if(_){var J=Mr(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Gr(this,w)}}function Gr(Q,_){return!_||An(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function Mr(Q){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var oi=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&lr(Nt,K)})(It,Q);var _,w,L,J=Hr(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).nodeSize=30,K.minNodeSpacing=10,K.preventOverlap=!1,K.equidistant=!1,K.startAngle=1.5*Math.PI,K.clockwise=!0,K.sortBy="degree",K.nodes=[],K.edges=[],K.width=300,K.height=300,K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=Pt.length;if(qt!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var xe=K.center;if(qt===1)return Pt[0].x=xe[0],Pt[0].y=xe[1],void(K.onLayoutEnd&&K.onLayoutEnd());var Ie,Ye=[];Ie=f(K.nodeSize)?Math.max(K.nodeSize[0],K.nodeSize[1]):K.nodeSize,Pt.forEach(function(br){Ye.push(br);var gr=Ie;f(br.size)?gr=Math.max(br.size[0],br.size[1]):M(br.size)&&(gr=br.size),Ie=Math.max(Ie,gr)}),K.clockwise=K.counterclockwise!==void 0?!K.counterclockwise:K.clockwise;var Re={},Xe={};if(Ye.forEach(function(br,gr){Re[br.id]=br,Xe[br.id]=gr}),!(K.sortBy!=="degree"&&b(K.sortBy)&&Ye[0][K.sortBy]!==void 0||(K.sortBy="degree",M(Pt[0].degree)))){var Je=y(Pt.length,Xe,Qt);Ye.forEach(function(br,gr){br.degree=Je[gr]})}Ye.sort(function(br,gr){return gr[K.sortBy]-br[K.sortBy]}),K.maxValueNode=Ye[0],K.maxLevelDiff=K.maxLevelDiff||K.maxValueNode[K.sortBy]/4;var Ge=[[]],qe=Ge[0];Ye.forEach(function(br){if(qe.length>0){var gr=Math.abs(qe[0][K.sortBy]-br[K.sortBy]);K.maxLevelDiff&&gr>=K.maxLevelDiff&&(qe=[],Ge.push(qe))}qe.push(br)});var yn=Ie+K.minNodeSpacing;if(!K.preventOverlap){var Pn=Ge.length>0&&Ge[0].length>1,En=(Math.min(K.width,K.height)/2-yn)/(Ge.length+(Pn?1:0));yn=Math.min(yn,En)}var Ln=0;if(Ge.forEach(function(br){var gr=K.sweep;gr===void 0&&(gr=2*Math.PI-2*Math.PI/br.length);var hr=br.dTheta=gr/Math.max(1,br.length-1);if(br.length>1&&K.preventOverlap){var Tr=Math.cos(hr)-Math.cos(0),dr=Math.sin(hr)-Math.sin(0),Jr=Math.sqrt(yn*yn/(Tr*Tr+dr*dr));Ln=Math.max(Jr,Ln)}br.r=Ln,Ln+=yn}),K.equidistant){for(var Zn=0,Qn=0,qn=0;qn<Ge.length;qn++){var fr=Ge[qn].r-Qn;Zn=Math.max(Zn,fr)}Qn=0,Ge.forEach(function(br,gr){gr===0&&(Qn=br.r),br.r=Qn,Qn+=Zn})}return Ge.forEach(function(br){var gr=br.dTheta,hr=br.r;br.forEach(function(Tr,dr){var Jr=K.startAngle+(K.clockwise?1:-1)*gr*dr;Tr.x=xe[0]+hr*Math.cos(Jr),Tr.y=xe[1]+hr*Math.sin(Jr)})}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&In(_.prototype,w),L&&In(_,L),It}(x);function ai(Q){return(ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function Zr(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Xi(Q,_){return(Xi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function $i(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=_o(Q);if(_){var J=_o(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Go(this,w)}}function Go(Q,_){return!_||ai(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function _o(Q){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var Uo=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Xi(Nt,K)})(It,Q);var _,w,L,J=$i(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.linkDistance=50,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=Pt===void 0?[]:Pt,qt=this.center;if(K&&K.length!==0){if(K.length===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.linkDistance,Ie=s({nodes:K,edges:Qt},!1),Ye=n(Ie);this.handleInfinity(Ye);var Re,Xe,Je=(Re=xe,Xe=[],Ye.forEach(function(qe){var yn=[];qe.forEach(function(Pn){yn.push(Pn*Re)}),Xe.push(yn)}),Xe);this.scaledDistances=Je;var Ge=this.runMDS();return this.positions=Ge,Ge.forEach(function(qe,yn){K[yn].x=qe[0]+qt[0],K[yn].y=qe[1]+qt[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:K,edges:Qt}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var K=this.scaledDistances,Pt=vn.mul(vn.pow(K,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(Re){return vn.mul([Re],[Ye]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(K){var Pt=-999999;K.forEach(function(Qt){Qt.forEach(function(qt){qt!==1/0&&Pt<qt&&(Pt=qt)})}),K.forEach(function(Qt,qt){Qt.forEach(function(xe,Ie){xe===1/0&&(K[qt][Ie]=Pt)})})}},{key:"getType",value:function(){return"mds"}}])&&Zr(_.prototype,w),L&&Zr(_,L),It}(x);function ta(Q){return(ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function li(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oo(Q,_){return(Oo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function qi(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Yo(Q);if(_){var J=Yo(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zo(this,w)}}function zo(Q,_){return!_||ta(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function Yo(Q){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var Xo=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Oo(Nt,K)})(It,Q);var _,w,L,J=qi(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterGravity=10,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var K=this,Pt=this.nodes;if(Pt&&Pt.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var Qt=this.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var qt={},xe={};return Pt.forEach(function(Ie,Ye){M(Ie.x)||(Ie.x=Math.random()*K.width),M(Ie.y)||(Ie.y=Math.random()*K.height),qt[Ie.id]=Ie,xe[Ie.id]=Ye}),this.nodeMap=qt,this.nodeIdxMap=xe,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration,xe=K.center,Ie=K.height*K.width,Ye=Math.sqrt(Ie)/10,Re=Ie/(Pt.length+1),Xe=Math.sqrt(Re),Je=K.gravity,Ge=K.speed,qe=K.clustering,yn={};if(qe)for(var Pn in Pt.forEach(function(Zn){if(yn[Zn.cluster]===void 0){var Qn={name:Zn.cluster,cx:0,cy:0,count:0};yn[Zn.cluster]=Qn}var qn=yn[Zn.cluster];M(Zn.x)&&(qn.cx+=Zn.x),M(Zn.y)&&(qn.cy+=Zn.y),qn.count++}),yn)yn[Pn].cx/=yn[Pn].count,yn[Pn].cy/=yn[Pn].count;for(var En=function(Qn){var qn=[];if(Pt.forEach(function(hr,Tr){qn[Tr]={x:0,y:0}}),K.applyCalculate(Pt,Qt,qn,Xe,Re),qe){var fr=K.clusterGravity||Je;for(var br in Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=yn[hr.cluster],Jr=Math.sqrt((hr.x-dr.cx)*(hr.x-dr.cx)+(hr.y-dr.cy)*(hr.y-dr.cy)),qr=Xe*fr;qn[Tr].x-=qr*(hr.x-dr.cx)/Jr,qn[Tr].y-=qr*(hr.y-dr.cy)/Jr}}),yn)yn[br].cx=0,yn[br].cy=0,yn[br].count=0;for(var gr in Pt.forEach(function(hr){var Tr=yn[hr.cluster];M(hr.x)&&(Tr.cx+=hr.x),M(hr.y)&&(Tr.cy+=hr.y),Tr.count++}),yn)yn[gr].cx/=yn[gr].count,yn[gr].cy/=yn[gr].count}Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=.01*Xe*Je;qn[Tr].x-=dr*(hr.x-xe[0]),qn[Tr].y-=dr*(hr.y-xe[1])}}),Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=Math.sqrt(qn[Tr].x*qn[Tr].x+qn[Tr].y*qn[Tr].y);if(dr>0){var Jr=Math.min(Ye*(Ge/800),dr);hr.x+=qn[Tr].x/dr*Jr,hr.y+=qn[Tr].y/dr*Jr}}})},Ln=0;Ln<qt;Ln++)En();return K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}},{key:"applyCalculate",value:function(K,Pt,Qt,qt,xe){this.calRepulsive(K,Qt,xe),this.calAttractive(Pt,Qt,qt)}},{key:"calRepulsive",value:function(K,Pt,Qt){K.forEach(function(qt,xe){Pt[xe]={x:0,y:0},K.forEach(function(Ie,Ye){if(xe!==Ye&&M(qt.x)&&M(Ie.x)&&M(qt.y)&&M(Ie.y)){var Re=qt.x-Ie.x,Xe=qt.y-Ie.y,Je=Re*Re+Xe*Xe;if(Je===0){Je=1;var Ge=xe>Ye?1:-1;Re=.01*Ge,Xe=.01*Ge}var qe=Qt/Je;Pt[xe].x+=Re*qe,Pt[xe].y+=Xe*qe}})})}},{key:"calAttractive",value:function(K,Pt,Qt){var qt=this;K.forEach(function(xe){if(xe.source&&xe.target){var Ie=qt.nodeIdxMap[xe.source],Ye=qt.nodeIdxMap[xe.target];if(Ie!==Ye){var Re=qt.nodeMap[xe.source],Xe=qt.nodeMap[xe.target];if(M(Xe.x)&&M(Re.x)&&M(Xe.y)&&M(Re.y)){var Je=Xe.x-Re.x,Ge=Xe.y-Re.y,qe=Math.sqrt(Je*Je+Ge*Ge),yn=qe*qe/Qt;Pt[Ye].x-=Je/qe*yn,Pt[Ye].y-=Ge/qe*yn,Pt[Ie].x+=Je/qe*yn,Pt[Ie].y+=Ge/qe*yn}}}})}},{key:"getType",value:function(){return"fruchterman"}}])&&li(_.prototype,w),L&&li(_,L),It}(x),ua=e(12),di=e.n(ua),ea=e(6),xi=e.n(ea),ks=e(8),Ri=e.n(ks),Rs=e(13),Mi=e.n(Rs),hu=(e(30),e(217),e(9)),ui=e.n(hu),du=e(15),eo=e.n(du),vu=1;function na(){return vu++}var ra=function Q(_){xi()(this,Q)},ia=function(){function Q(w){xi()(this,Q),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=w}var _;return Ri()(Q,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(L){return this.lookup[L]>-1}},{key:"create",value:function(L,J){this.lookup[L]=this.components.length;var It=new this.clazz(J||{});return this.components.push(It),this.entities.push(L),It}},{key:"remove",value:function(L){var J=this.lookup[L];J>-1&&J<this.components.length-1&&(this.components[J]=this.components[this.components.length-1],this.entities[J]=this.entities[this.entities.length-1],this.lookup[this.entities[J]]=J),this.components.pop(),this.entities.pop(),delete this.lookup[L]}},{key:"removeKeepSorted",value:function(L){var J=this.lookup[L];if(J>-1){var It=this.entities[J];if(J<this.components.length-1){for(var Nt=J+1;Nt<this.components.length;++Nt)this.components[Nt-1]=this.components[Nt];for(var K=J+1;K<this.entities.length;++K)this.entities[K-1]=this.entities[K],this.lookup[this.entities[K-1]]=K-1}this.components.pop(),this.entities.pop(),delete this.lookup[It]}}},{key:"moveItem",value:function(L,J){if(L!==J){for(var It=this.components[L],Nt=this.entities[L],K=L<J?1:-1,Pt=L;Pt!==J;Pt+=K){var Qt=Pt+K;this.components[Pt]=this.components[Qt],this.entities[Pt]=this.entities[Qt],this.lookup[this.entities[Pt]]=Pt}this.components[J]=It,this.entities[J]=Nt,this.lookup[Nt]=J}}},{key:"getEntity",value:function(L){return this.entities[L]}},{key:"getComponent",value:function(L){return this.components[L]}},{key:"getComponentByEntity",value:function(L){var J=this.lookup[L];return J>-1?this.components[J]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(L){for(var J=0,It=Object.keys(this.lookup);J<It.length;J++){var Nt=It[J],K=Number(Nt);if(this.lookup[K]===L)return K}return-1}},{key:"find",value:function(L){for(var J=0;J<this.getCount();J++){var It=this.getComponent(J);if(L(It,J))return It}return null}},{key:"findIndex",value:function(L){for(var J=0;J<this.getCount();J++)if(L(this.getComponent(J),J))return J;return-1}},{key:"forEach",value:function(L){for(var J=0,It=Object.keys(this.lookup);J<It.length;J++){var Nt=It[J],K=Number(Nt),Pt=this.lookup[K];L(K,this.getComponent(Pt))}}},{key:"forEachAsync",value:(_=eo()(ui.a.mark(function w(L){var J,It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:J=0,It=Object.keys(this.lookup);case 1:if(!(J<It.length)){Qt.next=10;break}return Nt=It[J],K=Number(Nt),Pt=this.lookup[K],Qt.next=7,L(K,this.getComponent(Pt));case 7:J++,Qt.next=1;break;case 10:case"end":return Qt.stop()}},w,this)})),function(w){return _.apply(this,arguments)})},{key:"map",value:function(L){for(var J=[],It=0,Nt=Object.keys(this.lookup);It<Nt.length;It++){var K=Nt[It],Pt=Number(K),Qt=this.lookup[Pt];J.push(L(Pt,this.getComponent(Qt)))}return J}}]),Q}(),tc=e(60),ya=e.n(tc),_r=e(4),yr={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Xc=function Q(){xi()(this,Q),this.index=void 0},pu=function Q(){xi()(this,Q),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},ds=function(){function Q(){xi()(this,Q),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Ri()(Q,[{key:"read",value:function(w){return this.reads.find(function(L){return L.index===w.index})||this.reads.push(w),w}},{key:"sample",value:function(w){return this.read(w),w}},{key:"write",value:function(w,L){if(this.writes.find(function(Nt){return Nt.index===L.index}))return L;var J=w.getResourceNode(L);J.resource.version++,J.resource.imported&&(this.hasSideEffect=!0);var It=w.createResourceNode(J.resource);return w.getResourceNode(It).writer=this,this.writes.push(It),It}}]),Q}(),ec=e(27),Qo=e.n(ec),nc=e(28),Vo=e.n(nc),Aa=e(21),Co=e.n(Aa);function vs(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ns,ts,Ls,Ho,es,Bs=function(Q){Qo()(w,Q);var _=vs(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return(L=_.call.apply(_,[this].concat(It))).version=0,L.refs=0,L.name=void 0,L.imported=void 0,L.priority=void 0,L.discardStart=!0,L.discardEnd=!1,L.descriptor=void 0,L.resource=void 0,L}return Ri()(w,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),w}(function Q(){xi()(this,Q),this.first=void 0,this.last=void 0}),gu=function Q(){xi()(this,Q),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function Do(Q,_){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return ps(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return ps(Pt,Qt)}}(Q))||_&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function ps(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}var yu=(Ns=Object(_r.injectable)(),ts=Object(_r.inject)(yr.RenderEngine),Ns((Ho=function(){function Q(){xi()(this,Q),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],di()(this,"engine",es,this)}var _,w;return Ri()(Q,[{key:"execute",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.compile(),It.next=3,this.executePassNodes(J);case 3:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(J){J.tearDown&&J.tearDown()}),this.reset()}},{key:"addPass",value:function(J,It,Nt,K){var Pt=new pu;Pt.execute=Nt,K&&(Pt.tearDown=K),Pt.name=J;var Qt=new ds;return Qt.name=J,this.passNodes.push(Qt),this.frameGraphPasses.push(Pt),It(this,Qt,Pt),Pt}},{key:"getPass",value:function(J){return this.frameGraphPasses.find(function(It){return It.name===J})}},{key:"compile",value:function(){var J,It=this,Nt=Do(this.passNodes);try{for(Nt.s();!(J=Nt.n()).done;){var K=J.value;K.refCount=K.writes.length+(K.hasSideEffect?1:0),K.reads.forEach(function(Cr){It.resourceNodes[Cr.index].readerCount++})}}catch(Cr){Nt.e(Cr)}finally{Nt.f()}var Pt,Qt=[],qt=Do(this.resourceNodes);try{for(qt.s();!(Pt=qt.n()).done;){var xe=Pt.value;xe.readerCount===0&&Qt.push(xe)}}catch(Cr){qt.e(Cr)}finally{qt.f()}for(;Qt.length;){var Ie=Qt.pop(),Ye=Ie&&Ie.writer;if(Ye&&--Ye.refCount==0){var Re,Xe=Do(Ye.reads);try{for(Xe.s();!(Re=Xe.n()).done;){var Je=Re.value,Ge=this.resourceNodes[Je.index];--Ge.readerCount==0&&Qt.push(Ge)}}catch(Cr){Xe.e(Cr)}finally{Xe.f()}}}this.resourceNodes.forEach(function(Cr){Cr.resource.refs+=Cr.readerCount});var qe,yn=Do(this.passNodes);try{for(yn.s();!(qe=yn.n()).done;){var Pn=qe.value;if(Pn.refCount){var En,Ln=Do(Pn.reads);try{for(Ln.s();!(En=Ln.n()).done;){var Zn=En.value,Qn=this.resourceNodes[Zn.index].resource;Qn.first=Qn.first?Qn.first:Pn,Qn.last=Pn}}catch(Cr){Ln.e(Cr)}finally{Ln.f()}var qn,fr=Do(Pn.writes);try{for(fr.s();!(qn=fr.n()).done;){var br=qn.value,gr=this.resourceNodes[br.index].resource;gr.first=gr.first?gr.first:Pn,gr.last=Pn}}catch(Cr){fr.e(Cr)}finally{fr.f()}}}}catch(Cr){yn.e(Cr)}finally{yn.f()}for(var hr=0;hr<2;hr++){var Tr,dr=Do(this.resourceNodes);try{for(dr.s();!(Tr=dr.n()).done;){var Jr=Tr.value.resource;if(Jr.priority===hr&&Jr.refs){var qr=Jr.first,wi=Jr.last;qr&&wi&&(qr.devirtualize.push(Jr),wi.destroy.push(Jr))}}}catch(Cr){dr.e(Cr)}finally{dr.f()}}}},{key:"executePassNodes",value:(_=eo()(ui.a.mark(function L(J){var It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Re,Xe,Je,Ge;return ui.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:It=Do(this.passNodes.entries()),qe.prev=1,It.s();case 3:if((Nt=It.n()).done){qe.next=18;break}if(K=ya()(Nt.value,2),Pt=K[0],!(Qt=K[1]).refCount){qe.next=16;break}qt=Do(Qt.devirtualize);try{for(qt.s();!(xe=qt.n()).done;)xe.value.preExecuteDevirtualize(this.engine)}catch(yn){qt.e(yn)}finally{qt.f()}Ie=Do(Qt.destroy);try{for(Ie.s();!(Ye=Ie.n()).done;)Ye.value.preExecuteDestroy(this.engine)}catch(yn){Ie.e(yn)}finally{Ie.f()}return qe.next=12,this.frameGraphPasses[Pt].execute(this,this.frameGraphPasses[Pt],J);case 12:Re=Do(Qt.devirtualize);try{for(Re.s();!(Xe=Re.n()).done;)Xe.value.postExecuteDevirtualize(this.engine)}catch(yn){Re.e(yn)}finally{Re.f()}Je=Do(Qt.destroy);try{for(Je.s();!(Ge=Je.n()).done;)Ge.value.postExecuteDestroy(this.engine)}catch(yn){Je.e(yn)}finally{Je.f()}case 16:qe.next=3;break;case 18:qe.next=23;break;case 20:qe.prev=20,qe.t0=qe.catch(1),It.e(qe.t0);case 23:return qe.prev=23,It.f(),qe.finish(23);case 26:this.reset();case 27:case"end":return qe.stop()}},L,this,[[1,20,23,26]])})),function(L){return _.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(J){return this.resourceNodes[J.index]}},{key:"createResourceNode",value:function(J){var It=new gu;It.resource=J,It.version=J.version,this.resourceNodes.push(It);var Nt=new Xc;return Nt.index=this.resourceNodes.length-1,Nt}},{key:"createTexture",value:function(J,It,Nt){var K=new Bs;return K.name=It,K.descriptor=Nt,this.createResourceNode(K)}},{key:"createRenderTarget",value:function(J,It,Nt){var K=new Bs;return K.name=It,K.descriptor=Nt,this.createResourceNode(K)}},{key:"present",value:function(J){this.addPass("Present",function(It,Nt){Nt.read(J),Nt.hasSideEffect=!0},eo()(ui.a.mark(function It(){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:case"end":return Nt.stop()}},It)})))}}]),Q}(),es=Mi()(Ho.prototype,"engine",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=Ho))||Ls),Fs=e(3),mr=e.n(Fs),Gs=e(25),Eo=e.n(Gs);function ma(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function mu(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?ma(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ma(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function bu(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Jn,fe,Ta,_s,ns,ba,ca,gs,Fa,ys=function(Q){Qo()(w,Q);var _=bu(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).dirty=!0,J.attributes=[],J.indices=void 0,J.indicesBuffer=void 0,J.vertexCount=void 0,J.maxInstancedCount=void 0,J.aabb=void 0,Object.assign(Eo()(J),L),J}return Ri()(w,[{key:"setAttribute",value:function(J,It,Nt,K){var Pt=this.attributes.find(function(Qt){return Qt.name===J});return Pt?(Pt.data=It,Pt.dirty=!0):this.attributes.push(mu(mu({dirty:!0,name:J,data:It},Nt),{},{bufferGetter:K})),this.dirty=!0,this}},{key:"setIndex",value:function(J){return this.indices=new Uint32Array(J.buffer?J.buffer:J),this.dirty=!0,this}}]),w}(ra),jn=(e(226),e(2)),Us=function(){function Q(_,w){xi()(this,Q),this.center=void 0,this.halfExtents=void 0,this.min=jn.e.create(),this.max=jn.e.create(),this.update(_,w)}return Ri()(Q,[{key:"update",value:function(w,L){this.center=w||jn.e.create(),this.halfExtents=L||jn.e.fromValues(.5,.5,.5),this.min=jn.e.sub(this.min,this.center,this.halfExtents),this.max=jn.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(w,L){jn.e.add(this.center,L,w),jn.e.scale(this.center,this.center,.5),jn.e.sub(this.halfExtents,L,w),jn.e.scale(this.halfExtents,this.halfExtents,.5),jn.e.copy(this.min,w),jn.e.copy(this.max,L)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(w){var L=this.center,J=L[0],It=L[1],Nt=L[2],K=this.halfExtents,Pt=K[0],Qt=K[1],qt=K[2],xe=J-Pt,Ie=J+Pt,Ye=It-Qt,Re=It+Qt,Xe=Nt-qt,Je=Nt+qt,Ge=w.center,qe=Ge[0],yn=Ge[1],Pn=Ge[2],En=w.halfExtents,Ln=En[0],Zn=En[1],Qn=En[2],qn=qe-Ln,fr=qe+Ln,br=yn-Zn,gr=yn+Zn,hr=Pn-Qn,Tr=Pn+Qn;qn<xe&&(xe=qn),fr>Ie&&(Ie=fr),br<Ye&&(Ye=br),gr>Re&&(Re=gr),hr<Xe&&(Xe=hr),Tr>Je&&(Je=Tr),L[0]=.5*(xe+Ie),L[1]=.5*(Ye+Re),L[2]=.5*(Xe+Je),K[0]=.5*(Ie-xe),K[1]=.5*(Re-Ye),K[2]=.5*(Je-Xe),this.min[0]=xe,this.min[1]=Ye,this.min[2]=Xe,this.max[0]=Ie,this.max[1]=Re,this.max[2]=Je}},{key:"intersects",value:function(w){var L=this.getMax(),J=this.getMin(),It=w.getMax(),Nt=w.getMin();return J[0]<=It[0]&&L[0]>=Nt[0]&&J[1]<=It[1]&&L[1]>=Nt[1]&&J[2]<=It[2]&&L[2]>=Nt[2]}},{key:"containsPoint",value:function(w){var L=this.getMin(),J=this.getMax();return!(w[0]<L[0]||w[0]>J[0]||w[1]<L[1]||w[1]>J[1]||w[2]<L[2]||w[2]>J[2])}},{key:"getNegativeFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.min):w.pnVertexFlag===272?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):w.pnVertexFlag===257?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===256?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===17?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===16?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===1?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):jn.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.max):w.pnVertexFlag===272?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):w.pnVertexFlag===257?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===256?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===17?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===16?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===1?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):jn.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),Q}();function Wo(Q){for(var _=new Us,w=jn.e.fromValues(Q[0],Q[1],Q[2]),L=jn.e.fromValues(Q[0],Q[1],Q[2]),J=3;J<Q.length;){var It=Q[J++],Nt=Q[J++],K=Q[J++];It<w[0]&&(w[0]=It),Nt<w[1]&&(w[1]=Nt),K<w[2]&&(w[2]=K),It>L[0]&&(L[0]=It),Nt>L[1]&&(L[1]=Nt),K>L[2]&&(L[2]=K)}return _.setMinMax(w,L),_}(fe=Jn||(Jn={}))[fe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",fe[fe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",fe[fe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",fe[fe.POINTS=0]="POINTS",fe[fe.LINES=1]="LINES",fe[fe.LINE_LOOP=2]="LINE_LOOP",fe[fe.LINE_STRIP=3]="LINE_STRIP",fe[fe.TRIANGLES=4]="TRIANGLES",fe[fe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",fe[fe.TRIANGLE_FAN=6]="TRIANGLE_FAN",fe[fe.ZERO=0]="ZERO",fe[fe.ONE=1]="ONE",fe[fe.SRC_COLOR=768]="SRC_COLOR",fe[fe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",fe[fe.SRC_ALPHA=770]="SRC_ALPHA",fe[fe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",fe[fe.DST_ALPHA=772]="DST_ALPHA",fe[fe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",fe[fe.DST_COLOR=774]="DST_COLOR",fe[fe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",fe[fe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",fe[fe.FUNC_ADD=32774]="FUNC_ADD",fe[fe.BLEND_EQUATION=32777]="BLEND_EQUATION",fe[fe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",fe[fe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",fe[fe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",fe[fe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",fe[fe.MAX_EXT=32776]="MAX_EXT",fe[fe.MIN_EXT=32775]="MIN_EXT",fe[fe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",fe[fe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",fe[fe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",fe[fe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",fe[fe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",fe[fe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",fe[fe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",fe[fe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",fe[fe.BLEND_COLOR=32773]="BLEND_COLOR",fe[fe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",fe[fe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",fe[fe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",fe[fe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",fe[fe.STREAM_DRAW=35040]="STREAM_DRAW",fe[fe.STATIC_DRAW=35044]="STATIC_DRAW",fe[fe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",fe[fe.BUFFER_SIZE=34660]="BUFFER_SIZE",fe[fe.BUFFER_USAGE=34661]="BUFFER_USAGE",fe[fe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",fe[fe.FRONT=1028]="FRONT",fe[fe.BACK=1029]="BACK",fe[fe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",fe[fe.CULL_FACE=2884]="CULL_FACE",fe[fe.BLEND=3042]="BLEND",fe[fe.DITHER=3024]="DITHER",fe[fe.STENCIL_TEST=2960]="STENCIL_TEST",fe[fe.DEPTH_TEST=2929]="DEPTH_TEST",fe[fe.SCISSOR_TEST=3089]="SCISSOR_TEST",fe[fe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",fe[fe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",fe[fe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",fe[fe.NO_ERROR=0]="NO_ERROR",fe[fe.INVALID_ENUM=1280]="INVALID_ENUM",fe[fe.INVALID_VALUE=1281]="INVALID_VALUE",fe[fe.INVALID_OPERATION=1282]="INVALID_OPERATION",fe[fe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",fe[fe.CW=2304]="CW",fe[fe.CCW=2305]="CCW",fe[fe.LINE_WIDTH=2849]="LINE_WIDTH",fe[fe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",fe[fe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",fe[fe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",fe[fe.FRONT_FACE=2886]="FRONT_FACE",fe[fe.DEPTH_RANGE=2928]="DEPTH_RANGE",fe[fe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",fe[fe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",fe[fe.DEPTH_FUNC=2932]="DEPTH_FUNC",fe[fe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",fe[fe.STENCIL_FUNC=2962]="STENCIL_FUNC",fe[fe.STENCIL_FAIL=2964]="STENCIL_FAIL",fe[fe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",fe[fe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",fe[fe.STENCIL_REF=2967]="STENCIL_REF",fe[fe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",fe[fe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",fe[fe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",fe[fe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",fe[fe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",fe[fe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",fe[fe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",fe[fe.VIEWPORT=2978]="VIEWPORT",fe[fe.SCISSOR_BOX=3088]="SCISSOR_BOX",fe[fe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",fe[fe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",fe[fe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",fe[fe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",fe[fe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",fe[fe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",fe[fe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",fe[fe.RED_BITS=3410]="RED_BITS",fe[fe.GREEN_BITS=3411]="GREEN_BITS",fe[fe.BLUE_BITS=3412]="BLUE_BITS",fe[fe.ALPHA_BITS=3413]="ALPHA_BITS",fe[fe.DEPTH_BITS=3414]="DEPTH_BITS",fe[fe.STENCIL_BITS=3415]="STENCIL_BITS",fe[fe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",fe[fe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",fe[fe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",fe[fe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",fe[fe.SAMPLES=32937]="SAMPLES",fe[fe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",fe[fe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",fe[fe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",fe[fe.DONT_CARE=4352]="DONT_CARE",fe[fe.FASTEST=4353]="FASTEST",fe[fe.NICEST=4354]="NICEST",fe[fe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",fe[fe.BYTE=5120]="BYTE",fe[fe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fe[fe.SHORT=5122]="SHORT",fe[fe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fe[fe.INT=5124]="INT",fe[fe.UNSIGNED_INT=5125]="UNSIGNED_INT",fe[fe.FLOAT=5126]="FLOAT",fe[fe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fe[fe.ALPHA=6406]="ALPHA",fe[fe.RGB=6407]="RGB",fe[fe.RGBA=6408]="RGBA",fe[fe.LUMINANCE=6409]="LUMINANCE",fe[fe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fe[fe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fe[fe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fe[fe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fe[fe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",fe[fe.VERTEX_SHADER=35633]="VERTEX_SHADER",fe[fe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",fe[fe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",fe[fe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",fe[fe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",fe[fe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",fe[fe.SHADER_TYPE=35663]="SHADER_TYPE",fe[fe.DELETE_STATUS=35712]="DELETE_STATUS",fe[fe.LINK_STATUS=35714]="LINK_STATUS",fe[fe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",fe[fe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",fe[fe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",fe[fe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",fe[fe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",fe[fe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",fe[fe.NEVER=512]="NEVER",fe[fe.LESS=513]="LESS",fe[fe.EQUAL=514]="EQUAL",fe[fe.LEQUAL=515]="LEQUAL",fe[fe.GREATER=516]="GREATER",fe[fe.NOTEQUAL=517]="NOTEQUAL",fe[fe.GEQUAL=518]="GEQUAL",fe[fe.ALWAYS=519]="ALWAYS",fe[fe.KEEP=7680]="KEEP",fe[fe.REPLACE=7681]="REPLACE",fe[fe.INCR=7682]="INCR",fe[fe.DECR=7683]="DECR",fe[fe.INVERT=5386]="INVERT",fe[fe.INCR_WRAP=34055]="INCR_WRAP",fe[fe.DECR_WRAP=34056]="DECR_WRAP",fe[fe.VENDOR=7936]="VENDOR",fe[fe.RENDERER=7937]="RENDERER",fe[fe.VERSION=7938]="VERSION",fe[fe.NEAREST=9728]="NEAREST",fe[fe.LINEAR=9729]="LINEAR",fe[fe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",fe[fe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",fe[fe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",fe[fe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",fe[fe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",fe[fe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",fe[fe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",fe[fe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",fe[fe.TEXTURE_2D=3553]="TEXTURE_2D",fe[fe.TEXTURE=5890]="TEXTURE",fe[fe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",fe[fe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",fe[fe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",fe[fe.TEXTURE0=33984]="TEXTURE0",fe[fe.TEXTURE1=33985]="TEXTURE1",fe[fe.TEXTURE2=33986]="TEXTURE2",fe[fe.TEXTURE3=33987]="TEXTURE3",fe[fe.TEXTURE4=33988]="TEXTURE4",fe[fe.TEXTURE5=33989]="TEXTURE5",fe[fe.TEXTURE6=33990]="TEXTURE6",fe[fe.TEXTURE7=33991]="TEXTURE7",fe[fe.TEXTURE8=33992]="TEXTURE8",fe[fe.TEXTURE9=33993]="TEXTURE9",fe[fe.TEXTURE10=33994]="TEXTURE10",fe[fe.TEXTURE11=33995]="TEXTURE11",fe[fe.TEXTURE12=33996]="TEXTURE12",fe[fe.TEXTURE13=33997]="TEXTURE13",fe[fe.TEXTURE14=33998]="TEXTURE14",fe[fe.TEXTURE15=33999]="TEXTURE15",fe[fe.TEXTURE16=34e3]="TEXTURE16",fe[fe.TEXTURE17=34001]="TEXTURE17",fe[fe.TEXTURE18=34002]="TEXTURE18",fe[fe.TEXTURE19=34003]="TEXTURE19",fe[fe.TEXTURE20=34004]="TEXTURE20",fe[fe.TEXTURE21=34005]="TEXTURE21",fe[fe.TEXTURE22=34006]="TEXTURE22",fe[fe.TEXTURE23=34007]="TEXTURE23",fe[fe.TEXTURE24=34008]="TEXTURE24",fe[fe.TEXTURE25=34009]="TEXTURE25",fe[fe.TEXTURE26=34010]="TEXTURE26",fe[fe.TEXTURE27=34011]="TEXTURE27",fe[fe.TEXTURE28=34012]="TEXTURE28",fe[fe.TEXTURE29=34013]="TEXTURE29",fe[fe.TEXTURE30=34014]="TEXTURE30",fe[fe.TEXTURE31=34015]="TEXTURE31",fe[fe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",fe[fe.REPEAT=10497]="REPEAT",fe[fe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",fe[fe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",fe[fe.FLOAT_VEC2=35664]="FLOAT_VEC2",fe[fe.FLOAT_VEC3=35665]="FLOAT_VEC3",fe[fe.FLOAT_VEC4=35666]="FLOAT_VEC4",fe[fe.INT_VEC2=35667]="INT_VEC2",fe[fe.INT_VEC3=35668]="INT_VEC3",fe[fe.INT_VEC4=35669]="INT_VEC4",fe[fe.BOOL=35670]="BOOL",fe[fe.BOOL_VEC2=35671]="BOOL_VEC2",fe[fe.BOOL_VEC3=35672]="BOOL_VEC3",fe[fe.BOOL_VEC4=35673]="BOOL_VEC4",fe[fe.FLOAT_MAT2=35674]="FLOAT_MAT2",fe[fe.FLOAT_MAT3=35675]="FLOAT_MAT3",fe[fe.FLOAT_MAT4=35676]="FLOAT_MAT4",fe[fe.SAMPLER_2D=35678]="SAMPLER_2D",fe[fe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",fe[fe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",fe[fe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",fe[fe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",fe[fe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",fe[fe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",fe[fe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",fe[fe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",fe[fe.COMPILE_STATUS=35713]="COMPILE_STATUS",fe[fe.LOW_FLOAT=36336]="LOW_FLOAT",fe[fe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",fe[fe.HIGH_FLOAT=36338]="HIGH_FLOAT",fe[fe.LOW_INT=36339]="LOW_INT",fe[fe.MEDIUM_INT=36340]="MEDIUM_INT",fe[fe.HIGH_INT=36341]="HIGH_INT",fe[fe.FRAMEBUFFER=36160]="FRAMEBUFFER",fe[fe.RENDERBUFFER=36161]="RENDERBUFFER",fe[fe.RGBA4=32854]="RGBA4",fe[fe.RGB5_A1=32855]="RGB5_A1",fe[fe.RGB565=36194]="RGB565",fe[fe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",fe[fe.STENCIL_INDEX=6401]="STENCIL_INDEX",fe[fe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",fe[fe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",fe[fe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",fe[fe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",fe[fe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",fe[fe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",fe[fe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",fe[fe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",fe[fe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",fe[fe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",fe[fe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",fe[fe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",fe[fe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",fe[fe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",fe[fe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",fe[fe.NONE=0]="NONE",fe[fe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",fe[fe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",fe[fe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",fe[fe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",fe[fe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",fe[fe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",fe[fe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",fe[fe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",fe[fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",fe[fe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",fe[fe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",fe[fe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",fe[fe.COPY_SRC=1]="COPY_SRC",fe[fe.COPY_DST=2]="COPY_DST",fe[fe.SAMPLED=4]="SAMPLED",fe[fe.STORAGE=8]="STORAGE",fe[fe.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var rc=(Ta=Object(_r.injectable)(),_s=Object(_r.inject)(yr.GeometryComponentManager),ns=Object(_r.inject)(yr.RenderEngine),Ta((ca=function(){function Q(){xi()(this,Q),di()(this,"geometry",gs,this),di()(this,"engine",Fa,this)}var _;return Ri()(Q,[{key:"execute",value:(_=eo()(ui.a.mark(function w(){var L=this;return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:this.geometry.forEach(function(It,Nt){Nt.dirty&&(Nt.attributes.forEach(function(K){var Pt;K.dirty&&K.data&&(K.buffer?(Pt=K.buffer)===null||Pt===void 0||Pt.subData({data:K.data,offset:0}):K.buffer=L.engine.createBuffer({data:K.data,type:Jn.FLOAT}),K.dirty=!1)}),Nt.indices&&(Nt.indicesBuffer?Nt.indicesBuffer.subData({data:Nt.indices,offset:0}):Nt.indicesBuffer=L.engine.createElements({data:Nt.indices,count:Nt.indices.length,type:Jn.UNSIGNED_INT,usage:Jn.STATIC_DRAW})),Nt.dirty=!1)});case 1:case"end":return J.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(L,J){J.indicesBuffer&&J.indicesBuffer.destroy(),J.attributes.forEach(function(It){It.buffer&&It.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},J=L.vertexCount,It=na();return this.geometry.create(It,{vertexCount:J})}},{key:"createInstancedBufferGeometry",value:function(L){var J=L.maxInstancedCount,It=L.vertexCount,Nt=na();return this.geometry.create(Nt,{maxInstancedCount:J,vertexCount:It})}},{key:"createBox",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=L.widthSegments||1,It=L.heightSegments||1,Nt=L.depthSegments||1,K=L.halfExtents||jn.e.fromValues(.5,.5,.5),Pt=ya()(K,3),Qt=Pt[0],qt=Pt[1],xe=Pt[2],Ie=[jn.e.fromValues(-Qt,-qt,xe),jn.e.fromValues(Qt,-qt,xe),jn.e.fromValues(Qt,qt,xe),jn.e.fromValues(-Qt,qt,xe),jn.e.fromValues(Qt,-qt,-xe),jn.e.fromValues(-Qt,-qt,-xe),jn.e.fromValues(-Qt,qt,-xe),jn.e.fromValues(Qt,qt,-xe)],Ye=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Re=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Xe={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Je=[],Ge=[],qe=[],yn=[],Pn=[],En=0,Ln=function(fr,br,gr){var hr,Tr,dr,Jr;for(dr=0;dr<=br;dr++)for(Jr=0;Jr<=gr;Jr++){var qr=jn.e.create(),wi=jn.e.create(),Cr=jn.e.create(),pi=jn.e.create();jn.e.lerp(qr,Ie[Ye[fr][0]],Ie[Ye[fr][1]],dr/br),jn.e.lerp(wi,Ie[Ye[fr][0]],Ie[Ye[fr][2]],Jr/gr),jn.e.sub(Cr,wi,Ie[Ye[fr][0]]),jn.e.add(pi,qr,Cr),hr=dr/br,Tr=Jr/gr,Je.push(pi[0],pi[1],pi[2]),Ge.push(Re[fr][0],Re[fr][1],Re[fr][2]),qe.push(hr,Tr),hr=.875*(hr/=3)+4/64,Tr=.875*(Tr/=3)+4/64,hr+=fr%3/3,Tr+=Math.floor(fr/3)/3,yn.push(hr,Tr),dr<br&&Jr<gr&&(Pn.push(En+gr+1,En+1,En),Pn.push(En+gr+1,En+gr+2,En+1)),En++}};Ln(Xe.FRONT,J,It),Ln(Xe.BACK,J,It),Ln(Xe.TOP,J,Nt),Ln(Xe.BOTTOM,J,Nt),Ln(Xe.RIGHT,Nt,It),Ln(Xe.LEFT,Nt,It);var Zn=Wo(Je),Qn=na();return this.geometry.create(Qn,{indices:Uint32Array.from(Pn),aabb:Zn,attributes:[{dirty:!0,name:"position",data:Float32Array.from(Je),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),Q}(),gs=Mi()(ca.prototype,"geometry",[_s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=Mi()(ca.prototype,"engine",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=ca))||ba);e(227);function ic(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ms,oa,fo,bs,zs,Ga,_a,xu,Ou,la=function(Q){Qo()(w,Q);var _=ic(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).vertexShaderGLSL=void 0,J.fragmentShaderGLSL=void 0,J.dirty=!0,J.uniforms=[],J.cull={enable:!0,face:Jn.BACK},J.depth={enable:!0},J.blend=void 0,Object.assign(Eo()(J),L),J}return Ri()(w,[{key:"setCull",value:function(J){return this.cull=J,this}},{key:"setDepth",value:function(J){return this.depth=J,this}},{key:"setBlend",value:function(J){return this.blend=J,this}},{key:"setUniform",value:function(J,It){var Nt=this;if(typeof J!="string")return Object.keys(J).forEach(function(Pt){return Nt.setUniform(Pt,J[Pt])}),this;var K=this.uniforms.find(function(Pt){return Pt.name===J});return K?(K.dirty=!0,K.data=It):this.uniforms.push({name:J,dirty:!0,data:It}),this.dirty=!0,this}}]),w}(ra);function rs(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ca(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?rs(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):rs(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Vs,Rt=(ms=Object(_r.injectable)(),oa=Object(_r.inject)(yr.MaterialComponentManager),fo=Object(_r.inject)(yr.RenderEngine),bs=Object(_r.inject)(yr.ShaderModuleService),ms((Ga=function(){function Q(){xi()(this,Q),di()(this,"material",_a,this),di()(this,"engine",xu,this),di()(this,"shaderModule",Ou,this)}var _;return Ri()(Q,[{key:"execute",value:(_=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.all(this.material.map(function(){var J=eo()(ui.a.mark(function It(Nt,K){return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:case"end":return Pt.stop()}},It)}));return function(It,Nt){return J.apply(this,arguments)}}()));case 2:case"end":return L.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var L=na();return this.material.create(L,{vertexShaderGLSL:this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;
}`,fragmentShaderGLSL:this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`})}},{key:"createShaderMaterial",value:function(L){var J=na(),It=L.vertexShader,Nt=L.fragmentShader,K=[];if(!this.engine.supportWebGPU){var Pt="material-".concat(J);this.shaderModule.registerModule(Pt,{vs:L.vertexShader,fs:L.fragmentShader});var Qt=this.shaderModule.getModule(Pt);It=Qt.vs,Nt=Qt.fs,Qt.uniforms&&(K=Object.keys(Qt.uniforms).map(function(qt){return{dirty:!0,name:qt,data:Qt.uniforms[qt]}}))}return this.material.create(J,Ca(Ca({vertexShaderGLSL:It,fragmentShaderGLSL:Nt},L),{},{uniforms:K}))}}]),Q}(),_a=Mi()(Ga.prototype,"material",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=Mi()(Ga.prototype,"engine",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ou=Mi()(Ga.prototype,"shaderModule",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zs=Ga))||zs);function l(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}(function(Q){Q[Q.Standard=0]="Standard"})(Vs||(Vs={}));var u=function(Q){Qo()(w,Q);var _=l(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).strategy=Vs.Standard,J.visibilityPlaneMask=0,J.visible=!1,Object.assign(Eo()(J),L),J}return w}(ra);e(228);function j(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var W,st=function(Q){Qo()(w,Q);var _=j(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).material=void 0,J.geometry=void 0,J.aabb=new Us,J.aabbDirty=!0,J.model=void 0,J.visible=!0,Object.assign(Eo()(J),L),J}return w}(ra),Tt=function(){function Q(_,w){xi()(this,Q),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=_||0,this.normal=w||jn.e.fromValues(0,1,0),this.updatePNVertexFlag()}return Ri()(Q,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(w){return jn.e.dot(w,this.normal)-this.distance}},{key:"normalize",value:function(){var w=1/jn.e.len(this.normal);jn.e.scale(this.normal,this.normal,w),this.distance*=w}},{key:"intersectsLine",value:function(w,L,J){var It=this.distanceToPoint(w),Nt=It/(It-this.distanceToPoint(L)),K=Nt>=0&&Nt<=1;return K&&J&&jn.e.lerp(J,w,L,Nt),K}}]),Q}();(function(Q){Q[Q.OUTSIDE=4294967295]="OUTSIDE",Q[Q.INSIDE=0]="INSIDE",Q[Q.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var Gt,Xt,ee,ae,je,Fe,_e,He,bn,wn,Nn,Bn,Fn,sr=function(){function Q(_){if(xi()(this,Q),this.planes=[],_)this.planes=_;else for(var w=0;w<6;w++)this.planes.push(new Tt)}return Ri()(Q,[{key:"extractFromVPMatrix",value:function(w){var L=ya()(w,16),J=L[0],It=L[1],Nt=L[2],K=L[3],Pt=L[4],Qt=L[5],qt=L[6],xe=L[7],Ie=L[8],Ye=L[9],Re=L[10],Xe=L[11],Je=L[12],Ge=L[13],qe=L[14],yn=L[15];jn.e.set(this.planes[0].normal,K-J,xe-Pt,Xe-Ie),this.planes[0].distance=-(yn-Je),jn.e.set(this.planes[1].normal,K+J,xe+Pt,Xe+Ie),this.planes[1].distance=-(yn+Je),jn.e.set(this.planes[2].normal,K+It,xe+Qt,Xe+Ye),this.planes[2].distance=-(yn+Ge),jn.e.set(this.planes[3].normal,K-It,xe-Qt,Xe-Ye),this.planes[3].distance=-(yn-Ge),jn.e.set(this.planes[4].normal,K-Nt,xe-qt,Xe-Re),this.planes[4].distance=-(yn-qe),jn.e.set(this.planes[5].normal,K+Nt,xe+qt,Xe+Re),this.planes[5].distance=-(yn+qe),this.planes.forEach(function(Pn){Pn.normalize(),Pn.updatePNVertexFlag()})}}]),Q}(),ur=e(61),Or=e.n(ur);function ei(Q,_){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Ti(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Ti(Pt,Qt)}}(Q))||_&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function Ti(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}var kr,yi,oo,so,co,lo,Hi,Io,ko,Ro,bo,jo,ho,fa,Zo,Hc,Su,Kc,Jc,Qc,mh,Zc,wu,$c,Eu=(Gt=Object(_r.injectable)(),Xt=Object(_r.inject)(yr.MeshComponentManager),ee=Object(_r.inject)(yr.CullableComponentManager),ae=Object(_r.inject)(yr.GeometryComponentManager),je=Object(_r.inject)(yr.HierarchyComponentManager),Fe=Object(_r.inject)(yr.TransformComponentManager),Gt((He=function(){function Q(){xi()(this,Q),di()(this,"mesh",bn,this),di()(this,"cullable",wn,this),di()(this,"geometry",Nn,this),di()(this,"hierarchy",Bn,this),di()(this,"transform",Fn,this),this.planes=void 0}var _;return Ri()(Q,[{key:"setFrustumPlanes",value:function(L){this.planes=L}},{key:"execute",value:(_=eo()(ui.a.mark(function w(L){var J,It,Nt,K=this;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:J=ei(L);try{for(Nt=function(){var qt=It.value,xe=(qt.getScene(),qt.getCamera());K.mesh.forEach(function(Ie,Ye){var Re,Xe,Je=K.hierarchy.getComponentByEntity(Ie),Ge=K.cullable.getComponentByEntity(Ie),qe=Ye.geometry,yn=K.transform.getComponentByEntity(Ie);if(qe&&qe.aabb&&yn&&Ye.aabbDirty){var Pn=yn.worldTransform,En=qe.aabb,Ln=En.center,Zn=En.halfExtents,Qn=jn.e.transformMat4(jn.e.create(),Ln,Pn),qn=(Re=Pn,(Xe=jn.a.create())[0]=Re[0],Xe[1]=Re[1],Xe[2]=Re[2],Xe[3]=Re[4],Xe[4]=Re[5],Xe[5]=Re[6],Xe[6]=Re[8],Xe[7]=Re[9],Xe[8]=Re[10],Xe),fr=jn.e.transformMat3(jn.e.create(),Zn,qn);Ye.aabb.update(Qn,fr),Ye.aabbDirty=!1}if(Ge&&qe){var br=K.cullable.getComponentByEntity((Je==null?void 0:Je.parentID)||-1);Ge.visibilityPlaneMask=K.computeVisibilityWithPlaneMask(Ye.aabb,(br==null?void 0:br.visibilityPlaneMask)||W.INDETERMINATE,K.planes||xe.getFrustum().planes),Ge.visible=Ge.visibilityPlaneMask!==W.OUTSIDE}})},J.s();!(It=J.n()).done;)Nt()}catch(Qt){J.e(Qt)}finally{J.f()}case 2:case"end":return Pt.stop()}},w)})),function(w){return _.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(L,J,It){if(J===W.OUTSIDE||J===W.INSIDE)return J;for(var Nt=W.INSIDE,K=0,Pt=It.length;K<Pt;++K){var Qt=K<31?1<<K:0;if(!(K<31&&(J&Qt)==0)){var qt=It[K],xe=qt.normal,Ie=qt.distance;if(jn.e.dot(xe,L.getNegativeFarPoint(It[K]))+Ie>0)return W.OUTSIDE;jn.e.dot(xe,L.getPositiveFarPoint(It[K]))+Ie>0&&(Nt|=Qt)}}return Nt}}]),Q}(),bn=Mi()(He.prototype,"mesh",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=Mi()(He.prototype,"cullable",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Mi()(He.prototype,"geometry",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bn=Mi()(He.prototype,"hierarchy",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=Mi()(He.prototype,"transform",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=He))||_e);function Ws(Q,_){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return qc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return qc(Pt,Qt)}}(Q))||_&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function qc(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}var bh,tl,el,nl,oc,rl,il,ol,al,Mu,Au,xs,ac,sl,sc,Os,ul,xh,cl,ll,uc,fl,Ss=(kr=Object(_r.injectable)(),yi=Object(_r.inject)(yr.MeshComponentManager),oo=Object(_r.inject)(yr.GeometryComponentManager),so=Object(_r.inject)(yr.MaterialComponentManager),co=Object(_r.inject)(yr.CullableComponentManager),lo=Object(_r.inject)(yr.TransformComponentManager),Hi=Object(_r.inject)(yr.HierarchyComponentManager),Io=Object(_r.inject)(yr.Systems),ko=Object(_r.named)(yr.FrameGraphSystem),Ro=Object(_r.inject)(yr.RenderEngine),bo=Object(_r.inject)(yr.ResourcePool),kr(($c=wu=function(){function Q(){var L=this;xi()(this,Q),di()(this,"mesh",fa,this),di()(this,"geometry",Zo,this),di()(this,"material",Hc,this),di()(this,"cullable",Su,this),di()(this,"transform",Kc,this),di()(this,"hierarchy",Jc,this),di()(this,"frameGraphSystem",Qc,this),di()(this,"engine",mh,this),di()(this,"resourcePool",Zc,this),this.setup=function(J,It,Nt){var K=J.createRenderTarget(It,"color buffer",{width:1,height:1,usage:Jn.RENDER_ATTACHMENT|Jn.SAMPLED|Jn.COPY_SRC});Nt.data={output:It.write(J,K)}},this.execute=function(){var J=eo()(ui.a.mark(function It(Nt,K,Pt){var Qt,qt,xe,Ie,Ye,Re;return ui.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Qt=Nt.getResourceNode(K.data.output),qt=L.resourcePool.getOrCreateResource(Qt.resource),xe=Ws(Pt),Xe.prev=3,xe.s();case 5:if((Ie=xe.n()).done){Xe.next=11;break}return Ye=Ie.value,Xe.next=9,L.initView(Ye);case 9:Xe.next=5;break;case 11:Xe.next=16;break;case 13:Xe.prev=13,Xe.t0=Xe.catch(3),xe.e(Xe.t0);case 16:return Xe.prev=16,xe.f(),Xe.finish(16);case 19:Re=L.engine.getCanvas(),qt.resize({width:Re.width,height:Re.height}),L.engine.setScissor({enable:!1}),L.engine.clear({framebuffer:qt,color:Pt[0].getClearColor(),depth:1}),L.engine.useFramebuffer(qt,function(){var Je,Ge=Ws(Pt);try{for(Ge.s();!(Je=Ge.n()).done;){var qe=Je.value;L.renderView(qe)}}catch(yn){Ge.e(yn)}finally{Ge.f()}});case 24:case"end":return Xe.stop()}},It,null,[[3,13,16,19]])}));return function(It,Nt,K){return J.apply(this,arguments)}}()}var _,w;return Ri()(Q,[{key:"renderView",value:function(J){var It=J.getScene(),Nt=J.getCamera(),K=Nt.getViewTransform(),Pt=jn.b.multiply(jn.b.create(),Nt.getPerspective(),K);Nt.getFrustum().extractFromVPMatrix(Pt);var Qt=J.getViewport(),qt=Qt.x,xe=Qt.y,Ie=Qt.width,Ye=Qt.height;this.engine.viewport({x:qt,y:xe,width:Ie,height:Ye});var Re,Xe=Ws(It.getEntities());try{for(Xe.s();!(Re=Xe.n()).done;){var Je=Re.value;this.renderMesh(Je,{camera:Nt,view:J,viewMatrix:K})}}catch(Ge){Xe.e(Ge)}finally{Xe.f()}}},{key:"renderMesh",value:function(J,It){var Nt=this,K=It.camera,Pt=It.view,Qt=It.viewMatrix,qt=this.mesh.getComponentByEntity(J);if(qt.visible){this.hierarchy.forEach(function(qe,yn){yn.parentID===J&&Nt.renderMesh(qe,{camera:K,view:Pt,viewMatrix:Qt})});var xe=qt.material,Ie=qt.geometry;if(Ie&&!Ie.dirty&&xe){var Ye=this.transform.getComponentByEntity(J),Re=jn.b.multiply(jn.b.create(),Qt,Ye.worldTransform),Xe=Pt.getViewport(),Je=Xe.width,Ge=Xe.height;xe.setUniform({projectionMatrix:K.getPerspective(),modelViewMatrix:Re,modelMatrix:Ye.worldTransform,viewMatrix:Qt,cameraPosition:K.getPosition(),u_viewport:[Je,Ge]}),qt.model&&(qt.model.draw({uniforms:xe.uniforms.reduce(function(qe,yn){return qe[yn.name]=yn.data,qe},{})}),xe.uniforms.forEach(function(qe){qe.dirty=!1}),xe.dirty=!1)}}}},{key:"initMesh",value:(w=eo()(ui.a.mark(function L(J,It){var Nt,K,Pt,Qt,qt,xe,Ie,Ye=this;return ui.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(Nt=this.mesh.getComponentByEntity(J)){Re.next=3;break}return Re.abrupt("return");case 3:return K=Nt.material,Pt=Nt.geometry,Re.next=7,this.hierarchy.forEachAsync(function(){var Xe=eo()(ui.a.mark(function Je(Ge,qe){return ui.a.wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(qe.parentID!==J){yn.next=4;break}return yn.next=4,Ye.initMesh(Ge,It);case 4:case"end":return yn.stop()}},Je)}));return function(Je,Ge){return Xe.apply(this,arguments)}}());case 7:if(Pt&&!Pt.dirty&&K){Re.next=9;break}return Re.abrupt("return");case 9:if(Nt.model){Re.next=21;break}return K.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Qt=this.engine,qt=Qt.createModel,xe=Qt.createAttribute,Ie={vs:K.vertexShaderGLSL,fs:K.fragmentShaderGLSL,attributes:Pt.attributes.reduce(function(Xe,Je){return Je.data&&Je.buffer&&(Xe[Je.name]=xe({buffer:Je.buffer,attributes:Je.attributes,arrayStride:Je.arrayStride,stepMode:Je.stepMode,divisor:Je.stepMode==="vertex"?0:1})),Xe},{}),uniforms:K.uniforms.reduce(function(Xe,Je){return Xe[Je.name]=Je.data,Xe},{}),scissor:{enable:!0,box:function(){return It.getViewport()}}},K.cull&&(Ie.cull=K.cull),K.depth&&(Ie.depth=K.depth),K.blend&&(Ie.blend=K.blend),Pt.indicesBuffer&&(Ie.elements=Pt.indicesBuffer),Pt.maxInstancedCount&&(Ie.instances=Pt.maxInstancedCount,Ie.count=Pt.vertexCount||3),Re.next=20,qt(Ie);case 20:Nt.model=Re.sent;case 21:case"end":return Re.stop()}},L,this)})),function(L,J){return w.apply(this,arguments)})},{key:"initView",value:(_=eo()(ui.a.mark(function L(J){var It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:It=J.getScene(),Nt=Ws(It.getEntities()),Qt.prev=2,Nt.s();case 4:if((K=Nt.n()).done){Qt.next=10;break}return Pt=K.value,Qt.next=8,this.initMesh(Pt,J);case 8:Qt.next=4;break;case 10:Qt.next=15;break;case 12:Qt.prev=12,Qt.t0=Qt.catch(2),Nt.e(Qt.t0);case 15:return Qt.prev=15,Nt.f(),Qt.finish(15);case 18:case"end":return Qt.stop()}},L,this,[[2,12,15,18]])})),function(L){return _.apply(this,arguments)})}]),Q}(),wu.IDENTIFIER="Render Pass",ho=$c,fa=Mi()(ho.prototype,"mesh",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zo=Mi()(ho.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Mi()(ho.prototype,"material",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=Mi()(ho.prototype,"cullable",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=Mi()(ho.prototype,"transform",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=Mi()(ho.prototype,"hierarchy",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qc=Mi()(ho.prototype,"frameGraphSystem",[Io,ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=Mi()(ho.prototype,"engine",[Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=Mi()(ho.prototype,"resourcePool",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=ho))||jo),Tu=(bh=Object(_r.injectable)(),tl=Object(_r.inject)(yr.RenderEngine),el=Object(_r.inject)(yr.ResourcePool),bh((al=ol=function Q(){var _=this;xi()(this,Q),di()(this,"engine",rl,this),di()(this,"resourcePool",il,this),this.model=void 0,this.setup=function(w,L,J){var It=w.getPass(Ss.IDENTIFIER);if(It){var Nt=w.createRenderTarget(L,"render to screen",{width:1,height:1});J.data={input:L.read(It.data.output),output:L.write(w,Nt)}}},this.execute=function(){var w=eo()(ui.a.mark(function L(J,It){var Nt,K,Pt,Qt,qt,xe,Ie;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Nt=_.engine,K=Nt.createModel,Pt=Nt.createAttribute,Qt=Nt.createBuffer,_.model){Ye.next=6;break}return Ye.next=4,K({vs:_.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:_.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Pt({buffer:Qt({data:[-4,-4,4,-4,0,4],type:Jn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:qt=Ye.sent,_.model=qt;case 6:xe=J.getResourceNode(It.data.input),Ie=_.resourcePool.getOrCreateResource(xe.resource),_.engine.useFramebuffer(null,function(){_.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),_.model.draw({uniforms:{u_Texture:Ie}})});case 9:case"end":return Ye.stop()}},L)}));return function(L,J){return w.apply(this,arguments)}}(),this.tearDown=function(){_.model=void 0}},ol.IDENTIFIER="Copy Pass",oc=al,rl=Mi()(oc.prototype,"engine",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=Mi()(oc.prototype,"resourcePool",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=oc))||nl);function cc(Q,_){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return lc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return lc(Pt,Qt)}}(Q))||_&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function lc(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}var hl,Cu,dl,Oh,vl,pl,gl,ws,Sh,yl,ml,bl,jd=1,xl=2,fc=(Mu=Object(_r.injectable)(),Au=Object(_r.inject)(yr.RenderEngine),xs=Object(_r.inject)(yr.ResourcePool),ac=Object(_r.inject)(yr.RenderPassFactory),sl=Object(_r.inject)(yr.MeshComponentManager),Mu((fl=uc=function(){function Q(){var _=this;xi()(this,Q),di()(this,"engine",ul,this),di()(this,"resourcePool",xh,this),di()(this,"renderPassFactory",cl,this),di()(this,"mesh",ll,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(w,L,J){var It=w.createRenderTarget(L,"picking fbo",{width:1,height:1});J.data={output:L.write(w,It)},L.hasSideEffect=!0},this.execute=function(){var w=eo()(ui.a.mark(function L(J,It,Nt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(_.views=Nt,!_.alreadyInRendering){qt.next=3;break}return qt.abrupt("return");case 3:K=cc(Nt);try{for(Qt=function(){var Ie=Pt.value,Ye=Ie.getViewport(),Re=Ye.width,Xe=Ye.height;_.alreadyInRendering=!0;var Je=J.getResourceNode(It.data.output);_.pickingFBO=_.resourcePool.getOrCreateResource(Je.resource),_.pickingFBO.resize({width:Re,height:Xe}),_.engine.useFramebuffer(_.pickingFBO,function(){_.engine.clear({framebuffer:_.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Ge,qe=_.renderPassFactory(Ss.IDENTIFIER),yn=[],Pn=cc(Ie.getScene().getEntities());try{for(Pn.s();!(Ge=Pn.n()).done;){var En=Ge.value,Ln=_.mesh.getComponentByEntity(En);Ln.material.setUniform("u_PickingStage",jd),yn.push(Ln)}}catch(Zn){Pn.e(Zn)}finally{Pn.f()}qe.renderView(Ie),yn.forEach(function(Zn){Zn.material.setUniform("u_PickingStage",xl)}),_.alreadyInRendering=!1})},K.s();!(Pt=K.n()).done;)Qt()}catch(xe){K.e(xe)}finally{K.f()}case 5:case"end":return qt.stop()}},L)}));return function(L,J,It){return w.apply(this,arguments)}}(),this.pick=function(w,L){var J,It,Nt=w.x,K=w.y,Pt=_.engine,Qt=Pt.readPixels,qt=Pt.useFramebuffer,xe=L.getViewport(),Ie=xe.width,Ye=xe.height,Re=Nt*window.devicePixelRatio,Xe=K*window.devicePixelRatio;if(!(Re>Ie||Re<0||Xe>Ye||Xe<0))return qt(_.pickingFBO,function(){var Je,Ge;(J=Qt({x:Math.round(Re),y:Math.round(Ye-(K+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:_.pickingFBO}))[0]===0&&J[1]===0&&J[2]===0||(Je=J,Ge=ya()(Je,3),It=Ge[0]+256*Ge[1]+65536*Ge[2]-1,_.highlightEnabled&&_.highlightPickedFeature(J,L))}),It}}return Ri()(Q,[{key:"enableHighlight",value:function(w){this.highlightEnabled=w}},{key:"setHighlightColor",value:function(w){this.highlightColor=w}},{key:"highlightPickedFeature",value:function(w,L){if(w){var J,It=cc(L.getScene().getEntities());try{for(It.s();!(J=It.n()).done;){var Nt=J.value,K=this.mesh.getComponentByEntity(Nt).material;K.setUniform("u_PickingStage",xl),K.setUniform("u_PickingColor",[w[0],w[1],w[2]]),K.setUniform("u_HighlightColor",this.highlightColor)}}catch(Pt){It.e(Pt)}finally{It.f()}}}}]),Q}(),uc.IDENTIFIER="PixelPicking Pass",Os=fl,ul=Mi()(Os.prototype,"engine",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Mi()(Os.prototype,"resourcePool",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl=Mi()(Os.prototype,"renderPassFactory",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=Mi()(Os.prototype,"mesh",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=Os))||sc),hc=(hl=Object(_r.injectable)(),Cu=Object(_r.inject)(yr.Systems),dl=Object(_r.named)(yr.FrameGraphSystem),Oh=Object(_r.inject)(yr.RenderPassFactory),vl=Object(_r.inject)(yr.ConfigService),pl=Object(_r.inject)(yr.ResourcePool),hl((ws=function(){function Q(){xi()(this,Q),di()(this,"frameGraphSystem",Sh,this),di()(this,"renderPassFactory",yl,this),di()(this,"configService",ml,this),di()(this,"resourcePool",bl,this)}var _;return Ri()(Q,[{key:"execute",value:(_=eo()(ui.a.mark(function w(L){var J,It,Nt,K,Pt,Qt,qt,xe;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:J=this.renderPassFactory(Ss.IDENTIFIER),It=J.setup,Nt=J.execute,this.frameGraphSystem.addPass(Ss.IDENTIFIER,It,Nt),K=this.renderPassFactory(Tu.IDENTIFIER),Pt=K.setup,Qt=K.execute,qt=K.tearDown,xe=this.frameGraphSystem.addPass(Tu.IDENTIFIER,Pt,Qt,qt),this.frameGraphSystem.present(xe.data.output);case 5:case"end":return Ie.stop()}},w,this)})),function(w){return _.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(L,J){return this.renderPassFactory(fc.IDENTIFIER).pick(L,J)}}]),Q}(),Sh=Mi()(ws.prototype,"frameGraphSystem",[Cu,dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=Mi()(ws.prototype,"renderPassFactory",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=Mi()(ws.prototype,"configService",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Mi()(ws.prototype,"resourcePool",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=ws))||gl);function dc(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ol,Sl,wl,Ys,El,Xs,Ml,Al,Tl,wh=function(Q){Qo()(w,Q);var _=dc(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).parentID=void 0,Object.assign(Eo()(J),L),J}return w}(ra),Eh=(Ol=Object(_r.injectable)(),Sl=Object(_r.inject)(yr.HierarchyComponentManager),wl=Object(_r.inject)(yr.TransformComponentManager),Ys=Object(_r.inject)(yr.MeshComponentManager),Ol((Xs=function(){function Q(){xi()(this,Q),di()(this,"hierarchy",Ml,this),di()(this,"transform",Al,this),di()(this,"mesh",Tl,this)}var _;return Ri()(Q,[{key:"execute",value:(_=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return L.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var L=this;this.transform.forEach(function(J,It){It.isDirty()&&(L.setMeshAABBDirty(J),It.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var L=this;this.hierarchy.forEach(function(J,It){var Nt=L.transform.getComponentByEntity(J),K=L.transform.getComponentByEntity(It.parentID);Nt!==null&&K!==null&&Nt.updateTransformWithParent(K)})}},{key:"attach",value:function(L,J,It){if(this.hierarchy.contains(L)&&this.detach(L),this.hierarchy.create(L,{parentID:J}),this.setMeshAABBDirty(J),this.hierarchy.getCount()>1){for(var Nt=this.hierarchy.getCount()-1;Nt>0;--Nt)for(var K=this.hierarchy.getEntity(Nt),Pt=0;Pt<Nt;++Pt)if(this.hierarchy.getComponent(Pt).parentID===K){this.hierarchy.moveItem(Nt,Pt),++Nt;break}}this.hierarchy.getComponentByEntity(L);var Qt=this.transform.getComponentByEntity(J);Qt===null&&(Qt=this.transform.create(J));var qt=this.transform.getComponentByEntity(L);qt===null&&(qt=this.transform.create(L),Qt=this.transform.getComponentByEntity(J)),!It&&Qt&&(qt.matrixTransform(jn.b.invert(jn.b.create(),Qt.worldTransform)),qt.updateTransform()),Qt&&qt.updateTransformWithParent(Qt)}},{key:"detach",value:function(L){if(this.hierarchy.getComponentByEntity(L)!==null){var J=this.transform.getComponentByEntity(L);J!==null&&J.applyTransform(),this.hierarchy.removeKeepSorted(L),this.setMeshAABBDirty(L)}}},{key:"detachChildren",value:function(L){for(var J=0;J<this.hierarchy.getCount();){var It;if(((It=this.hierarchy.getComponent(J))===null||It===void 0?void 0:It.parentID)===L){var Nt=this.hierarchy.getEntity(J);this.detach(Nt)}else++J}}},{key:"setMeshAABBDirty",value:function(L){var J=this.mesh.getComponentByEntity(L);J&&(J.aabbDirty=!0)}}]),Q}(),Ml=Mi()(Xs.prototype,"hierarchy",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Mi()(Xs.prototype,"transform",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tl=Mi()(Xs.prototype,"mesh",[Ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=Xs))||El);function Mh(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vc=function(Q){Qo()(w,Q);var _=Mh(w);function w(L){var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Re,Xe,Je,Ge,qe;return xi()(this,w),(J=_.call(this,L)).dirtyFlag=void 0,J.localTranslation=jn.e.fromValues(0,0,0),J.localRotation=jn.c.fromValues(0,0,0,1),J.localScale=jn.e.fromValues(1,1,1),J.localTransform=jn.b.create(),J.worldTransform=jn.b.create(),J.getRotation=(It=jn.c.create(),function(){return jn.b.getRotation(It,J.worldTransform),It}),J.getScale=(Nt=jn.e.create(),function(){return jn.b.getScaling(Nt,J.worldTransform),Nt}),J.getPosition=(K=jn.e.create(),function(){return jn.b.getTranslation(K,J.worldTransform),K}),J.getLocalMatrix=(Pt=jn.b.create(),function(){return jn.b.fromRotationTranslationScale(Pt,J.localRotation,J.localTranslation,J.localScale),Pt}),J.matrixTransform=(Qt=jn.b.create(),function(yn){jn.b.multiply(Qt,J.getLocalMatrix(),yn),jn.b.getScaling(J.localScale,Qt),jn.b.getTranslation(J.localTranslation,Qt),jn.b.getRotation(J.localRotation,Qt)}),J.rotateRollPitchYaw=(qt=jn.c.create(),xe=jn.c.create(),Ie=jn.c.create(),function(yn,Pn,En){J.setDirty(),jn.c.fromEuler(qt,yn,0,0),jn.c.fromEuler(xe,0,Pn,0),jn.c.fromEuler(Ie,0,0,En),jn.c.multiply(J.localRotation,qt,J.localRotation),jn.c.multiply(J.localRotation,J.localRotation,xe),jn.c.multiply(J.localRotation,Ie,J.localRotation),jn.c.normalize(J.localRotation,J.localRotation)}),J.lerp=(Ye=jn.e.create(),Re=jn.c.create(),Xe=jn.e.create(),Je=jn.e.create(),Ge=jn.c.create(),qe=jn.e.create(),function(yn,Pn,En){J.setDirty(),jn.b.getScaling(Ye,yn.worldTransform),jn.b.getTranslation(Xe,yn.worldTransform),jn.b.getRotation(Re,yn.worldTransform),jn.b.getScaling(Je,Pn.worldTransform),jn.b.getTranslation(qe,Pn.worldTransform),jn.b.getRotation(Ge,Pn.worldTransform),jn.e.lerp(J.localScale,Ye,Je,En),jn.c.slerp(J.localRotation,Re,Ge,En),jn.e.lerp(J.localTranslation,Xe,qe,En)}),J}return Ri()(w,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var J=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];J?this.dirtyFlag|=w.DIRTY:this.dirtyFlag&=~w.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),jn.b.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(J){jn.b.multiply(this.worldTransform,this.getLocalMatrix(),J.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),jn.b.getScaling(this.localScale,this.worldTransform),jn.b.getTranslation(this.localTranslation,this.worldTransform),jn.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=jn.e.fromValues(0,0,0),this.localRotation=jn.c.fromValues(0,0,0,1),this.localScale=jn.e.fromValues(1,1,1)}},{key:"translate",value:function(J){return this.setDirty(),jn.e.add(this.localTranslation,this.localTranslation,J),this}},{key:"scale",value:function(J){return this.setDirty(),jn.e.multiply(this.localScale,this.localScale,J),this}},{key:"rotate",value:function(J){return this.setDirty(),jn.c.multiply(this.localRotation,this.localRotation,J),jn.c.normalize(this.localRotation,this.localRotation),this}}]),w}(ra);vc.DIRTY=1,e(143),e(144),e(229),e(145),e(146),e(113),e(147),e(50),e(148),e(230);var pc,Cl,jl,ju,Il,Pl=e(154),Ah=e(251),Th=e.n(Ah),Iu=(pc=Object(_r.injectable)(),Cl=Object(_r.inject)(yr.RenderEngine),pc((ju=function(){function Q(){xi()(this,Q),di()(this,"engine",Il,this),this.resourcePool={}}return Ri()(Q,[{key:"getOrCreateResource",value:function(w){if(!this.resourcePool[w.name]){var L=w.descriptor,J=L.width,It=L.height,Nt=L.usage;this.resourcePool[w.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:J,height:It,wrapS:Jn.CLAMP_TO_EDGE,wrapT:Jn.CLAMP_TO_EDGE,usage:Nt})})}return this.resourcePool[w.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Q}(),Il=Mi()(ju.prototype,"engine",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jl=ju))||jl);function Ch(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var gc,Dl,jh=function(Q){Qo()(w,Q);var _=Ch(w);function w(L){var J;return xi()(this,w),(J=_.call(this,L)).name=void 0,J.name=L.name||"",J}return w}(ra),kl=Object(_r.injectable)()(gc=function(){function Q(){xi()(this,Q),this.config=void 0}return Ri()(Q,[{key:"get",value:function(){return this.config}},{key:"set",value:function(w){this.config=w}}]),Q}())||gc,Ih=Object(_r.injectable)()(Dl=function(){function Q(){xi()(this,Q)}return Ri()(Q,[{key:"listen",value:function(w){}},{key:"on",value:function(w,L){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),Q}())||Dl,Ph=e(252),Rl=e.n(Ph),yc,Dh=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Nl(Q){var _={};return{content:Q=Q.replace(Dh,function(w,L,J){var It=J.split(":"),Nt=It[0].trim(),K="";switch(It.length>1&&(K=It[1].trim()),L){case"bool":K=K==="true";break;case"float":case"int":K=Number(K);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":K=K?K.replace("[","").replace("]","").split(",").reduce(function(Pt,Qt){return Pt.push(Number(Qt.trim())),Pt},[]):new Array(function(Pt){var Qt=0;switch(Pt){case"vec2":case"ivec2":Qt=2;break;case"vec3":case"ivec3":Qt=3;break;case"vec4":case"ivec4":case"mat2":Qt=4;break;case"mat3":Qt=9;break;case"mat4":Qt=16}return Qt}(L)).fill(0)}return _[Nt]=K,"uniform ".concat(L," ").concat(Nt,`;
`)}),uniforms:_}}function Pu(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Hs(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?Pu(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Pu(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Ll=/precision\s+(high|low|medium)p\s+float/,kh=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Rh=Object(_r.injectable)()(yc=function(){function Q(){xi()(this,Q),this.moduleCache={},this.rawContentCache={}}return Ri()(Q,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(w,L){if(!this.rawContentCache[w]){var J=L.vs,It=L.fs,Nt=L.uniforms,K=Nl(J),Pt=K.content,Qt=K.uniforms,qt=Nl(It),xe=qt.content,Ie=qt.uniforms;this.rawContentCache[w]={fs:xe,uniforms:Hs(Hs(Hs({},Qt),Ie),Nt),vs:Pt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(w){var L=this;if(this.moduleCache[w])return this.moduleCache[w];var J=this.rawContentCache[w].vs,It=this.rawContentCache[w].fs,Nt=this.processModule(J,[],"vs"),K=Nt.content,Pt=Nt.includeList,Qt=this.processModule(It,[],"fs"),qt=Qt.content,xe=Qt.includeList,Ie=qt,Ye=Rl()(Pt.concat(xe).concat(w)).reduce(function(Re,Xe){return Hs(Hs({},Re),L.rawContentCache[Xe].uniforms)},{});return Ll.test(qt)||(Ie=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+qt),this.moduleCache[w]={fs:Ie.trim(),uniforms:Ye,vs:K.trim()},this.moduleCache[w]}},{key:"processModule",value:function(w,L,J){var It=this;return{content:w.replace(kh,function(Nt,K){var Pt=K.split(" ")[0].replace(/"/g,"");if(L.indexOf(Pt)>-1)return"";var Qt=It.rawContentCache[Pt][J];return L.push(Pt),It.processModule(Qt,L,J).content}),includeList:L}}}]),Q}())||yc,ha=new _r.Container;Object(_r.decorate)(Object(_r.injectable)(),Pl.EventEmitter),ha.bind(yr.IEventEmitter).to(Pl.EventEmitter),Th()(ha,!1);function Nh(){var Q=new _r.Container;return Q.parent=ha,Q.bind(yr.Systems).to(Eh).inSingletonScope().whenTargetNamed(yr.SceneGraphSystem),Q.bind(yr.Systems).to(yu).inSingletonScope().whenTargetNamed(yr.FrameGraphSystem),Q.bind(yr.Systems).to(Eu).inSingletonScope().whenTargetNamed(yr.MeshSystem),Q.bind(yr.Systems).to(rc).inSingletonScope().whenTargetNamed(yr.GeometrySystem),Q.bind(yr.Systems).to(Rt).inSingletonScope().whenTargetNamed(yr.MaterialSystem),Q.bind(yr.Systems).to(hc).inSingletonScope().whenTargetNamed(yr.RendererSystem),Q.bind(yr.ResourcePool).to(Iu).inSingletonScope(),Q.bind(yr.ConfigService).to(kl).inSingletonScope(),Q.bind(yr.InteractorService).to(Ih).inSingletonScope(),Q.bind(yr.RenderPass).to(Ss).inSingletonScope().whenTargetNamed(Ss.IDENTIFIER),Q.bind(yr.RenderPass).to(Tu).inSingletonScope().whenTargetNamed(Tu.IDENTIFIER),Q.bind(yr.RenderPass).to(fc).inSingletonScope().whenTargetNamed(fc.IDENTIFIER),Q.bind(yr.RenderPassFactory).toFactory(function(_){return function(w){return _.container.getNamed(yr.RenderPass,w)}}),Q}ha.bind(yr.ShaderModuleService).to(Rh).inSingletonScope(),ha.bind(yr.NameComponentManager).toConstantValue(new ia(jh)),ha.bind(yr.HierarchyComponentManager).toConstantValue(new ia(wh)),ha.bind(yr.TransformComponentManager).toConstantValue(new ia(vc)),ha.bind(yr.MeshComponentManager).toConstantValue(new ia(st)),ha.bind(yr.CullableComponentManager).toConstantValue(new ia(u)),ha.bind(yr.GeometryComponentManager).toConstantValue(new ia(ys)),ha.bind(yr.MaterialComponentManager).toConstantValue(new ia(la));var Bl;e(231),e(149),function(Q){Q.PANSTART="PANSTART",Q.PANEND="PANEND",Q.PANMOVE="PANMOVE",Q.PINCH="PINCH",Q.KEYDOWN="KEYDOWN",Q.KEYUP="KEYUP",Q.HOVER="HOVER"}(Bl||(Bl={})),e(232);var Ua,Fl,za,Ks,$o=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(Q){Q.Void="Void",Q.Boolean="Boolean",Q.Float="Float",Q.Uint32="Uint32",Q.Int32="Int32",Q.Vector="Vector",Q.Vector2Float="vec2<f32>",Q.Vector3Float="vec3<f32>",Q.Vector4Float="vec4<f32>",Q.Vector2Boolean="vec2<bool>",Q.Vector3Boolean="vec3<bool>",Q.Vector4Boolean="vec4<bool>",Q.Vector2Uint="vec2<u32>",Q.Vector3Uint="vec3<u32>",Q.Vector4Uint="vec4<u32>",Q.Vector2Int="vec2<i32>",Q.Vector3Int="vec3<i32>",Q.Vector4Int="vec4<i32>",Q.Matrix="Matrix",Q.Matrix3x3Float="mat3x3<f32>",Q.Matrix4x4Float="mat4x4<i32>",Q.Struct="Struct",Q.FloatArray="Float[]",Q.Vector4FloatArray="vec4<f32>[]"})(Ua||(Ua={})),function(Q){Q.Program="Program",Q.Identifier="Identifier",Q.VariableDeclaration="VariableDeclaration",Q.BlockStatement="BlockStatement",Q.ReturnStatement="ReturnStatement",Q.FunctionDeclaration="FunctionDeclaration",Q.VariableDeclarator="VariableDeclarator",Q.AssignmentExpression="AssignmentExpression",Q.LogicalExpression="LogicalExpression",Q.BinaryExpression="BinaryExpression",Q.ArrayExpression="ArrayExpression",Q.UnaryExpression="UnaryExpression",Q.UpdateExpression="UpdateExpression",Q.FunctionExpression="FunctionExpression",Q.MemberExpression="MemberExpression",Q.ConditionalExpression="ConditionalExpression",Q.ExpressionStatement="ExpressionStatement",Q.CallExpression="CallExpression",Q.NumThreadStatement="NumThreadStatement",Q.StorageStatement="StorageStatement",Q.DoWhileStatement="DoWhileStatement",Q.WhileStatement="WhileStatement",Q.ForStatement="ForStatement",Q.BreakStatement="BreakStatement",Q.ContinueStatement="ContinueStatement",Q.IfStatement="IfStatement",Q.ImportedFunctionStatement="ImportedFunctionStatement"}(Fl||(Fl={})),function(Q){Q.Input="Input",Q.Output="Output",Q.Uniform="Uniform",Q.Workgroup="Workgroup",Q.UniformConstant="UniformConstant",Q.Image="Image",Q.StorageBuffer="StorageBuffer",Q.Private="Private",Q.Function="Function"}(za||(za={})),function(Q){Q.GLSL100="GLSL100",Q.GLSL450="GLSL450",Q.WGSL="WGSL"}(Ks||(Ks={}));function ja(Q){return Q===void 0?0:Q>360||Q<-360?Q%360:Q}function Va(Q,_,w){return Or()(Q)?jn.e.fromValues(Q,_,w):Q.length===3?jn.e.clone(Q):jn.e.fromValues(Q[0],Q[1],Q[2])}var Js,mc,bc,xc,Gl,So,Du,Wa,_l=function(){function Q(_,w){xi()(this,Q),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=_,this.matrix=jn.b.clone(w.matrix),this.right=jn.e.clone(w.right),this.up=jn.e.clone(w.up),this.forward=jn.e.clone(w.forward),this.position=jn.e.clone(w.position),this.focalPoint=jn.e.clone(w.focalPoint),this.distanceVector=jn.e.clone(w.distanceVector),this.azimuth=w.azimuth,this.elevation=w.elevation,this.roll=w.roll,this.relAzimuth=w.relAzimuth,this.relElevation=w.relElevation,this.relRoll=w.relRoll,this.dollyingStep=w.dollyingStep,this.distance=w.distance}return Ri()(Q,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(w){w.matrix=jn.b.copy(w.matrix,this.matrix),w.right=jn.e.copy(w.right,this.right),w.up=jn.e.copy(w.up,this.up),w.forward=jn.e.copy(w.forward,this.forward),w.position=jn.e.copy(w.position,this.position),w.focalPoint=jn.e.copy(w.focalPoint,this.focalPoint),w.distanceVector=jn.e.copy(w.distanceVector,this.distanceVector),w.azimuth=this.azimuth,w.elevation=this.elevation,w.roll=this.roll,w.relAzimuth=this.relAzimuth,w.relElevation=this.relElevation,w.relRoll=this.relRoll,w.dollyingStep=this.dollyingStep,w.distance=this.distance}}]),Q}();(function(Q){Q.ORBITING="ORBITING",Q.EXPLORING="EXPLORING",Q.TRACKING="TRACKING"})(So||(So={})),function(Q){Q.DEFAULT="DEFAULT",Q.ROTATIONAL="ROTATIONAL",Q.TRANSLATIONAL="TRANSLATIONAL",Q.CINEMATIC="CINEMATIC"}(Du||(Du={})),function(Q){Q.ORTHOGRAPHIC="ORTHOGRAPHIC",Q.PERSPECTIVE="PERSPECTIVE"}(Wa||(Wa={}));var Ul,zl,Vl,Wl,ku,Yl,Xl,Ia=Math.PI/180,is=180/Math.PI,Hl=(Js=Object(_r.injectable)(),mc=Object(_r.inject)(yr.InteractorService),Js((xc=function(){function Q(){xi()(this,Q),this.matrix=jn.b.create(),this.right=jn.e.fromValues(1,0,0),this.up=jn.e.fromValues(0,1,0),this.forward=jn.e.fromValues(0,0,1),this.position=jn.e.fromValues(0,0,1),this.focalPoint=jn.e.fromValues(0,0,0),this.distanceVector=jn.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,di()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=jn.b.create(),this.view=void 0,this.following=void 0,this.type=So.EXPLORING,this.trackingMode=Du.DEFAULT,this.projectionMode=Wa.PERSPECTIVE,this.frustum=new sr,this.landmarks=[],this.landmarkAnimationID=void 0}return Ri()(Q,[{key:"clone",value:function(){var w=new Q;return w.setType(this.type,void 0),w.interactor=this.interactor,w}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(w,L){return this.type=w,this.type===So.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===So.TRACKING&&L!==void 0&&this.setTrackingMode(L),this}},{key:"setProjectionMode",value:function(w){return this.projectionMode=w,this}},{key:"setTrackingMode",value:function(w){if(this.type!==So.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=w,this}},{key:"setWorldRotation",value:function(w){this.rotateWorld=w,this._getAngles()}},{key:"getViewTransform",value:function(){return jn.b.invert(jn.b.create(),this.matrix)}},{key:"setMatrix",value:function(w){return this.matrix=w,this._update(),this}},{key:"setAspect",value:function(w){return this.setPerspective(this.near,this.far,this.fov,w),this}},{key:"setViewOffset",value:function(w,L,J,It,Nt,K){return this.aspect=w/L,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=w,this.view.fullHeight=L,this.view.offsetX=J,this.view.offsetY=It,this.view.width=Nt,this.view.height=K,this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(w,L,J,It){return this.projectionMode=Wa.PERSPECTIVE,this.fov=J,this.near=w,this.far=L,this.aspect=It,jn.b.perspective(this.perspective,this.fov*Ia,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(w,L,J,It,Nt,K){this.projectionMode=Wa.ORTHOGRAPHIC,this.rright=L,this.left=w,this.top=J,this.bottom=It,this.near=Nt,this.far=K;var Pt=(this.rright-this.left)/(2*this.zoom),Qt=(this.top-this.bottom)/(2*this.zoom),qt=(this.rright+this.left)/2,xe=(this.top+this.bottom)/2,Ie=qt-Pt,Ye=qt+Pt,Re=xe+Qt,Xe=xe-Qt;if(this.view!==void 0&&this.view.enabled){var Je=(this.rright-this.left)/this.view.fullWidth/this.zoom,Ge=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ye=(Ie+=Je*this.view.offsetX)+Je*this.view.width,Xe=(Re-=Ge*this.view.offsetY)-Ge*this.view.height}return jn.b.ortho(this.perspective,Ie,Ye,Re,Xe,Nt,K),this}},{key:"setPosition",value:function(w,L,J){return this._setPosition(w,L,J),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(w,L,J){var It=jn.e.fromValues(0,1,0);if(this.focalPoint=Va(w,L,J),this.trackingMode===Du.CINEMATIC){var Nt=jn.e.subtract(jn.e.create(),this.focalPoint,this.position);w=Nt[0],L=Nt[1],J=Nt[2];var K=jn.e.length(Nt),Pt=Math.asin(L/K)*is,Qt=90+Math.atan2(J,w)*is,qt=jn.b.create();jn.b.rotateY(qt,qt,Qt*Ia),jn.b.rotateX(qt,qt,Pt*Ia),It=jn.e.transformMat4(jn.e.create(),[0,1,0],qt)}return jn.b.invert(this.matrix,jn.b.lookAt(jn.b.create(),this.position,this.focalPoint,It)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(w){if(!(this.distance===w||w<0)){this.distance=w,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var L=jn.e.create();w=this.distance;var J=this.forward,It=this.focalPoint;return L[0]=w*J[0]+It[0],L[1]=w*J[1]+It[1],L[2]=w*J[2]+It[2],this._setPosition(L),this}}},{key:"changeAzimuth",value:function(w){return this.setAzimuth(this.azimuth+w),this}},{key:"changeElevation",value:function(w){return this.setElevation(this.elevation+w),this}},{key:"changeRoll",value:function(w){return this.setRoll(this.roll+w),this}},{key:"setAzimuth",value:function(w){return this.azimuth=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(w){return this.elevation=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(w){return this.roll=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(w,L,J){if(this.type===So.EXPLORING){w=ja(w),L=ja(L),J=ja(J);var It=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*L*Ia),Nt=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*w*Ia),K=jn.c.setAxisAngle(jn.c.create(),[0,0,1],J*Ia),Pt=jn.c.multiply(jn.c.create(),Nt,It);Pt=jn.c.multiply(jn.c.create(),Pt,K);var Qt=jn.b.fromQuat(jn.b.create(),Pt);jn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),jn.b.multiply(this.matrix,this.matrix,Qt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+L)>90)return;this.relElevation=ja(L),this.relAzimuth=ja(w),this.relRoll=ja(J),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(w,L){var J=Va(w,L,0),It=jn.e.clone(this.position);return jn.e.add(It,It,jn.e.scale(jn.e.create(),this.right,J[0])),jn.e.add(It,It,jn.e.scale(jn.e.create(),this.up,J[1])),this._setPosition(It),this}},{key:"dolly",value:function(w){var L=this.forward,J=jn.e.clone(this.position),It=w*this.dollyingStep;return J[0]+=It*L[0],J[1]+=It*L[1],J[2]+=It*L[2],this._setPosition(J),this.type===So.ORBITING||this.type===So.EXPLORING?this._getDistance():this.type===So.TRACKING&&jn.e.add(this.focalPoint,J,this.distanceVector),this}},{key:"createLandmark",value:function(w,L){var J=this.clone();J.setPosition(L.position),J.setFocalPoint(L.focalPoint),L.roll!==void 0&&J.setRoll(L.roll);var It=new _l(w,J);return this.landmarks.push(It),It}},{key:"setLandmark",value:function(w){var L=new _l(w,this);return this.landmarks.push(L),this}},{key:"gotoLandmark",value:function(w){var L=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,It=this.landmarks.find(function(xe){return xe.name===w});if(It){if(J===0)return void It.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Nt,K=It.getPosition(),Pt=It.getFocalPoint(),Qt=It.getRoll(),qt=function xe(Ie){Nt===void 0&&(Nt=Ie);var Ye,Re=Ie-Nt,Xe=(1-Math.cos(Re/J*Math.PI))/2,Je=jn.e.create(),Ge=jn.e.create();if(jn.e.lerp(Je,L.focalPoint,Pt,Xe),jn.e.lerp(Ge,L.position,K,Xe),Ye=L.roll*(1-Xe)+Qt*Xe,L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),!(jn.e.dist(Je,Pt)+jn.e.dist(Ge,K)>.01))return L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),void L.interactor.connect();Re<J&&(L.landmarkAnimationID=window.requestAnimationFrame(xe))};window.requestAnimationFrame(qt)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var w,L,J=jn.c.setAxisAngle(jn.c.create(),[0,0,1],this.roll*Ia);jn.b.identity(this.matrix),w=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.elevation*Ia),L=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.azimuth*Ia);var It=jn.c.multiply(jn.c.create(),L,w);It=jn.c.multiply(jn.c.create(),It,J);var Nt=jn.b.fromQuat(jn.b.create(),It);this.type===So.ORBITING||this.type===So.EXPLORING?(jn.b.translate(this.matrix,this.matrix,this.focalPoint),jn.b.multiply(this.matrix,this.matrix,Nt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===So.TRACKING&&(jn.b.translate(this.matrix,this.matrix,this.position),jn.b.multiply(this.matrix,this.matrix,Nt))}},{key:"_setPosition",value:function(w,L,J){this.position=Va(w,L,J);var It=this.matrix;It[12]=this.position[0],It[13]=this.position[1],It[14]=this.position[2],It[15]=1}},{key:"_getAxes",value:function(){jn.e.copy(this.right,Va(jn.f.transformMat4(jn.f.create(),[1,0,0,0],this.matrix))),jn.e.copy(this.up,Va(jn.f.transformMat4(jn.f.create(),[0,1,0,0],this.matrix))),jn.e.copy(this.forward,Va(jn.f.transformMat4(jn.f.create(),[0,0,1,0],this.matrix))),jn.e.normalize(this.right,this.right),jn.e.normalize(this.up,this.up),jn.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var w=this.distanceVector[0],L=this.distanceVector[1],J=this.distanceVector[2],It=jn.e.length(this.distanceVector);if(It===0)return this.elevation=0,void(this.azimuth=0);this.type===So.TRACKING||this.rotateWorld?(this.elevation=Math.asin(L/It)*is,this.azimuth=Math.atan2(-w,-J)*is):(this.elevation=-Math.asin(L/It)*is,this.azimuth=-Math.atan2(-w,-J)*is)}},{key:"_getPosition",value:function(){jn.e.copy(this.position,Va(jn.f.transformMat4(jn.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){jn.e.transformMat3(this.distanceVector,[0,0,-this.distance],jn.a.fromMat4(jn.a.create(),this.matrix)),jn.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=jn.e.subtract(jn.e.create(),this.focalPoint,this.position),this.distance=jn.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),Q}(),Gl=Mi()(xc.prototype,"interactor",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=xc))||bc),Kl=e(44),Ru=e.n(Kl),Lh=e(26),Jl=e.n(Lh),Wr=e(7);function Oc(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ql(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Nu(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?Ql(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Ql(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Zl,Qs,$l,ql,tf,ef,nf,Ya,rf,of,af,sf,Lu,uf,Pa,Es,xa,qo,Zs,Xa,os,Bu,Oa,Ko,Bo,Sa,wa,Fu,cf=(Ul=Object(_r.injectable)(),zl=Object(_r.inject)(yr.RenderEngine),Vl=Object(_r.inject)(yr.ConfigService),Ul((ku=function(){function Q(){xi()(this,Q),di()(this,"engine",Yl,this),di()(this,"configService",Xl,this),this.entity=na(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var _,w,L;return Ri()(Q,[{key:"init",value:function(){var It=this.configService.get(),Nt=It.canvas,K=It.engineOptions;this.initPromise=this.engine.init(Nu({canvas:Nt||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},K))}},{key:"setBundle",value:function(It){this.compiledBundle=JSON.parse(JSON.stringify(It))}},{key:"setDispatch",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=It),this}},{key:"setMaxIteration",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=It),this}},{key:"setBinding",value:function(It,Nt){var K=this;if(typeof It=="string"){var Pt=Or()(Nt)||Ru()(Nt)||Jl()(Nt);if(this.compiledBundle&&this.compiledBundle.context){var Qt=this.compiledBundle.context.defines.find(function(xe){return xe.name===It});if(Qt)return Qt.value=Nt,this;var qt=this.compiledBundle.context.uniforms.find(function(xe){return xe.name===It});qt&&(Pt?(qt.data=Nt,qt.isReferer=!1,qt.storageClass===za.Uniform?this.model&&this.model.updateUniform(It,Nt):this.model&&this.model.updateBuffer(It,Nt)):(qt.isReferer=!0,qt.data=Nt))}}else Object.keys(It).forEach(function(xe){K.setBinding(xe,It[xe])});return this}},{key:"execute",value:(L=eo()(ui.a.mark(function J(){var It,Nt,K=this,Pt=arguments;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(It=Pt.length>0&&Pt[0]!==void 0?Pt[0]:1,!this.dirty){Qt.next=6;break}return this.compiledBundle.context&&(It>1?this.compiledBundle.context.maxIteration=It:this.compiledBundle.context.maxIteration++),Qt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(qt){return qt.isReferer}).forEach(function(qt){var xe=qt.data,Ie=qt.name;K.model.confirmInput(xe.model,Ie)}),Nt=0;Nt<It;Nt++)this.model.run();return this.engine.endFrame(),Qt.abrupt("return",this);case 12:case"end":return Qt.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"getOutput",value:(w=eo()(ui.a.mark(function J(){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.abrupt("return",this.model.readData());case 1:case"end":return It.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"compile",value:(_=eo()(ui.a.mark(function J(){var It,Nt,K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.initPromise;case 2:return It=Nu({},this.compiledBundle.context),Nt=this.engine.supportWebGPU?this.engine.useWGSL?Ks.WGSL:Ks.GLSL450:Ks.GLSL100,K=this.compiledBundle.shaders[Nt],It.defines.filter(function(Qt){return Qt.runtime}).forEach(function(Qt){var qt="".concat("__DefineValuePlaceholder__").concat(Qt.name);K=K.replace(qt,"".concat(Qt.value))}),It.shader=K,It.uniforms.forEach(function(Qt){if(!Qt.data&&Qt.storageClass===za.StorageBuffer){var qt=1;Qt.type===Ua.FloatArray?qt=1:Qt.type===Ua.Vector4FloatArray&&(qt=4),Qt.data=new Float32Array(It.output.length*qt).fill(0)}}),this.compiledBundle.context=It,Pt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Pt.sent;case 12:case"end":return Pt.stop()}},J,this)})),function(){return _.apply(this,arguments)})}]),Q}(),Yl=Mi()(ku.prototype,"engine",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl=Mi()(ku.prototype,"configService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=ku))||Wl),Ha=(Zl=Object(_r.injectable)(),Qs=Object(_r.inject)(yr.MeshComponentManager),$l=Object(_r.inject)(yr.CullableComponentManager),ql=Object(_r.inject)(yr.TransformComponentManager),tf=Object(_r.inject)(yr.Systems),ef=Object(_r.named)(yr.SceneGraphSystem),Zl((uf=Lu=function(){function Q(){xi()(this,Q),this.attributes={},this.config=void 0,di()(this,"mesh",rf,this),di()(this,"cullable",of,this),di()(this,"transform",af,this),di()(this,"sceneGraphSystem",sf,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Ri()(Q,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(w){this.config=w}},{key:"setEntity",value:function(w){this.entity=w,this.cullable.create(w),this.meshComponent=this.mesh.create(w),this.transformComponent=this.transform.create(w),this.onEntityCreated()}},{key:"setMaterial",value:function(w){return this.meshComponent.material=w,this}},{key:"setGeometry",value:function(w){return this.meshComponent.geometry=w,this}},{key:"setAttributes",value:function(w){var L=this;Object.keys(w).forEach(function(J){w[J]!==void 0&&w[J]!==L.attributes[J]&&(L.onAttributeChanged({name:J,data:w[J]}),L.attributes[J]=w[J])})}},{key:"setVisible",value:function(w){return this.meshComponent.visible=w,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(w){return this.sceneGraphSystem.attach(this.entity,w.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(w){var L=w.name,J=w.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(L),J)}},{key:"convertAttributeName2UniformName",value:function(w){return w}}]),Q}(),Lu.POINT="point",Lu.LINE="line",Lu.GRID="grid",Ya=uf,rf=Mi()(Ya.prototype,"mesh",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Mi()(Ya.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Mi()(Ya.prototype,"transform",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf=Mi()(Ya.prototype,"sceneGraphSystem",[tf,ef],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=Ya))||nf),Bh=e(253),Fh=e.n(Bh),Gh=function(){function Q(_,w){xi()(this,Q),this.attribute=void 0,this.buffer=void 0;var L=w.buffer,J=w.offset,It=w.stride,Nt=w.normalized,K=w.size,Pt=w.divisor;this.buffer=L,this.attribute={buffer:L.get(),offset:J||0,stride:It||0,normalized:Nt||!1,divisor:Pt||0},K&&(this.attribute.size=K)}return Ri()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),_h=(Pa={},mr()(Pa,Jn.POINTS,"points"),mr()(Pa,Jn.LINES,"lines"),mr()(Pa,Jn.LINE_LOOP,"line loop"),mr()(Pa,Jn.LINE_STRIP,"line strip"),mr()(Pa,Jn.TRIANGLES,"triangles"),mr()(Pa,Jn.TRIANGLE_FAN,"triangle fan"),mr()(Pa,Jn.TRIANGLE_STRIP,"triangle strip"),Pa),lf=(Es={},mr()(Es,Jn.STATIC_DRAW,"static"),mr()(Es,Jn.DYNAMIC_DRAW,"dynamic"),mr()(Es,Jn.STREAM_DRAW,"stream"),Es),Sc=(xa={},mr()(xa,Jn.BYTE,"int8"),mr()(xa,Jn.UNSIGNED_INT,"int16"),mr()(xa,Jn.INT,"int32"),mr()(xa,Jn.UNSIGNED_BYTE,"uint8"),mr()(xa,Jn.UNSIGNED_SHORT,"uint16"),mr()(xa,Jn.UNSIGNED_INT,"uint32"),mr()(xa,Jn.FLOAT,"float"),xa),Uh=(qo={},mr()(qo,Jn.ALPHA,"alpha"),mr()(qo,Jn.LUMINANCE,"luminance"),mr()(qo,Jn.LUMINANCE_ALPHA,"luminance alpha"),mr()(qo,Jn.RGB,"rgb"),mr()(qo,Jn.RGBA,"rgba"),mr()(qo,Jn.RGBA4,"rgba4"),mr()(qo,Jn.RGB5_A1,"rgb5 a1"),mr()(qo,Jn.RGB565,"rgb565"),mr()(qo,Jn.DEPTH_COMPONENT,"depth"),mr()(qo,Jn.DEPTH_STENCIL,"depth stencil"),qo),ff=(Zs={},mr()(Zs,Jn.DONT_CARE,"dont care"),mr()(Zs,Jn.NICEST,"nice"),mr()(Zs,Jn.FASTEST,"fast"),Zs),hf=(Xa={},mr()(Xa,Jn.NEAREST,"nearest"),mr()(Xa,Jn.LINEAR,"linear"),mr()(Xa,Jn.LINEAR_MIPMAP_LINEAR,"mipmap"),mr()(Xa,Jn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),mr()(Xa,Jn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),mr()(Xa,Jn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Xa),$s=(os={},mr()(os,Jn.REPEAT,"repeat"),mr()(os,Jn.CLAMP_TO_EDGE,"clamp"),mr()(os,Jn.MIRRORED_REPEAT,"mirror"),os),Gu=(Bu={},mr()(Bu,Jn.NONE,"none"),mr()(Bu,Jn.BROWSER_DEFAULT_WEBGL,"browser"),Bu),zh=(Oa={},mr()(Oa,Jn.NEVER,"never"),mr()(Oa,Jn.ALWAYS,"always"),mr()(Oa,Jn.LESS,"less"),mr()(Oa,Jn.LEQUAL,"lequal"),mr()(Oa,Jn.GREATER,"greater"),mr()(Oa,Jn.GEQUAL,"gequal"),mr()(Oa,Jn.EQUAL,"equal"),mr()(Oa,Jn.NOTEQUAL,"notequal"),Oa),df=(Ko={},mr()(Ko,Jn.FUNC_ADD,"add"),mr()(Ko,Jn.MIN_EXT,"min"),mr()(Ko,Jn.MAX_EXT,"max"),mr()(Ko,Jn.FUNC_SUBTRACT,"subtract"),mr()(Ko,Jn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ko),qs=(Bo={},mr()(Bo,Jn.ZERO,"zero"),mr()(Bo,Jn.ONE,"one"),mr()(Bo,Jn.SRC_COLOR,"src color"),mr()(Bo,Jn.ONE_MINUS_SRC_COLOR,"one minus src color"),mr()(Bo,Jn.SRC_ALPHA,"src alpha"),mr()(Bo,Jn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),mr()(Bo,Jn.DST_COLOR,"dst color"),mr()(Bo,Jn.ONE_MINUS_DST_COLOR,"one minus dst color"),mr()(Bo,Jn.DST_ALPHA,"dst alpha"),mr()(Bo,Jn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),mr()(Bo,Jn.CONSTANT_COLOR,"constant color"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),mr()(Bo,Jn.CONSTANT_ALPHA,"constant alpha"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),mr()(Bo,Jn.SRC_ALPHA_SATURATE,"src alpha saturate"),Bo),_u=(Sa={},mr()(Sa,Jn.NEVER,"never"),mr()(Sa,Jn.ALWAYS,"always"),mr()(Sa,Jn.LESS,"less"),mr()(Sa,Jn.LEQUAL,"lequal"),mr()(Sa,Jn.GREATER,"greater"),mr()(Sa,Jn.GEQUAL,"gequal"),mr()(Sa,Jn.EQUAL,"equal"),mr()(Sa,Jn.NOTEQUAL,"notequal"),Sa),Ka=(wa={},mr()(wa,Jn.ZERO,"zero"),mr()(wa,Jn.KEEP,"keep"),mr()(wa,Jn.REPLACE,"replace"),mr()(wa,Jn.INVERT,"invert"),mr()(wa,Jn.INCR,"increment"),mr()(wa,Jn.DECR,"decrement"),mr()(wa,Jn.INCR_WRAP,"increment wrap"),mr()(wa,Jn.DECR_WRAP,"decrement wrap"),wa),vf=(Fu={},mr()(Fu,Jn.FRONT,"front"),mr()(Fu,Jn.BACK,"back"),Fu),Ja=function(){function Q(_,w){xi()(this,Q),this.buffer=void 0;var L=w.data,J=w.usage,It=w.type;this.buffer=_.buffer({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE]})}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.buffer.subdata(L,J)}}]),Q}(),pf=e(23),No=e.n(pf);function gf(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Da(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?gf(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):gf(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var yf=0,mf=function(){function Q(w,L){var J=this;xi()(this,Q),this.reGl=w,this.context=L,this.entity=na(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var It={};this.context.uniforms.forEach(function(qt){var xe=qt.name,Ie=qt.type,Ye=qt.data,Re=qt.isReferer,Xe=qt.storageClass;if(Xe===za.StorageBuffer){if(Re)J.textureCache[xe]={data:void 0},It["".concat(xe,"Size")]=function(){return Ye.compiledBundle.context.output.textureSize};else{J.textureCache[xe]=J.calcDataTexture(xe,Ie,Ye);var Je=J.textureCache[xe],Ge=Je.textureWidth,qe=Je.isOutput;It["".concat(xe,"Size")]=[Ge,Ge],qe&&(J.outputTextureName=xe,J.context.needPingpong&&(J.outputTextureName="".concat(xe,"Output"),J.textureCache[J.outputTextureName]=J.calcDataTexture(xe,Ie,Ye)))}It[xe]=function(){return J.textureCache[xe].texture}}else if(Xe===za.Uniform){if(Ye&&(Array.isArray(Ye)||Ru()(Ye))&&Ye.length>16)throw new Error("invalid data type ".concat(Ie));It[xe]=function(){return qt.data}}});var Nt=this.getOuputDataTexture(),K=Nt.textureWidth,Pt=Nt.texelCount;It.u_OutputTextureSize=[K,K],It.u_OutputTexelCount=Pt,this.context.output.textureSize=[K,K];var Qt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:It,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Qt)}var _;return Ri()(Q,[{key:"run",value:function(){var L=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){L.computeCommand()})}},{key:"readData",value:(_=eo()(ui.a.mark(function w(){var L,J,It,Nt,K,Pt,Qt,qt,xe=this;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){L=xe.reGl.read()}),!L){Ie.next=6;break}if(J=this.getOuputDataTexture(),It=J.originalDataLength,Nt=J.elementsPerTexel,K=J.typedArrayConstructor,Pt=K===void 0?Float32Array:K,Qt=[],Nt!==4)for(qt=0;qt<L.length;qt+=4)Nt===1?Qt.push(L[qt]):Nt===2?Qt.push(L[qt],L[qt+1]):Qt.push(L[qt],L[qt+1],L[qt+2]);else Qt=L;return Ie.abrupt("return",new Pt(Qt.slice(0,It)));case 6:return Ie.abrupt("return",new Float32Array);case 7:case"end":return Ie.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"confirmInput",value:function(L,J){var It;this.entity===L.entity?(this.dynamicPingpong=!0,It=this):It=L,this.textureCache[J].id=It.getOuputDataTexture().id,this.textureCache[J].texture=It.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(L,J){var It=this.context.uniforms.find(function(Qt){return Qt.name===L});if(It){var Nt=this.calcDataTexture(L,It.type,J),K=Nt.texture,Pt=Nt.data;this.textureCache[L].data=Pt,this.textureCache[L].texture=K}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var L=this.context.output.name;this.textureCache[L].id=this.getOuputDataTexture().id,this.textureCache[L].texture=this.getOuputDataTexture().texture}var J=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=J}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var L=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=L}},{key:"cloneDataTexture",value:function(L){var J=L.data,It=L.textureWidth;return Da(Da({},L),{},{id:yf++,texture:this.reGl.texture({width:It,height:It,data:J,type:"float"})})}},{key:"calcDataTexture",value:function(L,J,It){var Nt=1;J===Ua.Vector4FloatArray&&(Nt=4);for(var K=[],Pt=0;Pt<It.length;Pt+=Nt)Nt===1?K.push(It[Pt],0,0,0):Nt===2?K.push(It[Pt],It[Pt+1],0,0):Nt===3?K.push(It[Pt],It[Pt+1],It[Pt+2],0):Nt===4&&K.push(It[Pt],It[Pt+1],It[Pt+2],It[Pt+3]);var Qt=It.length,qt=Math.ceil(Qt/Nt),xe=Math.ceil(Math.sqrt(qt)),Ie=xe*xe;qt<Ie&&K.push.apply(K,No()(new Array(4*(Ie-qt)).fill(0)));var Ye=this.reGl.texture({width:xe,height:xe,data:K,type:"float"});return{id:yf++,data:K,originalDataLength:Qt,typedArrayConstructor:Ru()(It)?It.constructor:void 0,textureWidth:xe,texture:Ye,texelCount:qt,elementsPerTexel:Nt,isOutput:L===this.context.output.name}}}]),Q}(),bf=function(){function Q(_,w){xi()(this,Q),this.elements=void 0;var L=w.data,J=w.usage,It=w.type,Nt=w.count;this.elements=_.elements({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE],count:Nt})}return Ri()(Q,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(w){var L=w.data;this.elements.subdata(L)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Q}(),Vh=function(){function Q(_,w){xi()(this,Q),this.framebuffer=void 0;var L=w.width,J=w.height,It=w.color,Nt=w.colors,K=(w.depth,w.stencil,{width:L,height:J});Array.isArray(Nt)&&(K.colors=Nt.map(function(Pt){return Pt.get()})),It&&typeof It!="boolean"&&(K.color=It.get()),this.framebuffer=_.framebuffer(K)}return Ri()(Q,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.framebuffer.resize(L,J)}}]),Q}(),Wh=e(90),Yh=e.n(Wh),xf=e(151),Uu=e.n(xf);function tu(Q){var _={};return Object.keys(Q).forEach(function(w){(function L(J,It,Nt,K){if(It===null||typeof It=="number"||typeof It=="boolean"||Array.isArray(It)&&typeof It[0]=="number"||Ru()(It)||It===""||"resize"in It)return void(Nt["".concat(K&&K+".").concat(J)]=It);Uu()(It)&&Object.keys(It).forEach(function(Pt){L(Pt,It[Pt],Nt,"".concat(K&&K+".").concat(J))}),Array.isArray(It)&&It.forEach(function(Pt,Qt){Object.keys(Pt).forEach(function(qt){L(qt,Pt[qt],Nt,"".concat(K&&K+".").concat(J,"[").concat(Qt,"]"))})})})(w,Q[w],_,"")}),_}function Of(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ms(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?Of(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Of(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Sf,as,wf=function(){function Q(_,w){xi()(this,Q),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=_;var L=w.vs,J=w.fs,It=w.attributes,Nt=w.uniforms,K=w.primitive,Pt=w.count,Qt=w.elements,qt=w.depth,xe=w.blend,Ie=w.stencil,Ye=w.cull,Re=w.instances,Xe=w.scissor,Je=w.viewport,Ge={};Nt&&(this.uniforms=tu(Nt),Object.keys(Nt).forEach(function(Pn){Ge[Pn]=_.prop(Pn)}));var qe={};Object.keys(It).forEach(function(Pn){qe[Pn]=It[Pn].get()});var yn={attributes:qe,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(J),uniforms:Ge,vert:L,primitive:_h[K===void 0?Jn.TRIANGLES:K]};Re&&(yn.instances=Re),Pt&&(yn.count=Pt),Qt&&(yn.elements=Qt.get()),Xe&&(yn.scissor=Xe),Je&&(yn.viewport=Je),this.initDepthDrawParams({depth:qt},yn),this.initBlendDrawParams({blend:xe},yn),this.initStencilDrawParams({stencil:Ie},yn),this.initCullDrawParams({cull:Ye},yn),this.drawCommand=_(yn)}return Ri()(Q,[{key:"addUniforms",value:function(w){this.uniforms=Ms(Ms({},this.uniforms),tu(w))}},{key:"draw",value:function(w){var L=Ms(Ms({},this.uniforms),tu(w.uniforms||{})),J={};Object.keys(L).forEach(function(It){var Nt=Yh()(L[It]);Nt==="boolean"||Nt==="number"||Array.isArray(L[It])||L[It].BYTES_PER_ELEMENT?J[It]=L[It]:J[It]=L[It].get()}),this.drawCommand(J)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(w,L){var J=w.depth;J&&(L.depth={enable:J.enable===void 0||!!J.enable,mask:J.mask===void 0||!!J.mask,func:zh[J.func||Jn.LESS],range:J.range||[0,1]})}},{key:"initBlendDrawParams",value:function(w,L){var J=w.blend;if(J){var It=J.enable,Nt=J.func,K=J.equation,Pt=J.color,Qt=Pt===void 0?[0,0,0,0]:Pt;L.blend={enable:!!It,func:{srcRGB:qs[Nt&&Nt.srcRGB||Jn.SRC_ALPHA],srcAlpha:qs[Nt&&Nt.srcAlpha||Jn.SRC_ALPHA],dstRGB:qs[Nt&&Nt.dstRGB||Jn.ONE_MINUS_SRC_ALPHA],dstAlpha:qs[Nt&&Nt.dstAlpha||Jn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:df[K&&K.rgb||Jn.FUNC_ADD],alpha:df[K&&K.alpha||Jn.FUNC_ADD]},color:Qt}}}},{key:"initStencilDrawParams",value:function(w,L){var J=w.stencil;if(J){var It=J.enable,Nt=J.mask,K=Nt===void 0?-1:Nt,Pt=J.func,Qt=Pt===void 0?{cmp:Jn.ALWAYS,ref:0,mask:-1}:Pt,qt=J.opFront,xe=qt===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:qt,Ie=J.opBack,Ye=Ie===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:Ie;L.stencil={enable:!!It,mask:K,func:Ms(Ms({},Qt),{},{cmp:_u[Qt.cmp]}),opFront:{fail:Ka[xe.fail],zfail:Ka[xe.zfail],zpass:Ka[xe.zpass]},opBack:{fail:Ka[Ye.fail],zfail:Ka[Ye.zfail],zpass:Ka[Ye.zpass]}}}}},{key:"initCullDrawParams",value:function(w,L){var J=w.cull;if(J){var It=J.enable,Nt=J.face,K=Nt===void 0?Jn.BACK:Nt;L.cull={enable:!!It,face:vf[K]}}}}]),Q}(),Xh=function(){function Q(_,w){xi()(this,Q),this.texture=void 0,this.width=void 0,this.height=void 0;var L=w.data,J=w.type,It=J===void 0?Jn.UNSIGNED_BYTE:J,Nt=w.width,K=w.height,Pt=w.flipY,Qt=Pt!==void 0&&Pt,qt=w.format,xe=qt===void 0?Jn.RGBA:qt,Ie=w.mipmap,Ye=Ie!==void 0&&Ie,Re=w.wrapS,Xe=Re===void 0?Jn.CLAMP_TO_EDGE:Re,Je=w.wrapT,Ge=Je===void 0?Jn.CLAMP_TO_EDGE:Je,qe=w.aniso,yn=qe===void 0?0:qe,Pn=w.alignment,En=Pn===void 0?1:Pn,Ln=w.premultiplyAlpha,Zn=Ln!==void 0&&Ln,Qn=w.mag,qn=Qn===void 0?Jn.NEAREST:Qn,fr=w.min,br=fr===void 0?Jn.NEAREST:fr,gr=w.colorSpace,hr=gr===void 0?Jn.BROWSER_DEFAULT_WEBGL:gr;this.width=Nt,this.height=K;var Tr={width:Nt,height:K,type:Sc[It],format:Uh[xe],wrapS:$s[Xe],wrapT:$s[Ge],mag:hf[qn],min:hf[br],alignment:En,flipY:Qt,colorSpace:Gu[hr],premultiplyAlpha:Zn,aniso:yn};L&&(Tr.data=L),typeof Ye=="number"?Tr.mipmap=ff[Ye]:typeof Ye=="boolean"&&(Tr.mipmap=Ye),this.texture=_.texture(Tr)}return Ri()(Q,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.texture.resize(L,J),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture.destroy()}}]),Q}(),Hh=Object(_r.injectable)()(Sf=function(){function Q(){var w=this;xi()(this,Q),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var L=eo()(ui.a.mark(function J(It){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new wf(w.gl,It));case 1:case"end":return Nt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.createAttribute=function(L){return new Gh(w.gl,L)},this.createBuffer=function(L){return new Ja(w.gl,L)},this.createElements=function(L){return new bf(w.gl,L)},this.createTexture2D=function(L){return new Xh(w.gl,L)},this.createFramebuffer=function(L){return new Vh(w.gl,L)},this.useFramebuffer=function(L,J){w.gl({framebuffer:L?L.get():null})(J)},this.createComputeModel=function(){var L=eo()(ui.a.mark(function J(It){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new mf(w.gl,It));case 1:case"end":return Nt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.clear=function(L){var J=L.color,It=L.depth,Nt=L.stencil,K=L.framebuffer,Pt=K===void 0?null:K,Qt={color:J,depth:It,stencil:Nt};Qt.framebuffer=Pt===null?Pt:Pt.get(),w.gl.clear(Qt)},this.setScissor=function(L){w.gl&&w.gl._gl&&(L.enable&&L.box?(w.gl._gl.enable(Jn.SCISSOR_TEST),w.gl._gl.scissor(L.box.x,L.box.y,L.box.width,L.box.height)):w.gl._gl.disable(Jn.SCISSOR_TEST),w.gl._refresh())},this.viewport=function(L){var J=L.x,It=L.y,Nt=L.width,K=L.height;w.gl&&w.gl._gl&&(w.gl._gl.viewport(J,It,Nt,K),w.gl._refresh())},this.readPixels=function(L){var J=L.framebuffer,It={x:L.x,y:L.y,width:L.width,height:L.height};return J&&(It.framebuffer=J.get()),w.gl.read(It)},this.getCanvas=function(){return w.$canvas},this.getGLContext=function(){return w.gl._gl},this.destroy=function(){w.gl&&(w.gl.destroy(),w.inited=!1)}}var _;return Ri()(Q,[{key:"init",value:(_=eo()(ui.a.mark(function w(L){return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.inited){J.next=2;break}return J.abrupt("return");case 2:return this.$canvas=L.canvas,J.next=5,new Promise(function(It,Nt){Fh()({canvas:L.canvas,attributes:{alpha:!0,antialias:L.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Pt,Qt){!Pt&&Qt||Nt(Pt),It(Qt)}})});case 5:this.gl=J.sent,this.inited=!0;case 7:case"end":return J.stop()}},w,this)})),function(w){return _.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Q}())||Sf;function Kh(Q,_,w,L){if(typeof window!="undefined"){var J=document.getElementsByTagName("head")[0],It=document.createElement("script");It.setAttribute("type","text/javascript"),It.setAttribute("src",Q),L&&(It.id=L),It.onload=function(){_&&_()},It.onerror=function(Nt){w&&w("Unable to load script '".concat(Q,"'"),Nt)},J.appendChild(It)}}function Jh(Q,_){return new Promise(function(w,L){Kh(Q,function(){w()},function(J,It){L(It)})})}var Qh=function(){return Ef.apply(this,arguments)};function Ef(){return(Ef=eo()(ui.a.mark(function Q(){return ui.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!as){_.next=2;break}return _.abrupt("return",as);case 2:return _.next=4,Jh("https://preview.babylonjs.com/glslang/glslang.js");case 4:return as=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),_.abrupt("return",as);case 6:case"end":return _.stop()}},Q)}))).apply(this,arguments)}var ka,da,ss,Jo,As,zu,eu,wc=function(){function Q(_,w){xi()(this,Q),this.engine=_,this.options=w,this.attribute=void 0,this.buffer=void 0;var L=w,J=L.buffer,It=L.offset,Nt=L.stride,K=L.normalized,Pt=L.size,Qt=L.divisor,qt=L.arrayStride,xe=L.attributes,Ie=L.stepMode;this.buffer=J,this.attribute={buffer:J.get(),offset:It||0,stride:Nt||0,normalized:K||!1,divisor:Qt||0,arrayStride:qt||0,attributes:xe,stepMode:Ie||"vertex"},Pt&&(this.attribute.size=Pt)}return Ri()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),us=function(){function Q(_,w){xi()(this,Q),this.engine=_,this.options=w,this.buffer=void 0;var L=w,J=L.data,It=L.usage;L.type,this.buffer=this.createBuffer(J instanceof Array?new Float32Array(J):J,It||Wr.BufferUsage.Vertex|Wr.BufferUsage.CopyDst)}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.setSubData(this.buffer,J,L instanceof Array?new Float32Array(L):L)}},{key:"createBuffer",value:function(w,L){var J=w.byteLength%4,It={size:w.byteLength+J,usage:L},Nt=this.engine.device.createBuffer(It);return this.setSubData(Nt,0,w),Nt}},{key:"setSubData",value:function(w,L,J){($o?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(w,L,J)}}]),Q}(),Zh=e(92),nu=e.n(Zh),$h=function(){function Q(J,It){xi()(this,Q),this.engine=J,this.context=It,this.entity=na(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var _,w,L;return Ri()(Q,[{key:"init",value:(L=eo()(ui.a.mark(function J(){var It,Nt,K,Pt,Qt,qt,xe,Ie=this;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:It=Ye.sent,Nt=It.computeStage,K=this.context.uniforms.filter(function(Re){return Re.storageClass===za.StorageBuffer}),Pt=this.context.uniforms.filter(function(Re){return Re.storageClass===za.Uniform}),Qt=Pt.length?1:0,this.bindGroupEntries=[],Qt&&(qt=0,xe=[],Pt.forEach(function(Re){if(Or()(Re.data))Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt}),qt+=4,xe.push(Re.data);else{var Xe,Je=((Xe=Re.data)===null||Xe===void 0?void 0:Xe.length)||1;Je===3&&(Je=4,Re.data.push(0));var Ge=qt/4%4;if(Ge>0){var qe=4-Ge;if(Je>1&&Je<=qe)Je===2&&(qe===3&&(qt+=4,xe.push(0)),xe.push.apply(xe,No()(Re.data)),Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt}));else{for(var yn=0;yn<qe;yn++)qt+=4,xe.push(0);xe.push.apply(xe,No()(Re.data)),Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt})}}qt+=4*Je}}),this.uniformBuffer=new us(this.engine,{data:xe instanceof Array?new Float32Array(xe):xe,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),K.forEach(function(Re){var Xe;nu()(Re.data)||Re.type!==Ua.Vector4FloatArray&&Re.type!==Ua.FloatArray||(Re.name===Ie.context.output.name?(Xe=new us(Ie.engine,{data:isFinite(Number(Re.data))?[Re.data]:Re.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.outputBuffer=Xe,Ie.context.output={name:Re.name,length:isFinite(Number(Re.data))?1:Re.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Xe.get()}):Re.isReferer?Re.data.model&&Re.data.model.outputBuffer&&(Xe=Re.data.model.outputBuffer):Xe=new us(Ie.engine,{data:isFinite(Number(Re.data))?[Re.data]:Re.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.vertexBuffers[Re.name]=Xe,Ie.bindGroupEntries.push({binding:Qt,resource:{name:Re.name,refer:Xe?void 0:Re.data,buffer:Xe?Xe.get():void 0}}),Qt++)}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Nt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Ye.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"destroy",value:function(){var It=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Nt){return It.vertexBuffers[Nt].destroy()})}},{key:"readData",value:(w=eo()(ui.a.mark(function J(){var It,Nt,K,Pt,Qt,qt,xe,Ie,Ye;return ui.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(!(It=this.context.output)){Re.next=16;break}if(Nt=It.length,K=It.typedArrayConstructor,!(Pt=It.gpuBuffer)){Re.next=16;break}return Qt=Nt*K.BYTES_PER_ELEMENT,qt=this.engine.device.createBuffer({size:Qt,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(xe=this.engine.device.createCommandEncoder()).copyBufferToBuffer(Pt,0,qt,0,Qt),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([xe.finish()]),Re.next=12,qt.mapAsync(Wr.MapMode.Read);case 12:return Ie=qt.getMappedRange(),Ye=new K(Ie.slice(0)),qt.unmap(),Re.abrupt("return",Ye);case 16:return Re.abrupt("return",new Float32Array);case 17:case"end":return Re.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"run",value:function(){var It;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(It=this.engine.currentComputePass).dispatch.apply(It,No()(this.context.dispatch)))}},{key:"updateBuffer",value:function(It,Nt){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Pt=this.vertexBuffers[It];Pt&&Pt.subData({data:Nt,offset:K})}},{key:"updateUniform",value:function(It,Nt){var K=this.uniformGPUBufferLayout.find(function(Pt){return Pt.name===It});K&&this.uniformBuffer.subData({data:Number.isFinite(Nt)?new Float32Array([Nt]):new Float32Array(Nt),offset:K.offset})}},{key:"confirmInput",value:function(It,Nt){var K=this.vertexBuffers[Nt],Pt=It.outputBuffer;if(K&&Pt&&K!==Pt){var Qt=this.engine.device.createCommandEncoder(),qt=It.context.output,xe=qt.length*qt.typedArrayConstructor.BYTES_PER_ELEMENT;Qt.copyBufferToBuffer(Pt.get(),0,K.get(),0,xe),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([Qt.finish()])}}},{key:"compileShaderToSpirV",value:function(It,Nt,K){return this.compileRawShaderToSpirV(K+It,Nt)}},{key:"compileRawShaderToSpirV",value:function(It,Nt){return this.engine.glslang.compileGLSL(It,Nt)}},{key:"compileComputePipelineStageDescriptor",value:(_=eo()(ui.a.mark(function J(It){var Nt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Nt=It,this.engine.options.useWGSL){K.next=6;break}return K.next=5,this.compileShaderToSpirV(It,"compute",`#version 450
`);case 5:Nt=K.sent;case 6:return K.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Nt,isWHLSL:$o}),entryPoint:"main"}});case 7:case"end":return K.stop()}},J,this)})),function(J){return _.apply(this,arguments)})}]),Q}(),qh=function(){function Q(_,w){xi()(this,Q),this.engine=_,this.options=w,this.indexCount=void 0,this.buffer=void 0;var L=w,J=L.data,It=(L.usage,L.type,L.count);this.indexCount=It||0,this.buffer=new us(_,{data:J instanceof Array?new Uint16Array(J):J,usage:Wr.BufferUsage.Index|Wr.BufferUsage.CopyDst})}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),td=function(){function Q(_,w){xi()(this,Q),this.engine=_,this.options=w,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var L=w,J=(L.width,L.height,L.color),It=(L.colors,L.depth);L.stencil,J&&(this.colorTexture=J),It&&(this.depthTexture=It)}return Ri()(Q,[{key:"get",value:function(){var w,L;return{color:(w=this.colorTexture)===null||w===void 0?void 0:w.get(),depth:(L=this.depthTexture)===null||L===void 0?void 0:L.get()}}},{key:"destroy",value:function(){var w,L;(w=this.colorTexture)===null||w===void 0||w.destroy(),(L=this.depthTexture)===null||L===void 0||L.destroy()}},{key:"resize",value:function(w){var L,J,It=w.width,Nt=w.height;It===this.width&&Nt===this.height||((L=this.colorTexture)===null||L===void 0||L.resize({width:It,height:Nt}),(J=this.depthTexture)===null||J===void 0||J.resize({width:It,height:Nt})),this.width=It,this.height=Nt}}]),Q}(),ed=(ka={},mr()(ka,Jn.POINTS,Wr.PrimitiveTopology.PointList),mr()(ka,Jn.LINES,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_LOOP,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_STRIP,Wr.PrimitiveTopology.LineStrip),mr()(ka,Jn.TRIANGLES,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_FAN,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_STRIP,Wr.PrimitiveTopology.TriangleStrip),ka),nd=(da={},mr()(da,Jn.NEVER,Wr.CompareFunction.Never),mr()(da,Jn.ALWAYS,Wr.CompareFunction.Always),mr()(da,Jn.LESS,Wr.CompareFunction.Less),mr()(da,Jn.LEQUAL,Wr.CompareFunction.LessEqual),mr()(da,Jn.GREATER,Wr.CompareFunction.Greater),mr()(da,Jn.GEQUAL,Wr.CompareFunction.GreaterEqual),mr()(da,Jn.EQUAL,Wr.CompareFunction.Equal),mr()(da,Jn.NOTEQUAL,Wr.CompareFunction.NotEqual),da),Vu=(ss={},mr()(ss,Jn.FUNC_ADD,Wr.BlendOperation.Add),mr()(ss,Jn.MIN_EXT,Wr.BlendOperation.Min),mr()(ss,Jn.MAX_EXT,Wr.BlendOperation.Max),mr()(ss,Jn.FUNC_SUBTRACT,Wr.BlendOperation.Subtract),mr()(ss,Jn.FUNC_REVERSE_SUBTRACT,Wr.BlendOperation.ReverseSubtract),ss),Wu=(Jo={},mr()(Jo,Jn.ZERO,Wr.BlendFactor.Zero),mr()(Jo,Jn.ONE,Wr.BlendFactor.One),mr()(Jo,Jn.SRC_COLOR,Wr.BlendFactor.SrcColor),mr()(Jo,Jn.ONE_MINUS_SRC_COLOR,Wr.BlendFactor.OneMinusSrcColor),mr()(Jo,Jn.SRC_ALPHA,Wr.BlendFactor.SrcAlpha),mr()(Jo,Jn.ONE_MINUS_SRC_ALPHA,Wr.BlendFactor.OneMinusSrcAlpha),mr()(Jo,Jn.DST_COLOR,Wr.BlendFactor.DstColor),mr()(Jo,Jn.ONE_MINUS_DST_COLOR,Wr.BlendFactor.OneMinusDstColor),mr()(Jo,Jn.DST_ALPHA,Wr.BlendFactor.DstAlpha),mr()(Jo,Jn.ONE_MINUS_DST_ALPHA,Wr.BlendFactor.OneMinusDstAlpha),mr()(Jo,Jn.CONSTANT_COLOR,Wr.BlendFactor.BlendColor),mr()(Jo,Jn.ONE_MINUS_CONSTANT_COLOR,Wr.BlendFactor.OneMinusBlendColor),mr()(Jo,Jn.SRC_ALPHA_SATURATE,Wr.BlendFactor.SrcAlphaSaturated),Jo),rd=(As={},mr()(As,Jn.ALPHA,"r8unorm"),mr()(As,Jn.RGBA,"rgba8unorm"),mr()(As,Jn.DEPTH_COMPONENT,"depth32float"),mr()(As,Jn.DEPTH_STENCIL,"depth24plus-stencil8"),As),Mf=(zu={},mr()(zu,Jn.NEAREST,"nearest"),mr()(zu,Jn.LINEAR,"linear"),zu),ru=(eu={},mr()(eu,Jn.REPEAT,"repeat"),mr()(eu,Jn.CLAMP_TO_EDGE,"clamp-to-edge"),mr()(eu,Jn.MIRRORED_REPEAT,"mirror-repeat"),eu);function id(Q){var _=Q.cull;return _&&_.enable?_.face?_.face===Jn.FRONT?Wr.CullMode.Front:Wr.CullMode.Back:void 0:Wr.CullMode.None}function od(Q){var _=Q.depth,w=(Q.stencil,{compare:Wr.CompareFunction.Always,depthFailOp:Wr.StencilOperation.Keep,failOp:Wr.StencilOperation.Keep,passOp:Wr.StencilOperation.Keep});return{depthWriteEnabled:_&&_.enable,depthCompare:nd[(_==null?void 0:_.func)||Jn.ALWAYS],format:Wr.TextureFormat.Depth24PlusStencil8,stencilFront:w,stencilBack:w,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function iu(Q,_){var w=Q.blend;return[{format:_,alphaBlend:{srcFactor:Wu[w&&w.func&&w.func.srcAlpha||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstAlpha||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.alpha||Jn.FUNC_ADD]},colorBlend:{srcFactor:Wu[w&&w.func&&w.func.srcRGB||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstRGB||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.rgb||Jn.FUNC_ADD]},writeMask:Wr.ColorWrite.All}]}function Ts(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Qa(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?Ts(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Ts(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function Af(Q){for(var _=0,w=arguments.length,L=new Array(w>1?w-1:0),J=1;J<w;J++)L[J-1]=arguments[J];for(var It=0,Nt=L;It<Nt.length;It++){var K=Nt[It];_+=K.length}for(var Pt=new Q(_),Qt=0,qt=0,xe=L;qt<xe.length;qt++){var Ie=xe[qt];Pt.set(Ie,Qt),Qt+=Ie.length}return Pt}var Za,Ea,Tf,Yu,Cf,jf,If,Pf,ou,Ec,Df,kf,ad=function(){function Q(L,J){xi()(this,Q),this.engine=L,this.options=J,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var _,w;return Ri()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Re,Xe,Je,Ge,qe,yn,Pn=this;return ui.a.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return J=this.options,It=J.vs,Nt=J.fs,K=J.attributes,Pt=J.uniforms,Qt=J.primitive,J.count,qt=J.elements,xe=J.depth,Ie=J.blend,Ye=J.stencil,Re=J.cull,J.instances,En.next=3,this.compilePipelineStageDescriptor(It,Nt,null);case 3:Xe=En.sent,Je=Xe.vertexStage,Ge=Xe.fragmentStage,Pt&&this.buildUniformBindGroup(Pt),qt&&(this.indexBuffer=qt.get(),this.indexCount=qt.indexCount),qe={vertexBuffers:Object.keys(K).map(function(Ln,Zn){var Qn=K[Ln],qn=Qn.get(),fr=qn.arrayStride,br=qn.stepMode,gr=qn.attributes;return Pn.attributeCache[Ln]=Qn,{arrayStride:fr,stepMode:br,attributes:gr}})},yn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ed[Qt||Jn.TRIANGLES],rasterizationState:Qa(Qa({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:id({cull:Re})}),depthStencilState:od({depth:xe,stencil:Ye}),colorStates:iu({blend:Ie},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Je,fragmentStage:Ge,vertexState:qe},this.renderPipeline=this.engine.device.createRenderPipeline(yn);case 11:case"end":return En.stop()}},L,this)})),function(){return w.apply(this,arguments)})},{key:"addUniforms",value:function(J){this.uniforms=Qa(Qa({},this.uniforms),tu(J))}},{key:"draw",value:function(J){var It=this,Nt=this.engine.getCurrentRenderPass(),K=Qa(Qa({},this.uniforms),tu(J.uniforms||{})),Pt=[];Object.keys(K).forEach(function(Qt){var qt=Yh()(K[Qt]);if(qt==="boolean"||qt==="number"||Array.isArray(K[Qt])||K[Qt].BYTES_PER_ELEMENT){var xe,Ie=(xe=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||xe===void 0?void 0:xe.offset;nu()(Ie)||It.uniformBuffer.subData({data:K[Qt],offset:Ie})}else{var Ye,Re=(Ye=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||Ye===void 0?void 0:Ye.offset;if(!nu()(Re)){var Xe=K[Qt].get(),Je=Xe.color||Xe,Ge=Je.texture,qe=Je.sampler;qe&&(Pt.push({binding:Re,resource:qe}),Re++),Pt.push({binding:Re,resource:Ge.createView()})}}}),this.uniformBuffer&&(Pt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Pt}),this.renderPipeline&&Nt.setPipeline(this.renderPipeline),Nt.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Nt.setIndexBuffer(this.indexBuffer.get(),Wr.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(Qt,qt){Nt.setVertexBuffer(0+qt,It.attributeCache[Qt].get().buffer,0)}),this.indexBuffer?Nt.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Nt.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(_=eo()(ui.a.mark(function L(J,It,Nt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(K=`#version 450
`,Pt=J,Qt=It,this.engine.options.useWGSL){qt.next=10;break}return qt.next=6,this.compileShaderToSpirV(J,"vertex",K);case 6:return Pt=qt.sent,qt.next=9,this.compileShaderToSpirV(It,"fragment",K);case 9:Qt=qt.sent;case 10:return qt.abrupt("return",this.createPipelineStageDescriptor(Pt,Qt));case 11:case"end":return qt.stop()}},L,this)})),function(L,J,It){return _.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(J,It,Nt){return this.compileRawShaderToSpirV(Nt+J,It)}},{key:"compileRawShaderToSpirV",value:function(J,It){return this.engine.glslang.compileGLSL(J,It)}},{key:"createPipelineStageDescriptor",value:function(J,It){return{vertexStage:{module:this.engine.device.createShaderModule({code:J,isWHLSL:$o}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:It,isWHLSL:$o}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Wr.FrontFace.CCW,cullMode:Wr.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(J){var It=this,Nt=0,K=Af.apply(void 0,[Float32Array].concat(No()(Object.keys(J).map(function(qt){return J[qt]?(It.uniformGPUBufferLayout.push({name:qt,offset:Nt}),Nt+=4*(J[qt].length||1),J[qt]):[]})))),Pt=[],Qt=!1;K.length&&(Qt=!0,Pt.push({binding:0,visibility:Wr.ShaderStage.Fragment|Wr.ShaderStage.Vertex,type:Wr.BindingType.UniformBuffer})),Object.keys(J).filter(function(qt){return J[qt]===null}).forEach(function(qt,xe){It.uniformGPUBufferLayout.push({name:qt,offset:2*xe+(Qt?1:0)}),Pt.push({binding:2*xe+(Qt?1:0),visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.Sampler},{binding:2*xe+(Qt?1:0)+1,visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Pt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),Qt&&(this.uniformBuffer=new us(this.engine,{data:K instanceof Array?new Float32Array(K):K,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}))}}]),Q}(),sd=function(){function Q(_,w){xi()(this,Q),this.engine=_,this.options=w,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Ri()(Q,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(w){var L=w.width,J=w.height;L===this.width&&J===this.height||(this.destroy(),this.createTexture()),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var w=this.options,L=(w.data,w.type),J=(L===void 0&&Jn.UNSIGNED_BYTE,w.width),It=w.height,Nt=(w.flipY,w.format),K=Nt===void 0?Jn.RGBA:Nt,Pt=(w.mipmap,w.wrapS),Qt=Pt===void 0?Jn.CLAMP_TO_EDGE:Pt,qt=w.wrapT,xe=qt===void 0?Jn.CLAMP_TO_EDGE:qt,Ie=w.aniso,Ye=Ie===void 0?0:Ie,Re=(w.alignment,w.premultiplyAlpha,w.mag),Xe=Re===void 0?Jn.NEAREST:Re,Je=w.min,Ge=Je===void 0?Jn.NEAREST:Je,qe=w.colorSpace,yn=(qe===void 0&&Jn.BROWSER_DEFAULT_WEBGL,w.usage);this.width=J,this.height=It,this.texture=this.engine.device.createTexture({size:[J,It,1],mipLevelCount:1,sampleCount:1,dimension:Wr.TextureDimension.E2d,format:rd[K],usage:yn||Wr.TextureUsage.Sampled|Wr.TextureUsage.CopyDst}),(!yn||yn&Wr.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ru[Qt],addressModeV:ru[xe],addressModeW:ru[Qt],magFilter:Mf[Xe],minFilter:Mf[Ge],maxAnisotropy:Ye}))}}]),Q}(),ud=Object(_r.injectable)()(Za=function(){function Q(){var L=this;xi()(this,Q),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(J){J.framebuffer;var It=J.color,Nt=J.depth,K=J.stencil;L.options.supportCompute&&L.startComputePass(),L.currentRenderTarget?(L.currentRenderPass&&L.endRenderTargetRenderPass(),L.startRenderTargetRenderPass(L.currentRenderTarget,It||null,!!Nt,!!K)):(L.mainColorAttachments[0].loadValue=It||Wr.LoadOp.Load,L.mainDepthAttachment.depthLoadValue=Nt||Wr.LoadOp.Load,L.mainDepthAttachment.stencilLoadValue=K?L.clearStencilValue:Wr.LoadOp.Load,L.mainRenderPass&&L.endMainRenderPass(),L.startMainRenderPass())},this.createModel=function(){var J=eo()(ui.a.mark(function It(Nt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new ad(L,Nt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},It)}));return function(It){return J.apply(this,arguments)}}(),this.createAttribute=function(J){return new wc(L,J)},this.createBuffer=function(J){return new us(L,J)},this.createElements=function(J){return new qh(L,J)},this.createTexture2D=function(J){return new sd(L,J)},this.createFramebuffer=function(J){return new td(L,J)},this.useFramebuffer=function(J,It){L.currentRenderTarget&&L.unbindFramebuffer(L.currentRenderTarget),L.currentRenderTarget=J,L.currentRenderTargetViewDescriptor={dimension:Wr.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Wr.TextureAspect.All},L.currentRenderPass=null,It()},this.createComputeModel=function(){var J=eo()(ui.a.mark(function It(Nt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new $h(L,Nt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},It)}));return function(It){return J.apply(this,arguments)}}(),this.getCanvas=function(){return L.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(J){var It=J.x,Nt=J.y,K=J.width,Pt=J.height;L.currentRenderPass?L.transientViewport.x!==1/0?L.getCurrentRenderPass().setViewport(L.transientViewport.x,L.transientViewport.y,L.transientViewport.width,L.transientViewport.height,0,1):(It!==L.cachedViewport.x||Nt!==L.cachedViewport.y||K!==L.cachedViewport.width||Pt!==L.cachedViewport.height)&&(L.cachedViewport={x:It,y:Nt,width:K,height:Pt},L.getCurrentRenderPass().setViewport(It,Nt,K,Pt,0,1)):L.transientViewport={x:It,y:Nt,width:K,height:Pt}},this.readPixels=function(J){throw new Error("Method not implemented.")}}var _,w;return Ri()(Q,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.canvas=J.canvas,this.options=J,this.useWGSL=!!J.useWGSL,this.mainPassSampleCount=J.antialiasing?this.defaultSampleCount:1,It.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(J){return J.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),$o?this.device.getQueue().submit(this.commandBuffers.filter(function(J){return J})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(J){return J}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(_=eo()(ui.a.mark(function L(){var J,It;return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,Qh();case 2:return this.glslang=Nt.sent,Nt.next=5,(J=navigator)===null||J===void 0||(It=J.gpu)===null||It===void 0?void 0:It.requestAdapter();case 5:return this.adapter=Nt.sent,Nt.next=8,this.adapter.requestDevice();case 8:this.device=Nt.sent;case 9:case"end":return Nt.stop()}},L,this)})),function(){return _.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext($o?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Wr.TextureUsage.OutputAttachment|Wr.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var J={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:Wr.TextureFormat.BGRA8Unorm,usage:Wr.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(J),this.mainColorAttachments=[{attachment:$o?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}];var It={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:$o?"depth32float-stencil8":Wr.TextureFormat.Depth24PlusStencil8,usage:Wr.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(It),this.mainDepthAttachment={attachment:$o?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Wr.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(J,It,Nt){var K,Pt,Qt,qt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xe=(K=J.get().color)===null||K===void 0?void 0:K.texture;xe&&(Qt=xe.createView(this.currentRenderTargetViewDescriptor));var Ie,Ye=(Pt=J.get().depth)===null||Pt===void 0?void 0:Pt.texture;Ye&&(Ie=Ye.createView());var Re=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Qt,loadValue:It!==null?It:Wr.LoadOp.Load,storeOp:Wr.StoreOp.Store}],depthStencilAttachment:Ye&&Ie?{attachment:Ie,depthLoadValue:Nt?this.clearDepthValue:Wr.LoadOp.Load,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:qt?this.clearStencilValue:Wr.LoadOp.Load,stencilStoreOp:Wr.StoreOp.Store}:void 0});this.currentRenderPass=Re,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(J){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),Q}())||Za;function cd(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ld=(Ea=Object(_r.injectable)(),Tf=Object(_r.inject)(yr.Systems),Yu=Object(_r.named)(yr.MaterialSystem),Cf=Object(_r.inject)(yr.Systems),jf=Object(_r.named)(yr.GeometrySystem),If=Object(_r.inject)(yr.ShaderModuleService),Ea((ou=function(Q){Qo()(w,Q);var _=cd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=_.call.apply(_,[this].concat(It)),di()(L,"materialSystem",Ec,Eo()(L)),di()(L,"geometrySystem",Df,Eo()(L)),di()(L,"shaderModuleService",kf,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();K&&K.material&&(It==="gridColor"?(K.material.setUniform("u_GridColor",Nt),K.material.setUniform("u_GridColor2",Nt)):It==="gridSize"&&(K.material.setUniform("u_GridSize",Nt),K.material.setUniform("u_GridSize2",Nt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var J=this.shaderModuleService.getModule("grid"),It=J.vs,Nt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt});this.setMaterial(Pt);var Qt=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Qt),Pt.setCull({enable:!1,face:Jn.BACK}).setDepth({enable:!0,func:Jn.LESS}),Pt.setUniform(K),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Qt.setIndex([0,3,2,2,1,0]),Qt.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),w}(Ha),Ec=Mi()(ou.prototype,"materialSystem",[Tf,Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=Mi()(ou.prototype,"geometrySystem",[Cf,jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kf=Mi()(ou.prototype,"shaderModuleService",[If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pf=ou))||Pf),Xu=e(94),cs=e(63);function ls(Q,_,w,L,J){au(_,L,-J),au(_,L,J),Q.push(w),Q.push(w)}function au(Q,_,w){Q.push([[_[0],_[1]],w])}var Rf,Mc,Ac,Nf,Cs,$a,Lf,fs,Bf,Ff,Gf;function fd(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var _f,Hu,Uf,zf,Vf,Tc,Cc,su,jc,Wf,Ic,hd=(Rf=Object(_r.injectable)(),Mc=Object(_r.inject)(yr.Systems),Ac=Object(_r.named)(yr.MaterialSystem),Nf=Object(_r.inject)(yr.Systems),Cs=Object(_r.named)(yr.GeometrySystem),$a=Object(_r.inject)(yr.ShaderModuleService),Rf((fs=function(Q){Qo()(w,Q);var _=fd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=_.call.apply(_,[this].concat(It)),di()(L,"materialSystem",Bf,Eo()(L)),di()(L,"geometrySystem",Ff,Eo()(L)),di()(L,"shaderModuleService",Gf,Eo()(L)),L.vertexCount=void 0,L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();if(K&&K.material)switch(It){case"dashArray":K.material.setUniform("u_dash_array",Nt);break;case"dashOffset":K.material.setUniform("u_dash_offset",Nt);break;case"dashRatio":K.material.setUniform("u_dash_ratio",Nt);break;case"thickness":K.material.setUniform("u_thickness",Nt);break;case"color":var Pt=new Array(this.vertexCount).fill(void 0).map(function(){return Nt}).reduce(function(Qt,qt){return[].concat(No()(Qt),No()(qt))},[]);K.geometry.setAttribute("a_color",Float32Array.from(Pt),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var J=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var It=this.shaderModuleService.getModule("line"),Nt=It.vs,K=It.fs,Pt=It.uniforms,Qt=this.materialSystem.createShaderMaterial({vertexShader:Nt,fragmentShader:K}),qt=function(Pn,En,Ln){var Zn=[0,0],Qn=[0,0],qn=[0,0],fr=[0,0],br=-1,gr=!1,hr=null,Tr=Object(Xu.create)(),dr=Ln||0,Jr=[],qr=[],wi=[],Cr=[0,0];En&&(Pn=Pn.slice()).push(Pn[0]);for(var pi=Pn.length,Ei=1;Ei<pi;Ei++){var ji=dr,Ao=Pn[Ei-1],go=Pn[Ei],Ii=Ei<Pn.length-1?Pn[Ei+1]:null;if(Cr.push(Ei/pi,Ei/pi),Object(cs.direction)(Zn,go,Ao),hr||(hr=[0,0],Object(cs.normal)(hr,Zn)),gr||(gr=!0,ls(qr,Jr,Ao,hr,1)),wi.push([ji+0,ji+1,ji+2]),Ii){Object(cs.direction)(Qn,Ii,go);var Gi=Object(cs.computeMiter)(qn,fr,Zn,Qn,1),Po=Object(Xu.dot)(qn,hr)<0?-1:1,Fo=Gi>3;if(!isFinite(Gi)){Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2,br=Po;continue}Fo?(Gi=3,Cr.push(Ei/pi),au(Jr,hr,-Po),qr.push(go),au(Jr,fr,Gi*Po),qr.push(go),wi.push(br!==-Po?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),wi.push([ji+2,ji+3,ji+4]),Object(cs.normal)(Tr,Qn),Object(Xu.copy)(hr,Tr),au(Jr,hr,-Po),qr.push(go),dr+=3):(ls(qr,Jr,go,fr,Gi),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),Po=-1,Object(Xu.copy)(hr,fr),dr+=2),br=Po}else Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2}return{normals:Jr,attrIndex:wi,attrPos:qr,attrCounters:Cr}}(this.config.points,!1),xe=qt.normals,Ie=qt.attrIndex,Ye=qt.attrPos,Re=qt.attrCounters,Xe=Ye.length;this.vertexCount=Xe;var Je=this.geometrySystem.createBufferGeometry({vertexCount:Xe});this.setMaterial(Qt),this.setGeometry(Je),Qt.setCull({enable:!1,face:Jn.BACK}).setUniform(Pt),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var Ge=[],qe=[];xe.forEach(function(Pn){var En=Pn[0],Ln=Pn[1];Ge.push([En[0],En[1]]),qe.push(Ln)}),Je.setIndex(Ie.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),Je.setAttribute("a_pos",Float32Array.from(Ye.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var yn=new Array(Xe).fill(void 0).map(function(){return No()(J.config.color)}).reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[]);Je.setAttribute("a_color",Float32Array.from(yn),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Je.setAttribute("a_line_miter",Float32Array.from(qe),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Je.setAttribute("a_line_normal",Float32Array.from(Ge.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Je.setAttribute("a_counters",Float32Array.from(Re),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),w}(Ha),Bf=Mi()(fs.prototype,"materialSystem",[Mc,Ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff=Mi()(fs.prototype,"geometrySystem",[Nf,Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gf=Mi()(fs.prototype,"shaderModuleService",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=fs))||Lf);function Yf(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function dd(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(_){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vd=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Xf,Hf,Pc,Kf,uu,cu,Ku,Jf,Qf,pd=(_f=Object(_r.injectable)(),Hu=Object(_r.inject)(yr.Systems),Uf=Object(_r.named)(yr.MaterialSystem),zf=Object(_r.inject)(yr.Systems),Vf=Object(_r.named)(yr.GeometrySystem),Tc=Object(_r.inject)(yr.ShaderModuleService),_f((su=function(Q){Qo()(w,Q);var _=dd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=_.call.apply(_,[this].concat(It)),di()(L,"materialSystem",jc,Eo()(L)),di()(L,"geometrySystem",Wf,Eo()(L)),di()(L,"shaderModuleService",Ic,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();K&&K.material&&(It==="strokeWidth"?K.material.setUniform("u_stroke_width",Nt):It==="strokeColor"?K.material.setUniform("u_stroke_color",Nt):It==="strokeOpacity"?K.material.setUniform("u_stroke_opacity",Nt):It==="opacity"?K.material.setUniform("u_opacity",Nt):It==="blur"&&K.material.setUniform("u_blur",Nt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var J=this.shaderModuleService.getModule("grid"),It=J.vs,Nt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Jn.SRC_ALPHA,dstRGB:Jn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});Pt.setUniform(function(xe){for(var Ie=1;Ie<arguments.length;Ie++){var Ye=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?Yf(Object(Ye),!0).forEach(function(Re){mr()(xe,Re,Ye[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(Ye)):Yf(Object(Ye)).forEach(function(Re){Object.defineProperty(xe,Re,Object.getOwnPropertyDescriptor(Ye,Re))})}return xe}({u_device_pixel_ratio:window.devicePixelRatio},K));var Qt=this.buildAttributes(),qt=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Qt.instancedOffsets.length/2,vertexCount:6});qt.setIndex([0,2,1,0,3,2]),qt.setAttribute("position",Float32Array.from(Qt.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),qt.setAttribute("offset",Float32Array.from(Qt.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),qt.setAttribute("color",Float32Array.from(Qt.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),qt.setAttribute("size",Float32Array.from(Qt.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),qt.setAttribute("shape",Float32Array.from(Qt.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),qt.setAttribute("a_PickingColor",Float32Array.from(Qt.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(Pt),this.setGeometry(qt)}},{key:"buildAttribute",value:function(J,It,Nt){var K,Pt,Qt,qt,xe;(K=It.instancedPickingColors).push.apply(K,No()([(xe=J.id||Nt)+1&255,xe+1>>8&255,xe+1>>8>>8&255])),It.instancedShapes.push(vd.indexOf(J.shape||"circle")),(Pt=It.instancedColors).push.apply(Pt,No()(J.color||[1,0,0,1])),(Qt=It.instancedOffsets).push.apply(Qt,No()(J.position||[0,0])),(qt=It.instancedSizes).push.apply(qt,No()(J.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var J=this,It={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Nt,K){J.buildAttribute(Nt,It,K)}):this.buildAttribute(this.config,It,0),It}}]),w}(Ha),jc=Mi()(su.prototype,"materialSystem",[Hu,Uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=Mi()(su.prototype,"geometrySystem",[zf,Vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Mi()(su.prototype,"shaderModuleService",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=su))||Cc);function Dc(Q,_){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Zf(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Zf(Pt,Qt)}}(Q))||_&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function Zf(Q,_){(_==null||_>Q.length)&&(_=Q.length);for(var w=0,L=new Array(_);w<_;w++)L[w]=Q[w];return L}var $f,qf,th,eh,nh,kc,rh,ih,oh,Rc,Ju,ah,Nc=(Xf=Object(_r.injectable)(),Hf=Object(_r.inject)(yr.RenderEngine),Pc=Object(_r.inject)(yr.ShaderModuleService),Kf=Object(_r.inject)(yr.ConfigService),Xf((cu=function(){function Q(){xi()(this,Q),di()(this,"engine",Ku,this),di()(this,"shaderModule",Jf,this),di()(this,"configService",Qf,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var _,w;return Ri()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(this.shaderModule.registerBuiltinModules(),J=this.container.getAll(yr.Systems),!(It=this.configService.get()).canvas){Qt.next=25;break}return Qt.next=6,this.engine.init({canvas:It.canvas,swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:Nt=Dc(J),Qt.prev=7,Nt.s();case 9:if((K=Nt.n()).done){Qt.next=16;break}if(!(Pt=K.value).initialize){Qt.next=14;break}return Qt.next=14,Pt.initialize();case 14:Qt.next=9;break;case 16:Qt.next=21;break;case 18:Qt.prev=18,Qt.t0=Qt.catch(7),Nt.e(Qt.t0);case 21:return Qt.prev=21,Nt.f(),Qt.finish(21);case 24:this.inited=!0;case 25:case"end":return Qt.stop()}},L,this,[[7,18,21,24]])})),function(){return w.apply(this,arguments)})},{key:"render",value:(_=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt,Qt,qt,xe=arguments;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.inited&&!this.rendering){Ie.next=2;break}return Ie.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Ye){Ye()}),this.rendering=!0,this.engine.beginFrame(),J=this.container.getAll(yr.Systems),It=xe.length,Nt=new Array(It),K=0;K<It;K++)Nt[K]=xe[K];Pt=Dc(J),Ie.prev=8,Pt.s();case 10:if((Qt=Pt.n()).done){Ie.next=17;break}if(!(qt=Qt.value).execute){Ie.next=15;break}return Ie.next=15,qt.execute(Nt);case 15:Ie.next=10;break;case 17:Ie.next=22;break;case 19:Ie.prev=19,Ie.t0=Ie.catch(8),Pt.e(Ie.t0);case 22:return Ie.prev=22,Pt.f(),Ie.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Ie.stop()}},L,this,[[8,19,22,25]])})),function(){return _.apply(this,arguments)})},{key:"clear",value:function(J){var It=this;return this.inited?this.engine.clear(J):this.pendings.unshift(function(){It.engine.clear(J),It.pendings.shift()}),this}},{key:"setSize",value:function(J){var It=J.width,Nt=J.height,K=this.engine.getCanvas();return this.size={width:It,height:Nt},K.width=It,K.height=Nt,this}},{key:"getSize",value:function(){return this.size}}]),Q}(),Ku=Mi()(cu.prototype,"engine",[Hf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jf=Mi()(cu.prototype,"shaderModule",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qf=Mi()(cu.prototype,"configService",[Kf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=cu))||uu),sh=Object(_r.injectable)()($f=function(){function Q(){xi()(this,Q),this.entities=[]}return Ri()(Q,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(w){return this.entities.indexOf(w)===-1&&this.entities.push(w),this}},{key:"removeEntity",value:function(w){var L=this.entities.indexOf(w);return this.entities.splice(L,1),this}}]),Q}())||$f,uh=(qf=Object(_r.injectable)(),th=Object(_r.inject)(yr.Systems),eh=Object(_r.named)(yr.RendererSystem),qf((kc=function(){function Q(){xi()(this,Q),di()(this,"rendererSystem",rh,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Ri()(Q,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(w){return this.camera=w,this}},{key:"setScene",value:function(w){return this.scene=w,this}},{key:"setViewport",value:function(w){return this.viewport=w,this}},{key:"setClearColor",value:function(w){return this.clearColor=w,this}},{key:"pick",value:function(w){return this.rendererSystem.pick(w,this)}}]),Q}(),rh=Mi()(kc.prototype,"rendererSystem",[th,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=kc))||nh);function ch(Q,_){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);_&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function gd(Q){for(var _=1;_<arguments.length;_++){var w=arguments[_]!=null?arguments[_]:{};_%2?ch(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ch(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var va=(ih=Object(_r.injectable)(),oh=Object(_r.inject)(yr.ConfigService),ih((Ju=function(){function Q(){xi()(this,Q),di()(this,"configService",ah,this),this.container=void 0}var _;return Ri()(Q,[{key:"getEngine",value:(_=eo()(ui.a.mark(function w(){var L,J,It,Nt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return L=this.container.get(yr.RenderEngine),J=this.configService.get(),It=J.canvas,Nt=J.engineOptions,K.next=4,L.init(gd({canvas:It||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},Nt));case 4:return K.abrupt("return",L);case 5:case"end":return K.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"getTransformComponent",value:function(L){return this.container.get(yr.TransformComponentManager).getComponentByEntity(L)}},{key:"getMeshComponent",value:function(L){return this.container.get(yr.MeshComponentManager).getComponentByEntity(L)}},{key:"setConfig",value:function(L){this.configService.set(L)}},{key:"setContainer",value:function(L){this.container=L}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return na()}},{key:"createScene",value:function(){return this.container.get(sh)}},{key:"createCamera",value:function(){return this.container.get(Hl)}},{key:"createView",value:function(){return this.container.get(uh)}},{key:"createRenderable",value:function(L,J,It){var Nt=J?this.container.getNamed(yr.Renderable,J):this.container.get(Ha);return Nt.setConfig(It||{}),Nt.setEntity(L),Nt}},{key:"createBoxGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBox(L)}},{key:"createBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBufferGeometry(L)}},{key:"createInstancedBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createInstancedBufferGeometry(L)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(L){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createShaderMaterial(L)}},{key:"createKernel",value:function(L){var J=this.container.get(cf);return typeof L=="string"?J.setBundle(JSON.parse(L)):J.setBundle(L),J.init(),J}},{key:"createRenderer",value:function(){var L=this.container.get(Nc);return L.container=this.container,L.init(),L}},{key:"destroy",value:function(){this.container.getAll(yr.Systems).forEach(function(L){L.tearDown&&L.tearDown()}),this.container.get(yr.RenderEngine).destroy(),this.container.get(yr.InteractorService).destroy()}}],[{key:"create",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=Nh(),It=navigator.gpu?ud:Hh;J.isBound(yr.RenderEngine)||J.bind(yr.RenderEngine).to(It).inSingletonScope(),J.bind(Nc).toSelf(),J.bind(cf).toSelf(),J.bind(Ha).toSelf(),J.bind(uh).toSelf(),J.bind(Hl).toSelf(),J.bind(sh).toSelf(),J.bind(Q).toSelf(),J.bind(yr.Renderable).to(pd).whenTargetNamed(Ha.POINT),J.bind(yr.Renderable).to(hd).whenTargetNamed(Ha.LINE),J.bind(yr.Renderable).to(ld).whenTargetNamed(Ha.GRID);var Nt=J.get(Q);return Nt.setContainer(J),Nt.setConfig(L),Nt}}]),Q}(),ah=Mi()(Ju.prototype,"configService",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ju))||Rc),hs=function(_,w){return _?M(_)?function(){return _}:_:function(){return w||1}},c=function(_,w){var L=[],J=[],It={},Nt=0;for(Nt=0;Nt<_.length;Nt++){var K=_[Nt];It[K.id]=Nt,L.push(K.x),L.push(K.y),L.push(0),L.push(0),J.push([])}for(Nt=0;Nt<w.length;Nt++){var Pt=w[Nt];J[It[Pt.source]].push(It[Pt.target]),J[It[Pt.target]].push(It[Pt.source])}var Qt=0;for(Nt=0;Nt<_.length;Nt++){var qt=L.length,xe=J[Nt],Ie=xe.length;L[4*Nt+2]=qt,L[4*Nt+3]=xe.length,Qt=Math.max(Qt,xe.length);for(var Ye=0;Ye<Ie;++Ye){var Re=xe[Ye];L.push(+Re)}}for(;L.length%4!=0;)L.push(0);return{maxEdgePerVetex:Qt,array:new Float32Array(L)}},o=function(_,w,L,J){var It=[],Nt=[],K={},Pt=0;for(Pt=0;Pt<_.length;Pt++){var Qt=_[Pt];K[Qt.id]=Pt,It.push(Qt.x),It.push(Qt.y),It.push(0),It.push(0),Nt.push([])}for(Pt=0;Pt<w.length;Pt++){var qt=w[Pt];Nt[K[qt.source]].push(K[qt.target]),Nt[K[qt.source]].push(L(qt)),Nt[K[qt.source]].push(J(qt)),Nt[K[qt.source]].push(0),Nt[K[qt.target]].push(K[qt.source]),Nt[K[qt.target]].push(L(qt)),Nt[K[qt.target]].push(J(qt)),Nt[K[qt.target]].push(0)}var xe=0;for(Pt=0;Pt<_.length;Pt++){var Ie=It.length,Ye=Nt[Pt],Re=Ye.length;It[4*Pt+2]=Ie+1048576*Re/4,It[4*Pt+3]=0,xe=Math.max(xe,Re/4);for(var Xe=0;Xe<Re;++Xe){var Je=Ye[Xe];It.push(+Je)}}for(;It.length%4!=0;)It.push(0);return{maxEdgePerVetex:xe,array:new Float32Array(It)}},t=function(_,w){var L=[],J=_.length,It={};return w.forEach(function(Nt){_.forEach(function(K,Pt){if(It[Nt[K]]===void 0&&(It[Nt[K]]=Object.keys(It).length),L.push(It[Nt[K]]),Pt===J-1)for(;L.length%4!=0;)L.push(0)})}),{array:new Float32Array(L),count:Object.keys(It).length}},r=function(_){for(var w=[],L=_.length,J=_[0].length,It=function(Pt){_.forEach(function(Qt,qt){if(w.push(Qt[Pt]),qt===L-1)for(;w.length%4!=0;)w.push(0)})},Nt=0;Nt<J;Nt++)It(Nt);return new Float32Array(w)};function m(Q){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function D(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function et(Q,_){return(et=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function Et(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=ne(Q);if(_){var J=ne(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Lt(this,w)}}function Lt(Q,_){return!_||m(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function ne(Q){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var ge=function(_,w,L,J){return new(L||(L=Promise))(function(It,Nt){function K(qt){try{Qt(J.next(qt))}catch(xe){Nt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Nt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(_,w||[])).next())})},be=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&et(Nt,K)})(It,Q);var _,w,L,J=Et(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterField="cluster",K.clusterGravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ge(this,void 0,void 0,at.mark(function K(){var Pt,Qt,qt,xe,Ie,Ye=this;return at.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Re.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Re.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Re.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Re.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Xe,Je){M(Xe.x)||(Xe.x=Math.random()*Ye.width),M(Xe.y)||(Xe.y=Math.random()*Ye.height),xe[Xe.id]=Xe,Ie[Xe.id]=Je}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Re.next=21,Pt.run();case 21:case"end":return Re.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Re,Xe=this;return at.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(xe=(qt=this).nodes,Ie=qt.center,xe&&xe.length!==0){Je.next=5;break}return Je.abrupt("return");case 5:if(xe.length!==1){Je.next=9;break}return xe[0].x=Ie[0],xe[0].y=Ie[1],Je.abrupt("return");case 9:return Ye={},Re={},xe.forEach(function(Ge,qe){M(Ge.x)||(Ge.x=Math.random()*Xe.width),M(Ge.y)||(Ge.y=Math.random()*Xe.height),Ye[Ge.id]=Ge,Re[Ge.id]=qe}),qt.nodeMap=Ye,qt.nodeIdxMap=Re,Je.next=16,qt.run(K,Pt);case 16:case"end":return Je.stop()}},Qt,this)}))}},{key:"run",value:function(K,Pt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Re,Xe,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Tr,dr,Jr,qr,wi,Cr,pi=this;return at.wrap(function(Ei){for(;;)switch(Ei.prev=Ei.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,Re=qt.center,Xe=qt.height*qt.width,Je=Math.sqrt(Xe)/10,Ge=Xe/(xe.length+1),qe=Math.sqrt(Ge),yn=qt.speed,Pn=qt.clustering,En=t([qt.clusterField],xe),Ln=En.array,Zn=En.count,Qn=xe.length,qn=c(xe,Ie),fr=qn.maxEdgePerVetex,br=qn.array,gr=qt.workerEnabled,hr=gr?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),Tr=qt.onLayoutEnd,dr=[],Jr=0;Jr<Zn;Jr++)dr.push(0,0,0,0);return qr=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Qn,1,1]).setBinding({u_Data:br,u_K:qe,u_K2:Ge,u_Gravity:qt.gravity,u_ClusterGravity:qt.clusterGravity||qt.gravity||1,u_Speed:yn,u_MaxDisplace:Je,u_Clustering:Pn?1:0,u_Center:Re,u_AttributeArray:Ln,u_ClusterCenters:dr,MAX_EDGE_PER_VERTEX:fr,VERTEX_COUNT:Qn}),Pn&&(wi=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Zn,1,1]).setBinding({u_Data:br,u_NodeAttributes:Ln,u_ClusterCenters:dr,VERTEX_COUNT:Qn,CLUSTER_COUNT:Zn})),Cr=function(){return ge(pi,void 0,void 0,at.mark(function Ao(){var go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:go=0;case 1:if(!(go<Ye)){Gi.next=13;break}return Gi.next=4,qr.execute();case 4:if(!Pn){Gi.next=9;break}return wi.setBinding({u_Data:qr}),Gi.next=8,wi.execute();case 8:qr.setBinding({u_ClusterCenters:wi});case 9:qr.setBinding({u_MaxDisplace:Je*=.99});case 10:go++,Gi.next=1;break;case 13:return Gi.next=15,qr.getOutput();case 15:Ii=Gi.sent,K?Pt.postMessage({type:Yr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),Tr&&Tr();case 18:case"end":return Gi.stop()}},Ao)}))},Ei.next=24,Cr();case 24:case"end":return Ei.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&D(_.prototype,w),L&&D(_,L),It}(x);function Ae(Q){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function We(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function an(Q,_){return(an=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function gn(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Hn(Q);if(_){var J=Hn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Yn(this,w)}}function Yn(Q,_){return!_||Ae(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function Hn(Q){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var ir=function(_,w,L,J){return new(L||(L=Promise))(function(It,Nt){function K(qt){try{Qt(J.next(qt))}catch(xe){Nt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Nt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(_,w||[])).next())})},cr=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&an(Nt,K)})(It,Q);var _,w,L,J=gn(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=1,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ir(this,void 0,void 0,at.mark(function K(){var Pt,Qt,qt,xe,Ie;return at.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Ye.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ye.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Ye.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ye.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Re,Xe){M(Re.x)||(Re.x=Math.random()*Pt.width),M(Re.y)||(Re.y=Math.random()*Pt.height),xe[Re.id]=Re,Ie[Re.id]=Xe}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Pt.nodeStrength=hs(Pt.nodeStrength,1),Pt.edgeStrength=hs(Pt.edgeStrength,1),Ye.next=23,Pt.run();case 23:case"end":return Ye.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.center;if(qt&&qt.length!==0){if(qt.length===1)return qt[0].x=xe[0],void(qt[0].y=xe[1]);var Ie={},Ye={};qt.forEach(function(Re,Xe){M(Re.x)||(Re.x=Math.random()*Qt.width),M(Re.y)||(Re.y=Math.random()*Qt.height),Ie[Re.id]=Re,Ye[Re.id]=Xe}),Qt.nodeMap=Ie,Qt.nodeIdxMap=Ye,Qt.nodeStrength=hs(Qt.nodeStrength,1),Qt.edgeStrength=hs(Qt.edgeStrength,1),Qt.run(K,Pt)}}},{key:"run",value:function(K,Pt){return ir(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Re,Xe,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Tr,dr,Jr,qr,wi,Cr=this;return at.wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,qt.width||typeof window=="undefined"||(qt.width=window.innerWidth),qt.height||typeof window=="undefined"||(qt.height=window.innerHeight),Re=xe.length,qt.linkDistance=hs(qt.linkDistance),qt.edgeStrength=hs(qt.edgeStrength),Xe=o(xe,Ie,qt.linkDistance,qt.edgeStrength),Je=Xe.maxEdgePerVetex,Ge=Xe.array,qt.degrees=y(xe.length,qt.nodeIdxMap,Ie),qe=[],yn=[],Pn=[],En=[],Ln=[],qt.getMass||(qt.getMass=function(Ei){return qt.degrees[qt.nodeIdxMap[Ei.id]]||1}),Zn=qt.gravity,Qn=qt.center,xe.forEach(function(Ei,ji){qe.push(qt.getMass(Ei)),yn.push(qt.nodeStrength(Ei)),qt.degrees[ji]||(qt.degrees[ji]=0);var Ao=[Qn[0],Qn[1],Zn];if(qt.getCenter){var go=qt.getCenter(Ei,qt.degrees[ji]);go&&M(go[0])&&M(go[1])&&M(go[2])&&(Ao=go)}Pn.push(Ao[0]),En.push(Ao[1]),Ln.push(Ao[2])}),qn=r([qe,qt.degrees,yn]),fr=r([Pn,En,Ln]),br=qt.workerEnabled,gr=br?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),hr=qt.onLayoutEnd,Tr=[],Ge.forEach(function(Ei){Tr.push(Ei)}),dr=0;dr<4;dr++)Tr.push(0);return Jr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.w;\\nvar ay : f32 = vy * attributes2.w;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Re,1,1]).setBinding({u_Data:Ge,u_damping:qt.damping,u_maxSpeed:qt.maxSpeed,u_minMovement:qt.minMovement,u_coulombDisScale:qt.coulombDisScale,u_factor:qt.factor,u_NodeAttributeArray1:qn,u_NodeAttributeArray2:fr,MAX_EDGE_PER_VERTEX:Je,VERTEX_COUNT:Re,u_AveMovement:Tr,u_interval:qt.interval}),qr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:Ge,VERTEX_COUNT:Re,u_AveMovement:[0,0,0,0]}),wi=function(){return ir(Cr,void 0,void 0,at.mark(function ji(){var Ao,go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:Ao=0;case 1:if(!(Ao<Ye)){Gi.next=12;break}return Gi.next=4,Jr.execute();case 4:return qr.setBinding({u_Data:Jr}),Gi.next=7,qr.execute();case 7:go=Math.max(.02,qt.interval-.002*Ao),Jr.setBinding({u_interval:go,u_AveMovement:qr});case 9:Ao++,Gi.next=1;break;case 12:return Gi.next=14,Jr.getOutput();case 14:Ii=Gi.sent,K?Pt.postMessage({type:Yr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),hr&&hr();case 17:case"end":return Gi.stop()}},ji)}))},pi.next=33,wi();case 33:case"end":return pi.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&We(_.prototype,w),L&&We(_,L),It}(x);function Rr(Q){return(Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Q)}function zr(Q,_){for(var w=0;w<_.length;w++){var L=_[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Ur(Q,_){return(Ur=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,_)}function ki(Q){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=mi(Q);if(_){var J=mi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ai(this,w)}}function Ai(Q,_){return!_||Rr(_)!=="object"&&typeof _!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):_}function mi(Q){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(Q)}var Ki=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Ur(Nt,K)})(It,Q);var _,w,L,J=ki(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.maxIteration=100,K.gravity=10,K.comboGravity=10,K.linkDistance=10,K.alpha=1,K.alphaMin=.001,K.alphaDecay=1-Math.pow(K.alphaMin,1/300),K.alphaTarget=0,K.velocityDecay=.6,K.edgeStrength=.6,K.nodeStrength=30,K.preventOverlap=!1,K.preventNodeOverlap=!1,K.preventComboOverlap=!1,K.collideStrength=void 0,K.nodeCollideStrength=.5,K.comboCollideStrength=.5,K.comboSpacing=20,K.comboPadding=10,K.optimizeRangeFactor=1,K.onTick=function(){},K.onLayoutEnd=function(){},K.depthAttractiveForceScale=1,K.depthRepulsiveForceScale=2,K.nodes=[],K.edges=[],K.combos=[],K.comboTrees=[],K.width=300,K.height=300,K.bias=[],K.nodeMap={},K.oriComboMap={},K.indexMap={},K.comboMap={},K.previousLayouted=!1,K.updateCfg(Nt),K}return _=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},K&&K.length!==0){if(K.length===1)return K[0].x=Pt[0],K[0].y=Pt[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.previousLayouted?K.maxIteration/5:K.maxIteration;K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var qt=K.center,xe=K.velocityDecay,Ie=K.comboMap;K.previousLayouted||K.initPos(Ie);for(var Ye=function(qe){var yn=[];Pt.forEach(function(Pn,En){yn[En]={x:0,y:0}}),K.applyCalculate(yn),K.applyComboCenterForce(yn),Pt.forEach(function(Pn,En){M(Pn.x)&&M(Pn.y)&&(Pn.x+=yn[En].x*xe,Pn.y+=yn[En].y*xe)}),K.alpha+=(K.alphaTarget-K.alpha)*K.alphaDecay,K.onTick()},Re=0;Re<Qt;Re++)Ye();var Xe=[0,0];Pt.forEach(function(Ge){M(Ge.x)&&M(Ge.y)&&(Xe[0]+=Ge.x,Xe[1]+=Ge.y)}),Xe[0]/=Pt.length,Xe[1]/=Pt.length;var Je=[qt[0]-Xe[0],qt[1]-Xe[1]];Pt.forEach(function(Ge,qe){M(Ge.x)&&M(Ge.y)&&(Ge.x+=Je[0],Ge.y+=Je[1])}),K.combos.forEach(function(Ge){var qe=Ie[Ge.id];qe&&qe.empty&&(Ge.x=qe.cx||Ge.x,Ge.y=qe.cy||Ge.y)}),K.previousLayouted=!0}},{key:"initVals",value:function(){var K=this.edges,Pt=this.nodes,Qt=this.combos,qt={},xe={},Ie={};Pt.forEach(function(Cr,pi){xe[Cr.id]=Cr,Ie[Cr.id]=pi}),this.nodeMap=xe,this.indexMap=Ie;var Ye={};Qt.forEach(function(Cr){Ye[Cr.id]=Cr}),this.oriComboMap=Ye,this.comboMap=this.getComboMap();var Re=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||Re,this.preventNodeOverlap=this.preventNodeOverlap||Re;var Xe=this.collideStrength;Xe&&(this.comboCollideStrength=Xe,this.nodeCollideStrength=Xe),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var Je=0;Je<K.length;++Je)qt[K[Je].source]?qt[K[Je].source]++:qt[K[Je].source]=1,qt[K[Je].target]?qt[K[Je].target]++:qt[K[Je].target]=1;for(var Ge=[],qe=0;qe<K.length;++qe)Ge[qe]=qt[K[qe].source]/(qt[K[qe].source]+qt[K[qe].target]);this.bias=Ge;var yn,Pn,En=this.nodeSize,Ln=this.nodeSpacing;if(Pn=M(Ln)?function(){return Ln}:C(Ln)?Ln:function(){return 0},this.nodeSpacing=Pn,En)if(C(En))yn=function(pi){return En(pi)};else if(f(En)){var Zn=(En[0]>En[1]?En[0]:En[1])/2;yn=function(pi){return Zn}}else{var Qn=En/2;yn=function(pi){return Qn}}else yn=function(pi){return pi.size?f(pi.size)?(pi.size[0]>pi.size[1]?pi.size[0]:pi.size[1])/2:pi.size/2:10};this.nodeSize=yn;var qn,fr=this.comboSpacing;qn=M(fr)?function(){return fr}:C(fr)?fr:function(){return 0},this.comboSpacing=qn;var br,gr=this.comboPadding;br=M(gr)?function(){return gr}:f(gr)?function(){return Math.max.apply(null,gr)}:C(gr)?gr:function(){return 0},this.comboPadding=br;var hr,Tr=this.linkDistance;Tr||(Tr=10),hr=M(Tr)?function(Cr){return Tr}:Tr,this.linkDistance=hr;var dr,Jr=this.edgeStrength;Jr||(Jr=1),dr=M(Jr)?function(Cr){return Jr}:Jr,this.edgeStrength=dr;var qr,wi=this.nodeStrength;wi||(wi=30),qr=M(wi)?function(Cr){return wi}:wi,this.nodeStrength=qr}},{key:"initPos",value:function(K){this.nodes.forEach(function(Pt,Qt){var qt=Pt.comboId,xe=K[qt];qt&&xe?(Pt.x=xe.cx+100/(Qt+1),Pt.y=xe.cy+100/(Qt+1)):(Pt.x=100/(Qt+1),Pt.y=100/(Qt+1))})}},{key:"getComboMap",value:function(){var K=this,Pt=K.nodeMap,Qt=K.indexMap,qt=K.comboTrees,xe=K.oriComboMap,Ie={};return(qt||[]).forEach(function(Ye){var Re=[];d(Ye,function(Xe){if(Xe.itemType==="node"||!xe[Xe.id])return!0;if(Ie[Xe.id]===void 0){var Je={id:Xe.id,name:Xe.id,cx:0,cy:0,count:0,depth:K.oriComboMap[Xe.id].depth,children:[]};Ie[Xe.id]=Je}var Ge=Xe.children;Ge&&Ge.forEach(function(Zn){if(!Ie[Zn.id]&&!Pt[Zn.id])return!0;Re.push(Zn)});var qe=Ie[Xe.id];if(qe.cx=0,qe.cy=0,Re.length===0){qe.empty=!0;var yn=xe[Xe.id],Pn=Object.keys(Pt).length,En="".concat(Xe.id,"-visual-child-").concat(Pn),Ln={id:En,x:yn.x,y:yn.y,depth:qe.depth+1,itemType:"node"};K.nodes.push(Ln),Pt[En]=Ln,Qt[En]=Pn,qe.cx=yn.x,qe.cy=yn.y,Re.push(Ln)}return Re.forEach(function(Zn){if(qe.count++,Zn.itemType!=="node"){var Qn=Ie[Zn.id];return M(Qn.cx)&&(qe.cx+=Qn.cx),void(M(Qn.cy)&&(qe.cy+=Qn.cy))}var qn=Pt[Zn.id];qn&&(M(qn.x)&&(qe.cx+=qn.x),M(qn.y)&&(qe.cy+=qn.y))}),qe.cx/=qe.count,qe.cy/=qe.count,qe.children=Re,!0})}),Ie}},{key:"applyComboCenterForce",value:function(K){var Pt=this.gravity,Qt=this.comboGravity||Pt,qt=this.alpha,xe=this.comboTrees,Ie=this.indexMap,Ye=this.nodeMap,Re=this.comboMap;(xe||[]).forEach(function(Xe){d(Xe,function(Je){if(Je.itemType==="node"||!Re[Je.id])return!0;var Ge=Re[Je.id],qe=(Ge.depth+1)/10*.5,yn=Ge.cx,Pn=Ge.cy;return Ge.cx=0,Ge.cy=0,Ge.children.forEach(function(En){if(En.itemType!=="node"){var Ln=Re[En.id];return Ln&&M(Ln.cx)&&(Ge.cx+=Ln.cx),void(Ln&&M(Ln.cy)&&(Ge.cy+=Ln.cy))}var Zn=Ye[En.id],Qn=Zn.x-yn||.005,qn=Zn.y-Pn||.005,fr=Math.sqrt(Qn*Qn+qn*qn),br=Ie[Zn.id],gr=Qt*qt/fr*qe;K[br].x-=Qn*gr,K[br].y-=qn*gr,M(Zn.x)&&(Ge.cx+=Zn.x),M(Zn.y)&&(Ge.cy+=Zn.y)}),Ge.cx/=Ge.count,Ge.cy/=Ge.count,!0})})}},{key:"applyCalculate",value:function(K){var Pt=this.comboMap,Qt=this.nodes,qt={};Qt.forEach(function(xe,Ie){Qt.forEach(function(Ye,Re){if(!(Ie<Re)){var Xe=xe.x-Ye.x||.005,Je=xe.y-Ye.y||.005,Ge=Xe*Xe+Je*Je,qe=Math.sqrt(Ge);Ge<1&&(Ge=qe),qt["".concat(xe.id,"-").concat(Ye.id)]={vx:Xe,vy:Je,vl2:Ge,vl:qe},qt["".concat(Ye.id,"-").concat(xe.id)]={vl2:Ge,vl:qe,vx:-Xe,vy:-Je}}})}),this.updateComboSizes(Pt),this.calRepulsive(K,qt),this.calAttractive(K,qt),this.preventComboOverlap&&this.comboNonOverlapping(K,Pt)}},{key:"updateComboSizes",value:function(K){var Pt=this,Qt=Pt.comboTrees,qt=Pt.nodeMap,xe=Pt.nodeSize,Ie=Pt.comboSpacing,Ye=Pt.comboPadding;(Qt||[]).forEach(function(Re){var Xe=[];d(Re,function(Je){if(Je.itemType==="node")return!0;var Ge=K[Je.id];if(!Ge)return!1;var qe=Je.children;qe&&qe.forEach(function(En){(K[En.id]||qt[En.id])&&Xe.push(En)}),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0,Xe.forEach(function(En){if(En.itemType!=="node")return!0;var Ln=qt[En.id];if(!Ln)return!0;var Zn=xe(Ln),Qn=Ln.x-Zn,qn=Ln.y-Zn,fr=Ln.x+Zn,br=Ln.y+Zn;Ge.minX>Qn&&(Ge.minX=Qn),Ge.minY>qn&&(Ge.minY=qn),Ge.maxX<fr&&(Ge.maxX=fr),Ge.maxY<br&&(Ge.maxY=br)});var yn=Pt.oriComboMap[Je.id].size||10;f(yn)&&(yn=yn[0]);var Pn=Math.max(Ge.maxX-Ge.minX,Ge.maxY-Ge.minY,yn);return Ge.r=Pn/2+Ie(Ge)/2+Ye(Ge),!0})})}},{key:"comboNonOverlapping",value:function(K,Pt){var Qt=this.comboTree,qt=this.comboCollideStrength,xe=this.indexMap,Ie=this.nodeMap;d(Qt,function(Ye){if(!Pt[Ye.id]&&!Ie[Ye.id]&&Ye.id!=="comboTreeRoot")return!1;var Re=Ye.children;return Re&&Re.length>1&&Re.forEach(function(Xe,Je){if(Xe.itemType==="node")return!1;var Ge=Pt[Xe.id];Ge&&Re.forEach(function(qe,yn){if(Je<=yn||qe.itemType==="node")return!1;var Pn=Pt[qe.id];if(!Pn)return!1;var En=Ge.cx-Pn.cx||.005,Ln=Ge.cy-Pn.cy||.005,Zn=En*En+Ln*Ln,Qn=Ge.r,qn=Pn.r,fr=Qn+qn,br=qn*qn,gr=Qn*Qn;if(Zn<fr*fr){var hr=Xe.children;if(!hr||hr.length===0)return!1;var Tr=qe.children;if(!Tr||Tr.length===0)return!1;var dr=Math.sqrt(Zn),Jr=(fr-dr)/dr*qt,qr=En*Jr,wi=Ln*Jr,Cr=br/(gr+br),pi=1-Cr;hr.forEach(function(Ei){if(Ei.itemType!=="node")return!1;if(Ie[Ei.id]){var ji=xe[Ei.id];Tr.forEach(function(Ao){if(Ao.itemType!=="node"||!Ie[Ao.id])return!1;var go=xe[Ao.id];K[ji].x+=qr*Cr,K[ji].y+=wi*Cr,K[go].x-=qr*pi,K[go].y-=wi*pi})}})}})}),!0})}},{key:"calRepulsive",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.width*Qt.optimizeRangeFactor,Ie=Qt.nodeStrength,Ye=Qt.alpha,Re=Qt.nodeCollideStrength,Xe=Qt.preventNodeOverlap,Je=Qt.nodeSize,Ge=Qt.nodeSpacing,qe=Qt.depthRepulsiveForceScale,yn=Qt.center;qt.forEach(function(Pn,En){if(Pn.x&&Pn.y){if(yn){var Ln=Qt.gravity,Zn=Pn.x-yn[0]||.005,Qn=Pn.y-yn[1]||.005,qn=Math.sqrt(Zn*Zn+Qn*Qn);K[En].x-=Zn*Ln*Ye/qn,K[En].y-=Qn*Ln*Ye/qn}qt.forEach(function(fr,br){if(En!==br&&fr.x&&fr.y){var gr=Pt["".concat(Pn.id,"-").concat(fr.id)],hr=gr.vl2,Tr=gr.vl;if(!(Tr>xe)){var dr=Pt["".concat(Pn.id,"-").concat(fr.id)],Jr=dr.vx,qr=dr.vy,wi=Math.log(Math.abs(fr.depth-Pn.depth)/10)+1||1;wi=wi<1?1:wi,fr.comboId!==Pn.comboId&&(wi+=1);var Cr=wi?Math.pow(qe,wi):1,pi=Ie(fr)*Ye/hr*Cr;if(K[En].x+=Jr*pi,K[En].y+=qr*pi,En<br&&Xe){var Ei=Je(Pn)+Ge(Pn),ji=Je(fr)+Ge(fr),Ao=Ei+ji;if(hr<Ao*Ao){var go=(Ao-Tr)/Tr*Re,Ii=ji*ji,Gi=Ii/(Ei*Ei+Ii),Po=Jr*go,Fo=qr*go;K[En].x+=Po*Gi,K[En].y+=Fo*Gi,Gi=1-Gi,K[br].x-=Po*Gi,K[br].y-=Fo*Gi}}}}})}})}},{key:"calAttractive",value:function(K,Pt){var Qt=this,qt=Qt.edges,xe=Qt.linkDistance,Ie=Qt.alpha,Ye=Qt.edgeStrength,Re=Qt.bias,Xe=Qt.depthAttractiveForceScale;qt.forEach(function(Je,Ge){if(Je.source&&Je.target&&Je.source!==Je.target){var qe=Qt.indexMap[Je.source],yn=Qt.indexMap[Je.target],Pn=Qt.nodeMap[Je.source],En=Qt.nodeMap[Je.target];if(Pn&&En){var Ln=Math.log(Math.abs(Pn.depth-En.depth)/10);Pn.comboId===En.comboId&&(Ln/=2);var Zn=Ln?Math.pow(Xe,Ln):1;if(Pn.comboId!==En.comboId&&Zn===1?Zn=Xe/2:Pn.comboId===En.comboId&&(Zn=2),M(En.x)&&M(Pn.x)&&M(En.y)&&M(Pn.y)){var Qn=Pt["".concat(Je.target,"-").concat(Je.source)],qn=Qn.vl,fr=Qn.vx,br=Qn.vy,gr=(qn-xe(Je))/qn*Ie*Ye(Je)*Zn,hr=fr*gr,Tr=br*gr,dr=Re[Ge];K[yn].x-=hr*dr,K[yn].y-=Tr*dr,K[qe].x+=hr*(1-dr),K[qe].y+=Tr*(1-dr)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&zr(_.prototype,w),L&&zr(_,L),It}(x),vo,po=new Proxy({},{get:function(_,w){return Wn(w)},set:function(_,w,L){return mn(w,L),!0}});vo||(vo={}),mn("grid",ht),mn("random",Ot),mn("force",$r),mn("circular",Pi),mn("dagre",Oe),mn("radial",Pe),mn("concentric",oi),mn("mds",Uo),mn("fruchterman",Xo),mn("fruchterman-gpu",be),mn("gForce",it),mn("gForce-gpu",cr),mn("comboForce",Ki);var yo=self;yo.onmessage=function(Q){(function(_){var w=_.data.type;return w===Vi||w===pr})(Q)&&function(_){switch(_.data.type){case Vi:var w=_.data,L=w.nodes,J=w.edges,It=w.layoutCfg,Nt=It===void 0?{}:It,K=Nt.type,Pt=Wn(K);if(!Pt){yo.postMessage({type:jr,message:"layout ".concat(K," not found")});break}var Qt=new Pt(Nt);Qt.init({nodes:L,edges:J}),Qt.execute(),yo.postMessage({nodes:L,type:ro}),Qt.destroy();break;case pr:var qt=_.data,xe=qt.nodes,Ie=qt.edges,Ye=qt.layoutCfg,Re=Ye===void 0?{}:Ye,Xe=qt.canvas,Je=Re.type,Ge=Wn(Je);if(!Ge){yo.postMessage({type:jr,message:"layout ".concat(Je," not found")});break}if(Je.split("-")[1]!=="gpu"){yo.postMessage({type:jr,message:"layout ".concat(Je," does not support GPU")});break}var qe=new Ge(Re);qe.init({nodes:xe,edges:Ie}),qe.executeWithWorker(Xe,yo)}}(Q)};var wo=function(_,w){w.isCustomLayout=!0,mn(_,w)}},function(a,A,e){"use strict";e.d(A,"a",function(){return b}),e.d(A,"b",function(){return S});var i=e(36),v=e(22);function b(f,M){M.forEach(function(I){I.draw(f)})}function S(f,M){var I=f.get("canvas");if(I&&I.get("autoDraw")){var y=I.get("context"),n=f.getParent(),s=n?n.getChildren():[I],d=f.get("el");if(M==="remove")if(f.get("isClipShape")){var E=d&&d.parentNode,O=E&&E.parentNode;E&&O&&O.removeChild(E)}else d&&d.parentNode&&d.parentNode.removeChild(d);else if(M==="show")d.setAttribute("visibility","visible");else if(M==="hide")d.setAttribute("visibility","hidden");else if(M==="zIndex")Object(v.c)(d,s.indexOf(f));else if(M==="sort"){var C=f.get("children");C&&C.length&&Object(v.d)(f,function(p,x){return C.indexOf(p)-C.indexOf(x)?1:0})}else M==="clear"?d&&(d.innerHTML=""):M==="matrix"?Object(i.c)(f):M==="clip"?Object(i.a)(f,y):M==="attr"||M==="add"&&f.draw(y)}}},function(a,A){a.exports=function(e,i){return e===i||e!=e&&i!=i}},function(a,A,e){var i=e(47).Symbol;a.exports=i},function(a,A,e){(function(i){function v(n){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var b=e(47),S=e(304),f=v(A)=="object"&&A&&!A.nodeType&&A,M=f&&v(i)=="object"&&i&&!i.nodeType&&i,I=M&&M.exports===f?b.Buffer:void 0,y=(I?I.isBuffer:void 0)||S;i.exports=y}).call(this,e(86)(a))},function(a,A,e){var i=e(313),v=e(125),b=e(314),S=e(176),f=e(315),M=e(57),I=e(165),y=I(i),n=I(v),s=I(b),d=I(S),E=I(f),O=M;(i&&O(new i(new ArrayBuffer(1)))!="[object DataView]"||v&&O(new v)!="[object Map]"||b&&O(b.resolve())!="[object Promise]"||S&&O(new S)!="[object Set]"||f&&O(new f)!="[object WeakMap]")&&(O=function(p){var x=M(p),T=x=="[object Object]"?p.constructor:void 0,N=T?I(T):"";if(N)switch(N){case y:return"[object DataView]";case n:return"[object Map]";case s:return"[object Promise]";case d:return"[object Set]";case E:return"[object WeakMap]"}return x}),a.exports=O},function(a,A,e){function i(S){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(S)}var v=e(57),b=e(48);a.exports=function(S){return i(S)=="symbol"||b(S)&&v(S)=="[object Symbol]"}},function(a,A,e){"use strict";var i=e(1),v=e(18),b=e(56),S=e(29),f=e(0),M=e(17),I=function(y){function n(){return y!==null&&y.apply(this,arguments)||this}return Object(i.b)(n,y),n.prototype.onCanvasChange=function(s){Object(S.h)(this,s)},n.prototype.getShapeBase=function(){return b},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(s,d){d&&(s.save(),Object(S.a)(s,d),d.createPath(s),s.restore(),s.clip(),d._afterDraw())},n.prototype.cacheCanvasBBox=function(){var s=this.cfg.children,d=[],E=[];Object(f.f)(s,function(q){var nt=q.cfg.cacheCanvasBBox;nt&&q.cfg.isInView&&(d.push(nt.minX,nt.maxX),E.push(nt.minY,nt.maxY))});var O=null;if(d.length){var C=Math.min.apply(null,d),p=Math.max.apply(null,d),x=Math.min.apply(null,E),T=Math.max.apply(null,E);O={minX:C,minY:x,x:C,y:x,maxX:p,maxY:T,width:p-C,height:T-x};var N=this.cfg.canvas;if(N){var Y=N.getViewRange();this.set("isInView",Object(M.f)(O,Y))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",O)},n.prototype.draw=function(s,d){var E=this.cfg.children,O=!d||this.cfg.refresh;E.length&&O&&(s.save(),Object(S.a)(s,this),this._applyClip(s,this.getClip()),Object(S.d)(s,E,d),s.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(v.AbstractGroup);A.a=I},function(a,A,e){"use strict";var i=e(1),v=e(18),b=e(0),S=e(78),f=e(70),M=e(36),I=e(16),y=e(22),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(i.b)(d,s),d.prototype.isEntityGroup=function(){return!0},d.prototype.createDom=function(){var E=Object(y.b)("g");this.set("el",E);var O=this.getParent();if(O){var C=O.get("el");C||(C=O.createDom(),O.set("el",C)),C.appendChild(E)}return E},d.prototype.afterAttrsChange=function(E){s.prototype.afterAttrsChange.call(this,E);var O=this.get("canvas");if(O&&O.get("autoDraw")){var C=O.get("context");this.createPath(C,E)}},d.prototype.onCanvasChange=function(E){Object(f.b)(this,E)},d.prototype.getShapeBase=function(){return S},d.prototype.getGroupBase=function(){return d},d.prototype.draw=function(E){var O=this.getChildren(),C=this.get("el");this.get("destroyed")?C&&C.parentNode.removeChild(C):(C||this.createDom(),Object(M.a)(this,E),this.createPath(E),O.length&&Object(f.a)(E,O))},d.prototype.createPath=function(E,O){var C=this.attr(),p=this.get("el");Object(b.f)(O||C,function(x,T){I.b[T]&&p.setAttribute(I.b[T],x)}),Object(M.c)(this)},d}(v.AbstractGroup);A.a=n},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return n}),e.d(A,"Circle",function(){return d}),e.d(A,"Dom",function(){return E}),e.d(A,"Ellipse",function(){return O}),e.d(A,"Image",function(){return C}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return Y}),e.d(A,"Path",function(){return q}),e.d(A,"Polygon",function(){return nt}),e.d(A,"Polyline",function(){return vt}),e.d(A,"Rect",function(){return ht}),e.d(A,"Text",function(){return Ft});var i={};e.r(i),e.d(i,"Base",function(){return n}),e.d(i,"Circle",function(){return d}),e.d(i,"Dom",function(){return E}),e.d(i,"Ellipse",function(){return O}),e.d(i,"Image",function(){return C}),e.d(i,"Line",function(){return x}),e.d(i,"Marker",function(){return Y}),e.d(i,"Path",function(){return q}),e.d(i,"Polygon",function(){return nt}),e.d(i,"Polyline",function(){return vt}),e.d(i,"Rect",function(){return ht}),e.d(i,"Text",function(){return Ft});var v=e(1),b=e(18),S=e(36),f=e(22),M=e(70),I=e(16),y=e(77),n=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="svg",X.canFill=!1,X.canStroke=!1,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},Ot.prototype.afterAttrsChange=function(X){kt.prototype.afterAttrsChange.call(this,X);var ct=this.get("canvas");if(ct&&ct.get("autoDraw")){var dt=ct.get("context");this.draw(dt,X)}},Ot.prototype.getShapeBase=function(){return i},Ot.prototype.getGroupBase=function(){return y.a},Ot.prototype.onCanvasChange=function(X){Object(M.b)(this,X)},Ot.prototype.calculateBBox=function(){var X=this.get("el"),ct=null;if(X)ct=X.getBBox();else{var dt=Object(b.getBBoxMethod)(this.get("type"));dt&&(ct=dt(this))}if(ct){var pt=ct.x,Mt=ct.y,tt=ct.width,lt=ct.height,it=this.getHitLineWidth(),U=it/2,P=pt-U,H=Mt-U;return{x:P,y:H,minX:P,minY:H,maxX:pt+tt+U,maxY:Mt+lt+U,width:tt+it,height:lt+it}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},Ot.prototype.isFill=function(){var X=this.attr(),ct=X.fill,dt=X.fillStyle;return(ct||dt||this.isClipShape())&&this.canFill},Ot.prototype.isStroke=function(){var X=this.attr(),ct=X.stroke,dt=X.strokeStyle;return(ct||dt)&&this.canStroke},Ot.prototype.draw=function(X,ct){var dt=this.get("el");this.get("destroyed")?dt&&dt.parentNode.removeChild(dt):(dt||Object(f.a)(this),Object(S.a)(this,X),this.createPath(X,ct),this.shadow(X,ct),this.strokeAndFill(X,ct),this.transform(ct))},Ot.prototype.createPath=function(X,ct){},Ot.prototype.strokeAndFill=function(X,ct){var dt=ct||this.attr(),pt=dt.fill,Mt=dt.fillStyle,tt=dt.stroke,lt=dt.strokeStyle,it=dt.fillOpacity,U=dt.strokeOpacity,P=dt.lineWidth,H=this.get("el");this.canFill&&(ct?"fill"in dt?this._setColor(X,"fill",pt):"fillStyle"in dt&&this._setColor(X,"fill",Mt):this._setColor(X,"fill",pt||Mt),it&&H.setAttribute(I.b.fillOpacity,it)),this.canStroke&&P>0&&(ct?"stroke"in dt?this._setColor(X,"stroke",tt):"strokeStyle"in dt&&this._setColor(X,"stroke",lt):this._setColor(X,"stroke",tt||lt),U&&H.setAttribute(I.b.strokeOpacity,U),P&&H.setAttribute(I.b.lineWidth,P))},Ot.prototype._setColor=function(X,ct,dt){var pt=this.get("el");if(dt)if(dt=dt.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(dt))(Mt=X.find("gradient",dt))||(Mt=X.addGradient(dt)),pt.setAttribute(I.b[ct],"url(#"+Mt+")");else if(/^[p,P]{1}[\s]*\(/.test(dt)){var Mt;(Mt=X.find("pattern",dt))||(Mt=X.addPattern(dt)),pt.setAttribute(I.b[ct],"url(#"+Mt+")")}else pt.setAttribute(I.b[ct],dt);else pt.setAttribute(I.b[ct],"none")},Ot.prototype.shadow=function(X,ct){var dt=this.attr(),pt=ct||dt,Mt=pt.shadowOffsetX,tt=pt.shadowOffsetY,lt=pt.shadowBlur,it=pt.shadowColor;(Mt||tt||lt||it)&&Object(S.b)(this,X)},Ot.prototype.transform=function(X){var ct=this.attr();(X||ct).matrix&&Object(S.c)(this)},Ot.prototype.isInShape=function(X,ct){return this.isPointInPath(X,ct)},Ot.prototype.isPointInPath=function(X,ct){var dt=this.get("el"),pt=this.get("canvas").get("el").getBoundingClientRect(),Mt=X+pt.left,tt=ct+pt.top,lt=document.elementFromPoint(Mt,tt);return!(!lt||!lt.isEqualNode(dt))},Ot.prototype.getHitLineWidth=function(){var X=this.attrs,ct=X.lineWidth,dt=X.lineAppendWidth;return this.isStroke()?ct+dt:0},Ot}(b.AbstractShape),s=e(0),d=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="circle",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x:0,y:0,r:0})},Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");Object(s.f)(ct||dt,function(Mt,tt){tt==="x"||tt==="y"?pt.setAttribute("c"+tt,Mt):I.b[tt]&&pt.setAttribute(I.b[tt],Mt)})},Ot}(n),E=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="dom",X.canFill=!1,X.canStroke=!1,X}return Object(v.b)(Ot,kt),Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");if(Object(s.f)(ct||dt,function(it,U){I.b[U]&&pt.setAttribute(I.b[U],it)}),typeof dt.html=="function"){var Mt=dt.html.call(this,dt);if(Mt instanceof Element||Mt instanceof HTMLDocument){for(var tt=pt.childNodes,lt=tt.length-1;lt>=0;lt--)pt.removeChild(tt[lt]);pt.appendChild(Mt)}else pt.innerHTML=Mt}else pt.innerHTML=dt.html},Ot}(n),O=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="ellipse",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x:0,y:0,rx:0,ry:0})},Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");Object(s.f)(ct||dt,function(Mt,tt){tt==="x"||tt==="y"?pt.setAttribute("c"+tt,Mt):I.b[tt]&&pt.setAttribute(I.b[tt],Mt)})},Ot}(n),C=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="image",X.canFill=!1,X.canStroke=!1,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x:0,y:0,width:0,height:0})},Ot.prototype.createPath=function(X,ct){var dt=this,pt=this.attr(),Mt=this.get("el");Object(s.f)(ct||pt,function(tt,lt){lt==="img"?dt._setImage(pt.img):I.b[lt]&&Mt.setAttribute(I.b[lt],tt)})},Ot.prototype.setAttr=function(X,ct){this.attrs[X]=ct,X==="img"&&this._setImage(ct)},Ot.prototype._setImage=function(X){var ct=this.attr(),dt=this.get("el");if(Object(s.x)(X))dt.setAttribute("href",X);else if(X instanceof window.Image)ct.width||(dt.setAttribute("width",X.width),this.attr("width",X.width)),ct.height||(dt.setAttribute("height",X.height),this.attr("height",X.height)),dt.setAttribute("href",X.src);else if(X instanceof HTMLElement&&Object(s.x)(X.nodeName)&&X.nodeName.toUpperCase()==="CANVAS")dt.setAttribute("href",X.toDataURL());else if(X instanceof ImageData){var pt=document.createElement("canvas");pt.setAttribute("width",""+X.width),pt.setAttribute("height",""+X.height),pt.getContext("2d").putImageData(X,0,0),ct.width||(dt.setAttribute("width",""+X.width),this.attr("width",X.width)),ct.height||(dt.setAttribute("height",""+X.height),this.attr("height",X.height)),dt.setAttribute("href",pt.toDataURL())}},Ot}(n),p=e(20),x=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="line",X.canFill=!1,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");Object(s.f)(ct||dt,function(Mt,tt){if(tt==="startArrow"||tt==="endArrow")if(Mt){var lt=Object(s.v)(Mt)?X.addArrow(dt,I.b[tt]):X.getDefaultArrow(dt,I.b[tt]);pt.setAttribute(I.b[tt],"url(#"+lt+")")}else pt.removeAttribute(I.b[tt]);else I.b[tt]&&pt.setAttribute(I.b[tt],Mt)})},Ot.prototype.getTotalLength=function(){var X=this.attr(),ct=X.x1,dt=X.y1,pt=X.x2,Mt=X.y2;return p.c.length(ct,dt,pt,Mt)},Ot.prototype.getPoint=function(X){var ct=this.attr(),dt=ct.x1,pt=ct.y1,Mt=ct.x2,tt=ct.y2;return p.c.pointAt(dt,pt,Mt,tt,X)},Ot}(n),T={circle:function(Ot,X,ct){return[["M",Ot,X],["m",-ct,0],["a",ct,ct,0,1,0,2*ct,0],["a",ct,ct,0,1,0,2*-ct,0]]},square:function(Ot,X,ct){return[["M",Ot-ct,X-ct],["L",Ot+ct,X-ct],["L",Ot+ct,X+ct],["L",Ot-ct,X+ct],["Z"]]},diamond:function(Ot,X,ct){return[["M",Ot-ct,X],["L",Ot,X-ct],["L",Ot+ct,X],["L",Ot,X+ct],["Z"]]},triangle:function(Ot,X,ct){var dt=ct*Math.sin(1/3*Math.PI);return[["M",Ot-ct,X+dt],["L",Ot,X-dt],["L",Ot+ct,X+dt],["z"]]},triangleDown:function(Ot,X,ct){var dt=ct*Math.sin(1/3*Math.PI);return[["M",Ot-ct,X-dt],["L",Ot+ct,X-dt],["L",Ot,X+dt],["Z"]]}},N={get:function(Ot){return T[Ot]},register:function(Ot,X){T[Ot]=X},remove:function(Ot){delete T[Ot]},getAll:function(){return T}},Y=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="marker",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.createPath=function(X){this.get("el").setAttribute("d",this._assembleMarker())},Ot.prototype._assembleMarker=function(){var X=this._getPath();return Object(s.m)(X)?X.map(function(ct){return ct.join(" ")}).join(""):X},Ot.prototype._getPath=function(){var X,ct=this.attr(),dt=ct.x,pt=ct.y,Mt=ct.r||ct.radius,tt=ct.symbol||"circle";return(X=Object(s.r)(tt)?tt:N.get(tt))?X(dt,pt,Mt):(console.warn(X+" symbol is not exist."),null)},Ot.symbolsFactory=N,Ot}(n),q=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="path",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{startArrow:!1,endArrow:!1})},Ot.prototype.createPath=function(X,ct){var dt=this,pt=this.attr(),Mt=this.get("el");Object(s.f)(ct||pt,function(tt,lt){if(lt==="path"&&Object(s.m)(tt))Mt.setAttribute("d",dt._formatPath(tt));else if(lt==="startArrow"||lt==="endArrow")if(tt){var it=Object(s.v)(tt)?X.addArrow(pt,I.b[lt]):X.getDefaultArrow(pt,I.b[lt]);Mt.setAttribute(I.b[lt],"url(#"+it+")")}else Mt.removeAttribute(I.b[lt]);else I.b[lt]&&Mt.setAttribute(I.b[lt],tt)})},Ot.prototype._formatPath=function(X){var ct=X.map(function(dt){return dt.join(" ")}).join("");return~ct.indexOf("NaN")?"":ct},Ot.prototype.getTotalLength=function(){var X=this.get("el");return X?X.getTotalLength():null},Ot.prototype.getPoint=function(X){var ct=this.get("el"),dt=this.getTotalLength();if(dt===0)return null;var pt=ct?ct.getPointAtLength(X*dt):null;return pt?{x:pt.x,y:pt.y}:null},Ot}(n),nt=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="polygon",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");Object(s.f)(ct||dt,function(Mt,tt){tt==="points"&&Object(s.m)(Mt)&&Mt.length>=2?pt.setAttribute("points",Mt.map(function(lt){return lt[0]+","+lt[1]}).join(" ")):I.b[tt]&&pt.setAttribute(I.b[tt],Mt)})},Ot}(n),vt=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="polyline",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{startArrow:!1,endArrow:!1})},Ot.prototype.onAttrChange=function(X,ct,dt){kt.prototype.onAttrChange.call(this,X,ct,dt),["points"].indexOf(X)!==-1&&this._resetCache()},Ot.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},Ot.prototype.createPath=function(X,ct){var dt=this.attr(),pt=this.get("el");Object(s.f)(ct||dt,function(Mt,tt){tt==="points"&&Object(s.m)(Mt)&&Mt.length>=2?pt.setAttribute("points",Mt.map(function(lt){return lt[0]+","+lt[1]}).join(" ")):I.b[tt]&&pt.setAttribute(I.b[tt],Mt)})},Ot.prototype.getTotalLength=function(){var X=this.attr().points,ct=this.get("totalLength");return Object(s.s)(ct)?(this.set("totalLength",p.d.length(X)),this.get("totalLength")):ct},Ot.prototype.getPoint=function(X){var ct,dt,pt=this.attr().points,Mt=this.get("tCache");return Mt||(this._setTcache(),Mt=this.get("tCache")),Object(s.f)(Mt,function(tt,lt){X>=tt[0]&&X<=tt[1]&&(ct=(X-tt[0])/(tt[1]-tt[0]),dt=lt)}),p.c.pointAt(pt[dt][0],pt[dt][1],pt[dt+1][0],pt[dt+1][1],ct)},Ot.prototype._setTcache=function(){var X=this.attr().points;if(X&&X.length!==0){var ct=this.getTotalLength();if(!(ct<=0)){var dt,pt,Mt=0,tt=[];Object(s.f)(X,function(lt,it){X[it+1]&&((dt=[])[0]=Mt/ct,pt=p.c.length(lt[0],lt[1],X[it+1][0],X[it+1][1]),Mt+=pt,dt[1]=Mt/ct,tt.push(dt))}),this.set("tCache",tt)}}},Ot.prototype.getStartTangent=function(){var X=this.attr().points,ct=[];return ct.push([X[1][0],X[1][1]]),ct.push([X[0][0],X[0][1]]),ct},Ot.prototype.getEndTangent=function(){var X=this.attr().points,ct=X.length-1,dt=[];return dt.push([X[ct-1][0],X[ct-1][1]]),dt.push([X[ct][0],X[ct][1]]),dt},Ot}(n),ht=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="rect",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x:0,y:0,width:0,height:0,radius:0})},Ot.prototype.createPath=function(X,ct){var dt=this,pt=this.attr(),Mt=this.get("el"),tt=!1,lt=["x","y","width","height","radius"];Object(s.f)(ct||pt,function(it,U){lt.indexOf(U)===-1||tt?lt.indexOf(U)===-1&&I.b[U]&&Mt.setAttribute(I.b[U],it):(Mt.setAttribute("d",dt._assembleRect(pt)),tt=!0)})},Ot.prototype._assembleRect=function(X){var ct=X.x,dt=X.y,pt=X.width,Mt=X.height,tt=X.radius;if(!tt)return"M "+ct+","+dt+" l "+pt+",0 l 0,"+Mt+" l"+-pt+" 0 z";var lt=function(it){var U=0,P=0,H=0,k=0;return Object(s.m)(it)?it.length===1?U=P=H=k=it[0]:it.length===2?(U=H=it[0],P=k=it[1]):it.length===3?(U=it[0],P=k=it[1],H=it[2]):(U=it[0],P=it[1],H=it[2],k=it[3]):U=P=H=k=it,{r1:U,r2:P,r3:H,r4:k}}(tt);return Object(s.m)(tt)?tt.length===1?lt.r1=lt.r2=lt.r3=lt.r4=tt[0]:tt.length===2?(lt.r1=lt.r3=tt[0],lt.r2=lt.r4=tt[1]):tt.length===3?(lt.r1=tt[0],lt.r2=lt.r4=tt[1],lt.r3=tt[2]):(lt.r1=tt[0],lt.r2=tt[1],lt.r3=tt[2],lt.r4=tt[3]):lt.r1=lt.r2=lt.r3=lt.r4=tt,[["M "+(ct+lt.r1)+","+dt],["l "+(pt-lt.r1-lt.r2)+",0"],["a "+lt.r2+","+lt.r2+",0,0,1,"+lt.r2+","+lt.r2],["l 0,"+(Mt-lt.r2-lt.r3)],["a "+lt.r3+","+lt.r3+",0,0,1,"+-lt.r3+","+lt.r3],["l "+(lt.r3+lt.r4-pt)+",0"],["a "+lt.r4+","+lt.r4+",0,0,1,"+-lt.r4+","+-lt.r4],["l 0,"+(lt.r4+lt.r1-Mt)],["a "+lt.r1+","+lt.r1+",0,0,1,"+lt.r1+","+-lt.r1],["z"]].join(" ")},Ot}(n),St=e(119),wt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ft={left:"left",start:"left",center:"middle",right:"end",end:"end"},Ft=function(kt){function Ot(){var X=kt!==null&&kt.apply(this,arguments)||this;return X.type="text",X.canFill=!0,X.canStroke=!0,X}return Object(v.b)(Ot,kt),Ot.prototype.getDefaultAttrs=function(){var X=kt.prototype.getDefaultAttrs.call(this);return Object(v.a)(Object(v.a)({},X),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},Ot.prototype.createPath=function(X,ct){var dt=this,pt=this.attr(),Mt=this.get("el");this._setFont(),Object(s.f)(ct||pt,function(tt,lt){lt==="text"?dt._setText(""+tt):lt==="matrix"&&tt?Object(S.c)(dt):I.b[lt]&&Mt.setAttribute(I.b[lt],tt)}),Mt.setAttribute("paint-order","stroke"),Mt.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},Ot.prototype._setFont=function(){var X=this.get("el"),ct=this.attr(),dt=ct.textBaseline,pt=ct.textAlign,Mt=Object(St.a)();Mt&&Mt.name==="firefox"?X.setAttribute("dominant-baseline",xt[dt]||"alphabetic"):X.setAttribute("alignment-baseline",wt[dt]||"baseline"),X.setAttribute("text-anchor",ft[pt]||"left")},Ot.prototype._setText=function(X){var ct=this.get("el"),dt=this.attr(),pt=dt.x,Mt=dt.textBaseline,tt=Mt===void 0?"bottom":Mt;if(X)if(~X.indexOf(`
`)){var lt=X.split(`
`),it=lt.length-1,U="";Object(s.f)(lt,function(P,H){H===0?tt==="alphabetic"?U+='<tspan x="'+pt+'" dy="'+-it+'em">'+P+"</tspan>":tt==="top"?U+='<tspan x="'+pt+'" dy="0.9em">'+P+"</tspan>":tt==="middle"?U+='<tspan x="'+pt+'" dy="'+-(it-1)/2+'em">'+P+"</tspan>":tt==="bottom"?U+='<tspan x="'+pt+'" dy="-'+(it+.3)+'em">'+P+"</tspan>":tt==="hanging"&&(U+='<tspan x="'+pt+'" dy="'+(-(it-1)-.3)+'em">'+P+"</tspan>"):U+='<tspan x="'+pt+'" dy="1em">'+P+"</tspan>"}),ct.innerHTML=U}else ct.innerHTML=X;else ct.innerHTML=""},Ot}(n)},function(a,A,e){"use strict";var i=function(){function v(){this._events={}}return v.prototype.on=function(b,S,f){return this._events[b]||(this._events[b]=[]),this._events[b].push({callback:S,once:!!f}),this},v.prototype.once=function(b,S){return this.on(b,S,!0),this},v.prototype.emit=function(b){for(var S=this,f=[],M=1;M<arguments.length;M++)f[M-1]=arguments[M];var I=this._events[b]||[],y=this._events["*"]||[],n=function(d){for(var E=d.length,O=0;O<E;O++)if(d[O]){var C=d[O],p=C.callback;C.once&&(d.splice(O,1),d.length===0&&delete S._events[b],E--,O--),p.apply(S,f)}};n(I),n(y)},v.prototype.off=function(b,S){if(b)if(S){for(var f=this._events[b]||[],M=f.length,I=0;I<M;I++)f[I].callback===S&&(f.splice(I,1),M--,I--);f.length===0&&delete this._events[b]}else delete this._events[b];else this._events={};return this},v.prototype.getEvents=function(){return this._events},v}();A.a=i},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return v}),e.d(A,"clone",function(){return b}),e.d(A,"fromValues",function(){return S}),e.d(A,"copy",function(){return f}),e.d(A,"set",function(){return M}),e.d(A,"add",function(){return I}),e.d(A,"subtract",function(){return y}),e.d(A,"multiply",function(){return n}),e.d(A,"divide",function(){return s}),e.d(A,"ceil",function(){return d}),e.d(A,"floor",function(){return E}),e.d(A,"min",function(){return O}),e.d(A,"max",function(){return C}),e.d(A,"round",function(){return p}),e.d(A,"scale",function(){return x}),e.d(A,"scaleAndAdd",function(){return T}),e.d(A,"distance",function(){return N}),e.d(A,"squaredDistance",function(){return Y}),e.d(A,"length",function(){return q}),e.d(A,"squaredLength",function(){return nt}),e.d(A,"negate",function(){return vt}),e.d(A,"inverse",function(){return ht}),e.d(A,"normalize",function(){return St}),e.d(A,"dot",function(){return wt}),e.d(A,"cross",function(){return xt}),e.d(A,"lerp",function(){return ft}),e.d(A,"random",function(){return Ft}),e.d(A,"transformMat2",function(){return kt}),e.d(A,"transformMat2d",function(){return Ot}),e.d(A,"transformMat3",function(){return X}),e.d(A,"transformMat4",function(){return ct}),e.d(A,"rotate",function(){return dt}),e.d(A,"angle",function(){return pt}),e.d(A,"zero",function(){return Mt}),e.d(A,"str",function(){return tt}),e.d(A,"exactEquals",function(){return lt}),e.d(A,"equals",function(){return it}),e.d(A,"len",function(){return P}),e.d(A,"sub",function(){return H}),e.d(A,"mul",function(){return k}),e.d(A,"div",function(){return h}),e.d(A,"dist",function(){return g}),e.d(A,"sqrDist",function(){return G}),e.d(A,"sqrLen",function(){return V}),e.d(A,"forEach",function(){return $});var i=e(11);function v(){var rt=new i.a(2);return i.a!=Float32Array&&(rt[0]=0,rt[1]=0),rt}function b(rt){var ot=new i.a(2);return ot[0]=rt[0],ot[1]=rt[1],ot}function S(rt,ot){var At=new i.a(2);return At[0]=rt,At[1]=ot,At}function f(rt,ot){return rt[0]=ot[0],rt[1]=ot[1],rt}function M(rt,ot,At){return rt[0]=ot,rt[1]=At,rt}function I(rt,ot,At){return rt[0]=ot[0]+At[0],rt[1]=ot[1]+At[1],rt}function y(rt,ot,At){return rt[0]=ot[0]-At[0],rt[1]=ot[1]-At[1],rt}function n(rt,ot,At){return rt[0]=ot[0]*At[0],rt[1]=ot[1]*At[1],rt}function s(rt,ot,At){return rt[0]=ot[0]/At[0],rt[1]=ot[1]/At[1],rt}function d(rt,ot){return rt[0]=Math.ceil(ot[0]),rt[1]=Math.ceil(ot[1]),rt}function E(rt,ot){return rt[0]=Math.floor(ot[0]),rt[1]=Math.floor(ot[1]),rt}function O(rt,ot,At){return rt[0]=Math.min(ot[0],At[0]),rt[1]=Math.min(ot[1],At[1]),rt}function C(rt,ot,At){return rt[0]=Math.max(ot[0],At[0]),rt[1]=Math.max(ot[1],At[1]),rt}function p(rt,ot){return rt[0]=Math.round(ot[0]),rt[1]=Math.round(ot[1]),rt}function x(rt,ot,At){return rt[0]=ot[0]*At,rt[1]=ot[1]*At,rt}function T(rt,ot,At,gt){return rt[0]=ot[0]+At[0]*gt,rt[1]=ot[1]+At[1]*gt,rt}function N(rt,ot){var At=ot[0]-rt[0],gt=ot[1]-rt[1];return Math.hypot(At,gt)}function Y(rt,ot){var At=ot[0]-rt[0],gt=ot[1]-rt[1];return At*At+gt*gt}function q(rt){var ot=rt[0],At=rt[1];return Math.hypot(ot,At)}function nt(rt){var ot=rt[0],At=rt[1];return ot*ot+At*At}function vt(rt,ot){return rt[0]=-ot[0],rt[1]=-ot[1],rt}function ht(rt,ot){return rt[0]=1/ot[0],rt[1]=1/ot[1],rt}function St(rt,ot){var At=ot[0],gt=ot[1],mt=At*At+gt*gt;return mt>0&&(mt=1/Math.sqrt(mt)),rt[0]=ot[0]*mt,rt[1]=ot[1]*mt,rt}function wt(rt,ot){return rt[0]*ot[0]+rt[1]*ot[1]}function xt(rt,ot,At){var gt=ot[0]*At[1]-ot[1]*At[0];return rt[0]=rt[1]=0,rt[2]=gt,rt}function ft(rt,ot,At,gt){var mt=ot[0],bt=ot[1];return rt[0]=mt+gt*(At[0]-mt),rt[1]=bt+gt*(At[1]-bt),rt}function Ft(rt,ot){ot=ot||1;var At=2*i.c()*Math.PI;return rt[0]=Math.cos(At)*ot,rt[1]=Math.sin(At)*ot,rt}function kt(rt,ot,At){var gt=ot[0],mt=ot[1];return rt[0]=At[0]*gt+At[2]*mt,rt[1]=At[1]*gt+At[3]*mt,rt}function Ot(rt,ot,At){var gt=ot[0],mt=ot[1];return rt[0]=At[0]*gt+At[2]*mt+At[4],rt[1]=At[1]*gt+At[3]*mt+At[5],rt}function X(rt,ot,At){var gt=ot[0],mt=ot[1];return rt[0]=At[0]*gt+At[3]*mt+At[6],rt[1]=At[1]*gt+At[4]*mt+At[7],rt}function ct(rt,ot,At){var gt=ot[0],mt=ot[1];return rt[0]=At[0]*gt+At[4]*mt+At[12],rt[1]=At[1]*gt+At[5]*mt+At[13],rt}function dt(rt,ot,At,gt){var mt=ot[0]-At[0],bt=ot[1]-At[1],jt=Math.sin(gt),Dt=Math.cos(gt);return rt[0]=mt*Dt-bt*jt+At[0],rt[1]=mt*jt+bt*Dt+At[1],rt}function pt(rt,ot){var At=rt[0],gt=rt[1],mt=ot[0],bt=ot[1],jt=Math.sqrt(At*At+gt*gt)*Math.sqrt(mt*mt+bt*bt),Dt=jt&&(At*mt+gt*bt)/jt;return Math.acos(Math.min(Math.max(Dt,-1),1))}function Mt(rt){return rt[0]=0,rt[1]=0,rt}function tt(rt){return"vec2("+rt[0]+", "+rt[1]+")"}function lt(rt,ot){return rt[0]===ot[0]&&rt[1]===ot[1]}function it(rt,ot){var At=rt[0],gt=rt[1],mt=ot[0],bt=ot[1];return Math.abs(At-mt)<=i.b*Math.max(1,Math.abs(At),Math.abs(mt))&&Math.abs(gt-bt)<=i.b*Math.max(1,Math.abs(gt),Math.abs(bt))}var U,P=q,H=y,k=n,h=s,g=N,G=Y,V=nt,$=(U=v(),function(rt,ot,At,gt,mt,bt){var jt,Dt;for(ot||(ot=2),At||(At=0),Dt=gt?Math.min(gt*ot+At,rt.length):rt.length,jt=At;jt<Dt;jt+=ot)U[0]=rt[jt],U[1]=rt[jt+1],mt(U,U,bt),rt[jt]=U[0],rt[jt+1]=U[1];return rt})},function(a,A){var e=[],i=[];function v(b,S){if(S=S||{},b===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var f,M=S.prepend===!0?"prepend":"append",I=S.container!==void 0?S.container:document.querySelector("head"),y=e.indexOf(I);return y===-1&&(y=e.push(I)-1,i[y]={}),i[y]!==void 0&&i[y][M]!==void 0?f=i[y][M]:(f=i[y][M]=function(){var n=document.createElement("style");return n.setAttribute("type","text/css"),n}(),M==="prepend"?I.insertBefore(f,I.childNodes[0]):I.appendChild(f)),b.charCodeAt(0)===65279&&(b=b.substr(1,b.length)),f.styleSheet?f.styleSheet.cssText+=b:f.textContent+=b,f}a.exports=v,a.exports.insertCss=v},function(a,A,e){"use strict";function i(O){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(O)}var v=e(263),b=e(267),S=[].slice,f=["keyword","gray","hex"],M={};Object.keys(b).forEach(function(O){M[S.call(b[O].labels).sort().join("")]=O});var I={};function y(O,C){if(!(this instanceof y))return new y(O,C);if(C&&C in f&&(C=null),C&&!(C in b))throw new Error("Unknown model: "+C);var p,x;if(O==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(O instanceof y)this.model=O.model,this.color=O.color.slice(),this.valpha=O.valpha;else if(typeof O=="string"){var T=v.get(O);if(T===null)throw new Error("Unable to parse color from string: "+O);this.model=T.model,x=b[this.model].channels,this.color=T.value.slice(0,x),this.valpha=typeof T.value[x]=="number"?T.value[x]:1}else if(O.length){this.model=C||"rgb",x=b[this.model].channels;var N=S.call(O,0,x);this.color=E(N,x),this.valpha=typeof O[x]=="number"?O[x]:1}else if(typeof O=="number")O&=16777215,this.model="rgb",this.color=[O>>16&255,O>>8&255,255&O],this.valpha=1;else{this.valpha=1;var Y=Object.keys(O);"alpha"in O&&(Y.splice(Y.indexOf("alpha"),1),this.valpha=typeof O.alpha=="number"?O.alpha:0);var q=Y.sort().join("");if(!(q in M))throw new Error("Unable to parse color from object: "+JSON.stringify(O));this.model=M[q];var nt=b[this.model].labels,vt=[];for(p=0;p<nt.length;p++)vt.push(O[nt[p]]);this.color=E(vt)}if(I[this.model])for(x=b[this.model].channels,p=0;p<x;p++){var ht=I[this.model][p];ht&&(this.color[p]=ht(this.color[p]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(O,C,p){return(O=Array.isArray(O)?O:[O]).forEach(function(x){(I[x]||(I[x]=[]))[C]=p}),O=O[0],function(x){var T;return arguments.length?(p&&(x=p(x)),(T=this[O]()).color[C]=x,T):(T=this[O]().color[C],p&&(T=p(T)),T)}}function s(O){return function(C){return Math.max(0,Math.min(O,C))}}function d(O){return Array.isArray(O)?O:[O]}function E(O,C){for(var p=0;p<C;p++)typeof O[p]!="number"&&(O[p]=0);return O}y.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(C){var p=this.model in v.to?this:this.rgb(),x=(p=p.round(typeof C=="number"?C:1)).valpha===1?p.color:p.color.concat(this.valpha);return v.to[p.model](x)},percentString:function(C){var p=this.rgb().round(typeof C=="number"?C:1),x=p.valpha===1?p.color:p.color.concat(this.valpha);return v.to.rgb.percent(x)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var C={},p=b[this.model].channels,x=b[this.model].labels,T=0;T<p;T++)C[x[T]]=this.color[T];return this.valpha!==1&&(C.alpha=this.valpha),C},unitArray:function(){var C=this.rgb().color;return C[0]/=255,C[1]/=255,C[2]/=255,this.valpha!==1&&C.push(this.valpha),C},unitObject:function(){var C=this.rgb().object();return C.r/=255,C.g/=255,C.b/=255,this.valpha!==1&&(C.alpha=this.valpha),C},round:function(C){return C=Math.max(C||0,0),new y(this.color.map(function(p){return function(x){return function(T,N){return Number(T.toFixed(N))}(x,p)}}(C)).concat(this.valpha),this.model)},alpha:function(C){return arguments.length?new y(this.color.concat(Math.max(0,Math.min(1,C))),this.model):this.valpha},red:n("rgb",0,s(255)),green:n("rgb",1,s(255)),blue:n("rgb",2,s(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(O){return(O%360+360)%360}),saturationl:n("hsl",1,s(100)),lightness:n("hsl",2,s(100)),saturationv:n("hsv",1,s(100)),value:n("hsv",2,s(100)),chroma:n("hcg",1,s(100)),gray:n("hcg",2,s(100)),white:n("hwb",1,s(100)),wblack:n("hwb",2,s(100)),cyan:n("cmyk",0,s(100)),magenta:n("cmyk",1,s(100)),yellow:n("cmyk",2,s(100)),black:n("cmyk",3,s(100)),x:n("xyz",0,s(100)),y:n("xyz",1,s(100)),z:n("xyz",2,s(100)),l:n("lab",0,s(100)),a:n("lab",1),b:n("lab",2),keyword:function(C){return arguments.length?new y(C):b[this.model].keyword(this.color)},hex:function(C){return arguments.length?new y(C):v.to.hex(this.rgb().round().color)},rgbNumber:function(){var C=this.rgb().color;return(255&C[0])<<16|(255&C[1])<<8|255&C[2]},luminosity:function(){for(var C=this.rgb().color,p=[],x=0;x<C.length;x++){var T=C[x]/255;p[x]=T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4)}return .2126*p[0]+.7152*p[1]+.0722*p[2]},contrast:function(C){var p=this.luminosity(),x=C.luminosity();return p>x?(p+.05)/(x+.05):(x+.05)/(p+.05)},level:function(C){var p=this.contrast(C);return p>=7.1?"AAA":p>=4.5?"AA":""},isDark:function(){var C=this.rgb().color;return(299*C[0]+587*C[1]+114*C[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var C=this.rgb(),p=0;p<3;p++)C.color[p]=255-C.color[p];return C},lighten:function(C){var p=this.hsl();return p.color[2]+=p.color[2]*C,p},darken:function(C){var p=this.hsl();return p.color[2]-=p.color[2]*C,p},saturate:function(C){var p=this.hsl();return p.color[1]+=p.color[1]*C,p},desaturate:function(C){var p=this.hsl();return p.color[1]-=p.color[1]*C,p},whiten:function(C){var p=this.hwb();return p.color[1]+=p.color[1]*C,p},blacken:function(C){var p=this.hwb();return p.color[2]+=p.color[2]*C,p},grayscale:function(){var C=this.rgb().color,p=.3*C[0]+.59*C[1]+.11*C[2];return y.rgb(p,p,p)},fade:function(C){return this.alpha(this.valpha-this.valpha*C)},opaquer:function(C){return this.alpha(this.valpha+this.valpha*C)},rotate:function(C){var p=this.hsl(),x=p.color[0];return x=(x=(x+C)%360)<0?360+x:x,p.color[0]=x,p},mix:function(C,p){if(!C||!C.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+i(C));var x=C.rgb(),T=this.rgb(),N=p===void 0?.5:p,Y=2*N-1,q=x.alpha()-T.alpha(),nt=((Y*q==-1?Y:(Y+q)/(1+Y*q))+1)/2,vt=1-nt;return y.rgb(nt*x.red()+vt*T.red(),nt*x.green()+vt*T.green(),nt*x.blue()+vt*T.blue(),x.alpha()*N+T.alpha()*(1-N))}},Object.keys(b).forEach(function(O){if(f.indexOf(O)===-1){var C=b[O].channels;y.prototype[O]=function(){if(this.model===O)return new y(this);if(arguments.length)return new y(arguments,O);var p=typeof arguments[C]=="number"?C:this.valpha;return new y(d(b[this.model][O].raw(this.color)).concat(p),O)},y[O]=function(p){return typeof p=="number"&&(p=E(S.call(arguments),C)),new y(p,O)}}}),a.exports=y},function(a,A,e){var i=e(57),v=e(43);a.exports=function(b){if(!v(b))return!1;var S=i(b);return S=="[object Function]"||S=="[object GeneratorFunction]"||S=="[object AsyncFunction]"||S=="[object Proxy]"}},function(a,A,e){var i=e(100),v=e(101);a.exports=function(b,S,f,M){var I=!f;f||(f={});for(var y=-1,n=S.length;++y<n;){var s=S[y],d=M?M(f[s],b[s],s,f,b):void 0;d===void 0&&(d=b[s]),I?v(f,s,d):i(f,s,d)}return f}},function(a,A,e){var i=e(303),v=e(48),b=Object.prototype,S=b.hasOwnProperty,f=b.propertyIsEnumerable,M=i(function(){return arguments}())?i:function(I){return v(I)&&S.call(I,"callee")&&!f.call(I,"callee")};a.exports=M},function(a,A){a.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(a,A,e){var i=e(75);a.exports=function(v){if(typeof v=="string"||i(v))return v;var b=v+"";return b=="0"&&1/v==-1/0?"-0":b}},function(a,A,e){"use strict";function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}Object.defineProperty(A,"__esModule",{value:!0}),A.circularDependencyToException=A.listMetadataForTarget=A.listRegisteredBindingsForServiceIdentifier=A.getServiceIdentifierAsString=A.getFunctionName=void 0;var v=e(41);function b(f){return typeof f=="function"?f.name:i(f)==="symbol"?f.toString():f}function S(f){if(f.name)return f.name;var M=f.toString(),I=M.match(/^function\s*([^\s(]+)/);return I?I[1]:"Anonymous function: "+M}A.getServiceIdentifierAsString=b,A.listRegisteredBindingsForServiceIdentifier=function(f,M,I){var y="",n=I(f,M);return n.length!==0&&(y=`
Registered bindings:`,n.forEach(function(s){var d="Object";s.implementationType!==null&&(d=S(s.implementationType)),y=y+`
 `+d,s.constraint.metaData&&(y=y+" - "+s.constraint.metaData)})),y},A.circularDependencyToException=function f(M){M.childRequests.forEach(function(I){if(function n(s,d){return s.parentRequest!==null&&(s.parentRequest.serviceIdentifier===d||n(s.parentRequest,d))}(I,I.serviceIdentifier)){var y=function(n){return function s(d,E){E===void 0&&(E=[]);var O=b(d.serviceIdentifier);return E.push(O),d.parentRequest!==null?s(d.parentRequest,E):E}(n).reverse().join(" --> ")}(I);throw new Error(v.CIRCULAR_DEPENDENCY+" "+y)}f(I)})},A.listMetadataForTarget=function(f,M){if(M.isTagged()||M.isNamed()){var I="",y=M.getNamedTag(),n=M.getCustomTags();return y!==null&&(I+=y.toString()+`
`),n!==null&&n.forEach(function(s){I+=s.toString()+`
`})," "+f+`
 `+f+" - "+I}return" "+f},A.getFunctionName=S},function(a,A,e){"use strict";e.d(A,"a",function(){return f});var i=e(17);function v(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function b(M,I){return v(M)*v(I)?(M[0]*I[0]+M[1]*I[1])/(v(M)*v(I)):1}function S(M,I){return(M[0]*I[1]<M[1]*I[0]?-1:1)*Math.acos(b(M,I))}function f(M,I){var y=I[1],n=I[2],s=Object(i.m)(Object(i.o)(I[3]),2*Math.PI),d=I[4],E=I[5],O=M[0],C=M[1],p=I[6],x=I[7],T=Math.cos(s)*(O-p)/2+Math.sin(s)*(C-x)/2,N=-1*Math.sin(s)*(O-p)/2+Math.cos(s)*(C-x)/2,Y=T*T/(y*y)+N*N/(n*n);Y>1&&(y*=Math.sqrt(Y),n*=Math.sqrt(Y));var q=y*y*(N*N)+n*n*(T*T),nt=q?Math.sqrt((y*y*(n*n)-q)/q):1;d===E&&(nt*=-1),isNaN(nt)&&(nt=0);var vt=n?nt*y*N/n:0,ht=y?nt*-n*T/y:0,St=(O+p)/2+Math.cos(s)*vt-Math.sin(s)*ht,wt=(C+x)/2+Math.sin(s)*vt+Math.cos(s)*ht,xt=[(T-vt)/y,(N-ht)/n],ft=[(-1*T-vt)/y,(-1*N-ht)/n],Ft=S([1,0],xt),kt=S(xt,ft);return b(xt,ft)<=-1&&(kt=Math.PI),b(xt,ft)>=1&&(kt=0),E===0&&kt>0&&(kt-=2*Math.PI),E===1&&kt<0&&(kt+=2*Math.PI),{cx:St,cy:wt,rx:Object(i.j)(M,[p,x])?0:y,ry:Object(i.j)(M,[p,x])?0:n,startAngle:Ft,endAngle:Ft+kt,xRotation:s,arcFlag:d,sweepFlag:E}}},function(a,A){function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a.exports=e=function(b){return typeof b}:a.exports=e=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},e(i)}a.exports=e},function(a,A,e){"use strict";var i=e(1),v=e(52),b=e(62),S=e(122),f=e(0),M=e(5),I=e(45),y=e(14),n=M.n.cloneEvent,s=M.n.isViewportChanged,d=function(ct){function dt(pt){var Mt=ct.call(this,pt)||this;return Mt.extendEvents=[],Mt.dragging=!1,Mt.preItem=null,Mt.graph=pt,Mt.destroyed=!1,Mt.initEvents(),Mt}return Object(i.b)(dt,ct),dt.prototype.initEvents=function(){var pt=this.graph,Mt=this.extendEvents,tt=Mt===void 0?[]:Mt,lt=pt.get("canvas"),it=lt.get("el"),U=Object(f.J)(this,"onCanvasEvents"),P=Object(f.J)(this,"onExtendEvents"),H=Object(f.J)(this,"onWheelEvent");lt.off("*").on("*",U),this.canvasHandler=U,tt.push(Object(y.a)(it,"DOMMouseScroll",H)),tt.push(Object(y.a)(it,"mousewheel",H)),typeof window!="undefined"&&(tt.push(Object(y.a)(window,"keydown",P)),tt.push(Object(y.a)(window,"keyup",P)),tt.push(Object(y.a)(window,"focus",P)))},dt.getItemRoot=function(pt){for(;pt&&!pt.get("item");)pt=pt.get("parent");return pt},dt.prototype.onCanvasEvents=function(pt){var Mt=this.graph,tt=Mt.get("canvas"),lt=pt.target,it=pt.type;pt.canvasX=pt.x,pt.canvasY=pt.y;var U={x:pt.canvasX,y:pt.canvasY},P=Mt.get("group").getMatrix();if(P||(P=[1,0,0,0,1,0,0,0,1]),s(P)&&(U=Mt.getPointByClient(pt.clientX,pt.clientY)),pt.x=U.x,pt.y=U.y,pt.currentTarget=Mt,lt===tt)return it==="mousemove"&&this.handleMouseMove(pt,"canvas"),pt.target=tt,pt.item=null,Mt.emit(it,pt),void Mt.emit("canvas:"+it,pt);var H=dt.getItemRoot(lt);if(H){var k=H.get("item");if(!k.destroyed){var h=k.getType();if(pt.target=lt,pt.item=k,pt.canvasX===pt.x&&pt.canvasY===pt.y){var g=Mt.getCanvasByPoint(pt.x,pt.y);pt.canvasX=g.x,pt.canvasY=g.y}Mt.emit(it,pt),pt.name&&!pt.name.includes(":")?Mt.emit(h+":"+it,pt):Mt.emit(pt.name,pt),it==="dragstart"&&(this.dragging=!0),it==="dragend"&&(this.dragging=!1),it==="mousemove"&&this.handleMouseMove(pt,h)}}else Mt.emit(it,pt)},dt.prototype.onExtendEvents=function(pt){this.graph.emit(pt.type,pt)},dt.prototype.onWheelEvent=function(pt){Object(f.s)(pt.wheelDelta)&&(pt.wheelDelta=-pt.detail),this.graph.emit("wheel",pt)},dt.prototype.handleMouseMove=function(pt,Mt){var tt=this.graph,lt=this.preItem,it=tt.get("canvas"),U=pt.target===it?null:pt.item;pt=n(pt),lt&&lt!==U&&!lt.destroyed&&(pt.item=lt,this.emitCustomEvent(lt.getType(),"mouseleave",pt),this.dragging&&this.emitCustomEvent(lt.getType(),"dragleave",pt)),U&&lt!==U&&(pt.item=U,this.emitCustomEvent(Mt,"mouseenter",pt),this.dragging&&this.emitCustomEvent(Mt,"dragenter",pt)),this.preItem=U},dt.prototype.emitCustomEvent=function(pt,Mt,tt){tt.type=Mt,this.graph.emit(pt+":"+Mt,tt)},dt.prototype.destroy=function(){var pt=this.graph,Mt=this.canvasHandler,tt=this.extendEvents;pt.get("canvas").off("*",Mt),Object(f.f)(tt,function(lt){lt.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},dt}(M.a),E=e(69),O=e(254),C=e.n(O);function p(){return C()(`!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=436)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var r=n(17);e.METADATA_KEY=r;var o=n(374);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.Container}});var i=n(30);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(390);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var u=n(391);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return u.injectable}});var s=n(392);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var c=n(393);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var f=n(164);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(394);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var h=n(395);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(396);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(397);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(398);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(162);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(40);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return y.id}});var g=n(33);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return g.decorate}});var b=n(167);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(50);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n(399);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TextureCompressionBC="texture-compression-bc"}(e.ExtensionName||(e.ExtensionName={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.AddressMode||(e.AddressMode={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.BindingType||(e.BindingType={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.BlendFactor||(e.BlendFactor={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.BlendOperation||(e.BlendOperation={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.CompareFunction||(e.CompareFunction={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.CullMode||(e.CullMode={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.FilterMode||(e.FilterMode={})),function(t){t.CCW="ccw",t.CW="cw"}(e.FrontFace||(e.FrontFace={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.IndexFormat||(e.IndexFormat={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.InputStepMode||(e.InputStepMode={})),function(t){t.Load="load"}(e.LoadOp||(e.LoadOp={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.PrimitiveTopology||(e.PrimitiveTopology={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.StencilOperation||(e.StencilOperation={})),function(t){t.Store="store",t.Clear="clear"}(e.StoreOp||(e.StoreOp={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.TextureDimension||(e.TextureDimension={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.TextureFormat||(e.TextureFormat={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.TextureComponentType||(e.TextureComponentType={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.TextureViewDimension||(e.TextureViewDimension={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.VertexFormat||(e.VertexFormat={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.TextureAspect||(e.TextureAspect={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.CompilationMessageType||(e.CompilationMessageType={})),function(t){t.Occlusion="occlusion"}(e.QueryType||(e.QueryType={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.BufferUsage||(e.BufferUsage={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.ColorWrite||(e.ColorWrite={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.ShaderStage||(e.ShaderStage={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.TextureUsage||(e.TextureUsage={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.MapMode||(e.MapMode={}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(370)},function(t,e){t.exports=function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(402),o=n(403),i=n(160),a=n(404);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r;try{r={cloneDeep:n(310),constant:n(84),defaults:n(311),each:n(123),filter:n(126),find:n(312),flatten:n(154),forEach:n(124),forIn:n(317),has:n(137),isUndefined:n(138),last:n(318),map:n(139),mapValues:n(319),max:n(320),merge:n(322),min:n(327),minBy:n(328),now:n(329),pick:n(330),range:n(335),reduce:n(141),sortBy:n(338),uniqueId:n(343),values:n(147),zipObject:n(344)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(400);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(51),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){var r;try{r={clone:n(199),constant:n(84),each:n(123),filter:n(126),has:n(137),isArray:n(13),isEmpty:n(275),isFunction:n(46),isUndefined:n(138),keys:n(32),map:n(139),reduce:n(141),size:n(278),transform:n(284),union:n(285),values:n(147)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(232),o=n(63),i=n(79),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r;try{r=n(197)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(17),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},function(t,e){},function(t,e,n){var r=n(46),o=n(78);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(255),i=n(265),a=n(39),u=n(13),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){var r=n(42),o=n(211),i=n(212),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(109),o=n(80),i=n(28);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(19),o=n(17);function i(t,e,n,o,i){var a={},u="number"==typeof i,s=void 0!==i&&u?i.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[s];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var h=l[f];if(h.key===o.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(o),a[s]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,r){e(n,r,t)}}e.tagParameter=function(t,e,n,r){i(o.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){i(o.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([u(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){var r=n(371),o=n(372),i=n(160),a=n(373);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(178),o=n(177),i=n(185),a=n(100),u=n(186),s=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(s,-n[1],n[0]),c/u(e,s)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e,n){var r=n(210),o=n(215);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(109),o=n(235),i=n(28);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;e.id=function(){return r++}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i=n(231),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(61)(t))},function(t,e,n){var r=n(240),o=n(75),i=n(241),a=n(118),u=n(242),s=n(31),c=n(107),f=c(r),l=c(o),h=c(i),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(31),i=n(25);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,n){var r=n(31),o=n(21);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(59),o=n(60);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(230),o=n(25),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(19);function i(t){return"function"==typeof t?t.name:"symbol"===r(t)?t.toString():t}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\\s*([^\\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\\n"}))," "+t+"\\n "+t+" - "+n}return" "+t},e.getFunctionName=a},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){t.exports={EPSILON:n(175),create:n(176),clone:n(405),fromValues:n(406),copy:n(407),set:n(177),equals:n(408),exactEquals:n(409),add:n(178),subtract:n(100),sub:n(410),multiply:n(179),mul:n(411),divide:n(180),div:n(412),inverse:n(413),min:n(414),max:n(415),rotate:n(416),floor:n(417),ceil:n(418),round:n(419),scale:n(420),scaleAndAdd:n(421),distance:n(181),dist:n(422),squaredDistance:n(182),sqrDist:n(423),length:n(183),len:n(424),squaredLength:n(184),sqrLen:n(425),negate:n(426),normalize:n(185),dot:n(186),cross:n(427),lerp:n(428),random:n(429),transformMat2:n(430),transformMat2d:n(431),transformMat3:n(432),transformMat4:n(433),forEach:n(434),limit:n(435)}},function(t,e,n){var r=n(55),o=n(205),i=n(206),a=n(207),u=n(208),s=n(209);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(200),o=n(201),i=n(202),a=n(203),u=n(204);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(41);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(37)(Object,"create");t.exports=r},function(t,e,n){var r=n(224);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60),o=n(41),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(108);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(110)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(85),o=n(253)(r);t.exports=o},function(t,e,n){var r=n(68),o=n(49);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(13),o=n(88),i=n(267),a=n(133);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(39),o=n(142),i=n(143);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(41),i=n(28),a=n(62),u=n(21);t.exports=function(t,e,n){if(!u(n))return!1;var s=r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(11);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e){},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(r)?"\\0":r)}function c(t,e,n,r){var o=""+e,i=""+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var n=arguments,r=this;return o.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var n=e+="";!o.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;o.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=n.parent(o);return void 0===i||e.hasNode(i)?(r[o]=i,i):i in r?r[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,r=arguments;return o.reduce(t,(function(t,o){return r.length>1?n.setEdge(t,o,e):n.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,n,i,u=!1,f=arguments[0];"object"===r(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,n=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(n)||(n=""+n);var l=s(this._isDirected,t,e,n);if(o.has(this._edgeLabels,l))return u&&(this._edgeLabels[l]=i),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=u?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.v===e})):r}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.w===e})):r}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(37)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(216),o=n(223),i=n(225),a=n(226),u=n(227);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,n(61)(t))},function(t,e,n){var r=n(64),o=n(233),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113),o=n(114),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(119);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(86),o=n(32);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(252)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(13),i=n(45),a=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(82),o=n(286);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(92),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(91),o=n(167),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e,n){var r=n(31),o=n(65),i=n(25),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){t.exports={graphlib:n(23),layout:n(309),debug:n(367),util:{time:n(18).time,notime:n(18).notime},version:n(368)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],u]:t._events[s].push(u):(t._events[s]=u,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var u=o?o+t:t;if(!this._events[u])return!1;var s,c,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,a),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];f.fn.apply(f.context,s)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(l-1);h<l;h++)s[h-1]=arguments[h];f[c].fn.apply(f[c].context,s)}}return!0},c.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(54),o=n(77),i=n(59),a=n(228),u=n(234),s=n(111),c=n(112),f=n(237),l=n(238),h=n(116),d=n(239),p=n(44),v=n(243),m=n(244),y=n(121),g=n(13),b=n(43),_=n(248),x=n(21),w=n(250),E=n(32),S=n(38),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,A,I,k,O){var D,R=1&n,M=2&n,C=4&n;if(A&&(D=k?A(e,I,k,O):A(e)),void 0!==D)return D;if(!x(e))return e;var N=g(e);if(N){if(D=v(e),!R)return c(e,D)}else{var P=p(e),G="[object Function]"==P||"[object GeneratorFunction]"==P;if(b(e))return s(e,R);if("[object Object]"==P||"[object Arguments]"==P||G&&!k){if(D=M||G?{}:y(e),!R)return M?l(e,u(D,e)):f(e,a(D,e))}else{if(!T[P])return k?e:{};D=m(e,P,R)}}O||(O=new r);var j=O.get(e);if(j)return j;O.set(e,D),w(e)?e.forEach((function(r){D.add(t(r,n,A,r,e,O))})):_(e)&&e.forEach((function(r,o){D.set(o,t(r,n,A,o,e,O))}));var L=N?void 0:(C?M?d:h:M?S:E)(e);return o(L||e,(function(r,o){L&&(r=e[o=r]),i(D,o,t(r,n,A,o,e,O))})),D}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(106))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(37),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(229),o=n(48),i=n(13),a=n(43),u=n(62),s=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&s(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(61)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(82),o=n(65),i=n(81),a=n(114),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(117),o=n(81),i=n(32);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(82),o=n(13);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(37)(n(24),"Set");t.exports=r},function(t,e,n){var r=n(24).Uint8Array;t.exports=r},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(122),o=n(65),i=n(64);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=n(77),o=n(66),i=n(125),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(39);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(113),o=n(254),i=n(29),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(257),o=n(25);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(129),o=n(260),i=n(130);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=-1,v=!0,m=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,(function(t,e){if(!i(m,e)&&(y===t||u(y,t,n,a,s)))return m.push(e)}))){v=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(76),o=n(258),i=n(259);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(270);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(271),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(68),o=n(48),i=n(13),a=n(62),u=n(78),s=n(49);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(274),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(69),o=n(29),i=n(140),a=n(13);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(276),o=n(66),i=n(29),a=n(277),u=n(13);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(287),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(288),o=n(289)(r);t.exports=o},function(t,e,n){var r=n(129),o=n(290),i=n(294),a=n(130),u=n(295),s=n(87);t.exports=function(t,e,n){var c=-1,f=o,l=t.length,h=!0,d=[],p=d;if(n)h=!1,f=i;else if(l>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,p=new r}else p=e?[]:d;t:for(;++c<l;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue t;e&&p.push(y),d.push(m)}else f(p,y,n)||(p!==d&&p.push(y),d.push(m))}return d}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(28),o=n(25);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(297),o=n(32);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(20),o=n(149);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(20);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(20);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(20);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(20);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,"post"===n,a,o,i)})),i}},function(t,e,n){var r=n(316);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(89);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(60),o=n(41);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(72).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r;!function(r){!function(o){var i="object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof self?"undefined":n(self))?self:"object"===n(this)?this:Function("return this;")(),a=u(r);function u(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=r:a=u(i.Reflect,a),function(e){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!u&&!s,f={create:u?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:c?function(t,e){return r.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return r.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"===(void 0===t?"undefined":n(t))&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[a]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,i)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[a]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function i(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[a]=function(){return this.keys()},t}():Set,v=new(h||"function"!=typeof WeakMap?function(){var t=f.create(),e=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&f.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?f.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+a()}while(f.has(t,e));return t[e]=!0,e}function o(t,n){if(!r.call(t,e)){if(!n)return;Object.defineProperty(t,e,{value:f.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=v.get(t);if(w(r)){if(!n)return;r=new d,v.set(t,r)}var o=r.get(e);if(w(o)){if(!n)return;o=new d,r.set(e,o)}return o}function y(t,e,n){var r=m(e,n,!1);return!w(r)&&!!r.has(t)}function g(t,e,n){var r=m(e,n,!1);if(!w(r))return r.get(t)}function b(t,e,n,r){m(n,r,!0).set(t,e)}function _(t,e){var n=[],r=m(t,e,!1);if(w(r))return n;for(var o=function(t){var e=D(t,a);if(!k(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var u=R(o);if(!u)return n.length=i,n;var s=u.value;try{n[i]=s}catch(t){try{M(o)}finally{throw t}}i++}}function x(t){if(null===t)return 1;switch(n(t)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function E(t){return null===t}function S(t){return"object"===n(t)?null!==t:"function"==typeof t}function T(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(k(n))if(!S(o=n.call(t)))return o;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o}else{var r;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o;var o,i=t.toString;if(k(i))if(!S(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){var e=T(t,3);return"symbol"===n(e)?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function k(t){return"function"==typeof t}function O(t){return"function"==typeof t}function D(t,e){var n=t[e];if(null!=n){if(!k(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function N(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(w(n)){if(!I(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!w(r)&&!E(r)){if(!O(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!w(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!w(i)&&!E(i)){if(!S(i))throw new TypeError;r=i}}return r}(t,e,n=A(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!w(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return w(r)||(r=A(r)),b(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return!0;var o=C(n);return!E(o)&&t(e,o,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var o=C(n);return E(o)?void 0:t(e,o,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),g(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),function t(e,n){var r=_(e,n),o=C(e);if(null===o)return r;var i=t(o,n);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new p,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=i;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),_(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;w(n)||(n=A(n));var r=m(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||v.delete(e),!0}))}(a)}()}(r||(r={}))}).call(this,n(369),n(106))},function(t,e,n){var r=n(161);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(17),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(19);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(19),o=n(17),i=n(26),a=n(33),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(o.INJECT_TAG,t);"number"==typeof u?a.tagParameter(e,n,u,s):a.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(17),o=n(40),i=n(26),a=n(381),u=function(){function t(t,e,n,u){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof u?s=new i.Metadata(r.NAMED_TAG,u):u instanceof i.Metadata&&(s=u),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(91),o=n(92),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(17),o=n(26);e.traverseAncerstors=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};var i=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=i;var a=i(r.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(401);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:r.makePropertyInjectDecorator(t,e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},function(t,e,n){var r=n(144);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(t,e){this.number=t,this.line=e,this.errors=[]}function h(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(e);return r?r[1]:"unknown"}function v(t,e){var n,r=t.split("\\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new l(0,""));for(var u=0;u<r.length;++u){var s=r[u],c=/^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(s);if(c)switch(c[1]){case"line":var h=/(\\d+)(\\s+\\d+)?/.exec(c[2]);h&&(o=0|h[1],h[2]&&((i=0|h[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\\s+(.*)$/.exec(c[2]);p&&(a[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[i].lines.push(new l(o++,s))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function m(t){t._commandRef=d()}function y(t,e){var r=p();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){i(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+a(t),r||d())}var b={};function _(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:b[t]*e}function x(t){return!(t&t-1||!t)}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=e(r,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){i(t,e)||n("invalid parameter type"+o(r)+". expected "+e+", got "+a(t))},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var s=v(n,i),f=function(t){var e=[];return t.split("\\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(t);n?e.push(new h(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new h("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(s,f),Object.keys(s).forEach((function(t){var e=s[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+"\\n","font-weight:bold"),o(c("| ",6)),o(r+"\\n","font-weight:bold")})),o(c("| ",6)+"\\n")}else o(c(t.number,4)+"|  "),o(t.line+"\\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+s[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=v(n,i),s='Error linking program with vertex shader, "'+v(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\\n"+a),r.raise(s)}},callSite:p,saveCommandRef:m,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}m(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var u=t._attributeSet={};i(u,n.static),i(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){var o,i=e.width,a=e.height,u=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(x(i)&&x(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(x(i)&&x(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(o=0;o<16;++o)if(s[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=s[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(_(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,u=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=i>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(_(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),E=0;function S(t,e){this.id=E++,this.type=t,this.data=e}function T(t){return t.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,'\\\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+T(e.substr(1,e.length-2))+'"'];var o=/\\[(false|true|null|\\d+|'[^']*'|"[^"]*")\\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+T(e)+'"'];for(var a=[],u=0;u<i.length;++u)a=a.concat(t(i[u]));return a}(t).join("][")+"]"}var I={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function t(e,n){return"function"==typeof e?new S(0,e):"number"==typeof e||"boolean"==typeof e?new S(5,e):Array.isArray(e)?new S(6,e.map((function(e,r){return t(e,n+"["+r+"]")}))):e instanceof S?e:void w(!1,"invalid option type in uniform "+n)},accessor:A},k={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(t){return"string"==typeof t?t.split():(w(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function M(t){var n,r,o,i,u,s=t||{},c={},f=[],l=[],h="undefined"==typeof window?1:window.devicePixelRatio,d=!1,p=function(t){t&&w.raise(t)},v=function(){};if("string"==typeof s?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),w(n,"invalid query string for element")):"object"===a(s)?"string"==typeof(u=s).nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(w.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(c=s.attributes,w.type(c,"object","invalid context attributes")),"extensions"in s&&(f=D(s.extensions)),"optionalExtensions"in s&&(l=D(s.optionalExtensions)),"onDone"in s&&(w.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(h=+s.pixelRatio,w(h>0,"invalid pixel ratio"))):w.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o,i=document.createElement("canvas");function a(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,e(i.style,{width:n+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(r||document.body,0,h);if(!m)return null;o=m.canvas,v=m.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0),i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,c)}return i?{gl:i,canvas:o,container:r,extensions:f,optionalExtensions:l,pixelRatio:h,profile:d,onDone:p,onDestroy:v}:(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function C(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function N(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function P(){var t=C(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[N(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[N(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var G=P();function j(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}G.zero=P();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},U={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||G.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],u=0;u<n;++u)r[o++]=a[u]}(t,e[0],e[1],a);break;case 3:B(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)B(e[u],c,f,l,o,i),i+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function B(t,e,n,r,o,i){for(var a=i,u=0;u<e;++u)for(var s=t[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},V={dynamic:35048,stream:35040,static:35044},W=U.flatten,X=U.shape,H=[];function q(t){return 0|F[Object.prototype.toString.call(t)]}function Y(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function K(t,e,n,r,o,i,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)t[u++]=e[o*s+i*c+a]}H[5120]=1,H[5122]=2,H[5124]=4,H[5121]=1,H[5123]=2,H[5125]=4,H[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),J=new Uint32Array(Q.buffer);function $(t){for(var e=G.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=J[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var u=-14-i;e[n]=o+(a+1024>>u)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function tt(e){return Array.isArray(e)||t(e)}var et=function(t){return!(t&t-1||!t)},nt=[9984,9986,9985,9987],rt=[0,6409,6410,6407,6408],ot={};function it(t){return"[object "+t+"]"}ot[6409]=ot[6406]=ot[6402]=1,ot[34041]=ot[6410]=2,ot[6407]=ot[35904]=3,ot[6408]=ot[35906]=4;var at=it("HTMLCanvasElement"),ut=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ct=it("ImageBitmap"),ft=it("HTMLImageElement"),lt=it("HTMLVideoElement"),ht=Object.keys(F).concat([at,ut,st,ct,ft,lt]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var pt=[];function vt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function mt(t){return!!Array.isArray(t)&&!(0===t.length||!tt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function gt(t){return yt(t)===at}function bt(t){return yt(t)===ut}function _t(t){if(!t)return!1;var e=yt(t);return ht.indexOf(e)>=0||vt(t)||mt(t)||j(t)}function xt(t){return 0|F[Object.prototype.toString.call(t)]}function wt(t,e){return G.allocType(36193===t.type?5126:t.type,e)}function Et(t,e){36193===t.type?(t.data=$(e),G.freeType(e)):t.data=e}function St(t,e,n,r,o,i){var a;if(a=void 0!==pt[t]?pt[t]:ot[t]*dt[e],i&&(a*=6),o){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function Tt(n,r,o,i,u,s,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},l={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},d=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),p={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(v.float32=v.float=5126),r.oes_texture_half_float&&(v.float16=v["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach((function(t){var e=y[t];g.indexOf(e)>=0&&(m[t]=e)}));var b=Object.keys(m);o.textureFormats=b;var _=[];Object.keys(m).forEach((function(t){var e=m[t];_[e]=t}));var x=[];Object.keys(v).forEach((function(t){var e=v[t];x[e]=t}));var E=[];Object.keys(h).forEach((function(t){E[h[t]]=t}));var S=[];Object.keys(d).forEach((function(t){var e=d[t];S[e]=t}));var T=[];Object.keys(l).forEach((function(t){T[l[t]]=t}));var A=b.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function I(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(w.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(w.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(w.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(w.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;w(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),w(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(n,v,"invalid texture type"),t.type=v[n]}var i=t.width,u=t.height,s=t.channels,c=!1;"shape"in e?(w(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],u=e.shape[1],3===e.shape.length&&(s=e.shape[2],w(s>0&&s<=4,"invalid number of channels"),c=!0),w(i>=0&&i<=o.maxTextureSize,"invalid width"),w(u>=0&&u<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=u=e.radius,w(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,w(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(u=e.height,w(u>=0&&u<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,w(s>0&&s<=4,"invalid number of channels"),c=!0)),t.width=0|i,t.height=0|u,t.channels=0|s;var f=!1;if("format"in e){var l=e.format;w(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(l,m,"invalid texture format");var h=t.internalformat=m[l];t.format=A[h],l in v&&("type"in e||(t.type=v[l])),l in y&&(t.compressed=!0),f=!0}!c&&f?t.channels=ot[t.format]:c&&!f?t.channels!==rt[t.format]&&(t.format=t.internalformat=rt[t.channels]):f&&c&&w(t.channels===ot[t.format],"number of channels inconsistent with specified format")}}function D(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function R(){I.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(_t(n)?r=n:n&&(w.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),_t(n.data)&&(r=n.data)),w(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){w(!r,"can not specify copy and data field for the same texture");var i=u.viewportWidth,a=u.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,w(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=xt(r));else if(vt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=G.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=$(e);break;default:w.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(j(r)){var s=r.data;Array.isArray(s)||5121!==e.type||(e.type=xt(s));var c,f,l,h,d,p,v=r.shape,m=r.stride;3===v.length?(l=v[2],p=m[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=v[0],f=v[1],h=m[0],d=m[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=rt[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,u=t.height,s=t.channels,c=wt(t,a*u*s),f=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)c[f++]=e[n*h+r*l+o*d+i];Et(t,c)}(e,s,h,d,p,r.offset)}else if(gt(r)||bt(r)||yt(r)===st)gt(r)||bt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return yt(t)===ct}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return yt(t)===ft}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return yt(t)===lt}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(mt(r)){var y=e.width||r[0].length,g=e.height||r.length,b=e.channels;b=tt(r[0][0])?b||r[0][0].length:b||1;for(var _=U.shape(r),x=1,E=0;E<_.length;++E)x*=_[E];var S=wt(e,x);U.flatten(r,_,"",S),Et(e,S),e.alignment=1,e.width=y,e.height=g,e.channels=b,e.format=e.internalformat=rt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(t,e,r){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,l=t.height;D(t),o?n.texImage2D(e,r,s,s,c,o):t.compressed?n.compressedTexImage2D(e,r,u,f,l,0,a):t.needsCopy?(i(),n.copyTexImage2D(e,r,s,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,s,f,l,0,s,c,a||null)}function N(t,e,r,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;D(t),u?n.texSubImage2D(e,a,r,o,f,l,u):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,d,s):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,o,h,d,f,l,s)}var P=[];function B(){return P.pop()||new R}function F(t){t.needsFree&&G.freeType(t.data),R.call(t),P.push(t)}function z(){I.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function V(t,e,n){var r=t.images[0]=B();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function W(t,e){var n=null;if(_t(e))k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,M(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||w(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;C(n[r],e,r)}}var H=[];function q(){var t=H.pop()||new z;I.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;H.push(t)}function K(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Z(t,e){if("min"in e){var n=e.min;w.parameter(n,d),t.minFilter=d[n],nt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;w.parameter(r,h),t.magFilter=h[r]}var i=t.wrapS,u=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(w.parameter(s,l),i=u=l[s]):Array.isArray(s)&&(w.parameter(s[0],l),w.parameter(s[1],l),i=l[s[0]],u=l[s[1]])}else{if("wrapS"in e){var c=e.wrapS;w.parameter(c,l),i=l[c]}if("wrapT"in e){var p=e.wrapT;w.parameter(p,l),u=l[p]}}if(t.wrapS=i,t.wrapT=u,"anisotropic"in e){var v=e.anisotropic;w("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(a(e.mipmap)){case"string":w.parameter(e.mipmap,f,"invalid mipmap hint"),t.mipmapHint=f[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":w(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:w.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var J=0,it={},at=o.maxTextureUnits,ut=Array(at).map((function(){return null}));function ht(t){I.call(this),this.mipmask=0,this.internalformat=6408,this.id=J++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,c.profile&&(this.stats={size:0})}function dt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function pt(){var t=ut[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Tt(t){var e=t.texture;w(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ut[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(ht.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<at;++e){var r=ut[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ut[e]=this,t=e;break}t>=at&&w.raise("insufficient number of texture units"),c.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Tt(this)}}),c.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new ht(3553);function i(t,e){var n=r.texInfo;K.call(n);var a=q();return"number"==typeof t?V(a,0|t,"number"==typeof e?0|e:0|t):t?(w.type(t,"object","invalid arguments to regl.texture"),Z(n,t),W(a,t)):V(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),w.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,dt(r),X(a,3553),Q(n,3553),pt(),Y(a),c.profile&&(r.stats.size=St(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=_[r.internalformat],i.type=x[r.type],i.mag=E[n.magFilter],i.min=S[n.minFilter],i.wrapS=T[n.wrapS],i.wrapT=T[n.wrapT],i}return it[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){w(!!t,"must specify image data");var a=0|e,u=0|n,s=0|o,c=B();return k(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,w(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),w(r.mipmask&1<<s,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),dt(r),N(c,3553,a,u,s),pt(),F(c),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===r.width&&a===r.height)return i;i.width=r.width=o,i.height=r.height=a,dt(r);for(var u=0;r.mipmask>>u;++u){var s=o>>u,f=a>>u;if(!s||!f)break;n.texImage2D(3553,u,r.format,s,f,0,r.format,r.type,null)}return pt(),c.profile&&(r.stats.size=St(r.internalformat,r.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=r,c.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,u,f){var l=new ht(34067);it[l.id]=l,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,i,u){var s,f=l.texInfo;for(K.call(f),s=0;s<6;++s)h[s]=q();if("number"!=typeof t&&t)if("object"===a(t))if(e)W(h[0],t),W(h[1],e),W(h[2],n),W(h[3],r),W(h[4],i),W(h[5],u);else if(Z(f,t),O(l,t),"faces"in t){var p=t.faces;for(w(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)w("object"===a(p[s])&&!!p[s],"invalid input for cube map face"),k(h[s],l),W(h[s],p[s])}else for(s=0;s<6;++s)W(h[s],t);else w.raise("invalid arguments to cube map");else{var v=0|t||1;for(s=0;s<6;++s)V(h[s],v,v)}for(k(l,h[0]),o.npotTextureCube||w(et(l.width)&&et(l.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,w.textureCube(l,f,h,o),l.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,dt(l),s=0;s<6;++s)X(h[s],34069+s);for(Q(f,34067),pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,f.genMipmaps,!0)),d.format=_[l.internalformat],d.type=x[l.type],d.mag=E[f.magFilter],d.min=S[f.minFilter],d.wrapS=T[f.wrapS],d.wrapT=T[f.wrapT],s=0;s<6;++s)Y(h[s]);return d}return d(t,e,r,i,u,f),d.subimage=function(t,e,n,r,o){w(!!e,"must specify image data"),w("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,u=0|o,s=B();return k(s,l),s.width=0,s.height=0,M(s,e),s.width=s.width||(l.width>>u)-i,s.height=s.height||(l.height>>u)-a,w(l.type===s.type&&l.format===s.format&&l.internalformat===s.internalformat,"incompatible format for texture.subimage"),w(i>=0&&a>=0&&i+s.width<=l.width&&a+s.height<=l.height,"texture.subimage write out of bounds"),w(l.mipmask&1<<u,"missing mipmap data"),w(s.data||s.element||s.needsCopy,"missing image data"),dt(l),N(s,34069+t,i,a,u),pt(),F(s),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,dt(l);for(var r=0;r<6;++r)for(var o=0;l.mipmask>>o;++o)n.texImage2D(34069+r,o,l.format,e>>o,e>>o,0,l.format,l.type,null);return pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,c.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<at;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ut[t]=null;L(it).forEach(Tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var At=[];function It(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var kt=[6407,6408],Ot=[];Ot[6408]=4,Ot[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Rt=[32854,32855,36194,35907,34842,34843,34836],Mt={};function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Nt(e,n,r,o,i,a,u){function s(s){var c;null===n.next?(w(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(w(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(w(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,d=o.framebufferHeight,p=null;t(s)?p=s:s&&(w.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,w(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),w(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||o.framebufferWidth-f),d=0|(s.height||o.framebufferHeight-l),p=s.data||null),p&&(5121===c?w(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&w(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),w(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var v=h*d*4;return p||(5121===c?p=new Uint8Array(v):5126===c&&(p=p||new Float32Array(v))),w.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),w(p.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}(t):s(t)}}function Pt(t){return Array.prototype.slice.call(t)}function Gt(t){return Pt(t).join("")}Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var jt="xyzw".split(""),Lt="profile",Ut="framebuffer",Bt="vert",Ft="frag",zt="elements",Vt="primitive",Wt="count",Xt="offset",Ht="instances",qt="vao",Yt=Ut+"Width",Kt=Ut+"Height",Zt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ee={frag:35632,vert:35633},ne={cw:2304,ccw:2305};function re(e){return Array.isArray(e)||t(e)||j(e)}function oe(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ae(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ue(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new ie(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new ie(!1,!1,!1,e);if(6===n){for(var i=!1,a=!1,u=!1,s=0;s<t.data.length;++s){var c=t.data[s];if(1===c.type)u=!0;else if(2===c.type)a=!0;else if(3===c.type)i=!0;else if(0===c.type){i=!0;var f=c.data;f>=1&&(a=!0),f>=2&&(u=!0)}else 4===c.type&&(i=i||c.data.thisDep,a=a||c.data.contextDep,u=u||c.data.propDep)}return new ie(i,a,u,e)}return new ie(3===n,2===n,1===n,e)}var ce=new ie(!1,!1,!1,(function(){}));function fe(t,n,r,o,i,u,s,c,f,l,h,d,p,v,m){var y=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,_=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},E={},S=[],T={},A={};function k(t){return t.replace(".","_")}function O(t,e,n){var r=k(t);S.push(t),E[r]=x[r]=!!n,T[r]=e}function D(t,e,n){var r=k(t);S.push(t),Array.isArray(n)?(x[r]=n.slice(),E[r]=n.slice()):x[r]=E[r]=n,A[r]=e}O("dither",3024),O("blend.enable",3042),D("blend.color","blendColor",[0,0,0,0]),D("blend.equation","blendEquationSeparate",[32774,32774]),D("blend.func","blendFuncSeparate",[1,0,1,0]),O("depth.enable",2929,!0),D("depth.func","depthFunc",513),D("depth.range","depthRange",[0,1]),D("depth.mask","depthMask",!0),D("colorMask","colorMask",[!0,!0,!0,!0]),O("cull.enable",2884),D("cull.face","cullFace",1029),D("frontFace","frontFace",2305),D("lineWidth","lineWidth",1),O("polygonOffset.enable",32823),D("polygonOffset.offset","polygonOffset",[0,0]),O("sample.alpha",32926),O("sample.enable",32928),D("sample.coverage","sampleCoverage",[1,!1]),O("stencil.enable",2960),D("stencil.mask","stencilMask",-1),D("stencil.func","stencilFunc",[519,0,-1]),D("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),D("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),O("scissor.enable",3089),D("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:p,strings:n,next:E,current:x,draw:d,elements:u,buffer:i,shader:h,attributes:l.state,vao:l,uniforms:f,framebuffer:c,extensions:r,timer:v,isBufferArgs:re},M={primTypes:Z,compareFuncs:$t,blendFuncs:Qt,blendEquations:g,stencilOps:te,glTypes:z,orientationType:ne};w.optional((function(){R.isArrayLike=tt})),_&&(M.backBuffer=[1029],M.drawBuffer=C(o.maxDrawbuffers,(function(t){return 0===t?[0]:C(t,(function(t){return 36064+t}))})));var N=0;function P(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Pt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Pt(arguments)),n.push(";")),e},toString:function(){return Gt([r.length>0?"var "+r.join(",")+";":"",Gt(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Pt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),u={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var s=i(),c=s.toString;return u[t]=e(s,{arg:o,toString:function(){return Gt(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=Gt(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Pt(arguments)),this},else:function(){return r.apply(r,Pt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),Gt(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Gt(t).replace(/;/g,";\\n").replace(/}/g,"}\\n").replace(/{/g,"{\\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=N++,t.batchId="0";var i=r(R),a=t.shared={props:"a0"};Object.keys(R).forEach((function(t){a[t]=o.def(i,".",t)})),w.optional((function(){t.CHECK=r(w),t.commandStr=w.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Jt}));var u=t.next={},s=t.current={};Object.keys(A).forEach((function(t){Array.isArray(x[t])&&(u[t]=o.def(a.next,".",t),s[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(M).forEach((function(t){c[t]=o.def(JSON.stringify(M[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var o=l.scope[e];return o||(o=l.scope[e]=new y),f[e]=r(o)},t}function G(t,e,s,f,d){var p=t.static,v=t.dynamic;w.optional((function(){var t=[Ut,Bt,Ft,zt,Vt,Xt,Wt,Ht,Lt,qt].concat(S);function e(e){Object.keys(e).forEach((function(e){w.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(p),e(v)}));var m=function(t,e){var n=t.static;if("string"==typeof n[Ft]&&"string"==typeof n[Bt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var i=[],a=0;a<o.length;++a)w("number"==typeof r[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[o[a]],o[a]]);return i}}return null}(t,e),_=function(t,e){var n=t.static,r=t.dynamic;if(Ut in n){var o=n[Ut];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),ue((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Yt,n+".width"),e.set(i,"."+Kt,n+".height"),n}))):ue((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Yt,r+".drawingBufferWidth"),e.set(r,"."+Kt,r+".drawingBufferHeight"),"null"}))}if(Ut in r){var i=r[Ut];return se(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");w.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var u=r.context;return e.set(u,"."+Yt,a+"?"+a+".width:"+u+".drawingBufferWidth"),e.set(u,"."+Kt,a+"?"+a+".height:"+u+".drawingBufferHeight"),a}))}return null}(t),x=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];w.commandType(i,"object","invalid "+t,n.commandStr);var a,u,s=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,w.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in i?(u=0|i.height,w.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new ie(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Yt,"-",c));var o=u;return"height"in i||(o=e.def(n,".",Kt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=se(l,(function(e,n){var r=e.invoke(n,l);w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Yt,"-",i,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Kt,"-",a,")");return w.optional((function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)})),[i,a,u,s]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Yt),e.def(n,".",Kt)]})):null}var a=i("viewport");if(a){var u=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,_,d),E=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(zt in n){var t=n[zt];re(t)?t=u.getElements(u.create(t,!0)):t&&(t=u.getElements(t),w.command(t,"invalid elements",e.commandStr));var o=ue((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(zt in r){var i=r[zt];return se(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),u=e.def("null"),s=e.def(r,"(",a,")"),c=t.cond(s).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return w.optional((function(){t.assert(c.else,"!"+a+"||"+u,"invalid elements")})),e.entry(c),e.exit(t.cond(s).then(o,".destroyStream(",u,");")),t.ELEMENTS=u,u}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return w.command(!i||a>=0,"invalid "+t,e.commandStr),ue((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var u=r[t];return se(u,(function(e,n){var r=e.invoke(n,u);return i&&(e.OFFSET=r,w.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ue((function(t,e){return t.OFFSET="0",0})):null}var a=i(Xt,!0);return{elements:o,primitive:function(){if(Vt in n){var t=n[Vt];return w.commandParameter(t,Z,"invalid primitve",e.commandStr),ue((function(e,n){return Z[t]}))}if(Vt in r){var i=r[Vt];return se(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return w.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Z))})),e.def(n,"[",r,"]")}))}return o?ae(o)?o.value?ue((function(t,e){return e.def(t.ELEMENTS,".primType")})):ue((function(){return 4})):new ie(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(Wt in n){var t=0|n[Wt];return w.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ue((function(){return t}))}if(Wt in r){var i=r[Wt];return se(i,(function(t,e){var n=t.invoke(e,i);return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ae(o)){if(o)return a?new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return w.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ue((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var u=ue((function(){return-1}));return w.optional((function(){u.MISSING=!0})),u}var s=new ie(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return w.optional((function(){s.DYNAMIC=!0})),s}return null}(),instances:i(Ht,!1),offset:a}}(t,d),T=function(t,e){var n=t.static,r=t.dynamic,i={};return S.forEach((function(t){var u=k(t);function s(e,o){if(t in n){var a=e(n[t]);i[u]=ue((function(){return a}))}else if(t in r){var s=r[t];i[u]=se(s,(function(t,e){return o(t,e,t.invoke(e,s))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return w.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return w.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return w.commandParameter(n,$t,"invalid "+t,e.commandStr),$t[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return w.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys($t))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return w.command(tt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){w.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return w.commandParameter(n,Qt,u+".srcRGB",e.commandStr),w.commandParameter(r,Qt,u+".srcAlpha",e.commandStr),w.commandParameter(o,Qt,u+".dstRGB",e.commandStr),w.commandParameter(i,Qt,u+".dstAlpha",e.commandStr),w.command(-1===Jt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Qt[n],Qt[o],Qt[r],Qt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return w.optional((function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qt))})),u}w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),u=i("dst","RGB");w.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(w.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===a(n)?(w.commandParameter(n.rgb,g,t+".rgb",e.commandStr),w.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void w.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return w.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")})),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]}));case"blend.color":return s((function(t){return w.command(tt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),C(4,(function(e){return+t[e]}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),C(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return w.commandType(t,"number",u,e.commandStr),0|t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return w.commandParameter(r,$t,t+".cmp",e.commandStr),w.commandType(o,"number",t+".ref",e.commandStr),w.commandType(i,"number",t+".mask",e.commandStr),[$t[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return w.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return w.commandParameter(r,te,t+".fail",e.commandStr),w.commandParameter(o,te,t+".zfail",e.commandStr),w.commandParameter(i,te,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,te[r],te[o],te[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return w.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(te))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){w.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return w.commandType(n,"number",u+".factor",e.commandStr),w.commandType(r,"number",u+".units",e.commandStr),[n,r]}),(function(e,n,r){return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),w.command(!!n,u,e.commandStr),n}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return w.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return w.commandParameter(t,ne,u,e.commandStr),ne[t]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return w.command(tt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),C(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){w.command("object"===a(t)&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return w.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,d),A=function(t,e,r){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=n.id(o[t]);w.optional((function(){h.shader(ee[t],e,w.guessCommand())}));var r=ue((function(){return e}));return r.id=e,r}if(t in i){var a=i[t];return se(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return w.optional((function(){n(e.shared.shader,".shader(",ee[t],",",o,",",e.command,");")})),o}))}return null}var u,s=a(Ft),c=a(Bt),f=null;return ae(s)&&ae(c)?(f=h.program(c.id,s.id,null,r),u=ue((function(t,e){return t.link(f)}))):u=new ie(s&&s.thisDep||c&&c.thisDep,s&&s.contextDep||c&&c.contextDep,s&&s.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=s?s.append(t,e):e.def(r,".",Ft);var o=r+".program("+(c?c.append(t,e):e.def(r,".",Bt))+","+n;return w.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:s,vert:c,progVar:u,program:f}}(t,0,m);function I(t){var e=x[t];e&&(T[t]=e)}I("viewport"),I(k("scissor.box"));var O=Object.keys(T).length>0,D={framebuffer:_,draw:E,shader:A,state:T,dirty:O,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(D.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ue((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=se(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),D.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ue((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ue((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ue((function(t){return t.link(i.color[0])}))):w.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else tt(i)?r=ue((function(e){return e.global.def("[",C(i.length,(function(n){return w.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):w.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),o}(s,d),D.drawVAO=D.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(qt in n){var o=n[qt];return null!==o&&null===l.getVAO(o)&&(o=l.createVAO(o)),ue((function(t){return t.link(l.getVAO(o))}))}if(qt in r){var i=r[qt];return se(i,(function(t,e){var n=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!D.drawVAO&&A.program&&!m&&r.angle_instanced_arrays){var R=!0,M=A.program.attributes.map((function(t){var n=e.static[t];return R=R&&!!n,n}));if(R&&M.length>0){var N=l.getVAO(l.createVAO(M));D.drawVAO=new ie(null,null,null,(function(t,e){return t.link(N)})),D.useVAO=!0}}return m?D.useVAO=!0:D.attributes=function(t,e){var r=t.static,o=t.dynamic,u={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),c=new y;if(re(o))c.state=1,c.buffer=i.getBuffer(i.create(o,34962,!1,!0)),c.type=0;else{var f=i.getBuffer(o);if(f)c.state=1,c.buffer=f,c.type=0;else if(w.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var l=o.constant;c.buffer="null",c.state=2,"number"==typeof l?c.x=l:(w.command(tt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),jt.forEach((function(t,e){e<l.length&&(c[t]=l[e])})))}else{f=re(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),w.command(!!f,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;w.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|o.stride;w.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;w.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var v=!!o.normalized,m=0;"type"in o&&(w.commandParameter(o.type,z,"invalid type for attribute "+t,e.commandStr),m=z[o.type]);var g=0|o.divisor;"divisor"in o&&(w.command(0===g||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),w.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),w.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){w.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),c.buffer=f,c.state=1,c.size=p,c.normalized=v,c.type=m||f.dtype,c.offset=h,c.stride=d,c.divisor=g}}u[t]=ue((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(c).forEach((function(t){r[t]=c[t]})),c.buffer&&(r.buffer=t.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];u[t]=se(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,u=i.isBufferArgs,s=i.buffer;w.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new y;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",u,"(",o,")){",c.isStream,"=true;",l,"=",s,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[jt[0]],"=",o,".constant;",jt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",jt.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",34962,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",s,".destroyStream(",l,");","}"),c}))})),u}(e,d),D.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ue((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(f),D}function j(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i].append(t,e);Array.isArray(a)?o(r,".",i,"=[",a.join(),"];"):o(r,".",i,"=",a,";")})),e(o)}function L(t,e,n,r){var o,i=t.shared,a=i.gl,u=i.framebuffer;_&&(o=e.def(i.extensions,".webgl_draw_buffers"));var s,c=t.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",36160,",",s,".framebuffer);"),_&&e(o,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),_&&e(o,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function U(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,u=r.current,s=r.next,c=t.cond(u,".dirty");S.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=C(x[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(s,".",l);var d=t.cond(r,"!==",u,".",l);c(d),l in T?d(t.cond(r).then(o,".enable(",T[l],");").else(o,".disable(",T[l],");"),u,".",l,"=",r,";"):d(o,".",A[l],"(",r,");",u,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),e(c)}function B(t,e,n,r){var o=t.shared,i=t.current,a=o.current,u=o.gl;oe(Object.keys(n)).forEach((function(o){var s=n[o];if(!r||r(s)){var c=s.append(t,e);if(T[o]){var f=T[o];ae(s)?e(u,c?".enable(":".disable(",f,");"):e(t.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(tt(c)){var l=i[o];e(u,".",A[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(u,".",A[o],"(",c,");",a,".",o,"=",c,";")}}))}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function V(t,e,n,r,o){var i,a,u,s=t.shared,c=t.stats,f=s.current,l=s.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(t){t(i=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",i,";"),v&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function y(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ae(h))return void(h.enable?(p(e),m(e.exit),y("true")):y("false"));y(u=h.append(t,e))}else u=e.def(f,".profile");var g=t.block();p(g),e("if(",u,"){",g,"}");var b=t.block();m(b),e.exit("if(",u,"){",b,"}")}function W(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!o(s))return;a=s.append(t,e)}else{if(!o(ce))return;var c=t.scopeAttrib(u);w.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),a={},Object.keys(new y).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,u=e.def(n,".location"),s=e.def(i.attributes,"[",u,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",s,".type!==",i,"||",s,".size!==",n,"||",h.map((function(t){return s+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",h.map((function(t){return s+"."+t+"="+o[t]+";"})).join(""),"}"),b){var c=o.divisor;e("if(",s,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){e("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");",s,".buffer=null;","}if(",jt.map((function(t,e){return s+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",jt.map((function(t,e){return s+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function X(t,e,r,o,i){for(var a,u=t.shared,s=u.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,d=l.info.type,p=r.uniforms[h],v=t.link(l)+".location";if(p){if(!i(p))continue;if(ae(p)){var m=p.value;if(w.command(null!=m,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){w.command("function"==typeof m&&(35678===d&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||35680===d&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);e(s,".uniform1i(",v,",",y+".bind());"),e.exit(y,".unbind();")}else if(35674===d||35675===d||35676===d){w.optional((function(){w.command(tt(m),"invalid matrix for uniform "+h,t.commandStr),w.command(35674===d&&4===m.length||35675===d&&9===m.length||35676===d&&16===m.length,"invalid length for matrix uniform "+h,t.commandStr)}));var g=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(s,".uniformMatrix",b,"fv(",v,",false,",g,");")}else{switch(d){case 5126:w.commandType(m,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:w.commandType(m,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:w.commandType(m,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4i"}e(s,".uniform",a,"(",v,",",tt(m)?Array.prototype.slice.call(m):m,");")}continue}f=p.append(t,e)}else{if(!i(ce))continue;f=e.def(u.uniforms,"[",n.id(h),"]")}35678===d?(w(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(w(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),w.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){w(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){Array.isArray(f)?w(f.length===e,"must have length "+e):n(u.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){w(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var _=1;switch(d){case 35678:case 35680:var x=e.def(f,"._texture");e(s,".uniform1i(",v,",",x,".bind());"),e.exit(x,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(s,".uniform",a,"(",v,","),"M"===a.charAt(0)){var E=Math.pow(d-35674+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(f)?e("false,(",C(E,(function(t){return S+"["+t+"]="+f[t]})),",",S,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",C(E,(function(t){return S+"["+t+"]="+f+"["+t+"]"})),",",S,")")}else _>1?e(C(_,(function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"}))):(w(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function H(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,u=r.draw,s=function(){var o,s=u.elements,c=e;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),o=s.append(t,c)):o=c.def(a,".",zt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=u[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Vt),d=c(Xt),p=function(){var o,i=u.count,s=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(s=n),o=i.append(t,s),w.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(s,o+">=0","missing vertex count")}))):(o=s.def(a,".",Wt),w.optional((function(){t.assert(s,o+">=0","missing vertex count")}))),o}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(f=c(Ht),l=t.instancing);var v=s+".type",m=u.elements&&ae(u.elements);function y(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,v,d+"<<(("+v+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}function g(){function t(){n(i+".drawElements("+[h,p,v,d+"<<(("+v+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,d,p]+");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}b&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),y(),n("}else if(",f,"<0){"),g(),n("}")):y():g()}function q(t,e,n,r,o){var i=P(),a=i.proc("body",o);return w.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){F(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),W(t,e,n,r.attributes,(function(){return!0}))),X(t,e,n,r.uniforms,(function(){return!0})),H(t,e,e,n)}function K(t,e,n,r){function o(){return!0}t.batchId="a1",F(t,e),W(t,e,n,r.attributes,o),X(t,e,n,r.uniforms,o),H(t,e,e,n)}function Q(t,e,n,r){F(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var u=t.scope(),s=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(u.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",s,"}",u.exit),n.needsContext&&j(t,s,n.context),n.needsFramebuffer&&L(t,s,n.framebuffer),B(t,s,n.state,c),n.profile&&c(n.profile)&&V(t,s,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),W(t,u,n,r.attributes,f),W(t,s,n,r.attributes,c)),X(t,u,n,r.uniforms,f),X(t,s,n,r.uniforms,c),H(t,u,s,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,s),d=s.def(h,".id"),p=s.def(l,"[",d,"]");s(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return q(K,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",i,"],",i,");")}}function J(t,e,n){var r=e.static[n];if(r&&function(t){if("object"===a(t)&&!tt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(I.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),u=!1,s=!1,c=!1,f=t.global.def("{}");i.forEach((function(e){var n=r[e];if(I.isDynamic(n)){"function"==typeof n&&(n=r[e]=I.unbox(n));var i=se(n,null);u=u||i.thisDep,c=c||i.propDep,s=s||i.contextDep}else{switch(o(f,".",e,"="),a(n)){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new I.DynamicVariable(4,{thisDep:u,contextDep:s,propDep:c,ref:f,append:function(t,e){i.forEach((function(n){var o=r[n];if(I.isDynamic(o)){var i=t.invoke(e,o);e(f,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:E,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,u=t.shared,s=u.gl,c=u.next,f=u.current;i(f,".dirty=false;"),L(t,e),L(t,n,null,!0),b&&(a=t.link(b)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var h=n.def(u.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(s,".enableVertexAttribArray(",l,");",s,".bindBuffer(",34962,",",h,".buffer.buffer);",s,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",l,");",s,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),b&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(T).forEach((function(r){var o=T[r],a=i.def(c,".",r),u=t.block();u("if(",a,"){",s,".enable(",o,")}else{",s,".disable(",o,")}",f,".",r,"=",a,";"),n(u),e("if(",a,"!==",f,".",r,"){",u,"}")})),Object.keys(A).forEach((function(r){var o,a,u=A[r],l=x[r],h=t.block();if(h(s,".",u,"("),tt(l)){var d=l.length;o=t.global.def(c,".",r),a=t.global.def(f,".",r),h(C(d,(function(t){return o+"["+t+"]"})),");",C(d,(function(t){return a+"["+t+"]="+o+"["+t+"];"})).join("")),e("if(",C(d,(function(t){return o+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else o=i.def(c,".",r),a=i.def(f,".",r),h(o,");",f,".",r,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,r,o,i,a){var u=P();u.stats=u.link(a),Object.keys(r.static).forEach((function(t){J(u,r,t)})),Zt.forEach((function(e){J(u,t,e)}));var s=G(t,r,o,i,u);return function(t,e){var n=t.proc("draw",1);F(t,n),j(t,n,e.context),L(t,n,e.framebuffer),U(t,n,e),B(t,n,e.state),V(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return q(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}j(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),oe(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);tt(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),V(t,r,e,!0,!0),[zt,Xt,Wt,Ht,Vt].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){var a=e.uniforms[i].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(o.uniforms,"["+n.id(i)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new y).forEach((function(t){r.set(i,"."+t,o[t])}))})),e.scopeVAO&&r.set(o.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Bt),a(Ft),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(u,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",F(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(j(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function u(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||L(t,n,i)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),U(t,n,e),B(t,n,e.state,(function(t){return!u(t)})),e.profile&&u(e.profile)||V(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var s=e.shader.progVar;if(s.contextDep&&r||s.propDep)Q(t,n,e,null);else{var c=s.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return q(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),e(u.compile(),{destroy:function(){s.shader.program.destroy()}})}}}var le=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function u(t){a.push(t)}var s=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<s.length;++n){var h=s[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var v=l[d],m=l[p];m===v?(h.stats.gpuTime+=h.sum/1e6,u(h)):(h.startQueryIndex=v,h.endQueryIndex=m,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function he(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=M(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),u=o.isContextLost(),s=function(t,e){var n={};function r(e){w.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var c,f,l=(c={"":0},f=[""],{id:function(t){var e=c[t];return e||(e=c[t]=f.length,f.push(t),e)},str:function(t){return f[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,p=le(0,d),v=O(),m=o.drawingBufferWidth,y=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:r.pixelRatio},b=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=t.createFramebuffer();if(t.bindFramebuffer(36160,u),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=G.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?i=!1:(t.deleteFramebuffer(u),t.deleteTexture(a),i=1===s[0]),G.freeType(s)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=G.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),G.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,d),_=function(e,n,r,o){var i=0,a={};function u(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var u,s;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){u=X(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];e.dimension=f,c(e,s=W(n,u,e.dtype),r),a?e.persistentData=s:G.freeType(s)}else if("number"==typeof n[0]){e.dimension=i;var h=G.allocType(e.dtype,n.length);Y(h,n),c(e,h,r),a?e.persistentData=h:G.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||q(n[0])||5126,c(e,s=W(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=s:G.freeType(s)):w.raise("invalid buffer data")}else if(t(n))e.dtype=o||q(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(j(n)){u=n.shape;var d=n.stride,p=n.offset,v=0,m=0,y=0,g=0;1===u.length?(v=u[0],m=1,y=d[0],g=0):2===u.length?(v=u[0],m=u[1],y=d[0],g=d[1]):w.raise("invalid shape"),e.dtype=o||q(n.data)||5126,e.dimension=m;var b=G.allocType(e.dtype,v*m);K(b,n.data,v,m,y,g,p),c(e,b,r),a?e.persistentData=b:G.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):w.raise("invalid buffer data")}function l(t){n.bufferCount--,o(t);var r=t.buffer;w(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,s,c){n.bufferCount++;var h=new u(i);function d(n){var o=35044,i=null,a=0,u=0,s=1;return Array.isArray(n)||t(n)||j(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(w.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(w(null===i||Array.isArray(i)||t(i)||j(i),"invalid data for buffer"),i=n.data),"usage"in n&&(w.parameter(n.usage,V,"invalid buffer usage"),o=V[n.usage]),"type"in n&&(w.parameter(n.type,z,"invalid buffer type"),u=z[n.type]),"dimension"in n&&(w.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(w.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,u,s,c):(a&&e.bufferData(h.type,a,o),h.dtype=u||5121,h.usage=o,h.dimension=s,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*H[h.dtype]),d}function p(t,n){w(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,s||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=G.allocType(h.dtype,e.length);Y(i,e),p(i,o),G.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=X(e);var a=W(e,r,h.dtype);p(a,o),G.freeType(a)}else w.raise("invalid buffer data")}else if(j(e)){r=e.shape;var u=e.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):w.raise("invalid shape");var v=Array.isArray(e.data)?h.dtype:q(e.data),m=G.allocType(v,s*c);K(m,e.data,s,c,f,l,e.offset),p(m,o),G.freeType(m)}else w.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=s.pop();return n||(n=new u(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){s.push(t)},clear:function(){L(a).forEach(l),s.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof u?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,h,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,o,i){for(var a=r.maxAttributes,u=new Array(a),s=0;s<a;++s)u[s]=new Ct;var c=0,f={},l={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function u(e){w(Array.isArray(e),"arguments to vertex array constructor must be an array"),w(e.length<a,"too many attributes"),w(e.length>0,"must specify at least one attribute");var o={},s=r.attributes;s.length=e.length;for(var c=0;c<e.length;++c){var f,l=e[c],h=s[c]=new Ct,d=l.data||l;Array.isArray(d)||t(d)||j(d)?(r.buffers[c]&&(f=r.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),r.buffers[c]=null)),r.buffers[c]||(f=r.buffers[c]=i.create(l,34962,!1,!0)),h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):i.getBuffer(l)?(h.buffer=i.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(l.buffer)?(h.buffer=i.getBuffer(l.buffer),h.size=0|(+l.size||h.buffer.dimension),h.normalized=!!l.normalized||!1,"type"in l?(w.parameter(l.type,z,"invalid buffer type"),h.type=z[l.type]):h.type=h.buffer.dtype,h.offset=0|(l.offset||0),h.stride=0|(l.stride||0),h.divisor=0|(l.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in l?(w(c>0,"first attribute must not be a constant"),h.x=+l.x||0,h.y=+l.y||0,h.z=+l.z||0,h.w=+l.w||0,h.state=2):w(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!o[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),u}return o.vaoCount+=1,u.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},u._vao=r,u._reglType="vao",u(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<u.length;++r){var o=u[r];o.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var i=n.length;i<a;++i)e.disableVertexAttribArray(i)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},l}(o,d,b,h,_),E=function(e,n,r,o){var i={},a=0,u={uint8:5121,uint16:5123};function s(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=5125),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,u,s,c,f){var l;if(o.buffer.bind(),i){var h=f;f||t(i)&&(!j(i)||t(i.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(34963,c,a),o.buffer.dtype=l||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:w.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,w(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=s;d<0&&(d=o.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),o.vertCount=d;var p=u;if(u<0){p=4;var v=o.buffer.dimension;1===v&&(p=0),2===v&&(p=1),3===v&&(p=4)}o.primType=p}function l(t){o.elementsCount--,w(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new s(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,s=-1,l=0,h=0;Array.isArray(e)||t(e)||j(e)?n=e:(w.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,w(Array.isArray(n)||t(n)||j(n),"invalid data for element buffer")),"usage"in e&&(w.parameter(e.usage,V,"invalid element buffer usage"),r=V[e.usage]),"primitive"in e&&(w.parameter(e.primitive,Z,"invalid element buffer primitive"),o=Z[e.primitive]),"count"in e&&(w("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(w.parameter(e.type,u,"invalid buffer type"),h=u[e.type]),"length"in e?l=0|e.length:(l=s,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,s,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new s(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){L(i).forEach(l)}}}(o,d,_,h),S=function(t,n,r,o){var i={},a={};function u(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,o){var u=35632===e?i:a,s=u[r];if(!s){var c=n.str(r);s=t.createShader(e),t.shaderSource(s,c),t.compileShader(s),w.shaderError(t,s,c,e,o),u[r]=s}return s}var f={},l=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,i){var a,f,l=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),i)for(a=0;a<i.length;++a){var p=i[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),w.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(f=t.getActiveUniform(d,a))if(f.size>1)for(var y=0;y<f.size;++y){var g=f.name.replace("[0]","["+y+"]");s(m,new u(g,n.id(g),t.getUniformLocation(d,g),f))}else s(m,new u(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(f=t.getActiveAttrib(d,a))&&s(_,new u(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var t=0;return l.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return l.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(a).forEach(e),a={},l.forEach((function(e){t.deleteProgram(e.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,u,s){w.command(n>=0,"missing vertex shader",u),w.command(o>=0,"missing fragment shader",u);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!s))return h;var v=new d(o,n);return r.shaderCount++,p(v,u,s),h||(c[n]=v),l.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=l.indexOf(v);l.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete f[v.fragId][v.vertId]),Object.keys(f[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete f[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<l.length;++t)p(l[t],null,l[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(o,l,h,r),T=Tt(o,d,b,(function(){R.procs.poll()}),g,h,r),A=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var u=[];Object.keys(i).forEach((function(t){var e=i[t];u[e]=t}));var s=0,c={};function f(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;w(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}return f.prototype.decRef=function(){--this.refCount<=0&&l(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach((function(e){t+=c[e].stats.size})),t}),{create:function(e,s){var l=new f(t.createRenderbuffer());function h(e,r){var s=0,c=0,f=32854;if("object"===a(e)&&e){var d=e;if("shape"in d){var p=d.shape;w(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],c=0|p[1]}else"radius"in d&&(s=c=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(c=0|d.height);"format"in d&&(w.parameter(d.format,i,"invalid renderbuffer format"),f=i[d.format])}else"number"==typeof e?(s=0|e,c="number"==typeof r?0|r:s):e?w.raise("invalid arguments to renderbuffer constructor"):s=c=1;if(w(s>0&&c>0&&s<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||c!==l.height||f!==l.format)return h.width=l.width=s,h.height=l.height=c,l.format=f,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,f,s,c),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height)),h.format=u[l.format],h}return c[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=function(e,r){var i=0|e,a=0|r||i;return i===l.width&&a===l.height||(w(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=i,h.height=l.height=a,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,i,a),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height))),h},h._reglType="renderbuffer",h._renderbuffer=l,o.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){L(c).forEach(l)},restore:function(){L(c).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,d,b,h,r),D=function(t,n,r,o,i,u){var s={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);w(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;w(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),w.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,w(3553===e)):"textureCube"===i?(n=o,w(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):w.raise("invalid regl object for attachment"),new h(e,n,r)}function y(t,e,n,r,a){if(n){var u=o.create2D({width:t,height:e,format:r,type:a});return u._texture.refCount=0,new h(3553,u,null)}var s=i.create({width:t,height:e,format:r});return s._renderbuffer.refCount=0,new h(36161,null,s)}function g(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var _=0,x={};function E(){this.id=_++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function T(e){var n=e.framebuffer;w(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,u.framebufferCount--,delete x[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||w.raise("framebuffer configuration not supported, status = "+Mt[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function I(t,o){var i=new E;function a(t,e){var o;w(s.next!==i,"can not update framebuffer which is currently in use");var u=0,h=0,d=!0,v=!0,b=null,_=!0,x="rgba",E="uint8",T=1,I=null,k=null,O=null,D=!1;if("number"==typeof t)u=0|t,h=0|e||u;else if(t){w.type(t,"object","invalid arguments for framebuffer");var R=t;if("shape"in R){var M=R.shape;w(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),u=M[0],h=M[1]}else"radius"in R&&(u=h=R.radius),"width"in R&&(u=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&w(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(T=0|R.colorCount,w(T>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(w(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(w(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(w(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),w.oneOf(E,l,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,c.indexOf(x)>=0?_=!0:f.indexOf(x)>=0?_=!1:_?w.oneOf(R.colorFormat,c,"invalid color format for texture"):w.oneOf(R.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in R||"depthStencilTexture"in R)&&(D=!(!R.depthTexture&&!R.depthStencilTexture),w(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(I=R.depth,v=!1)),"stencil"in R&&("boolean"==typeof R.stencil?v=R.stencil:(k=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=v=R.depthStencil:(O=R.depthStencil,d=!1,v=!1))}else u=h=1;var C=null,N=null,P=null,G=null;if(Array.isArray(b))C=b.map(m);else if(b)C=[m(b)];else for(C=new Array(T),o=0;o<T;++o)C[o]=y(u,h,_,x,E);w(n.webgl_draw_buffers||C.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(C.length<=r.maxColorAttachments,"too many color attachments, not supported"),u=u||C[0].width,h=h||C[0].height,I?N=m(I):d&&!v&&(N=y(u,h,D,"depth","uint32")),k?P=m(k):v&&!d&&(P=y(u,h,!1,"stencil","uint8")),O?G=m(O):!I&&!k&&v&&d&&(G=y(u,h,D,"depth stencil","depth stencil")),w(!!I+!!k+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(o=0;o<C.length;++o)if(p(C[o],u,h),w(!C[o]||C[o].texture&&kt.indexOf(C[o].texture._texture.format)>=0||C[o].renderbuffer&&Rt.indexOf(C[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),C[o]&&C[o].texture){var L=Ot[C[o].texture._texture.format]*Dt[C[o].texture._texture.type];null===j?j=L:w(j===L,"all color attachments much have the same number of bits per pixel.")}return p(N,u,h),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(P,u,h),w(!P||P.renderbuffer&&36168===P.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(G,u,h),w(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=u,i.height=h,i.colorAttachments=C,i.depthAttachment=N,i.stencilAttachment=P,i.depthStencilAttachment=G,a.color=C.map(g),a.depth=g(N),a.stencil=g(P),a.depthStencil=g(G),a.width=i.width,a.height=i.height,A(i),a}return u.framebufferCount++,a(t,o),e(a,{resize:function(t,e){w(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return a;for(var o=i.colorAttachments,u=0;u<o.length;++u)b(o[u],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=a.width=n,i.height=a.height=r,A(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){T(i),S(i)},use:function(t){s.setFBO({framebuffer:a},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof E)return e}return null},create:I,createCube:function(t){var i=Array(6);function a(t){var r;w(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},h=0,d=null,p="rgba",v="uint8",m=1;if("number"==typeof t)h=0|t;else if(t){w.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var g=y.shape;w(Array.isArray(g)&&g.length>=2,"invalid shape for framebuffer"),w(g[0]===g[1],"cube framebuffer must be square"),h=g[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&w(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&w(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(m=0|y.colorCount,w(m>0,"invalid color buffer count")),"colorType"in y&&(w.oneOf(y.colorType,l,"invalid color type"),v=y.colorType),"colorFormat"in y&&(p=y.colorFormat,w.oneOf(y.colorFormat,c,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(u=[],r=0;r<d.length;++r)u[r]=d[r];else u=[d];else{u=Array(m);var b={radius:h,format:p,type:v};for(r=0;r<m;++r)u[r]=o.createCube(b)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];w("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,w(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:34069,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)f.color[x].target=34069+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=I(f)}return e(a,{width:h,height:h,color:u})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(w(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){L(x).forEach(T)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(o,d,b,T,A,h),R=fe(o,l,d,b,_,E,0,D,{},x,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,p,r),C=Nt(o,D,R.procs.poll,g,i,d,b),N=R.next,P=o.canvas,U=[],B=[],F=[],Q=[r.onDestroy],J=null;function $(){if(0===U.length)return p&&p.update(),void(J=null);J=k.next($),ct();for(var t=U.length-1;t>=0;--t){var e=U[t];e&&e(g,null,0)}o.flush(),p&&p.update()}function tt(){!J&&U.length>0&&(J=k.next($))}function et(){J&&(k.cancel($),J=null)}function nt(t){t.preventDefault(),u=!0,et(),B.forEach((function(t){t()}))}function rt(t){o.getError(),u=!1,s.restore(),S.restore(),_.restore(),T.restore(),A.restore(),D.restore(),x.restore(),p&&p.restore(),R.procs.refresh(),tt(),F.forEach((function(t){t()}))}function ot(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(o){var i=t[o];if(I.isDynamic(i))r[o]=I.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(I.isDynamic(i[a]))return void(r[o]=I.unbox(i,o));n[o]=i}})),{dynamic:r,static:n}}w(!!t,"invalid args to regl({...})"),w.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),o=n(t.uniforms||{},!0),i=n(t.attributes||{},!1),a=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=R.compile(a,i,o,r,s),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(u&&w.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:s,destroy:function(){c.destroy()}})}P&&(P.addEventListener("webglcontextlost",nt,!1),P.addEventListener("webglcontextrestored",rt,!1));var it=D.setFBO=ot({framebuffer:I.define.call(null,1,"framebuffer")});function at(t,e){var n=0;R.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),w(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ut(t){return w.type(t,"function","regl.frame() callback must be a function"),U.push(t),tt(),{cancel:function(){var e=he(U,t);w(e>=0,"cannot cancel a frame twice"),U[e]=function t(){var e=he(U,t);U[e]=U[U.length-1],U.length-=1,U.length<=0&&et()}}}}function st(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ct(){g.tick+=1,g.time=lt(),st(),R.procs.poll()}function ft(){T.refresh(),st(),R.procs.refresh(),p&&p.update()}function lt(){return(O()-v)/1e3}ft();var ht=e(ot,{clear:function(t){if(w("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),at);else it(t,at);else at(0,t)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:ot({}),buffer:function(t){return _.create(t,34962,!1,!1)},elements:function(t){return E.create(t,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:A.create,framebuffer:D.create,framebufferCube:D.createCube,vao:x.createVAO,attributes:i,frame:ut,on:function(t,e){var n;switch(w.type(e,"function","listener callback must be a function"),t){case"frame":return ut(e);case"lost":n=B;break;case"restore":n=F;break;case"destroy":n=Q;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){U.length=0,et(),P&&(P.removeEventListener("webglcontextlost",nt),P.removeEventListener("webglcontextrestored",rt)),S.clear(),D.clear(),A.clear(),T.clear(),E.clear(),_.clear(),x.clear(),p&&p.clear(),Q.forEach((function(t){t()}))},_gl:o,_refresh:ft,poll:function(){ct(),p&&p.update()},now:lt,stats:h});return r.onDone(null,ht),ht}},"object"===a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},,,,,,,,function(t,e,n){var r=n(198);t.exports={Graph:r.Graph,json:n(299),alg:n(300),version:r.version}},function(t,e,n){t.exports={Graph:n(74),version:n(298)}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(56),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(56);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(55);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(55),o=n(75),i=n(76);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(46),o=n(213),i=n(21),a=n(107),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(42),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(214),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(217),o=n(55),i=n(75);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(218),o=n(219),i=n(220),a=n(221),u=n(222);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(57);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(58);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(47),o=n(32);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(31),o=n(78),i=n(25),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(110)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(64),i=n(236),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(47),o=n(81);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(47),o=n(115);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(117),o=n(115),i=n(38);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(37)(n(24),"DataView");t.exports=r},function(t,e,n){var r=n(37)(n(24),"Promise");t.exports=r},function(t,e,n){var r=n(37)(n(24),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(83),o=n(245),i=n(246),a=n(247),u=n(120);t.exports=function(t,e,n){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(42),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(249),o=n(63),i=n(79),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(251),o=n(63),i=n(79),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(28);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(256),o=n(264),i=n(132);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(54),o=n(127);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],l=t[f],h=c[1];if(s&&c[2]){if(void 0===l&&!(f in t))return!1}else{var d=new r;if(i)var p=i(l,h,f,t,e,d);if(!(void 0===p?o(h,l,3,i,d):p))return!1}}return!0}},function(t,e,n){var r=n(54),o=n(128),i=n(261),a=n(263),u=n(44),s=n(13),c=n(43),f=n(22),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,v){var m=s(t),y=s(e),g=m?"[object Array]":u(t),b=y?"[object Array]":u(e),_=(g="[object Arguments]"==g?l:g)==l,x=(b="[object Arguments]"==b?l:b)==l,w=g==b;if(w&&c(t)){if(!c(e))return!1;m=!0,_=!1}if(w&&!_)return v||(v=new r),m||f(t)?o(t,e,n,d,p,v):i(t,e,g,n,d,p,v);if(!(1&n)){var E=_&&h.call(t,"__wrapped__"),S=x&&h.call(e,"__wrapped__");if(E||S){var T=E?t.value():t,A=S?e.value():e;return v||(v=new r),p(T,A,n,d,v)}}return!!w&&(v||(v=new r),a(t,e,n,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(42),o=n(119),i=n(41),a=n(128),u=n(262),s=n(87),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var m=a(d(t),d(e),r,c,l,h);return h.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(116),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var l=f;l--;){var h=c[l];if(!(s?h in e:o.call(e,h)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var m=s;++l<f;){var y=t[h=c[l]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(131),o=n(32);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(127),o=n(266),i=n(134),a=n(88),u=n(131),s=n(132),c=n(49);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(268),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(269);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(76);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(42),o=n(69),i=n(13),a=n(45),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(136),o=n(273),i=n(88),a=n(49);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(80),o=n(44),i=n(48),a=n(13),u=n(28),s=n(43),c=n(64),f=n(22),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(80),o=n(44),i=n(28),a=n(279),u=n(280);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},function(t,e,n){var r=n(31),o=n(13),i=n(25);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(281),o=n(282),i=n(283);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(136)("length");t.exports=r},function(t,e){var n=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\\\ud800-\\\\udfff]",r="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+r+"?",r,a,u,n].join("|")+")",l=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},function(t,e,n){var r=n(77),o=n(122),i=n(85),a=n(29),u=n(65),s=n(13),c=n(43),f=n(46),l=n(21),h=n(22);t.exports=function(t,e,n){var d=s(t),p=d||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=p?d?new v:[]:l(t)&&f(v)?o(u(t)):{}}return(p?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(89),o=n(70),i=n(144),a=n(146),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(42),o=n(48),i=n(13),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(84),o=n(108),i=n(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(291);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(145),o=n(292),i=n(293);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(118),o=n(296),i=n(87),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,n){var r=n(20),o=n(74);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(301),dijkstra:n(148),dijkstraAll:n(302),findCycles:n(303),floydWarshall:n(304),isAcyclic:n(305),postorder:n(306),preorder:n(307),prim:n(308),tarjan:n(150),topsort:n(151)}},function(t,e,n){var r=n(20);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(148),o=n(20);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(20),o=n(150);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(151);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(20),o=n(74),i=n(149);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(346),i=n(349),a=n(350),u=n(18).normalizeRanks,s=n(352),c=n(18).removeEmptyRanks,f=n(353),l=n(354),h=n(355),d=n(356),p=n(365),v=n(18),m=n(23).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=A(t.graph());return e.setGraph(r.merge({},g,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var o=A(t.node(n));e.setNode(n,r.defaults(T(o,_),x)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=A(t.edge(n));e.setEdge(n,r.merge({},E,T(o,w),r.pick(o,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){h.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){h.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function A(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(70),o=n(41),i=n(71),a=n(38),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],l=a(f),h=-1,d=l.length;++h<d;){var p=l[h],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,n){var r=n(313)(n(314));t.exports=r},function(t,e,n){var r=n(29),o=n(28),i=n(32);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(145),o=n(29),i=n(315),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(153);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(21),o=n(45),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(86),o=n(125),i=n(38);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(60),o=n(85),i=n(29);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(90),o=n(321),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(323),o=n(326)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(54),o=n(155),i=n(86),a=n(324),u=n(21),s=n(38),c=n(156);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,l,h);else{var d=l?l(c(e,s),i,s+"",e,n,h):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,n){var r=n(155),o=n(111),i=n(120),a=n(112),u=n(121),s=n(48),c=n(13),f=n(146),l=n(43),h=n(46),d=n(21),p=n(101),v=n(22),m=n(156),y=n(325);t.exports=function(t,e,n,g,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var T=_?_(w,E,n+"",t,e,x):void 0,A=void 0===T;if(A){var I=c(E),k=!I&&l(E),O=!I&&!k&&v(E);T=E,I||k||O?c(w)?T=w:f(w)?T=a(w):k?(A=!1,T=o(E,!0)):O?(A=!1,T=i(E,!0)):T=[]:p(E)||s(E)?(T=w,s(w)?T=y(w):d(w)&&!h(w)||(T=u(E))):A=!1}A&&(x.set(E,T),b(T,E,g,_,x),x.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(70),o=n(71);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(90),o=n(157),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(90),o=n(29),i=n(157);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(24);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(331),o=n(334)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(332),o=n(134);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(67),o=n(333),i=n(68);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(59),o=n(68),i=n(62),a=n(21),u=n(49);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,l=f-1,h=t;null!=h&&++c<f;){var d=u(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=l){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(154),o=n(142),i=n(143);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(336)();t.exports=r},function(t,e,n){var r=n(337),o=n(71),i=n(153);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(89),o=n(339),i=n(70),a=n(71),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(69),o=n(67),i=n(29),a=n(140),u=n(340),s=n(63),c=n(341),f=n(39),l=n(13);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var h=-1;e=r(e,s(i));var d=a(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++h,value:t}}));return u(d,(function(t,e){return c(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(342);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),u=void 0!==e,s=null===e,c=e==e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(133),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(59),o=n(345);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(347);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(11),o=n(23).Graph,i=n(348);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(11),o=n(18);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,l=t.edge(e),h=l.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:u},n=o.addDummyNode(t,"edge",r,"_d"),u===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(a,n,{weight:l.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:l.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){"use strict";var r=n(72).longestPath,o=n(158),i=n(351);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){r(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){"use strict";var r=n(11),o=n(158),i=n(72).slack,a=n(72).longestPath,u=n(23).alg.preorder,s=n(23).alg.postorder,c=n(18).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(d(n),l(n,t);e=v(n);)y(n,t,e,m(n,t,e))}function l(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var l=c===i,h=e.edge(r).weight;if(u+=l?h:-h,a=n,s=f,t.hasEdge(a,s)){var d=t.edge(n,f).cutvalue;u+=l?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=p(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function m(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var l=r.filter(e.edges(),(function(e){return f===g(t,t.node(e.v),c)&&f!==g(t,t.node(e.w),c)}));return r.minBy(l,(function(t){return i(e,t)}))}function y(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=l,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=m,f.exchangeEdges=y},function(t,e,n){var r=n(11);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(11),o=n(18);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var l=o.addBorderNode(e,"_bt"),h=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(l,c),d.borderTop=l,e.setParent(h,c),d.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,d=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(l,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,l,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",n,a,u),i(t,"borderRight","_br",n,a,u)}}))}},function(t,e,n){"use strict";var r=n(11);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(t),o(t))}}},function(t,e,n){"use strict";var r=n(11),o=n(357),i=n(358),a=n(359),u=n(363),s=n(364),c=n(23).Graph,f=n(18);function l(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),a=l(t,r.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=f.buildLayerMatrix(t);var m=i(t,u);m<c&&(v=0,s=r.cloneDeep(u),c=m)}d(t,s)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){"use strict";var r=n(11);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(11),o=n(360),i=n(361),a=n(362);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),l=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,d={};l&&(c=r.filter(c,(function(t){return t!==l&&t!==h})));var p=o(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);d[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var m=a(v,s);if(l&&(m.vs=r.flatten([l,m.vs,h],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),g=e.node(e.predecessors(h)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+g.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,"barycenter")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,l=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),l=i(s,u,l),r.forEach(a,(function(t){l+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,l=i(s,u,l)}));var h;var d={vs:r.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,n){var r=n(11),o=n(23).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){"use strict";var r=n(11),o=n(18),i=n(366).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(18);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=l?t.node(l).order:u;(l||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,l=Math.floor(f),h=Math.ceil(f);l<=h;++l){var d=s[l];a[t]===t&&e<u[d]&&!c(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function l(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function d(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u="l"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach(["u","d"],(function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(t,e,n){var r=n(11),o=n(18),i=n(23).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o="layer"+e;n.setNode(o,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},function(t,e){t.exports="0.8.5"},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function p(){}var v={};v[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==n&&r.call(y,i)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var o;this._invoke=function(i,a){function u(){return new n((function(o,u){!function o(i,a,u,s){var c=f(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===e(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,u,s)}),(function(t){o("throw",t,u,s)})):n.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,s)}))}s(c.arg)}(i,a,o,u)}))}return o=o?o.then(u,u):u()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,d.displayName=s(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,u,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(61)(t))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(375),u=n(19),s=n(30),c=n(17),f=n(162),l=n(376),h=n(383),d=n(385),p=n(40),v=n(50),m=n(388),y=n(389),g=function(){function t(t){var e=t||{};if("object"!==r(e))throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new f.MetadataReader}return t.merge=function(e,n){var r=new t,o=l.getBindingDictionary(r),i=l.getBindingDictionary(e),a=l.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(i,o),u(a,o),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind.bind(t)(r);return e(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=t.bind.bind(t)(n);return e(r,o),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var o}},t.prototype._get=function(t,e,n,r,o,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(30),o=n(40),i=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(377),o=n(19),i=n(30),a=n(17),u=n(163),s=n(50),c=n(378),f=n(26),l=n(379),h=n(380),d=n(382),p=n(165);function v(t){return t._bindingDictionary}function m(t,e,n,i,a){var u=y(n.container,a.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=y(n.container,a.serviceIdentifier)),c=e?u:u.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),u=o.NOT_REGISTERED;throw u+=s.listMetadataForTarget(a,n),u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),u=o.AMBIGUOUS_MATCH+" "+a;throw u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u)}}(a.serviceIdentifier,c,a,n.container),c}function y(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=v,e.plan=function(t,e,n,r,v,y,g,b){void 0===b&&(b=!1);var _=new c.Context(e),x=function(t,e,n,r,o,i){var u=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new f.Metadata(u,n),c=new p.Target(e,r,n,s);if(void 0!==o){var l=new f.Metadata(o,i);c.metadata.push(l)}return c}(n,r,v,"",y,g);try{return function t(e,n,r,a,u,s){var c,f;if(null===u){c=m(e,n,a,null,s),f=new d.Request(r,a,null,c,s);var p=new l.Plan(a,f);a.addPlan(p)}else c=m(e,n,a,u,s),f=u.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(n){var r=null;if(s.isArray())r=f.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=f}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var u=h.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,n.implementationType);if(u.length<c){var l=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(l)}}u.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,v,_,null,x),_}catch(t){throw u.isStackOverflowExeption(t)&&_.plan&&s.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var o=new p.Target(i.TargetTypeEnum.Variable,"",e,new f.Metadata(n,r)),a=new c.Context(t);return new d.Request(e,a,null,[],o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(40),o=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var o=n(164),i=n(19),a=n(30),u=n(17),s=n(50);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var c=n(165);function f(t,e,n,o){var u=t.getConstructorMetadata(n),s=u.compilerGeneratedMetadata;if(void 0===s){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(f)}var d=u.userGeneratedMetadata,p=Object.keys(d),v=function(t,e,n,r,o){for(var i=[],a=0;a<o;a++){var u=l(a,t,e,n,r);null!==u&&i.push(u)}return i}(o,e,s,d,0===n.length&&p.length>0?p.length:n.length),m=function t(e,n){for(var o=e.getPropertiesMetadata(n),i=[],u=Object.keys(o),s=0,f=u;s<f.length;s++){var l=f[s],d=o[l],p=h(o[l]),v=p.targetName||l,m=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,v,m);y.metadata=d,i.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var b=t(e,g);i=r(i,b)}return i}(t,n);return r(v,m)}function l(t,e,n,r,u){var s=u[t.toString()]||[],f=h(s),l=!0!==f.unmanaged,d=r[t],p=f.inject||f.multiInject;if((d=p||d)instanceof o.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!e&&(d===Object||d===Function||void 0===d)){var v=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(v)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return m.metadata=s,m}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return f(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=f(e,s.getFunctionName(r),r,!0),i=o.map((function(t){return t.metadata.filter((function(t){return t.key===u.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=o.length-a;return c>0?c:t(e,r)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(40),o=function(){function t(t,e,n,o,i){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();e.Request=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(19),o=n(30),i=n(163),a=n(50),u=n(384),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}};e.resolve=function(t){return function t(e){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return t(e)(n)}));var h=null;if(!n.target.isOptional()||0!==i.length){var d=i[0],p=d.scope===o.BindingScopeEnum.Singleton,v=d.scope===o.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(v&&null!==e&&e.has(d.id))return e.get(d.id);if(d.type===o.BindingTypeEnum.ConstantValue)h=d.cache;else if(d.type===o.BindingTypeEnum.Function)h=d.cache;else if(d.type===o.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===o.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=s("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Factory&&null!==d.factory)h=s("toFactory",d.serviceIdentifier,(function(){return d.factory(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Provider&&null!==d.provider)h=s("toProvider",d.serviceIdentifier,(function(){return d.provider(n.parentContext)}));else{if(d.type!==o.BindingTypeEnum.Instance||null===d.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(d.implementationType,c,t(e))}return"function"==typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),v&&null!==e&&!e.has(d.id)&&e.set(d.id,h),h}}}(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var o=n(19),i=n(30),a=n(17);e.resolveInstance=function(t,e,n){var u,s,c=null;if(e.length>0){var f=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=f,c=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i})),t}(c=new((u=t).bind.apply(u,r([void 0],s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(19),o=n(30),i=n(386),a=n(166),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(387),o=n(91),i=n(92),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(30),o=n(166),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(19),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var o=n.filter((function(e){return!t(e)}));o.length>0?e._map.set(r,o):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(40),o=function(t){this.id=r.id(),this.registry=t};e.ContainerModule=o;var i=function(t){this.id=r.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(19),o=n(17);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(26),o=n(33);e.tagged=function(t,e){return function(n,i,a){var u=new r.Metadata(t,e);"number"==typeof a?o.tagParameter(n,i,a,u):o.tagProperty(n,i,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(17),o=n(26),i=n(33);e.named=function(t){return function(e,n,a){var u=new o.Metadata(r.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(17),o=n(26),i=n(33);e.optional=function(){return function(t,e,n){var a=new o.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(17),o=n(26),i=n(33);e.unmanaged=function(){return function(t,e,n){var a=new o.Metadata(r.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(17),o=n(26),i=n(33);e.multiInject=function(t){return function(e,n,a){var u=new o.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(17),o=n(26),i=n(33);e.targetName=function(t){return function(e,n,a){var u=new o.Metadata(r.NAME_TAG,t);i.tagParameter(e,n,a,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(19),o=n(17),i=n(26);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function o(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()},set:function(t){Reflect.defineMetadata(r,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(i,a){o(i,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,i){return function(a,u){o(a,u,(function(){return t.getTagged(n,r,i)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.getAll(n)}),e)}}}},function(t,e,n){var r=n(161);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},function(t,e){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r*Math.max(1,Math.abs(o),Math.abs(a))};var r=n(175)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){t.exports=n(100)},function(t,e,n){t.exports=n(179)},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){var r=Math.cos(n),o=Math.sin(n),i=e[0],a=e[1];return t[0]=i*r-a*o,t[1]=i*o+a*r,t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},function(t,e,n){t.exports=n(181)},function(t,e,n){t.exports=n(182)},function(t,e,n){t.exports=n(183)},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var u,s;e||(e=2);n||(n=0);s=o?Math.min(o*e+n,t.length):t.length;for(u=n;u<s;u+=e)r[0]=t[u],r[1]=t[u+1],i(r,r,a),t[u]=r[0],t[u+1]=r[1];return t};var r=n(176)()},function(t,e){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var o=Math.sqrt(r);t[0]=e[0]/o*n,t[1]=e[1]/o*n}else t[0]=e[0],t[1]=e[1];return t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return go})),n.d(r,"fromMat4",(function(){return bo})),n.d(r,"clone",(function(){return _o})),n.d(r,"copy",(function(){return xo})),n.d(r,"fromValues",(function(){return wo})),n.d(r,"set",(function(){return Eo})),n.d(r,"identity",(function(){return So})),n.d(r,"transpose",(function(){return To})),n.d(r,"invert",(function(){return Ao})),n.d(r,"adjoint",(function(){return Io})),n.d(r,"determinant",(function(){return ko})),n.d(r,"multiply",(function(){return Oo})),n.d(r,"translate",(function(){return Do})),n.d(r,"rotate",(function(){return Ro})),n.d(r,"scale",(function(){return Mo})),n.d(r,"fromTranslation",(function(){return Co})),n.d(r,"fromRotation",(function(){return No})),n.d(r,"fromScaling",(function(){return Po})),n.d(r,"fromMat2d",(function(){return Go})),n.d(r,"fromQuat",(function(){return jo})),n.d(r,"normalFromMat4",(function(){return Lo})),n.d(r,"projection",(function(){return Uo})),n.d(r,"str",(function(){return Bo})),n.d(r,"frob",(function(){return Fo})),n.d(r,"add",(function(){return zo})),n.d(r,"subtract",(function(){return Vo})),n.d(r,"multiplyScalar",(function(){return Wo})),n.d(r,"multiplyScalarAndAdd",(function(){return Xo})),n.d(r,"exactEquals",(function(){return Ho})),n.d(r,"equals",(function(){return qo})),n.d(r,"mul",(function(){return Yo})),n.d(r,"sub",(function(){return Ko}));var o={};n.r(o),n.d(o,"create",(function(){return Zo})),n.d(o,"clone",(function(){return Qo})),n.d(o,"copy",(function(){return Jo})),n.d(o,"fromValues",(function(){return $o})),n.d(o,"set",(function(){return ti})),n.d(o,"identity",(function(){return ei})),n.d(o,"transpose",(function(){return ni})),n.d(o,"invert",(function(){return ri})),n.d(o,"adjoint",(function(){return oi})),n.d(o,"determinant",(function(){return ii})),n.d(o,"multiply",(function(){return ai})),n.d(o,"translate",(function(){return ui})),n.d(o,"scale",(function(){return si})),n.d(o,"rotate",(function(){return ci})),n.d(o,"rotateX",(function(){return fi})),n.d(o,"rotateY",(function(){return li})),n.d(o,"rotateZ",(function(){return hi})),n.d(o,"fromTranslation",(function(){return di})),n.d(o,"fromScaling",(function(){return pi})),n.d(o,"fromRotation",(function(){return vi})),n.d(o,"fromXRotation",(function(){return mi})),n.d(o,"fromYRotation",(function(){return yi})),n.d(o,"fromZRotation",(function(){return gi})),n.d(o,"fromRotationTranslation",(function(){return bi})),n.d(o,"fromQuat2",(function(){return _i})),n.d(o,"getTranslation",(function(){return xi})),n.d(o,"getScaling",(function(){return wi})),n.d(o,"getRotation",(function(){return Ei})),n.d(o,"fromRotationTranslationScale",(function(){return Si})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ti})),n.d(o,"fromQuat",(function(){return Ai})),n.d(o,"frustum",(function(){return Ii})),n.d(o,"perspective",(function(){return ki})),n.d(o,"perspectiveFromFieldOfView",(function(){return Oi})),n.d(o,"ortho",(function(){return Di})),n.d(o,"lookAt",(function(){return Ri})),n.d(o,"targetTo",(function(){return Mi})),n.d(o,"str",(function(){return Ci})),n.d(o,"frob",(function(){return Ni})),n.d(o,"add",(function(){return Pi})),n.d(o,"subtract",(function(){return Gi})),n.d(o,"multiplyScalar",(function(){return ji})),n.d(o,"multiplyScalarAndAdd",(function(){return Li})),n.d(o,"exactEquals",(function(){return Ui})),n.d(o,"equals",(function(){return Bi})),n.d(o,"mul",(function(){return Fi})),n.d(o,"sub",(function(){return zi}));var i={};n.r(i),n.d(i,"create",(function(){return Vi})),n.d(i,"clone",(function(){return Wi})),n.d(i,"length",(function(){return Xi})),n.d(i,"fromValues",(function(){return Hi})),n.d(i,"copy",(function(){return qi})),n.d(i,"set",(function(){return Yi})),n.d(i,"add",(function(){return Ki})),n.d(i,"subtract",(function(){return Zi})),n.d(i,"multiply",(function(){return Qi})),n.d(i,"divide",(function(){return Ji})),n.d(i,"ceil",(function(){return $i})),n.d(i,"floor",(function(){return ta})),n.d(i,"min",(function(){return ea})),n.d(i,"max",(function(){return na})),n.d(i,"round",(function(){return ra})),n.d(i,"scale",(function(){return oa})),n.d(i,"scaleAndAdd",(function(){return ia})),n.d(i,"distance",(function(){return aa})),n.d(i,"squaredDistance",(function(){return ua})),n.d(i,"squaredLength",(function(){return sa})),n.d(i,"negate",(function(){return ca})),n.d(i,"inverse",(function(){return fa})),n.d(i,"normalize",(function(){return la})),n.d(i,"dot",(function(){return ha})),n.d(i,"cross",(function(){return da})),n.d(i,"lerp",(function(){return pa})),n.d(i,"hermite",(function(){return va})),n.d(i,"bezier",(function(){return ma})),n.d(i,"random",(function(){return ya})),n.d(i,"transformMat4",(function(){return ga})),n.d(i,"transformMat3",(function(){return ba})),n.d(i,"transformQuat",(function(){return _a})),n.d(i,"rotateX",(function(){return xa})),n.d(i,"rotateY",(function(){return wa})),n.d(i,"rotateZ",(function(){return Ea})),n.d(i,"angle",(function(){return Sa})),n.d(i,"zero",(function(){return Ta})),n.d(i,"str",(function(){return Aa})),n.d(i,"exactEquals",(function(){return Ia})),n.d(i,"equals",(function(){return ka})),n.d(i,"sub",(function(){return Da})),n.d(i,"mul",(function(){return Ra})),n.d(i,"div",(function(){return Ma})),n.d(i,"dist",(function(){return Ca})),n.d(i,"sqrDist",(function(){return Na})),n.d(i,"len",(function(){return Pa})),n.d(i,"sqrLen",(function(){return Ga})),n.d(i,"forEach",(function(){return ja}));var a={};n.r(a),n.d(a,"create",(function(){return La})),n.d(a,"clone",(function(){return Ua})),n.d(a,"fromValues",(function(){return Ba})),n.d(a,"copy",(function(){return Fa})),n.d(a,"set",(function(){return za})),n.d(a,"add",(function(){return Va})),n.d(a,"subtract",(function(){return Wa})),n.d(a,"multiply",(function(){return Xa})),n.d(a,"divide",(function(){return Ha})),n.d(a,"ceil",(function(){return qa})),n.d(a,"floor",(function(){return Ya})),n.d(a,"min",(function(){return Ka})),n.d(a,"max",(function(){return Za})),n.d(a,"round",(function(){return Qa})),n.d(a,"scale",(function(){return Ja})),n.d(a,"scaleAndAdd",(function(){return $a})),n.d(a,"distance",(function(){return tu})),n.d(a,"squaredDistance",(function(){return eu})),n.d(a,"length",(function(){return nu})),n.d(a,"squaredLength",(function(){return ru})),n.d(a,"negate",(function(){return ou})),n.d(a,"inverse",(function(){return iu})),n.d(a,"normalize",(function(){return au})),n.d(a,"dot",(function(){return uu})),n.d(a,"cross",(function(){return su})),n.d(a,"lerp",(function(){return cu})),n.d(a,"random",(function(){return fu})),n.d(a,"transformMat4",(function(){return lu})),n.d(a,"transformQuat",(function(){return hu})),n.d(a,"zero",(function(){return du})),n.d(a,"str",(function(){return pu})),n.d(a,"exactEquals",(function(){return vu})),n.d(a,"equals",(function(){return mu})),n.d(a,"sub",(function(){return yu})),n.d(a,"mul",(function(){return gu})),n.d(a,"div",(function(){return bu})),n.d(a,"dist",(function(){return _u})),n.d(a,"sqrDist",(function(){return xu})),n.d(a,"len",(function(){return wu})),n.d(a,"sqrLen",(function(){return Eu})),n.d(a,"forEach",(function(){return Su}));var u={};n.r(u),n.d(u,"create",(function(){return Tu})),n.d(u,"identity",(function(){return Au})),n.d(u,"setAxisAngle",(function(){return Iu})),n.d(u,"getAxisAngle",(function(){return ku})),n.d(u,"getAngle",(function(){return Ou})),n.d(u,"multiply",(function(){return Du})),n.d(u,"rotateX",(function(){return Ru})),n.d(u,"rotateY",(function(){return Mu})),n.d(u,"rotateZ",(function(){return Cu})),n.d(u,"calculateW",(function(){return Nu})),n.d(u,"exp",(function(){return Pu})),n.d(u,"ln",(function(){return Gu})),n.d(u,"pow",(function(){return ju})),n.d(u,"slerp",(function(){return Lu})),n.d(u,"random",(function(){return Uu})),n.d(u,"invert",(function(){return Bu})),n.d(u,"conjugate",(function(){return Fu})),n.d(u,"fromMat3",(function(){return zu})),n.d(u,"fromEuler",(function(){return Vu})),n.d(u,"str",(function(){return Wu})),n.d(u,"clone",(function(){return as})),n.d(u,"fromValues",(function(){return us})),n.d(u,"copy",(function(){return ss})),n.d(u,"set",(function(){return cs})),n.d(u,"add",(function(){return fs})),n.d(u,"mul",(function(){return ls})),n.d(u,"scale",(function(){return hs})),n.d(u,"dot",(function(){return ds})),n.d(u,"lerp",(function(){return ps})),n.d(u,"length",(function(){return vs})),n.d(u,"len",(function(){return ms})),n.d(u,"squaredLength",(function(){return ys})),n.d(u,"sqrLen",(function(){return gs})),n.d(u,"normalize",(function(){return bs})),n.d(u,"exactEquals",(function(){return _s})),n.d(u,"equals",(function(){return xs})),n.d(u,"rotationTo",(function(){return ws})),n.d(u,"sqlerp",(function(){return Es})),n.d(u,"setAxes",(function(){return Ss}));var s,c,f="LAYOUT_RUN",l="LAYOUT_END",h="LAYOUT_ERROR",d="GPU_LAYOUT_RUN",p=function(t){return"string"==typeof t},v=/-(\\w)/g,m=(s=function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))},c=Object.create(null),Array.isArray),y=function(t){return"number"==typeof t},g=function(t){return Number.isNaN(Number(t))},b=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n?(n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r):r},_=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)for(var u=0;u<n;u+=1)e[a][u]>e[a][i]+e[i][u]&&(e[a][u]=e[a][i]+e[i][u]);return e},x=function(t,e){var n=t.nodes,r=t.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){i[t.id]=e;o.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=i[n],u=i[r];o[a][u]=1,e||(o[u][a]=1)})),o},w=function(t,e){"function"==typeof e&&function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!!n(e)}(t,e)};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((function(t){n.push(t)})),n.map((function(e){return t(e)}))}if("object"===E(e)&&e!=={}){var r=Object.assign({},e);return Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r}return e},T=function(t){return"function"==typeof t};function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var e,n,r;return e=t,(n=[{key:"layout",value:function(t){return this.init(t),this.execute(!0)}},{key:"init",value:function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}},{key:"execute",value:function(t){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(t){t&&Object.assign(this,t)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&A(e.prototype,n),r&&A(e,r),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=e.length,r=t.begin;if(0!==n){if(1===n)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!p(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",g(e[0].degree))){var u=b(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=n,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var f=t.small(),l=t.large();(f-1)*l>=t.cells?t.small(f-1):(l-1)*f>=t.cells&&t.large(l-1)}else for(;t.cols*t.rows<t.cells;){var h=t.small(),d=t.large();(d+1)*h>=t.cells?t.large(d+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var n,r;e.x&&e.y||(e.x=0,e.y=0),m(e.size)?(n=e.size[0],r=e.size[1]):y(e.size)&&(n=e.size,r=e.size),void 0!==n&&void 0!==r||(m(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):y(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));var o=t.preventOverlapPadding,i=n+o,a=r+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var v=0;v<i.length;v++){var _=i[v],x=void 0;if(t.position&&(x=t.position(_)),x&&(void 0!==x.row||void 0!==x.col)){var w={row:x.row,col:x.col};if(void 0===w.col)for(w.col=0;t.used(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;t.used(w.row,w.col);)w.row++;t.id2manPos[_.id]=w,t.use(w.row,w.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:o,nodes:i}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"small",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"large",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"used",value:function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1}},{key:"use",value:function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0}},{key:"moveToNextCell",value:function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)}},{key:"getPos",value:function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n}},{key:"getType",value:function(){return"grid"}}])&&O(e.prototype,n),r&&O(e,r),i}(I);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(i,t);var e,n,r,o=L(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&G(e.prototype,n),r&&G(e,r),i}(I);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t,e){return t?y(t)?function(e){return t}:t:function(t){return e||1}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,t);var e,n,r,o=X(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var r={},o={};e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=o,t.linkDistance=Y(t.linkDistance,1),t.nodeStrength=Y(t.nodeStrength,1),t.edgeStrength=Y(t.edgeStrength,1);var i,a=t.nodeSize;if(t.preventOverlap){var u,s=t.nodeSpacing;u=y(s)?function(){return s}:T(s)?s:function(){return 0},i=a?m(a)?function(t){return(a[0]>a[1]?a[0]:a[1])+u(t)}:function(t){return a+u(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+u(t):t.size+u(t):10+u(t)}}t.nodeSize=i;var c=t.edges;t.degrees=b(e.length,t.nodeIdxMap,c),t.getMass||(t.getMass=function(e){return t.degrees[t.nodeIdxMap[e.id]]}),t.run()}else t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"!=typeof window){var o=0;this.timeInterval=window.setInterval((function(){var i=[],a=[];if(e){e.forEach((function(t,e){i[2*e]=0,i[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(i,e),n&&t.calAttractive(i,n),t.calGravity(i,e);var u=Math.max(.02,t.interval-.002*o);t.updateVelocity(i,a,u,e);var s=[];e.forEach((function(t){s.push({x:t.x,y:t.y})})),t.updatePosition(a,u,e),t.tick&&t.tick();var c=0;e.forEach((function(t,e){var n=t.x-s[e].x,r=t.y-s[e].y;c+=Math.sqrt(n*n+r*r)})),(c/=e.length)<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),++o>r&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd())}}),0)}}},{key:"calRepulsive",value:function(t,e){var n=this.getMass,r=this.nodeStrength,o=this.factor,i=this.coulombDisScale,a=this.preventOverlap,u=this.nodeSize;e.forEach((function(s,c){var f=n?n(s):1;e.forEach((function(e,l){if(!(c>=l)){var h=s.x-e.x,d=s.y-e.y,p=Math.sqrt(h*h+d*d)+.01,v=(p+.1)*i,m=h/p,y=d/p,g=(r(s)+r(e))/2*o/(v*v),b=n?n(e):1;if(t[2*c]+=m*g/f,t[2*c+1]+=y*g/f,t[2*l]-=m*g/b,t[2*l+1]-=y*g/b,a&&p<(u(s)+u(e))/2){var _=(r(s)+r(e))/2/(p*p);t[2*c]+=m*_/f,t[2*c+1]+=y*_/f,t[2*l]-=m*_/b,t[2*l+1]-=y*_/b}}}))}))}},{key:"calAttractive",value:function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,a=this.getMass;e.forEach((function(e,u){var s=n[e.source],c=n[e.target],f=c.x-s.x,l=c.y-s.y,h=Math.sqrt(f*f+l*l)+.01,d=f/h,p=l/h,v=((o(e)||1)-h)*i(e),m=r[e.source],y=r[e.target],g=a?a(s):1,b=a?a(c):1;t[2*m]-=d*v/g,t[2*m+1]-=p*v/g,t[2*y]+=d*v/b,t[2*y+1]+=p*v/b}))}},{key:"calGravity",value:function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var u=e[a],s=u.x-n[0],c=u.y-n[1],f=r;if(this.getCenter){var l=this.getCenter(u,o[a]);l&&y(l[0])&&y(l[1])&&y(l[2])&&(s=u.x-l[0],c=u.y-l[1],f=l[2])}f&&(t[2*a]-=f*s,t[2*a+1]-=f*c)}}},{key:"updateVelocity",value:function(t,e,n,r){var o=this,i=n*o.damping;r.forEach((function(n,r){var a=t[2*r]*i||.01,u=t[2*r+1]*i||.01,s=Math.sqrt(a*a+u*u);if(s>o.maxSpeed){var c=o.maxSpeed/s;a*=c,u*=c}e[2*r]=a,e[2*r+1]=u}))}},{key:"updatePosition",value:function(t,e,n){n.forEach((function(n,r){var o=t[2*r]*e,i=t[2*r+1]*e;n.x+=o,n.y+=i}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&V(e.prototype,n),r&&V(e,r),i}(I);function Z(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,c,f,l,h,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a,o=d,!(d=d[l=f<<1|c]))return o[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[l]=p:t._root=p,t;do{o=o?o[l]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a}while((l=f<<1|c)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[l]=p,t}var Q=function(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o};function J(t){return t[0]}function $(t){return t[1]}function tt(t,e,n){var r=new et(null==e?J:e,null==n?$:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function et(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rt=tt.prototype=et.prototype;rt.copy=function(){var t,e,n=new et(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=nt(e));return n},rt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Z(this.cover(e,n),e,n,t)},rt.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>f&&(f=r),o<c&&(c=o),o>l&&(l=o));if(s>f||c>l)return this;for(this.cover(s,c).cover(f,l),n=0;n<i;++n)Z(this,a[n],u[n],t[n]);return this},rt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n||1,c=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},rt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rt.find=function(t,e,n){var r,o,i,a,u,s,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Q(v,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<l))if(v.length){var m=(o+a)/2,y=(i+u)/2;p.push(new Q(v[3],m,y,a,u),new Q(v[2],o,y,m,u),new Q(v[1],m,i,a,y),new Q(v[0],o,i,m,y)),(c=(e>=y)<<1|t>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=g*g+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=v.data}}return r},rt.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,c,f,l,h,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},rt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rt.root=function(){return this._root},rt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rt.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new Q(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(r+i)/2,f=(o+a)/2;(n=s[3])&&u.push(new Q(n,c,f,i,a)),(n=s[2])&&u.push(new Q(n,r,f,c,a)),(n=s[1])&&u.push(new Q(n,c,o,i,f)),(n=s[0])&&u.push(new Q(n,r,o,c,f))}return this},rt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,l=(u+c)/2;(i=o[0])&&n.push(new Q(i,a,u,f,l)),(i=o[1])&&n.push(new Q(i,f,u,s,l)),(i=o[2])&&n.push(new Q(i,a,l,f,c)),(i=o[3])&&n.push(new Q(i,f,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rt.x=function(t){return arguments.length?(this._x=t,this):this._x},rt.y=function(t){return arguments.length?(this._y=t,this):this._y};var ot=function(t){return function(){return t}},it=function(t){return 1e-6*(t()-.5)},at={value:function(){}};function ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ct(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ut.prototype={constructor:st,on:function(t,e){var n,r=this._,o=ct(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var ht=ut;function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pt,vt,mt=0,yt=0,gt=0,bt=0,_t=0,xt=0,wt="object"===("undefined"==typeof performance?"undefined":dt(performance))&&performance.now?performance:Date,Et="object"===("undefined"==typeof window?"undefined":dt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return _t||(Et(Tt),_t=wt.now()+xt)}function Tt(){_t=0}function At(){this._call=this._time=this._next=null}function It(t,e,n){var r=new At;return r.restart(t,e,n),r}function kt(){_t=(bt=wt.now())+xt,mt=yt=0;try{!function(){St(),++mt;for(var t,e=pt;e;)(t=_t-e._time)>=0&&e._call.call(null,t),e=e._next;--mt}()}finally{mt=0,function(){var t,e,n=pt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pt=e);vt=t,Dt(r)}(),_t=0}}function Ot(){var t=wt.now(),e=t-bt;e>1e3&&(xt-=e,bt=t)}function Dt(t){mt||(yt&&(yt=clearTimeout(yt)),t-_t>24?(t<1/0&&(yt=setTimeout(kt,t-wt.now()-xt)),gt&&(gt=clearInterval(gt))):(gt||(bt=wt.now(),gt=setInterval(Ot,1e3)),mt=1,Et(kt)))}At.prototype=It.prototype={constructor:At,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||vt===this||(vt?vt._next=this:pt=this,vt=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};function Rt(t){return t.x}function Mt(t){return t.y}var Ct=Math.PI*(3-Math.sqrt(5)),Nt=function(t){var e,n,r=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=It(h),f=ht("tick","end"),l=(n=1,function(){return(n=(1664525*n+1013904223)%4294967296)/4294967296});function h(){d(),f.call("tick",e),r<o&&(c.stop(),f.call("end",e))}function d(n){var o,c,f=t.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(r+=(a-r)*i,s.forEach((function(t){t(r)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+n),i=n*Ct;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(l=t,s.forEach(v),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,v(n)),e):s.get(t)},find:function(e,n,r){var o,i,a,u,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=n-u.y)*i)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(f.on(t,n),e):f.on(t)}}},Pt=function(){var t,e,n,r,o,i=ot(-30),a=1,u=1/0,s=.81;function c(n){var o,i=t.length,a=tt(t,Rt,Mt).visitAfter(l);for(r=n,o=0;o<i;++o)e=t[o],a.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function l(t){var e,n,r,i,a,u=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function h(t,i,c,f){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=f-i,p=l*l+h*h;if(d*d/s<p)return p<u&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=l*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*r/p,e.vx+=l*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:ot(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function Lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var Ut=function(t){var e,n,r,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=ot(30),f=1;function l(r){for(var o=0,u=t.length;o<f;++o)for(var s,c,l,h,d,p,v,m=0;m<u;++m)c=(s=t[m]).source,h=(l=s.target).x+l.vx-c.x-c.vx||it(a),d=l.y+l.vy-c.y-c.vy||it(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*r*e[m],d*=p,l.vx-=h*(v=i[m]),l.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var a,s,c=r.length,f=t.length,l=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Gt(s.source)&&(s.source=Lt(l,s.source)),"object"!==Gt(s.target)&&(s.target=Lt(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,e){r=t,a=e,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:ot(+t),d(),l):s},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:ot(+t),p(),l):c},l};function Bt(t){return t.x+t.vx}function Ft(t){return t.y+t.vy}var zt=function(t){var e,n,r,o=1,i=1;function a(){for(var t,a,s,c,f,l,h,d=e.length,p=0;p<i;++p)for(a=tt(e,Bt,Ft).visitAfter(u),t=0;t<d;++t)s=e[t],l=n[s.index],h=l*l,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,n,i,a){var u=t.data,d=t.r,p=l+d;if(!u)return e>c+p||i<c-p||n>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,m=f-u.y-u.vy,y=v*v+m*m;y<p*p&&(0===v&&(y+=(v=it(r))*v),0===m&&(y+=(m=it(r))*m),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(h+d)),s.vy+=(m*=y)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=ot(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),s(),a):t},a};function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],l=100,h=100,d={none:{x:0,y:0}},p=[],v="force",m=!0,y=.1;function g(t){if(!m)return g;e.tick(),_();for(var r,o=0,i=s.length,a=t*y;o<i;++o)(r=s[o]).vx+=(d[n(r)].x-r.x)*a,r.vy+=(d[n(r)].y-r.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===n(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],v=[],m={},y=[],u=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=n(t),i=r(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=n(c[t.source]),r=n(c[t.target]);return e<=r?"".concat(e,"~").concat(r):"".concat(r,"~").concat(e)}(t),o=0;void 0!==e[r]&&(o=e[r]),o+=1,e[r]=o})),Object.entries(e).forEach((function(t){var e=Vt(t,2),n=e[0],o=e[1],i=n.split("~")[0],a=n.split("~")[1];void 0!==i&&void 0!==a&&r.push({source:i,target:a,count:o})})),r}(f),Object.keys(u).forEach((function(t,e){var n=u[t];d.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),m[t]=e})),y.forEach((function(t){var e=m[t.source],n=m[t.target];void 0!==e&&void 0!==n&&v.push({source:e,target:n,count:t.count})})),{nodes:d,links:v});var u,d,v,m,y;e=Nt(t.nodes).force("x",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(l).strength(.1)).force("y",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(h).strength(.1)).force("collide",zt((function(t){return t.r})).iterations(4)).force("charge",Pt().strength(o)).force("links",Ut(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),_()}()}function _(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return g.initialize=function(t){s=t,b()},g.template=function(t){return arguments.length?(v=t,b(),g):v},g.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},g):(n=t,g):n},g.enableGrouping=function(t){return arguments.length?(m=t,g):m},g.strength=function(t){return arguments.length?(y=t,g):y},g.centerX=function(t){return arguments.length?(l=t,g):l},g.centerY=function(t){return arguments.length?(h=t,g):h},g.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],g):s},g.links=function(t){return arguments.length?(f=t||[],b(),g):f},g.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),g):r},g.nodeSize=g.forceNodeSize,g.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),g):o},g.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),g):i},g.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),g):a},g.offset=function(t){return arguments.length?(u=t,g):u},g.getFocis=_,g}var Ht="LAYOUT_RUN",qt="LAYOUT_END",Yt="LAYOUT_ERROR",Kt="LAYOUT_TICK",Zt="GPU_LAYOUT_RUN",Qt="GPU_LAYOUT_END";function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),this.ticking=!1}},{key:"execute",value:function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),o.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){var s=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&s.strength(e.edgeStrength),e.linkDistance&&s.distance(e.linkDistance),e.edgeForce=s,o.force("link",s)}e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Pt();if(e.nodeStrength&&c.strength(e.nodeStrength),o=Nt().nodes(n),e.clustering){var f=Xt();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",function(t,e){var n,r=1;function o(){var o,i,a=n.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=n[o]).x,s+=i.y;for(u=(u/a-t)*r,s=(s/a-e)*r,o=0;o<a;++o)(i=n[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}(e.center[0],e.center[1])).force("charge",c).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),r){var l=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&l.strength(e.edgeStrength),e.linkDistance&&l.distance(e.linkDistance),e.edgeForce=l,o.force("link",l)}if(e.workerEnabled&&!ie()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),o=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:Kt},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}}},{key:"overlapProcess",value:function(t){var e,n,r=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(n=y(o)?function(){return o}:T(o)?o:function(){return 0},r)if(T(r))e=function(t){return r(t)+n(t)};else if(m(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(t){return a+n(t)}}else if(y(r)){var u=r/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",zt(e).strength(i))}},{key:"updateCfg",value:function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$t(e.prototype,n),r&&$t(e,r),i}(I);function ie(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].parent;i.push(t[o].id),a.push(t[r].id)})):e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].children;i.push(t[o].id),a.push(t[r].id)}))}function de(t,e,n){for(var r=n.length,o=0;o<r;o++)if(t.id===n[o].source&&e.id===n[o].target||e.id===n[o].source&&t.id===n[o].target)return!0;return!1}function pe(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/n,l={};t.forEach((function(t,e){l[t.id]=e})),this.nodeMap=l;var h=b(t.length,l,e);this.degrees=h,o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio,p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var m=this.clockwise,y=Math.ceil(n/u),g=0;g<n;++g){var _=o;_||null===i||null===a||(_=i+g*(a-i)/(n-1)),_||(_=10+100*g/(n-1));var x=s+g%y*d+2*Math.PI/u*Math.floor(g/y);m||(x=c-g%y*d-2*Math.PI/u*Math.floor(g/y)),v[g].x=r[0]+Math.cos(x)*_,v[g].y=r[1]+Math.sin(x)*_,v[g].weight=h[g]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:v,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=e.degrees,r=e.edges,o=e.nodes,i=S(o),a=e.nodeMap,u=[i[0]],s=[o[0]],c=[],f=o.length;c[0]=!0,he(i,r,a,t);var l=0;return i.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e]===n[e+1]&&!de(u[l],t,r)||c[e]){for(var h=u[l].children,d=!1,p=0;p<h.length;p++){var v=a[h[p]];if(n[v]===n[e]&&!c[v]){u.push(i[v]),s.push(o[a[i[v].id]]),c[v]=!0,d=!0;break}}for(var m=0;!d&&(c[m]||(u.push(i[m]),s.push(o[a[i[m].id]]),c[m]=!0,d=!0),++m!==f););}else u.push(t),s.push(o[a[t.id]]),c[e]=!0,l++})),s}},{key:"degreeOrdering",value:function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r],e.push(t)})),e.sort(pe),e}},{key:"getType",value:function(){return"circular"}}])&&ue(e.prototype,n),r&&ue(e,r),i}(I),me=n(102),ye=n.n(me);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.nodeSize,r=t.rankdir;if(e){var o,i=t.edges||[],a=new ye.a.graphlib.Graph;o=n?m(n)?function(){return n}:function(){return[n,n]}:function(t){return t.size?m(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=Te(t.nodesepFunc,t.nodesep,50),c=Te(t.ranksepFunc,t.ranksep,50);return"LR"!==r&&"RL"!==r||(s=Te(t.ranksepFunc,t.ranksep,50),c=Te(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),n=c(t),r=s(t),i=e[0]+2*r,u=e[1]+2*n;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),ye.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var n=e.findIndex((function(e){return e.id===t}));e[n].x=u.x,e[n].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var n=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[n].type&&(i[n].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId"),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:i}}}},{key:"sortLevel",value:function(t){var e=this,n=e.nodes,r={};n.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(n){var o=r[n].nodes,i=o.length,a={};if(o.forEach((function(t){var e=t.comboId;a[e]||(a[e]={x:0,y:0,count:0}),a[e].x+=t.x,a[e].y+=t.y,a[e].count++})),Object.keys(a).forEach((function(t){a[t].x/=a[t].count,a[t].y/=a[t].count})),1!==i){var u=o.sort((function(t,e){return t.x-e.x})),s=u[0].x,c=(u[i-1].x-s)/(i-1);o.sort((function(e,n){var r=e[t]||"undefined",o=n[t]||"undefined";return r<o?-1:r>o?1:0})).forEach((function(t,e){t.x=s+e*c}))}else e.onLayoutEnd&&e.onLayoutEnd()}))}},{key:"getType",value:function(){return"dagre"}}])&&be(e.prototype,n),r&&be(e,r),i}(I);function Te(t,e,n){return t||(y(e)?function(){return e}:function(){return n})}var Ae=Object.prototype.toString;function Ie(t){return Ae.call(t).endsWith("Array]")}var ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var De=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ie(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=Oe(t),o=ke(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,u=n.max,s=void 0===u?n.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*c+a;return e},Re=" ".repeat(2),Me=" ".repeat(4);function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(Re,"[\\n").concat(Me).concat(Ne(t,r,i,u),"\\n").concat(Re,"]\\n").concat(Re,"rows: ").concat(t.rows,"\\n").concat(Re,"columns: ").concat(t.columns,"\\n}")}function Ne(t,e,n,r){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,n),s=[],c=0;c<a;c++){for(var f=[],l=0;l<u;l++)f.push(Pe(t.get(c,l),r));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(Me))}function Pe(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");var r=t.toPrecision(e-2);if(r.length<=e)return r;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Le(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Ue(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Fe(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ze(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ve(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xe("startRow",e),Xe("endRow",n),Xe("startColumn",r),Xe("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function Xe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function He(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function qe(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<r;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-n[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function Ye(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<r;f++)u+=c=t.get(f,a)-n[a],s+=c*c;e?i.push((s-u*u/r)/(r-1)):i.push((s-u*u/r)/r)}return i}function Ke(t,e,n){for(var r=t.rows,o=t.columns,i=r*o,a=0,u=0,s=0,c=0;c<r;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-n,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function Ze(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function Qe(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Je(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function $e(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,o=0;o<t.columns;o++)r+=Math.pow(t.get(n,o),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function tn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function en(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function nn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rn(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/e;return Math.sqrt(n)}function on(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&hn(t.prototype,e),n&&hn(t,n),t}var pn=function(){function t(){ln(this,t)}return dn(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(r,n)&&(r=o);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var o=0,i=!1;o<n&&!1===i;)1===t.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(r,s);t.set(a,s,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,o=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new gn(this.rows*n,this.columns*o),a=0;a<n;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){je(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return gn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){je(this,t),e=Ue(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){je(this,t),je(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){Le(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return gn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Le(this,t),e=Be(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Le(this,t),Le(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){je(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Le(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r}},{key:"mmul",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,o=new gn(e,r),i=new Float64Array(n),a=0;a<r;a++){for(var u=0;u<n;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<n;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=gn.checkMatrix(t);var e=new gn(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(n+s)*(r+c),l=(a+s)*r,h=n*(i-c),d=s*(u-r),p=(n+o)*c,v=f+d-p+(o-s)*(u+c),m=h+p,y=l+d,g=f-l+h+(a-n)*(r+i);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,y),e.set(1,1,g),e}},{key:"strassen3x3",value:function(t){t=gn.checkMatrix(t);var e=new gn(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),l=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),m=t.get(1,2),y=t.get(2,0),g=t.get(2,1),b=t.get(2,2),_=(n-i)*(-h+v),x=(-n+i+a)*(l-h+v),w=(i+a)*(-l+h),E=n*l,S=(-n+s+c)*(l-d+m),T=(-n+s)*(d-m),A=(s+c)*(-l+d),I=(-o+c+f)*(v+y-g),k=(o-f)*(v-g),O=o*y,D=(c+f)*(-y+g),R=(-o+a+u)*(m+y-b),M=(o-u)*(m-b),C=(a+u)*(-y+b),N=E+O+r*p,P=(n+r+o-i-a-c-f)*v+x+w+E+I+O+D,G=E+S+A+(n+r+o-a-u-s-c)*m+O+R+C,j=_+a*(-l+h+p-v-m-y+b)+x+E+O+R+M,L=_+x+w+E+u*g,U=O+R+M+C+i*d,B=E+S+T+c*(-l+d+p-v-m-y+g)+I+k+O,F=I+k+O+D+s*h,z=E+S+T+A+f*b;return e.set(0,0,N),e.set(0,1,P),e.set(0,2,G),e.set(1,0,j),e.set(1,1,L),e.set(1,2,U),e.set(2,0,B),e.set(2,1,F),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=gn.checkMatrix(e);var n=this.clone(),r=n.rows,o=n.columns,i=e.rows,a=e.columns;function u(e,n,r){var o=e.rows,i=e.columns;if(o===n&&i===r)return e;var a=t.zeros(n,r);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(r," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(r,i),c=Math.max(o,a);return function e(n,r,o,i){if(o<=512||i<=512)return n.mmul(r);o%2==1&&i%2==1?(n=u(n,o+1,i+1),r=u(r,o+1,i+1)):o%2==1?(n=u(n,o+1,i),r=u(r,o+1,i)):i%2==1&&(n=u(n,o,i+1),r=u(r,o,i+1));var a=parseInt(n.rows/2,10),s=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,s-1),f=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),d=n.subMatrix(a,n.rows-1,0,s-1),p=r.subMatrix(a,r.rows-1,0,s-1),v=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),y=e(t.add(c,v),t.add(f,m),a,s),g=e(t.add(d,v),f,a,s),b=e(c,t.sub(h,m),a,s),_=e(v,t.sub(p,f),a,s),x=e(t.add(c,l),m,a,s),w=e(t.sub(d,c),t.add(f,h),a,s),E=e(t.sub(l,v),t.add(p,m),a,s),S=t.add(y,_);S.sub(x),S.add(E);var T=t.add(b,x),A=t.add(g,_),I=t.sub(y,g);I.add(b),I.add(w);var k=t.zeros(2*S.rows,2*S.columns);return(k=(k=(k=(k=k.setSubMatrix(S,0,0)).setSubMatrix(T,S.rows,0)).setSubMatrix(A,0,S.columns)).setSubMatrix(I,S.rows,S.columns)).subMatrix(0,o-1,0,i-1)}(n=u(n,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);u.length>0&&De(u,{min:n,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);u.length&&De(u,{min:n,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,o=t.columns,i=new gn(e*r,n*o),a=0;a<e;a++)for(var u=0;u<n;u++)for(var s=0;s<r;s++)for(var c=0;c<o;c++)i.set(r*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new gn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){Ve(this,t,e,n,r);for(var o=new gn(e-t+1,r-n+1),i=t;i<=e;i++)for(var a=n;a<=r;a++)o.set(i-t,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new gn(t.length,n-e+1),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));r.set(o,i-e,this.get(t[o],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new gn(n-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));r.set(i-e,o,this.get(i,t[o]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=gn.checkMatrix(t)).isEmpty())return this;Ve(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++)this.set(e+r,n+o,t.get(r,o));return this}},{key:"selection",value:function(t,e){for(var n=function(t,e,n){return{row:Fe(t,e),column:ze(t,n)}}(this,t,e),r=new gn(t.length,e.length),o=0;o<n.row.length;o++)for(var i=n.row[o],a=0;a<n.column.length;a++){var u=n.column[a];r.set(o,a,this.get(i,u))}return r}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new gn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.unbiased,o=void 0===r||r,i=n.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return qe(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Ye(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return Ke(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===fn(t)&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.center,o=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return Ze(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return Qe(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return Je(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=$e(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return tn(this,n),this;case"column":if(void 0===n)n=en(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return nn(this,n),this;case void 0:if(void 0===n)n=rn(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return on(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Ce(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new gn(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)r.set(o,i,n[o*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new gn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new gn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new gn(t,e)}},{key:"ones",value:function(t,e){return new gn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");for(var r=n.random,o=void 0===r?Math.random:r,i=new gn(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,i=n.max,a=void 0===i?1e3:i,u=n.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new gn(t,e),l=0;l<t;l++)for(var h=0;h<e;h++){var d=o+Math.round(s()*c);f.set(l,h,d)}return f}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),o=this.zeros(t,e),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var o=Math.min(r,e,n),i=this.zeros(e,n),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new gn(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new gn(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function vn(t,e){return t-e}pn.prototype.klass="Matrix","undefined"!=typeof Symbol&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ce(this)}),pn.random=pn.rand,pn.randomInt=pn.randInt,pn.diagonal=pn.diag,pn.prototype.diagonal=pn.prototype.diag,pn.identity=pn.eye,pn.prototype.negate=pn.prototype.neg,pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;var mn,yn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r){var o;if(ln(this,n),o=e.call(this),n.isMatrix(t))return sn(o,t.clone());if(Number.isInteger(t)&&t>=0){if(o.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!=typeof(r=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==r)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=r,o}return dn(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return je(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),je(this,t,!0),e=Float64Array.from(Ue(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){Le(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var o=t+1;o<this.columns;o++)n[o-1]=this.data[e][o];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),Le(this,t,!0),e=Be(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<t;o++)r[o]=this.data[n][o];for(r[o++]=e[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]),n}(pn);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yn=gn,(mn=pn).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},mn.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},mn.prototype.addM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},mn.add=function(t,e){return new yn(t).add(e)},mn.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},mn.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},mn.prototype.subM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},mn.sub=function(t,e){return new yn(t).sub(e)},mn.prototype.subtract=mn.prototype.sub,mn.prototype.subtractS=mn.prototype.subS,mn.prototype.subtractM=mn.prototype.subM,mn.subtract=mn.sub,mn.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},mn.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},mn.prototype.mulM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},mn.mul=function(t,e){return new yn(t).mul(e)},mn.prototype.multiply=mn.prototype.mul,mn.prototype.multiplyS=mn.prototype.mulS,mn.prototype.multiplyM=mn.prototype.mulM,mn.multiply=mn.mul,mn.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},mn.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},mn.prototype.divM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},mn.div=function(t,e){return new yn(t).div(e)},mn.prototype.divide=mn.prototype.div,mn.prototype.divideS=mn.prototype.divS,mn.prototype.divideM=mn.prototype.divM,mn.divide=mn.div,mn.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},mn.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},mn.prototype.modM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},mn.mod=function(t,e){return new yn(t).mod(e)},mn.prototype.modulus=mn.prototype.mod,mn.prototype.modulusS=mn.prototype.modS,mn.prototype.modulusM=mn.prototype.modM,mn.modulus=mn.mod,mn.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},mn.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},mn.prototype.andM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},mn.and=function(t,e){return new yn(t).and(e)},mn.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},mn.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},mn.prototype.orM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},mn.or=function(t,e){return new yn(t).or(e)},mn.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},mn.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},mn.prototype.xorM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},mn.xor=function(t,e){return new yn(t).xor(e)},mn.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},mn.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},mn.prototype.leftShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},mn.leftShift=function(t,e){return new yn(t).leftShift(e)},mn.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},mn.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},mn.prototype.signPropagatingRightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},mn.signPropagatingRightShift=function(t,e){return new yn(t).signPropagatingRightShift(e)},mn.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},mn.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},mn.prototype.rightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},mn.rightShift=function(t,e){return new yn(t).rightShift(e)},mn.prototype.zeroFillRightShift=mn.prototype.rightShift,mn.prototype.zeroFillRightShiftS=mn.prototype.rightShiftS,mn.prototype.zeroFillRightShiftM=mn.prototype.rightShiftM,mn.zeroFillRightShift=mn.rightShift,mn.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},mn.not=function(t){return new yn(t).not()},mn.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},mn.abs=function(t){return new yn(t).abs()},mn.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},mn.acos=function(t){return new yn(t).acos()},mn.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},mn.acosh=function(t){return new yn(t).acosh()},mn.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},mn.asin=function(t){return new yn(t).asin()},mn.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},mn.asinh=function(t){return new yn(t).asinh()},mn.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},mn.atan=function(t){return new yn(t).atan()},mn.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},mn.atanh=function(t){return new yn(t).atanh()},mn.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},mn.cbrt=function(t){return new yn(t).cbrt()},mn.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},mn.ceil=function(t){return new yn(t).ceil()},mn.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},mn.clz32=function(t){return new yn(t).clz32()},mn.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},mn.cos=function(t){return new yn(t).cos()},mn.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},mn.cosh=function(t){return new yn(t).cosh()},mn.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},mn.exp=function(t){return new yn(t).exp()},mn.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},mn.expm1=function(t){return new yn(t).expm1()},mn.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},mn.floor=function(t){return new yn(t).floor()},mn.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},mn.fround=function(t){return new yn(t).fround()},mn.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},mn.log=function(t){return new yn(t).log()},mn.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},mn.log1p=function(t){return new yn(t).log1p()},mn.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},mn.log10=function(t){return new yn(t).log10()},mn.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},mn.log2=function(t){return new yn(t).log2()},mn.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},mn.round=function(t){return new yn(t).round()},mn.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},mn.sign=function(t){return new yn(t).sign()},mn.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},mn.sin=function(t){return new yn(t).sin()},mn.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},mn.sinh=function(t){return new yn(t).sinh()},mn.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},mn.sqrt=function(t){return new yn(t).sqrt()},mn.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},mn.tan=function(t){return new yn(t).tan()},mn.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},mn.tanh=function(t){return new yn(t).tanh()},mn.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},mn.trunc=function(t){return new yn(t).trunc()},mn.pow=function(t,e){return new yn(t).pow(e)},mn.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},mn.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},mn.prototype.powM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};var Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(n=[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&_n(e.prototype,n),r&&_n(e,r),i}(pn);function An(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var On=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(In(this,t),(e=Tn.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,o=e.rows,i=e.columns,a=n.computeLeftSingularVectors,u=void 0===a||a,s=n.computeRightSingularVectors,c=void 0===s||s,f=n.autoTranspose,l=void 0!==f&&f,h=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(l){o=(r=e.transpose()).rows,i=r.columns,p=!0;var v=h;h=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var m=Math.min(o,i),y=Math.min(o+1,i),g=new Float64Array(y),b=new gn(o,m),_=new gn(i,i),x=new Float64Array(i),w=new Float64Array(o),E=new Float64Array(y),S=0;S<y;S++)E[S]=S;for(var T=Math.min(o-1,i),A=Math.max(0,Math.min(i-2,o)),I=Math.max(T,A),k=0;k<I;k++){if(k<T){g[k]=0;for(var O=k;O<o;O++)g[k]=An(g[k],r.get(O,k));if(0!==g[k]){r.get(k,k)<0&&(g[k]=-g[k]);for(var D=k;D<o;D++)r.set(D,k,r.get(D,k)/g[k]);r.set(k,k,r.get(k,k)+1)}g[k]=-g[k]}for(var R=k+1;R<i;R++){if(k<T&&0!==g[k]){for(var M=0,C=k;C<o;C++)M+=r.get(C,k)*r.get(C,R);M=-M/r.get(k,k);for(var N=k;N<o;N++)r.set(N,R,r.get(N,R)+M*r.get(N,k))}x[R]=r.get(k,R)}if(h&&k<T)for(var P=k;P<o;P++)b.set(P,k,r.get(P,k));if(k<A){x[k]=0;for(var G=k+1;G<i;G++)x[k]=An(x[k],x[G]);if(0!==x[k]){x[k+1]<0&&(x[k]=0-x[k]);for(var j=k+1;j<i;j++)x[j]/=x[k];x[k+1]+=1}if(x[k]=-x[k],k+1<o&&0!==x[k]){for(var L=k+1;L<o;L++)w[L]=0;for(var U=k+1;U<o;U++)for(var B=k+1;B<i;B++)w[U]+=x[B]*r.get(U,B);for(var F=k+1;F<i;F++)for(var z=-x[F]/x[k+1],V=k+1;V<o;V++)r.set(V,F,r.get(V,F)+z*w[V])}if(d)for(var W=k+1;W<i;W++)_.set(W,k,x[W])}}var X=Math.min(i,o+1);if(T<i&&(g[T]=r.get(T,T)),o<X&&(g[X-1]=0),A+1<X&&(x[A]=r.get(A,X-1)),x[X-1]=0,h){for(var H=T;H<m;H++){for(var q=0;q<o;q++)b.set(q,H,0);b.set(H,H,1)}for(var Y=T-1;Y>=0;Y--)if(0!==g[Y]){for(var K=Y+1;K<m;K++){for(var Z=0,Q=Y;Q<o;Q++)Z+=b.get(Q,Y)*b.get(Q,K);Z=-Z/b.get(Y,Y);for(var J=Y;J<o;J++)b.set(J,K,b.get(J,K)+Z*b.get(J,Y))}for(var $=Y;$<o;$++)b.set($,Y,-b.get($,Y));b.set(Y,Y,1+b.get(Y,Y));for(var tt=0;tt<Y-1;tt++)b.set(tt,Y,0)}else{for(var et=0;et<o;et++)b.set(et,Y,0);b.set(Y,Y,1)}}if(d)for(var nt=i-1;nt>=0;nt--){if(nt<A&&0!==x[nt])for(var rt=nt+1;rt<i;rt++){for(var ot=0,it=nt+1;it<i;it++)ot+=_.get(it,nt)*_.get(it,rt);ot=-ot/_.get(nt+1,nt);for(var at=nt+1;at<i;at++)_.set(at,rt,_.get(at,rt)+ot*_.get(at,nt))}for(var ut=0;ut<i;ut++)_.set(ut,nt,0);_.set(nt,nt,1)}for(var st=X-1,ct=Number.EPSILON;X>0;){var ft=void 0,lt=void 0;for(ft=X-2;ft>=-1&&-1!==ft;ft--){var ht=Number.MIN_VALUE+ct*Math.abs(g[ft]+Math.abs(g[ft+1]));if(Math.abs(x[ft])<=ht||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===X-2)lt=4;else{var dt=void 0;for(dt=X-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==X?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(g[dt])<=ct*pt){g[dt]=0;break}}dt===ft?lt=3:dt===X-1?lt=1:(lt=2,ft=dt)}switch(ft++,lt){case 1:var vt=x[X-2];x[X-2]=0;for(var mt=X-2;mt>=ft;mt--){var yt=An(g[mt],vt),gt=g[mt]/yt,bt=vt/yt;if(g[mt]=yt,mt!==ft&&(vt=-bt*x[mt-1],x[mt-1]=gt*x[mt-1]),d)for(var _t=0;_t<i;_t++)yt=gt*_.get(_t,mt)+bt*_.get(_t,X-1),_.set(_t,X-1,-bt*_.get(_t,mt)+gt*_.get(_t,X-1)),_.set(_t,mt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var wt=ft;wt<X;wt++){var Et=An(g[wt],xt),St=g[wt]/Et,Tt=xt/Et;if(g[wt]=Et,xt=-Tt*x[wt],x[wt]=St*x[wt],h)for(var At=0;At<o;At++)Et=St*b.get(At,wt)+Tt*b.get(At,ft-1),b.set(At,ft-1,-Tt*b.get(At,wt)+St*b.get(At,ft-1)),b.set(At,wt,Et)}break;case 3:var It=Math.max(Math.abs(g[X-1]),Math.abs(g[X-2]),Math.abs(x[X-2]),Math.abs(g[ft]),Math.abs(x[ft])),kt=g[X-1]/It,Ot=g[X-2]/It,Dt=x[X-2]/It,Rt=g[ft]/It,Mt=x[ft]/It,Ct=((Ot+kt)*(Ot-kt)+Dt*Dt)/2,Nt=kt*Dt*(kt*Dt),Pt=0;0===Ct&&0===Nt||(Pt=Nt/(Ct+(Pt=Ct<0?0-Math.sqrt(Ct*Ct+Nt):Math.sqrt(Ct*Ct+Nt))));for(var Gt=(Rt+kt)*(Rt-kt)+Pt,jt=Rt*Mt,Lt=ft;Lt<X-1;Lt++){var Ut=An(Gt,jt);0===Ut&&(Ut=Number.MIN_VALUE);var Bt=Gt/Ut,Ft=jt/Ut;if(Lt!==ft&&(x[Lt-1]=Ut),Gt=Bt*g[Lt]+Ft*x[Lt],x[Lt]=Bt*x[Lt]-Ft*g[Lt],jt=Ft*g[Lt+1],g[Lt+1]=Bt*g[Lt+1],d)for(var zt=0;zt<i;zt++)Ut=Bt*_.get(zt,Lt)+Ft*_.get(zt,Lt+1),_.set(zt,Lt+1,-Ft*_.get(zt,Lt)+Bt*_.get(zt,Lt+1)),_.set(zt,Lt,Ut);if(0===(Ut=An(Gt,jt))&&(Ut=Number.MIN_VALUE),Bt=Gt/Ut,Ft=jt/Ut,g[Lt]=Ut,Gt=Bt*x[Lt]+Ft*g[Lt+1],g[Lt+1]=-Ft*x[Lt]+Bt*g[Lt+1],jt=Ft*x[Lt+1],x[Lt+1]=Bt*x[Lt+1],h&&Lt<o-1)for(var Vt=0;Vt<o;Vt++)Ut=Bt*b.get(Vt,Lt)+Ft*b.get(Vt,Lt+1),b.set(Vt,Lt+1,-Ft*b.get(Vt,Lt)+Bt*b.get(Vt,Lt+1)),b.set(Vt,Lt,Ut)}x[X-2]=Gt,1;break;case 4:if(g[ft]<=0&&(g[ft]=g[ft]<0?-g[ft]:0,d))for(var Wt=0;Wt<=st;Wt++)_.set(Wt,ft,-_.get(Wt,ft));for(;ft<st&&!(g[ft]>=g[ft+1]);){var Xt=g[ft];if(g[ft]=g[ft+1],g[ft+1]=Xt,d&&ft<i-1)for(var Ht=0;Ht<i;Ht++)Xt=_.get(Ht,ft+1),_.set(Ht,ft+1,_.get(Ht,ft)),_.set(Ht,ft,Xt);if(h&&ft<o-1)for(var qt=0;qt<o;qt++)Xt=b.get(qt,ft+1),b.set(qt,ft+1,b.get(qt,ft)),b.set(qt,ft,Xt);ft++}0,X--}}if(p){var Yt=_;_=b,b=Yt}this.m=o,this.n=i,this.s=g,this.U=b,this.V=_}var e,n,r;return e=t,(n=[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,o=gn.zeros(r,r),i=0;i<r;i++)Math.abs(this.s[i])<=n?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,l=gn.zeros(c,f),h=0;h<c;h++)for(var d=0;d<f;d++){for(var p=0,v=0;v<r;v++)p+=s.get(h,v)*a.get(d,v);l.set(h,d,p)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(gn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,o=new gn(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new gn(n,s),l=0;l<n;l++)for(var h=0;h<s;h++){for(var d=0,p=0;p<c;p++)d+=o.get(l,p)*u.get(h,p);f.set(l,h,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return gn.diag(this.s)}}])&&kn(e.prototype,n),r&&kn(e,r),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=gn.mul(gn.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean();r.add(a).subRowVector(o).subColumnVector(i);var u=new On(r),s=gn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return gn.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var l=Math.random()*n,h=Math.random()*n;c.push([l,h])}return c}}}])&&Dn(e.prototype,n),r&&Dn(e,r),t}();function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var o=0;o<n;o++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t}},{key:"getRepulsion",value:function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){r[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],l=Math.sqrt(c*c+f*f);if(0===l){l=1;var h=u>s?1:-1;c=.01*h,f=.01*h}if(l<t.nodeSizeFunc(n[u])/2+t.nodeSizeFunc(n[s])/2){var d=o*o/l;r[u].x+=c/l*d,r[u].y+=f/l*d}}}))}))}},{key:"updatePositions",value:function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;r&&e.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),u=i/a,s=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var l=Math.cos(f)*c;e.x=u*l,e.y=s*l}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(n/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,r){var l=u[0]-t[o][0],h=u[1]-t[o][1],d=Math.sqrt(l*l+h*h);l=l/d*a[s],h=h/d*a[s],u[0]=t[o][0]+l,u[1]=t[o][1]+h}}}}))}}])&&Mn(e.prototype,n),r&&Mn(e,r),t}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t){return function(t){if(Array.isArray(t))return Gn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Un(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if(p(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,l=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=l;var h=x({nodes:e,edges:n},!1),d=_(h),v=t.maxToFocus(d,l);t.handleInfinity(d,l,v+1),t.distances=d;var b=d[l],w=t.width||500,E=t.height||500,S=w-r[0]>r[0]?r[0]:w-r[0],A=E-r[1]>r[1]?r[1]:E-r[1];0===S&&(S=w/2),0===A&&(A=E/2);var I=A>S?S:A,k=Math.max.apply(Math,Pn(b)),O=[];b.forEach((function(e,n){t.unitRadius||(t.unitRadius=I/k),O[n]=e*t.unitRadius})),t.radii=O;var D=t.eIdealDisMatrix();t.eIdealDistances=D;var R=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(D);t.weights=R;var M=new Rn({linkDistance:o,distances:D}).layout();M.forEach((function(t){g(t[0])&&(t[0]=Math.random()*o),g(t[1])&&(t[1]=Math.random()*o)})),t.positions=M,M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[l][0],t[1]-=M[l][1]})),t.run();var C,N=t.preventOverlap,P=t.nodeSize,G=t.strictRadial;if(N){var j,L=t.nodeSpacing;j=y(L)?function(){return L}:T(L)?L:function(){return 0},C=P?m(P)?function(t){return(P[0]>P[1]?P[0]:P[1])+j(t)}:function(t){return P+j(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+j(t):t.size+j(t):10+j(t)};var U={nodes:e,nodeSizeFunc:C,adjMatrix:h,positions:M,radii:O,height:E,width:w,strictRadial:G,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new Cn(U);M=B.layout()}return M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,r,n)}}},{key:"oneIteration",value:function(t,e,n,r,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=zn(u,[0,0]),f=0===c?0:1/c;if(s!==a){var l=0,h=0,d=0;e.forEach((function(t,e){if(s!==e){var n=zn(u,t),i=0===n?0:1/n,a=r[e][s];d+=o[s][e],l+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),h+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===n[s]?0:1/n[s];d*=i,d+=t*p*p,l*=i,l+=t*p*u[0]*f,u[0]=l/d,h*=i,h+=t*p*u[1]*f,u[1]=h/d}}))}},{key:"eIdealDisMatrix",value:function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return n&&n.forEach((function(n,u){var s=[];n.forEach((function(n,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(n*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;p(c)&&(c=c.charCodeAt(0)),p(f)&&(f=f.charCodeAt(0)),s.push(n*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(n*r/(o[u]/i));else{var l=(r+i)/2;s.push(n*l)}})),a.push(s)})),a}},{key:"handleInfinity",value:function(t,e,n){for(var r=t.length,o=0;o<r;o++)if(t[e][o]===1/0){t[e][o]=n,t[o][e]=n;for(var i=0;i<r;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=n+t[o][i],t[i][e]=n+t[o][i])}for(var a=0;a<r;a++)if(a!==e)for(var u=0;u<r;u++)if(t[a][u]===1/0){var s=Math.abs(t[e][a]-t[e][u]);s=0===s?1:s,t[a][u]=s}}},{key:"maxToFocus",value:function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}},{key:"getType",value:function(){return"radial"}}])&&jn(e.prototype,n),r&&jn(e,r),i}(I);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Yn(t):e}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=new Map,Qn=function(t,e){if(Zn.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),null!==(r=e)&&"object"===E(r)){var n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(r,t);var n=Hn(r);function r(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=Yn(o=n.call(this)),a={},u=i.getDefaultCfg();return Object.assign(a,u,e,t),Object.keys(a).forEach((function(t){var e=a[t];i[t]=e})),o}return r}(I);Zn.set(t,n)}else Zn.set(t,e);var r},Jn=function(t){return Zn.has(t)?Zn.get(t):null};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var o=or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===r)return e[0].x=o[0],e[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i,a=[];i=m(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;m(t.size)?e=Math.max(t.size[0],t.size[1]):y(t.size)&&(e=t.size),i=Math.max(i,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&p(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",y(e[0].degree)))){var c=b(e.length,s,n);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],l=f[0];a.forEach((function(e){if(l.length>0){var n=Math.abs(l[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(l=[],f.push(l))}l.push(e)}));var h=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,v=(Math.min(t.width,t.height)/2-h)/(f.length+(d?1:0));h=Math.min(h,v)}var g=0;if(f.forEach((function(e){var n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(r)-Math.cos(0),i=Math.sin(r)-Math.sin(0),a=Math.sqrt(h*h/(o*o+i*i));g=Math.max(a,g)}e.r=g,g+=h})),t.equidistant){for(var _=0,x=0,w=0;w<f.length;w++){var E=f[w].r-x;_=Math.max(_,E)}x=0,f.forEach((function(t,e){0===e&&(x=t.r),t.r=x,x+=_}))}return f.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*n*i;e.x=o[0]+r*Math.cos(a),e.y=o[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&tr(e.prototype,n),r&&tr(e,r),i}(I);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e,n,r,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=void 0===e?[]:e,r=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=x({nodes:t,edges:n},!1),a=_(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();return this.positions=f,f.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:n}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var t=this.scaledDistances,e=gn.mul(gn.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),o=e.mean();e.add(o).subRowVector(n).subColumnVector(r);var i=new On(e),a=gn.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return gn.mul([t],[a]).toJSON()[0].splice(0,2)}))}},{key:"handleInfinity",value:function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,o){n===1/0&&(t[r][o]=e)}))}))}},{key:"getType",value:function(){return"mds"}}])&&ur(e.prototype,n),r&&ur(e,r),i}(I);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r,o=mr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var t=this,e=this.nodes;if(e&&0!==e.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var n=this.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var r={},o={};return e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),this.nodeMap=r,this.nodeIdxMap=o,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration,o=t.center,i=t.height*t.width,a=Math.sqrt(i)/10,u=i/(e.length+1),s=Math.sqrt(u),c=t.gravity,f=t.speed,l=t.clustering,h={};if(l)for(var d in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var n=h[t.cluster];y(t.x)&&(n.cx+=t.x),y(t.y)&&(n.cy+=t.y),n.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count;for(var p=function(r){var i=[];if(e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,n,i,s,u),l){var d=t.clusterGravity||c;for(var p in e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=h[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),o=s*d;i[e].x-=o*(t.x-n.cx)/r,i[e].y-=o*(t.y-n.cy)/r}})),h)h[p].cx=0,h[p].cy=0,h[p].count=0;for(var v in e.forEach((function(t){var e=h[t.cluster];y(t.x)&&(e.cx+=t.x),y(t.y)&&(e.cy+=t.y),e.count++})),h)h[v].cx/=h[v].count,h[v].cy/=h[v].count}e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=.01*s*c;i[e].x-=n*(t.x-o[0]),i[e].y-=n*(t.y-o[1])}})),e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=Math.sqrt(i[e].x*i[e].x+i[e].y*i[e].y);if(n>0){var r=Math.min(a*(f/800),n);t.x+=i[e].x/n*r,t.y+=i[e].y/n*r}}}))},v=0;v<r;v++)p();return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},{key:"applyCalculate",value:function(t,e,n,r,o){this.calRepulsive(t,n,o),this.calAttractive(e,n,r)}},{key:"calRepulsive",value:function(t,e,n){t.forEach((function(r,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&y(r.x)&&y(t.x)&&y(r.y)&&y(t.y)){var a=r.x-t.x,u=r.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=n/s;e[o].x+=a*f,e[o].y+=u*f}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.forEach((function(t){if(t.source&&t.target){var o=r.nodeIdxMap[t.source],i=r.nodeIdxMap[t.target];if(o!==i){var a=r.nodeMap[t.source],u=r.nodeMap[t.target];if(y(u.x)&&y(a.x)&&y(u.y)&&y(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),l=f*f/n;e[i].x-=s/f*l,e[i].y-=c/f*l,e[o].x+=s/f*l,e[o].y+=c/f*l}}}}))}},{key:"getType",value:function(){return"fruchterman"}}])&&pr(e.prototype,n),r&&pr(e,r),i}(I),_r=n(6),xr=n.n(_r),wr=n(2),Er=n.n(wr),Sr=n(4),Tr=n.n(Sr),Ar=n(7),Ir=n.n(Ar),kr=(n(16),n(159),n(5)),Or=n.n(kr),Dr=n(8),Rr=n.n(Dr),Mr=1;function Cr(){return Mr++}var Nr=function t(e){Er()(this,t)},Pr=function(){function t(e){Er()(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return Tr()(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var o=e+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],o=t<e?1:-1,i=t;i!==e;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r);if(this.lookup[o]===t)return o}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r),i=this.lookup[o];t(o,this.getComponent(i))}}},{key:"forEachAsync",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return o=r[n],i=Number(o),a=this.lookup[i],t.next=7,e(i,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],i=Number(o),a=this.lookup[i];e.push(t(i,this.getComponent(a)))}return e}}]),t}(),Gr=n(34),jr=n.n(Gr),Lr=n(1),Ur={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Br=function t(){Er()(this,t),this.index=void 0},Fr=function t(){Er()(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zr=function(){function t(){Er()(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Tr()(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}(),Vr=n(14),Wr=n.n(Vr),Xr=n(15),Hr=n.n(Xr),qr=n(9),Yr=n.n(qr);function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Zr,Qr,Jr,$r,to,eo=function(t){Wr()(n,t);var e=Kr(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return Tr()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){Er()(this,t),this.first=void 0,this.last=void 0})),no=function t(){Er()(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var io=(Zr=Object(Lr.injectable)(),Qr=Object(Lr.inject)(Ur.RenderEngine),Zr(($r=function(){function t(){Er()(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],xr()(this,"engine",to,this)}var e,n;return Tr()(t,[{key:"execute",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var o=new Fr;o.execute=n,r&&(o.tearDown=r),o.name=t;var i=new zr;return i.name=t,this.passNodes.push(i),this.frameGraphPasses.push(o),e(this,i,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=ro(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var o,i=[],a=ro(this.resourceNodes);try{for(a.s();!(o=a.n()).done;){var u=o.value;0===u.readerCount&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}for(;i.length;){var s=i.pop(),c=s&&s.writer;if(c&&0==--c.refCount){var f,l=ro(c.reads);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=this.resourceNodes[h.index];0==--d.readerCount&&i.push(d)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,v=ro(this.passNodes);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.refCount){var y,g=ro(m.reads);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:m,_.last=m}}catch(t){g.e(t)}finally{g.f()}var x,w=ro(m.writes);try{for(w.s();!(x=w.n()).done;){var E=x.value,S=this.resourceNodes[E.index].resource;S.first=S.first?S.first:m,S.last=m}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){v.e(t)}finally{v.f()}for(var T=0;T<2;T++){var A,I=ro(this.resourceNodes);try{for(I.s();!(A=I.n()).done;){var k=A.value.resource;if(k.priority===T&&k.refs){var O=k.first,D=k.last;O&&D&&(O.devirtualize.push(k),D.destroy.push(k))}}}catch(t){I.e(t)}finally{I.f()}}}},{key:"executePassNodes",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c,f,l,h,d,p;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ro(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(o=jr()(r.value,2),i=o[0],!(a=o[1]).refCount){t.next=16;break}u=ro(a.devirtualize);try{for(u.s();!(s=u.n()).done;)s.value.preExecuteDevirtualize(this.engine)}catch(t){u.e(t)}finally{u.f()}c=ro(a.destroy);try{for(c.s();!(f=c.n()).done;)f.value.preExecuteDestroy(this.engine)}catch(t){c.e(t)}finally{c.f()}return t.next=12,this.frameGraphPasses[i].execute(this,this.frameGraphPasses[i],e);case 12:l=ro(a.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}d=ro(a.destroy);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){d.e(t)}finally{d.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new no;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Br;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),to=Ir()($r.prototype,"engine",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),ao=n(0),uo=n.n(ao),so=n(12),co=n.n(so);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var po=function(t){Wr()(n,t);var e=ho(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=void 0,r.maxInstancedCount=void 0,r.aabb=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setAttribute",value:function(t,e,n,r){var o=this.attributes.find((function(e){return e.name===t}));return o?(o.data=e,o.dirty=!0):this.attributes.push(lo(lo({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}}]),n}(Nr),vo=(n(168),1e-6),mo="undefined"!=typeof Float32Array?Float32Array:Array,yo=Math.random;Math.PI;function go(){var t=new mo(9);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _o(t){var e=new mo(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wo(t,e,n,r,o,i,a,u,s){var c=new mo(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c[8]=s,c}function Eo(t,e,n,r,o,i,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function So(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function To(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ao(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*i+u*s,d=c*i-a*s,p=n*l+r*h+o*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+o*c)*p,t[2]=(u*r-o*a)*p,t[3]=h*p,t[4]=(f*n-o*s)*p,t[5]=(-u*n+o*i)*p,t[6]=d*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}function Io(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-r*f,t[2]=r*u-o*a,t[3]=u*s-i*f,t[4]=n*f-o*s,t[5]=o*i-n*u,t[6]=i*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*i,t}function ko(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*o+d*u+p*f,t[2]=h*i+d*s+p*l,t[3]=v*r+m*a+y*c,t[4]=v*o+m*u+y*f,t[5]=v*i+m*s+y*l,t[6]=g*r+b*a+_*c,t[7]=g*o+b*u+_*f,t[8]=g*i+b*s+_*l,t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+c,t[7]=h*o+d*u+f,t[8]=h*i+d*s+l,t}function Ro(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*u,t[2]=d*i+h*s,t[3]=d*a-h*r,t[4]=d*u-h*o,t[5]=d*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Mo(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function No(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Po(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[3]=f-y,t[6]=h+m,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t}function Lo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(s*A-a*O-c*T)*D,t[2]=(a*k-u*A+c*S)*D,t[3]=(o*k-r*O-i*I)*D,t[4]=(n*O-o*A+i*T)*D,t[5]=(r*A-n*k-i*S)*D,t[6]=(v*E-m*w+y*x)*D,t[7]=(m*_-p*E-y*b)*D,t[8]=(p*w-v*_+y*g)*D,t):null}function Uo(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bo(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Fo(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Wo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Xo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],p=e[3],v=e[4],m=e[5],y=e[6],g=e[7],b=e[8];return Math.abs(n-l)<=vo*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=vo*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=vo*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=vo*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=vo*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=vo*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=vo*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=vo*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=vo*Math.max(1,Math.abs(f),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Yo=Oo,Ko=Vo;function Zo(){var t=new mo(16);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qo(t){var e=new mo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $o(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v){var m=new mo(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=v,m}function ti(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=m,t}function ei(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ni(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ri(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(o*k-r*O-i*I)*D,t[2]=(v*E-m*w+y*x)*D,t[3]=(h*w-l*E-d*x)*D,t[4]=(s*A-a*O-c*T)*D,t[5]=(n*O-o*A+i*T)*D,t[6]=(m*_-p*E-y*b)*D,t[7]=(f*E-h*_+d*b)*D,t[8]=(a*k-u*A+c*S)*D,t[9]=(r*A-n*k-i*S)*D,t[10]=(p*w-v*_+y*g)*D,t[11]=(l*_-f*w-d*g)*D,t[12]=(u*T-a*I-s*S)*D,t[13]=(n*I-r*T+o*S)*D,t[14]=(v*b-p*x-m*g)*D,t[15]=(f*x-l*b+h*g)*D,t):null}function oi(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15];return t[0]=u*(h*y-d*m)-l*(s*y-c*m)+v*(s*d-c*h),t[1]=-(r*(h*y-d*m)-l*(o*y-i*m)+v*(o*d-i*h)),t[2]=r*(s*y-c*m)-u*(o*y-i*m)+v*(o*c-i*s),t[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+l*(o*c-i*s)),t[4]=-(a*(h*y-d*m)-f*(s*y-c*m)+p*(s*d-c*h)),t[5]=n*(h*y-d*m)-f*(o*y-i*m)+p*(o*d-i*h),t[6]=-(n*(s*y-c*m)-a*(o*y-i*m)+p*(o*c-i*s)),t[7]=n*(s*d-c*h)-a*(o*d-i*h)+f*(o*c-i*s),t[8]=a*(l*y-d*v)-f*(u*y-c*v)+p*(u*d-c*l),t[9]=-(n*(l*y-d*v)-f*(r*y-i*v)+p*(r*d-i*l)),t[10]=n*(u*y-c*v)-a*(r*y-i*v)+p*(r*c-i*u),t[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+f*(r*c-i*u)),t[12]=-(a*(l*m-h*v)-f*(u*m-s*v)+p*(u*h-s*l)),t[13]=n*(l*m-h*v)-f*(r*m-o*v)+p*(r*h-o*l),t[14]=-(n*(u*m-s*v)-a*(r*m-o*v)+p*(r*s-o*u)),t[15]=n*(u*h-s*l)-a*(r*h-o*l)+f*(r*s-o*u),t}function ii(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15];return(e*a-n*i)*(l*m-h*v)-(e*u-r*i)*(f*m-h*p)+(e*s-o*i)*(f*v-l*p)+(n*u-r*a)*(c*m-h*d)-(n*s-o*a)*(c*v-l*d)+(r*s-o*u)*(c*p-f*d)}function ai(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*l+w*v,t[1]=b*o+_*s+x*h+w*m,t[2]=b*i+_*c+x*d+w*y,t[3]=b*a+_*f+x*p+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*l+w*v,t[5]=b*o+_*s+x*h+w*m,t[6]=b*i+_*c+x*d+w*y,t[7]=b*a+_*f+x*p+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*l+w*v,t[9]=b*o+_*s+x*h+w*m,t[10]=b*i+_*c+x*d+w*y,t[11]=b*a+_*f+x*p+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*l+w*v,t[13]=b*o+_*s+x*h+w*m,t[14]=b*i+_*c+x*d+w*y,t[15]=b*a+_*f+x*p+w*g,t}function ui(t,e,n){var r,o,i,a,u,s,c,f,l,h,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+u*m+l*y+e[12],t[13]=o*v+s*m+h*y+e[13],t[14]=i*v+c*m+d*y+e[14],t[15]=a*v+f*m+p*y+e[15]),t}function si(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ci(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k=r[0],O=r[1],D=r[2],R=Math.hypot(k,O,D);return R<vo?null:(k*=R=1/R,O*=R,D*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],v=e[8],m=e[9],y=e[10],g=e[11],b=k*k*a+i,_=O*k*a+D*o,x=D*k*a-O*o,w=k*O*a-D*o,E=O*O*a+i,S=D*O*a+k*o,T=k*D*a+O*o,A=O*D*a-k*o,I=D*D*a+i,t[0]=u*b+l*_+v*x,t[1]=s*b+h*_+m*x,t[2]=c*b+d*_+y*x,t[3]=f*b+p*_+g*x,t[4]=u*w+l*E+v*S,t[5]=s*w+h*E+m*S,t[6]=c*w+d*E+y*S,t[7]=f*w+p*E+g*S,t[8]=u*T+l*A+v*I,t[9]=s*T+h*A+m*I,t[10]=c*T+d*A+y*I,t[11]=f*T+p*A+g*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function fi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=s*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-s*r,t}function li(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=s*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=s*r+h*o,t}function hi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=s*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-s*r,t}function di(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vi(t,e,n){var r,o,i,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<vo?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+s*r,t[2]=s*a*i-u*r,t[3]=0,t[4]=a*u*i-s*r,t[5]=u*u*i+o,t[6]=s*u*i+a*r,t[7]=0,t[8]=a*s*i+u*r,t[9]=u*s*i-a*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,s=o+o,c=i+i,f=r*u,l=r*s,h=r*c,d=o*s,p=o*c,v=i*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-y,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _i(t,e){var n=new mo(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+s*i-c*o)/l,n[1]=2*(s*a+f*o+c*r-u*i)/l,n[2]=2*(c*a+f*i+u*o-s*r)/l):(n[0]=2*(u*a+f*r+s*i-c*o),n[1]=2*(s*a+f*o+c*r-u*i),n[2]=2*(c*a+f*i+u*o-s*r)),bi(t,e,n),t}function xi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function wi(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(s,c,f),t}function Ei(t,e){var n=new mo(3);wi(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,s=e[2]*i,c=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,d=e[9]*o,p=e[10]*i,v=a+f+p,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(l-d)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>p?(m=2*Math.sqrt(1+a-f-p),t[3]=(l-d)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>p?(m=2*Math.sqrt(1+f-a-p),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+d)/m):(m=2*Math.sqrt(1+p-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+d)/m,t[2]=.25*m),t}function Si(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=o+o,c=i+i,f=a+a,l=o*s,h=o*c,d=o*f,p=i*c,v=i*f,m=a*f,y=u*s,g=u*c,b=u*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(h+b)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(l+m))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(d+g)*w,t[9]=(v-y)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ti(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],s=e[3],c=i+i,f=a+a,l=u+u,h=i*c,d=i*f,p=i*l,v=a*f,m=a*l,y=u*l,g=s*c,b=s*f,_=s*l,x=r[0],w=r[1],E=r[2],S=o[0],T=o[1],A=o[2],I=(1-(v+y))*x,k=(d+_)*x,O=(p-b)*x,D=(d-_)*w,R=(1-(h+y))*w,M=(m+g)*w,C=(p+b)*E,N=(m-g)*E,P=(1-(h+v))*E;return t[0]=I,t[1]=k,t[2]=O,t[3]=0,t[4]=D,t[5]=R,t[6]=M,t[7]=0,t[8]=C,t[9]=N,t[10]=P,t[11]=0,t[12]=n[0]+S-(I*S+D*T+C*A),t[13]=n[1]+T-(k*S+R*T+N*A),t[14]=n[2]+A-(O*S+M*T+P*A),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ii(t,e,n,r,o,i,a){var u=1/(n-e),s=1/(o-r),c=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ki(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Oi(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Di(t,e,n,r,o,i,a){var u=1/(e-n),s=1/(r-o),c=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(a+i)*c,t[15]=1,t}function Ri(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p=e[0],v=e[1],m=e[2],y=r[0],g=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<vo&&Math.abs(v-x)<vo&&Math.abs(m-w)<vo?ei(t):(f=p-_,l=v-x,h=m-w,o=g*(h*=d=1/Math.hypot(f,l,h))-b*(l*=d),i=b*(f*=d)-y*h,a=y*l-g*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,s=h*o-f*a,c=f*i-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*v+a*m),t[13]=-(u*p+s*v+c*m),t[14]=-(f*p+l*v+h*m),t[15]=1,t)}function Mi(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,v=c*f-u*h,m=u*l-s*f;return(d=p*p+v*v+m*m)>0&&(p*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=p,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-h*v,t[5]=h*p-f*m,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ci(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ni(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Gi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ji(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Li(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ui(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bi(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=e[0],b=e[1],_=e[2],x=e[3],w=e[4],E=e[5],S=e[6],T=e[7],A=e[8],I=e[9],k=e[10],O=e[11],D=e[12],R=e[13],M=e[14],C=e[15];return Math.abs(n-g)<=vo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=vo*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=vo*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-E)<=vo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-S)<=vo*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-T)<=vo*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-A)<=vo*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-I)<=vo*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-k)<=vo*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=vo*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=vo*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-R)<=vo*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-M)<=vo*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-C)<=vo*Math.max(1,Math.abs(y),Math.abs(C))}var Fi=ai,zi=Gi;function Vi(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Wi(t){var e=new mo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xi(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Hi(t,e,n){var r=new mo(3);return r[0]=t,r[1]=e,r[2]=n,r}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ki(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Zi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ji(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $i(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ta(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ea(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function na(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ra(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ia(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function aa(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function ua(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function sa(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ca(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function la(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2];return t[0]=o*s-i*u,t[1]=i*a-r*s,t[2]=r*u-o*a,t}function pa(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function va(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*f,t}function ma(t,e,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,l=3*s*a,h=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function ya(t,e){e=e||1;var n=2*yo()*Math.PI,r=2*yo()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function ga(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function ba(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _a(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,l=i*u-r*c,h=r*s-o*u,d=o*h-i*l,p=i*f-r*h,v=r*l-o*f,m=2*a;return f*=m,l*=m,h*=m,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+l+p,t[2]=c+h+v,t}function xa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ea(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sa(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),c=s&&ha(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ta(t){return t[0]=0,t[1]=0,t[2]=0,t}function Aa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ka(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=vo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=vo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=vo*Math.max(1,Math.abs(o),Math.abs(u))}var Oa,Da=Zi,Ra=Qi,Ma=Ji,Ca=aa,Na=ua,Pa=Xi,Ga=sa,ja=(Oa=Vi(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Oa[0]=t[a],Oa[1]=t[a+1],Oa[2]=t[a+2],o(Oa,Oa,i),t[a]=Oa[0],t[a+1]=Oa[1],t[a+2]=Oa[2];return t});function La(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ua(t){var e=new mo(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ba(t,e,n,r){var o=new mo(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function za(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ha(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ya(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ka(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Za(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $a(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nu(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function ru(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ou(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function iu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function au(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function uu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function su(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],d=e[3];return t[0]=l*c-h*s+d*u,t[1]=-f*c+h*a-d*i,t[2]=f*s-l*a+d*o,t[3]=-f*u+l*i-h*o,t}function cu(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fu(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*yo()-1)*n+(r=2*yo()-1)*r}while(a>=1);do{u=(o=2*yo()-1)*o+(i=2*yo()-1)*i}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*i*s,t}function lu(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hu(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*i-s*o,l=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return t[0]=f*c+d*-a+l*-s-h*-u,t[1]=l*c+d*-u+h*-a-f*-s,t[2]=h*c+d*-s+f*-u-l*-a,t[3]=e[3],t}function du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pu(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mu(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=vo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=vo*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=vo*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=vo*Math.max(1,Math.abs(i),Math.abs(c))}var yu=Wa,gu=Xa,bu=Ha,_u=tu,xu=eu,wu=nu,Eu=ru,Su=function(){var t=La();return function(e,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Tu(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Au(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Iu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ku(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>vo?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ou(t,e){var n=ds(t,e);return Math.acos(2*n*n-1)}function Du(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+o*c-i*s,t[1]=o*f+a*s+i*u-r*c,t[2]=i*f+a*c+r*s-o*u,t[3]=a*f-r*u-o*s-i*c,t}function Ru(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=i*s-o*u,t[3]=a*s-r*u,t}function Mu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*u,t[1]=o*s+a*u,t[2]=i*s+r*u,t[3]=a*s-o*u,t}function Cu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=o*s-r*u,t[2]=i*s+a*u,t[3]=a*s-i*u,t}function Nu(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Pu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=u*Math.cos(a),t}function Gu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function ju(t,e,n){return Gu(t,e),hs(t,t,n),Pu(t,t),t}function Lu(t,e,n,r){var o,i,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return(i=c*d+f*p+l*v+h*m)<0&&(i=-i,d=-d,p=-p,v=-v,m=-m),1-i>vo?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*l+s*v,t[3]=u*h+s*m,t}function Uu(t){var e=yo(),n=yo(),r=yo(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Bu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function Fu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zu(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Vu(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-a*u*c,t[1]=a*u*f+i*s*c,t[2]=a*s*c-i*u*f,t[3]=a*s*f+i*u*c,t}function Wu(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xu,Hu,qu,Yu,Ku,Zu,Qu,Ju,$u,ts,es,ns,rs,os,is,as=Ua,us=Ba,ss=Fa,cs=za,fs=Va,ls=Du,hs=Ja,ds=uu,ps=cu,vs=nu,ms=vs,ys=ru,gs=ys,bs=au,_s=vu,xs=mu,ws=(Xu=Vi(),Hu=Hi(1,0,0),qu=Hi(0,1,0),function(t,e,n){var r=ha(e,n);return r<-.999999?(da(Xu,Hu,e),Pa(Xu)<1e-6&&da(Xu,qu,e),la(Xu,Xu),Iu(t,Xu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(da(Xu,e,n),t[0]=Xu[0],t[1]=Xu[1],t[2]=Xu[2],t[3]=1+r,bs(t,t))}),Es=(Yu=Tu(),Ku=Tu(),function(t,e,n,r,o,i){return Lu(Yu,e,o,i),Lu(Ku,n,r,i),Lu(t,Yu,Ku,2*i*(1-i)),t}),Ss=(Zu=go(),function(t,e,n,r){return Zu[0]=n[0],Zu[3]=n[1],Zu[6]=n[2],Zu[1]=r[0],Zu[4]=r[1],Zu[7]=r[2],Zu[2]=-e[0],Zu[5]=-e[1],Zu[8]=-e[2],bs(t,zu(t,Zu))}),Ts=function(){function t(e,n){Er()(this,t),this.center=void 0,this.halfExtents=void 0,this.min=i.create(),this.max=i.create(),this.update(e,n)}return Tr()(t,[{key:"update",value:function(t,e){this.center=t||i.create(),this.halfExtents=e||i.fromValues(.5,.5,.5),this.min=i.sub(this.min,this.center,this.halfExtents),this.max=i.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){i.add(this.center,e,t),i.scale(this.center,this.center,.5),i.sub(this.halfExtents,e,t),i.scale(this.halfExtents,this.halfExtents,.5),i.copy(this.min,t),i.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],o=e[2],i=this.halfExtents,a=i[0],u=i[1],s=i[2],c=n-a,f=n+a,l=r-u,h=r+u,d=o-s,p=o+s,v=t.center,m=v[0],y=v[1],g=v[2],b=t.halfExtents,_=b[0],x=b[1],w=b[2],E=m-_,S=m+_,T=y-x,A=y+x,I=g-w,k=g+w;E<c&&(c=E),S>f&&(f=S),T<l&&(l=T),A>h&&(h=A),I<d&&(d=I),k>p&&(p=k),e[0]=.5*(c+f),e[1]=.5*(l+h),e[2]=.5*(d+p),i[0]=.5*(f-c),i[1]=.5*(h-l),i[2]=.5*(p-d),this.min[0]=c,this.min[1]=l,this.min[2]=d,this.max[0]=f,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),o=t.getMin();return n[0]<=r[0]&&e[0]>=o[0]&&n[1]<=r[1]&&e[1]>=o[1]&&n[2]<=r[2]&&e[2]>=o[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.min):272===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):i.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.max):272===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):i.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function As(t){for(var e=new Ts,n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(t[0],t[1],t[2]),o=3;o<t.length;){var a=t[o++],u=t[o++],s=t[o++];a<n[0]&&(n[0]=a),u<n[1]&&(n[1]=u),s<n[2]&&(n[2]=s),a>r[0]&&(r[0]=a),u>r[1]&&(r[1]=u),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(Ju=Qu||(Qu={}))[Ju.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Ju[Ju.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Ju[Ju.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Ju[Ju.POINTS=0]="POINTS",Ju[Ju.LINES=1]="LINES",Ju[Ju.LINE_LOOP=2]="LINE_LOOP",Ju[Ju.LINE_STRIP=3]="LINE_STRIP",Ju[Ju.TRIANGLES=4]="TRIANGLES",Ju[Ju.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ju[Ju.TRIANGLE_FAN=6]="TRIANGLE_FAN",Ju[Ju.ZERO=0]="ZERO",Ju[Ju.ONE=1]="ONE",Ju[Ju.SRC_COLOR=768]="SRC_COLOR",Ju[Ju.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Ju[Ju.SRC_ALPHA=770]="SRC_ALPHA",Ju[Ju.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Ju[Ju.DST_ALPHA=772]="DST_ALPHA",Ju[Ju.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Ju[Ju.DST_COLOR=774]="DST_COLOR",Ju[Ju.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Ju[Ju.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Ju[Ju.FUNC_ADD=32774]="FUNC_ADD",Ju[Ju.BLEND_EQUATION=32777]="BLEND_EQUATION",Ju[Ju.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Ju[Ju.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Ju[Ju.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Ju[Ju.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Ju[Ju.MAX_EXT=32776]="MAX_EXT",Ju[Ju.MIN_EXT=32775]="MIN_EXT",Ju[Ju.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Ju[Ju.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Ju[Ju.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Ju[Ju.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Ju[Ju.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Ju[Ju.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Ju[Ju.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Ju[Ju.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Ju[Ju.BLEND_COLOR=32773]="BLEND_COLOR",Ju[Ju.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Ju[Ju.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Ju[Ju.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Ju[Ju.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Ju[Ju.STREAM_DRAW=35040]="STREAM_DRAW",Ju[Ju.STATIC_DRAW=35044]="STATIC_DRAW",Ju[Ju.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Ju[Ju.BUFFER_SIZE=34660]="BUFFER_SIZE",Ju[Ju.BUFFER_USAGE=34661]="BUFFER_USAGE",Ju[Ju.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Ju[Ju.FRONT=1028]="FRONT",Ju[Ju.BACK=1029]="BACK",Ju[Ju.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Ju[Ju.CULL_FACE=2884]="CULL_FACE",Ju[Ju.BLEND=3042]="BLEND",Ju[Ju.DITHER=3024]="DITHER",Ju[Ju.STENCIL_TEST=2960]="STENCIL_TEST",Ju[Ju.DEPTH_TEST=2929]="DEPTH_TEST",Ju[Ju.SCISSOR_TEST=3089]="SCISSOR_TEST",Ju[Ju.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Ju[Ju.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Ju[Ju.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Ju[Ju.NO_ERROR=0]="NO_ERROR",Ju[Ju.INVALID_ENUM=1280]="INVALID_ENUM",Ju[Ju.INVALID_VALUE=1281]="INVALID_VALUE",Ju[Ju.INVALID_OPERATION=1282]="INVALID_OPERATION",Ju[Ju.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Ju[Ju.CW=2304]="CW",Ju[Ju.CCW=2305]="CCW",Ju[Ju.LINE_WIDTH=2849]="LINE_WIDTH",Ju[Ju.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Ju[Ju.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Ju[Ju.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Ju[Ju.FRONT_FACE=2886]="FRONT_FACE",Ju[Ju.DEPTH_RANGE=2928]="DEPTH_RANGE",Ju[Ju.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Ju[Ju.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Ju[Ju.DEPTH_FUNC=2932]="DEPTH_FUNC",Ju[Ju.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Ju[Ju.STENCIL_FUNC=2962]="STENCIL_FUNC",Ju[Ju.STENCIL_FAIL=2964]="STENCIL_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Ju[Ju.STENCIL_REF=2967]="STENCIL_REF",Ju[Ju.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Ju[Ju.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Ju[Ju.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Ju[Ju.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Ju[Ju.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Ju[Ju.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Ju[Ju.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Ju[Ju.VIEWPORT=2978]="VIEWPORT",Ju[Ju.SCISSOR_BOX=3088]="SCISSOR_BOX",Ju[Ju.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Ju[Ju.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Ju[Ju.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Ju[Ju.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Ju[Ju.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Ju[Ju.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Ju[Ju.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Ju[Ju.RED_BITS=3410]="RED_BITS",Ju[Ju.GREEN_BITS=3411]="GREEN_BITS",Ju[Ju.BLUE_BITS=3412]="BLUE_BITS",Ju[Ju.ALPHA_BITS=3413]="ALPHA_BITS",Ju[Ju.DEPTH_BITS=3414]="DEPTH_BITS",Ju[Ju.STENCIL_BITS=3415]="STENCIL_BITS",Ju[Ju.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Ju[Ju.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Ju[Ju.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Ju[Ju.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Ju[Ju.SAMPLES=32937]="SAMPLES",Ju[Ju.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Ju[Ju.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Ju[Ju.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Ju[Ju.DONT_CARE=4352]="DONT_CARE",Ju[Ju.FASTEST=4353]="FASTEST",Ju[Ju.NICEST=4354]="NICEST",Ju[Ju.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Ju[Ju.BYTE=5120]="BYTE",Ju[Ju.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Ju[Ju.SHORT=5122]="SHORT",Ju[Ju.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Ju[Ju.INT=5124]="INT",Ju[Ju.UNSIGNED_INT=5125]="UNSIGNED_INT",Ju[Ju.FLOAT=5126]="FLOAT",Ju[Ju.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Ju[Ju.ALPHA=6406]="ALPHA",Ju[Ju.RGB=6407]="RGB",Ju[Ju.RGBA=6408]="RGBA",Ju[Ju.LUMINANCE=6409]="LUMINANCE",Ju[Ju.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Ju[Ju.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Ju[Ju.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Ju[Ju.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Ju[Ju.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Ju[Ju.VERTEX_SHADER=35633]="VERTEX_SHADER",Ju[Ju.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Ju[Ju.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Ju[Ju.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Ju[Ju.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Ju[Ju.SHADER_TYPE=35663]="SHADER_TYPE",Ju[Ju.DELETE_STATUS=35712]="DELETE_STATUS",Ju[Ju.LINK_STATUS=35714]="LINK_STATUS",Ju[Ju.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Ju[Ju.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Ju[Ju.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Ju[Ju.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Ju[Ju.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Ju[Ju.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Ju[Ju.NEVER=512]="NEVER",Ju[Ju.LESS=513]="LESS",Ju[Ju.EQUAL=514]="EQUAL",Ju[Ju.LEQUAL=515]="LEQUAL",Ju[Ju.GREATER=516]="GREATER",Ju[Ju.NOTEQUAL=517]="NOTEQUAL",Ju[Ju.GEQUAL=518]="GEQUAL",Ju[Ju.ALWAYS=519]="ALWAYS",Ju[Ju.KEEP=7680]="KEEP",Ju[Ju.REPLACE=7681]="REPLACE",Ju[Ju.INCR=7682]="INCR",Ju[Ju.DECR=7683]="DECR",Ju[Ju.INVERT=5386]="INVERT",Ju[Ju.INCR_WRAP=34055]="INCR_WRAP",Ju[Ju.DECR_WRAP=34056]="DECR_WRAP",Ju[Ju.VENDOR=7936]="VENDOR",Ju[Ju.RENDERER=7937]="RENDERER",Ju[Ju.VERSION=7938]="VERSION",Ju[Ju.NEAREST=9728]="NEAREST",Ju[Ju.LINEAR=9729]="LINEAR",Ju[Ju.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Ju[Ju.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Ju[Ju.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Ju[Ju.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Ju[Ju.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Ju[Ju.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Ju[Ju.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Ju[Ju.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Ju[Ju.TEXTURE_2D=3553]="TEXTURE_2D",Ju[Ju.TEXTURE=5890]="TEXTURE",Ju[Ju.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Ju[Ju.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Ju[Ju.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Ju[Ju.TEXTURE0=33984]="TEXTURE0",Ju[Ju.TEXTURE1=33985]="TEXTURE1",Ju[Ju.TEXTURE2=33986]="TEXTURE2",Ju[Ju.TEXTURE3=33987]="TEXTURE3",Ju[Ju.TEXTURE4=33988]="TEXTURE4",Ju[Ju.TEXTURE5=33989]="TEXTURE5",Ju[Ju.TEXTURE6=33990]="TEXTURE6",Ju[Ju.TEXTURE7=33991]="TEXTURE7",Ju[Ju.TEXTURE8=33992]="TEXTURE8",Ju[Ju.TEXTURE9=33993]="TEXTURE9",Ju[Ju.TEXTURE10=33994]="TEXTURE10",Ju[Ju.TEXTURE11=33995]="TEXTURE11",Ju[Ju.TEXTURE12=33996]="TEXTURE12",Ju[Ju.TEXTURE13=33997]="TEXTURE13",Ju[Ju.TEXTURE14=33998]="TEXTURE14",Ju[Ju.TEXTURE15=33999]="TEXTURE15",Ju[Ju.TEXTURE16=34e3]="TEXTURE16",Ju[Ju.TEXTURE17=34001]="TEXTURE17",Ju[Ju.TEXTURE18=34002]="TEXTURE18",Ju[Ju.TEXTURE19=34003]="TEXTURE19",Ju[Ju.TEXTURE20=34004]="TEXTURE20",Ju[Ju.TEXTURE21=34005]="TEXTURE21",Ju[Ju.TEXTURE22=34006]="TEXTURE22",Ju[Ju.TEXTURE23=34007]="TEXTURE23",Ju[Ju.TEXTURE24=34008]="TEXTURE24",Ju[Ju.TEXTURE25=34009]="TEXTURE25",Ju[Ju.TEXTURE26=34010]="TEXTURE26",Ju[Ju.TEXTURE27=34011]="TEXTURE27",Ju[Ju.TEXTURE28=34012]="TEXTURE28",Ju[Ju.TEXTURE29=34013]="TEXTURE29",Ju[Ju.TEXTURE30=34014]="TEXTURE30",Ju[Ju.TEXTURE31=34015]="TEXTURE31",Ju[Ju.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Ju[Ju.REPEAT=10497]="REPEAT",Ju[Ju.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Ju[Ju.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ju[Ju.FLOAT_VEC2=35664]="FLOAT_VEC2",Ju[Ju.FLOAT_VEC3=35665]="FLOAT_VEC3",Ju[Ju.FLOAT_VEC4=35666]="FLOAT_VEC4",Ju[Ju.INT_VEC2=35667]="INT_VEC2",Ju[Ju.INT_VEC3=35668]="INT_VEC3",Ju[Ju.INT_VEC4=35669]="INT_VEC4",Ju[Ju.BOOL=35670]="BOOL",Ju[Ju.BOOL_VEC2=35671]="BOOL_VEC2",Ju[Ju.BOOL_VEC3=35672]="BOOL_VEC3",Ju[Ju.BOOL_VEC4=35673]="BOOL_VEC4",Ju[Ju.FLOAT_MAT2=35674]="FLOAT_MAT2",Ju[Ju.FLOAT_MAT3=35675]="FLOAT_MAT3",Ju[Ju.FLOAT_MAT4=35676]="FLOAT_MAT4",Ju[Ju.SAMPLER_2D=35678]="SAMPLER_2D",Ju[Ju.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Ju[Ju.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Ju[Ju.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Ju[Ju.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Ju[Ju.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Ju[Ju.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Ju[Ju.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Ju[Ju.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Ju[Ju.COMPILE_STATUS=35713]="COMPILE_STATUS",Ju[Ju.LOW_FLOAT=36336]="LOW_FLOAT",Ju[Ju.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Ju[Ju.HIGH_FLOAT=36338]="HIGH_FLOAT",Ju[Ju.LOW_INT=36339]="LOW_INT",Ju[Ju.MEDIUM_INT=36340]="MEDIUM_INT",Ju[Ju.HIGH_INT=36341]="HIGH_INT",Ju[Ju.FRAMEBUFFER=36160]="FRAMEBUFFER",Ju[Ju.RENDERBUFFER=36161]="RENDERBUFFER",Ju[Ju.RGBA4=32854]="RGBA4",Ju[Ju.RGB5_A1=32855]="RGB5_A1",Ju[Ju.RGB565=36194]="RGB565",Ju[Ju.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Ju[Ju.STENCIL_INDEX=6401]="STENCIL_INDEX",Ju[Ju.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Ju[Ju.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Ju[Ju.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Ju[Ju.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Ju[Ju.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Ju[Ju.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Ju[Ju.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Ju[Ju.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Ju[Ju.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Ju[Ju.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Ju[Ju.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Ju[Ju.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Ju[Ju.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Ju[Ju.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Ju[Ju.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Ju[Ju.NONE=0]="NONE",Ju[Ju.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Ju[Ju.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Ju[Ju.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Ju[Ju.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Ju[Ju.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Ju[Ju.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Ju[Ju.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Ju[Ju.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Ju[Ju.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Ju[Ju.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Ju[Ju.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Ju[Ju.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Ju[Ju.COPY_SRC=1]="COPY_SRC",Ju[Ju.COPY_DST=2]="COPY_DST",Ju[Ju.SAMPLED=4]="SAMPLED",Ju[Ju.STORAGE=8]="STORAGE",Ju[Ju.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Is=($u=Object(Lr.injectable)(),ts=Object(Lr.inject)(Ur.GeometryComponentManager),es=Object(Lr.inject)(Ur.RenderEngine),$u((rs=function(){function t(){Er()(this,t),xr()(this,"geometry",os,this),xr()(this,"engine",is,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){var e=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Qu.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Qu.UNSIGNED_INT,usage:Qu.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=Cr();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=Cr();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}},{key:"createBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.widthSegments||1,n=t.heightSegments||1,r=t.depthSegments||1,o=t.halfExtents||i.fromValues(.5,.5,.5),a=jr()(o,3),u=a[0],s=a[1],c=a[2],f=[i.fromValues(-u,-s,c),i.fromValues(u,-s,c),i.fromValues(u,s,c),i.fromValues(-u,s,c),i.fromValues(u,-s,-c),i.fromValues(-u,-s,-c),i.fromValues(-u,s,-c),i.fromValues(u,s,-c)],l=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],h=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],d={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},p=[],v=[],m=[],y=[],g=[],b=0,_=function(t,e,n){var r,o,a,u;for(a=0;a<=e;a++)for(u=0;u<=n;u++){var s=i.create(),c=i.create(),d=i.create(),_=i.create();i.lerp(s,f[l[t][0]],f[l[t][1]],a/e),i.lerp(c,f[l[t][0]],f[l[t][2]],u/n),i.sub(d,c,f[l[t][0]]),i.add(_,s,d),r=a/e,o=u/n,p.push(_[0],_[1],_[2]),v.push(h[t][0],h[t][1],h[t][2]),m.push(r,o),r=.875*(r/=3)+4/64,o=.875*(o/=3)+4/64,r+=t%3/3,o+=Math.floor(t/3)/3,y.push(r,o),a<e&&u<n&&(g.push(b+n+1,b+1,b),g.push(b+n+1,b+n+2,b+1)),b++}};_(d.FRONT,e,n),_(d.BACK,e,n),_(d.TOP,e,r),_(d.BOTTOM,e,r),_(d.RIGHT,r,n),_(d.LEFT,r,n);var x=As(p),w=Cr();return this.geometry.create(w,{indices:Uint32Array.from(g),aabb:x,attributes:[{dirty:!0,name:"position",data:Float32Array.from(p),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),t}(),os=Ir()(rs.prototype,"geometry",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=Ir()(rs.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=rs))||ns);n(169);function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Os,Ds,Rs,Ms,Cs,Ns,Ps,Gs,js,Ls=function(t){Wr()(n,t);var e=ks(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Qu.BACK},r.depth={enable:!0},r.blend=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(Nr);function Us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fs,zs=(Os=Object(Lr.injectable)(),Ds=Object(Lr.inject)(Ur.MaterialComponentManager),Rs=Object(Lr.inject)(Ur.RenderEngine),Ms=Object(Lr.inject)(Ur.ShaderModuleService),Os((Ns=function(){function t(){Er()(this,t),xr()(this,"material",Ps,this),xr()(this,"engine",Gs,this),xr()(this,"shaderModule",js,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.material.map(function(){var t=Rr()(Or.a.mark((function t(e,n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var t=Cr();return this.material.create(t,{vertexShaderGLSL:this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\\n  vec4 color;\\n  mat4 projectionMatrix;\\n  mat4 modelViewMatrix;\\n} uniforms;\\n\\nlayout(location = 0) in vec3 position;\\n// layout(location = 1) in vec3 barycentric;\\n\\nlayout(location = 0) out vec4 fragColor;\\n// layout(location = 1) out vec3 v_Barycentric;\\n\\nvoid main() {\\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\\n  fragColor = uniforms.color;\\n  // v_Barycentric = barycentric;\\n}":"attribute vec3 position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec4 color;\\n\\nvarying vec4 fragColor;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n  fragColor = color;\\n}",fragmentShaderGLSL:this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\\n//   float lineWidth;\\n//   vec4 lineColor;\\n// } wireframe;\\n\\nlayout(location = 0) in vec4 fragColor;\\n// layout(location = 1) in vec3 v_Barycentric;\\n\\nlayout(location = 0) out vec4 outColor;\\n\\n// wireframe\\n// float edgeFactor() {\\n//   vec3 d = fwidth(v_Barycentric);\\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\\n//   return min(min(a3.x, a3.y), a3.z);\\n// }\\n\\nvoid main() {\\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\\n  outColor = fragColor;\\n}":"varying vec4 fragColor;\\n\\nvoid main() {\\n  gl_FragColor = fragColor;\\n}"})}},{key:"createShaderMaterial",value:function(t){var e=Cr(),n=t.vertexShader,r=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var i="material-".concat(e);this.shaderModule.registerModule(i,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(i);n=a.vs,r=a.fs,a.uniforms&&(o=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Bs(Bs({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:o}))}}]),t}(),Ps=Ir()(Ns.prototype,"material",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=Ir()(Ns.prototype,"engine",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=Ir()(Ns.prototype,"shaderModule",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=Ns))||Cs);function Vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Fs||(Fs={}));var Ws=function(t){Wr()(n,t);var e=Vs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).strategy=Fs.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(co()(r),t),r}return n}(Nr);n(170);function Xs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Hs,qs=function(t){Wr()(n,t);var e=Xs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new Ts,r.aabbDirty=!0,r.model=void 0,r.visible=!0,Object.assign(co()(r),t),r}return n}(Nr),Ys=function(){function t(e,n){Er()(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||i.fromValues(0,1,0),this.updatePNVertexFlag()}return Tr()(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return i.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/i.len(this.normal);i.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),o=r/(r-this.distanceToPoint(e)),a=o>=0&&o<=1;return a&&n&&i.lerp(n,t,e,o),a}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Hs||(Hs={}));var Ks,Zs,Qs,Js,$s,tc,ec,nc,rc,oc,ic,ac,uc,sc=function(){function t(e){if(Er()(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Ys)}return Tr()(t,[{key:"extractFromVPMatrix",value:function(t){var e=jr()(t,16),n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15];i.set(this.planes[0].normal,a-n,f-u,p-l),this.planes[0].distance=-(g-v),i.set(this.planes[1].normal,a+n,f+u,p+l),this.planes[1].distance=-(g+v),i.set(this.planes[2].normal,a+r,f+s,p+h),this.planes[2].distance=-(g+m),i.set(this.planes[3].normal,a-r,f-s,p-h),this.planes[3].distance=-(g-m),i.set(this.planes[4].normal,a-o,f-c,p-d),this.planes[4].distance=-(g-y),i.set(this.planes[5].normal,a+o,f+c,p+d),this.planes[5].distance=-(g+y),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}(),cc=n(35),fc=n.n(cc);function lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dc,pc,vc,mc,yc,gc,bc,_c,xc,wc,Ec,Sc,Tc,Ac,Ic,kc,Oc,Dc,Rc,Mc,Cc,Nc,Pc,Gc,jc=(Ks=Object(Lr.injectable)(),Zs=Object(Lr.inject)(Ur.MeshComponentManager),Qs=Object(Lr.inject)(Ur.CullableComponentManager),Js=Object(Lr.inject)(Ur.GeometryComponentManager),$s=Object(Lr.inject)(Ur.HierarchyComponentManager),tc=Object(Lr.inject)(Ur.TransformComponentManager),Ks((nc=function(){function t(){Er()(this,t),xr()(this,"mesh",rc,this),xr()(this,"cullable",oc,this),xr()(this,"geometry",ic,this),xr()(this,"hierarchy",ac,this),xr()(this,"transform",uc,this),this.planes=void 0}var e;return Tr()(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,o,a,u=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=lc(e);try{for(a=function(){var t=o.value,e=(t.getScene(),t.getCamera());u.mesh.forEach((function(t,n){var o,a,s=u.hierarchy.getComponentByEntity(t),c=u.cullable.getComponentByEntity(t),f=n.geometry,l=u.transform.getComponentByEntity(t);if(f&&f.aabb&&l&&n.aabbDirty){var h=l.worldTransform,d=f.aabb,p=d.center,v=d.halfExtents,m=i.transformMat4(i.create(),p,h),y=(o=h,(a=r.create())[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a),g=i.transformMat3(i.create(),v,y);n.aabb.update(m,g),n.aabbDirty=!1}if(c&&f){var b=u.cullable.getComponentByEntity((null==s?void 0:s.parentID)||-1);c.visibilityPlaneMask=u.computeVisibilityWithPlaneMask(n.aabb,(null==b?void 0:b.visibilityPlaneMask)||Hs.INDETERMINATE,u.planes||e.getFrustum().planes),c.visible=c.visibilityPlaneMask!==Hs.OUTSIDE}}))},n.s();!(o=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Hs.OUTSIDE||e===Hs.INSIDE)return e;for(var r=Hs.INSIDE,o=0,a=n.length;o<a;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(e&u))){var s=n[o],c=s.normal,f=s.distance;if(i.dot(c,t.getNegativeFarPoint(n[o]))+f>0)return Hs.OUTSIDE;i.dot(c,t.getPositiveFarPoint(n[o]))+f>0&&(r|=u)}}return r}}]),t}(),rc=Ir()(nc.prototype,"mesh",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=Ir()(nc.prototype,"cullable",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=Ir()(nc.prototype,"geometry",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=Ir()(nc.prototype,"hierarchy",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=Ir()(nc.prototype,"transform",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=nc))||ec);function Lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bc,Fc,zc,Vc,Wc,Xc,Hc,qc,Yc,Kc,Zc,Qc,Jc,$c,tf,ef,nf,rf,of,af,uf,sf,cf=(dc=Object(Lr.injectable)(),pc=Object(Lr.inject)(Ur.MeshComponentManager),vc=Object(Lr.inject)(Ur.GeometryComponentManager),mc=Object(Lr.inject)(Ur.MaterialComponentManager),yc=Object(Lr.inject)(Ur.CullableComponentManager),gc=Object(Lr.inject)(Ur.TransformComponentManager),bc=Object(Lr.inject)(Ur.HierarchyComponentManager),_c=Object(Lr.inject)(Ur.Systems),xc=Object(Lr.named)(Ur.FrameGraphSystem),wc=Object(Lr.inject)(Ur.RenderEngine),Ec=Object(Lr.inject)(Ur.ResourcePool),dc((Gc=Pc=function(){function t(){var e=this;Er()(this,t),xr()(this,"mesh",Ac,this),xr()(this,"geometry",Ic,this),xr()(this,"material",kc,this),xr()(this,"cullable",Oc,this),xr()(this,"transform",Dc,this),xr()(this,"hierarchy",Rc,this),xr()(this,"frameGraphSystem",Mc,this),xr()(this,"engine",Cc,this),xr()(this,"resourcePool",Nc,this),this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Qu.RENDER_ATTACHMENT|Qu.SAMPLED|Qu.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(i.resource),u=Lc(o),t.prev=3,u.s();case 5:if((s=u.n()).done){t.next=11;break}return c=s.value,t.next=9,e.initView(c);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),u.e(t.t0);case 16:return t.prev=16,u.f(),t.finish(16);case 19:f=e.engine.getCanvas(),a.resize({width:f.width,height:f.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Lc(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return Tr()(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=o.multiply(o.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var a=t.getViewport(),u=a.x,s=a.y,c=a.width,f=a.height;this.engine.viewport({x:u,y:s,width:c,height:f});var l,h=Lc(e.getEntities());try{for(h.s();!(l=h.n()).done;){var d=l.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:r})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=this,r=e.camera,i=e.view,a=e.viewMatrix,u=this.mesh.getComponentByEntity(t);if(u.visible){this.hierarchy.forEach((function(e,o){o.parentID===t&&n.renderMesh(e,{camera:r,view:i,viewMatrix:a})}));var s=u.material,c=u.geometry;if(c&&!c.dirty&&s){var f=this.transform.getComponentByEntity(t),l=o.multiply(o.create(),a,f.worldTransform),h=i.getViewport(),d=h.width,p=h.height;s.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:l,modelMatrix:f.worldTransform,viewMatrix:a,cameraPosition:r.getPosition(),u_viewport:[d,p]}),u.model&&(u.model.draw({uniforms:s.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),s.uniforms.forEach((function(t){t.dirty=!1})),s.dirty=!1)}}}},{key:"initMesh",value:(n=Rr()(Or.a.mark((function t(e,n){var r,o,i,a,u,s,c,f=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:return o=r.material,i=r.geometry,t.next=7,this.hierarchy.forEachAsync(function(){var t=Rr()(Or.a.mark((function t(r,o){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.parentID!==e){t.next=4;break}return t.next=4,f.initMesh(r,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:if(i&&!i.dirty&&o){t.next=9;break}return t.abrupt("return");case 9:if(r.model){t.next=21;break}return o.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),a=this.engine,u=a.createModel,s=a.createAttribute,c={vs:o.vertexShaderGLSL,fs:o.fragmentShaderGLSL,attributes:i.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=s({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:o.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},o.cull&&(c.cull=o.cull),o.depth&&(c.depth=o.depth),o.blend&&(c.blend=o.blend),i.indicesBuffer&&(c.elements=i.indicesBuffer),i.maxInstancedCount&&(c.instances=i.maxInstancedCount,c.count=i.vertexCount||3),t.next=20,u(c);case 20:r.model=t.sent;case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=Lc(n.getEntities()),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,this.initMesh(i,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Pc.IDENTIFIER="Render Pass",Tc=Gc,Ac=Ir()(Tc.prototype,"mesh",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Ir()(Tc.prototype,"geometry",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ir()(Tc.prototype,"material",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=Ir()(Tc.prototype,"cullable",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Ir()(Tc.prototype,"transform",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ir()(Tc.prototype,"hierarchy",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mc=Ir()(Tc.prototype,"frameGraphSystem",[_c,xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=Ir()(Tc.prototype,"engine",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=Ir()(Tc.prototype,"resourcePool",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=Tc))||Sc),ff=(Bc=Object(Lr.injectable)(),Fc=Object(Lr.inject)(Ur.RenderEngine),zc=Object(Lr.inject)(Ur.ResourcePool),Bc((Yc=qc=function t(){var e=this;Er()(this,t),xr()(this,"engine",Xc,this),xr()(this,"resourcePool",Hc,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(cf.IDENTIFIER);if(r){var o=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,o)}}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r){var o,i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.engine,i=o.createModel,a=o.createAttribute,u=o.createBuffer,e.model){t.next=6;break}return t.next=4,i({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\\nlayout(location = 0) out vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}":"attribute vec2 a_Position;\\n\\nvarying vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\\n\\nlayout(location = 0) in vec2 v_UV;\\nlayout(location = 0) out vec4 outColor;\\n\\nvoid main() {\\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\\n}":"varying vec2 v_UV;\\n\\nuniform sampler2D u_Texture;\\n\\nvoid main() {\\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\\n}",attributes:{a_Position:a({buffer:u({data:[-4,-4,4,-4,0,4],type:Qu.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:s=t.sent,e.model=s;case 6:c=n.getResourceNode(r.data.input),f=e.resourcePool.getOrCreateResource(c.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:f}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},qc.IDENTIFIER="Copy Pass",Wc=Yc,Xc=Ir()(Wc.prototype,"engine",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Ir()(Wc.prototype,"resourcePool",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Wc))||Vc);function lf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var df,pf,vf,mf,yf,gf,bf,_f,xf,wf,Ef,Sf,Tf=1,Af=2,If=(Kc=Object(Lr.injectable)(),Zc=Object(Lr.inject)(Ur.RenderEngine),Qc=Object(Lr.inject)(Ur.ResourcePool),Jc=Object(Lr.inject)(Ur.RenderPassFactory),$c=Object(Lr.inject)(Ur.MeshComponentManager),Kc((sf=uf=function(){function t(){var e=this;Er()(this,t),xr()(this,"engine",nf,this),xr()(this,"resourcePool",rf,this),xr()(this,"renderPassFactory",of,this),xr()(this,"mesh",af,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=o,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:i=lf(o);try{for(u=function(){var t=a.value,o=t.getViewport(),i=o.width,u=o.height;e.alreadyInRendering=!0;var s=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:i,height:u}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(cf.IDENTIFIER),o=[],i=lf(t.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var a=n.value,u=e.mesh.getComponentByEntity(a);u.material.setUniform("u_PickingStage",Tf),o.push(u)}}catch(t){i.e(t)}finally{i.f()}r.renderView(t),o.forEach((function(t){t.material.setUniform("u_PickingStage",Af)})),e.alreadyInRendering=!1}))},i.s();!(a=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,o,i=t.x,a=t.y,u=e.engine,s=u.readPixels,c=u.useFramebuffer,f=n.getViewport(),l=f.width,h=f.height,d=i*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>l||d<0||p>h||p<0))return c(e.pickingFBO,(function(){var t,i;0===(r=s({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=r,i=jr()(t,3),o=i[0]+256*i[1]+65536*i[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),o}}return Tr()(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=lf(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.mesh.getComponentByEntity(o).material;i.setUniform("u_PickingStage",Af),i.setUniform("u_PickingColor",[t[0],t[1],t[2]]),i.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),uf.IDENTIFIER="PixelPicking Pass",ef=sf,nf=Ir()(ef.prototype,"engine",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Ir()(ef.prototype,"resourcePool",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ir()(ef.prototype,"renderPassFactory",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Ir()(ef.prototype,"mesh",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=ef))||tf),kf=(df=Object(Lr.injectable)(),pf=Object(Lr.inject)(Ur.Systems),vf=Object(Lr.named)(Ur.FrameGraphSystem),mf=Object(Lr.inject)(Ur.RenderPassFactory),yf=Object(Lr.inject)(Ur.ConfigService),gf=Object(Lr.inject)(Ur.ResourcePool),df((_f=function(){function t(){Er()(this,t),xr()(this,"frameGraphSystem",xf,this),xr()(this,"renderPassFactory",wf,this),xr()(this,"configService",Ef,this),xr()(this,"resourcePool",Sf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(cf.IDENTIFIER),r=n.setup,o=n.execute,this.frameGraphSystem.addPass(cf.IDENTIFIER,r,o),i=this.renderPassFactory(ff.IDENTIFIER),a=i.setup,u=i.execute,s=i.tearDown,c=this.frameGraphSystem.addPass(ff.IDENTIFIER,a,u,s),this.frameGraphSystem.present(c.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(If.IDENTIFIER).pick(t,e)}}]),t}(),xf=Ir()(_f.prototype,"frameGraphSystem",[pf,vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Ir()(_f.prototype,"renderPassFactory",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ef=Ir()(_f.prototype,"configService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sf=Ir()(_f.prototype,"resourcePool",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=_f))||bf);function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Df,Rf,Mf,Cf,Nf,Pf,Gf,jf,Lf,Uf=function(t){Wr()(n,t);var e=Of(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(co()(r),t),r}return n}(Nr),Bf=(Df=Object(Lr.injectable)(),Rf=Object(Lr.inject)(Ur.HierarchyComponentManager),Mf=Object(Lr.inject)(Ur.TransformComponentManager),Cf=Object(Lr.inject)(Ur.MeshComponentManager),Df((Pf=function(){function t(){Er()(this,t),xr()(this,"hierarchy",Gf,this),xr()(this,"transform",jf,this),xr()(this,"mesh",Lf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){n.isDirty()&&(t.setMeshAABBDirty(e),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),o=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==o&&r.updateTransformWithParent(o)}))}},{key:"attach",value:function(t,e,n){if(this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e}),this.setMeshAABBDirty(e),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var i=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===i){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e));var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t),u=this.transform.getComponentByEntity(e)),!n&&u&&(s.matrixTransform(o.invert(o.create(),u.worldTransform)),s.updateTransform()),u&&s.updateTransformWithParent(u)}},{key:"detach",value:function(t){if(null!==this.hierarchy.getComponentByEntity(t)){var e=this.transform.getComponentByEntity(t);null!==e&&e.applyTransform(),this.hierarchy.removeKeepSorted(t),this.setMeshAABBDirty(t)}}},{key:"detachChildren",value:function(t){for(var e=0;e<this.hierarchy.getCount();){var n;if((null===(n=this.hierarchy.getComponent(e))||void 0===n?void 0:n.parentID)===t){var r=this.hierarchy.getEntity(e);this.detach(r)}else++e}}},{key:"setMeshAABBDirty",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.aabbDirty=!0)}}]),t}(),Gf=Ir()(Pf.prototype,"hierarchy",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=Ir()(Pf.prototype,"transform",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=Ir()(Pf.prototype,"mesh",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Pf))||Nf);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var zf=function(t){Wr()(n,t);var e=Ff(n);function n(t){var r,a,s,c,f,l,h,d,p,v,m,y,g,b,_;return Er()(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localTranslation=i.fromValues(0,0,0),r.localRotation=u.fromValues(0,0,0,1),r.localScale=i.fromValues(1,1,1),r.localTransform=o.create(),r.worldTransform=o.create(),r.getRotation=(a=u.create(),function(){return o.getRotation(a,r.worldTransform),a}),r.getScale=(s=i.create(),function(){return o.getScaling(s,r.worldTransform),s}),r.getPosition=(c=i.create(),function(){return o.getTranslation(c,r.worldTransform),c}),r.getLocalMatrix=(f=o.create(),function(){return o.fromRotationTranslationScale(f,r.localRotation,r.localTranslation,r.localScale),f}),r.matrixTransform=(l=o.create(),function(t){o.multiply(l,r.getLocalMatrix(),t),o.getScaling(r.localScale,l),o.getTranslation(r.localTranslation,l),o.getRotation(r.localRotation,l)}),r.rotateRollPitchYaw=(h=u.create(),d=u.create(),p=u.create(),function(t,e,n){r.setDirty(),u.fromEuler(h,t,0,0),u.fromEuler(d,0,e,0),u.fromEuler(p,0,0,n),u.multiply(r.localRotation,h,r.localRotation),u.multiply(r.localRotation,r.localRotation,d),u.multiply(r.localRotation,p,r.localRotation),u.normalize(r.localRotation,r.localRotation)}),r.lerp=(v=i.create(),m=u.create(),y=i.create(),g=i.create(),b=u.create(),_=i.create(),function(t,e,n){r.setDirty(),o.getScaling(v,t.worldTransform),o.getTranslation(y,t.worldTransform),o.getRotation(m,t.worldTransform),o.getScaling(g,e.worldTransform),o.getTranslation(_,e.worldTransform),o.getRotation(b,e.worldTransform),i.lerp(r.localScale,v,g,n),u.slerp(r.localRotation,m,b,n),i.lerp(r.localTranslation,y,_,n)}),r}return Tr()(n,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),o.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(t){o.multiply(this.worldTransform,this.getLocalMatrix(),t.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),o.getScaling(this.localScale,this.worldTransform),o.getTranslation(this.localTranslation,this.worldTransform),o.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=i.fromValues(0,0,0),this.localRotation=u.fromValues(0,0,0,1),this.localScale=i.fromValues(1,1,1)}},{key:"translate",value:function(t){return this.setDirty(),i.add(this.localTranslation,this.localTranslation,t),this}},{key:"scale",value:function(t){return this.setDirty(),i.multiply(this.localScale,this.localScale,t),this}},{key:"rotate",value:function(t){return this.setDirty(),u.multiply(this.localRotation,this.localRotation,t),u.normalize(this.localRotation,this.localRotation),this}}]),n}(Nr);zf.DIRTY=1;n(93),n(94),n(171),n(95),n(96),n(73),n(97),n(27),n(98),n(172);var Vf,Wf,Xf,Hf,qf,Yf=n(103),Kf=n(187),Zf=n.n(Kf),Qf=(Vf=Object(Lr.injectable)(),Wf=Object(Lr.inject)(Ur.RenderEngine),Vf((Hf=function(){function t(){Er()(this,t),xr()(this,"engine",qf,this),this.resourcePool={}}return Tr()(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,o=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:Qu.CLAMP_TO_EDGE,wrapT:Qu.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),qf=Ir()(Hf.prototype,"engine",[Wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf=Hf))||Xf);function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var $f,tl,el=function(t){Wr()(n,t);var e=Jf(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(Nr),nl=Object(Lr.injectable)()($f=function(){function t(){Er()(this,t),this.config=void 0}return Tr()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||$f,rl=Object(Lr.injectable)()(tl=function(){function t(){Er()(this,t)}return Tr()(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||tl,ol=n(188),il=n.n(ol);var al,ul=/uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;function sl(t){var e={};return{content:t=t.replace(ul,(function(t,n,r){var o=r.split(":"),i=o[0].trim(),a="";switch(o.length>1&&(a=o[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=a,"uniform ".concat(n," ").concat(i,";\\n")})),uniforms:e}}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ll=/precision\\s+(high|low|medium)p\\s+float/,hl=/#pragma include (["^+"]?["\\ "[a-zA-Z_0-9](.*)"]*?)/g,dl=Object(Lr.injectable)()(al=function(){function t(){Er()(this,t),this.moduleCache={},this.rawContentCache={}}return Tr()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\\nvarying vec4 v_PickingResult;\\n\\nuniform vec3 u_PickingColor : [0, 0, 0];\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\nuniform float u_PickingThreshold : 1.0;\\nuniform float u_PickingBuffer: 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\\n}\\n\\nvoid setPickingColor(vec3 pickingColor) {\\n  // compares only in highlight stage\\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\\n\\n  // Stores the picking color so that the fragment shader can render it during picking\\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\\n}\\n\\nfloat setPickingSize(float x) {\\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\\n}",fs:"varying vec4 v_PickingResult;\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\n/*\\n * Returns highlight color if this item is selected.\\n */\\nvec4 filterHighlightColor(vec4 color) {\\n  bool selected = bool(v_PickingResult.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\\n\\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(resultRGB, color.a);\\n  } else {\\n    return color;\\n  }\\n}\\n\\n/*\\n * Returns picking color if picking enabled else unmodified argument.\\n */\\nvec4 filterPickingColor(vec4 color) {\\n  vec3 pickingColor = v_PickingResult.rgb;\\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\\n}\\n\\n/*\\n * Returns picking color if picking is enabled if not\\n * highlight color if this item is selected, otherwise unmodified argument.\\n */\\nvec4 filterColor(vec4 color) {\\n  return filterPickingColor(filterHighlightColor(color));\\n}\\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\\n * 2D signed distance field functions\\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\\n */\\n\\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\\n\\nfloat sdCircle(vec2 p, float r) {\\n  return length(p) - r;\\n}\\n\\nfloat sdEquilateralTriangle(vec2 p) {\\n  float k = sqrt(3.0);\\n  p.x = abs(p.x) - 1.0;\\n  p.y = p.y + 1.0/k;\\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\\n  p.x -= clamp( p.x, -2.0, 0.0 );\\n  return -length(p)*sign(p.y);\\n}\\n\\nfloat sdBox(vec2 p, vec2 b) {\\n  vec2 d = abs(p)-b;\\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\\n}\\n\\nfloat sdPentagon(vec2 p, float r) {\\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\\n  p.x = abs(p.x);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagon(vec2 p, float r) {\\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdOctogon(vec2 p, float r) {\\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\\n  p = abs(p);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagram(vec2 p, float r) {\\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdRhombus(vec2 p, vec2 b) {\\n  vec2 q = abs(p);\\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\\n}\\n\\nfloat sdVesica(vec2 p, float r, float d) {\\n  p = abs(p);\\n  float b = sqrt(r*r-d*d); // can delay this sqrt\\n  return ((p.y-b)*d>p.x*b)\\n          ? length(p-vec2(0.0,b))\\n          : length(p-vec2(-d,0.0))-r;\\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,o=e.uniforms,i=sl(n),a=i.content,u=i.uniforms,s=sl(r),c=s.content,f=s.uniforms;this.rawContentCache[t]={fs:c,uniforms:fl(fl(fl({},u),f),o),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),i=o.content,a=o.includeList,u=this.processModule(r,[],"fs"),s=u.content,c=u.includeList,f=s,l=il()(a.concat(c).concat(t)).reduce((function(t,n){return fl(fl({},t),e.rawContentCache[n].uniforms)}),{});return ll.test(s)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\\n precision highp float;\\n #else\\n precision mediump float;\\n#endif\\n"+s),this.moduleCache[t]={fs:f.trim(),uniforms:l,vs:i.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(hl,(function(t,o){var i=o.split(" ")[0].replace(/"/g,"");if(e.indexOf(i)>-1)return"";var a=r.rawContentCache[i][n];return e.push(i),r.processModule(a,e,n).content})),includeList:e}}}]),t}())||al,pl=new Lr.Container;Object(Lr.decorate)(Object(Lr.injectable)(),Yf.EventEmitter),pl.bind(Ur.IEventEmitter).to(Yf.EventEmitter);Zf()(pl,!1);function vl(){var t=new Lr.Container;return t.parent=pl,t.bind(Ur.Systems).to(Bf).inSingletonScope().whenTargetNamed(Ur.SceneGraphSystem),t.bind(Ur.Systems).to(io).inSingletonScope().whenTargetNamed(Ur.FrameGraphSystem),t.bind(Ur.Systems).to(jc).inSingletonScope().whenTargetNamed(Ur.MeshSystem),t.bind(Ur.Systems).to(Is).inSingletonScope().whenTargetNamed(Ur.GeometrySystem),t.bind(Ur.Systems).to(zs).inSingletonScope().whenTargetNamed(Ur.MaterialSystem),t.bind(Ur.Systems).to(kf).inSingletonScope().whenTargetNamed(Ur.RendererSystem),t.bind(Ur.ResourcePool).to(Qf).inSingletonScope(),t.bind(Ur.ConfigService).to(nl).inSingletonScope(),t.bind(Ur.InteractorService).to(rl).inSingletonScope(),t.bind(Ur.RenderPass).to(cf).inSingletonScope().whenTargetNamed(cf.IDENTIFIER),t.bind(Ur.RenderPass).to(ff).inSingletonScope().whenTargetNamed(ff.IDENTIFIER),t.bind(Ur.RenderPass).to(If).inSingletonScope().whenTargetNamed(If.IDENTIFIER),t.bind(Ur.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(Ur.RenderPass,e)}})),t}pl.bind(Ur.ShaderModuleService).to(dl).inSingletonScope(),pl.bind(Ur.NameComponentManager).toConstantValue(new Pr(el)),pl.bind(Ur.HierarchyComponentManager).toConstantValue(new Pr(Uf)),pl.bind(Ur.TransformComponentManager).toConstantValue(new Pr(zf)),pl.bind(Ur.MeshComponentManager).toConstantValue(new Pr(qs)),pl.bind(Ur.CullableComponentManager).toConstantValue(new Pr(Ws)),pl.bind(Ur.GeometryComponentManager).toConstantValue(new Pr(po)),pl.bind(Ur.MaterialComponentManager).toConstantValue(new Pr(Ls));var ml;n(173),n(99);!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(ml||(ml={}));n(174);var yl,gl,bl,_l,xl="undefined"!=typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(yl||(yl={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(gl||(gl={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(bl||(bl={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(_l||(_l={}));function wl(t){return void 0===t?0:t>360||t<-360?t%360:t}function El(t,e,n){return fc()(t)?i.fromValues(t,e,n):3===t.length?i.clone(t):i.fromValues(t[0],t[1],t[2])}var Sl,Tl,Al,Il,kl,Ol,Dl,Rl,Ml=function(){function t(e,n){Er()(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=o.clone(n.matrix),this.right=i.clone(n.right),this.up=i.clone(n.up),this.forward=i.clone(n.forward),this.position=i.clone(n.position),this.focalPoint=i.clone(n.focalPoint),this.distanceVector=i.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Tr()(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=o.copy(t.matrix,this.matrix),t.right=i.copy(t.right,this.right),t.up=i.copy(t.up,this.up),t.forward=i.copy(t.forward,this.forward),t.position=i.copy(t.position,this.position),t.focalPoint=i.copy(t.focalPoint,this.focalPoint),t.distanceVector=i.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ol||(Ol={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Dl||(Dl={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Rl||(Rl={}));var Cl,Nl,Pl,Gl,jl,Ll,Ul,Bl=Math.PI/180,Fl=180/Math.PI,zl=(Sl=Object(Lr.injectable)(),Tl=Object(Lr.inject)(Ur.InteractorService),Sl((Il=function(){function t(){Er()(this,t),this.matrix=o.create(),this.right=i.fromValues(1,0,0),this.up=i.fromValues(0,1,0),this.forward=i.fromValues(0,0,1),this.position=i.fromValues(0,0,1),this.focalPoint=i.fromValues(0,0,0),this.distanceVector=i.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,xr()(this,"interactor",kl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=o.create(),this.view=void 0,this.following=void 0,this.type=Ol.EXPLORING,this.trackingMode=Dl.DEFAULT,this.projectionMode=Rl.PERSPECTIVE,this.frustum=new sc,this.landmarks=[],this.landmarkAnimationID=void 0}return Tr()(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ol.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return o.invert(o.create(),this.matrix)}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,o,i){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=i,this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Rl.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,o.perspective(this.perspective,this.fov*Bl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){this.projectionMode=Rl.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,l=c-u,h=c+u,d=f+s,p=f-s;if(void 0!==this.view&&this.view.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(l+=v*this.view.offsetX)+v*this.view.width,p=(d-=m*this.view.offsetY)-m*this.view.height}return o.ortho(this.perspective,l,h,d,p,i,a),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r=i.fromValues(0,1,0);if(this.focalPoint=El(t,e,n),this.trackingMode===Dl.CINEMATIC){var a=i.subtract(i.create(),this.focalPoint,this.position);t=a[0],e=a[1],n=a[2];var u=i.length(a),s=Math.asin(e/u)*Fl,c=90+Math.atan2(n,t)*Fl,f=o.create();o.rotateY(f,f,c*Bl),o.rotateX(f,f,s*Bl),r=i.transformMat4(i.create(),[0,1,0],f)}return o.invert(this.matrix,o.lookAt(o.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=i.create();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ol.EXPLORING){t=wl(t),e=wl(e),n=wl(n);var r=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Bl),i=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Bl),a=u.setAxisAngle(u.create(),[0,0,1],n*Bl),s=u.multiply(u.create(),i,r);s=u.multiply(u.create(),s,a);var c=o.fromQuat(o.create(),s);o.translate(this.matrix,this.matrix,[0,0,-this.distance]),o.multiply(this.matrix,this.matrix,c),o.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=wl(e),this.relAzimuth=wl(t),this.relRoll=wl(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=El(t,e,0),r=i.clone(this.position);return i.add(r,r,i.scale(i.create(),this.right,n[0])),i.add(r,r,i.scale(i.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=i.clone(this.position),r=t*this.dollyingStep;return n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getDistance():this.type===Ol.TRACKING&&i.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new Ml(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new Ml(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o,a=r.getPosition(),u=r.getFocalPoint(),s=r.getRoll(),c=function t(r){void 0===o&&(o=r);var c,f=r-o,l=(1-Math.cos(f/n*Math.PI))/2,h=i.create(),d=i.create();if(i.lerp(h,e.focalPoint,u,l),i.lerp(d,e.position,a,l),c=e.roll*(1-l)+s*l,e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),!(i.dist(h,u)+i.dist(d,a)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),void e.interactor.connect();f<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=u.setAxisAngle(u.create(),[0,0,1],this.roll*Bl);o.identity(this.matrix),t=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.elevation*Bl),e=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.azimuth*Bl);var r=u.multiply(u.create(),e,t);r=u.multiply(u.create(),r,n);var i=o.fromQuat(o.create(),r);this.type===Ol.ORBITING||this.type===Ol.EXPLORING?(o.translate(this.matrix,this.matrix,this.focalPoint),o.multiply(this.matrix,this.matrix,i),o.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ol.TRACKING&&(o.translate(this.matrix,this.matrix,this.position),o.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=El(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){i.copy(this.right,El(a.transformMat4(a.create(),[1,0,0,0],this.matrix))),i.copy(this.up,El(a.transformMat4(a.create(),[0,1,0,0],this.matrix))),i.copy(this.forward,El(a.transformMat4(a.create(),[0,0,1,0],this.matrix))),i.normalize(this.right,this.right),i.normalize(this.up,this.up),i.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=i.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ol.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fl,this.azimuth=Math.atan2(-t,-n)*Fl):(this.elevation=-Math.asin(e/r)*Fl,this.azimuth=-Math.atan2(-t,-n)*Fl)}},{key:"_getPosition",value:function(){i.copy(this.position,El(a.transformMat4(a.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){i.transformMat3(this.distanceVector,[0,0,-this.distance],r.fromMat4(r.create(),this.matrix)),i.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=i.subtract(i.create(),this.focalPoint,this.position),this.distance=i.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),kl=Ir()(Il.prototype,"interactor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Il))||Al),Vl=n(22),Wl=n.n(Vl),Xl=n(13),Hl=n.n(Xl),ql=n(3);function Yl(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ql,Jl,$l,th,eh,nh,rh,oh,ih,ah,uh,sh,ch,fh,lh,hh,dh,ph,vh,mh,yh,gh,bh,_h,xh,wh,Eh,Sh,Th=(Cl=Object(Lr.injectable)(),Nl=Object(Lr.inject)(Ur.RenderEngine),Pl=Object(Lr.inject)(Ur.ConfigService),Cl((jl=function(){function t(){Er()(this,t),xr()(this,"engine",Ll,this),xr()(this,"configService",Ul,this),this.entity=Cr(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return Tr()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Zl({canvas:e||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=fc()(e)||Wl()(e)||Hl()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===bl.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=Rr()(Or.a.mark((function t(){var e,n,r=this,o=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=Rr()(Or.a.mark((function t(){var e,n,r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Zl({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?_l.WGSL:_l.GLSL450:_l.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===bl.StorageBuffer){var n=1;t.type===yl.FloatArray?n=1:t.type===yl.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Ll=Ir()(jl.prototype,"engine",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=Ir()(jl.prototype,"configService",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=jl))||Gl),Ah=(Ql=Object(Lr.injectable)(),Jl=Object(Lr.inject)(Ur.MeshComponentManager),$l=Object(Lr.inject)(Ur.CullableComponentManager),th=Object(Lr.inject)(Ur.TransformComponentManager),eh=Object(Lr.inject)(Ur.Systems),nh=Object(Lr.named)(Ur.SceneGraphSystem),Ql((fh=ch=function(){function t(){Er()(this,t),this.attributes={},this.config=void 0,xr()(this,"mesh",ih,this),xr()(this,"cullable",ah,this),xr()(this,"transform",uh,this),xr()(this,"sceneGraphSystem",sh,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Tr()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){return this.meshComponent.visible=t,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ch.POINT="point",ch.LINE="line",ch.GRID="grid",oh=fh,ih=Ir()(oh.prototype,"mesh",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=Ir()(oh.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=Ir()(oh.prototype,"transform",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Ir()(oh.prototype,"sceneGraphSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=oh))||rh),Ih=n(189),kh=n.n(Ih),Oh=function(){function t(e,n){Er()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,u=n.size,s=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:s||0},u&&(this.attribute.size=u)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Dh=(lh={},uo()(lh,Qu.POINTS,"points"),uo()(lh,Qu.LINES,"lines"),uo()(lh,Qu.LINE_LOOP,"line loop"),uo()(lh,Qu.LINE_STRIP,"line strip"),uo()(lh,Qu.TRIANGLES,"triangles"),uo()(lh,Qu.TRIANGLE_FAN,"triangle fan"),uo()(lh,Qu.TRIANGLE_STRIP,"triangle strip"),lh),Rh=(hh={},uo()(hh,Qu.STATIC_DRAW,"static"),uo()(hh,Qu.DYNAMIC_DRAW,"dynamic"),uo()(hh,Qu.STREAM_DRAW,"stream"),hh),Mh=(dh={},uo()(dh,Qu.BYTE,"int8"),uo()(dh,Qu.UNSIGNED_INT,"int16"),uo()(dh,Qu.INT,"int32"),uo()(dh,Qu.UNSIGNED_BYTE,"uint8"),uo()(dh,Qu.UNSIGNED_SHORT,"uint16"),uo()(dh,Qu.UNSIGNED_INT,"uint32"),uo()(dh,Qu.FLOAT,"float"),dh),Ch=(ph={},uo()(ph,Qu.ALPHA,"alpha"),uo()(ph,Qu.LUMINANCE,"luminance"),uo()(ph,Qu.LUMINANCE_ALPHA,"luminance alpha"),uo()(ph,Qu.RGB,"rgb"),uo()(ph,Qu.RGBA,"rgba"),uo()(ph,Qu.RGBA4,"rgba4"),uo()(ph,Qu.RGB5_A1,"rgb5 a1"),uo()(ph,Qu.RGB565,"rgb565"),uo()(ph,Qu.DEPTH_COMPONENT,"depth"),uo()(ph,Qu.DEPTH_STENCIL,"depth stencil"),ph),Nh=(vh={},uo()(vh,Qu.DONT_CARE,"dont care"),uo()(vh,Qu.NICEST,"nice"),uo()(vh,Qu.FASTEST,"fast"),vh),Ph=(mh={},uo()(mh,Qu.NEAREST,"nearest"),uo()(mh,Qu.LINEAR,"linear"),uo()(mh,Qu.LINEAR_MIPMAP_LINEAR,"mipmap"),uo()(mh,Qu.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),uo()(mh,Qu.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),uo()(mh,Qu.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),Gh=(yh={},uo()(yh,Qu.REPEAT,"repeat"),uo()(yh,Qu.CLAMP_TO_EDGE,"clamp"),uo()(yh,Qu.MIRRORED_REPEAT,"mirror"),yh),jh=(gh={},uo()(gh,Qu.NONE,"none"),uo()(gh,Qu.BROWSER_DEFAULT_WEBGL,"browser"),gh),Lh=(bh={},uo()(bh,Qu.NEVER,"never"),uo()(bh,Qu.ALWAYS,"always"),uo()(bh,Qu.LESS,"less"),uo()(bh,Qu.LEQUAL,"lequal"),uo()(bh,Qu.GREATER,"greater"),uo()(bh,Qu.GEQUAL,"gequal"),uo()(bh,Qu.EQUAL,"equal"),uo()(bh,Qu.NOTEQUAL,"notequal"),bh),Uh=(_h={},uo()(_h,Qu.FUNC_ADD,"add"),uo()(_h,Qu.MIN_EXT,"min"),uo()(_h,Qu.MAX_EXT,"max"),uo()(_h,Qu.FUNC_SUBTRACT,"subtract"),uo()(_h,Qu.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_h),Bh=(xh={},uo()(xh,Qu.ZERO,"zero"),uo()(xh,Qu.ONE,"one"),uo()(xh,Qu.SRC_COLOR,"src color"),uo()(xh,Qu.ONE_MINUS_SRC_COLOR,"one minus src color"),uo()(xh,Qu.SRC_ALPHA,"src alpha"),uo()(xh,Qu.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),uo()(xh,Qu.DST_COLOR,"dst color"),uo()(xh,Qu.ONE_MINUS_DST_COLOR,"one minus dst color"),uo()(xh,Qu.DST_ALPHA,"dst alpha"),uo()(xh,Qu.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),uo()(xh,Qu.CONSTANT_COLOR,"constant color"),uo()(xh,Qu.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),uo()(xh,Qu.CONSTANT_ALPHA,"constant alpha"),uo()(xh,Qu.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),uo()(xh,Qu.SRC_ALPHA_SATURATE,"src alpha saturate"),xh),Fh=(wh={},uo()(wh,Qu.NEVER,"never"),uo()(wh,Qu.ALWAYS,"always"),uo()(wh,Qu.LESS,"less"),uo()(wh,Qu.LEQUAL,"lequal"),uo()(wh,Qu.GREATER,"greater"),uo()(wh,Qu.GEQUAL,"gequal"),uo()(wh,Qu.EQUAL,"equal"),uo()(wh,Qu.NOTEQUAL,"notequal"),wh),zh=(Eh={},uo()(Eh,Qu.ZERO,"zero"),uo()(Eh,Qu.KEEP,"keep"),uo()(Eh,Qu.REPLACE,"replace"),uo()(Eh,Qu.INVERT,"invert"),uo()(Eh,Qu.INCR,"increment"),uo()(Eh,Qu.DECR,"decrement"),uo()(Eh,Qu.INCR_WRAP,"increment wrap"),uo()(Eh,Qu.DECR_WRAP,"decrement wrap"),Eh),Vh=(Sh={},uo()(Sh,Qu.FRONT,"front"),uo()(Sh,Qu.BACK,"back"),Sh),Wh=function(){function t(e,n){Er()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=e.buffer({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE]})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Xh=n(10),Hh=n.n(Xh);function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kh=0,Zh=function(){function t(e,n){var r=this;Er()(this,t),this.reGl=e,this.context=n,this.entity=Cr(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,i=t.data,a=t.isReferer,u=t.storageClass;if(u===bl.StorageBuffer){if(a)r.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,i);var s=r.textureCache[e],c=s.textureWidth,f=s.isOutput;o["".concat(e,"Size")]=[c,c],f&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,i)))}o[e]=function(){return r.textureCache[e].texture}}else if(u===bl.Uniform){if(i&&(Array.isArray(i)||Wl()(i))&&i.length>16)throw new Error("invalid data type ".concat(n));o[e]=function(){return t.data}}}));var i=this.getOuputDataTexture(),a=i.textureWidth,u=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=u,this.context.output.textureSize=[a,a];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\\nattribute vec2 a_TexCoord;\\n\\nvarying vec2 v_TexCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 1.0);\\n  v_TexCoord = a_TexCoord;\\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}var e;return Tr()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,o=n.elementsPerTexel,i=n.typedArrayConstructor,a=void 0===i?Float32Array:i,u=[],4!==o)for(s=0;s<e.length;s+=4)1===o?u.push(e[s]):2===o?u.push(e[s],e[s+1]):u.push(e[s],e[s+1],e[s+2]);else u=e;return t.abrupt("return",new a(u.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),o=r.texture,i=r.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Yh(Yh({},t),{},{id:Kh++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===yl.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var a=n.length,u=Math.ceil(a/r),s=Math.ceil(Math.sqrt(u)),c=s*s;u<c&&o.push.apply(o,Hh()(new Array(4*(c-u)).fill(0)));var f=this.reGl.texture({width:s,height:s,data:o,type:"float"});return{id:Kh++,data:o,originalDataLength:a,typedArrayConstructor:Wl()(n)?n.constructor:void 0,textureWidth:s,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Qh=function(){function t(e,n){Er()(this,t),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=e.elements({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE],count:a})}return Tr()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Jh=function(){function t(e,n){Er()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(a)&&(u.colors=a.map((function(t){return t.get()}))),i&&"boolean"!=typeof i&&(u.color=i.get()),this.framebuffer=e.framebuffer(u)}return Tr()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),$h=n(51),td=n.n($h),ed=n(101),nd=n.n(ed);function rd(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,o){if(null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Wl()(n)||""===n||"resize"in n)return void(r["".concat(o&&o+".").concat(e)]=n);nd()(n)&&Object.keys(n).forEach((function(i){t(i,n[i],r,"".concat(o&&o+".").concat(e))}));Array.isArray(n)&&n.forEach((function(n,i){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))}))}))}(n,t[n],e,"")})),e}function od(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?od(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ad,ud,sd=function(){function t(e,n){Er()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,i=n.attributes,a=n.uniforms,u=n.primitive,s=n.count,c=n.elements,f=n.depth,l=n.blend,h=n.stencil,d=n.cull,p=n.instances,v=n.scissor,m=n.viewport,y={};a&&(this.uniforms=rd(a),Object.keys(a).forEach((function(t){y[t]=e.prop(t)})));var g={};Object.keys(i).forEach((function(t){g[t]=i[t].get()}));var b={attributes:g,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(o),uniforms:y,vert:r,primitive:Dh[void 0===u?Qu.TRIANGLES:u]};p&&(b.instances=p),s&&(b.count=s),c&&(b.elements=c.get()),v&&(b.scissor=v),m&&(b.viewport=m),this.initDepthDrawParams({depth:f},b),this.initBlendDrawParams({blend:l},b),this.initStencilDrawParams({stencil:h},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return Tr()(t,[{key:"addUniforms",value:function(t){this.uniforms=id(id({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=id(id({},this.uniforms),rd(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=td()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Lh[n.func||Qu.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,i=n.equation,a=n.color,u=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:Bh[o&&o.srcRGB||Qu.SRC_ALPHA],srcAlpha:Bh[o&&o.srcAlpha||Qu.SRC_ALPHA],dstRGB:Bh[o&&o.dstRGB||Qu.ONE_MINUS_SRC_ALPHA],dstAlpha:Bh[o&&o.dstAlpha||Qu.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Uh[i&&i.rgb||Qu.FUNC_ADD],alpha:Uh[i&&i.alpha||Qu.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,i=void 0===o?-1:o,a=n.func,u=void 0===a?{cmp:Qu.ALWAYS,ref:0,mask:-1}:a,s=n.opFront,c=void 0===s?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:s,f=n.opBack,l=void 0===f?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:f;e.stencil={enable:!!r,mask:i,func:id(id({},u),{},{cmp:Fh[u.cmp]}),opFront:{fail:zh[c.fail],zfail:zh[c.zfail],zpass:zh[c.zpass]},opBack:{fail:zh[l.fail],zfail:zh[l.zfail],zpass:zh[l.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,i=void 0===o?Qu.BACK:o;e.cull={enable:!!r,face:Vh[i]}}}}]),t}(),cd=function(){function t(e,n){Er()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=void 0===o?Qu.UNSIGNED_BYTE:o,a=n.width,u=n.height,s=n.flipY,c=void 0!==s&&s,f=n.format,l=void 0===f?Qu.RGBA:f,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,v=void 0===p?Qu.CLAMP_TO_EDGE:p,m=n.wrapT,y=void 0===m?Qu.CLAMP_TO_EDGE:m,g=n.aniso,b=void 0===g?0:g,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,T=void 0===S?Qu.NEAREST:S,A=n.min,I=void 0===A?Qu.NEAREST:A,k=n.colorSpace,O=void 0===k?Qu.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=u;var D={width:a,height:u,type:Mh[i],format:Ch[l],wrapS:Gh[v],wrapT:Gh[y],mag:Ph[T],min:Ph[I],alignment:x,flipY:c,colorSpace:jh[O],premultiplyAlpha:E,aniso:b};r&&(D.data=r),"number"==typeof d?D.mipmap=Nh[d]:"boolean"==typeof d&&(D.mipmap=d),this.texture=e.texture(D)}return Tr()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),fd=Object(Lr.injectable)()(ad=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new sd(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Oh(e.gl,t)},this.createBuffer=function(t){return new Wh(e.gl,t)},this.createElements=function(t){return new Qh(e.gl,t)},this.createTexture2D=function(t){return new cd(e.gl,t)},this.createFramebuffer=function(t){return new Jh(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Zh(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,u={color:n,depth:r,stencil:o};u.framebuffer=null===a?a:a.get(),e.gl.clear(u)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qu.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qu.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,o,i),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return Tr()(t,[{key:"init",value:(e=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){kh()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||ad;function ld(t,e,n,r){if("undefined"!=typeof window){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),r&&(i.id=r),i.onload=function(){e&&e()},i.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},o.appendChild(i)}}function hd(t,e){return new Promise((function(e,n){ld(t,(function(){e()}),(function(t,e){n(e)}))}))}var dd=function(){return pd.apply(this,arguments)};function pd(){return(pd=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ud){t.next=2;break}return t.abrupt("return",ud);case 2:return t.next=4,hd("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ud=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",ud);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var vd,md,yd,gd,bd,_d,xd,wd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,o=r.buffer,i=r.offset,a=r.stride,u=r.normalized,s=r.size,c=r.divisor,f=r.arrayStride,l=r.attributes,h=r.stepMode;this.buffer=o,this.attribute={buffer:o.get(),offset:i||0,stride:a||0,normalized:u||!1,divisor:c||0,arrayStride:f||0,attributes:l,stepMode:h||"vertex"},s&&(this.attribute.size=s)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ed=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,o=r.data,i=r.usage;r.type;this.buffer=this.createBuffer(o instanceof Array?new Float32Array(o):o,i||ql.BufferUsage.Vertex|ql.BufferUsage.CopyDst)}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},o=this.engine.device.createBuffer(r);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,e,n){(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Sd=n(52),Td=n.n(Sd),Ad=function(){function t(e,n){Er()(this,t),this.engine=e,this.context=n,this.entity=Cr(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return Tr()(t,[{key:"init",value:(r=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===bl.StorageBuffer})),o=this.context.uniforms.filter((function(t){return t.storageClass===bl.Uniform})),i=o.length?1:0,this.bindGroupEntries=[],i&&(a=0,u=[],o.forEach((function(t){if(fc()(t.data))s.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,u.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var o=4-r;if(n>1&&n<=o)2===n&&(3===o&&(a+=4,u.push(0)),u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var i=0;i<o;i++)a+=4,u.push(0);u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Ed(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;Td()(t.data)||t.type!==yl.Vector4FloatArray&&t.type!==yl.FloatArray||(t.name===s.context.output.name?(e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(o=e.gpuBuffer)){t.next=16;break}return i=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=this.engine.device.createCommandEncoder()).copyBufferToBuffer(o,0,a,0,i),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([u.finish()]),t.next=12,a.mapAsync(ql.MapMode.Read);case 12:return s=a.getMappedRange(),c=new r(s.slice(0)),a.unmap(),t.abrupt("return",c);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Hh()(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var o=this.engine.device.createCommandEncoder(),i=t.context.output,a=i.length*i.typedArrayConstructor.BYTES_PER_ELEMENT;o.copyBufferToBuffer(r.get(),0,n.get(),0,a),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e){var n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:xl}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Id=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,o=r.data,i=(r.usage,r.type,r.count);this.indexCount=i||0,this.buffer=new Ed(e,{data:o instanceof Array?new Uint16Array(o):o,usage:ql.BufferUsage.Index|ql.BufferUsage.CopyDst})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,o=(r.width,r.height,r.color),i=(r.colors,r.depth);r.stencil;o&&(this.colorTexture=o),i&&(this.depthTexture=i)}return Tr()(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,o=t.height;r===this.width&&o===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:o}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:o}));this.width=r,this.height=o}}]),t}(),Od=(vd={},uo()(vd,Qu.POINTS,ql.PrimitiveTopology.PointList),uo()(vd,Qu.LINES,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_LOOP,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_STRIP,ql.PrimitiveTopology.LineStrip),uo()(vd,Qu.TRIANGLES,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_FAN,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_STRIP,ql.PrimitiveTopology.TriangleStrip),vd),Dd=(md={},uo()(md,Qu.NEVER,ql.CompareFunction.Never),uo()(md,Qu.ALWAYS,ql.CompareFunction.Always),uo()(md,Qu.LESS,ql.CompareFunction.Less),uo()(md,Qu.LEQUAL,ql.CompareFunction.LessEqual),uo()(md,Qu.GREATER,ql.CompareFunction.Greater),uo()(md,Qu.GEQUAL,ql.CompareFunction.GreaterEqual),uo()(md,Qu.EQUAL,ql.CompareFunction.Equal),uo()(md,Qu.NOTEQUAL,ql.CompareFunction.NotEqual),md),Rd=(yd={},uo()(yd,Qu.FUNC_ADD,ql.BlendOperation.Add),uo()(yd,Qu.MIN_EXT,ql.BlendOperation.Min),uo()(yd,Qu.MAX_EXT,ql.BlendOperation.Max),uo()(yd,Qu.FUNC_SUBTRACT,ql.BlendOperation.Subtract),uo()(yd,Qu.FUNC_REVERSE_SUBTRACT,ql.BlendOperation.ReverseSubtract),yd),Md=(gd={},uo()(gd,Qu.ZERO,ql.BlendFactor.Zero),uo()(gd,Qu.ONE,ql.BlendFactor.One),uo()(gd,Qu.SRC_COLOR,ql.BlendFactor.SrcColor),uo()(gd,Qu.ONE_MINUS_SRC_COLOR,ql.BlendFactor.OneMinusSrcColor),uo()(gd,Qu.SRC_ALPHA,ql.BlendFactor.SrcAlpha),uo()(gd,Qu.ONE_MINUS_SRC_ALPHA,ql.BlendFactor.OneMinusSrcAlpha),uo()(gd,Qu.DST_COLOR,ql.BlendFactor.DstColor),uo()(gd,Qu.ONE_MINUS_DST_COLOR,ql.BlendFactor.OneMinusDstColor),uo()(gd,Qu.DST_ALPHA,ql.BlendFactor.DstAlpha),uo()(gd,Qu.ONE_MINUS_DST_ALPHA,ql.BlendFactor.OneMinusDstAlpha),uo()(gd,Qu.CONSTANT_COLOR,ql.BlendFactor.BlendColor),uo()(gd,Qu.ONE_MINUS_CONSTANT_COLOR,ql.BlendFactor.OneMinusBlendColor),uo()(gd,Qu.SRC_ALPHA_SATURATE,ql.BlendFactor.SrcAlphaSaturated),gd),Cd=(bd={},uo()(bd,Qu.ALPHA,"r8unorm"),uo()(bd,Qu.RGBA,"rgba8unorm"),uo()(bd,Qu.DEPTH_COMPONENT,"depth32float"),uo()(bd,Qu.DEPTH_STENCIL,"depth24plus-stencil8"),bd),Nd=(_d={},uo()(_d,Qu.NEAREST,"nearest"),uo()(_d,Qu.LINEAR,"linear"),_d),Pd=(xd={},uo()(xd,Qu.REPEAT,"repeat"),uo()(xd,Qu.CLAMP_TO_EDGE,"clamp-to-edge"),uo()(xd,Qu.MIRRORED_REPEAT,"mirror-repeat"),xd);function Gd(t){var e=t.cull;return e&&e.enable?e.face?e.face===Qu.FRONT?ql.CullMode.Front:ql.CullMode.Back:void 0:ql.CullMode.None}function jd(t){var e=t.depth,n=(t.stencil,{compare:ql.CompareFunction.Always,depthFailOp:ql.StencilOperation.Keep,failOp:ql.StencilOperation.Keep,passOp:ql.StencilOperation.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:Dd[(null==e?void 0:e.func)||Qu.ALWAYS],format:ql.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ld(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Md[n&&n.func&&n.func.srcAlpha||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstAlpha||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.alpha||Qu.FUNC_ADD]},colorBlend:{srcFactor:Md[n&&n.func&&n.func.srcRGB||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstRGB||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.rgb||Qu.FUNC_ADD]},writeMask:ql.ColorWrite.All}]}function Ud(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ud(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fd(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];e+=u.length}for(var s=new t(e),c=0,f=0,l=r;f<l.length;f++){var h=l[f];s.set(h,c),c+=h.length}return s}var zd,Vd,Wd,Xd,Hd,qd,Yd,Kd,Zd,Qd,Jd,$d,tp=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m,y=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,o=e.attributes,i=e.uniforms,a=e.primitive,e.count,u=e.elements,s=e.depth,c=e.blend,f=e.stencil,l=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,d=h.vertexStage,p=h.fragmentStage,i&&this.buildUniformBindGroup(i),u&&(this.indexBuffer=u.get(),this.indexCount=u.indexCount),v={vertexBuffers:Object.keys(o).map((function(t,e){var n=o[t],r=n.get(),i=r.arrayStride,a=r.stepMode,u=r.attributes;return y.attributeCache[t]=n,{arrayStride:i,stepMode:a,attributes:u}}))},m={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Od[a||Qu.TRIANGLES],rasterizationState:Bd(Bd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Gd({cull:l})}),depthStencilState:jd({depth:s,stencil:f}),colorStates:Ld({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:v},this.renderPipeline=this.engine.device.createRenderPipeline(m);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=Bd(Bd({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=Bd(Bd({},this.uniforms),rd(t.uniforms||{})),o=[];Object.keys(r).forEach((function(t){var n=td()(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var i,a=null===(i=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===i?void 0:i.offset;Td()(a)||e.uniformBuffer.subData({data:r[t],offset:a})}else{var u,s=null===(u=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===u?void 0:u.offset;if(!Td()(s)){var c=r[t].get(),f=c.color||c,l=f.texture,h=f.sampler;h&&(o.push({binding:s,resource:h}),s++),o.push({binding:s,resource:l.createView()})}}})),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ql.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e,n,r){var o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="#version 450\\n",i=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",o);case 6:return i=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",o);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(i,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:xl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:xl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ql.FrontFace.CCW,cullMode:ql.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=Fd.apply(void 0,[Float32Array].concat(Hh()(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),o=[],i=!1;r.length&&(i=!0,o.push({binding:0,visibility:ql.ShaderStage.Fragment|ql.ShaderStage.Vertex,type:ql.BindingType.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(i?1:0)}),o.push({binding:2*n+(i?1:0),visibility:ql.ShaderStage.Fragment,type:ql.BindingType.Sampler},{binding:2*n+(i?1:0)+1,visibility:ql.ShaderStage.Fragment,type:ql.BindingType.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),i&&(this.uniformBuffer=new Ed(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}))}}]),t}(),ep=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Tr()(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&Qu.UNSIGNED_BYTE,t.width),r=t.height,o=(t.flipY,t.format),i=void 0===o?Qu.RGBA:o,a=(t.mipmap,t.wrapS),u=void 0===a?Qu.CLAMP_TO_EDGE:a,s=t.wrapT,c=void 0===s?Qu.CLAMP_TO_EDGE:s,f=t.aniso,l=void 0===f?0:f,h=(t.alignment,t.premultiplyAlpha,t.mag),d=void 0===h?Qu.NEAREST:h,p=t.min,v=void 0===p?Qu.NEAREST:p,m=t.colorSpace,y=(void 0===m&&Qu.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ql.TextureDimension.E2d,format:Cd[i],usage:y||ql.TextureUsage.Sampled|ql.TextureUsage.CopyDst}),(!y||y&ql.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Pd[u],addressModeV:Pd[c],addressModeW:Pd[u],magFilter:Nd[d],minFilter:Nd[v],maxAnisotropy:l}))}}]),t}(),np=Object(Lr.injectable)()(zd=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!o)):(e.mainColorAttachments[0].loadValue=n||ql.LoadOp.Load,e.mainDepthAttachment.depthLoadValue=r||ql.LoadOp.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:ql.LoadOp.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new tp(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new wd(e,t)},this.createBuffer=function(t){return new Ed(e,t)},this.createElements=function(t){return new Id(e,t)},this.createTexture2D=function(t){return new ep(e,t)},this.createFramebuffer=function(t){return new kd(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:ql.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ql.TextureAspect.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Ad(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||o!==e.cachedViewport.width||i!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:o,height:i},e.getCurrentRenderPass().setViewport(n,r,o,i,0,1)}}else e.transientViewport={x:n,y:r,width:o,height:i}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return Tr()(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),xl?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=Rr()(Or.a.mark((function t(){var e,n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dd();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(xl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ql.TextureUsage.OutputAttachment|ql.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:ql.TextureFormat.BGRA8Unorm,usage:ql.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:xl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:xl?"depth32float-stencil8":ql.TextureFormat.Depth24PlusStencil8,usage:ql.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:xl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ql.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=null===(r=t.get().color)||void 0===r?void 0:r.texture;u&&(i=u.createView(this.currentRenderTargetViewDescriptor));var s,c=null===(o=t.get().depth)||void 0===o?void 0:o.texture;c&&(s=c.createView());var f=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:i,loadValue:null!==e?e:ql.LoadOp.Load,storeOp:ql.StoreOp.Store}],depthStencilAttachment:c&&s?{attachment:s,depthLoadValue:n?this.clearDepthValue:ql.LoadOp.Load,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ql.LoadOp.Load,stencilStoreOp:ql.StoreOp.Store}:void 0});this.currentRenderPass=f,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||zd;function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var op=(Vd=Object(Lr.injectable)(),Wd=Object(Lr.inject)(Ur.Systems),Xd=Object(Lr.named)(Ur.MaterialSystem),Hd=Object(Lr.inject)(Ur.Systems),qd=Object(Lr.named)(Ur.GeometrySystem),Yd=Object(Lr.inject)(Ur.ShaderModuleService),Vd((Zd=function(t){Wr()(n,t);var e=rp(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Qd,co()(t)),xr()(t,"geometrySystem",Jd,co()(t)),xr()(t,"shaderModuleService",$d,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\\n\\nvarying vec3 v_Position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nvoid main() {\\n  v_Position = a_Position;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\\n}",fs:"// generate grid, borrow from clay.gl viewer\\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\\n#extension GL_OES_standard_derivatives : enable\\n\\nvarying vec3 v_Position;\\n// varying vec3 v_Normal;\\n\\nuniform float u_GridSize : 5;\\nuniform float u_GridSize2 : .5;\\nuniform vec4 u_GridColor : [0, 0, 0, 1];\\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\\nuniform bool u_GridEnabled : true;\\n\\n// uniform vec3 u_LightDirection;\\n// uniform vec3 u_LightColor;\\n// uniform vec3 u_Camera;\\n\\nvoid main() {\\n  // vec3 n = v_Normal;\\n  // vec3 l = normalize(u_LightDirection);\\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n\\n  gl_FragColor = vec4(1.);\\n\\n  if (u_GridEnabled) {\\n    float wx = v_Position.x;\\n    float wz = v_Position.z;\\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\\n\\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\\n\\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\\n    // if (v0 > 0.1) {\\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\\n    // }\\n    // else {\\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\\n    // }\\n  }\\n\\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\\n\\n  // gl_FragColor.rgb *= diffuseColor;\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(o);var i=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(i),o.setCull({enable:!1,face:Qu.BACK}).setDepth({enable:!0,func:Qu.LESS}),o.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),i.setIndex([0,3,2,2,1,0]),i.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(Ah),Qd=Ir()(Zd.prototype,"materialSystem",[Wd,Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Ir()(Zd.prototype,"geometrySystem",[Hd,qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=Ir()(Zd.prototype,"shaderModuleService",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=Zd))||Kd),ip=n(53),ap=n(36);function up(t,e,n,r,o){sp(e,r,-o),sp(e,r,o),t.push(n),t.push(n)}function sp(t,e,n){t.push([[e[0],e[1]],n])}var cp,fp,lp,hp,dp,pp,vp,mp,yp,gp,bp;function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var xp,wp,Ep,Sp,Tp,Ap,Ip,kp,Op,Dp,Rp,Mp=(cp=Object(Lr.injectable)(),fp=Object(Lr.inject)(Ur.Systems),lp=Object(Lr.named)(Ur.MaterialSystem),hp=Object(Lr.inject)(Ur.Systems),dp=Object(Lr.named)(Ur.GeometrySystem),pp=Object(Lr.inject)(Ur.ShaderModuleService),cp((mp=function(t){Wr()(n,t);var e=_p(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",yp,co()(t)),xr()(t,"geometrySystem",gp,co()(t)),xr()(t,"shaderModuleService",bp,co()(t)),t.vertexCount=void 0,t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var o=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(o),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\\nattribute vec4 a_color;\\nattribute float a_line_miter;\\nattribute vec2 a_line_normal;\\nattribute float a_counters;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform float u_thickness : 0.02;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n  v_color = a_color;\\n  v_counters = a_counters;\\n\\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\\n\\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\\n\\n  v_normal = vec2(normal * sign(a_line_miter));\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\\n}\\n",fs:"uniform float u_dash_array : 0.02;\\nuniform float u_dash_offset : 0;\\nuniform float u_dash_ratio : 0;\\nuniform float u_thickness : 0.02;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\\n\\n    gl_FragColor = v_color;\\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,o=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],o=[0,0],i=[0,0],a=[0,0],u=-1,s=!1,c=null,f=Object(ip.create)(),l=n||0,h=[],d=[],p=[],v=[0,0];e&&(t=t.slice()).push(t[0]);for(var m=t.length,y=1;y<m;y++){var g=l,b=t[y-1],_=t[y],x=y<t.length-1?t[y+1]:null;if(v.push(y/m,y/m),Object(ap.direction)(r,_,b),c||(c=[0,0],Object(ap.normal)(c,r)),s||(s=!0,up(d,h,b,c,1)),p.push([g+0,g+1,g+2]),x){Object(ap.direction)(o,x,_);var w=Object(ap.computeMiter)(i,a,r,o,1),E=Object(ip.dot)(i,c)<0?-1:1,S=w>3;if(!isFinite(w)){Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2,u=E;continue}S?(w=3,v.push(y/m),sp(h,c,-E),d.push(_),sp(h,a,w*E),d.push(_),p.push(u!==-E?[g,g+2,g+3]:[g+2,g+1,g+3]),p.push([g+2,g+3,g+4]),Object(ap.normal)(f,o),Object(ip.copy)(c,f),sp(h,c,-E),d.push(_),l+=3):(up(d,h,_,a,w),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),E=-1,Object(ip.copy)(c,a),l+=2),u=E}else Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:v}}(this.config.points,!1),u=a.normals,s=a.attrIndex,c=a.attrPos,f=a.attrCounters,l=c.length;this.vertexCount=l;var h=this.geometrySystem.createBufferGeometry({vertexCount:l});this.setMaterial(i),this.setGeometry(h),i.setCull({enable:!1,face:Qu.BACK}).setUniform(o),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];u.forEach((function(t){var e=t[0],n=t[1];d.push([e[0],e[1]]),p.push(n)})),h.setIndex(s.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),h.setAttribute("a_pos",Float32Array.from(c.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var v=new Array(l).fill(void 0).map((function(){return Hh()(t.config.color)})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);h.setAttribute("a_color",Float32Array.from(v),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(f),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(Ah),yp=Ir()(mp.prototype,"materialSystem",[fp,lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=Ir()(mp.prototype,"geometrySystem",[hp,dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Ir()(mp.prototype,"shaderModuleService",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=mp))||vp);function Cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Pp=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Gp,jp,Lp,Up,Bp,Fp,zp,Vp,Wp,Xp=(xp=Object(Lr.injectable)(),wp=Object(Lr.inject)(Ur.Systems),Ep=Object(Lr.named)(Ur.MaterialSystem),Sp=Object(Lr.inject)(Ur.Systems),Tp=Object(Lr.named)(Ur.GeometrySystem),Ap=Object(Lr.inject)(Ur.ShaderModuleService),xp((kp=function(t){Wr()(n,t);var e=Np(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Op,co()(t)),xr()(t,"geometrySystem",Dp,co()(t)),xr()(t,"shaderModuleService",Rp,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\\nattribute vec4 color;\\nattribute float shape;\\nattribute vec2 offset;\\nattribute float size;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nuniform float u_stroke_width : 0.01;\\nuniform float u_device_pixel_ratio;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include "picking"\\n\\nvoid main() {\\n  v_color = color;\\n  v_radius = size;\\n\\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\\n\\n  // construct point coords\\n  v_data = vec4(position, antialiasblur, shape);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix\\n    * vec4(position * size + offset, 0.0, 1.0);\\n\\n  setPickingColor(a_PickingColor);\\n}',fs:"uniform float u_blur : 0.05;\\nuniform float u_opacity : 0.7;\\nuniform float u_stroke_width : 0.01;\\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\\nuniform float u_stroke_opacity : 1;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include \\"sdf2d\\"\\n#pragma include \\"picking\\"\\n\\nvoid main() {\\n  int shape = int(floor(v_data.w + 0.5));\\n\\n  float antialiasblur = v_data.z;\\n  float antialiased_blur = -max(u_blur, antialiasblur);\\n  float r = v_radius / (v_radius + u_stroke_width);\\n\\n  float outer_df;\\n  float inner_df;\\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\\n  // if (shape == 0) {\\n    outer_df = sdCircle(v_data.xy, 1.0);\\n    inner_df = sdCircle(v_data.xy, r);\\n  // } else if (shape == 1) {\\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\\n  // } else if (shape == 2) {\\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\\n  //   inner_df = sdBox(v_data.xy, vec2(r));\\n  // } else if (shape == 3) {\\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 4) {\\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 5) {\\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\\n  //   inner_df = sdOctogon(v_data.xy, r);\\n  // } else if (shape == 6) {\\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\\n  // } else if (shape == 7) {\\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\\n  // } else if (shape == 8) {\\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\\n  // }\\n\\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\\n\\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\\n    antialiased_blur,\\n    0.0,\\n    inner_df\\n  );\\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\\n\\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\\n\\n  gl_FragColor = filterColor(gl_FragColor);\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Qu.SRC_ALPHA,dstRGB:Qu.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});o.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cp(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var i=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:i.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(i.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(i.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(i.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(i.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(i.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(i.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(o),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,o,i,a,u;(r=e.instancedPickingColors).push.apply(r,Hh()([(u=t.id||n)+1&255,u+1>>8&255,u+1>>8>>8&255])),e.instancedShapes.push(Pp.indexOf(t.shape||"circle")),(o=e.instancedColors).push.apply(o,Hh()(t.color||[1,0,0,1])),(i=e.instancedOffsets).push.apply(i,Hh()(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Hh()(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}(Ah),Op=Ir()(kp.prototype,"materialSystem",[wp,Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Ir()(kp.prototype,"geometrySystem",[Sp,Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=Ir()(kp.prototype,"shaderModuleService",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=kp))||Ip);function Hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yp,Kp,Zp,Qp,Jp,$p,tv,ev,nv,rv,ov,iv,av=(Gp=Object(Lr.injectable)(),jp=Object(Lr.inject)(Ur.RenderEngine),Lp=Object(Lr.inject)(Ur.ShaderModuleService),Up=Object(Lr.inject)(Ur.ConfigService),Gp((Fp=function(){function t(){Er()(this,t),xr()(this,"engine",zp,this),xr()(this,"shaderModule",Vp,this),xr()(this,"configService",Wp,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),e=this.container.getAll(Ur.Systems),!(n=this.configService.get()).canvas){t.next=25;break}return t.next=6,this.engine.init({canvas:n.canvas,swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:r=Hp(e),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=16;break}if(!(i=o.value).initialize){t.next=14;break}return t.next=14,i.initialize();case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:this.inited=!0;case 25:case"end":return t.stop()}}),t,this,[[7,18,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(Ur.Systems),n=s.length,r=new Array(n),o=0;o<n;o++)r[o]=s[o];i=Hp(e),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=17;break}if(!(u=a.value).execute){t.next=15;break}return t.next=15,u.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),zp=Ir()(Fp.prototype,"engine",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=Ir()(Fp.prototype,"shaderModule",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Ir()(Fp.prototype,"configService",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=Fp))||Bp),uv=Object(Lr.injectable)()(Yp=function(){function t(){Er()(this,t),this.entities=[]}return Tr()(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||Yp,sv=(Kp=Object(Lr.injectable)(),Zp=Object(Lr.inject)(Ur.Systems),Qp=Object(Lr.named)(Ur.RendererSystem),Kp(($p=function(){function t(){Er()(this,t),xr()(this,"rendererSystem",tv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Tr()(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),tv=Ir()($p.prototype,"rendererSystem",[Zp,Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=$p))||Jp);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lv=(ev=Object(Lr.injectable)(),nv=Object(Lr.inject)(Ur.ConfigService),ev((ov=function(){function t(){Er()(this,t),xr()(this,"configService",iv,this),this.container=void 0}var e;return Tr()(t,[{key:"getEngine",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(Ur.RenderEngine),n=this.configService.get(),r=n.canvas,o=n.engineOptions,t.next=4,e.init(fv({canvas:r||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},o));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(Ur.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(Ur.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Cr()}},{key:"createScene",value:function(){return this.container.get(uv)}},{key:"createCamera",value:function(){return this.container.get(zl)}},{key:"createView",value:function(){return this.container.get(sv)}},{key:"createRenderable",value:function(t,e,n){var r=e?this.container.getNamed(Ur.Renderable,e):this.container.get(Ah);return r.setConfig(n||{}),r.setEntity(t),r}},{key:"createBoxGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBox(t)}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(Th);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(av);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(Ur.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(Ur.RenderEngine).destroy(),this.container.get(Ur.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vl(),r=navigator.gpu?np:fd;n.isBound(Ur.RenderEngine)||n.bind(Ur.RenderEngine).to(r).inSingletonScope(),n.bind(av).toSelf(),n.bind(Th).toSelf(),n.bind(Ah).toSelf(),n.bind(sv).toSelf(),n.bind(zl).toSelf(),n.bind(uv).toSelf(),n.bind(t).toSelf(),n.bind(Ur.Renderable).to(Xp).whenTargetNamed(Ah.POINT),n.bind(Ur.Renderable).to(Mp).whenTargetNamed(Ah.LINE),n.bind(Ur.Renderable).to(op).whenTargetNamed(Ah.GRID);var o=n.get(t);return o.setContainer(n),o.setConfig(e),o}}]),t}(),iv=Ir()(ov.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rv=ov))||rv),hv=function(t,e){return t?y(t)?function(){return t}:t:function(){return e||1}},dv=function(t,e){var n=[],r=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var u=e[i];r[o[u.source]].push(o[u.target]),r[o[u.target]].push(o[u.source])}var s=0;for(i=0;i<t.length;i++){var c=n.length,f=r[i],l=f.length;n[4*i+2]=c,n[4*i+3]=f.length,s=Math.max(s,f.length);for(var h=0;h<l;++h){var d=f[h];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:s,array:new Float32Array(n)}},pv=function(t,e,n,r){var o=[],i=[],a={},u=0;for(u=0;u<t.length;u++){var s=t[u];a[s.id]=u,o.push(s.x),o.push(s.y),o.push(0),o.push(0),i.push([])}for(u=0;u<e.length;u++){var c=e[u];i[a[c.source]].push(a[c.target]),i[a[c.source]].push(n(c)),i[a[c.source]].push(r(c)),i[a[c.source]].push(0),i[a[c.target]].push(a[c.source]),i[a[c.target]].push(n(c)),i[a[c.target]].push(r(c)),i[a[c.target]].push(0)}var f=0;for(u=0;u<t.length;u++){var l=o.length,h=i[u],d=h.length;o[4*u+2]=l+1048576*d/4,o[4*u+3]=0,f=Math.max(f,d/4);for(var p=0;p<d;++p){var v=h[p];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}},vv=function(t,e){var n=[],r=t.length,o={};return e.forEach((function(e){t.forEach((function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),n.push(o[e[t]]),i===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(o).length}},mv=function(t){for(var e=[],n=t.length,r=t[0].length,o=function(r){t.forEach((function(t,o){if(e.push(t[r]),o===n-1)for(;e.length%4!=0;)e.push(0)}))},i=0;i<r;i++)o(i);return new Float32Array(e)};function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bv(t,e){return(bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var o=wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xv(this,n)}}function xv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ev=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bv(t,e)}(i,t);var e,n,r,o=_v(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,e){y(t.x)||(t.x=Math.random()*a.width),y(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e})),e.nodeMap=o,e.nodeIdxMap=i,t.next=21,e.run();case 21:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=this).nodes,i=r.center,o&&0!==o.length){n.next=5;break}return n.abrupt("return");case 5:if(1!==o.length){n.next=9;break}return o[0].x=i[0],o[0].y=i[1],n.abrupt("return");case 9:return a={},u={},o.forEach((function(t,e){y(t.x)||(t.x=Math.random()*s.width),y(t.y)||(t.y=Math.random()*s.height),a[t.id]=t,u[t.id]=e})),r.nodeMap=a,r.nodeIdxMap=u,n.next=16,r.run(t,e);case 16:case"end":return n.stop()}}),n,this)})))}},{key:"run",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k,O=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,u=r.center,s=r.height*r.width,c=Math.sqrt(s)/10,f=s/(o.length+1),l=Math.sqrt(f),h=r.speed,d=r.clustering,p=vv([r.clusterField],o),v=p.array,m=p.count,y=o.length,g=dv(o,i),b=g.maxEdgePerVetex,_=g.array,x=r.workerEnabled,w=x?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),E=r.onLayoutEnd,S=[],T=0;T<m;T++)S.push(0,0,0,0);return A=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_K : f32;\\\\n  [[offset 4]] u_K2 : f32;\\\\n  [[offset 8]] u_Center : vec2<f32>;\\\\n  [[offset 16]] u_Gravity : f32;\\\\n  [[offset 20]] u_ClusterGravity : f32;\\\\n  [[offset 24]] u_Speed : f32;\\\\n  [[offset 28]] u_MaxDisplace : f32;\\\\n  [[offset 32]] u_Clustering : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx = dx + param * xDist;\\\\ndy = dy + param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\\\ndx = dx + param * std::sign;\\\\ndy = dy + param * std::sign;}}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nvar cvx : f32 = currentNode.x - center.x;\\\\nvar cvy : f32 = currentNode.y - center.y;\\\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx = dx + parma * cvx;\\\\ndy = dy + parma * cvy;}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + i32(p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\\\ndy = dy - yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\\\ndx = dx - std::sign * attractiveF;\\\\ndy = dy - std::sign * attractiveF;}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\ndx = dx + repulsive.x;\\\\ndy = dy + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\\\ndx = dx + attractive.x;\\\\ndy = dy + attractive.y;\\\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\\\ndx = dx - gravity.x;\\\\ndy = dy - gravity.y;\\\\ndx = dx * gWebGPUUniformParams.u_Speed;\\\\ndy = dy * gWebGPUUniformParams.u_Speed;\\\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_K;\\\\n  float u_K2;\\\\n  vec2 u_Center;\\\\n  float u_Gravity;\\\\n  float u_ClusterGravity;\\\\n  float u_Speed;\\\\n  float u_MaxDisplace;\\\\n  float u_Clustering;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AttributeArray[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= gWebGPUUniformParams.u_Speed;\\\\ndy *= gWebGPUUniformParams.u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_K;\\\\nuniform float u_K2;\\\\nuniform vec2 u_Center;\\\\nuniform float u_Gravity;\\\\nuniform float u_ClusterGravity;\\\\nuniform float u_Speed;\\\\nuniform float u_MaxDisplace;\\\\nuniform float u_Clustering;\\\\nuniform sampler2D u_AttributeArray;\\\\nuniform vec2 u_AttributeArraySize;\\\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AttributeArray(float address1D) {\\\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\\\n}\\\\nvec4 getDatau_AttributeArray(int address1D) {\\\\n  return getDatau_AttributeArray(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - u_Center.x;\\\\nfloat vy = currentNode.y - u_Center.y;\\\\nfloat gf = (0.01 * u_K) * u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= u_Speed;\\\\ndy *= u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([y,1,1]).setBinding({u_Data:_,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:c,u_Clustering:d?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),d&&(I=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\n\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nvar sumx : f32 = 0.0;\\\\nvar sumy : f32 = 0.0;\\\\nvar count : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nvar clusterIdx : i32 = i32(attributes.x);\\\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\\\nsumy = sumy + vertex.y;\\\\ncount = count + 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\n\\\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_NodeAttributes[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributes;\\\\nuniform vec2 u_NodeAttributesSize;\\\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributes(float address1D) {\\\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\\\n}\\\\nvec4 getDatau_NodeAttributes(int address1D) {\\\\n  return getDatau_NodeAttributes(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 center = getDatau_ClusterCenters(i);\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = getDatau_Data(j);\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:_,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Ev(O,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<a)){n.next=13;break}return n.next=4,A.execute();case 4:if(!d){n.next=9;break}return I.setBinding({u_Data:A}),n.next=8,I.execute();case 8:A.setBinding({u_ClusterCenters:I});case 9:A.setBinding({u_MaxDisplace:c*=.99});case 10:r++,n.next=1;break;case 13:return n.next=15,A.getOutput();case 15:i=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:i}):o.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),E&&E();case 18:case"end":return n.stop()}}),n)})))},n.next=24,k();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&gv(e.prototype,n),r&&gv(e,r),i}(I);function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var o=Dv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ov(this,n)}}function Ov(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rv=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(i,t);var e,n,r,o=kv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=1,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,n){y(t.x)||(t.x=Math.random()*e.width),y(t.y)||(t.y=Math.random()*e.height),o[t.id]=t,i[t.id]=n})),e.nodeMap=o,e.nodeIdxMap=i,e.nodeStrength=hv(e.nodeStrength,1),e.edgeStrength=hv(e.edgeStrength,1),t.next=23,e.run();case 23:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){var n=this,r=n.nodes,o=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=o[0],void(r[0].y=o[1]);var i={},a={};r.forEach((function(t,e){y(t.x)||(t.x=Math.random()*n.width),y(t.y)||(t.y=Math.random()*n.height),i[t.id]=t,a[t.id]=e})),n.nodeMap=i,n.nodeIdxMap=a,n.nodeStrength=hv(n.nodeStrength,1),n.edgeStrength=hv(n.edgeStrength,1),n.run(t,e)}}},{key:"run",value:function(t,e){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,g,_,x,w,E,S,T,A,I,k,O,D=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),u=o.length,r.linkDistance=hv(r.linkDistance),r.edgeStrength=hv(r.edgeStrength),s=pv(o,i,r.linkDistance,r.edgeStrength),c=s.maxEdgePerVetex,f=s.array,r.degrees=b(o.length,r.nodeIdxMap,i),l=[],h=[],d=[],p=[],v=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),m=r.gravity,g=r.center,o.forEach((function(t,e){l.push(r.getMass(t)),h.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[g[0],g[1],m];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&y(o[0])&&y(o[1])&&y(o[2])&&(n=o)}d.push(n[0]),p.push(n[1]),v.push(n[2])})),_=mv([l,r.degrees,h]),x=mv([d,p,v]),w=r.workerEnabled,E=w?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),S=r.onLayoutEnd,T=[],f.forEach((function(t){T.push(t)})),A=0;A<4;A++)T.push(0);return I=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_damping : f32;\\\\n  [[offset 4]] u_maxSpeed : f32;\\\\n  [[offset 8]] u_minMovement : f32;\\\\n  \\\\n  [[offset 12]] u_coulombDisScale : f32;\\\\n  [[offset 16]] u_factor : f32;\\\\n  \\\\n  \\\\n  [[offset 20]] u_interval : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\ntype GWebGPUBuffer3 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\\\nvar v0 : i32 = packedIntValue / 1048576;\\\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar vx : f32 = currentNode.x - nextNode.x;\\\\nvar vy : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nvar massi : f32 = attributesi.x;\\\\nvar nodeStrengthi : f32 = attributesi.z;\\\\nvar nodeStrengthj : f32 = attributesj.z;\\\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax = ax + direx * param;\\\\nay = ay + direy * param;}}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\\\nvar vy : f32 = currentNode.y - attributes2.y;\\\\nvar ax : f32 = vx * attributes2.w;\\\\nvar ay : f32 = vy * attributes2.w;\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\\\nvar length : i32 = compressed.x;\\\\nvar arr_offset : i32 = compressed.y;\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + (4 * p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = node_buffer.x;\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar vx : f32 = nextNode.x - currentNode.x;\\\\nvar vy : f32 = nextNode.y - currentNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar edgeLength : f32 = node_buffer.y;\\\\nvar edgeStrength : f32 = node_buffer.z;\\\\nvar diff : f32 = edgeLength - dist;\\\\nvar param : f32 = (diff * edgeStrength) / mass;\\\\nax = ax - direx * param;\\\\nay = ay - direy * param;}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\nax = ax + repulsive.x;\\\\nay = ay + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax = ax + attractive.x;\\\\nay = ay + attractive.y;\\\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\\\nax = ax - gravity.x;\\\\nay = ay - gravity.y;\\\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nvar vx : f32 = ax * param;\\\\nvar vy : f32 = ay * param;\\\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_damping;\\\\n  float u_maxSpeed;\\\\n  float u_minMovement;\\\\n  \\\\n  float u_coulombDisScale;\\\\n  float u_factor;\\\\n  \\\\n  \\\\n  float u_interval;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_NodeAttributeArray1[];\\\\n} gWebGPUBuffer2;\\\\n\\\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\\\n  vec4 u_NodeAttributeArray2[];\\\\n} gWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_damping;\\\\nuniform float u_maxSpeed;\\\\nuniform float u_minMovement;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nuniform float u_coulombDisScale;\\\\nuniform float u_factor;\\\\nuniform sampler2D u_NodeAttributeArray1;\\\\nuniform vec2 u_NodeAttributeArray1Size;\\\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\\\n  return getDatau_NodeAttributeArray1(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributeArray2;\\\\nuniform vec2 u_NodeAttributeArray2Size;\\\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\\\n  return getDatau_NodeAttributeArray2(float(address1D));\\\\n}\\\\nuniform float u_interval;\\\\nivec2 unpack_float(float packedValue) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nvec4 movement = getDatau_AveMovement(0.0);\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = u_interval * u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * u_interval;\\\\nfloat disty = vy * u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([u,1,1]).setBinding({u_Data:f,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:_,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:u,u_AveMovement:T,u_interval:r.interval}),k=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_iter : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var movement : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nmovement = movement + vertex.w;}\\\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_iter;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {float movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_iter;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),O=function(){return Rv(D,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<a)){n.next=12;break}return n.next=4,I.execute();case 4:return k.setBinding({u_Data:I}),n.next=7,k.execute();case 7:u=Math.max(.02,r.interval-.002*i),I.setBinding({u_interval:u,u_AveMovement:k});case 9:i++,n.next=1;break;case 12:return n.next=14,I.getOutput();case 14:s=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:s}):o.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),S&&S();case 17:case"end":return n.stop()}}),n)})))},n.next=33,O();case 33:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Av(e.prototype,n),r&&Av(e,r),i}(I);function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv(t);if(e){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv(this,n)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(i,t);var e,n,r,o=Gv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=r[e].x*o,t.y+=r[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)a();var s=[0,0];e.forEach((function(t){y(t.x)&&y(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[r[0]-s[0],r[1]-s[1]];e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}},{key:"initVals",value:function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.indexMap=i;var a={};n.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c)r[t[c].source]?r[t[c].source]++:r[t[c].source]=1,r[t[c].target]?r[t[c].target]++:r[t[c].target]=1;for(var f=[],l=0;l<t.length;++l)f[l]=r[t[l].source]/(r[t[l].source]+r[t[l].target]);this.bias=f;var h,d,p=this.nodeSize,v=this.nodeSpacing;if(d=y(v)?function(){return v}:T(v)?v:function(){return 0},this.nodeSpacing=d,p)if(T(p))h=function(t){return p(t)};else if(m(p)){var g=(p[0]>p[1]?p[0]:p[1])/2;h=function(t){return g}}else{var b=p/2;h=function(t){return b}}else h=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var _,x=this.comboSpacing;_=y(x)?function(){return x}:T(x)?x:function(){return 0},this.comboSpacing=_;var w,E=this.comboPadding;w=y(E)?function(){return E}:m(E)?function(){return Math.max.apply(null,E)}:T(E)?E:function(){return 0},this.comboPadding=w;var S,A=this.linkDistance;A||(A=10),S=y(A)?function(t){return A}:A,this.linkDistance=S;var I,k=this.edgeStrength;k||(k=1),I=y(k)?function(t){return k}:k,this.edgeStrength=I;var O,D=this.nodeStrength;D||(D=30),O=y(D)?function(t){return D}:D,this.nodeStrength=O}},{key:"initPos",value:function(t){this.nodes.forEach((function(e,n){var r=e.comboId,o=t[r];r&&o?(e.x=o.cx+100/(n+1),e.y=o.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}},{key:"getComboMap",value:function(){var t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach((function(r){var a=[];w(r,(function(r){if("node"===r.itemType)return!0;if(!o[r.id])return!0;if(void 0===i[r.id]){var u={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth,children:[]};i[r.id]=u}var s=r.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[r.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[r.id],l=Object.keys(e).length,h="".concat(r.id,"-visual-child-").concat(l),d={id:h,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[h]=d,n[h]=l,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return y(n.cx)&&(c.cx+=n.cx),void(y(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&(y(r.x)&&(c.cx+=r.x),y(r.y)&&(c.cy+=r.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i}},{key:"applyComboCenterForce",value:function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,o=this.comboTrees,i=this.indexMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){w(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var l=u[e.id];return l&&y(l.cx)&&(o.cx+=l.cx),void(l&&y(l.cy)&&(o.cy+=l.cy))}var h=a[e.id],d=h.x-c||.005,p=h.y-f||.005,v=Math.sqrt(d*d+p*p),m=i[h.id],g=n*r/v*s;t[m].x-=d*g,t[m].y-=p*g,y(h.x)&&(o.cx+=h.x),y(h.y)&&(o.cy+=h.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))}},{key:"applyCalculate",value:function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,o){if(!(e<o)){var i=t.x-n.x||.005,a=t.y-n.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:a,vl2:u,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:u,vl:s,vx:-i,vy:-a}}}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)}},{key:"updateComboSizes",value:function(t){var e=this,n=e.comboTrees,r=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];w(n,(function(n){if("node"===n.itemType)return!0;var s=t[n.id];if(!s)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=o(e),i=e.x-n,a=e.y-n,u=e.x+n,c=e.y+n;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[n.id].size||10;m(f)&&(f=f[0]);var l=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=l/2+i(s)/2+a(s),!0}))}))}},{key:"comboNonOverlapping",value:function(t,e){var n=this.comboTree,r=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;w(n,(function(n){if(!e[n.id]&&!i[n.id]&&"comboTreeRoot"!==n.id)return!1;var a=n.children;return a&&a.length>1&&a.forEach((function(n,u){if("node"===n.itemType)return!1;var s=e[n.id];s&&a.forEach((function(a,c){if(u<=c)return!1;if("node"===a.itemType)return!1;var f=e[a.id];if(!f)return!1;var l=s.cx-f.cx||.005,h=s.cy-f.cy||.005,d=l*l+h*h,p=s.r,v=f.r,m=p+v,y=v*v,g=p*p;if(d<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=a.children;if(!_||0===_.length)return!1;var x=Math.sqrt(d),w=(m-x)/x*r,E=l*w,S=h*w,T=y/(g+y),A=1-T;b.forEach((function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var n=o[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var r=o[e.id];t[n].x+=E*T,t[n].y+=S*T,t[r].x-=E*A,t[r].y-=S*A}))}}))}}))})),!0}))}},{key:"calRepulsive",value:function(t,e){var n=this,r=n.nodes,o=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,u=n.nodeCollideStrength,s=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,l=n.depthRepulsiveForceScale,h=n.center;r.forEach((function(d,p){if(d.x&&d.y){if(h){var v=n.gravity,m=d.x-h[0]||.005,y=d.y-h[1]||.005,g=Math.sqrt(m*m+y*y);t[p].x-=m*v*a/g,t[p].y-=y*v*a/g}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var h=e["".concat(d.id,"-").concat(n.id)],v=h.vl2,m=h.vl;if(!(m>o)){var y=e["".concat(d.id,"-").concat(n.id)],g=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-d.depth)/10)+1||1;_=_<1?1:_,n.comboId!==d.comboId&&(_+=1);var x=_?Math.pow(l,_):1,w=i(n)*a/v*x;if(t[p].x+=g*w,t[p].y+=b*w,p<r&&s){var E=c(d)+f(d),S=c(n)+f(n),T=E+S;if(v<T*T){var A=(T-m)/m*u,I=S*S,k=I/(E*E+I),O=g*A,D=b*A;t[p].x+=O*k,t[p].y+=D*k,k=1-k,t[r].x-=O*k,t[r].y-=D*k}}}}}))}}))}},{key:"calAttractive",value:function(t,e){var n=this,r=n.edges,o=n.linkDistance,i=n.alpha,a=n.edgeStrength,u=n.bias,s=n.depthAttractiveForceScale;r.forEach((function(r,c){if(r.source&&r.target&&r.source!==r.target){var f=n.indexMap[r.source],l=n.indexMap[r.target],h=n.nodeMap[r.source],d=n.nodeMap[r.target];if(h&&d){var p=Math.log(Math.abs(h.depth-d.depth)/10);h.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(h.comboId!==d.comboId&&1===v?v=s/2:h.comboId===d.comboId&&(v=2),y(d.x)&&y(h.x)&&y(d.y)&&y(h.y)){var m=e["".concat(r.target,"-").concat(r.source)],g=m.vl,b=m.vx,_=m.vy,x=(g-o(r))/g*i*a(r)*v,w=b*x,E=_*x,S=u[c];t[l].x-=w*S,t[l].y-=E*S,t[f].x+=w*(1-S),t[f].y+=E*(1-S)}}}}))}},{key:"getType",value:function(){return"comboForce"}}])&&Nv(e.prototype,n),r&&Nv(e,r),i}(I);var Bv;new Proxy({},{get:function(t,e){return Jn(e)},set:function(t,e,n){return Qn(e,n),!0}});Bv||(Bv={}),Qn("grid",N),Qn("random",F),Qn("force",oe),Qn("circular",ve),Qn("dagre",Se),Qn("radial",Vn),Qn("concentric",ir),Qn("mds",hr),Qn("fruchterman",br),Qn("fruchterman-gpu",Sv),Qn("gForce",K),Qn("gForce-gpu",Mv),Qn("comboForce",Uv);var Fv=self;Fv.onmessage=function(t){(function(t){var e=t.data.type;return e===Ht||e===Zt})(t)&&function(t){switch(t.data.type){case Ht:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=Jn(a);if(!u){Fv.postMessage({type:Yt,message:"layout ".concat(a," not found")});break}var s=new u(i);s.init({nodes:n,edges:r}),s.execute(),Fv.postMessage({nodes:n,type:qt}),s.destroy();break;case Zt:var c=t.data,f=c.nodes,l=c.edges,h=c.layoutCfg,d=void 0===h?{}:h,p=c.canvas,v=d.type,m=Jn(v);if(!m){Fv.postMessage({type:Yt,message:"layout ".concat(v," not found")});break}if("gpu"!==v.split("-")[1]){Fv.postMessage({type:Yt,message:"layout ".concat(v," does not support GPU")});break}var y=new m(d);y.init({nodes:f,edges:l}),y.executeWithWorker(p,Fv)}}(t)};var zv=self;zv.onmessage=function(t){(function(t){var e=t.data.type;return e===f||e===d})(t)&&function(t){switch(t.data.type){case f:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=(p=void 0===o?{}:o).type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}(u=new a(p)).init({nodes:n,edges:r}),u.execute(),zv.postMessage({type:l,nodes:n}),u.destroy();break;case d:var a,u,s=t.data,c=(n=s.nodes,r=s.edges,s.layoutCfg),p=void 0===c?{}:c,v=s.canvas;i=p.type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}if("gpu"!==i.split("-")[1]){zv.postMessage({type:h,message:"layout "+i+" does not support GPU"});break}(u=new a(p)).init({nodes:n,edges:r}),u.executeWithWorker(v,zv)}}(t)};e.default=null}]);
//# sourceMappingURL=g6Layout.worker.js.map`,"Worker",void 0,e.p+"g6Layout.worker.js")}var x="LAYOUT_RUN",T="LAYOUT_END",N="LAYOUT_ERROR",Y="LAYOUT_TICK",q="GPU_LAYOUT_RUN",nt="GPU_LAYOUT_END",vt=e(121),ht=function(dt){return setTimeout(dt,16)},St=function(dt){return clearTimeout(dt)},wt=function(dt){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||ht)(dt)},xt=function(dt){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||St)(dt)},ft=["fruchterman","gForce"],Ft=function(ct){function dt(pt){var Mt=ct.call(this,pt)||this;return Mt.graph=pt,Mt.layoutCfg=pt.get("layout")||{},Mt.layoutType=Mt.layoutCfg.type,Mt.worker=null,Mt.workerData={},Mt.initLayout(),Mt}return Object(i.b)(dt,ct),dt.prototype.initLayout=function(){},dt.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new p),this.worker},dt.prototype.stopWorker=function(){var pt=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,pt.requestId&&(xt(pt.requestId),pt.requestId=null),pt.requestId2&&(xt(pt.requestId2),pt.requestId2=null))},dt.prototype.layout=function(pt){var Mt=this,tt=this.graph;this.data=this.setDataFromGraph();var lt=this.data.nodes;if(!lt)return!1;var it=tt.get("width"),U=tt.get("height"),P={};Object.assign(P,{width:it,height:U,center:[it/2,U/2]},this.layoutCfg),this.layoutCfg=P;var H=!!this.layoutType,k=this.layoutMethod;k&&k.destroy(),tt.emit("beforelayout"),this.initPositions(P.center,lt);var h=this.layoutType,g=!1;if(h&&h.split("-")[1]==="gpu"&&(h=h.split("-")[0],P.gpuEnabled=!0),h&&P.gpuEnabled){var G=!0;Object(vt.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),G=!1),this.hasGPUVersion(h)||(console.warn("The '"+h+"' layout does not support GPU calculation for now, it will run in CPU."),G=!1),G&&(h+="-gpu",g=!0)}if(this.isGPU=g,this.stopWorker(),P.workerEnabled&&this.layoutWithWorker(this.data,pt))return!0;var V=P.onLayoutEnd;if(P.layoutEndFormatted||(P.layoutEndFormatted=!0,P.onLayoutEnd=function(){V&&V(),tt.emit("afterlayout"),Mt.refreshLayout(),pt&&pt()}),h==="force"||h==="g6force"||h==="gForce"){var $=P.onTick,rt=function(){$&&$(),tt.refreshPositions()};P.tick=rt}else this.layoutType==="comboForce"&&(P.comboTrees=tt.get("comboTrees"));if(h!==void 0){try{k=new E.a[h](P)}catch(At){return console.warn("The layout method: '"+h+"' does not exist! Please specify it first."),!1}if(k.enableTick){var ot=P.onTick;rt=function(){ot&&ot(),tt.refreshPositions()},k.tick=rt}k.init(this.data),H&&(tt.emit("beginlayout"),k.execute(),k.isCustomLayout&&P.onLayoutEnd&&P.onLayoutEnd()),this.layoutMethod=k}else P.onLayoutEnd&&P.onLayoutEnd();return!1},dt.prototype.layoutWithWorker=function(pt,Mt){var tt=this,lt=pt.nodes,it=pt.edges,U=this.layoutCfg,P=this.graph,H=this.isGPU,k=this.getWorker(),h=this.workerData;if(!k)return!1;h.requestId=null,h.requestId2=null,h.currentTick=null,h.currentTickData=null,P.emit("beforelayout");var g=document.createElement("canvas"),G=H&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in g,V=function(rt,ot){var At={};return rt&&typeof rt=="object"?(Object.keys(rt).forEach(function(gt){rt.hasOwnProperty(gt)&&ot(rt[gt])&&(At[gt]=rt[gt])}),At):rt}(U,function(rt){return typeof rt!="function"});if(G){var $=g.transferControlToOffscreen();V.type=V.type+"-gpu",k.postMessage({type:q,nodes:lt,edges:it,layoutCfg:V,canvas:$},[$])}else k.postMessage({type:x,nodes:lt,edges:it,layoutCfg:V});return k.onmessage=function(rt){tt.handleWorkerMessage(rt,pt,Mt)},!0},dt.prototype.handleWorkerMessage=function(pt,Mt,tt){var lt=this.graph,it=this.workerData,U=this.layoutCfg,P=pt.data,H=P.type,k=function(){U.onTick&&U.onTick()},h=function(){U.onLayoutEnd&&U.onLayoutEnd(),lt.emit("afterlayout")};switch(H){case Y:it.currentTick=P.currentTick,it.currentTickData=P,it.requestId||(it.requestId=wt(function(){kt(Mt,P),lt.refreshPositions(),k(),P.currentTick===1&&tt&&tt(),P.currentTick===P.totalTicks?h():it.currentTick===P.totalTicks&&(it.requestId2=wt(function(){kt(Mt,it.currentTickData),lt.refreshPositions(),it.requestId2=null,k(),h()})),it.requestId=null}));break;case T:it.currentTick==null&&(kt(Mt,P),this.refreshLayout(),tt&&tt(),lt.emit("afterlayout"));break;case nt:it.currentTick==null&&(function(g,G){for(var V=g.nodes,$=G.vertexEdgeData,rt=V.length,ot=0;ot<rt;ot++){var At=V[ot],gt=$[4*ot],mt=$[4*ot+1];At.x=gt,At.y=mt}}(Mt,P),this.refreshLayout(),tt&&tt(),lt.emit("afterlayout"));break;case N:console.warn("Web-Worker layout error!",P.message)}},dt.prototype.updateLayoutCfg=function(pt){var Mt=this.graph,tt=this.layoutMethod,lt=(this.layoutType,this.layoutCfg);if(this.layoutType=pt.type,!tt||tt.destroyed)return this.layoutCfg=Object(f.A)({},lt,pt),void this.layout();this.data=this.setDataFromGraph(),this.stopWorker(),pt.workerEnabled&&this.layoutWithWorker(this.data,null)||(tt.init(this.data),tt.updateCfg(pt),Mt.emit("beforelayout"),tt.execute(),tt.isCustomLayout&&lt.onLayoutEnd&&lt.onLayoutEnd())},dt.prototype.hasGPUVersion=function(pt){for(var Mt=ft.length,tt=0;tt<Mt;tt++)if(ft[tt]===pt)return!0;return!1},dt.prototype.destroy=function(){var pt=this.layoutMethod;pt&&(pt.destroy(),pt.destroyed=!0);var Mt=this.worker;Mt&&(Mt.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0,this.graph=null},dt}(M.c);function kt(ct,dt){for(var pt=ct.nodes,Mt=dt.nodes,tt=pt.length,lt=0;lt<tt;lt++){var it=pt[lt];it.x=Mt[lt].x,it.y=Mt[lt].y}}var Ot=S.a.transform,X=function(ct){function dt(pt){var Mt=ct.call(this,pt)||this,tt=Mt.get("defaultNode");return tt||Mt.set("defaultNode",{type:"circle"}),tt.type||(tt.type="circle",Mt.set("defaultNode",tt)),Mt.destroyed=!1,Mt}return Object(i.b)(dt,ct),dt.prototype.initLayoutController=function(){var pt=new Ft(this);this.set({layoutController:pt})},dt.prototype.initEventController=function(){var pt=new d(this);this.set({eventController:pt})},dt.prototype.initCanvas=function(){var pt=this.get("container");if(typeof pt=="string"&&(pt=document.getElementById(pt),this.set("container",pt)),!pt)throw new Error("invalid container");var Mt,tt=this.get("width"),lt=this.get("height");if(this.get("renderer")==="svg")Mt=new b.Canvas({container:pt,width:tt,height:lt});else{var it={container:pt,width:tt,height:lt},U=this.get("pixelRatio");U&&(it.pixelRatio=U),Mt=new v.Canvas(it)}this.set("canvas",Mt)},dt.prototype.initPlugins=function(){var pt=this;Object(f.f)(pt.get("plugins"),function(Mt){!Mt.destroyed&&Mt.initPlugin&&Mt.initPlugin(pt)})},dt.prototype.toDataURL=function(pt,Mt){var tt=this.get("canvas"),lt=tt.getRenderer(),it=tt.get("el");pt||(pt="image/png");var U="";if(lt==="svg"){var P=it.cloneNode(!0),H=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",H);k.replaceChild(P,k.documentElement);var h=new XMLSerializer().serializeToString(k);U="data:image/svg+xml;charset=utf8,"+encodeURIComponent(h)}else{var g=void 0,G=it.getContext("2d"),V=this.get("width"),$=this.get("height"),rt=void 0;if(Mt){var ot=typeof window!="undefined"?window.devicePixelRatio:1;g=G.getImageData(0,0,V*ot,$*ot),rt=G.globalCompositeOperation,G.globalCompositeOperation="destination-over",G.fillStyle=Mt,G.fillRect(0,0,V,$)}U=it.toDataURL(pt),Mt&&(G.clearRect(0,0,V,$),G.putImageData(g,0,0),G.globalCompositeOperation=rt)}return U},dt.prototype.toFullDataURL=function(pt,Mt,tt){var lt=this.get("group").getCanvasBBox(),it=lt.height,U=lt.width,P=this.get("renderer"),H=Object(y.b)('<id="virtual-image"></div>'),k=tt?tt.backgroundColor:void 0,h=tt?tt.padding:void 0;h?Object(f.t)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var g=it+h[0]+h[2],G=U+h[1]+h[3],V={container:H,height:g,width:G,quickHit:!0},$=P==="svg"?new b.Canvas(V):new v.Canvas(V),rt=this.get("group").clone(),ot=Object(f.c)(rt.getMatrix());ot||(ot=[1,0,0,0,1,0,0,0,1]);var At=(lt.maxX+lt.minX)/2,gt=(lt.maxY+lt.minY)/2;ot=Ot(ot,[["t",-At,-gt],["t",U/2+h[3],it/2+h[0]]]),rt.resetMatrix(),rt.setMatrix(ot),$.add(rt);var mt=$.get("el"),bt="";Mt||(Mt="image/png"),setTimeout(function(){if(P==="svg"){var jt=mt.cloneNode(!0),Dt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ut=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Dt);Ut.replaceChild(jt,Ut.documentElement);var Ct=new XMLSerializer().serializeToString(Ut);bt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Ct)}else{var Vt=void 0,Ht=mt.getContext("2d"),re=void 0;if(k){var pe=typeof window!="undefined"?window.devicePixelRatio:1;Vt=Ht.getImageData(0,0,G*pe,g*pe),re=Ht.globalCompositeOperation,Ht.globalCompositeOperation="destination-over",Ht.fillStyle=k,Ht.fillRect(0,0,G,g)}bt=mt.toDataURL(Mt),k&&(Ht.clearRect(0,0,G,g),Ht.putImageData(Vt,0,0),Ht.globalCompositeOperation=re)}pt&&pt(bt)},16)},dt.prototype.downloadFullImage=function(pt,Mt,tt){var lt=this,it=this.get("group").getCanvasBBox(),U=it.height,P=it.width,H=this.get("renderer"),k=Object(y.b)('<id="virtual-image"></div>'),h=tt?tt.backgroundColor:void 0,g=tt?tt.padding:void 0;g?Object(f.t)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var G=U+g[0]+g[2],V=P+g[1]+g[3],$={container:k,height:G,width:V},rt=H==="svg"?new b.Canvas($):new v.Canvas($),ot=this.get("group").clone(),At=Object(f.c)(ot.getMatrix());At||(At=[1,0,0,0,1,0,0,0,1]);var gt=(it.maxX+it.minX)/2,mt=(it.maxY+it.minY)/2;At=Ot(At,[["t",-gt,-mt],["t",P/2+g[3],U/2+g[0]]]),ot.resetMatrix(),ot.setMatrix(At),rt.add(ot);var bt=rt.get("el");Mt||(Mt="image/png"),setTimeout(function(){var jt="";if(H==="svg"){var Dt=bt.cloneNode(!0),Ut=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ct=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ut);Ct.replaceChild(Dt,Ct.documentElement);var Vt=new XMLSerializer().serializeToString(Ct);jt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Vt)}else{var Ht=void 0,re=bt.getContext("2d"),pe=void 0;if(h){var ye=typeof window!="undefined"?window.devicePixelRatio:1;Ht=re.getImageData(0,0,V*ye,G*ye),pe=re.globalCompositeOperation,re.globalCompositeOperation="destination-over",re.fillStyle=h,re.fillRect(0,0,V,G)}jt=bt.toDataURL(Mt),h&&(re.clearRect(0,0,V,G),re.putImageData(Ht,0,0),re.globalCompositeOperation=pe)}var we=document.createElement("a"),Ne=(pt||"graph")+(H==="svg"?".svg":"."+Mt.split("/")[1]);lt.dataURLToImage(jt,H,we,Ne);var Ke=document.createEvent("MouseEvents");Ke.initEvent("click",!1,!1),we.dispatchEvent(Ke)},16)},dt.prototype.downloadImage=function(pt,Mt,tt){var lt=this,it=this;it.isAnimating()&&it.stopAnimate();var U=it.get("canvas").getRenderer();Mt||(Mt="image/png");var P=(pt||"graph")+(U==="svg"?".svg":Mt.split("/")[1]),H=document.createElement("a");setTimeout(function(){var k=it.toDataURL(Mt,tt);lt.dataURLToImage(k,U,H,P);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),H.dispatchEvent(h)},16)},dt.prototype.dataURLToImage=function(pt,Mt,tt,lt){if(typeof window!="undefined")if(window.Blob&&window.URL&&Mt!=="svg"){var it=pt.split(","),U="";if(it&&it.length>0){var P=it[0].match(/:(.*?);/);P&&P.length>=2&&(U=P[1])}for(var H=atob(it[1]),k=H.length,h=new Uint8Array(k);k--;)h[k]=H.charCodeAt(k);var g=new Blob([h],{type:U});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,lt):tt.addEventListener("click",function(){tt.download=lt,tt.href=window.URL.createObjectURL(g)})}else tt.addEventListener("click",function(){tt.download=lt,tt.href=pt})},dt.prototype.addPlugin=function(pt){pt.destroyed||(this.get("plugins").push(pt),pt.initPlugin(this))},dt.prototype.removePlugin=function(pt){var Mt=this.get("plugins"),tt=Mt.indexOf(pt);tt>=0&&(pt.destroyPlugin(),Mt.splice(tt,1))},dt.prototype.setImageWaterMarker=function(pt,Mt){pt===void 0&&(pt=I.a.waterMarkerImage);var tt=this.get("container");Object(f.x)(tt)&&(tt=document.getElementById(tt)),tt.style.position||(tt.style.position="relative");var lt=this.get("graphWaterMarker"),it=Object(f.e)({},I.a.imageWaterMarkerConfig,Mt),U=it.width,P=it.height,H=it.compatible,k=it.image;if(!lt){var h={container:tt,width:U,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),lt=new v.Canvas(h),this.set("graphWaterMarker",lt)}lt.get("el").style.display="none";var G=lt.get("context"),V=k.rotate,$=k.x,rt=k.y;G.rotate(-V*Math.PI/180);var ot=new Image;ot.crossOrigin="anonymous",ot.src=pt,ot.onload=function(){if(G.drawImage(ot,$,rt,k.width,k.height),G.rotate(V*Math.PI/180),H)tt.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var At=document.querySelector(".g6-graph-watermarker");At||((At=document.createElement("div")).className="g6-graph-watermarker"),At.className="g6-graph-watermarker",lt.destroyed||(At.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",tt.appendChild(At))}}},dt.prototype.setTextWaterMarker=function(pt,Mt){var tt=this.get("container");Object(f.x)(tt)&&(tt=document.getElementById(tt)),tt.style.position||(tt.style.position="relative");var lt=this.get("graphWaterMarker"),it=Object(f.e)({},I.a.textWaterMarkerConfig,Mt),U=it.width,P=it.height,H=it.compatible,k=it.text;if(!lt){var h={container:tt,width:U,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),lt=new v.Canvas(h),this.set("graphWaterMarker",lt)}lt.get("el").style.display="none";var G=lt.get("context"),V=k.rotate,$=k.fill,rt=k.fontFamily,ot=k.fontSize,At=k.baseline,gt=k.x,mt=k.y,bt=k.lineHeight;G.rotate(-V*Math.PI/180),G.font=ot+"px "+rt,G.fillStyle=$,G.textBaseline=At;for(var jt=pt.length-1;jt>=0;jt--)G.fillText(pt[jt],gt,mt+jt*bt);if(G.rotate(V*Math.PI/180),H)tt.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Dt=document.querySelector(".g6-graph-watermarker");Dt||((Dt=document.createElement("div")).className="g6-graph-watermarker"),Dt.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",tt.appendChild(Dt)}},dt.prototype.destroy=function(){Object(f.f)(this.get("plugins"),function(it){it.destroyPlugin()});var pt=this.get("tooltips");if(pt)for(var Mt=0;Mt<pt.length;Mt++){var tt=pt[Mt];if(tt){var lt=tt.parentElement;lt&&lt.removeChild(tt)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),ct.prototype.destroy.call(this)},dt}(M.b);A.a=X},function(a,A){a.exports=function(e){return e==null}},function(a,A,e){var i;function v(b){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}(function(b){var S=/^\s+/,f=/\s+$/,M=0,I=b.round,y=b.min,n=b.max,s=b.random;function d(g,G){if(G=G||{},(g=g||"")instanceof d)return g;if(!(this instanceof d))return new d(g,G);var V=function($){var rt={r:0,g:0,b:0},ot=1,At=null,gt=null,mt=null,bt=!1,jt=!1;typeof $=="string"&&($=function(Vt){Vt=Vt.replace(S,"").replace(f,"").toLowerCase();var Ht,re=!1;if(kt[Vt])Vt=kt[Vt],re=!0;else if(Vt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ht=k.rgb.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3]}:(Ht=k.rgba.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3],a:Ht[4]}:(Ht=k.hsl.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3]}:(Ht=k.hsla.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3],a:Ht[4]}:(Ht=k.hsv.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3]}:(Ht=k.hsva.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3],a:Ht[4]}:(Ht=k.hex8.exec(Vt))?{r:pt(Ht[1]),g:pt(Ht[2]),b:pt(Ht[3]),a:it(Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex6.exec(Vt))?{r:pt(Ht[1]),g:pt(Ht[2]),b:pt(Ht[3]),format:re?"name":"hex"}:(Ht=k.hex4.exec(Vt))?{r:pt(Ht[1]+""+Ht[1]),g:pt(Ht[2]+""+Ht[2]),b:pt(Ht[3]+""+Ht[3]),a:it(Ht[4]+""+Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex3.exec(Vt))?{r:pt(Ht[1]+""+Ht[1]),g:pt(Ht[2]+""+Ht[2]),b:pt(Ht[3]+""+Ht[3]),format:re?"name":"hex"}:!1}($)),v($)=="object"&&(h($.r)&&h($.g)&&h($.b)?(Dt=$.r,Ut=$.g,Ct=$.b,rt={r:255*ct(Dt,255),g:255*ct(Ut,255),b:255*ct(Ct,255)},bt=!0,jt=String($.r).substr(-1)==="%"?"prgb":"rgb"):h($.h)&&h($.s)&&h($.v)?(At=tt($.s),gt=tt($.v),rt=function(Vt,Ht,re){Vt=6*ct(Vt,360),Ht=ct(Ht,100),re=ct(re,100);var pe=b.floor(Vt),ye=Vt-pe,we=re*(1-Ht),Ne=re*(1-ye*Ht),Ke=re*(1-(1-ye)*Ht),pn=pe%6;return{r:255*[re,Ne,we,we,Ke,re][pn],g:255*[Ke,re,re,Ne,we,we][pn],b:255*[we,we,Ke,re,re,Ne][pn]}}($.h,At,gt),bt=!0,jt="hsv"):h($.h)&&h($.s)&&h($.l)&&(At=tt($.s),mt=tt($.l),rt=function(Vt,Ht,re){var pe,ye,we;function Ne(hn,kn,Tn){return Tn<0&&(Tn+=1),Tn>1&&(Tn-=1),Tn<1/6?hn+6*(kn-hn)*Tn:Tn<.5?kn:Tn<2/3?hn+(kn-hn)*(2/3-Tn)*6:hn}if(Vt=ct(Vt,360),Ht=ct(Ht,100),re=ct(re,100),Ht===0)pe=ye=we=re;else{var Ke=re<.5?re*(1+Ht):re+Ht-re*Ht,pn=2*re-Ke;pe=Ne(pn,Ke,Vt+1/3),ye=Ne(pn,Ke,Vt),we=Ne(pn,Ke,Vt-1/3)}return{r:255*pe,g:255*ye,b:255*we}}($.h,At,mt),bt=!0,jt="hsl"),$.hasOwnProperty("a")&&(ot=$.a));var Dt,Ut,Ct;return ot=X(ot),{ok:bt,format:$.format||jt,r:y(255,n(rt.r,0)),g:y(255,n(rt.g,0)),b:y(255,n(rt.b,0)),a:ot}}(g);this._originalInput=g,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=I(100*this._a)/100,this._format=G.format||V.format,this._gradientType=G.gradientType,this._r<1&&(this._r=I(this._r)),this._g<1&&(this._g=I(this._g)),this._b<1&&(this._b=I(this._b)),this._ok=V.ok,this._tc_id=M++}function E(g,G,V){g=ct(g,255),G=ct(G,255),V=ct(V,255);var $,rt,ot=n(g,G,V),At=y(g,G,V),gt=(ot+At)/2;if(ot==At)$=rt=0;else{var mt=ot-At;switch(rt=gt>.5?mt/(2-ot-At):mt/(ot+At),ot){case g:$=(G-V)/mt+(G<V?6:0);break;case G:$=(V-g)/mt+2;break;case V:$=(g-G)/mt+4}$/=6}return{h:$,s:rt,l:gt}}function O(g,G,V){g=ct(g,255),G=ct(G,255),V=ct(V,255);var $,rt,ot=n(g,G,V),At=y(g,G,V),gt=ot,mt=ot-At;if(rt=ot===0?0:mt/ot,ot==At)$=0;else{switch(ot){case g:$=(G-V)/mt+(G<V?6:0);break;case G:$=(V-g)/mt+2;break;case V:$=(g-G)/mt+4}$/=6}return{h:$,s:rt,v:gt}}function C(g,G,V,$){var rt=[Mt(I(g).toString(16)),Mt(I(G).toString(16)),Mt(I(V).toString(16))];return $&&rt[0].charAt(0)==rt[0].charAt(1)&&rt[1].charAt(0)==rt[1].charAt(1)&&rt[2].charAt(0)==rt[2].charAt(1)?rt[0].charAt(0)+rt[1].charAt(0)+rt[2].charAt(0):rt.join("")}function p(g,G,V,$){return[Mt(lt($)),Mt(I(g).toString(16)),Mt(I(G).toString(16)),Mt(I(V).toString(16))].join("")}function x(g,G){G=G===0?0:G||10;var V=d(g).toHsl();return V.s-=G/100,V.s=dt(V.s),d(V)}function T(g,G){G=G===0?0:G||10;var V=d(g).toHsl();return V.s+=G/100,V.s=dt(V.s),d(V)}function N(g){return d(g).desaturate(100)}function Y(g,G){G=G===0?0:G||10;var V=d(g).toHsl();return V.l+=G/100,V.l=dt(V.l),d(V)}function q(g,G){G=G===0?0:G||10;var V=d(g).toRgb();return V.r=n(0,y(255,V.r-I(-G/100*255))),V.g=n(0,y(255,V.g-I(-G/100*255))),V.b=n(0,y(255,V.b-I(-G/100*255))),d(V)}function nt(g,G){G=G===0?0:G||10;var V=d(g).toHsl();return V.l-=G/100,V.l=dt(V.l),d(V)}function vt(g,G){var V=d(g).toHsl(),$=(V.h+G)%360;return V.h=$<0?360+$:$,d(V)}function ht(g){var G=d(g).toHsl();return G.h=(G.h+180)%360,d(G)}function St(g){var G=d(g).toHsl(),V=G.h;return[d(g),d({h:(V+120)%360,s:G.s,l:G.l}),d({h:(V+240)%360,s:G.s,l:G.l})]}function wt(g){var G=d(g).toHsl(),V=G.h;return[d(g),d({h:(V+90)%360,s:G.s,l:G.l}),d({h:(V+180)%360,s:G.s,l:G.l}),d({h:(V+270)%360,s:G.s,l:G.l})]}function xt(g){var G=d(g).toHsl(),V=G.h;return[d(g),d({h:(V+72)%360,s:G.s,l:G.l}),d({h:(V+216)%360,s:G.s,l:G.l})]}function ft(g,G,V){G=G||6,V=V||30;var $=d(g).toHsl(),rt=360/V,ot=[d(g)];for($.h=($.h-(rt*G>>1)+720)%360;--G;)$.h=($.h+rt)%360,ot.push(d($));return ot}function Ft(g,G){G=G||6;for(var V=d(g).toHsv(),$=V.h,rt=V.s,ot=V.v,At=[],gt=1/G;G--;)At.push(d({h:$,s:rt,v:ot})),ot=(ot+gt)%1;return At}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(299*G.r+587*G.g+114*G.b)/1e3},getLuminance:function(){var G,V,$,rt=this.toRgb();return G=rt.r/255,V=rt.g/255,$=rt.b/255,.2126*(G<=.03928?G/12.92:b.pow((G+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:b.pow((V+.055)/1.055,2.4))+.0722*($<=.03928?$/12.92:b.pow(($+.055)/1.055,2.4))},setAlpha:function(G){return this._a=X(G),this._roundA=I(100*this._a)/100,this},toHsv:function(){var G=O(this._r,this._g,this._b);return{h:360*G.h,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=O(this._r,this._g,this._b),V=I(360*G.h),$=I(100*G.s),rt=I(100*G.v);return this._a==1?"hsv("+V+", "+$+"%, "+rt+"%)":"hsva("+V+", "+$+"%, "+rt+"%, "+this._roundA+")"},toHsl:function(){var G=E(this._r,this._g,this._b);return{h:360*G.h,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=E(this._r,this._g,this._b),V=I(360*G.h),$=I(100*G.s),rt=I(100*G.l);return this._a==1?"hsl("+V+", "+$+"%, "+rt+"%)":"hsla("+V+", "+$+"%, "+rt+"%, "+this._roundA+")"},toHex:function(G){return C(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return function(V,$,rt,ot,At){var gt=[Mt(I(V).toString(16)),Mt(I($).toString(16)),Mt(I(rt).toString(16)),Mt(lt(ot))];return At&&gt[0].charAt(0)==gt[0].charAt(1)&&gt[1].charAt(0)==gt[1].charAt(1)&&gt[2].charAt(0)==gt[2].charAt(1)&&gt[3].charAt(0)==gt[3].charAt(1)?gt[0].charAt(0)+gt[1].charAt(0)+gt[2].charAt(0)+gt[3].charAt(0):gt.join("")}(this._r,this._g,this._b,this._a,G)},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:I(this._r),g:I(this._g),b:I(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+I(this._r)+", "+I(this._g)+", "+I(this._b)+")":"rgba("+I(this._r)+", "+I(this._g)+", "+I(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:I(100*ct(this._r,255))+"%",g:I(100*ct(this._g,255))+"%",b:I(100*ct(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+I(100*ct(this._r,255))+"%, "+I(100*ct(this._g,255))+"%, "+I(100*ct(this._b,255))+"%)":"rgba("+I(100*ct(this._r,255))+"%, "+I(100*ct(this._g,255))+"%, "+I(100*ct(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ot[C(this._r,this._g,this._b,!0)]||!1)},toFilter:function(G){var V="#"+p(this._r,this._g,this._b,this._a),$=V,rt=this._gradientType?"GradientType = 1, ":"";if(G){var ot=d(G);$="#"+p(ot._r,ot._g,ot._b,ot._a)}return"progid:DXImageTransform.Microsoft.gradient("+rt+"startColorstr="+V+",endColorstr="+$+")"},toString:function(G){var V=!!G;G=G||this._format;var $=!1,rt=this._a<1&&this._a>=0;return V||!rt||G!=="hex"&&G!=="hex6"&&G!=="hex3"&&G!=="hex4"&&G!=="hex8"&&G!=="name"?(G==="rgb"&&($=this.toRgbString()),G==="prgb"&&($=this.toPercentageRgbString()),G!=="hex"&&G!=="hex6"||($=this.toHexString()),G==="hex3"&&($=this.toHexString(!0)),G==="hex4"&&($=this.toHex8String(!0)),G==="hex8"&&($=this.toHex8String()),G==="name"&&($=this.toName()),G==="hsl"&&($=this.toHslString()),G==="hsv"&&($=this.toHsvString()),$||this.toHexString()):G==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(G,V){var $=G.apply(null,[this].concat([].slice.call(V)));return this._r=$._r,this._g=$._g,this._b=$._b,this.setAlpha($._a),this},lighten:function(){return this._applyModification(Y,arguments)},brighten:function(){return this._applyModification(q,arguments)},darken:function(){return this._applyModification(nt,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(N,arguments)},spin:function(){return this._applyModification(vt,arguments)},_applyCombination:function(G,V){return G.apply(null,[this].concat([].slice.call(V)))},analogous:function(){return this._applyCombination(ft,arguments)},complement:function(){return this._applyCombination(ht,arguments)},monochromatic:function(){return this._applyCombination(Ft,arguments)},splitcomplement:function(){return this._applyCombination(xt,arguments)},triad:function(){return this._applyCombination(St,arguments)},tetrad:function(){return this._applyCombination(wt,arguments)}},d.fromRatio=function(g,G){if(v(g)=="object"){var V={};for(var $ in g)g.hasOwnProperty($)&&(V[$]=$==="a"?g[$]:tt(g[$]));g=V}return d(g,G)},d.equals=function(g,G){return!(!g||!G)&&d(g).toRgbString()==d(G).toRgbString()},d.random=function(){return d.fromRatio({r:s(),g:s(),b:s()})},d.mix=function(g,G,V){V=V===0?0:V||50;var $=d(g).toRgb(),rt=d(G).toRgb(),ot=V/100;return d({r:(rt.r-$.r)*ot+$.r,g:(rt.g-$.g)*ot+$.g,b:(rt.b-$.b)*ot+$.b,a:(rt.a-$.a)*ot+$.a})},d.readability=function(g,G){var V=d(g),$=d(G);return(b.max(V.getLuminance(),$.getLuminance())+.05)/(b.min(V.getLuminance(),$.getLuminance())+.05)},d.isReadable=function(g,G,V){var $,rt,ot=d.readability(g,G);switch(rt=!1,($=function(At){var gt,mt;return gt=((At=At||{level:"AA",size:"small"}).level||"AA").toUpperCase(),mt=(At.size||"small").toLowerCase(),gt!=="AA"&&gt!=="AAA"&&(gt="AA"),mt!=="small"&&mt!=="large"&&(mt="small"),{level:gt,size:mt}}(V)).level+$.size){case"AAsmall":case"AAAlarge":rt=ot>=4.5;break;case"AAlarge":rt=ot>=3;break;case"AAAsmall":rt=ot>=7}return rt},d.mostReadable=function(g,G,V){var $,rt,ot,At,gt=null,mt=0;rt=(V=V||{}).includeFallbackColors,ot=V.level,At=V.size;for(var bt=0;bt<G.length;bt++)($=d.readability(g,G[bt]))>mt&&(mt=$,gt=d(G[bt]));return d.isReadable(g,gt,{level:ot,size:At})||!rt?gt:(V.includeFallbackColors=!1,d.mostReadable(g,["#fff","#000"],V))};var kt=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ot=d.hexNames=function(g){var G={};for(var V in g)g.hasOwnProperty(V)&&(G[g[V]]=V);return G}(kt);function X(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function ct(g,G){(function($){return typeof $=="string"&&$.indexOf(".")!=-1&&parseFloat($)===1})(g)&&(g="100%");var V=function($){return typeof $=="string"&&$.indexOf("%")!=-1}(g);return g=y(G,n(0,parseFloat(g))),V&&(g=parseInt(g*G,10)/100),b.abs(g-G)<1e-6?1:g%G/parseFloat(G)}function dt(g){return y(1,n(0,g))}function pt(g){return parseInt(g,16)}function Mt(g){return g.length==1?"0"+g:""+g}function tt(g){return g<=1&&(g=100*g+"%"),g}function lt(g){return b.round(255*parseFloat(g)).toString(16)}function it(g){return pt(g)/255}var U,P,H,k=(P="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",H="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function h(g){return!!k.CSS_UNIT.exec(g)}a.exports?a.exports=d:(i=function(){return d}.call(A,e,A,a))===void 0||(a.exports=i)})(Math)},function(a,A,e){a.exports={EPSILON:e(233),create:e(234),clone:e(477),fromValues:e(478),copy:e(479),set:e(235),equals:e(480),exactEquals:e(481),add:e(236),subtract:e(150),sub:e(482),multiply:e(237),mul:e(483),divide:e(238),div:e(484),inverse:e(485),min:e(486),max:e(487),rotate:e(488),floor:e(489),ceil:e(490),round:e(491),scale:e(492),scaleAndAdd:e(493),distance:e(239),dist:e(494),squaredDistance:e(240),sqrDist:e(495),length:e(241),len:e(496),squaredLength:e(242),sqrLen:e(497),negate:e(498),normalize:e(243),dot:e(244),cross:e(499),lerp:e(500),random:e(501),transformMat2:e(502),transformMat2d:e(503),transformMat3:e(504),transformMat4:e(505),forEach:e(506),limit:e(507)}},function(a,A,e){var i=e(96),v=e(278),b=e(279),S=e(280),f=e(281),M=e(282);function I(y){var n=this.__data__=new i(y);this.size=n.size}I.prototype.clear=v,I.prototype.delete=b,I.prototype.get=S,I.prototype.has=f,I.prototype.set=M,a.exports=I},function(a,A,e){var i=e(273),v=e(274),b=e(275),S=e(276),f=e(277);function M(I){var y=-1,n=I==null?0:I.length;for(this.clear();++y<n;){var s=I[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=v,M.prototype.get=b,M.prototype.has=S,M.prototype.set=f,a.exports=M},function(a,A,e){var i=e(71);a.exports=function(v,b){for(var S=v.length;S--;)if(i(v[S][0],b))return S;return-1}},function(a,A,e){var i=e(64)(Object,"create");a.exports=i},function(a,A,e){var i=e(297);a.exports=function(v,b){var S=v.__data__;return i(b)?S[typeof b=="string"?"string":"hash"]:S.map}},function(a,A,e){var i=e(101),v=e(71),b=Object.prototype.hasOwnProperty;a.exports=function(S,f,M){var I=S[f];b.call(S,f)&&v(I,M)&&(M!==void 0||f in S)||i(S,f,M)}},function(a,A,e){var i=e(166);a.exports=function(v,b,S){b=="__proto__"&&i?i(v,b,{configurable:!0,enumerable:!0,value:S,writable:!0}):v[b]=S}},function(a,A){function e(v){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}var i=/^(?:0|[1-9]\d*)$/;a.exports=function(v,b){var S=e(v);return!!(b=b==null?9007199254740991:b)&&(S=="number"||S!="symbol"&&i.test(v))&&v>-1&&v%1==0&&v<b}},function(a,A){a.exports=function(e){return function(i){return e(i)}}},function(a,A){var e=Object.prototype;a.exports=function(i){var v=i&&i.constructor;return i===(typeof v=="function"&&v.prototype||e)}},function(a,A,e){var i=e(168)(Object.getPrototypeOf,Object);a.exports=i},function(a,A,e){var i=e(135),v=e(326)(i);a.exports=v},function(a,A,e){var i=e(108),v=e(87);a.exports=function(b,S){for(var f=0,M=(S=i(S,b)).length;b!=null&&f<M;)b=b[v(S[f++])];return f&&f==M?b:void 0}},function(a,A,e){var i=e(26),v=e(138),b=e(340),S=e(191);a.exports=function(f,M){return i(f)?f:v(f,M)?[f]:b(S(f))}},function(a,A){a.exports=function(e,i){for(var v=-1,b=e==null?0:e.length,S=Array(b);++v<b;)S[v]=i(e[v],v,e);return S}},function(a,A,e){var i=e(66),v=e(200),b=e(201);a.exports=function(S,f){return b(v(S,f,i),S+"")}},function(a,A,e){function i(M){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(M)}var v=e(71),b=e(53),S=e(102),f=e(43);a.exports=function(M,I,y){if(!f(y))return!1;var n=i(I);return!!(n=="number"?b(y)&&S(I,y.length):n=="string"&&I in y)&&v(y[I],M)}},function(a,A,e){"use strict";var i=e(24);a.exports={longestPath:function(b){var S={};i.forEach(b.sources(),function f(M){var I=b.node(M);if(i.has(S,M))return I.rank;S[M]=!0;var y=i.min(i.map(b.outEdges(M),function(n){return f(n.w)-b.edge(n).minlen}));return y!==Number.POSITIVE_INFINITY&&y!=null||(y=0),I.rank=y})},slack:function(b,S){return b.node(S.w).rank-b.node(S.v).rank-b.edge(S).minlen}}},function(a,A){},function(a,A,e){"use strict";var i=function(){function v(b,S){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=b,this.name=b,this.originalEvent=S,this.timeStamp=S.timeStamp}return v.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},v.prototype.stopPropagation=function(){this.propagationStopped=!0},v.prototype.toString=function(){return"[Event (type="+this.type+")]"},v.prototype.save=function(){},v.prototype.restore=function(){},v}();A.a=i},function(a,A,e){"use strict";var i=e(1),v=e(79),b=e(19),S=function(f){function M(I){var y=f.call(this)||this;y.destroyed=!1;var n=y.getDefaultCfg();return y.cfg=Object(b.i)(n,I),y}return Object(i.b)(M,f),M.prototype.getDefaultCfg=function(){return{}},M.prototype.get=function(I){return this.cfg[I]},M.prototype.set=function(I,y){this.cfg[I]=y},M.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},M}(v.a);A.a=S},function(a,A,e){"use strict";e.d(A,"a",function(){return v});var i=null;function v(){if(!i){var b=document.createElement("canvas");b.width=1,b.height=1,i=b.getContext("2d")}return i}},function(a,A,e){"use strict";var i=e(1),v=e(118),b=e(19),S={},f=function(M){function I(){return M!==null&&M.apply(this,arguments)||this}return Object(i.b)(I,M),I.prototype.isCanvas=function(){return!1},I.prototype.getBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,E=[],O=[],C=this.getChildren().filter(function(p){return p.get("visible")&&(!p.isGroup()||p.isGroup()&&p.getChildren().length>0)});return C.length>0?(Object(b.a)(C,function(p){var x=p.getBBox();E.push(x.minX,x.maxX),O.push(x.minY,x.maxY)}),y=Math.min.apply(null,E),n=Math.max.apply(null,E),s=Math.min.apply(null,O),d=Math.max.apply(null,O)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},I.prototype.getCanvasBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,E=[],O=[],C=this.getChildren().filter(function(p){return p.get("visible")&&(!p.isGroup()||p.isGroup()&&p.getChildren().length>0)});return C.length>0?(Object(b.a)(C,function(p){var x=p.getCanvasBBox();E.push(x.minX,x.maxX),O.push(x.minY,x.maxY)}),y=Math.min.apply(null,E),n=Math.max.apply(null,E),s=Math.min.apply(null,O),d=Math.max.apply(null,O)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},I.prototype.getDefaultCfg=function(){var y=M.prototype.getDefaultCfg.call(this);return y.children=[],y},I.prototype.onAttrChange=function(y,n,s){if(M.prototype.onAttrChange.call(this,y,n,s),y==="matrix"){var d=this.getTotalMatrix();this._applyChildrenMarix(d)}},I.prototype.applyMatrix=function(y){var n=this.getTotalMatrix();M.prototype.applyMatrix.call(this,y);var s=this.getTotalMatrix();s!==n&&this._applyChildrenMarix(s)},I.prototype._applyChildrenMarix=function(y){var n=this.getChildren();Object(b.a)(n,function(s){s.applyMatrix(y)})},I.prototype.addShape=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s=y[0],d=y[1];Object(b.f)(s)?d=s:d.type=s;var E=S[d.type];E||(E=Object(b.k)(d.type),S[d.type]=E);var O=this.getShapeBase(),C=new O[E](d);return this.add(C),C},I.prototype.addGroup=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s,d=y[0],E=y[1];if(Object(b.d)(d))s=new d(E||{parent:this});else{var O=d||{},C=this.getGroupBase();s=new C(O)}return this.add(s),s},I.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},I.prototype.getShape=function(y,n,s){if(!Object(b.b)(this))return null;var d,E=this.getChildren();if(this.isCanvas())d=this._findShape(E,y,n,s);else{var O=[y,n,1];O=this.invertFromMatrix(O),this.isClipped(O[0],O[1])||(d=this._findShape(E,O[0],O[1],s))}return d},I.prototype._findShape=function(y,n,s,d){for(var E=null,O=y.length-1;O>=0;O--){var C=y[O];if(Object(b.b)(C)&&(C.isGroup()?E=C.getShape(n,s,d):C.isHit(n,s)&&(E=C)),E)break}return E},I.prototype.add=function(y){var n=this.getCanvas(),s=this.getChildren(),d=this.get("timeline"),E=y.getParent();E&&function(O,C,p){p===void 0&&(p=!0),p?C.destroy():(C.set("parent",null),C.set("canvas",null)),Object(b.j)(O.getChildren(),C)}(E,y,!1),y.set("parent",this),n&&function O(C,p){if(C.set("canvas",p),C.isGroup()){var x=C.get("children");x.length&&x.forEach(function(T){O(T,p)})}}(y,n),d&&function O(C,p){if(C.set("timeline",p),C.isGroup()){var x=C.get("children");x.length&&x.forEach(function(T){O(T,p)})}}(y,d),s.push(y),y.onCanvasChange("add"),this._applyElementMatrix(y)},I.prototype._applyElementMatrix=function(y){var n=this.getTotalMatrix();n&&y.applyMatrix(n)},I.prototype.getChildren=function(){return this.get("children")},I.prototype.sort=function(){var y,n=this.getChildren();Object(b.a)(n,function(s,d){return s._INDEX=d,s}),n.sort((y=function(d,E){return d.get("zIndex")-E.get("zIndex")},function(s,d){var E=y(s,d);return E===0?s._INDEX-d._INDEX:E})),this.onCanvasChange("sort")},I.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var y=this.getChildren(),n=y.length-1;n>=0;n--)y[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},I.prototype.destroy=function(){this.get("destroyed")||(this.clear(),M.prototype.destroy.call(this))},I.prototype.getFirst=function(){return this.getChildByIndex(0)},I.prototype.getLast=function(){var y=this.getChildren();return this.getChildByIndex(y.length-1)},I.prototype.getChildByIndex=function(y){return this.getChildren()[y]},I.prototype.getCount=function(){return this.getChildren().length},I.prototype.contain=function(y){return this.getChildren().indexOf(y)>-1},I.prototype.removeChild=function(y,n){n===void 0&&(n=!0),this.contain(y)&&y.remove(n)},I.prototype.findAll=function(y){var n=[],s=this.getChildren();return Object(b.a)(s,function(d){y(d)&&n.push(d),d.isGroup()&&(n=n.concat(d.findAll(y)))}),n},I.prototype.find=function(y){var n=null,s=this.getChildren();return Object(b.a)(s,function(d){if(y(d)?n=d:d.isGroup()&&(n=d.find(y)),n)return!1}),n},I.prototype.findById=function(y){return this.find(function(n){return n.get("id")===y})},I.prototype.findByClassName=function(y){return this.find(function(n){return n.get("className")===y})},I.prototype.findAllByName=function(y){return this.findAll(function(n){return n.get("name")===y})},I}(v.a);A.a=f},function(a,A,e){"use strict";var i=e(1),v=e(0),b=e(10),S=e(19),f=e(39),M=e(115),I=b.a.transform,y=["zIndex","capture","visible","type"],n=["repeat"];function s(C,p){var x={},T=p.attrs;for(var N in C)x[N]=T[N];return x}function d(C,p){var x={},T=p.attr();return Object(v.f)(C,function(N,Y){n.indexOf(Y)!==-1||Object(v.q)(T[Y],N)||(x[Y]=N)}),x}function E(C,p){if(p.onFrame)return C;var x=p.startTime,T=p.delay,N=p.duration,Y=Object.prototype.hasOwnProperty;return Object(v.f)(C,function(q){x+T<q.startTime+q.delay+q.duration&&N>q.delay&&Object(v.f)(p.toAttrs,function(nt,vt){Y.call(q.toAttrs,vt)&&(delete q.toAttrs[vt],delete q.fromAttrs[vt])})}),C}var O=function(C){function p(x){var T=C.call(this,x)||this;T.attrs={};var N=T.getDefaultAttrs();return Object(v.A)(N,x.attrs),T.attrs=N,T.initAttrs(N),T.initAnimate(),T}return Object(i.b)(p,C),p.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},p.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},p.prototype.onCanvasChange=function(x){},p.prototype.initAttrs=function(x){},p.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},p.prototype.isGroup=function(){return!1},p.prototype.getParent=function(){return this.get("parent")},p.prototype.getCanvas=function(){return this.get("canvas")},p.prototype.attr=function(){for(var x,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var Y=T[0],q=T[1];if(!Y)return this.attrs;if(Object(v.v)(Y)){for(var nt in Y)this.setAttr(nt,Y[nt]);return this.afterAttrsChange(Y),this}return T.length===2?(this.setAttr(Y,q),this.afterAttrsChange(((x={})[Y]=q,x)),this):this.attrs[Y]},p.prototype.isClipped=function(x,T){var N=this.getClip();return N&&!N.isHit(x,T)},p.prototype.setAttr=function(x,T){var N=this.attrs[x];N!==T&&(this.attrs[x]=T,this.onAttrChange(x,T,N))},p.prototype.onAttrChange=function(x,T,N){x==="matrix"&&this.set("totalMatrix",null)},p.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var T=this.cfg.applyTo;T&&T.onCanvasChange("clip")}else this.onCanvasChange("attr")},p.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},p.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},p.prototype.setZIndex=function(x){this.set("zIndex",x);var T=this.getParent();return T&&T.sort(),this},p.prototype.toFront=function(){var x=this.getParent();if(x){var T=x.getChildren(),N=(this.get("el"),T.indexOf(this));T.splice(N,1),T.push(this),this.onCanvasChange("zIndex")}},p.prototype.toBack=function(){var x=this.getParent();if(x){var T=x.getChildren(),N=(this.get("el"),T.indexOf(this));T.splice(N,1),T.unshift(this),this.onCanvasChange("zIndex")}},p.prototype.remove=function(x){x===void 0&&(x=!0);var T=this.getParent();T?(Object(S.j)(T.getChildren(),this),T.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},p.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},p.prototype.getMatrix=function(){return this.attr("matrix")},p.prototype.setMatrix=function(x){this.attr("matrix",x),this.onCanvasChange("matrix")},p.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var T=this.attr("matrix"),N=this.cfg.parentMatrix;x=N&&T?Object(f.b)(N,T):T||N,this.set("totalMatrix",x)}return x},p.prototype.applyMatrix=function(x){var T=this.attr("matrix"),N=null;N=x&&T?Object(f.b)(x,T):T||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},p.prototype.getDefaultMatrix=function(){return null},p.prototype.applyToMatrix=function(x){var T=this.attr("matrix");return T?Object(f.c)(T,x):x},p.prototype.invertFromMatrix=function(x){var T=this.attr("matrix");if(T){var N=Object(f.a)(T);if(N)return Object(f.c)(N,x)}return x},p.prototype.setClip=function(x){var T=this.getCanvas(),N=null;if(x){var Y=this.getShapeBase()[Object(v.I)(x.type)];Y&&(N=new Y({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:T}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},p.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},p.prototype.clone=function(){var x=this,T=this.attrs,N={};Object(v.f)(T,function(q,nt){Object(v.m)(T[nt])?N[nt]=function(vt){for(var ht=[],St=0;St<vt.length;St++)Object(v.m)(vt[St])?ht.push([].concat(vt[St])):ht.push(vt[St]);return ht}(T[nt]):N[nt]=T[nt]});var Y=new this.constructor({attrs:N});return Object(v.f)(y,function(q){Y.set(q,x.get(q))}),Y},p.prototype.destroy=function(){this.destroyed||(this.attrs={},C.prototype.destroy.call(this))},p.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},p.prototype.animate=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=this.isCanvas&&this.isCanvas();if(N||this.get("canvas")){this.set("animating",!0);var Y=this.get("timeline");Y||(Y=this.get("canvas").get("timeline"),this.set("timeline",Y));var q=this.get("animations")||[];Y.timer||Y.initTimer();var nt,vt,ht,St,wt,xt=x[0],ft=x[1],Ft=x[2],kt=Ft===void 0?"easeLinear":Ft,Ot=x[3],X=Ot===void 0?v.C:Ot,ct=x[4],dt=ct===void 0?0:ct;Object(v.r)(xt)?(nt=xt,xt={}):Object(v.v)(xt)&&xt.onFrame&&(nt=xt.onFrame,vt=xt.repeat),Object(v.v)(ft)?(ft=(wt=ft).duration,kt=wt.easing||"easeLinear",dt=wt.delay||0,vt=wt.repeat||vt||!1,X=wt.callback||v.C,ht=wt.pauseCallback||v.C,St=wt.resumeCallback||v.C):(Object(v.t)(X)&&(dt=X,X=null),Object(v.r)(kt)?(X=kt,kt="easeLinear"):kt=kt||"easeLinear");var pt=d(xt,this),Mt={fromAttrs:s(pt,this),toAttrs:pt,duration:ft,easing:kt,repeat:vt,callback:X,pauseCallback:ht,resumeCallback:St,delay:dt,startTime:Y.getTime(),id:Object(v.H)(),onFrame:nt,pathFormatted:!1};q.length>0?q=E(q,Mt):Y.addAnimator(this),q.push(Mt),this.set("animations",q),this.set("_pause",{isPaused:!1})}},p.prototype.stopAnimate=function(x){var T=this;x===void 0&&(x=!0);var N=this.get("animations");Object(v.f)(N,function(Y){x&&(Y.onFrame?T.attr(Y.onFrame(1)):T.attr(Y.toAttrs)),Y.callback&&Y.callback()}),this.set("animating",!1),this.set("animations",[])},p.prototype.pauseAnimate=function(){var x=this.get("timeline"),T=this.get("animations"),N=x.getTime();return Object(v.f)(T,function(Y){Y._paused=!0,Y._pauseTime=N,Y.pauseCallback&&Y.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},p.prototype.resumeAnimate=function(){var x=this.get("timeline").getTime(),T=this.get("animations"),N=this.get("_pause").pauseTime;return Object(v.f)(T,function(Y){Y.startTime=Y.startTime+(x-N),Y._paused=!1,Y._pauseTime=null,Y.resumeCallback&&Y.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",T),this},p.prototype.emitDelegation=function(x,T){var N,Y=this,q=T.propagationPath;this.getEvents(),x==="mouseenter"?N=T.fromShape:x==="mouseleave"&&(N=T.toShape);for(var nt=function(wt){var xt=q[wt],ft=xt.get("name");if(ft){if((xt.isGroup()||xt.isCanvas&&xt.isCanvas())&&N&&Object(S.g)(xt,N))return"break";Object(v.m)(ft)?Object(v.f)(ft,function(Ft){Y.emitDelegateEvent(xt,Ft,T)}):vt.emitDelegateEvent(xt,ft,T)}},vt=this,ht=0;ht<q.length&&nt(ht)!=="break";ht++);},p.prototype.emitDelegateEvent=function(x,T,N){var Y=this.getEvents(),q=T+":"+N.type;(Y[q]||Y["*"])&&(N.name=q,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(q,N))},p.prototype.translate=function(x,T){x===void 0&&(x=0),T===void 0&&(T=0);var N=this.getMatrix(),Y=I(N,[["t",x,T]]);return this.setMatrix(Y),this},p.prototype.move=function(x,T){var N=this.attr("x")||0,Y=this.attr("y")||0;return this.translate(x-N,T-Y),this},p.prototype.moveTo=function(x,T){return this.move(x,T)},p.prototype.scale=function(x,T){var N=this.getMatrix(),Y=I(N,[["s",x,T||x]]);return this.setMatrix(Y),this},p.prototype.rotate=function(x){var T=this.getMatrix(),N=I(T,[["r",x]]);return this.setMatrix(N),this},p.prototype.rotateAtStart=function(x){var T=this.attr(),N=T.x,Y=T.y,q=this.getMatrix(),nt=I(q,[["t",-N,-Y],["r",x],["t",N,Y]]);return this.setMatrix(nt),this},p.prototype.rotateAtPoint=function(x,T,N){var Y=this.getMatrix(),q=I(Y,[["t",-x,-T],["r",N],["t",x,T]]);return this.setMatrix(q),this},p}(M.a);A.a=O},function(a,A,e){"use strict";(function(i){e.d(A,"a",function(){return d});var v=function(){for(var p=0,x=0,T=arguments.length;x<T;x++)p+=arguments[x].length;var N=Array(p),Y=0;for(x=0;x<T;x++)for(var q=arguments[x],nt=0,vt=q.length;nt<vt;nt++,Y++)N[Y]=q[nt];return N},b=function(p,x,T){this.name=p,this.version=x,this.os=T,this.type="browser"},S=function(p){this.version=p,this.type="node",this.name="node",this.os=i.platform},f=function(p,x,T,N){this.name=p,this.version=x,this.os=T,this.bot=N,this.type="bot-device"},M=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},I=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},y=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],s=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(C){return C?O(C):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new I:typeof navigator!="undefined"?O(navigator.userAgent):i!==void 0&&i.version?new S(i.version.slice(1)):null}function E(C){return C!==""&&n.reduce(function(p,x){var T=x[0],N=x[1];if(p)return p;var Y=N.exec(C);return!!Y&&[T,Y]},!1)}function O(C){var p=E(C);if(!p)return null;var x=p[0],T=p[1];if(x==="searchbot")return new M;var N=T[1]&&T[1].split(/[._]/).slice(0,3);N?N.length<3&&(N=v(N,function(vt){for(var ht=[],St=0;St<vt;St++)ht.push("0");return ht}(3-N.length))):N=[];var Y=N.join("."),q=function(vt){for(var ht=0,St=s.length;ht<St;ht++){var wt=s[ht],xt=wt[0];if(wt[1].exec(vt))return xt}return null}(C),nt=y.exec(C);return nt&&nt[1]?new f(x,Y,q,nt[1]):new b(x,Y,q)}}).call(this,e(158))},function(a,A,e){"use strict";e.d(A,"b",function(){return I}),e.d(A,"a",function(){return y});var i=e(17),v=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,b=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,S=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,f=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function M(n,s){var d=n.match(f);Object(i.c)(d,function(E){var O=E.split(":");s.addColorStop(O[0],O[1])})}function I(n,s,d){if(Object(i.k)(d)){if(d[1]==="("||d[2]==="("){if(d[0]==="l")return function(E,O,C){var p,x,T=v.exec(C),N=parseFloat(T[1])%360*(Math.PI/180),Y=T[2],q=O.getBBox();N>=0&&N<.5*Math.PI?(p={x:q.minX,y:q.minY},x={x:q.maxX,y:q.maxY}):.5*Math.PI<=N&&N<Math.PI?(p={x:q.maxX,y:q.minY},x={x:q.minX,y:q.maxY}):Math.PI<=N&&N<1.5*Math.PI?(p={x:q.maxX,y:q.maxY},x={x:q.minX,y:q.minY}):(p={x:q.minX,y:q.maxY},x={x:q.maxX,y:q.minY});var nt=Math.tan(N),vt=nt*nt,ht=(x.x-p.x+nt*(x.y-p.y))/(vt+1)+p.x,St=nt*(x.x-p.x+nt*(x.y-p.y))/(vt+1)+p.y,wt=E.createLinearGradient(p.x,p.y,ht,St);return M(Y,wt),wt}(n,s,d);if(d[0]==="r")return function(E,O,C){var p=b.exec(C),x=parseFloat(p[1]),T=parseFloat(p[2]),N=parseFloat(p[3]),Y=p[4];if(N===0){var q=Y.match(f);return q[q.length-1].split(":")[1]}var nt=O.getBBox(),vt=nt.maxX-nt.minX,ht=nt.maxY-nt.minY,St=Math.sqrt(vt*vt+ht*ht)/2,wt=E.createRadialGradient(nt.minX+vt*x,nt.minY+ht*T,0,nt.minX+vt/2,nt.minY+ht/2,N*St);return M(Y,wt),wt}(n,s,d);if(d[0]==="p")return function(E,O,C){if(O.get("patternSource")&&O.get("patternSource")===C)return O.get("pattern");var p,x,T=S.exec(C),N=T[1],Y=T[2];function q(){p=E.createPattern(x,N),O.set("pattern",p),O.set("patternSource",C)}switch(N){case"a":N="repeat";break;case"x":N="repeat-x";break;case"y":N="repeat-y";break;case"n":N="no-repeat";break;default:N="no-repeat"}return x=new Image,Y.match(/^data:/i)||(x.crossOrigin="Anonymous"),x.src=Y,x.complete?q():(x.onload=q,x.src=x.src),p}(n,s,d)}return d}}function y(n){var s=0,d=0,E=0,O=0;return Object(i.g)(n)?n.length===1?s=d=E=O=n[0]:n.length===2?(s=E=n[0],d=O=n[1]):n.length===3?(s=n[0],d=O=n[1],E=n[2]):(s=n[0],d=n[1],E=n[2],O=n[3]):s=d=E=O=n,[s,d,E,O]}},function(a,A,e){"use strict";e.r(A),e.d(A,"gpuDetector",function(){return i});var i=function v(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var b=document.createElement("canvas");return!(!window.WebGLRenderingContext||!b.getContext("webgl")&&!b.getContext("experimental-webgl"))}catch(S){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var S=document.createElement("div");return S.id="webgl-error-message",S.style.fontFamily="monospace",S.style.fontSize="13px",S.style.fontWeight="normal",S.style.textAlign="center",S.style.background="#fff",S.style.color="#000",S.style.padding="1.5em",S.style.width="400px",S.style.margin="5em auto 0",this.webgl||(S.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),S},addGetWebGLMessage:function(S){var f=(S=S||{}).parent!==void 0?S.parent:document.body,M=S.id!==void 0?S.id:"oldie",I=v().getWebGLErrorMessage();I.id=M,f.appendChild(I)}}}},function(a,A,e){"use strict";e.d(A,"a",function(){return i});var i={};e.r(i),e.d(i,"leftTranslate",function(){return b}),e.d(i,"leftRotate",function(){return S}),e.d(i,"leftScale",function(){return f}),e.d(i,"transform",function(){return M}),e.d(i,"direction",function(){return I}),e.d(i,"angleTo",function(){return y}),e.d(i,"vertical",function(){return n});var v=e(2);function b(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromTranslation(O,E),v.a.multiply(s,O,d)}function S(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromRotation(O,E),v.a.multiply(s,O,d)}function f(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return v.a.fromScaling(O,E),v.a.multiply(s,O,d)}function M(s,d){for(var E,O,C,p=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,T=d.length;x<T;x++){var N=d[x];switch(N[0]){case"t":b(p,p,[N[1],N[2]]);break;case"s":f(p,p,[N[1],N[2]]);break;case"r":S(p,p,N[1]);break;case"m":E=p,O=p,C=N[1],v.a.multiply(E,C,O)}}return p}function I(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,E){var O=v.d.angle(s,d),C=I(s,d)>=0;return E?C?2*Math.PI-O:O:C?O:2*Math.PI-O}function n(s,d,E){return E?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.r(A),e.d(A,"mixColor",function(){return O}),e.d(A,"getColorsWithSubjectColor",function(){return C}),e.d(A,"getColorSetsBySubjectColors",function(){return p});var i=e(82),v=e.n(i),b=e(93),S=e.n(b),f=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function M(x,T,N){var Y;return(Y=Math.round(x.h)>=60&&Math.round(x.h)<=240?N?Math.round(x.h)-2*T:Math.round(x.h)+2*T:N?Math.round(x.h)+2*T:Math.round(x.h)-2*T)<0?Y+=360:Y>=360&&(Y-=360),Y}function I(x,T,N){return x.h===0&&x.s===0?x.s:((Y=N?x.s-.16*T:T===4?x.s+.16:x.s+.05*T)>1&&(Y=1),N&&T===5&&Y>.1&&(Y=.1),Y<.06&&(Y=.06),Number(Y.toFixed(2)));var Y}function y(x,T,N){var Y;return(Y=N?x.v+.05*T:x.v-.15*T)>1&&(Y=1),Number(Y.toFixed(2))}function n(x){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=[],Y=S()(x),q=5;q>0;q-=1){var nt=Y.toHsv(),vt=S()({h:M(nt,q,!0),s:I(nt,q,!0),v:y(nt,q,!0)}).toHexString();N.push(vt)}N.push(Y.toHexString());for(var ht=1;ht<=4;ht+=1){var St=Y.toHsv(),wt=S()({h:M(St,ht),s:I(St,ht),v:y(St,ht)}).toHexString();N.push(wt)}return T.theme==="dark"?f.map(function(xt){var ft=xt.index,Ft=xt.opacity;return S.a.mix(T.backgroundColor||"#141414",N[ft],100*Ft).toHexString()}):N}var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},d={},E={};Object.keys(s).forEach(function(x){d[x]=n(s[x]),d[x].primary=d[x][5],E[x]=n(s[x],{theme:"dark",backgroundColor:"#141414"}),E[x].primary=E[x][5]}),d.red,d.volcano,d.gold,d.orange,d.yellow,d.lime,d.green,d.cyan,d.blue,d.geekblue,d.purple,d.magenta,d.grey;var O=function(T,N,Y){var q=v()(T),nt=v()(N);return v()([(1-Y)*q.red()+Y*nt.red(),(1-Y)*q.green()+Y*nt.green(),(1-Y)*q.blue()+Y*nt.blue()]).rgb()},C=function(T,N,Y,q){return N===void 0&&(N="#fff"),Y===void 0&&(Y="default"),q===void 0&&(q="rgb(150, 150, 150)"),Y==="default"?function(nt,vt,ht){vt===void 0&&(vt="#fff"),ht===void 0&&(ht="rgb(150, 150, 150)");var St=O(vt,nt,.05).rgb().toString(),wt=O(vt,nt,.1).rgb().toString(),xt=O(vt,nt,.2).rgb().toString(),ft=O(vt,nt,.4).rgb().toString(),Ft=O(vt,ht,.02).rgb().toString(),kt=O(vt,ht,.05).rgb().toString(),Ot=O(vt,ht,.1).rgb().toString(),X=O(vt,ht,.2).rgb().toString(),ct=O(vt,ht,.3).rgb().toString(),dt=n(nt,{theme:"default",backgroundColor:vt}),pt=v()(nt).hex().toLowerCase(),Mt=dt.indexOf(pt),tt=nt;return Mt!==-1&&(tt=dt[Mt+1]),{mainStroke:nt,mainFill:wt,activeStroke:nt,activeFill:St,inactiveStroke:ft,inactiveFill:St,selectedStroke:nt,selectedFill:vt,highlightStroke:tt,highlightFill:xt,disableStroke:ct,disableFill:kt,edgeMainStroke:ct,edgeActiveStroke:nt,edgeInactiveStroke:X,edgeSelectedStroke:nt,edgeHighlightStroke:nt,edgeDisableStroke:Ot,comboMainStroke:ct,comboMainFill:Ft,comboActiveStroke:nt,comboActiveFill:St,comboInactiveStroke:ct,comboInactiveFill:Ft,comboSelectedStroke:nt,comboSelectedFill:Ft,comboHighlightStroke:tt,comboHighlightFill:Ft,comboDisableStroke:X,comboDisableFill:kt}}(T,N,"rgb(150, 150, 150)"):function(nt,vt,ht){vt===void 0&&(vt="#fff"),ht===void 0&&(ht="#777");var St=O(vt,nt,.2).rgb().toString(),wt=O(vt,nt,.3).rgb().toString(),xt=O(vt,nt,.6).rgb().toString(),ft=O(vt,nt,.8).rgb().toString(),Ft=O(vt,ht,.2).rgb().toString(),kt=O(vt,ht,.25).rgb().toString(),Ot=O(vt,ht,.3).rgb().toString(),X=O(vt,ht,.4).rgb().toString(),ct=O(vt,ht,.5).rgb().toString(),dt=n(nt,{theme:"dark",backgroundColor:vt}),pt=v()(nt).hex().toLowerCase(),Mt=dt.indexOf(pt),tt=nt;return Mt!==-1&&(tt=dt[Mt+1]),{mainStroke:ft,mainFill:St,activeStroke:nt,activeFill:wt,inactiveStroke:ft,inactiveFill:St,selectedStroke:nt,selectedFill:St,highlightStroke:nt,highlightFill:xt,disableStroke:ct,disableFill:kt,edgeMainStroke:ht,edgeActiveStroke:nt,edgeInactiveStroke:ht,edgeSelectedStroke:nt,edgeHighlightStroke:nt,edgeDisableStroke:Ot,comboMainStroke:X,comboMainFill:kt,comboActiveStroke:nt,comboActiveFill:Ft,comboInactiveStroke:X,comboInactiveFill:kt,comboSelectedStroke:nt,comboSelectedFill:Ft,comboHighlightStroke:tt,comboHighlightFill:kt,comboDisableStroke:X,comboDisableFill:Ft}}(T,N,"#777")},p=function(T,N,Y,q){N===void 0&&(N="#fff"),Y===void 0&&(Y="default"),q===void 0&&(q="rgb(150, 150, 150)");var nt=[];return T.forEach(function(vt){nt.push(C(vt,N,Y,q))}),nt}},function(a,A,e){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var v=e(42);a.exports=b;function b(n){this._isDirected=!v.has(n,"directed")||n.directed,this._isMultigraph=!!v.has(n,"multigraph")&&n.multigraph,this._isCompound=!!v.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=v.constant(void 0),this._defaultEdgeLabelFn=v.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function S(n,s){n[s]?n[s]++:n[s]=1}function f(n,s){--n[s]||delete n[s]}function M(n,s,d,E){var O=""+s,C=""+d;if(!n&&O>C){var p=O;O=C,C=p}return O+""+C+""+(v.isUndefined(E)?"\0":E)}function I(n,s,d,E){var O=""+s,C=""+d;if(!n&&O>C){var p=O;O=C,C=p}var x={v:O,w:C};return E&&(x.name=E),x}function y(n,s){return M(n,s.v,s.w,s.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,b.prototype.isDirected=function(){return this._isDirected},b.prototype.isMultigraph=function(){return this._isMultigraph},b.prototype.isCompound=function(){return this._isCompound},b.prototype.setGraph=function(n){return this._label=n,this},b.prototype.graph=function(){return this._label},b.prototype.setDefaultNodeLabel=function(n){return v.isFunction(n)||(n=v.constant(n)),this._defaultNodeLabelFn=n,this},b.prototype.nodeCount=function(){return this._nodeCount},b.prototype.nodes=function(){return v.keys(this._nodes)},b.prototype.sources=function(){var n=this;return v.filter(this.nodes(),function(s){return v.isEmpty(n._in[s])})},b.prototype.sinks=function(){var n=this;return v.filter(this.nodes(),function(s){return v.isEmpty(n._out[s])})},b.prototype.setNodes=function(n,s){var d=arguments,E=this;return v.each(n,function(O){d.length>1?E.setNode(O,s):E.setNode(O)}),this},b.prototype.setNode=function(n,s){return v.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=s),this):(this._nodes[n]=arguments.length>1?s:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},b.prototype.node=function(n){return this._nodes[n]},b.prototype.hasNode=function(n){return v.has(this._nodes,n)},b.prototype.removeNode=function(n){var s=this;if(v.has(this._nodes,n)){var d=function(O){s.removeEdge(s._edgeObjs[O])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],v.each(this.children(n),function(E){s.setParent(E)}),delete this._children[n]),v.each(v.keys(this._in[n]),d),delete this._in[n],delete this._preds[n],v.each(v.keys(this._out[n]),d),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},b.prototype.setParent=function(n,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(v.isUndefined(s))s="\0";else{for(var d=s+="";!v.isUndefined(d);d=this.parent(d))if(d===n)throw new Error("Setting "+s+" as parent of "+n+" would create a cycle");this.setNode(s)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=s,this._children[s][n]=!0,this},b.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},b.prototype.parent=function(n){if(this._isCompound){var s=this._parent[n];if(s!=="\0")return s}},b.prototype.children=function(n){if(v.isUndefined(n)&&(n="\0"),this._isCompound){var s=this._children[n];if(s)return v.keys(s)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},b.prototype.predecessors=function(n){var s=this._preds[n];if(s)return v.keys(s)},b.prototype.successors=function(n){var s=this._sucs[n];if(s)return v.keys(s)},b.prototype.neighbors=function(n){var s=this.predecessors(n);if(s)return v.union(s,this.successors(n))},b.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},b.prototype.filterNodes=function(n){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph());var d=this;v.each(this._nodes,function(O,C){n(C)&&s.setNode(C,O)}),v.each(this._edgeObjs,function(O){s.hasNode(O.v)&&s.hasNode(O.w)&&s.setEdge(O,d.edge(O))});var E={};return this._isCompound&&v.each(s.nodes(),function(O){s.setParent(O,function C(p){var x=d.parent(p);return x===void 0||s.hasNode(x)?(E[p]=x,x):x in E?E[x]:C(x)}(O))}),s},b.prototype.setDefaultEdgeLabel=function(n){return v.isFunction(n)||(n=v.constant(n)),this._defaultEdgeLabelFn=n,this},b.prototype.edgeCount=function(){return this._edgeCount},b.prototype.edges=function(){return v.values(this._edgeObjs)},b.prototype.setPath=function(n,s){var d=this,E=arguments;return v.reduce(n,function(O,C){return E.length>1?d.setEdge(O,C,s):d.setEdge(O,C),C}),this},b.prototype.setEdge=function(){var n,s,d,E,O=!1,C=arguments[0];i(C)==="object"&&C!==null&&"v"in C?(n=C.v,s=C.w,d=C.name,arguments.length===2&&(E=arguments[1],O=!0)):(n=C,s=arguments[1],d=arguments[3],arguments.length>2&&(E=arguments[2],O=!0)),n=""+n,s=""+s,v.isUndefined(d)||(d=""+d);var p=M(this._isDirected,n,s,d);if(v.has(this._edgeLabels,p))return O&&(this._edgeLabels[p]=E),this;if(!v.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(s),this._edgeLabels[p]=O?E:this._defaultEdgeLabelFn(n,s,d);var x=I(this._isDirected,n,s,d);return n=x.v,s=x.w,Object.freeze(x),this._edgeObjs[p]=x,S(this._preds[s],n),S(this._sucs[n],s),this._in[s][p]=x,this._out[n][p]=x,this._edgeCount++,this},b.prototype.edge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d);return this._edgeLabels[E]},b.prototype.hasEdge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d);return v.has(this._edgeLabels,E)},b.prototype.removeEdge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d),O=this._edgeObjs[E];return O&&(n=O.v,s=O.w,delete this._edgeLabels[E],delete this._edgeObjs[E],f(this._preds[s],n),f(this._sucs[n],s),delete this._in[s][E],delete this._out[n][E],this._edgeCount--),this},b.prototype.inEdges=function(n,s){var d=this._in[n];if(d){var E=v.values(d);return s?v.filter(E,function(O){return O.v===s}):E}},b.prototype.outEdges=function(n,s){var d=this._out[n];if(d){var E=v.values(d);return s?v.filter(E,function(O){return O.w===s}):E}},b.prototype.nodeEdges=function(n,s){var d=this.inEdges(n,s);if(d)return d.concat(this.outEdges(n,s))}},function(a,A,e){var i=e(64)(e(47),"Map");a.exports=i},function(a,A,e){var i=e(289),v=e(296),b=e(298),S=e(299),f=e(300);function M(I){var y=-1,n=I==null?0:I.length;for(this.clear();++y<n;){var s=I[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=v,M.prototype.get=b,M.prototype.has=S,M.prototype.set=f,a.exports=M},function(a,A){a.exports=function(e,i){for(var v=-1,b=e==null?0:e.length;++v<b&&i(e[v],v,e)!==!1;);return e}},function(a,A){a.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(a,A,e){(function(i){function v(y){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var b=e(163),S=v(A)=="object"&&A&&!A.nodeType&&A,f=S&&v(i)=="object"&&i&&!i.nodeType&&i,M=f&&f.exports===S&&b.process,I=function(){try{var y=f&&f.require&&f.require("util").types;return y||M&&M.binding&&M.binding("util")}catch(n){}}();i.exports=I}).call(this,e(86)(a))},function(a,A,e){var i=e(104),v=e(306),b=Object.prototype.hasOwnProperty;a.exports=function(S){if(!i(S))return v(S);var f=[];for(var M in Object(S))b.call(S,M)&&M!="constructor"&&f.push(M);return f}},function(a,A,e){var i=e(171),v=e(172),b=Object.prototype.propertyIsEnumerable,S=Object.getOwnPropertySymbols,f=S?function(M){return M==null?[]:(M=Object(M),i(S(M),function(I){return b.call(M,I)}))}:v;a.exports=f},function(a,A){a.exports=function(e,i){for(var v=-1,b=i.length,S=e.length;++v<b;)e[S+v]=i[v];return e}},function(a,A,e){var i=e(177);a.exports=function(v){var b=new v.constructor(v.byteLength);return new i(b).set(new i(v)),b}},function(a,A){a.exports=function(e){return function(){return e}}},function(a,A,e){var i=e(136),v=e(58);a.exports=function(b,S){return b&&i(b,S,v)}},function(a,A,e){var i=e(325)();a.exports=i},function(a,A){a.exports=function(e){var i=-1,v=Array(e.size);return e.forEach(function(b){v[++i]=b}),v}},function(a,A,e){function i(M){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(M)}var v=e(26),b=e(75),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;a.exports=function(M,I){if(v(M))return!1;var y=i(M);return!(y!="number"&&y!="symbol"&&y!="boolean"&&M!=null&&!b(M))||f.test(M)||!S.test(M)||I!=null&&M in Object(I)}},function(a,A,e){var i=e(132),v=e(359);a.exports=function b(S,f,M,I,y){var n=-1,s=S.length;for(M||(M=v),y||(y=[]);++n<s;){var d=S[n];f>0&&M(d)?f>1?b(d,f-1,M,I,y):i(y,d):I||(y[y.length]=d)}return y}},function(a,A,e){var i=e(75);a.exports=function(v,b,S){for(var f=-1,M=v.length;++f<M;){var I=v[f],y=b(I);if(y!=null&&(n===void 0?y==y&&!i(y):S(y,n)))var n=y,s=I}return s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingOnSyntax=void 0;var i=e(142),v=function(){function b(S){this._binding=S}return b.prototype.onActivation=function(S){return this._binding.onActivation=S,new i.BindingWhenSyntax(this._binding)},b}();A.BindingOnSyntax=v},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenSyntax=void 0;var i=e(141),v=e(225),b=function(){function S(f){this._binding=f}return S.prototype.when=function(f){return this._binding.constraint=f,new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetNamed=function(f){return this._binding.constraint=v.namedConstraint(f),new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(f){return f.target!==null&&!f.target.isNamed()&&!f.target.isTagged()},new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetTagged=function(f,M){return this._binding.constraint=v.taggedConstraint(f)(M),new i.BindingOnSyntax(this._binding)},S.prototype.whenInjectedInto=function(f){return this._binding.constraint=function(M){return v.typeConstraint(f)(M.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenParentNamed=function(f){return this._binding.constraint=function(M){return v.namedConstraint(f)(M.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenParentTagged=function(f,M){return this._binding.constraint=function(I){return v.taggedConstraint(f)(M)(I.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorIs=function(f){return this._binding.constraint=function(M){return v.traverseAncerstors(M,v.typeConstraint(f))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorIs=function(f){return this._binding.constraint=function(M){return!v.traverseAncerstors(M,v.typeConstraint(f))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorNamed=function(f){return this._binding.constraint=function(M){return v.traverseAncerstors(M,v.namedConstraint(f))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorNamed=function(f){return this._binding.constraint=function(M){return!v.traverseAncerstors(M,v.namedConstraint(f))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorTagged=function(f,M){return this._binding.constraint=function(I){return v.traverseAncerstors(I,v.taggedConstraint(f)(M))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorTagged=function(f,M){return this._binding.constraint=function(I){return!v.traverseAncerstors(I,v.taggedConstraint(f)(M))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorMatches=function(f){return this._binding.constraint=function(M){return v.traverseAncerstors(M,f)},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorMatches=function(f){return this._binding.constraint=function(M){return!v.traverseAncerstors(M,f)},new i.BindingOnSyntax(this._binding)},S}();A.BindingWhenSyntax=b},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=function(e,i,v){return e[0]=i[0]-v[0],e[1]=i[1]-v[1],e}},function(a,A,e){var i=e(57),v=e(105),b=e(48),S=Function.prototype,f=Object.prototype,M=S.toString,I=f.hasOwnProperty,y=M.call(Object);a.exports=function(n){if(!b(n)||i(n)!="[object Object]")return!1;var s=v(n);if(s===null)return!0;var d=I.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&M.call(d)==y}},function(a,A,e){"use strict";var i=e(1),v=e(155),b=e.n(v),S=e(0),f=e(38),M=e(91),I=f.a.radialLayout,y=f.a.traverseTree,n=function(s){function d(E){var O=s.call(this,E)||this;return O.layoutAnimating=!1,O.set("removeList",[]),O.set("layoutMethod",O.getLayout()),O}return Object(i.b)(d,s),d.prototype.getLayout=function(){var E=this.get("layout");return E?typeof E=="function"?E:(E.type||(E.type="dendrogram"),E.direction||(E.direction="TB"),E.radial?function(O){var C=b.a[E.type](O,E);return I(C),C}:function(O){return b.a[E.type](O,E)}):null},d.indexOfChild=function(E,O){var C=-1;return Object(S.f)(E,function(p,x){if(O===p.id)return C=x,!1}),C},d.prototype.getDefaultCfg=function(){var E=s.prototype.getDefaultCfg.call(this);return E.animate=!0,E},d.prototype.innerAddChild=function(E,O,C){var p=this,x=E.data;x&&(x.x=E.x,x.y=E.y,x.depth=E.depth);var T=p.addItem("node",x,!1);if(O){if(T.set("parent",O),C){var N=O.get("originAttrs");if(N)T.set("originAttrs",N);else{var Y=O.getModel();T.set("originAttrs",{x:Y.x,y:Y.y})}}var q=O.get("children");q?q.push(T):O.set("children",[T]),p.addItem("edge",{source:O,target:T,id:O.get("id")+":"+T.get("id")},!1)}return Object(S.f)(E.children||[],function(nt){p.innerAddChild(nt,T,C)}),p.emit("afteraddchild",{item:T,parent:O}),T},d.prototype.innerUpdateChild=function(E,O,C){var p=this,x=p.findById(E.id);if(x){Object(S.f)(E.children||[],function(ht){p.innerUpdateChild(ht,x,C)});var T,N,Y=x.get("children");if(Y&&Y.length>0)for(var q=Y.length-1;q>=0;q--){var nt=Y[q].getModel();d.indexOfChild(E.children||[],nt.id)===-1&&(p.innerRemoveChild(nt.id,{x:E.x,y:E.y},C),Y.splice(q,1))}x.get("originAttrs")&&(T=x.get("originAttrs").x,N=x.get("originAttrs").y);var vt=x.getModel();C&&x.set("originAttrs",{x:vt.x,y:vt.y}),x.set("model",E.data),T===E.x&&N===E.y||x.updatePosition({x:E.x,y:E.y})}else p.innerAddChild(E,O,C)},d.prototype.innerRemoveChild=function(E,O,C){var p=this,x=p.findById(E);if(x)if(Object(S.f)(x.get("children"),function(N){p.innerRemoveChild(N.getModel().id,O,C)}),C){var T=x.getModel();x.set("to",O),x.set("originAttrs",{x:T.x,y:T.y}),p.get("removeList").push(x)}else p.removeItem(x)},d.prototype.changeData=function(E){var O=this;this.getNodes().map(function(C){return O.clearItemStates(C)}),this.getEdges().map(function(C){return O.clearItemStates(C)}),E?(O.data(E),O.render()):O.layout(this.get("fitView"))},d.prototype.changeLayout=function(E){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(E)},d.prototype.updateLayout=function(E){E?(this.set("layout",E),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},d.prototype.refreshLayout=function(E){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(E)},d.prototype.layout=function(E){var O=this.get("data"),C=this.get("layoutMethod")(O,this.get("layout")),p=this.get("animate");this.emit("beforerefreshlayout",{data:O,layoutData:C}),this.emit("beforelayout"),this.innerUpdateChild(C,void 0,p),E&&this.get("viewController").fitView(),p?this.layoutAnimate(C):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:O,layoutData:C}),this.emit("afterlayout")},d.prototype.addChild=function(E,O){this.emit("beforeaddchild",{model:E,parent:O}),Object(S.x)(O)||(O=O.get("id"));var C=this.findDataById(O);C&&(C.children||(C.children=[]),C.children.push(E),this.changeData())},d.prototype.updateChildren=function(E,O){O&&this.findById(O)?(this.findDataById(O).children=E,this.changeData()):console.warn("Update children failed! There is no node with id '"+O+"'")},d.prototype.updateChild=function(E,O){if(O&&this.findById(O)){var C=this.findDataById(O),p=this.findById(E.id);if(C.children||(C.children=[]),p){var x=d.indexOfChild(C.children,E.id);C.children[x]=E}else C.children.push(E);this.changeData()}else this.changeData(E)},d.prototype.removeChild=function(E){var O=this.findById(E);if(O){var C=O.get("parent");if(C&&!C.destroyed){var p=this.findDataById(C.get("id")),x=p&&p.children||[],T=O.getModel(),N=d.indexOfChild(x,T.id);x.splice(N,1)}this.changeData()}},d.prototype.findDataById=function(E,O){var C=this;if(O||(O=C.get("data")),E===O.id)return O;var p=null;return Object(S.f)(O.children||[],function(x){return x.id===E?(p=x,!1):!(p=C.findDataById(E,x))&&void 0}),p},d.prototype.layoutAnimate=function(E,O){var C=this,p=this.get("animateCfg");C.emit("beforeanimate",{data:E}),C.getEdges().forEach(function(x){var T=x.get("model");T.sourceAnchor||(T.sourceAnchor=x.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(x){y(E,function(T){var N=C.findById(T.id);if(N){var Y=N.get("originAttrs"),q=N.get("model");if(Y||(Y={x:q.x,y:q.y},N.set("originAttrs",Y)),O){var nt=O(N,x,Y,E);N.set("model",Object.assign(q,nt))}else q.x=Y.x+(T.x-Y.x)*x,q.y=Y.y+(T.y-Y.y)*x}return!0}),Object(S.f)(C.get("removeList"),function(T){var N=T.getModel(),Y=T.get("originAttrs"),q=T.get("to");N.x=Y.x+(q.x-Y.x)*x,N.y=Y.y+(q.y-Y.y)*x}),C.refreshPositions()},{duration:p.duration,easing:p.ease,callback:function(){Object(S.f)(C.getNodes(),function(T){T.set("originAttrs",null)}),Object(S.f)(C.get("removeList"),function(T){C.removeItem(T)}),C.set("removeList",[]),p.callback&&p.callback(),C.emit("afteranimate",{data:E})},delay:p.delay})},d.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},d.prototype.isLayoutAnimating=function(){return this.layoutAnimating},d.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},d.prototype.save=function(){return this.get("data")},d}(M.a);A.a=n},function(a,A,e){a.exports={graphlib:e(46),layout:e(382),debug:e(440),util:{time:e(37).time,notime:e(37).notime},version:e(441)}},function(a,A,e){"use strict";var i=Object.prototype.hasOwnProperty,v="~";function b(){}function S(y,n,s){this.fn=y,this.context=n,this.once=s||!1}function f(y,n,s,d,E){if(typeof s!="function")throw new TypeError("The listener must be a function");var O=new S(s,d||y,E),C=v?v+n:n;return y._events[C]?y._events[C].fn?y._events[C]=[y._events[C],O]:y._events[C].push(O):(y._events[C]=O,y._eventsCount++),y}function M(y,n){--y._eventsCount==0?y._events=new b:delete y._events[n]}function I(){this._events=new b,this._eventsCount=0}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(v=!1)),I.prototype.eventNames=function(){var y,n,s=[];if(this._eventsCount===0)return s;for(n in y=this._events)i.call(y,n)&&s.push(v?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(y)):s},I.prototype.listeners=function(y){var n=v?v+y:y,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var d=0,E=s.length,O=new Array(E);d<E;d++)O[d]=s[d].fn;return O},I.prototype.listenerCount=function(y){var n=v?v+y:y,s=this._events[n];return s?s.fn?1:s.length:0},I.prototype.emit=function(y,n,s,d,E,O){var C=v?v+y:y;if(!this._events[C])return!1;var p,x,T=this._events[C],N=arguments.length;if(T.fn){switch(T.once&&this.removeListener(y,T.fn,void 0,!0),N){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,n),!0;case 3:return T.fn.call(T.context,n,s),!0;case 4:return T.fn.call(T.context,n,s,d),!0;case 5:return T.fn.call(T.context,n,s,d,E),!0;case 6:return T.fn.call(T.context,n,s,d,E,O),!0}for(x=1,p=new Array(N-1);x<N;x++)p[x-1]=arguments[x];T.fn.apply(T.context,p)}else{var Y,q=T.length;for(x=0;x<q;x++)switch(T[x].once&&this.removeListener(y,T[x].fn,void 0,!0),N){case 1:T[x].fn.call(T[x].context);break;case 2:T[x].fn.call(T[x].context,n);break;case 3:T[x].fn.call(T[x].context,n,s);break;case 4:T[x].fn.call(T[x].context,n,s,d);break;default:if(!p)for(Y=1,p=new Array(N-1);Y<N;Y++)p[Y-1]=arguments[Y];T[x].fn.apply(T[x].context,p)}}return!0},I.prototype.on=function(y,n,s){return f(this,y,n,s,!1)},I.prototype.once=function(y,n,s){return f(this,y,n,s,!0)},I.prototype.removeListener=function(y,n,s,d){var E=v?v+y:y;if(!this._events[E])return this;if(!n)return M(this,E),this;var O=this._events[E];if(O.fn)O.fn!==n||d&&!O.once||s&&O.context!==s||M(this,E);else{for(var C=0,p=[],x=O.length;C<x;C++)(O[C].fn!==n||d&&!O[C].once||s&&O[C].context!==s)&&p.push(O[C]);p.length?this._events[E]=p.length===1?p[0]:p:M(this,E)}return this},I.prototype.removeAllListeners=function(y){var n;return y?(n=v?v+y:y,this._events[n]&&M(this,n)):(this._events=new b,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=v,I.EventEmitter=I,a.exports=I},function(a,A,e){(function(i){var v,b,S,f;function M(I){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(I)}typeof self!="undefined"&&self,f=function(){return function(y){var n={};function s(d){if(n[d])return n[d].exports;var E=n[d]={i:d,l:!1,exports:{}};return y[d].call(E.exports,E,E.exports,s),E.l=!0,E.exports}return s.m=y,s.c=n,s.d=function(d,E,O){s.o(d,E)||Object.defineProperty(d,E,{configurable:!1,enumerable:!0,get:O})},s.n=function(d){var E=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(E,"a",E),E},s.o=function(d,E){return Object.prototype.hasOwnProperty.call(d,E)},s.p="",s(s.s=31)}([function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Array.isArray?Array.isArray(E):Object(d.a)(E,"Array")}},function(y,n,s){"use strict";n.a=function(d){return d!==null&&typeof d!="function"&&isFinite(d.length)}},function(y,n,s){"use strict";var d=s(0),E=s(13);n.a=function(O,C){if(O){if(Object(d.a)(O))for(var p=0,x=O.length;p<x&&C(O[p],p)!==!1;p++);else if(Object(E.a)(O)){for(var T in O)if(O.hasOwnProperty(T)&&C(O[T],T)===!1)break}}}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Function")}},function(y,n,s){"use strict";var d={}.toString;n.a=function(E,O){return d.call(E)==="[object "+O+"]"}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Number")}},function(y,n,s){"use strict";n.a=function(d){return d==null}},function(y,n,s){var d=s(33).mix;y.exports={assign:d}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"String")}},function(y,n,s){"use strict";var d=s(15),E=s(4);n.a=function(O){if(!Object(d.a)(O)||!Object(E.a)(O,"Object"))return!1;if(Object.getPrototypeOf(O)===null)return!0;for(var C=O;Object.getPrototypeOf(C)!==null;)C=Object.getPrototypeOf(C);return Object.getPrototypeOf(O)===C}},function(y,n,s){"use strict";var d=s(6);n.a=function(E){return Object(d.a)(E)?"":E.toString()}},function(y,n,s){var d=s(18),E=function(){function O(C,p){p===void 0&&(p={}),this.options=p,this.rootNode=d(C,p)}return O.prototype.execute=function(){throw new Error("please override this method")},O}();y.exports=E},function(y,n,s){"use strict";var d=s(1);n.a=function(E,O){return!!Object(d.a)(E)&&E.indexOf(O)>-1}},function(y,n,s){"use strict";n.a=function(d){var E=M(d);return d!==null&&E==="object"||E==="function"}},function(y,n,s){"use strict";var d=s(2),E=s(1);n.a=function(O,C){if(!Object(E.a)(O))return O;var p=[];return Object(d.a)(O,function(x,T){C(x,T)&&p.push(x)}),p}},function(y,n,s){"use strict";n.a=function(d){return M(d)==="object"&&d!==null}},function(y,n,s){"use strict";function d(E,O){for(var C in O)O.hasOwnProperty(C)&&C!=="constructor"&&O[C]!==void 0&&(E[C]=O[C])}n.a=function(E,O,C,p){return O&&d(E,O),C&&d(E,C),p&&d(E,p),E}},function(y,n,s){var d=s(30),E=["LR","RL","TB","BT","H","V"],O=["LR","RL","H"],C=E[0];y.exports=function(p,x,T){var N=x.direction||C;if(x.isHorizontal=function(St){return O.indexOf(St)>-1}(N),N&&E.indexOf(N)===-1)throw new TypeError("Invalid direction: "+N);if(N===E[0])T(p,x);else if(N===E[1])T(p,x),p.right2left();else if(N===E[2])T(p,x);else if(N===E[3])T(p,x),p.bottom2top();else if(N===E[4]||N===E[5]){var Y=d(p,x),q=Y.left,nt=Y.right;T(q,x),T(nt,x),x.isHorizontal?q.right2left():q.bottom2top(),nt.translate(q.x-nt.x,q.y-nt.y),p.x=q.x,p.y=nt.y;var vt=p.getBoundingBox();x.isHorizontal?vt.top<0&&p.translate(0,-vt.top):vt.left<0&&p.translate(-vt.left,0)}var ht=x.fixedRoot;return ht===void 0&&(ht=!0),ht&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(y,n,s){var d=s(7),E={getId:function(p){return p.id||p.name},getHGap:function(p){return p.hgap||18},getVGap:function(p){return p.vgap||18},getChildren:function(p){return p.children},getHeight:function(p){return p.height||36},getWidth:function(p){var x=p.label||" ";return p.width||18*x.split("").length}};function O(C,p){var x=this;if(x.vgap=x.hgap=0,C instanceof O)return C;x.data=C;var T=p.getHGap(C),N=p.getVGap(C);return x.width=p.getWidth(C),x.height=p.getHeight(C),x.id=p.getId(C),x.x=x.y=0,x.depth=0,x.children||(x.children=[]),x.addGap(T,N),x}d.assign(O.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,x){this.hgap+=p,this.vgap+=x,this.width+=2*p,this.height+=2*x},eachNode:function(p){for(var x,T=[this];x=T.shift();)p(x),T=x.children.concat(T)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var x,T=[this];x=T.shift();)p(x),T=T.concat(x.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(x){p.left=Math.min(p.left,x.x),p.top=Math.min(p.top,x.y),p.width=Math.max(p.width,x.x+x.width),p.height=Math.max(p.height,x.y+x.height)}),p},translate:function(p,x){p===void 0&&(p=0),x===void 0&&(x=0),this.eachNode(function(T){T.x+=p,T.y+=x})},right2left:function(){var p=this.getBoundingBox();this.eachNode(function(x){x.x=x.x-2*(x.x-p.left)-x.width}),this.translate(p.width,0)},bottom2top:function(){var p=this.getBoundingBox();this.eachNode(function(x){x.y=x.y-2*(x.y-p.top)-x.height}),this.translate(0,p.height)}}),y.exports=function(C,p,x){p===void 0&&(p={});var T,N=new O(C,p=d.assign({},E,p)),Y=[N];if(!x&&!C.collapsed){for(;T=Y.shift();)if(!T.data.collapsed){var q=p.getChildren(T.data),nt=q?q.length:0;if(T.children=new Array(nt),q&&nt)for(var vt=0;vt<nt;vt++){var ht=new O(q[vt],p);T.children[vt]=ht,Y.push(ht),ht.parent=T,ht.depth=T.depth+1}}}return N}},function(y,n,s){"use strict";var d=s(6),E=s(20);n.a=function(O,C){var p=Object(E.a)(C),x=p.length;if(Object(d.a)(O))return!x;for(var T=0;T<x;T+=1){var N=p[T];if(C[N]!==O[N]||!(N in O))return!1}return!0}},function(y,n,s){"use strict";var d=s(2),E=s(3),O=Object.keys?function(C){return Object.keys(C)}:function(C){var p=[];return Object(d.a)(C,function(x,T){Object(E.a)(C)&&T==="prototype"||p.push(T)}),p};n.a=O},function(y,n,s){"use strict";var d=s(1),E=Array.prototype.splice;n.a=function(O,C){if(!Object(d.a)(O))return[];for(var p=O?C.length:0,x=p-1;p--;){var T=void 0,N=C[p];p!==x&&N===T||(T=N,E.call(O,N,1))}return O}},function(y,n,s){"use strict";var d=s(12),E=s(2);n.a=function(O){var C=[];return Object(E.a)(O,function(p){Object(d.a)(C,p)||C.push(p)}),C}},function(y,n,s){"use strict";var d=s(0),E=s(3),O=s(24);n.a=function(C,p){if(!p)return{0:C};if(!Object(E.a)(p)){var x=Object(d.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(N){for(var Y="_",q=0,nt=x.length;q<nt;q++)Y+=N[x[q]]&&N[x[q]].toString();return Y}}return Object(O.a)(C,p)}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3),C=Object.prototype.hasOwnProperty;n.a=function(p,x){if(!x||!Object(E.a)(p))return{};var T,N={},Y=Object(O.a)(x)?x:function(q){return q[x]};return Object(d.a)(p,function(q){T=Y(q),C.call(N,T)?N[T].push(q):N[T]=[q]}),N}},function(y,n,s){"use strict";n.a=function(d,E){return d.hasOwnProperty(E)}},function(y,n,s){"use strict";var d=s(2),E=s(3),O=Object.values?function(C){return Object.values(C)}:function(C){var p=[];return Object(d.a)(C,function(x,T){Object(E.a)(C)&&T==="prototype"||p.push(x)}),p};n.a=O},function(y,n,s){"use strict";var d={}.toString;n.a=function(E){return d.call(E).replace(/^\[object /,"").replace(/]$/,"")}},function(y,n,s){"use strict";var d=Object.prototype;n.a=function(E){var O=E&&E.constructor;return E===(typeof O=="function"&&O.prototype||d)}},function(y,n,s){"use strict";var d=s(15),E=s(1),O=s(8);n.a=function C(p,x){if(p===x)return!0;if(!p||!x||Object(O.a)(p)||Object(O.a)(x))return!1;if(Object(E.a)(p)||Object(E.a)(x)){if(p.length!==x.length)return!1;for(var T=!0,N=0;N<p.length&&(T=C(p[N],x[N]));N++);return T}if(Object(d.a)(p)||Object(d.a)(x)){var Y=Object.keys(p),q=Object.keys(x);if(Y.length!==q.length)return!1;for(T=!0,N=0;N<Y.length&&(T=C(p[Y[N]],x[Y[N]]));N++);return T}return!1}},function(y,n,s){var d=s(18);y.exports=function(E,O){for(var C=d(E.data,O,!0),p=d(E.data,O,!0),x=E.children.length,T=Math.round(x/2),N=O.getSide||function(nt,vt){return vt<T?"right":"left"},Y=0;Y<x;Y++){var q=E.children[Y];N(q,Y)==="right"?p.children.push(q):C.children.push(q)}return C.eachNode(function(nt){nt.isRoot()||(nt.side="left")}),p.eachNode(function(nt){nt.isRoot()||(nt.side="right")}),{left:C,right:p}}},function(y,n,s){var d={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};y.exports=d},function(y,n,s){var d=s(11),E=s(113),O=s(17),C=s(7),p=function(T){var N,Y;function q(){return T.apply(this,arguments)||this}return Y=T,(N=q).prototype=Object.create(Y.prototype),N.prototype.constructor=N,N.__proto__=Y,q.prototype.execute=function(){return O(this.rootNode,this.options,E)},q}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new p(T,N).execute()}},function(y,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=s(12);s.d(n,"contains",function(){return d.a}),s.d(n,"includes",function(){return d.a});var E=s(34);s.d(n,"difference",function(){return E.a});var O=s(35);s.d(n,"find",function(){return O.a});var C=s(36);s.d(n,"findIndex",function(){return C.a});var p=s(37);s.d(n,"firstValue",function(){return p.a});var x=s(38);s.d(n,"flatten",function(){return x.a});var T=s(39);s.d(n,"flattenDeep",function(){return T.a});var N=s(40);s.d(n,"getRange",function(){return N.a});var Y=s(41);s.d(n,"pull",function(){return Y.a});var q=s(21);s.d(n,"pullAt",function(){return q.a});var nt=s(42);s.d(n,"reduce",function(){return nt.a});var vt=s(43);s.d(n,"remove",function(){return vt.a});var ht=s(44);s.d(n,"sortBy",function(){return ht.a});var St=s(45);s.d(n,"union",function(){return St.a});var wt=s(22);s.d(n,"uniq",function(){return wt.a});var xt=s(46);s.d(n,"valuesOfKey",function(){return xt.a});var ft=s(47);s.d(n,"head",function(){return ft.a});var Ft=s(48);s.d(n,"last",function(){return Ft.a});var kt=s(49);s.d(n,"startsWith",function(){return kt.a});var Ot=s(50);s.d(n,"endsWith",function(){return Ot.a});var X=s(14);s.d(n,"filter",function(){return X.a});var ct=s(51);s.d(n,"every",function(){return ct.a});var dt=s(52);s.d(n,"some",function(){return dt.a});var pt=s(53);s.d(n,"group",function(){return pt.a});var Mt=s(24);s.d(n,"groupBy",function(){return Mt.a});var tt=s(23);s.d(n,"groupToMap",function(){return tt.a});var lt=s(54);s.d(n,"getWrapBehavior",function(){return lt.a});var it=s(55);s.d(n,"wrapBehavior",function(){return it.a});var U=s(56);s.d(n,"number2color",function(){return U.a});var P=s(57);s.d(n,"parseRadius",function(){return P.a});var H=s(58);s.d(n,"clamp",function(){return H.a});var k=s(59);s.d(n,"fixedBase",function(){return k.a});var h=s(60);s.d(n,"isDecimal",function(){return h.a});var g=s(61);s.d(n,"isEven",function(){return g.a});var G=s(62);s.d(n,"isInteger",function(){return G.a});var V=s(63);s.d(n,"isNegative",function(){return V.a});var $=s(64);s.d(n,"isNumberEqual",function(){return $.a});var rt=s(65);s.d(n,"isOdd",function(){return rt.a});var ot=s(66);s.d(n,"isPositive",function(){return ot.a});var At=s(67);s.d(n,"maxBy",function(){return At.a});var gt=s(68);s.d(n,"minBy",function(){return gt.a});var mt=s(69);s.d(n,"mod",function(){return mt.a});var bt=s(70);s.d(n,"toDegree",function(){return bt.a});var jt=s(71);s.d(n,"toInteger",function(){return jt.a});var Dt=s(72);s.d(n,"toRadian",function(){return Dt.a});var Ut=s(73);s.d(n,"forIn",function(){return Ut.a});var Ct=s(25);s.d(n,"has",function(){return Ct.a});var Vt=s(74);s.d(n,"hasKey",function(){return Vt.a});var Ht=s(75);s.d(n,"hasValue",function(){return Ht.a});var re=s(20);s.d(n,"keys",function(){return re.a});var pe=s(19);s.d(n,"isMatch",function(){return pe.a});var ye=s(26);s.d(n,"values",function(){return ye.a});var we=s(76);s.d(n,"lowerCase",function(){return we.a});var Ne=s(77);s.d(n,"lowerFirst",function(){return Ne.a});var Ke=s(78);s.d(n,"substitute",function(){return Ke.a});var pn=s(79);s.d(n,"upperCase",function(){return pn.a});var hn=s(80);s.d(n,"upperFirst",function(){return hn.a});var kn=s(27);s.d(n,"getType",function(){return kn.a});var Tn=s(81);s.d(n,"isArguments",function(){return Tn.a});var Rn=s(0);s.d(n,"isArray",function(){return Rn.a});var Mn=s(1);s.d(n,"isArrayLike",function(){return Mn.a});var Cn=s(82);s.d(n,"isBoolean",function(){return Cn.a});var _n=s(83);s.d(n,"isDate",function(){return _n.a});var Kn=s(84);s.d(n,"isError",function(){return Kn.a});var tr=s(3);s.d(n,"isFunction",function(){return tr.a});var or=s(85);s.d(n,"isFinite",function(){return or.a});var nr=s(6);s.d(n,"isNil",function(){return nr.a});var er=s(86);s.d(n,"isNull",function(){return er.a});var Sr=s(5);s.d(n,"isNumber",function(){return Sr.a});var Vr=s(13);s.d(n,"isObject",function(){return Vr.a});var ti=s(15);s.d(n,"isObjectLike",function(){return ti.a});var hi=s(9);s.d(n,"isPlainObject",function(){return hi.a});var Fi=s(28);s.d(n,"isPrototype",function(){return Fi.a});var to=s(87);s.d(n,"isRegExp",function(){return to.a});var si=s(8);s.d(n,"isString",function(){return si.a});var Ci=s(4);s.d(n,"isType",function(){return Ci.a});var _i=s(88);s.d(n,"isUndefined",function(){return _i.a});var Li=s(89);s.d(n,"isElement",function(){return Li.a});var Vi=s(90);s.d(n,"requestAnimationFrame",function(){return Vi.a});var ro=s(91);s.d(n,"clearAnimationFrame",function(){return ro.a});var jr=s(92);s.d(n,"augment",function(){return jr.a});var Ji=s(93);s.d(n,"clone",function(){return Ji.a});var pr=s(94);s.d(n,"debounce",function(){return pr.a});var Yr=s(95);s.d(n,"memoize",function(){return Yr.a});var Br=s(96);s.d(n,"deepMix",function(){return Br.a});var Nr=s(2);s.d(n,"each",function(){return Nr.a});var Xr=s(97);s.d(n,"extend",function(){return Xr.a});var Kr=s(98);s.d(n,"indexOf",function(){return Kr.a});var ni=s(99);s.d(n,"isEmpty",function(){return ni.a});var fi=s(29);s.d(n,"isEqual",function(){return fi.a});var $r=s(100);s.d(n,"isEqualWith",function(){return $r.a});var ci=s(101);s.d(n,"map",function(){return ci.a});var Qr=s(102);s.d(n,"mapValues",function(){return Qr.a});var gi=s(16);s.d(n,"mix",function(){return gi.a}),s.d(n,"assign",function(){return gi.a});var Oi=s(103);s.d(n,"get",function(){return Oi.a});var bi=s(104);s.d(n,"set",function(){return bi.a});var zi=s(105);s.d(n,"pick",function(){return zi.a});var Qi=s(106);s.d(n,"throttle",function(){return Qi.a});var io=s(107);s.d(n,"toArray",function(){return io.a});var Wi=s(10);s.d(n,"toString",function(){return Wi.a});var Zi=s(108);s.d(n,"uniqueId",function(){return Zi.a});var Pi=s(109);s.d(n,"noop",function(){return Pi.a});var no=s(110);s.d(n,"identity",function(){return no.a});var Mo=s(111);s.d(n,"size",function(){return Mo.a});var ao=s(112);s.d(n,"Cache",function(){return ao.a})},function(y,n,s){"use strict";var d=s(14),E=s(12);n.a=function(O,C){return C===void 0&&(C=[]),Object(d.a)(O,function(p){return!Object(E.a)(C,p)})}},function(y,n,s){"use strict";var d=s(3),E=s(19),O=s(0),C=s(9);n.a=function(p,x){if(!Object(O.a)(p))return null;var T;if(Object(d.a)(x)&&(T=x),Object(C.a)(x)&&(T=function(q){return Object(E.a)(q,x)}),T){for(var N=0;N<p.length;N+=1)if(T(p[N]))return p[N]}return null}},function(y,n,s){"use strict";n.a=function(d,E,O){O===void 0&&(O=0);for(var C=O;C<d.length;C++)if(E(d[C],C))return C;return-1}},function(y,n,s){"use strict";var d=s(6),E=s(0);n.a=function(O,C){for(var p=null,x=0;x<O.length;x++){var T=O[x][C];if(!Object(d.a)(T)){p=Object(E.a)(T)?T[0]:T;break}}return p}},function(y,n,s){"use strict";var d=s(0);n.a=function(E){if(!Object(d.a)(E))return[];for(var O=[],C=0;C<E.length;C++)O=O.concat(E[C]);return O}},function(y,n,s){"use strict";var d=s(0);n.a=function E(O,C){if(C===void 0&&(C=[]),Object(d.a)(O))for(var p=0;p<O.length;p+=1)E(O[p],C);else C.push(O);return C}},function(y,n,s){"use strict";var d=s(0),E=s(14);n.a=function(O){if(!(O=Object(E.a)(O,function(T){return!isNaN(T)})).length)return{min:0,max:0};if(Object(d.a)(O[0])){for(var C=[],p=0;p<O.length;p++)C=C.concat(O[p]);O=C}var x=Math.max.apply(null,O);return{min:Math.min.apply(null,O),max:x}}},function(y,n,s){"use strict";var d=Array.prototype,E=d.splice,O=d.indexOf;n.a=function(C){for(var p=[],x=1;x<arguments.length;x++)p[x-1]=arguments[x];for(var T=0;T<p.length;T++)for(var N=p[T],Y=-1;(Y=O.call(C,N))>-1;)E.call(C,Y,1);return C}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(9);n.a=function(C,p,x){if(!Object(E.a)(C)&&!Object(O.a)(C))return C;var T=x;return Object(d.a)(C,function(N,Y){T=p(T,N,Y)}),T}},function(y,n,s){"use strict";var d=s(1),E=s(21);n.a=function(O,C){var p=[];if(!Object(d.a)(O))return p;for(var x=-1,T=[],N=O.length;++x<N;){var Y=O[x];C(Y,x,O)&&(p.push(Y),T.push(x))}return Object(E.a)(O,T),p}},function(y,n,s){"use strict";var d=s(0),E=s(8),O=s(3);n.a=function(C,p){var x;if(Object(O.a)(p))x=function(Y,q){return p(Y)-p(q)};else{var T=[];Object(E.a)(p)?T.push(p):Object(d.a)(p)&&(T=p),x=function(Y,q){for(var nt=0;nt<T.length;nt+=1){var vt=T[nt];if(Y[vt]>q[vt])return 1;if(Y[vt]<q[vt])return-1}return 0}}return C.sort(x),C}},function(y,n,s){"use strict";var d=s(22);n.a=function(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];return Object(d.a)([].concat.apply([],E))}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(6);n.a=function(C,p){var x=[],T={};return C.forEach(function(N){var Y=N[p];Object(O.a)(Y)||(Object(E.a)(Y)||(Y=[Y]),Object(d.a)(Y,function(q){T[q]||(x.push(q),T[q]=!0)}))}),x}},function(y,n,s){"use strict";n.a=function(E){if(Object(d.a)(E))return E[0]};var d=s(1)},function(y,n,s){"use strict";n.a=function(E){if(Object(d.a)(E))return E[E.length-1]};var d=s(1)},function(y,n,s){"use strict";var d=s(0),E=s(8);n.a=function(O,C){return!(!Object(d.a)(O)&&!Object(E.a)(O))&&O[0]===C}},function(y,n,s){"use strict";var d=s(0),E=s(8);n.a=function(O,C){return!(!Object(d.a)(O)&&!Object(E.a)(O))&&O[O.length-1]===C}},function(y,n,s){"use strict";n.a=function(d,E){for(var O=0;O<d.length;O++)if(!E(d[O],O))return!1;return!0}},function(y,n,s){"use strict";n.a=function(d,E){for(var O=0;O<d.length;O++)if(E(d[O],O))return!0;return!1}},function(y,n,s){"use strict";var d=s(23);n.a=function(E,O){if(!O)return[E];var C=Object(d.a)(E,O),p=[];for(var x in C)p.push(C[x]);return p}},function(y,n,s){"use strict";n.a=function(d,E){return d["_wrap_"+E]}},function(y,n,s){"use strict";n.a=function(d,E){if(d["_wrap_"+E])return d["_wrap_"+E];var O=function(p){d[E](p)};return d["_wrap_"+E]=O,O}},function(y,n,s){"use strict";var d={};n.a=function(E){var O=d[E];if(!O){for(var C=E.toString(16),p=C.length;p<6;p++)C="0"+C;O="#"+C,d[E]=O}return O}},function(y,n,s){"use strict";var d=s(0);n.a=function(E){var O=0,C=0,p=0,x=0;return Object(d.a)(E)?E.length===1?O=C=p=x=E[0]:E.length===2?(O=p=E[0],C=x=E[1]):E.length===3?(O=E[0],C=x=E[1],p=E[2]):(O=E[0],C=E[1],p=E[2],x=E[3]):O=C=p=x=E,{r1:O,r2:C,r3:p,r4:x}}},function(y,n,s){"use strict";n.a=function(d,E,O){return d<E?E:d>O?O:d}},function(y,n,s){"use strict";n.a=function(d,E){var O=E.toString(),C=O.indexOf(".");if(C===-1)return Math.round(d);var p=O.substr(C+1).length;return p>20&&(p=20),parseFloat(d.toFixed(p))}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%1!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%2==0}},function(y,n,s){"use strict";var d=s(5),E=Number.isInteger?Number.isInteger:function(O){return Object(d.a)(O)&&O%1==0};n.a=E},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E<0}},function(y,n,s){"use strict";n.a=function(d,E,O){return O===void 0&&(O=1e-5),Math.abs(d-E)<O}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%2!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E>0}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3);n.a=function(C,p){if(Object(E.a)(C)){var x,T,N=C[0];return x=Object(O.a)(p)?p(C[0]):C[0][p],Object(d.a)(C,function(Y){(T=Object(O.a)(p)?p(Y):Y[p])>x&&(N=Y,x=T)}),N}}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3);n.a=function(C,p){if(Object(E.a)(C)){var x,T,N=C[0];return x=Object(O.a)(p)?p(C[0]):C[0][p],Object(d.a)(C,function(Y){(T=Object(O.a)(p)?p(Y):Y[p])<x&&(N=Y,x=T)}),N}}},function(y,n,s){"use strict";n.a=function(d,E){return(d%E+E)%E}},function(y,n,s){"use strict";var d=180/Math.PI;n.a=function(E){return d*E}},function(y,n,s){"use strict";n.a=parseInt},function(y,n,s){"use strict";var d=Math.PI/180;n.a=function(E){return d*E}},function(y,n,s){"use strict";var d=s(2);n.a=d.a},function(y,n,s){"use strict";var d=s(25);n.a=d.a},function(y,n,s){"use strict";var d=s(12),E=s(26);n.a=function(O,C){return Object(d.a)(Object(E.a)(O),C)}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){return Object(d.a)(E).toLowerCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){var O=Object(d.a)(E);return O.charAt(0).toLowerCase()+O.substring(1)}},function(y,n,s){"use strict";n.a=function(d,E){return d&&E?d.replace(/\\?\{([^{}]+)\}/g,function(O,C){return O.charAt(0)==="\\"?O.slice(1):E[C]===void 0?"":E[C]}):d}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){return Object(d.a)(E).toUpperCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){var O=Object(d.a)(E);return O.charAt(0).toUpperCase()+O.substring(1)}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Arguments")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Boolean")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Date")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Error")}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&isFinite(E)}},function(y,n,s){"use strict";n.a=function(d){return d===null}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"RegExp")}},function(y,n,s){"use strict";n.a=function(d){return d===void 0}},function(y,n,s){"use strict";n.a=function(d){return d instanceof Element||d instanceof HTMLDocument}},function(y,n,s){"use strict";n.a=function(d){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)})(d)}},function(y,n,s){"use strict";n.a=function(d){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(d)}},function(y,n,s){"use strict";var d=s(16),E=s(3);n.a=function(){for(var O=[],C=0;C<arguments.length;C++)O[C]=arguments[C];for(var p=O[0],x=1;x<O.length;x++){var T=O[x];Object(E.a)(T)&&(T=T.prototype),Object(d.a)(p.prototype,T)}}},function(y,n,s){"use strict";var d=s(0);n.a=function E(O){if(M(O)!=="object"||O===null)return O;var C;if(Object(d.a)(O)){C=[];for(var p=0,x=O.length;p<x;p++)M(O[p])==="object"&&O[p]!=null?C[p]=E(O[p]):C[p]=O[p]}else for(var T in C={},O)M(O[T])==="object"&&O[T]!=null?C[T]=E(O[T]):C[T]=O[T];return C}},function(y,n,s){"use strict";n.a=function(d,E,O){var C;return function(){var p=this,x=arguments,T=function(){C=null,O||d.apply(p,x)},N=O&&!C;clearTimeout(C),C=setTimeout(T,E),N&&d.apply(p,x)}}},function(y,n,s){"use strict";var d=s(3);n.a=function(E,O){if(!Object(d.a)(E))throw new TypeError("Expected a function");var C=function p(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=O?O.apply(this,x):x[0],Y=p.cache;if(Y.has(N))return Y.get(N);var q=E.apply(this,x);return Y.set(N,q),q};return C.cache=new Map,C}},function(y,n,s){"use strict";var d=s(0),E=s(9);function O(C,p,x,T){for(var N in x=x||0,T=T||5,p)if(p.hasOwnProperty(N)){var Y=p[N];Y!==null&&Object(E.a)(Y)?(Object(E.a)(C[N])||(C[N]={}),x<T?O(C[N],Y,x+1,T):C[N]=p[N]):Object(d.a)(Y)?(C[N]=[],C[N]=C[N].concat(Y)):Y!==void 0&&(C[N]=Y)}}n.a=function(C){for(var p=[],x=1;x<arguments.length;x++)p[x-1]=arguments[x];for(var T=0;T<p.length;T+=1)O(C,p[T]);return C}},function(y,n,s){"use strict";var d=s(16),E=s(3);n.a=function(O,C,p,x){Object(E.a)(C)||(p=C,C=O,O=function(){});var T=Object.create?function(Y,q){return Object.create(Y,{constructor:{value:q}})}:function(Y,q){function nt(){}nt.prototype=Y;var vt=new nt;return vt.constructor=q,vt},N=T(C.prototype,O);return O.prototype=Object(d.a)(N,O.prototype),O.superclass=T(C.prototype,C),Object(d.a)(N,p),Object(d.a)(O,x),O}},function(y,n,s){"use strict";var d=s(1);n.a=function(E,O){if(!Object(d.a)(E))return-1;var C=Array.prototype.indexOf;if(C)return C.call(E,O);for(var p=-1,x=0;x<E.length;x++)if(E[x]===O){p=x;break}return p}},function(y,n,s){"use strict";var d=s(6),E=s(1),O=s(27),C=s(28),p=Object.prototype.hasOwnProperty;n.a=function(x){if(Object(d.a)(x))return!0;if(Object(E.a)(x))return!x.length;var T=Object(O.a)(x);if(T==="Map"||T==="Set")return!x.size;if(Object(C.a)(x))return!Object.keys(x).length;for(var N in x)if(p.call(x,N))return!1;return!0}},function(y,n,s){"use strict";var d=s(3),E=s(29);n.a=function(O,C,p){return Object(d.a)(p)?!!p(O,C):Object(E.a)(O,C)}},function(y,n,s){"use strict";var d=s(2),E=s(1);n.a=function(O,C){if(!Object(E.a)(O))return O;var p=[];return Object(d.a)(O,function(x,T){p.push(C(x,T))}),p}},function(y,n,s){"use strict";var d=s(6),E=s(13),O=function(p){return p};n.a=function(C,p){p===void 0&&(p=O);var x={};return Object(E.a)(C)&&!Object(d.a)(C)&&Object.keys(C).forEach(function(T){x[T]=p(C[T],T)}),x}},function(y,n,s){"use strict";var d=s(8);n.a=function(E,O,C){for(var p=0,x=Object(d.a)(O)?O.split("."):O;E&&p<x.length;)E=E[x[p++]];return E===void 0||p<x.length?C:E}},function(y,n,s){"use strict";var d=s(13),E=s(8),O=s(5);n.a=function(C,p,x){var T=C,N=Object(E.a)(p)?p.split("."):p;return N.forEach(function(Y,q){q<N.length-1?(Object(d.a)(T[Y])||(T[Y]=Object(O.a)(N[q+1])?[]:{}),T=T[Y]):T[Y]=x}),C}},function(y,n,s){"use strict";var d=s(2),E=s(9),O=Object.prototype.hasOwnProperty;n.a=function(C,p){if(C===null||!Object(E.a)(C))return{};var x={};return Object(d.a)(p,function(T){O.call(C,T)&&(x[T]=C[T])}),x}},function(y,n,s){"use strict";n.a=function(d,E,O){var C,p,x,T,N=0;O||(O={});var Y=function(){N=O.leading===!1?0:Date.now(),C=null,T=d.apply(p,x),C||(p=x=null)},q=function(){var vt=Date.now();N||O.leading!==!1||(N=vt);var ht=E-(vt-N);return p=this,x=arguments,ht<=0||ht>E?(C&&(clearTimeout(C),C=null),N=vt,T=d.apply(p,x),C||(p=x=null)):C||O.trailing===!1||(C=setTimeout(Y,ht)),T};return q.cancel=function(){clearTimeout(C),N=0,C=p=x=null},q}},function(y,n,s){"use strict";var d=s(1);n.a=function(E){return Object(d.a)(E)?Array.prototype.slice.call(E):[]}},function(y,n,s){"use strict";var d={};n.a=function(E){return d[E=E||"g"]?d[E]+=1:d[E]=1,E+d[E]}},function(y,n,s){"use strict";n.a=function(){}},function(y,n,s){"use strict";n.a=function(d){return d}},function(y,n,s){"use strict";n.a=function(O){return Object(d.a)(O)?0:Object(E.a)(O)?O.length:Object.keys(O).length};var d=s(6),E=s(1)},function(y,n,s){"use strict";var d=function(){function E(){this.map={}}return E.prototype.has=function(O){return this.map[O]!==void 0},E.prototype.get=function(O,C){var p=this.map[O];return p===void 0?C:p},E.prototype.set=function(O,C){this.map[O]=C},E.prototype.clear=function(){this.map={}},E.prototype.delete=function(O){delete this.map[O]},E.prototype.size=function(){return Object.keys(this.map).length},E}();n.a=d},function(y,n){function s(E,O,C,p){p===void 0&&(p=[]);var x=this;x.w=E||0,x.h=O||0,x.y=C||0,x.x=0,x.c=p||[],x.cs=p.length,x.prelim=0,x.mod=0,x.shift=0,x.change=0,x.tl=null,x.tr=null,x.el=null,x.er=null,x.msel=0,x.mser=0}function d(E,O){var C=function p(x,T){var N=T?x.y:x.x;return x.children.forEach(function(Y){N=Math.min(p(Y,T),N)}),N}(E,O);(function p(x,T,N){N?x.y+=T:x.x+=T,x.children.forEach(function(Y){p(Y,T,N)})})(E,-C,O)}s.fromNode=function(E,O){if(!E)return null;var C=[];return E.children.forEach(function(p){C.push(s.fromNode(p,O))}),O?new s(E.height,E.width,E.x,C):new s(E.width,E.height,E.y,C)},y.exports=function(E,O){O===void 0&&(O={});var C=O.isHorizontal;function p(ht){ht.cs===0?(ht.el=ht,ht.er=ht,ht.msel=ht.mser=0):(ht.el=ht.c[0].el,ht.msel=ht.c[0].msel,ht.er=ht.c[ht.cs-1].er,ht.mser=ht.c[ht.cs-1].mser)}function x(ht,St,wt){for(var xt=ht.c[St-1],ft=xt.mod,Ft=ht.c[St],kt=Ft.mod;xt!==null&&Ft!==null;){q(xt)>wt.low&&(wt=wt.nxt);var Ot=ft+xt.prelim+xt.w-(kt+Ft.prelim);Ot>0&&(kt+=Ot,T(ht,St,wt.index,Ot));var X=q(xt),ct=q(Ft);X<=ct&&(xt=Y(xt))!==null&&(ft+=xt.mod),X>=ct&&(Ft=N(Ft))!==null&&(kt+=Ft.mod)}!xt&&Ft?function(dt,pt,Mt,tt){var lt=dt.c[0].el;lt.tl=Mt;var it=tt-Mt.mod-dt.c[0].msel;lt.mod+=it,lt.prelim-=it,dt.c[0].el=dt.c[pt].el,dt.c[0].msel=dt.c[pt].msel}(ht,St,Ft,kt):xt&&!Ft&&function(dt,pt,Mt,tt){var lt=dt.c[pt].er;lt.tr=Mt;var it=tt-Mt.mod-dt.c[pt].mser;lt.mod+=it,lt.prelim-=it,dt.c[pt].er=dt.c[pt-1].er,dt.c[pt].mser=dt.c[pt-1].mser}(ht,St,xt,ft)}function T(ht,St,wt,xt){ht.c[St].mod+=xt,ht.c[St].msel+=xt,ht.c[St].mser+=xt,function(ft,Ft,kt,Ot){if(kt!==Ft-1){var X=Ft-kt;ft.c[kt+1].shift+=Ot/X,ft.c[Ft].shift-=Ot/X,ft.c[Ft].change-=Ot-Ot/X}}(ht,St,wt,xt)}function N(ht){return ht.cs===0?ht.tl:ht.c[0]}function Y(ht){return ht.cs===0?ht.tr:ht.c[ht.cs-1]}function q(ht){return ht.y+ht.h}function nt(ht,St,wt){for(;wt!==null&&ht>=wt.low;)wt=wt.nxt;return{low:ht,index:St,nxt:wt}}(function ht(St,wt,xt){xt===void 0&&(xt=0),wt?(St.x=xt,xt+=St.width):(St.y=xt,xt+=St.height),St.children.forEach(function(ft){ht(ft,wt,xt)})})(E,C);var vt=s.fromNode(E,C);return function ht(St){if(St.cs!==0){ht(St.c[0]);for(var wt=nt(q(St.c[0].el),0,null),xt=1;xt<St.cs;++xt){ht(St.c[xt]);var ft=q(St.c[xt].er);x(St,xt,wt),wt=nt(ft,xt,wt)}(function(Ft){Ft.prelim=(Ft.c[0].prelim+Ft.c[0].mod+Ft.c[Ft.cs-1].mod+Ft.c[Ft.cs-1].prelim+Ft.c[Ft.cs-1].w)/2-Ft.w/2})(St),p(St)}else p(St)}(vt),function ht(St,wt){wt+=St.mod,St.x=St.prelim+wt,function(ft){for(var Ft=0,kt=0,Ot=0;Ot<ft.cs;Ot++)Ft+=ft.c[Ot].shift,kt+=Ft+ft.c[Ot].change,ft.c[Ot].mod+=kt}(St);for(var xt=0;xt<St.cs;xt++)ht(St.c[xt],wt)}(vt,0),function ht(St,wt,xt){xt?wt.y=St.x:wt.x=St.x,St.c.forEach(function(ft,Ft){ht(ft,wt.children[Ft],xt)})}(vt,E,C),d(E,C),E}},function(y,n,s){var d=s(11),E=s(115),O=s(17),C=s(7),p=function(T){var N,Y;function q(){return T.apply(this,arguments)||this}return Y=T,(N=q).prototype=Object.create(Y.prototype),N.prototype.constructor=N,N.__proto__=Y,q.prototype.execute=function(){return this.rootNode.width=0,O(this.rootNode,this.options,E)},q}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new p(T,N).execute()}},function(y,n,s){var d=s(7);function E(C,p){C===void 0&&(C=0),p===void 0&&(p=[]);var x=this;x.x=x.y=0,x.leftChild=x.rightChild=null,x.height=0,x.children=p}var O={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};y.exports=function(C,p){p===void 0&&(p={}),p=d.assign({},O,p);var x,T=0,N=function Y(q){if(!q)return null;q.width=0,q.depth&&q.depth>T&&(T=q.depth);var nt=q.children,vt=nt.length,ht=new E(q.height,[]);return nt.forEach(function(St,wt){var xt=Y(St);ht.children.push(xt),wt===0&&(ht.leftChild=xt),wt===vt-1&&(ht.rightChild=xt)}),ht.originNode=q,ht.isLeaf=q.isLeaf(),ht}(C);return function Y(q){if(q.isLeaf||q.children.length===0)q.drawingDepth=T;else{var nt=q.children.map(function(ht){return Y(ht)}),vt=Math.min.apply(null,nt);q.drawingDepth=vt-1}return q.drawingDepth}(N),function Y(q){q.x=q.drawingDepth*p.rankSep,q.isLeaf?(q.y=0,x&&(q.y=x.y+x.height+p.nodeSep,q.originNode.parent!==x.originNode.parent&&(q.y+=p.subTreeSep)),x=q):(q.children.forEach(function(nt){Y(nt)}),q.y=(q.leftChild.y+q.rightChild.y)/2)}(N),function Y(q,nt,vt){vt?(nt.x=q.x,nt.y=q.y):(nt.x=q.y,nt.y=q.x),q.children.forEach(function(ht,St){Y(ht,nt.children[St],vt)})}(N,C,p.isHorizontal),C}},function(y,n,s){var d=s(11),E=s(117),O=s(30),C=s(7),p=["LR","RL","H"],x=p[0],T=function(Y){var q,nt;function vt(){return Y.apply(this,arguments)||this}return nt=Y,(q=vt).prototype=Object.create(nt.prototype),q.prototype.constructor=q,q.__proto__=nt,vt.prototype.execute=function(){var ht=this.options,St=this.rootNode;ht.isHorizontal=!0;var wt=ht.indent,xt=wt===void 0?20:wt,ft=ht.dropCap,Ft=ft===void 0||ft,kt=ht.direction||x;if(kt&&p.indexOf(kt)===-1)throw new TypeError("Invalid direction: "+kt);if(kt===p[0])E(St,xt,Ft);else if(kt===p[1])E(St,xt,Ft),St.right2left();else if(kt===p[2]){var Ot=O(St,ht),X=Ot.left,ct=Ot.right;E(X,xt,Ft),X.right2left(),E(ct,xt,Ft);var dt=X.getBoundingBox();ct.translate(dt.width,0),St.x=ct.x-St.width/2}return St},vt}(d),N={};y.exports=function(Y,q){return q=C.assign({},N,q),new T(Y,q).execute()}},function(y,n){y.exports=function(s,d,E){var O=null;s.eachNode(function(C){(function(p,x,T,N){if(!N)try{if(p.id===p.parent.children[0].id)return p.x+=T*p.depth,void(p.y=x?x.y:0)}catch(Y){}p.x+=T*p.depth,p.y=x?x.y+x.height:0})(C,O,d,E),O=C})}},function(y,n,s){var d=s(11),E=s(119),O=s(17),C=s(7),p=function(T){var N,Y;function q(){return T.apply(this,arguments)||this}return Y=T,(N=q).prototype=Object.create(Y.prototype),N.prototype.constructor=N,N.__proto__=Y,q.prototype.execute=function(){return O(this.rootNode,this.options,E)},q}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new p(T,N).execute()}},function(y,n,s){var d=s(7),E={getSubTreeSep:function(){return 0}};y.exports=function(O,C){C===void 0&&(C={}),C=d.assign({},E,C),O.parent={x:0,width:0,height:0,y:0},O.BFTraverse(function(p){p.x=p.parent.x+p.parent.width}),O.parent=null,function p(x,T){var N=0;return x.children.length?x.children.forEach(function(Y){N+=p(Y,T)}):N=x.height,x._subTreeSep=T.getSubTreeSep(x.data),x.totalHeight=Math.max(x.height,N)+2*x._subTreeSep,x.totalHeight}(O,C),O.startY=0,O.y=O.totalHeight/2-O.height/2,O.eachNode(function(p){var x=p.children,T=x.length;if(T){var N=x[0];if(N.startY=p.startY+p._subTreeSep,T===1)N.y=p.y+p.height/2-N.height/2;else{N.y=N.startY+N.totalHeight/2-N.height/2;for(var Y=1;Y<T;Y++){var q=x[Y];q.startY=x[Y-1].startY+x[Y-1].totalHeight,q.y=q.startY+q.totalHeight/2-q.height/2}}}}),function p(x){var T=x.children,N=T.length;if(N){T.forEach(function(St){p(St)});var Y=T[0],q=T[N-1],nt=q.y-Y.y+q.height,vt=0;if(T.forEach(function(St){vt+=St.totalHeight}),nt>x.height)x.y=Y.y+nt/2-x.height/2;else if(T.length!==1||x.height>vt){var ht=x.y+(x.height-nt)/2-Y.y;T.forEach(function(St){St.translate(0,ht)})}else x.y=(Y.y+Y.height/2+q.y+q.height/2)/2-x.height/2}}(O)}}])},M(A)==="object"&&M(i)==="object"?i.exports=f():(b=[],(S=typeof(v=f)=="function"?v.apply(A,b):v)===void 0||(i.exports=S))}).call(this,e(86)(a))},function(a,A){},function(a,A){},function(a,A){var e,i,v=a.exports={};function b(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}function f(C){if(e===setTimeout)return setTimeout(C,0);if((e===b||!e)&&setTimeout)return e=setTimeout,setTimeout(C,0);try{return e(C,0)}catch(p){try{return e.call(null,C,0)}catch(x){return e.call(this,C,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:b}catch(C){e=b}try{i=typeof clearTimeout=="function"?clearTimeout:S}catch(C){i=S}})();var M,I=[],y=!1,n=-1;function s(){y&&M&&(y=!1,M.length?I=M.concat(I):n=-1,I.length&&d())}function d(){if(!y){var C=f(s);y=!0;for(var p=I.length;p;){for(M=I,I=[];++n<p;)M&&M[n].run();n=-1,p=I.length}M=null,y=!1,function(x){if(i===clearTimeout)return clearTimeout(x);if((i===S||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(x);try{i(x)}catch(T){try{return i.call(null,x)}catch(N){return i.call(this,x)}}}(C)}}function E(C,p){this.fun=C,this.array=p}function O(){}v.nextTick=function(C){var p=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)p[x-1]=arguments[x];I.push(new E(C,p)),I.length!==1||y||f(d)},E.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=O,v.addListener=O,v.once=O,v.off=O,v.removeListener=O,v.removeAllListeners=O,v.emit=O,v.prependListener=O,v.prependOnceListener=O,v.listeners=function(C){return[]},v.binding=function(C){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(C){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},function(a,A,e){"use strict";var i=e(1),v=function(b){function S(){return b!==null&&b.apply(this,arguments)||this}return Object(i.b)(S,b),S.prototype.isGroup=function(){return!0},S.prototype.isEntityGroup=function(){return!1},S.prototype.clone=function(){for(var f=b.prototype.clone.call(this),M=this.getChildren(),I=0;I<M.length;I++){var y=M[I];f.add(y.clone())}return f},S}(e(117).a);A.a=v},function(a,A,e){"use strict";var i=e(1),v=e(118),b=e(39),S=function(f){function M(I){return f.call(this,I)||this}return Object(i.b)(M,f),M.prototype._isInBBox=function(I,y){var n=this.getBBox();return n.minX<=I&&n.maxX>=I&&n.minY<=y&&n.maxY>=y},M.prototype.afterAttrsChange=function(I){f.prototype.afterAttrsChange.call(this,I),this.clearCacheBBox()},M.prototype.getBBox=function(){var I=this.cfg.bbox;return I||(I=this.calculateBBox(),this.set("bbox",I)),I},M.prototype.getCanvasBBox=function(){var I=this.cfg.canvasBBox;return I||(I=this.calculateCanvasBBox(),this.set("canvasBBox",I)),I},M.prototype.applyMatrix=function(I){f.prototype.applyMatrix.call(this,I),this.set("canvasBBox",null)},M.prototype.calculateCanvasBBox=function(){var I=this.getBBox(),y=this.getTotalMatrix(),n=I.minX,s=I.minY,d=I.maxX,E=I.maxY;if(y){var O=Object(b.c)(y,[I.minX,I.minY]),C=Object(b.c)(y,[I.maxX,I.minY]),p=Object(b.c)(y,[I.minX,I.maxY]),x=Object(b.c)(y,[I.maxX,I.maxY]);n=Math.min(O[0],C[0],p[0],x[0]),d=Math.max(O[0],C[0],p[0],x[0]),s=Math.min(O[1],C[1],p[1],x[1]),E=Math.max(O[1],C[1],p[1],x[1])}var T=this.attrs;if(T.shadowColor){var N=T.shadowBlur,Y=N===void 0?0:N,q=T.shadowOffsetX,nt=q===void 0?0:q,vt=T.shadowOffsetY,ht=vt===void 0?0:vt,St=n-Y+nt,wt=d+Y+nt,xt=s-Y+ht,ft=E+Y+ht;n=Math.min(n,St),d=Math.max(d,wt),s=Math.min(s,xt),E=Math.max(E,ft)}return{x:n,y:s,minX:n,minY:s,maxX:d,maxY:E,width:d-n,height:E-s}},M.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},M.prototype.isClipShape=function(){return this.get("isClipShape")},M.prototype.isInShape=function(I,y){return!1},M.prototype.isOnlyHitBox=function(){return!1},M.prototype.isHit=function(I,y){var n=this.get("startArrowShape"),s=this.get("endArrowShape"),d=[I,y,1],E=(d=this.invertFromMatrix(d))[0],O=d[1],C=this._isInBBox(E,O);return this.isOnlyHitBox()?C:!!(C&&!this.isClipped(E,O)&&(this.isInShape(E,O)||n&&n.isHit(E,O)||s&&s.isHit(E,O)))},M}(v.a);A.a=S},function(a,A,e){var i=e(268),v={};for(var b in i)i.hasOwnProperty(b)&&(v[i[b]]=b);var S=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var f in S)if(S.hasOwnProperty(f)){if(!("channels"in S[f]))throw new Error("missing channels property: "+f);if(!("labels"in S[f]))throw new Error("missing channel labels property: "+f);if(S[f].labels.length!==S[f].channels)throw new Error("channel and label counts mismatch: "+f);var M=S[f].channels,I=S[f].labels;delete S[f].channels,delete S[f].labels,Object.defineProperty(S[f],"channels",{value:M}),Object.defineProperty(S[f],"labels",{value:I})}S.rgb.hsl=function(y){var n,s,d=y[0]/255,E=y[1]/255,O=y[2]/255,C=Math.min(d,E,O),p=Math.max(d,E,O),x=p-C;return p===C?n=0:d===p?n=(E-O)/x:E===p?n=2+(O-d)/x:O===p&&(n=4+(d-E)/x),(n=Math.min(60*n,360))<0&&(n+=360),s=(C+p)/2,[n,100*(p===C?0:s<=.5?x/(p+C):x/(2-p-C)),100*s]},S.rgb.hsv=function(y){var n,s,d,E,O,C=y[0]/255,p=y[1]/255,x=y[2]/255,T=Math.max(C,p,x),N=T-Math.min(C,p,x),Y=function(nt){return(T-nt)/6/N+.5};return N===0?E=O=0:(O=N/T,n=Y(C),s=Y(p),d=Y(x),C===T?E=d-s:p===T?E=1/3+n-d:x===T&&(E=2/3+s-n),E<0?E+=1:E>1&&(E-=1)),[360*E,100*O,100*T]},S.rgb.hwb=function(y){var n=y[0],s=y[1],d=y[2];return[S.rgb.hsl(y)[0],100*(1/255*Math.min(n,Math.min(s,d))),100*(d=1-1/255*Math.max(n,Math.max(s,d)))]},S.rgb.cmyk=function(y){var n,s=y[0]/255,d=y[1]/255,E=y[2]/255;return[100*((1-s-(n=Math.min(1-s,1-d,1-E)))/(1-n)||0),100*((1-d-n)/(1-n)||0),100*((1-E-n)/(1-n)||0),100*n]},S.rgb.keyword=function(y){var n=v[y];if(n)return n;var s,d,E,O=1/0;for(var C in i)if(i.hasOwnProperty(C)){var p=i[C],x=(d=y,E=p,Math.pow(d[0]-E[0],2)+Math.pow(d[1]-E[1],2)+Math.pow(d[2]-E[2],2));x<O&&(O=x,s=C)}return s},S.keyword.rgb=function(y){return i[y]},S.rgb.xyz=function(y){var n=y[0]/255,s=y[1]/255,d=y[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)),100*(.2126*n+.7152*s+.0722*d),100*(.0193*n+.1192*s+.9505*d)]},S.rgb.lab=function(y){var n=S.rgb.xyz(y),s=n[0],d=n[1],E=n[2];return d/=100,E/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116)-16,500*(s-d),200*(d-(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116))]},S.hsl.rgb=function(y){var n,s,d,E,O,C=y[0]/360,p=y[1]/100,x=y[2]/100;if(p===0)return[O=255*x,O,O];n=2*x-(s=x<.5?x*(1+p):x+p-x*p),E=[0,0,0];for(var T=0;T<3;T++)(d=C+1/3*-(T-1))<0&&d++,d>1&&d--,O=6*d<1?n+6*(s-n)*d:2*d<1?s:3*d<2?n+(s-n)*(2/3-d)*6:n,E[T]=255*O;return E},S.hsl.hsv=function(y){var n=y[0],s=y[1]/100,d=y[2]/100,E=s,O=Math.max(d,.01);return s*=(d*=2)<=1?d:2-d,E*=O<=1?O:2-O,[n,100*(d===0?2*E/(O+E):2*s/(d+s)),100*((d+s)/2)]},S.hsv.rgb=function(y){var n=y[0]/60,s=y[1]/100,d=y[2]/100,E=Math.floor(n)%6,O=n-Math.floor(n),C=255*d*(1-s),p=255*d*(1-s*O),x=255*d*(1-s*(1-O));switch(d*=255,E){case 0:return[d,x,C];case 1:return[p,d,C];case 2:return[C,d,x];case 3:return[C,p,d];case 4:return[x,C,d];case 5:return[d,C,p]}},S.hsv.hsl=function(y){var n,s,d,E=y[0],O=y[1]/100,C=y[2]/100,p=Math.max(C,.01);return d=(2-O)*C,s=O*p,[E,100*(s=(s/=(n=(2-O)*p)<=1?n:2-n)||0),100*(d/=2)]},S.hwb.rgb=function(y){var n,s,d,E,O,C,p,x=y[0]/360,T=y[1]/100,N=y[2]/100,Y=T+N;switch(Y>1&&(T/=Y,N/=Y),d=6*x-(n=Math.floor(6*x)),(1&n)!=0&&(d=1-d),E=T+d*((s=1-N)-T),n){default:case 6:case 0:O=s,C=E,p=T;break;case 1:O=E,C=s,p=T;break;case 2:O=T,C=s,p=E;break;case 3:O=T,C=E,p=s;break;case 4:O=E,C=T,p=s;break;case 5:O=s,C=T,p=E}return[255*O,255*C,255*p]},S.cmyk.rgb=function(y){var n=y[0]/100,s=y[1]/100,d=y[2]/100,E=y[3]/100;return[255*(1-Math.min(1,n*(1-E)+E)),255*(1-Math.min(1,s*(1-E)+E)),255*(1-Math.min(1,d*(1-E)+E))]},S.xyz.rgb=function(y){var n,s,d,E=y[0]/100,O=y[1]/100,C=y[2]/100;return s=-.9689*E+1.8758*O+.0415*C,d=.0557*E+-.204*O+1.057*C,n=(n=3.2406*E+-1.5372*O+-.4986*C)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,[255*(n=Math.min(Math.max(0,n),1)),255*(s=Math.min(Math.max(0,s),1)),255*(d=Math.min(Math.max(0,d),1))]},S.xyz.lab=function(y){var n=y[0],s=y[1],d=y[2];return s/=100,d/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(n-s),200*(s-(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116))]},S.lab.xyz=function(y){var n,s,d,E=y[0];n=y[1]/500+(s=(E+16)/116),d=s-y[2]/200;var O=Math.pow(s,3),C=Math.pow(n,3),p=Math.pow(d,3);return s=O>.008856?O:(s-16/116)/7.787,n=C>.008856?C:(n-16/116)/7.787,d=p>.008856?p:(d-16/116)/7.787,[n*=95.047,s*=100,d*=108.883]},S.lab.lch=function(y){var n,s=y[0],d=y[1],E=y[2];return(n=360*Math.atan2(E,d)/2/Math.PI)<0&&(n+=360),[s,Math.sqrt(d*d+E*E),n]},S.lch.lab=function(y){var n,s=y[0],d=y[1];return n=y[2]/360*2*Math.PI,[s,d*Math.cos(n),d*Math.sin(n)]},S.rgb.ansi16=function(y){var n=y[0],s=y[1],d=y[2],E=1 in arguments?arguments[1]:S.rgb.hsv(y)[2];if((E=Math.round(E/50))===0)return 30;var O=30+(Math.round(d/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return E===2&&(O+=60),O},S.hsv.ansi16=function(y){return S.rgb.ansi16(S.hsv.rgb(y),y[2])},S.rgb.ansi256=function(y){var n=y[0],s=y[1],d=y[2];return n===s&&s===d?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(d/255*5)},S.ansi16.rgb=function(y){var n=y%10;if(n===0||n===7)return y>50&&(n+=3.5),[n=n/10.5*255,n,n];var s=.5*(1+~~(y>50));return[(1&n)*s*255,(n>>1&1)*s*255,(n>>2&1)*s*255]},S.ansi256.rgb=function(y){if(y>=232){var n=10*(y-232)+8;return[n,n,n]}var s;return y-=16,[Math.floor(y/36)/5*255,Math.floor((s=y%36)/6)/5*255,s%6/5*255]},S.rgb.hex=function(y){var n=(((255&Math.round(y[0]))<<16)+((255&Math.round(y[1]))<<8)+(255&Math.round(y[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},S.hex.rgb=function(y){var n=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var s=n[0];n[0].length===3&&(s=s.split("").map(function(E){return E+E}).join(""));var d=parseInt(s,16);return[d>>16&255,d>>8&255,255&d]},S.rgb.hcg=function(y){var n,s=y[0]/255,d=y[1]/255,E=y[2]/255,O=Math.max(Math.max(s,d),E),C=Math.min(Math.min(s,d),E),p=O-C;return n=p<=0?0:O===s?(d-E)/p%6:O===d?2+(E-s)/p:4+(s-d)/p+4,n/=6,[360*(n%=1),100*p,100*(p<1?C/(1-p):0)]},S.hsl.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=1,E=0;return(d=s<.5?2*n*s:2*n*(1-s))<1&&(E=(s-.5*d)/(1-d)),[y[0],100*d,100*E]},S.hsv.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=n*s,E=0;return d<1&&(E=(s-d)/(1-d)),[y[0],100*d,100*E]},S.hcg.rgb=function(y){var n=y[0]/360,s=y[1]/100,d=y[2]/100;if(s===0)return[255*d,255*d,255*d];var E,O=[0,0,0],C=n%1*6,p=C%1,x=1-p;switch(Math.floor(C)){case 0:O[0]=1,O[1]=p,O[2]=0;break;case 1:O[0]=x,O[1]=1,O[2]=0;break;case 2:O[0]=0,O[1]=1,O[2]=p;break;case 3:O[0]=0,O[1]=x,O[2]=1;break;case 4:O[0]=p,O[1]=0,O[2]=1;break;default:O[0]=1,O[1]=0,O[2]=x}return E=(1-s)*d,[255*(s*O[0]+E),255*(s*O[1]+E),255*(s*O[2]+E)]},S.hcg.hsv=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n),d=0;return s>0&&(d=n/s),[y[0],100*d,100*s]},S.hcg.hsl=function(y){var n=y[1]/100,s=y[2]/100*(1-n)+.5*n,d=0;return s>0&&s<.5?d=n/(2*s):s>=.5&&s<1&&(d=n/(2*(1-s))),[y[0],100*d,100*s]},S.hcg.hwb=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n);return[y[0],100*(s-n),100*(1-s)]},S.hwb.hcg=function(y){var n=y[1]/100,s=1-y[2]/100,d=s-n,E=0;return d<1&&(E=(s-d)/(1-d)),[y[0],100*d,100*E]},S.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},S.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},S.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},S.gray.hsl=S.gray.hsv=function(y){return[0,0,y[0]]},S.gray.hwb=function(y){return[0,100,y[0]]},S.gray.cmyk=function(y){return[0,0,0,y[0]]},S.gray.lab=function(y){return[y[0],0,0]},S.gray.hex=function(y){var n=255&Math.round(y[0]/100*255),s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s},S.rgb.gray=function(y){return[(y[0]+y[1]+y[2])/3/255*100]}},function(a,A,e){var i=e(95),v=e(127),b=e(100),S=e(301),f=e(307),M=e(169),I=e(170),y=e(310),n=e(311),s=e(174),d=e(312),E=e(74),O=e(316),C=e(317),p=e(179),x=e(26),T=e(73),N=e(321),Y=e(43),q=e(323),nt=e(58),vt=e(65),ht={};ht["[object Arguments]"]=ht["[object Array]"]=ht["[object ArrayBuffer]"]=ht["[object DataView]"]=ht["[object Boolean]"]=ht["[object Date]"]=ht["[object Float32Array]"]=ht["[object Float64Array]"]=ht["[object Int8Array]"]=ht["[object Int16Array]"]=ht["[object Int32Array]"]=ht["[object Map]"]=ht["[object Number]"]=ht["[object Object]"]=ht["[object RegExp]"]=ht["[object Set]"]=ht["[object String]"]=ht["[object Symbol]"]=ht["[object Uint8Array]"]=ht["[object Uint8ClampedArray]"]=ht["[object Uint16Array]"]=ht["[object Uint32Array]"]=!0,ht["[object Error]"]=ht["[object Function]"]=ht["[object WeakMap]"]=!1,a.exports=function St(wt,xt,ft,Ft,kt,Ot){var X,ct=1&xt,dt=2&xt,pt=4&xt;if(ft&&(X=kt?ft(wt,Ft,kt,Ot):ft(wt)),X!==void 0)return X;if(!Y(wt))return wt;var Mt=x(wt);if(Mt){if(X=O(wt),!ct)return I(wt,X)}else{var tt=E(wt),lt=tt=="[object Function]"||tt=="[object GeneratorFunction]";if(T(wt))return M(wt,ct);if(tt=="[object Object]"||tt=="[object Arguments]"||lt&&!kt){if(X=dt||lt?{}:p(wt),!ct)return dt?n(wt,f(X,wt)):y(wt,S(X,wt))}else{if(!ht[tt])return kt?wt:{};X=C(wt,tt,ct)}}Ot||(Ot=new i);var it=Ot.get(wt);if(it)return it;Ot.set(wt,X),q(wt)?wt.forEach(function(P){X.add(St(P,xt,ft,P,wt,Ot))}):N(wt)&&wt.forEach(function(P,H){X.set(H,St(P,xt,ft,H,wt,Ot))});var U=Mt?void 0:(pt?dt?d:s:dt?vt:nt)(wt);return v(U||wt,function(P,H){U&&(P=wt[H=P]),b(X,H,St(P,xt,ft,H,wt,Ot))}),X}},function(a,A,e){(function(i){function v(S){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(S)}var b=(i===void 0?"undefined":v(i))=="object"&&i&&i.Object===Object&&i;a.exports=b}).call(this,e(164))},function(a,A){function e(v){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(v){(typeof window=="undefined"?"undefined":e(window))==="object"&&(i=window)}a.exports=i},function(a,A){var e=Function.prototype.toString;a.exports=function(i){if(i!=null){try{return e.call(i)}catch(v){}try{return i+""}catch(v){}}return""}},function(a,A,e){var i=e(64),v=function(){try{var b=i(Object,"defineProperty");return b({},"",{}),b}catch(S){}}();a.exports=v},function(a,A,e){var i=e(302),v=e(85),b=e(26),S=e(73),f=e(102),M=e(44),I=Object.prototype.hasOwnProperty;a.exports=function(y,n){var s=b(y),d=!s&&v(y),E=!s&&!d&&S(y),O=!s&&!d&&!E&&M(y),C=s||d||E||O,p=C?i(y.length,String):[],x=p.length;for(var T in y)!n&&!I.call(y,T)||C&&(T=="length"||E&&(T=="offset"||T=="parent")||O&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||f(T,x))||p.push(T);return p}},function(a,A){a.exports=function(e,i){return function(v){return e(i(v))}}},function(a,A,e){(function(i){function v(y){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var b=e(47),S=v(A)=="object"&&A&&!A.nodeType&&A,f=S&&v(i)=="object"&&i&&!i.nodeType&&i,M=f&&f.exports===S?b.Buffer:void 0,I=M?M.allocUnsafe:void 0;i.exports=function(y,n){if(n)return y.slice();var s=y.length,d=I?I(s):new y.constructor(s);return y.copy(d),d}}).call(this,e(86)(a))},function(a,A){a.exports=function(e,i){var v=-1,b=e.length;for(i||(i=Array(b));++v<b;)i[v]=e[v];return i}},function(a,A){a.exports=function(e,i){for(var v=-1,b=e==null?0:e.length,S=0,f=[];++v<b;){var M=e[v];i(M,v,e)&&(f[S++]=M)}return f}},function(a,A){a.exports=function(){return[]}},function(a,A,e){var i=e(132),v=e(105),b=e(131),S=e(172),f=Object.getOwnPropertySymbols?function(M){for(var I=[];M;)i(I,b(M)),M=v(M);return I}:S;a.exports=f},function(a,A,e){var i=e(175),v=e(131),b=e(58);a.exports=function(S){return i(S,b,v)}},function(a,A,e){var i=e(132),v=e(26);a.exports=function(b,S,f){var M=S(b);return v(b)?M:i(M,f(b))}},function(a,A,e){var i=e(64)(e(47),"Set");a.exports=i},function(a,A,e){var i=e(47).Uint8Array;a.exports=i},function(a,A,e){var i=e(133);a.exports=function(v,b){var S=b?i(v.buffer):v.buffer;return new v.constructor(S,v.byteOffset,v.length)}},function(a,A,e){var i=e(180),v=e(105),b=e(104);a.exports=function(S){return typeof S.constructor!="function"||b(S)?{}:i(v(S))}},function(a,A,e){var i=e(43),v=Object.create,b=function(){function S(){}return function(f){if(!i(f))return{};if(v)return v(f);S.prototype=f;var M=new S;return S.prototype=void 0,M}}();a.exports=b},function(a,A,e){a.exports=e(182)},function(a,A,e){var i=e(127),v=e(106),b=e(183),S=e(26);a.exports=function(f,M){return(S(f)?i:v)(f,b(M))}},function(a,A,e){var i=e(66);a.exports=function(v){return typeof v=="function"?v:i}},function(a,A,e){var i=e(171),v=e(327),b=e(54),S=e(26);a.exports=function(f,M){return(S(f)?i:v)(f,b(M,3))}},function(a,A,e){var i=e(330),v=e(48);a.exports=function b(S,f,M,I,y){return S===f||(S==null||f==null||!v(S)&&!v(f)?S!=S&&f!=f:i(S,f,M,I,b,y))}},function(a,A,e){var i=e(187),v=e(333),b=e(188);a.exports=function(S,f,M,I,y,n){var s=1&M,d=S.length,E=f.length;if(d!=E&&!(s&&E>d))return!1;var O=n.get(S),C=n.get(f);if(O&&C)return O==f&&C==S;var p=-1,x=!0,T=2&M?new i:void 0;for(n.set(S,f),n.set(f,S);++p<d;){var N=S[p],Y=f[p];if(I)var q=s?I(Y,N,p,f,S,n):I(N,Y,p,S,f,n);if(q!==void 0){if(q)continue;x=!1;break}if(T){if(!v(f,function(nt,vt){if(!b(T,vt)&&(N===nt||y(N,nt,M,I,n)))return T.push(vt)})){x=!1;break}}else if(N!==Y&&!y(N,Y,M,I,n)){x=!1;break}}return n.delete(S),n.delete(f),x}},function(a,A,e){var i=e(126),v=e(331),b=e(332);function S(f){var M=-1,I=f==null?0:f.length;for(this.__data__=new i;++M<I;)this.add(f[M])}S.prototype.add=S.prototype.push=v,S.prototype.has=b,a.exports=S},function(a,A){a.exports=function(e,i){return e.has(i)}},function(a,A,e){var i=e(43);a.exports=function(v){return v==v&&!i(v)}},function(a,A){a.exports=function(e,i){return function(v){return v!=null&&v[e]===i&&(i!==void 0||e in Object(v))}}},function(a,A,e){var i=e(343);a.exports=function(v){return v==null?"":i(v)}},function(a,A,e){var i=e(344),v=e(193);a.exports=function(b,S){return b!=null&&v(b,S,i)}},function(a,A,e){var i=e(108),v=e(85),b=e(26),S=e(102),f=e(128),M=e(87);a.exports=function(I,y,n){for(var s=-1,d=(y=i(y,I)).length,E=!1;++s<d;){var O=M(y[s]);if(!(E=I!=null&&n(I,O)))break;I=I[O]}return E||++s!=d?E:!!(d=I==null?0:I.length)&&f(d)&&S(O,d)&&(b(I)||v(I))}},function(a,A){a.exports=function(e){return function(i){return i==null?void 0:i[e]}}},function(a,A,e){var i=e(347),v=e(193);a.exports=function(b,S){return b!=null&&v(b,S,i)}},function(a,A){a.exports=function(e){return e===void 0}},function(a,A,e){var i=e(109),v=e(54),b=e(198),S=e(26);a.exports=function(f,M){return(S(f)?i:b)(f,v(M,3))}},function(a,A,e){var i=e(106),v=e(53);a.exports=function(b,S){var f=-1,M=v(b)?Array(b.length):[];return i(b,function(I,y,n){M[++f]=S(I,y,n)}),M}},function(a,A,e){var i=e(349),v=e(106),b=e(54),S=e(350),f=e(26);a.exports=function(M,I,y){var n=f(M)?i:S,s=arguments.length<3;return n(M,b(I,4),y,s,v)}},function(a,A,e){var i=e(360),v=Math.max;a.exports=function(b,S,f){return S=v(S===void 0?b.length-1:S,0),function(){for(var M=arguments,I=-1,y=v(M.length-S,0),n=Array(y);++I<y;)n[I]=M[S+I];I=-1;for(var s=Array(S+1);++I<S;)s[I]=M[I];return s[S]=f(n),i(b,this,s)}}},function(a,A,e){var i=e(361),v=e(362)(i);a.exports=v},function(a,A,e){var i=e(187),v=e(363),b=e(367),S=e(188),f=e(368),M=e(137);a.exports=function(I,y,n){var s=-1,d=v,E=I.length,O=!0,C=[],p=C;if(n)O=!1,d=b;else if(E>=200){var x=y?null:f(I);if(x)return M(x);O=!1,d=S,p=new i}else p=y?[]:C;t:for(;++s<E;){var T=I[s],N=y?y(T):T;if(T=n||T!==0?T:0,O&&N==N){for(var Y=p.length;Y--;)if(p[Y]===N)continue t;y&&p.push(N),C.push(T)}else d(p,N,n)||(p!==C&&p.push(N),C.push(T))}return C}},function(a,A){a.exports=function(e,i,v,b){for(var S=e.length,f=v+(b?1:-1);b?f--:++f<S;)if(i(e[f],f,e))return f;return-1}},function(a,A,e){var i=e(53),v=e(48);a.exports=function(b){return v(b)&&i(b)}},function(a,A,e){var i=e(370),v=e(58);a.exports=function(b){return b==null?[]:i(b,v(b))}},function(a,A,e){var i=e(42),v=e(207);a.exports=function(S,f,M,I){return function(y,n,s,d){var E,O,C={},p=new v,x=function(N){var Y=N.v!==E?N.v:N.w,q=C[Y],nt=s(N),vt=O.distance+nt;if(nt<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+N+" Weight: "+nt);vt<q.distance&&(q.distance=vt,q.predecessor=E,p.decrease(Y,vt))};for(y.nodes().forEach(function(T){var N=T===n?0:Number.POSITIVE_INFINITY;C[T]={distance:N},p.add(T,N)});p.size()>0&&(E=p.removeMin(),(O=C[E]).distance!==Number.POSITIVE_INFINITY);)d(E).forEach(x);return C}(S,String(f),M||b,I||function(y){return S.outEdges(y)})};var b=i.constant(1)},function(a,A,e){var i=e(42);function v(){this._arr=[],this._keyIndices={}}a.exports=v,v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(b){return b.key})},v.prototype.has=function(b){return i.has(this._keyIndices,b)},v.prototype.priority=function(b){var S=this._keyIndices[b];if(S!==void 0)return this._arr[S].priority},v.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(b,S){var f=this._keyIndices;if(b=String(b),!i.has(f,b)){var M=this._arr,I=M.length;return f[b]=I,M.push({key:b,priority:S}),this._decrease(I),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var b=this._arr.pop();return delete this._keyIndices[b.key],this._heapify(0),b.key},v.prototype.decrease=function(b,S){var f=this._keyIndices[b];if(S>this._arr[f].priority)throw new Error("New priority is greater than current priority. Key: "+b+" Old: "+this._arr[f].priority+" New: "+S);this._arr[f].priority=S,this._decrease(f)},v.prototype._heapify=function(b){var S=this._arr,f=2*b,M=f+1,I=b;f<S.length&&(I=S[f].priority<S[I].priority?f:I,M<S.length&&(I=S[M].priority<S[I].priority?M:I),I!==b&&(this._swap(b,I),this._heapify(I)))},v.prototype._decrease=function(b){for(var S,f=this._arr,M=f[b].priority;b!==0&&!(f[S=b>>1].priority<M);)this._swap(b,S),b=S},v.prototype._swap=function(b,S){var f=this._arr,M=this._keyIndices,I=f[b],y=f[S];f[b]=y,f[S]=I,M[y.key]=b,M[I.key]=S}},function(a,A,e){var i=e(42);a.exports=function(v){var b=0,S=[],f={},M=[];return v.nodes().forEach(function(I){i.has(f,I)||function y(n){var s=f[n]={onStack:!0,lowlink:b,index:b++};if(S.push(n),v.successors(n).forEach(function(O){i.has(f,O)?f[O].onStack&&(s.lowlink=Math.min(s.lowlink,f[O].index)):(y(O),s.lowlink=Math.min(s.lowlink,f[O].lowlink))}),s.lowlink===s.index){var d,E=[];do d=S.pop(),f[d].onStack=!1,E.push(d);while(n!==d);M.push(E)}}(I)}),M}},function(a,A,e){var i=e(42);function v(S){var f={},M={},I=[];if(i.each(S.sinks(),function y(n){if(i.has(M,n))throw new b;i.has(f,n)||(M[n]=!0,f[n]=!0,i.each(S.predecessors(n),y),delete M[n],I.push(n))}),i.size(f)!==S.nodeCount())throw new b;return I}function b(){}a.exports=v,v.CycleException=b,b.prototype=new Error},function(a,A,e){var i=e(42);a.exports=function(v,b,S){i.isArray(b)||(b=[b]);var f=(v.isDirected()?v.successors:v.neighbors).bind(v),M=[],I={};return i.each(b,function(y){if(!v.hasNode(y))throw new Error("Graph does not have node: "+y);(function n(s,d,E,O,C,p){i.has(O,d)||(O[d]=!0,E||p.push(d),i.each(C(d),function(x){n(s,x,E,O,C,p)}),E&&p.push(d))})(v,y,S==="post",I,f,M)}),M}},function(a,A,e){var i=e(389);a.exports=function(v){return v?(v=i(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0}},function(a,A,e){var i=e(139);a.exports=function(v){return(v==null?0:v.length)?i(v,1):[]}},function(a,A,e){var i=e(101),v=e(71);a.exports=function(b,S,f){(f!==void 0&&!v(b[S],f)||f===void 0&&!(S in b))&&i(b,S,f)}},function(a,A){a.exports=function(e,i){if((i!=="constructor"||typeof e[i]!="function")&&i!="__proto__")return e[i]}},function(a,A){a.exports=function(e,i){return e<i}},function(a,A,e){"use strict";var i=e(24),v=e(46).Graph,b=e(112).slack;function S(I,y){return i.forEach(I.nodes(),function n(s){i.forEach(y.nodeEdges(s),function(d){var E=d.v,O=s===E?d.w:E;I.hasNode(O)||b(y,d)||(I.setNode(O,{}),I.setEdge(s,O,{}),n(O))})}),I.nodeCount()}function f(I,y){return i.minBy(y.edges(),function(n){if(I.hasNode(n.v)!==I.hasNode(n.w))return b(y,n)})}function M(I,y,n){i.forEach(I.nodes(),function(s){y.node(s).rank+=n})}a.exports=function(I){var y,n,s=new v({directed:!1}),d=I.nodes()[0],E=I.nodeCount();for(s.setNode(d,{});S(s,I)<E;)y=f(s,I),n=s.hasNode(y.v)?b(I,y):-b(I,y),M(s,I,n);return s}},function(a,A,e){(function(i,v){function b(f){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var S;(function(f){(function(M){var I=(v===void 0?"undefined":b(v))==="object"?v:(typeof self=="undefined"?"undefined":b(self))==="object"?self:b(this)==="object"?this:Function("return this;")(),y=n(f);function n(s,d){return function(E,O){typeof s[E]!="function"&&Object.defineProperty(s,E,{configurable:!0,writable:!0,value:O}),d&&d(E,O)}}I.Reflect===void 0?I.Reflect=f:y=n(I.Reflect,y),function(s){var d=Object.prototype.hasOwnProperty,E=typeof Symbol=="function",O=E&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",C=E&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",p=typeof Object.create=="function",x={__proto__:[]}instanceof Array,T=!p&&!x,N={create:p?function(){return k(Object.create(null))}:x?function(){return k({__proto__:null})}:function(){return k({})},has:T?function(h,g){return d.call(h,g)}:function(h,g){return g in h},get:T?function(h,g){return d.call(h,g)?h[g]:void 0}:function(h,g){return h[g]}},Y=Object.getPrototypeOf(Function),q=(i===void 0?"undefined":b(i))==="object"&&i.env&&i.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",nt=q||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var h={},g=[],G=function(){function ot(At,gt,mt){this._index=0,this._keys=At,this._values=gt,this._selector=mt}return ot.prototype["@@iterator"]=function(){return this},ot.prototype[C]=function(){return this},ot.prototype.next=function(){var At=this._index;if(At>=0&&At<this._keys.length){var gt=this._selector(this._keys[At],this._values[At]);return At+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:gt,done:!1}}return{value:void 0,done:!0}},ot.prototype.throw=function(At){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),At},ot.prototype.return=function(At){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:At,done:!0}},ot}();return function(){function ot(){this._keys=[],this._values=[],this._cacheKey=h,this._cacheIndex=-2}return Object.defineProperty(ot.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ot.prototype.has=function(At){return this._find(At,!1)>=0},ot.prototype.get=function(At){var gt=this._find(At,!1);return gt>=0?this._values[gt]:void 0},ot.prototype.set=function(At,gt){var mt=this._find(At,!0);return this._values[mt]=gt,this},ot.prototype.delete=function(At){var gt=this._find(At,!1);if(gt>=0){for(var mt=this._keys.length,bt=gt+1;bt<mt;bt++)this._keys[bt-1]=this._keys[bt],this._values[bt-1]=this._values[bt];return this._keys.length--,this._values.length--,At===this._cacheKey&&(this._cacheKey=h,this._cacheIndex=-2),!0}return!1},ot.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=h,this._cacheIndex=-2},ot.prototype.keys=function(){return new G(this._keys,this._values,V)},ot.prototype.values=function(){return new G(this._keys,this._values,$)},ot.prototype.entries=function(){return new G(this._keys,this._values,rt)},ot.prototype["@@iterator"]=function(){return this.entries()},ot.prototype[C]=function(){return this.entries()},ot.prototype._find=function(At,gt){return this._cacheKey!==At&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=At)),this._cacheIndex<0&&gt&&(this._cacheIndex=this._keys.length,this._keys.push(At),this._values.push(void 0)),this._cacheIndex},ot}();function V(ot,At){return ot}function $(ot,At){return At}function rt(ot,At){return[ot,At]}}():Map,vt=q||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function h(){this._map=new nt}return Object.defineProperty(h.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),h.prototype.has=function(g){return this._map.has(g)},h.prototype.add=function(g){return this._map.set(g,g),this},h.prototype.delete=function(g){return this._map.delete(g)},h.prototype.clear=function(){this._map.clear()},h.prototype.keys=function(){return this._map.keys()},h.prototype.values=function(){return this._map.values()},h.prototype.entries=function(){return this._map.entries()},h.prototype["@@iterator"]=function(){return this.keys()},h.prototype[C]=function(){return this.keys()},h}():Set,ht=new(q||typeof WeakMap!="function"?function(){var h=N.create(),g=G();return function(){function ot(){this._key=G()}return ot.prototype.has=function(At){var gt=V(At,!1);return gt!==void 0&&N.has(gt,this._key)},ot.prototype.get=function(At){var gt=V(At,!1);return gt!==void 0?N.get(gt,this._key):void 0},ot.prototype.set=function(At,gt){return V(At,!0)[this._key]=gt,this},ot.prototype.delete=function(At){var gt=V(At,!1);return gt!==void 0&&delete gt[this._key]},ot.prototype.clear=function(){this._key=G()},ot}();function G(){var ot;do ot="@@WeakMap@@"+rt();while(N.has(h,ot));return h[ot]=!0,ot}function V(ot,At){if(!d.call(ot,g)){if(!At)return;Object.defineProperty(ot,g,{value:N.create()})}return ot[g]}function $(ot,At){for(var gt=0;gt<At;++gt)ot[gt]=255*Math.random()|0;return ot}function rt(){var ot,At=(ot=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(ot)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(ot)):$(new Uint8Array(ot),ot):$(new Array(ot),ot));At[6]=79&At[6]|64,At[8]=191&At[8]|128;for(var gt="",mt=0;mt<16;++mt){var bt=At[mt];mt!==4&&mt!==6&&mt!==8||(gt+="-"),bt<16&&(gt+="0"),gt+=bt.toString(16).toLowerCase()}return gt}}():WeakMap);function St(h,g,G){var V=ht.get(h);if(Ot(V)){if(!G)return;V=new nt,ht.set(h,V)}var $=V.get(g);if(Ot($)){if(!G)return;$=new nt,V.set(g,$)}return $}function wt(h,g,G){var V=St(g,G,!1);return!Ot(V)&&!!V.has(h)}function xt(h,g,G){var V=St(g,G,!1);if(!Ot(V))return V.get(h)}function ft(h,g,G,V){St(G,V,!0).set(h,g)}function Ft(h,g){var G=[],V=St(h,g,!1);if(Ot(V))return G;for(var $=function(gt){var mt=it(gt,C);if(!tt(mt))throw new TypeError;var bt=mt.call(gt);if(!ct(bt))throw new TypeError;return bt}(V.keys()),rt=0;;){var ot=U($);if(!ot)return G.length=rt,G;var At=ot.value;try{G[rt]=At}catch(gt){try{P($)}finally{throw gt}}rt++}}function kt(h){if(h===null)return 1;switch(b(h)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return h===null?1:6;default:return 6}}function Ot(h){return h===void 0}function X(h){return h===null}function ct(h){return b(h)==="object"?h!==null:typeof h=="function"}function dt(h,g){switch(kt(h)){case 0:case 1:case 2:case 3:case 4:case 5:return h}var G=g===3?"string":g===5?"number":"default",V=it(h,O);if(V!==void 0){var $=V.call(h,G);if(ct($))throw new TypeError;return $}return function(rt,ot){if(ot==="string"){var At=rt.toString;if(tt(At)&&!ct(mt=At.call(rt))||tt(gt=rt.valueOf)&&!ct(mt=gt.call(rt)))return mt}else{var gt;if(tt(gt=rt.valueOf)&&!ct(mt=gt.call(rt)))return mt;var mt,bt=rt.toString;if(tt(bt)&&!ct(mt=bt.call(rt)))return mt}throw new TypeError}(h,G==="default"?"number":G)}function pt(h){var g=dt(h,3);return b(g)==="symbol"?g:function(G){return""+G}(g)}function Mt(h){return Array.isArray?Array.isArray(h):h instanceof Object?h instanceof Array:Object.prototype.toString.call(h)==="[object Array]"}function tt(h){return typeof h=="function"}function lt(h){return typeof h=="function"}function it(h,g){var G=h[g];if(G!=null){if(!tt(G))throw new TypeError;return G}}function U(h){var g=h.next();return!g.done&&g}function P(h){var g=h.return;g&&g.call(h)}function H(h){var g=Object.getPrototypeOf(h);if(typeof h!="function"||h===Y||g!==Y)return g;var G=h.prototype,V=G&&Object.getPrototypeOf(G);if(V==null||V===Object.prototype)return g;var $=V.constructor;return typeof $!="function"||$===h?g:$}function k(h){return h.__=void 0,delete h.__,h}s("decorate",function(h,g,G,V){if(Ot(G)){if(!Mt(h))throw new TypeError;if(!lt(g))throw new TypeError;return function($,rt){for(var ot=$.length-1;ot>=0;--ot){var At=(0,$[ot])(rt);if(!Ot(At)&&!X(At)){if(!lt(At))throw new TypeError;rt=At}}return rt}(h,g)}if(!Mt(h))throw new TypeError;if(!ct(g))throw new TypeError;if(!ct(V)&&!Ot(V)&&!X(V))throw new TypeError;return X(V)&&(V=void 0),function($,rt,ot,At){for(var gt=$.length-1;gt>=0;--gt){var mt=(0,$[gt])(rt,ot,At);if(!Ot(mt)&&!X(mt)){if(!ct(mt))throw new TypeError;At=mt}}return At}(h,g,G=pt(G),V)}),s("metadata",function(h,g){return function(G,V){if(!ct(G))throw new TypeError;if(!Ot(V)&&!function($){switch(kt($)){case 3:case 4:return!0;default:return!1}}(V))throw new TypeError;ft(h,g,G,V)}}),s("defineMetadata",function(h,g,G,V){if(!ct(G))throw new TypeError;return Ot(V)||(V=pt(V)),ft(h,g,G,V)}),s("hasMetadata",function(h,g,G){if(!ct(g))throw new TypeError;return Ot(G)||(G=pt(G)),function V($,rt,ot){if(wt($,rt,ot))return!0;var At=H(rt);return!X(At)&&V($,At,ot)}(h,g,G)}),s("hasOwnMetadata",function(h,g,G){if(!ct(g))throw new TypeError;return Ot(G)||(G=pt(G)),wt(h,g,G)}),s("getMetadata",function(h,g,G){if(!ct(g))throw new TypeError;return Ot(G)||(G=pt(G)),function V($,rt,ot){if(wt($,rt,ot))return xt($,rt,ot);var At=H(rt);return X(At)?void 0:V($,At,ot)}(h,g,G)}),s("getOwnMetadata",function(h,g,G){if(!ct(g))throw new TypeError;return Ot(G)||(G=pt(G)),xt(h,g,G)}),s("getMetadataKeys",function(h,g){if(!ct(h))throw new TypeError;return Ot(g)||(g=pt(g)),function G(V,$){var rt=Ft(V,$),ot=H(V);if(ot===null)return rt;var At=G(ot,$);if(At.length<=0)return rt;if(rt.length<=0)return At;for(var gt=new vt,mt=[],bt=0,jt=rt;bt<jt.length;bt++){var Dt=jt[bt];gt.has(Dt)||(gt.add(Dt),mt.push(Dt))}for(var Ut=0,Ct=At;Ut<Ct.length;Ut++)Dt=Ct[Ut],gt.has(Dt)||(gt.add(Dt),mt.push(Dt));return mt}(h,g)}),s("getOwnMetadataKeys",function(h,g){if(!ct(h))throw new TypeError;return Ot(g)||(g=pt(g)),Ft(h,g)}),s("deleteMetadata",function(h,g,G){if(!ct(g))throw new TypeError;Ot(G)||(G=pt(G));var V=St(g,G,!1);if(Ot(V)||!V.delete(h))return!1;if(V.size>0)return!0;var $=ht.get(g);return $.delete(G),$.size>0||ht.delete(g),!0})}(y)})()})(S||(S={}))}).call(this,e(158),e(164))},function(a,A,e){var i=e(219);a.exports=function(v,b){if(v){if(typeof v=="string")return i(v,b);var S=Object.prototype.toString.call(v).slice(8,-1);return S==="Object"&&v.constructor&&(S=v.constructor.name),S==="Map"||S==="Set"?Array.from(v):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?i(v,b):void 0}}},function(a,A){a.exports=function(e,i){(i==null||i>e.length)&&(i=e.length);for(var v=0,b=new Array(i);v<i;v++)b[v]=e[v];return b}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.MetadataReader=void 0;var i=e(32),v=function(){function b(){}return b.prototype.getConstructorMetadata=function(S){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,S),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,S)||{}}},b.prototype.getPropertiesMetadata=function(S){return Reflect.getMetadata(i.TAGGED_PROP,S)||[]},b}();A.MetadataReader=v},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.isStackOverflowExeption=void 0;var i=e(41);A.isStackOverflowExeption=function(v){return v instanceof RangeError||v.message===i.STACK_OVERFLOW}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.inject=A.LazyServiceIdentifer=void 0;var i=e(41),v=e(32),b=e(49),S=e(59),f=function(){function M(I){this._cb=I}return M.prototype.unwrap=function(){return this._cb()},M}();A.LazyServiceIdentifer=f,A.inject=function(M){return function(I,y,n){if(M===void 0)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(I.name));var s=new b.Metadata(v.INJECT_TAG,M);typeof n=="number"?S.tagParameter(I,y,n,s):S.tagProperty(I,y,s)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Target=void 0;var i=e(32),v=e(67),b=e(49),S=e(453),f=function(){function M(I,y,n,s){this.id=v.id(),this.type=I,this.serviceIdentifier=n,this.name=new S.QueryableString(y||""),this.metadata=new Array;var d=null;typeof s=="string"?d=new b.Metadata(i.NAMED_TAG,s):s instanceof b.Metadata&&(d=s),d!==null&&this.metadata.push(d)}return M.prototype.hasTag=function(I){for(var y=0,n=this.metadata;y<n.length;y++)if(n[y].key===I)return!0;return!1},M.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},M.prototype.matchesArray=function(I){return this.matchesTag(i.MULTI_INJECT_TAG)(I)},M.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},M.prototype.isTagged=function(){return this.metadata.some(function(I){return I.key!==i.INJECT_TAG&&I.key!==i.MULTI_INJECT_TAG&&I.key!==i.NAME_TAG&&I.key!==i.UNMANAGED_TAG&&I.key!==i.NAMED_TAG})},M.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},M.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(I){return I.key===i.NAMED_TAG})[0]:null},M.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(I){return I.key!==i.INJECT_TAG&&I.key!==i.MULTI_INJECT_TAG&&I.key!==i.NAME_TAG&&I.key!==i.UNMANAGED_TAG&&I.key!==i.NAMED_TAG}):null},M.prototype.matchesNamedTag=function(I){return this.matchesTag(i.NAMED_TAG)(I)},M.prototype.matchesTag=function(I){var y=this;return function(n){for(var s=0,d=y.metadata;s<d.length;s++){var E=d[s];if(E.key===I&&E.value===n)return!0}return!1}},M}();A.Target=f},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenOnSyntax=void 0;var i=e(141),v=e(142),b=function(){function S(f){this._binding=f,this._bindingWhenSyntax=new v.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return S.prototype.when=function(f){return this._bindingWhenSyntax.when(f)},S.prototype.whenTargetNamed=function(f){return this._bindingWhenSyntax.whenTargetNamed(f)},S.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},S.prototype.whenTargetTagged=function(f,M){return this._bindingWhenSyntax.whenTargetTagged(f,M)},S.prototype.whenInjectedInto=function(f){return this._bindingWhenSyntax.whenInjectedInto(f)},S.prototype.whenParentNamed=function(f){return this._bindingWhenSyntax.whenParentNamed(f)},S.prototype.whenParentTagged=function(f,M){return this._bindingWhenSyntax.whenParentTagged(f,M)},S.prototype.whenAnyAncestorIs=function(f){return this._bindingWhenSyntax.whenAnyAncestorIs(f)},S.prototype.whenNoAncestorIs=function(f){return this._bindingWhenSyntax.whenNoAncestorIs(f)},S.prototype.whenAnyAncestorNamed=function(f){return this._bindingWhenSyntax.whenAnyAncestorNamed(f)},S.prototype.whenAnyAncestorTagged=function(f,M){return this._bindingWhenSyntax.whenAnyAncestorTagged(f,M)},S.prototype.whenNoAncestorNamed=function(f){return this._bindingWhenSyntax.whenNoAncestorNamed(f)},S.prototype.whenNoAncestorTagged=function(f,M){return this._bindingWhenSyntax.whenNoAncestorTagged(f,M)},S.prototype.whenAnyAncestorMatches=function(f){return this._bindingWhenSyntax.whenAnyAncestorMatches(f)},S.prototype.whenNoAncestorMatches=function(f){return this._bindingWhenSyntax.whenNoAncestorMatches(f)},S.prototype.onActivation=function(f){return this._bindingOnSyntax.onActivation(f)},S}();A.BindingWhenOnSyntax=b},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.typeConstraint=A.namedConstraint=A.taggedConstraint=A.traverseAncerstors=void 0;var i=e(32),v=e(49);A.traverseAncerstors=function f(M,I){var y=M.parentRequest;return y!==null&&(!!I(y)||f(y,I))};var b=function(M){return function(I){var y=function(s){return s!==null&&s.target!==null&&s.target.matchesTag(M)(I)};return y.metaData=new v.Metadata(M,I),y}};A.taggedConstraint=b;var S=b(i.NAMED_TAG);A.namedConstraint=S,A.typeConstraint=function(f){return function(M){var I=null;if(M!==null){if(I=M.bindings[0],typeof f=="string")return I.serviceIdentifier===f;var y=M.bindings[0].implementationType;return f===y}return!1}}},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=1e-6},function(a,A){a.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},function(a,A){a.exports=function(e,i,v){return e[0]=i,e[1]=v,e}},function(a,A){a.exports=function(e,i,v){return e[0]=i[0]+v[0],e[1]=i[1]+v[1],e}},function(a,A){a.exports=function(e,i,v){return e[0]=i[0]*v[0],e[1]=i[1]*v[1],e}},function(a,A){a.exports=function(e,i,v){return e[0]=i[0]/v[0],e[1]=i[1]/v[1],e}},function(a,A){a.exports=function(e,i){var v=i[0]-e[0],b=i[1]-e[1];return Math.sqrt(v*v+b*b)}},function(a,A){a.exports=function(e,i){var v=i[0]-e[0],b=i[1]-e[1];return v*v+b*b}},function(a,A){a.exports=function(e){var i=e[0],v=e[1];return Math.sqrt(i*i+v*v)}},function(a,A){a.exports=function(e){var i=e[0],v=e[1];return i*i+v*v}},function(a,A){a.exports=function(e,i){var v=i[0],b=i[1],S=v*v+b*b;return S>0&&(S=1/Math.sqrt(S),e[0]=i[0]*S,e[1]=i[1]*S),e}},function(a,A){a.exports=function(e,i){return e[0]*i[0]+e[1]*i[1]}},function(a,A){},function(a,A){},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"easeLinear",function(){return wt}),e.d(i,"easeQuad",function(){return Ft}),e.d(i,"easeQuadIn",function(){return xt}),e.d(i,"easeQuadOut",function(){return ft}),e.d(i,"easeQuadInOut",function(){return Ft}),e.d(i,"easeCubic",function(){return X}),e.d(i,"easeCubicIn",function(){return kt}),e.d(i,"easeCubicOut",function(){return Ot}),e.d(i,"easeCubicInOut",function(){return X}),e.d(i,"easePoly",function(){return pt}),e.d(i,"easePolyIn",function(){return ct}),e.d(i,"easePolyOut",function(){return dt}),e.d(i,"easePolyInOut",function(){return pt}),e.d(i,"easeSin",function(){return U}),e.d(i,"easeSinIn",function(){return lt}),e.d(i,"easeSinOut",function(){return it}),e.d(i,"easeSinInOut",function(){return U}),e.d(i,"easeExp",function(){return h}),e.d(i,"easeExpIn",function(){return H}),e.d(i,"easeExpOut",function(){return k}),e.d(i,"easeExpInOut",function(){return h}),e.d(i,"easeCircle",function(){return V}),e.d(i,"easeCircleIn",function(){return g}),e.d(i,"easeCircleOut",function(){return G}),e.d(i,"easeCircleInOut",function(){return V}),e.d(i,"easeBounce",function(){return ot}),e.d(i,"easeBounceIn",function(){return rt}),e.d(i,"easeBounceOut",function(){return ot}),e.d(i,"easeBounceInOut",function(){return At}),e.d(i,"easeBack",function(){return bt}),e.d(i,"easeBackIn",function(){return gt}),e.d(i,"easeBackOut",function(){return mt}),e.d(i,"easeBackInOut",function(){return bt}),e.d(i,"easeElastic",function(){return Ut}),e.d(i,"easeElasticIn",function(){return Dt}),e.d(i,"easeElasticOut",function(){return Ut}),e.d(i,"easeElasticInOut",function(){return Ct});var v=e(1),b=e(119),S=e(117),f=e(19),M=e(0);function I(oe){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var y,n,s=0,d=0,E=0,O=0,C=0,p=0,x=(typeof performance=="undefined"?"undefined":I(performance))==="object"&&performance.now?performance:Date,T=(typeof window=="undefined"?"undefined":I(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(oe){setTimeout(oe,17)};function N(){return C||(T(Y),C=x.now()+p)}function Y(){C=0}function q(){this._call=this._time=this._next=null}function nt(oe,Kt,te){var Oe=new q;return Oe.restart(oe,Kt,te),Oe}function vt(){C=(O=x.now())+p,s=d=0;try{(function(){N(),++s;for(var oe,Kt=y;Kt;)(oe=C-Kt._time)>=0&&Kt._call.call(null,oe),Kt=Kt._next;--s})()}finally{s=0,function(){for(var oe,Kt,te=y,Oe=1/0;te;)te._call?(Oe>te._time&&(Oe=te._time),oe=te,te=te._next):(Kt=te._next,te._next=null,te=oe?oe._next=Kt:y=Kt);n=oe,St(Oe)}(),C=0}}function ht(){var oe=x.now(),Kt=oe-O;Kt>1e3&&(p-=Kt,O=oe)}function St(oe){s||(d&&(d=clearTimeout(d)),oe-C>24?(oe<1/0&&(d=setTimeout(vt,oe-x.now()-p)),E&&(E=clearInterval(E))):(E||(O=x.now(),E=setInterval(ht,1e3)),s=1,T(vt)))}function wt(oe){return+oe}function xt(oe){return oe*oe}function ft(oe){return oe*(2-oe)}function Ft(oe){return((oe*=2)<=1?oe*oe:--oe*(2-oe)+1)/2}function kt(oe){return oe*oe*oe}function Ot(oe){return--oe*oe*oe+1}function X(oe){return((oe*=2)<=1?oe*oe*oe:(oe-=2)*oe*oe+2)/2}q.prototype=nt.prototype={constructor:q,restart:function(Kt,te,Oe){if(typeof Kt!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?N():+Oe)+(te==null?0:+te),this._next||n===this||(n?n._next=this:y=this,n=this),this._call=Kt,this._time=Oe,St()},stop:function(){this._call&&(this._call=null,this._time=1/0,St())}};var ct=function oe(Kt){function te(Oe){return Math.pow(Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),dt=function oe(Kt){function te(Oe){return 1-Math.pow(1-Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),pt=function oe(Kt){function te(Oe){return((Oe*=2)<=1?Math.pow(Oe,Kt):2-Math.pow(2-Oe,Kt))/2}return Kt=+Kt,te.exponent=oe,te}(3),Mt=Math.PI,tt=Mt/2;function lt(oe){return+oe==1?1:1-Math.cos(oe*tt)}function it(oe){return Math.sin(oe*tt)}function U(oe){return(1-Math.cos(Mt*oe))/2}function P(oe){return 1.0009775171065494*(Math.pow(2,-10*oe)-.0009765625)}function H(oe){return P(1-+oe)}function k(oe){return 1-P(oe)}function h(oe){return((oe*=2)<=1?P(1-oe):2-P(oe-1))/2}function g(oe){return 1-Math.sqrt(1-oe*oe)}function G(oe){return Math.sqrt(1- --oe*oe)}function V(oe){return((oe*=2)<=1?1-Math.sqrt(1-oe*oe):Math.sqrt(1-(oe-=2)*oe)+1)/2}var $=7.5625;function rt(oe){return 1-ot(1-oe)}function ot(oe){return(oe=+oe)<4/11?$*oe*oe:oe<8/11?$*(oe-=6/11)*oe+3/4:oe<10/11?$*(oe-=9/11)*oe+15/16:$*(oe-=21/22)*oe+63/64}function At(oe){return((oe*=2)<=1?1-ot(1-oe):ot(oe-1)+1)/2}var gt=function oe(Kt){function te(Oe){return(Oe=+Oe)*Oe*(Kt*(Oe-1)+Oe)}return Kt=+Kt,te.overshoot=oe,te}(1.70158),mt=function oe(Kt){function te(Oe){return--Oe*Oe*((Oe+1)*Kt+Oe)+1}return Kt=+Kt,te.overshoot=oe,te}(1.70158),bt=function oe(Kt){function te(Oe){return((Oe*=2)<1?Oe*Oe*((Kt+1)*Oe-Kt):(Oe-=2)*Oe*((Kt+1)*Oe+Kt)+2)/2}return Kt=+Kt,te.overshoot=oe,te}(1.70158),jt=2*Math.PI,Dt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Qe(On){return Kt*P(- --On)*Math.sin((Oe-On)/te)}return Qe.amplitude=function(On){return oe(On,te*jt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ut=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Qe(On){return 1-Kt*P(On=+On)*Math.sin((On+Oe)/te)}return Qe.amplitude=function(On){return oe(On,te*jt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ct=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Qe(On){return((On=2*On-1)<0?Kt*P(-On)*Math.sin((Oe-On)/te):2-Kt*P(On)*Math.sin((Oe+On)/te))/2}return Qe.amplitude=function(On){return oe(On,te*jt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Vt=function(Kt,te,Oe){Kt.prototype=te.prototype=Oe,Oe.constructor=Kt};function Ht(oe,Kt){var te=Object.create(oe.prototype);for(var Oe in Kt)te[Oe]=Kt[Oe];return te}function re(){}var pe="\\s*([+-]?\\d+)\\s*",ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ne=/^#([0-9a-f]{3,8})$/,Ke=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),pn=new RegExp("^rgb\\("+[we,we,we]+"\\)$"),hn=new RegExp("^rgba\\("+[pe,pe,pe,ye]+"\\)$"),kn=new RegExp("^rgba\\("+[we,we,we,ye]+"\\)$"),Tn=new RegExp("^hsl\\("+[ye,we,we]+"\\)$"),Rn=new RegExp("^hsla\\("+[ye,we,we,ye]+"\\)$"),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function _n(){return this.rgb().formatRgb()}function Kn(oe){var Kt,te;return oe=(oe+"").trim().toLowerCase(),(Kt=Ne.exec(oe))?(te=Kt[1].length,Kt=parseInt(Kt[1],16),te===6?tr(Kt):te===3?new Sr(Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,(15&Kt)<<4|15&Kt,1):te===8?or(Kt>>24&255,Kt>>16&255,Kt>>8&255,(255&Kt)/255):te===4?or(Kt>>12&15|Kt>>8&240,Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,((15&Kt)<<4|15&Kt)/255):null):(Kt=Ke.exec(oe))?new Sr(Kt[1],Kt[2],Kt[3],1):(Kt=pn.exec(oe))?new Sr(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,1):(Kt=hn.exec(oe))?or(Kt[1],Kt[2],Kt[3],Kt[4]):(Kt=kn.exec(oe))?or(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,Kt[4]):(Kt=Tn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,1):(Kt=Rn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,Kt[4]):Mn.hasOwnProperty(oe)?tr(Mn[oe]):oe==="transparent"?new Sr(NaN,NaN,NaN,0):null}function tr(oe){return new Sr(oe>>16&255,oe>>8&255,255&oe,1)}function or(oe,Kt,te,Oe){return Oe<=0&&(oe=Kt=te=NaN),new Sr(oe,Kt,te,Oe)}function nr(oe){return oe instanceof re||(oe=Kn(oe)),oe?new Sr((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new Sr}function er(oe,Kt,te,Oe){return arguments.length===1?nr(oe):new Sr(oe,Kt,te,Oe==null?1:Oe)}function Sr(oe,Kt,te,Oe){this.r=+oe,this.g=+Kt,this.b=+te,this.opacity=+Oe}function Vr(){return"#"+hi(this.r)+hi(this.g)+hi(this.b)}function ti(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(oe===1?")":", "+oe+")")}function hi(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function Fi(oe,Kt,te,Oe){return Oe<=0?oe=Kt=te=NaN:te<=0||te>=1?oe=Kt=NaN:Kt<=0&&(oe=NaN),new si(oe,Kt,te,Oe)}function to(oe){if(oe instanceof si)return new si(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof re||(oe=Kn(oe)),!oe)return new si;if(oe instanceof si)return oe;var Kt=(oe=oe.rgb()).r/255,te=oe.g/255,Oe=oe.b/255,Qe=Math.min(Kt,te,Oe),On=Math.max(Kt,te,Oe),Vn=NaN,Xn=On-Qe,$e=(On+Qe)/2;return Xn?(Vn=Kt===On?(te-Oe)/Xn+6*(te<Oe):te===On?(Oe-Kt)/Xn+2:(Kt-te)/Xn+4,Xn/=$e<.5?On+Qe:2-On-Qe,Vn*=60):Xn=$e>0&&$e<1?0:Vn,new si(Vn,Xn,$e,oe.opacity)}function si(oe,Kt,te,Oe){this.h=+oe,this.s=+Kt,this.l=+te,this.opacity=+Oe}function Ci(oe,Kt,te){return 255*(oe<60?Kt+(te-Kt)*oe/60:oe<180?te:oe<240?Kt+(te-Kt)*(240-oe)/60:Kt)}function _i(oe,Kt,te,Oe,Qe){var On=oe*oe,Vn=On*oe;return((1-3*oe+3*On-Vn)*Kt+(4-6*On+3*Vn)*te+(1+3*oe+3*On-3*Vn)*Oe+Vn*Qe)/6}Vt(re,Kn,{copy:function(Kt){return Object.assign(new this.constructor,this,Kt)},displayable:function(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHsl:function(){return to(this).formatHsl()},formatRgb:_n,toString:_n}),Vt(Sr,er,Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vr,formatHex:Vr,formatRgb:ti,toString:ti})),Vt(si,function(oe,Kt,te,Oe){return arguments.length===1?to(oe):new si(oe,Kt,te,Oe==null?1:Oe)},Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},rgb:function(){var Kt=this.h%360+360*(this.h<0),te=isNaN(Kt)||isNaN(this.s)?0:this.s,Oe=this.l,Qe=Oe+(Oe<.5?Oe:1-Oe)*te,On=2*Oe-Qe;return new Sr(Ci(Kt>=240?Kt-240:Kt+120,On,Qe),Ci(Kt,On,Qe),Ci(Kt<120?Kt+240:Kt-120,On,Qe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Kt=this.opacity;return((Kt=isNaN(Kt)?1:Math.max(0,Math.min(1,Kt)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(Kt===1?")":", "+Kt+")")}}));var Li=function(Kt){return function(){return Kt}};function Vi(oe,Kt){return function(te){return oe+te*Kt}}function ro(oe){return(oe=+oe)==1?jr:function(Kt,te){return te-Kt?function(Oe,Qe,On){return Oe=Math.pow(Oe,On),Qe=Math.pow(Qe,On)-Oe,On=1/On,function(Vn){return Math.pow(Oe+Vn*Qe,On)}}(Kt,te,oe):Li(isNaN(Kt)?te:Kt)}}function jr(oe,Kt){var te=Kt-oe;return te?Vi(oe,te):Li(isNaN(oe)?Kt:oe)}var Ji=function oe(Kt){var te=ro(Kt);function Oe(Qe,On){var Vn=te((Qe=er(Qe)).r,(On=er(On)).r),Xn=te(Qe.g,On.g),$e=te(Qe.b,On.b),rn=jr(Qe.opacity,On.opacity);return function(on){return Qe.r=Vn(on),Qe.g=Xn(on),Qe.b=$e(on),Qe.opacity=rn(on),Qe+""}}return Oe.gamma=oe,Oe}(1);function pr(oe){return function(Kt){var te,Oe,Qe=Kt.length,On=new Array(Qe),Vn=new Array(Qe),Xn=new Array(Qe);for(te=0;te<Qe;++te)Oe=er(Kt[te]),On[te]=Oe.r||0,Vn[te]=Oe.g||0,Xn[te]=Oe.b||0;return On=oe(On),Vn=oe(Vn),Xn=oe(Xn),Oe.opacity=1,function($e){return Oe.r=On($e),Oe.g=Vn($e),Oe.b=Xn($e),Oe+""}}}pr(function(oe){var Kt=oe.length-1;return function(te){var Oe=te<=0?te=0:te>=1?(te=1,Kt-1):Math.floor(te*Kt),Qe=oe[Oe],On=oe[Oe+1],Vn=Oe>0?oe[Oe-1]:2*Qe-On,Xn=Oe<Kt-1?oe[Oe+2]:2*On-Qe;return _i((te-Oe/Kt)*Kt,Vn,Qe,On,Xn)}}),pr(function(oe){var Kt=oe.length;return function(te){var Oe=Math.floor(((te%=1)<0?++te:te)*Kt),Qe=oe[(Oe+Kt-1)%Kt],On=oe[Oe%Kt],Vn=oe[(Oe+1)%Kt],Xn=oe[(Oe+2)%Kt];return _i((te-Oe/Kt)*Kt,Qe,On,Vn,Xn)}});var Yr=function(Kt,te){te||(te=[]);var Oe,Qe=Kt?Math.min(te.length,Kt.length):0,On=te.slice();return function(Vn){for(Oe=0;Oe<Qe;++Oe)On[Oe]=Kt[Oe]*(1-Vn)+te[Oe]*Vn;return On}};function Br(oe){return ArrayBuffer.isView(oe)&&!(oe instanceof DataView)}function Nr(oe,Kt){var te,Oe=Kt?Kt.length:0,Qe=oe?Math.min(Oe,oe.length):0,On=new Array(Qe),Vn=new Array(Oe);for(te=0;te<Qe;++te)On[te]=Oi(oe[te],Kt[te]);for(;te<Oe;++te)Vn[te]=Kt[te];return function(Xn){for(te=0;te<Qe;++te)Vn[te]=On[te](Xn);return Vn}}var Xr=function(Kt,te){var Oe=new Date;return Kt=+Kt,te=+te,function(Qe){return Oe.setTime(Kt*(1-Qe)+te*Qe),Oe}},Kr=function(Kt,te){return Kt=+Kt,te=+te,function(Oe){return Kt*(1-Oe)+te*Oe}};function ni(oe){return(ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var fi=function(Kt,te){var Oe,Qe={},On={};for(Oe in Kt!==null&&ni(Kt)==="object"||(Kt={}),te!==null&&ni(te)==="object"||(te={}),te)Oe in Kt?Qe[Oe]=Oi(Kt[Oe],te[Oe]):On[Oe]=te[Oe];return function(Vn){for(Oe in Qe)On[Oe]=Qe[Oe](Vn);return On}},$r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp($r.source,"g"),Qr=function(Kt,te){var Oe,Qe,On,Vn=$r.lastIndex=ci.lastIndex=0,Xn=-1,$e=[],rn=[];for(Kt+="",te+="";(Oe=$r.exec(Kt))&&(Qe=ci.exec(te));)(On=Qe.index)>Vn&&(On=te.slice(Vn,On),$e[Xn]?$e[Xn]+=On:$e[++Xn]=On),(Oe=Oe[0])===(Qe=Qe[0])?$e[Xn]?$e[Xn]+=Qe:$e[++Xn]=Qe:($e[++Xn]=null,rn.push({i:Xn,x:Kr(Oe,Qe)})),Vn=ci.lastIndex;return Vn<te.length&&(On=te.slice(Vn),$e[Xn]?$e[Xn]+=On:$e[++Xn]=On),$e.length<2?rn[0]?function(on){return function($n){return on($n)+""}}(rn[0].x):function(on){return function(){return on}}(te):(te=rn.length,function(on){for(var $n,vr=0;vr<te;++vr)$e[($n=rn[vr]).i]=$n.x(on);return $e.join("")})};function gi(oe){return(gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var Oi=function(Kt,te){var Oe,Qe=gi(te);return te==null||Qe==="boolean"?Li(te):(Qe==="number"?Kr:Qe==="string"?(Oe=Kn(te))?(te=Oe,Ji):Qr:te instanceof Kn?Ji:te instanceof Date?Xr:Br(te)?Yr:Array.isArray(te)?Nr:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?fi:Kr)(Kt,te)},bi=e(51),zi=[1,0,0,0,1,0,0,0,1];function Qi(oe,Kt,te){var Oe,Qe=Kt.startTime;if(te<Qe+Kt.delay||Kt._paused)return!1;var On=Kt.duration,Vn=Kt.easing;if(te=te-Qe-Kt.delay,Kt.repeat)Oe=te%On/On,Oe=i[Vn](Oe);else{if(!((Oe=te/On)<1))return Kt.onFrame?oe.attr(Kt.onFrame(1)):oe.attr(Kt.toAttrs),!0;Oe=i[Vn](Oe)}if(Kt.onFrame){var Xn=Kt.onFrame(Oe);oe.attr(Xn)}else(function($e,rn,on){var $n={},vr=rn.fromAttrs,ar=rn.toAttrs;if(!$e.destroyed){var rr,Fr,Ar,wr;for(var xr in ar)if(!Object(M.q)(vr[xr],ar[xr]))if(xr==="path"){var Er=ar[xr],Ir=vr[xr];Er.length>Ir.length?(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.fillPathByDiff(Ir,Er),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er):rn.pathFormatted||(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er,rn.pathFormatted=!0),$n[xr]=[];for(var Lr=0;Lr<Er.length;Lr++){for(var Pr=Er[Lr],Dr=Ir[Lr],ri=[],vi=0;vi<Pr.length;vi++)Object(M.t)(Pr[vi])&&Dr&&Object(M.t)(Dr[vi])?(rr=Oi(Dr[vi],Pr[vi]),ri.push(rr(on))):ri.push(Pr[vi]);$n[xr].push(ri)}}else if(xr==="matrix"){var ii=(Ar=vr[xr]||zi,(Br(wr=ar[xr]||zi)?Yr:Nr)(Ar,wr))(on);$n[xr]=ii}else["fill","stroke","fillStyle","strokeStyle"].includes(xr)&&(Fr=ar[xr],/^[r,R,L,l]{1}[\s]*\(/.test(Fr))?$n[xr]=ar[xr]:Object(M.r)(ar[xr])||(rr=Oi(vr[xr],ar[xr]),$n[xr]=rr(on));$e.attr($n)}})(oe,Kt,Oe);return!1}var io=function(){function oe(Kt){this.animators=[],this.current=0,this.timer=null,this.canvas=Kt}return oe.prototype.initTimer=function(){var Kt,te,Oe,Qe=this;this.timer=nt(function(On){if(Qe.current=On,Qe.animators.length>0){for(var Vn=Qe.animators.length-1;Vn>=0;Vn--)if((Kt=Qe.animators[Vn]).destroyed)Qe.removeAnimator(Vn);else{if(!Kt.isAnimatePaused())for(var Xn=(te=Kt.get("animations")).length-1;Xn>=0;Xn--)Oe=te[Xn],Qi(Kt,Oe,On)&&(te.splice(Xn,1),Oe.callback&&Oe.callback());te.length===0&&Qe.removeAnimator(Vn)}Qe.canvas.get("autoDraw")||Qe.canvas.draw()}})},oe.prototype.addAnimator=function(Kt){this.animators.push(Kt)},oe.prototype.removeAnimator=function(Kt){this.animators.splice(Kt,1)},oe.prototype.isAnimating=function(){return!!this.animators.length},oe.prototype.stop=function(){this.timer&&this.timer.stop()},oe.prototype.stopAllAnimations=function(Kt){Kt===void 0&&(Kt=!0),this.animators.forEach(function(te){te.stopAnimate(Kt)}),this.animators=[],this.canvas.draw()},oe.prototype.getTime=function(){return this.current},oe}(),Wi=e(114),Zi=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Pi(oe,Kt,te){te.name=Kt,te.target=oe,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}function no(oe,Kt,te){if(te.bubbles){var Oe=void 0,Qe=!1;if(Kt==="mouseenter"?(Oe=te.fromShape,Qe=!0):Kt==="mouseleave"&&(Qe=!0,Oe=te.toShape),oe.isCanvas()&&Qe)return;if(Oe&&Object(f.g)(oe,Oe))return void(te.bubbles=!1);te.name=Kt,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}}var Mo=function(){function oe(Kt){var te=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Oe){var Qe=Oe.type;te._triggerEvent(Qe,Oe)},this._onDocumentMove=function(Oe){if(te.canvas.get("el")!==Oe.target&&(te.dragging||te.currentShape)){var Qe=te._getPointInfo(Oe);te.dragging&&te._emitEvent("drag",Oe,Qe,te.draggingShape)}},this._onDocumentMouseUp=function(Oe){if(te.canvas.get("el")!==Oe.target&&te.dragging){var Qe=te._getPointInfo(Oe);te.draggingShape&&te._emitEvent("drop",Oe,Qe,null),te._emitEvent("dragend",Oe,Qe,te.draggingShape),te._afterDrag(te.draggingShape,Qe,Oe)}},this.canvas=Kt.canvas}return oe.prototype.init=function(){this._bindEvents()},oe.prototype._bindEvents=function(){var Kt=this,te=this.canvas.get("el");Object(f.a)(Zi,function(Oe){te.addEventListener(Oe,Kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._clearEvents=function(){var Kt=this,te=this.canvas.get("el");Object(f.a)(Zi,function(Oe){te.removeEventListener(Oe,Kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._getEventObj=function(Kt,te,Oe,Qe,On,Vn){var Xn=new Wi.a(Kt,te);return Xn.fromShape=On,Xn.toShape=Vn,Xn.x=Oe.x,Xn.y=Oe.y,Xn.clientX=Oe.clientX,Xn.clientY=Oe.clientY,Xn.propagationPath.push(Qe),Xn},oe.prototype._getShape=function(Kt,te){return this.canvas.getShape(Kt.x,Kt.y,te)},oe.prototype._getPointInfo=function(Kt){var te=this.canvas,Oe=te.getClientByEvent(Kt),Qe=te.getPointByEvent(Kt);return{x:Qe.x,y:Qe.y,clientX:Oe.x,clientY:Oe.y}},oe.prototype._triggerEvent=function(Kt,te){var Oe=this._getPointInfo(te),Qe=this._getShape(Oe,te),On=this["_on"+Kt],Vn=!1;if(On)On.call(this,Oe,Qe,te);else{var Xn=this.currentShape;Kt==="mouseenter"||Kt==="dragenter"||Kt==="mouseover"?(this._emitEvent(Kt,te,Oe,null,null,Qe),Qe&&this._emitEvent(Kt,te,Oe,Qe,null,Qe),Kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",te,Oe,null)):Kt==="mouseleave"||Kt==="dragleave"||Kt==="mouseout"?(Vn=!0,Xn&&this._emitEvent(Kt,te,Oe,Xn,Xn,null),this._emitEvent(Kt,te,Oe,null,Xn,null),Kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",te,Oe,null)):this._emitEvent(Kt,te,Oe,Qe,null,null)}if(Vn||(this.currentShape=Qe),Qe&&!Qe.get("destroyed")){var $e=this.canvas;$e.get("el").style.cursor=Qe.attr("cursor")||$e.get("cursor")}},oe.prototype._onmousedown=function(Kt,te,Oe){Oe.button===0&&(this.mousedownShape=te,this.mousedownPoint=Kt,this.mousedownTimeStamp=Oe.timeStamp),this._emitEvent("mousedown",Oe,Kt,te,null,null)},oe.prototype._emitMouseoverEvents=function(Kt,te,Oe,Qe){var On=this.canvas.get("el");Oe!==Qe&&(Oe&&(this._emitEvent("mouseout",Kt,te,Oe,Oe,Qe),this._emitEvent("mouseleave",Kt,te,Oe,Oe,Qe),Qe&&!Qe.get("destroyed")||(On.style.cursor=this.canvas.get("cursor"))),Qe&&(this._emitEvent("mouseover",Kt,te,Qe,Oe,Qe),this._emitEvent("mouseenter",Kt,te,Qe,Oe,Qe)))},oe.prototype._emitDragoverEvents=function(Kt,te,Oe,Qe,On){Qe?(Qe!==Oe&&(Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),this._emitEvent("dragenter",Kt,te,Qe,Oe,Qe)),On||this._emitEvent("dragover",Kt,te,Qe)):Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),On&&this._emitEvent("dragover",Kt,te,Qe)},oe.prototype._afterDrag=function(Kt,te,Oe){Kt&&(Kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Qe=this._getShape(te,Oe);Qe!==Kt&&this._emitMouseoverEvents(Oe,te,Kt,Qe),this.currentShape=Qe},oe.prototype._onmouseup=function(Kt,te,Oe){if(Oe.button===0){var Qe=this.draggingShape;this.dragging?(Qe&&this._emitEvent("drop",Oe,Kt,te),this._emitEvent("dragend",Oe,Kt,Qe),this._afterDrag(Qe,Kt,Oe)):(this._emitEvent("mouseup",Oe,Kt,te),te===this.mousedownShape&&this._emitEvent("click",Oe,Kt,te),this.mousedownShape=null,this.mousedownPoint=null)}},oe.prototype._ondragover=function(Kt,te,Oe){Oe.preventDefault();var Qe=this.currentShape;this._emitDragoverEvents(Oe,Kt,Qe,te,!0)},oe.prototype._onmousemove=function(Kt,te,Oe){var Qe=this.canvas,On=this.currentShape,Vn=this.draggingShape;if(this.dragging)Vn&&this._emitDragoverEvents(Oe,Kt,On,te,!1),this._emitEvent("drag",Oe,Kt,Vn);else{var Xn=this.mousedownPoint;if(Xn){var $e=this.mousedownShape,rn=Oe.timeStamp-this.mousedownTimeStamp,on=Xn.clientX-Kt.clientX,$n=Xn.clientY-Kt.clientY;rn>120||on*on+$n*$n>40?$e&&$e.get("draggable")?((Vn=this.mousedownShape).set("capture",!1),this.draggingShape=Vn,this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,Vn),this.mousedownShape=null,this.mousedownPoint=null):!$e&&Qe.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te))}else this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)}},oe.prototype._emitEvent=function(Kt,te,Oe,Qe,On,Vn){var Xn=this._getEventObj(Kt,te,Oe,Qe,On,Vn);if(Qe){Xn.shape=Qe,Pi(Qe,Kt,Xn);for(var $e=Qe.getParent();$e;)$e.emitDelegation(Kt,Xn),Xn.propagationStopped||no($e,Kt,Xn),Xn.propagationPath.push($e),$e=$e.getParent()}else Pi(this.canvas,Kt,Xn)},oe.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},oe}(),ao=Object(b.a)(),uo=ao&&ao.name==="firefox",xo=function(oe){function Kt(te){var Oe=oe.call(this,te)||this;return Oe.initContainer(),Oe.initDom(),Oe.initEvents(),Oe.initTimeline(),Oe}return Object(v.b)(Kt,oe),Kt.prototype.getDefaultCfg=function(){var te=oe.prototype.getDefaultCfg.call(this);return te.cursor="default",te.supportCSSTransform=!1,te},Kt.prototype.initContainer=function(){var te=this.get("container");Object(f.h)(te)&&(te=document.getElementById(te),this.set("container",te))},Kt.prototype.initDom=function(){var te=this.createDom();this.set("el",te),this.get("container").appendChild(te),this.setDOMSize(this.get("width"),this.get("height"))},Kt.prototype.initEvents=function(){var te=new Mo({canvas:this});te.init(),this.set("eventController",te)},Kt.prototype.initTimeline=function(){var te=new io(this);this.set("timeline",te)},Kt.prototype.setDOMSize=function(te,Oe){var Qe=this.get("el");f.c&&(Qe.style.width=te+"px",Qe.style.height=Oe+"px")},Kt.prototype.changeSize=function(te,Oe){this.setDOMSize(te,Oe),this.set("width",te),this.set("height",Oe),this.onCanvasChange("changeSize")},Kt.prototype.getRenderer=function(){return this.get("renderer")},Kt.prototype.getCursor=function(){return this.get("cursor")},Kt.prototype.setCursor=function(te){this.set("cursor",te);var Oe=this.get("el");f.c&&Oe&&(Oe.style.cursor=te)},Kt.prototype.getPointByEvent=function(te){if(this.get("supportCSSTransform")){if(uo&&!Object(f.e)(te.layerX)&&te.layerX!==te.offsetX)return{x:te.layerX,y:te.layerY};if(!Object(f.e)(te.offsetX))return{x:te.offsetX,y:te.offsetY}}var Oe=this.getClientByEvent(te),Qe=Oe.x,On=Oe.y;return this.getPointByClient(Qe,On)},Kt.prototype.getClientByEvent=function(te){var Oe=te;return te.touches&&(Oe=te.type==="touchend"?te.changedTouches[0]:te.touches[0]),{x:Oe.clientX,y:Oe.clientY}},Kt.prototype.getPointByClient=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te-Qe.left,y:Oe-Qe.top}},Kt.prototype.getClientByPoint=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te+Qe.left,y:Oe+Qe.top}},Kt.prototype.draw=function(){},Kt.prototype.removeDom=function(){var te=this.get("el");te.parentNode.removeChild(te)},Kt.prototype.clearEvents=function(){this.get("eventController").destroy()},Kt.prototype.isCanvas=function(){return!0},Kt.prototype.getParent=function(){return null},Kt.prototype.destroy=function(){var te=this.get("timeline");this.get("destroyed")||(this.clear(),te&&te.stop(),this.clearEvents(),this.removeDom(),oe.prototype.destroy.call(this))},Kt}(S.a);A.a=xo},function(a,A,e){"use strict";e.d(A,"a",function(){return b});var i=new Map;function v(O,C){i.set(O,C)}function b(O){return i.get(O)}var S=function(C){var p=C.attr();return{x:p.x,y:p.y,width:p.width,height:p.height}},f=function(C){var p=C.attr(),x=p.x,T=p.y,N=p.r;return{x:x-N,y:T-N,width:2*N,height:2*N}},M=e(20);function I(O,C){return O&&C?{minX:Math.min(O.minX,C.minX),minY:Math.min(O.minY,C.minY),maxX:Math.max(O.maxX,C.maxX),maxY:Math.max(O.maxY,C.maxY)}:O||C}function y(O,C){var p=O.get("startArrowShape"),x=O.get("endArrowShape");return p&&(C=I(C,p.getCanvasBBox())),x&&(C=I(C,x.getCanvasBBox())),C}var n=e(68),s=e(31),d=e(0);function E(O,C){var p=O.prePoint,x=O.currentPoint,T=O.nextPoint,N=Math.pow(x[0]-p[0],2)+Math.pow(x[1]-p[1],2),Y=Math.pow(x[0]-T[0],2)+Math.pow(x[1]-T[1],2),q=Math.pow(p[0]-T[0],2)+Math.pow(p[1]-T[1],2),nt=Math.acos((N+Y-q)/(2*Math.sqrt(N)*Math.sqrt(Y)));if(!nt||Math.sin(nt)===0||Object(d.u)(nt,0))return{xExtra:0,yExtra:0};var vt=Math.abs(Math.atan2(T[1]-x[1],T[0]-x[0])),ht=Math.abs(Math.atan2(T[0]-x[0],T[1]-x[1]));return vt=vt>Math.PI/2?Math.PI-vt:vt,ht=ht>Math.PI/2?Math.PI-ht:ht,{xExtra:Math.cos(nt/2-vt)*(C/2*(1/Math.sin(nt/2)))-C/2||0,yExtra:Math.cos(ht-nt/2)*(C/2*(1/Math.sin(nt/2)))-C/2||0}}v("rect",S),v("image",S),v("circle",f),v("marker",f),v("polyline",function(O){for(var C=O.attr().points,p=[],x=[],T=0;T<C.length;T++){var N=C[T];p.push(N[0]),x.push(N[1])}var Y=M.f.getBBoxByArray(p,x),q=Y.x,nt=Y.y,vt={minX:q,minY:nt,maxX:q+Y.width,maxY:nt+Y.height};return{x:(vt=y(O,vt)).minX,y:vt.minY,width:vt.maxX-vt.minX,height:vt.maxY-vt.minY}}),v("polygon",function(O){for(var C=O.attr().points,p=[],x=[],T=0;T<C.length;T++){var N=C[T];p.push(N[0]),x.push(N[1])}return M.f.getBBoxByArray(p,x)}),v("text",function(O){var C=O.attr(),p=C.x,x=C.y,T=C.text,N=C.fontSize,Y=C.lineHeight,q=C.font;q||(q=Object(n.a)(C));var nt,vt=Object(n.c)(T,q);if(vt){var ht=C.textAlign,St=C.textBaseline,wt=Object(n.b)(T,N,Y),xt={x:p,y:x-wt};ht&&(ht==="end"||ht==="right"?xt.x-=vt:ht==="center"&&(xt.x-=vt/2)),St&&(St==="top"?xt.y+=wt:St==="middle"&&(xt.y+=wt/2)),nt={x:xt.x,y:xt.y,width:vt,height:wt}}else nt={x:p,y:x,width:0,height:0};return nt}),v("path",function(O){var C=O.attr(),p=C.path,x=C.stroke?C.lineWidth:0,T=function(nt,vt){for(var ht=[],St=[],wt=[],xt=0;xt<nt.length;xt++){var ft=(tt=nt[xt]).currentPoint,Ft=tt.params,kt=tt.prePoint,Ot=void 0;switch(tt.command){case"Q":Ot=M.e.box(kt[0],kt[1],Ft[1],Ft[2],Ft[3],Ft[4]);break;case"C":Ot=M.b.box(kt[0],kt[1],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5],Ft[6]);break;case"A":var X=tt.arcParams;Ot=M.a.box(X.cx,X.cy,X.rx,X.ry,X.xRotation,X.startAngle,X.endAngle);break;default:ht.push(ft[0]),St.push(ft[1])}Ot&&(tt.box=Ot,ht.push(Ot.x,Ot.x+Ot.width),St.push(Ot.y,Ot.y+Ot.height)),vt&&(tt.command==="L"||tt.command==="M")&&tt.prePoint&&tt.nextPoint&&wt.push(tt)}ht=ht.filter(function(lt){return!Number.isNaN(lt)}),St=St.filter(function(lt){return!Number.isNaN(lt)});var ct=Math.min.apply(null,ht),dt=Math.min.apply(null,St),pt=Math.max.apply(null,ht),Mt=Math.max.apply(null,St);if(wt.length===0)return{x:ct,y:dt,width:pt-ct,height:Mt-dt};for(xt=0;xt<wt.length;xt++){var tt;(ft=(tt=wt[xt]).currentPoint)[0]===ct?ct-=E(tt,vt).xExtra:ft[0]===pt&&(pt+=E(tt,vt).xExtra),ft[1]===dt?dt-=E(tt,vt).yExtra:ft[1]===Mt&&(Mt+=E(tt,vt).yExtra)}return{x:ct,y:dt,width:pt-ct,height:Mt-dt}}(O.get("segments")||Object(s.d)(p),x),N=T.x,Y=T.y,q={minX:N,minY:Y,maxX:N+T.width,maxY:Y+T.height};return{x:(q=y(O,q)).minX,y:q.minY,width:q.maxX-q.minX,height:q.maxY-q.minY}}),v("line",function(O){var C=O.attr(),p=C.x1,x=C.y1,T=C.x2,N=C.y2,Y={minX:Math.min(p,T),maxX:Math.max(p,T),minY:Math.min(x,N),maxY:Math.max(x,N)};return{x:(Y=y(O,Y)).minX,y:Y.minY,width:Y.maxX-Y.minX,height:Y.maxY-Y.minY}}),v("ellipse",function(O){var C=O.attr(),p=C.x,x=C.y,T=C.rx,N=C.ry;return{x:p-T,y:x-N,width:2*T,height:2*N}})},function(a,A,e){"use strict";var i=e(1),v=e(18),b=e(16),S=e(70),f=e(36),M=e(22),I=e(78),y=e(77),n=e(0),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function O(St){var wt=St.match(E);if(!wt)return"";var xt="";return wt.sort(function(ft,Ft){return ft=ft.split(":"),Ft=Ft.split(":"),Number(ft[0])-Number(Ft[0])}),Object(n.f)(wt,function(ft){ft=ft.split(":"),xt+='<stop offset="'+ft[0]+'" stop-color="'+ft[1]+'"></stop>'}),xt}var C=function(){function St(wt){this.cfg={};var xt=null,ft=Object(n.H)("gradient_");return wt.toLowerCase()[0]==="l"?function(Ft,kt){var Ot,X,ct=s.exec(Ft),dt=Object(n.B)(Object(n.G)(parseFloat(ct[1])),2*Math.PI),pt=ct[2];dt>=0&&dt<.5*Math.PI?(Ot={x:0,y:0},X={x:1,y:1}):.5*Math.PI<=dt&&dt<Math.PI?(Ot={x:1,y:0},X={x:0,y:1}):Math.PI<=dt&&dt<1.5*Math.PI?(Ot={x:1,y:1},X={x:0,y:0}):(Ot={x:0,y:1},X={x:1,y:0});var Mt=Math.tan(dt),tt=Mt*Mt,lt=(X.x-Ot.x+Mt*(X.y-Ot.y))/(tt+1)+Ot.x,it=Mt*(X.x-Ot.x+Mt*(X.y-Ot.y))/(tt+1)+Ot.y;kt.setAttribute("x1",Ot.x),kt.setAttribute("y1",Ot.y),kt.setAttribute("x2",lt),kt.setAttribute("y2",it),kt.innerHTML=O(pt)}(wt,xt=Object(M.b)("linearGradient")):function(Ft,kt){var Ot=d.exec(Ft),X=parseFloat(Ot[1]),ct=parseFloat(Ot[2]),dt=parseFloat(Ot[3]),pt=Ot[4];kt.setAttribute("cx",X),kt.setAttribute("cy",ct),kt.setAttribute("r",dt),kt.innerHTML=O(pt)}(wt,xt=Object(M.b)("radialGradient")),xt.setAttribute("id",ft),this.el=xt,this.id=ft,this.cfg=wt,this}return St.prototype.match=function(wt,xt){return this.cfg===xt},St}(),p={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},x={x:"-40%",y:"-40%",width:"200%",height:"200%"},T=function(){function St(wt){this.type="filter",this.cfg={},this.type="filter";var xt=Object(M.b)("filter");return Object(n.f)(x,function(ft,Ft){xt.setAttribute(Ft,ft)}),this.el=xt,this.id=Object(n.H)("filter_"),this.el.id=this.id,this.cfg=wt,this._parseShadow(wt,xt),this}return St.prototype.match=function(wt,xt){if(this.type!==wt)return!1;var ft=!0,Ft=this.cfg;return Object(n.f)(Object.keys(Ft),function(kt){if(Ft[kt]!==xt[kt])return ft=!1,!1}),ft},St.prototype.update=function(wt,xt){var ft=this.cfg;return ft[p[wt]]=xt,this._parseShadow(ft,this.el),this},St.prototype._parseShadow=function(wt,xt){var ft=`<feDropShadow
      dx="`+(wt.dx||0)+`"
      dy="`+(wt.dy||0)+`"
      stdDeviation="`+(wt.blur?wt.blur/10:0)+`"
      flood-color="`+(wt.color?wt.color:"#000")+`"
      flood-opacity="`+(wt.opacity?wt.opacity:1)+`"
      />`;xt.innerHTML=ft},St}(),N=function(){function St(wt,xt){this.cfg={};var ft=Object(M.b)("marker"),Ft=Object(n.H)("marker_");ft.setAttribute("id",Ft);var kt=Object(M.b)("path");kt.setAttribute("stroke",wt.stroke||"none"),kt.setAttribute("fill",wt.fill||"none"),ft.appendChild(kt),ft.setAttribute("overflow","visible"),ft.setAttribute("orient","auto-start-reverse"),this.el=ft,this.child=kt,this.id=Ft;var Ot=wt[xt==="marker-start"?"startArrow":"endArrow"];return this.stroke=wt.stroke||"#000",Ot===!0?this._setDefaultPath(xt,kt):(this.cfg=Ot,this._setMarker(wt.lineWidth,kt)),this}return St.prototype.match=function(){return!1},St.prototype._setDefaultPath=function(wt,xt){var ft=this.el;xt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ft.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ft.setAttribute("refY","5")},St.prototype._setMarker=function(wt,xt){var ft=this.el,Ft=this.cfg.path,kt=this.cfg.d;Object(n.m)(Ft)&&(Ft=Ft.map(function(Ot){return Ot.join(" ")}).join("")),xt.setAttribute("d",Ft),ft.appendChild(xt),kt&&ft.setAttribute("refX",""+kt/wt)},St.prototype.update=function(wt){var xt=this.child;xt.attr?xt.attr("fill",wt):xt.setAttribute("fill",wt)},St}(),Y=function(){function St(wt){this.type="clip",this.cfg={};var xt=Object(M.b)("clipPath");this.el=xt,this.id=Object(n.H)("clip_"),xt.id=this.id;var ft=wt.cfg.el;return xt.appendChild(ft),this.cfg=wt,this}return St.prototype.match=function(){return!1},St.prototype.remove=function(){var wt=this.el;wt.parentNode.removeChild(wt)},St}(),q=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nt=function(){function St(wt){this.cfg={};var xt=Object(M.b)("pattern");xt.setAttribute("patternUnits","userSpaceOnUse");var ft=Object(M.b)("image");xt.appendChild(ft);var Ft=Object(n.H)("pattern_");xt.id=Ft,this.el=xt,this.id=Ft,this.cfg=wt;var kt=q.exec(wt)[2];ft.setAttribute("href",kt);var Ot=new Image;function X(){xt.setAttribute("width",""+Ot.width),xt.setAttribute("height",""+Ot.height)}return kt.match(/^data:/i)||(Ot.crossOrigin="Anonymous"),Ot.src=kt,Ot.complete?X():(Ot.onload=X,Ot.src=Ot.src),this}return St.prototype.match=function(wt,xt){return this.cfg===xt},St}(),vt=function(){function St(wt){var xt=Object(M.b)("defs"),ft=Object(n.H)("defs_");xt.id=ft,wt.appendChild(xt),this.children=[],this.defaultArrow={},this.el=xt,this.canvas=wt}return St.prototype.find=function(wt,xt){for(var ft=this.children,Ft=null,kt=0;kt<ft.length;kt++)if(ft[kt].match(wt,xt)){Ft=ft[kt].id;break}return Ft},St.prototype.findById=function(wt){for(var xt=this.children,ft=null,Ft=0;Ft<xt.length;Ft++)if(xt[Ft].id===wt){ft=xt[Ft];break}return ft},St.prototype.add=function(wt){this.children.push(wt),wt.canvas=this.canvas,wt.parent=this},St.prototype.getDefaultArrow=function(wt,xt){var ft=wt.stroke||wt.strokeStyle;if(this.defaultArrow[ft])return this.defaultArrow[ft].id;var Ft=new N(wt,xt);return this.defaultArrow[ft]=Ft,this.el.appendChild(Ft.el),this.add(Ft),Ft.id},St.prototype.addGradient=function(wt){var xt=new C(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addArrow=function(wt,xt){var ft=new N(wt,xt);return this.el.appendChild(ft.el),this.add(ft),ft.id},St.prototype.addShadow=function(wt){var xt=new T(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addPattern=function(wt){var xt=new nt(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addClip=function(wt){var xt=new Y(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St}(),ht=function(St){function wt(xt){return St.call(this,Object(i.a)(Object(i.a)({},xt),{autoDraw:!0,renderer:"svg"}))||this}return Object(i.b)(wt,St),wt.prototype.getShapeBase=function(){return I},wt.prototype.getGroupBase=function(){return y.a},wt.prototype.getShape=function(xt,ft,Ft){var kt=Ft.target||Ft.srcElement;if(!b.a[kt.tagName]){for(var Ot=kt.parentNode;Ot&&!b.a[Ot.tagName];)Ot=Ot.parentNode;kt=Ot}return this.find(function(X){return X.get("el")===kt})},wt.prototype.createDom=function(){var xt=Object(M.b)("svg"),ft=new vt(xt);return xt.setAttribute("width",""+this.get("width")),xt.setAttribute("height",""+this.get("height")),this.set("context",ft),xt},wt.prototype.onCanvasChange=function(xt){var ft=this.get("context"),Ft=this.get("el");if(xt==="sort"){var kt=this.get("children");kt&&kt.length&&Object(M.d)(this,function(X,ct){return kt.indexOf(X)-kt.indexOf(ct)?1:0})}else if(xt==="clear"){if(Ft){Ft.innerHTML="";var Ot=ft.el;Ot.innerHTML="",Ft.appendChild(Ot)}}else xt==="matrix"?Object(f.c)(this):xt==="clip"?Object(f.a)(this,ft):xt==="changeSize"&&(Ft.setAttribute("width",""+this.get("width")),Ft.setAttribute("height",""+this.get("height")))},wt.prototype.draw=function(){var xt=this.get("context"),ft=this.getChildren();Object(f.a)(this,xt),ft.length&&Object(S.a)(xt,ft)},wt}(v.AbstractCanvas);A.a=ht},function(a,A,e){"use strict";var i=e(1),v=e(18);function b(s,d,E){var O=s.getTotalMatrix();if(O){var C=function(p,x){if(x){var T=Object(v.invert)(x);return Object(v.multiplyVec2)(T,p)}return p}([d,E,1],O);return[C[0],C[1]]}return[d,E]}function S(s,d,E){if(s.isCanvas&&s.isCanvas())return!0;if(!Object(v.isAllowCapture)(s)||s.cfg.isInView===!1)return!1;if(s.cfg.clipShape){var O=b(s,d,E),C=O[0],p=O[1];if(s.isClipped(C,p))return!1}var x=s.cfg.cacheCanvasBBox||s.getCanvasBBox();return d>=x.minX&&d<=x.maxX&&E>=x.minY&&E<=x.maxY}var f=e(56),M=e(76),I=e(17),y=e(29),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(i.b)(d,s),d.prototype.getDefaultCfg=function(){var E=s.prototype.getDefaultCfg.call(this);return E.renderer="canvas",E.autoDraw=!0,E.localRefresh=!0,E.refreshElements=[],E.clipView=!0,E.quickHit=!1,E},d.prototype.onCanvasChange=function(E){E!=="attr"&&E!=="sort"&&E!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},d.prototype.getShapeBase=function(){return f},d.prototype.getGroupBase=function(){return M.a},d.prototype.getPixelRatio=function(){var E=this.get("pixelRatio")||Object(I.d)();return E>=1?Math.ceil(E):1},d.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},d.prototype.createDom=function(){var E=document.createElement("canvas"),O=E.getContext("2d");return this.set("context",O),E},d.prototype.setDOMSize=function(E,O){s.prototype.setDOMSize.call(this,E,O);var C=this.get("context"),p=this.get("el"),x=this.getPixelRatio();p.width=x*E,p.height=x*O,x>1&&C.scale(x,x)},d.prototype.clear=function(){s.prototype.clear.call(this),this._clearFrame();var E=this.get("context"),O=this.get("el");E.clearRect(0,0,O.width,O.height)},d.prototype.getShape=function(E,O){return this.get("quickHit")?function C(p,x,T){if(!S(p,x,T))return null;for(var N=null,Y=p.getChildren(),q=Y.length-1;q>=0;q--){var nt=Y[q];if(nt.isGroup())N=C(nt,x,T);else if(S(nt,x,T)){var vt=nt,ht=b(nt,x,T),St=ht[0],wt=ht[1];vt.isInShape(St,wt)&&(N=nt)}if(N)break}return N}(this,E,O):s.prototype.getShape.call(this,E,O,null)},d.prototype._getRefreshRegion=function(){var E,O=this.get("refreshElements"),C=this.getViewRange();return O.length&&O[0]===this?E=C:(E=Object(y.f)(O))&&(E.minX=Math.floor(E.minX),E.minY=Math.floor(E.minY),E.maxX=Math.ceil(E.maxX),E.maxY=Math.ceil(E.maxY),E.maxY+=1,this.get("clipView")&&(E=Object(y.g)(E,C))),E},d.prototype.refreshElement=function(E){this.get("refreshElements").push(E)},d.prototype._clearFrame=function(){var E=this.get("drawFrame");E&&(Object(I.a)(E),this.set("drawFrame",null),this.set("refreshElements",[]))},d.prototype.draw=function(){var E=this.get("drawFrame");this.get("autoDraw")&&E||this._startDraw()},d.prototype._drawAll=function(){var E=this.get("context"),O=this.get("el"),C=this.getChildren();E.clearRect(0,0,O.width,O.height),Object(y.a)(E,this),Object(y.d)(E,C),this.set("refreshElements",[])},d.prototype._drawRegion=function(){var E=this.get("context"),O=this.get("refreshElements"),C=this.getChildren(),p=this._getRefreshRegion();p?(E.clearRect(p.minX,p.minY,p.maxX-p.minX,p.maxY-p.minY),E.save(),E.beginPath(),E.rect(p.minX,p.minY,p.maxX-p.minX,p.maxY-p.minY),E.clip(),Object(y.a)(E,this),Object(y.b)(this,C,p),Object(y.d)(E,C,p),E.restore()):O.length&&Object(y.c)(O),Object(I.c)(O,function(x){x.get("hasChanged")&&x.set("hasChanged",!1)}),this.set("refreshElements",[])},d.prototype._startDraw=function(){var E=this,O=this.get("drawFrame");O||(O=Object(I.n)(function(){E.get("localRefresh")?E._drawRegion():E._drawAll(),E.set("drawFrame",null)}),this.set("drawFrame",O))},d.prototype.skipDraw=function(){},d}(v.AbstractCanvas);A.a=n},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var i=e(473);A.default=function(v,b){return b===void 0&&(b=!0),{lazyInject:i.makePropertyInjectDecorator(v,b),lazyInjectNamed:i.makePropertyInjectNamedDecorator(v,b),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(v,b),lazyMultiInject:i.makePropertyMultiInjectDecorator(v,b)}}},function(a,A,e){var i=e(202);a.exports=function(v){return v&&v.length?i(v):[]}},function(a,A,e){var i,v,b;function S(f){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}b=function(){"use strict";var M=function(rn){return rn instanceof Uint8Array||rn instanceof Uint16Array||rn instanceof Uint32Array||rn instanceof Int8Array||rn instanceof Int16Array||rn instanceof Int32Array||rn instanceof Float32Array||rn instanceof Float64Array||rn instanceof Uint8ClampedArray},I=function(rn,on){for(var $n=Object.keys(on),vr=0;vr<$n.length;++vr)rn[$n[vr]]=on[$n[vr]];return rn};function y($e){var rn=new Error("(regl) "+$e);throw console.error(rn),rn}function n($e,rn){$e||y(rn)}function s($e){return $e?": "+$e:""}function d($e,rn){switch(rn){case"number":return typeof $e=="number";case"object":return S($e)==="object";case"string":return typeof $e=="string";case"boolean":return typeof $e=="boolean";case"function":return typeof $e=="function";case"undefined":return $e===void 0;case"symbol":return S($e)==="symbol"}}function E($e,rn,on){rn.indexOf($e)<0&&y("invalid value"+s(on)+". must be one of: "+rn)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function C($e,rn){for($e+="";$e.length<rn;)$e=" "+$e;return $e}function p(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function x($e,rn){this.number=$e,this.line=rn,this.errors=[]}function T($e,rn,on){this.file=$e,this.line=rn,this.message=on}function N(){var $e=new Error,rn=($e.stack||$e).toString(),on=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(rn);return $n?$n[1]:"unknown"}function Y(){var $e=new Error,rn=($e.stack||$e).toString(),on=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(rn);return $n?$n[1]:"unknown"}function q($e,rn){var on,$n=$e.split(`
`),vr=1,ar=0,rr={unknown:new p,0:new p};rr.unknown.name=rr[0].name=rn||N(),rr.unknown.lines.push(new x(0,""));for(var Fr=0;Fr<$n.length;++Fr){var Ar=$n[Fr],wr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ar);if(wr)switch(wr[1]){case"line":var xr=/(\d+)(\s+\d+)?/.exec(wr[2]);xr&&(vr=0|xr[1],xr[2]&&((ar=0|xr[2])in rr||(rr[ar]=new p)));break;case"define":var Er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wr[2]);Er&&(rr[ar].name=Er[1]?(on=Er[2],typeof atob!="undefined"?atob(on):"base64:"+on):Er[2])}rr[ar].lines.push(new x(vr++,Ar))}return Object.keys(rr).forEach(function(Ir){var Lr=rr[Ir];Lr.lines.forEach(function(Pr){Lr.index[Pr.number]=Pr})}),rr}function nt($e){$e._commandRef=N()}function vt($e,rn){var on=Y();y($e+" in command "+(rn||N())+(on==="unknown"?"":" called from "+on))}function ht($e,rn,on,$n){d($e,rn)||vt("invalid parameter type"+s(on)+". expected "+rn+", got "+S($e),$n||N())}var St={};function wt($e,rn){return $e===32820||$e===32819||$e===33635?2:$e===34042?4:St[$e]*rn}function xt($e){return!($e&$e-1||!$e)}St[5120]=St[5121]=1,St[5122]=St[5123]=St[36193]=St[33635]=St[32819]=St[32820]=2,St[5124]=St[5125]=St[5126]=St[34042]=4;var ft=I(n,{optional:function(rn){rn()},raise:y,commandRaise:vt,command:function(rn,on,$n){rn||vt(on,$n||N())},parameter:function(rn,on,$n){rn in on||y("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join())},commandParameter:function(rn,on,$n,vr){rn in on||vt("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join(),vr||N())},constructor:function(rn){Object.keys(rn).forEach(function(on){O.indexOf(on)<0&&y('invalid regl constructor argument "'+on+'". must be one of '+O)})},type:function(rn,on,$n){d(rn,on)||y("invalid parameter type"+s($n)+". expected "+on+", got "+S(rn))},commandType:ht,isTypedArray:function(rn,on){M(rn)||y("invalid parameter type"+s(on)+". must be a typed array")},nni:function(rn,on){rn>=0&&(0|rn)===rn||y("invalid parameter type, ("+rn+")"+s(on)+". must be a nonnegative integer")},oneOf:E,shaderError:function(rn,on,$n,vr,ar){if(!rn.getShaderParameter(on,rn.COMPILE_STATUS)){var rr=rn.getShaderInfoLog(on),Fr=vr===rn.FRAGMENT_SHADER?"fragment":"vertex";ht($n,"string",Fr+" shader source must be a string",ar);var Ar=q($n,ar),wr=function(xr){var Er=[];return xr.split(`
`).forEach(function(Ir){if(!(Ir.length<5)){var Lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ir);Lr?Er.push(new T(0|Lr[1],0|Lr[2],Lr[3].trim())):Ir.length>0&&Er.push(new T("unknown",0,Ir))}}),Er}(rr);(function(xr,Er){Er.forEach(function(Ir){var Lr=xr[Ir.file];if(Lr){var Pr=Lr.index[Ir.line];if(Pr)return Pr.errors.push(Ir),void(Lr.hasErrors=!0)}xr.unknown.hasErrors=!0,xr.unknown.lines[0].errors.push(Ir)})})(Ar,wr),Object.keys(Ar).forEach(function(xr){var Er=Ar[xr];if(Er.hasErrors){var Ir=[""],Lr=[""];Pr("file number "+xr+": "+Er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Er.lines.forEach(function(Dr){if(Dr.errors.length>0){Pr(C(Dr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pr(Dr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var ri=0;Dr.errors.forEach(function(vi){var ii=vi.message,Si=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ii);if(Si){var Ui=Si[1];switch(ii=Si[2],Ui){case"assign":Ui="="}ri=Math.max(Dr.line.indexOf(Ui,ri),0)}else ri=0;Pr(C("| ",6)),Pr(C("^^^",ri+3)+`
`,"font-weight:bold"),Pr(C("| ",6)),Pr(ii+`
`,"font-weight:bold")}),Pr(C("| ",6)+`
`)}else Pr(C(Dr.number,4)+"|  "),Pr(Dr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Ir.join("")):(Lr[0]=Ir.join("%c"),console.log.apply(console,Lr))}function Pr(Dr,ri){Ir.push(Dr),Lr.push(ri||"")}}),n.raise("Error compiling "+Fr+" shader, "+Ar[0].name)}},linkError:function(rn,on,$n,vr,ar){if(!rn.getProgramParameter(on,rn.LINK_STATUS)){var rr=rn.getProgramInfoLog(on),Fr=q($n,ar),Ar='Error linking program with vertex shader, "'+q(vr,ar)[0].name+'", and fragment shader "'+Fr[0].name+'"';typeof document!="undefined"?console.log("%c"+Ar+`
%c`+rr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ar+`
`+rr),n.raise(Ar)}},callSite:Y,saveCommandRef:nt,saveDrawInfo:function(rn,on,$n,vr){function ar(wr){return wr?vr.id(wr):0}function rr(wr,xr){Object.keys(xr).forEach(function(Er){wr[vr.id(Er)]=!0})}nt(rn),rn._fragId=ar(rn.static.frag),rn._vertId=ar(rn.static.vert);var Fr=rn._uniformSet={};rr(Fr,on.static),rr(Fr,on.dynamic);var Ar=rn._attributeSet={};rr(Ar,$n.static),rr(Ar,$n.dynamic),rn._hasCount="count"in rn.static||"count"in rn.dynamic||"elements"in rn.static||"elements"in rn.dynamic},framebufferFormat:function(rn,on,$n){rn.texture?E(rn.texture._texture.internalformat,on,"unsupported texture format for attachment"):E(rn.renderbuffer._renderbuffer.format,$n,"unsupported renderbuffer format for attachment")},guessCommand:N,texture2D:function(rn,on,$n){var vr,ar=on.width,rr=on.height,Fr=on.channels;n(ar>0&&ar<=$n.maxTextureSize&&rr>0&&rr<=$n.maxTextureSize,"invalid texture shape"),rn.wrapS===33071&&rn.wrapT===33071||n(xt(ar)&&xt(rr),"incompatible wrap mode for texture, both width and height must be power of 2"),on.mipmask===1?ar!==1&&rr!==1&&n(rn.minFilter!==9984&&rn.minFilter!==9986&&rn.minFilter!==9985&&rn.minFilter!==9987,"min filter requires mipmap"):(n(xt(ar)&&xt(rr),"texture must be a square power of 2 to support mipmapping"),n(on.mipmask===(ar<<1)-1,"missing or incomplete mipmap data")),on.type===5126&&($n.extensions.indexOf("oes_texture_float_linear")<0&&n(rn.minFilter===9728&&rn.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),n(!rn.genMipmaps,"mipmap generation not supported with float textures"));var Ar=on.images;for(vr=0;vr<16;++vr)if(Ar[vr]){var wr=ar>>vr,xr=rr>>vr;n(on.mipmask&1<<vr,"missing mipmap data");var Er=Ar[vr];if(n(Er.width===wr&&Er.height===xr,"invalid shape for mip images"),n(Er.format===on.format&&Er.internalformat===on.internalformat&&Er.type===on.type,"incompatible type for mip image"),!Er.compressed)if(Er.data){var Ir=Math.ceil(wt(Er.type,Fr)*wr/Er.unpackAlignment)*Er.unpackAlignment;n(Er.data.byteLength===Ir*xr,"invalid data for image, buffer size is inconsistent with image format")}else Er.element||Er.copy}else rn.genMipmaps||n((on.mipmask&1<<vr)==0,"extra mipmap data");on.compressed&&n(!rn.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(rn,on,$n,vr){var ar=rn.width,rr=rn.height,Fr=rn.channels;n(ar>0&&ar<=vr.maxTextureSize&&rr>0&&rr<=vr.maxTextureSize,"invalid texture shape"),n(ar===rr,"cube map must be square"),n(on.wrapS===33071&&on.wrapT===33071,"wrap mode not supported by cube map");for(var Ar=0;Ar<$n.length;++Ar){var wr=$n[Ar];n(wr.width===ar&&wr.height===rr,"inconsistent cube map face shape"),on.genMipmaps&&(n(!wr.compressed,"can not generate mipmap for compressed textures"),n(wr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xr=wr.images,Er=0;Er<16;++Er){var Ir=xr[Er];if(Ir){var Lr=ar>>Er,Pr=rr>>Er;n(wr.mipmask&1<<Er,"missing mipmap data"),n(Ir.width===Lr&&Ir.height===Pr,"invalid shape for mip images"),n(Ir.format===rn.format&&Ir.internalformat===rn.internalformat&&Ir.type===rn.type,"incompatible type for mip image"),Ir.compressed||(Ir.data?n(Ir.data.byteLength===Lr*Pr*Math.max(wt(Ir.type,Fr),Ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ir.element||Ir.copy)}}}}}),Ft=0;function kt($e,rn){this.id=Ft++,this.type=$e,this.data=rn}function Ot($e){return $e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function X($e){return"["+function rn(on){if(on.length===0)return[];var $n=on.charAt(0),vr=on.charAt(on.length-1);if(on.length>1&&$n===vr&&($n==='"'||$n==="'"))return['"'+Ot(on.substr(1,on.length-2))+'"'];var ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(on);if(ar)return rn(on.substr(0,ar.index)).concat(rn(ar[1])).concat(rn(on.substr(ar.index+ar[0].length)));var rr=on.split(".");if(rr.length===1)return['"'+Ot(on)+'"'];for(var Fr=[],Ar=0;Ar<rr.length;++Ar)Fr=Fr.concat(rn(rr[Ar]));return Fr}($e).join("][")+"]"}var ct={DynamicVariable:kt,define:function(rn,on){return new kt(rn,X(on+""))},isDynamic:function(rn){return typeof rn=="function"&&!rn._reglType||rn instanceof kt},unbox:function $e(rn,on){return typeof rn=="function"?new kt(0,rn):typeof rn=="number"||typeof rn=="boolean"?new kt(5,rn):Array.isArray(rn)?new kt(6,rn.map(function($n,vr){return $e($n,on+"["+vr+"]")})):rn instanceof kt?rn:void ft(!1,"invalid option type in uniform "+on)},accessor:X},dt={next:typeof requestAnimationFrame=="function"?function($e){return requestAnimationFrame($e)}:function($e){return setTimeout($e,16)},cancel:typeof cancelAnimationFrame=="function"?function($e){return cancelAnimationFrame($e)}:clearTimeout},pt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Mt($e){return typeof $e=="string"?$e.split():(ft(Array.isArray($e),"invalid extension array"),$e)}function tt($e){return typeof $e=="string"?(ft(typeof document!="undefined","not supported outside of DOM"),document.querySelector($e)):$e}function lt($e){var rn,on,$n,vr,ar,rr=$e||{},Fr={},Ar=[],wr=[],xr=typeof window=="undefined"?1:window.devicePixelRatio,Er=!1,Ir=function(ri){ri&&ft.raise(ri)},Lr=function(){};if(typeof rr=="string"?(ft(typeof document!="undefined","selector queries only supported in DOM enviroments"),rn=document.querySelector(rr),ft(rn,"invalid query string for element")):S(rr)==="object"?typeof(ar=rr).nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rn=rr:function(Dr){return typeof Dr.drawArrays=="function"||typeof Dr.drawElements=="function"}(rr)?$n=(vr=rr).canvas:(ft.constructor(rr),"gl"in rr?vr=rr.gl:"canvas"in rr?$n=tt(rr.canvas):"container"in rr&&(on=tt(rr.container)),"attributes"in rr&&(Fr=rr.attributes,ft.type(Fr,"object","invalid context attributes")),"extensions"in rr&&(Ar=Mt(rr.extensions)),"optionalExtensions"in rr&&(wr=Mt(rr.optionalExtensions)),"onDone"in rr&&(ft.type(rr.onDone,"function","invalid or missing onDone callback"),Ir=rr.onDone),"profile"in rr&&(Er=!!rr.profile),"pixelRatio"in rr&&(xr=+rr.pixelRatio,ft(xr>0,"invalid pixel ratio"))):ft.raise("invalid arguments to regl"),rn&&(rn.nodeName.toLowerCase()==="canvas"?$n=rn:on=rn),!vr){if(!$n){ft(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Pr=function(Dr,ri,vi){var ii,Si=document.createElement("canvas");function Ui(){var Yi=window.innerWidth,Bi=window.innerHeight;if(Dr!==document.body){var Di=Dr.getBoundingClientRect();Yi=Di.right-Di.left,Bi=Di.bottom-Di.top}Si.width=vi*Yi,Si.height=vi*Bi,I(Si.style,{width:Yi+"px",height:Bi+"px"})}return I(Si.style,{border:0,margin:0,padding:0,top:0,left:0}),Dr.appendChild(Si),Dr===document.body&&(Si.style.position="absolute",I(Dr.style,{margin:0,padding:0})),Dr!==document.body&&typeof ResizeObserver=="function"?(ii=new ResizeObserver(function(){setTimeout(Ui)})).observe(Dr):window.addEventListener("resize",Ui,!1),Ui(),{canvas:Si,onDestroy:function(){ii?ii.disconnect():window.removeEventListener("resize",Ui),Dr.removeChild(Si)}}}(on||document.body,0,xr);if(!Pr)return null;$n=Pr.canvas,Lr=Pr.onDestroy}Fr.premultipliedAlpha===void 0&&(Fr.premultipliedAlpha=!0),vr=function(Dr,ri){function vi(ii){try{return Dr.getContext(ii,ri)}catch(Si){return null}}return vi("webgl")||vi("experimental-webgl")||vi("webgl-experimental")}($n,Fr)}return vr?{gl:vr,canvas:$n,container:on,extensions:Ar,optionalExtensions:wr,pixelRatio:xr,profile:Er,onDone:Ir,onDestroy:Lr}:(Lr(),Ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function it($e,rn){for(var on=Array($e),$n=0;$n<$e;++$n)on[$n]=rn($n);return on}function U($e){var rn,on;return rn=($e>65535)<<4,rn|=on=(($e>>>=rn)>255)<<3,rn|=on=(($e>>>=on)>15)<<2,(rn|=on=(($e>>>=on)>3)<<1)|($e>>>=on)>>1}function P(){var $e=it(8,function(){return[]});function rn($n){var vr=function(rr){for(var Fr=16;Fr<=1<<28;Fr*=16)if(rr<=Fr)return Fr;return 0}($n),ar=$e[U(vr)>>2];return ar.length>0?ar.pop():new ArrayBuffer(vr)}function on($n){$e[U($n.byteLength)>>2].push($n)}return{alloc:rn,free:on,allocType:function(vr,ar){var rr=null;switch(vr){case 5120:rr=new Int8Array(rn(ar),0,ar);break;case 5121:rr=new Uint8Array(rn(ar),0,ar);break;case 5122:rr=new Int16Array(rn(2*ar),0,ar);break;case 5123:rr=new Uint16Array(rn(2*ar),0,ar);break;case 5124:rr=new Int32Array(rn(4*ar),0,ar);break;case 5125:rr=new Uint32Array(rn(4*ar),0,ar);break;case 5126:rr=new Float32Array(rn(4*ar),0,ar);break;default:return null}return rr.length!==ar?rr.subarray(0,ar):rr},freeType:function(vr){on(vr.buffer)}}}var H=P();function k($e){return!!$e&&S($e)==="object"&&Array.isArray($e.shape)&&Array.isArray($e.stride)&&typeof $e.offset=="number"&&$e.shape.length===$e.stride.length&&(Array.isArray($e.data)||M($e.data))}H.zero=P();var h=function(rn){return Object.keys(rn).map(function(on){return rn[on]})},g={shape:function(rn){for(var on=[],$n=rn;$n.length;$n=$n[0])on.push($n.length);return on},flatten:function(rn,on,$n,vr){var ar=1;if(on.length)for(var rr=0;rr<on.length;++rr)ar*=on[rr];else ar=0;var Fr=vr||H.allocType($n,ar);switch(on.length){case 0:break;case 1:(function(Ar,wr,xr){for(var Er=0;Er<wr;++Er)xr[Er]=Ar[Er]})(rn,on[0],Fr);break;case 2:(function(Ar,wr,xr,Er){for(var Ir=0,Lr=0;Lr<wr;++Lr)for(var Pr=Ar[Lr],Dr=0;Dr<xr;++Dr)Er[Ir++]=Pr[Dr]})(rn,on[0],on[1],Fr);break;case 3:G(rn,on[0],on[1],on[2],Fr,0);break;default:(function Ar(wr,xr,Er,Ir,Lr){for(var Pr=1,Dr=Er+1;Dr<xr.length;++Dr)Pr*=xr[Dr];var ri=xr[Er];if(xr.length-Er==4){var vi=xr[Er+1],ii=xr[Er+2],Si=xr[Er+3];for(Dr=0;Dr<ri;++Dr)G(wr[Dr],vi,ii,Si,Ir,Lr),Lr+=Pr}else for(Dr=0;Dr<ri;++Dr)Ar(wr[Dr],xr,Er+1,Ir,Lr),Lr+=Pr})(rn,on,0,Fr,0)}return Fr}};function G($e,rn,on,$n,vr,ar){for(var rr=ar,Fr=0;Fr<rn;++Fr)for(var Ar=$e[Fr],wr=0;wr<on;++wr)for(var xr=Ar[wr],Er=0;Er<$n;++Er)vr[rr++]=xr[Er]}var V={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},$={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},rt={dynamic:35048,stream:35040,static:35044},ot=g.flatten,At=g.shape,gt=[];function mt($e){return 0|V[Object.prototype.toString.call($e)]}function bt($e,rn){for(var on=0;on<rn.length;++on)$e[on]=rn[on]}function jt($e,rn,on,$n,vr,ar,rr){for(var Fr=0,Ar=0;Ar<on;++Ar)for(var wr=0;wr<$n;++wr)$e[Fr++]=rn[vr*Ar+ar*wr+rr]}gt[5120]=1,gt[5122]=2,gt[5124]=4,gt[5121]=1,gt[5123]=2,gt[5125]=4,gt[5126]=4;var Dt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ut=new Float32Array(1),Ct=new Uint32Array(Ut.buffer);function Vt($e){for(var rn=H.allocType(5123,$e.length),on=0;on<$e.length;++on)if(isNaN($e[on]))rn[on]=65535;else if($e[on]===1/0)rn[on]=31744;else if($e[on]===-1/0)rn[on]=64512;else{Ut[0]=$e[on];var $n=Ct[0],vr=$n>>>31<<15,ar=($n<<1>>>24)-127,rr=$n>>13&1023;if(ar<-24)rn[on]=vr;else if(ar<-14){var Fr=-14-ar;rn[on]=vr+(rr+1024>>Fr)}else rn[on]=ar>15?vr+31744:vr+(ar+15<<10)+rr}return rn}function Ht($e){return Array.isArray($e)||M($e)}var re=function(rn){return!(rn&rn-1||!rn)},pe=[9984,9986,9985,9987],ye=[0,6409,6410,6407,6408],we={};function Ne($e){return"[object "+$e+"]"}we[6409]=we[6406]=we[6402]=1,we[34041]=we[6410]=2,we[6407]=we[35904]=3,we[6408]=we[35906]=4;var Ke=Ne("HTMLCanvasElement"),pn=Ne("OffscreenCanvas"),hn=Ne("CanvasRenderingContext2D"),kn=Ne("ImageBitmap"),Tn=Ne("HTMLImageElement"),Rn=Ne("HTMLVideoElement"),Mn=Object.keys(V).concat([Ke,pn,hn,kn,Tn,Rn]),Cn=[];Cn[5121]=1,Cn[5126]=4,Cn[36193]=2,Cn[5123]=2,Cn[5125]=4;var _n=[];function Kn($e){return Array.isArray($e)&&($e.length===0||typeof $e[0]=="number")}function tr($e){return!!Array.isArray($e)&&!($e.length===0||!Ht($e[0]))}function or($e){return Object.prototype.toString.call($e)}function nr($e){return or($e)===Ke}function er($e){return or($e)===pn}function Sr($e){if(!$e)return!1;var rn=or($e);return Mn.indexOf(rn)>=0||Kn($e)||tr($e)||k($e)}function Vr($e){return 0|V[Object.prototype.toString.call($e)]}function ti($e,rn){return H.allocType($e.type===36193?5126:$e.type,rn)}function hi($e,rn){$e.type===36193?($e.data=Vt(rn),H.freeType(rn)):$e.data=rn}function Fi($e,rn,on,$n,vr,ar){var rr;if(rr=_n[$e]!==void 0?_n[$e]:we[$e]*Cn[rn],ar&&(rr*=6),vr){for(var Fr=0,Ar=on;Ar>=1;)Fr+=rr*Ar*Ar,Ar/=2;return Fr}return rr*on*$n}function to($e,rn,on,$n,vr,ar,rr){var Fr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ar={repeat:10497,clamp:33071,mirror:33648},wr={nearest:9728,linear:9729},xr=I({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wr),Er={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Lr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};rn.ext_srgb&&(Lr.srgb=35904,Lr.srgba=35906),rn.oes_texture_float&&(Ir.float32=Ir.float=5126),rn.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),rn.webgl_depth_texture&&(I(Lr,{depth:6402,"depth stencil":34041}),I(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),rn.webgl_compressed_texture_s3tc&&I(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rn.webgl_compressed_texture_atc&&I(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rn.webgl_compressed_texture_pvrtc&&I(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rn.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var Dr=Array.prototype.slice.call($e.getParameter(34467));Object.keys(Pr).forEach(function(Zt){var de=Pr[Zt];Dr.indexOf(de)>=0&&(Lr[Zt]=de)});var ri=Object.keys(Lr);on.textureFormats=ri;var vi=[];Object.keys(Lr).forEach(function(Zt){var de=Lr[Zt];vi[de]=Zt});var ii=[];Object.keys(Ir).forEach(function(Zt){var de=Ir[Zt];ii[de]=Zt});var Si=[];Object.keys(wr).forEach(function(Zt){Si[wr[Zt]]=Zt});var Ui=[];Object.keys(xr).forEach(function(Zt){var de=xr[Zt];Ui[de]=Zt});var Yi=[];Object.keys(Ar).forEach(function(Zt){Yi[Ar[Zt]]=Zt});var Bi=ri.reduce(function(Zt,de){var he=Lr[de];return he===6409||he===6406||he===6409||he===6410||he===6402||he===34041||rn.ext_srgb&&(he===35904||he===35906)?Zt[he]=he:he===32855||de.indexOf("rgba")>=0?Zt[he]=6408:Zt[he]=6407,Zt},{});function Di(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function ve(Zt,de){Zt.internalformat=de.internalformat,Zt.format=de.format,Zt.type=de.type,Zt.compressed=de.compressed,Zt.premultiplyAlpha=de.premultiplyAlpha,Zt.flipY=de.flipY,Zt.unpackAlignment=de.unpackAlignment,Zt.colorSpace=de.colorSpace,Zt.width=de.width,Zt.height=de.height,Zt.channels=de.channels}function F(Zt,de){if(S(de)==="object"&&de){if("premultiplyAlpha"in de&&(ft.type(de.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Zt.premultiplyAlpha=de.premultiplyAlpha),"flipY"in de&&(ft.type(de.flipY,"boolean","invalid texture flip"),Zt.flipY=de.flipY),"alignment"in de&&(ft.oneOf(de.alignment,[1,2,4,8],"invalid texture unpack alignment"),Zt.unpackAlignment=de.alignment),"colorSpace"in de&&(ft.parameter(de.colorSpace,Er,"invalid colorSpace"),Zt.colorSpace=Er[de.colorSpace]),"type"in de){var he=de.type;ft(rn.oes_texture_float||!(he==="float"||he==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ft(rn.oes_texture_half_float||!(he==="half float"||he==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ft(rn.webgl_depth_texture||!(he==="uint16"||he==="uint32"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(he,Ir,"invalid texture type"),Zt.type=Ir[he]}var ce=Zt.width,Me=Zt.height,ze=Zt.channels,Ve=!1;"shape"in de?(ft(Array.isArray(de.shape)&&de.shape.length>=2,"shape must be an array"),ce=de.shape[0],Me=de.shape[1],de.shape.length===3&&(ze=de.shape[2],ft(ze>0&&ze<=4,"invalid number of channels"),Ve=!0),ft(ce>=0&&ce<=on.maxTextureSize,"invalid width"),ft(Me>=0&&Me<=on.maxTextureSize,"invalid height")):("radius"in de&&(ce=Me=de.radius,ft(ce>=0&&ce<=on.maxTextureSize,"invalid radius")),"width"in de&&(ce=de.width,ft(ce>=0&&ce<=on.maxTextureSize,"invalid width")),"height"in de&&(Me=de.height,ft(Me>=0&&Me<=on.maxTextureSize,"invalid height")),"channels"in de&&(ze=de.channels,ft(ze>0&&ze<=4,"invalid number of channels"),Ve=!0)),Zt.width=0|ce,Zt.height=0|Me,Zt.channels=0|ze;var ke=!1;if("format"in de){var tn=de.format;ft(rn.webgl_depth_texture||!(tn==="depth"||tn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(tn,Lr,"invalid texture format");var De=Zt.internalformat=Lr[tn];Zt.format=Bi[De],tn in Ir&&("type"in de||(Zt.type=Ir[tn])),tn in Pr&&(Zt.compressed=!0),ke=!0}!Ve&&ke?Zt.channels=we[Zt.format]:Ve&&!ke?Zt.channels!==ye[Zt.format]&&(Zt.format=Zt.internalformat=ye[Zt.channels]):ke&&Ve&&ft(Zt.channels===we[Zt.format],"number of channels inconsistent with specified format")}}function B(Zt){$e.pixelStorei(37440,Zt.flipY),$e.pixelStorei(37441,Zt.premultiplyAlpha),$e.pixelStorei(37443,Zt.colorSpace),$e.pixelStorei(3317,Zt.unpackAlignment)}function Z(){Di.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ut(Zt,de){var he=null;if(Sr(de)?he=de:de&&(ft.type(de,"object","invalid pixel data type"),F(Zt,de),"x"in de&&(Zt.xOffset=0|de.x),"y"in de&&(Zt.yOffset=0|de.y),Sr(de.data)&&(he=de.data)),ft(!Zt.compressed||he instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),de.copy){ft(!he,"can not specify copy and data field for the same texture");var ce=vr.viewportWidth,Me=vr.viewportHeight;Zt.width=Zt.width||ce-Zt.xOffset,Zt.height=Zt.height||Me-Zt.yOffset,Zt.needsCopy=!0,ft(Zt.xOffset>=0&&Zt.xOffset<ce&&Zt.yOffset>=0&&Zt.yOffset<Me&&Zt.width>0&&Zt.width<=ce&&Zt.height>0&&Zt.height<=Me,"copy texture read out of bounds")}else if(he){if(M(he))Zt.channels=Zt.channels||4,Zt.data=he,"type"in de||Zt.type!==5121||(Zt.type=Vr(he));else if(Kn(he))Zt.channels=Zt.channels||4,function(Ue,ln){var mn=ln.length;switch(Ue.type){case 5121:case 5123:case 5125:case 5126:var Wn=H.allocType(Ue.type,mn);Wn.set(ln),Ue.data=Wn;break;case 36193:Ue.data=Vt(ln);break;default:ft.raise("unsupported texture type, must specify a typed array")}}(Zt,he),Zt.alignment=1,Zt.needsFree=!0;else if(k(he)){var ze=he.data;Array.isArray(ze)||Zt.type!==5121||(Zt.type=Vr(ze));var Ve,ke,tn,De,cn,fn,nn=he.shape,dn=he.stride;nn.length===3?(tn=nn[2],fn=dn[2]):(ft(nn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),tn=1,fn=1),Ve=nn[0],ke=nn[1],De=dn[0],cn=dn[1],Zt.alignment=1,Zt.width=Ve,Zt.height=ke,Zt.channels=tn,Zt.format=Zt.internalformat=ye[tn],Zt.needsFree=!0,function(Ue,ln,mn,Wn,An,In){for(var lr=Ue.width,Hr=Ue.height,Gr=Ue.channels,Mr=ti(Ue,lr*Hr*Gr),oi=0,ai=0;ai<Hr;++ai)for(var Zr=0;Zr<lr;++Zr)for(var Xi=0;Xi<Gr;++Xi)Mr[oi++]=ln[mn*Zr+Wn*ai+An*Xi+In];hi(Ue,Mr)}(Zt,ze,De,cn,fn,he.offset)}else if(nr(he)||er(he)||or(he)===hn)nr(he)||er(he)?Zt.element=he:Zt.element=he.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(function(Ue){return or(Ue)===kn}(he))Zt.element=he,Zt.width=he.width,Zt.height=he.height,Zt.channels=4;else if(function(Ue){return or(Ue)===Tn}(he))Zt.element=he,Zt.width=he.naturalWidth,Zt.height=he.naturalHeight,Zt.channels=4;else if(function(Ue){return or(Ue)===Rn}(he))Zt.element=he,Zt.width=he.videoWidth,Zt.height=he.videoHeight,Zt.channels=4;else if(tr(he)){var Sn=Zt.width||he[0].length,Pe=Zt.height||he.length,le=Zt.channels;le=Ht(he[0][0])?le||he[0][0].length:le||1;for(var Le=g.shape(he),Be=1,en=0;en<Le.length;++en)Be*=Le[en];var sn=ti(Zt,Be);g.flatten(he,Le,"",sn),hi(Zt,sn),Zt.alignment=1,Zt.width=Sn,Zt.height=Pe,Zt.channels=le,Zt.format=Zt.internalformat=ye[le],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4;Zt.type===5126?ft(on.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Zt.type===36193&&ft(on.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Bt(Zt,de,he){var ce=Zt.element,Me=Zt.data,ze=Zt.internalformat,Ve=Zt.format,ke=Zt.type,tn=Zt.width,De=Zt.height;B(Zt),ce?$e.texImage2D(de,he,Ve,Ve,ke,ce):Zt.compressed?$e.compressedTexImage2D(de,he,ze,tn,De,0,Me):Zt.needsCopy?($n(),$e.copyTexImage2D(de,he,Ve,Zt.xOffset,Zt.yOffset,tn,De,0)):$e.texImage2D(de,he,Ve,tn,De,0,Ve,ke,Me||null)}function Jt(Zt,de,he,ce,Me){var ze=Zt.element,Ve=Zt.data,ke=Zt.internalformat,tn=Zt.format,De=Zt.type,cn=Zt.width,fn=Zt.height;B(Zt),ze?$e.texSubImage2D(de,Me,he,ce,tn,De,ze):Zt.compressed?$e.compressedTexSubImage2D(de,Me,he,ce,ke,cn,fn,Ve):Zt.needsCopy?($n(),$e.copyTexSubImage2D(de,Me,he,ce,Zt.xOffset,Zt.yOffset,cn,fn)):$e.texSubImage2D(de,Me,he,ce,cn,fn,tn,De,Ve)}var ie=[];function se(){return ie.pop()||new Z}function Te(Zt){Zt.needsFree&&H.freeType(Zt.data),Z.call(Zt),ie.push(Zt)}function Ee(){Di.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function un(Zt,de,he){var ce=Zt.images[0]=se();Zt.mipmask=1,ce.width=Zt.width=de,ce.height=Zt.height=he,ce.channels=Zt.channels=4}function xn(Zt,de){var he=null;if(Sr(de))ve(he=Zt.images[0]=se(),Zt),ut(he,de),Zt.mipmask=1;else if(F(Zt,de),Array.isArray(de.mipmap))for(var ce=de.mipmap,Me=0;Me<ce.length;++Me)ve(he=Zt.images[Me]=se(),Zt),he.width>>=Me,he.height>>=Me,ut(he,ce[Me]),Zt.mipmask|=1<<Me;else ve(he=Zt.images[0]=se(),Zt),ut(he,de),Zt.mipmask=1;ve(Zt,Zt.images[0]),!Zt.compressed||Zt.internalformat!==33776&&Zt.internalformat!==33777&&Zt.internalformat!==33778&&Zt.internalformat!==33779||ft(Zt.width%4==0&&Zt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function zt(Zt,de){for(var he=Zt.images,ce=0;ce<he.length;++ce){if(!he[ce])return;Bt(he[ce],de,ce)}}var Yt=[];function Se(){var Zt=Yt.pop()||new Ee;Di.call(Zt),Zt.mipmask=0;for(var de=0;de<16;++de)Zt.images[de]=null;return Zt}function Wt(Zt){for(var de=Zt.images,he=0;he<de.length;++he)de[he]&&Te(de[he]),de[he]=null;Yt.push(Zt)}function ue(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function vn(Zt,de){if("min"in de){var he=de.min;ft.parameter(he,xr),Zt.minFilter=xr[he],pe.indexOf(Zt.minFilter)>=0&&!("faces"in de)&&(Zt.genMipmaps=!0)}if("mag"in de){var ce=de.mag;ft.parameter(ce,wr),Zt.magFilter=wr[ce]}var Me=Zt.wrapS,ze=Zt.wrapT;if("wrap"in de){var Ve=de.wrap;typeof Ve=="string"?(ft.parameter(Ve,Ar),Me=ze=Ar[Ve]):Array.isArray(Ve)&&(ft.parameter(Ve[0],Ar),ft.parameter(Ve[1],Ar),Me=Ar[Ve[0]],ze=Ar[Ve[1]])}else{if("wrapS"in de){var ke=de.wrapS;ft.parameter(ke,Ar),Me=Ar[ke]}if("wrapT"in de){var tn=de.wrapT;ft.parameter(tn,Ar),ze=Ar[tn]}}if(Zt.wrapS=Me,Zt.wrapT=ze,"anisotropic"in de){var De=de.anisotropic;ft(typeof De=="number"&&De>=1&&De<=on.maxAnisotropic,"aniso samples must be between 1 and "),Zt.anisotropic=de.anisotropic}if("mipmap"in de){var cn=!1;switch(S(de.mipmap)){case"string":ft.parameter(de.mipmap,Fr,"invalid mipmap hint"),Zt.mipmapHint=Fr[de.mipmap],Zt.genMipmaps=!0,cn=!0;break;case"boolean":cn=Zt.genMipmaps=de.mipmap;break;case"object":ft(Array.isArray(de.mipmap),"invalid mipmap type"),Zt.genMipmaps=!1,cn=!0;break;default:ft.raise("invalid mipmap type")}cn&&!("min"in de)&&(Zt.minFilter=9984)}}function Dn(Zt,de){$e.texParameteri(de,10241,Zt.minFilter),$e.texParameteri(de,10240,Zt.magFilter),$e.texParameteri(de,10242,Zt.wrapS),$e.texParameteri(de,10243,Zt.wrapT),rn.ext_texture_filter_anisotropic&&$e.texParameteri(de,34046,Zt.anisotropic),Zt.genMipmaps&&($e.hint(33170,Zt.mipmapHint),$e.generateMipmap(de))}var zn=0,Gn={},Ze=on.maxTextureUnits,Ce=Array(Ze).map(function(){return null});function R(Zt){Di.call(this),this.mipmask=0,this.internalformat=6408,this.id=zn++,this.refCount=1,this.target=Zt,this.texture=$e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ue,rr.profile&&(this.stats={size:0})}function yt(Zt){$e.activeTexture(33984),$e.bindTexture(Zt.target,Zt.texture)}function $t(){var Zt=Ce[0];Zt?$e.bindTexture(Zt.target,Zt.texture):$e.bindTexture(3553,null)}function me(Zt){var de=Zt.texture;ft(de,"must not double destroy texture");var he=Zt.unit,ce=Zt.target;he>=0&&($e.activeTexture(33984+he),$e.bindTexture(ce,null),Ce[he]=null),$e.deleteTexture(de),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Gn[Zt.id],ar.textureCount--}return I(R.prototype,{bind:function(){this.bindCount+=1;var de=this.unit;if(de<0){for(var he=0;he<Ze;++he){var ce=Ce[he];if(ce){if(ce.bindCount>0)continue;ce.unit=-1}Ce[he]=this,de=he;break}de>=Ze&&ft.raise("insufficient number of texture units"),rr.profile&&ar.maxTextureUnits<de+1&&(ar.maxTextureUnits=de+1),this.unit=de,$e.activeTexture(33984+de),$e.bindTexture(this.target,this.texture)}return de},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&me(this)}}),rr.profile&&(ar.getTotalTextureSize=function(){var Zt=0;return Object.keys(Gn).forEach(function(de){Zt+=Gn[de].stats.size}),Zt}),{create2D:function(de,he){var ce=new R(3553);function Me(ze,Ve){var ke=ce.texInfo;ue.call(ke);var tn=Se();return typeof ze=="number"?un(tn,0|ze,typeof Ve=="number"?0|Ve:0|ze):ze?(ft.type(ze,"object","invalid arguments to regl.texture"),vn(ke,ze),xn(tn,ze)):un(tn,1,1),ke.genMipmaps&&(tn.mipmask=(tn.width<<1)-1),ce.mipmask=tn.mipmask,ve(ce,tn),ft.texture2D(ke,tn,on),ce.internalformat=tn.internalformat,Me.width=tn.width,Me.height=tn.height,yt(ce),zt(tn,3553),Dn(ke,3553),$t(),Wt(tn),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,tn.width,tn.height,ke.genMipmaps,!1)),Me.format=vi[ce.internalformat],Me.type=ii[ce.type],Me.mag=Si[ke.magFilter],Me.min=Ui[ke.minFilter],Me.wrapS=Yi[ke.wrapS],Me.wrapT=Yi[ke.wrapT],Me}return Gn[ce.id]=ce,ar.textureCount++,Me(de,he),Me.subimage=function(ze,Ve,ke,tn){ft(!!ze,"must specify image data");var De=0|Ve,cn=0|ke,fn=0|tn,nn=se();return ve(nn,ce),nn.width=0,nn.height=0,ut(nn,ze),nn.width=nn.width||(ce.width>>fn)-De,nn.height=nn.height||(ce.height>>fn)-cn,ft(ce.type===nn.type&&ce.format===nn.format&&ce.internalformat===nn.internalformat,"incompatible format for texture.subimage"),ft(De>=0&&cn>=0&&De+nn.width<=ce.width&&cn+nn.height<=ce.height,"texture.subimage write out of bounds"),ft(ce.mipmask&1<<fn,"missing mipmap data"),ft(nn.data||nn.element||nn.needsCopy,"missing image data"),yt(ce),Jt(nn,3553,De,cn,fn),$t(),Te(nn),Me},Me.resize=function(ze,Ve){var ke=0|ze,tn=0|Ve||ke;if(ke===ce.width&&tn===ce.height)return Me;Me.width=ce.width=ke,Me.height=ce.height=tn,yt(ce);for(var De=0;ce.mipmask>>De;++De){var cn=ke>>De,fn=tn>>De;if(!cn||!fn)break;$e.texImage2D(3553,De,ce.format,cn,fn,0,ce.format,ce.type,null)}return $t(),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,ke,tn,!1,!1)),Me},Me._reglType="texture2d",Me._texture=ce,rr.profile&&(Me.stats=ce.stats),Me.destroy=function(){ce.decRef()},Me},createCube:function(de,he,ce,Me,ze,Ve){var ke=new R(34067);Gn[ke.id]=ke,ar.cubeCount++;var tn=new Array(6);function De(cn,fn,nn,dn,Sn,Pe){var le,Le=ke.texInfo;for(ue.call(Le),le=0;le<6;++le)tn[le]=Se();if(typeof cn!="number"&&cn)if(S(cn)==="object")if(fn)xn(tn[0],cn),xn(tn[1],fn),xn(tn[2],nn),xn(tn[3],dn),xn(tn[4],Sn),xn(tn[5],Pe);else if(vn(Le,cn),F(ke,cn),"faces"in cn){var Be=cn.faces;for(ft(Array.isArray(Be)&&Be.length===6,"cube faces must be a length 6 array"),le=0;le<6;++le)ft(S(Be[le])==="object"&&!!Be[le],"invalid input for cube map face"),ve(tn[le],ke),xn(tn[le],Be[le])}else for(le=0;le<6;++le)xn(tn[le],cn);else ft.raise("invalid arguments to cube map");else{var en=0|cn||1;for(le=0;le<6;++le)un(tn[le],en,en)}for(ve(ke,tn[0]),on.npotTextureCube||ft(re(ke.width)&&re(ke.height),"your browser does not support non power or two texture dimensions"),Le.genMipmaps?ke.mipmask=(tn[0].width<<1)-1:ke.mipmask=tn[0].mipmask,ft.textureCube(ke,Le,tn,on),ke.internalformat=tn[0].internalformat,De.width=tn[0].width,De.height=tn[0].height,yt(ke),le=0;le<6;++le)zt(tn[le],34069+le);for(Dn(Le,34067),$t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,Le.genMipmaps,!0)),De.format=vi[ke.internalformat],De.type=ii[ke.type],De.mag=Si[Le.magFilter],De.min=Ui[Le.minFilter],De.wrapS=Yi[Le.wrapS],De.wrapT=Yi[Le.wrapT],le=0;le<6;++le)Wt(tn[le]);return De}return De(de,he,ce,Me,ze,Ve),De.subimage=function(cn,fn,nn,dn,Sn){ft(!!fn,"must specify image data"),ft(typeof cn=="number"&&cn===(0|cn)&&cn>=0&&cn<6,"invalid face");var Pe=0|nn,le=0|dn,Le=0|Sn,Be=se();return ve(Be,ke),Be.width=0,Be.height=0,ut(Be,fn),Be.width=Be.width||(ke.width>>Le)-Pe,Be.height=Be.height||(ke.height>>Le)-le,ft(ke.type===Be.type&&ke.format===Be.format&&ke.internalformat===Be.internalformat,"incompatible format for texture.subimage"),ft(Pe>=0&&le>=0&&Pe+Be.width<=ke.width&&le+Be.height<=ke.height,"texture.subimage write out of bounds"),ft(ke.mipmask&1<<Le,"missing mipmap data"),ft(Be.data||Be.element||Be.needsCopy,"missing image data"),yt(ke),Jt(Be,34069+cn,Pe,le,Le),$t(),Te(Be),De},De.resize=function(cn){var fn=0|cn;if(fn!==ke.width){De.width=ke.width=fn,De.height=ke.height=fn,yt(ke);for(var nn=0;nn<6;++nn)for(var dn=0;ke.mipmask>>dn;++dn)$e.texImage2D(34069+nn,dn,ke.format,fn>>dn,fn>>dn,0,ke.format,ke.type,null);return $t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,!1,!0)),De}},De._reglType="textureCube",De._texture=ke,rr.profile&&(De.stats=ke.stats),De.destroy=function(){ke.decRef()},De},clear:function(){for(var de=0;de<Ze;++de)$e.activeTexture(33984+de),$e.bindTexture(3553,null),Ce[de]=null;h(Gn).forEach(me),ar.cubeCount=0,ar.textureCount=0},getTexture:function(de){return null},restore:function(){for(var de=0;de<Ze;++de){var he=Ce[de];he&&(he.bindCount=0,he.unit=-1,Ce[de]=null)}h(Gn).forEach(function(ce){ce.texture=$e.createTexture(),$e.bindTexture(ce.target,ce.texture);for(var Me=0;Me<32;++Me)if((ce.mipmask&1<<Me)!=0)if(ce.target===3553)$e.texImage2D(3553,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);else for(var ze=0;ze<6;++ze)$e.texImage2D(34069+ze,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);Dn(ce.texInfo,ce.target)})},refresh:function(){for(var de=0;de<Ze;++de){var he=Ce[de];he&&(he.bindCount=0,he.unit=-1,Ce[de]=null),$e.activeTexture(33984+de),$e.bindTexture(3553,null),$e.bindTexture(34067,null)}}}}_n[32854]=2,_n[32855]=2,_n[36194]=2,_n[34041]=4,_n[33776]=.5,_n[33777]=.5,_n[33778]=1,_n[33779]=1,_n[35986]=.5,_n[35987]=1,_n[34798]=1,_n[35840]=.5,_n[35841]=.25,_n[35842]=.5,_n[35843]=.25,_n[36196]=.5;var si=[];function Ci($e,rn,on){return si[$e]*rn*on}si[32854]=2,si[32855]=2,si[36194]=2,si[33189]=2,si[36168]=1,si[34041]=4,si[35907]=4,si[34836]=16,si[34842]=8,si[34843]=6;var _i=[6407,6408],Li=[];Li[6408]=4,Li[6407]=3;var Vi=[];Vi[5121]=1,Vi[5126]=4,Vi[36193]=2;var ro=[32854,32855,36194,35907,34842,34843,34836],jr={};function Ji(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function pr($e,rn,on,$n,vr,ar,rr){function Fr(Ar){var wr;rn.next===null?(ft(vr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wr=5121):(ft(rn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wr=rn.next.colorAttachments[0].texture._texture.type,ar.oes_texture_float?(ft(wr===5121||wr===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wr===5126&&ft(rr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ft(wr===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xr=0,Er=0,Ir=$n.framebufferWidth,Lr=$n.framebufferHeight,Pr=null;M(Ar)?Pr=Ar:Ar&&(ft.type(Ar,"object","invalid arguments to regl.read()"),xr=0|Ar.x,Er=0|Ar.y,ft(xr>=0&&xr<$n.framebufferWidth,"invalid x offset for regl.read"),ft(Er>=0&&Er<$n.framebufferHeight,"invalid y offset for regl.read"),Ir=0|(Ar.width||$n.framebufferWidth-xr),Lr=0|(Ar.height||$n.framebufferHeight-Er),Pr=Ar.data||null),Pr&&(wr===5121?ft(Pr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wr===5126&&ft(Pr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ft(Ir>0&&Ir+xr<=$n.framebufferWidth,"invalid width for read pixels"),ft(Lr>0&&Lr+Er<=$n.framebufferHeight,"invalid height for read pixels"),on();var Dr=Ir*Lr*4;return Pr||(wr===5121?Pr=new Uint8Array(Dr):wr===5126&&(Pr=Pr||new Float32Array(Dr))),ft.isTypedArray(Pr,"data buffer for regl.read() must be a typedarray"),ft(Pr.byteLength>=Dr,"data buffer for regl.read() too small"),$e.pixelStorei(3333,4),$e.readPixels(xr,Er,Ir,Lr,6408,wr,Pr),Pr}return function(Ar){return Ar&&"framebuffer"in Ar?function(wr){var xr;return rn.setFBO({framebuffer:wr.framebuffer},function(){xr=Fr(wr)}),xr}(Ar):Fr(Ar)}}function Yr($e){return Array.prototype.slice.call($e)}function Br($e){return Yr($e).join("")}jr[36053]="complete",jr[36054]="incomplete attachment",jr[36057]="incomplete dimensions",jr[36055]="incomplete, missing attachment",jr[36061]="unsupported";var Nr="xyzw".split(""),Xr="profile",Kr="framebuffer",ni="vert",fi="frag",$r="elements",ci="primitive",Qr="count",gi="offset",Oi="instances",bi="vao",zi=Kr+"Width",Qi=Kr+"Height",io=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Wi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Pi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},no={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mo={frag:35632,vert:35633},ao={cw:2304,ccw:2305};function uo($e){return Array.isArray($e)||M($e)||k($e)}function xo($e){return $e.sort(function(rn,on){return rn==="viewport"?-1:on==="viewport"?1:rn<on?-1:1})}function oe($e,rn,on,$n){this.thisDep=$e,this.contextDep=rn,this.propDep=on,this.append=$n}function Kt($e){return $e&&!($e.thisDep||$e.contextDep||$e.propDep)}function te($e){return new oe(!1,!1,!1,$e)}function Oe($e,rn){var on=$e.type;if(on===0){var $n=$e.data.length;return new oe(!0,$n>=1,$n>=2,rn)}if(on===4){var vr=$e.data;return new oe(vr.thisDep,vr.contextDep,vr.propDep,rn)}if(on===5)return new oe(!1,!1,!1,rn);if(on===6){for(var ar=!1,rr=!1,Fr=!1,Ar=0;Ar<$e.data.length;++Ar){var wr=$e.data[Ar];if(wr.type===1)Fr=!0;else if(wr.type===2)rr=!0;else if(wr.type===3)ar=!0;else if(wr.type===0){ar=!0;var xr=wr.data;xr>=1&&(rr=!0),xr>=2&&(Fr=!0)}else wr.type===4&&(ar=ar||wr.data.thisDep,rr=rr||wr.data.contextDep,Fr=Fr||wr.data.propDep)}return new oe(ar,rr,Fr,rn)}return new oe(on===3,on===2,on===1,rn)}var Qe=new oe(!1,!1,!1,function(){});function On($e,rn,on,$n,vr,ar,rr,Fr,Ar,wr,xr,Er,Ir,Lr,Pr){var Dr=wr.Record,ri={add:32774,subtract:32778,"reverse subtract":32779};on.ext_blend_minmax&&(ri.min=32775,ri.max=32776);var vi=on.angle_instanced_arrays,ii=on.webgl_draw_buffers,Si={dirty:!0,profile:Pr.profile},Ui={},Yi=[],Bi={},Di={};function ve(Ze){return Ze.replace(".","_")}function F(Ze,Ce,R){var yt=ve(Ze);Yi.push(Ze),Ui[yt]=Si[yt]=!!R,Bi[yt]=Ce}function B(Ze,Ce,R){var yt=ve(Ze);Yi.push(Ze),Array.isArray(R)?(Si[yt]=R.slice(),Ui[yt]=R.slice()):Si[yt]=Ui[yt]=R,Di[yt]=Ce}F("dither",3024),F("blend.enable",3042),B("blend.color","blendColor",[0,0,0,0]),B("blend.equation","blendEquationSeparate",[32774,32774]),B("blend.func","blendFuncSeparate",[1,0,1,0]),F("depth.enable",2929,!0),B("depth.func","depthFunc",513),B("depth.range","depthRange",[0,1]),B("depth.mask","depthMask",!0),B("colorMask","colorMask",[!0,!0,!0,!0]),F("cull.enable",2884),B("cull.face","cullFace",1029),B("frontFace","frontFace",2305),B("lineWidth","lineWidth",1),F("polygonOffset.enable",32823),B("polygonOffset.offset","polygonOffset",[0,0]),F("sample.alpha",32926),F("sample.enable",32928),B("sample.coverage","sampleCoverage",[1,!1]),F("stencil.enable",2960),B("stencil.mask","stencilMask",-1),B("stencil.func","stencilFunc",[519,0,-1]),B("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),B("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),F("scissor.enable",3089),B("scissor.box","scissor",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]),B("viewport","viewport",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]);var Z={gl:$e,context:Ir,strings:rn,next:Ui,current:Si,draw:Er,elements:ar,buffer:vr,shader:xr,attributes:wr.state,vao:wr,uniforms:Ar,framebuffer:Fr,extensions:on,timer:Lr,isBufferArgs:uo},ut={primTypes:Dt,compareFuncs:Pi,blendFuncs:Wi,blendEquations:ri,stencilOps:no,glTypes:$,orientationType:ao};ft.optional(function(){Z.isArrayLike=Ht}),ii&&(ut.backBuffer=[1029],ut.drawBuffer=it($n.maxDrawbuffers,function(Ze){return Ze===0?[0]:it(Ze,function(Ce){return 36064+Ce})}));var Bt=0;function Jt(){var Ze=function(){var ce=0,Me=[],ze=[];function Ve(){var cn=[],fn=[];return I(function(){cn.push.apply(cn,Yr(arguments))},{def:function(){var dn="v"+ce++;return fn.push(dn),arguments.length>0&&(cn.push(dn,"="),cn.push.apply(cn,Yr(arguments)),cn.push(";")),dn},toString:function(){return Br([fn.length>0?"var "+fn.join(",")+";":"",Br(cn)])}})}function ke(){var cn=Ve(),fn=Ve(),nn=cn.toString,dn=fn.toString;function Sn(Pe,le){fn(Pe,le,"=",cn.def(Pe,le),";")}return I(function(){cn.apply(cn,Yr(arguments))},{def:cn.def,entry:cn,exit:fn,save:Sn,set:function(le,Le,Be){Sn(le,Le),cn(le,Le,"=",Be,";")},toString:function(){return nn()+dn()}})}var tn=Ve(),De={};return{global:tn,link:function(fn){for(var nn=0;nn<ze.length;++nn)if(ze[nn]===fn)return Me[nn];var dn="g"+ce++;return Me.push(dn),ze.push(fn),dn},block:Ve,proc:function(fn,nn){var dn=[];function Sn(){var Be="a"+dn.length;return dn.push(Be),Be}nn=nn||0;for(var Pe=0;Pe<nn;++Pe)Sn();var le=ke(),Le=le.toString;return De[fn]=I(le,{arg:Sn,toString:function(){return Br(["function(",dn.join(),"){",Le(),"}"])}})},scope:ke,cond:function(){var fn=Br(arguments),nn=ke(),dn=ke(),Sn=nn.toString,Pe=dn.toString;return I(nn,{then:function(){return nn.apply(nn,Yr(arguments)),this},else:function(){return dn.apply(dn,Yr(arguments)),this},toString:function(){var Le=Pe();return Le&&(Le="else{"+Le+"}"),Br(["if(",fn,"){",Sn(),"}",Le])}})},compile:function(){var fn=['"use strict";',tn,"return {"];Object.keys(De).forEach(function(dn){fn.push('"',dn,'":',De[dn].toString(),",")}),fn.push("}");var nn=Br(fn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Me.concat(nn)).apply(null,ze)}}}(),Ce=Ze.link,R=Ze.global;Ze.id=Bt++,Ze.batchId="0";var yt=Ce(Z),$t=Ze.shared={props:"a0"};Object.keys(Z).forEach(function(ce){$t[ce]=R.def(yt,".",ce)}),ft.optional(function(){Ze.CHECK=Ce(ft),Ze.commandStr=ft.guessCommand(),Ze.command=Ce(Ze.commandStr),Ze.assert=function(ce,Me,ze){ce("if(!(",Me,"))",this.CHECK,".commandRaise(",Ce(ze),",",this.command,");")},ut.invalidBlendCombinations=Zi});var me=Ze.next={},Zt=Ze.current={};Object.keys(Di).forEach(function(ce){Array.isArray(Si[ce])&&(me[ce]=R.def($t.next,".",ce),Zt[ce]=R.def($t.current,".",ce))});var de=Ze.constants={};Object.keys(ut).forEach(function(ce){de[ce]=R.def(JSON.stringify(ut[ce]))}),Ze.invoke=function(ce,Me){switch(Me.type){case 0:var ze=["this",$t.context,$t.props,Ze.batchId];return ce.def(Ce(Me.data),".call(",ze.slice(0,Math.max(Me.data.length+1,4)),")");case 1:return ce.def($t.props,Me.data);case 2:return ce.def($t.context,Me.data);case 3:return ce.def("this",Me.data);case 4:return Me.data.append(Ze,ce),Me.data.ref;case 5:return Me.data.toString();case 6:return Me.data.map(function(Ve){return Ze.invoke(ce,Ve)})}},Ze.attribCache={};var he={};return Ze.scopeAttrib=function(ce){var Me=rn.id(ce);if(Me in he)return he[Me];var ze=wr.scope[Me];return ze||(ze=wr.scope[Me]=new Dr),he[Me]=Ce(ze)},Ze}function ie(Ze,Ce,R,yt,$t){var me=Ze.static,Zt=Ze.dynamic;ft.optional(function(){var dn=[Kr,ni,fi,$r,ci,gi,Qr,Oi,Xr,bi].concat(Yi);function Sn(Pe){Object.keys(Pe).forEach(function(le){ft.command(dn.indexOf(le)>=0,'unknown parameter "'+le+'"',$t.commandStr)})}Sn(me),Sn(Zt)});var de=function(dn,Sn){var Pe=dn.static;if(typeof Pe[fi]=="string"&&typeof Pe[ni]=="string"){if(Object.keys(Sn.dynamic).length>0)return null;var le=Sn.static,Le=Object.keys(le);if(Le.length>0&&typeof le[Le[0]]=="number"){for(var Be=[],en=0;en<Le.length;++en)ft(typeof le[Le[en]]=="number","must specify all vertex attribute locations when using vaos"),Be.push([0|le[Le[en]],Le[en]]);return Be}}return null}(Ze,Ce),he=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(Kr in Pe){var Le=Pe[Kr];return Le?(Le=Fr.getFramebuffer(Le),ft.command(Le,"invalid framebuffer object"),te(function(en,sn){var Ue=en.link(Le),ln=en.shared;sn.set(ln.framebuffer,".next",Ue);var mn=ln.context;return sn.set(mn,"."+zi,Ue+".width"),sn.set(mn,"."+Qi,Ue+".height"),Ue})):te(function(en,sn){var Ue=en.shared;sn.set(Ue.framebuffer,".next","null");var ln=Ue.context;return sn.set(ln,"."+zi,ln+".drawingBufferWidth"),sn.set(ln,"."+Qi,ln+".drawingBufferHeight"),"null"})}if(Kr in le){var Be=le[Kr];return Oe(Be,function(en,sn){var Ue=en.invoke(sn,Be),ln=en.shared,mn=ln.framebuffer,Wn=sn.def(mn,".getFramebuffer(",Ue,")");ft.optional(function(){en.assert(sn,"!"+Ue+"||"+Wn,"invalid framebuffer object")}),sn.set(mn,".next",Wn);var An=ln.context;return sn.set(An,"."+zi,Wn+"?"+Wn+".width:"+An+".drawingBufferWidth"),sn.set(An,"."+Qi,Wn+"?"+Wn+".height:"+An+".drawingBufferHeight"),Wn})}return null}(Ze),ce=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(Ue){if(Ue in le){var ln=le[Ue];ft.commandType(ln,"object","invalid "+Ue,Pe.commandStr);var mn,Wn,An=!0,In=0|ln.x,lr=0|ln.y;return"width"in ln?(mn=0|ln.width,ft.command(mn>=0,"invalid "+Ue,Pe.commandStr)):An=!1,"height"in ln?(Wn=0|ln.height,ft.command(Wn>=0,"invalid "+Ue,Pe.commandStr)):An=!1,new oe(!An&&Sn&&Sn.thisDep,!An&&Sn&&Sn.contextDep,!An&&Sn&&Sn.propDep,function(Mr,oi){var ai=Mr.shared.context,Zr=mn;"width"in ln||(Zr=oi.def(ai,".",zi,"-",In));var Xi=Wn;return"height"in ln||(Xi=oi.def(ai,".",Qi,"-",lr)),[In,lr,Zr,Xi]})}if(Ue in Le){var Hr=Le[Ue],Gr=Oe(Hr,function(Mr,oi){var ai=Mr.invoke(oi,Hr);ft.optional(function(){Mr.assert(oi,ai+"&&typeof "+ai+'==="object"',"invalid "+Ue)});var Zr=Mr.shared.context,Xi=oi.def(ai,".x|0"),$i=oi.def(ai,".y|0"),Go=oi.def('"width" in ',ai,"?",ai,".width|0:","(",Zr,".",zi,"-",Xi,")"),_o=oi.def('"height" in ',ai,"?",ai,".height|0:","(",Zr,".",Qi,"-",$i,")");return ft.optional(function(){Mr.assert(oi,Go+">=0&&"+_o+">=0","invalid "+Ue)}),[Xi,$i,Go,_o]});return Sn&&(Gr.thisDep=Gr.thisDep||Sn.thisDep,Gr.contextDep=Gr.contextDep||Sn.contextDep,Gr.propDep=Gr.propDep||Sn.propDep),Gr}return Sn?new oe(Sn.thisDep,Sn.contextDep,Sn.propDep,function(Mr,oi){var ai=Mr.shared.context;return[0,0,oi.def(ai,".",zi),oi.def(ai,".",Qi)]}):null}var en=Be("viewport");if(en){var sn=en;en=new oe(en.thisDep,en.contextDep,en.propDep,function(Ue,ln){var mn=sn.append(Ue,ln),Wn=Ue.shared.context;return ln.set(Wn,".viewportWidth",mn[2]),ln.set(Wn,".viewportHeight",mn[3]),mn})}return{viewport:en,scissor_box:Be("scissor.box")}}(Ze,he,$t),Me=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le=function(){if($r in Pe){var sn=Pe[$r];uo(sn)?sn=ar.getElements(ar.create(sn,!0)):sn&&(sn=ar.getElements(sn),ft.command(sn,"invalid elements",Sn.commandStr));var Ue=te(function(mn,Wn){if(sn){var An=mn.link(sn);return mn.ELEMENTS=An,An}return mn.ELEMENTS=null,null});return Ue.value=sn,Ue}if($r in le){var ln=le[$r];return Oe(ln,function(mn,Wn){var An=mn.shared,In=An.isBufferArgs,lr=An.elements,Hr=mn.invoke(Wn,ln),Gr=Wn.def("null"),Mr=Wn.def(In,"(",Hr,")"),oi=mn.cond(Mr).then(Gr,"=",lr,".createStream(",Hr,");").else(Gr,"=",lr,".getElements(",Hr,");");return ft.optional(function(){mn.assert(oi.else,"!"+Hr+"||"+Gr,"invalid elements")}),Wn.entry(oi),Wn.exit(mn.cond(Mr).then(lr,".destroyStream(",Gr,");")),mn.ELEMENTS=Gr,Gr})}return null}();function Be(sn,Ue){if(sn in Pe){var ln=0|Pe[sn];return ft.command(!Ue||ln>=0,"invalid "+sn,Sn.commandStr),te(function(Wn,An){return Ue&&(Wn.OFFSET=ln),ln})}if(sn in le){var mn=le[sn];return Oe(mn,function(Wn,An){var In=Wn.invoke(An,mn);return Ue&&(Wn.OFFSET=In,ft.optional(function(){Wn.assert(An,In+">=0","invalid "+sn)})),In})}return Ue&&Le?te(function(Wn,An){return Wn.OFFSET="0",0}):null}var en=Be(gi,!0);return{elements:Le,primitive:function(){if(ci in Pe){var sn=Pe[ci];return ft.commandParameter(sn,Dt,"invalid primitve",Sn.commandStr),te(function(ln,mn){return Dt[sn]})}if(ci in le){var Ue=le[ci];return Oe(Ue,function(ln,mn){var Wn=ln.constants.primTypes,An=ln.invoke(mn,Ue);return ft.optional(function(){ln.assert(mn,An+" in "+Wn,"invalid primitive, must be one of "+Object.keys(Dt))}),mn.def(Wn,"[",An,"]")})}return Le?Kt(Le)?Le.value?te(function(ln,mn){return mn.def(ln.ELEMENTS,".primType")}):te(function(){return 4}):new oe(Le.thisDep,Le.contextDep,Le.propDep,function(ln,mn){var Wn=ln.ELEMENTS;return mn.def(Wn,"?",Wn,".primType:",4)}):null}(),count:function(){if(Qr in Pe){var sn=0|Pe[Qr];return ft.command(typeof sn=="number"&&sn>=0,"invalid vertex count",Sn.commandStr),te(function(){return sn})}if(Qr in le){var Ue=le[Qr];return Oe(Ue,function(Wn,An){var In=Wn.invoke(An,Ue);return ft.optional(function(){Wn.assert(An,"typeof "+In+'==="number"&&'+In+">=0&&"+In+"===("+In+"|0)","invalid vertex count")}),In})}if(Le){if(Kt(Le)){if(Le)return en?new oe(en.thisDep,en.contextDep,en.propDep,function(Wn,An){var In=An.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET);return ft.optional(function(){Wn.assert(An,In+">=0","invalid vertex offset/element buffer too small")}),In}):te(function(Wn,An){return An.def(Wn.ELEMENTS,".vertCount")});var ln=te(function(){return-1});return ft.optional(function(){ln.MISSING=!0}),ln}var mn=new oe(Le.thisDep||en.thisDep,Le.contextDep||en.contextDep,Le.propDep||en.propDep,function(Wn,An){var In=Wn.ELEMENTS;return Wn.OFFSET?An.def(In,"?",In,".vertCount-",Wn.OFFSET,":-1"):An.def(In,"?",In,".vertCount:-1")});return ft.optional(function(){mn.DYNAMIC=!0}),mn}return null}(),instances:Be(Oi,!1),offset:en}}(Ze,$t),ze=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Yi.forEach(function(Be){var en=ve(Be);function sn(Ue,ln){if(Be in Pe){var mn=Ue(Pe[Be]);Le[en]=te(function(){return mn})}else if(Be in le){var Wn=le[Be];Le[en]=Oe(Wn,function(An,In){return ln(An,In,An.invoke(In,Wn))})}}switch(Be){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return sn(function(Ue){return ft.commandType(Ue,"boolean",Be,Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="boolean"',"invalid flag "+Be,Ue.commandStr)}),mn});case"depth.func":return sn(function(Ue){return ft.commandParameter(Ue,Pi,"invalid "+Be,Sn.commandStr),Pi[Ue]},function(Ue,ln,mn){var Wn=Ue.constants.compareFuncs;return ft.optional(function(){Ue.assert(ln,mn+" in "+Wn,"invalid "+Be+", must be one of "+Object.keys(Pi))}),ln.def(Wn,"[",mn,"]")});case"depth.range":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===2&&typeof Ue[0]=="number"&&typeof Ue[1]=="number"&&Ue[0]<=Ue[1],"depth range is 2d array",Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===2&&typeof "+mn+'[0]==="number"&&typeof '+mn+'[1]==="number"&&'+mn+"[0]<="+mn+"[1]","depth range must be a 2d array")}),[ln.def("+",mn,"[0]"),ln.def("+",mn,"[1]")]});case"blend.func":return sn(function(Ue){ft.commandType(Ue,"object","blend.func",Sn.commandStr);var ln="srcRGB"in Ue?Ue.srcRGB:Ue.src,mn="srcAlpha"in Ue?Ue.srcAlpha:Ue.src,Wn="dstRGB"in Ue?Ue.dstRGB:Ue.dst,An="dstAlpha"in Ue?Ue.dstAlpha:Ue.dst;return ft.commandParameter(ln,Wi,en+".srcRGB",Sn.commandStr),ft.commandParameter(mn,Wi,en+".srcAlpha",Sn.commandStr),ft.commandParameter(Wn,Wi,en+".dstRGB",Sn.commandStr),ft.commandParameter(An,Wi,en+".dstAlpha",Sn.commandStr),ft.command(Zi.indexOf(ln+", "+Wn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ln+", "+Wn+")",Sn.commandStr),[Wi[ln],Wi[Wn],Wi[mn],Wi[An]]},function(Ue,ln,mn){var Wn=Ue.constants.blendFuncs;function An(Mr,oi){var ai=ln.def('"',Mr,oi,'" in ',mn,"?",mn,".",Mr,oi,":",mn,".",Mr);return ft.optional(function(){Ue.assert(ln,ai+" in "+Wn,"invalid "+Be+"."+Mr+oi+", must be one of "+Object.keys(Wi))}),ai}ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid blend func, must be an object")});var In=An("src","RGB"),lr=An("dst","RGB");ft.optional(function(){var Mr=Ue.constants.invalidBlendCombinations;Ue.assert(ln,Mr+".indexOf("+In+'+", "+'+lr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=ln.def(Wn,"[",In,"]"),Gr=ln.def(Wn,"[",An("src","Alpha"),"]");return[Hr,ln.def(Wn,"[",lr,"]"),Gr,ln.def(Wn,"[",An("dst","Alpha"),"]")]});case"blend.equation":return sn(function(Ue){return typeof Ue=="string"?(ft.commandParameter(Ue,ri,"invalid "+Be,Sn.commandStr),[ri[Ue],ri[Ue]]):S(Ue)==="object"?(ft.commandParameter(Ue.rgb,ri,Be+".rgb",Sn.commandStr),ft.commandParameter(Ue.alpha,ri,Be+".alpha",Sn.commandStr),[ri[Ue.rgb],ri[Ue.alpha]]):void ft.commandRaise("invalid blend.equation",Sn.commandStr)},function(Ue,ln,mn){var Wn=Ue.constants.blendEquations,An=ln.def(),In=ln.def(),lr=Ue.cond("typeof ",mn,'==="string"');return ft.optional(function(){function Hr(Gr,Mr,oi){Ue.assert(Gr,oi+" in "+Wn,"invalid "+Mr+", must be one of "+Object.keys(ri))}Hr(lr.then,Be,mn),Ue.assert(lr.else,mn+"&&typeof "+mn+'==="object"',"invalid "+Be),Hr(lr.else,Be+".rgb",mn+".rgb"),Hr(lr.else,Be+".alpha",mn+".alpha")}),lr.then(An,"=",In,"=",Wn,"[",mn,"];"),lr.else(An,"=",Wn,"[",mn,".rgb];",In,"=",Wn,"[",mn,".alpha];"),ln(lr),[An,In]});case"blend.color":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===4,"blend.color must be a 4d array",Sn.commandStr),it(4,function(ln){return+Ue[ln]})},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","blend.color must be a 4d array")}),it(4,function(Wn){return ln.def("+",mn,"[",Wn,"]")})});case"stencil.mask":return sn(function(Ue){return ft.commandType(Ue,"number",en,Sn.commandStr),0|Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="number"',"invalid stencil.mask")}),ln.def(mn,"|0")});case"stencil.func":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=Ue.cmp||"keep",mn=Ue.ref||0,Wn="mask"in Ue?Ue.mask:-1;return ft.commandParameter(ln,Pi,Be+".cmp",Sn.commandStr),ft.commandType(mn,"number",Be+".ref",Sn.commandStr),ft.commandType(Wn,"number",Be+".mask",Sn.commandStr),[Pi[ln],mn,Wn]},function(Ue,ln,mn){var Wn=Ue.constants.compareFuncs;return ft.optional(function(){function An(){Ue.assert(ln,Array.prototype.join.call(arguments,""),"invalid stencil.func")}An(mn+"&&typeof ",mn,'==="object"'),An('!("cmp" in ',mn,")||(",mn,".cmp in ",Wn,")")}),[ln.def('"cmp" in ',mn,"?",Wn,"[",mn,".cmp]",":",7680),ln.def(mn,".ref|0"),ln.def('"mask" in ',mn,"?",mn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=Ue.fail||"keep",mn=Ue.zfail||"keep",Wn=Ue.zpass||"keep";return ft.commandParameter(ln,no,Be+".fail",Sn.commandStr),ft.commandParameter(mn,no,Be+".zfail",Sn.commandStr),ft.commandParameter(Wn,no,Be+".zpass",Sn.commandStr),[Be==="stencil.opBack"?1029:1028,no[ln],no[mn],no[Wn]]},function(Ue,ln,mn){var Wn=Ue.constants.stencilOps;function An(In){return ft.optional(function(){Ue.assert(ln,'!("'+In+'" in '+mn+")||("+mn+"."+In+" in "+Wn+")","invalid "+Be+"."+In+", must be one of "+Object.keys(no))}),ln.def('"',In,'" in ',mn,"?",Wn,"[",mn,".",In,"]:",7680)}return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[Be==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=0|Ue.factor,mn=0|Ue.units;return ft.commandType(ln,"number",en+".factor",Sn.commandStr),ft.commandType(mn,"number",en+".units",Sn.commandStr),[ln,mn]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[ln.def(mn,".factor|0"),ln.def(mn,".units|0")]});case"cull.face":return sn(function(Ue){var ln=0;return Ue==="front"?ln=1028:Ue==="back"&&(ln=1029),ft.command(!!ln,en,Sn.commandStr),ln},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+'==="front"||'+mn+'==="back"',"invalid cull.face")}),ln.def(mn,'==="front"?',1028,":",1029)});case"lineWidth":return sn(function(Ue){return ft.command(typeof Ue=="number"&&Ue>=$n.lineWidthDims[0]&&Ue<=$n.lineWidthDims[1],"invalid line width, must be a positive number between "+$n.lineWidthDims[0]+" and "+$n.lineWidthDims[1],Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="number"&&'+mn+">="+$n.lineWidthDims[0]+"&&"+mn+"<="+$n.lineWidthDims[1],"invalid line width")}),mn});case"frontFace":return sn(function(Ue){return ft.commandParameter(Ue,ao,en,Sn.commandStr),ao[Ue]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+'==="cw"||'+mn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ln.def(mn+'==="cw"?2304:2305')});case"colorMask":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===4,"color.mask must be length 4 array",Sn.commandStr),Ue.map(function(ln){return!!ln})},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","invalid color.mask")}),it(4,function(Wn){return"!!"+mn+"["+Wn+"]"})});case"sample.coverage":return sn(function(Ue){ft.command(S(Ue)==="object"&&Ue,en,Sn.commandStr);var ln="value"in Ue?Ue.value:1,mn=!!Ue.invert;return ft.command(typeof ln=="number"&&ln>=0&&ln<=1,"sample.coverage.value must be a number between 0 and 1",Sn.commandStr),[ln,mn]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid sample.coverage")}),[ln.def('"value" in ',mn,"?+",mn,".value:1"),ln.def("!!",mn,".invert")]})}}),Le}(Ze,$t),Ve=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(mn){if(mn in le){var Wn=rn.id(le[mn]);ft.optional(function(){xr.shader(Mo[mn],Wn,ft.guessCommand())});var An=te(function(){return Wn});return An.id=Wn,An}if(mn in Le){var In=Le[mn];return Oe(In,function(lr,Hr){var Gr=lr.invoke(Hr,In),Mr=Hr.def(lr.shared.strings,".id(",Gr,")");return ft.optional(function(){Hr(lr.shared.shader,".shader(",Mo[mn],",",Mr,",",lr.command,");")}),Mr})}return null}var en,sn=Be(fi),Ue=Be(ni),ln=null;return Kt(sn)&&Kt(Ue)?(ln=xr.program(Ue.id,sn.id,null,Pe),en=te(function(mn,Wn){return mn.link(ln)})):en=new oe(sn&&sn.thisDep||Ue&&Ue.thisDep,sn&&sn.contextDep||Ue&&Ue.contextDep,sn&&sn.propDep||Ue&&Ue.propDep,function(mn,Wn){var An,In=mn.shared.shader;An=sn?sn.append(mn,Wn):Wn.def(In,".",fi);var lr=In+".program("+(Ue?Ue.append(mn,Wn):Wn.def(In,".",ni))+","+An;return ft.optional(function(){lr+=","+mn.command}),Wn.def(lr+")")}),{frag:sn,vert:Ue,progVar:en,program:ln}}(Ze,0,de);function ke(dn){var Sn=ce[dn];Sn&&(ze[dn]=Sn)}ke("viewport"),ke(ve("scissor.box"));var tn=Object.keys(ze).length>0,De={framebuffer:he,draw:Me,shader:Ve,state:ze,dirty:tn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(De.profile=function(dn){var Sn,Pe=dn.static,le=dn.dynamic;if(Xr in Pe){var Le=!!Pe[Xr];(Sn=te(function(en,sn){return Le})).enable=Le}else if(Xr in le){var Be=le[Xr];Sn=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}return Sn}(Ze),De.uniforms=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en,sn=Pe[Be];if(typeof sn=="number"||typeof sn=="boolean")en=te(function(){return sn});else if(typeof sn=="function"){var Ue=sn._reglType;Ue==="texture2d"||Ue==="textureCube"?en=te(function(ln){return ln.link(sn)}):Ue==="framebuffer"||Ue==="framebufferCube"?(ft.command(sn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Be+'"',Sn.commandStr),en=te(function(ln){return ln.link(sn.color[0])})):ft.commandRaise('invalid data for uniform "'+Be+'"',Sn.commandStr)}else Ht(sn)?en=te(function(ln){return ln.global.def("[",it(sn.length,function(mn){return ft.command(typeof sn[mn]=="number"||typeof sn[mn]=="boolean","invalid uniform "+Be,ln.commandStr),sn[mn]}),"]")}):ft.commandRaise('invalid or missing data for uniform "'+Be+'"',Sn.commandStr);en.value=sn,Le[Be]=en}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,Ue){return sn.invoke(Ue,en)})}),Le}(R,$t),De.drawVAO=De.scopeVAO=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(bi in Pe){var Le=Pe[bi];return Le!==null&&wr.getVAO(Le)===null&&(Le=wr.createVAO(Le)),te(function(en){return en.link(wr.getVAO(Le))})}if(bi in le){var Be=le[bi];return Oe(Be,function(en,sn){var Ue=en.invoke(sn,Be);return sn.def(en.shared.vao+".getVAO("+Ue+")")})}return null}(Ze),!De.drawVAO&&Ve.program&&!de&&on.angle_instanced_arrays){var cn=!0,fn=Ve.program.attributes.map(function(dn){var Sn=Ce.static[dn];return cn=cn&&!!Sn,Sn});if(cn&&fn.length>0){var nn=wr.getVAO(wr.createVAO(fn));De.drawVAO=new oe(null,null,null,function(dn,Sn){return dn.link(nn)}),De.useVAO=!0}}return de?De.useVAO=!0:De.attributes=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en=Pe[Be],sn=rn.id(Be),Ue=new Dr;if(uo(en))Ue.state=1,Ue.buffer=vr.getBuffer(vr.create(en,34962,!1,!0)),Ue.type=0;else{var ln=vr.getBuffer(en);if(ln)Ue.state=1,Ue.buffer=ln,Ue.type=0;else if(ft.command(S(en)==="object"&&en,"invalid data for attribute "+Be,Sn.commandStr),"constant"in en){var mn=en.constant;Ue.buffer="null",Ue.state=2,typeof mn=="number"?Ue.x=mn:(ft.command(Ht(mn)&&mn.length>0&&mn.length<=4,"invalid constant for attribute "+Be,Sn.commandStr),Nr.forEach(function(Mr,oi){oi<mn.length&&(Ue[Mr]=mn[oi])}))}else{ln=uo(en.buffer)?vr.getBuffer(vr.create(en.buffer,34962,!1,!0)):vr.getBuffer(en.buffer),ft.command(!!ln,'missing buffer for attribute "'+Be+'"',Sn.commandStr);var Wn=0|en.offset;ft.command(Wn>=0,'invalid offset for attribute "'+Be+'"',Sn.commandStr);var An=0|en.stride;ft.command(An>=0&&An<256,'invalid stride for attribute "'+Be+'", must be integer betweeen [0, 255]',Sn.commandStr);var In=0|en.size;ft.command(!("size"in en)||In>0&&In<=4,'invalid size for attribute "'+Be+'", must be 1,2,3,4',Sn.commandStr);var lr=!!en.normalized,Hr=0;"type"in en&&(ft.commandParameter(en.type,$,"invalid type for attribute "+Be,Sn.commandStr),Hr=$[en.type]);var Gr=0|en.divisor;"divisor"in en&&(ft.command(Gr===0||vi,'cannot specify divisor for attribute "'+Be+'", instancing not supported',Sn.commandStr),ft.command(Gr>=0,'invalid divisor for attribute "'+Be+'"',Sn.commandStr)),ft.optional(function(){var Mr=Sn.commandStr,oi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(en).forEach(function(ai){ft.command(oi.indexOf(ai)>=0,'unknown parameter "'+ai+'" for attribute pointer "'+Be+'" (valid parameters are '+oi+")",Mr)})}),Ue.buffer=ln,Ue.state=1,Ue.size=In,Ue.normalized=lr,Ue.type=Hr||ln.dtype,Ue.offset=Wn,Ue.stride=An,Ue.divisor=Gr}}Le[Be]=te(function(Mr,oi){var ai=Mr.attribCache;if(sn in ai)return ai[sn];var Zr={isStream:!1};return Object.keys(Ue).forEach(function(Xi){Zr[Xi]=Ue[Xi]}),Ue.buffer&&(Zr.buffer=Mr.link(Ue.buffer),Zr.type=Zr.type||Zr.buffer+".dtype"),ai[sn]=Zr,Zr})}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,Ue){var ln=sn.invoke(Ue,en),mn=sn.shared,Wn=sn.constants,An=mn.isBufferArgs,In=mn.buffer;ft.optional(function(){sn.assert(Ue,ln+"&&(typeof "+ln+'==="object"||typeof '+ln+'==="function")&&('+An+"("+ln+")||"+In+".getBuffer("+ln+")||"+In+".getBuffer("+ln+".buffer)||"+An+"("+ln+'.buffer)||("constant" in '+ln+"&&(typeof "+ln+'.constant==="number"||'+mn.isArrayLike+"("+ln+".constant))))",'invalid dynamic attribute "'+Be+'"')});var lr={isStream:Ue.def(!1)},Hr=new Dr;Hr.state=1,Object.keys(Hr).forEach(function(ai){lr[ai]=Ue.def(""+Hr[ai])});var Gr=lr.buffer,Mr=lr.type;function oi(ai){Ue(lr[ai],"=",ln,".",ai,"|0;")}return Ue("if(",An,"(",ln,")){",lr.isStream,"=true;",Gr,"=",In,".createStream(",34962,",",ln,");",Mr,"=",Gr,".dtype;","}else{",Gr,"=",In,".getBuffer(",ln,");","if(",Gr,"){",Mr,"=",Gr,".dtype;",'}else if("constant" in ',ln,"){",lr.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',lr[Nr[0]],"=",ln,".constant;",Nr.slice(1).map(function(ai){return lr[ai]}).join("="),"=0;","}else{",Nr.map(function(ai,Zr){return lr[ai]+"="+ln+".constant.length>"+Zr+"?"+ln+".constant["+Zr+"]:0;"}).join(""),"}}else{","if(",An,"(",ln,".buffer)){",Gr,"=",In,".createStream(",34962,",",ln,".buffer);","}else{",Gr,"=",In,".getBuffer(",ln,".buffer);","}",Mr,'="type" in ',ln,"?",Wn.glTypes,"[",ln,".type]:",Gr,".dtype;",lr.normalized,"=!!",ln,".normalized;"),oi("size"),oi("offset"),oi("stride"),oi("divisor"),Ue("}}"),Ue.exit("if(",lr.isStream,"){",In,".destroyStream(",Gr,");","}"),lr})}),Le}(Ce,$t),De.context=function(dn){var Sn=dn.static,Pe=dn.dynamic,le={};return Object.keys(Sn).forEach(function(Le){var Be=Sn[Le];le[Le]=te(function(en,sn){return typeof Be=="number"||typeof Be=="boolean"?""+Be:en.link(Be)})}),Object.keys(Pe).forEach(function(Le){var Be=Pe[Le];le[Le]=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}),le}(yt),De}function se(Ze,Ce,R){var yt=Ze.shared.context,$t=Ze.scope();Object.keys(R).forEach(function(me){Ce.save(yt,"."+me);var Zt=R[me].append(Ze,Ce);Array.isArray(Zt)?$t(yt,".",me,"=[",Zt.join(),"];"):$t(yt,".",me,"=",Zt,";")}),Ce($t)}function Te(Ze,Ce,R,yt){var $t,me=Ze.shared,Zt=me.gl,de=me.framebuffer;ii&&($t=Ce.def(me.extensions,".webgl_draw_buffers"));var he,ce=Ze.constants,Me=ce.drawBuffer,ze=ce.backBuffer;he=R?R.append(Ze,Ce):Ce.def(de,".next"),yt||Ce("if(",he,"!==",de,".cur){"),Ce("if(",he,"){",Zt,".bindFramebuffer(",36160,",",he,".framebuffer);"),ii&&Ce($t,".drawBuffersWEBGL(",Me,"[",he,".colorAttachments.length]);"),Ce("}else{",Zt,".bindFramebuffer(",36160,",null);"),ii&&Ce($t,".drawBuffersWEBGL(",ze,");"),Ce("}",de,".cur=",he,";"),yt||Ce("}")}function Ee(Ze,Ce,R){var yt=Ze.shared,$t=yt.gl,me=Ze.current,Zt=Ze.next,de=yt.current,he=yt.next,ce=Ze.cond(de,".dirty");Yi.forEach(function(Me){var ze,Ve,ke=ve(Me);if(!(ke in R.state))if(ke in Zt){ze=Zt[ke],Ve=me[ke];var tn=it(Si[ke].length,function(cn){return ce.def(ze,"[",cn,"]")});ce(Ze.cond(tn.map(function(cn,fn){return cn+"!=="+Ve+"["+fn+"]"}).join("||")).then($t,".",Di[ke],"(",tn,");",tn.map(function(cn,fn){return Ve+"["+fn+"]="+cn}).join(";"),";"))}else{ze=ce.def(he,".",ke);var De=Ze.cond(ze,"!==",de,".",ke);ce(De),ke in Bi?De(Ze.cond(ze).then($t,".enable(",Bi[ke],");").else($t,".disable(",Bi[ke],");"),de,".",ke,"=",ze,";"):De($t,".",Di[ke],"(",ze,");",de,".",ke,"=",ze,";")}}),Object.keys(R.state).length===0&&ce(de,".dirty=false;"),Ce(ce)}function un(Ze,Ce,R,yt){var $t=Ze.shared,me=Ze.current,Zt=$t.current,de=$t.gl;xo(Object.keys(R)).forEach(function(he){var ce=R[he];if(!yt||yt(ce)){var Me=ce.append(Ze,Ce);if(Bi[he]){var ze=Bi[he];Kt(ce)?Ce(de,Me?".enable(":".disable(",ze,");"):Ce(Ze.cond(Me).then(de,".enable(",ze,");").else(de,".disable(",ze,");")),Ce(Zt,".",he,"=",Me,";")}else if(Ht(Me)){var Ve=me[he];Ce(de,".",Di[he],"(",Me,");",Me.map(function(ke,tn){return Ve+"["+tn+"]="+ke}).join(";"),";")}else Ce(de,".",Di[he],"(",Me,");",Zt,".",he,"=",Me,";")}})}function xn(Ze,Ce){vi&&(Ze.instancing=Ce.def(Ze.shared.extensions,".angle_instanced_arrays"))}function zt(Ze,Ce,R,yt,$t){var me,Zt,de,he=Ze.shared,ce=Ze.stats,Me=he.current,ze=he.timer,Ve=R.profile;function ke(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function tn(dn){dn(me=Ce.def(),"=",ke(),";"),typeof $t=="string"?dn(ce,".count+=",$t,";"):dn(ce,".count++;"),Lr&&(yt?dn(Zt=Ce.def(),"=",ze,".getNumPendingQueries();"):dn(ze,".beginQuery(",ce,");"))}function De(dn){dn(ce,".cpuTime+=",ke(),"-",me,";"),Lr&&(yt?dn(ze,".pushScopeStats(",Zt,",",ze,".getNumPendingQueries(),",ce,");"):dn(ze,".endQuery();"))}function cn(dn){var Sn=Ce.def(Me,".profile");Ce(Me,".profile=",dn,";"),Ce.exit(Me,".profile=",Sn,";")}if(Ve){if(Kt(Ve))return void(Ve.enable?(tn(Ce),De(Ce.exit),cn("true")):cn("false"));cn(de=Ve.append(Ze,Ce))}else de=Ce.def(Me,".profile");var fn=Ze.block();tn(fn),Ce("if(",de,"){",fn,"}");var nn=Ze.block();De(nn),Ce.exit("if(",de,"){",nn,"}")}function Yt(Ze,Ce,R,yt,$t){var me=Ze.shared;yt.forEach(function(Zt){var de,he=Zt.name,ce=R.attributes[he];if(ce){if(!$t(ce))return;de=ce.append(Ze,Ce)}else{if(!$t(Qe))return;var Me=Ze.scopeAttrib(he);ft.optional(function(){Ze.assert(Ce,Me+".state","missing attribute "+he)}),de={},Object.keys(new Dr).forEach(function(ze){de[ze]=Ce.def(Me,".",ze)})}(function(ze,Ve,ke){var tn=me.gl,De=Ce.def(ze,".location"),cn=Ce.def(me.attributes,"[",De,"]"),fn=ke.state,nn=ke.buffer,dn=[ke.x,ke.y,ke.z,ke.w],Sn=["buffer","normalized","offset","stride"];function Pe(){Ce("if(!",cn,".buffer){",tn,".enableVertexAttribArray(",De,");}");var Le,Be=ke.type;if(Le=ke.size?Ce.def(ke.size,"||",Ve):Ve,Ce("if(",cn,".type!==",Be,"||",cn,".size!==",Le,"||",Sn.map(function(sn){return cn+"."+sn+"!=="+ke[sn]}).join("||"),"){",tn,".bindBuffer(",34962,",",nn,".buffer);",tn,".vertexAttribPointer(",[De,Le,Be,ke.normalized,ke.stride,ke.offset],");",cn,".type=",Be,";",cn,".size=",Le,";",Sn.map(function(sn){return cn+"."+sn+"="+ke[sn]+";"}).join(""),"}"),vi){var en=ke.divisor;Ce("if(",cn,".divisor!==",en,"){",Ze.instancing,".vertexAttribDivisorANGLE(",[De,en],");",cn,".divisor=",en,";}")}}function le(){Ce("if(",cn,".buffer){",tn,".disableVertexAttribArray(",De,");",cn,".buffer=null;","}if(",Nr.map(function(Le,Be){return cn+"."+Le+"!=="+dn[Be]}).join("||"),"){",tn,".vertexAttrib4f(",De,",",dn,");",Nr.map(function(Le,Be){return cn+"."+Le+"="+dn[Be]+";"}).join(""),"}")}fn===1?Pe():fn===2?le():(Ce("if(",fn,"===",1,"){"),Pe(),Ce("}else{"),le(),Ce("}"))})(Ze.link(Zt),function(ze){switch(ze){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Zt.info.type),de)})}function Se(Ze,Ce,R,yt,$t){for(var me,Zt=Ze.shared,de=Zt.gl,he=0;he<yt.length;++he){var ce,Me=yt[he],ze=Me.name,Ve=Me.info.type,ke=R.uniforms[ze],tn=Ze.link(Me)+".location";if(ke){if(!$t(ke))continue;if(Kt(ke)){var De=ke.value;if(ft.command(De!=null,'missing uniform "'+ze+'"',Ze.commandStr),Ve===35678||Ve===35680){ft.command(typeof De=="function"&&(Ve===35678&&(De._reglType==="texture2d"||De._reglType==="framebuffer")||Ve===35680&&(De._reglType==="textureCube"||De._reglType==="framebufferCube")),"invalid texture for uniform "+ze,Ze.commandStr);var cn=Ze.link(De._texture||De.color[0]._texture);Ce(de,".uniform1i(",tn,",",cn+".bind());"),Ce.exit(cn,".unbind();")}else if(Ve===35674||Ve===35675||Ve===35676){ft.optional(function(){ft.command(Ht(De),"invalid matrix for uniform "+ze,Ze.commandStr),ft.command(Ve===35674&&De.length===4||Ve===35675&&De.length===9||Ve===35676&&De.length===16,"invalid length for matrix uniform "+ze,Ze.commandStr)});var fn=Ze.global.def("new Float32Array(["+Array.prototype.slice.call(De)+"])"),nn=2;Ve===35675?nn=3:Ve===35676&&(nn=4),Ce(de,".uniformMatrix",nn,"fv(",tn,",false,",fn,");")}else{switch(Ve){case 5126:ft.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1f";break;case 35664:ft.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2f";break;case 35665:ft.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3f";break;case 35666:ft.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4f";break;case 35670:ft.commandType(De,"boolean","uniform "+ze,Ze.commandStr),me="1i";break;case 5124:ft.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1i";break;case 35671:case 35667:ft.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2i";break;case 35672:case 35668:ft.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3i";break;case 35673:case 35669:ft.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4i"}Ce(de,".uniform",me,"(",tn,",",Ht(De)?Array.prototype.slice.call(De):De,");")}continue}ce=ke.append(Ze,Ce)}else{if(!$t(Qe))continue;ce=Ce.def(Zt.uniforms,"[",rn.id(ze),"]")}Ve===35678?(ft(!Array.isArray(ce),"must specify a scalar prop for textures"),Ce("if(",ce,"&&",ce,'._reglType==="framebuffer"){',ce,"=",ce,".color[0];","}")):Ve===35680&&(ft(!Array.isArray(ce),"must specify a scalar prop for cube maps"),Ce("if(",ce,"&&",ce,'._reglType==="framebufferCube"){',ce,"=",ce,".color[0];","}")),ft.optional(function(){function Le(Ue,ln){Ze.assert(Ce,Ue,'bad data or missing for uniform "'+ze+'".  '+ln)}function Be(Ue){ft(!Array.isArray(ce),"must not specify an array type for uniform"),Le("typeof "+ce+'==="'+Ue+'"',"invalid type, expected "+Ue)}function en(Ue,ln){Array.isArray(ce)?ft(ce.length===Ue,"must have length "+Ue):Le(Zt.isArrayLike+"("+ce+")&&"+ce+".length==="+Ue,"invalid vector, should have length "+Ue,Ze.commandStr)}function sn(Ue){ft(!Array.isArray(ce),"must not specify a value type"),Le("typeof "+ce+'==="function"&&'+ce+'._reglType==="texture'+(Ue===3553?"2d":"Cube")+'"',"invalid texture type",Ze.commandStr)}switch(Ve){case 5124:Be("number");break;case 35667:en(2);break;case 35668:en(3);break;case 35669:en(4);break;case 5126:Be("number");break;case 35664:en(2);break;case 35665:en(3);break;case 35666:en(4);break;case 35670:Be("boolean");break;case 35671:en(2);break;case 35672:en(3);break;case 35673:case 35674:en(4);break;case 35675:en(9);break;case 35676:en(16);break;case 35678:sn(3553);break;case 35680:sn(34067)}});var dn=1;switch(Ve){case 35678:case 35680:var Sn=Ce.def(ce,"._texture");Ce(de,".uniform1i(",tn,",",Sn,".bind());"),Ce.exit(Sn,".unbind();");continue;case 5124:case 35670:me="1i";break;case 35667:case 35671:me="2i",dn=2;break;case 35668:case 35672:me="3i",dn=3;break;case 35669:case 35673:me="4i",dn=4;break;case 5126:me="1f";break;case 35664:me="2f",dn=2;break;case 35665:me="3f",dn=3;break;case 35666:me="4f",dn=4;break;case 35674:me="Matrix2fv";break;case 35675:me="Matrix3fv";break;case 35676:me="Matrix4fv"}if(Ce(de,".uniform",me,"(",tn,","),me.charAt(0)==="M"){var Pe=Math.pow(Ve-35674+2,2),le=Ze.global.def("new Float32Array(",Pe,")");Array.isArray(ce)?Ce("false,(",it(Pe,function(Le){return le+"["+Le+"]="+ce[Le]}),",",le,")"):Ce("false,(Array.isArray(",ce,")||",ce," instanceof Float32Array)?",ce,":(",it(Pe,function(Le){return le+"["+Le+"]="+ce+"["+Le+"]"}),",",le,")")}else dn>1?Ce(it(dn,function(Le){return Array.isArray(ce)?ce[Le]:ce+"["+Le+"]"})):(ft(!Array.isArray(ce),"uniform value must not be an array"),Ce(ce));Ce(");")}}function Wt(Ze,Ce,R,yt){var $t=Ze.shared,me=$t.gl,Zt=$t.draw,de=yt.draw,he=function(){var dn,Sn=de.elements,Pe=Ce;return Sn?((Sn.contextDep&&yt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe)):dn=Pe.def(Zt,".",$r),dn&&Pe("if("+dn+")"+me+".bindBuffer(34963,"+dn+".buffer.buffer);"),dn}();function ce(dn){var Sn=de[dn];return Sn?Sn.contextDep&&yt.contextDynamic||Sn.propDep?Sn.append(Ze,R):Sn.append(Ze,Ce):Ce.def(Zt,".",dn)}var Me,ze,Ve=ce(ci),ke=ce(gi),tn=function(){var dn,Sn=de.count,Pe=Ce;return Sn?((Sn.contextDep&&yt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe),ft.optional(function(){Sn.MISSING&&Ze.assert(Ce,"false","missing vertex count"),Sn.DYNAMIC&&Ze.assert(Pe,dn+">=0","missing vertex count")})):(dn=Pe.def(Zt,".",Qr),ft.optional(function(){Ze.assert(Pe,dn+">=0","missing vertex count")})),dn}();if(typeof tn=="number"){if(tn===0)return}else R("if(",tn,"){"),R.exit("}");vi&&(Me=ce(Oi),ze=Ze.instancing);var De=he+".type",cn=de.elements&&Kt(de.elements);function fn(){function dn(){R(ze,".drawElementsInstancedANGLE(",[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)",Me],");")}function Sn(){R(ze,".drawArraysInstancedANGLE(",[Ve,ke,tn,Me],");")}he?cn?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}function nn(){function dn(){R(me+".drawElements("+[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)"]+");")}function Sn(){R(me+".drawArrays("+[Ve,ke,tn]+");")}he?cn?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}vi&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(R("if(",Me,">0){"),fn(),R("}else if(",Me,"<0){"),nn(),R("}")):fn():nn()}function ue(Ze,Ce,R,yt,$t){var me=Jt(),Zt=me.proc("body",$t);return ft.optional(function(){me.commandStr=Ce.commandStr,me.command=me.link(Ce.commandStr)}),vi&&(me.instancing=Zt.def(me.shared.extensions,".angle_instanced_arrays")),Ze(me,Zt,R,yt),me.compile().body}function vn(Ze,Ce,R,yt){xn(Ze,Ce),R.useVAO?R.drawVAO?Ce(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,Ce),");"):Ce(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Ce(Ze.shared.vao,".setVAO(null);"),Yt(Ze,Ce,R,yt.attributes,function(){return!0})),Se(Ze,Ce,R,yt.uniforms,function(){return!0}),Wt(Ze,Ce,Ce,R)}function Dn(Ze,Ce,R,yt){function $t(){return!0}Ze.batchId="a1",xn(Ze,Ce),Yt(Ze,Ce,R,yt.attributes,$t),Se(Ze,Ce,R,yt.uniforms,$t),Wt(Ze,Ce,Ce,R)}function zn(Ze,Ce,R,yt){xn(Ze,Ce);var $t=R.contextDep,me=Ce.def(),Zt=Ce.def();Ze.shared.props=Zt,Ze.batchId=me;var de=Ze.scope(),he=Ze.scope();function ce(De){return De.contextDep&&$t||De.propDep}function Me(De){return!ce(De)}if(Ce(de.entry,"for(",me,"=0;",me,"<","a1",";++",me,"){",Zt,"=","a0","[",me,"];",he,"}",de.exit),R.needsContext&&se(Ze,he,R.context),R.needsFramebuffer&&Te(Ze,he,R.framebuffer),un(Ze,he,R.state,ce),R.profile&&ce(R.profile)&&zt(Ze,he,R,!1,!0),yt)R.useVAO?R.drawVAO?ce(R.drawVAO)?he(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,he),");"):de(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,de),");"):de(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(de(Ze.shared.vao,".setVAO(null);"),Yt(Ze,de,R,yt.attributes,Me),Yt(Ze,he,R,yt.attributes,ce)),Se(Ze,de,R,yt.uniforms,Me),Se(Ze,he,R,yt.uniforms,ce),Wt(Ze,de,he,R);else{var ze=Ze.global.def("{}"),Ve=R.shader.progVar.append(Ze,he),ke=he.def(Ve,".id"),tn=he.def(ze,"[",ke,"]");he(Ze.shared.gl,".useProgram(",Ve,".program);","if(!",tn,"){",tn,"=",ze,"[",ke,"]=",Ze.link(function(De){return ue(Dn,Ze,R,De,2)}),"(",Ve,");}",tn,".call(this,a0[",me,"],",me,");")}}function Gn(Ze,Ce,R){var yt=Ce.static[R];if(yt&&function(Me){if(S(Me)==="object"&&!Ht(Me)){for(var ze=Object.keys(Me),Ve=0;Ve<ze.length;++Ve)if(ct.isDynamic(Me[ze[Ve]]))return!0;return!1}}(yt)){var $t=Ze.global,me=Object.keys(yt),Zt=!1,de=!1,he=!1,ce=Ze.global.def("{}");me.forEach(function(Me){var ze=yt[Me];if(ct.isDynamic(ze)){typeof ze=="function"&&(ze=yt[Me]=ct.unbox(ze));var Ve=Oe(ze,null);Zt=Zt||Ve.thisDep,he=he||Ve.propDep,de=de||Ve.contextDep}else{switch($t(ce,".",Me,"="),S(ze)){case"number":$t(ze);break;case"string":$t('"',ze,'"');break;case"object":Array.isArray(ze)&&$t("[",ze.join(),"]");break;default:$t(Ze.link(ze))}$t(";")}}),Ce.dynamic[R]=new ct.DynamicVariable(4,{thisDep:Zt,contextDep:de,propDep:he,ref:ce,append:function(ze,Ve){me.forEach(function(ke){var tn=yt[ke];if(ct.isDynamic(tn)){var De=ze.invoke(Ve,tn);Ve(ce,".",ke,"=",De,";")}})}}),delete Ce.static[R]}}return{next:Ui,current:Si,procs:function(){var Ze=Jt(),Ce=Ze.proc("poll"),R=Ze.proc("refresh"),yt=Ze.block();Ce(yt),R(yt);var $t,me=Ze.shared,Zt=me.gl,de=me.next,he=me.current;yt(he,".dirty=false;"),Te(Ze,Ce),Te(Ze,R,null,!0),vi&&($t=Ze.link(vi)),on.oes_vertex_array_object&&R(Ze.link(on.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ce=0;ce<$n.maxAttributes;++ce){var Me=R.def(me.attributes,"[",ce,"]"),ze=Ze.cond(Me,".buffer");ze.then(Zt,".enableVertexAttribArray(",ce,");",Zt,".bindBuffer(",34962,",",Me,".buffer.buffer);",Zt,".vertexAttribPointer(",ce,",",Me,".size,",Me,".type,",Me,".normalized,",Me,".stride,",Me,".offset);").else(Zt,".disableVertexAttribArray(",ce,");",Zt,".vertexAttrib4f(",ce,",",Me,".x,",Me,".y,",Me,".z,",Me,".w);",Me,".buffer=null;"),R(ze),vi&&R($t,".vertexAttribDivisorANGLE(",ce,",",Me,".divisor);")}return R(Ze.shared.vao,".currentVAO=null;",Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"),Object.keys(Bi).forEach(function(Ve){var ke=Bi[Ve],tn=yt.def(de,".",Ve),De=Ze.block();De("if(",tn,"){",Zt,".enable(",ke,")}else{",Zt,".disable(",ke,")}",he,".",Ve,"=",tn,";"),R(De),Ce("if(",tn,"!==",he,".",Ve,"){",De,"}")}),Object.keys(Di).forEach(function(Ve){var ke,tn,De=Di[Ve],cn=Si[Ve],fn=Ze.block();if(fn(Zt,".",De,"("),Ht(cn)){var nn=cn.length;ke=Ze.global.def(de,".",Ve),tn=Ze.global.def(he,".",Ve),fn(it(nn,function(dn){return ke+"["+dn+"]"}),");",it(nn,function(dn){return tn+"["+dn+"]="+ke+"["+dn+"];"}).join("")),Ce("if(",it(nn,function(dn){return ke+"["+dn+"]!=="+tn+"["+dn+"]"}).join("||"),"){",fn,"}")}else ke=yt.def(de,".",Ve),tn=yt.def(he,".",Ve),fn(ke,");",he,".",Ve,"=",ke,";"),Ce("if(",ke,"!==",tn,"){",fn,"}");R(fn)}),Ze.compile()}(),compile:function(Ce,R,yt,$t,me){var Zt=Jt();Zt.stats=Zt.link(me),Object.keys(R.static).forEach(function(he){Gn(Zt,R,he)}),io.forEach(function(he){Gn(Zt,Ce,he)});var de=ie(Ce,R,yt,$t,Zt);return function(he,ce){var Me=he.proc("draw",1);xn(he,Me),se(he,Me,ce.context),Te(he,Me,ce.framebuffer),Ee(he,Me,ce),un(he,Me,ce.state),zt(he,Me,ce,!1,!0);var ze=ce.shader.progVar.append(he,Me);if(Me(he.shared.gl,".useProgram(",ze,".program);"),ce.shader.program)vn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var Ve=he.global.def("{}"),ke=Me.def(ze,".id"),tn=Me.def(Ve,"[",ke,"]");Me(he.cond(tn).then(tn,".call(this,a0);").else(tn,"=",Ve,"[",ke,"]=",he.link(function(De){return ue(vn,he,ce,De,1)}),"(",ze,");",tn,".call(this,a0);"))}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),function(he,ce){var Me=he.proc("scope",3);he.batchId="a2";var ze=he.shared,Ve=ze.current;function ke(tn){var De=ce.shader[tn];De&&Me.set(ze.shader,"."+tn,De.append(he,Me))}se(he,Me,ce.context),ce.framebuffer&&ce.framebuffer.append(he,Me),xo(Object.keys(ce.state)).forEach(function(tn){var De=ce.state[tn].append(he,Me);Ht(De)?De.forEach(function(cn,fn){Me.set(he.next[tn],"["+fn+"]",cn)}):Me.set(ze.next,"."+tn,De)}),zt(he,Me,ce,!0,!0),[$r,gi,Qr,Oi,ci].forEach(function(tn){var De=ce.draw[tn];De&&Me.set(ze.draw,"."+tn,""+De.append(he,Me))}),Object.keys(ce.uniforms).forEach(function(tn){var De=ce.uniforms[tn].append(he,Me);Array.isArray(De)&&(De="["+De.join()+"]"),Me.set(ze.uniforms,"["+rn.id(tn)+"]",De)}),Object.keys(ce.attributes).forEach(function(tn){var De=ce.attributes[tn].append(he,Me),cn=he.scopeAttrib(tn);Object.keys(new Dr).forEach(function(fn){Me.set(cn,"."+fn,De[fn])})}),ce.scopeVAO&&Me.set(ze.vao,".targetVAO",ce.scopeVAO.append(he,Me)),ke(ni),ke(fi),Object.keys(ce.state).length>0&&(Me(Ve,".dirty=true;"),Me.exit(Ve,".dirty=true;")),Me("a1(",he.shared.context,",a0,",he.batchId,");")}(Zt,de),function(he,ce){var Me=he.proc("batch",2);he.batchId="0",xn(he,Me);var ze=!1,Ve=!0;Object.keys(ce.context).forEach(function(Pe){ze=ze||ce.context[Pe].propDep}),ze||(se(he,Me,ce.context),Ve=!1);var ke=ce.framebuffer,tn=!1;function De(Pe){return Pe.contextDep&&ze||Pe.propDep}ke?(ke.propDep?ze=tn=!0:ke.contextDep&&ze&&(tn=!0),tn||Te(he,Me,ke)):Te(he,Me,null),ce.state.viewport&&ce.state.viewport.propDep&&(ze=!0),Ee(he,Me,ce),un(he,Me,ce.state,function(Pe){return!De(Pe)}),ce.profile&&De(ce.profile)||zt(he,Me,ce,!1,"a1"),ce.contextDep=ze,ce.needsContext=Ve,ce.needsFramebuffer=tn;var cn=ce.shader.progVar;if(cn.contextDep&&ze||cn.propDep)zn(he,Me,ce,null);else{var fn=cn.append(he,Me);if(Me(he.shared.gl,".useProgram(",fn,".program);"),ce.shader.program)zn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var nn=he.global.def("{}"),dn=Me.def(fn,".id"),Sn=Me.def(nn,"[",dn,"]");Me(he.cond(Sn).then(Sn,".call(this,a0,a1);").else(Sn,"=",nn,"[",dn,"]=",he.link(function(Pe){return ue(zn,he,ce,Pe,2)}),"(",fn,");",Sn,".call(this,a0,a1);"))}}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),I(Zt.compile(),{destroy:function(){de.shader.program.destroy()}})}}}var Vn=function(rn,on){if(!on.ext_disjoint_timer_query)return null;var $n=[];function vr(Lr){$n.push(Lr)}var ar=[];function rr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fr=[];function Ar(Lr){Fr.push(Lr)}var wr=[];function xr(Lr,Pr,Dr){var ri=Fr.pop()||new rr;ri.startQueryIndex=Lr,ri.endQueryIndex=Pr,ri.sum=0,ri.stats=Dr,wr.push(ri)}var Er=[],Ir=[];return{beginQuery:function(Pr){var Dr=$n.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Dr),ar.push(Dr),xr(ar.length-1,ar.length,Pr)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xr,update:function(){var Pr,Dr,ri=ar.length;if(ri!==0){Ir.length=Math.max(Ir.length,ri+1),Er.length=Math.max(Er.length,ri+1),Er[0]=0,Ir[0]=0;var vi=0;for(Pr=0,Dr=0;Dr<ar.length;++Dr){var ii=ar[Dr];on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34919)?(vi+=on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34918),vr(ii)):ar[Pr++]=ii,Er[Dr+1]=vi,Ir[Dr+1]=Pr}for(ar.length=Pr,Pr=0,Dr=0;Dr<wr.length;++Dr){var Si=wr[Dr],Ui=Si.startQueryIndex,Yi=Si.endQueryIndex;Si.sum+=Er[Yi]-Er[Ui];var Bi=Ir[Ui],Di=Ir[Yi];Di===Bi?(Si.stats.gpuTime+=Si.sum/1e6,Ar(Si)):(Si.startQueryIndex=Bi,Si.endQueryIndex=Di,wr[Pr++]=Si)}wr.length=Pr}},getNumPendingQueries:function(){return ar.length},clear:function(){$n.push.apply($n,ar);for(var Pr=0;Pr<$n.length;Pr++)on.ext_disjoint_timer_query.deleteQueryEXT($n[Pr]);ar.length=0,$n.length=0},restore:function(){ar.length=0,$n.length=0}}};function Xn($e,rn){for(var on=0;on<$e.length;++on)if($e[on]===rn)return on;return-1}return function($e){var rn=lt($e);if(!rn)return null;var on=rn.gl,$n=on.getContextAttributes(),vr=on.isContextLost(),ar=function(Ce,R){var yt={};function $t(de){ft.type(de,"string","extension name must be string");var he,ce=de.toLowerCase();try{he=yt[ce]=Ce.getExtension(ce)}catch(Me){}return!!he}for(var me=0;me<R.extensions.length;++me){var Zt=R.extensions[me];if(!$t(Zt))return R.onDestroy(),R.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return R.optionalExtensions.forEach($t),{extensions:yt,restore:function(){Object.keys(yt).forEach(function(he){if(yt[he]&&!$t(he))throw new Error("(regl): error restoring extension "+he)})}}}(on,rn);if(!ar)return null;var rr,Fr,Ar=(rr={"":0},Fr=[""],{id:function(R){var yt=rr[R];return yt||(yt=rr[R]=Fr.length,Fr.push(R),yt)},str:function(R){return Fr[R]}}),wr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xr=ar.extensions,Er=Vn(0,xr),Ir=pt(),Lr=on.drawingBufferWidth,Pr=on.drawingBufferHeight,Dr={tick:0,time:0,viewportWidth:Lr,viewportHeight:Pr,framebufferWidth:Lr,framebufferHeight:Pr,drawingBufferWidth:Lr,drawingBufferHeight:Pr,pixelRatio:rn.pixelRatio},ri=function(Ce,R){var yt=1;R.ext_texture_filter_anisotropic&&(yt=Ce.getParameter(34047));var $t=1,me=1;R.webgl_draw_buffers&&($t=Ce.getParameter(34852),me=Ce.getParameter(36063));var Zt=!!R.oes_texture_float;if(Zt){var de=Ce.createTexture();Ce.bindTexture(3553,de),Ce.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var he=Ce.createFramebuffer();if(Ce.bindFramebuffer(36160,he),Ce.framebufferTexture2D(36160,36064,3553,de,0),Ce.bindTexture(3553,null),Ce.checkFramebufferStatus(36160)!==36053)Zt=!1;else{Ce.viewport(0,0,1,1),Ce.clearColor(1,0,0,1),Ce.clear(16384);var ce=H.allocType(5126,4);Ce.readPixels(0,0,1,1,6408,5126,ce),Ce.getError()?Zt=!1:(Ce.deleteFramebuffer(he),Ce.deleteTexture(de),Zt=ce[0]===1),H.freeType(ce)}}var Me=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var ze=Ce.createTexture(),Ve=H.allocType(5121,36);Ce.activeTexture(33984),Ce.bindTexture(34067,ze),Ce.texImage2D(34069,0,6408,3,3,0,6408,5121,Ve),H.freeType(Ve),Ce.bindTexture(34067,null),Ce.deleteTexture(ze),Me=!Ce.getError()}return{colorBits:[Ce.getParameter(3410),Ce.getParameter(3411),Ce.getParameter(3412),Ce.getParameter(3413)],depthBits:Ce.getParameter(3414),stencilBits:Ce.getParameter(3415),subpixelBits:Ce.getParameter(3408),extensions:Object.keys(R).filter(function(ke){return!!R[ke]}),maxAnisotropic:yt,maxDrawbuffers:$t,maxColorAttachments:me,pointSizeDims:Ce.getParameter(33901),lineWidthDims:Ce.getParameter(33902),maxViewportDims:Ce.getParameter(3386),maxCombinedTextureUnits:Ce.getParameter(35661),maxCubeMapSize:Ce.getParameter(34076),maxRenderbufferSize:Ce.getParameter(34024),maxTextureUnits:Ce.getParameter(34930),maxTextureSize:Ce.getParameter(3379),maxAttributes:Ce.getParameter(34921),maxVertexUniforms:Ce.getParameter(36347),maxVertexTextureUnits:Ce.getParameter(35660),maxVaryingVectors:Ce.getParameter(36348),maxFragmentUniforms:Ce.getParameter(36349),glsl:Ce.getParameter(35724),renderer:Ce.getParameter(7937),vendor:Ce.getParameter(7936),version:Ce.getParameter(7938),readFloat:Zt,npotTextureCube:Me}}(on,xr),vi=function(Ce,R,yt,$t){var me=0,Zt={};function de(Ve){this.id=me++,this.buffer=Ce.createBuffer(),this.type=Ve,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,yt.profile&&(this.stats={size:0})}de.prototype.bind=function(){Ce.bindBuffer(this.type,this.buffer)},de.prototype.destroy=function(){ze(this)};var he=[];function ce(Ve,ke,tn){Ve.byteLength=ke.byteLength,Ce.bufferData(Ve.type,ke,tn)}function Me(Ve,ke,tn,De,cn,fn){var nn,dn;if(Ve.usage=tn,Array.isArray(ke)){if(Ve.dtype=De||5126,ke.length>0)if(Array.isArray(ke[0])){nn=At(ke);for(var Sn=1,Pe=1;Pe<nn.length;++Pe)Sn*=nn[Pe];Ve.dimension=Sn,ce(Ve,dn=ot(ke,nn,Ve.dtype),tn),fn?Ve.persistentData=dn:H.freeType(dn)}else if(typeof ke[0]=="number"){Ve.dimension=cn;var le=H.allocType(Ve.dtype,ke.length);bt(le,ke),ce(Ve,le,tn),fn?Ve.persistentData=le:H.freeType(le)}else M(ke[0])?(Ve.dimension=ke[0].length,Ve.dtype=De||mt(ke[0])||5126,ce(Ve,dn=ot(ke,[ke.length,ke[0].length],Ve.dtype),tn),fn?Ve.persistentData=dn:H.freeType(dn)):ft.raise("invalid buffer data")}else if(M(ke))Ve.dtype=De||mt(ke),Ve.dimension=cn,ce(Ve,ke,tn),fn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(k(ke)){nn=ke.shape;var Le=ke.stride,Be=ke.offset,en=0,sn=0,Ue=0,ln=0;nn.length===1?(en=nn[0],sn=1,Ue=Le[0],ln=0):nn.length===2?(en=nn[0],sn=nn[1],Ue=Le[0],ln=Le[1]):ft.raise("invalid shape"),Ve.dtype=De||mt(ke.data)||5126,Ve.dimension=sn;var mn=H.allocType(Ve.dtype,en*sn);jt(mn,ke.data,en,sn,Ue,ln,Be),ce(Ve,mn,tn),fn?Ve.persistentData=mn:H.freeType(mn)}else ke instanceof ArrayBuffer?(Ve.dtype=5121,Ve.dimension=cn,ce(Ve,ke,tn),fn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke)))):ft.raise("invalid buffer data")}function ze(Ve){R.bufferCount--,$t(Ve);var ke=Ve.buffer;ft(ke,"buffer must not be deleted already"),Ce.deleteBuffer(ke),Ve.buffer=null,delete Zt[Ve.id]}return yt.profile&&(R.getTotalBufferSize=function(){var Ve=0;return Object.keys(Zt).forEach(function(ke){Ve+=Zt[ke].stats.size}),Ve}),{create:function(ke,tn,De,cn){R.bufferCount++;var fn=new de(tn);function nn(Sn){var Pe=35044,le=null,Le=0,Be=0,en=1;return Array.isArray(Sn)||M(Sn)||k(Sn)||Sn instanceof ArrayBuffer?le=Sn:typeof Sn=="number"?Le=0|Sn:Sn&&(ft.type(Sn,"object","buffer arguments must be an object, a number or an array"),"data"in Sn&&(ft(le===null||Array.isArray(le)||M(le)||k(le),"invalid data for buffer"),le=Sn.data),"usage"in Sn&&(ft.parameter(Sn.usage,rt,"invalid buffer usage"),Pe=rt[Sn.usage]),"type"in Sn&&(ft.parameter(Sn.type,$,"invalid buffer type"),Be=$[Sn.type]),"dimension"in Sn&&(ft.type(Sn.dimension,"number","invalid dimension"),en=0|Sn.dimension),"length"in Sn&&(ft.nni(Le,"buffer length must be a nonnegative integer"),Le=0|Sn.length)),fn.bind(),le?Me(fn,le,Pe,Be,en,cn):(Le&&Ce.bufferData(fn.type,Le,Pe),fn.dtype=Be||5121,fn.usage=Pe,fn.dimension=en,fn.byteLength=Le),yt.profile&&(fn.stats.size=fn.byteLength*gt[fn.dtype]),nn}function dn(Sn,Pe){ft(Pe+Sn.byteLength<=fn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Sn.byteLength+" starting from offset "+Pe+" to a buffer of size "+fn.byteLength),Ce.bufferSubData(fn.type,Pe,Sn)}return Zt[fn.id]=fn,De||nn(ke),nn._reglType="buffer",nn._buffer=fn,nn.subdata=function(Sn,Pe){var le,Le=0|(Pe||0);if(fn.bind(),M(Sn)||Sn instanceof ArrayBuffer)dn(Sn,Le);else if(Array.isArray(Sn)){if(Sn.length>0)if(typeof Sn[0]=="number"){var Be=H.allocType(fn.dtype,Sn.length);bt(Be,Sn),dn(Be,Le),H.freeType(Be)}else if(Array.isArray(Sn[0])||M(Sn[0])){le=At(Sn);var en=ot(Sn,le,fn.dtype);dn(en,Le),H.freeType(en)}else ft.raise("invalid buffer data")}else if(k(Sn)){le=Sn.shape;var sn=Sn.stride,Ue=0,ln=0,mn=0,Wn=0;le.length===1?(Ue=le[0],ln=1,mn=sn[0],Wn=0):le.length===2?(Ue=le[0],ln=le[1],mn=sn[0],Wn=sn[1]):ft.raise("invalid shape");var An=Array.isArray(Sn.data)?fn.dtype:mt(Sn.data),In=H.allocType(An,Ue*ln);jt(In,Sn.data,Ue,ln,mn,Wn,Sn.offset),dn(In,Le),H.freeType(In)}else ft.raise("invalid data for buffer subdata");return nn},yt.profile&&(nn.stats=fn.stats),nn.destroy=function(){ze(fn)},nn},createStream:function(ke,tn){var De=he.pop();return De||(De=new de(ke)),De.bind(),Me(De,tn,35040,0,1,!1),De},destroyStream:function(ke){he.push(ke)},clear:function(){h(Zt).forEach(ze),he.forEach(ze)},getBuffer:function(ke){return ke&&ke._buffer instanceof de?ke._buffer:null},restore:function(){h(Zt).forEach(function(ke){ke.buffer=Ce.createBuffer(),Ce.bindBuffer(ke.type,ke.buffer),Ce.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:Me}}(on,wr,rn,function(Ce){return ii.destroyBuffer(Ce)}),ii=function(Ce,R,yt,$t,me){for(var Zt=yt.maxAttributes,de=new Array(Zt),he=0;he<Zt;++he)de[he]=new Ji;var ce=0,Me={},ze={Record:Ji,scope:{},state:de,currentVAO:null,targetVAO:null,restore:Ve()?function(){Ve()&&h(Me).forEach(function(De){De.refresh()})}:function(){},createVAO:function(cn){var fn=new tn;function nn(dn){ft(Array.isArray(dn),"arguments to vertex array constructor must be an array"),ft(dn.length<Zt,"too many attributes"),ft(dn.length>0,"must specify at least one attribute");var Sn={},Pe=fn.attributes;Pe.length=dn.length;for(var le=0;le<dn.length;++le){var Le,Be=dn[le],en=Pe[le]=new Ji,sn=Be.data||Be;Array.isArray(sn)||M(sn)||k(sn)?(fn.buffers[le]&&(Le=fn.buffers[le],M(sn)&&Le._buffer.byteLength>=sn.byteLength?Le.subdata(sn):(Le.destroy(),fn.buffers[le]=null)),fn.buffers[le]||(Le=fn.buffers[le]=me.create(Be,34962,!1,!0)),en.buffer=me.getBuffer(Le),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Sn[le]=1):me.getBuffer(Be)?(en.buffer=me.getBuffer(Be),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):me.getBuffer(Be.buffer)?(en.buffer=me.getBuffer(Be.buffer),en.size=0|(+Be.size||en.buffer.dimension),en.normalized=!!Be.normalized||!1,"type"in Be?(ft.parameter(Be.type,$,"invalid buffer type"),en.type=$[Be.type]):en.type=en.buffer.dtype,en.offset=0|(Be.offset||0),en.stride=0|(Be.stride||0),en.divisor=0|(Be.divisor||0),en.state=1,ft(en.size>=1&&en.size<=4,"size must be between 1 and 4"),ft(en.offset>=0,"invalid offset"),ft(en.stride>=0&&en.stride<=255,"stride must be between 0 and 255"),ft(en.divisor>=0,"divisor must be positive"),ft(!en.divisor||!!R.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Be?(ft(le>0,"first attribute must not be a constant"),en.x=+Be.x||0,en.y=+Be.y||0,en.z=+Be.z||0,en.w=+Be.w||0,en.state=2):ft(!1,"invalid attribute spec for location "+le)}for(var Ue=0;Ue<fn.buffers.length;++Ue)!Sn[Ue]&&fn.buffers[Ue]&&(fn.buffers[Ue].destroy(),fn.buffers[Ue]=null);return fn.refresh(),nn}return $t.vaoCount+=1,nn.destroy=function(){for(var dn=0;dn<fn.buffers.length;++dn)fn.buffers[dn]&&fn.buffers[dn].destroy();fn.buffers.length=0,fn.destroy()},nn._vao=fn,nn._reglType="vao",nn(cn)},getVAO:function(cn){return typeof cn=="function"&&cn._vao?cn._vao:null},destroyBuffer:function(cn){for(var fn=0;fn<de.length;++fn){var nn=de[fn];nn.buffer===cn&&(Ce.disableVertexAttribArray(fn),nn.buffer=null)}},setVAO:Ve()?function(De){if(De!==ze.currentVAO){var cn=Ve();De?cn.bindVertexArrayOES(De.vao):cn.bindVertexArrayOES(null),ze.currentVAO=De}}:function(De){if(De!==ze.currentVAO){if(De)De.bindAttrs();else for(var cn=ke(),fn=0;fn<de.length;++fn){var nn=de[fn];nn.buffer?(Ce.enableVertexAttribArray(fn),Ce.vertexAttribPointer(fn,nn.size,nn.type,nn.normalized,nn.stride,nn.offfset),cn&&nn.divisor&&cn.vertexAttribDivisorANGLE(fn,nn.divisor)):(Ce.disableVertexAttribArray(fn),Ce.vertexAttrib4f(fn,nn.x,nn.y,nn.z,nn.w))}ze.currentVAO=De}},clear:Ve()?function(){h(Me).forEach(function(De){De.destroy()})}:function(){}};function Ve(){return R.oes_vertex_array_object}function ke(){return R.angle_instanced_arrays}function tn(){this.id=++ce,this.attributes=[];var De=Ve();this.vao=De?De.createVertexArrayOES():null,Me[this.id]=this,this.buffers=[]}return tn.prototype.bindAttrs=function(){for(var De=ke(),cn=this.attributes,fn=0;fn<cn.length;++fn){var nn=cn[fn];nn.buffer?(Ce.enableVertexAttribArray(fn),Ce.bindBuffer(34962,nn.buffer.buffer),Ce.vertexAttribPointer(fn,nn.size,nn.type,nn.normalized,nn.stride,nn.offset),De&&nn.divisor&&De.vertexAttribDivisorANGLE(fn,nn.divisor)):(Ce.disableVertexAttribArray(fn),Ce.vertexAttrib4f(fn,nn.x,nn.y,nn.z,nn.w))}for(var dn=cn.length;dn<Zt;++dn)Ce.disableVertexAttribArray(dn)},tn.prototype.refresh=function(){var De=Ve();De&&(De.bindVertexArrayOES(this.vao),this.bindAttrs(),ze.currentVAO=this)},tn.prototype.destroy=function(){if(this.vao){var De=Ve();this===ze.currentVAO&&(ze.currentVAO=null,De.bindVertexArrayOES(null)),De.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],$t.vaoCount-=1)},ze}(on,xr,ri,wr,vi),Si=function(Ce,R,yt,$t){var me={},Zt=0,de={uint8:5121,uint16:5123};function he(Ve){this.id=Zt++,me[this.id]=this,this.buffer=Ve,this.primType=4,this.vertCount=0,this.type=0}R.oes_element_index_uint&&(de.uint32=5125),he.prototype.bind=function(){this.buffer.bind()};var ce=[];function Me(Ve,ke,tn,De,cn,fn,nn){var dn;if(Ve.buffer.bind(),ke){var Sn=nn;nn||M(ke)&&(!k(ke)||M(ke.data))||(Sn=R.oes_element_index_uint?5125:5123),yt._initBuffer(Ve.buffer,ke,tn,Sn,3)}else Ce.bufferData(34963,fn,tn),Ve.buffer.dtype=dn||5121,Ve.buffer.usage=tn,Ve.buffer.dimension=3,Ve.buffer.byteLength=fn;if(dn=nn,!nn){switch(Ve.buffer.dtype){case 5121:case 5120:dn=5121;break;case 5123:case 5122:dn=5123;break;case 5125:case 5124:dn=5125;break;default:ft.raise("unsupported type for element array")}Ve.buffer.dtype=dn}Ve.type=dn,ft(dn!==5125||!!R.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pe=cn;Pe<0&&(Pe=Ve.buffer.byteLength,dn===5123?Pe>>=1:dn===5125&&(Pe>>=2)),Ve.vertCount=Pe;var le=De;if(De<0){le=4;var Le=Ve.buffer.dimension;Le===1&&(le=0),Le===2&&(le=1),Le===3&&(le=4)}Ve.primType=le}function ze(Ve){$t.elementsCount--,ft(Ve.buffer!==null,"must not double destroy elements"),delete me[Ve.id],Ve.buffer.destroy(),Ve.buffer=null}return{create:function(ke,tn){var De=yt.create(null,34963,!0),cn=new he(De._buffer);function fn(nn){if(nn)if(typeof nn=="number")De(nn),cn.primType=4,cn.vertCount=0|nn,cn.type=5121;else{var dn=null,Sn=35044,Pe=-1,le=-1,Le=0,Be=0;Array.isArray(nn)||M(nn)||k(nn)?dn=nn:(ft.type(nn,"object","invalid arguments for elements"),"data"in nn&&(dn=nn.data,ft(Array.isArray(dn)||M(dn)||k(dn),"invalid data for element buffer")),"usage"in nn&&(ft.parameter(nn.usage,rt,"invalid element buffer usage"),Sn=rt[nn.usage]),"primitive"in nn&&(ft.parameter(nn.primitive,Dt,"invalid element buffer primitive"),Pe=Dt[nn.primitive]),"count"in nn&&(ft(typeof nn.count=="number"&&nn.count>=0,"invalid vertex count for elements"),le=0|nn.count),"type"in nn&&(ft.parameter(nn.type,de,"invalid buffer type"),Be=de[nn.type]),"length"in nn?Le=0|nn.length:(Le=le,Be===5123||Be===5122?Le*=2:Be!==5125&&Be!==5124||(Le*=4))),Me(cn,dn,Sn,Pe,le,Le,Be)}else De(),cn.primType=4,cn.vertCount=0,cn.type=5121;return fn}return $t.elementsCount++,fn(ke),fn._reglType="elements",fn._elements=cn,fn.subdata=function(nn,dn){return De.subdata(nn,dn),fn},fn.destroy=function(){ze(cn)},fn},createStream:function(ke){var tn=ce.pop();return tn||(tn=new he(yt.create(null,34963,!0,!1)._buffer)),Me(tn,ke,35040,-1,-1,0,0),tn},destroyStream:function(ke){ce.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof he?ke._elements:null},clear:function(){h(me).forEach(ze)}}}(on,xr,vi,wr),Ui=function(Ce,R,yt,$t){var me={},Zt={};function de(De,cn,fn,nn){this.name=De,this.id=cn,this.location=fn,this.info=nn}function he(De,cn){for(var fn=0;fn<De.length;++fn)if(De[fn].id===cn.id)return void(De[fn].location=cn.location);De.push(cn)}function ce(De,cn,fn){var nn=De===35632?me:Zt,dn=nn[cn];if(!dn){var Sn=R.str(cn);dn=Ce.createShader(De),Ce.shaderSource(dn,Sn),Ce.compileShader(dn),ft.shaderError(Ce,dn,Sn,De,fn),nn[cn]=dn}return dn}var Me={},ze=[],Ve=0;function ke(De,cn){this.id=Ve++,this.fragId=De,this.vertId=cn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function tn(De,cn,fn){var nn,dn,Sn=ce(35632,De.fragId),Pe=ce(35633,De.vertId),le=De.program=Ce.createProgram();if(Ce.attachShader(le,Sn),Ce.attachShader(le,Pe),fn)for(nn=0;nn<fn.length;++nn){var Le=fn[nn];Ce.bindAttribLocation(le,Le[0],Le[1])}Ce.linkProgram(le),ft.linkError(Ce,le,R.str(De.fragId),R.str(De.vertId),cn);var Be=Ce.getProgramParameter(le,35718);$t.profile&&(De.stats.uniformsCount=Be);var en=De.uniforms;for(nn=0;nn<Be;++nn)if(dn=Ce.getActiveUniform(le,nn))if(dn.size>1)for(var sn=0;sn<dn.size;++sn){var Ue=dn.name.replace("[0]","["+sn+"]");he(en,new de(Ue,R.id(Ue),Ce.getUniformLocation(le,Ue),dn))}else he(en,new de(dn.name,R.id(dn.name),Ce.getUniformLocation(le,dn.name),dn));var ln=Ce.getProgramParameter(le,35721);$t.profile&&(De.stats.attributesCount=ln);var mn=De.attributes;for(nn=0;nn<ln;++nn)(dn=Ce.getActiveAttrib(le,nn))&&he(mn,new de(dn.name,R.id(dn.name),Ce.getAttribLocation(le,dn.name),dn))}return $t.profile&&(yt.getMaxUniformsCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.uniformsCount>De&&(De=cn.stats.uniformsCount)}),De},yt.getMaxAttributesCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.attributesCount>De&&(De=cn.stats.attributesCount)}),De}),{clear:function(){var cn=Ce.deleteShader.bind(Ce);h(me).forEach(cn),me={},h(Zt).forEach(cn),Zt={},ze.forEach(function(fn){Ce.deleteProgram(fn.program)}),ze.length=0,Me={},yt.shaderCount=0},program:function(cn,fn,nn,dn){ft.command(cn>=0,"missing vertex shader",nn),ft.command(fn>=0,"missing fragment shader",nn);var Sn=Me[fn];Sn||(Sn=Me[fn]={});var Pe=Sn[cn];if(Pe&&(Pe.refCount++,!dn))return Pe;var le=new ke(fn,cn);return yt.shaderCount++,tn(le,nn,dn),Pe||(Sn[cn]=le),ze.push(le),I(le,{destroy:function(){if(le.refCount--,le.refCount<=0){Ce.deleteProgram(le.program);var Be=ze.indexOf(le);ze.splice(Be,1),yt.shaderCount--}Sn[le.vertId].refCount<=0&&(Ce.deleteShader(Zt[le.vertId]),delete Zt[le.vertId],delete Me[le.fragId][le.vertId]),Object.keys(Me[le.fragId]).length||(Ce.deleteShader(me[le.fragId]),delete me[le.fragId],delete Me[le.fragId])}})},restore:function(){me={},Zt={};for(var cn=0;cn<ze.length;++cn)tn(ze[cn],null,ze[cn].attributes.map(function(fn){return[fn.location,fn.name]}))},shader:ce,frag:-1,vert:-1}}(on,Ar,wr,rn),Yi=to(on,xr,ri,function(){ve.procs.poll()},Dr,wr,rn),Bi=function(Ce,R,yt,$t,me){var Zt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};R.ext_srgb&&(Zt.srgba=35907),R.ext_color_buffer_half_float&&(Zt.rgba16f=34842,Zt.rgb16f=34843),R.webgl_color_buffer_float&&(Zt.rgba32f=34836);var de=[];Object.keys(Zt).forEach(function(Ve){var ke=Zt[Ve];de[ke]=Ve});var he=0,ce={};function Me(Ve){this.id=he++,this.refCount=1,this.renderbuffer=Ve,this.format=32854,this.width=0,this.height=0,me.profile&&(this.stats={size:0})}function ze(Ve){var ke=Ve.renderbuffer;ft(ke,"must not double destroy renderbuffer"),Ce.bindRenderbuffer(36161,null),Ce.deleteRenderbuffer(ke),Ve.renderbuffer=null,Ve.refCount=0,delete ce[Ve.id],$t.renderbufferCount--}return Me.prototype.decRef=function(){--this.refCount<=0&&ze(this)},me.profile&&($t.getTotalRenderbufferSize=function(){var Ve=0;return Object.keys(ce).forEach(function(ke){Ve+=ce[ke].stats.size}),Ve}),{create:function(ke,tn){var De=new Me(Ce.createRenderbuffer());function cn(fn,nn){var dn=0,Sn=0,Pe=32854;if(S(fn)==="object"&&fn){var le=fn;if("shape"in le){var Le=le.shape;ft(Array.isArray(Le)&&Le.length>=2,"invalid renderbuffer shape"),dn=0|Le[0],Sn=0|Le[1]}else"radius"in le&&(dn=Sn=0|le.radius),"width"in le&&(dn=0|le.width),"height"in le&&(Sn=0|le.height);"format"in le&&(ft.parameter(le.format,Zt,"invalid renderbuffer format"),Pe=Zt[le.format])}else typeof fn=="number"?(dn=0|fn,Sn=typeof nn=="number"?0|nn:dn):fn?ft.raise("invalid arguments to renderbuffer constructor"):dn=Sn=1;if(ft(dn>0&&Sn>0&&dn<=yt.maxRenderbufferSize&&Sn<=yt.maxRenderbufferSize,"invalid renderbuffer size"),dn!==De.width||Sn!==De.height||Pe!==De.format)return cn.width=De.width=dn,cn.height=De.height=Sn,De.format=Pe,Ce.bindRenderbuffer(36161,De.renderbuffer),Ce.renderbufferStorage(36161,Pe,dn,Sn),ft(Ce.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ci(De.format,De.width,De.height)),cn.format=de[De.format],cn}return ce[De.id]=De,$t.renderbufferCount++,cn(ke,tn),cn.resize=function(fn,nn){var dn=0|fn,Sn=0|nn||dn;return dn===De.width&&Sn===De.height||(ft(dn>0&&Sn>0&&dn<=yt.maxRenderbufferSize&&Sn<=yt.maxRenderbufferSize,"invalid renderbuffer size"),cn.width=De.width=dn,cn.height=De.height=Sn,Ce.bindRenderbuffer(36161,De.renderbuffer),Ce.renderbufferStorage(36161,De.format,dn,Sn),ft(Ce.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ci(De.format,De.width,De.height))),cn},cn._reglType="renderbuffer",cn._renderbuffer=De,me.profile&&(cn.stats=De.stats),cn.destroy=function(){De.decRef()},cn},clear:function(){h(ce).forEach(ze)},restore:function(){h(ce).forEach(function(ke){ke.renderbuffer=Ce.createRenderbuffer(),Ce.bindRenderbuffer(36161,ke.renderbuffer),Ce.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),Ce.bindRenderbuffer(36161,null)}}}(on,xr,ri,wr,rn),Di=function(Ce,R,yt,$t,me,Zt){var de={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];R.ext_srgb&&ce.push("srgba"),R.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),R.webgl_color_buffer_float&&ce.push("rgba32f");var Me=["uint8"];function ze(sn,Ue,ln){this.target=sn,this.texture=Ue,this.renderbuffer=ln;var mn=0,Wn=0;Ue?(mn=Ue.width,Wn=Ue.height):ln&&(mn=ln.width,Wn=ln.height),this.width=mn,this.height=Wn}function Ve(sn){sn&&(sn.texture&&sn.texture._texture.decRef(),sn.renderbuffer&&sn.renderbuffer._renderbuffer.decRef())}function ke(sn,Ue,ln){if(sn)if(sn.texture){var mn=sn.texture._texture,Wn=Math.max(1,mn.width),An=Math.max(1,mn.height);ft(Wn===Ue&&An===ln,"inconsistent width/height for supplied texture"),mn.refCount+=1}else{var In=sn.renderbuffer._renderbuffer;ft(In.width===Ue&&In.height===ln,"inconsistent width/height for renderbuffer"),In.refCount+=1}}function tn(sn,Ue){Ue&&(Ue.texture?Ce.framebufferTexture2D(36160,sn,Ue.target,Ue.texture._texture.texture,0):Ce.framebufferRenderbuffer(36160,sn,36161,Ue.renderbuffer._renderbuffer.renderbuffer))}function De(sn){var Ue=3553,ln=null,mn=null,Wn=sn;S(sn)==="object"&&(Wn=sn.data,"target"in sn&&(Ue=0|sn.target)),ft.type(Wn,"function","invalid attachment data");var An=Wn._reglType;return An==="texture2d"?(ln=Wn,ft(Ue===3553)):An==="textureCube"?(ln=Wn,ft(Ue>=34069&&Ue<34075,"invalid cube map target")):An==="renderbuffer"?(mn=Wn,Ue=36161):ft.raise("invalid regl object for attachment"),new ze(Ue,ln,mn)}function cn(sn,Ue,ln,mn,Wn){if(ln){var An=$t.create2D({width:sn,height:Ue,format:mn,type:Wn});return An._texture.refCount=0,new ze(3553,An,null)}var In=me.create({width:sn,height:Ue,format:mn});return In._renderbuffer.refCount=0,new ze(36161,null,In)}function fn(sn){return sn&&(sn.texture||sn.renderbuffer)}function nn(sn,Ue,ln){sn&&(sn.texture?sn.texture.resize(Ue,ln):sn.renderbuffer&&sn.renderbuffer.resize(Ue,ln),sn.width=Ue,sn.height=ln)}R.oes_texture_half_float&&Me.push("half float","float16"),R.oes_texture_float&&Me.push("float","float32");var dn=0,Sn={};function Pe(){this.id=dn++,Sn[this.id]=this,this.framebuffer=Ce.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function le(sn){sn.colorAttachments.forEach(Ve),Ve(sn.depthAttachment),Ve(sn.stencilAttachment),Ve(sn.depthStencilAttachment)}function Le(sn){var Ue=sn.framebuffer;ft(Ue,"must not double destroy framebuffer"),Ce.deleteFramebuffer(Ue),sn.framebuffer=null,Zt.framebufferCount--,delete Sn[sn.id]}function Be(sn){var Ue;Ce.bindFramebuffer(36160,sn.framebuffer);var ln=sn.colorAttachments;for(Ue=0;Ue<ln.length;++Ue)tn(36064+Ue,ln[Ue]);for(Ue=ln.length;Ue<yt.maxColorAttachments;++Ue)Ce.framebufferTexture2D(36160,36064+Ue,3553,null,0);Ce.framebufferTexture2D(36160,33306,3553,null,0),Ce.framebufferTexture2D(36160,36096,3553,null,0),Ce.framebufferTexture2D(36160,36128,3553,null,0),tn(36096,sn.depthAttachment),tn(36128,sn.stencilAttachment),tn(33306,sn.depthStencilAttachment);var mn=Ce.checkFramebufferStatus(36160);Ce.isContextLost()||mn===36053||ft.raise("framebuffer configuration not supported, status = "+jr[mn]),Ce.bindFramebuffer(36160,de.next?de.next.framebuffer:null),de.cur=de.next,Ce.getError()}function en(sn,Ue){var ln=new Pe;function mn(Wn,An){var In;ft(de.next!==ln,"can not update framebuffer which is currently in use");var lr=0,Hr=0,Gr=!0,Mr=!0,oi=null,ai=!0,Zr="rgba",Xi="uint8",$i=1,Go=null,_o=null,Uo=null,ta=!1;if(typeof Wn=="number")lr=0|Wn,Hr=0|An||lr;else if(Wn){ft.type(Wn,"object","invalid arguments for framebuffer");var li=Wn;if("shape"in li){var Oo=li.shape;ft(Array.isArray(Oo)&&Oo.length>=2,"invalid shape for framebuffer"),lr=Oo[0],Hr=Oo[1]}else"radius"in li&&(lr=Hr=li.radius),"width"in li&&(lr=li.width),"height"in li&&(Hr=li.height);("color"in li||"colors"in li)&&(oi=li.color||li.colors,Array.isArray(oi)&&ft(oi.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in li&&($i=0|li.colorCount,ft($i>0,"invalid color buffer count")),"colorTexture"in li&&(ai=!!li.colorTexture,Zr="rgba4"),"colorType"in li&&(Xi=li.colorType,ai?(ft(R.oes_texture_float||!(Xi==="float"||Xi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ft(R.oes_texture_half_float||!(Xi==="half float"||Xi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Xi==="half float"||Xi==="float16"?(ft(R.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zr="rgba16f"):Xi!=="float"&&Xi!=="float32"||(ft(R.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zr="rgba32f"),ft.oneOf(Xi,Me,"invalid color type")),"colorFormat"in li&&(Zr=li.colorFormat,he.indexOf(Zr)>=0?ai=!0:ce.indexOf(Zr)>=0?ai=!1:ai?ft.oneOf(li.colorFormat,he,"invalid color format for texture"):ft.oneOf(li.colorFormat,ce,"invalid color format for renderbuffer"))),("depthTexture"in li||"depthStencilTexture"in li)&&(ta=!(!li.depthTexture&&!li.depthStencilTexture),ft(!ta||R.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in li&&(typeof li.depth=="boolean"?Gr=li.depth:(Go=li.depth,Mr=!1)),"stencil"in li&&(typeof li.stencil=="boolean"?Mr=li.stencil:(_o=li.stencil,Gr=!1)),"depthStencil"in li&&(typeof li.depthStencil=="boolean"?Gr=Mr=li.depthStencil:(Uo=li.depthStencil,Gr=!1,Mr=!1))}else lr=Hr=1;var qi=null,zo=null,Yo=null,Xo=null;if(Array.isArray(oi))qi=oi.map(De);else if(oi)qi=[De(oi)];else for(qi=new Array($i),In=0;In<$i;++In)qi[In]=cn(lr,Hr,ai,Zr,Xi);ft(R.webgl_draw_buffers||qi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ft(qi.length<=yt.maxColorAttachments,"too many color attachments, not supported"),lr=lr||qi[0].width,Hr=Hr||qi[0].height,Go?zo=De(Go):Gr&&!Mr&&(zo=cn(lr,Hr,ta,"depth","uint32")),_o?Yo=De(_o):Mr&&!Gr&&(Yo=cn(lr,Hr,!1,"stencil","uint8")),Uo?Xo=De(Uo):!Go&&!_o&&Mr&&Gr&&(Xo=cn(lr,Hr,ta,"depth stencil","depth stencil")),ft(!!Go+!!_o+!!Uo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ua=null;for(In=0;In<qi.length;++In)if(ke(qi[In],lr,Hr),ft(!qi[In]||qi[In].texture&&_i.indexOf(qi[In].texture._texture.format)>=0||qi[In].renderbuffer&&ro.indexOf(qi[In].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+In+" is invalid"),qi[In]&&qi[In].texture){var di=Li[qi[In].texture._texture.format]*Vi[qi[In].texture._texture.type];ua===null?ua=di:ft(ua===di,"all color attachments much have the same number of bits per pixel.")}return ke(zo,lr,Hr),ft(!zo||zo.texture&&zo.texture._texture.format===6402||zo.renderbuffer&&zo.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),ke(Yo,lr,Hr),ft(!Yo||Yo.renderbuffer&&Yo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),ke(Xo,lr,Hr),ft(!Xo||Xo.texture&&Xo.texture._texture.format===34041||Xo.renderbuffer&&Xo.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),le(ln),ln.width=lr,ln.height=Hr,ln.colorAttachments=qi,ln.depthAttachment=zo,ln.stencilAttachment=Yo,ln.depthStencilAttachment=Xo,mn.color=qi.map(fn),mn.depth=fn(zo),mn.stencil=fn(Yo),mn.depthStencil=fn(Xo),mn.width=ln.width,mn.height=ln.height,Be(ln),mn}return Zt.framebufferCount++,mn(sn,Ue),I(mn,{resize:function(An,In){ft(de.next!==ln,"can not resize a framebuffer which is currently in use");var lr=Math.max(0|An,1),Hr=Math.max(0|In||lr,1);if(lr===ln.width&&Hr===ln.height)return mn;for(var Gr=ln.colorAttachments,Mr=0;Mr<Gr.length;++Mr)nn(Gr[Mr],lr,Hr);return nn(ln.depthAttachment,lr,Hr),nn(ln.stencilAttachment,lr,Hr),nn(ln.depthStencilAttachment,lr,Hr),ln.width=mn.width=lr,ln.height=mn.height=Hr,Be(ln),mn},_reglType:"framebuffer",_framebuffer:ln,destroy:function(){Le(ln),le(ln)},use:function(An){de.setFBO({framebuffer:mn},An)}})}return I(de,{getFramebuffer:function(Ue){if(typeof Ue=="function"&&Ue._reglType==="framebuffer"){var ln=Ue._framebuffer;if(ln instanceof Pe)return ln}return null},create:en,createCube:function(Ue){var ln=Array(6);function mn(Wn){var An;ft(ln.indexOf(de.next)<0,"can not update framebuffer which is currently in use");var In,lr={color:null},Hr=0,Gr=null,Mr="rgba",oi="uint8",ai=1;if(typeof Wn=="number")Hr=0|Wn;else if(Wn){ft.type(Wn,"object","invalid arguments for framebuffer");var Zr=Wn;if("shape"in Zr){var Xi=Zr.shape;ft(Array.isArray(Xi)&&Xi.length>=2,"invalid shape for framebuffer"),ft(Xi[0]===Xi[1],"cube framebuffer must be square"),Hr=Xi[0]}else"radius"in Zr&&(Hr=0|Zr.radius),"width"in Zr?(Hr=0|Zr.width,"height"in Zr&&ft(Zr.height===Hr,"must be square")):"height"in Zr&&(Hr=0|Zr.height);("color"in Zr||"colors"in Zr)&&(Gr=Zr.color||Zr.colors,Array.isArray(Gr)&&ft(Gr.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),Gr||("colorCount"in Zr&&(ai=0|Zr.colorCount,ft(ai>0,"invalid color buffer count")),"colorType"in Zr&&(ft.oneOf(Zr.colorType,Me,"invalid color type"),oi=Zr.colorType),"colorFormat"in Zr&&(Mr=Zr.colorFormat,ft.oneOf(Zr.colorFormat,he,"invalid color format for texture"))),"depth"in Zr&&(lr.depth=Zr.depth),"stencil"in Zr&&(lr.stencil=Zr.stencil),"depthStencil"in Zr&&(lr.depthStencil=Zr.depthStencil)}else Hr=1;if(Gr)if(Array.isArray(Gr))for(In=[],An=0;An<Gr.length;++An)In[An]=Gr[An];else In=[Gr];else{In=Array(ai);var $i={radius:Hr,format:Mr,type:oi};for(An=0;An<ai;++An)In[An]=$t.createCube($i)}for(lr.color=Array(In.length),An=0;An<In.length;++An){var Go=In[An];ft(typeof Go=="function"&&Go._reglType==="textureCube","invalid cube map"),Hr=Hr||Go.width,ft(Go.width===Hr&&Go.height===Hr,"invalid cube map shape"),lr.color[An]={target:34069,data:In[An]}}for(An=0;An<6;++An){for(var _o=0;_o<In.length;++_o)lr.color[_o].target=34069+An;An>0&&(lr.depth=ln[0].depth,lr.stencil=ln[0].stencil,lr.depthStencil=ln[0].depthStencil),ln[An]?ln[An](lr):ln[An]=en(lr)}return I(mn,{width:Hr,height:Hr,color:In})}return mn(Ue),I(mn,{faces:ln,resize:function(An){var In,lr=0|An;if(ft(lr>0&&lr<=yt.maxCubeMapSize,"invalid radius for cube fbo"),lr===mn.width)return mn;var Hr=mn.color;for(In=0;In<Hr.length;++In)Hr[In].resize(lr);for(In=0;In<6;++In)ln[In].resize(lr);return mn.width=mn.height=lr,mn},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(An){An.destroy()})}})},clear:function(){h(Sn).forEach(Le)},restore:function(){de.cur=null,de.next=null,de.dirty=!0,h(Sn).forEach(function(Ue){Ue.framebuffer=Ce.createFramebuffer(),Be(Ue)})}})}(on,xr,ri,Yi,Bi,wr),ve=On(on,Ar,xr,ri,vi,Si,0,Di,{},ii,Ui,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Dr,Er,rn),F=pr(on,Di,ve.procs.poll,Dr,$n,xr,ri),B=ve.next,Z=on.canvas,ut=[],Bt=[],Jt=[],ie=[rn.onDestroy],se=null;function Te(){if(ut.length===0)return Er&&Er.update(),void(se=null);se=dt.next(Te),Dn();for(var Ce=ut.length-1;Ce>=0;--Ce){var R=ut[Ce];R&&R(Dr,null,0)}on.flush(),Er&&Er.update()}function Ee(){!se&&ut.length>0&&(se=dt.next(Te))}function un(){se&&(dt.cancel(Te),se=null)}function xn(Ce){Ce.preventDefault(),vr=!0,un(),Bt.forEach(function(R){R()})}function zt(Ce){on.getError(),vr=!1,ar.restore(),Ui.restore(),vi.restore(),Yi.restore(),Bi.restore(),Di.restore(),ii.restore(),Er&&Er.restore(),ve.procs.refresh(),Ee(),Jt.forEach(function(R){R()})}function Yt(Ce){function R(ke,tn){var De={},cn={};return Object.keys(ke).forEach(function(fn){var nn=ke[fn];if(ct.isDynamic(nn))cn[fn]=ct.unbox(nn,fn);else{if(tn&&Array.isArray(nn)){for(var dn=0;dn<nn.length;++dn)if(ct.isDynamic(nn[dn]))return void(cn[fn]=ct.unbox(nn,fn))}De[fn]=nn}}),{dynamic:cn,static:De}}ft(!!Ce,"invalid args to regl({...})"),ft.type(Ce,"object","invalid args to regl({...})");var yt=R(Ce.context||{},!0),$t=R(Ce.uniforms||{},!0),me=R(Ce.attributes||{},!1),Zt=R(function(ke){var tn=I({},ke);function De(cn){if(cn in tn){var fn=tn[cn];delete tn[cn],Object.keys(fn).forEach(function(nn){tn[cn+"."+nn]=fn[nn]})}}return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),De("blend"),De("depth"),De("cull"),De("stencil"),De("polygonOffset"),De("scissor"),De("sample"),"vao"in ke&&(tn.vao=ke.vao),tn}(Ce),!1),de={gpuTime:0,cpuTime:0,count:0},he=ve.compile(Zt,me,$t,yt,de),ce=he.draw,Me=he.batch,ze=he.scope,Ve=[];return I(function(ke,tn){var De;if(vr&&ft.raise("context lost"),typeof ke=="function")return ze.call(this,null,ke,0);if(typeof tn=="function")if(typeof ke=="number")for(De=0;De<ke;++De)ze.call(this,null,tn,De);else{if(!Array.isArray(ke))return ze.call(this,ke,tn,0);for(De=0;De<ke.length;++De)ze.call(this,ke[De],tn,De)}else if(typeof ke=="number"){if(ke>0)return Me.call(this,function(cn){for(;Ve.length<cn;)Ve.push(null);return Ve}(0|ke),0|ke)}else{if(!Array.isArray(ke))return ce.call(this,ke);if(ke.length)return Me.call(this,ke,ke.length)}},{stats:de,destroy:function(){he.destroy()}})}Z&&(Z.addEventListener("webglcontextlost",xn,!1),Z.addEventListener("webglcontextrestored",zt,!1));var Se=Di.setFBO=Yt({framebuffer:ct.define.call(null,1,"framebuffer")});function Wt(Ce,R){var yt=0;ve.procs.poll();var $t=R.color;$t&&(on.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),yt|=16384),"depth"in R&&(on.clearDepth(+R.depth),yt|=256),"stencil"in R&&(on.clearStencil(0|R.stencil),yt|=1024),ft(!!yt,"called regl.clear with no buffer specified"),on.clear(yt)}function ue(Ce){return ft.type(Ce,"function","regl.frame() callback must be a function"),ut.push(Ce),Ee(),{cancel:function(){var yt=Xn(ut,Ce);ft(yt>=0,"cannot cancel a frame twice"),ut[yt]=function $t(){var me=Xn(ut,$t);ut[me]=ut[ut.length-1],ut.length-=1,ut.length<=0&&un()}}}}function vn(){var Ce=B.viewport,R=B.scissor_box;Ce[0]=Ce[1]=R[0]=R[1]=0,Dr.viewportWidth=Dr.framebufferWidth=Dr.drawingBufferWidth=Ce[2]=R[2]=on.drawingBufferWidth,Dr.viewportHeight=Dr.framebufferHeight=Dr.drawingBufferHeight=Ce[3]=R[3]=on.drawingBufferHeight}function Dn(){Dr.tick+=1,Dr.time=Gn(),vn(),ve.procs.poll()}function zn(){Yi.refresh(),vn(),ve.procs.refresh(),Er&&Er.update()}function Gn(){return(pt()-Ir)/1e3}zn();var Ze=I(Yt,{clear:function(R){if(ft(S(R)==="object"&&R,"regl.clear() takes an object as input"),"framebuffer"in R)if(R.framebuffer&&R.framebuffer_reglType==="framebufferCube")for(var yt=0;yt<6;++yt)Se(I({framebuffer:R.framebuffer.faces[yt]},R),Wt);else Se(R,Wt);else Wt(0,R)},prop:ct.define.bind(null,1),context:ct.define.bind(null,2),this:ct.define.bind(null,3),draw:Yt({}),buffer:function(R){return vi.create(R,34962,!1,!1)},elements:function(R){return Si.create(R,!1)},texture:Yi.create2D,cube:Yi.createCube,renderbuffer:Bi.create,framebuffer:Di.create,framebufferCube:Di.createCube,vao:ii.createVAO,attributes:$n,frame:ue,on:function(R,yt){var $t;switch(ft.type(yt,"function","listener callback must be a function"),R){case"frame":return ue(yt);case"lost":$t=Bt;break;case"restore":$t=Jt;break;case"destroy":$t=ie;break;default:ft.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(yt),{cancel:function(){for(var Zt=0;Zt<$t.length;++Zt)if($t[Zt]===yt)return $t[Zt]=$t[$t.length-1],void $t.pop()}}},limits:ri,hasExtension:function(R){return ri.extensions.indexOf(R.toLowerCase())>=0},read:F,destroy:function(){ut.length=0,un(),Z&&(Z.removeEventListener("webglcontextlost",xn),Z.removeEventListener("webglcontextrestored",zt)),Ui.clear(),Di.clear(),Bi.clear(),Yi.clear(),Si.clear(),vi.clear(),ii.clear(),Er&&Er.clear(),ie.forEach(function(R){R()})},_gl:on,_refresh:zn,poll:function(){Dn(),Er&&Er.update()},now:Gn,stats:wr});return rn.onDone(null,Ze),Ze}},S(A)==="object"&&a!==void 0?a.exports=b():(v=typeof(i=b)=="function"?i.call(A,e,A,a):i)===void 0||(a.exports=v)},function(a,A,e){"use strict";a.exports=function(i,v,b,S){try{try{var f;try{f=new window.Blob([i])}catch(n){(f=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(i),f=f.getBlob()}var M=window.URL||window.webkitURL,I=M.createObjectURL(f),y=new window[v](I,b);return M.revokeObjectURL(I),y}catch(n){return new window[v]("data:application/javascript,".concat(encodeURIComponent(i)),b)}}catch(n){if(!S)throw Error("Inline worker is not supported");return new window[v](S,b)}}},,,,,,,,function(a,A,e){"use strict";e.r(A),e.d(A,"Minimap",function(){return O}),e.d(A,"Grid",function(){return C}),e.d(A,"Bundling",function(){return p}),e.d(A,"Menu",function(){return x}),e.d(A,"Fisheye",function(){return T}),e.d(A,"ToolBar",function(){return N}),e.d(A,"Tooltip",function(){return Y}),e.d(A,"TimeBar",function(){return q}),e.d(A,"ImageMinimap",function(){return nt}),e.d(A,"EdgeFilterLens",function(){return vt});var i=e(5);e.d(A,"Arrow",function(){return i.d}),e.d(A,"Marker",function(){return i.k}),e.d(A,"Shape",function(){return i.m});var v=e(18);e.d(A,"ICanvas",function(){return v.ICanvas}),e.d(A,"IGroup",function(){return v.IGroup}),e.d(A,"IShape",function(){return v.IShape});var b=e(33);e.d(A,"Algorithm",function(){return b});var S=e(91);e.d(A,"Graph",function(){return S.a});var f=e(152);e.d(A,"TreeGraph",function(){return f.a});var M=e(69);e.d(A,"Layout",function(){return M.a}),e.d(A,"registerLayout",function(){return M.b});var I=e(45);e.d(A,"Global",function(){return I.a});var y=e(38);e.d(A,"Util",function(){return y.a});var n=e(35);e(509),e(508),e.d(A,"G6GraphEvent",function(){return i.i}),e.d(A,"G6Event",function(){return i.h}),e.d(A,"Node",function(){return i.l}),e.d(A,"Edge",function(){return i.g}),e.d(A,"Combo",function(){return i.f}),e.d(A,"Hull",function(){return i.j}),e.d(A,"registerNode",function(){return i.r}),e.d(A,"registerCombo",function(){return i.p}),e.d(A,"AbstractGraph",function(){return i.b}),e.d(A,"registerEdge",function(){return i.q}),e.d(A,"registerBehavior",function(){return i.o}),e.d(A,"AbstractLayout",function(){return i.c}),e.d(A,"AbstractEvent",function(){return i.a}),e.d(A,"BaseGlobal",function(){return i.e});var s=e(245);for(var d in s)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(ht){e.d(A,ht,function(){return s[ht]})}(d);var E=e(246);for(var d in E)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(St){e.d(A,St,function(){return E[St]})}(d);var O=n.a.Minimap,C=n.a.Grid,p=n.a.Bundling,x=n.a.Menu,T=n.a.Fisheye,N=n.a.ToolBar,Y=n.a.Tooltip,q=n.a.TimeBar,nt=n.a.ImageMinimap,vt=n.a.EdgeFilterLens;A.default={version:I.a.version,Graph:S.a,TreeGraph:f.a,Util:y.a,Layout:M.a,registerLayout:M.b,Global:I.a,registerBehavior:i.o,registerCombo:i.p,registerEdge:i.q,registerNode:i.r,Minimap:n.a.Minimap,Grid:n.a.Grid,Bundling:n.a.Bundling,Menu:n.a.Menu,ToolBar:n.a.ToolBar,Tooltip:n.a.Tooltip,TimeBar:q,Fisheye:T,ImageMinimap:nt,EdgeFilterLens:vt,Algorithm:b,Arrow:i.d,Marker:i.k,Shape:i.m}},function(a,A,e){var i=e(264),v=e(265),b={};for(var S in i)i.hasOwnProperty(S)&&(b[i[S]]=S);var f=a.exports={to:{},get:{}};function M(y,n,s){return Math.min(Math.max(n,y),s)}function I(y){var n=y.toString(16).toUpperCase();return n.length<2?"0"+n:n}f.get=function(y){var n,s;switch(y.substring(0,3).toLowerCase()){case"hsl":n=f.get.hsl(y),s="hsl";break;case"hwb":n=f.get.hwb(y),s="hwb";break;default:n=f.get.rgb(y),s="rgb"}return n?{model:s,value:n}:null},f.get.rgb=function(y){if(!y)return null;var n,s,d,E=[0,0,0,1];if(n=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(d=n[2],n=n[1],s=0;s<3;s++){var O=2*s;E[s]=parseInt(n.slice(O,O+2),16)}d&&(E[3]=parseInt(d,16)/255)}else if(n=y.match(/^#([a-f0-9]{3,4})$/i)){for(d=(n=n[1])[3],s=0;s<3;s++)E[s]=parseInt(n[s]+n[s],16);d&&(E[3]=parseInt(d+d,16)/255)}else if(n=y.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)E[s]=parseInt(n[s+1],0);n[4]&&(E[3]=parseFloat(n[4]))}else{if(!(n=y.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(n=y.match(/(\D+)/))?n[1]==="transparent"?[0,0,0,0]:(E=i[n[1]])?(E[3]=1,E):null:null;for(s=0;s<3;s++)E[s]=Math.round(2.55*parseFloat(n[s+1]));n[4]&&(E[3]=parseFloat(n[4]))}for(s=0;s<3;s++)E[s]=M(E[s],0,255);return E[3]=M(E[3],0,1),E},f.get.hsl=function(y){if(!y)return null;var n=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,M(parseFloat(n[2]),0,100),M(parseFloat(n[3]),0,100),M(isNaN(s)?1:s,0,1)]}return null},f.get.hwb=function(y){if(!y)return null;var n=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,M(parseFloat(n[2]),0,100),M(parseFloat(n[3]),0,100),M(isNaN(s)?1:s,0,1)]}return null},f.to.hex=function(){var y=v(arguments);return"#"+I(y[0])+I(y[1])+I(y[2])+(y[3]<1?I(Math.round(255*y[3])):"")},f.to.rgb=function(){var y=v(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},f.to.rgb.percent=function(){var y=v(arguments),n=Math.round(y[0]/255*100),s=Math.round(y[1]/255*100),d=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+n+"%, "+s+"%, "+d+"%)":"rgba("+n+"%, "+s+"%, "+d+"%, "+y[3]+")"},f.to.hsl=function(){var y=v(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},f.to.hwb=function(){var y=v(arguments),n="";return y.length>=4&&y[3]!==1&&(n=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+n+")"},f.to.keyword=function(y){return b[y.slice(0,3)]}},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){"use strict";var i=e(266),v=Array.prototype.concat,b=Array.prototype.slice,S=a.exports=function(f){for(var M=[],I=0,y=f.length;I<y;I++){var n=f[I];i(n)?M=v.call(M,b.call(n)):M.push(n)}return M};S.wrap=function(f){return function(){return f(S(arguments))}}},function(a,A){a.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},function(a,A,e){function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(f)}var v=e(161),b=e(269),S={};Object.keys(v).forEach(function(f){S[f]={},Object.defineProperty(S[f],"channels",{value:v[f].channels}),Object.defineProperty(S[f],"labels",{value:v[f].labels});var M=b(f);Object.keys(M).forEach(function(I){var y=M[I];S[f][I]=function(n){var s=function(E){if(E==null)return E;arguments.length>1&&(E=Array.prototype.slice.call(arguments));var O=n(E);if(i(O)==="object")for(var C=O.length,p=0;p<C;p++)O[p]=Math.round(O[p]);return O};return"conversion"in n&&(s.conversion=n.conversion),s}(y),S[f][I].raw=function(n){var s=function(E){return E==null?E:(arguments.length>1&&(E=Array.prototype.slice.call(arguments)),n(E))};return"conversion"in n&&(s.conversion=n.conversion),s}(y)})}),a.exports=S},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){var i=e(161);function v(f){var M=function(){for(var C={},p=Object.keys(i),x=p.length,T=0;T<x;T++)C[p[T]]={distance:-1,parent:null};return C}(),I=[f];for(M[f].distance=0;I.length;)for(var y=I.pop(),n=Object.keys(i[y]),s=n.length,d=0;d<s;d++){var E=n[d],O=M[E];O.distance===-1&&(O.distance=M[y].distance+1,O.parent=y,I.unshift(E))}return M}function b(f,M){return function(I){return M(f(I))}}function S(f,M){for(var I=[M[f].parent,f],y=i[M[f].parent][f],n=M[f].parent;M[n].parent;)I.unshift(M[n].parent),y=b(i[M[n].parent][n],y),n=M[n].parent;return y.conversion=I,y}a.exports=function(f){for(var M=v(f),I={},y=Object.keys(M),n=y.length,s=0;s<n;s++){var d=y[s];M[d].parent!==null&&(I[d]=S(d,M))}return I}},function(a,A,e){var i=e(271);a.exports={Graph:i.Graph,json:e(372),alg:e(373),version:i.version}},function(a,A,e){a.exports={Graph:e(124),version:e(371)}},function(a,A,e){var i=e(162);a.exports=function(v){return i(v,4)}},function(a,A){a.exports=function(){this.__data__=[],this.size=0}},function(a,A,e){var i=e(97),v=Array.prototype.splice;a.exports=function(b){var S=this.__data__,f=i(S,b);return!(f<0)&&(f==S.length-1?S.pop():v.call(S,f,1),--this.size,!0)}},function(a,A,e){var i=e(97);a.exports=function(v){var b=this.__data__,S=i(b,v);return S<0?void 0:b[S][1]}},function(a,A,e){var i=e(97);a.exports=function(v){return i(this.__data__,v)>-1}},function(a,A,e){var i=e(97);a.exports=function(v,b){var S=this.__data__,f=i(S,v);return f<0?(++this.size,S.push([v,b])):S[f][1]=b,this}},function(a,A,e){var i=e(96);a.exports=function(){this.__data__=new i,this.size=0}},function(a,A){a.exports=function(e){var i=this.__data__,v=i.delete(e);return this.size=i.size,v}},function(a,A){a.exports=function(e){return this.__data__.get(e)}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A,e){var i=e(96),v=e(125),b=e(126);a.exports=function(S,f){var M=this.__data__;if(M instanceof i){var I=M.__data__;if(!v||I.length<199)return I.push([S,f]),this.size=++M.size,this;M=this.__data__=new b(I)}return M.set(S,f),this.size=M.size,this}},function(a,A,e){var i=e(83),v=e(286),b=e(43),S=e(165),f=/^\[object .+?Constructor\]$/,M=Function.prototype,I=Object.prototype,y=M.toString,n=I.hasOwnProperty,s=RegExp("^"+y.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(d){return!(!b(d)||v(d))&&(i(d)?s:f).test(S(d))}},function(a,A,e){var i=e(72),v=Object.prototype,b=v.hasOwnProperty,S=v.toString,f=i?i.toStringTag:void 0;a.exports=function(M){var I=b.call(M,f),y=M[f];try{M[f]=void 0;var n=!0}catch(d){}var s=S.call(M);return n&&(I?M[f]=y:delete M[f]),s}},function(a,A){var e=Object.prototype.toString;a.exports=function(i){return e.call(i)}},function(a,A,e){var i,v=e(287),b=(i=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";a.exports=function(S){return!!b&&b in S}},function(a,A,e){var i=e(47)["__core-js_shared__"];a.exports=i},function(a,A){a.exports=function(e,i){return e==null?void 0:e[i]}},function(a,A,e){var i=e(290),v=e(96),b=e(125);a.exports=function(){this.size=0,this.__data__={hash:new i,map:new(b||v),string:new i}}},function(a,A,e){var i=e(291),v=e(292),b=e(293),S=e(294),f=e(295);function M(I){var y=-1,n=I==null?0:I.length;for(this.clear();++y<n;){var s=I[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=v,M.prototype.get=b,M.prototype.has=S,M.prototype.set=f,a.exports=M},function(a,A,e){var i=e(98);a.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(a,A){a.exports=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}},function(a,A,e){var i=e(98),v=Object.prototype.hasOwnProperty;a.exports=function(b){var S=this.__data__;if(i){var f=S[b];return f==="__lodash_hash_undefined__"?void 0:f}return v.call(S,b)?S[b]:void 0}},function(a,A,e){var i=e(98),v=Object.prototype.hasOwnProperty;a.exports=function(b){var S=this.__data__;return i?S[b]!==void 0:v.call(S,b)}},function(a,A,e){var i=e(98);a.exports=function(v,b){var S=this.__data__;return this.size+=this.has(v)?0:1,S[v]=i&&b===void 0?"__lodash_hash_undefined__":b,this}},function(a,A,e){var i=e(99);a.exports=function(v){var b=i(this,v).delete(v);return this.size-=b?1:0,b}},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(i)}a.exports=function(i){var v=e(i);return v=="string"||v=="number"||v=="symbol"||v=="boolean"?i!=="__proto__":i===null}},function(a,A,e){var i=e(99);a.exports=function(v){return i(this,v).get(v)}},function(a,A,e){var i=e(99);a.exports=function(v){return i(this,v).has(v)}},function(a,A,e){var i=e(99);a.exports=function(v,b){var S=i(this,v),f=S.size;return S.set(v,b),this.size+=S.size==f?0:1,this}},function(a,A,e){var i=e(84),v=e(58);a.exports=function(b,S){return b&&i(S,v(S),b)}},function(a,A){a.exports=function(e,i){for(var v=-1,b=Array(e);++v<e;)b[v]=i(v);return b}},function(a,A,e){var i=e(57),v=e(48);a.exports=function(b){return v(b)&&i(b)=="[object Arguments]"}},function(a,A){a.exports=function(){return!1}},function(a,A,e){var i=e(57),v=e(128),b=e(48),S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S["[object Function]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object WeakMap]"]=!1,a.exports=function(f){return b(f)&&v(f.length)&&!!S[i(f)]}},function(a,A,e){var i=e(168)(Object.keys,Object);a.exports=i},function(a,A,e){var i=e(84),v=e(65);a.exports=function(b,S){return b&&i(S,v(S),b)}},function(a,A,e){var i=e(43),v=e(104),b=e(309),S=Object.prototype.hasOwnProperty;a.exports=function(f){if(!i(f))return b(f);var M=v(f),I=[];for(var y in f)(y!="constructor"||!M&&S.call(f,y))&&I.push(y);return I}},function(a,A){a.exports=function(e){var i=[];if(e!=null)for(var v in Object(e))i.push(v);return i}},function(a,A,e){var i=e(84),v=e(131);a.exports=function(b,S){return i(b,v(b),S)}},function(a,A,e){var i=e(84),v=e(173);a.exports=function(b,S){return i(b,v(b),S)}},function(a,A,e){var i=e(175),v=e(173),b=e(65);a.exports=function(S){return i(S,b,v)}},function(a,A,e){var i=e(64)(e(47),"DataView");a.exports=i},function(a,A,e){var i=e(64)(e(47),"Promise");a.exports=i},function(a,A,e){var i=e(64)(e(47),"WeakMap");a.exports=i},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(i){var v=i.length,b=new i.constructor(v);return v&&typeof i[0]=="string"&&e.call(i,"index")&&(b.index=i.index,b.input=i.input),b}},function(a,A,e){var i=e(133),v=e(318),b=e(319),S=e(320),f=e(178);a.exports=function(M,I,y){var n=M.constructor;switch(I){case"[object ArrayBuffer]":return i(M);case"[object Boolean]":case"[object Date]":return new n(+M);case"[object DataView]":return v(M,y);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return f(M,y);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(M);case"[object RegExp]":return b(M);case"[object Set]":return new n;case"[object Symbol]":return S(M)}}},function(a,A,e){var i=e(133);a.exports=function(v,b){var S=b?i(v.buffer):v.buffer;return new v.constructor(S,v.byteOffset,v.byteLength)}},function(a,A){var e=/\w*$/;a.exports=function(i){var v=new i.constructor(i.source,e.exec(i));return v.lastIndex=i.lastIndex,v}},function(a,A,e){var i=e(72),v=i?i.prototype:void 0,b=v?v.valueOf:void 0;a.exports=function(S){return b?Object(b.call(S)):{}}},function(a,A,e){var i=e(322),v=e(103),b=e(129),S=b&&b.isMap,f=S?v(S):i;a.exports=f},function(a,A,e){var i=e(74),v=e(48);a.exports=function(b){return v(b)&&i(b)=="[object Map]"}},function(a,A,e){var i=e(324),v=e(103),b=e(129),S=b&&b.isSet,f=S?v(S):i;a.exports=f},function(a,A,e){var i=e(74),v=e(48);a.exports=function(b){return v(b)&&i(b)=="[object Set]"}},function(a,A){a.exports=function(e){return function(i,v,b){for(var S=-1,f=Object(i),M=b(i),I=M.length;I--;){var y=M[e?I:++S];if(v(f[y],y,f)===!1)break}return i}}},function(a,A,e){var i=e(53);a.exports=function(v,b){return function(S,f){if(S==null)return S;if(!i(S))return v(S,f);for(var M=S.length,I=b?M:-1,y=Object(S);(b?I--:++I<M)&&f(y[I],I,y)!==!1;);return S}}},function(a,A,e){var i=e(106);a.exports=function(v,b){var S=[];return i(v,function(f,M,I){b(f,M,I)&&S.push(f)}),S}},function(a,A,e){var i=e(329),v=e(337),b=e(190);a.exports=function(S){var f=v(S);return f.length==1&&f[0][2]?b(f[0][0],f[0][1]):function(M){return M===S||i(M,S,f)}}},function(a,A,e){var i=e(95),v=e(185);a.exports=function(b,S,f,M){var I=f.length,y=I,n=!M;if(b==null)return!y;for(b=Object(b);I--;){var s=f[I];if(n&&s[2]?s[1]!==b[s[0]]:!(s[0]in b))return!1}for(;++I<y;){var d=(s=f[I])[0],E=b[d],O=s[1];if(n&&s[2]){if(E===void 0&&!(d in b))return!1}else{var C=new i;if(M)var p=M(E,O,d,b,S,C);if(!(p===void 0?v(O,E,3,M,C):p))return!1}}return!0}},function(a,A,e){var i=e(95),v=e(186),b=e(334),S=e(336),f=e(74),M=e(26),I=e(73),y=e(44),n="[object Object]",s=Object.prototype.hasOwnProperty;a.exports=function(d,E,O,C,p,x){var T=M(d),N=M(E),Y=T?"[object Array]":f(d),q=N?"[object Array]":f(E),nt=(Y=Y=="[object Arguments]"?n:Y)==n,vt=(q=q=="[object Arguments]"?n:q)==n,ht=Y==q;if(ht&&I(d)){if(!I(E))return!1;T=!0,nt=!1}if(ht&&!nt)return x||(x=new i),T||y(d)?v(d,E,O,C,p,x):b(d,E,Y,O,C,p,x);if(!(1&O)){var St=nt&&s.call(d,"__wrapped__"),wt=vt&&s.call(E,"__wrapped__");if(St||wt){var xt=St?d.value():d,ft=wt?E.value():E;return x||(x=new i),p(xt,ft,O,C,x)}}return!!ht&&(x||(x=new i),S(d,E,O,C,p,x))}},function(a,A){a.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A){a.exports=function(e,i){for(var v=-1,b=e==null?0:e.length;++v<b;)if(i(e[v],v,e))return!0;return!1}},function(a,A,e){var i=e(72),v=e(177),b=e(71),S=e(186),f=e(335),M=e(137),I=i?i.prototype:void 0,y=I?I.valueOf:void 0;a.exports=function(n,s,d,E,O,C,p){switch(d){case"[object DataView]":if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=s.byteLength||!C(new v(n),new v(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return b(+n,+s);case"[object Error]":return n.name==s.name&&n.message==s.message;case"[object RegExp]":case"[object String]":return n==s+"";case"[object Map]":var x=f;case"[object Set]":var T=1&E;if(x||(x=M),n.size!=s.size&&!T)return!1;var N=p.get(n);if(N)return N==s;E|=2,p.set(n,s);var Y=S(x(n),x(s),E,O,C,p);return p.delete(n),Y;case"[object Symbol]":if(y)return y.call(n)==y.call(s)}return!1}},function(a,A){a.exports=function(e){var i=-1,v=Array(e.size);return e.forEach(function(b,S){v[++i]=[S,b]}),v}},function(a,A,e){var i=e(174),v=Object.prototype.hasOwnProperty;a.exports=function(b,S,f,M,I,y){var n=1&f,s=i(b),d=s.length;if(d!=i(S).length&&!n)return!1;for(var E=d;E--;){var O=s[E];if(!(n?O in S:v.call(S,O)))return!1}var C=y.get(b),p=y.get(S);if(C&&p)return C==S&&p==b;var x=!0;y.set(b,S),y.set(S,b);for(var T=n;++E<d;){var N=b[O=s[E]],Y=S[O];if(M)var q=n?M(Y,N,O,S,b,y):M(N,Y,O,b,S,y);if(!(q===void 0?N===Y||I(N,Y,f,M,y):q)){x=!1;break}T||(T=O=="constructor")}if(x&&!T){var nt=b.constructor,vt=S.constructor;nt==vt||!("constructor"in b)||!("constructor"in S)||typeof nt=="function"&&nt instanceof nt&&typeof vt=="function"&&vt instanceof vt||(x=!1)}return y.delete(b),y.delete(S),x}},function(a,A,e){var i=e(189),v=e(58);a.exports=function(b){for(var S=v(b),f=S.length;f--;){var M=S[f],I=b[M];S[f]=[M,I,i(I)]}return S}},function(a,A,e){var i=e(185),v=e(339),b=e(192),S=e(138),f=e(189),M=e(190),I=e(87);a.exports=function(y,n){return S(y)&&f(n)?M(I(y),n):function(s){var d=v(s,y);return d===void 0&&d===n?b(s,y):i(n,d,3)}}},function(a,A,e){var i=e(107);a.exports=function(v,b,S){var f=v==null?void 0:i(v,b);return f===void 0?S:f}},function(a,A,e){var i=e(341),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,S=i(function(f){var M=[];return f.charCodeAt(0)===46&&M.push(""),f.replace(v,function(I,y,n,s){M.push(n?s.replace(b,"$1"):y||I)}),M});a.exports=S},function(a,A,e){var i=e(342);a.exports=function(v){var b=i(v,function(f){return S.size===500&&S.clear(),f}),S=b.cache;return b}},function(a,A,e){var i=e(126);function v(b,S){if(typeof b!="function"||S!=null&&typeof S!="function")throw new TypeError("Expected a function");var f=function M(){var I=arguments,y=S?S.apply(this,I):I[0],n=M.cache;if(n.has(y))return n.get(y);var s=b.apply(this,I);return M.cache=n.set(y,s)||n,s};return f.cache=new(v.Cache||i),f}v.Cache=i,a.exports=v},function(a,A,e){var i=e(72),v=e(109),b=e(26),S=e(75),f=i?i.prototype:void 0,M=f?f.toString:void 0;a.exports=function I(y){if(typeof y=="string")return y;if(b(y))return v(y,I)+"";if(S(y))return M?M.call(y):"";var n=y+"";return n=="0"&&1/y==-1/0?"-0":n}},function(a,A){a.exports=function(e,i){return e!=null&&i in Object(e)}},function(a,A,e){var i=e(194),v=e(346),b=e(138),S=e(87);a.exports=function(f){return b(f)?i(S(f)):v(f)}},function(a,A,e){var i=e(107);a.exports=function(v){return function(b){return i(b,v)}}},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(i,v){return i!=null&&e.call(i,v)}},function(a,A,e){var i=e(130),v=e(74),b=e(85),S=e(26),f=e(53),M=e(73),I=e(104),y=e(44),n=Object.prototype.hasOwnProperty;a.exports=function(s){if(s==null)return!0;if(f(s)&&(S(s)||typeof s=="string"||typeof s.splice=="function"||M(s)||y(s)||b(s)))return!s.length;var d=v(s);if(d=="[object Map]"||d=="[object Set]")return!s.size;if(I(s))return!i(s).length;for(var E in s)if(n.call(s,E))return!1;return!0}},function(a,A){a.exports=function(e,i,v,b){var S=-1,f=e==null?0:e.length;for(b&&f&&(v=e[++S]);++S<f;)v=i(v,e[S],S,e);return v}},function(a,A){a.exports=function(e,i,v,b,S){return S(e,function(f,M,I){v=b?(b=!1,f):i(v,f,M,I)}),v}},function(a,A,e){var i=e(130),v=e(74),b=e(53),S=e(352),f=e(353);a.exports=function(M){if(M==null)return 0;if(b(M))return S(M)?f(M):M.length;var I=v(M);return I=="[object Map]"||I=="[object Set]"?M.size:i(M).length}},function(a,A,e){var i=e(57),v=e(26),b=e(48);a.exports=function(S){return typeof S=="string"||!v(S)&&b(S)&&i(S)=="[object String]"}},function(a,A,e){var i=e(354),v=e(355),b=e(356);a.exports=function(S){return v(S)?b(S):i(S)}},function(a,A,e){var i=e(194)("length");a.exports=i},function(a,A){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");a.exports=function(i){return e.test(i)}},function(a,A){var e="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",v="\\ud83c[\\udffb-\\udfff]",b="[^\\ud800-\\udfff]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",M="(?:"+i+"|"+v+")?",I="[\\ufe0e\\ufe0f]?"+M+("(?:\\u200d(?:"+[b,S,f].join("|")+")[\\ufe0e\\ufe0f]?"+M+")*"),y="(?:"+[b+i+"?",i,S,f,e].join("|")+")",n=RegExp(v+"(?="+v+")|"+y+I,"g");a.exports=function(s){for(var d=n.lastIndex=0;n.test(s);)++d;return d}},function(a,A,e){var i=e(127),v=e(180),b=e(135),S=e(54),f=e(105),M=e(26),I=e(73),y=e(83),n=e(43),s=e(44);a.exports=function(d,E,O){var C=M(d),p=C||I(d)||s(d);if(E=S(E,4),O==null){var x=d&&d.constructor;O=p?C?new x:[]:n(d)&&y(x)?v(f(d)):{}}return(p?i:b)(d,function(T,N,Y){return E(O,T,N,Y)}),O}},function(a,A,e){var i=e(139),v=e(110),b=e(202),S=e(204),f=v(function(M){return b(i(M,1,S,!0))});a.exports=f},function(a,A,e){var i=e(72),v=e(85),b=e(26),S=i?i.isConcatSpreadable:void 0;a.exports=function(f){return b(f)||v(f)||!!(S&&f&&f[S])}},function(a,A){a.exports=function(e,i,v){switch(v.length){case 0:return e.call(i);case 1:return e.call(i,v[0]);case 2:return e.call(i,v[0],v[1]);case 3:return e.call(i,v[0],v[1],v[2])}return e.apply(i,v)}},function(a,A,e){var i=e(134),v=e(166),b=e(66),S=v?function(f,M){return v(f,"toString",{configurable:!0,enumerable:!1,value:i(M),writable:!0})}:b;a.exports=S},function(a,A){var e=Date.now;a.exports=function(i){var v=0,b=0;return function(){var S=e(),f=16-(S-b);if(b=S,f>0){if(++v>=800)return arguments[0]}else v=0;return i.apply(void 0,arguments)}}},function(a,A,e){var i=e(364);a.exports=function(v,b){return!!(v==null?0:v.length)&&i(v,b,0)>-1}},function(a,A,e){var i=e(203),v=e(365),b=e(366);a.exports=function(S,f,M){return f==f?b(S,f,M):i(S,v,M)}},function(a,A){a.exports=function(e){return e!=e}},function(a,A){a.exports=function(e,i,v){for(var b=v-1,S=e.length;++b<S;)if(e[b]===i)return b;return-1}},function(a,A){a.exports=function(e,i,v){for(var b=-1,S=e==null?0:e.length;++b<S;)if(v(i,e[b]))return!0;return!1}},function(a,A,e){var i=e(176),v=e(369),b=e(137),S=i&&1/b(new i([,-0]))[1]==1/0?function(f){return new i(f)}:v;a.exports=S},function(a,A){a.exports=function(){}},function(a,A,e){var i=e(109);a.exports=function(v,b){return i(b,function(S){return v[S]})}},function(a,A){a.exports="2.1.8"},function(a,A,e){var i=e(42),v=e(124);function b(f){return i.map(f.nodes(),function(M){var I=f.node(M),y=f.parent(M),n={v:M};return i.isUndefined(I)||(n.value=I),i.isUndefined(y)||(n.parent=y),n})}function S(f){return i.map(f.edges(),function(M){var I=f.edge(M),y={v:M.v,w:M.w};return i.isUndefined(M.name)||(y.name=M.name),i.isUndefined(I)||(y.value=I),y})}a.exports={write:function(M){var I={options:{directed:M.isDirected(),multigraph:M.isMultigraph(),compound:M.isCompound()},nodes:b(M),edges:S(M)};return i.isUndefined(M.graph())||(I.value=i.clone(M.graph())),I},read:function(M){var I=new v(M.options).setGraph(M.value);return i.each(M.nodes,function(y){I.setNode(y.v,y.value),y.parent&&I.setParent(y.v,y.parent)}),i.each(M.edges,function(y){I.setEdge({v:y.v,w:y.w,name:y.name},y.value)}),I}}},function(a,A,e){a.exports={components:e(374),dijkstra:e(206),dijkstraAll:e(375),findCycles:e(376),floydWarshall:e(377),isAcyclic:e(378),postorder:e(379),preorder:e(380),prim:e(381),tarjan:e(208),topsort:e(209)}},function(a,A,e){var i=e(42);a.exports=function(v){var b,S={},f=[];function M(I){i.has(S,I)||(S[I]=!0,b.push(I),i.each(v.successors(I),M),i.each(v.predecessors(I),M))}return i.each(v.nodes(),function(I){b=[],M(I),b.length&&f.push(b)}),f}},function(a,A,e){var i=e(206),v=e(42);a.exports=function(b,S,f){return v.transform(b.nodes(),function(M,I){M[I]=i(b,I,S,f)},{})}},function(a,A,e){var i=e(42),v=e(208);a.exports=function(b){return i.filter(v(b),function(S){return S.length>1||S.length===1&&b.hasEdge(S[0],S[0])})}},function(a,A,e){var i=e(42);a.exports=function(b,S,f){return function(M,I,y){var n={},s=M.nodes();return s.forEach(function(d){n[d]={},n[d][d]={distance:0},s.forEach(function(E){d!==E&&(n[d][E]={distance:Number.POSITIVE_INFINITY})}),y(d).forEach(function(E){var O=E.v===d?E.w:E.v,C=I(E);n[d][O]={distance:C,predecessor:d}})}),s.forEach(function(d){var E=n[d];s.forEach(function(O){var C=n[O];s.forEach(function(p){var x=C[d],T=E[p],N=C[p],Y=x.distance+T.distance;Y<N.distance&&(N.distance=Y,N.predecessor=T.predecessor)})})}),n}(b,S||v,f||function(M){return b.outEdges(M)})};var v=i.constant(1)},function(a,A,e){var i=e(209);a.exports=function(v){try{i(v)}catch(b){if(b instanceof i.CycleException)return!1;throw b}return!0}},function(a,A,e){var i=e(210);a.exports=function(v,b){return i(v,b,"post")}},function(a,A,e){var i=e(210);a.exports=function(v,b){return i(v,b,"pre")}},function(a,A,e){var i=e(42),v=e(124),b=e(207);a.exports=function(S,f){var M,I=new v,y={},n=new b;function s(E){var O=E.v===M?E.w:E.v,C=n.priority(O);if(C!==void 0){var p=f(E);p<C&&(y[O]=M,n.decrease(O,p))}}if(S.nodeCount()===0)return I;i.each(S.nodes(),function(E){n.add(E,Number.POSITIVE_INFINITY),I.setNode(E)}),n.decrease(S.nodes()[0],0);for(var d=!1;n.size()>0;){if(M=n.removeMin(),i.has(y,M))I.setEdge(M,y[M]);else{if(d)throw new Error("Input graph is not connected: "+S);d=!0}S.nodeEdges(M).forEach(s)}return I}},function(a,A,e){"use strict";var i=e(24),v=e(419),b=e(422),S=e(423),f=e(37).normalizeRanks,M=e(425),I=e(37).removeEmptyRanks,y=e(426),n=e(427),s=e(428),d=e(429),E=e(438),O=e(37),C=e(46).Graph;a.exports=function(wt,xt){var ft=xt&&xt.debugTiming?O.time:O.notime;ft("layout",function(){var Ft=ft("  buildLayoutGraph",function(){return function(kt){var Ot=new C({multigraph:!0,compound:!0}),X=St(kt.graph());return Ot.setGraph(i.merge({},x,ht(X,p),i.pick(X,T))),i.forEach(kt.nodes(),function(ct){var dt=St(kt.node(ct));Ot.setNode(ct,i.defaults(ht(dt,N),Y)),Ot.setParent(ct,kt.parent(ct))}),i.forEach(kt.edges(),function(ct){var dt=St(kt.edge(ct));Ot.setEdge(ct,i.merge({},nt,ht(dt,q),i.pick(dt,vt)))}),Ot}(wt)});ft("  runLayout",function(){(function(kt,Ot){Ot("    makeSpaceForEdgeLabels",function(){(function(X){var ct=X.graph();ct.ranksep/=2,i.forEach(X.edges(),function(dt){var pt=X.edge(dt);pt.minlen*=2,pt.labelpos.toLowerCase()!=="c"&&(ct.rankdir==="TB"||ct.rankdir==="BT"?pt.width+=pt.labeloffset:pt.height+=pt.labeloffset)})})(kt)}),Ot("    removeSelfEdges",function(){(function(X){i.forEach(X.edges(),function(ct){if(ct.v===ct.w){var dt=X.node(ct.v);dt.selfEdges||(dt.selfEdges=[]),dt.selfEdges.push({e:ct,label:X.edge(ct)}),X.removeEdge(ct)}})})(kt)}),Ot("    acyclic",function(){v.run(kt)}),Ot("    nestingGraph.run",function(){y.run(kt)}),Ot("    rank",function(){S(O.asNonCompoundGraph(kt))}),Ot("    injectEdgeLabelProxies",function(){(function(X){i.forEach(X.edges(),function(ct){var dt=X.edge(ct);if(dt.width&&dt.height){var pt=X.node(ct.v),Mt={rank:(X.node(ct.w).rank-pt.rank)/2+pt.rank,e:ct};O.addDummyNode(X,"edge-proxy",Mt,"_ep")}})})(kt)}),Ot("    removeEmptyRanks",function(){I(kt)}),Ot("    nestingGraph.cleanup",function(){y.cleanup(kt)}),Ot("    normalizeRanks",function(){f(kt)}),Ot("    assignRankMinMax",function(){(function(X){var ct=0;i.forEach(X.nodes(),function(dt){var pt=X.node(dt);pt.borderTop&&(pt.minRank=X.node(pt.borderTop).rank,pt.maxRank=X.node(pt.borderBottom).rank,ct=i.max(ct,pt.maxRank))}),X.graph().maxRank=ct})(kt)}),Ot("    removeEdgeLabelProxies",function(){(function(X){i.forEach(X.nodes(),function(ct){var dt=X.node(ct);dt.dummy==="edge-proxy"&&(X.edge(dt.e).labelRank=dt.rank,X.removeNode(ct))})})(kt)}),Ot("    normalize.run",function(){b.run(kt)}),Ot("    parentDummyChains",function(){M(kt)}),Ot("    addBorderSegments",function(){n(kt)}),Ot("    order",function(){d(kt)}),Ot("    insertSelfEdges",function(){(function(X){var ct=O.buildLayerMatrix(X);i.forEach(ct,function(dt){var pt=0;i.forEach(dt,function(Mt,tt){var lt=X.node(Mt);lt.order=tt+pt,i.forEach(lt.selfEdges,function(it){O.addDummyNode(X,"selfedge",{width:it.label.width,height:it.label.height,rank:lt.rank,order:tt+ ++pt,e:it.e,label:it.label},"_se")}),delete lt.selfEdges})})})(kt)}),Ot("    adjustCoordinateSystem",function(){s.adjust(kt)}),Ot("    position",function(){E(kt)}),Ot("    positionSelfEdges",function(){(function(X){i.forEach(X.nodes(),function(ct){var dt=X.node(ct);if(dt.dummy==="selfedge"){var pt=X.node(dt.e.v),Mt=pt.x+pt.width/2,tt=pt.y,lt=dt.x-Mt,it=pt.height/2;X.setEdge(dt.e,dt.label),X.removeNode(ct),dt.label.points=[{x:Mt+2*lt/3,y:tt-it},{x:Mt+5*lt/6,y:tt-it},{x:Mt+lt,y:tt},{x:Mt+5*lt/6,y:tt+it},{x:Mt+2*lt/3,y:tt+it}],dt.label.x=dt.x,dt.label.y=dt.y}})})(kt)}),Ot("    removeBorderNodes",function(){(function(X){i.forEach(X.nodes(),function(ct){if(X.children(ct).length){var dt=X.node(ct),pt=X.node(dt.borderTop),Mt=X.node(dt.borderBottom),tt=X.node(i.last(dt.borderLeft)),lt=X.node(i.last(dt.borderRight));dt.width=Math.abs(lt.x-tt.x),dt.height=Math.abs(Mt.y-pt.y),dt.x=tt.x+dt.width/2,dt.y=pt.y+dt.height/2}}),i.forEach(X.nodes(),function(ct){X.node(ct).dummy==="border"&&X.removeNode(ct)})})(kt)}),Ot("    normalize.undo",function(){b.undo(kt)}),Ot("    fixupEdgeLabelCoords",function(){(function(X){i.forEach(X.edges(),function(ct){var dt=X.edge(ct);if(i.has(dt,"x"))switch(dt.labelpos!=="l"&&dt.labelpos!=="r"||(dt.width-=dt.labeloffset),dt.labelpos){case"l":dt.x-=dt.width/2+dt.labeloffset;break;case"r":dt.x+=dt.width/2+dt.labeloffset}})})(kt)}),Ot("    undoCoordinateSystem",function(){s.undo(kt)}),Ot("    translateGraph",function(){(function(X){var ct=Number.POSITIVE_INFINITY,dt=0,pt=Number.POSITIVE_INFINITY,Mt=0,tt=X.graph(),lt=tt.marginx||0,it=tt.marginy||0;function U(P){var H=P.x,k=P.y,h=P.width,g=P.height;ct=Math.min(ct,H-h/2),dt=Math.max(dt,H+h/2),pt=Math.min(pt,k-g/2),Mt=Math.max(Mt,k+g/2)}i.forEach(X.nodes(),function(P){U(X.node(P))}),i.forEach(X.edges(),function(P){var H=X.edge(P);i.has(H,"x")&&U(H)}),ct-=lt,pt-=it,i.forEach(X.nodes(),function(P){var H=X.node(P);H.x-=ct,H.y-=pt}),i.forEach(X.edges(),function(P){var H=X.edge(P);i.forEach(H.points,function(k){k.x-=ct,k.y-=pt}),i.has(H,"x")&&(H.x-=ct),i.has(H,"y")&&(H.y-=pt)}),tt.width=dt-ct+lt,tt.height=Mt-pt+it})(kt)}),Ot("    assignNodeIntersects",function(){(function(X){i.forEach(X.edges(),function(ct){var dt,pt,Mt=X.edge(ct),tt=X.node(ct.v),lt=X.node(ct.w);Mt.points?(dt=Mt.points[0],pt=Mt.points[Mt.points.length-1]):(Mt.points=[],dt=lt,pt=tt),Mt.points.unshift(O.intersectRect(tt,dt)),Mt.points.push(O.intersectRect(lt,pt))})})(kt)}),Ot("    reversePoints",function(){(function(X){i.forEach(X.edges(),function(ct){var dt=X.edge(ct);dt.reversed&&dt.points.reverse()})})(kt)}),Ot("    acyclic.undo",function(){v.undo(kt)})})(Ft,ft)}),ft("  updateInputGraph",function(){(function(kt,Ot){i.forEach(kt.nodes(),function(X){var ct=kt.node(X),dt=Ot.node(X);ct&&(ct.x=dt.x,ct.y=dt.y,Ot.children(X).length&&(ct.width=dt.width,ct.height=dt.height))}),i.forEach(kt.edges(),function(X){var ct=kt.edge(X),dt=Ot.edge(X);ct.points=dt.points,i.has(dt,"x")&&(ct.x=dt.x,ct.y=dt.y)}),kt.graph().width=Ot.graph().width,kt.graph().height=Ot.graph().height})(wt,Ft)})})};var p=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],N=["width","height"],Y={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],nt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},vt=["labelpos"];function ht(wt,xt){return i.mapValues(i.pick(wt,xt),Number)}function St(wt){var xt={};return i.forEach(wt,function(ft,Ft){xt[Ft.toLowerCase()]=ft}),xt}},function(a,A,e){var i=e(162);a.exports=function(v){return i(v,5)}},function(a,A,e){var i=e(110),v=e(71),b=e(111),S=e(65),f=Object.prototype,M=f.hasOwnProperty,I=i(function(y,n){y=Object(y);var s=-1,d=n.length,E=d>2?n[2]:void 0;for(E&&b(n[0],n[1],E)&&(d=1);++s<d;)for(var O=n[s],C=S(O),p=-1,x=C.length;++p<x;){var T=C[p],N=y[T];(N===void 0||v(N,f[T])&&!M.call(y,T))&&(y[T]=O[T])}return y});a.exports=I},function(a,A,e){var i=e(386)(e(387));a.exports=i},function(a,A,e){var i=e(54),v=e(53),b=e(58);a.exports=function(S){return function(f,M,I){var y=Object(f);if(!v(f)){var n=i(M,3);f=b(f),M=function(E){return n(y[E],E,y)}}var s=S(f,M,I);return s>-1?y[n?f[s]:s]:void 0}}},function(a,A,e){var i=e(203),v=e(54),b=e(388),S=Math.max;a.exports=function(f,M,I){var y=f==null?0:f.length;if(!y)return-1;var n=I==null?0:b(I);return n<0&&(n=S(y+n,0)),i(f,v(M,3),n)}},function(a,A,e){var i=e(211);a.exports=function(v){var b=i(v),S=b%1;return b==b?S?b-S:b:0}},function(a,A,e){var i=e(43),v=e(75),b=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,M=/^0o[0-7]+$/i,I=parseInt;a.exports=function(y){if(typeof y=="number")return y;if(v(y))return NaN;if(i(y)){var n=typeof y.valueOf=="function"?y.valueOf():y;y=i(n)?n+"":n}if(typeof y!="string")return y===0?y:+y;y=y.replace(b,"");var s=f.test(y);return s||M.test(y)?I(y.slice(2),s?2:8):S.test(y)?NaN:+y}},function(a,A,e){var i=e(136),v=e(183),b=e(65);a.exports=function(S,f){return S==null?S:i(S,v(f),b)}},function(a,A){a.exports=function(e){var i=e==null?0:e.length;return i?e[i-1]:void 0}},function(a,A,e){var i=e(101),v=e(135),b=e(54);a.exports=function(S,f){var M={};return f=b(f,3),v(S,function(I,y,n){i(M,y,f(I,y,n))}),M}},function(a,A,e){var i=e(140),v=e(394),b=e(66);a.exports=function(S){return S&&S.length?i(S,b,v):void 0}},function(a,A){a.exports=function(e,i){return e>i}},function(a,A,e){var i=e(396),v=e(399)(function(b,S,f){i(b,S,f)});a.exports=v},function(a,A,e){var i=e(95),v=e(213),b=e(136),S=e(397),f=e(43),M=e(65),I=e(214);a.exports=function y(n,s,d,E,O){n!==s&&b(s,function(C,p){if(O||(O=new i),f(C))S(n,s,p,d,y,E,O);else{var x=E?E(I(n,p),C,p+"",n,s,O):void 0;x===void 0&&(x=C),v(n,p,x)}},M)}},function(a,A,e){var i=e(213),v=e(169),b=e(178),S=e(170),f=e(179),M=e(85),I=e(26),y=e(204),n=e(73),s=e(83),d=e(43),E=e(151),O=e(44),C=e(214),p=e(398);a.exports=function(x,T,N,Y,q,nt,vt){var ht=C(x,N),St=C(T,N),wt=vt.get(St);if(wt)i(x,N,wt);else{var xt=nt?nt(ht,St,N+"",x,T,vt):void 0,ft=xt===void 0;if(ft){var Ft=I(St),kt=!Ft&&n(St),Ot=!Ft&&!kt&&O(St);xt=St,Ft||kt||Ot?I(ht)?xt=ht:y(ht)?xt=S(ht):kt?(ft=!1,xt=v(St,!0)):Ot?(ft=!1,xt=b(St,!0)):xt=[]:E(St)||M(St)?(xt=ht,M(ht)?xt=p(ht):d(ht)&&!s(ht)||(xt=f(St))):ft=!1}ft&&(vt.set(St,xt),q(xt,St,Y,nt,vt),vt.delete(St)),i(x,N,xt)}}},function(a,A,e){var i=e(84),v=e(65);a.exports=function(b){return i(b,v(b))}},function(a,A,e){var i=e(110),v=e(111);a.exports=function(b){return i(function(S,f){var M=-1,I=f.length,y=I>1?f[I-1]:void 0,n=I>2?f[2]:void 0;for(y=b.length>3&&typeof y=="function"?(I--,y):void 0,n&&v(f[0],f[1],n)&&(y=I<3?void 0:y,I=1),S=Object(S);++M<I;){var s=f[M];s&&b(S,s,M,y)}return S})}},function(a,A,e){var i=e(140),v=e(215),b=e(66);a.exports=function(S){return S&&S.length?i(S,b,v):void 0}},function(a,A,e){var i=e(140),v=e(54),b=e(215);a.exports=function(S,f){return S&&S.length?i(S,v(f,2),b):void 0}},function(a,A,e){var i=e(47);a.exports=function(){return i.Date.now()}},function(a,A,e){var i=e(404),v=e(407)(function(b,S){return b==null?{}:i(b,S)});a.exports=v},function(a,A,e){var i=e(405),v=e(192);a.exports=function(b,S){return i(b,S,function(f,M){return v(b,M)})}},function(a,A,e){var i=e(107),v=e(406),b=e(108);a.exports=function(S,f,M){for(var I=-1,y=f.length,n={};++I<y;){var s=f[I],d=i(S,s);M(d,s)&&v(n,b(s,S),d)}return n}},function(a,A,e){var i=e(100),v=e(108),b=e(102),S=e(43),f=e(87);a.exports=function(M,I,y,n){if(!S(M))return M;for(var s=-1,d=(I=v(I,M)).length,E=d-1,O=M;O!=null&&++s<d;){var C=f(I[s]),p=y;if(C==="__proto__"||C==="constructor"||C==="prototype")return M;if(s!=E){var x=O[C];(p=n?n(x,C,O):void 0)===void 0&&(p=S(x)?x:b(I[s+1])?[]:{})}i(O,C,p),O=O[C]}return M}},function(a,A,e){var i=e(212),v=e(200),b=e(201);a.exports=function(S){return b(v(S,void 0,i),S+"")}},function(a,A,e){var i=e(409)();a.exports=i},function(a,A,e){var i=e(410),v=e(111),b=e(211);a.exports=function(S){return function(f,M,I){return I&&typeof I!="number"&&v(f,M,I)&&(M=I=void 0),f=b(f),M===void 0?(M=f,f=0):M=b(M),I=I===void 0?f<M?1:-1:b(I),i(f,M,I,S)}}},function(a,A){var e=Math.ceil,i=Math.max;a.exports=function(v,b,S,f){for(var M=-1,I=i(e((b-v)/(S||1)),0),y=Array(I);I--;)y[f?I:++M]=v,v+=S;return y}},function(a,A,e){var i=e(139),v=e(412),b=e(110),S=e(111),f=b(function(M,I){if(M==null)return[];var y=I.length;return y>1&&S(M,I[0],I[1])?I=[]:y>2&&S(I[0],I[1],I[2])&&(I=[I[0]]),v(M,i(I,1),[])});a.exports=f},function(a,A,e){var i=e(109),v=e(107),b=e(54),S=e(198),f=e(413),M=e(103),I=e(414),y=e(66),n=e(26);a.exports=function(s,d,E){d=d.length?i(d,function(p){return n(p)?function(x){return v(x,p.length===1?p[0]:p)}:p}):[y];var O=-1;d=i(d,M(b));var C=S(s,function(p,x,T){return{criteria:i(d,function(N){return N(p)}),index:++O,value:p}});return f(C,function(p,x){return I(p,x,E)})}},function(a,A){a.exports=function(e,i){var v=e.length;for(e.sort(i);v--;)e[v]=e[v].value;return e}},function(a,A,e){var i=e(415);a.exports=function(v,b,S){for(var f=-1,M=v.criteria,I=b.criteria,y=M.length,n=S.length;++f<y;){var s=i(M[f],I[f]);if(s)return f>=n?s:s*(S[f]=="desc"?-1:1)}return v.index-b.index}},function(a,A,e){var i=e(75);a.exports=function(v,b){if(v!==b){var S=v!==void 0,f=v===null,M=v==v,I=i(v),y=b!==void 0,n=b===null,s=b==b,d=i(b);if(!n&&!d&&!I&&v>b||I&&y&&s&&!n&&!d||f&&y&&s||!S&&s||!M)return 1;if(!f&&!I&&!d&&v<b||d&&S&&M&&!f&&!I||n&&S&&M||!y&&M||!s)return-1}return 0}},function(a,A,e){var i=e(191),v=0;a.exports=function(b){var S=++v;return i(b)+S}},function(a,A,e){var i=e(100),v=e(418);a.exports=function(b,S){return v(b||[],S||[],i)}},function(a,A){a.exports=function(e,i,v){for(var b=-1,S=e.length,f=i.length,M={};++b<S;){var I=b<f?i[b]:void 0;v(M,e[b],I)}return M}},function(a,A,e){"use strict";var i=e(24),v=e(420);a.exports={run:function(S){var f=S.graph().acyclicer==="greedy"?v(S,function(M){return function(I){return M.edge(I).weight}}(S)):function(M){var I=[],y={},n={};function s(d){i.has(n,d)||(n[d]=!0,y[d]=!0,i.forEach(M.outEdges(d),function(E){i.has(y,E.w)?I.push(E):s(E.w)}),delete y[d])}return i.forEach(M.nodes(),s),I}(S);i.forEach(f,function(M){var I=S.edge(M);S.removeEdge(M),I.forwardName=M.name,I.reversed=!0,S.setEdge(M.w,M.v,I,i.uniqueId("rev"))})},undo:function(S){i.forEach(S.edges(),function(f){var M=S.edge(f);if(M.reversed){S.removeEdge(f);var I=M.forwardName;delete M.reversed,delete M.forwardName,S.setEdge(f.w,f.v,M,I)}})}}},function(a,A,e){var i=e(24),v=e(46).Graph,b=e(421);a.exports=function(I,y){if(I.nodeCount()<=1)return[];var n=function(d,E){var O=new v,C=0,p=0;i.forEach(d.nodes(),function(N){O.setNode(N,{v:N,in:0,out:0})}),i.forEach(d.edges(),function(N){var Y=O.edge(N.v,N.w)||0,q=E(N),nt=Y+q;O.setEdge(N.v,N.w,nt),p=Math.max(p,O.node(N.v).out+=q),C=Math.max(C,O.node(N.w).in+=q)});var x=i.range(p+C+3).map(function(){return new b}),T=C+1;return i.forEach(O.nodes(),function(N){M(x,T,O.node(N))}),{graph:O,buckets:x,zeroIdx:T}}(I,y||S),s=function(d,E,O){for(var C,p=[],x=E[E.length-1],T=E[0];d.nodeCount();){for(;C=T.dequeue();)f(d,E,O,C);for(;C=x.dequeue();)f(d,E,O,C);if(d.nodeCount()){for(var N=E.length-2;N>0;--N)if(C=E[N].dequeue()){p=p.concat(f(d,E,O,C,!0));break}}}return p}(n.graph,n.buckets,n.zeroIdx);return i.flatten(i.map(s,function(d){return I.outEdges(d.v,d.w)}),!0)};var S=i.constant(1);function f(I,y,n,s,d){var E=d?[]:void 0;return i.forEach(I.inEdges(s.v),function(O){var C=I.edge(O),p=I.node(O.v);d&&E.push({v:O.v,w:O.w}),p.out-=C,M(y,n,p)}),i.forEach(I.outEdges(s.v),function(O){var C=I.edge(O),p=O.w,x=I.node(p);x.in-=C,M(y,n,x)}),I.removeNode(s.v),E}function M(I,y,n){n.out?n.in?I[n.out-n.in+y].enqueue(n):I[I.length-1].enqueue(n):I[0].enqueue(n)}},function(a,A){function e(){var b={};b._next=b._prev=b,this._sentinel=b}function i(b){b._prev._next=b._next,b._next._prev=b._prev,delete b._next,delete b._prev}function v(b,S){if(b!=="_next"&&b!=="_prev")return S}a.exports=e,e.prototype.dequeue=function(){var b=this._sentinel,S=b._prev;if(S!==b)return i(S),S},e.prototype.enqueue=function(b){var S=this._sentinel;b._prev&&b._next&&i(b),b._next=S._next,S._next._prev=b,S._next=b,b._prev=S},e.prototype.toString=function(){for(var b=[],S=this._sentinel,f=S._prev;f!==S;)b.push(JSON.stringify(f,v)),f=f._prev;return"["+b.join(", ")+"]"}},function(a,A,e){"use strict";var i=e(24),v=e(37);a.exports={run:function(S){S.graph().dummyChains=[],i.forEach(S.edges(),function(f){(function(M,I){var y,n,s,d=I.v,E=M.node(d).rank,O=I.w,C=M.node(O).rank,p=I.name,x=M.edge(I),T=x.labelRank;if(C!==E+1){for(M.removeEdge(I),s=0,++E;E<C;++s,++E)x.points=[],n={width:0,height:0,edgeLabel:x,edgeObj:I,rank:E},y=v.addDummyNode(M,"edge",n,"_d"),E===T&&(n.width=x.width,n.height=x.height,n.dummy="edge-label",n.labelpos=x.labelpos),M.setEdge(d,y,{weight:x.weight},p),s===0&&M.graph().dummyChains.push(y),d=y;M.setEdge(d,O,{weight:x.weight},p)}})(S,f)})},undo:function(S){i.forEach(S.graph().dummyChains,function(f){var M,I=S.node(f),y=I.edgeLabel;for(S.setEdge(I.edgeObj,y);I.dummy;)M=S.successors(f)[0],S.removeNode(f),y.points.push({x:I.x,y:I.y}),I.dummy==="edge-label"&&(y.x=I.x,y.y=I.y,y.width=I.width,y.height=I.height),f=M,I=S.node(f)})}}},function(a,A,e){"use strict";var i=e(112).longestPath,v=e(216),b=e(424);a.exports=function(M){switch(M.graph().ranker){case"network-simplex":f(M);break;case"tight-tree":(function(I){i(I),v(I)})(M);break;case"longest-path":S(M);break;default:f(M)}};var S=i;function f(M){b(M)}},function(a,A,e){"use strict";var i=e(24),v=e(216),b=e(112).slack,S=e(112).longestPath,f=e(46).alg.preorder,M=e(46).alg.postorder,I=e(37).simplify;function y(T){T=I(T),S(T);var N,Y=v(T);for(d(Y),n(Y,T);N=O(Y);)p(Y,T,N,C(Y,T,N))}function n(T,N){var Y=M(T,T.nodes());Y=Y.slice(0,Y.length-1),i.forEach(Y,function(q){(function(nt,vt,ht){var St=nt.node(ht).parent;nt.edge(ht,St).cutvalue=s(nt,vt,ht)})(T,N,q)})}function s(T,N,Y){var q=T.node(Y).parent,nt=!0,vt=N.edge(Y,q),ht=0;return vt||(nt=!1,vt=N.edge(q,Y)),ht=vt.weight,i.forEach(N.nodeEdges(Y),function(St){var wt,xt,ft=St.v===Y,Ft=ft?St.w:St.v;if(Ft!==q){var kt=ft===nt,Ot=N.edge(St).weight;if(ht+=kt?Ot:-Ot,wt=Y,xt=Ft,T.hasEdge(wt,xt)){var X=T.edge(Y,Ft).cutvalue;ht+=kt?-X:X}}}),ht}function d(T,N){arguments.length<2&&(N=T.nodes()[0]),E(T,{},1,N)}function E(T,N,Y,q,nt){var vt=Y,ht=T.node(q);return N[q]=!0,i.forEach(T.neighbors(q),function(St){i.has(N,St)||(Y=E(T,N,Y,St,q))}),ht.low=vt,ht.lim=Y++,nt?ht.parent=nt:delete ht.parent,Y}function O(T){return i.find(T.edges(),function(N){return T.edge(N).cutvalue<0})}function C(T,N,Y){var q=Y.v,nt=Y.w;N.hasEdge(q,nt)||(q=Y.w,nt=Y.v);var vt=T.node(q),ht=T.node(nt),St=vt,wt=!1;vt.lim>ht.lim&&(St=ht,wt=!0);var xt=i.filter(N.edges(),function(ft){return wt===x(T,T.node(ft.v),St)&&wt!==x(T,T.node(ft.w),St)});return i.minBy(xt,function(ft){return b(N,ft)})}function p(T,N,Y,q){var nt=Y.v,vt=Y.w;T.removeEdge(nt,vt),T.setEdge(q.v,q.w,{}),d(T),n(T,N),function(ht,St){var wt=i.find(ht.nodes(),function(ft){return!St.node(ft).parent}),xt=f(ht,wt);xt=xt.slice(1),i.forEach(xt,function(ft){var Ft=ht.node(ft).parent,kt=St.edge(ft,Ft),Ot=!1;kt||(kt=St.edge(Ft,ft),Ot=!0),St.node(ft).rank=St.node(Ft).rank+(Ot?kt.minlen:-kt.minlen)})}(T,N)}function x(T,N,Y){return Y.low<=N.lim&&N.lim<=Y.lim}a.exports=y,y.initLowLimValues=d,y.initCutValues=n,y.calcCutValue=s,y.leaveEdge=O,y.enterEdge=C,y.exchangeEdges=p},function(a,A,e){var i=e(24);a.exports=function(v){var b=function(S){var f={},M=0;function I(y){var n=M;i.forEach(S.children(y),I),f[y]={low:n,lim:M++}}return i.forEach(S.children(),I),f}(v);i.forEach(v.graph().dummyChains,function(S){for(var f=v.node(S),M=f.edgeObj,I=function(O,C,p,x){var T,N,Y=[],q=[],nt=Math.min(C[p].low,C[x].low),vt=Math.max(C[p].lim,C[x].lim);T=p;do T=O.parent(T),Y.push(T);while(T&&(C[T].low>nt||vt>C[T].lim));for(N=T,T=x;(T=O.parent(T))!==N;)q.push(T);return{path:Y.concat(q.reverse()),lca:N}}(v,b,M.v,M.w),y=I.path,n=I.lca,s=0,d=y[s],E=!0;S!==M.w;){if(f=v.node(S),E){for(;(d=y[s])!==n&&v.node(d).maxRank<f.rank;)s++;d===n&&(E=!1)}if(!E){for(;s<y.length-1&&v.node(d=y[s+1]).minRank<=f.rank;)s++;d=y[s]}v.setParent(S,d),S=v.successors(S)[0]}})}},function(a,A,e){var i=e(24),v=e(37);a.exports={run:function(S){var f=v.addDummyNode(S,"root",{},"_root"),M=function(s){var d={};return i.forEach(s.children(),function(E){(function O(C,p){var x=s.children(C);x&&x.length&&i.forEach(x,function(T){O(T,p+1)}),d[C]=p})(E,1)}),d}(S),I=i.max(i.values(M))-1,y=2*I+1;S.graph().nestingRoot=f,i.forEach(S.edges(),function(s){S.edge(s).minlen*=y});var n=function(s){return i.reduce(s.edges(),function(d,E){return d+s.edge(E).weight},0)}(S)+1;i.forEach(S.children(),function(s){(function d(E,O,C,p,x,T,N){var Y=E.children(N);if(!Y.length)return void(N!==O&&E.setEdge(O,N,{weight:0,minlen:C}));var q=v.addBorderNode(E,"_bt"),nt=v.addBorderNode(E,"_bb"),vt=E.node(N);E.setParent(q,N),vt.borderTop=q,E.setParent(nt,N),vt.borderBottom=nt,i.forEach(Y,function(ht){d(E,O,C,p,x,T,ht);var St=E.node(ht),wt=St.borderTop?St.borderTop:ht,xt=St.borderBottom?St.borderBottom:ht,ft=St.borderTop?p:2*p,Ft=wt!==xt?1:x-T[N]+1;E.setEdge(q,wt,{weight:ft,minlen:Ft,nestingEdge:!0}),E.setEdge(xt,nt,{weight:ft,minlen:Ft,nestingEdge:!0})}),E.parent(N)||E.setEdge(O,q,{weight:0,minlen:x+T[N]})})(S,f,y,n,I,M,s)}),S.graph().nodeRankFactor=y},cleanup:function(S){var f=S.graph();S.removeNode(f.nestingRoot),delete f.nestingRoot,i.forEach(S.edges(),function(M){S.edge(M).nestingEdge&&S.removeEdge(M)})}}},function(a,A,e){var i=e(24),v=e(37);function b(S,f,M,I,y,n){var s={width:0,height:0,rank:n,borderType:f},d=y[f][n-1],E=v.addDummyNode(S,"border",s,M);y[f][n]=E,S.setParent(E,I),d&&S.setEdge(d,E,{weight:1})}a.exports=function(S){i.forEach(S.children(),function f(M){var I=S.children(M),y=S.node(M);if(I.length&&i.forEach(I,f),i.has(y,"minRank")){y.borderLeft=[],y.borderRight=[];for(var n=y.minRank,s=y.maxRank+1;n<s;++n)b(S,"borderLeft","_bl",M,y,n),b(S,"borderRight","_br",M,y,n)}})}},function(a,A,e){"use strict";var i=e(24);function v(M){i.forEach(M.nodes(),function(I){b(M.node(I))}),i.forEach(M.edges(),function(I){b(M.edge(I))})}function b(M){var I=M.width;M.width=M.height,M.height=I}function S(M){M.y=-M.y}function f(M){var I=M.x;M.x=M.y,M.y=I}a.exports={adjust:function(I){var y=I.graph().rankdir.toLowerCase();y!=="lr"&&y!=="rl"||v(I)},undo:function(I){var y=I.graph().rankdir.toLowerCase();y!=="bt"&&y!=="rl"||function(n){i.forEach(n.nodes(),function(s){S(n.node(s))}),i.forEach(n.edges(),function(s){var d=n.edge(s);i.forEach(d.points,S),i.has(d,"y")&&S(d)})}(I),y!=="lr"&&y!=="rl"||(function(n){i.forEach(n.nodes(),function(s){f(n.node(s))}),i.forEach(n.edges(),function(s){var d=n.edge(s);i.forEach(d.points,f),i.has(d,"x")&&f(d)})}(I),v(I))}}},function(a,A,e){"use strict";var i=e(24),v=e(430),b=e(431),S=e(432),f=e(436),M=e(437),I=e(46).Graph,y=e(37);function n(E,O,C){return i.map(O,function(p){return f(E,p,C)})}function s(E,O){var C=new I;i.forEach(E,function(p){var x=p.graph().root,T=S(p,x,C,O);i.forEach(T.vs,function(N,Y){p.node(N).order=Y}),M(p,C,T.vs)})}function d(E,O){i.forEach(O,function(C){i.forEach(C,function(p,x){E.node(p).order=x})})}a.exports=function(E){var O=y.maxRank(E),C=n(E,i.range(1,O+1),"inEdges"),p=n(E,i.range(O-1,-1,-1),"outEdges"),x=v(E);d(E,x);for(var T,N=Number.POSITIVE_INFINITY,Y=0,q=0;q<4;++Y,++q){s(Y%2?C:p,Y%4>=2),x=y.buildLayerMatrix(E);var nt=b(E,x);nt<N&&(q=0,T=i.cloneDeep(x),N=nt)}d(E,T)}},function(a,A,e){"use strict";var i=e(24);a.exports=function(v){var b={},S=i.filter(v.nodes(),function(y){return!v.children(y).length}),f=i.max(i.map(S,function(y){return v.node(y).rank})),M=i.map(i.range(f+1),function(){return[]}),I=i.sortBy(S,function(y){return v.node(y).rank});return i.forEach(I,function y(n){if(!i.has(b,n)){b[n]=!0;var s=v.node(n);M[s.rank].push(n),i.forEach(v.successors(n),y)}}),M}},function(a,A,e){"use strict";var i=e(24);function v(b,S,f){for(var M=i.zipObject(f,i.map(f,function(E,O){return O})),I=i.flatten(i.map(S,function(E){return i.sortBy(i.map(b.outEdges(E),function(O){return{pos:M[O.w],weight:b.edge(O).weight}}),"pos")}),!0),y=1;y<f.length;)y<<=1;var n=2*y-1;y-=1;var s=i.map(new Array(n),function(){return 0}),d=0;return i.forEach(I.forEach(function(E){var O=E.pos+y;s[O]+=E.weight;for(var C=0;O>0;)O%2&&(C+=s[O+1]),s[O=O-1>>1]+=E.weight;d+=E.weight*C})),d}a.exports=function(b,S){for(var f=0,M=1;M<S.length;++M)f+=v(b,S[M-1],S[M]);return f}},function(a,A,e){var i=e(24),v=e(433),b=e(434),S=e(435);a.exports=function f(M,I,y,n){var s=M.children(I),d=M.node(I),E=d?d.borderLeft:void 0,O=d?d.borderRight:void 0,C={};E&&(s=i.filter(s,function(q){return q!==E&&q!==O}));var p=v(M,s);i.forEach(p,function(q){if(M.children(q.v).length){var nt=f(M,q.v,y,n);C[q.v]=nt,i.has(nt,"barycenter")&&(vt=q,ht=nt,i.isUndefined(vt.barycenter)?(vt.barycenter=ht.barycenter,vt.weight=ht.weight):(vt.barycenter=(vt.barycenter*vt.weight+ht.barycenter*ht.weight)/(vt.weight+ht.weight),vt.weight+=ht.weight))}var vt,ht});var x=b(p,y);(function(q,nt){i.forEach(q,function(vt){vt.vs=i.flatten(vt.vs.map(function(ht){return nt[ht]?nt[ht].vs:ht}),!0)})})(x,C);var T=S(x,n);if(E&&(T.vs=i.flatten([E,T.vs,O],!0),M.predecessors(E).length)){var N=M.node(M.predecessors(E)[0]),Y=M.node(M.predecessors(O)[0]);i.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+N.order+Y.order)/(T.weight+2),T.weight+=2}return T}},function(a,A,e){var i=e(24);a.exports=function(v,b){return i.map(b,function(S){var f=v.inEdges(S);if(f.length){var M=i.reduce(f,function(I,y){var n=v.edge(y),s=v.node(y.v);return{sum:I.sum+n.weight*s.order,weight:I.weight+n.weight}},{sum:0,weight:0});return{v:S,barycenter:M.sum/M.weight,weight:M.weight}}return{v:S}})}},function(a,A,e){"use strict";var i=e(24);a.exports=function(v,b){var S={};return i.forEach(v,function(f,M){var I=S[f.v]={indegree:0,in:[],out:[],vs:[f.v],i:M};i.isUndefined(f.barycenter)||(I.barycenter=f.barycenter,I.weight=f.weight)}),i.forEach(b.edges(),function(f){var M=S[f.v],I=S[f.w];i.isUndefined(M)||i.isUndefined(I)||(I.indegree++,M.out.push(S[f.w]))}),function(f){var M=[];function I(s){return function(d){d.merged||(i.isUndefined(d.barycenter)||i.isUndefined(s.barycenter)||d.barycenter>=s.barycenter)&&function(E,O){var C=0,p=0;E.weight&&(C+=E.barycenter*E.weight,p+=E.weight),O.weight&&(C+=O.barycenter*O.weight,p+=O.weight),E.vs=O.vs.concat(E.vs),E.barycenter=C/p,E.weight=p,E.i=Math.min(O.i,E.i),O.merged=!0}(s,d)}}function y(s){return function(d){d.in.push(s),--d.indegree==0&&f.push(d)}}for(;f.length;){var n=f.pop();M.push(n),i.forEach(n.in.reverse(),I(n)),i.forEach(n.out,y(n))}return i.map(i.filter(M,function(s){return!s.merged}),function(s){return i.pick(s,["vs","i","barycenter","weight"])})}(i.filter(S,function(f){return!f.indegree}))}},function(a,A,e){var i=e(24),v=e(37);function b(S,f,M){for(var I;f.length&&(I=i.last(f)).i<=M;)f.pop(),S.push(I.vs),M++;return M}a.exports=function(S,f){var M=v.partition(S,function(p){return i.has(p,"barycenter")}),I=M.lhs,y=i.sortBy(M.rhs,function(p){return-p.i}),n=[],s=0,d=0,E=0;I.sort((O=!!f,function(p,x){return p.barycenter<x.barycenter?-1:p.barycenter>x.barycenter?1:O?x.i-p.i:p.i-x.i})),E=b(n,y,E),i.forEach(I,function(p){E+=p.vs.length,n.push(p.vs),s+=p.barycenter*p.weight,d+=p.weight,E=b(n,y,E)});var O,C={vs:i.flatten(n,!0)};return d&&(C.barycenter=s/d,C.weight=d),C}},function(a,A,e){var i=e(24),v=e(46).Graph;a.exports=function(b,S,f){var M=function(y){for(var n;y.hasNode(n=i.uniqueId("_root")););return n}(b),I=new v({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(y){return b.node(y)});return i.forEach(b.nodes(),function(y){var n=b.node(y),s=b.parent(y);(n.rank===S||n.minRank<=S&&S<=n.maxRank)&&(I.setNode(y),I.setParent(y,s||M),i.forEach(b[f](y),function(d){var E=d.v===y?d.w:d.v,O=I.edge(E,y),C=i.isUndefined(O)?0:O.weight;I.setEdge(E,y,{weight:b.edge(d).weight+C})}),i.has(n,"minRank")&&I.setNode(y,{borderLeft:n.borderLeft[S],borderRight:n.borderRight[S]}))}),I}},function(a,A,e){var i=e(24);a.exports=function(v,b,S){var f,M={};i.forEach(S,function(I){for(var y,n,s=v.parent(I);s;){if((y=v.parent(s))?(n=M[y],M[y]=s):(n=f,f=s),n&&n!==s)return void b.setEdge(n,s);s=y}})}},function(a,A,e){"use strict";var i=e(24),v=e(37),b=e(439).positionX;a.exports=function(S){(function(f){var M=v.buildLayerMatrix(f),I=f.graph().ranksep,y=0;i.forEach(M,function(n){var s=i.max(i.map(n,function(d){return f.node(d).height}));i.forEach(n,function(d){f.node(d).y=y+s/2}),y+=s+I})})(S=v.asNonCompoundGraph(S)),i.forEach(b(S),function(f,M){S.node(M).x=f})}},function(a,A,e){"use strict";var i=e(24),v=e(46).Graph,b=e(37);function S(O,C){var p={};return i.reduce(C,function(x,T){var N=0,Y=0,q=x.length,nt=i.last(T);return i.forEach(T,function(vt,ht){var St=function(xt,ft){if(xt.node(ft).dummy)return i.find(xt.predecessors(ft),function(Ft){return xt.node(Ft).dummy})}(O,vt),wt=St?O.node(St).order:q;(St||vt===nt)&&(i.forEach(T.slice(Y,ht+1),function(xt){i.forEach(O.predecessors(xt),function(ft){var Ft=O.node(ft),kt=Ft.order;!(kt<N||wt<kt)||Ft.dummy&&O.node(xt).dummy||M(p,ft,xt)})}),Y=ht+1,N=wt)}),T}),p}function f(O,C){var p={};function x(T,N,Y,q,nt){var vt;i.forEach(i.range(N,Y),function(ht){vt=T[ht],O.node(vt).dummy&&i.forEach(O.predecessors(vt),function(St){var wt=O.node(St);wt.dummy&&(wt.order<q||wt.order>nt)&&M(p,St,vt)})})}return i.reduce(C,function(T,N){var Y,q=-1,nt=0;return i.forEach(N,function(vt,ht){if(O.node(vt).dummy==="border"){var St=O.predecessors(vt);St.length&&(Y=O.node(St[0]).order,x(N,nt,ht,q,Y),nt=ht,q=Y)}x(N,nt,N.length,Y,T.length)}),N}),p}function M(O,C,p){if(C>p){var x=C;C=p,p=x}var T=O[C];T||(O[C]=T={}),T[p]=!0}function I(O,C,p){if(C>p){var x=C;C=p,p=x}return i.has(O[C],p)}function y(O,C,p,x){var T={},N={},Y={};return i.forEach(C,function(q){i.forEach(q,function(nt,vt){T[nt]=nt,N[nt]=nt,Y[nt]=vt})}),i.forEach(C,function(q){var nt=-1;i.forEach(q,function(vt){var ht=x(vt);if(ht.length)for(var St=((ht=i.sortBy(ht,function(Ft){return Y[Ft]})).length-1)/2,wt=Math.floor(St),xt=Math.ceil(St);wt<=xt;++wt){var ft=ht[wt];N[vt]===vt&&nt<Y[ft]&&!I(p,vt,ft)&&(N[ft]=vt,N[vt]=T[vt]=T[ft],nt=Y[ft])}})}),{root:T,align:N}}function n(O,C,p,x,T){var N={},Y=function(vt,ht,St,wt){var xt=new v,ft=vt.graph(),Ft=function(kt,Ot,X){return function(ct,dt,pt){var Mt,tt=ct.node(dt),lt=ct.node(pt),it=0;if(it+=tt.width/2,i.has(tt,"labelpos"))switch(tt.labelpos.toLowerCase()){case"l":Mt=-tt.width/2;break;case"r":Mt=tt.width/2}if(Mt&&(it+=X?Mt:-Mt),Mt=0,it+=(tt.dummy?Ot:kt)/2,it+=(lt.dummy?Ot:kt)/2,it+=lt.width/2,i.has(lt,"labelpos"))switch(lt.labelpos.toLowerCase()){case"l":Mt=lt.width/2;break;case"r":Mt=-lt.width/2}return Mt&&(it+=X?Mt:-Mt),Mt=0,it}}(ft.nodesep,ft.edgesep,wt);return i.forEach(ht,function(kt){var Ot;i.forEach(kt,function(X){var ct=St[X];if(xt.setNode(ct),Ot){var dt=St[Ot],pt=xt.edge(dt,ct);xt.setEdge(dt,ct,Math.max(Ft(vt,X,Ot),pt||0))}Ot=X})}),xt}(O,C,p,T),q=T?"borderLeft":"borderRight";function nt(vt,ht){for(var St=Y.nodes(),wt=St.pop(),xt={};wt;)xt[wt]?vt(wt):(xt[wt]=!0,St.push(wt),St=St.concat(ht(wt))),wt=St.pop()}return nt(function(vt){N[vt]=Y.inEdges(vt).reduce(function(ht,St){return Math.max(ht,N[St.v]+Y.edge(St))},0)},Y.predecessors.bind(Y)),nt(function(vt){var ht=Y.outEdges(vt).reduce(function(wt,xt){return Math.min(wt,N[xt.w]-Y.edge(xt))},Number.POSITIVE_INFINITY),St=O.node(vt);ht!==Number.POSITIVE_INFINITY&&St.borderType!==q&&(N[vt]=Math.max(N[vt],ht))},Y.successors.bind(Y)),i.forEach(x,function(vt){N[vt]=N[p[vt]]}),N}function s(O,C){return i.minBy(i.values(C),function(p){var x=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;return i.forIn(p,function(N,Y){var q=function(nt,vt){return nt.node(vt).width}(O,Y)/2;x=Math.max(N+q,x),T=Math.min(N-q,T)}),x-T})}function d(O,C){var p=i.values(C),x=i.min(p),T=i.max(p);i.forEach(["u","d"],function(N){i.forEach(["l","r"],function(Y){var q,nt=N+Y,vt=O[nt];if(vt!==C){var ht=i.values(vt);(q=Y==="l"?x-i.min(ht):T-i.max(ht))&&(O[nt]=i.mapValues(vt,function(St){return St+q}))}})})}function E(O,C){return i.mapValues(O.ul,function(p,x){if(C)return O[C.toLowerCase()][x];var T=i.sortBy(i.map(O,x));return(T[1]+T[2])/2})}a.exports={positionX:function(C){var p,x=b.buildLayerMatrix(C),T=i.merge(S(C,x),f(C,x)),N={};i.forEach(["u","d"],function(q){p=q==="u"?x:i.values(x).reverse(),i.forEach(["l","r"],function(nt){nt==="r"&&(p=i.map(p,function(wt){return i.values(wt).reverse()}));var vt=(q==="u"?C.predecessors:C.successors).bind(C),ht=y(C,p,T,vt),St=n(C,p,ht.root,ht.align,nt==="r");nt==="r"&&(St=i.mapValues(St,function(wt){return-wt})),N[q+nt]=St})});var Y=s(C,N);return d(N,Y),E(N,C.graph().align)},findType1Conflicts:S,findType2Conflicts:f,addConflict:M,hasConflict:I,verticalAlignment:y,horizontalCompaction:n,alignCoordinates:d,findSmallestWidthAlignment:s,balance:E}},function(a,A,e){var i=e(24),v=e(37),b=e(46).Graph;a.exports={debugOrdering:function(f){var M=v.buildLayerMatrix(f),I=new b({compound:!0,multigraph:!0}).setGraph({});return i.forEach(f.nodes(),function(y){I.setNode(y,{label:y}),I.setParent(y,"layer"+f.node(y).rank)}),i.forEach(f.edges(),function(y){I.setEdge(y.v,y.w,{},y.name)}),i.forEach(M,function(y,n){var s="layer"+n;I.setNode(s,{rank:"same"}),i.reduce(y,function(d,E){return I.setEdge(d,E,{style:"invis"}),E})}),I}}},function(a,A){a.exports="0.8.5"},function(a,A,e){(function(i){function v(S){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(S)}var b=function(S){"use strict";var f=Object.prototype,M=f.hasOwnProperty,I=typeof Symbol=="function"?Symbol:{},y=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",s=I.toStringTag||"@@toStringTag";function d(Ot,X,ct){return Object.defineProperty(Ot,X,{value:ct,enumerable:!0,configurable:!0,writable:!0}),Ot[X]}try{d({},"")}catch(Ot){d=function(ct,dt,pt){return ct[dt]=pt}}function E(Ot,X,ct,dt){var pt=X&&X.prototype instanceof p?X:p,Mt=Object.create(pt.prototype),tt=new ft(dt||[]);return Mt._invoke=function(lt,it,U){var P="suspendedStart";return function(H,k){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(H==="throw")throw k;return kt()}for(U.method=H,U.arg=k;;){var h=U.delegate;if(h){var g=St(h,U);if(g){if(g===C)continue;return g}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(P==="suspendedStart")throw P="completed",U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);P="executing";var G=O(lt,it,U);if(G.type==="normal"){if(P=U.done?"completed":"suspendedYield",G.arg===C)continue;return{value:G.arg,done:U.done}}G.type==="throw"&&(P="completed",U.method="throw",U.arg=G.arg)}}}(Ot,ct,tt),Mt}function O(Ot,X,ct){try{return{type:"normal",arg:Ot.call(X,ct)}}catch(dt){return{type:"throw",arg:dt}}}S.wrap=E;var C={};function p(){}function x(){}function T(){}var N={};N[y]=function(){return this};var Y=Object.getPrototypeOf,q=Y&&Y(Y(Ft([])));q&&q!==f&&M.call(q,y)&&(N=q);var nt=T.prototype=p.prototype=Object.create(N);function vt(Ot){["next","throw","return"].forEach(function(X){d(Ot,X,function(ct){return this._invoke(X,ct)})})}function ht(Ot,X){var ct;this._invoke=function(dt,pt){function Mt(){return new X(function(tt,lt){(function it(U,P,H,k){var h=O(Ot[U],Ot,P);if(h.type!=="throw"){var g=h.arg,G=g.value;return G&&v(G)==="object"&&M.call(G,"__await")?X.resolve(G.__await).then(function(V){it("next",V,H,k)},function(V){it("throw",V,H,k)}):X.resolve(G).then(function(V){g.value=V,H(g)},function(V){return it("throw",V,H,k)})}k(h.arg)})(dt,pt,tt,lt)})}return ct=ct?ct.then(Mt,Mt):Mt()}}function St(Ot,X){var ct=Ot.iterator[X.method];if(ct===void 0){if(X.delegate=null,X.method==="throw"){if(Ot.iterator.return&&(X.method="return",X.arg=void 0,St(Ot,X),X.method==="throw"))return C;X.method="throw",X.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var dt=O(ct,Ot.iterator,X.arg);if(dt.type==="throw")return X.method="throw",X.arg=dt.arg,X.delegate=null,C;var pt=dt.arg;return pt?pt.done?(X[Ot.resultName]=pt.value,X.next=Ot.nextLoc,X.method!=="return"&&(X.method="next",X.arg=void 0),X.delegate=null,C):pt:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,C)}function wt(Ot){var X={tryLoc:Ot[0]};1 in Ot&&(X.catchLoc=Ot[1]),2 in Ot&&(X.finallyLoc=Ot[2],X.afterLoc=Ot[3]),this.tryEntries.push(X)}function xt(Ot){var X=Ot.completion||{};X.type="normal",delete X.arg,Ot.completion=X}function ft(Ot){this.tryEntries=[{tryLoc:"root"}],Ot.forEach(wt,this),this.reset(!0)}function Ft(Ot){if(Ot){var X=Ot[y];if(X)return X.call(Ot);if(typeof Ot.next=="function")return Ot;if(!isNaN(Ot.length)){var ct=-1,dt=function pt(){for(;++ct<Ot.length;)if(M.call(Ot,ct))return pt.value=Ot[ct],pt.done=!1,pt;return pt.value=void 0,pt.done=!0,pt};return dt.next=dt}}return{next:kt}}function kt(){return{value:void 0,done:!0}}return x.prototype=nt.constructor=T,T.constructor=x,x.displayName=d(T,s,"GeneratorFunction"),S.isGeneratorFunction=function(Ot){var X=typeof Ot=="function"&&Ot.constructor;return!!X&&(X===x||(X.displayName||X.name)==="GeneratorFunction")},S.mark=function(Ot){return Object.setPrototypeOf?Object.setPrototypeOf(Ot,T):(Ot.__proto__=T,d(Ot,s,"GeneratorFunction")),Ot.prototype=Object.create(nt),Ot},S.awrap=function(Ot){return{__await:Ot}},vt(ht.prototype),ht.prototype[n]=function(){return this},S.AsyncIterator=ht,S.async=function(Ot,X,ct,dt,pt){pt===void 0&&(pt=Promise);var Mt=new ht(E(Ot,X,ct,dt),pt);return S.isGeneratorFunction(X)?Mt:Mt.next().then(function(tt){return tt.done?tt.value:Mt.next()})},vt(nt),d(nt,s,"Generator"),nt[y]=function(){return this},nt.toString=function(){return"[object Generator]"},S.keys=function(Ot){var X=[];for(var ct in Ot)X.push(ct);return X.reverse(),function dt(){for(;X.length;){var pt=X.pop();if(pt in Ot)return dt.value=pt,dt.done=!1,dt}return dt.done=!0,dt}},S.values=Ft,ft.prototype={constructor:ft,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(xt),!X)for(var ct in this)ct.charAt(0)==="t"&&M.call(this,ct)&&!isNaN(+ct.slice(1))&&(this[ct]=void 0)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var ct=this;function dt(U,P){return tt.type="throw",tt.arg=X,ct.next=U,P&&(ct.method="next",ct.arg=void 0),!!P}for(var pt=this.tryEntries.length-1;pt>=0;--pt){var Mt=this.tryEntries[pt],tt=Mt.completion;if(Mt.tryLoc==="root")return dt("end");if(Mt.tryLoc<=this.prev){var lt=M.call(Mt,"catchLoc"),it=M.call(Mt,"finallyLoc");if(lt&&it){if(this.prev<Mt.catchLoc)return dt(Mt.catchLoc,!0);if(this.prev<Mt.finallyLoc)return dt(Mt.finallyLoc)}else if(lt){if(this.prev<Mt.catchLoc)return dt(Mt.catchLoc,!0)}else{if(!it)throw new Error("try statement without catch or finally");if(this.prev<Mt.finallyLoc)return dt(Mt.finallyLoc)}}}},abrupt:function(X,ct){for(var dt=this.tryEntries.length-1;dt>=0;--dt){var pt=this.tryEntries[dt];if(pt.tryLoc<=this.prev&&M.call(pt,"finallyLoc")&&this.prev<pt.finallyLoc){var Mt=pt;break}}Mt&&(X==="break"||X==="continue")&&Mt.tryLoc<=ct&&ct<=Mt.finallyLoc&&(Mt=null);var tt=Mt?Mt.completion:{};return tt.type=X,tt.arg=ct,Mt?(this.method="next",this.next=Mt.finallyLoc,C):this.complete(tt)},complete:function(X,ct){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&ct&&(this.next=ct),C},finish:function(X){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var dt=this.tryEntries[ct];if(dt.finallyLoc===X)return this.complete(dt.completion,dt.afterLoc),xt(dt),C}},catch:function(X){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var dt=this.tryEntries[ct];if(dt.tryLoc===X){var pt=dt.completion;if(pt.type==="throw"){var Mt=pt.arg;xt(dt)}return Mt}}throw new Error("illegal catch attempt")},delegateYield:function(X,ct,dt){return this.delegate={iterator:Ft(X),resultName:ct,nextLoc:dt},this.method==="next"&&(this.arg=void 0),C}},S}(v(i)==="object"?i.exports:{});try{regeneratorRuntime=b}catch(S){Function("r","regeneratorRuntime = r")(b)}}).call(this,e(86)(a))},function(a,A){a.exports=function(e){if(Array.isArray(e))return e}},function(a,A){a.exports=function(e,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e)){var v=[],b=!0,S=!1,f=void 0;try{for(var M,I=e[Symbol.iterator]();!(b=(M=I.next()).done)&&(v.push(M.value),!i||v.length!==i);b=!0);}catch(y){S=!0,f=y}finally{try{b||I.return==null||I.return()}finally{if(S)throw f}}return v}}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A,e){"use strict";function i(T){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(T)}var v=this&&this.__awaiter||function(T,N,Y,q){return new(Y||(Y=Promise))(function(nt,vt){function ht(xt){try{wt(q.next(xt))}catch(ft){vt(ft)}}function St(xt){try{wt(q.throw(xt))}catch(ft){vt(ft)}}function wt(xt){var ft;xt.done?nt(xt.value):(ft=xt.value,ft instanceof Y?ft:new Y(function(Ft){Ft(ft)})).then(ht,St)}wt((q=q.apply(T,N||[])).next())})},b=this&&this.__generator||function(T,N){var Y,q,nt,vt,ht={label:0,sent:function(){if(1&nt[0])throw nt[1];return nt[1]},trys:[],ops:[]};return vt={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function St(wt){return function(xt){return function(ft){if(Y)throw new TypeError("Generator is already executing.");for(;ht;)try{if(Y=1,q&&(nt=2&ft[0]?q.return:ft[0]?q.throw||((nt=q.return)&&nt.call(q),0):q.next)&&!(nt=nt.call(q,ft[1])).done)return nt;switch(q=0,nt&&(ft=[2&ft[0],nt.value]),ft[0]){case 0:case 1:nt=ft;break;case 4:return ht.label++,{value:ft[1],done:!1};case 5:ht.label++,q=ft[1],ft=[0];continue;case 7:ft=ht.ops.pop(),ht.trys.pop();continue;default:if(nt=ht.trys,!((nt=nt.length>0&&nt[nt.length-1])||ft[0]!==6&&ft[0]!==2)){ht=0;continue}if(ft[0]===3&&(!nt||ft[1]>nt[0]&&ft[1]<nt[3])){ht.label=ft[1];break}if(ft[0]===6&&ht.label<nt[1]){ht.label=nt[1],nt=ft;break}if(nt&&ht.label<nt[2]){ht.label=nt[2],ht.ops.push(ft);break}nt[2]&&ht.ops.pop(),ht.trys.pop();continue}ft=N.call(T,ht)}catch(Ft){ft=[6,Ft],q=0}finally{Y=nt=0}if(5&ft[0])throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}([wt,xt])}}};Object.defineProperty(A,"__esModule",{value:!0}),A.Container=void 0;var S=e(447),f=e(41),M=e(55),I=e(32),y=e(220),n=e(448),s=e(455),d=e(457),E=e(67),O=e(88),C=e(460),p=e(461),x=function(){function T(N){var Y=N||{};if(i(Y)!=="object")throw new Error(""+f.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Y.defaultScope===void 0)Y.defaultScope=M.BindingScopeEnum.Transient;else if(Y.defaultScope!==M.BindingScopeEnum.Singleton&&Y.defaultScope!==M.BindingScopeEnum.Transient&&Y.defaultScope!==M.BindingScopeEnum.Request)throw new Error(""+f.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Y.autoBindInjectable===void 0)Y.autoBindInjectable=!1;else if(typeof Y.autoBindInjectable!="boolean")throw new Error(""+f.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Y.skipBaseClassChecks===void 0)Y.skipBaseClassChecks=!1;else if(typeof Y.skipBaseClassChecks!="boolean")throw new Error(""+f.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Y.autoBindInjectable,defaultScope:Y.defaultScope,skipBaseClassChecks:Y.skipBaseClassChecks},this.id=E.id(),this._bindingDictionary=new p.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return T.merge=function(N,Y){var q=new T,nt=n.getBindingDictionary(q),vt=n.getBindingDictionary(N),ht=n.getBindingDictionary(Y);function St(wt,xt){wt.traverse(function(ft,Ft){Ft.forEach(function(kt){xt.add(kt.serviceIdentifier,kt.clone())})})}return St(vt,nt),St(ht,nt),q},T.prototype.load=function(){for(var N=[],Y=0;Y<arguments.length;Y++)N[Y]=arguments[Y];for(var q=this._getContainerModuleHelpersFactory(),nt=0,vt=N;nt<vt.length;nt++){var ht=vt[nt],St=q(ht.id);ht.registry(St.bindFunction,St.unbindFunction,St.isboundFunction,St.rebindFunction)}},T.prototype.loadAsync=function(){for(var N=[],Y=0;Y<arguments.length;Y++)N[Y]=arguments[Y];return v(this,void 0,void 0,function(){var q,nt,vt,ht,St;return b(this,function(wt){switch(wt.label){case 0:q=this._getContainerModuleHelpersFactory(),nt=0,vt=N,wt.label=1;case 1:return nt<vt.length?(ht=vt[nt],St=q(ht.id),[4,ht.registry(St.bindFunction,St.unbindFunction,St.isboundFunction,St.rebindFunction)]):[3,4];case 2:wt.sent(),wt.label=3;case 3:return nt++,[3,1];case 4:return[2]}})})},T.prototype.unload=function(){for(var N=this,Y=[],q=0;q<arguments.length;q++)Y[q]=arguments[q];var nt=function(ht){return function(St){return St.moduleId===ht}};Y.forEach(function(vt){var ht=nt(vt.id);N._bindingDictionary.removeByCondition(ht)})},T.prototype.bind=function(N){var Y=this.options.defaultScope||M.BindingScopeEnum.Transient,q=new S.Binding(N,Y);return this._bindingDictionary.add(N,q),new d.BindingToSyntax(q)},T.prototype.rebind=function(N){return this.unbind(N),this.bind(N)},T.prototype.unbind=function(N){try{this._bindingDictionary.remove(N)}catch(Y){throw new Error(f.CANNOT_UNBIND+" "+O.getServiceIdentifierAsString(N))}},T.prototype.unbindAll=function(){this._bindingDictionary=new p.Lookup},T.prototype.isBound=function(N){var Y=this._bindingDictionary.hasKey(N);return!Y&&this.parent&&(Y=this.parent.isBound(N)),Y},T.prototype.isBoundNamed=function(N,Y){return this.isBoundTagged(N,I.NAMED_TAG,Y)},T.prototype.isBoundTagged=function(N,Y,q){var nt=!1;if(this._bindingDictionary.hasKey(N)){var vt=this._bindingDictionary.get(N),ht=n.createMockRequest(this,N,Y,q);nt=vt.some(function(St){return St.constraint(ht)})}return!nt&&this.parent&&(nt=this.parent.isBoundTagged(N,Y,q)),nt},T.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},T.prototype.restore=function(){var N=this._snapshots.pop();if(N===void 0)throw new Error(f.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=N.bindings,this._middleware=N.middleware},T.prototype.createChild=function(N){var Y=new T(N||this.options);return Y.parent=this,Y},T.prototype.applyMiddleware=function(){for(var N=[],Y=0;Y<arguments.length;Y++)N[Y]=arguments[Y];var q=this._middleware?this._middleware:this._planAndResolve();this._middleware=N.reduce(function(nt,vt){return vt(nt)},q)},T.prototype.applyCustomMetadataReader=function(N){this._metadataReader=N},T.prototype.get=function(N){return this._get(!1,!1,M.TargetTypeEnum.Variable,N)},T.prototype.getTagged=function(N,Y,q){return this._get(!1,!1,M.TargetTypeEnum.Variable,N,Y,q)},T.prototype.getNamed=function(N,Y){return this.getTagged(N,I.NAMED_TAG,Y)},T.prototype.getAll=function(N){return this._get(!0,!0,M.TargetTypeEnum.Variable,N)},T.prototype.getAllTagged=function(N,Y,q){return this._get(!1,!0,M.TargetTypeEnum.Variable,N,Y,q)},T.prototype.getAllNamed=function(N,Y){return this.getAllTagged(N,I.NAMED_TAG,Y)},T.prototype.resolve=function(N){var Y=this.createChild();return Y.bind(N).toSelf(),Y.get(N)},T.prototype._getContainerModuleHelpersFactory=function(){var N=this,Y=function(vt,ht){vt._binding.moduleId=ht},q=function(vt){return function(ht){var St=N.rebind.bind(N)(ht);return Y(St,vt),St}};return function(nt){return{bindFunction:(vt=nt,function(ht){var St=N.bind.bind(N)(ht);return Y(St,vt),St}),isboundFunction:function(St){return N.isBound.bind(N)(St)},rebindFunction:q(nt),unbindFunction:function(St){N.unbind.bind(N)(St)}};var vt}},T.prototype._get=function(N,Y,q,nt,vt,ht){var St=null,wt={avoidConstraints:N,contextInterceptor:function(ft){return ft},isMultiInject:Y,key:vt,serviceIdentifier:nt,targetType:q,value:ht};if(this._middleware){if((St=this._middleware(wt))==null)throw new Error(f.INVALID_MIDDLEWARE_RETURN)}else St=this._planAndResolve()(wt);return St},T.prototype._planAndResolve=function(){var N=this;return function(Y){var q=n.plan(N._metadataReader,N,Y.isMultiInject,Y.targetType,Y.serviceIdentifier,Y.key,Y.value,Y.avoidConstraints);return q=Y.contextInterceptor(q),s.resolve(q)}},T}();A.Container=x},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Binding=void 0;var i=e(55),v=e(67),b=function(){function S(f,M){this.id=v.id(),this.activated=!1,this.serviceIdentifier=f,this.scope=M,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(I){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return S.prototype.clone=function(){var f=new S(this.serviceIdentifier,this.scope);return f.activated=!1,f.implementationType=this.implementationType,f.dynamicValue=this.dynamicValue,f.scope=this.scope,f.type=this.type,f.factory=this.factory,f.provider=this.provider,f.constraint=this.constraint,f.onActivation=this.onActivation,f.cache=this.cache,f},S}();A.Binding=b},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getBindingDictionary=A.createMockRequest=A.plan=void 0;var i=e(449),v=e(41),b=e(55),S=e(32),f=e(221),M=e(88),I=e(450),y=e(49),n=e(451),s=e(452),d=e(454),E=e(223);function O(x){return x._bindingDictionary}function C(x,T,N,Y,q){var nt=p(N.container,q.serviceIdentifier),vt=[];return nt.length===i.BindingCount.NoBindingsAvailable&&N.container.options.autoBindInjectable&&typeof q.serviceIdentifier=="function"&&x.getConstructorMetadata(q.serviceIdentifier).compilerGeneratedMetadata&&(N.container.bind(q.serviceIdentifier).toSelf(),nt=p(N.container,q.serviceIdentifier)),vt=T?nt:nt.filter(function(ht){var St=new d.Request(ht.serviceIdentifier,N,Y,ht,q);return ht.constraint(St)}),function(ht,St,wt,xt){switch(St.length){case i.BindingCount.NoBindingsAvailable:if(wt.isOptional())return St;var ft=M.getServiceIdentifierAsString(ht),Ft=v.NOT_REGISTERED;throw Ft+=M.listMetadataForTarget(ft,wt),Ft+=M.listRegisteredBindingsForServiceIdentifier(xt,ft,p),new Error(Ft);case i.BindingCount.OnlyOneBindingAvailable:if(!wt.isArray())return St;case i.BindingCount.MultipleBindingsAvailable:default:if(wt.isArray())return St;throw ft=M.getServiceIdentifierAsString(ht),Ft=v.AMBIGUOUS_MATCH+" "+ft,Ft+=M.listRegisteredBindingsForServiceIdentifier(xt,ft,p),new Error(Ft)}}(q.serviceIdentifier,vt,q,N.container),vt}function p(x,T){var N=[],Y=O(x);return Y.hasKey(T)?N=Y.get(T):x.parent!==null&&(N=p(x.parent,T)),N}A.getBindingDictionary=O,A.plan=function(x,T,N,Y,q,nt,vt,ht){ht===void 0&&(ht=!1);var St=new I.Context(T),wt=function(xt,ft,Ft,kt,Ot,X){var ct=xt?S.MULTI_INJECT_TAG:S.INJECT_TAG,dt=new y.Metadata(ct,Ft),pt=new E.Target(ft,kt,Ft,dt);if(Ot!==void 0){var Mt=new y.Metadata(Ot,X);pt.metadata.push(Mt)}return pt}(N,Y,q,"",nt,vt);try{return function xt(ft,Ft,kt,Ot,X,ct){var dt,pt;if(X===null){dt=C(ft,Ft,Ot,null,ct),pt=new d.Request(kt,Ot,null,dt,ct);var Mt=new n.Plan(Ot,pt);Ot.addPlan(Mt)}else dt=C(ft,Ft,Ot,X,ct),pt=X.addChildRequest(ct.serviceIdentifier,dt,ct);dt.forEach(function(tt){var lt=null;if(ct.isArray())lt=pt.addChildRequest(tt.serviceIdentifier,tt,ct);else{if(tt.cache)return;lt=pt}if(tt.type===b.BindingTypeEnum.Instance&&tt.implementationType!==null){var it=s.getDependencies(ft,tt.implementationType);if(!Ot.container.options.skipBaseClassChecks){var U=s.getBaseClassDependencyCount(ft,tt.implementationType);if(it.length<U){var P=v.ARGUMENTS_LENGTH_MISMATCH(s.getFunctionName(tt.implementationType));throw new Error(P)}}it.forEach(function(H){xt(ft,!1,H.serviceIdentifier,Ot,lt,H)})}})}(x,ht,q,St,null,wt),St}catch(xt){throw f.isStackOverflowExeption(xt)&&St.plan&&M.circularDependencyToException(St.plan.rootRequest),xt}},A.createMockRequest=function(x,T,N,Y){var q=new E.Target(b.TargetTypeEnum.Variable,"",T,new y.Metadata(N,Y)),nt=new I.Context(x);return new d.Request(T,nt,null,[],q)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingCount=void 0,A.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Context=void 0;var i=e(67),v=function(){function b(S){this.id=i.id(),this.container=S}return b.prototype.addPlan=function(S){this.plan=S},b.prototype.setCurrentRequest=function(S){this.currentRequest=S},b}();A.Context=v},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Plan=void 0;var i=function(b,S){this.parentContext=b,this.rootRequest=S};A.Plan=i},function(a,A,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var d=0,E=0,O=arguments.length;E<O;E++)d+=arguments[E].length;var C=Array(d),p=0;for(E=0;E<O;E++)for(var x=arguments[E],T=0,N=x.length;T<N;T++,p++)C[p]=x[T];return C};Object.defineProperty(A,"__esModule",{value:!0}),A.getFunctionName=A.getBaseClassDependencyCount=A.getDependencies=void 0;var v=e(222),b=e(41),S=e(55),f=e(32),M=e(88);Object.defineProperty(A,"getFunctionName",{enumerable:!0,get:function(){return M.getFunctionName}});var I=e(223);function y(d,E,O,C){var p=d.getConstructorMetadata(O),x=p.compilerGeneratedMetadata;if(x===void 0){var T=b.MISSING_INJECTABLE_ANNOTATION+" "+E+".";throw new Error(T)}var N=p.userGeneratedMetadata,Y=Object.keys(N),q=function(vt,ht,St,wt,xt){for(var ft=[],Ft=0;Ft<xt;Ft++){var kt=n(Ft,vt,ht,St,wt);kt!==null&&ft.push(kt)}return ft}(C,E,x,N,O.length===0&&Y.length>0?Y.length:O.length),nt=function vt(ht,St){for(var wt=ht.getPropertiesMetadata(St),xt=[],ft=Object.keys(wt),Ft=0,kt=ft;Ft<kt.length;Ft++){var Ot=kt[Ft],X=wt[Ot],ct=s(wt[Ot]),dt=ct.targetName||Ot,pt=ct.inject||ct.multiInject,Mt=new I.Target(S.TargetTypeEnum.ClassProperty,dt,pt);Mt.metadata=X,xt.push(Mt)}var tt=Object.getPrototypeOf(St.prototype).constructor;if(tt!==Object){var lt=vt(ht,tt);xt=i(xt,lt)}return xt}(d,O);return i(q,nt)}function n(d,E,O,C,p){var x=p[d.toString()]||[],T=s(x),N=T.unmanaged!==!0,Y=C[d],q=T.inject||T.multiInject;if((Y=q||Y)instanceof v.LazyServiceIdentifer&&(Y=Y.unwrap()),N){if(!E&&(Y===Object||Y===Function||Y===void 0)){var nt=b.MISSING_INJECT_ANNOTATION+" argument "+d+" in class "+O+".";throw new Error(nt)}var vt=new I.Target(S.TargetTypeEnum.ConstructorArgument,T.targetName,Y);return vt.metadata=x,vt}return null}function s(d){var E={};return d.forEach(function(O){E[O.key.toString()]=O.value}),{inject:E[f.INJECT_TAG],multiInject:E[f.MULTI_INJECT_TAG],targetName:E[f.NAME_TAG],unmanaged:E[f.UNMANAGED_TAG]}}A.getDependencies=function(d,E){return y(d,M.getFunctionName(E),E,!1)},A.getBaseClassDependencyCount=function d(E,O){var C=Object.getPrototypeOf(O.prototype).constructor;if(C!==Object){var p=y(E,M.getFunctionName(C),C,!0),x=p.map(function(Y){return Y.metadata.filter(function(q){return q.key===f.UNMANAGED_TAG})}),T=[].concat.apply([],x).length,N=p.length-T;return N>0?N:d(E,C)}return 0}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.QueryableString=void 0;var i=function(){function v(b){this.str=b}return v.prototype.startsWith=function(b){return this.str.indexOf(b)===0},v.prototype.endsWith=function(b){var S,f=b.split("").reverse().join("");return S=this.str.split("").reverse().join(""),this.startsWith.call({str:S},f)},v.prototype.contains=function(b){return this.str.indexOf(b)!==-1},v.prototype.equals=function(b){return this.str===b},v.prototype.value=function(){return this.str},v}();A.QueryableString=i},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Request=void 0;var i=e(67),v=function(){function b(S,f,M,I,y){this.id=i.id(),this.serviceIdentifier=S,this.parentContext=f,this.parentRequest=M,this.target=y,this.childRequests=[],this.bindings=Array.isArray(I)?I:[I],this.requestScope=M===null?new Map:null}return b.prototype.addChildRequest=function(S,f,M){var I=new b(S,this.parentContext,this,f,M);return this.childRequests.push(I),I},b}();A.Request=v},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.resolve=void 0;var i=e(41),v=e(55),b=e(221),S=e(88),f=e(456),M=function(y,n,s){try{return s()}catch(d){throw b.isStackOverflowExeption(d)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(y,n.toString())):d}};A.resolve=function(I){return function y(n){return function(s){s.parentContext.setCurrentRequest(s);var d=s.bindings,E=s.childRequests,O=s.target&&s.target.isArray(),C=!(s.parentRequest&&s.parentRequest.target&&s.target&&s.parentRequest.target.matchesArray(s.target.serviceIdentifier));if(O&&C)return E.map(function(q){return y(n)(q)});var p=null;if(!s.target.isOptional()||d.length!==0){var x=d[0],T=x.scope===v.BindingScopeEnum.Singleton,N=x.scope===v.BindingScopeEnum.Request;if(T&&x.activated)return x.cache;if(N&&n!==null&&n.has(x.id))return n.get(x.id);if(x.type===v.BindingTypeEnum.ConstantValue)p=x.cache;else if(x.type===v.BindingTypeEnum.Function)p=x.cache;else if(x.type===v.BindingTypeEnum.Constructor)p=x.implementationType;else if(x.type===v.BindingTypeEnum.DynamicValue&&x.dynamicValue!==null)p=M("toDynamicValue",x.serviceIdentifier,function(){return x.dynamicValue(s.parentContext)});else if(x.type===v.BindingTypeEnum.Factory&&x.factory!==null)p=M("toFactory",x.serviceIdentifier,function(){return x.factory(s.parentContext)});else if(x.type===v.BindingTypeEnum.Provider&&x.provider!==null)p=M("toProvider",x.serviceIdentifier,function(){return x.provider(s.parentContext)});else{if(x.type!==v.BindingTypeEnum.Instance||x.implementationType===null){var Y=S.getServiceIdentifierAsString(s.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+Y)}p=f.resolveInstance(x.implementationType,E,y(n))}return typeof x.onActivation=="function"&&(p=x.onActivation(s.parentContext,p)),T&&(x.cache=p,x.activated=!0),N&&n!==null&&!n.has(x.id)&&n.set(x.id,p),p}}}(I.plan.rootRequest.requestScope)(I.plan.rootRequest)}},function(a,A,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var f=0,M=0,I=arguments.length;M<I;M++)f+=arguments[M].length;var y=Array(f),n=0;for(M=0;M<I;M++)for(var s=arguments[M],d=0,E=s.length;d<E;d++,n++)y[n]=s[d];return y};Object.defineProperty(A,"__esModule",{value:!0}),A.resolveInstance=void 0;var v=e(41),b=e(55),S=e(32);A.resolveInstance=function(f,M,I){var y,n,s=null;if(M.length>0){var d=M.filter(function(E){return E.target!==null&&E.target.type===b.TargetTypeEnum.ConstructorArgument}).map(I);n=d,s=function(E,O,C){var p=O.filter(function(T){return T.target!==null&&T.target.type===b.TargetTypeEnum.ClassProperty}),x=p.map(C);return p.forEach(function(T,N){var Y;Y=T.target.name.value();var q=x[N];E[Y]=q}),E}(s=new((y=f).bind.apply(y,i([void 0],n))),M,I)}else s=new f;return function(E,O){if(Reflect.hasMetadata(S.POST_CONSTRUCT,E)){var C=Reflect.getMetadata(S.POST_CONSTRUCT,E);try{O[C.value]()}catch(p){throw new Error(v.POST_CONSTRUCT_ERROR(E.name,p.message))}}}(f,s),s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingToSyntax=void 0;var i=e(41),v=e(55),b=e(458),S=e(224),f=function(){function M(I){this._binding=I}return M.prototype.to=function(I){return this._binding.type=v.BindingTypeEnum.Instance,this._binding.implementationType=I,new b.BindingInWhenOnSyntax(this._binding)},M.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+i.INVALID_TO_SELF_VALUE);var I=this._binding.serviceIdentifier;return this.to(I)},M.prototype.toConstantValue=function(I){return this._binding.type=v.BindingTypeEnum.ConstantValue,this._binding.cache=I,this._binding.dynamicValue=null,this._binding.implementationType=null,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toDynamicValue=function(I){return this._binding.type=v.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=I,this._binding.implementationType=null,new b.BindingInWhenOnSyntax(this._binding)},M.prototype.toConstructor=function(I){return this._binding.type=v.BindingTypeEnum.Constructor,this._binding.implementationType=I,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toFactory=function(I){return this._binding.type=v.BindingTypeEnum.Factory,this._binding.factory=I,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toFunction=function(I){if(typeof I!="function")throw new Error(i.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(I);return this._binding.type=v.BindingTypeEnum.Function,y},M.prototype.toAutoFactory=function(I){return this._binding.type=v.BindingTypeEnum.Factory,this._binding.factory=function(y){return function(){return y.container.get(I)}},new S.BindingWhenOnSyntax(this._binding)},M.prototype.toProvider=function(I){return this._binding.type=v.BindingTypeEnum.Provider,this._binding.provider=I,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toService=function(I){this.toDynamicValue(function(y){return y.container.get(I)})},M}();A.BindingToSyntax=f},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInWhenOnSyntax=void 0;var i=e(459),v=e(141),b=e(142),S=function(){function f(M){this._binding=M,this._bindingWhenSyntax=new b.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new v.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(M)}return f.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},f.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},f.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},f.prototype.when=function(M){return this._bindingWhenSyntax.when(M)},f.prototype.whenTargetNamed=function(M){return this._bindingWhenSyntax.whenTargetNamed(M)},f.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},f.prototype.whenTargetTagged=function(M,I){return this._bindingWhenSyntax.whenTargetTagged(M,I)},f.prototype.whenInjectedInto=function(M){return this._bindingWhenSyntax.whenInjectedInto(M)},f.prototype.whenParentNamed=function(M){return this._bindingWhenSyntax.whenParentNamed(M)},f.prototype.whenParentTagged=function(M,I){return this._bindingWhenSyntax.whenParentTagged(M,I)},f.prototype.whenAnyAncestorIs=function(M){return this._bindingWhenSyntax.whenAnyAncestorIs(M)},f.prototype.whenNoAncestorIs=function(M){return this._bindingWhenSyntax.whenNoAncestorIs(M)},f.prototype.whenAnyAncestorNamed=function(M){return this._bindingWhenSyntax.whenAnyAncestorNamed(M)},f.prototype.whenAnyAncestorTagged=function(M,I){return this._bindingWhenSyntax.whenAnyAncestorTagged(M,I)},f.prototype.whenNoAncestorNamed=function(M){return this._bindingWhenSyntax.whenNoAncestorNamed(M)},f.prototype.whenNoAncestorTagged=function(M,I){return this._bindingWhenSyntax.whenNoAncestorTagged(M,I)},f.prototype.whenAnyAncestorMatches=function(M){return this._bindingWhenSyntax.whenAnyAncestorMatches(M)},f.prototype.whenNoAncestorMatches=function(M){return this._bindingWhenSyntax.whenNoAncestorMatches(M)},f.prototype.onActivation=function(M){return this._bindingOnSyntax.onActivation(M)},f}();A.BindingInWhenOnSyntax=S},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInSyntax=void 0;var i=e(55),v=e(224),b=function(){function S(f){this._binding=f}return S.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new v.BindingWhenOnSyntax(this._binding)},S.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new v.BindingWhenOnSyntax(this._binding)},S.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new v.BindingWhenOnSyntax(this._binding)},S}();A.BindingInSyntax=b},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ContainerSnapshot=void 0;var i=function(){function v(){}return v.of=function(b,S){var f=new v;return f.bindings=b,f.middleware=S,f},v}();A.ContainerSnapshot=i},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Lookup=void 0;var i=e(41),v=function(){function b(){this._map=new Map}return b.prototype.getMap=function(){return this._map},b.prototype.add=function(S,f){if(S==null)throw new Error(i.NULL_ARGUMENT);if(f==null)throw new Error(i.NULL_ARGUMENT);var M=this._map.get(S);M!==void 0?(M.push(f),this._map.set(S,M)):this._map.set(S,[f])},b.prototype.get=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);var f=this._map.get(S);if(f!==void 0)return f;throw new Error(i.KEY_NOT_FOUND)},b.prototype.remove=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(S))throw new Error(i.KEY_NOT_FOUND)},b.prototype.removeByCondition=function(S){var f=this;this._map.forEach(function(M,I){var y=M.filter(function(n){return!S(n)});y.length>0?f._map.set(I,y):f._map.delete(I)})},b.prototype.hasKey=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);return this._map.has(S)},b.prototype.clone=function(){var S=new b;return this._map.forEach(function(f,M){f.forEach(function(I){return S.add(M,I.clone())})}),S},b.prototype.traverse=function(S){this._map.forEach(function(f,M){S(M,f)})},b}();A.Lookup=v},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.AsyncContainerModule=A.ContainerModule=void 0;var i=e(67),v=function(f){this.id=i.id(),this.registry=f};A.ContainerModule=v;var b=function(f){this.id=i.id(),this.registry=f};A.AsyncContainerModule=b},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.injectable=void 0;var i=e(41),v=e(32);A.injectable=function(){return function(b){if(Reflect.hasOwnMetadata(v.PARAM_TYPES,b))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var S=Reflect.getMetadata(v.DESIGN_PARAM_TYPES,b)||[];return Reflect.defineMetadata(v.PARAM_TYPES,S,b),b}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagged=void 0;var i=e(49),v=e(59);A.tagged=function(b,S){return function(f,M,I){var y=new i.Metadata(b,S);typeof I=="number"?v.tagParameter(f,M,I,y):v.tagProperty(f,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.named=void 0;var i=e(32),v=e(49),b=e(59);A.named=function(S){return function(f,M,I){var y=new v.Metadata(i.NAMED_TAG,S);typeof I=="number"?b.tagParameter(f,M,I,y):b.tagProperty(f,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.optional=void 0;var i=e(32),v=e(49),b=e(59);A.optional=function(){return function(S,f,M){var I=new v.Metadata(i.OPTIONAL_TAG,!0);typeof M=="number"?b.tagParameter(S,f,M,I):b.tagProperty(S,f,I)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.unmanaged=void 0;var i=e(32),v=e(49),b=e(59);A.unmanaged=function(){return function(S,f,M){var I=new v.Metadata(i.UNMANAGED_TAG,!0);b.tagParameter(S,f,M,I)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiInject=void 0;var i=e(32),v=e(49),b=e(59);A.multiInject=function(S){return function(f,M,I){var y=new v.Metadata(i.MULTI_INJECT_TAG,S);typeof I=="number"?b.tagParameter(f,M,I,y):b.tagProperty(f,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.targetName=void 0;var i=e(32),v=e(49),b=e(59);A.targetName=function(S){return function(f,M,I){var y=new v.Metadata(i.NAME_TAG,S);b.tagParameter(f,M,I,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.postConstruct=void 0;var i=e(41),v=e(32),b=e(49);A.postConstruct=function(){return function(S,f,M){var I=new b.Metadata(v.POST_CONSTRUCT,f);if(Reflect.hasOwnMetadata(v.POST_CONSTRUCT,S.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(v.POST_CONSTRUCT,I,S.constructor)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiBindToService=void 0,A.multiBindToService=function(i){return function(v){return function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];return b.forEach(function(f){return i.bind(f).toService(v)})}}}},function(a,A){function e(i,v){return a.exports=e=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b},e(i,v)}a.exports=e},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var i=Symbol.for("INJECTION");function v(b,S,f,M){Object.defineProperty(b,S,{configurable:!0,enumerable:!0,get:function(){return M&&!Reflect.hasMetadata(i,this,S)&&Reflect.defineMetadata(i,f(),this,S),Reflect.hasMetadata(i,this,S)?Reflect.getMetadata(i,this,S):f()},set:function(y){Reflect.defineMetadata(i,y,this,S)}})}A.makePropertyInjectDecorator=function(b,S){return function(f){return function(M,I){v(M,I,function(){return b.get(f)},S)}}},A.makePropertyInjectNamedDecorator=function(b,S){return function(f,M){return function(I,y){v(I,y,function(){return b.getNamed(f,M)},S)}}},A.makePropertyInjectTaggedDecorator=function(b,S){return function(f,M,I){return function(y,n){v(y,n,function(){return b.getTagged(f,M,I)},S)}}},A.makePropertyMultiInjectDecorator=function(b,S){return function(f){return function(M,I){v(M,I,function(){return b.getAll(f)},S)}}}},function(a,A,e){var i=e(219);a.exports=function(v){if(Array.isArray(v))return i(v)}},function(a,A){a.exports=function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A){a.exports=function(e){var i=new Float32Array(2);return i[0]=e[0],i[1]=e[1],i}},function(a,A){a.exports=function(e,i){var v=new Float32Array(2);return v[0]=e,v[1]=i,v}},function(a,A){a.exports=function(e,i){return e[0]=i[0],e[1]=i[1],e}},function(a,A,e){a.exports=function(v,b){var S=v[0],f=v[1],M=b[0],I=b[1];return Math.abs(S-M)<=i*Math.max(1,Math.abs(S),Math.abs(M))&&Math.abs(f-I)<=i*Math.max(1,Math.abs(f),Math.abs(I))};var i=e(233)},function(a,A){a.exports=function(e,i){return e[0]===i[0]&&e[1]===i[1]}},function(a,A,e){a.exports=e(150)},function(a,A,e){a.exports=e(237)},function(a,A,e){a.exports=e(238)},function(a,A){a.exports=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e}},function(a,A){a.exports=function(e,i,v){return e[0]=Math.min(i[0],v[0]),e[1]=Math.min(i[1],v[1]),e}},function(a,A){a.exports=function(e,i,v){return e[0]=Math.max(i[0],v[0]),e[1]=Math.max(i[1],v[1]),e}},function(a,A){a.exports=function(e,i,v){var b=Math.cos(v),S=Math.sin(v),f=i[0],M=i[1];return e[0]=f*b-M*S,e[1]=f*S+M*b,e}},function(a,A){a.exports=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e}},function(a,A){a.exports=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e}},function(a,A){a.exports=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e}},function(a,A){a.exports=function(e,i,v){return e[0]=i[0]*v,e[1]=i[1]*v,e}},function(a,A){a.exports=function(e,i,v,b){return e[0]=i[0]+v[0]*b,e[1]=i[1]+v[1]*b,e}},function(a,A,e){a.exports=e(239)},function(a,A,e){a.exports=e(240)},function(a,A,e){a.exports=e(241)},function(a,A,e){a.exports=e(242)},function(a,A){a.exports=function(e,i){return e[0]=-i[0],e[1]=-i[1],e}},function(a,A){a.exports=function(e,i,v){var b=i[0]*v[1]-i[1]*v[0];return e[0]=e[1]=0,e[2]=b,e}},function(a,A){a.exports=function(e,i,v,b){var S=i[0],f=i[1];return e[0]=S+b*(v[0]-S),e[1]=f+b*(v[1]-f),e}},function(a,A){a.exports=function(e,i){i=i||1;var v=2*Math.random()*Math.PI;return e[0]=Math.cos(v)*i,e[1]=Math.sin(v)*i,e}},function(a,A){a.exports=function(e,i,v){var b=i[0],S=i[1];return e[0]=v[0]*b+v[2]*S,e[1]=v[1]*b+v[3]*S,e}},function(a,A){a.exports=function(e,i,v){var b=i[0],S=i[1];return e[0]=v[0]*b+v[2]*S+v[4],e[1]=v[1]*b+v[3]*S+v[5],e}},function(a,A){a.exports=function(e,i,v){var b=i[0],S=i[1];return e[0]=v[0]*b+v[3]*S+v[6],e[1]=v[1]*b+v[4]*S+v[7],e}},function(a,A){a.exports=function(e,i,v){var b=i[0],S=i[1];return e[0]=v[0]*b+v[4]*S+v[12],e[1]=v[1]*b+v[5]*S+v[13],e}},function(a,A,e){a.exports=function(v,b,S,f,M,I){var y,n;for(b||(b=2),S||(S=0),n=f?Math.min(f*b+S,v.length):v.length,y=S;y<n;y+=b)i[0]=v[y],i[1]=v[y+1],M(i,i,I),v[y]=i[0],v[y+1]=i[1];return v};var i=e(234)()},function(a,A){a.exports=function(e,i,v){var b=i[0]*i[0]+i[1]*i[1];if(b>v*v){var S=Math.sqrt(b);e[0]=i[0]/S*v,e[1]=i[1]/S*v}else e[0]=i[0],e[1]=i[1];return e}},function(a,A,e){"use strict";var i=e(0),v=e(5),b=e(38),S=b.a.cloneEvent,f=b.a.isNaN,M=Math.abs,I=["shift","ctrl","alt","control"],y={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(P){var H=this.origin,k=+P.clientX,h=+P.clientY;if(!f(k)&&!f(h)){var g=k-H.x,G=h-H.y;this.get("direction")==="x"?G=0:this.get("direction")==="y"&&(g=0),this.origin={x:k,y:h};var V=this.graph.get("width"),$=this.graph.get("height"),rt=this.graph.get("canvas").getCanvasBBox();(rt.minX<=V+this.scalableRange&&rt.minX+g>V+this.scalableRange||rt.maxX+this.scalableRange>=0&&rt.maxX+this.scalableRange+g<0)&&(g=0),(rt.minY<=$+this.scalableRange&&rt.minY+G>$+this.scalableRange||rt.maxY+this.scalableRange>=0&&rt.maxY+this.scalableRange+G<0)&&(G=0),this.graph.translate(g,G)}},onMouseDown:function(P){var H=P.originalEvent;if((!H||P.name===v.h.TOUCHSTART||H.button===0)&&(P.name===v.h.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,P)&&!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(this.origin={x:P.clientX,y:P.clientY},this.dragging=!1,this.enableOptimize)){for(var k=this.graph,h=k.getEdges(),g=0,G=h.length;g<G;g++){var V=h[g].get("group").get("children");V&&V.forEach(function(bt){bt.set("ori-visibility",bt.get("ori-visibility")||bt.get("visible")),bt.hide()})}for(var $=k.getNodes(),rt=0,ot=$.length;rt<ot;rt++)for(var At=0,gt=$[rt].getContainer().get("children");At<gt.length;At++){var mt=gt[At];mt.get("isKeyShape")||(mt.set("ori-visibility",mt.get("ori-visibility")||mt.get("visible")),mt.hide())}}},onMouseMove:function(P){var H=this.graph;if(!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(P=S(P),this.origin)){if(this.dragging)P.type="drag",H.emit("canvas:drag",P);else{if(M(this.origin.x-P.clientX)+M(this.origin.y-P.clientY)<10)return;this.shouldBegin.call(this,P)&&(P.type="dragstart",H.emit("canvas:dragstart",P),this.dragging=!0)}this.shouldUpdate.call(this,P)&&this.updateViewport(P)}},onMouseUp:function(P){var H=this.graph;if(!this.keydown){if(this.enableOptimize){for(var k=H.getEdges(),h=0,g=k.length;h<g;h++){var G=k[h].get("group").get("children");G&&G.forEach(function(mt){mt.get("ori-visibility")&&mt.show()})}for(var V=H.getNodes(),$=0,rt=V.length;$<rt;$++)for(var ot=0,At=V[$].getContainer().get("children");ot<At.length;ot++){var gt=At[ot];gt.get("isKeyShape")||gt.get("ori-visibility")&&gt.show()}}this.dragging?(P=S(P),this.shouldEnd.call(this,P)&&this.updateViewport(P),P.type="dragend",H.emit("canvas:dragend",P),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(P){var H=P.key;H&&(I.indexOf(H.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},n=e(1),s=e(45),d={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(P){return!(!this.origin||!P||P.destroyed)&&P.getType()==="combo"},onDragStart:function(P){var H=this;if(this.shouldBegin.call(this,P)){var k=P.item;if(k&&!k.destroyed&&!k.hasLocked()){k.getContainer().set("capture",!1);var h=P.target;if(h&&h.get("isAnchorPoint"))return;var g=this.graph;this.targets=[],this.targetCombo=null;var G=g.findAllByState("node",this.selectedState),V=k.get("id");G.filter(function(rt){var ot=rt.get("id");return V===ot}).length===0?this.targets.push(k):G.length>1?G.forEach(function(rt){rt.hasLocked()||H.targets.push(rt)}):this.targets.push(k);var $=[];this.targets.forEach(function(rt){$.push(Object(i.c)(rt.getModel()))}),this.set("beforeDragNodes",$),this.origin={x:P.x,y:P.y},this.point={},this.originPoint={}}}},onDrag:function(P){var H=this;this.origin&&this.shouldUpdate(this,P)&&(this.get("enableDelegate")?this.updateDelegate(P):this.targets.map(function(k){H.update(k,P)}))},onDragEnd:function(P){if(this.origin&&this.shouldEnd.call(this,P)){var H=P.item;H&&H.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(P);var k=this.graph;if(k.get("enabledStack")){var h={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(g){h.after.nodes.push(g.getModel())}),k.pushStack("update",Object(i.c)(h))}k.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(P){var H=P.item;if(this.validationCombo(H)){this.updatePositions(P);var k=this.graph;if(this.comboActiveState&&k.setItemState(H,this.comboActiveState,!1),this.targetCombo=H,this.onlyChangeComboSize)k.updateCombos();else{var h=H.getModel();this.targets.map(function(g){g.getModel().comboId!==h.id&&k.updateComboTree(g,h.id)}),k.updateCombo(H)}k.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(P){var H=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(P),this.onlyChangeComboSize?H.updateCombos():this.targets.map(function(k){k.getModel().comboId&&H.updateComboTree(k)}))},onDropNode:function(P){if(this.targets&&this.targets.length!==0){var H=P.item;this.updatePositions(P);var k=this.graph,h=H.getModel().comboId;if(h){var g=k.findById(h);this.comboActiveState&&k.setItemState(g,this.comboActiveState,!1),this.targets.map(function(G){var V=G.getModel();h!==V.comboId&&k.updateComboTree(G,h)}),k.updateCombo(g)}else this.targets.map(function(G){G.getModel().comboId&&k.updateComboTree(G)});k.emit("dragnodeend",{items:this.targets,targetItem:H})}},onDragEnter:function(P){var H=P.item;if(this.validationCombo(H)){var k=this.graph;this.comboActiveState&&k.setItemState(H,this.comboActiveState,!0)}},onDragLeave:function(P){var H=P.item;if(this.validationCombo(H)){var k=this.graph;this.comboActiveState&&k.setItemState(H,this.comboActiveState,!1)}},updatePositions:function(P){var H=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&this.targets.map(function(k){return H.update(k,P)})},update:function(P,H){var k=this.origin,h=P.get("model"),g=P.get("id");this.point[g]||(this.point[g]={x:h.x||0,y:h.y||0});var G={x:H.x-k.x+this.point[g].x,y:H.y-k.y+this.point[g].y};this.get("updateEdge")?this.graph.updateItem(P,G,!1):P.updatePosition(G)},updateDelegate:function(P){if(this.graph,this.delegateRect){var H=P.x-this.origin.x+this.originPoint.minX,k=P.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:H,y:k})}else{var h=this.graph.get("group"),g=Object(i.e)({},s.a.delegateStyle,this.delegateStyle),G=this.calculationGroupPosition(P),V=G.x,$=G.y,rt=G.width,ot=G.height,At=G.minX,gt=G.minY;this.originPoint={x:V,y:$,width:rt,height:ot,minX:At,minY:gt},this.delegateRect=h.addShape("rect",{attrs:Object(n.a)({width:rt,height:ot,x:V,y:$},g),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(P){var H=this.graph.findAllByState("node",this.selectedState);H.length===0&&H.push(P.item);for(var k=1/0,h=-1/0,g=1/0,G=-1/0,V=0;V<H.length;V++){var $=H[V].getBBox(),rt=$.minX,ot=$.minY,At=$.maxX,gt=$.maxY;rt<k&&(k=rt),ot<g&&(g=ot),At>h&&(h=At),gt>G&&(G=gt)}return{x:Math.floor(k),y:Math.floor(g),width:Math.ceil(h)-Math.floor(k),height:Math.ceil(G)-Math.floor(g),minX:k,minY:g}}},E=Math.min,O=Math.max,C=Math.abs,p=["drag","shift","ctrl","alt","control"],x={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return p.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(P){var H=P.item,k=this.brush;H||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),k||(k=this.createBrush()),this.originPoint={x:P.canvasX,y:P.canvasY},k.attr({width:0,height:0}),k.show(),this.dragging=!0)},onMouseMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(P)},onMouseUp:function(P){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(P),this.dragging=!1)},clearStates:function(){var P=this.graph,H=this.selectedState,k=P.findAllByState("node",H),h=P.findAllByState("edge",H);k.forEach(function(g){return P.setItemState(g,H,!1)}),h.forEach(function(g){return P.setItemState(g,H,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(P){var H=this,k=this.graph,h=this.originPoint,g=this.shouldUpdate,G=this.selectedState,V={x:P.x,y:P.y},$=k.getPointByCanvas(h.x,h.y),rt=E(V.x,$.x),ot=O(V.x,$.x),At=E(V.y,$.y),gt=O(V.y,$.y),mt=[],bt=[];k.getNodes().forEach(function(Dt){var Ut=Dt.getBBox();if(Ut.centerX>=rt&&Ut.centerX<=ot&&Ut.centerY>=At&&Ut.centerY<=gt&&g(Dt,"select")){mt.push(Dt);var Ct=Dt.getModel();bt.push(Ct.id),k.setItemState(Dt,G,!0)}});var jt=[];this.includeEdges&&mt.forEach(function(Dt){Dt.getOutEdges().forEach(function(Ut){var Ct=Ut.getModel(),Vt=Ct.source,Ht=Ct.target;bt.includes(Vt)&&bt.includes(Ht)&&g(Ut,"select")&&(jt.push(Ut),k.setItemState(Ut,H.selectedState,!0))})}),this.selectedEdges=jt,this.selectedNodes=mt,this.onSelect&&this.onSelect(mt,jt),k.emit("nodeselectchange",{selectedItems:{nodes:mt,edges:jt},select:!0})},createBrush:function(){var P=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=P,this.delegate=P,P},updateBrush:function(P){var H=this.originPoint;this.brush.attr({width:C(P.canvasX-H.x),height:C(P.canvasY-H.y),x:E(P.canvasX,H.x),y:E(P.canvasY,H.y)})},onKeyDown:function(P){var H=P.key;if(H){var k=this.trigger.toLowerCase(),h=H.toLowerCase();this.keydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},T=["shift","ctrl","alt","control"],N={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return T.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(P){var H=this,k=P.item;if(k&&!k.destroyed){var h=k.getType(),g=H.graph,G=H.keydown,V=H.multiple,$=H.shouldUpdate;if(H.shouldBegin.call(H,P)){if(!G||!V){var rt=g.findAllByState(h,H.selectedState);Object(i.f)(rt,function(gt){gt!==k&&g.setItemState(gt,H.selectedState,!1)})}if(k.hasState(H.selectedState)){$.call(H,P)&&g.setItemState(k,H.selectedState,!1);var ot=g.findAllByState("node",H.selectedState),At=g.findAllByState("combo",H.selectedState);g.emit("nodeselectchange",{target:k,selectedItems:{nodes:ot,combos:At},select:!1})}else $.call(H,P)&&g.setItemState(k,H.selectedState,!0),ot=g.findAllByState("node",H.selectedState),At=g.findAllByState("combo",H.selectedState),g.emit("nodeselectchange",{target:k,selectedItems:{nodes:ot,combos:At},select:!0})}}},onCanvasClick:function(){var P=this,H=this.graph,k=H.findAllByState("node",this.selectedState);Object(i.f)(k,function(g){H.setItemState(g,P.selectedState,!1)});var h=H.findAllByState("combo",this.selectedState);Object(i.f)(h,function(g){H.setItemState(g,P.selectedState,!1)}),H.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.trigger.toLowerCase()||H.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Y=e(122).a.transform,q={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var P=this.fixSelectedItems;return P.fixState||(P.fixState="selected"),P.fixAll&&(P.fixLineWidth=!0,P.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(P){var H=P.originalEvent.touches,k=H[0],h=H[1];P.preventDefault(),h&&(this.startPoint={pageX:k.pageX,pageY:k.pageY},this.moveable=!0,h&&(this.endPoint={pageX:h.pageX,pageY:h.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(P){if(this.moveable){P.preventDefault();var H=P.originalEvent.touches,k=H[0],h=H[1];if(h){this.endPoint||(this.endPoint={pageX:h.pageX,pageY:h.pageY});var g=function(At,gt){return Math.hypot(gt.x-At.x,gt.y-At.y)},G=g({x:k.pageX,y:k.pageY},{x:h.pageX,y:h.pageY})/g({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),V=this.originScale*G;this.currentScale=V;var $=this.get("minZoom")||this.graph.get("minZoom");if(!(V>(this.get("maxZoom")||this.graph.get("maxZoom"))||V<$)){var rt=this.graph.get("canvas").getPointByClient(P.clientX,P.clientY);this.graph.zoomTo(V,{x:rt.x,y:rt.y}),this.graph.emit("wheelzoom",P)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(P){var H=this,k=this.graph,h=this.fixSelectedItems;if(this.shouldUpdate.call(this,P)){P.preventDefault();var g,G=k.get("canvas").getPointByClient(P.clientX,P.clientY),V=this.get("sensitivity"),$=k.getZoom();g=$*(P.wheelDelta<0?1-.05*V:1/(1-.05*V));var rt=this.get("minZoom")||k.get("minZoom");if(!(g>(this.get("maxZoom")||k.get("maxZoom"))||g<rt)){if(this.get("enableOptimize")){var ot=this.get("optimizeZoom"),At=this.get("optimized"),gt=k.getNodes(),mt=k.getEdges(),bt=gt.length,jt=mt.length;if(!At){for(var Dt=0;Dt<bt;Dt++)if(!(Ke=gt[Dt]).destroyed)for(var Ut=(_i=Ke.get("group").get("children")).length,Ct=0;Ct<Ut;Ct++)(tr=_i[Ct]).destoryed||tr.get("isKeyShape")||(tr.set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide());for(var Vt=0;Vt<jt;Vt++)for(Ut=(_i=(Ci=mt[Vt]).get("group").get("children")).length,Ct=0;Ct<Ut;Ct++)(tr=_i[Ct]).set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ht=setTimeout(function(){var Li=k.getZoom();if(H.get("optimized")){H.set("optimized",!1);for(var Vi=0;Vi<bt;Vi++){var ro=gt[Vi],jr=(Br=ro.get("group").get("children")).length;if(Li<ot)(pr=(Nr=ro.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(var Ji=0;Ji<jr;Ji++){var pr=(Kr=Br[Ji]).get("ori-visibility");!Kr.get("visible")&&pr&&pr&&Kr.show()}}for(var Yr=0;Yr<jt;Yr++){var Br,Nr,Xr=mt[Yr];if(jr=(Br=Xr.get("group").get("children")).length,Li<ot)(pr=(Nr=Xr.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(Ji=0;Ji<jr;Ji++){var Kr;(Kr=Br[Ji]).get("visible")||(pr=Kr.get("ori-visibility"))&&Kr.show()}}}},100);this.set("timeout",Ht)}if($<=1){var re=void 0,pe=void 0;if(h.fixAll||h.fixLineWidth||h.fixLabel){re=k.findAllByState("node",h.fixState),pe=k.findAllByState("edge",h.fixState);for(var ye=$/g,we=re.length,Ne=0;Ne<we;Ne++){var Ke,pn=(Ke=re[Ne]).getContainer(),hn=Ke.getModel(),kn=Ke.getOriginStyle(),Tn=Ke.getStateStyle(h.fixState),Rn=Ke.get("shapeFactory").getShape(hn.type).getStateStyle(h.fixState,Ke)[h.fixState];if(h.fixAll){if(g<=1){var Mn=Object(i.c)(pn.getMatrix());Mn||(Mn=[1,0,0,0,1,0,0,0,1]);var Cn=Ke.getModel(),_n=Cn.x,Kn=Cn.y;Mn=Y(Mn,[["t",-_n,-Kn],["s",ye,ye],["t",_n,Kn]]),pn.setMatrix(Mn)}}else for(Ut=(_i=pn.get("children")).length,Ct=0;Ct<Ut;Ct++){var tr=_i[Ct],or=void 0,nr=void 0;if(h.fixLabel&&tr.get("type")==="text"){or=tr.attr("fontSize")||12;var er=Tn[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12;if(g<=1&&tr.attr("fontSize",hi/g),nr)break}if(h.fixLineWidth&&tr.get("isKeyShape")){nr=tr.attr("lineWidth")||0;var Fi=Tn.lineWidth||Rn.lineWidth||kn.lineWidth||0;if(g<=1&&tr.attr("lineWidth",Fi/g),or)break}}}for(var to=pe.length,si=0;si<to;si++){var Ci,_i=(pn=(Ci=pe[si]).getContainer()).get("children");for(hn=Ci.getModel(),Tn=Ci.getStateStyle(h.fixState),Rn=Ci.get("shapeFactory").getShape(hn.type).getStateStyle(h.fixState,Ci)[h.fixState],Ut=_i.length,Ct=0;Ct<Ut&&(tr=_i[Ct],or=void 0,nr=void 0,!((h.fixLabel||h.fixAll)&&tr.get("type")==="text"&&(or=tr.attr("fontSize")||12,er=Tn[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12,g<=1&&tr.attr("fontSize",hi/g),nr)||(h.fixLineWidth||h.fixAll)&&tr.get("isKeyShape")&&(nr=tr.attr("lineWidth")||0,Fi=Tn.lineWidth||Rn.lineWidth||1,g<=1&&tr.attr("lineWidth",Fi/g),or)));Ct++);}}}k.zoomTo(g,{x:G.x,y:G.y}),k.emit("wheelzoom",P)}}}},nt=e(14),vt={onMouseEnter:function(P){var H=P.item;this.currentTarget=H,this.showTooltip(P),this.graph.emit("tooltipchange",{item:P.item,action:"show"})},onMouseMove:function(P){this.shouldUpdate(P)?this.currentTarget&&P.item===this.currentTarget&&this.updatePosition(P):this.hideTooltip()},onMouseLeave:function(P){this.shouldEnd(P)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(P){var H=this.container;if(P.item&&!P.item.destroyed){H||(H=this.createTooltip(this.graph.get("canvas")),this.container=H);var k=this.formatText(P.item.get("model"),P);H.innerHTML=k,Object(nt.c)(this.container,{visibility:"visible"}),this.updatePosition(P)}},hideTooltip:function(){Object(nt.c)(this.container,{visibility:"hidden"})},updatePosition:function(P){var H=this.get("shouldBegin"),k=this.width,h=this.height,g=this.container,G=this.graph;if(H(P)){var V=G.getPointByClient(P.clientX,P.clientY),$=G.getCanvasByPoint(V.x,V.y),rt=$.x,ot=$.y,At=g.getBoundingClientRect();rt>k/2?rt-=At.width:rt+=this.offset,ot>h/2?ot-=At.height:ot+=this.offset;var gt=rt+"px",mt=ot+"px";Object(nt.c)(this.container,{left:gt,top:mt,visibility:"visible"})}else Object(nt.c)(g,{visibility:"hidden"})},createTooltip:function(P){var H=P.get("el");H.style.position="relative";var k=Object(nt.b)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return H.parentNode.appendChild(k),Object(nt.c)(k,{position:"absolute",visibility:"visible"}),this.width=P.get("width"),this.height=P.get("height"),this.container=k,this.graph.get("tooltips").push(k),k}},ht=Object(n.a)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(H){return H.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vt),St=Object(n.a)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(H){return"source: "+H.source+" target: "+H.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vt),wt=["click","dblclick"],xt={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var P,H;return wt.includes(this.trigger)?H=this.trigger:(H="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["node:"+H]="onNodeClick",P.touchstart="onNodeClick",P},onNodeClick:function(P){var H=P.item,k=this.graph.findDataById(H.get("id"));if(k){var h=k.children;if(h&&h.length!==0){var g=!k.collapsed;this.shouldBegin(P,g)&&(k.collapsed=g,H.getModel().collapsed=g,this.graph.emit("itemcollapsed",{item:P.item,collapsed:g}),this.shouldUpdate(P,g)&&(this.onChange(H,g),this.graph.layout()))}}}},ft=b.a.calculationItemsBBox,Ft=function U(P,H){if(H(P)!==!1&&P){var k=P.get("combos");if(k.length===0)return!1;Object(i.f)(k,function(h){U(h,H)})}},kt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(P){var H=P.item;return!(!H||H.destroyed)&&!!this.shouldUpdate(this,P)&&H.getType()==="combo"},onDragStart:function(P){var H=this,k=this.graph,h=P.item;if(this.validationCombo(P)){this.targets=[];var g=k.findAllByState("combo",this.selectedState),G=h.get("id");g.filter(function(V){var $=V.get("id");return G===$}).length===0?this.targets.push(h):this.targets=g,this.activeState&&this.targets.map(function(V){var $=V.getModel();if($.parentId){var rt=k.findById($.parentId);rt&&k.setItemState(rt,H.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:P.x,y:P.y},this.currentItemChildCombos=[],Ft(h,function(V){if(V.destroyed)return!1;var $=V.getModel();return H.currentItemChildCombos.push($.id),!0})}},onDrag:function(P){var H=this;if(this.origin&&this.validationCombo(P))if(this.enableDelegate)this.updateDelegate(P);else{if(this.activeState){var k=this.graph,h=P.item,g=h.getModel(),G=k.getCombos(),V=h.getBBox(),$=V.centerX,rt=V.centerY,ot=V.width;G.filter(function(At){var gt=At.getModel();return g.parentId,gt.id!==g.id&&!H.currentItemChildCombos.includes(gt.id)}).map(function(At){var gt=At.getBBox(),mt=gt.centerX,bt=gt.centerY,jt=gt.width,Dt=$-mt,Ut=rt-bt,Ct=2*Math.sqrt(Dt*Dt+Ut*Ut);ot+jt-Ct>.8*ot?k.setItemState(At,H.activeState,!0):k.setItemState(At,H.activeState,!1)})}Object(i.f)(this.targets,function(At){H.updateCombo(At,P)})}},updatePositions:function(P){var H=this;this.enableDelegate&&Object(i.f)(this.targets,function(k){H.updateCombo(k,P)})},onDrop:function(P){var H=this,k=P.item;if(k&&this.targets&&!k.destroyed){this.updatePositions(P);var h=this.graph,g=k.getModel();this.targets.map(function(G){G.getModel().parentId!==g.id?(H.activeState&&h.setItemState(k,H.activeState,!1),H.onlyChangeComboSize?h.updateCombo(G):h.updateComboTree(G,g.id)):h.updateCombo(k)}),this.end(k,P),this.endComparison=!0}},onNodeDrop:function(P){var H=this;if(this.targets&&this.targets.length!==0){this.updatePositions(P);var k,h=this.graph,g=P.item.getModel().comboId;if(g){if(this.activeState){var G=h.findById(g);h.setItemState(G,this.activeState,!1)}this.targets.map(function(V){H.onlyChangeComboSize?h.updateCombo(V):g!==V.getID()&&(k=h.findById(g),g!==V.getModel().parentId&&h.updateComboTree(V,g))})}else this.targets.map(function(V){H.onlyChangeComboSize?h.updateCombo(V):V.getModel().comboId&&h.updateComboTree(V)});this.endComparison=!0,this.end(k,P)}},onDragEnter:function(P){if(this.origin&&this.validationCombo(P)){var H=P.item,k=this.graph;this.activeState&&k.setItemState(H,this.activeState,!0)}},onDragLeave:function(P){if(this.origin&&this.validationCombo(P)){var H=P.item,k=this.graph;this.activeState&&k.setItemState(H,this.activeState,!1)}},onDragEnd:function(P){if(this.targets&&this.targets.length!==0){var H=P.item;this.updatePositions(P);var k=this.getParentCombo(H.getModel().parentId),h=this.graph;k&&this.activeState&&h.setItemState(k,this.activeState,!1),this.end(void 0,P)}},end:function(P,H){var k=this;if(this.origin){var h=this.graph;this.delegateShape&&(h.get("delegateGroup").clear(),this.delegateShape=null),P&&this.activeState&&h.setItemState(P,this.activeState,!1),P||this.targets.map(function(g){k.onlyChangeComboSize?h.updateCombo(g):h.updateComboTree(g)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(P,H){var k=this;if(H(P)!==!1&&P){var h=P.get("combos");Object(i.f)(h,function(G){k.traverse(G,H)});var g=P.get("nodes");Object(i.f)(g,function(G){k.traverse(G,H)})}},updateCombo:function(P,H){var k=this;this.traverse(P,function(h){return!h.destroyed&&(k.updateSignleItem(h,H),!0)})},updateSignleItem:function(P,H){var k=this.origin,h=this.graph,g=P.getModel(),G=P.get("id");this.point[G]||(this.point[G]={x:g.x,y:g.y});var V=H.x-k.x+this.point[G].x,$=H.y-k.y+this.point[G].y;h.updateItem(P,{x:V,y:$})},getParentCombo:function(P){var H=this.graph;if(P){var k=H.findById(P);if(k)return k}},updateDelegate:function(P){var H=this.graph;if(this.delegateShape){var k=P.x-this.origin.x+this.originPoint.minX,h=P.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:h})}else{var g=H.get("delegateGroup"),G=null,V=(G=this.targets.length>1?ft(this.targets):this.targets[0].getBBox()).x,$=G.y,rt=G.width,ot=G.height,At=G.minX,gt=G.minY;this.originPoint={x:V,y:$,width:rt,height:ot,minX:At,minY:gt};var mt=Object(n.a)(Object(n.a)({},s.a.delegateStyle),this.delegateStyle);this.delegateShape=g.addShape("rect",{attrs:Object(n.a)({width:G.width,height:G.height,x:G.x,y:G.y},mt),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},Ot=["click","dblclick"],X={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var P,H;return Ot.includes(this.trigger)?H=this.trigger:(H="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["combo:"+H]="onComboClick",P},onComboClick:function(P){var H=P.item,k=this.graph,h=this.relayout;if(H&&!H.destroyed&&H.getType()==="combo"){var g=H.getModel().id;g&&(k.collapseExpandCombo(g),h&&k.get("layout")?k.layout():k.refreshPositions())}}},ct=b.a.isPolygonsIntersect,dt=b.a.pathToPoints,pt=["drag","shift","ctrl","alt","control"],Mt=["click","drag"],tt=["shift","ctrl","control","alt","meta",void 0],lt=["shift","ctrl","alt","control"],it={"drag-canvas":y,"zoom-canvas":q,"drag-node":d,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(P){var H=P.item,k=this.graph;if(this.item=H,this.shouldUpdate(P.item,{event:P,action:"activate"})){for(var h=this.activeState,g=this.inactiveState,G=k.getNodes(),V=k.getEdges(),$=G.length,rt=V.length,ot=0;ot<$;ot++){var At=G[ot],gt=At.hasState("selected");this.resetSelected&&gt&&k.setItemState(At,"selected",!1),k.setItemState(At,h,!1),g&&k.setItemState(At,g,!0)}for(ot=0;ot<rt;ot++){var mt=V[ot];k.setItemState(mt,h,!1),g&&k.setItemState(mt,g,!0)}g&&k.setItemState(H,g,!1),k.setItemState(H,h,!0);var bt=H.getEdges(),jt=bt.length;for(ot=0;ot<jt;ot++){var Dt=void 0;Dt=(mt=bt[ot]).getSource()===H?mt.getTarget():mt.getSource(),g&&k.setItemState(Dt,g,!1),k.setItemState(Dt,h,!0),k.setItemState(mt,g,!1),k.setItemState(mt,h,!0),mt.toFront()}k.emit("afteractivaterelations",{item:P.item,action:"activate"})}},clearActiveState:function(P){var H=this.get("graph");if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){var k=this.activeState,h=this.inactiveState,g=H.get("autoPaint");H.setAutoPaint(!1);for(var G=H.getNodes(),V=H.getEdges(),$=G.length,rt=V.length,ot=0;ot<$;ot++){var At=G[ot];H.clearItemStates(At,[k,h])}for(ot=0;ot<rt;ot++){var gt=V[ot];H.clearItemStates(gt,[k,h,"deactivate"])}H.paint(),H.setAutoPaint(g),H.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(P){var H=this.graph;if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){for(var k=this.activeState,h=this.inactiveState,g=H.getNodes(),G=H.getEdges(),V=g.length,$=G.length,rt=0;rt<V;rt++){var ot=g[rt];H.clearItemStates(ot,[k,h])}for(rt=0;rt<$;rt++){var At=G[rt];H.clearItemStates(At,[k,h,"deactivate"])}H.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}}},"brush-select":x,"click-select":N,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return pt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(P){var H=this.lasso;P.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),H||(H=this.createLasso()),this.dragging=!0,this.originPoint={x:P.x,y:P.y},this.points.push(this.originPoint),H.show())},onDragMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:P.x,y:P.y}),this.updateLasso(P))},onDragEnd:function(P){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var P=this.points,H=[];return P.length&&(P.forEach(function(k,h){h===0?H.push(["M",k.x,k.y]):H.push(["L",k.x,k.y])}),H.push(["L",P[0].x,P[0].y])),H},clearStates:function(){var P=this.graph,H=this.selectedState,k=P.findAllByState("node",H),h=P.findAllByState("edge",H);k.forEach(function(g){return P.setItemState(g,H,!1)}),h.forEach(function(g){return P.setItemState(g,H,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var P=this,H=this.graph,k=this.shouldUpdate,h=this.points.map(function(rt){return[H.getCanvasByPoint(rt.x,rt.y).x,H.getCanvasByPoint(rt.x,rt.y).y]}),g=this.selectedState,G=[],V=[];H.getNodes().forEach(function(rt){if(function(At,gt){var mt,bt=At.getKeyShape();if(At.get("type")==="path")mt=dt(bt.attr("path"));else{var jt=bt.getCanvasBBox();mt=[[jt.minX,jt.minY],[jt.maxX,jt.minY],[jt.maxX,jt.maxY],[jt.minX,jt.maxY]]}return ct(gt,mt)}(rt,h)&&k(rt,"select")){G.push(rt);var ot=rt.getModel();V.push(ot.id),H.setItemState(rt,g,!0)}});var $=[];this.includeEdges&&G.forEach(function(rt){rt.getOutEdges().forEach(function(ot){var At=ot.getModel(),gt=At.source,mt=At.target;V.includes(gt)&&V.includes(mt)&&k(ot,"select")&&($.push(ot),H.setItemState(ot,P.selectedState,!0))})}),this.selectedEdges=$,this.selectedNodes=G,this.onSelect&&this.onSelect(G,$),H.emit("nodeselectchange",{selectedItems:{nodes:G,edges:$},select:!0})},createLasso:function(){var P=this.graph.get("delegateGroup").addShape("path",{attrs:Object(n.a)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=P,this.delegate=P,this.points=[],P},updateLasso:function(P){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:ht,"edge-tooltip":St,"collapse-expand":xt,"drag-combo":kt,"collapse-expand-combo":X,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var P;return Mt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&tt.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?P={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(P={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(P.keydown="onKeyDown",P.keyup="onKeyUp"),P},onDragEnd:function(P){if(!this.key||this.keydown){var H=P.item;H&&H.getID()!==this.source&&H.getType()==="node"||this.cancelCreating({item:this.edge,x:P.x,y:P.y})}},onClick:function(P){if(!this.key||this.keydown){var H=P.item,k=this.graph,h=H.getModel(),g=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,P))return;var G=void 0;G=g&&Object(i.r)(g)?g({source:this.source,target:h.id}):this.edgeConfig;var V=Object(n.a)({target:h.id},G);this.source===h.id&&(V.type="loop"),k.emit("beforecreateedge",{}),k.updateItem(this.edge,V),k.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,P))return;G=void 0,G=g&&Object(i.r)(g)?g({source:h.id,target:h.id}):this.edgeConfig,this.edge=k.addItem("edge",Object(n.a)({source:h.id,target:h.id},G),!1),this.source=h.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(P){if(!this.key||this.keydown){var H={x:P.x,y:P.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:H},!1):this.addingEdge=!1}},cancelCreating:function(P){if(!this.key||this.keydown){var H=this.graph,k=P.item;if(this.addingEdge&&P.target&&P.target.isCanvas&&P.target.isCanvas())return H.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===k&&(H.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return lt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(P){var H=P.key;if(H){var k=this.trigger.toLowerCase(),h=H.toLowerCase();this.triggerKeydown||(this.triggerKeydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control");var g=this.graph;if(!g[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var G=this.combinedKey.toLowerCase();this.triggerKeydown&&(h===G||h==="control"&&G==="ctrl"||h==="ctrl"&&G==="control")&&(this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]())}else this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};Object(i.f)(it,function(U,P){Object(v.o)(P,U)})},function(a,A,e){"use strict";var i=e(1),v=e(5),b=e(0);function S(Ot){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(Ot)}Object(v.r)("circle",{options:{size:v.e.defaultNode.size,style:{x:0,y:0,stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(X,ct){var dt=this.getOptions(X).icon,pt=dt===void 0?{}:dt,Mt=this.getShapeStyle(X),tt=Object(b.e)({},pt,X.icon),lt=ct.addShape("circle",{attrs:Mt,className:this.type+"-keyShape",draggable:!0}),it=tt.width,U=tt.height;return tt.show&&ct.addShape("image",{attrs:Object(i.a)({x:-it/2,y:-U/2},tt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ct),lt},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.bottom,U=pt.size,P=pt.r,H=Object(i.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X)[0]/2;tt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:-k,y:0,r:U/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:k,y:0,r:U/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:-k,r:U/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:k,r:U/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.e)({},ct,dt),Mt=this.getSize(X)[0]/2;return Object(i.a)({x:0,y:0,r:Mt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getSize(X),Mt={stroke:X.color,r:pt[0]/2},tt=ct.get("keyShape"),lt=Object(b.e)({},tt.attr(),Mt,X.style);this.updateShape(X,ct,lt,!0),this.updateLinkPoints(X,dt)}},"single-node"),Object(v.r)("rect",{options:{size:[100,30],style:{radius:0,stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(X,ct){var dt=this.getShapeStyle(X),pt=ct.addShape("rect",{attrs:dt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(X,ct),pt},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.bottom,U=pt.size,P=pt.r,H=Object(i.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),h=k[0],g=k[1];tt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:-h/2,y:0,r:U/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:h/2,y:0,r:U/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:-g/2,r:U/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:g/2,r:U/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getSize(X),tt=pt.width||Mt[0],lt=pt.height||Mt[1];return Object(i.a)({x:-tt/2,y:-lt/2,width:tt,height:lt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getOptions({}).style,Mt=this.getSize(X),tt=ct.get("keyShape");X.size||(Mt[0]=tt.attr("width")||pt.width,Mt[1]=tt.attr("height")||pt.height);var lt={stroke:X.color,x:-Mt[0]/2,y:-Mt[1]/2,width:Mt[0],height:Mt[1]},it=Object(b.A)({},pt,tt.attr(),lt);it=Object(b.A)(it,X.style),this.updateShape(X,ct,it,!1),this.updateLinkPoints(X,dt)}},"single-node"),Object(v.r)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(X,ct){var dt=this.getOptions(X).icon,pt=dt===void 0?{}:dt,Mt=this.getShapeStyle(X),tt=ct.addShape("ellipse",{attrs:Mt,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),lt=pt.width,it=pt.height;return pt.show&&ct.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ct),tt},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.bottom,U=pt.size,P=pt.r,H=Object(i.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),h=k[0]/2,g=k[1]/2;tt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:-h,y:0,r:U/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:h,y:0,r:U/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:-g,r:U/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:g,r:U/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getSize(X),tt=Mt[0]/2,lt=Mt[1]/2;return Object(i.a)({x:0,y:0,rx:tt,ry:lt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getOptions({}).style,Mt=this.getSize(X),tt={stroke:X.color,rx:Mt[0]/2,ry:Mt[1]/2},lt=ct.get("keyShape"),it=Object(b.A)({},pt,lt.attr(),tt);it=Object(b.A)(it,X.style),this.updateShape(X,ct,it,!0),this.updateLinkPoints(X,dt)}},"single-node"),Object(v.r)("diamond",{options:{size:[80,80],style:{stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(X,ct){var dt=this.getOptions(X).icon,pt=dt===void 0?{}:dt,Mt=this.getShapeStyle(X),tt=ct.addShape("path",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),lt=pt.width,it=pt.height;return pt.show&&ct.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ct),tt},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.bottom,U=pt.size,P=pt.r,H=Object(i.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),h=k[0],g=k[1];tt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:-h/2,y:0,r:U/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:h/2,y:0,r:U/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:-g/2,r:U/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:g/2,r:U/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(X){var ct=this.getSize(X),dt=ct[0],pt=ct[1];return[["M",0,-pt/2],["L",dt/2,0],["L",0,pt/2],["L",-dt/2,0],["Z"]]},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getPath(X);return Object(i.a)({path:Mt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getOptions({}).style,Mt=this.getPath(X),tt={stroke:X.color,path:Mt},lt=ct.get("keyShape"),it=Object(b.A)({},pt,lt.attr(),tt);it=Object(b.A)(it,X.style),this.updateShape(X,ct,it,!0),this.updateLinkPoints(X,dt)}},"single-node"),Object(v.r)("triangle",{options:{size:40,direction:"up",style:{stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(X,ct){var dt=this.getOptions(X),pt=dt.icon,Mt=pt===void 0?{}:pt,tt=dt.direction,lt=this.getShapeStyle(X),it=X.direction||tt,U=ct.addShape("path",{attrs:lt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=Mt.width,H=Mt.height,k=Mt.show,h=Mt.offset;if(k){var g=-P/2,G=-H/2;it!=="up"&&it!=="down"||(G+=h),it!=="left"&&it!=="right"||(g+=h),ct.addShape("image",{attrs:Object(i.a)({x:g,y:G},Mt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(X,ct),U},drawLinkPoints:function(X,ct){var dt=this.getOptions(X),pt=dt.linkPoints,Mt=pt===void 0?{}:pt,tt=dt.direction,lt=X.direction||tt,it=Mt.top,U=Mt.left,P=Mt.right,H=Mt.bottom,k=Mt.size,h=Mt.r,g=Object(i.c)(Mt,["top","left","right","bottom","size","r"]),G=this.getSize(X)[0];if(U){var V=null,$=G*Math.sin(1/3*Math.PI),rt=G*Math.sin(1/3*Math.PI);lt==="up"?V=[-rt,$]:lt==="down"?V=[-rt,-$]:lt==="left"&&(V=[-rt,rt-$]),V&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:V[0],y:V[1],r:k/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(P){var ot=null;$=G*Math.sin(1/3*Math.PI),rt=G*Math.sin(1/3*Math.PI),lt==="up"?ot=[rt,$]:lt==="down"?ot=[rt,-$]:lt==="right"&&(ot=[rt,rt-$]),ot&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:ot[0],y:ot[1],r:k/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(it){var At=null;$=G*Math.sin(1/3*Math.PI),rt=G*Math.sin(1/3*Math.PI),lt==="up"?At=[rt-$,-$]:lt==="left"?At=[rt,-$]:lt==="right"&&(At=[-rt,-$]),At&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:At[0],y:At[1],r:k/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(H){var gt=null;$=G*Math.sin(1/3*Math.PI),rt=G*Math.sin(1/3*Math.PI),lt==="down"?gt=[-rt+$,$]:lt==="left"?gt=[rt,$]:lt==="right"&&(gt=[-rt,$]),gt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:gt[0],y:gt[1],r:k/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(X){var ct=this.getOptions(X).direction,dt=X.direction||ct,pt=this.getSize(X)[0],Mt=pt*Math.sin(1/3*Math.PI),tt=pt*Math.sin(1/3*Math.PI),lt=[["M",-tt,Mt],["L",0,-Mt],["L",tt,Mt],["Z"]];return dt==="down"?lt=[["M",-tt,-Mt],["L",tt,-Mt],["L",0,Mt],["Z"]]:dt==="left"?lt=[["M",-tt,tt-Mt],["L",tt,-tt],["L",tt,tt],["Z"]]:dt==="right"&&(lt=[["M",tt,tt-Mt],["L",-tt,tt],["L",-tt,-tt],["Z"]]),lt},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getPath(X);return Object(i.a)({path:Mt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getOptions({}).style,Mt=this.getPath(X),tt={stroke:X.color,path:Mt},lt=ct.get("keyShape"),it=Object(b.A)({},pt,lt.attr(),tt);it=Object(b.A)(it,X.style),this.updateShape(X,ct,it,!0),this.updateLinkPoints(X,dt)},updateLinkPoints:function(X,ct){var dt=this.getOptions({}),pt=dt.linkPoints,Mt=dt.direction,tt=X.direction||Mt,lt=ct.find(function(pe){return pe.get("className")==="link-point-left"}),it=ct.find(function(pe){return pe.get("className")==="link-point-right"}),U=ct.find(function(pe){return pe.get("className")==="link-point-top"}),P=ct.find(function(pe){return pe.get("className")==="link-point-bottom"}),H=pt,k=lt||it||U||P;k&&(H=k.attr());var h=Object(b.A)({},H,X.linkPoints),g=h.fill,G=h.stroke,V=h.lineWidth,$=h.size/2;$||($=h.r);var rt=X.linkPoints?X.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ot=rt.left,At=rt.right,gt=rt.top,mt=rt.bottom,bt=this.getSize(X)[0],jt={r:$,fill:g,stroke:G,lineWidth:V},Dt=null,Ut=bt*Math.sin(1/3*Math.PI),Ct=bt*Math.sin(1/3*Math.PI);tt==="up"?Dt=[-Ct,Ut]:tt==="down"?Dt=[-Ct,-Ut]:tt==="left"&&(Dt=[-Ct,Ct-Ut]),Dt&&(lt?ot||ot===void 0?lt.attr(Object(i.a)(Object(i.a)({},jt),{x:Dt[0],y:Dt[1]})):lt.remove():ot&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},jt),{x:Dt[0],y:Dt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Vt=null;tt==="up"?Vt=[Ct,Ut]:tt==="down"?Vt=[Ct,-Ut]:tt==="right"&&(Vt=[Ct,Ct-Ut]),Vt&&(it?At||At===void 0?it.attr(Object(i.a)(Object(i.a)({},jt),{x:Vt[0],y:Vt[1]})):it.remove():At&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},jt),{x:Vt[0],y:Vt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Ht=null;tt==="up"?Ht=[Ct-Ut,-Ut]:tt==="left"?Ht=[Ct,-Ut]:tt==="right"&&(Ht=[-Ct,-Ut]),Ht&&(U?gt||gt===void 0?U.attr(Object(i.a)(Object(i.a)({},jt),{x:Ht[0],y:Ht[1]})):U.remove():gt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},jt),{x:Ht[0],y:Ht[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var re=null;tt==="down"?re=[-Ct+Ut,Ut]:tt==="left"?re=[Ct,Ut]:tt==="right"&&(re=[-Ct,Ut]),re&&(P?mt||mt===void 0?P.attr(Object(i.a)(Object(i.a)({},jt),{x:re[0],y:re[1]})):P.remove():mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},jt),{x:re[0],y:re[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Object(v.r)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:v.e.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(X,ct){var dt=this.getOptions(X).preRect,pt=dt===void 0?{}:dt,Mt=this.getShapeStyle(X),tt=this.getSize(X),lt=tt[0],it=tt[1],U=ct.addShape("rect",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=pt.show,H=Object(i.c)(pt,["show"]);return P&&ct.addShape("rect",{attrs:Object(i.a)({x:-lt/2,y:-it/2,height:it},H),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(X,ct),this.drawStateIcon(X,ct),this.drawLinkPoints(X,ct),U},drawLogoIcon:function(X,ct){var dt=this.getOptions(X).logoIcon,pt=dt===void 0?{}:dt,Mt=this.getSize(X)[0];if(pt.show){var tt=pt.width,lt=pt.height,it=pt.x,U=pt.y,P=pt.offset,H=Object(i.c)(pt,["width","height","x","y","offset"]);ct.addShape("image",{attrs:Object(i.a)(Object(i.a)({},H),{x:it||-Mt/2+tt+P,y:U||-lt/2,width:tt,height:lt}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(X,ct){var dt=this.getOptions(X).stateIcon,pt=dt===void 0?{}:dt,Mt=this.getSize(X)[0];if(pt.show){var tt=pt.width,lt=pt.height,it=pt.x,U=pt.y,P=pt.offset,H=Object(i.c)(pt,["width","height","x","y","offset"]);ct.addShape("image",{attrs:Object(i.a)(Object(i.a)({},H),{x:it||Mt/2-tt+P,y:U||-lt/2,width:tt,height:lt}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.bottom,U=pt.size,P=pt.r,H=Object(i.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),h=k[0],g=k[1];tt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:-h/2,y:0,r:U/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:h/2,y:0,r:U/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:-g/2,r:U/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},H),{x:0,y:g/2,r:U/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(X,ct){var dt=this.getOptions(X),pt=dt.labelCfg,Mt=pt===void 0?{}:pt,tt=dt.logoIcon,lt=tt===void 0?{}:tt,it=dt.descriptionCfg,U=it===void 0?{}:it,P=this.getSize(X)[0],H=null,k=lt.show,h=lt.width,g=-P/2+Mt.offset;k&&(g=-P/2+h+Mt.offset);var G=Mt.style,V=U.style,$=U.paddingTop;return Object(b.x)(X.description)?(H=ct.addShape("text",{attrs:Object(i.a)(Object(i.a)({},G),{x:g,y:-5,text:X.label}),className:"text-shape",name:"text-shape",draggable:!0}),ct.addShape("text",{attrs:Object(i.a)(Object(i.a)({},V),{x:g,y:17+($||0),text:X.description}),className:"rect-description",name:"rect-description",draggable:!0})):H=ct.addShape("text",{attrs:Object(i.a)(Object(i.a)({},G),{x:g,y:7,text:X.label}),className:"text-shape",name:"text-shape",draggable:!0}),H},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getSize(X),tt=pt.width||Mt[0],lt=pt.height||Mt[1];return Object(i.a)({x:-tt/2,y:-lt/2,width:tt,height:lt},pt)},update:function(X,ct){var dt=this.getOptions(X),pt=dt.style,Mt=pt===void 0?{}:pt,tt=dt.labelCfg,lt=tt===void 0?{}:tt,it=dt.descriptionCfg,U=it===void 0?{}:it,P=this.getSize(X),H=P[0],k=P[1];ct.get("keyShape").attr(Object(i.a)(Object(i.a)({},Mt),{x:-H/2,y:-k/2,width:H,height:k}));var h=ct.getContainer(),g=h.find(function(Mn){return Mn.get("className")==="rect-logo-icon"}),G=g?g.attr():{},V=Object(b.A)({},G,X.logoIcon),$=V.width;$===void 0&&($=this.options.logoIcon.width);var rt=X.logoIcon?X.logoIcon.show:void 0,ot=lt.offset,At=-H/2+$+ot;rt||rt===void 0||(At=-H/2+ot);var gt=h.find(function(Mn){return Mn.get("className")==="node-label"}),mt=h.find(function(Mn){return Mn.get("className")==="rect-description"});if(X.label)if(gt){var bt=X.labelCfg?X.labelCfg.style:{},jt=Object(b.A)({},gt.attr(),bt);X.label&&(jt.text=X.label),jt.x=At,Object(b.x)(X.description)&&(jt.y=-5),mt&&(mt.resetMatrix(),mt.attr({x:At})),gt.resetMatrix(),gt.attr(jt)}else h.addShape("text",{attrs:Object(i.a)(Object(i.a)({},lt.style),{x:At,y:X.description?-5:7,text:X.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(b.x)(X.description)){var Dt=U.paddingTop;if(mt){bt=X.descriptionCfg?X.descriptionCfg.style:{};var Ut=Object(b.A)({},mt.attr(),bt);Object(b.x)(X.description)&&(Ut.text=X.description),Ut.x=At,mt.resetMatrix(),mt.attr(Object(i.a)(Object(i.a)({},Ut),{y:17+(Dt||0)}))}else h.addShape("text",{attrs:Object(i.a)(Object(i.a)({},U.style),{x:At,y:17+(Dt||0),text:X.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Ct=h.find(function(Mn){return Mn.get("className")==="pre-rect"});if(Ct){var Vt=Object(b.A)({},Ct.attr(),X.preRect);Ct.attr(Object(i.a)(Object(i.a)({},Vt),{x:-H/2,y:-k/2,height:k}))}if(g)if(rt||rt===void 0){var Ht=V.width,re=V.height,pe=V.x,ye=V.y,we=V.offset,Ne=Object(i.c)(V,["width","height","x","y","offset"]);g.attr(Object(i.a)(Object(i.a)({},Ne),{x:pe||-H/2+Ht+we,y:ye||-re/2,width:Ht,height:re}))}else g.remove();else rt&&this.drawLogoIcon(X,h);var Ke=h.find(function(Mn){return Mn.get("className")==="rect-state-icon"}),pn=Ke?Ke.attr():{},hn=Object(b.A)({},pn,X.stateIcon);if(Ke){hn.show||hn.show===void 0||Ke.remove();var kn=hn.width,Tn=(re=hn.height,pe=hn.x,ye=hn.y,hn.offset),Rn=Object(i.c)(hn,["width","height","x","y","offset"]);Ke.attr(Object(i.a)(Object(i.a)({},Rn),{x:pe||H/2-kn+Tn,y:ye||-re/2,width:kn,height:re}))}else hn.show&&this.drawStateIcon(X,h);this.updateLinkPoints(X,h)}},"single-node"),Object(v.r)("star",{options:{size:60,style:{stroke:v.e.defaultNode.style.stroke,fill:v.e.defaultNode.style.fill,lineWidth:v.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:v.e.nodeLabel.style.fill,fontSize:v.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:v.e.defaultNode.linkPoints.size,lineWidth:v.e.defaultNode.linkPoints.lineWidth,fill:v.e.defaultNode.linkPoints.fill,stroke:v.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},v.e.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(X,ct){var dt=this.getOptions(X).icon,pt=dt===void 0?{}:dt,Mt=this.getShapeStyle(X),tt=ct.addShape("path",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),lt=pt.width,it=pt.height;return pt.show&&ct.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ct),tt},drawLinkPoints:function(X,ct){var dt=this.getOptions(X).linkPoints,pt=dt===void 0?{}:dt,Mt=pt.top,tt=pt.left,lt=pt.right,it=pt.leftBottom,U=pt.rightBottom,P=pt.size,H=pt.r,k=Object(i.c)(pt,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(X)[0];if(lt){var g=Math.cos(.1*Math.PI)*h,G=Math.sin(.1*Math.PI)*h;ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-G,r:P/2||H||5}),className:"link-point-right",name:"link-point-right"})}Mt&&(g=Math.cos(.5*Math.PI)*h,G=Math.sin(.5*Math.PI)*h,ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-G,r:P/2||H||5}),className:"link-point-top",name:"link-point-top"})),tt&&(g=Math.cos(.9*Math.PI)*h,G=Math.sin(.9*Math.PI)*h,ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-G,r:P/2||H||5}),className:"link-point-left",name:"link-point-left"})),it&&(g=Math.cos(1.3*Math.PI)*h,G=Math.sin(1.3*Math.PI)*h,ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-G,r:P/2||H||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),U&&(g=Math.cos(1.7*Math.PI)*h,G=Math.sin(1.7*Math.PI)*h,ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-G,r:P/2||H||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(X){for(var ct=this.getSize(X)[0],dt=3*ct/8,pt=X.innerR||dt,Mt=[],tt=0;tt<5;tt++){var lt=Math.cos((18+72*tt)/180*Math.PI)*ct,it=Math.sin((18+72*tt)/180*Math.PI)*ct,U=Math.cos((54+72*tt)/180*Math.PI)*pt,P=Math.sin((54+72*tt)/180*Math.PI)*pt;tt===0?Mt.push(["M",lt,-it]):Mt.push(["L",lt,-it]),Mt.push(["L",U,-P])}return Mt.push(["Z"]),Mt},getShapeStyle:function(X){var ct=this.getOptions(X).style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt),Mt=this.getPath(X);return Object(i.a)({path:Mt},pt)},update:function(X,ct){var dt=ct.getContainer(),pt=this.getOptions({}).style,Mt=this.getPath(X),tt={stroke:X.color,path:Mt},lt=ct.get("keyShape"),it=Object(b.A)({},pt,lt.attr(),tt);it=Object(b.A)(it,X.style),this.updateShape(X,ct,it,!0),this.updateLinkPoints(X,dt)},updateLinkPoints:function(X,ct){var dt=this.getOptions({}).linkPoints,pt=ct.find(function(Ut){return Ut.get("className")==="link-point-left"}),Mt=ct.find(function(Ut){return Ut.get("className")==="link-point-right"}),tt=ct.find(function(Ut){return Ut.get("className")==="link-point-top"}),lt=ct.find(function(Ut){return Ut.get("className")==="link-point-left-bottom"}),it=ct.find(function(Ut){return Ut.get("className")==="link-point-right-bottom"}),U=dt,P=pt||Mt||tt||lt||it;P&&(U=P.attr());var H=Object(b.A)({},U,X.linkPoints),k=H.fill,h=H.stroke,g=H.lineWidth,G=H.size/2;G||(G=H.r);var V=X.linkPoints?X.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},$=V.left,rt=V.right,ot=V.top,At=V.leftBottom,gt=V.rightBottom,mt=this.getSize(X)[0],bt={r:G,fill:k,stroke:h,lineWidth:g},jt=Math.cos(.1*Math.PI)*mt,Dt=Math.sin(.1*Math.PI)*mt;Mt?rt||rt===void 0?Mt.attr(Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt})):Mt.remove():rt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),jt=Math.cos(.5*Math.PI)*mt,Dt=Math.sin(.5*Math.PI)*mt,tt?ot||ot===void 0?tt.attr(Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt})):tt.remove():ot&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),jt=Math.cos(.9*Math.PI)*mt,Dt=Math.sin(.9*Math.PI)*mt,pt?$||$===void 0?pt.attr(Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt})):pt.remove():$&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),jt=Math.cos(1.3*Math.PI)*mt,Dt=Math.sin(1.3*Math.PI)*mt,lt?At||At===void 0?lt.attr(Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt})):lt.remove():At&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),jt=Math.cos(1.7*Math.PI)*mt,Dt=Math.sin(1.7*Math.PI)*mt,it?gt||gt===void 0?it.attr(Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt})):lt.remove():gt&&ct.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},bt),{x:jt,y:-Dt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var f=function(X){var ct=X.x,dt=X.y;return{x:ct,y:dt,centerX:ct,centerY:dt,minX:ct,minY:dt,maxX:ct,maxY:dt,height:0,width:0}},M=function(X,ct){return 2*Math.abs(X.centerX-ct.centerX)<X.width+ct.width&&2*Math.abs(X.centerY-ct.centerY)<X.height+ct.height},I=function(X){for(var ct=[],dt={},pt=X.length,Mt=0;Mt<pt;Mt++){var tt=X[Mt];tt.id=tt.x+"|||"+tt.y,dt[tt.id]=tt,ct.push(tt)}return ct},y=function(X){return X=I(X)},n=function(X,ct){return[X,{x:X.x,y:ct.y},ct]},s=function(X,ct){return X.width===0&&X.height===0?X:{centerX:X.centerX,centerY:X.centerY,minX:X.minX-ct,minY:X.minY-ct,maxX:X.maxX+ct,maxY:X.maxY+ct,height:X.height+2*ct,width:X.width+2*ct}},d=function(X,ct,dt){var pt=function(lt,it){var U=Math.abs(lt.x-it.centerX),P=Math.abs(lt.y-it.centerY);return U===0&&P===0?0:U/it.width>P/it.height}(ct,X);if(pt===0){var Mt=X.centerX,tt=X.centerY;return dt.y<ct.y?tt=X.minY:dt.x>ct.x?Mt=X.maxX:dt.x<ct.x?Mt=X.minX:dt.x===ct.x&&(tt=X.maxY),{x:Mt,y:tt}}return pt?{x:ct.x>X.centerX?X.maxX:X.minX,y:ct.y}:{x:ct.x,y:ct.y>X.centerY?X.maxY:X.minY}},E=function(X,ct){var dt=Math.min(X.minX,ct.minX),pt=Math.min(X.minY,ct.minY),Mt=Math.max(X.maxX,ct.maxX),tt=Math.max(X.maxY,ct.maxY);return{centerX:(dt+Mt)/2,centerY:(pt+tt)/2,minX:dt,minY:pt,maxX:Mt,maxY:tt,height:tt-pt,width:Mt-dt}},O=function(X){var ct=X.minX,dt=X.minY,pt=X.maxX,Mt=X.maxY;return[{x:ct,y:dt},{x:pt,y:dt},{x:pt,y:Mt},{x:ct,y:Mt}]},C=function(X,ct){var dt=X.x,pt=X.y;return dt<ct.minX||dt>ct.maxX||pt<ct.minY||pt>ct.maxY},p=function(X,ct){return Math.abs(X.x-ct.x)+Math.abs(X.y-ct.y)},x=function(X,ct,dt,pt,Mt){return p(X,ct)+p(X,dt)+function(tt,lt){var it=0;return lt.forEach(function(U){U&&(tt.x===U.x&&(it+=-2),tt.y===U.y&&(it+=-2))}),it}(X,[ct,dt,pt,Mt])},T=function(X,ct,dt,pt){var Mt=dt.x-X.x,tt=dt.y-X.y,lt=pt.x-X.x,it=pt.y-X.y,U=dt.x-ct.x,P=dt.y-ct.y,H=pt.x-ct.x,k=pt.y-ct.y;return(Mt*it-tt*lt)*(U*k-P*H)<=0&&(Mt*P-tt*U)*(lt*k-it*H)<=0},N=function(X,ct,dt){if(dt.width===0&&dt.height===0)return!1;var pt=O(dt),Mt=pt[0],tt=pt[1],lt=pt[2],it=pt[3];return T(X,ct,Mt,tt)||T(X,ct,Mt,it)||T(X,ct,tt,lt)||T(X,ct,lt,it)},Y=function(X,ct,dt,pt,Mt,tt,lt){var it=[],U=[ct],P={},H={},k={};H[ct.id]=0,k[ct.id]=x(ct,dt,ct);var h={};X.forEach(function(V){h[V.id]=V});for(var g=function(){var $,rt,ot,At,gt=1/0;if(U.forEach(function(bt){k[bt.id]<gt&&(gt=k[bt.id],$=bt)}),$===dt){var mt=[];return function bt(jt,Dt,Ut,Ct,Vt){Vt===void 0&&(Vt=0),jt.unshift(Dt[Ct]),Ut[Ct]&&Ut[Ct]!==Ct&&Vt<=100&&bt(jt,Dt,Ut,Ut[Ct],Vt+1)}(mt,h,P,dt.id),{value:mt}}ot=$,(At=(rt=U).indexOf(ot))>-1&&rt.splice(At,1),it.push($),function(bt,jt,Dt,Ut){var Ct=[];return bt.forEach(function(Vt){Vt!==jt&&(Vt.x!==jt.x&&Vt.y!==jt.y||N(Vt,jt,Dt)||N(Vt,jt,Ut)||Ct.push(Vt))}),I(Ct)}(X,$,pt,Mt).forEach(function(bt){if(it.indexOf(bt)===-1){U.indexOf(bt)===-1&&U.push(bt);var jt=k[$.id]+p($,bt);H[bt.id]&&jt>=H[bt.id]||(P[bt.id]=$.id,H[bt.id]=jt,k[bt.id]=H[bt.id]+x(bt,dt,ct,tt,lt))}})};U.length;){var G=g();if(S(G)==="object")return G.value}return[ct,dt]},q=function(X,ct){var dt=[],pt=X[0];return dt.push("M"+pt.x+" "+pt.y),X.forEach(function(Mt,tt){var lt=X[tt+1],it=X[tt+2];if(lt&&it)if(function(k,h,g){return!(k.x===h.x&&h.x===g.x||k.y===h.y&&h.y===g.y)}(Mt,lt,it)){var U=function(k,h,g,G){var V=p(k,h),$=p(g,h);return V<G&&(G=V),$<G&&(G=$),[{x:h.x-G/V*(h.x-k.x),y:h.y-G/V*(h.y-k.y)},{x:h.x-G/$*(h.x-g.x),y:h.y-G/$*(h.y-g.y)}]}(Mt,lt,it,ct),P=U[0],H=U[1];dt.push("L"+P.x+" "+P.y),dt.push("Q"+lt.x+" "+lt.y+" "+H.x+" "+H.y),dt.push("L"+H.x+" "+H.y)}else dt.push("L"+lt.x+" "+lt.y);else lt&&dt.push("L"+lt.x+" "+lt.y)}),dt.join("")},nt=function(X,ct,dt,pt,Mt){var tt,lt;if(dt&&dt.getType()?dt.getType()==="combo"?((tt=dt.getKeyShape().getCanvasBBox()||f(X)).centerX=(tt.minX+tt.maxX)/2,tt.centerY=(tt.minY+tt.maxY)/2):tt=dt.getBBox():tt=f(X),pt&&pt.getType()?pt.getType()==="combo"?((lt=pt.getKeyShape().getCanvasBBox()||f(ct)).centerX=(lt.minX+lt.maxX)/2,lt.centerY=(lt.minY+lt.maxY)/2):lt=pt&&pt.getBBox():lt=f(ct),M(tt,lt))return y(n(X,ct));var it=s(tt,Mt),U=s(lt,Mt);if(M(it,U))return y(n(X,ct));var P=d(it,X,ct),H=d(U,ct,X),k=function(rt){rt===void 0&&(rt=[]);var ot=[],At=[];rt.forEach(function(Dt){ot.push(Dt.x),At.push(Dt.y)});var gt=Math.min.apply(Math,ot),mt=Math.max.apply(Math,ot),bt=Math.min.apply(Math,At),jt=Math.max.apply(Math,At);return{centerX:(gt+mt)/2,centerY:(bt+jt)/2,maxX:mt,maxY:jt,minX:gt,minY:bt,height:jt-bt,width:mt-gt}}([P,H]),h=E(it,k),g=E(U,k),G=[];G=(G=G.concat(O(h))).concat(O(g));var V={x:(X.x+ct.x)/2,y:(X.y+ct.y)/2};[k,h,g].forEach(function(rt){G=G.concat(function(ot,At){return function(gt,mt){return mt<gt.minX||mt>gt.maxX?[]:[{x:mt,y:gt.minY},{x:mt,y:gt.maxY}]}(ot,At.x).concat(function(gt,mt){return mt<gt.minY||mt>gt.maxY?[]:[{x:gt.minX,y:mt},{x:gt.maxX,y:mt}]}(ot,At.y))}(rt,V).filter(function(ot){return C(ot,it)&&C(ot,U)}))}),[{x:P.x,y:H.y},{x:H.x,y:P.y}].forEach(function(rt){C(rt,it)&&C(rt,U)&&G.push(rt)}),G.unshift(P),G.push(H),G=I(G);var $=Y(G,P,H,tt,lt,X,ct);return $.unshift(X),$.push(ct),y($)};function vt(Ot){return(vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(Ot)}var ht={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(X,ct){return Math.abs(X.x-ct.x)+Math.abs(X.y-ct.y)},fallbackRoute:function(X,ct,dt,pt,Mt){return y(nt(X,ct,dt,pt,Mt.offset))}},St=function(X,ct){var dt=Math.floor(Math.abs(X/ct));return dt<0?0:(X<0?-1:1)*dt},wt=function(X,ct){var dt=ct.x-X.x,pt=ct.y-X.y;return dt||pt?(360+180*Math.atan2(pt,dt)/Math.PI)%360:0},xt=function(X,ct){var dt=Math.abs(X-ct);return dt>180?360-dt:dt},ft=function(X,ct,dt){for(var pt=1/0,Mt=0,tt=ct.length;Mt<tt;Mt++){var lt=dt(X,ct[Mt]);lt<pt&&(pt=lt)}return pt},Ft=function(X,ct,dt,pt,Mt){var tt=[];if(!dt)return tt;var lt=Mt.directions,it=Mt.offset,U=dt.getBBox(),P=ct.x>U.minX&&ct.x<U.maxX&&ct.y>U.minY&&ct.y<U.maxY,H=s(U,it);for(var k in H)H[k]=St(H[k],Mt.gridSize);if(P)for(var h=0,g=lt;h<g.length;h++){var G=g[h],V=[[{x:H.minX,y:H.minY},{x:H.maxX,y:H.minY}],[{x:H.minX,y:H.minY},{x:H.minX,y:H.maxY}],[{x:H.maxX,y:H.minY},{x:H.maxX,y:H.maxY}],[{x:H.minX,y:H.maxY},{x:H.maxX,y:H.maxY}]];for(k=0;k<4;k++){var $,rt=V[k];($=v.n.getLineIntersect(X,{x:X.x+G.stepX*H.width,y:X.y+G.stepY*H.height},rt[0],rt[1]))&&!N(X,$,U)&&($.id=$.x+"|||"+$.y,tt.push($))}}else($=d(H,X,pt)).id=$.x+"|||"+$.y,tt.push($);return tt},kt=function(X,ct,dt,pt,Mt){var tt=Object(b.e)(ht,Mt);tt.obstacles=tt.obstacles||[];var lt=function(bt,jt,Dt){var Ut={};return bt.forEach(function(Ct){if(Ct)for(var Vt=s(Ct.getBBox(),Dt),Ht=St(Vt.minX,jt);Ht<=St(Vt.maxX,jt);Ht+=1)for(var re=St(Vt.minY,jt);re<=St(Vt.maxY,jt);re+=1)Ut[Ht+"|||"+re]=!0}),Ut}(tt.obstacles.concat([dt,pt]),tt.gridSize,tt.offset),it={x:St(X.x,tt.gridSize),y:St(X.y,tt.gridSize)},U={x:St(ct.x,tt.gridSize),y:St(ct.y,tt.gridSize)};X.id=it.x+"|||"+it.y,ct.id=U.x+"|||"+U.y;var P=Ft(it,X,dt,U,tt),H=Ft(U,ct,pt,it,tt);P.forEach(function(bt){delete lt[bt.id]}),H.forEach(function(bt){delete lt[bt.id]});for(var k={},h={},g={},G={},V={},$=0;$<P.length;$++){var rt=P[$];k[rt.id]=rt,G[rt.id]=0,V[rt.id]=ft(rt,H,tt.distFunc)}for(var ot=function(jt,Dt){var Ut,Ct=wt(jt,Dt);if(g[jt.id]){var Vt=wt({x:parseFloat(g[jt.id].split("|||")[0]),y:parseFloat(g[jt.id].split("|||")[1])},jt);Ut=xt(Vt,Ct)}else{var Ht=wt(it,jt);Ut=xt(Ht,Ct)}return Ut},At=tt.maximumLoops,gt=function(){var jt,Dt=1/0;for(var Ut in k)V[Ut]<=Dt&&(Dt=V[Ut],jt=k[Ut]);if(!jt)return"break";if(H.findIndex(function(we){return we.x===jt.x&&we.y===jt.y})>-1)return{value:function(we){var Ne=[ct],Ke={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we};for(ot(Ke,U)&&Ne.unshift({x:Ke.x===U.x?ct.x:Ke.x*tt.gridSize,y:Ke.y===U.y?ct.y:Ke.y*tt.gridSize});g[we]&&g[we]!==we;){var pn={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we},hn=g[we],kn={x:parseFloat(hn.split("|||")[0]),y:parseFloat(hn.split("|||")[1]),id:hn};ot(kn,pn)&&Ne.unshift({x:kn.x===pn.x?Ne[0].x:kn.x*tt.gridSize,y:kn.y===pn.y?Ne[0].y:kn.y*tt.gridSize}),we=hn}var Tn=parseFloat(we.split("|||")[0]),Rn=parseFloat(we.split("|||")[1]);return Ne[0].x=Tn===it.x?X.x:Ne[0].x,Ne[0].y=Rn===it.y?X.y:Ne[0].y,Ne.unshift(X),Ne}(jt.id)};delete k[jt.id],h[jt.id]=!0;for(var Ct=0;Ct<tt.directions.length;Ct++){var Vt=tt.directions[Ct],Ht={x:jt.x+Vt.stepX,y:jt.y+Vt.stepY,id:jt.x+Vt.stepX+"|||"+(jt.y+Vt.stepY)};if(!h[Ht.id]){var re=ot(jt,Ht);if(!(re>tt.maxAllowedDirectionChange||lt[Ht.id])){k[Ht.id]||(k[Ht.id]=Ht);var pe=tt.distFunc(jt,Ht)+(isNaN(tt.penalties[re])?tt.gridSize:tt.penalties[re]),ye=G[jt.id]+pe;G[Ht.id]&&ye>=G[Ht.id]||(g[Ht.id]=jt.id,G[Ht.id]=ye,V[Ht.id]=ye+ft(Ht,H,tt.distFunc))}}}At-=1};Object.keys(k).length>0&&At>0;){var mt=gt();if(vt(mt)==="object")return mt.value;if(mt==="break")break}return tt.fallbackRoute(X,ct,dt,pt,tt)};Object(v.q)("polyline",{options:{color:v.e.defaultEdge.color,size:v.e.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:v.e.defaultEdge.style.stroke,lineAppendWidth:v.e.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:v.e.edgeLabel.style.fill,fontSize:v.e.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:500,gridSize:10},stateStyles:Object(i.a)({},v.e.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(X,ct){var dt=this.getShapeStyle(X);return dt.radius===0&&delete dt.radius,ct.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:dt})},getShapeStyle:function(X){var ct=this.options.style,dt={stroke:X.color},pt=Object(b.A)({},ct,dt,X.style);X=this.getPathPoints(X),this.radius=pt.radius,this.offset=pt.offset;var Mt=X.startPoint,tt=X.endPoint,lt=this.getControlPoints(X),it=[Mt];lt&&(it=it.concat(lt)),it.push(tt);var U=X.sourceNode,P=X.targetNode,H=pt.radius,k=this.options.routeCfg;k||(k={}),k.offset=pt.offset;var h=this.getPath(it,U,P,H,k);return(Object(b.m)(h)&&h.length<=1||Object(b.x)(h)&&h.indexOf("L")===-1)&&(h="M0 0, L0 0"),(isNaN(Mt.x)||isNaN(Mt.y)||isNaN(tt.x)||isNaN(tt.y))&&(h="M0 0, L0 0"),Object(b.A)({},v.e.defaultEdge.style,pt,{lineWidth:X.size,path:h})},updateShapeStyle:function(X,ct){var dt=ct.getContainer(),pt={stroke:X.color},Mt=dt.find(function(ot){return ot.get("className")==="edge-shape"})||ct.getKeyShape(),tt=X.size,lt=(X=this.getPathPoints(X)).startPoint,it=X.endPoint,U=this.getControlPoints(X),P=[lt];U&&(P=P.concat(U)),P.push(it);var H=Mt.attr(),k=Object(b.A)({},pt,H,X.style),h=X.sourceNode,g=X.targetNode,G=k.radius,V=this.options.routeCfg;V||(V={}),V.offset=k.offset;var $=this.getPath(P,h,g,G,V);(Object(b.m)($)&&$.length<=1||Object(b.x)($)&&$.indexOf("L")===-1)&&($="M0 0, L0 0"),(isNaN(lt.x)||isNaN(lt.y)||isNaN(it.x)||isNaN(it.y))&&($="M0 0, L0 0"),H.endArrow&&k.endArrow===!1&&(X.style.endArrow={path:""}),H.startArrow&&k.startArrow===!1&&(X.style.startArrow={path:""});var rt=Object(b.A)(pt,Mt.attr(),{lineWidth:tt,path:$},X.style);Mt&&Mt.attr(rt)},getPath:function(X,ct,dt,pt,Mt){var tt;if(!Mt.offset||X.length>2){if(pt)return q(X,pt);var lt=[];return Object(b.f)(X,function(it,U){U===0?lt.push(["M",it.x,it.y]):lt.push(["L",it.x,it.y])}),lt}return pt?(tt=kt(X[0],X[X.length-1],ct,dt,Mt),q(tt,pt)):(tt=kt(X[0],X[X.length-1],ct,dt,Mt),v.n.pointsToPolygon(tt))}},"single-edge")}]).default})},Sq3C:function(Un,_t,z){var at=z("sKgW"),a=z("zoYe"),A=z("wy8a"),e=z("quyA"),i=z("Z1HP"),v=z("Em2t"),b=Math.ceil;function S(f,M){M=M===void 0?" ":a(M);var I=M.length;if(I<2)return I?at(M,f):M;var y=at(M,b(f/i(M)));return e(M)?A(v(y),0,f).join(""):y.slice(0,f)}Un.exports=S},Sxd8:function(Un,_t,z){var at=z("ZCgT");function a(A){var e=at(A),i=e%1;return e===e?i?e-i:e:0}Un.exports=a},TEat:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return y});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),i=z("tKoa");function v(n,s,d){var E=d.map(function(p){return p[s]}).filter(function(p){return p!==void 0}),O=E.length>0?Math.max.apply(Math,E):0,C=Math.abs(n)%360;return C?O*360/C:O}function b(n){var s=n.chart,d=n.options,E=d.data,O=d.barStyle,C=d.color,p=d.tooltip,x=d.colorField,T=d.type,N=d.xField,Y=d.yField;s.data(E);var q=Object(A.b)({},n,{options:{tooltip:p,seriesField:x,interval:{style:O,color:C,shape:T==="line"?"line":"intervel"},minColumnWidth:d.minBarWidth,maxColumnWidth:d.maxBarWidth,columnBackground:d.barBackground}});return Object(i.c)(q),T==="line"&&Object(i.e)({chart:s,options:{xField:N,yField:Y,seriesField:x,point:{shape:"circle",color:C}}}),n}function S(n){var s,d=n.options,E=d.yField,O=d.data,C=d.maxAngle;return Object(A.e)(Object(e.f)((s={},s[E]={min:0,max:v(C,E,O)},s)))(n)}function f(n){var s=n.chart,d=n.options,E=d.radius,O=d.innerRadius,C=d.startAngle,p=d.endAngle;return s.coordinate({type:"polar",cfg:{radius:E,innerRadius:O,startAngle:C,endAngle:p}}).transpose(),n}function M(n){var s=n.chart,d=n.options,E=d.xField,O=d.xAxis;return s.axis(E,O),n}function I(n){return Object(A.e)(b,S,M,f,e.c,e.a,e.j,e.k,e.d,Object(e.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="radial-bar",d}return s.prototype.changeData=function(d){this.updateOption({data:d}),S({chart:this.chart,options:this.options}),this.chart.changeData(d)},s.prototype.getDefaultOptions=function(){return Object(A.b)({},n.prototype.getDefaultOptions.call(this),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240})},s.prototype.getSchemaAdaptor=function(){return I},s}(a.a)},U8jP:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"version",function(){return b});var at=z("R5nb");z.d(_t,"Shape",function(){return at});var a=z("aFU3");for(var A in a)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(A)<0&&function(S){z.d(_t,S,function(){return a[S]})}(A);var e=z("sYIZ");z.d(_t,"Canvas",function(){return e.a});var i=z("wq2r");z.d(_t,"Group",function(){return i.a});var v=z("nCnq");z.d(_t,"getArcParams",function(){return v.a});var b="0.5.6"},Uo7R:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),i=z("tKoa"),v=z("iTfj"),b={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(xt){return xt.id},source:function(xt){return xt.source},target:function(xt){return xt.target},sourceWeight:function(xt){return xt.value||1},targetWeight:function(xt){return xt.value||1},sortBy:null};function S(wt,xt,ft){Object(v.forIn)(wt,function(Ft,kt){Ft.inEdges=xt.filter(function(Ot){return""+ft.target(Ot)==""+kt}),Ft.outEdges=xt.filter(function(Ot){return""+ft.source(Ot)==""+kt}),Ft.edges=Ft.outEdges.concat(Ft.inEdges),Ft.frequency=Ft.edges.length,Ft.value=0,Ft.inEdges.forEach(function(Ot){Ft.value+=ft.targetWeight(Ot)}),Ft.outEdges.forEach(function(Ot){Ft.value+=ft.sourceWeight(Ot)})})}function f(wt,xt){var ft={weight:function(Ot,X){return X.value-Ot.value},frequency:function(Ot,X){return X.frequency-Ot.frequency},id:function(Ot,X){return(""+xt.id(Ot)).localeCompare(""+xt.id(X))}},Ft=ft[xt.sortBy];!Ft&&Object(v.isFunction)(xt.sortBy)&&(Ft=xt.sortBy),Ft&&wt.sort(Ft)}function M(wt,xt){var ft=wt.length;if(!ft)throw new TypeError("Invalid nodes: it's empty!");if(xt.weight){var Ft=xt.nodePaddingRatio;if(Ft<0||Ft>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var kt=Ft/(2*ft),Ot=xt.nodeWidthRatio;if(Ot<=0||Ot>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var X=0;wt.forEach(function(dt){X+=dt.value}),wt.forEach(function(dt){dt.weight=dt.value/X,dt.width=dt.weight*(1-Ft),dt.height=Ot}),wt.forEach(function(dt,pt){for(var Mt=0,tt=pt-1;tt>=0;tt--)Mt+=wt[tt].width+2*kt;var lt=dt.minX=kt+Mt,it=dt.maxX=dt.minX+dt.width,U=dt.minY=xt.y-Ot/2,P=dt.maxY=U+Ot;dt.x=[lt,it,it,lt],dt.y=[U,U,P,P]})}else{var ct=1/ft;wt.forEach(function(dt,pt){dt.x=(pt+.5)*ct,dt.y=xt.y})}return wt}function I(wt,xt,ft){if(ft.weight){var Ft={};Object(v.forIn)(wt,function(kt,Ot){Ft[Ot]=kt.value}),xt.forEach(function(kt){var Ot=ft.source(kt),X=ft.target(kt),ct=wt[Ot],dt=wt[X];if(ct&&dt){var pt=Ft[Ot],Mt=ft.sourceWeight(kt),tt=ct.minX+(ct.value-pt)/ct.value*ct.width,lt=tt+Mt/ct.value*ct.width;Ft[Ot]-=Mt;var it=Ft[X],U=ft.targetWeight(kt),P=dt.minX+(dt.value-it)/dt.value*dt.width,H=P+U/dt.value*dt.width;Ft[X]-=U;var k=ft.y;kt.x=[tt,lt,P,H],kt.y=[k,k,k,k],kt.source=ct,kt.target=dt}})}else xt.forEach(function(kt){var Ot=wt[ft.source(kt)],X=wt[ft.target(kt)];Ot&&X&&(kt.x=[Ot.x,X.x],kt.y=[Ot.y,X.y],kt.source=Ot,kt.target=X)});return xt}function y(wt){return Object(v.assign)({},b,wt)}function n(wt,xt){var ft=y(wt),Ft={},kt=xt.nodes,Ot=xt.links;kt.forEach(function(dt){var pt=ft.id(dt);Ft[pt]=dt}),S(Ft,Ot,ft),f(kt,ft);var X=M(kt,ft),ct=I(Ft,Ot,ft);return{nodes:X,links:ct}}var s=z("DyAw"),d="x",E="y",O="name",C="source";function p(wt){var xt=wt.options,ft=xt.data,Ft=xt.sourceField,kt=xt.targetField,Ot=xt.weightField,X=xt.nodePaddingRatio,ct=xt.nodeWidthRatio,dt=Object(s.b)(ft,Ft,kt,Ot),pt=n({weight:!0,nodePaddingRatio:X,nodeWidthRatio:ct},dt),Mt=pt.nodes,tt=pt.links,lt=Mt.map(function(U){return{id:U.id,x:U.x,y:U.y,name:U.name}}),it=tt.map(function(U){return{source:U.source.name,target:U.target.name,x:U.x,y:U.y,value:U.value}});return Object(at.a)(Object(at.a)({},wt),{ext:Object(at.a)(Object(at.a)({},wt.ext),{chordData:{nodesData:lt,edgesData:it}})})}function x(wt){var xt,ft=wt.chart;return ft.scale((xt={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},xt[O]={sync:"color"},xt[C]={sync:"color"},xt)),wt}function T(wt){var xt=wt.chart;return xt.axis(!1),wt}function N(wt){var xt=wt.chart;return xt.legend(!1),wt}function Y(wt){var xt=wt.chart;return xt.tooltip({showTitle:!1,showMarkers:!1}),wt}function q(wt){var xt=wt.chart;return xt.coordinate("polar").reflect("y"),wt}function nt(wt){var xt=wt.chart,ft=wt.options,Ft=wt.ext.chordData.nodesData,kt=ft.nodeStyle,Ot=ft.label,X=xt.createView();return X.data(Ft),Object(i.f)({chart:X,options:{xField:d,yField:E,seriesField:O,polygon:{style:kt},label:Ot,tooltip:!1}}),wt}function vt(wt){var xt=wt.chart,ft=wt.options,Ft=wt.ext.chordData.edgesData,kt=ft.edgeStyle,Ot=ft.tooltip,X=xt.createView();X.data(Ft);var ct={xField:d,yField:E,seriesField:C,edge:{style:kt,shape:"arc"},tooltip:Ot};return Object(i.b)({chart:X,options:ct}),wt}function ht(wt){return Object(e.e)(p,q,x,T,N,Y,vt,nt,A.c,A.a,A.j)(wt)}var St=function(wt){Object(at.b)(xt,wt);function xt(){var ft=wt!==null&&wt.apply(this,arguments)||this;return ft.type="chord",ft}return xt.prototype.getDefaultOptions=function(){return{nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(Ft,kt){var Ot=(Ft[0]+Ft[1])/2,X=Ot>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:X,content:kt}}},tooltip:{fields:["source","target","value"],formatter:function(Ft){var kt=Ft.source,Ot=Ft.target,X=Ft.value;return{name:kt+" -> "+Ot,value:X}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05}},xt.prototype.getSchemaAdaptor=function(){return ht},xt}(a.a)},WOQw:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return v});var at=z("mrSG"),a=z("iTfj"),A=z("YuPD");function e(b,S){var f=b.xField,M=b.yField,I=b.colorField,y=b.shapeField,n=b.sizeField,s=b.styleField,d=b.rawFields,E=d===void 0?[]:d,O=[];if(S==="color")O=Object(at.d)([I||f],E);else if(S==="shape")O=Object(at.d)([y||f],E);else if(S==="size")O=Object(at.d)([n||f],E);else{O=Object(at.d)([f,M,I,y,n,s],E);var C=["x","y","color","shape","size","style"].indexOf(S),p=O[C];O.splice(C,1),O.unshift(p)}return Object(a.uniq)(O.filter(function(x){return!!x}))}function i(b,S){if(!!S)return function(){for(var f=[],M=0;M<arguments.length;M++)f[M]=arguments[M];var I={};return b.forEach(function(y,n){I[y]=f[n]}),delete I.undefined,S(I)}}function v(b){var S=b.chart,f=b.options,M=f.type,I=f.args,y=f.mapping,n=f.xField,s=f.yField,d=f.colorField,E=f.shapeField,O=f.sizeField,C=f.tooltipFields,p=f.label,x=f.state;if(!y)return b;var T=y.color,N=y.shape,Y=y.size,q=y.style,nt=y.tooltip,vt=S[M](I).position(n+"*"+s);if(Object(a.isString)(T))d?vt.color(d,T):vt.color(T);else if(Object(a.isFunction)(T)){var ht=e(f,"color");vt.color(ht.join("*"),i(ht,T))}else d&&vt.color(d,T);if(Object(a.isString)(N))E?vt.shape(E,[N]):vt.shape(N);else if(Object(a.isFunction)(N)){var ht=e(f,"shape");vt.shape(ht.join("*"),i(ht,N))}else E&&vt.shape(E,N);if(Object(a.isNumber)(Y))O?vt.size(O,Y):vt.size(Y);else if(Object(a.isFunction)(Y)){var ht=e(f,"size");vt.size(ht.join("*"),i(ht,Y))}else O&&vt.size(O,Y);if(Object(a.isFunction)(q)){var ht=e(f,"style");vt.style(ht.join("*"),i(ht,q))}else Object(a.isObject)(q)&&vt.style(q);if(C===!1?vt.tooltip(!1):Object(a.isEmpty)(C)||vt.tooltip(C.join("*"),i(C,nt)),p===!1)vt.label(!1);else if(p){var St=p.callback,wt=p.fields,xt=Object(at.c)(p,["callback","fields"]);vt.label({fields:wt||[s],callback:St,cfg:Object(A.o)(xt)})}return x&&vt.state(x),[n,s].filter(function(ft){return ft!==d}).forEach(function(ft){S.legend(ft,!1)}),Object(at.a)(Object(at.a)({},b),{ext:{geometry:vt}})}},WbAE:function(Un,_t){},XiRp:function(Un,_t){},XloR:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return S});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("hJqF"),i=z("Ihc8"),v=z("iTfj"),b=function(f){Object(at.b)(M,f);function M(){return f!==null&&f.apply(this,arguments)||this}return M.prototype.active=function(){var I=this.getView(),y=this.context.event;if(y.data){var n=y.data.items,s=I.geometries.filter(function(d){return d.type==="point"});Object(v.each)(s,function(d){Object(v.each)(d.elements,function(E){var O=Object(v.findIndex)(n,function(C){return C.data===E.data})!==-1;E.setState("active",O)})})}},M.prototype.getView=function(){return this.context.view},M}(i.InteractionAction);Object(i.registerAction)("marker-active",b),Object(i.registerInteraction)("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var S=function(f){Object(at.b)(M,f);function M(){var I=f!==null&&f.apply(this,arguments)||this;return I.type="line",I}return M.prototype.changeData=function(I){this.updateOption({data:I}),this.chart.changeData(I)},M.prototype.getDefaultOptions=function(){return Object(A.b)({},f.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1})},M.prototype.getSchemaAdaptor=function(){return e.a},M}(a.a)},XpFM:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return p});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),i=z("n/J0"),v=z("YuPD"),b=z("5kt6");function S(x){return x.map(function(T,N){var Y;return Y={},Y[b.f]=T-(x[N-1]||0),Y[b.e]=""+N,Y}).filter(function(T){return!!T[b.f]})}function f(x){var T;return[(T={},T[b.d]=Object(A.clamp)(x,0,1),T)]}function M(x,T){var N=Object(A.get)(T,["ticks"],[]),Y=Object(A.size)(N)?N:[0,Object(A.clamp)(x,0,1),1];return S(Y)}function I(x){var T=x.chart,N=x.options,Y=N.percent,q=N.range,nt=N.radius,vt=N.innerRadius,ht=N.startAngle,St=N.endAngle,wt=N.axis,xt=N.indicator,ft=q.color;if(xt){var Ft=f(Y),kt=T.createView({id:b.b});kt.data(Ft),kt.point().position(b.d+"*1").shape("gauge-indicator").customInfo({defaultColor:T.getTheme().defaultColor,indicator:xt}),kt.coordinate("polar",{startAngle:ht,endAngle:St,radius:vt*nt}),kt.axis(b.d,wt),kt.scale(b.d,Object(v.k)(wt,i.a))}var Ot=M(Y,N.range),X=T.createView({id:b.g});X.data(Ot);var ct=Object(A.isString)(ft)?[ft,b.a]:ft;return X.interval().position("1*"+b.f).color(b.e,ct).adjust("stack"),X.coordinate("polar",{innerRadius:vt,radius:nt,startAngle:ht,endAngle:St}).transpose(),x}function y(x){var T,N=x.chart,Y=x.options,q=Y.type,nt=Y.meter;if(q==="meter"){var vt=Y.innerRadius,ht=Y.radius,St=Y.startAngle,wt=Y.endAngle,xt=N.getTheme().background,ft=xt;(!ft||ft==="transparent")&&(ft="#fff");var Ft=N.createView({id:b.c});Ft.data([(T={},T[b.e]="1",T[b.f]=1,T)]),Ft.interval().position("1*"+b.f).color(ft).adjust("stack").shape("meter-gauge").customInfo(nt||{}),Ft.coordinate("polar",{innerRadius:vt,radius:ht,startAngle:St,endAngle:wt}).transpose()}return x}function n(x){var T;return Object(v.e)(Object(e.f)((T={range:{min:0,max:1,maxLimit:1,minLimit:0}},T[b.d]={},T)))(x)}function s(x,T){var N=x.chart,Y=x.options,q=Y.statistic,nt=Y.percent;if(N.getController("annotation").clear(!0),q){var vt=q.content,ht=void 0;vt&&(ht=Object(v.b)({},{formatter:function(wt){var xt=wt.percent;return(xt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},vt)),Object(v.l)(N,{statistic:Object(at.a)(Object(at.a)({},q),{content:ht})},{percent:nt})}return T&&N.render(!0),x}function d(x){var T=x.chart;return T.legend(!1),T.tooltip(!1),x}function E(x){return Object(v.e)(e.a,I,n,s,e.c,e.j,y,d)(x)}var O=z("Ihc8");Object(O.registerShape)("point","gauge-indicator",{draw:function(T,N){var Y=T.customInfo,q=Y.indicator,nt=Y.defaultColor,vt=q,ht=vt.pointer,St=vt.pin,wt=N.addGroup(),xt=this.parsePoint({x:0,y:0});return ht&&wt.addShape("line",{name:"pointer",attrs:Object(at.a)({x1:xt.x,y1:xt.y,x2:T.x,y2:T.y,stroke:nt},ht.style)}),St&&wt.addShape("circle",{name:"pin",attrs:Object(at.a)({x:xt.x,y:xt.y,stroke:nt},St.style)}),wt}});var C=z("CBiR");Object(O.registerShape)("interval","meter-gauge",{draw:function(T,N){var Y=T.customInfo,q=Y.steps,nt=q===void 0?50:q,vt=Y.stepRatio,ht=vt===void 0?.5:vt,St=this.coordinate.endAngle-this.coordinate.startAngle,wt=St/nt,xt=0;ht>0&&ht<=1&&(wt=St/((1-ht)/ht*(nt-1)+nt),xt=wt*(1-ht)/ht);var ft=N.addGroup();if(xt>0)for(var Ft=this.coordinate.getCenter(),kt=this.coordinate.getRadius(),Ot=O.Util.getAngle(T,this.coordinate),X=Ot.startAngle,ct=Ot.endAngle,dt=X,pt=0;dt<ct&&pt<2*nt-1;pt++){var Mt=pt%2;if(Mt){var tt=Object(C.getSectorPath)(Ft.x,Ft.y,kt,dt,Math.min(dt+xt,ct),kt*this.coordinate.innerRadius);ft.addShape("path",{name:"meter-gauge-mask",attrs:{path:tt,fill:T.color,stroke:T.color,lineWidth:.5},capture:!1})}dt+=Mt?xt:wt}return ft}});var p=function(x){Object(at.b)(T,x);function T(){var N=x!==null&&x.apply(this,arguments)||this;return N.type="gauge",N}return T.prototype.getDefaultOptions=function(){var N;return{percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(N={},N[b.f]={sync:"v"},N[b.d]={sync:"v",tickCount:5,tickInterval:.2},N),animation:!1}},T.prototype.changeData=function(N){this.updateOption({percent:N});var Y=this.chart.views.find(function(nt){return nt.id===b.b});Y&&Y.data(f(N));var q=this.chart.views.find(function(nt){return nt.id===b.g});q&&q.data(M(N,this.options.range)),s({chart:this.chart,options:this.options},!0)},T.prototype.getSchemaAdaptor=function(){return E},T}(a.a)},"Y+LX":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return b});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),i=z("DMQx");function v(S){var f=S.chart,M=S.options,I=M.xField,y=M.yField,n=M.xAxis,s=M.yAxis,d=M.barStyle,E=M.barWidthRatio,O=M.label,C=M.data,p=M.seriesField,x=M.isStack,T=M.minBarWidth,N=M.maxBarWidth;O&&!O.position&&(O.position="left",O.layout||(O.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var Y=M.legend;p?Y!==!1&&(Y=Object(at.a)({position:x?"top-left":"right-top",reversed:!x},Y||{})):Y=!1,S.options.legend=Y;var q=M.tooltip;return p&&q!==!1&&(q=Object(at.a)({reversed:!x},q||{})),S.options.tooltip=q,f.coordinate().transpose(),Object(i.a)({chart:f,options:Object(at.a)(Object(at.a)({},M),{label:O,xField:y,yField:I,xAxis:s,yAxis:n,columnStyle:d,columnWidthRatio:E,minColumnWidth:T,maxColumnWidth:N,columnBackground:M.barBackground,data:C&&C.slice().reverse()})},!0)}var b=function(S){Object(at.b)(f,S);function f(){var M=S!==null&&S.apply(this,arguments)||this;return M.type="bar",M}return f.prototype.changeData=function(M){this.updateOption({data:M});var I=this.options,y=I.xField,n=I.yField,s=I.isPercent;this.chart.changeData(Object(e.a)(M,y,n,y,s))},f.prototype.getDefaultOptions=function(){return Object(A.b)({},S.prototype.getDefaultOptions.call(this),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},f.prototype.getSchemaAdaptor=function(){return v},f}(a.a)},YP77:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return y});var at=z("mrSG"),a=z("zJSt"),A=z("B3DA"),e=z("iTfj"),i=z("YuPD"),v=z("w02o"),b=z("u9/z"),S=z("5kt6");function f(n){var s=n.chart,d=n.options,E=d.innerRadius,O=d.radius;return s.coordinate("theta",{innerRadius:E,radius:O}),n}function M(n,s){var d=n.chart,E=n.options,O=E.innerRadius,C=E.statistic,p=E.percent,x=E.meta;if(d.getController("annotation").clear(!0),O&&C){var T=C.content;T&&!T.formatter&&(T.formatter=function(N){var Y=N.percent,q=Object(e.get)(x,[S.d,"formatter"]);return q?q(Y):Y}),Object(i.m)(d,{statistic:Object(at.a)(Object(at.a)({},C),{content:T}),plotType:"ring-progress"},{percent:p})}return s&&d.render(!0),n}function I(n){return Object(i.e)(b.b,Object(v.f)({}),f,M,v.a,v.j,Object(v.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="ring-process",d}return s.prototype.getDefaultOptions=function(){return{percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"},formatter:function(E){var O=E.percent;return(O*100).toFixed(2)+"%"}}},animation:!0}},s.prototype.changeData=function(d){this.updateOption({percent:d}),this.chart.data(Object(A.a)(d)),M({chart:this.chart,options:this.options},!0)},s.prototype.getSchemaAdaptor=function(){return I},s}(a.a)},YuPD:function(Un,_t,z){"use strict";z.d(_t,"e",function(){return at}),z.d(_t,"k",function(){return a}),z.d(_t,"n",function(){return e}),z.d(_t,"j",function(){return M}),z.d(_t,"a",function(){return v}),z.d(_t,"g",function(){return I}),z.d(_t,"c",function(){return y}),z.d(_t,"f",function(){return n}),z.d(_t,"d",function(){return s.a}),z.d(_t,"o",function(){return d}),z.d(_t,"h",function(){return x}),z.d(_t,"b",function(){return St}),z.d(_t,"i",function(){return wt}),z.d(_t,"m",function(){return xt.c}),z.d(_t,"l",function(){return xt.b});function at(){for(var Ot=[],X=0;X<arguments.length;X++)Ot[X]=arguments[X];return function(ct){return Ot.reduce(function(dt,pt){return pt(dt)},ct)}}function a(Ot,X){var ct={};return Ot!==null&&typeof Ot=="object"&&X.forEach(function(dt){var pt=Ot[dt];pt!==void 0&&(ct[dt]=pt)}),ct}var A=z("iTfj");function e(Ot,X){return Object(A.reduce)(X,function(ct,dt,pt){return ct.replace(new RegExp("{\\s*"+pt+"\\s*}","g"),dt)},Ot)}var i=z("mrSG"),v;(function(Ot){Ot.ERROR="error",Ot.WARN="warn",Ot.INFO="log"})(v||(v={}));var b="AntV/G2Plot";function S(Ot){for(var X=[],ct=1;ct<arguments.length;ct++)X[ct-1]=arguments[ct];var dt=0;return b+": "+Ot.replace(/%s/g,function(){return""+X[dt++]})}function f(Ot,X){for(var ct=[],dt=2;dt<arguments.length;dt++)ct[dt-2]=arguments[dt];if(!Ot){var pt=new Error(S.apply(void 0,Object(i.d)([X],ct)));throw pt.name=b,pt}}function M(Ot,X,ct){for(var dt=[],pt=3;pt<arguments.length;pt++)dt[pt-3]=arguments[pt];X||console[Ot](S.apply(void 0,Object(i.d)([ct],dt)))}function I(Ot){if(!Ot)return{width:0,height:0};var X=getComputedStyle(Ot);return{width:(Ot.clientWidth||parseInt(X.width,10))-parseInt(X.paddingLeft,10)-parseInt(X.paddingRight,10),height:(Ot.clientHeight||parseInt(X.height,10))-parseInt(X.paddingTop,10)-parseInt(X.paddingBottom,10)}}function y(Ot,X){return Ot.geometries.find(function(ct){return ct.type===X})}function n(Ot){return Object(A.reduce)(Ot.geometries,function(X,ct){return X.concat(ct.elements)},[])}var s=z("4Olw");function d(Ot){if(!Object(A.isType)(Ot,"Object"))return Ot;var X=Object(i.a)({},Ot);return X.formatter&&!X.content&&(X.content=X.formatter),X}var E=z("6JdA");function O(Ot,X){var ct=[];if(Ot.length){ct.push(["M",Ot[0].x,Ot[0].y]);for(var dt=1,pt=Ot.length;dt<pt;dt+=1){var Mt=Ot[dt];ct.push(["L",Mt.x,Mt.y])}X&&ct.push(["Z"])}return ct}var C=function(X,ct,dt,pt){var Mt=[],tt,lt,it=!!pt,U,P;if(it){U=[Infinity,Infinity],P=[-Infinity,-Infinity];for(var H=0,k=X.length;H<k;H++){var h=X[H];U=E.c.min([0,0],U,h),P=E.c.max([0,0],P,h)}U=E.c.min([0,0],U,pt[0]),P=E.c.max([0,0],P,pt[1])}for(var H=0,g=X.length;H<g;H++){var h=X[H];if(dt)tt=X[H?H-1:g-1],lt=X[(H+1)%g];else if(H===0||H===g-1){Mt.push(h);continue}else tt=X[H-1],lt=X[H+1];var G=[0,0];G=E.c.sub(G,lt,tt),G=E.c.scale(G,G,ct);var V=E.c.distance(h,tt),$=E.c.distance(h,lt),rt=V+$;rt!==0&&(V/=rt,$/=rt);var ot=E.c.scale([0,0],G,-V),At=E.c.scale([0,0],G,$),gt=E.c.add([0,0],h,ot),mt=E.c.add([0,0],h,At);it&&(gt=E.c.max([0,0],gt,U),gt=E.c.min([0,0],gt,P),mt=E.c.max([0,0],mt,U),mt=E.c.min([0,0],mt,P)),Mt.push(gt),Mt.push(mt)}return dt&&Mt.push(Mt.shift()),Mt};function p(Ot,X,ct){for(var dt=!!X,pt=[],Mt=0,tt=Ot.length;Mt<tt;Mt+=2)pt.push([Ot[Mt],Ot[Mt+1]]);for(var lt=C(pt,.4,dt,ct),it=pt.length,U=[],P,H,k,Mt=0;Mt<it-1;Mt++)P=lt[Mt*2],H=lt[Mt*2+1],k=pt[Mt+1],U.push(["C",P[0],P[1],H[0],H[1],k[0],k[1]]);return dt&&(P=lt[it],H=lt[it+1],k=pt[0],U.push(["C",P[0],P[1],H[0],H[1],k[0],k[1]])),U}function x(Ot,X,ct){var dt=[],pt=Ot[0],Mt=null;if(Ot.length<=2)return O(Ot,X);for(var tt=0,lt=Ot.length;tt<lt;tt++){var it=Ot[tt];(!Mt||!(Mt.x===it.x&&Mt.y===it.y))&&(dt.push(it.x),dt.push(it.y),Mt=it)}var U=ct||[[0,0],[1,1]],P=p(dt,X,U);return P.unshift(["M",pt.x,pt.y]),P}var T=5,N={}.toString,Y=function(X,ct){return N.call(X)==="[object "+ct+"]"},q=function(X){return Y(X,"Array")},nt=function(X){return typeof X=="object"&&X!==null},vt=function(X){if(!nt(X)||!Y(X,"Object"))return!1;for(var ct=X;Object.getPrototypeOf(ct)!==null;)ct=Object.getPrototypeOf(ct);return Object.getPrototypeOf(X)===ct},ht=function Ot(X,ct,dt,pt){dt=dt||0,pt=pt||T;for(var Mt in ct)if(Object.prototype.hasOwnProperty.call(ct,Mt)){var tt=ct[Mt];tt?vt(tt)?(vt(X[Mt])||(X[Mt]={}),dt<pt?Ot(X[Mt],tt,dt+1,pt):X[Mt]=ct[Mt]):q(tt)?(X[Mt]=[],X[Mt]=X[Mt].concat(tt)):X[Mt]=tt:X[Mt]=tt}},St=function(X){for(var ct=[],dt=1;dt<arguments.length;dt++)ct[dt-1]=arguments[dt];for(var pt=0;pt<ct.length;pt+=1)ht(X,ct[pt]);return X};function wt(Ot){if(!Ot)return Ot;var X=Ot.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return X.map(function(ct){return ct.toLowerCase()}).join("-")}var xt=z("mj6g"),ft;function Ft(){return ft||(ft=document.createElement("canvas").getContext("2d")),ft}var kt=Object(A.memoize)(function(Ot,X){X===void 0&&(X={});var ct=X.fontSize,dt=X.fontFamily,pt=dt===void 0?"sans-serif":dt,Mt=X.fontWeight,tt=X.fontStyle,lt=X.fontVariant,it=Ft();it.font=[tt,Mt,lt,ct+"px",pt].join(" ");var U=it.measureText(Object(A.isString)(Ot)?Ot:"");return U.width},function(Ot,X){return X===void 0&&(X={}),Object(i.d)([Ot],Object(A.values)(X)).join("")})},Z1HP:function(Un,_t,z){var at=z("ycre"),a=z("quyA"),A=z("q4HE");function e(i){return a(i)?A(i):at(i)}Un.exports=e},ZCgT:function(Un,_t,z){var at=z("tLB3"),a=1/0,A=17976931348623157e292;function e(i){if(!i)return i===0?i:0;if(i=at(i),i===a||i===-a){var v=i<0?-1:1;return v*A}return i===i?i:0}Un.exports=e},ZxFD:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"create",function(){return a}),z.d(_t,"clone",function(){return A}),z.d(_t,"fromValues",function(){return e}),z.d(_t,"copy",function(){return i}),z.d(_t,"set",function(){return v}),z.d(_t,"add",function(){return b}),z.d(_t,"subtract",function(){return S}),z.d(_t,"multiply",function(){return f}),z.d(_t,"divide",function(){return M}),z.d(_t,"ceil",function(){return I}),z.d(_t,"floor",function(){return y}),z.d(_t,"min",function(){return n}),z.d(_t,"max",function(){return s}),z.d(_t,"round",function(){return d}),z.d(_t,"scale",function(){return E}),z.d(_t,"scaleAndAdd",function(){return O}),z.d(_t,"distance",function(){return C}),z.d(_t,"squaredDistance",function(){return p}),z.d(_t,"length",function(){return x}),z.d(_t,"squaredLength",function(){return T}),z.d(_t,"negate",function(){return N}),z.d(_t,"inverse",function(){return Y}),z.d(_t,"normalize",function(){return q}),z.d(_t,"dot",function(){return nt}),z.d(_t,"cross",function(){return vt}),z.d(_t,"lerp",function(){return ht}),z.d(_t,"random",function(){return St}),z.d(_t,"transformMat2",function(){return wt}),z.d(_t,"transformMat2d",function(){return xt}),z.d(_t,"transformMat3",function(){return ft}),z.d(_t,"transformMat4",function(){return Ft}),z.d(_t,"rotate",function(){return kt}),z.d(_t,"angle",function(){return Ot}),z.d(_t,"zero",function(){return X}),z.d(_t,"str",function(){return ct}),z.d(_t,"exactEquals",function(){return dt}),z.d(_t,"equals",function(){return pt}),z.d(_t,"len",function(){return Mt}),z.d(_t,"sub",function(){return tt}),z.d(_t,"mul",function(){return lt}),z.d(_t,"div",function(){return it}),z.d(_t,"dist",function(){return U}),z.d(_t,"sqrDist",function(){return P}),z.d(_t,"sqrLen",function(){return H}),z.d(_t,"forEach",function(){return k});var at=z("yU0y");function a(){var h=new at.a(2);return at.a!=Float32Array&&(h[0]=0,h[1]=0),h}function A(h){var g=new at.a(2);return g[0]=h[0],g[1]=h[1],g}function e(h,g){var G=new at.a(2);return G[0]=h,G[1]=g,G}function i(h,g){return h[0]=g[0],h[1]=g[1],h}function v(h,g,G){return h[0]=g,h[1]=G,h}function b(h,g,G){return h[0]=g[0]+G[0],h[1]=g[1]+G[1],h}function S(h,g,G){return h[0]=g[0]-G[0],h[1]=g[1]-G[1],h}function f(h,g,G){return h[0]=g[0]*G[0],h[1]=g[1]*G[1],h}function M(h,g,G){return h[0]=g[0]/G[0],h[1]=g[1]/G[1],h}function I(h,g){return h[0]=Math.ceil(g[0]),h[1]=Math.ceil(g[1]),h}function y(h,g){return h[0]=Math.floor(g[0]),h[1]=Math.floor(g[1]),h}function n(h,g,G){return h[0]=Math.min(g[0],G[0]),h[1]=Math.min(g[1],G[1]),h}function s(h,g,G){return h[0]=Math.max(g[0],G[0]),h[1]=Math.max(g[1],G[1]),h}function d(h,g){return h[0]=Math.round(g[0]),h[1]=Math.round(g[1]),h}function E(h,g,G){return h[0]=g[0]*G,h[1]=g[1]*G,h}function O(h,g,G,V){return h[0]=g[0]+G[0]*V,h[1]=g[1]+G[1]*V,h}function C(h,g){var G=g[0]-h[0],V=g[1]-h[1];return Math.hypot(G,V)}function p(h,g){var G=g[0]-h[0],V=g[1]-h[1];return G*G+V*V}function x(h){var g=h[0],G=h[1];return Math.hypot(g,G)}function T(h){var g=h[0],G=h[1];return g*g+G*G}function N(h,g){return h[0]=-g[0],h[1]=-g[1],h}function Y(h,g){return h[0]=1/g[0],h[1]=1/g[1],h}function q(h,g){var G=g[0],V=g[1],$=G*G+V*V;return $>0&&($=1/Math.sqrt($)),h[0]=g[0]*$,h[1]=g[1]*$,h}function nt(h,g){return h[0]*g[0]+h[1]*g[1]}function vt(h,g,G){var V=g[0]*G[1]-g[1]*G[0];return h[0]=h[1]=0,h[2]=V,h}function ht(h,g,G,V){var $=g[0],rt=g[1];return h[0]=$+V*(G[0]-$),h[1]=rt+V*(G[1]-rt),h}function St(h,g){g=g||1;var G=at.c()*2*Math.PI;return h[0]=Math.cos(G)*g,h[1]=Math.sin(G)*g,h}function wt(h,g,G){var V=g[0],$=g[1];return h[0]=G[0]*V+G[2]*$,h[1]=G[1]*V+G[3]*$,h}function xt(h,g,G){var V=g[0],$=g[1];return h[0]=G[0]*V+G[2]*$+G[4],h[1]=G[1]*V+G[3]*$+G[5],h}function ft(h,g,G){var V=g[0],$=g[1];return h[0]=G[0]*V+G[3]*$+G[6],h[1]=G[1]*V+G[4]*$+G[7],h}function Ft(h,g,G){var V=g[0],$=g[1];return h[0]=G[0]*V+G[4]*$+G[12],h[1]=G[1]*V+G[5]*$+G[13],h}function kt(h,g,G,V){var $=g[0]-G[0],rt=g[1]-G[1],ot=Math.sin(V),At=Math.cos(V);return h[0]=$*At-rt*ot+G[0],h[1]=$*ot+rt*At+G[1],h}function Ot(h,g){var G=h[0],V=h[1],$=g[0],rt=g[1],ot=Math.sqrt(G*G+V*V)*Math.sqrt($*$+rt*rt),At=ot&&(G*$+V*rt)/ot;return Math.acos(Math.min(Math.max(At,-1),1))}function X(h){return h[0]=0,h[1]=0,h}function ct(h){return"vec2("+h[0]+", "+h[1]+")"}function dt(h,g){return h[0]===g[0]&&h[1]===g[1]}function pt(h,g){var G=h[0],V=h[1],$=g[0],rt=g[1];return Math.abs(G-$)<=at.b*Math.max(1,Math.abs(G),Math.abs($))&&Math.abs(V-rt)<=at.b*Math.max(1,Math.abs(V),Math.abs(rt))}var Mt=x,tt=S,lt=f,it=M,U=C,P=p,H=T,k=function(){var h=a();return function(g,G,V,$,rt,ot){var At,gt;for(G||(G=2),V||(V=0),$?gt=Math.min($*G+V,g.length):gt=g.length,At=V;At<gt;At+=G)h[0]=g[At],h[1]=g[At+1],rt(h,h,ot),g[At]=h[0],g[At+1]=h[1];return g}}()},a8tM:function(Un,_t,z){"use strict";z.d(_t,"c",function(){return T}),z.d(_t,"b",function(){return vt}),z.d(_t,"a",function(){return ht});var at=z("rePB");function a(St){var wt=0,xt=St.children,ft=xt&&xt.length;if(!ft)wt=1;else for(;--ft>=0;)wt+=xt[ft].value;St.value=wt}var A=function(){return this.eachAfter(a)},e=z("uFwe"),i=function(St,wt){var xt=-1,ft=Object(e.a)(this),Ft;try{for(ft.s();!(Ft=ft.n()).done;){var kt=Ft.value;St.call(wt,kt,++xt,this)}}catch(Ot){ft.e(Ot)}finally{ft.f()}return this},v=function(St,wt){for(var xt=this,ft=[xt],Ft,kt,Ot=-1;xt=ft.pop();)if(St.call(wt,xt,++Ot,this),Ft=xt.children)for(kt=Ft.length-1;kt>=0;--kt)ft.push(Ft[kt]);return this},b=function(St,wt){for(var xt=this,ft=[xt],Ft=[],kt,Ot,X,ct=-1;xt=ft.pop();)if(Ft.push(xt),kt=xt.children)for(Ot=0,X=kt.length;Ot<X;++Ot)ft.push(kt[Ot]);for(;xt=Ft.pop();)St.call(wt,xt,++ct,this);return this},S=function(St,wt){var xt=-1,ft=Object(e.a)(this),Ft;try{for(ft.s();!(Ft=ft.n()).done;){var kt=Ft.value;if(St.call(wt,kt,++xt,this))return kt}}catch(Ot){ft.e(Ot)}finally{ft.f()}},f=function(St){return this.eachAfter(function(wt){for(var xt=+St(wt.data)||0,ft=wt.children,Ft=ft&&ft.length;--Ft>=0;)xt+=ft[Ft].value;wt.value=xt})},M=function(St){return this.eachBefore(function(wt){wt.children&&wt.children.sort(St)})},I=function(St){for(var wt=this,xt=y(wt,St),ft=[wt];wt!==xt;)wt=wt.parent,ft.push(wt);for(var Ft=ft.length;St!==xt;)ft.splice(Ft,0,St),St=St.parent;return ft};function y(St,wt){if(St===wt)return St;var xt=St.ancestors(),ft=wt.ancestors(),Ft=null;for(St=xt.pop(),wt=ft.pop();St===wt;)Ft=St,St=xt.pop(),wt=ft.pop();return Ft}var n=function(){for(var St=this,wt=[St];St=St.parent;)wt.push(St);return wt},s=function(){return Array.from(this)},d=function(){var St=[];return this.eachBefore(function(wt){wt.children||St.push(wt)}),St},E=function(){var St=this,wt=[];return St.each(function(xt){xt!==St&&wt.push({source:xt.parent,target:xt})}),wt},O=z("o0o1"),C=z.n(O),p=C.a.mark(x);function x(){var St,wt,xt,ft,Ft,kt;return C.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:St=this,xt=[St];case 1:wt=xt.reverse(),xt=[];case 2:if(!(St=wt.pop())){X.next=8;break}return X.next=5,St;case 5:if(ft=St.children)for(Ft=0,kt=ft.length;Ft<kt;++Ft)xt.push(ft[Ft]);X.next=2;break;case 8:if(xt.length){X.next=1;break}case 9:case"end":return X.stop()}},p,this)}function T(St,wt){St instanceof Map?(St=[void 0,St],wt===void 0&&(wt=q)):wt===void 0&&(wt=Y);for(var xt=new ht(St),ft,Ft=[xt],kt,Ot,X,ct;ft=Ft.pop();)if((Ot=wt(ft.data))&&(ct=(Ot=Array.from(Ot)).length))for(ft.children=Ot,X=ct-1;X>=0;--X)Ft.push(kt=Ot[X]=new ht(Ot[X])),kt.parent=ft,kt.depth=ft.depth+1;return xt.eachBefore(vt)}function N(){return T(this).eachBefore(nt)}function Y(St){return St.children}function q(St){return Array.isArray(St)?St[1]:null}function nt(St){St.data.value!==void 0&&(St.value=St.data.value),St.data=St.data.data}function vt(St){var wt=0;do St.height=wt;while((St=St.parent)&&St.height<++wt)}function ht(St){this.data=St,this.depth=this.height=0,this.parent=null}ht.prototype=T.prototype=Object(at.a)({constructor:ht,count:A,each:i,eachAfter:b,eachBefore:v,find:S,sum:f,sort:M,path:I,ancestors:n,descendants:s,leaves:d,links:E,copy:N},Symbol.iterator,x)},aFU3:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"version",function(){return O});var at=z("tvuL");z.d(_t,"PathUtil",function(){return at});var a=z("4cbP"),A=z.n(a);for(var e in a)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(C){z.d(_t,C,function(){return a[C]})}(e);var i=z("tdXX"),v=z.n(i);for(var e in i)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(p){z.d(_t,p,function(){return i[p]})}(e);var b=z("5eLp");z.d(_t,"Event",function(){return b.a});var S=z("LmB6");z.d(_t,"Base",function(){return S.a});var f=z("EkMX");z.d(_t,"AbstractCanvas",function(){return f.a});var M=z("+DwW");z.d(_t,"AbstractGroup",function(){return M.a});var I=z("MaEA");z.d(_t,"AbstractShape",function(){return I.a});var y=z("1MZV");z.d(_t,"getBBoxMethod",function(){return y.a});var n=z("vIgC");z.d(_t,"getTextHeight",function(){return n.b}),z.d(_t,"assembleFont",function(){return n.a});var s=z("sstZ");z.d(_t,"isAllowCapture",function(){return s.b});var d=z("aSjE");z.d(_t,"multiplyVec2",function(){return d.c}),z.d(_t,"invert",function(){return d.a});var E=z("lt7v");z.d(_t,"getOffScreenContext",function(){return E.a});var O="0.5.4"},aHsQ:function(Un,_t,z){"use strict";var at=z("cIOH"),a=z.n(at),A=z("6D9b"),e=z.n(A),i=z("cWXX")},aLzy:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return tt});var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),i=z("5OoT"),v=z("iTfj"),b=z("5HRO"),S=z("WOQw"),f="$$percentage$$",M="$$mappingValue$$",I="$$conversion$$",y="$$totalPercentage$$",n="$$x$$",s="$$y$$";function d(lt,it,U){var P=[],H=U.yField,k=U.maxSize,h=U.minSize,g=Object(v.maxBy)(it,H)[H],G=Object(v.isNumber)(k)?k:1,V=Object(v.isNumber)(h)?h:0;return P=Object(v.map)(lt,function($,rt){var ot=($[H]||0)/g;return $[f]=ot,$[M]=(G-V)*ot+V,$[I]=[Object(v.get)(lt,[rt-1,H]),$[H]],$}),P}function E(lt){return function(it){var U=it.chart,P=it.options,H=P.conversionTag,k=U.getOptions().data;if(H){var h=H.formatter;k.forEach(function(g,G){if(!(G<=0)){var V=lt(g,G,k,{top:!0,text:{content:Object(v.isFunction)(h)?h(g,k):h,offsetX:H.offsetX,offsetY:H.offsetY,position:"end",autoRotate:!1,style:Object(at.a)({textAlign:"start",textBaseline:"middle"},H.style)}});U.annotation().line(V)}})}return it}}function O(lt){var it=lt.chart,U=lt.options,P=U.data,H=P===void 0?[]:P,k=U.yField,h=U.maxSize,g=U.minSize,G=d(H,H,{yField:k,maxSize:h,minSize:g});return it.data(G),lt}function C(lt){var it=lt.chart,U=lt.options,P=U.xField,H=U.yField,k=U.color,h=U.tooltip,g=U.label,G=Object(b.a)(h,[P,H]),V=G.fields,$=G.formatter;Object(S.a)({chart:it,options:{type:"interval",xField:P,yField:M,colorField:P,tooltipFields:Object(v.isArray)(V)&&V.concat([f,I]),mapping:{shape:"funnel",tooltip:$,color:k},label:g}});var rt=Object(e.c)(lt.chart,"interval");return rt.adjust("symmetric"),lt}function p(lt){var it=lt.chart,U=lt.options,P=U.isTransposed;return it.coordinate({type:"rect",actions:P?[]:[["transpose"],["scale",1,-1]]}),lt}function x(lt){var it=lt.options,U=it.maxSize,P=function(k,h,g,G){var V=U-(U-k[M])/2;return Object(at.a)(Object(at.a)({},G),{start:[h-.5,V],end:[h-.5,V+.05]})};return E(P)(lt),lt}function T(lt){return Object(e.e)(O,C,p,x)(lt)}function N(lt){var it,U=lt.chart,P=lt.options,H=P.data,k=H===void 0?[]:H,h=P.yField;return U.data(k),U.scale((it={},it[h]={sync:!0},it)),lt}function Y(lt){var it=lt.chart,U=lt.options,P=U.data,H=U.xField,k=U.yField,h=U.color,g=U.compareField,G=U.isTransposed,V=U.tooltip,$=U.maxSize,rt=U.minSize,ot=U.label;return it.facet("mirror",{fields:[g],transpose:!G,padding:G?0:[32,0,0,0],eachView:function(gt,mt){var bt=G?mt.rowIndex:mt.columnIndex;G||gt.coordinate({type:"rect",actions:[["transpose"],["scale",bt===0?-1:1,-1]]});var jt=d(mt.data,P,{yField:k,maxSize:$,minSize:rt});gt.data(jt);var Dt=Object(b.a)(V,[H,k,g]),Ut=Dt.fields,Ct=Dt.formatter,Vt=G?{offset:bt===0?10:-23,position:bt===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:bt===0?"end":"start"}};Object(S.a)({chart:gt,options:{type:"interval",xField:H,yField:M,colorField:H,tooltipFields:Object(v.isArray)(Ut)&&Ut.concat([f,I]),mapping:{shape:"funnel",tooltip:Ct,color:h,style:{lineWidth:1,stroke:"#fff"}},label:ot===!1?!1:Object(e.b)({},Vt,ot)}})}}),lt}function q(lt){var it=lt.chart,U=lt.options,P=U.conversionTag,H=U.isTransposed;return it.once("beforepaint",function(){it.views.forEach(function(k,h){var g=function(V,$,rt,ot){var At=h===0?-1:1;return Object(e.b)({},ot,{start:[$-.5,V[M]],end:[$-.5,V[M]+.05],text:H?{style:{textAlign:"start"}}:{offsetX:P!==!1?At*P.offsetX:0,style:{textAlign:h===0?"end":"start"}}})};E(g)(Object(e.b)({},{chart:k,options:U}))})}),lt}function nt(lt){return Object(e.e)(N,Y,q)(lt)}function vt(lt){var it,U=lt.chart,P=lt.options,H=P.data,k=H===void 0?[]:H,h=P.yField;return U.data(k),U.scale((it={},it[h]={sync:!0},it)),lt}function ht(lt){var it=lt.chart,U=lt.options,P=U.seriesField,H=U.isTransposed;return it.facet("rect",{fields:[P],padding:[H?0:32,10,0,10],eachView:function(h,g){T(Object(e.b)({},lt,{chart:h,options:{data:g.data}}))}}),lt}function St(lt){return Object(e.e)(vt,ht)(lt)}function wt(lt){var it=lt.chart,U=lt.options,P=U.data,H=P===void 0?[]:P,k=U.yField,h=Object(v.reduce)(H,function(V,$){return V+($[k]||0)},0),g=Object(v.maxBy)(H,k)[k],G=Object(v.map)(H,function(V,$){var rt=[],ot=[];if(V[y]=(V[k]||0)/h,$){var At=H[$-1][n],gt=H[$-1][s];rt[0]=At[3],ot[0]=gt[3],rt[1]=At[2],ot[1]=gt[2]}else rt[0]=-.5,ot[0]=1,rt[1]=.5,ot[1]=1;return ot[2]=ot[1]-V[y],rt[2]=(ot[2]+1)/4,ot[3]=ot[2],rt[3]=-rt[2],V[n]=rt,V[s]=ot,V[f]=(V[k]||0)/g,V[I]=[Object(v.get)(H,[$-1,k]),V[k]],V});return it.data(G),lt}function xt(lt){var it=lt.chart,U=lt.options,P=U.xField,H=U.yField,k=U.color,h=U.tooltip,g=U.label,G=Object(b.a)(h,[P,H]),V=G.fields,$=G.formatter;return Object(S.a)({chart:it,options:{type:"polygon",xField:n,yField:s,colorField:P,tooltipFields:Object(v.isArray)(V)&&V.concat([f,I]),label:g,mapping:{tooltip:$,color:k}}}),lt}function ft(lt){var it=lt.chart,U=lt.options,P=U.isTransposed;return it.coordinate({type:"rect",actions:P?[["transpose"],["reflect","x"]]:[]}),lt}function Ft(lt){var it=function(P,H,k,h){return Object(at.a)(Object(at.a)({},h),{start:[P[n][1],P[s][1]],end:[P[n][1]+.05,P[s][1]]})};return E(it)(lt),lt}function kt(lt){return Object(e.e)(wt,xt,ft,Ft)(lt)}function Ot(lt){var it,U=lt.options,P=U.compareField,H=U.xField,k=U.yField,h={minSize:0,maxSize:1,meta:(it={},it[M]={min:0,max:1,nice:!1},it),label:P?{fields:[H,k,P,f,I],style:{fill:"#fff",fontSize:12},formatter:function(G){return""+G[k]}}:{fields:[H,k,f,I],offset:0,position:"middle",style:{fill:"#fff",fontSize:12},formatter:function(G){return G[H]+" "+G[k]}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,title:H,formatter:function(G){return{name:G[H],value:G[k]}}},conversionTag:{offsetX:10,offsetY:0,style:{},formatter:function(G){return"\u8F6C\u5316\u7387: "+i.a.apply(void 0,G[I])}}};return Object(e.b)({options:h},lt)}function X(lt){var it=lt.options,U=it.compareField,P=it.dynamicHeight,H=it.seriesField;return H?St(lt):U?nt(lt):P?kt(lt):T(lt)}function ct(lt){var it,U=lt.options,P=U.xAxis,H=U.yAxis,k=U.xField,h=U.yField;return Object(e.e)(Object(A.f)((it={},it[k]=P,it[h]=H,it)))(lt)}function dt(lt){var it=lt.chart;return it.axis(!1),lt}function pt(lt){var it=lt.chart,U=lt.options,P=U.legend;return P===!1?it.legend(!1):it.legend(P),lt}function Mt(lt){return Object(e.e)(Ot,X,ct,dt,A.k,A.c,pt,A.a,A.j,Object(A.b)())(lt)}var tt=function(lt){Object(at.b)(it,lt);function it(){var U=lt!==null&&lt.apply(this,arguments)||this;return U.type="funnel",U}return it.prototype.getDefaultOptions=function(){return{appendPadding:[0,80]}},it.prototype.getSchemaAdaptor=function(){return Mt},it}(a.a)},aN7R:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Base",function(){return M}),z.d(_t,"Circle",function(){return n}),z.d(_t,"Dom",function(){return d}),z.d(_t,"Ellipse",function(){return O}),z.d(_t,"Image",function(){return p}),z.d(_t,"Line",function(){return N}),z.d(_t,"Marker",function(){return vt}),z.d(_t,"Path",function(){return St}),z.d(_t,"Polygon",function(){return xt}),z.d(_t,"Polyline",function(){return Ft}),z.d(_t,"Rect",function(){return pt}),z.d(_t,"Text",function(){return H});var at={};z.r(at),z.d(at,"Base",function(){return M}),z.d(at,"Circle",function(){return n}),z.d(at,"Dom",function(){return d}),z.d(at,"Ellipse",function(){return O}),z.d(at,"Image",function(){return p}),z.d(at,"Line",function(){return N}),z.d(at,"Marker",function(){return vt}),z.d(at,"Path",function(){return St}),z.d(at,"Polygon",function(){return xt}),z.d(at,"Polyline",function(){return Ft}),z.d(at,"Rect",function(){return pt}),z.d(at,"Text",function(){return H});var a=z("mrSG"),A=z("aFU3"),e=z("APlK"),i=z("c+wO"),v=z("c0lT"),b=z("IvmH"),S=z("5z4m"),f=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="svg",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},h.prototype.afterAttrsChange=function(g){k.prototype.afterAttrsChange.call(this,g);var G=this.get("canvas");if(G&&G.get("autoDraw")){var V=G.get("context");this.draw(V,g)}},h.prototype.getShapeBase=function(){return at},h.prototype.getGroupBase=function(){return S.a},h.prototype.onCanvasChange=function(g){Object(v.b)(this,g)},h.prototype.calculateBBox=function(){var g=this.get("el"),G=null;if(g)G=g.getBBox();else{var V=Object(A.getBBoxMethod)(this.get("type"));V&&(G=V(this))}if(G){var $=G.x,rt=G.y,ot=G.width,At=G.height,gt=this.getHitLineWidth(),mt=gt/2,bt=$-mt,jt=rt-mt,Dt=$+ot+mt,Ut=rt+At+mt;return{x:bt,y:jt,minX:bt,minY:jt,maxX:Dt,maxY:Ut,width:ot+gt,height:At+gt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},h.prototype.isFill=function(){var g=this.attr(),G=g.fill,V=g.fillStyle;return(G||V||this.isClipShape())&&this.canFill},h.prototype.isStroke=function(){var g=this.attr(),G=g.stroke,V=g.strokeStyle;return(G||V)&&this.canStroke},h.prototype.draw=function(g,G){var V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||Object(i.a)(this),Object(e.a)(this,g),this.createPath(g,G),this.shadow(g,G),this.strokeAndFill(g,G),this.transform(G))},h.prototype.createPath=function(g,G){},h.prototype.strokeAndFill=function(g,G){var V=G||this.attr(),$=V.fill,rt=V.fillStyle,ot=V.stroke,At=V.strokeStyle,gt=V.fillOpacity,mt=V.strokeOpacity,bt=V.lineWidth,jt=this.get("el");this.canFill&&(G?"fill"in V?this._setColor(g,"fill",$):"fillStyle"in V&&this._setColor(g,"fill",rt):this._setColor(g,"fill",$||rt),gt&&jt.setAttribute(b.b.fillOpacity,gt)),this.canStroke&&bt>0&&(G?"stroke"in V?this._setColor(g,"stroke",ot):"strokeStyle"in V&&this._setColor(g,"stroke",At):this._setColor(g,"stroke",ot||At),mt&&jt.setAttribute(b.b.strokeOpacity,mt),bt&&jt.setAttribute(b.b.lineWidth,bt))},h.prototype._setColor=function(g,G,V){var $=this.get("el");if(!V){$.setAttribute(b.b[G],"none");return}if(V=V.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(V)){var rt=g.find("gradient",V);rt||(rt=g.addGradient(V)),$.setAttribute(b.b[G],"url(#"+rt+")")}else if(/^[p,P]{1}[\s]*\(/.test(V)){var rt=g.find("pattern",V);rt||(rt=g.addPattern(V)),$.setAttribute(b.b[G],"url(#"+rt+")")}else $.setAttribute(b.b[G],V)},h.prototype.shadow=function(g,G){var V=this.attr(),$=G||V,rt=$.shadowOffsetX,ot=$.shadowOffsetY,At=$.shadowBlur,gt=$.shadowColor;(rt||ot||At||gt)&&Object(e.b)(this,g)},h.prototype.transform=function(g){var G=this.attr(),V=(g||G).matrix;V&&Object(e.c)(this)},h.prototype.isInShape=function(g,G){return this.isPointInPath(g,G)},h.prototype.isPointInPath=function(g,G){var V=this.get("el"),$=this.get("canvas"),rt=$.get("el").getBoundingClientRect(),ot=g+rt.left,At=G+rt.top,gt=document.elementFromPoint(ot,At);return!!(gt&&gt.isEqualNode(V))},h.prototype.getHitLineWidth=function(){var g=this.attrs,G=g.lineWidth,V=g.lineAppendWidth;return this.isStroke()?G+V:0},h}(A.AbstractShape),M=f,I=z("iTfj"),y=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="circle",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,r:0})},h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");Object(I.each)(G||V,function(rt,ot){ot==="x"||ot==="y"?$.setAttribute("c"+ot,rt):b.b[ot]&&$.setAttribute(b.b[ot],rt)})},h}(M),n=y,s=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="dom",g.canFill=!1,g.canStroke=!1,g}return h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");if(Object(I.each)(G||V,function(gt,mt){b.b[mt]&&$.setAttribute(b.b[mt],gt)}),typeof V.html=="function"){var rt=V.html.call(this,V);if(rt instanceof Element||rt instanceof HTMLDocument){for(var ot=$.childNodes,At=ot.length-1;At>=0;At--)$.removeChild(ot[At]);$.appendChild(rt)}else $.innerHTML=rt}else $.innerHTML=V.html},h}(M),d=s,E=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="ellipse",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,rx:0,ry:0})},h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");Object(I.each)(G||V,function(rt,ot){ot==="x"||ot==="y"?$.setAttribute("c"+ot,rt):b.b[ot]&&$.setAttribute(b.b[ot],rt)})},h}(M),O=E,C=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="image",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0})},h.prototype.createPath=function(g,G){var V=this,$=this.attr(),rt=this.get("el");Object(I.each)(G||$,function(ot,At){At==="img"?V._setImage($.img):b.b[At]&&rt.setAttribute(b.b[At],ot)})},h.prototype.setAttr=function(g,G){this.attrs[g]=G,g==="img"&&this._setImage(G)},h.prototype._setImage=function(g){var G=this.attr(),V=this.get("el");if(Object(I.isString)(g))V.setAttribute("href",g);else if(g instanceof window.Image)G.width||(V.setAttribute("width",g.width),this.attr("width",g.width)),G.height||(V.setAttribute("height",g.height),this.attr("height",g.height)),V.setAttribute("href",g.src);else if(g instanceof HTMLElement&&Object(I.isString)(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")V.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var $=document.createElement("canvas");$.setAttribute("width",""+g.width),$.setAttribute("height",""+g.height),$.getContext("2d").putImageData(g,0,0),G.width||(V.setAttribute("width",""+g.width),this.attr("width",g.width)),G.height||(V.setAttribute("height",""+g.height),this.attr("height",g.height)),V.setAttribute("href",$.toDataURL())}},h}(M),p=C,x=z("EYNi"),T=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="line",g.canFill=!1,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");Object(I.each)(G||V,function(rt,ot){if(ot==="startArrow"||ot==="endArrow")if(rt){var At=Object(I.isObject)(rt)?g.addArrow(V,b.b[ot]):g.getDefaultArrow(V,b.b[ot]);$.setAttribute(b.b[ot],"url(#"+At+")")}else $.removeAttribute(b.b[ot]);else b.b[ot]&&$.setAttribute(b.b[ot],rt)})},h.prototype.getTotalLength=function(){var g=this.attr(),G=g.x1,V=g.y1,$=g.x2,rt=g.y2;return x.c.length(G,V,$,rt)},h.prototype.getPoint=function(g){var G=this.attr(),V=G.x1,$=G.y1,rt=G.x2,ot=G.y2;return x.c.pointAt(V,$,rt,ot,g)},h}(M),N=T,Y={circle:function(h,g,G){return[["M",h,g],["m",-G,0],["a",G,G,0,1,0,G*2,0],["a",G,G,0,1,0,-G*2,0]]},square:function(h,g,G){return[["M",h-G,g-G],["L",h+G,g-G],["L",h+G,g+G],["L",h-G,g+G],["Z"]]},diamond:function(h,g,G){return[["M",h-G,g],["L",h,g-G],["L",h+G,g],["L",h,g+G],["Z"]]},triangle:function(h,g,G){var V=G*Math.sin(1/3*Math.PI);return[["M",h-G,g+V],["L",h,g-V],["L",h+G,g+V],["z"]]},triangleDown:function(h,g,G){var V=G*Math.sin(1/3*Math.PI);return[["M",h-G,g-V],["L",h+G,g-V],["L",h,g+V],["Z"]]}},q={get:function(h){return Y[h]},register:function(h,g){Y[h]=g},remove:function(h){delete Y[h]},getAll:function(){return Y}},nt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="marker",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g){var G=this.get("el");G.setAttribute("d",this._assembleMarker())},h.prototype._assembleMarker=function(){var g=this._getPath();return Object(I.isArray)(g)?g.map(function(G){return G.join(" ")}).join(""):g},h.prototype._getPath=function(){var g=this.attr(),G=g.x,V=g.y,$=g.r||g.radius,rt=g.symbol||"circle",ot;return Object(I.isFunction)(rt)?ot=rt:ot=q.get(rt),ot?ot(G,V,$):(console.warn(ot+" symbol is not exist."),null)},h.symbolsFactory=q,h}(M),vt=nt,ht=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="path",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,G){var V=this,$=this.attr(),rt=this.get("el");Object(I.each)(G||$,function(ot,At){if(At==="path"&&Object(I.isArray)(ot))rt.setAttribute("d",V._formatPath(ot));else if(At==="startArrow"||At==="endArrow")if(ot){var gt=Object(I.isObject)(ot)?g.addArrow($,b.b[At]):g.getDefaultArrow($,b.b[At]);rt.setAttribute(b.b[At],"url(#"+gt+")")}else rt.removeAttribute(b.b[At]);else b.b[At]&&rt.setAttribute(b.b[At],ot)})},h.prototype._formatPath=function(g){var G=g.map(function(V){return V.join(" ")}).join("");return~G.indexOf("NaN")?"":G},h.prototype.getTotalLength=function(){var g=this.get("el");return g?g.getTotalLength():null},h.prototype.getPoint=function(g){var G=this.get("el"),V=this.getTotalLength();if(V===0)return null;var $=G?G.getPointAtLength(g*V):null;return $?{x:$.x,y:$.y}:null},h}(M),St=ht,wt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polygon",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");Object(I.each)(G||V,function(rt,ot){ot==="points"&&Object(I.isArray)(rt)&&rt.length>=2?$.setAttribute("points",rt.map(function(At){return At[0]+","+At[1]}).join(" ")):b.b[ot]&&$.setAttribute(b.b[ot],rt)})},h}(M),xt=wt,ft=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polyline",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.onAttrChange=function(g,G,V){k.prototype.onAttrChange.call(this,g,G,V),["points"].indexOf(g)!==-1&&this._resetCache()},h.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},h.prototype.createPath=function(g,G){var V=this.attr(),$=this.get("el");Object(I.each)(G||V,function(rt,ot){ot==="points"&&Object(I.isArray)(rt)&&rt.length>=2?$.setAttribute("points",rt.map(function(At){return At[0]+","+At[1]}).join(" ")):b.b[ot]&&$.setAttribute(b.b[ot],rt)})},h.prototype.getTotalLength=function(){var g=this.attr().points,G=this.get("totalLength");return Object(I.isNil)(G)?(this.set("totalLength",x.d.length(g)),this.get("totalLength")):G},h.prototype.getPoint=function(g){var G=this.attr().points,V=this.get("tCache");V||(this._setTcache(),V=this.get("tCache"));var $,rt;return Object(I.each)(V,function(ot,At){g>=ot[0]&&g<=ot[1]&&($=(g-ot[0])/(ot[1]-ot[0]),rt=At)}),x.c.pointAt(G[rt][0],G[rt][1],G[rt+1][0],G[rt+1][1],$)},h.prototype._setTcache=function(){var g=this.attr().points;if(!(!g||g.length===0)){var G=this.getTotalLength();if(!(G<=0)){var V=0,$=[],rt,ot;Object(I.each)(g,function(At,gt){g[gt+1]&&(rt=[],rt[0]=V/G,ot=x.c.length(At[0],At[1],g[gt+1][0],g[gt+1][1]),V+=ot,rt[1]=V/G,$.push(rt))}),this.set("tCache",$)}}},h.prototype.getStartTangent=function(){var g=this.attr().points,G=[];return G.push([g[1][0],g[1][1]]),G.push([g[0][0],g[0][1]]),G},h.prototype.getEndTangent=function(){var g=this.attr().points,G=g.length-1,V=[];return V.push([g[G-1][0],g[G-1][1]]),V.push([g[G][0],g[G][1]]),V},h}(M),Ft=ft,kt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Ot=/[^\s,]+/gi;function X(k){var h=0,g=0,G=0,V=0;return Object(I.isArray)(k)?k.length===1?h=g=G=V=k[0]:k.length===2?(h=G=k[0],g=V=k[1]):k.length===3?(h=k[0],g=V=k[1],G=k[2]):(h=k[0],g=k[1],G=k[2],V=k[3]):h=g=G=V=k,{r1:h,r2:g,r3:G,r4:V}}function ct(k){if(k=k||[],Object(I.isArray)(k))return k;if(Object(I.isString)(k))return k=k.match(kt),Object(I.each)(k,function(h,g){if(h=h.match(Ot),h[0].length>1){var G=h[0].charAt(0);h.splice(1,0,h[0].substr(1)),h[0]=G}Object(I.each)(h,function(V,$){isNaN(V)||(h[$]=+V)}),k[g]=h}),k}var dt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="rect",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0,radius:0})},h.prototype.createPath=function(g,G){var V=this,$=this.attr(),rt=this.get("el"),ot=!1,At=["x","y","width","height","radius"];Object(I.each)(G||$,function(gt,mt){At.indexOf(mt)!==-1&&!ot?(rt.setAttribute("d",V._assembleRect($)),ot=!0):At.indexOf(mt)===-1&&b.b[mt]&&rt.setAttribute(b.b[mt],gt)})},h.prototype._assembleRect=function(g){var G=g.x,V=g.y,$=g.width,rt=g.height,ot=g.radius;if(!ot)return"M "+G+","+V+" l "+$+",0 l 0,"+rt+" l"+-$+" 0 z";var At=X(ot);Object(I.isArray)(ot)?ot.length===1?At.r1=At.r2=At.r3=At.r4=ot[0]:ot.length===2?(At.r1=At.r3=ot[0],At.r2=At.r4=ot[1]):ot.length===3?(At.r1=ot[0],At.r2=At.r4=ot[1],At.r3=ot[2]):(At.r1=ot[0],At.r2=ot[1],At.r3=ot[2],At.r4=ot[3]):At.r1=At.r2=At.r3=At.r4=ot;var gt=[["M "+(G+At.r1)+","+V],["l "+($-At.r1-At.r2)+",0"],["a "+At.r2+","+At.r2+",0,0,1,"+At.r2+","+At.r2],["l 0,"+(rt-At.r2-At.r3)],["a "+At.r3+","+At.r3+",0,0,1,"+-At.r3+","+At.r3],["l "+(At.r3+At.r4-$)+",0"],["a "+At.r4+","+At.r4+",0,0,1,"+-At.r4+","+-At.r4],["l 0,"+(At.r4+At.r1-rt)],["a "+At.r1+","+At.r1+",0,0,1,"+At.r1+","+-At.r1],["z"]];return gt.join(" ")},h}(M),pt=dt,Mt=z("e0ae"),tt=.3,lt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},it={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},U={left:"left",start:"left",center:"middle",right:"end",end:"end"},P=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="text",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},h.prototype.createPath=function(g,G){var V=this,$=this.attr(),rt=this.get("el");this._setFont(),Object(I.each)(G||$,function(ot,At){At==="text"?V._setText(""+ot):At==="matrix"&&ot?Object(e.c)(V):b.b[At]&&rt.setAttribute(b.b[At],ot)}),rt.setAttribute("paint-order","stroke"),rt.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},h.prototype._setFont=function(){var g=this.get("el"),G=this.attr(),V=G.textBaseline,$=G.textAlign,rt=Object(Mt.a)();rt&&rt.name==="firefox"?g.setAttribute("dominant-baseline",it[V]||"alphabetic"):g.setAttribute("alignment-baseline",lt[V]||"baseline"),g.setAttribute("text-anchor",U[$]||"left")},h.prototype._setText=function(g){var G=this.get("el"),V=this.attr(),$=V.x,rt=V.textBaseline,ot=rt===void 0?"bottom":rt;if(!g)G.innerHTML="";else if(~g.indexOf(`
`)){var At=g.split(`
`),gt=At.length-1,mt="";Object(I.each)(At,function(bt,jt){jt===0?ot==="alphabetic"?mt+='<tspan x="'+$+'" dy="'+-gt+'em">'+bt+"</tspan>":ot==="top"?mt+='<tspan x="'+$+'" dy="0.9em">'+bt+"</tspan>":ot==="middle"?mt+='<tspan x="'+$+'" dy="'+-(gt-1)/2+'em">'+bt+"</tspan>":ot==="bottom"?mt+='<tspan x="'+$+'" dy="-'+(gt+tt)+'em">'+bt+"</tspan>":ot==="hanging"&&(mt+='<tspan x="'+$+'" dy="'+(-(gt-1)-tt)+'em">'+bt+"</tspan>"):mt+='<tspan x="'+$+'" dy="1em">'+bt+"</tspan>"}),G.innerHTML=mt}else G.innerHTML=g},h}(M),H=P},aSjE:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return at}),z.d(_t,"c",function(){return a}),z.d(_t,"a",function(){return A});function at(e,i){var v=[],b=e[0],S=e[1],f=e[2],M=e[3],I=e[4],y=e[5],n=e[6],s=e[7],d=e[8],E=i[0],O=i[1],C=i[2],p=i[3],x=i[4],T=i[5],N=i[6],Y=i[7],q=i[8];return v[0]=E*b+O*M+C*n,v[1]=E*S+O*I+C*s,v[2]=E*f+O*y+C*d,v[3]=p*b+x*M+T*n,v[4]=p*S+x*I+T*s,v[5]=p*f+x*y+T*d,v[6]=N*b+Y*M+q*n,v[7]=N*S+Y*I+q*s,v[8]=N*f+Y*y+q*d,v}function a(e,i){var v=[],b=i[0],S=i[1];return v[0]=e[0]*b+e[3]*S+e[6],v[1]=e[1]*b+e[4]*S+e[7],v}function A(e){var i=[],v=e[0],b=e[1],S=e[2],f=e[3],M=e[4],I=e[5],y=e[6],n=e[7],s=e[8],d=s*M-I*n,E=-s*f+I*y,O=n*f-M*y,C=v*d+b*E+S*O;return C?(C=1/C,i[0]=d*C,i[1]=(-s*b+S*n)*C,i[2]=(I*b-S*M)*C,i[3]=E*C,i[4]=(s*v-S*y)*C,i[5]=(-I*v+S*f)*C,i[6]=O*C,i[7]=(-n*v+b*y)*C,i[8]=(M*v-b*f)*C,i):null}},bahg:function(Un,_t){function z(at){return at.split("")}Un.exports=z},"c+wO":function(Un,_t,z){"use strict";z.d(_t,"b",function(){return A}),z.d(_t,"a",function(){return e}),z.d(_t,"d",function(){return i}),z.d(_t,"c",function(){return v});var at=z("iTfj"),a=z("IvmH");function A(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}function e(b){var S=a.a[b.type],f=b.getParent();if(!S)throw new Error("the type "+b.type+" is not supported by svg");var M=A(S);if(b.get("id")&&(M.id=b.get("id")),b.set("el",M),b.set("attrs",{}),f){var I=f.get("el");I||(I=f.createDom(),f.set("el",I)),I.appendChild(M)}return M}function i(b,S){var f=b.get("el"),M=Object(at.toArray)(f.children).sort(S),I=document.createDocumentFragment();M.forEach(function(y){I.appendChild(y)}),f.appendChild(I)}function v(b,S){var f=b.parentNode,M=Array.from(f.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),I=M[S],y=M.indexOf(b);if(I){if(y>S)f.insertBefore(b,I);else if(y<S){var n=M[S+1];n?f.insertBefore(b,n):f.appendChild(b)}}else f.appendChild(b)}},c0lT:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return A}),z.d(_t,"b",function(){return e});var at=z("APlK"),a=z("c+wO");function A(i,v){v.forEach(function(b){b.draw(i)})}function e(i,v){var b=i.get("canvas");if(b&&b.get("autoDraw")){var S=b.get("context"),f=i.getParent(),M=f?f.getChildren():[b],I=i.get("el");if(v==="remove"){var y=i.get("isClipShape");if(y){var n=I&&I.parentNode,s=n&&n.parentNode;n&&s&&s.removeChild(n)}else I&&I.parentNode&&I.parentNode.removeChild(I)}else if(v==="show")I.setAttribute("visibility","visible");else if(v==="hide")I.setAttribute("visibility","hidden");else if(v==="zIndex")Object(a.c)(I,M.indexOf(i));else if(v==="sort"){var d=i.get("children");d&&d.length&&Object(a.d)(i,function(E,O){return d.indexOf(E)-d.indexOf(O)?1:0})}else v==="clear"?I&&(I.innerHTML=""):v==="matrix"?Object(at.c)(i):v==="clip"?Object(at.a)(i,S):v==="attr"||v==="add"&&i.draw(S)}}},cBFB:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return Y});var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=z("tKoa"),i=z("w02o"),v=z("+Nd1"),b=z("a8tM"),S=z("iTfj"),f=z("I7nc"),M={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function I(q,nt){nt=Object(S.assign)({},M,nt);var vt=nt.as;if(!Object(S.isArray)(vt)||vt.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var ht;try{ht=Object(f.b)(nt)}catch(Ft){console.warn(Ft)}var St=function(kt){return v.a().size(nt.size).round(nt.round).padding(nt.padding)(b.c(kt).sum(function(Ot){return Ot[ht]}))},wt=St(q),xt=vt[0],ft=vt[1];return wt.each(function(Ft){Ft[xt]=[Ft.x0,Ft.x1,Ft.x1,Ft.x0],Ft[ft]=[Ft.y1,Ft.y1,Ft.y0,Ft.y0],["x0","x1","y0","y1"].forEach(function(kt){vt.indexOf(kt)===-1&&delete Ft[kt]})}),Object(f.a)(wt)}var y=z("NzZ7");function n(q){var nt=q.data,vt=q.type,ht=q.seriesField,St=q.colorField,wt=q.hierarchyConfig,xt={partition:I,treemap:y.a},ft=xt[vt](nt,Object(at.a)(Object(at.a)({},wt),{type:"hierarchy."+vt,field:ht,as:["x","y"]})),Ft=[];return ft.forEach(function(kt){var Ot,X,ct,dt,pt;if(kt.depth===0)return null;var Mt=Object(at.a)((Ot={},Ot[ht]=kt.data[ht]||((ct=(X=kt.parent)===null||X===void 0?void 0:X.data)===null||ct===void 0?void 0:ct[ht]),Ot[St]=kt.data[St]||((pt=(dt=kt.parent)===null||dt===void 0?void 0:dt.data)===null||pt===void 0?void 0:pt[St]),Ot),kt);Mt.ext=wt,Ft.push(Mt)}),Ft}function s(q){var nt=q.items,vt=q.formatter,ht=q.fields,St=nt[0]||{},wt=St.color,xt=St.mappingData,ft=St.data,Ft=document.createElement("ul");Ft.className="g2-tooltip";var kt="",Ot=function(ct,dt){var pt;return vt?vt(Object(at.a)(Object(at.a)({},ct),{field:dt})):{name:dt,value:(ct==null?void 0:ct[dt])||((pt=ct==null?void 0:ct.data)===null||pt===void 0?void 0:pt[dt])}};return ht.forEach(function(X){var ct=Ot(ft,X),dt=ct.name,pt=ct.value;kt+=`<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;display:flex;align-items: center;">
        <span style="background-color:`+((xt==null?void 0:xt.color)||wt)+`;" class="g2-tooltip-marker"></span>
        <span style="display:inline-flex;flex:1;justify-content:space-between">
        <span style="margin-right: 16px;">`+dt+`:</span>
        <span class="g2-tooltip-list-item-value">`+pt+`</span>
        </span>
    </li>`}),Ft.innerHTML=kt,Ft}function d(q){var nt=q.chart,vt=q.options,ht=vt.color,St=vt.colorField,wt=vt.sunburstStyle,xt=n(vt);return nt.data(xt),Object(e.f)(Object(a.b)({},q,{options:{xField:"x",yField:"y",seriesField:St,polygon:{color:ht,style:wt}}})),q}function E(q){var nt=q.chart;return nt.axis(!1),q}function O(q){var nt=q.chart;return nt.legend(!1),q}function C(q){var nt=q.chart,vt=q.options,ht=vt.label,St=vt.seriesField,wt=Object(a.c)(nt,"polygon");if(!ht)wt.label(!1);else{var xt=ht.callback,ft=Object(at.c)(ht,["callback"]);wt.label({fields:[St],callback:xt,cfg:Object(a.o)(ft)})}return q}function p(q){var nt=q.chart,vt=q.options,ht=vt.innerRadius,St=vt.radius,wt=vt.reflect,xt=nt.coordinate({type:"polar",cfg:{innerRadius:ht,radius:St}});return wt&&xt.reflect(wt),q}function x(q){var nt=q.chart,vt=q.options,ht=vt.meta;return ht&&nt.scale(ht),q}function T(q){var nt=q.chart,vt=q.options,ht=vt.tooltip,St=vt.seriesField,wt=vt.colorField;return ht&&nt.tooltip(Object(at.a)(Object(at.a)({},ht),{customContent:ht&&ht.customContent?ht.customContent:function(xt,ft){return s({value:xt,items:ft,formatter:ht&&(ht==null?void 0:ht.formatter),fields:ht&&ht.fields||[St,wt]})}})),q}function N(q){return Object(a.e)(d,i.j,E,x,O,p,T,C,i.c,i.a,Object(i.b)())(q)}var Y=function(q){Object(at.b)(nt,q);function nt(){var vt=q!==null&&q.apply(this,arguments)||this;return vt.type="sunburst",vt}return nt.prototype.getDefaultOptions=function(){return Object(a.b)({},q.prototype.getDefaultOptions.call(this),{type:"partition",innerRadius:0,seriesField:"value",tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1}})},nt.prototype.getSchemaAdaptor=function(){return N},nt}(A.a)},cWXX:function(Un,_t,z){"use strict";var at=z("cIOH"),a=z.n(at),A=z("oIFs"),e=z.n(A)},chpo:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var at=1,a=function(){return"".concat(at++)};_t.default=a},cyZq:function(Un,_t,z){"use strict";z.d(_t,"d",function(){return a}),z.d(_t,"b",function(){return A}),z.d(_t,"e",function(){return e}),z.d(_t,"f",function(){return i}),z.d(_t,"l",function(){return v}),z.d(_t,"j",function(){return b});var at=z("iTfj");z.d(_t,"i",function(){return at.isNil}),z.d(_t,"k",function(){return at.isString}),z.d(_t,"h",function(){return at.isFunction}),z.d(_t,"g",function(){return at.isArray}),z.d(_t,"c",function(){return at.each}),z.d(_t,"o",function(){return at.toRadian}),z.d(_t,"m",function(){return at.mod}),z.d(_t,"n",function(){return at.requestAnimationFrame}),z.d(_t,"a",function(){return at.clearAnimationFrame});function a(){return window?window.devicePixelRatio:1}function A(S,f,M,I){var y=S-M,n=f-I;return Math.sqrt(y*y+n*n)}function e(S,f,M,I,y,n){return y>=S&&y<=S+M&&n>=f&&n<=f+I}function i(S,f){return!(f.minX>S.maxX||f.maxX<S.minX||f.minY>S.maxY||f.maxY<S.minY)}function v(S,f){return!S||!f?S||f:{minX:Math.min(S.minX,f.minX),minY:Math.min(S.minY,f.minY),maxX:Math.max(S.maxX,f.maxX),maxY:Math.max(S.maxY,f.maxY)}}function b(S,f){return S[0]===f[0]&&S[1]===f[1]}},de35:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("fIp6"),A=z("iTfj"),e=z("5UbV"),i=z("NmWf"),v=function(b){Object(at.b)(S,b);function S(){return b!==null&&b.apply(this,arguments)||this}return S.prototype.getDefaultCfg=function(){var f=b.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},f),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},S.prototype.getContainer=function(){return this.get("container")},S.prototype.show=function(){var f=this.get("container");f.style.display="",this.set("visible",!0)},S.prototype.hide=function(){var f=this.get("container");f.style.display="none",this.set("visible",!1)},S.prototype.setCapture=function(f){var M=this.getContainer(),I=f?"auto":"none";M.style.pointerEvents=I,this.set("capture",f)},S.prototype.getBBox=function(){var f=this.getContainer(),M=parseFloat(f.style.left)||0,I=parseFloat(f.style.top)||0;return Object(e.b)(M,I,f.clientWidth,f.clientHeight)},S.prototype.clear=function(){var f=this.get("container");Object(e.a)(f)},S.prototype.destroy=function(){this.removeEvent(),this.removeDom(),b.prototype.destroy.call(this)},S.prototype.init=function(){b.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},S.prototype.initCapture=function(){this.setCapture(this.get("capture"))},S.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},S.prototype.initDom=function(){},S.prototype.initContainer=function(){var f=this.get("container");if(Object(A.isNil)(f)){f=this.createDom();var M=this.get("parent");Object(A.isString)(M)&&(M=document.getElementById(M),this.set("parent",M)),M.appendChild(f),this.set("container",f)}else Object(A.isString)(f)&&(f=document.getElementById(f),this.set("container",f));this.get("parent")||this.set("parent",f.parentNode)},S.prototype.resetStyles=function(){var f=this.get("domStyles"),M=this.get("defaultStyles");f?f=Object(A.deepMix)({},M,f):f=M,this.set("domStyles",f)},S.prototype.applyStyles=function(){var f=this.get("domStyles");if(!!f){var M=this.getContainer();this.applyChildrenStyles(M,f);var I=this.get("containerClassName");if(I&&Object(e.h)(M,I)){var y=f[I];Object(a.e)(M,y)}}},S.prototype.applyChildrenStyles=function(f,M){Object(A.each)(M,function(I,y){var n=f.getElementsByClassName(y);Object(A.each)(n,function(s){Object(a.e)(s,I)})})},S.prototype.applyStyle=function(f,M){var I=this.get("domStyles");Object(a.e)(M,I[f])},S.prototype.createDom=function(){var f=this.get("containerTpl");return Object(a.b)(f)},S.prototype.initEvent=function(){},S.prototype.removeDom=function(){var f=this.get("container");f&&f.parentNode&&f.parentNode.removeChild(f)},S.prototype.removeEvent=function(){},S.prototype.updateInner=function(f){Object(A.hasKey)(f,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},S.prototype.resetPosition=function(){},S}(i.a);_t.a=v},dt0z:function(Un,_t,z){var at=z("zoYe");function a(A){return A==null?"":at(A)}Un.exports=a},e0ae:function(Un,_t,z){"use strict";(function(at){z.d(_t,"a",function(){return n});var a=function(){for(var x=0,T=0,N=arguments.length;T<N;T++)x+=arguments[T].length;for(var Y=Array(x),q=0,T=0;T<N;T++)for(var nt=arguments[T],vt=0,ht=nt.length;vt<ht;vt++,q++)Y[q]=nt[vt];return Y},A=function(){function x(T,N,Y){this.name=T,this.version=N,this.os=Y,this.type="browser"}return x}(),e=function(){function x(T){this.version=T,this.type="node",this.name="node",this.os=at.platform}return x}(),i=function(){function x(T,N,Y,q){this.name=T,this.version=N,this.os=Y,this.bot=q,this.type="bot-device"}return x}(),v=function(){function x(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return x}(),b=function(){function x(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return x}(),S=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,f=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,M=3,I=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",S]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n(x){return x?E(x):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new b:typeof navigator!="undefined"?E(navigator.userAgent):C()}function s(x){return x!==""&&I.reduce(function(T,N){var Y=N[0],q=N[1];if(T)return T;var nt=q.exec(x);return!!nt&&[Y,nt]},!1)}function d(x){var T=s(x);return T?T[0]:null}function E(x){var T=s(x);if(!T)return null;var N=T[0],Y=T[1];if(N==="searchbot")return new v;var q=Y[1]&&Y[1].split(/[._]/).slice(0,3);q?q.length<M&&(q=a(q,p(M-q.length))):q=[];var nt=q.join("."),vt=O(x),ht=f.exec(x);return ht&&ht[1]?new i(N,nt,vt,ht[1]):new A(N,nt,vt)}function O(x){for(var T=0,N=y.length;T<N;T++){var Y=y[T],q=Y[0],nt=Y[1],vt=nt.exec(x);if(vt)return q}return null}function C(){var x=typeof at!="undefined"&&at.version;return x?new e(at.version.slice(1)):null}function p(x){for(var T=[],N=0;N<x;N++)T.push("0");return T}}).call(this,z("Q2Ig"))},eHqw:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return T});var at=z("mrSG"),a=z("zJSt"),A=z("KMYG"),e=z("w02o"),i=z("YuPD"),v=z("iTfj"),b=z("NzZ7");function S(N){return Object(v.isArray)(N)?N.findIndex(function(Y){return Y.type==="treemap-drill-down"})>-1:!1}function f(N,Y){var q=S(N);return q?N.map(function(nt){return nt.type==="treemap-drill-down"?Object(i.b)({},nt,{cfg:{hierarchyConfig:Y}}):nt}):N}function M(N){var Y=N.data,q=N.colorField,nt=N.openDrillDown,vt=N.hierarchyConfig,ht=vt===void 0?{}:vt,St=Object(b.a)(Y,Object(at.a)(Object(at.a)({},ht),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),wt=[];return St.forEach(function(xt){if(xt.depth===0||nt&&xt.depth!==1||!nt&&xt.children)return null;var ft=Object.assign({},xt.data,{x:xt.x,y:xt.y,depth:xt.depth,value:xt.value});if(!xt.data[q]&&xt.parent){var Ft=xt.ancestors().find(function(kt){return kt.data[q]});ft[q]=Ft==null?void 0:Ft.data[q]}else ft[q]=xt.data[q];wt.push(ft)}),wt}function I(N){var Y=N.options,q=Y.colorField;return Object(i.b)({options:{colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapResquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1,fields:["name","value",q],formatter:function(vt){return{name:vt.name,value:vt.value}}},interactions:[{type:"view-zoom"},{type:"treemap-element-zoom"}]}},N)}function y(N){var Y=N.chart,q=N.options,nt=q.color,vt=q.colorField,ht=q.rectStyle,St=M({data:q.data,colorField:q.colorField,openDrillDown:S(q.interactions)});return Y.data(St),Object(A.a)(Object(i.b)({},N,{options:{xField:"x",yField:"y",seriesField:vt,rawFields:["value"],polygon:{color:nt,style:ht}}})),N}function n(N){var Y=N.chart;return Y.axis(!1),N}function s(N){var Y=N.chart,q=N.options,nt=q.interactions,vt=q.hierarchyConfig;return Object(e.c)({chart:Y,options:{interactions:f(nt,vt)}}),N}function d(N){return Object(i.e)(I,y,n,e.j,e.d,e.k,s,e.a,Object(e.b)())(N)}var E=z("Ihc8"),O=function(N){Object(at.b)(Y,N);function Y(){var q=N!==null&&N.apply(this,arguments)||this;return q.cacheDataStack=[],q}return Y.prototype.drill=function(q){console.log(this.context);var nt=this.context.view,vt=nt.getData(),ht=nt.getGroupScales(),St=Object(v.get)(nt,["interactions","treemap-drill-down","cfg","hierarchyConfig"],{}),wt=M({data:q,colorField:Object(v.get)(ht,[0,"field"]),openDrillDown:!0,hierarchyConfig:St});nt.changeData(wt),this.cacheDataStack.push(vt)},Y.prototype.click=function(){var q=Object(v.get)(this.context,["event","data","data"]);if(!q)return!1;this.drill(q)},Y.prototype.reset=function(){var q=this.context.view;if(!(!Object(v.isArray)(this.cacheDataStack)||this.cacheDataStack.length<=0)){var nt=this.cacheDataStack.splice(this.cacheDataStack.length-1,1);q.changeData(nt[0])}},Y}(E.Action);function C(N){var Y=Object(v.get)(N,["event","data","data"],{});return Object(v.isArray)(Y.children)&&Y.children.length>0&&Y.depth===1}function p(N){if(!N||!N.getAction)return!1;var Y=N.getAction("treemap-drill-down-action");if(!Y)return!1;var q=Y.cacheDataStack;return Object(v.isArray)(q)&&q.length>0}Object(E.registerAction)("treemap-drill-down-action",O),Object(E.registerInteraction)("treemap-drill-down",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:pointer"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:C,action:["treemap-drill-down-action:click","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["treemap-drill-down-action:reset"]},{trigger:"reset-button:click",action:["reset-button:hide"],isEnable:function(Y){return!p(Y)}}]});var x=z("hag6"),T=function(N){Object(at.b)(Y,N);function Y(){var q=N!==null&&N.apply(this,arguments)||this;return q.type="treemap",q}return Y.prototype.getSchemaAdaptor=function(){return d},Y}(a.a)},eUgh:function(Un,_t){function z(at,a){for(var A=-1,e=at==null?0:at.length,i=Array(e);++A<e;)i[A]=a(at[A],A,at);return i}Un.exports=z},f6Jy:function(Un,_t,z){"use strict";var at="*",a=function(){function A(){this._events={}}return A.prototype.on=function(e,i,v){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:i,once:!!v}),this},A.prototype.once=function(e,i){return this.on(e,i,!0),this},A.prototype.emit=function(e){for(var i=this,v=[],b=1;b<arguments.length;b++)v[b-1]=arguments[b];var S=this._events[e]||[],f=this._events[at]||[],M=function(y){for(var n=y.length,s=0;s<n;s++)if(!!y[s]){var d=y[s],E=d.callback,O=d.once;O&&(y.splice(s,1),y.length===0&&delete i._events[e],n--,s--),E.apply(i,v)}};M(S),M(f)},A.prototype.off=function(e,i){if(!e)this._events={};else if(!i)delete this._events[e];else{for(var v=this._events[e]||[],b=v.length,S=0;S<b;S++)v[S].callback===i&&(v.splice(S,1),b--,S--);v.length===0&&delete this._events[e]}return this},A.prototype.getEvents=function(){return this._events},A}();_t.a=a},fD4D:function(Un,_t,z){"use strict";var at=z("ShmH"),a=z.n(at);a.a.version="4.1.7",_t.default=a.a;var A="4.1.7"},fFDA:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return vt});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e={opacity:0},i={stroke:"#C5C5C5",strokeOpacity:.85},v={fill:"#CACED4",opacity:.85},b=z("LvGN"),S=z("8vsG");function f(St){return Object(a.map)(St,function(wt,xt){var ft=xt===0?"M":"L",Ft=wt[0],kt=wt[1];return[ft,Ft,kt]})}function M(St){return f(St)}function I(St){if(St.length<=2)return M(St);var wt=[];Object(a.each)(St,function(Ot){Object(a.isEqual)(Ot,wt.slice(wt.length-2))||wt.push(Ot[0],Ot[1])});var xt=Object(b.a)(wt,!1),ft=Object(a.head)(St),Ft=ft[0],kt=ft[1];return xt.unshift(["M",Ft,kt]),xt}function y(St,wt,xt,ft){ft===void 0&&(ft=!0);var Ft=new S.b({values:St}),kt=new S.a({values:Object(a.map)(St,function(X,ct){return ct})}),Ot=Object(a.map)(St,function(X,ct){return[kt.scale(ct)*wt,xt-Ft.scale(X)*xt]});return ft?I(Ot):M(Ot)}function n(St,wt){var xt=new S.b({values:St}),ft=Math.max(0,xt.min);return wt-xt.scale(ft)*wt}function s(St,wt,xt,ft){var Ft=Object(at.d)(St),kt=n(ft,xt);return Ft.push(["L",wt,kt]),Ft.push(["L",0,kt]),Ft.push(["Z"]),Ft}var d=function(St){Object(at.b)(wt,St);function wt(){return St!==null&&St.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:e,lineStyle:i,areaStyle:v})},wt.prototype.renderInner=function(xt){var ft=this.cfg,Ft=ft.width,kt=ft.height,Ot=ft.data,X=ft.smooth,ct=ft.isArea,dt=ft.backgroundStyle,pt=ft.lineStyle,Mt=ft.areaStyle;this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:Ft,height:kt},dt)});var tt=y(Ot,Ft,kt,X);if(this.addShape(xt,{id:this.getElementId("line"),type:"path",attrs:Object(at.a)({path:tt},pt)}),ct){var lt=s(tt,Ft,kt,Ot);this.addShape(xt,{id:this.getElementId("area"),type:"path",attrs:Object(at.a)({path:lt},Mt)})}},wt.prototype.applyOffset=function(){var xt=this.cfg,ft=xt.x,Ft=xt.y;this.moveElementTo(this.get("group"),{x:ft,y:Ft})},wt}(A.a),E=d,O={fill:"#416180",opacity:.05},C={fill:"#5B8FF9",opacity:.15,cursor:"move"},p=10,x={width:p,height:24},T={textBaseline:"middle",fill:"#000",opacity:.45},N="sliderchange",Y={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},q=function(St){Object(at.b)(wt,St);function wt(){return St!==null&&St.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"handler",x:0,y:0,width:10,height:24,style:Y})},wt.prototype.renderInner=function(xt){var ft=this.cfg,Ft=ft.width,kt=ft.height,Ot=ft.style,X=Ot.fill,ct=Ot.stroke,dt=Ot.radius,pt=Ot.opacity,Mt=Ot.cursor;this.addShape(xt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:Ft,height:kt,fill:X,stroke:ct,radius:dt,opacity:pt,cursor:Mt}});var tt=1/3*Ft,lt=2/3*Ft,it=1/4*kt,U=3/4*kt;this.addShape(xt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:tt,y1:it,x2:tt,y2:U,stroke:ct,cursor:Mt}}),this.addShape(xt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:lt,y1:it,x2:lt,y2:U,stroke:ct,cursor:Mt}})},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.bindEvents=function(){var xt=this;this.get("group").on("mouseenter",function(){var ft=xt.get("style").highLightFill;xt.getElementByLocalId("background").attr("fill",ft),xt.draw()}),this.get("group").on("mouseleave",function(){var ft=xt.get("style").fill;xt.getElementByLocalId("background").attr("fill",ft),xt.draw()})},wt.prototype.draw=function(){var xt=this.get("container").get("canvas");xt&&xt.draw()},wt}(A.a),nt=q,vt=function(St){Object(at.b)(wt,St);function wt(){var xt=St!==null&&St.apply(this,arguments)||this;return xt.onMouseDown=function(ft){return function(Ft){xt.currentTarget=ft;var kt=Ft.originalEvent;kt.stopPropagation(),kt.preventDefault(),xt.prevX=Object(a.get)(kt,"touches.0.pageX",kt.pageX),xt.prevY=Object(a.get)(kt,"touches.0.pageY",kt.pageY);var Ot=xt.getContainerDOM();Ot.addEventListener("mousemove",xt.onMouseMove),Ot.addEventListener("mouseup",xt.onMouseUp),Ot.addEventListener("mouseleave",xt.onMouseUp),Ot.addEventListener("touchmove",xt.onMouseMove),Ot.addEventListener("touchend",xt.onMouseUp),Ot.addEventListener("touchcancel",xt.onMouseUp)}},xt.onMouseMove=function(ft){var Ft=xt.cfg.width,kt=[xt.get("start"),xt.get("end")];ft.stopPropagation(),ft.preventDefault();var Ot=Object(a.get)(ft,"touches.0.pageX",ft.pageX),X=Object(a.get)(ft,"touches.0.pageY",ft.pageY),ct=Ot-xt.prevX,dt=xt.adjustOffsetRange(ct/Ft);xt.updateStartEnd(dt),xt.updateUI(xt.getElementByLocalId("foreground"),xt.getElementByLocalId("minText"),xt.getElementByLocalId("maxText")),xt.prevX=Ot,xt.prevY=X,xt.draw(),xt.emit(N,[xt.get("start"),xt.get("end")].sort()),xt.delegateEmit("valuechanged",{originValue:kt,value:[xt.get("start"),xt.get("end")]})},xt.onMouseUp=function(){xt.currentTarget&&(xt.currentTarget=void 0);var ft=xt.getContainerDOM();ft&&(ft.removeEventListener("mousemove",xt.onMouseMove),ft.removeEventListener("mouseup",xt.onMouseUp),ft.removeEventListener("mouseleave",xt.onMouseUp),ft.removeEventListener("touchmove",xt.onMouseMove),ft.removeEventListener("touchend",xt.onMouseUp),ft.removeEventListener("touchcancel",xt.onMouseUp))},xt}return wt.prototype.setRange=function(xt,ft){this.set("minLimit",xt),this.set("maxLimit",ft);var Ft=this.get("start"),kt=this.get("end"),Ot=Object(a.clamp)(Ft,xt,ft),X=Object(a.clamp)(kt,xt,ft);!this.get("isInit")&&(Ft!==Ot||kt!==X)&&this.setValue([Ot,X])},wt.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},wt.prototype.setValue=function(xt){var ft=this.getRange();if(Object(a.isArray)(xt)&&xt.length===2){var Ft=[this.get("start"),this.get("end")];this.update({start:Object(a.clamp)(xt[0],ft.min,ft.max),end:Object(a.clamp)(xt[1],ft.min,ft.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:Ft,value:xt})}},wt.prototype.getValue=function(){return[this.get("start"),this.get("end")]},wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:O,foregroundStyle:C,handlerStyle:x,textStyle:T}})},wt.prototype.update=function(xt){var ft=xt.start,Ft=xt.end,kt=Object(at.a)({},xt);Object(a.isNil)(ft)||(kt.start=Object(a.clamp)(ft,0,1)),Object(a.isNil)(Ft)||(kt.end=Object(a.clamp)(Ft,0,1)),St.prototype.update.call(this,kt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},wt.prototype.init=function(){this.set("start",Object(a.clamp)(this.get("start"),0,1)),this.set("end",Object(a.clamp)(this.get("end"),0,1)),St.prototype.init.call(this)},wt.prototype.render=function(){St.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},wt.prototype.renderInner=function(xt){var ft=this.cfg,Ft=ft.start,kt=ft.end,Ot=ft.width,X=ft.height,ct=ft.trendCfg,dt=ct===void 0?{}:ct,pt=ft.minText,Mt=ft.maxText,tt=ft.backgroundStyle,lt=tt===void 0?{}:tt,it=ft.foregroundStyle,U=it===void 0?{}:it,P=ft.textStyle,H=P===void 0?{}:P,k=ft.handlerStyle,h=k===void 0?{}:k,g=Ft*Ot,G=kt*Ot;Object(a.size)(Object(a.get)(dt,"data"))&&(this.trend=this.addComponent(xt,Object(at.a)({component:d,id:this.getElementId("trend"),x:0,y:0,width:Ot,height:X},dt))),this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:Ot,height:X},lt)});var V=this.addShape(xt,{id:this.getElementId("minText"),type:"text",attrs:Object(at.a)({y:X/2,textAlign:"right",text:pt,silent:!1},H)}),$=this.addShape(xt,{id:this.getElementId("maxText"),type:"text",attrs:Object(at.a)({y:X/2,textAlign:"left",text:Mt,silent:!1},H)}),rt=this.addShape(xt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Object(at.a)({y:0,height:X},U)}),ot=Object(a.get)(h,"height",24);this.minHandler=this.addComponent(xt,Object(at.a)({component:q,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(X-ot)/2,width:Ot,height:ot,cursor:"ew-resize"},h)),this.maxHandler=this.addComponent(xt,Object(at.a)({component:q,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(X-ot)/2,width:Ot,height:ot,cursor:"ew-resize"},h))},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.updateUI=function(xt,ft,Ft){var kt=this.cfg,Ot=kt.start,X=kt.end,ct=kt.width,dt=kt.minText,pt=kt.maxText,Mt=kt.handlerStyle,tt=kt.height,lt=Ot*ct,it=X*ct;this.trend&&(this.trend.update({width:ct,height:tt}),this.get("updateAutoRender")||this.trend.render()),xt.attr("x",lt),xt.attr("width",it-lt);var U=Object(a.get)(Mt,"width",p);ft.attr("text",dt),Ft.attr("text",pt);var P=this._dodgeText([lt,it],ft,Ft),H=P[0],k=P[1];this.minHandler&&(this.minHandler.update({x:lt-U/2}),this.get("updateAutoRender")||this.minHandler.render()),Object(a.each)(H,function(h,g){return ft.attr(g,h)}),this.maxHandler&&(this.maxHandler.update({x:it-U/2}),this.get("updateAutoRender")||this.maxHandler.render()),Object(a.each)(k,function(h,g){return Ft.attr(g,h)})},wt.prototype.bindEvents=function(){var xt=this.get("group");xt.on("handler-min:mousedown",this.onMouseDown("minHandler")),xt.on("handler-min:touchstart",this.onMouseDown("minHandler")),xt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),xt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var ft=xt.findById(this.getElementId("foreground"));ft.on("mousedown",this.onMouseDown("foreground")),ft.on("touchstart",this.onMouseDown("foreground"))},wt.prototype.adjustOffsetRange=function(xt){var ft=this.cfg,Ft=ft.start,kt=ft.end;switch(this.currentTarget){case"minHandler":{var Ot=0-Ft,X=1-Ft;return Math.min(X,Math.max(Ot,xt))}case"maxHandler":{var Ot=0-kt,X=1-kt;return Math.min(X,Math.max(Ot,xt))}case"foreground":{var Ot=0-Ft,X=1-kt;return Math.min(X,Math.max(Ot,xt))}}},wt.prototype.updateStartEnd=function(xt){var ft=this.cfg,Ft=ft.start,kt=ft.end;switch(this.currentTarget){case"minHandler":Ft+=xt;break;case"maxHandler":kt+=xt;break;case"foreground":Ft+=xt,kt+=xt;break}this.set("start",Ft),this.set("end",kt)},wt.prototype._dodgeText=function(xt,ft,Ft){var kt,Ot,X=this.cfg,ct=X.handlerStyle,dt=X.width,pt=2,Mt=Object(a.get)(ct,"width",p),tt=xt[0],lt=xt[1],it=!1;tt>lt&&(kt=[lt,tt],tt=kt[0],lt=kt[1],Ot=[Ft,ft],ft=Ot[0],Ft=Ot[1],it=!0);var U=ft.getBBox(),P=Ft.getBBox(),H=U.width>tt-pt?{x:tt+Mt/2+pt,textAlign:"left"}:{x:tt-Mt/2-pt,textAlign:"right"},k=P.width>dt-lt-pt?{x:lt-Mt/2-pt,textAlign:"right"}:{x:lt+Mt/2+pt,textAlign:"left"};return it?[k,H]:[H,k]},wt.prototype.draw=function(){var xt=this.get("container"),ft=xt&&xt.get("canvas");ft&&ft.draw()},wt.prototype.getContainerDOM=function(){var xt=this.get("container"),ft=xt&&xt.get("canvas");return ft&&ft.get("container")},wt}(A.a),ht=vt},fIp6:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at}),z.d(_t,"b",function(){return b}),z.d(_t,"c",function(){return M}),z.d(_t,"d",function(){return y}),z.d(_t,"e",function(){return s});function at(d,E,O){if(d){if(typeof d.addEventListener=="function")return d.addEventListener(E,O,!1),{remove:function(){d.removeEventListener(E,O,!1)}};if(typeof d.attachEvent=="function")return d.attachEvent("on"+E,O),{remove:function(){d.detachEvent("on"+E,O)}}}}var a,A,e,i;function v(){a=document.createElement("table"),A=document.createElement("tr"),e=/^\s*<(\w+|!)[^>]*>/,i={tr:document.createElement("tbody"),tbody:a,thead:a,tfoot:a,td:A,th:A,"*":document.createElement("div")}}function b(d){a||v();var E=e.test(d)&&RegExp.$1;(!E||!(E in i))&&(E="*");var O=i[E];d=d.replace(/(^\s*)|(\s*$)/g,""),O.innerHTML=""+d;var C=O.childNodes[0];return O.removeChild(C),C}function S(d,E,O){var C;try{C=window.getComputedStyle?window.getComputedStyle(d,null)[E]:d.style[E]}catch(p){}finally{C=C===void 0?O:C}return C}function f(d,E){var O=S(d,"height",E);return O==="auto"&&(O=d.offsetHeight),parseFloat(O)}function M(d,E){var O=f(d,E),C=parseFloat(S(d,"borderTopWidth"))||0,p=parseFloat(S(d,"paddingTop"))||0,x=parseFloat(S(d,"paddingBottom"))||0,T=parseFloat(S(d,"borderBottomWidth"))||0,N=parseFloat(S(d,"marginTop"))||0,Y=parseFloat(S(d,"marginBottom"))||0;return O+C+T+p+x+N+Y}function I(d,E){var O=S(d,"width",E);return O==="auto"&&(O=d.offsetWidth),parseFloat(O)}function y(d,E){var O=I(d,E),C=parseFloat(S(d,"borderLeftWidth"))||0,p=parseFloat(S(d,"paddingLeft"))||0,x=parseFloat(S(d,"paddingRight"))||0,T=parseFloat(S(d,"borderRightWidth"))||0,N=parseFloat(S(d,"marginRight"))||0,Y=parseFloat(S(d,"marginLeft"))||0;return O+C+T+p+x+Y+N}function n(){return window.devicePixelRatio?window.devicePixelRatio:2}function s(d,E){if(d)for(var O in E)E.hasOwnProperty(O)&&(d.style[O]=E[O]);return d}},fP0w:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Line",function(){return pt}),z.d(_t,"Circle",function(){return tt}),z.d(_t,"Base",function(){return n});var at={};z.r(at),z.d(at,"getDefault",function(){return E}),z.d(at,"ellipsisHead",function(){return O}),z.d(at,"ellipsisTail",function(){return C}),z.d(at,"ellipsisMiddle",function(){return p});var a={};z.r(a),z.d(a,"getDefault",function(){return vt}),z.d(a,"reserveFirst",function(){return ht}),z.d(a,"reserveLast",function(){return St}),z.d(a,"reserveBoth",function(){return wt}),z.d(a,"equidistance",function(){return xt}),z.d(a,"equidistanceWithReverseBoth",function(){return ft});var A={};z.r(A),z.d(A,"getDefault",function(){return Ot}),z.d(A,"fixedAngle",function(){return X}),z.d(A,"unfixedAngle",function(){return ct});var e={};z.r(e),z.d(e,"autoHide",function(){return a}),z.d(e,"autoRotate",function(){return A}),z.d(e,"autoEllipsis",function(){return at});var i=z("mrSG"),v=z("6JdA"),b=z("iTfj"),S=z("MeYt"),f=z("jqgP"),M=z("l3hu"),I=z("L16w"),y=function(lt){Object(i.b)(it,lt);function it(){return lt!==null&&lt.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var U=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},U),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:I.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:I.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:I.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:I.a.textColor,fontFamily:I.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:I.a.textColor,textBaseline:"middle",fontFamily:I.a.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:I.a.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},it.prototype.renderInner=function(U){this.get("line")&&this.drawLine(U),this.drawTicks(U),this.get("title")&&this.drawTitle(U)},it.prototype.isList=function(){return!0},it.prototype.getItems=function(){return this.get("ticks")},it.prototype.setItems=function(U){this.update({ticks:U})},it.prototype.updateItem=function(U,P){Object(b.mix)(U,P),this.clear(),this.render()},it.prototype.clearItems=function(){var U=this.getElementByLocalId("label-group");U&&U.clear()},it.prototype.setItemState=function(U,P,H){U[P]=H,this.updateTickStates(U)},it.prototype.hasState=function(U,P){return!!U[P]},it.prototype.getItemStates=function(U){var P=this.get("tickStates"),H=[];return Object(b.each)(P,function(k,h){U[h]&&H.push(h)}),H},it.prototype.clearItemsState=function(U){var P=this,H=this.getItemsByState(U);Object(b.each)(H,function(k){P.setItemState(k,U,!1)})},it.prototype.getItemsByState=function(U){var P=this,H=this.getItems();return Object(b.filter)(H,function(k){return P.hasState(k,U)})},it.prototype.getSidePoint=function(U,P){var H=this,k=H.getSideVector(P,U);return{x:U.x+k[0],y:U.y+k[1]}},it.prototype.getTextAnchor=function(U){var P;return Object(b.isNumberEqual)(U[0],0)?P="center":U[0]>0?P="start":U[0]<0&&(P="end"),P},it.prototype.getTextBaseline=function(U){var P;return Object(b.isNumberEqual)(U[1],0)?P="middle":U[1]>0?P="top":U[1]<0&&(P="bottom"),P},it.prototype.processOverlap=function(U){},it.prototype.drawLine=function(U){var P=this.getLinePath(),H=this.get("line");this.addShape(U,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Object(b.mix)({path:P},H.style)})},it.prototype.getTickLineItems=function(U){var P=this,H=[],k=this.get("tickLine"),h=k.alignTick,g=k.length,G=1,V=U.length;return V>=2&&(G=U[1].value-U[0].value),Object(b.each)(U,function($){var rt=$.point;h||(rt=P.getTickPoint($.value-G/2));var ot=P.getSidePoint(rt,g);H.push({startPoint:rt,tickValue:$.value,endPoint:ot,tickId:$.id,id:"tickline-"+$.id})}),H},it.prototype.getSubTickLineItems=function(U){var P=[],H=this.get("subTickLine"),k=H.count,h=U.length;if(h>=2)for(var g=0;g<h-1;g++)for(var G=U[g],V=U[g+1],$=0;$<k;$++){var rt=($+1)/(k+1),ot=(1-rt)*G.tickValue+rt*V.tickValue,At=this.getTickPoint(ot),gt=this.getSidePoint(At,H.length);P.push({startPoint:At,endPoint:gt,tickValue:ot,id:"sub-"+G.id+"-"+$})}return P},it.prototype.getTickLineAttrs=function(U,P,H,k){var h=this.get(P).style,g={points:[U.startPoint,U.endPoint]},G=Object(b.get)(this.get("theme"),["tickLine","style"],{});h=Object(b.isFunction)(h)?Object(b.mix)({},G,h(g,H,k)):h;var V=U.startPoint,$=U.endPoint;return Object(i.a)({x1:V.x,y1:V.y,x2:$.x,y2:$.y},h)},it.prototype.drawTick=function(U,P,H,k,h){this.addShape(P,{type:"line",id:this.getElementId(U.id),name:"axis-"+H,attrs:this.getTickLineAttrs(U,H,k,h)})},it.prototype.drawTickLines=function(U){var P=this,H=this.get("ticks"),k=this.get("subTickLine"),h=this.getTickLineItems(H),g=this.addGroup(U,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),G=this.get("tickLine");if(Object(b.each)(h,function($,rt){if(G.displayWithLabel){var ot=P.getElementId("label-"+$.tickId);U.findById(ot)&&P.drawTick($,g,"tickLine",rt,h)}else P.drawTick($,g,"tickLine",rt,h)}),k){var V=this.getSubTickLineItems(h);Object(b.each)(V,function($,rt){P.drawTick($,g,"subTickLine",rt,V)})}},it.prototype.processTicks=function(){var U=this,P=this.get("ticks");Object(b.each)(P,function(H){H.point=U.getTickPoint(H.value),Object(b.isNil)(H.id)&&(H.id=H.name)})},it.prototype.drawTicks=function(U){var P=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(U),this.get("tickLine")&&this.drawTickLines(U);var H=this.get("ticks");Object(b.each)(H,function(k){P.applyTickStates(k,U)})},it.prototype.optimizeTicks=function(){var U=this.get("optimize"),P=this.get("ticks");if(U&&U.enable&&U.threshold>0){var H=Object(b.size)(P);if(H>U.threshold){var k=Math.ceil(H/U.threshold),h=P.filter(function(g,G){return G%k==0});this.set("ticks",h),this.set("originalTicks",P)}}},it.prototype.getLabelAttrs=function(U,P,H){var k=this.get("label"),h=k.offset,g=k.rotate,G=k.formatter,V=this.getSidePoint(U.point,h),$=this.getSideVector(h,V),rt=G?G(U.name,U,P):U.name,ot=k.style;ot=Object(b.isFunction)(ot)?Object(b.get)(this.get("theme"),["label","style"],{}):ot;var At=Object(b.mix)({x:V.x,y:V.y,text:rt,textAlign:this.getTextAnchor($),textBaseline:this.getTextBaseline($)},ot);return g&&(At.matrix=Object(f.e)(V,g)),At},it.prototype.drawLabels=function(U){var P=this,H=this.get("ticks"),k=this.addGroup(U,{name:"axis-label-group",id:this.getElementId("label-group")});Object(b.each)(H,function(ot,At){P.addShape(k,{type:"text",name:"axis-label",id:P.getElementId("label-"+ot.id),attrs:P.getLabelAttrs(ot,At,H),delegateObject:{tick:ot,item:ot,index:At}})}),this.processOverlap(k);var h=k.getChildren(),g=Object(b.get)(this.get("theme"),["label","style"],{}),G=this.get("label"),V=G.style,$=G.formatter;if(Object(b.isFunction)(V)){var rt=h.map(function(ot){return Object(b.get)(ot.get("delegateObject"),"tick")});Object(b.each)(h,function(ot,At){var gt=ot.get("delegateObject").tick,mt=$?$(gt.name,gt,At):gt.name,bt=Object(b.mix)({},g,V(mt,At,rt));ot.attr(bt)})}},it.prototype.getTitleAttrs=function(){var U=this.get("title"),P=U.style,H=U.position,k=U.offset,h=U.spacing,g=h===void 0?0:h,G=U.autoRotate,V=P.fontSize,$=.5;H==="start"?$=0:H==="end"&&($=1);var rt=this.getTickPoint($),ot=this.getSidePoint(rt,k||g+V/2),At=Object(b.mix)({x:ot.x,y:ot.y,text:U.text},P),gt=U.rotate,mt=gt;if(Object(b.isNil)(gt)&&G){var bt=this.getAxisVector(rt),jt=[1,0];mt=v.a.angleTo(bt,jt,!0)}if(mt){var Dt=Object(f.e)(ot,mt);At.matrix=Dt}return At},it.prototype.drawTitle=function(U){this.addShape(U,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},it.prototype.applyTickStates=function(U,P){var H=this.getItemStates(U);if(H.length){var k=this.get("tickStates"),h=this.getElementId("label-"+U.id),g=P.findById(h);if(g){var G=Object(M.a)(U,"label",k);G&&g.attr(G)}var V=this.getElementId("tickline-"+U.id),$=P.findById(V);if($){var rt=Object(M.a)(U,"tickLine",k);rt&&$.attr(rt)}}},it.prototype.updateTickStates=function(U){var P=this.getItemStates(U),H=this.get("tickStates"),k=this.get("label"),h=this.getElementByLocalId("label-"+U.id),g=this.get("tickLine"),G=this.getElementByLocalId("tickline-"+U.id);if(P.length){if(h){var V=Object(M.a)(U,"label",H);V&&h.attr(V)}if(G){var $=Object(M.a)(U,"tickLine",H);$&&G.attr($)}}else h&&h.attr(k.style),G&&G.attr(g.style)},it}(S.a),n=y,s=z("BgvD");function d(lt,it,U,P){var H=it.getChildren(),k=!1;return Object(b.each)(H,function(h){var g=Object(s.a)(lt,h,U,P);k=k||g}),k}function E(){return C}function O(lt,it,U){return d(lt,it,U,"head")}function C(lt,it,U){return d(lt,it,U,"tail")}function p(lt,it,U){return d(lt,it,U,"middle")}var x=z("5UbV");function T(lt){var it=lt.attr("matrix");return it&&it[0]!==1}function N(lt){var it=T(lt)?Object(f.d)(lt.attr("matrix")):0;return it%360}function Y(lt,it,U,P){var H=!1,k=N(it),h=Math.abs(lt?U.attr("y")-it.attr("y"):U.attr("x")-it.attr("x")),g=(lt?U.attr("y")>it.attr("y"):U.attr("x")>it.attr("x"))?it.getBBox():U.getBBox();if(lt){var G=Math.abs(Math.cos(k));Object(x.i)(G,0,Math.PI/180)?H=g.width+P>h:H=g.height/G+P>h}else{var G=Math.abs(Math.sin(k));Object(x.i)(G,0,Math.PI/180)?H=g.width+P>h:H=g.height/G+P>h}return H}function q(lt,it,U,P){var H=(P==null?void 0:P.minGap)||0,k=it.getChildren().slice().filter(function(gt){return gt.get("visible")});if(!k.length)return!1;var h=!1;U&&k.reverse();for(var g=k.length,G=k[0],V=G,$=1;$<g;$++){var rt=k[$],ot=rt.getBBox(),At=Y(lt,V,rt,H);At?(rt.hide(),h=!0):V=rt}return h}function nt(lt,it,U){var P=(U==null?void 0:U.minGap)||0,H=it.getChildren().slice();if(H.length<2)return!1;var k=!1,h=H[0],g=h.getBBox(),G=H[1],V=H.length,$=N(h),rt=Math.abs(lt?G.attr("y")-h.attr("y"):G.attr("x")-h.attr("x")),ot=0;if(lt){var At=Math.abs(Math.cos($));if(Object(x.i)(At,0,Math.PI/180)){var gt=Object(s.b)(H);ot=(gt+P)/rt}else ot=(g.height/At+P)/rt}else{var At=Math.abs(Math.sin($));if(Object(x.i)(At,0,Math.PI/180)){var gt=Object(s.b)(H);ot=(gt+P)/rt}else ot=(g.height/At+P)/rt}if(ot>1){ot=Math.ceil(ot);for(var mt=0;mt<V;mt++)mt%ot!=0&&(H[mt].hide(),k=!0)}return k}function vt(){return xt}function ht(lt,it,U,P){return q(lt,it,!1,P)}function St(lt,it,U,P){return q(lt,it,!0,P)}function wt(lt,it,U,P){var H=(P==null?void 0:P.minGap)||0,k=it.getChildren().slice();if(k.length<=2)return!1;for(var h=!1,g=k.length,G=k[0],V=k[g-1],$=G,rt=1;rt<g-1;rt++){var ot=k[rt],At=ot.getBBox(),gt=Y(lt,$,ot,H);gt?(ot.hide(),h=!0):$=ot}var mt=Y(lt,$,V,H);return mt&&($.hide(),h=!0),h}function xt(lt,it,U,P){var H=nt(lt,it,P);return q(lt,it,!1)&&(H=!0),H}function ft(lt,it,U,P){var H=it.getChildren().slice(),k=nt(lt,it,P);if(H.length>2){var h=H[0],g=H[H.length-1];h.get("visible")||(h.show(),q(lt,it,!1,P)&&(k=!0)),g.get("visible")||(g.show(),q(lt,it,!0,P)&&(k=!0))}return k}function Ft(lt,it){Object(b.each)(lt,function(U){var P=U.attr("x"),H=U.attr("y"),k=Object(f.e)({x:P,y:H},it);U.attr("matrix",k)})}function kt(lt,it,U,P){var H=it.getChildren();if(!H.length||!lt&&H.length<2)return!1;var k=Object(s.b)(H),h=!1;if(lt)h=!!U&&k>U;else{var g=Math.abs(H[1].attr("x")-H[0].attr("x"));h=k>g}if(h){var G=P(U,k);Ft(H,G)}return h}function Ot(){return X}function X(lt,it,U,P){return kt(lt,it,U,function(){return Object(b.isNumber)(P)?P:lt?I.a.verticalAxisRotate:I.a.horizontalAxisRotate})}function ct(lt,it,U){return kt(lt,it,U,function(P,H){if(!P)return lt?I.a.verticalAxisRotate:I.a.horizontalAxisRotate;if(lt)return-Math.acos(P/H);var k=0;return P>H?k=Math.PI/4:(k=Math.asin(P/H),k>Math.PI/4&&(k=Math.PI/4)),k})}var dt=function(lt){Object(i.b)(it,lt);function it(){return lt!==null&&lt.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var U=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},U),{type:"line",locationType:"region",start:null,end:null})},it.prototype.getLinePath=function(){var U=this.get("start"),P=this.get("end"),H=[];return H.push(["M",U.x,U.y]),H.push(["L",P.x,P.y]),H},it.prototype.getInnerLayoutBBox=function(){var U=this.get("start"),P=this.get("end"),H=lt.prototype.getInnerLayoutBBox.call(this),k=Math.min(U.x,P.x,H.x),h=Math.min(U.y,P.y,H.y),g=Math.max(U.x,P.x,H.maxX),G=Math.max(U.y,P.y,H.maxY);return{x:k,y:h,minX:k,minY:h,maxX:g,maxY:G,width:g-k,height:G-h}},it.prototype.isVertical=function(){var U=this.get("start"),P=this.get("end");return Object(b.isNumberEqual)(U.x,P.x)},it.prototype.isHorizontal=function(){var U=this.get("start"),P=this.get("end");return Object(b.isNumberEqual)(U.y,P.y)},it.prototype.getTickPoint=function(U){var P=this,H=P.get("start"),k=P.get("end"),h=k.x-H.x,g=k.y-H.y;return{x:H.x+h*U,y:H.y+g*U}},it.prototype.getSideVector=function(U){var P=this.getAxisVector(),H=v.c.normalize([0,0],P),k=this.get("verticalFactor"),h=[H[1],H[0]*-1];return v.c.scale([0,0],h,U*k)},it.prototype.getAxisVector=function(){var U=this.get("start"),P=this.get("end");return[P.x-U.x,P.y-U.y]},it.prototype.processOverlap=function(U){var P=this,H=this.isVertical(),k=this.isHorizontal();if(!(!H&&!k)){var h=this.get("label"),g=this.get("title"),G=this.get("verticalLimitLength"),V=h.offset,$=G,rt=0,ot=0;g&&(rt=g.style.fontSize,ot=g.spacing),$&&($=$-V-ot-rt);var At=this.get("overlapOrder");if(Object(b.each)(At,function(bt){h[bt]&&P.canProcessOverlap(bt)&&P.autoProcessOverlap(bt,h[bt],U,$)}),g&&Object(b.isNil)(g.offset)){var gt=U.getCanvasBBox(),mt=H?gt.width:gt.height;g.offset=V+mt+ot+rt/2}}},it.prototype.canProcessOverlap=function(U){var P=this.get("label");return U==="autoRotate"?Object(b.isNil)(P.rotate):!0},it.prototype.autoProcessOverlap=function(U,P,H,k){var h=this,g=this.isVertical(),G=!1,V=e[U];if(P===!0){var $=this.get("label");G=V.getDefault()(g,H,k)}else if(Object(b.isFunction)(P))G=P(g,H,k);else if(Object(b.isObject)(P)){var rt=P;V[rt.type]&&(G=V[rt.type](g,H,k,rt.cfg))}else V[P]&&(G=V[P](g,H,k));if(U==="autoRotate"){if(G){var ot=H.getChildren(),At=this.get("verticalFactor");Object(b.each)(ot,function(mt){var bt=mt.attr("textAlign");if(bt==="center"){var jt=At>0?"end":"start";mt.attr("textAlign",jt)}})}}else if(U==="autoHide"){var gt=H.getChildren().slice(0);Object(b.each)(gt,function(mt){mt.get("visible")||(h.get("isRegister")&&h.unregisterElement(mt),mt.remove())})}},it}(n),pt=dt,Mt=function(lt){Object(i.b)(it,lt);function it(){return lt!==null&&lt.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var U=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},U),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},it.prototype.getLinePath=function(){var U=this.get("center"),P=U.x,H=U.y,k=this.get("radius"),h=k,g=this.get("startAngle"),G=this.get("endAngle"),V=[];if(Math.abs(G-g)===Math.PI*2)V=[["M",P,H-h],["A",k,h,0,1,1,P,H+h],["A",k,h,0,1,1,P,H-h],["Z"]];else{var $=this.getCirclePoint(g),rt=this.getCirclePoint(G),ot=Math.abs(G-g)>Math.PI?1:0,At=g>G?0:1;V=[["M",P,H],["L",$.x,$.y],["A",k,h,0,ot,At,rt.x,rt.y],["L",P,H]]}return V},it.prototype.getTickPoint=function(U){var P=this.get("startAngle"),H=this.get("endAngle"),k=P+(H-P)*U;return this.getCirclePoint(k)},it.prototype.getSideVector=function(U,P){var H=this.get("center"),k=[P.x-H.x,P.y-H.y],h=this.get("verticalFactor"),g=v.c.length(k);return v.c.scale(k,k,h*U/g),k},it.prototype.getAxisVector=function(U){var P=this.get("center"),H=[U.x-P.x,U.y-P.y];return[H[1],-1*H[0]]},it.prototype.getCirclePoint=function(U,P){var H=this.get("center");return P=P||this.get("radius"),{x:H.x+Math.cos(U)*P,y:H.y+Math.sin(U)*P}},it}(n),tt=Mt},"h4/5":function(Un,_t){},hJqF:function(Un,_t,z){"use strict";z.d(_t,"d",function(){return S}),z.d(_t,"b",function(){return f}),z.d(_t,"c",function(){return M}),z.d(_t,"a",function(){return n});var at=z("mrSG"),a=z("iTfj"),A=z("w02o"),e=z("YuPD"),i=z("tKoa"),v=z("DyAw");function b(s){var d=s.chart,E=s.options,O=E.data,C=E.color,p=E.lineStyle,x=E.lineShape,T=E.point,N=E.seriesField;d.data(O);var Y=Object(e.b)({},s,{options:{shapeField:N,line:{color:C,style:p,shape:x},point:T&&Object(at.a)({color:C,shape:"circle"},T),label:void 0}}),q=Object(e.b)({},Y,{options:{tooltip:!1}});return Object(i.d)(Y),Object(i.e)(q),s}function S(s){var d,E,O=s.options,C=O.xAxis,p=O.yAxis,x=O.xField,T=O.yField,N=O.data;return Object(e.e)(Object(A.f)((d={},d[x]=C,d[T]=p,d),(E={},E[x]={type:"cat"},E[T]=Object(v.a)(N,T),E)))(s)}function f(s){var d=s.chart,E=s.options,O=E.xAxis,C=E.yAxis,p=E.xField,x=E.yField;return O===!1?d.axis(p,!1):d.axis(p,O),C===!1?d.axis(x,!1):d.axis(x,C),s}function M(s){var d=s.chart,E=s.options,O=E.legend,C=E.seriesField;return O&&C?d.legend(C,O):O===!1&&d.legend(!1),s}function I(s){var d=s.chart,E=s.options,O=E.label,C=E.yField,p=Object(e.c)(d,"line");if(!O)p.label(!1);else{var x=O.callback,T=Object(at.c)(O,["callback"]);p.label({fields:[C],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(e.o)(T))})}return s}function y(s){var d=s.chart,E=s.options,O=E.isStack;return O&&Object(a.each)(d.geometries,function(C){C.adjust("stack")}),s}function n(s){return Object(e.e)(b,S,y,A.j,f,M,A.k,I,A.h,A.c,A.a,Object(A.b)(),A.e)(s)}},hag6:function(Un,_t,z){"use strict";var at=z("Ihc8");Object(at.registerInteraction)("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]})},iTfj:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"contains",function(){return e}),z.d(_t,"includes",function(){return e}),z.d(_t,"difference",function(){return S}),z.d(_t,"find",function(){return St}),z.d(_t,"findIndex",function(){return xt}),z.d(_t,"firstValue",function(){return Ft}),z.d(_t,"flatten",function(){return Ot}),z.d(_t,"flattenDeep",function(){return ct}),z.d(_t,"getRange",function(){return pt}),z.d(_t,"pull",function(){return U}),z.d(_t,"pullAt",function(){return k}),z.d(_t,"reduce",function(){return g}),z.d(_t,"remove",function(){return V}),z.d(_t,"sortBy",function(){return ot}),z.d(_t,"union",function(){return bt}),z.d(_t,"uniq",function(){return gt}),z.d(_t,"valuesOfKey",function(){return jt}),z.d(_t,"head",function(){return Dt}),z.d(_t,"last",function(){return Ut}),z.d(_t,"startsWith",function(){return Vt}),z.d(_t,"endsWith",function(){return re}),z.d(_t,"filter",function(){return v}),z.d(_t,"every",function(){return ye}),z.d(_t,"some",function(){return Ne}),z.d(_t,"group",function(){return Rn}),z.d(_t,"groupBy",function(){return hn}),z.d(_t,"groupToMap",function(){return Tn}),z.d(_t,"getWrapBehavior",function(){return Cn}),z.d(_t,"wrapBehavior",function(){return Kn}),z.d(_t,"number2color",function(){return nr}),z.d(_t,"parseRadius",function(){return Sr}),z.d(_t,"clamp",function(){return ti}),z.d(_t,"fixedBase",function(){return Fi}),z.d(_t,"isDecimal",function(){return _i}),z.d(_t,"isEven",function(){return Vi}),z.d(_t,"isInteger",function(){return jr}),z.d(_t,"isNegative",function(){return pr}),z.d(_t,"isNumberEqual",function(){return Br}),z.d(_t,"isOdd",function(){return Xr}),z.d(_t,"isPositive",function(){return ni}),z.d(_t,"maxBy",function(){return fi}),z.d(_t,"minBy",function(){return $r}),z.d(_t,"mod",function(){return Qr}),z.d(_t,"toDegree",function(){return bi}),z.d(_t,"toInteger",function(){return zi}),z.d(_t,"toRadian",function(){return Wi}),z.d(_t,"forIn",function(){return Zi}),z.d(_t,"has",function(){return Pi}),z.d(_t,"hasKey",function(){return no}),z.d(_t,"hasValue",function(){return uo}),z.d(_t,"keys",function(){return x}),z.d(_t,"isMatch",function(){return N}),z.d(_t,"values",function(){return ao}),z.d(_t,"lowerCase",function(){return Kt}),z.d(_t,"lowerFirst",function(){return Oe}),z.d(_t,"substitute",function(){return On}),z.d(_t,"upperCase",function(){return Xn}),z.d(_t,"upperFirst",function(){return rn}),z.d(_t,"getType",function(){return vr}),z.d(_t,"isArguments",function(){return rr}),z.d(_t,"isArray",function(){return d}),z.d(_t,"isArrayLike",function(){return a}),z.d(_t,"isBoolean",function(){return Ar}),z.d(_t,"isDate",function(){return xr}),z.d(_t,"isError",function(){return Ir}),z.d(_t,"isFunction",function(){return y}),z.d(_t,"isFinite",function(){return Lr}),z.d(_t,"isNil",function(){return s}),z.d(_t,"isNull",function(){return Dr}),z.d(_t,"isNumber",function(){return si}),z.d(_t,"isObject",function(){return E}),z.d(_t,"isObjectLike",function(){return q}),z.d(_t,"isPlainObject",function(){return vt}),z.d(_t,"isPrototype",function(){return ii}),z.d(_t,"isRegExp",function(){return Ui}),z.d(_t,"isString",function(){return $}),z.d(_t,"isType",function(){return I}),z.d(_t,"isUndefined",function(){return Bi}),z.d(_t,"isElement",function(){return ve}),z.d(_t,"requestAnimationFrame",function(){return F}),z.d(_t,"clearAnimationFrame",function(){return B}),z.d(_t,"augment",function(){return Jt}),z.d(_t,"clone",function(){return se}),z.d(_t,"debounce",function(){return Ee}),z.d(_t,"memoize",function(){return un}),z.d(_t,"deepMix",function(){return Se}),z.d(_t,"each",function(){return C}),z.d(_t,"extend",function(){return ue}),z.d(_t,"indexOf",function(){return Dn}),z.d(_t,"isEmpty",function(){return Ze}),z.d(_t,"isEqual",function(){return R}),z.d(_t,"isEqualWith",function(){return yt}),z.d(_t,"map",function(){return me}),z.d(_t,"mapValues",function(){return de}),z.d(_t,"mix",function(){return ut}),z.d(_t,"assign",function(){return ut}),z.d(_t,"get",function(){return he}),z.d(_t,"set",function(){return ce}),z.d(_t,"pick",function(){return ze}),z.d(_t,"throttle",function(){return Ve}),z.d(_t,"toArray",function(){return ke}),z.d(_t,"toString",function(){return xo}),z.d(_t,"uniqueId",function(){return De}),z.d(_t,"noop",function(){return cn}),z.d(_t,"identity",function(){return fn}),z.d(_t,"size",function(){return nn}),z.d(_t,"Cache",function(){return Sn});var at=function(le){return le!==null&&typeof le!="function"&&isFinite(le.length)},a=at,A=function(le,Le){return a(le)?le.indexOf(Le)>-1:!1},e=A,i=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Le(sn,en)&&Be.push(sn)}return Be},v=i,b=function(le,Le){return Le===void 0&&(Le=[]),v(le,function(Be){return!e(Le,Be)})},S=b,f={}.toString,M=function(le,Le){return f.call(le)==="[object "+Le+"]"},I=M,y=function(Pe){return I(Pe,"Function")},n=function(le){return le==null},s=n,d=function(Pe){return Array.isArray?Array.isArray(Pe):I(Pe,"Array")},E=function(Pe){var le=typeof Pe;return Pe!==null&&le==="object"||le==="function"};function O(Pe,le){if(!!Pe){var Le;if(d(Pe))for(var Be=0,en=Pe.length;Be<en&&(Le=le(Pe[Be],Be),Le!==!1);Be++);else if(E(Pe)){for(var sn in Pe)if(Pe.hasOwnProperty(sn)&&(Le=le(Pe[sn],sn),Le===!1))break}}}var C=O,p=Object.keys?function(Pe){return Object.keys(Pe)}:function(Pe){var le=[];return C(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Be)}),le},x=p;function T(Pe,le){var Le=x(le),Be=Le.length;if(s(Pe))return!Be;for(var en=0;en<Be;en+=1){var sn=Le[en];if(le[sn]!==Pe[sn]||!(sn in Pe))return!1}return!0}var N=T,Y=function(le){return typeof le=="object"&&le!==null},q=Y,nt=function(le){if(!q(le)||!I(le,"Object"))return!1;if(Object.getPrototypeOf(le)===null)return!0;for(var Le=le;Object.getPrototypeOf(Le)!==null;)Le=Object.getPrototypeOf(Le);return Object.getPrototypeOf(le)===Le},vt=nt;function ht(Pe,le){if(!d(Pe))return null;var Le;if(y(le)&&(Le=le),vt(le)&&(Le=function(sn){return N(sn,le)}),Le){for(var Be=0;Be<Pe.length;Be+=1)if(Le(Pe[Be]))return Pe[Be]}return null}var St=ht;function wt(Pe,le,Le){Le===void 0&&(Le=0);for(var Be=Le;Be<Pe.length;Be++)if(le(Pe[Be],Be))return Be;return-1}var xt=wt,ft=function(le,Le){for(var Be=null,en=0;en<le.length;en++){var sn=le[en],Ue=sn[Le];if(!s(Ue)){d(Ue)?Be=Ue[0]:Be=Ue;break}}return Be},Ft=ft,kt=function(le){if(!d(le))return[];for(var Le=[],Be=0;Be<le.length;Be++)Le=Le.concat(le[Be]);return Le},Ot=kt,X=function Pe(le,Le){if(Le===void 0&&(Le=[]),!d(le))Le.push(le);else for(var Be=0;Be<le.length;Be+=1)Pe(le[Be],Le);return Le},ct=X,dt=function(le){var Le=le.filter(function(ln){return!isNaN(ln)});if(!Le.length)return{min:0,max:0};if(d(le[0])){for(var Be=[],en=0;en<le.length;en++)Be=Be.concat(le[en]);Le=Be}var sn=Math.max.apply(null,Le),Ue=Math.min.apply(null,Le);return{min:Ue,max:sn}},pt=dt,Mt=Array.prototype,tt=Mt.splice,lt=Mt.indexOf,it=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en++)for(var sn=Le[en],Ue=-1;(Ue=lt.call(le,sn))>-1;)tt.call(le,Ue,1);return le},U=it,P=Array.prototype.splice,H=function(le,Le){if(!a(le))return[];for(var Be=le?Le.length:0,en=Be-1;Be--;){var sn=void 0,Ue=Le[Be];(Be===en||Ue!==sn)&&(sn=Ue,P.call(le,Ue,1))}return le},k=H,h=function(le,Le,Be){if(!d(le)&&!vt(le))return le;var en=Be;return C(le,function(sn,Ue){en=Le(en,sn,Ue)}),en},g=h,G=function(le,Le){var Be=[];if(!a(le))return Be;for(var en=-1,sn=[],Ue=le.length;++en<Ue;){var ln=le[en];Le(ln,en,le)&&(Be.push(ln),sn.push(en))}return k(le,sn),Be},V=G,$=function(Pe){return I(Pe,"String")};function rt(Pe,le){var Le;if(y(le))Le=function(sn,Ue){return le(sn)-le(Ue)};else{var Be=[];$(le)?Be.push(le):d(le)&&(Be=le),Le=function(sn,Ue){for(var ln=0;ln<Be.length;ln+=1){var mn=Be[ln];if(sn[mn]>Ue[mn])return 1;if(sn[mn]<Ue[mn])return-1}return 0}}return Pe.sort(Le),Pe}var ot=rt,At=function(le){var Le=[];return C(le,function(Be){e(Le,Be)||Le.push(Be)}),Le},gt=At,mt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];return gt([].concat.apply([],le))},bt=mt,jt=function(Pe,le){for(var Le=[],Be={},en=0;en<Pe.length;en++){var sn=Pe[en],Ue=sn[le];if(!s(Ue)){d(Ue)||(Ue=[Ue]);for(var ln=0;ln<Ue.length;ln++){var mn=Ue[ln];Be[mn]||(Le.push(mn),Be[mn]=!0)}}}return Le};function Dt(Pe){if(a(Pe))return Pe[0]}function Ut(Pe){if(a(Pe)){var le=Pe;return le[le.length-1]}}function Ct(Pe,le){return d(Pe)||$(Pe)?Pe[0]===le:!1}var Vt=Ct;function Ht(Pe,le){return d(Pe)||$(Pe)?Pe[Pe.length-1]===le:!1}var re=Ht,pe=function(le,Le){for(var Be=0;Be<le.length;Be++)if(!Le(le[Be],Be))return!1;return!0},ye=pe,we=function(le,Le){for(var Be=0;Be<le.length;Be++)if(Le(le[Be],Be))return!0;return!1},Ne=we,Ke=Object.prototype.hasOwnProperty;function pn(Pe,le){if(!le||!d(Pe))return{};for(var Le={},Be=y(le)?le:function(ln){return ln[le]},en,sn=0;sn<Pe.length;sn++){var Ue=Pe[sn];en=Be(Ue),Ke.call(Le,en)?Le[en].push(Ue):Le[en]=[Ue]}return Le}var hn=pn,kn=function(le,Le){if(!Le)return{0:le};if(!y(Le)){var Be=d(Le)?Le:Le.replace(/\s+/g,"").split("*");Le=function(Ue){for(var ln="_",mn=0,Wn=Be.length;mn<Wn;mn++)ln+=Ue[Be[mn]]&&Ue[Be[mn]].toString();return ln}}var en=hn(le,Le);return en},Tn=kn,Rn=function(Pe,le){if(!le)return[Pe];var Le=Tn(Pe,le),Be=[];for(var en in Le)Be.push(Le[en]);return Be};function Mn(Pe,le){return Pe["_wrap_"+le]}var Cn=Mn;function _n(Pe,le){if(Pe["_wrap_"+le])return Pe["_wrap_"+le];var Le=function(en){Pe[le](en)};return Pe["_wrap_"+le]=Le,Le}var Kn=_n,tr={};function or(Pe){var le=tr[Pe];if(!le){for(var Le=Pe.toString(16),Be=Le.length;Be<6;Be++)Le="0"+Le;le="#"+Le,tr[Pe]=le}return le}var nr=or;function er(Pe){var le=0,Le=0,Be=0,en=0;return d(Pe)?Pe.length===1?le=Le=Be=en=Pe[0]:Pe.length===2?(le=Be=Pe[0],Le=en=Pe[1]):Pe.length===3?(le=Pe[0],Le=en=Pe[1],Be=Pe[2]):(le=Pe[0],Le=Pe[1],Be=Pe[2],en=Pe[3]):le=Le=Be=en=Pe,{r1:le,r2:Le,r3:Be,r4:en}}var Sr=er,Vr=function(le,Le,Be){return le<Le?Le:le>Be?Be:le},ti=Vr,hi=function(le,Le){var Be=Le.toString(),en=Be.indexOf(".");if(en===-1)return Math.round(le);var sn=Be.substr(en+1).length;return sn>20&&(sn=20),parseFloat(le.toFixed(sn))},Fi=hi,to=function(le){return I(le,"Number")},si=to,Ci=function(le){return si(le)&&le%1!=0},_i=Ci,Li=function(le){return si(le)&&le%2==0},Vi=Li,ro=Number.isInteger?Number.isInteger:function(Pe){return si(Pe)&&Pe%1==0},jr=ro,Ji=function(le){return si(le)&&le<0},pr=Ji,Yr=1e-5;function Br(Pe,le,Le){return Le===void 0&&(Le=Yr),Math.abs(Pe-le)<Le}var Nr=function(le){return si(le)&&le%2!=0},Xr=Nr,Kr=function(le){return si(le)&&le>0},ni=Kr,fi=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return C(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en>Be&&(Le=sn,Be=en)}),Le}},$r=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return C(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en<Be&&(Le=sn,Be=en)}),Le}},ci=function(le,Le){return(le%Le+Le)%Le},Qr=ci,gi=180/Math.PI,Oi=function(le){return gi*le},bi=Oi,zi=parseInt,Qi=Math.PI/180,io=function(le){return Qi*le},Wi=io,Zi=C,Pi=function(Pe,le){return Pe.hasOwnProperty(le)},no=Pi,Mo=Object.values?function(Pe){return Object.values(Pe)}:function(Pe){var le=[];return C(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Le)}),le},ao=Mo,uo=function(Pe,le){return e(ao(Pe),le)},xo=function(Pe){return s(Pe)?"":Pe.toString()},oe=function(le){return xo(le).toLowerCase()},Kt=oe,te=function(le){var Le=xo(le);return Le.charAt(0).toLowerCase()+Le.substring(1)},Oe=te;function Qe(Pe,le){return!Pe||!le?Pe:Pe.replace(/\\?\{([^{}]+)\}/g,function(Le,Be){return Le.charAt(0)==="\\"?Le.slice(1):le[Be]===void 0?"":le[Be]})}var On=Qe,Vn=function(le){return xo(le).toUpperCase()},Xn=Vn,$e=function(le){var Le=xo(le);return Le.charAt(0).toUpperCase()+Le.substring(1)},rn=$e,on={}.toString,$n=function(le){return on.call(le).replace(/^\[object /,"").replace(/]$/,"")},vr=$n,ar=function(le){return I(le,"Arguments")},rr=ar,Fr=function(le){return I(le,"Boolean")},Ar=Fr,wr=function(le){return I(le,"Date")},xr=wr,Er=function(le){return I(le,"Error")},Ir=Er,Lr=function(Pe){return si(Pe)&&isFinite(Pe)},Pr=function(le){return le===null},Dr=Pr,ri=Object.prototype,vi=function(le){var Le=le&&le.constructor,Be=typeof Le=="function"&&Le.prototype||ri;return le===Be},ii=vi,Si=function(le){return I(le,"RegExp")},Ui=Si,Yi=function(le){return le===void 0},Bi=Yi,Di=function(le){return le instanceof Element||le instanceof HTMLDocument},ve=Di;function F(Pe){var le=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Le){return setTimeout(Le,16)};return le(Pe)}function B(Pe){var le=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;le(Pe)}function Z(Pe,le){for(var Le in le)le.hasOwnProperty(Le)&&Le!=="constructor"&&le[Le]!==void 0&&(Pe[Le]=le[Le])}function ut(Pe,le,Le,Be){return le&&Z(Pe,le),Le&&Z(Pe,Le),Be&&Z(Pe,Be),Pe}var Bt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];for(var Be=le[0],en=1;en<le.length;en++){var sn=le[en];y(sn)&&(sn=sn.prototype),ut(Be.prototype,sn)}},Jt=Bt,ie=function Pe(le){if(typeof le!="object"||le===null)return le;var Le;if(d(le)){Le=[];for(var Be=0,en=le.length;Be<en;Be++)typeof le[Be]=="object"&&le[Be]!=null?Le[Be]=Pe(le[Be]):Le[Be]=le[Be]}else{Le={};for(var sn in le)typeof le[sn]=="object"&&le[sn]!=null?Le[sn]=Pe(le[sn]):Le[sn]=le[sn]}return Le},se=ie;function Te(Pe,le,Le){var Be;return function(){var en=this,sn=arguments,Ue=function(){Be=null,Le||Pe.apply(en,sn)},ln=Le&&!Be;clearTimeout(Be),Be=setTimeout(Ue,le),ln&&Pe.apply(en,sn)}}var Ee=Te,un=function(Pe,le){if(!y(Pe))throw new TypeError("Expected a function");var Le=function Be(){for(var en=[],sn=0;sn<arguments.length;sn++)en[sn]=arguments[sn];var Ue=le?le.apply(this,en):en[0],ln=Be.cache;if(ln.has(Ue))return ln.get(Ue);var mn=Pe.apply(this,en);return ln.set(Ue,mn),mn};return Le.cache=new Map,Le},xn=5;function zt(Pe,le,Le,Be){Le=Le||0,Be=Be||xn;for(var en in le)if(le.hasOwnProperty(en)){var sn=le[en];sn!==null&&vt(sn)?(vt(Pe[en])||(Pe[en]={}),Le<Be?zt(Pe[en],sn,Le+1,Be):Pe[en]=le[en]):d(sn)?(Pe[en]=[],Pe[en]=Pe[en].concat(sn)):sn!==void 0&&(Pe[en]=sn)}}var Yt=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en+=1)zt(le,Le[en]);return le},Se=Yt,Wt=function(le,Le,Be,en){y(Le)||(Be=Le,Le=le,le=function(){});var sn=Object.create?function(ln,mn){return Object.create(ln,{constructor:{value:mn}})}:function(ln,mn){function Wn(){}Wn.prototype=ln;var An=new Wn;return An.constructor=mn,An},Ue=sn(Le.prototype,le);return le.prototype=ut(Ue,le.prototype),le.superclass=sn(Le.prototype,Le),ut(Ue,Be),ut(le,en),le},ue=Wt,vn=function(le,Le){if(!a(le))return-1;var Be=Array.prototype.indexOf;if(Be)return Be.call(le,Le);for(var en=-1,sn=0;sn<le.length;sn++)if(le[sn]===Le){en=sn;break}return en},Dn=vn,zn=Object.prototype.hasOwnProperty;function Gn(Pe){if(s(Pe))return!0;if(a(Pe))return!Pe.length;var le=vr(Pe);if(le==="Map"||le==="Set")return!Pe.size;if(ii(Pe))return!Object.keys(Pe).length;for(var Le in Pe)if(zn.call(Pe,Le))return!1;return!0}var Ze=Gn,Ce=function Pe(le,Le){if(le===Le)return!0;if(!le||!Le||$(le)||$(Le))return!1;if(a(le)||a(Le)){if(le.length!==Le.length)return!1;for(var Be=!0,en=0;en<le.length&&(Be=Pe(le[en],Le[en]),!!Be);en++);return Be}if(q(le)||q(Le)){var sn=Object.keys(le),Ue=Object.keys(Le);if(sn.length!==Ue.length)return!1;for(var Be=!0,en=0;en<sn.length&&(Be=Pe(le[sn[en]],Le[sn[en]]),!!Be);en++);return Be}return!1},R=Ce,yt=function(Pe,le,Le){return y(Le)?!!Le(Pe,le):R(Pe,le)},$t=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Be.push(Le(sn,en))}return Be},me=$t,Zt=function(le){return le},de=function(Pe,le){le===void 0&&(le=Zt);var Le={};return E(Pe)&&!s(Pe)&&Object.keys(Pe).forEach(function(Be){Le[Be]=le(Pe[Be],Be)}),Le},he=function(Pe,le,Le){for(var Be=0,en=$(le)?le.split("."):le;Pe&&Be<en.length;)Pe=Pe[en[Be++]];return Pe===void 0||Be<en.length?Le:Pe},ce=function(Pe,le,Le){var Be=Pe,en=$(le)?le.split("."):le;return en.forEach(function(sn,Ue){Ue<en.length-1?(E(Be[sn])||(Be[sn]=si(en[Ue+1])?[]:{}),Be=Be[sn]):Be[sn]=Le}),Pe},Me=Object.prototype.hasOwnProperty,ze=function(Pe,le){if(Pe===null||!vt(Pe))return{};var Le={};return C(le,function(Be){Me.call(Pe,Be)&&(Le[Be]=Pe[Be])}),Le},Ve=function(Pe,le,Le){var Be,en,sn,Ue,ln=0;Le||(Le={});var mn=function(){ln=Le.leading===!1?0:Date.now(),Be=null,Ue=Pe.apply(en,sn),Be||(en=sn=null)},Wn=function(){var In=Date.now();!ln&&Le.leading===!1&&(ln=In);var lr=le-(In-ln);return en=this,sn=arguments,lr<=0||lr>le?(Be&&(clearTimeout(Be),Be=null),ln=In,Ue=Pe.apply(en,sn),Be||(en=sn=null)):!Be&&Le.trailing!==!1&&(Be=setTimeout(mn,lr)),Ue};return Wn.cancel=function(){clearTimeout(Be),ln=0,Be=en=sn=null},Wn},ke=function(Pe){return a(Pe)?Array.prototype.slice.call(Pe):[]},tn={},De=function(Pe){return Pe=Pe||"g",tn[Pe]?tn[Pe]+=1:tn[Pe]=1,Pe+tn[Pe]},cn=function(){},fn=function(Pe){return Pe};function nn(Pe){return s(Pe)?0:a(Pe)?Pe.length:Object.keys(Pe).length}var dn=function(){function Pe(){this.map={}}return Pe.prototype.has=function(le){return this.map[le]!==void 0},Pe.prototype.get=function(le,Le){var Be=this.map[le];return Be===void 0?Le:Be},Pe.prototype.set=function(le,Le){this.map[le]=Le},Pe.prototype.clear=function(){this.map={}},Pe.prototype.delete=function(le){delete this.map[le]},Pe.prototype.size=function(){return Object.keys(this.map).length},Pe}(),Sn=dn},j5sG:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.createSensor=void 0;var at=a(z("NohK"));function a(e){return e&&e.__esModule?e:{default:e}}var A=function(i){var v=void 0,b=[],S=(0,at.default)(function(){b.forEach(function(n){n(i)})}),f=function(){var s=new ResizeObserver(S);return s.observe(i),S(),s},M=function(s){v||(v=f()),b.indexOf(s)===-1&&b.push(s)},I=function(){v.disconnect(),b=[],v=void 0},y=function(s){var d=b.indexOf(s);d!==-1&&b.splice(d,1),b.length===0&&v&&I()};return{element:i,bind:M,destroy:I,unbind:y}};_t.createSensor=A},jqgP:function(Un,_t,z){"use strict";z.d(_t,"e",function(){return A}),z.d(_t,"f",function(){return e}),z.d(_t,"d",function(){return i}),z.d(_t,"a",function(){return b}),z.d(_t,"b",function(){return S}),z.d(_t,"c",function(){return f});var at=z("6JdA"),a=[1,0,0,0,1,0,0,0,1];function A(M,I,y){if(y===void 0&&(y=a),!I)return null;var n=at.a.transform(y,[["t",-M.x,-M.y],["r",I],["t",M.x,M.y]]);return n}function e(M,I){return!M.x&&!M.y?null:at.a.transform(I||a,[["t",M.x,M.y]])}function i(M){var I=[1,0,0],y=[0,0,0];return at.d.transformMat3(y,I,M),Math.atan2(y[1],y[0])}function v(M,I){var y=[0,0];return at.c.transformMat3(y,I,M),y}function b(M,I){var y=v(M,[I.minX,I.minY]),n=v(M,[I.maxX,I.minY]),s=v(M,[I.minX,I.maxY]),d=v(M,[I.maxX,I.maxY]),E=Math.min(y[0],n[0],s[0],d[0]),O=Math.max(y[0],n[0],s[0],d[0]),C=Math.min(y[1],n[1],s[1],d[1]),p=Math.max(y[1],n[1],s[1],d[1]);return{x:E,y:C,minX:E,minY:C,maxX:O,maxY:p,width:O-E,height:p-C}}function S(M,I,y,n){if(I){var s=A({x:y,y:n},I,M.getMatrix());M.setMatrix(s)}}function f(M,I,y){var n=e({x:I,y});M.attr("matrix",n)}},kwiP:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return v});var at=z("mrSG"),a=z("zJSt"),A=z("u9/z"),e=z("SZbK"),i=z("B3DA"),v=function(b){Object(at.b)(S,b);function S(){var f=b!==null&&b.apply(this,arguments)||this;return f.type="process",f}return S.prototype.getDefaultOptions=function(){return{percent:.2,color:e.a,animation:!0}},S.prototype.changeData=function(f){this.updateOption({percent:f}),this.chart.changeData(Object(i.a)(f))},S.prototype.getSchemaAdaptor=function(){return A.a},S}(a.a)},l3hu:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("iTfj");function a(A,e,i){var v=e+"Style",b=null;return Object(at.each)(i,function(S,f){A[f]&&S[v]&&(b||(b={}),Object(at.mix)(b,S[v]))}),b}},lFe4:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("iTfj");function a(A){return Object(at.map)(A||[],function(e,i){return{x:""+i,y:e}})}},lOPJ:function(Un,_t,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("0Xep"),e=z("Qci9"),i=function(v){Object(at.b)(b,v);function b(S){var f=v.call(this,S)||this;f.cacheMap={},f.adjustDataArray=[],f.mergeData=[];var M=S.marginRatio,I=M===void 0?A.d:M,y=S.dodgeRatio,n=y===void 0?A.b:y,s=S.dodgeBy,d=S.intervalPadding,E=S.dodgePadding,O=S.xDimensionLength,C=S.groupNum,p=S.defaultSize,x=S.maxColumnWidth,T=S.minColumnWidth,N=S.columnWidthRatio;return f.marginRatio=I,f.dodgeRatio=n,f.dodgeBy=s,f.intervalPadding=d,f.dodgePadding=E,f.xDimensionLegenth=O,f.groupNum=C,f.defaultSize=p,f.maxColumnWidth=x,f.minColumnWidth=T,f.columnWidthRatio=N,f}return b.prototype.process=function(S){var f=a.clone(S),M=a.flatten(f),I=this.dodgeBy,y=I?a.group(M,I):f;return this.cacheMap={},this.adjustDataArray=y,this.mergeData=M,this.adjustData(y,M),this.adjustDataArray=[],this.mergeData=[],f},b.prototype.adjustDim=function(S,f,M,I){var y=this,n=this.getDistribution(S),s=this.groupData(M,S);return a.each(s,function(d,E){var O;f.length===1?O={pre:f[0]-1,next:f[0]+1}:O=y.getAdjustRange(S,parseFloat(E),f),a.each(d,function(C){var p=C[S],x=n[p],T=x.indexOf(I);C[S]=y.getDodgeOffset(O,T,x.length)})}),[]},b.prototype.getDodgeOffset=function(S,f,M){var I=this,y=I.dodgeRatio,n=I.marginRatio,s=I.intervalPadding,d=I.dodgePadding,E=S.pre,O=S.next,C=O-E,p;if(!a.isNil(s)&&a.isNil(d)&&s>=0){var x=this.getIntervalOnlyOffset(M,f);p=E+x}else if(!a.isNil(d)&&a.isNil(s)&&d>=0){var x=this.getDodgeOnlyOffset(M,f);p=E+x}else if(!a.isNil(s)&&!a.isNil(d)&&s>=0&&d>=0){var x=this.getIntervalAndDodgeOffset(M,f);p=E+x}else{var T=C*y/M,N=n*T,x=1/2*(C-M*T-(M-1)*N)+((f+1)*T+f*N)-1/2*T-1/2*C;p=(E+O)/2+x}return p},b.prototype.getIntervalOnlyOffset=function(S,f){var M=this,I=M.defaultSize,y=M.intervalPadding,n=M.xDimensionLegenth,s=M.groupNum,d=M.dodgeRatio,E=M.maxColumnWidth,O=M.minColumnWidth,C=M.columnWidthRatio,p=y/n,x=(1-(s-1)*p)/s*d/(S-1),T=((1-p*(s-1))/s-x*(S-1))/S;if(T=a.isNil(C)?T:1/s/S*C,!a.isNil(E)){var N=E/n;T=Math.min(T,N)}if(!a.isNil(O)){var Y=O/n;T=Math.max(T,Y)}T=I?I/n:T,x=((1-(s-1)*p)/s-S*T)/(S-1);var q=((1/2+f)*T+f*x+1/2*p)*s-p/2;return q},b.prototype.getDodgeOnlyOffset=function(S,f){var M=this,I=M.defaultSize,y=M.dodgePadding,n=M.xDimensionLegenth,s=M.groupNum,d=M.marginRatio,E=M.maxColumnWidth,O=M.minColumnWidth,C=M.columnWidthRatio,p=y/n,x=1*d/(s-1),T=((1-x*(s-1))/s-p*(S-1))/S;if(T=C?1/s/S*C:T,!a.isNil(E)){var N=E/n;T=Math.min(T,N)}if(!a.isNil(O)){var Y=O/n;T=Math.max(T,Y)}T=I?I/n:T,x=(1-(T*S+p*(S-1))*s)/(s-1);var q=((1/2+f)*T+f*p+1/2*x)*s-x/2;return q},b.prototype.getIntervalAndDodgeOffset=function(S,f){var M=this,I=M.intervalPadding,y=M.dodgePadding,n=M.xDimensionLegenth,s=M.groupNum,d=I/n,E=y/n,O=((1-d*(s-1))/s-E*(S-1))/S,C=((1/2+f)*O+f*E+1/2*d)*s-d/2;return C},b.prototype.getDistribution=function(S){var f=this.adjustDataArray,M=this.cacheMap,I=M[S];return I||(I={},a.each(f,function(y,n){var s=a.valuesOfKey(y,S);s.length||s.push(0),a.each(s,function(d){I[d]||(I[d]=[]),I[d].push(n)})}),M[S]=I),I},b}(e.a);_t.a=i},lr9b:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return C});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("w02o"),v=z("n/J0"),b="$$range$$",S="low-q1-median-q3-high",f="$$y_outliers$$";function M(p){var x=p.chart,T=p.options,N=T.xField,Y=T.yField,q=T.groupField,nt=T.color,vt=Array.isArray(Y)?b:Y,ht=x.schema().position(N+"*"+vt).shape("box");q&&ht.color(q,nt).adjust("dodge");var St=T.data;if(Array.isArray(Y)){var wt=Y[0],xt=Y[1],ft=Y[2],Ft=Y[3],kt=Y[4];St=Object(e.map)(St,function(Ot){return Ot[b]=[Ot[wt],Ot[xt],Ot[ft],Ot[Ft],Ot[kt]],Ot})}return x.data(St),p}function I(p){var x=p.chart,T=p.options,N=T.xField,Y=T.data,q=T.outliersField,nt=T.outliersStyle,vt=T.padding;if(!q)return p;var ht=x.createView({padding:vt});ht.data(Y),ht.axis(!1);var St=ht.point().position(N+"*"+q).shape("circle");return Object(e.isFunction)(nt)?St.style(N+"*"+q,function(wt,xt){var ft;return nt((ft={},ft[N]=wt,ft[q]=xt,ft))}):Object(e.isObject)(nt)&&St.style(nt),p}function y(p){var x,T,N=p.chart,Y=p.options,q=Y.meta,nt=Y.xAxis,vt=Y.yAxis,ht=Y.xField,St=Y.yField,wt=Y.outliersField,xt=Array.isArray(St)?b:St,ft={};if(wt){var Ft=f;ft=(x={},x[wt]={sync:Ft},x[xt]={sync:Ft},x)}var kt=Object(A.b)(ft,q,(T={},T[ht]=Object(A.k)(nt,v.a),T[xt]=Object(A.k)(vt,v.a),T));return N.scale(kt),p}function n(p){var x=p.chart,T=p.options,N=T.xAxis,Y=T.yAxis,q=T.xField,nt=T.yField,vt=Array.isArray(nt)?b:nt;return N===!1?x.axis(q,!1):x.axis(q,N),Y===!1?x.axis(b,!1):x.axis(vt,Y),p}function s(p){var x=p.chart,T=p.options,N=T.legend,Y=T.groupField;return Y?N?x.legend(Y,N):x.legend(Y,{position:"bottom"}):x.legend(!1),p}function d(p){var x=p.chart,T=p.options,N=T.xField,Y=T.yField,q=T.boxStyle,nt=Object(A.c)(x,"schema"),vt=Array.isArray(Y)?b:Y;return Object(e.isFunction)(q)?nt.style(N+"*"+vt,function(ht,St){var wt;return q((wt={},wt[N]=ht,wt[vt]=St,wt))}):Object(e.isObject)(q)&&nt.style(q),p}function E(p){var x=p.chart,T=p.options,N=T.tooltip;return N!==void 0&&x.tooltip(N),p}function O(p){return Object(A.e)(M,I,y,n,d,s,E,i.c,i.a,i.j)(p)}var C=function(p){Object(at.b)(x,p);function x(){var T=p!==null&&p.apply(this,arguments)||this;return T.type="box",T}return x.prototype.getDefaultOptions=function(){var T;return Object(A.b)({},p.prototype.getDefaultOptions.call(this),{meta:(T={},T[b]={min:0,alias:S},T),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0}})},x.prototype.getSchemaAdaptor=function(){return O},x}(a.a)},lt7v:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=null;function a(){if(!at){var A=document.createElement("canvas");A.width=1,A.height=1,at=A.getContext("2d")}return at}},"ma/q":function(Un,_t,z){"use strict";var at=z("Ihc8");z.d(_t,"G2",function(){return at});var a=z("zJSt"),A=z("Djfg"),e=z("XloR");z.d(_t,"Line",function(){return e.a});var i=z("uw/B");z.d(_t,"Area",function(){return i.a});var v=z("u9VJ");z.d(_t,"Column",function(){return v.a});var b=z("Y+LX");z.d(_t,"Bar",function(){return b.a});var S=z("Cr25");z.d(_t,"Pie",function(){return S.a});var f=z("z4Vf");z.d(_t,"Rose",function(){return f.a});var M=z("Mj7Y");z.d(_t,"WordCloud",function(){return M.a});var I=z("tE4n");z.d(_t,"Scatter",function(){return I.a});var y=z("y753");z.d(_t,"Radar",function(){return y.a});var n=z("yqCL");z.d(_t,"DualAxes",function(){return n.a});var s=z("mttH");z.d(_t,"TinyLine",function(){return s.a});var d=z("027J");z.d(_t,"TinyColumn",function(){return d.a});var E=z("05BJ");z.d(_t,"TinyArea",function(){return E.a});var O=z("BwSJ");z.d(_t,"Histogram",function(){return O.a});var C=z("kwiP");z.d(_t,"Progress",function(){return C.a});var p=z("YP77");z.d(_t,"RingProgress",function(){return p.a});var x=z("+wVF");z.d(_t,"Heatmap",function(){return x.a});var T=z("lr9b");z.d(_t,"Box",function(){return T.a});var N=z("/+3i");z.d(_t,"Stock",function(){return N.a});var Y=z("aLzy");z.d(_t,"Funnel",function(){return Y.a});var q=z("FAXy");z.d(_t,"Liquid",function(){return q.a});var nt=z("BYeR");z.d(_t,"Bullet",function(){return nt.a});var vt=z("cBFB");z.d(_t,"Sunburst",function(){return vt.a});var ht=z("XpFM");z.d(_t,"Gauge",function(){return ht.a});var St=z("FLLP");z.d(_t,"Waterfall",function(){return St.a});var wt=z("TEat");z.d(_t,"RadialBar",function(){return wt.a});var xt=z("7ZbV");z.d(_t,"BidirectionalBar",function(){return xt.a});var ft=z("eHqw");z.d(_t,"Treemap",function(){return ft.a});var Ft=z("rtSP");z.d(_t,"Sankey",function(){return Ft.a});var kt=z("Uo7R"),Ot=z("7+4w"),X=z("QG4C");z.d(_t,"MultiView",function(){return X.a});var ct=z("YuPD"),dt=z("tKoa"),pt=z("w02o"),Mt=z("46lQ"),tt="2.3.10",lt={scale:pt.f,legend:pt.d,tooltip:pt.k,annotation:pt.b,interaction:pt.c,theme:pt.j,animation:pt.a}},mj6g:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return e}),z.d(_t,"d",function(){return i}),z.d(_t,"c",function(){return v}),z.d(_t,"b",function(){return b});var at=z("mrSG"),a=z("iTfj"),A=z("YuPD");function e(S){var f={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},M=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Object(a.get)(S,"fill")&&(f.color=S.fill);var I=Object(A.k)(S,M),y=I.shadowColor,n=I.shadowBlur,s=n===void 0?0:n,d=I.shadowOffsetX,E=d===void 0?0:d,O=I.shadowOffsetY,C=O===void 0?0:O;f["text-shadow"]=""+[y,E+"px",C+"px",s+"px"].join(" ");var p=Object(A.k)(S,M),x=p.stroke,T=p.lineWidth,N=T===void 0?0:T;return f["-webkit-text-stroke"]=""+[N+"px",x].join(" "),Object(a.each)(S,function(Y,q){["fontSize"].includes(q)&&Object(a.isNumber)(Y)?f[Object(A.i)(q)]=Y+"px":q&&!M.includes(q)&&(f[Object(A.i)(q)]=""+Y)}),f}function i(S,f){S.style["pointer-events"]="none",Object(a.each)(f,function(M,I){I&&M&&(S.style[I]=M)})}var v=function(f,M,I){var y=M.statistic,n=M.plotType,s=y.title,d=y.content;[s,d].forEach(function(E,O){if(!!E){var C="",p="";O===0?p=d?"translate(-50%, -100%)":"translate(-50%, -50%)":p=s?"translate(-50%, 0)":"translate(-50%, -50%)";var x=Object(a.isFunction)(E.style)?E.style(I):E.style;f.annotation().html(Object(at.a)({position:["50%","50%"],html:function(N,Y){var q=Y.getCoordinate(),nt=0;if(n==="pie"||n==="ring-progress")nt=q.getRadius()*q.innerRadius*2;else if(n==="liquid"){var vt=Object(a.get)(Y.geometries,[0,"elements",0,"shape"]);if(vt){var ht=vt.find(function(xt){return xt.get("type")==="circle"}),St=ht.getCanvasBBox().width;nt=St}}else nt||(nt=q.getWidth());i(N,Object(at.a)({width:nt+"px",transform:p},e(x)));var wt=Y.getData();return E.customHtml?E.customHtml(N,Y,I,wt):(E.formatter&&(C=E.formatter(I,wt)),C?Object(a.isString)(C)?C:""+C:"<div></div>")},key:(O===0?"top":"bottom")+"-statistic"},Object(A.k)(E,["offsetX","offsetY","rotate","style","formatter"])))}})},b=function(f,M,I){var y=M.statistic,n=y.title,s=y.content;[n,s].forEach(function(d){if(!!d){var E="",O=Object(a.isFunction)(d.style)?d.style(I):d.style;f.annotation().html(Object(at.a)({position:["50%","100%"],html:function(p,x){var T=x.getCoordinate(),N=x.views[0].getCoordinate(),Y=N.getCenter(),q=N.getRadius(),nt=Math.max(Math.sin(N.startAngle),Math.sin(N.endAngle))*q,vt=Y.y+nt-T.y.start-parseFloat(Object(a.get)(O,"fontSize",0)),ht=T.getRadius()*T.innerRadius*2;i(p,Object(at.a)({width:ht+"px",transform:"translate(-50%, "+vt+"px)"},e(O)));var St=x.getData();return d.customHtml?d.customHtml(p,x,I,St):(d.formatter&&(E=d.formatter(I,St)),E?Object(a.isString)(E)?E:""+E:"<div></div>")}},Object(A.k)(d,["offsetX","offsetY","rotate","style","formatter"])))}})}},mrSG:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return a}),z.d(_t,"a",function(){return A}),z.d(_t,"c",function(){return e}),z.d(_t,"d",function(){return d});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(St,wt){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,ft){xt.__proto__=ft}||function(xt,ft){for(var Ft in ft)Object.prototype.hasOwnProperty.call(ft,Ft)&&(xt[Ft]=ft[Ft])},at(St,wt)};function a(ht,St){if(typeof St!="function"&&St!==null)throw new TypeError("Class extends value "+String(St)+" is not a constructor or null");at(ht,St);function wt(){this.constructor=ht}ht.prototype=St===null?Object.create(St):(wt.prototype=St.prototype,new wt)}var A=function(){return A=Object.assign||function(wt){for(var xt,ft=1,Ft=arguments.length;ft<Ft;ft++){xt=arguments[ft];for(var kt in xt)Object.prototype.hasOwnProperty.call(xt,kt)&&(wt[kt]=xt[kt])}return wt},A.apply(this,arguments)};function e(ht,St){var wt={};for(var xt in ht)Object.prototype.hasOwnProperty.call(ht,xt)&&St.indexOf(xt)<0&&(wt[xt]=ht[xt]);if(ht!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,xt=Object.getOwnPropertySymbols(ht);ft<xt.length;ft++)St.indexOf(xt[ft])<0&&Object.prototype.propertyIsEnumerable.call(ht,xt[ft])&&(wt[xt[ft]]=ht[xt[ft]]);return wt}function i(ht,St,wt,xt){var ft=arguments.length,Ft=ft<3?St:xt===null?xt=Object.getOwnPropertyDescriptor(St,wt):xt,kt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ft=Reflect.decorate(ht,St,wt,xt);else for(var Ot=ht.length-1;Ot>=0;Ot--)(kt=ht[Ot])&&(Ft=(ft<3?kt(Ft):ft>3?kt(St,wt,Ft):kt(St,wt))||Ft);return ft>3&&Ft&&Object.defineProperty(St,wt,Ft),Ft}function v(ht,St){return function(wt,xt){St(wt,xt,ht)}}function b(ht,St){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ht,St)}function S(ht,St,wt,xt){function ft(Ft){return Ft instanceof wt?Ft:new wt(function(kt){kt(Ft)})}return new(wt||(wt=Promise))(function(Ft,kt){function Ot(dt){try{ct(xt.next(dt))}catch(pt){kt(pt)}}function X(dt){try{ct(xt.throw(dt))}catch(pt){kt(pt)}}function ct(dt){dt.done?Ft(dt.value):ft(dt.value).then(Ot,X)}ct((xt=xt.apply(ht,St||[])).next())})}function f(ht,St){var wt={label:0,sent:function(){if(Ft[0]&1)throw Ft[1];return Ft[1]},trys:[],ops:[]},xt,ft,Ft,kt;return kt={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function Ot(ct){return function(dt){return X([ct,dt])}}function X(ct){if(xt)throw new TypeError("Generator is already executing.");for(;wt;)try{if(xt=1,ft&&(Ft=ct[0]&2?ft.return:ct[0]?ft.throw||((Ft=ft.return)&&Ft.call(ft),0):ft.next)&&!(Ft=Ft.call(ft,ct[1])).done)return Ft;switch(ft=0,Ft&&(ct=[ct[0]&2,Ft.value]),ct[0]){case 0:case 1:Ft=ct;break;case 4:return wt.label++,{value:ct[1],done:!1};case 5:wt.label++,ft=ct[1],ct=[0];continue;case 7:ct=wt.ops.pop(),wt.trys.pop();continue;default:if(Ft=wt.trys,!(Ft=Ft.length>0&&Ft[Ft.length-1])&&(ct[0]===6||ct[0]===2)){wt=0;continue}if(ct[0]===3&&(!Ft||ct[1]>Ft[0]&&ct[1]<Ft[3])){wt.label=ct[1];break}if(ct[0]===6&&wt.label<Ft[1]){wt.label=Ft[1],Ft=ct;break}if(Ft&&wt.label<Ft[2]){wt.label=Ft[2],wt.ops.push(ct);break}Ft[2]&&wt.ops.pop(),wt.trys.pop();continue}ct=St.call(ht,wt)}catch(dt){ct=[6,dt],ft=0}finally{xt=Ft=0}if(ct[0]&5)throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}}var M=Object.create?function(ht,St,wt,xt){xt===void 0&&(xt=wt),Object.defineProperty(ht,xt,{enumerable:!0,get:function(){return St[wt]}})}:function(ht,St,wt,xt){xt===void 0&&(xt=wt),ht[xt]=St[wt]};function I(ht,St){for(var wt in ht)wt!=="default"&&!Object.prototype.hasOwnProperty.call(St,wt)&&M(St,ht,wt)}function y(ht){var St=typeof Symbol=="function"&&Symbol.iterator,wt=St&&ht[St],xt=0;if(wt)return wt.call(ht);if(ht&&typeof ht.length=="number")return{next:function(){return ht&&xt>=ht.length&&(ht=void 0),{value:ht&&ht[xt++],done:!ht}}};throw new TypeError(St?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(ht,St){var wt=typeof Symbol=="function"&&ht[Symbol.iterator];if(!wt)return ht;var xt=wt.call(ht),ft,Ft=[],kt;try{for(;(St===void 0||St-- >0)&&!(ft=xt.next()).done;)Ft.push(ft.value)}catch(Ot){kt={error:Ot}}finally{try{ft&&!ft.done&&(wt=xt.return)&&wt.call(xt)}finally{if(kt)throw kt.error}}return Ft}function s(){for(var ht=[],St=0;St<arguments.length;St++)ht=ht.concat(n(arguments[St]));return ht}function d(){for(var ht=0,St=0,wt=arguments.length;St<wt;St++)ht+=arguments[St].length;for(var xt=Array(ht),ft=0,St=0;St<wt;St++)for(var Ft=arguments[St],kt=0,Ot=Ft.length;kt<Ot;kt++,ft++)xt[ft]=Ft[kt];return xt}function E(ht,St){for(var wt=0,xt=St.length,ft=ht.length;wt<xt;wt++,ft++)ht[ft]=St[wt];return ht}function O(ht){return this instanceof O?(this.v=ht,this):new O(ht)}function C(ht,St,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt=wt.apply(ht,St||[]),ft,Ft=[];return ft={},kt("next"),kt("throw"),kt("return"),ft[Symbol.asyncIterator]=function(){return this},ft;function kt(Mt){xt[Mt]&&(ft[Mt]=function(tt){return new Promise(function(lt,it){Ft.push([Mt,tt,lt,it])>1||Ot(Mt,tt)})})}function Ot(Mt,tt){try{X(xt[Mt](tt))}catch(lt){pt(Ft[0][3],lt)}}function X(Mt){Mt.value instanceof O?Promise.resolve(Mt.value.v).then(ct,dt):pt(Ft[0][2],Mt)}function ct(Mt){Ot("next",Mt)}function dt(Mt){Ot("throw",Mt)}function pt(Mt,tt){Mt(tt),Ft.shift(),Ft.length&&Ot(Ft[0][0],Ft[0][1])}}function p(ht){var St,wt;return St={},xt("next"),xt("throw",function(ft){throw ft}),xt("return"),St[Symbol.iterator]=function(){return this},St;function xt(ft,Ft){St[ft]=ht[ft]?function(kt){return(wt=!wt)?{value:O(ht[ft](kt)),done:ft==="return"}:Ft?Ft(kt):kt}:Ft}}function x(ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St=ht[Symbol.asyncIterator],wt;return St?St.call(ht):(ht=typeof y=="function"?y(ht):ht[Symbol.iterator](),wt={},xt("next"),xt("throw"),xt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function xt(Ft){wt[Ft]=ht[Ft]&&function(kt){return new Promise(function(Ot,X){kt=ht[Ft](kt),ft(Ot,X,kt.done,kt.value)})}}function ft(Ft,kt,Ot,X){Promise.resolve(X).then(function(ct){Ft({value:ct,done:Ot})},kt)}}function T(ht,St){return Object.defineProperty?Object.defineProperty(ht,"raw",{value:St}):ht.raw=St,ht}var N=Object.create?function(ht,St){Object.defineProperty(ht,"default",{enumerable:!0,value:St})}:function(ht,St){ht.default=St};function Y(ht){if(ht&&ht.__esModule)return ht;var St={};if(ht!=null)for(var wt in ht)wt!=="default"&&Object.prototype.hasOwnProperty.call(ht,wt)&&M(St,ht,wt);return N(St,ht),St}function q(ht){return ht&&ht.__esModule?ht:{default:ht}}function nt(ht,St){if(!St.has(ht))throw new TypeError("attempted to get private field on non-instance");return St.get(ht)}function vt(ht,St,wt){if(!St.has(ht))throw new TypeError("attempted to set private field on non-instance");return St.set(ht,wt),wt}},mttH:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return I});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),i=z("tKoa"),v=z("DyAw"),b=z("lFe4"),S=z("7cv3");function f(y){var n,s,d=y.chart,E=y.options,O=E.data,C=E.xAxis,p=E.yAxis,x=E.color,T=E.lineStyle,N=E.point,Y=Object(b.a)(O);d.data(Y);var q=Object(A.b)({},y,{options:{xField:S.b,yField:S.c,line:{color:x,style:T},point:N}}),nt=Object(A.b)({},q,{options:{tooltip:!1}});return Object(i.d)(q),Object(i.e)(nt),d.axis(!1),d.legend(!1),Object(e.f)((n={},n[S.b]=C,n[S.c]=p,n),(s={},s[S.b]={type:"cat"},s[S.c]=Object(v.a)(Y,S.c),s))(y),y}function M(y){return Object(A.e)(f,e.j,e.k,e.a,Object(e.b)())(y)}var I=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-line",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(b.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},S.a),animation:!0}},n.prototype.getSchemaAdaptor=function(){return M},n}(a.a)},"n+fv":function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"create",function(){return a}),z.d(_t,"clone",function(){return A}),z.d(_t,"length",function(){return e}),z.d(_t,"fromValues",function(){return i}),z.d(_t,"copy",function(){return v}),z.d(_t,"set",function(){return b}),z.d(_t,"add",function(){return S}),z.d(_t,"subtract",function(){return f}),z.d(_t,"multiply",function(){return M}),z.d(_t,"divide",function(){return I}),z.d(_t,"ceil",function(){return y}),z.d(_t,"floor",function(){return n}),z.d(_t,"min",function(){return s}),z.d(_t,"max",function(){return d}),z.d(_t,"round",function(){return E}),z.d(_t,"scale",function(){return O}),z.d(_t,"scaleAndAdd",function(){return C}),z.d(_t,"distance",function(){return p}),z.d(_t,"squaredDistance",function(){return x}),z.d(_t,"squaredLength",function(){return T}),z.d(_t,"negate",function(){return N}),z.d(_t,"inverse",function(){return Y}),z.d(_t,"normalize",function(){return q}),z.d(_t,"dot",function(){return nt}),z.d(_t,"cross",function(){return vt}),z.d(_t,"lerp",function(){return ht}),z.d(_t,"hermite",function(){return St}),z.d(_t,"bezier",function(){return wt}),z.d(_t,"random",function(){return xt}),z.d(_t,"transformMat4",function(){return ft}),z.d(_t,"transformMat3",function(){return Ft}),z.d(_t,"transformQuat",function(){return kt}),z.d(_t,"rotateX",function(){return Ot}),z.d(_t,"rotateY",function(){return X}),z.d(_t,"rotateZ",function(){return ct}),z.d(_t,"angle",function(){return dt}),z.d(_t,"zero",function(){return pt}),z.d(_t,"str",function(){return Mt}),z.d(_t,"exactEquals",function(){return tt}),z.d(_t,"equals",function(){return lt}),z.d(_t,"sub",function(){return it}),z.d(_t,"mul",function(){return U}),z.d(_t,"div",function(){return P}),z.d(_t,"dist",function(){return H}),z.d(_t,"sqrDist",function(){return k}),z.d(_t,"len",function(){return h}),z.d(_t,"sqrLen",function(){return g}),z.d(_t,"forEach",function(){return G});var at=z("yU0y");function a(){var V=new at.a(3);return at.a!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function A(V){var $=new at.a(3);return $[0]=V[0],$[1]=V[1],$[2]=V[2],$}function e(V){var $=V[0],rt=V[1],ot=V[2];return Math.hypot($,rt,ot)}function i(V,$,rt){var ot=new at.a(3);return ot[0]=V,ot[1]=$,ot[2]=rt,ot}function v(V,$){return V[0]=$[0],V[1]=$[1],V[2]=$[2],V}function b(V,$,rt,ot){return V[0]=$,V[1]=rt,V[2]=ot,V}function S(V,$,rt){return V[0]=$[0]+rt[0],V[1]=$[1]+rt[1],V[2]=$[2]+rt[2],V}function f(V,$,rt){return V[0]=$[0]-rt[0],V[1]=$[1]-rt[1],V[2]=$[2]-rt[2],V}function M(V,$,rt){return V[0]=$[0]*rt[0],V[1]=$[1]*rt[1],V[2]=$[2]*rt[2],V}function I(V,$,rt){return V[0]=$[0]/rt[0],V[1]=$[1]/rt[1],V[2]=$[2]/rt[2],V}function y(V,$){return V[0]=Math.ceil($[0]),V[1]=Math.ceil($[1]),V[2]=Math.ceil($[2]),V}function n(V,$){return V[0]=Math.floor($[0]),V[1]=Math.floor($[1]),V[2]=Math.floor($[2]),V}function s(V,$,rt){return V[0]=Math.min($[0],rt[0]),V[1]=Math.min($[1],rt[1]),V[2]=Math.min($[2],rt[2]),V}function d(V,$,rt){return V[0]=Math.max($[0],rt[0]),V[1]=Math.max($[1],rt[1]),V[2]=Math.max($[2],rt[2]),V}function E(V,$){return V[0]=Math.round($[0]),V[1]=Math.round($[1]),V[2]=Math.round($[2]),V}function O(V,$,rt){return V[0]=$[0]*rt,V[1]=$[1]*rt,V[2]=$[2]*rt,V}function C(V,$,rt,ot){return V[0]=$[0]+rt[0]*ot,V[1]=$[1]+rt[1]*ot,V[2]=$[2]+rt[2]*ot,V}function p(V,$){var rt=$[0]-V[0],ot=$[1]-V[1],At=$[2]-V[2];return Math.hypot(rt,ot,At)}function x(V,$){var rt=$[0]-V[0],ot=$[1]-V[1],At=$[2]-V[2];return rt*rt+ot*ot+At*At}function T(V){var $=V[0],rt=V[1],ot=V[2];return $*$+rt*rt+ot*ot}function N(V,$){return V[0]=-$[0],V[1]=-$[1],V[2]=-$[2],V}function Y(V,$){return V[0]=1/$[0],V[1]=1/$[1],V[2]=1/$[2],V}function q(V,$){var rt=$[0],ot=$[1],At=$[2],gt=rt*rt+ot*ot+At*At;return gt>0&&(gt=1/Math.sqrt(gt)),V[0]=$[0]*gt,V[1]=$[1]*gt,V[2]=$[2]*gt,V}function nt(V,$){return V[0]*$[0]+V[1]*$[1]+V[2]*$[2]}function vt(V,$,rt){var ot=$[0],At=$[1],gt=$[2],mt=rt[0],bt=rt[1],jt=rt[2];return V[0]=At*jt-gt*bt,V[1]=gt*mt-ot*jt,V[2]=ot*bt-At*mt,V}function ht(V,$,rt,ot){var At=$[0],gt=$[1],mt=$[2];return V[0]=At+ot*(rt[0]-At),V[1]=gt+ot*(rt[1]-gt),V[2]=mt+ot*(rt[2]-mt),V}function St(V,$,rt,ot,At,gt){var mt=gt*gt,bt=mt*(2*gt-3)+1,jt=mt*(gt-2)+gt,Dt=mt*(gt-1),Ut=mt*(3-2*gt);return V[0]=$[0]*bt+rt[0]*jt+ot[0]*Dt+At[0]*Ut,V[1]=$[1]*bt+rt[1]*jt+ot[1]*Dt+At[1]*Ut,V[2]=$[2]*bt+rt[2]*jt+ot[2]*Dt+At[2]*Ut,V}function wt(V,$,rt,ot,At,gt){var mt=1-gt,bt=mt*mt,jt=gt*gt,Dt=bt*mt,Ut=3*gt*bt,Ct=3*jt*mt,Vt=jt*gt;return V[0]=$[0]*Dt+rt[0]*Ut+ot[0]*Ct+At[0]*Vt,V[1]=$[1]*Dt+rt[1]*Ut+ot[1]*Ct+At[1]*Vt,V[2]=$[2]*Dt+rt[2]*Ut+ot[2]*Ct+At[2]*Vt,V}function xt(V,$){$=$||1;var rt=at.c()*2*Math.PI,ot=at.c()*2-1,At=Math.sqrt(1-ot*ot)*$;return V[0]=Math.cos(rt)*At,V[1]=Math.sin(rt)*At,V[2]=ot*$,V}function ft(V,$,rt){var ot=$[0],At=$[1],gt=$[2],mt=rt[3]*ot+rt[7]*At+rt[11]*gt+rt[15];return mt=mt||1,V[0]=(rt[0]*ot+rt[4]*At+rt[8]*gt+rt[12])/mt,V[1]=(rt[1]*ot+rt[5]*At+rt[9]*gt+rt[13])/mt,V[2]=(rt[2]*ot+rt[6]*At+rt[10]*gt+rt[14])/mt,V}function Ft(V,$,rt){var ot=$[0],At=$[1],gt=$[2];return V[0]=ot*rt[0]+At*rt[3]+gt*rt[6],V[1]=ot*rt[1]+At*rt[4]+gt*rt[7],V[2]=ot*rt[2]+At*rt[5]+gt*rt[8],V}function kt(V,$,rt){var ot=rt[0],At=rt[1],gt=rt[2],mt=rt[3],bt=$[0],jt=$[1],Dt=$[2],Ut=At*Dt-gt*jt,Ct=gt*bt-ot*Dt,Vt=ot*jt-At*bt,Ht=At*Vt-gt*Ct,re=gt*Ut-ot*Vt,pe=ot*Ct-At*Ut,ye=mt*2;return Ut*=ye,Ct*=ye,Vt*=ye,Ht*=2,re*=2,pe*=2,V[0]=bt+Ut+Ht,V[1]=jt+Ct+re,V[2]=Dt+Vt+pe,V}function Ot(V,$,rt,ot){var At=[],gt=[];return At[0]=$[0]-rt[0],At[1]=$[1]-rt[1],At[2]=$[2]-rt[2],gt[0]=At[0],gt[1]=At[1]*Math.cos(ot)-At[2]*Math.sin(ot),gt[2]=At[1]*Math.sin(ot)+At[2]*Math.cos(ot),V[0]=gt[0]+rt[0],V[1]=gt[1]+rt[1],V[2]=gt[2]+rt[2],V}function X(V,$,rt,ot){var At=[],gt=[];return At[0]=$[0]-rt[0],At[1]=$[1]-rt[1],At[2]=$[2]-rt[2],gt[0]=At[2]*Math.sin(ot)+At[0]*Math.cos(ot),gt[1]=At[1],gt[2]=At[2]*Math.cos(ot)-At[0]*Math.sin(ot),V[0]=gt[0]+rt[0],V[1]=gt[1]+rt[1],V[2]=gt[2]+rt[2],V}function ct(V,$,rt,ot){var At=[],gt=[];return At[0]=$[0]-rt[0],At[1]=$[1]-rt[1],At[2]=$[2]-rt[2],gt[0]=At[0]*Math.cos(ot)-At[1]*Math.sin(ot),gt[1]=At[0]*Math.sin(ot)+At[1]*Math.cos(ot),gt[2]=At[2],V[0]=gt[0]+rt[0],V[1]=gt[1]+rt[1],V[2]=gt[2]+rt[2],V}function dt(V,$){var rt=V[0],ot=V[1],At=V[2],gt=$[0],mt=$[1],bt=$[2],jt=Math.sqrt(rt*rt+ot*ot+At*At),Dt=Math.sqrt(gt*gt+mt*mt+bt*bt),Ut=jt*Dt,Ct=Ut&&nt(V,$)/Ut;return Math.acos(Math.min(Math.max(Ct,-1),1))}function pt(V){return V[0]=0,V[1]=0,V[2]=0,V}function Mt(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function tt(V,$){return V[0]===$[0]&&V[1]===$[1]&&V[2]===$[2]}function lt(V,$){var rt=V[0],ot=V[1],At=V[2],gt=$[0],mt=$[1],bt=$[2];return Math.abs(rt-gt)<=at.b*Math.max(1,Math.abs(rt),Math.abs(gt))&&Math.abs(ot-mt)<=at.b*Math.max(1,Math.abs(ot),Math.abs(mt))&&Math.abs(At-bt)<=at.b*Math.max(1,Math.abs(At),Math.abs(bt))}var it=f,U=M,P=I,H=p,k=x,h=e,g=T,G=function(){var V=a();return function($,rt,ot,At,gt,mt){var bt,jt;for(rt||(rt=3),ot||(ot=0),At?jt=Math.min(At*rt+ot,$.length):jt=$.length,bt=ot;bt<jt;bt+=rt)V[0]=$[bt],V[1]=$[bt+1],V[2]=$[bt+2],gt(V,V,mt),$[bt]=V[0],$[bt+1]=V[1],$[bt+2]=V[2];return $}}()},"n/J0":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return at}),z.d(_t,"b",function(){return a});var at=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask"],a={GRADIENT:{CONTINUOUS:"#BAE7FF-#1890FF-#0050B3"}}},nCnq:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return i});var at=z("cyZq");function a(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])}function A(v,b){return a(v)*a(b)?(v[0]*b[0]+v[1]*b[1])/(a(v)*a(b)):1}function e(v,b){return(v[0]*b[1]<v[1]*b[0]?-1:1)*Math.acos(A(v,b))}function i(v,b){var S=b[1],f=b[2],M=Object(at.m)(Object(at.o)(b[3]),Math.PI*2),I=b[4],y=b[5],n=v[0],s=v[1],d=b[6],E=b[7],O=Math.cos(M)*(n-d)/2+Math.sin(M)*(s-E)/2,C=-1*Math.sin(M)*(n-d)/2+Math.cos(M)*(s-E)/2,p=O*O/(S*S)+C*C/(f*f);p>1&&(S*=Math.sqrt(p),f*=Math.sqrt(p));var x=S*S*(C*C)+f*f*(O*O),T=x?Math.sqrt((S*S*(f*f)-x)/x):1;I===y&&(T*=-1),isNaN(T)&&(T=0);var N=f?T*S*C/f:0,Y=S?T*-f*O/S:0,q=(n+d)/2+Math.cos(M)*N-Math.sin(M)*Y,nt=(s+E)/2+Math.sin(M)*N+Math.cos(M)*Y,vt=[(O-N)/S,(C-Y)/f],ht=[(-1*O-N)/S,(-1*C-Y)/f],St=e([1,0],vt),wt=e(vt,ht);return A(vt,ht)<=-1&&(wt=Math.PI),A(vt,ht)>=1&&(wt=0),y===0&&wt>0&&(wt=wt-2*Math.PI),y===1&&wt<0&&(wt=wt+2*Math.PI),{cx:q,cy:nt,rx:Object(at.j)(v,[d,E])?0:S,ry:Object(at.j)(v,[d,E])?0:f,startAngle:St,endAngle:St+wt,xRotation:M,arcFlag:I,sweepFlag:y}}},nycV:function(Un,_t,z){"use strict";z.d(_t,"c",function(){return f}),z.d(_t,"b",function(){return M}),z.d(_t,"a",function(){return I});var at=z("mrSG"),a=z("R5nb"),A=Math.sin,e=Math.cos,i=Math.atan2,v=Math.PI;function b(y,n,s,d,E,O,C){var p=n.stroke,x=n.lineWidth,T=s-E,N=d-O,Y=i(N,T),q=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*e(v/6)+","+10*A(v/6)+" L0,0 L"+10*e(v/6)+",-"+10*A(v/6),stroke:p,lineWidth:x}});q.translate(E,O),q.rotateAtPoint(E,O,Y),y.set(C?"startArrowShape":"endArrowShape",q)}function S(y,n,s,d,E,O,C){var p=n.startArrow,x=n.endArrow,T=n.stroke,N=n.lineWidth,Y=C?p:x,q=Y.d,nt=Y.fill,vt=Y.stroke,ht=Y.lineWidth,St=Object(at.c)(Y,["d","fill","stroke","lineWidth"]),wt=s-E,xt=d-O,ft=i(xt,wt);q&&(E=E-e(ft)*q,O=O-A(ft)*q);var Ft=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:Object(at.a)(Object(at.a)({},St),{stroke:vt||T,lineWidth:ht||N,fill:nt})});Ft.translate(E,O),Ft.rotateAtPoint(E,O,ft),y.set(C?"startArrowShape":"endArrowShape",Ft)}function f(y,n,s,d,E){var O=i(d-n,s-y);return{dx:e(O)*E,dy:A(O)*E}}function M(y,n,s,d,E,O){typeof n.startArrow=="object"?S(y,n,s,d,E,O,!0):n.startArrow?b(y,n,s,d,E,O,!0):y.set("startArrowShape",null)}function I(y,n,s,d,E,O){typeof n.endArrow=="object"?S(y,n,s,d,E,O,!1):n.endArrow?b(y,n,s,d,E,O,!1):y.set("startArrowShape",null)}},oIFs:function(Un,_t,z){},q4HE:function(Un,_t){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",v="["+z+"]",b="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+S+")",M="[^"+z+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=f+"?",d="["+i+"]?",E="(?:"+n+"(?:"+[M,I,y].join("|")+")"+d+s+")*",O=d+s+E,C="(?:"+[M+b+"?",b,I,y,v].join("|")+")",p=RegExp(S+"(?="+S+")|"+C+O,"g");function x(T){for(var N=p.lastIndex=0;p.test(T);)++N;return N}Un.exports=x},qaDU:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return e});var at=z("mrSG"),a=z("Ihc8"),A=[1,0,0,0,1,0,0,0,1];function e(i,v){var b=v?Object(at.d)(v):Object(at.d)(A);return a.Util.transform(b,i)}},quyA:function(Un,_t){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",v="\\u200d",b=RegExp("["+v+z+e+i+"]");function S(f){return b.test(f)}Un.exports=S},r0DC:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return M}),z.d(_t,"a",function(){return I});var at=z("cyZq"),a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,A=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function v(y,n){var s=y.match(i);Object(at.c)(s,function(d){var E=d.split(":");n.addColorStop(E[0],E[1])})}function b(y,n,s){var d=a.exec(s),E=parseFloat(d[1])%360*(Math.PI/180),O=d[2],C=n.getBBox(),p,x;E>=0&&E<1/2*Math.PI?(p={x:C.minX,y:C.minY},x={x:C.maxX,y:C.maxY}):1/2*Math.PI<=E&&E<Math.PI?(p={x:C.maxX,y:C.minY},x={x:C.minX,y:C.maxY}):Math.PI<=E&&E<3/2*Math.PI?(p={x:C.maxX,y:C.maxY},x={x:C.minX,y:C.minY}):(p={x:C.minX,y:C.maxY},x={x:C.maxX,y:C.minY});var T=Math.tan(E),N=T*T,Y=(x.x-p.x+T*(x.y-p.y))/(N+1)+p.x,q=T*(x.x-p.x+T*(x.y-p.y))/(N+1)+p.y,nt=y.createLinearGradient(p.x,p.y,Y,q);return v(O,nt),nt}function S(y,n,s){var d=A.exec(s),E=parseFloat(d[1]),O=parseFloat(d[2]),C=parseFloat(d[3]),p=d[4];if(C===0){var x=p.match(i);return x[x.length-1].split(":")[1]}var T=n.getBBox(),N=T.maxX-T.minX,Y=T.maxY-T.minY,q=Math.sqrt(N*N+Y*Y)/2,nt=y.createRadialGradient(T.minX+N*E,T.minY+Y*O,0,T.minX+N/2,T.minY+Y/2,C*q);return v(p,nt),nt}function f(y,n,s){if(n.get("patternSource")&&n.get("patternSource")===s)return n.get("pattern");var d,E,O=e.exec(s),C=O[1],p=O[2];function x(){d=y.createPattern(E,C),n.set("pattern",d),n.set("patternSource",s)}switch(C){case"a":C="repeat";break;case"x":C="repeat-x";break;case"y":C="repeat-y";break;case"n":C="no-repeat";break;default:C="no-repeat"}return E=new Image,p.match(/^data:/i)||(E.crossOrigin="Anonymous"),E.src=p,E.complete?x():(E.onload=x,E.src=E.src),d}function M(y,n,s){if(Object(at.k)(s)){if(s[1]==="("||s[2]==="("){if(s[0]==="l")return b(y,n,s);if(s[0]==="r")return S(y,n,s);if(s[0]==="p")return f(y,n,s)}return s}}function I(y){var n=0,s=0,d=0,E=0;return Object(at.g)(y)?y.length===1?n=s=d=E=y[0]:y.length===2?(n=d=y[0],s=E=y[1]):y.length===3?(n=y[0],s=E=y[1],d=y[2]):(n=y[0],s=y[1],d=y[2],E=y[3]):n=s=d=E=y,[n,s,d,E]}},rtSP:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return pe});var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),i=z("iTfj"),v=z("ODXe"),b=z("uFwe");function S(ye,we){var Ne=0;if(we===void 0){var Ke=Object(b.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;(hn=+hn)&&(Ne+=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(b.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=+we(Mn,++kn,ye))&&(Ne+=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function f(ye,we){var Ne;if(we===void 0){var Ke=Object(b.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;hn!=null&&(Ne<hn||Ne===void 0&&hn>=hn)&&(Ne=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(b.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++kn,ye))!=null&&(Ne<Mn||Ne===void 0&&Mn>=Mn)&&(Ne=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function M(ye,we){var Ne;if(we===void 0){var Ke=Object(b.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;hn!=null&&(Ne>hn||Ne===void 0&&hn>=hn)&&(Ne=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(b.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++kn,ye))!=null&&(Ne>Mn||Ne===void 0&&Mn>=Mn)&&(Ne=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function I(ye){return ye.target.depth}function y(ye){return ye.depth}function n(ye,we){return we-1-ye.height}function s(ye,we){return ye.sourceLinks.length?ye.depth:we-1}function d(ye){return ye.targetLinks.length?ye.depth:ye.sourceLinks.length?M(ye.sourceLinks,I)-1:0}function E(ye){return function(){return ye}}function O(ye,we){return p(ye.source,we.source)||ye.index-we.index}function C(ye,we){return p(ye.target,we.target)||ye.index-we.index}function p(ye,we){return ye.y0-we.y0}function x(ye){return ye.value}function T(ye){return ye.index}function N(ye){return ye.nodes}function Y(ye){return ye.links}function q(ye,we){var Ne=ye.get(we);if(!Ne)throw new Error("missing: "+we);return Ne}function nt(ye){var we=ye.nodes,Ne=Object(b.a)(we),Ke;try{for(Ne.s();!(Ke=Ne.n()).done;){var pn=Ke.value,hn=pn.y0,kn=hn,Tn=Object(b.a)(pn.sourceLinks),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;Mn.y0=hn+Mn.width/2,hn+=Mn.width}}catch(tr){Tn.e(tr)}finally{Tn.f()}var Cn=Object(b.a)(pn.targetLinks),_n;try{for(Cn.s();!(_n=Cn.n()).done;){var Kn=_n.value;Kn.y1=kn+Kn.width/2,kn+=Kn.width}}catch(tr){Cn.e(tr)}finally{Cn.f()}}}catch(tr){Ne.e(tr)}finally{Ne.f()}}function vt(){var ye=0,we=0,Ne=1,Ke=1,pn=24,hn=8,kn,Tn=T,Rn=s,Mn,Cn,_n=N,Kn=Y,tr=6;function or(){var pr={nodes:_n.apply(null,arguments),links:Kn.apply(null,arguments)};return nr(pr),er(pr),Sr(pr),Vr(pr),Fi(pr),nt(pr),pr}or.update=function(pr){return nt(pr),pr},or.nodeId=function(pr){return arguments.length?(Tn=typeof pr=="function"?pr:E(pr),or):Tn},or.nodeAlign=function(pr){return arguments.length?(Rn=typeof pr=="function"?pr:E(pr),or):Rn},or.nodeSort=function(pr){return arguments.length?(Mn=pr,or):Mn},or.nodeWidth=function(pr){return arguments.length?(pn=+pr,or):pn},or.nodePadding=function(pr){return arguments.length?(hn=kn=+pr,or):hn},or.nodes=function(pr){return arguments.length?(_n=typeof pr=="function"?pr:E(pr),or):_n},or.links=function(pr){return arguments.length?(Kn=typeof pr=="function"?pr:E(pr),or):Kn},or.linkSort=function(pr){return arguments.length?(Cn=pr,or):Cn},or.size=function(pr){return arguments.length?(ye=we=0,Ne=+pr[0],Ke=+pr[1],or):[Ne-ye,Ke-we]},or.extent=function(pr){return arguments.length?(ye=+pr[0][0],Ne=+pr[1][0],we=+pr[0][1],Ke=+pr[1][1],or):[[ye,we],[Ne,Ke]]},or.iterations=function(pr){return arguments.length?(tr=+pr,or):tr};function nr(pr){var Yr=pr.nodes,Br=pr.links,Nr=Object(b.a)(Yr.entries()),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Object(v.a)(Kr,2),fi=ni[0],$r=ni[1];$r.index=fi,$r.sourceLinks=[],$r.targetLinks=[]}}catch(uo){Nr.e(uo)}finally{Nr.f()}var ci=new Map(Yr.map(function(uo,xo){return[Tn(uo,xo,Yr),uo]})),Qr=Object(b.a)(Br.entries()),gi;try{for(Qr.s();!(gi=Qr.n()).done;){var Oi=gi.value,bi=Object(v.a)(Oi,2),zi=bi[0],Qi=bi[1];Qi.index=zi;var io=Qi.source,Wi=Qi.target;typeof io!="object"&&(io=Qi.source=q(ci,io)),typeof Wi!="object"&&(Wi=Qi.target=q(ci,Wi)),io.sourceLinks.push(Qi),Wi.targetLinks.push(Qi)}}catch(uo){Qr.e(uo)}finally{Qr.f()}if(Cn!=null){var Zi=Object(b.a)(Yr),Pi;try{for(Zi.s();!(Pi=Zi.n()).done;){var no=Pi.value,Mo=no.sourceLinks,ao=no.targetLinks;Mo.sort(Cn),ao.sort(Cn)}}catch(uo){Zi.e(uo)}finally{Zi.f()}}}function er(pr){var Yr=pr.nodes,Br=Object(b.a)(Yr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Xr=Nr.value;Xr.value=Xr.fixedValue===void 0?Math.max(S(Xr.sourceLinks,x),S(Xr.targetLinks,x)):Xr.fixedValue}}catch(Kr){Br.e(Kr)}finally{Br.f()}}function Sr(pr){for(var Yr=pr.nodes,Br=Yr.length,Nr=new Set(Yr),Xr=new Set,Kr=0;Nr.size;){var ni=Object(b.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.depth=Kr;var ci=Object(b.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.target;Xr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Xr,Xr=new Set}}function Vr(pr){for(var Yr=pr.nodes,Br=Yr.length,Nr=new Set(Yr),Xr=new Set,Kr=0;Nr.size;){var ni=Object(b.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.height=Kr;var ci=Object(b.a)($r.targetLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.source;Xr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Xr,Xr=new Set}}function ti(pr){var Yr=pr.nodes,Br=f(Yr,function(Oi){return Oi.depth})+1,Nr=(Ne-ye-pn)/(Br-1),Xr=new Array(Br),Kr=Object(b.a)(Yr),ni;try{for(Kr.s();!(ni=Kr.n()).done;){var fi=ni.value,$r=Math.max(0,Math.min(Br-1,Math.floor(Rn.call(null,fi,Br))));fi.layer=$r,fi.x0=ye+$r*Nr,fi.x1=fi.x0+pn,Xr[$r]?Xr[$r].push(fi):Xr[$r]=[fi]}}catch(Oi){Kr.e(Oi)}finally{Kr.f()}if(Mn){var ci=Object(b.a)(Xr),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.sort(Mn)}}catch(Oi){ci.e(Oi)}finally{ci.f()}}return Xr}function hi(pr){var Yr=M(pr,function(zi){return(Ke-we-(zi.length-1)*kn)/S(zi,x)}),Br=Object(b.a)(pr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Xr=Nr.value,Kr=we,ni=Object(b.a)(Xr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.y0=Kr,$r.y1=Kr+$r.value*Yr,Kr=$r.y1+kn;var ci=Object(b.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.width=gi.value*Yr}}catch(zi){ci.e(zi)}finally{ci.f()}}}catch(zi){ni.e(zi)}finally{ni.f()}Kr=(Ke-Kr+kn)/(Xr.length+1);for(var Oi=0;Oi<Xr.length;++Oi){var bi=Xr[Oi];bi.y0+=Kr*(Oi+1),bi.y1+=Kr*(Oi+1)}ro(Xr)}}catch(zi){Br.e(zi)}finally{Br.f()}}function Fi(pr){var Yr=ti(pr);kn=Math.min(hn,(Ke-we)/(f(Yr,function(Kr){return Kr.length})-1)),hi(Yr);for(var Br=0;Br<tr;++Br){var Nr=Math.pow(.99,Br),Xr=Math.max(1-Nr,(Br+1)/tr);si(Yr,Nr,Xr),to(Yr,Nr,Xr)}}function to(pr,Yr,Br){for(var Nr=1,Xr=pr.length;Nr<Xr;++Nr){var Kr=pr[Nr],ni=Object(b.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(b.a)($r.targetLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.source,Qi=bi.value,io=Qi*($r.layer-zi.layer);ci+=jr(zi,$r)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Yr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(p),Ci(Kr,Br)}}function si(pr,Yr,Br){for(var Nr=pr.length,Xr=Nr-2;Xr>=0;--Xr){var Kr=pr[Xr],ni=Object(b.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(b.a)($r.sourceLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.target,Qi=bi.value,io=Qi*(zi.layer-$r.layer);ci+=Ji($r,zi)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Yr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(p),Ci(Kr,Br)}}function Ci(pr,Yr){var Br=pr.length>>1,Nr=pr[Br];Li(pr,Nr.y0-kn,Br-1,Yr),_i(pr,Nr.y1+kn,Br+1,Yr),Li(pr,Ke,pr.length-1,Yr),_i(pr,we,0,Yr)}function _i(pr,Yr,Br,Nr){for(;Br<pr.length;++Br){var Xr=pr[Br],Kr=(Yr-Xr.y0)*Nr;Kr>1e-6&&(Xr.y0+=Kr,Xr.y1+=Kr),Yr=Xr.y1+kn}}function Li(pr,Yr,Br,Nr){for(;Br>=0;--Br){var Xr=pr[Br],Kr=(Xr.y1-Yr)*Nr;Kr>1e-6&&(Xr.y0-=Kr,Xr.y1-=Kr),Yr=Xr.y0-kn}}function Vi(pr){var Yr=pr.sourceLinks,Br=pr.targetLinks;if(Cn===void 0){var Nr=Object(b.a)(Br),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.source.sourceLinks;ni.sort(C)}}catch(gi){Nr.e(gi)}finally{Nr.f()}var fi=Object(b.a)(Yr),$r;try{for(fi.s();!($r=fi.n()).done;){var ci=$r.value,Qr=ci.target.targetLinks;Qr.sort(O)}}catch(gi){fi.e(gi)}finally{fi.f()}}}function ro(pr){if(Cn===void 0){var Yr=Object(b.a)(pr),Br;try{for(Yr.s();!(Br=Yr.n()).done;){var Nr=Br.value,Xr=Nr.sourceLinks,Kr=Nr.targetLinks;Xr.sort(C),Kr.sort(O)}}catch(ni){Yr.e(ni)}finally{Yr.f()}}}function jr(pr,Yr){var Br=pr.y0-(pr.sourceLinks.length-1)*kn/2,Nr=Object(b.a)(pr.sourceLinks),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.target,fi=Kr.width;if(ni===Yr)break;Br+=fi+kn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(b.a)(Yr.targetLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.source,Oi=Qr.width;if(gi===pr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}function Ji(pr,Yr){var Br=Yr.y0-(Yr.targetLinks.length-1)*kn/2,Nr=Object(b.a)(Yr.targetLinks),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.source,fi=Kr.width;if(ni===pr)break;Br+=fi+kn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(b.a)(pr.sourceLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.target,Oi=Qr.width;if(gi===Yr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}return or}var ht=Math.PI,St=2*ht,wt=1e-6,xt=St-wt;function ft(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ft(){return new ft}ft.prototype=Ft.prototype={constructor:ft,moveTo:function(we,Ne){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Ne)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(we,Ne){this._+="L"+(this._x1=+we)+","+(this._y1=+Ne)},quadraticCurveTo:function(we,Ne,Ke,pn){this._+="Q"+ +we+","+ +Ne+","+(this._x1=+Ke)+","+(this._y1=+pn)},bezierCurveTo:function(we,Ne,Ke,pn,hn,kn){this._+="C"+ +we+","+ +Ne+","+ +Ke+","+ +pn+","+(this._x1=+hn)+","+(this._y1=+kn)},arcTo:function(we,Ne,Ke,pn,hn){we=+we,Ne=+Ne,Ke=+Ke,pn=+pn,hn=+hn;var kn=this._x1,Tn=this._y1,Rn=Ke-we,Mn=pn-Ne,Cn=kn-we,_n=Tn-Ne,Kn=Cn*Cn+_n*_n;if(hn<0)throw new Error("negative radius: "+hn);if(this._x1===null)this._+="M"+(this._x1=we)+","+(this._y1=Ne);else if(Kn>wt)if(!(Math.abs(_n*Rn-Mn*Cn)>wt)||!hn)this._+="L"+(this._x1=we)+","+(this._y1=Ne);else{var tr=Ke-kn,or=pn-Tn,nr=Rn*Rn+Mn*Mn,er=tr*tr+or*or,Sr=Math.sqrt(nr),Vr=Math.sqrt(Kn),ti=hn*Math.tan((ht-Math.acos((nr+Kn-er)/(2*Sr*Vr)))/2),hi=ti/Vr,Fi=ti/Sr;Math.abs(hi-1)>wt&&(this._+="L"+(we+hi*Cn)+","+(Ne+hi*_n)),this._+="A"+hn+","+hn+",0,0,"+ +(_n*tr>Cn*or)+","+(this._x1=we+Fi*Rn)+","+(this._y1=Ne+Fi*Mn)}},arc:function(we,Ne,Ke,pn,hn,kn){we=+we,Ne=+Ne,Ke=+Ke,kn=!!kn;var Tn=Ke*Math.cos(pn),Rn=Ke*Math.sin(pn),Mn=we+Tn,Cn=Ne+Rn,_n=1^kn,Kn=kn?pn-hn:hn-pn;if(Ke<0)throw new Error("negative radius: "+Ke);this._x1===null?this._+="M"+Mn+","+Cn:(Math.abs(this._x1-Mn)>wt||Math.abs(this._y1-Cn)>wt)&&(this._+="L"+Mn+","+Cn),!!Ke&&(Kn<0&&(Kn=Kn%St+St),Kn>xt?this._+="A"+Ke+","+Ke+",0,1,"+_n+","+(we-Tn)+","+(Ne-Rn)+"A"+Ke+","+Ke+",0,1,"+_n+","+(this._x1=Mn)+","+(this._y1=Cn):Kn>wt&&(this._+="A"+Ke+","+Ke+",0,"+ +(Kn>=ht)+","+_n+","+(this._x1=we+Ke*Math.cos(hn))+","+(this._y1=Ne+Ke*Math.sin(hn))))},rect:function(we,Ne,Ke,pn){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Ne)+"h"+ +Ke+"v"+ +pn+"h"+-Ke+"Z"},toString:function(){return this._}};var kt=Ft,Ot=Array.prototype.slice,X=function(ye){return function(){return ye}};function ct(ye){return ye[0]}function dt(ye){return ye[1]}var pt=function(ye,we){return[(we=+we)*Math.cos(ye-=Math.PI/2),we*Math.sin(ye)]};function Mt(ye){return ye.source}function tt(ye){return ye.target}function lt(ye){var we=Mt,Ne=tt,Ke=ct,pn=dt,hn=null;function kn(){var Tn,Rn=Ot.call(arguments),Mn=we.apply(this,Rn),Cn=Ne.apply(this,Rn);if(hn||(hn=Tn=kt()),ye(hn,+Ke.apply(this,(Rn[0]=Mn,Rn)),+pn.apply(this,Rn),+Ke.apply(this,(Rn[0]=Cn,Rn)),+pn.apply(this,Rn)),Tn)return hn=null,Tn+""||null}return kn.source=function(Tn){return arguments.length?(we=Tn,kn):we},kn.target=function(Tn){return arguments.length?(Ne=Tn,kn):Ne},kn.x=function(Tn){return arguments.length?(Ke=typeof Tn=="function"?Tn:X(+Tn),kn):Ke},kn.y=function(Tn){return arguments.length?(pn=typeof Tn=="function"?Tn:X(+Tn),kn):pn},kn.context=function(Tn){return arguments.length?(hn=Tn==null?null:Tn,kn):hn},kn}function it(ye,we,Ne,Ke,pn){ye.moveTo(we,Ne),ye.bezierCurveTo(we=(we+Ke)/2,Ne,we,pn,Ke,pn)}function U(ye,we,Ne,Ke,pn){ye.moveTo(we,Ne),ye.bezierCurveTo(we,Ne=(Ne+pn)/2,Ke,Ne,Ke,pn)}function P(ye,we,Ne,Ke,pn){var hn=pt(we,Ne),kn=pt(we,Ne=(Ne+pn)/2),Tn=pt(Ke,Ne),Rn=pt(Ke,pn);ye.moveTo(hn[0],hn[1]),ye.bezierCurveTo(kn[0],kn[1],Tn[0],Tn[1],Rn[0],Rn[1])}function H(){return lt(it)}function k(){return lt(U)}function h(){var ye=lt(P);return ye.angle=ye.x,delete ye.x,ye.radius=ye.y,delete ye.y,ye}function g(ye){return[ye.source.x1,ye.y0]}function G(ye){return[ye.target.x0,ye.y1]}var V=function(){return H().source(g).target(G)},$={left:y,right:n,center:d,justify:s},rt={nodeId:function(we){return we.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function ot(ye){var we=Object(i.isString)(ye)?$[ye]:Object(i.isFunction)(ye)?ye:null;return we||s}function At(ye){return Object(i.assign)({},rt,ye)}function gt(ye,we){var Ne=At(ye),Ke=Ne.nodeId,pn=Ne.nodeSort,hn=Ne.nodeAlign,kn=Ne.nodeWidth,Tn=Ne.nodePadding,Rn=vt().nodeSort(pn).links(function(Cn){return Cn.links}).nodeWidth(kn).nodePadding(Tn).nodeAlign(ot(hn)).extent([[0,0],[1,1]]).nodeId(Ke),Mn=Rn(we);return Mn.nodes.forEach(function(Cn){var _n=Cn.x0,Kn=Cn.x1,tr=Cn.y0,or=Cn.y1;Cn.x=[_n,Kn,Kn,_n],Cn.y=[tr,tr,or,or]}),Mn.links.forEach(function(Cn){var _n=Cn.source,Kn=Cn.target,tr=_n.x1,or=Kn.x0;Cn.x=[tr,tr,or,or];var nr=Cn.width/2;Cn.y=[Cn.y0+nr,Cn.y0-nr,Cn.y1+nr,Cn.y1-nr]}),Mn}var mt=z("tKoa"),bt=z("DyAw"),jt="x",Dt="y",Ut="name";function Ct(ye,we,Ne){return Object(i.size)(we)===0?!1:we.includes(Ne)?!0:we.some(function(Ke){return Ct(ye,ye.get(Ke),Ne)})}function Vt(ye,we,Ne){var Ke=[],pn=[],hn=new Map;return Object(i.each)(ye,function(kn){var Tn=kn[we],Rn=kn[Ne];Ct(hn,[Tn],Rn)?pn.push(kn):(Ke.push(kn),hn.has(Rn)||hn.set(Rn,[]),hn.get(Rn).push(Tn))}),pn.length!==0&&console.warn("sankey data contains circle, "+pn.length+" records removed.",pn),Ke}function Ht(ye){var we=ye.chart,Ne=ye.options,Ke=Ne.data,pn=Ne.sourceField,hn=Ne.targetField,kn=Ne.weightField,Tn=Ne.color,Rn=Ne.nodeStyle,Mn=Ne.edgeStyle,Cn=Ne.label,_n=Ne.tooltip,Kn=Ne.nodeAlign,tr=Ne.nodePaddingRatio,or=Ne.nodeWidthRatio,nr=Ne.nodeSort;we.legend(!1),we.tooltip(_n),we.axis(!1);var er=Object(bt.b)(Vt(Ke,pn,hn),pn,hn,kn),Sr=gt({nodeAlign:Kn,nodePadding:tr,nodeWidth:or,nodeSort:nr},er),Vr=Sr.nodes,ti=Sr.links,hi=Vr.map(function(Ci){return{x:Ci.x,y:Ci.y,name:Ci.name}}),Fi=ti.map(function(Ci){return{source:Ci.source.name,target:Ci.target.name,name:Ci.source.name||Ci.target.name,x:Ci.x,y:Ci.y,value:Ci.value}}),to=we.createView();to.data(hi),Object(mt.f)({chart:to,options:{xField:jt,yField:Dt,seriesField:Ut,polygon:{color:Tn,style:Rn},label:Cn,tooltip:!1}});var si=we.createView();return si.data(Fi),Object(mt.b)({chart:si,options:{xField:jt,yField:Dt,seriesField:Ut,edge:{color:Tn,style:Mn,shape:"arc"},tooltip:_n,state:{active:{style:{opacity:.8,lineWidth:0}}}}}),we.interaction("element-active"),we.scale({x:{sync:!0,nice:!0},y:{sync:!0,nice:!0},name:{sync:"color"}}),ye}function re(ye){return Object(e.e)(Ht,A.c,A.a,A.j)(ye)}var pe=function(ye){Object(at.b)(we,ye);function we(){var Ne=ye!==null&&ye.apply(this,arguments)||this;return Ne.type="sankey",Ne}return we.prototype.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(Ke,pn){var hn=Ke[1]===1;return{style:{fill:"#545454",textAlign:hn?"end":"start"},offsetX:hn?-8:8,content:pn}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value"],formatter:function(Ke){var pn=Ke.source,hn=Ke.target,kn=Ke.value;return{name:pn+" -> "+hn,value:kn}}},nodeWidthRatio:.008,nodePaddingRatio:.01}},we.prototype.getSchemaAdaptor=function(){return re},we}(a.a)},sGsY:function(Un,_t,z){"use strict";var at=z("rePB"),a=z("wx14"),A=z("q1tI"),e=z("TSYQ"),i=z.n(e),v=z("H84U"),b=z("/ezw"),S=z("B6l+"),f=z.n(S),M=function(Ft){var kt=Ft.value,Ot=Ft.formatter,X=Ft.precision,ct=Ft.decimalSeparator,dt=Ft.groupSeparator,pt=dt===void 0?"":dt,Mt=Ft.prefixCls,tt;if(typeof Ot=="function")tt=Ot(kt);else{var lt=String(kt),it=lt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!it||lt==="-")tt=lt;else{var U=it[1],P=it[2]||"0",H=it[4]||"";P=P.replace(/\B(?=(\d{3})+(?!\d))/g,pt),typeof X=="number"&&(H=f()(H,X,"0").slice(0,X)),H&&(H="".concat(ct).concat(H)),tt=[A.createElement("span",{key:"int",className:"".concat(Mt,"-content-value-int")},U,P),H&&A.createElement("span",{key:"decimal",className:"".concat(Mt,"-content-value-decimal")},H)]}}return A.createElement("span",{className:"".concat(Mt,"-content-value")},tt)},I=M,y=function(Ft){var kt=Ft.prefixCls,Ot=Ft.className,X=Ft.style,ct=Ft.valueStyle,dt=Ft.value,pt=dt===void 0?0:dt,Mt=Ft.title,tt=Ft.valueRender,lt=Ft.prefix,it=Ft.suffix,U=Ft.loading,P=Ft.direction,H=Ft.onMouseEnter,k=Ft.onMouseLeave,h=A.createElement(I,Object(a.a)({},Ft,{value:pt})),g=i()(kt,Object(at.a)({},"".concat(kt,"-rtl"),P==="rtl"),Ot);return A.createElement("div",{className:g,style:X,onMouseEnter:H,onMouseLeave:k},Mt&&A.createElement("div",{className:"".concat(kt,"-title")},Mt),A.createElement(b.a,{paragraph:!1,loading:U},A.createElement("div",{style:ct,className:"".concat(kt,"-content")},lt&&A.createElement("span",{className:"".concat(kt,"-content-prefix")},lt),tt?tt(h):h,it&&A.createElement("span",{className:"".concat(kt,"-content-suffix")},it))))};y.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var n=Object(v.c)({prefixCls:"statistic"})(y),s=n,d=z("1OyB"),E=z("vuIU"),O=z("Ji7U"),C=z("LK+K"),p=z("ODXe"),x=z("QQZ/"),T=z.n(x),N=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Y(ft,Ft){var kt=ft,Ot=/\[[^\]]*]/g,X=(Ft.match(Ot)||[]).map(function(Mt){return Mt.slice(1,-1)}),ct=Ft.replace(Ot,"[]"),dt=N.reduce(function(Mt,tt){var lt=Object(p.a)(tt,2),it=lt[0],U=lt[1];if(Mt.indexOf(it)!==-1){var P=Math.floor(kt/U);return kt-=P*U,Mt.replace(new RegExp("".concat(it,"+"),"g"),function(H){var k=H.length;return T()(P.toString(),k,"0")})}return Mt},ct),pt=0;return dt.replace(Ot,function(){var Mt=X[pt];return pt+=1,Mt})}function q(ft,Ft){var kt=Ft.format,Ot=kt===void 0?"":kt,X=new Date(ft).getTime(),ct=Date.now(),dt=Math.max(X-ct,0);return Y(dt,Ot)}var nt=z("0n0R"),vt=1e3/30;function ht(ft){return new Date(ft).getTime()}var St=function(ft){Object(O.a)(kt,ft);var Ft=Object(C.a)(kt);function kt(){var Ot;return Object(d.a)(this,kt),Ot=Ft.apply(this,arguments),Ot.syncTimer=function(){var X=Ot.props.value,ct=ht(X);ct>=Date.now()?Ot.startTimer():Ot.stopTimer()},Ot.startTimer=function(){Ot.countdownId||(Ot.countdownId=window.setInterval(function(){Ot.forceUpdate()},vt))},Ot.stopTimer=function(){var X=Ot.props,ct=X.onFinish,dt=X.value;if(Ot.countdownId){clearInterval(Ot.countdownId),Ot.countdownId=void 0;var pt=ht(dt);ct&&pt<Date.now()&&ct()}},Ot.formatCountdown=function(X,ct){var dt=Ot.props.format;return q(X,Object(a.a)(Object(a.a)({},ct),{format:dt}))},Ot.valueRender=function(X){return Object(nt.a)(X,{title:void 0})},Ot}return Object(E.a)(kt,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return A.createElement(s,Object(a.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),kt}(A.Component);St.defaultProps={format:"HH:mm:ss"};var wt=St;s.Countdown=wt;var xt=_t.a=s},sKgW:function(Un,_t){var z=9007199254740991,at=Math.floor;function a(A,e){var i="";if(!A||e<1||e>z)return i;do e%2&&(i+=A),e=at(e/2),e&&(A+=A);while(e);return i}Un.exports=a},sYIZ:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("aFU3");function A(n,s){if(s){var d=Object(a.invert)(s);return Object(a.multiplyVec2)(d,n)}return n}function e(n,s,d){var E=n.getTotalMatrix();if(E){var O=A([s,d,1],E),C=O[0],p=O[1];return[C,p]}return[s,d]}function i(n,s,d){if(n.isCanvas&&n.isCanvas())return!0;if(!Object(a.isAllowCapture)(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var E=e(n,s,d),O=E[0],C=E[1];if(n.isClipped(O,C))return!1}var p=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return s>=p.minX&&s<=p.maxX&&d>=p.minY&&d<=p.maxY}function v(n,s,d){if(!i(n,s,d))return null;for(var E=null,O=n.getChildren(),C=O.length,p=C-1;p>=0;p--){var x=O[p];if(x.isGroup())E=v(x,s,d);else if(i(x,s,d)){var T=x,N=e(x,s,d),Y=N[0],q=N[1];T.isInShape(Y,q)&&(E=x)}if(E)break}return E}var b=z("R5nb"),S=z("wq2r"),f=z("cyZq"),M=z("9eUa"),I=function(n){Object(at.b)(s,n);function s(){return n!==null&&n.apply(this,arguments)||this}return s.prototype.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.renderer="canvas",d.autoDraw=!0,d.localRefresh=!0,d.refreshElements=[],d.clipView=!0,d.quickHit=!1,d},s.prototype.onCanvasChange=function(d){(d==="attr"||d==="sort"||d==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return b},s.prototype.getGroupBase=function(){return S.a},s.prototype.getPixelRatio=function(){var d=this.get("pixelRatio")||Object(f.d)();return d>=1?Math.ceil(d):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},s.prototype.createDom=function(){var d=document.createElement("canvas"),E=d.getContext("2d");return this.set("context",E),d},s.prototype.setDOMSize=function(d,E){n.prototype.setDOMSize.call(this,d,E);var O=this.get("context"),C=this.get("el"),p=this.getPixelRatio();C.width=p*d,C.height=p*E,p>1&&O.scale(p,p)},s.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var d=this.get("context"),E=this.get("el");d.clearRect(0,0,E.width,E.height)},s.prototype.getShape=function(d,E){var O;return this.get("quickHit")?O=v(this,d,E):O=n.prototype.getShape.call(this,d,E,null),O},s.prototype._getRefreshRegion=function(){var d=this.get("refreshElements"),E=this.getViewRange(),O;if(d.length&&d[0]===this)O=E;else if(O=Object(M.f)(d),O){O.minX=Math.floor(O.minX),O.minY=Math.floor(O.minY),O.maxX=Math.ceil(O.maxX),O.maxY=Math.ceil(O.maxY),O.maxY+=1;var C=this.get("clipView");C&&(O=Object(M.g)(O,E))}return O},s.prototype.refreshElement=function(d){var E=this.get("refreshElements");E.push(d)},s.prototype._clearFrame=function(){var d=this.get("drawFrame");d&&(Object(f.a)(d),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var d=this.get("drawFrame");this.get("autoDraw")&&d||this._startDraw()},s.prototype._drawAll=function(){var d=this.get("context"),E=this.get("el"),O=this.getChildren();d.clearRect(0,0,E.width,E.height),Object(M.a)(d,this),Object(M.d)(d,O),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var d=this.get("context"),E=this.get("refreshElements"),O=this.getChildren(),C=this._getRefreshRegion();C?(d.clearRect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),d.save(),d.beginPath(),d.rect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),d.clip(),Object(M.a)(d,this),Object(M.b)(this,O,C),Object(M.d)(d,O,C),d.restore()):E.length&&Object(M.c)(E),Object(f.c)(E,function(p){p.get("hasChanged")&&p.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var d=this,E=this.get("drawFrame");E||(E=Object(f.n)(function(){d.get("localRefresh")?d._drawRegion():d._drawAll(),d.set("drawFrame",null)}),this.set("drawFrame",E))},s.prototype.skipDraw=function(){},s}(a.AbstractCanvas),y=_t.a=I},sqD9:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return e}),z.d(_t,"a",function(){return i});var at=z("mrSG"),a=z("iTfj"),A=z("F/eT");function e(v,b,S,f){var M=Object(a.reduce)(v,function(I,y){var n=y[S],s=I.has(n)?I.get(n):0,d=y[b];return s=Object(A.a)(d)?s+d:s,I.set(n,s),I},new Map);return Object(a.map)(v,function(I){var y,n=I[b],s=I[S],d=Object(A.a)(n)?n/M.get(s):0;return Object(at.a)(Object(at.a)({},I),(y={},y[f]=d,y))})}function i(v,b,S,f,M){return M?e(v,b,S,f):v}},sstZ:function(Un,_t,z){"use strict";z.d(_t,"j",function(){return a}),z.d(_t,"c",function(){return A}),z.d(_t,"g",function(){return e}),z.d(_t,"b",function(){return i});var at=z("iTfj");z.d(_t,"e",function(){return at.isNil}),z.d(_t,"d",function(){return at.isFunction}),z.d(_t,"h",function(){return at.isString}),z.d(_t,"f",function(){return at.isObject}),z.d(_t,"i",function(){return at.mix}),z.d(_t,"a",function(){return at.each}),z.d(_t,"k",function(){return at.upperFirst});function a(v,b){var S=v.indexOf(b);S!==-1&&v.splice(S,1)}var A=typeof window!="undefined"&&typeof window.document!="undefined";function e(v,b){if(v.isCanvas())return!0;for(var S=b.getParent(),f=!1;S;){if(S===v){f=!0;break}S=S.getParent()}return f}function i(v){return v.cfg.visible&&v.cfg.capture}},tE4n:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return k});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("tKoa"),v=z("w02o"),b=z("ODXe");function S(h,g,G,V){h=h.filter(function(Ct){var Vt=g(Ct),Ht=G(Ct);return Vt!=null&&isFinite(Vt)&&Ht!=null&&isFinite(Ht)}),V&&h.sort(function(Ct,Vt){return g(Ct)-g(Vt)});for(var $=h.length,rt=new Float64Array($),ot=new Float64Array($),At=0,gt=0,mt,bt,jt,Dt=0;Dt<$;)jt=h[Dt],rt[Dt]=mt=+g(jt),ot[Dt]=bt=+G(jt),++Dt,At+=(mt-At)/Dt,gt+=(bt-gt)/Dt;for(var Ut=0;Ut<$;++Ut)rt[Ut]-=At,ot[Ut]-=gt;return[rt,ot,At,gt]}function f(h,g,G,V){for(var $=0,rt=0,ot=h.length;rt<ot;rt++){var At=h[rt],gt=+g(At),mt=+G(At);gt!=null&&isFinite(gt)&&mt!=null&&isFinite(mt)&&V(gt,mt,$++)}}function M(h,g,G,V,$){var rt=0,ot=0;return f(h,g,G,function(At,gt){var mt=gt-$(At),bt=gt-V;rt+=mt*mt,ot+=bt*bt}),1-rt/ot}function I(h){return Math.atan2(h[1][1]-h[0][1],h[1][0]-h[0][0])*180/Math.PI}function y(h){return[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]}function n(h,g,G){for(var V=Math.log(g-h)*Math.LOG10E+1|0,$=1*Math.pow(10,-V/2-1),rt=1e4,ot=[gt(h),gt(g)],At=0;mt(ot)&&At<rt;);return ot;function gt(bt){return[bt,G(bt)]}function mt(bt){At++;for(var jt=bt.length,Dt=!1,Ut=0;Ut<jt-1;Ut++){var Ct=bt[Ut],Vt=bt[Ut+1],Ht=y([Ct,Vt]),re=gt(Ht[0]),pe=I([Ct,Ht]),ye=I([Ct,re]),we=Math.abs(pe-ye);we>$&&(bt.splice(Ut+1,0,re),Dt=!0)}return Dt}}function s(h,g,G,V){var $=V-h*h,rt=Math.abs($)<1e-24?0:(G-h*g)/$,ot=g-rt*h;return[ot,rt]}var d=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G;function V($){var rt=0,ot=0,At=0,gt=0,mt=0,bt=0,jt=G?+G[0]:Infinity,Dt=G?+G[1]:-Infinity;f($,h,g,function(ye,we){var Ne=Math.log(we),Ke=ye*we;++rt,ot+=(we-ot)/rt,gt+=(Ke-gt)/rt,bt+=(ye*Ke-bt)/rt,At+=(we*Ne-At)/rt,mt+=(Ke*Ne-mt)/rt,G||(ye<jt&&(jt=ye),ye>Dt&&(Dt=ye))});var Ut=s(gt/ot,At/ot,mt/ot,bt/ot),Ct=Object(b.a)(Ut,2),Vt=Ct[0],Ht=Ct[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.exp(Ht*we)},pe=n(jt,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=M($,h,g,ot,re),pe}return V.domain=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V},E=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G;function V($){var rt=0,ot=0,At=0,gt=0,mt=0,bt=G?+G[0]:Infinity,jt=G?+G[1]:-Infinity;f($,h,g,function(pe,ye){++rt,ot+=(pe-ot)/rt,At+=(ye-At)/rt,gt+=(pe*ye-gt)/rt,mt+=(pe*pe-mt)/rt,G||(pe<bt&&(bt=pe),pe>jt&&(jt=pe))});var Dt=s(ot,At,gt,mt),Ut=Object(b.a)(Dt,2),Ct=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*ye+Ct},re=[[bt,Ht(bt)],[jt,Ht(jt)]];return re.a=Vt,re.b=Ct,re.predict=Ht,re.rSquared=M($,h,g,At,Ht),re}return V.domain=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V};function O(h){h.sort(function(G,V){return G-V});var g=h.length/2;return g%1==0?(h[g-1]+h[g])/2:h[Math.floor(g)]}var C=2,p=1e-12,x=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G=.3;function V($){for(var rt=S($,h,g,!0),ot=Object(b.a)(rt,4),At=ot[0],gt=ot[1],mt=ot[2],bt=ot[3],jt=At.length,Dt=Math.max(2,~~(G*jt)),Ut=new Float64Array(jt),Ct=new Float64Array(jt),Vt=new Float64Array(jt).fill(1),Ht=-1;++Ht<=C;){for(var re=[0,Dt-1],pe=0;pe<jt;++pe){for(var ye=At[pe],we=re[0],Ne=re[1],Ke=ye-At[we]>At[Ne]-ye?we:Ne,pn=0,hn=0,kn=0,Tn=0,Rn=0,Mn=1/Math.abs(At[Ke]-ye||1),Cn=we;Cn<=Ne;++Cn){var _n=At[Cn],Kn=gt[Cn],tr=T(Math.abs(ye-_n)*Mn)*Vt[Cn],or=_n*tr;pn+=tr,hn+=or,kn+=Kn*tr,Tn+=Kn*or,Rn+=_n*or}var nr=s(hn/pn,kn/pn,Tn/pn,Rn/pn),er=Object(b.a)(nr,2),Sr=er[0],Vr=er[1];Ut[pe]=Sr+Vr*ye,Ct[pe]=Math.abs(gt[pe]-Ut[pe]),N(At,pe+1,re)}if(Ht===C)break;var ti=O(Ct);if(Math.abs(ti)<p)break;for(var hi=0,Fi,to;hi<jt;++hi)Fi=Ct[hi]/(6*ti),Vt[hi]=Fi>=1?p:(to=1-Fi*Fi)*to}return Y(At,Ut,mt,bt)}return V.bandwidth=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V};function T(h){return(h=1-h*h*h)*h*h}function N(h,g,G){var V=h[g],$=G[0],rt=G[1]+1;if(!(rt>=h.length))for(;g>$&&h[rt]-V<=V-h[$];)G[0]=++$,G[1]=rt,++rt}function Y(h,g,G,V){for(var $=h.length,rt=[],ot=0,At=0,gt=[],mt;ot<$;++ot)mt=h[ot]+G,gt[0]===mt?gt[1]+=(g[ot]-gt[1])/++At:(At=0,gt[1]+=V,gt=[mt,g[ot]],rt.push(gt));return gt[1]+=V,rt}var q=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G;function V($){var rt=0,ot=0,At=0,gt=0,mt=0,bt=G?+G[0]:Infinity,jt=G?+G[1]:-Infinity;f($,h,g,function(pe,ye){var we=Math.log(pe);++rt,ot+=(we-ot)/rt,At+=(ye-At)/rt,gt+=(we*ye-gt)/rt,mt+=(we*we-mt)/rt,G||(pe<bt&&(bt=pe),pe>jt&&(jt=pe))});var Dt=s(ot,At,gt,mt),Ut=Object(b.a)(Dt,2),Ct=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*Math.log(ye)+Ct},re=n(bt,jt,Ht);return re.a=Vt,re.b=Ct,re.predict=Ht,re.rSquared=M($,h,g,At,Ht),re}return V.domain=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V},nt=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G;function V($){var rt=S($,h,g),ot=Object(b.a)(rt,4),At=ot[0],gt=ot[1],mt=ot[2],bt=ot[3],jt=At.length,Dt=0,Ut=0,Ct=0,Vt=0,Ht=0,re,pe,ye,we;for(re=0;re<jt;)pe=At[re],ye=gt[re++],we=pe*pe,Dt+=(we-Dt)/re,Ut+=(we*pe-Ut)/re,Ct+=(we*we-Ct)/re,Vt+=(pe*ye-Vt)/re,Ht+=(we*ye-Ht)/re;var Ne=0,Ke=0,pn=G?+G[0]:Infinity,hn=G?+G[1]:-Infinity;f($,h,g,function(tr,or){Ke++,Ne+=(or-Ne)/Ke,G||(tr<pn&&(pn=tr),tr>hn&&(hn=tr))});var kn=Ct-Dt*Dt,Tn=Dt*kn-Ut*Ut,Rn=(Ht*Dt-Vt*Ut)/Tn,Mn=(Vt*kn-Ht*Ut)/Tn,Cn=-Rn*Dt,_n=function(or){return or=or-mt,Rn*or*or+Mn*or+Cn+bt},Kn=n(pn,hn,_n);return Kn.a=Rn,Kn.b=Mn-2*Rn*mt,Kn.c=Cn-Mn*mt+Rn*mt*mt+bt,Kn.predict=_n,Kn.rSquared=M($,h,g,Ne,_n),Kn}return V.domain=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V},vt=function(){var h=function(ot){return ot[0]},g=function(ot){return ot[1]},G=3,V;function $(rt){if(G===1){var ot=E().x(h).y(g).domain(V)(rt);return ot.coefficients=[ot.b,ot.a],delete ot.a,delete ot.b,ot}if(G===2){var At=nt().x(h).y(g).domain(V)(rt);return At.coefficients=[At.c,At.b,At.a],delete At.a,delete At.b,delete At.c,At}var gt=S(rt,h,g),mt=Object(b.a)(gt,4),bt=mt[0],jt=mt[1],Dt=mt[2],Ut=mt[3],Ct=bt.length,Vt=[],Ht=[],re=G+1,pe=0,ye=0,we=V?+V[0]:Infinity,Ne=V?+V[1]:-Infinity;f(rt,h,g,function(_n,Kn){++ye,pe+=(Kn-pe)/ye,V||(_n<we&&(we=_n),_n>Ne&&(Ne=_n))});var Ke,pn,hn,kn,Tn;for(Ke=0;Ke<re;++Ke){for(hn=0,kn=0;hn<Ct;++hn)kn+=Math.pow(bt[hn],Ke)*jt[hn];for(Vt.push(kn),Tn=new Float64Array(re),pn=0;pn<re;++pn){for(hn=0,kn=0;hn<Ct;++hn)kn+=Math.pow(bt[hn],Ke+pn);Tn[pn]=kn}Ht.push(Tn)}Ht.push(Vt);var Rn=St(Ht),Mn=function(Kn){Kn-=Dt;var tr=Ut+Rn[0]+Rn[1]*Kn+Rn[2]*Kn*Kn;for(Ke=3;Ke<re;++Ke)tr+=Rn[Ke]*Math.pow(Kn,Ke);return tr},Cn=n(we,Ne,Mn);return Cn.coefficients=ht(re,Rn,-Dt,Ut),Cn.predict=Mn,Cn.rSquared=M(rt,h,g,pe,Mn),Cn}return $.domain=function(rt){return arguments.length?(V=rt,$):V},$.x=function(rt){return arguments.length?(h=rt,$):h},$.y=function(rt){return arguments.length?(g=rt,$):g},$.order=function(rt){return arguments.length?(G=rt,$):G},$};function ht(h,g,G,V){var $=Array(h),rt,ot,At,gt;for(rt=0;rt<h;++rt)$[rt]=0;for(rt=h-1;rt>=0;--rt)for(At=g[rt],gt=1,$[rt]+=At,ot=1;ot<=rt;++ot)gt*=(rt+1-ot)/ot,$[rt-ot]+=At*Math.pow(G,ot)*gt;return $[0]+=V,$}function St(h){var g=h.length-1,G=[],V,$,rt,ot,At;for(V=0;V<g;++V){for(ot=V,$=V+1;$<g;++$)Math.abs(h[V][$])>Math.abs(h[V][ot])&&(ot=$);for(rt=V;rt<g+1;++rt)At=h[rt][V],h[rt][V]=h[rt][ot],h[rt][ot]=At;for($=V+1;$<g;++$)for(rt=g;rt>=V;rt--)h[rt][$]-=h[rt][V]*h[V][$]/h[V][V]}for($=g-1;$>=0;--$){for(At=0,rt=$+1;rt<g;++rt)At+=h[rt][$]*G[rt];G[$]=(h[g][$]-At)/h[$][$]}return G}var wt=function(){var h=function(rt){return rt[0]},g=function(rt){return rt[1]},G;function V($){var rt=0,ot=0,At=0,gt=0,mt=0,bt=0,jt=G?+G[0]:Infinity,Dt=G?+G[1]:-Infinity;f($,h,g,function(ye,we){var Ne=Math.log(ye),Ke=Math.log(we);++rt,ot+=(Ne-ot)/rt,At+=(Ke-At)/rt,gt+=(Ne*Ke-gt)/rt,mt+=(Ne*Ne-mt)/rt,bt+=(we-bt)/rt,G||(ye<jt&&(jt=ye),ye>Dt&&(Dt=ye))});var Ut=s(ot,At,gt,mt),Ct=Object(b.a)(Ut,2),Vt=Ct[0],Ht=Ct[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.pow(we,Ht)},pe=n(jt,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=M($,h,g,bt,re),pe}return V.domain=function($){return arguments.length?(G=$,V):G},V.x=function($){return arguments.length?(h=$,V):h},V.y=function($){return arguments.length?(g=$,V):g},V},xt={exp:d,linear:E,loess:x,log:q,poly:vt,pow:wt,quad:nt};function ft(h,g){var G=10,V={regionStyle:[{position:{start:[h,"max"],end:["max",g]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[h,g]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",g],end:[h,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[h,g],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",g],offsetX:-G,offsetY:-G,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:G,offsetY:-G,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:G,offsetY:G,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",g],offsetX:-G,offsetY:G,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return V}var Ft=function(g,G){var V=G.view,$=G.options,rt=$.xField,ot=$.yField,At=V.getScaleByField(rt),gt=V.getScaleByField(ot),mt=g.map(function(bt){return V.getCoordinate().convert({x:At.scale(bt[0]),y:gt.scale(bt[1])})});return Object(A.h)(mt,!1)},kt=function(g){var G=g.options,V=G.xField,$=G.yField,rt=G.data,ot=G.regressionLine,At=ot.type,gt=At===void 0?"linear":At,mt=ot.algorithm,bt;if(mt)bt=Object(e.isArray)(mt)?mt:mt(rt);else{var jt=xt[gt]().x(function(Dt){return Dt[V]}).y(function(Dt){return Dt[$]});bt=jt(rt)}return Ft(bt,g)},Ot=function(g){var G,V=g.meta,$=V===void 0?{}:V,rt=g.xField,ot=g.yField,At=g.data,gt=At[0][rt],mt=At[0][ot],bt=gt>0,jt=mt>0,Dt=function(Ct,Vt,Ht){var re=Object(e.get)($,[Ct,Vt]);if(Object(e.isNumber)(re))return re;if(Ht==="x"){var pe={min:bt?0:gt*2,max:bt?gt*2:0};return pe[Vt]}var ye={min:jt?0:mt*2,max:jt?mt*2:0};return ye[Vt]};return Object(at.a)(Object(at.a)({},$),(G={},G[rt]=Object(at.a)(Object(at.a)({},$[rt]),{min:Dt(rt,"min","x"),max:Dt(rt,"max","x")}),G[ot]=Object(at.a)(Object(at.a)({},$[ot]),{min:Dt(ot,"min","y"),max:Dt(ot,"max","y")}),G))};function X(h){var g=h.data,G=g===void 0?[]:g;return G.length===1?Object(A.b)({},h,{meta:Ot(h)}):h}function ct(h){var g=h.chart,G=h.options,V=G.data,$=G.type,rt=G.color,ot=G.shape,At=G.pointStyle,gt=G.shapeField,mt=G.colorField,bt=G.xField,jt=G.yField,Dt=G.sizeField,Ut=G.size,Ct=G.tooltip;Dt&&(Ut||(Ut=[2,8]),Object(e.isNumber)(Ut)&&(Ut=[Ut,Ut])),Ct&&!Ct.fields&&(Ct=Object(at.a)(Object(at.a)({},Ct),{fields:[bt,jt,mt,Dt,gt]})),g.data(V),Object(i.e)(Object(A.b)({},h,{options:{seriesField:mt,point:{color:rt,shape:ot,size:Ut,style:At},tooltip:Ct}}));var Vt=Object(A.c)(g,"point");return $&&Vt.adjust($),h}function dt(h){var g,G=h.options,V=G.data,$=G.xAxis,rt=G.yAxis,ot=G.xField,At=G.yField,gt=G;return V.length===1&&(gt=X(Object(A.b)({},G,{meta:Ot(G)}))),Object(A.e)(Object(v.f)((g={},g[ot]=$,g[At]=rt,g)))(Object(A.b)({},h,{options:gt}))}function pt(h){var g=h.chart,G=h.options,V=G.xAxis,$=G.yAxis,rt=G.xField,ot=G.yField;return g.axis(rt,V),g.axis(ot,$),h}function Mt(h){var g=h.chart,G=h.options,V=G.legend,$=G.colorField,rt=G.shapeField,ot=G.sizeField,At=Object(e.isBoolean)(V)?V:V||!!(rt||$);return At?(g.legend($||rt,V),ot&&g.legend(ot,!1)):g.legend(!1),h}function tt(h){var g=h.chart,G=h.options,V=G.label,$=G.yField,rt=Object(A.c)(g,"point");if(!V)rt.label(!1);else{var ot=V.callback,At=Object(at.c)(V,["callback"]);rt.label({fields:[$],callback:ot,cfg:Object(A.o)(At)})}return h}function lt(h){var g=h.options,G=g.quadrant,V=[];if(G){var $=G.xBaseline,rt=$===void 0?0:$,ot=G.yBaseline,At=ot===void 0?0:ot,gt=G.labels,mt=G.regionStyle,bt=G.lineStyle,jt=ft(rt,At),Dt=new Array(4).join(",").split(",");Dt.forEach(function(Ut,Ct){V.push(Object(at.a)(Object(at.a)({type:"region",top:!1},jt.regionStyle[Ct].position),{style:Object(A.b)({},jt.regionStyle[Ct].style,mt==null?void 0:mt[Ct])}),Object(at.a)({type:"text",top:!0},Object(A.b)({},jt.labelStyle[Ct],gt==null?void 0:gt[Ct])))}),V.push({type:"line",top:!1,start:["min",At],end:["max",At],style:Object(A.b)({},jt.lineStyle,bt)},{type:"line",top:!1,start:[rt,"min"],end:[rt,"max"],style:Object(A.b)({},jt.lineStyle,bt)})}return Object(A.e)(Object(v.b)(V))(h)}function it(h){var g=h.options,G=h.chart,V=g.regressionLine;if(V){var $=V.style,rt=V.top,ot=rt===void 0?!1:rt,At={stroke:"#9ba29a",lineWidth:2,opacity:.5};G.annotation().shape({top:ot,render:function(mt,bt){var jt=mt.addGroup({id:G.id+"-regression-line",name:"regression-line-group"}),Dt=kt({view:bt,options:g});jt.addShape("path",{name:"regression-line",attrs:Object(at.a)(Object(at.a)({path:Dt},At),$)})}})}return h}function U(h){var g=h.chart,G=h.options,V=G.tooltip;return V?g.tooltip(V):V===!1&&g.tooltip(!1),h}function P(h){return Object(A.e)(ct,dt,pt,Mt,U,tt,v.c,lt,v.a,v.j,it)(h)}var H=z("hag6"),k=function(h){Object(at.b)(g,h);function g(){var G=h!==null&&h.apply(this,arguments)||this;return G.type="point",G}return g.prototype.changeData=function(G){this.updateOption(X(Object(A.b)({},this.options,{data:G})));var V=this,$=V.options,rt=V.chart;dt({chart:rt,options:$}),this.chart.changeData(G)},g.prototype.getSchemaAdaptor=function(){return P},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}})},g}(a.a)},tKoa:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return i}),z.d(_t,"d",function(){return b}),z.d(_t,"e",function(){return S}),z.d(_t,"c",function(){return I}),z.d(_t,"f",function(){return y.a}),z.d(_t,"b",function(){return n});var at=z("mrSG"),a=z("5HRO"),A=z("YuPD"),e=z("WOQw");function i(s){var d=s.options,E=d.area,O=d.xField,C=d.yField,p=d.seriesField,x=d.smooth,T=d.tooltip,N=Object(a.a)(T,[O,C,p]),Y=N.fields,q=N.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"area",colorField:p,tooltipFields:Y,mapping:Object(at.a)({shape:x?"smooth":"area",tooltip:q},E)}})):s}var v=z("iTfj");function b(s){var d=s.options,E=d.line,O=d.stepType,C=d.xField,p=d.yField,x=d.seriesField,T=d.smooth,N=d.connectNulls,Y=d.tooltip,q=Object(a.a)(Y,[C,p,x]),nt=q.fields,vt=q.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"line",colorField:x,tooltipFields:nt,mapping:Object(v.deepMix)({shape:O||(T?"smooth":"line"),tooltip:vt},E),args:{connectNulls:N}}})):s}function S(s){var d=s.options,E=d.point,O=d.xField,C=d.yField,p=d.seriesField,x=d.sizeField,T=d.shapeField,N=d.tooltip,Y=Object(a.a)(N,[O,C,p,x,T]),q=Y.fields,nt=Y.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"point",colorField:p,shapeField:T,tooltipFields:q,mapping:Object(at.a)({tooltip:nt},E)}})):s}var f=z("Ihc8");function M(s){var d=s.chart,E=s.options,O=s.ext,C=E.seriesField,p=E.isGroup,x=E.isStack,T=E.marginRatio,N=E.widthRatio,Y=E.groupField,q=E.theme,nt=[];if(C&&(p&&nt.push({type:"dodge",dodgeBy:Y||C,marginRatio:T}),x&&nt.push({type:"stack",marginRatio:T})),nt.length&&(O==null?void 0:O.geometry)){var vt=O==null?void 0:O.geometry;vt.adjust(nt)}return Object(v.isNil)(N)||d.theme(Object(A.b)({},Object(v.isObject)(q)?q:Object(f.getTheme)(q),{columnWidthRatio:N})),s}function I(s){var d=s.options,E=d.xField,O=d.yField,C=d.interval,p=d.seriesField,x=d.tooltip,T=d.minColumnWidth,N=d.maxColumnWidth,Y=d.columnBackground,q=Object(a.a)(x,[E,O,p]),nt=q.fields,vt=q.formatter,ht=(C?Object(e.a)(Object(A.b)({},s,{options:{type:"interval",colorField:p,tooltipFields:nt,mapping:Object(at.a)({tooltip:vt},C),args:{minColumnWidth:T,maxColumnWidth:N,background:Y}}})):s).ext;return M(Object(at.a)(Object(at.a)({},s),{ext:ht}))}var y=z("KMYG");function n(s){var d=s.options,E=d.edge,O=d.xField,C=d.yField,p=d.seriesField,x=d.tooltip,T=Object(a.a)(x,[O,C,p]),N=T.fields,Y=T.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"edge",colorField:p,tooltipFields:N,mapping:Object(at.a)({tooltip:Y},E)}})):s}},tdXX:function(Un,_t){},"tvR+":function(Un,_t,z){"use strict";var at=z("DdT1"),a=z("I4jL"),A=z("IeU1"),e=z("CSvP");_t.a=function(){var i=a.a,v=!1,b=1,S=1,f=[0],M=e.a,I=e.a,y=e.a,n=e.a,s=e.a;function d(O){return O.x0=O.y0=0,O.x1=b,O.y1=S,O.eachBefore(E),f=[0],v&&O.eachBefore(at.a),O}function E(O){var C=f[O.depth],p=O.x0+C,x=O.y0+C,T=O.x1-C,N=O.y1-C;T<p&&(p=T=(p+T)/2),N<x&&(x=N=(x+N)/2),O.x0=p,O.y0=x,O.x1=T,O.y1=N,O.children&&(C=f[O.depth+1]=M(O)/2,p+=s(O)-C,x+=I(O)-C,T-=y(O)-C,N-=n(O)-C,T<p&&(p=T=(p+T)/2),N<x&&(x=N=(x+N)/2),i(O,p,x,T,N))}return d.round=function(O){return arguments.length?(v=!!O,d):v},d.size=function(O){return arguments.length?(b=+O[0],S=+O[1],d):[b,S]},d.tile=function(O){return arguments.length?(i=Object(A.b)(O),d):i},d.padding=function(O){return arguments.length?d.paddingInner(O).paddingOuter(O):d.paddingInner()},d.paddingInner=function(O){return arguments.length?(M=typeof O=="function"?O:Object(e.b)(+O),d):M},d.paddingOuter=function(O){return arguments.length?d.paddingTop(O).paddingRight(O).paddingBottom(O).paddingLeft(O):d.paddingTop()},d.paddingTop=function(O){return arguments.length?(I=typeof O=="function"?O:Object(e.b)(+O),d):I},d.paddingRight=function(O){return arguments.length?(y=typeof O=="function"?O:Object(e.b)(+O),d):y},d.paddingBottom=function(O){return arguments.length?(n=typeof O=="function"?O:Object(e.b)(+O),d):n},d.paddingLeft=function(O){return arguments.length?(s=typeof O=="function"?O:Object(e.b)(+O),d):s},d}},tvuL:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"catmullRomToBezier",function(){return v}),z.d(_t,"fillPath",function(){return ft}),z.d(_t,"fillPathByDiff",function(){return X}),z.d(_t,"formatPath",function(){return pt}),z.d(_t,"intersection",function(){return ht}),z.d(_t,"parsePathArray",function(){return s}),z.d(_t,"parsePathString",function(){return i}),z.d(_t,"pathToAbsolute",function(){return S}),z.d(_t,"pathToCurve",function(){return y}),z.d(_t,"rectPath",function(){return x});var at=z("iTfj"),a=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,A=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),i=function(tt){if(!tt)return null;if(Object(at.isArray)(tt))return tt;var lt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(tt).replace(A,function(U,P,H){var k=[],h=P.toLowerCase();if(H.replace(e,function(g,G){G&&k.push(+G)}),h==="m"&&k.length>2&&(it.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&it.push([P,k[0]]),h==="r")it.push([P].concat(k));else for(;k.length>=lt[h]&&(it.push([P].concat(k.splice(0,lt[h]))),!!lt[h]););return tt}),it},v=function(tt,lt){for(var it=[],U=0,P=tt.length;P-2*!lt>U;U+=2){var H=[{x:+tt[U-2],y:+tt[U-1]},{x:+tt[U],y:+tt[U+1]},{x:+tt[U+2],y:+tt[U+3]},{x:+tt[U+4],y:+tt[U+5]}];lt?U?P-4===U?H[3]={x:+tt[0],y:+tt[1]}:P-2===U&&(H[2]={x:+tt[0],y:+tt[1]},H[3]={x:+tt[2],y:+tt[3]}):H[0]={x:+tt[P-2],y:+tt[P-1]}:P-4===U?H[3]=H[2]:U||(H[0]={x:+tt[U],y:+tt[U+1]}),it.push(["C",(-H[0].x+6*H[1].x+H[2].x)/6,(-H[0].y+6*H[1].y+H[2].y)/6,(H[1].x+6*H[2].x-H[3].x)/6,(H[1].y+6*H[2].y-H[3].y)/6,H[2].x,H[2].y])}return it},b=function(tt,lt,it,U,P){var H=[];if(P===null&&U===null&&(U=it),tt=+tt,lt=+lt,it=+it,U=+U,P!==null){var k=Math.PI/180,h=tt+it*Math.cos(-U*k),g=tt+it*Math.cos(-P*k),G=lt+it*Math.sin(-U*k),V=lt+it*Math.sin(-P*k);H=[["M",h,G],["A",it,it,0,+(P-U>180),0,g,V]]}else H=[["M",tt,lt],["m",0,-U],["a",it,U,0,1,1,0,2*U],["a",it,U,0,1,1,0,-2*U],["z"]];return H},S=function(tt){if(tt=i(tt),!tt||!tt.length)return[["M",0,0]];var lt=[],it=0,U=0,P=0,H=0,k=0,h,g;tt[0][0]==="M"&&(it=+tt[0][1],U=+tt[0][2],P=it,H=U,k++,lt[0]=["M",it,U]);for(var G=tt.length===3&&tt[0][0]==="M"&&tt[1][0].toUpperCase()==="R"&&tt[2][0].toUpperCase()==="Z",V=void 0,$=void 0,rt=k,ot=tt.length;rt<ot;rt++){if(lt.push(V=[]),$=tt[rt],h=$[0],h!==h.toUpperCase())switch(V[0]=h.toUpperCase(),V[0]){case"A":V[1]=$[1],V[2]=$[2],V[3]=$[3],V[4]=$[4],V[5]=$[5],V[6]=+$[6]+it,V[7]=+$[7]+U;break;case"V":V[1]=+$[1]+U;break;case"H":V[1]=+$[1]+it;break;case"R":g=[it,U].concat($.slice(1));for(var At=2,gt=g.length;At<gt;At++)g[At]=+g[At]+it,g[++At]=+g[At]+U;lt.pop(),lt=lt.concat(v(g,G));break;case"O":lt.pop(),g=b(it,U,$[1],$[2]),g.push(g[0]),lt=lt.concat(g);break;case"U":lt.pop(),lt=lt.concat(b(it,U,$[1],$[2],$[3])),V=["U"].concat(lt[lt.length-1].slice(-2));break;case"M":P=+$[1]+it,H=+$[2]+U;break;default:for(var At=1,gt=$.length;At<gt;At++)V[At]=+$[At]+(At%2?it:U)}else if(h==="R")g=[it,U].concat($.slice(1)),lt.pop(),lt=lt.concat(v(g,G)),V=["R"].concat($.slice(-2));else if(h==="O")lt.pop(),g=b(it,U,$[1],$[2]),g.push(g[0]),lt=lt.concat(g);else if(h==="U")lt.pop(),lt=lt.concat(b(it,U,$[1],$[2],$[3])),V=["U"].concat(lt[lt.length-1].slice(-2));else for(var mt=0,bt=$.length;mt<bt;mt++)V[mt]=$[mt];if(h=h.toUpperCase(),h!=="O")switch(V[0]){case"Z":it=+P,U=+H;break;case"H":it=V[1];break;case"V":U=V[1];break;case"M":P=V[V.length-2],H=V[V.length-1];break;default:it=V[V.length-2],U=V[V.length-1]}}return lt},f=function(tt,lt,it,U){return[tt,lt,it,U,it,U]},M=function(tt,lt,it,U,P,H){var k=1/3,h=2/3;return[k*tt+h*it,k*lt+h*U,k*P+h*it,k*H+h*U,P,H]},I=function Mt(tt,lt,it,U,P,H,k,h,g,G){it===U&&(it+=1);var V=Math.PI*120/180,$=Math.PI/180*(+P||0),rt=[],ot,At,gt,mt,bt,jt=function(Vr,ti,hi){var Fi=Vr*Math.cos(hi)-ti*Math.sin(hi),to=Vr*Math.sin(hi)+ti*Math.cos(hi);return{x:Fi,y:to}};if(G)At=G[0],gt=G[1],mt=G[2],bt=G[3];else{ot=jt(tt,lt,-$),tt=ot.x,lt=ot.y,ot=jt(h,g,-$),h=ot.x,g=ot.y,tt===h&&lt===g&&(h+=1,g+=1);var Dt=(tt-h)/2,Ut=(lt-g)/2,Ct=Dt*Dt/(it*it)+Ut*Ut/(U*U);Ct>1&&(Ct=Math.sqrt(Ct),it=Ct*it,U=Ct*U);var Vt=it*it,Ht=U*U,re=(H===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));mt=re*it*Ut/U+(tt+h)/2,bt=re*-U*Dt/it+(lt+g)/2,At=Math.asin(((lt-bt)/U).toFixed(9)),gt=Math.asin(((g-bt)/U).toFixed(9)),At=tt<mt?Math.PI-At:At,gt=h<mt?Math.PI-gt:gt,At<0&&(At=Math.PI*2+At),gt<0&&(gt=Math.PI*2+gt),k&&At>gt&&(At=At-Math.PI*2),!k&&gt>At&&(gt=gt-Math.PI*2)}var pe=gt-At;if(Math.abs(pe)>V){var ye=gt,we=h,Ne=g;gt=At+V*(k&&gt>At?1:-1),h=mt+it*Math.cos(gt),g=bt+U*Math.sin(gt),rt=Mt(h,g,it,U,P,0,k,we,Ne,[gt,ye,mt,bt])}pe=gt-At;var Ke=Math.cos(At),pn=Math.sin(At),hn=Math.cos(gt),kn=Math.sin(gt),Tn=Math.tan(pe/4),Rn=4/3*it*Tn,Mn=4/3*U*Tn,Cn=[tt,lt],_n=[tt+Rn*pn,lt-Mn*Ke],Kn=[h+Rn*kn,g-Mn*hn],tr=[h,g];if(_n[0]=2*Cn[0]-_n[0],_n[1]=2*Cn[1]-_n[1],G)return[_n,Kn,tr].concat(rt);rt=[_n,Kn,tr].concat(rt).join().split(",");for(var or=[],nr=0,er=rt.length;nr<er;nr++)or[nr]=nr%2?jt(rt[nr-1],rt[nr],$).y:jt(rt[nr],rt[nr+1],$).x;return or},y=function(tt,lt){var it=S(tt),U=lt&&S(lt),P={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},H={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=[],h=[],g="",G="",V,$=function(Ut,Ct,Vt){var Ht,re;if(!Ut)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(!(Ut[0]in{T:1,Q:1})&&(Ct.qx=Ct.qy=null),Ut[0]){case"M":Ct.X=Ut[1],Ct.Y=Ut[2];break;case"A":Ut=["C"].concat(I.apply(0,[Ct.x,Ct.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=Ct.x*2-Ct.bx,re=Ct.y*2-Ct.by):(Ht=Ct.x,re=Ct.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(Ct.qx=Ct.x*2-Ct.qx,Ct.qy=Ct.y*2-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),Ut=["C"].concat(M(Ct.x,Ct.y,Ct.qx,Ct.qy,Ut[1],Ut[2]));break;case"Q":Ct.qx=Ut[1],Ct.qy=Ut[2],Ut=["C"].concat(M(Ct.x,Ct.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(f(Ct.x,Ct.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(f(Ct.x,Ct.y,Ut[1],Ct.y));break;case"V":Ut=["C"].concat(f(Ct.x,Ct.y,Ct.x,Ut[1]));break;case"Z":Ut=["C"].concat(f(Ct.x,Ct.y,Ct.X,Ct.Y));break;default:break}return Ut},rt=function(Ut,Ct){if(Ut[Ct].length>7){Ut[Ct].shift();for(var Vt=Ut[Ct];Vt.length;)k[Ct]="A",U&&(h[Ct]="A"),Ut.splice(Ct++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(Ct,1),V=Math.max(it.length,U&&U.length||0)}},ot=function(Ut,Ct,Vt,Ht,re){Ut&&Ct&&Ut[re][0]==="M"&&Ct[re][0]!=="M"&&(Ct.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],V=Math.max(it.length,U&&U.length||0))};V=Math.max(it.length,U&&U.length||0);for(var At=0;At<V;At++){it[At]&&(g=it[At][0]),g!=="C"&&(k[At]=g,At&&(G=k[At-1])),it[At]=$(it[At],P,G),k[At]!=="A"&&g==="C"&&(k[At]="C"),rt(it,At),U&&(U[At]&&(g=U[At][0]),g!=="C"&&(h[At]=g,At&&(G=h[At-1])),U[At]=$(U[At],H,G),h[At]!=="A"&&g==="C"&&(h[At]="C"),rt(U,At)),ot(it,U,P,H,At),ot(U,it,H,P,At);var gt=it[At],mt=U&&U[At],bt=gt.length,jt=U&&mt.length;P.x=gt[bt-2],P.y=gt[bt-1],P.bx=parseFloat(gt[bt-4])||P.x,P.by=parseFloat(gt[bt-3])||P.y,H.bx=U&&(parseFloat(mt[jt-4])||H.x),H.by=U&&(parseFloat(mt[jt-3])||H.y),H.x=U&&mt[jt-2],H.y=U&&mt[jt-1]}return U?[it,U]:it},n=/,?([a-z]),?/gi,s=function(tt){return tt.join(",").replace(n,"$1")},d=function(tt,lt,it,U,P){var H=-3*lt+9*it-9*U+3*P,k=tt*H+6*lt-12*it+6*U;return tt*k-3*lt+3*it},E=function(tt,lt,it,U,P,H,k,h,g){g===null&&(g=1),g=g>1?1:g<0?0:g;for(var G=g/2,V=12,$=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],rt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ot=0,At=0;At<V;At++){var gt=G*$[At]+G,mt=d(gt,tt,it,P,k),bt=d(gt,lt,U,H,h),jt=mt*mt+bt*bt;ot+=rt[At]*Math.sqrt(jt)}return G*ot},O=function(tt,lt,it,U,P,H,k,h){for(var g=[],G=[[],[]],V,$,rt,ot,At=0;At<2;++At){if(At===0?($=6*tt-12*it+6*P,V=-3*tt+9*it-9*P+3*k,rt=3*it-3*tt):($=6*lt-12*U+6*H,V=-3*lt+9*U-9*H+3*h,rt=3*U-3*lt),Math.abs(V)<1e-12){if(Math.abs($)<1e-12)continue;ot=-rt/$,ot>0&&ot<1&&g.push(ot);continue}var gt=$*$-4*rt*V,mt=Math.sqrt(gt);if(!(gt<0)){var bt=(-$+mt)/(2*V);bt>0&&bt<1&&g.push(bt);var jt=(-$-mt)/(2*V);jt>0&&jt<1&&g.push(jt)}}for(var Dt=g.length,Ut=Dt,Ct;Dt--;)ot=g[Dt],Ct=1-ot,G[0][Dt]=Ct*Ct*Ct*tt+3*Ct*Ct*ot*it+3*Ct*ot*ot*P+ot*ot*ot*k,G[1][Dt]=Ct*Ct*Ct*lt+3*Ct*Ct*ot*U+3*Ct*ot*ot*H+ot*ot*ot*h;return G[0][Ut]=tt,G[1][Ut]=lt,G[0][Ut+1]=k,G[1][Ut+1]=h,G[0].length=G[1].length=Ut+2,{min:{x:Math.min.apply(0,G[0]),y:Math.min.apply(0,G[1])},max:{x:Math.max.apply(0,G[0]),y:Math.max.apply(0,G[1])}}},C=function(tt,lt,it,U,P,H,k,h){if(!(Math.max(tt,it)<Math.min(P,k)||Math.min(tt,it)>Math.max(P,k)||Math.max(lt,U)<Math.min(H,h)||Math.min(lt,U)>Math.max(H,h))){var g=(tt*U-lt*it)*(P-k)-(tt-it)*(P*h-H*k),G=(tt*U-lt*it)*(H-h)-(lt-U)*(P*h-H*k),V=(tt-it)*(H-h)-(lt-U)*(P-k);if(!!V){var $=g/V,rt=G/V,ot=+$.toFixed(2),At=+rt.toFixed(2);if(!(ot<+Math.min(tt,it).toFixed(2)||ot>+Math.max(tt,it).toFixed(2)||ot<+Math.min(P,k).toFixed(2)||ot>+Math.max(P,k).toFixed(2)||At<+Math.min(lt,U).toFixed(2)||At>+Math.max(lt,U).toFixed(2)||At<+Math.min(H,h).toFixed(2)||At>+Math.max(H,h).toFixed(2)))return{x:$,y:rt}}}},p=function(tt,lt,it){return lt>=tt.x&&lt<=tt.x+tt.width&&it>=tt.y&&it<=tt.y+tt.height},x=function(tt,lt,it,U,P){if(P)return[["M",+tt+ +P,lt],["l",it-P*2,0],["a",P,P,0,0,1,P,P],["l",0,U-P*2],["a",P,P,0,0,1,-P,P],["l",P*2-it,0],["a",P,P,0,0,1,-P,-P],["l",0,P*2-U],["a",P,P,0,0,1,P,-P],["z"]];var H=[["M",tt,lt],["l",it,0],["l",0,U],["l",-it,0],["z"]];return H.parsePathArray=s,H},T=function(tt,lt,it,U){return tt===null&&(tt=lt=it=U=0),lt===null&&(lt=tt.y,it=tt.width,U=tt.height,tt=tt.x),{x:tt,y:lt,width:it,w:it,height:U,h:U,x2:tt+it,y2:lt+U,cx:tt+it/2,cy:lt+U/2,r1:Math.min(it,U)/2,r2:Math.max(it,U)/2,r0:Math.sqrt(it*it+U*U)/2,path:x(tt,lt,it,U),vb:[tt,lt,it,U].join(" ")}},N=function(tt,lt){return tt=T(tt),lt=T(lt),p(lt,tt.x,tt.y)||p(lt,tt.x2,tt.y)||p(lt,tt.x,tt.y2)||p(lt,tt.x2,tt.y2)||p(tt,lt.x,lt.y)||p(tt,lt.x2,lt.y)||p(tt,lt.x,lt.y2)||p(tt,lt.x2,lt.y2)||(tt.x<lt.x2&&tt.x>lt.x||lt.x<tt.x2&&lt.x>tt.x)&&(tt.y<lt.y2&&tt.y>lt.y||lt.y<tt.y2&&lt.y>tt.y)},Y=function(tt,lt,it,U,P,H,k,h){Object(at.isArray)(tt)||(tt=[tt,lt,it,U,P,H,k,h]);var g=O.apply(null,tt);return T(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},q=function(tt,lt,it,U,P,H,k,h,g){var G=1-g,V=Math.pow(G,3),$=Math.pow(G,2),rt=g*g,ot=rt*g,At=V*tt+$*3*g*it+G*3*g*g*P+ot*k,gt=V*lt+$*3*g*U+G*3*g*g*H+ot*h,mt=tt+2*g*(it-tt)+rt*(P-2*it+tt),bt=lt+2*g*(U-lt)+rt*(H-2*U+lt),jt=it+2*g*(P-it)+rt*(k-2*P+it),Dt=U+2*g*(H-U)+rt*(h-2*H+U),Ut=G*tt+g*it,Ct=G*lt+g*U,Vt=G*P+g*k,Ht=G*H+g*h,re=90-Math.atan2(mt-jt,bt-Dt)*180/Math.PI;return{x:At,y:gt,m:{x:mt,y:bt},n:{x:jt,y:Dt},start:{x:Ut,y:Ct},end:{x:Vt,y:Ht},alpha:re}},nt=function(tt,lt,it){var U=Y(tt),P=Y(lt);if(!N(U,P))return it?0:[];for(var H=E.apply(0,tt),k=E.apply(0,lt),h=~~(H/8),g=~~(k/8),G=[],V=[],$={},rt=it?0:[],ot=0;ot<h+1;ot++){var At=q.apply(0,tt.concat(ot/h));G.push({x:At.x,y:At.y,t:ot/h})}for(var ot=0;ot<g+1;ot++){var At=q.apply(0,lt.concat(ot/g));V.push({x:At.x,y:At.y,t:ot/g})}for(var ot=0;ot<h;ot++)for(var gt=0;gt<g;gt++){var mt=G[ot],bt=G[ot+1],jt=V[gt],Dt=V[gt+1],Ut=Math.abs(bt.x-mt.x)<.001?"y":"x",Ct=Math.abs(Dt.x-jt.x)<.001?"y":"x",Vt=C(mt.x,mt.y,bt.x,bt.y,jt.x,jt.y,Dt.x,Dt.y);if(Vt){if($[Vt.x.toFixed(4)]===Vt.y.toFixed(4))continue;$[Vt.x.toFixed(4)]=Vt.y.toFixed(4);var Ht=mt.t+Math.abs((Vt[Ut]-mt[Ut])/(bt[Ut]-mt[Ut]))*(bt.t-mt.t),re=jt.t+Math.abs((Vt[Ct]-jt[Ct])/(Dt[Ct]-jt[Ct]))*(Dt.t-jt.t);Ht>=0&&Ht<=1&&re>=0&&re<=1&&(it?rt+=1:rt.push({x:Vt.x,y:Vt.y,t1:Ht,t2:re}))}}return rt},vt=function(tt,lt,it){tt=y(tt),lt=y(lt);for(var U,P,H,k,h,g,G,V,$,rt,ot=it?0:[],At=0,gt=tt.length;At<gt;At++){var mt=tt[At];if(mt[0]==="M")U=h=mt[1],P=g=mt[2];else{mt[0]==="C"?($=[U,P].concat(mt.slice(1)),U=$[6],P=$[7]):($=[U,P,U,P,h,g,h,g],U=h,P=g);for(var bt=0,jt=lt.length;bt<jt;bt++){var Dt=lt[bt];if(Dt[0]==="M")H=G=Dt[1],k=V=Dt[2];else{Dt[0]==="C"?(rt=[H,k].concat(Dt.slice(1)),H=rt[6],k=rt[7]):(rt=[H,k,H,k,G,V,G,V],H=G,k=V);var Ut=nt($,rt,it);if(it)ot+=Ut;else{for(var Ct=0,Vt=Ut.length;Ct<Vt;Ct++)Ut[Ct].segment1=At,Ut[Ct].segment2=bt,Ut[Ct].bez1=$,Ut[Ct].bez2=rt;ot=ot.concat(Ut)}}}}}return ot},ht=function(tt,lt){return vt(tt,lt)};function St(Mt,tt){var lt=[],it=[];function U(P,H){if(P.length===1)lt.push(P[0]),it.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&lt.push(P[0]),h===P.length-2&&it.push(P[h+1]),k[h]=[(1-H)*P[h][0]+H*P[h+1][0],(1-H)*P[h][1]+H*P[h+1][1]];U(k,H)}}return Mt.length&&U(Mt,tt),{left:lt,right:it.reverse()}}function wt(Mt,tt,lt){var it=[[Mt[1],Mt[2]]];lt=lt||2;var U=[];tt[0]==="A"?(it.push(tt[6]),it.push(tt[7])):tt[0]==="C"?(it.push([tt[1],tt[2]]),it.push([tt[3],tt[4]]),it.push([tt[5],tt[6]])):tt[0]==="S"||tt[0]==="Q"?(it.push([tt[1],tt[2]]),it.push([tt[3],tt[4]])):it.push([tt[1],tt[2]]);for(var P=it,H=1/lt,k=0;k<lt-1;k++){var h=H/(1-H*k),g=St(P,h);U.push(g.left),P=g.right}U.push(P);var G=U.map(function(V){var $=[];return V.length===4&&($.push("C"),$=$.concat(V[2])),V.length>=3&&(V.length===3&&$.push("Q"),$=$.concat(V[1])),V.length===2&&$.push("L"),$=$.concat(V[V.length-1]),$});return G}var xt=function(tt,lt,it){if(it===1)return[[].concat(tt)];var U=[];if(lt[0]==="L"||lt[0]==="C"||lt[0]==="Q")U=U.concat(wt(tt,lt,it));else{var P=[].concat(tt);P[0]==="M"&&(P[0]="L");for(var H=0;H<=it-1;H++)U.push(P)}return U},ft=function(tt,lt){if(tt.length===1)return tt;var it=tt.length-1,U=lt.length-1,P=it/U,H=[];if(tt.length===1&&tt[0][0]==="M"){for(var k=0;k<U-it;k++)tt.push(tt[0]);return tt}for(var k=0;k<U;k++){var h=Math.floor(P*k);H[h]=(H[h]||0)+1}var g=H.reduce(function(G,V,$){return $===it?G.concat(tt[it]):G.concat(xt(tt[$],tt[$+1],V))},[]);return g.unshift(tt[0]),(lt[U]==="Z"||lt[U]==="z")&&g.push("Z"),g},Ft=function(tt,lt){if(tt.length!==lt.length)return!1;var it=!0;return Object(at.each)(tt,function(U,P){if(U!==lt[P])return it=!1,!1}),it};function kt(Mt,tt,lt){var it=null,U=lt;return tt<U&&(U=tt,it="add"),Mt<U&&(U=Mt,it="del"),{type:it,min:U}}var Ot=function(tt,lt){var it=tt.length,U=lt.length,P,H,k=0;if(it===0||U===0)return null;for(var h=[],g=0;g<=it;g++)h[g]=[],h[g][0]={min:g};for(var G=0;G<=U;G++)h[0][G]={min:G};for(var g=1;g<=it;g++){P=tt[g-1];for(var G=1;G<=U;G++){H=lt[G-1],Ft(P,H)?k=0:k=1;var V=h[g-1][G].min+1,$=h[g][G-1].min+1,rt=h[g-1][G-1].min+k;h[g][G]=kt(V,$,rt)}}return h},X=function(tt,lt){var it=Ot(tt,lt),U=tt.length,P=lt.length,H=[],k=1,h=1;if(it[U][P].min!==U){for(var g=1;g<=U;g++){var G=it[g][g].min;h=g;for(var V=k;V<=P;V++)it[g][V].min<G&&(G=it[g][V].min,h=V);k=h,it[g][k].type&&H.push({index:g-1,type:it[g][k].type})}for(var g=H.length-1;g>=0;g--)k=H[g].index,H[g].type==="add"?tt.splice(k,0,[].concat(tt[k])):tt.splice(k,1)}U=tt.length;var $=P-U;if(U<P)for(var g=0;g<$;g++)tt[U-1][0]==="z"||tt[U-1][0]==="Z"?tt.splice(U-2,0,tt[U-2]):tt.push(tt[U-1]),U+=1;return tt};function ct(Mt,tt,lt){for(var it=[].concat(Mt),U,P=1/(lt+1),H=dt(tt)[0],k=1;k<=lt;k++)P*=k,U=Math.floor(Mt.length*P),U===0?it.unshift([H[0]*P+Mt[U][0]*(1-P),H[1]*P+Mt[U][1]*(1-P)]):it.splice(U,0,[H[0]*P+Mt[U][0]*(1-P),H[1]*P+Mt[U][1]*(1-P)]);return it}function dt(Mt){var tt=[];switch(Mt[0]){case"M":tt.push([Mt[1],Mt[2]]);break;case"L":tt.push([Mt[1],Mt[2]]);break;case"A":tt.push([Mt[6],Mt[7]]);break;case"Q":tt.push([Mt[3],Mt[4]]),tt.push([Mt[1],Mt[2]]);break;case"T":tt.push([Mt[1],Mt[2]]);break;case"C":tt.push([Mt[5],Mt[6]]),tt.push([Mt[1],Mt[2]]),tt.push([Mt[3],Mt[4]]);break;case"S":tt.push([Mt[3],Mt[4]]),tt.push([Mt[1],Mt[2]]);break;case"H":tt.push([Mt[1],Mt[1]]);break;case"V":tt.push([Mt[1],Mt[1]]);break;default:}return tt}var pt=function(tt,lt){if(tt.length<=1)return tt;for(var it,U=0;U<lt.length;U++)if(tt[U][0]!==lt[U][0])switch(it=dt(tt[U]),lt[U][0]){case"M":tt[U]=["M"].concat(it[0]);break;case"L":tt[U]=["L"].concat(it[0]);break;case"A":tt[U]=[].concat(lt[U]),tt[U][6]=it[0][0],tt[U][7]=it[0][1];break;case"Q":if(it.length<2)if(U>0)it=ct(it,tt[U-1],1);else{tt[U]=lt[U];break}tt[U]=["Q"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"T":tt[U]=["T"].concat(it[0]);break;case"C":if(it.length<3)if(U>0)it=ct(it,tt[U-1],2);else{tt[U]=lt[U];break}tt[U]=["C"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"S":if(it.length<2)if(U>0)it=ct(it,tt[U-1],1);else{tt[U]=lt[U];break}tt[U]=["S"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;default:tt[U]=lt[U]}return tt}},u3os:function(Un,_t,z){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.ver=_t.clear=_t.bind=void 0;var at=z("P4Qj"),a=function(v,b){var S=(0,at.getSensor)(v);return S.bind(b),function(){S.unbind(b)}};_t.bind=a;var A=function(v){var b=(0,at.getSensor)(v);(0,at.removeSensor)(b)};_t.clear=A;var e="1.0.1";_t.ver=e},u60a:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"CONTAINER_CLASS",function(){return at}),z.d(_t,"TITLE_CLASS",function(){return a}),z.d(_t,"LIST_CLASS",function(){return A}),z.d(_t,"LIST_ITEM_CLASS",function(){return e}),z.d(_t,"MARKER_CLASS",function(){return i}),z.d(_t,"VALUE_CLASS",function(){return v}),z.d(_t,"NAME_CLASS",function(){return b}),z.d(_t,"CROSSHAIR_X",function(){return S}),z.d(_t,"CROSSHAIR_Y",function(){return f});var at="g2-tooltip",a="g2-tooltip-title",A="g2-tooltip-list",e="g2-tooltip-list-item",i="g2-tooltip-marker",v="g2-tooltip-value",b="g2-tooltip-name",S="g2-tooltip-crosshair-x",f="g2-tooltip-crosshair-y"},"u9/z":function(Un,_t,z){"use strict";z.d(_t,"b",function(){return b}),z.d(_t,"a",function(){return f});var at=z("iTfj"),a=z("YuPD"),A=z("w02o"),e=z("tKoa"),i=z("SZbK"),v=z("B3DA");function b(M){var I=M.chart,y=M.options,n=y.percent,s=y.progressStyle,d=y.color,E=y.barWidthRatio;I.data(Object(v.a)(n));var O=Object(a.b)({},M,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:E,interval:{style:s,color:Object(at.isString)(d)?[d,i.a[1]]:d}}});return Object(e.c)(O),I.tooltip(!1),I.axis(!1),I.legend(!1),M}function S(M){var I=M.chart;return I.coordinate("rect").transpose(),M}function f(M){return Object(a.e)(b,Object(A.f)({}),S,A.a,A.j,Object(A.b)())(M)}},u9VJ:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return v});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),i=z("DMQx"),v=function(b){Object(at.b)(S,b);function S(){var f=b!==null&&b.apply(this,arguments)||this;return f.type="column",f}return S.prototype.changeData=function(f){this.updateOption({data:f});var M=this.options,I=M.yField,y=M.xField,n=M.isPercent;this.chart.changeData(Object(e.a)(f,I,y,I,n))},S.prototype.getDefaultOptions=function(){return Object(A.b)({},b.prototype.getDefaultOptions.call(this),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},S.prototype.getSchemaAdaptor=function(){return i.a},S}(a.a)},uCX8:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Line",function(){return M}),z.d(_t,"Text",function(){return y}),z.d(_t,"Arc",function(){return s}),z.d(_t,"Region",function(){return E}),z.d(_t,"Image",function(){return C}),z.d(_t,"DataMarker",function(){return x}),z.d(_t,"DataRegion",function(){return N}),z.d(_t,"RegionFilter",function(){return q}),z.d(_t,"Shape",function(){return vt}),z.d(_t,"Html",function(){return xt});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e=z("BgvD"),i=z("jqgP"),v=z("5UbV");function b(ft,Ft){var kt=Ft.x,Ot=Ft.y,X=Ft.content,ct=Ft.style,dt=Ft.id,pt=Ft.name,Mt=Ft.rotate,tt=Ft.maxLength,lt=Ft.autoEllipsis,it=Ft.isVertical,U=Ft.ellipsisPosition,P=Ft.background,H=ft.addGroup({id:dt+"-group",name:pt+"-group",attrs:{x:kt,y:Ot}}),k=H.addShape({type:"text",id:dt,name:pt,attrs:Object(at.a)({x:0,y:0,text:X},ct)}),h=Object(v.c)(Object(a.get)(P,"padding",0));if(tt&&lt){var g=tt-(h[1]+h[3]);Object(e.a)(!it,k,g,U)}if(P){var G=Object(a.get)(P,"style",{}),V=k.getCanvasBBox(),$=V.minX,rt=V.minY,ot=V.width,At=V.height,gt=H.addShape("rect",{id:dt+"-bg",name:dt+"-bg",attrs:Object(at.a)({x:$-h[3],y:rt-h[0],width:ot+h[1]+h[3],height:At+h[0]+h[2]},G)});gt.toBack()}Object(i.c)(H,kt,Ot),Object(i.b)(H,Mt,kt,Ot)}var S=z("L16w"),f=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:S.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:S.a.lineColor,lineWidth:1}}}})},Ft.prototype.renderInner=function(kt){this.renderLine(kt),this.get("text")&&this.renderLabel(kt)},Ft.prototype.renderLine=function(kt){var Ot=this.get("start"),X=this.get("end"),ct=this.get("style");this.addShape(kt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Object(at.a)({x1:Ot.x,y1:Ot.y,x2:X.x,y2:X.y},ct)})},Ft.prototype.getLabelPoint=function(kt,Ot,X){var ct;return X==="start"?ct=0:X==="center"?ct=.5:Object(a.isString)(X)&&X.indexOf("%")!==-1?ct=parseInt(X,10)/100:Object(a.isNumber)(X)?ct=X:ct=1,(ct>1||ct<0)&&(ct=1),{x:Object(v.g)(kt.x,Ot.x,ct),y:Object(v.g)(kt.y,Ot.y,ct)}},Ft.prototype.renderLabel=function(kt){var Ot=this.get("text"),X=this.get("start"),ct=this.get("end"),dt=Ot.position,pt=Ot.content,Mt=Ot.style,tt=Ot.offsetX,lt=Ot.offsetY,it=Ot.autoRotate,U=Ot.maxLength,P=Ot.autoEllipsis,H=Ot.ellipsisPosition,k=Ot.background,h=Ot.isVertical,g=h===void 0?!1:h,G=this.getLabelPoint(X,ct,dt),V=G.x+tt,$=G.y+lt,rt={id:this.getElementId("line-text"),name:"annotation-line-text",x:V,y:$,content:pt,style:Mt,maxLength:U,autoEllipsis:P,ellipsisPosition:H,background:k,isVertical:g};if(it){var ot=[ct.x-X.x,ct.y-X.y];rt.rotate=Math.atan2(ot[1],ot[0])}b(kt,rt)},Ft}(A.a),M=f,I=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:S.a.fontFamily}}})},Ft.prototype.setLocation=function(kt){this.set("x",kt.x),this.set("y",kt.y),this.resetLocation()},Ft.prototype.renderInner=function(kt){var Ot=this.getLocation(),X=Ot.x,ct=Ot.y,dt=this.get("content"),pt=this.get("style"),Mt=this.getElementId("text"),tt=this.get("name")+"-text",lt=this.get("maxLength"),it=this.get("autoEllipsis"),U=this.get("isVertical"),P=this.get("ellipsisPosition"),H=this.get("background"),k=this.get("rotate"),h={id:Mt,name:tt,x:X,y:ct,content:dt,style:pt,maxLength:lt,autoEllipsis:it,isVertical:U,ellipsisPosition:P,background:H,rotate:k};b(kt,h)},Ft.prototype.resetLocation=function(){var kt=this.getElementByLocalId("text-group");if(kt){var Ot=this.getLocation(),X=Ot.x,ct=Ot.y,dt=this.get("rotate");Object(i.c)(kt,X,ct),Object(i.b)(kt,dt,X,ct)}},Ft}(A.a),y=I,n=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},Ft.prototype.renderInner=function(kt){this.renderArc(kt)},Ft.prototype.getArcPath=function(){var kt=this.getLocation(),Ot=kt.center,X=kt.radius,ct=kt.startAngle,dt=kt.endAngle,pt=Object(v.e)(Ot,X,ct),Mt=Object(v.e)(Ot,X,dt),tt=dt-ct>Math.PI?1:0,lt=[["M",pt.x,pt.y]];if(dt-ct==Math.PI*2){var it=Object(v.e)(Ot,X,ct+Math.PI);lt.push(["A",X,X,0,tt,1,it.x,it.y]),lt.push(["A",X,X,0,tt,1,Mt.x,Mt.y])}else lt.push(["A",X,X,0,tt,1,Mt.x,Mt.y]);return lt},Ft.prototype.renderArc=function(kt){var Ot=this.getArcPath(),X=this.get("style");this.addShape(kt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Object(at.a)({path:Ot},X)})},Ft}(A.a),s=n,d=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}}})},Ft.prototype.renderInner=function(kt){this.renderRegion(kt)},Ft.prototype.renderRegion=function(kt){var Ot=this.get("start"),X=this.get("end"),ct=this.get("style"),dt=Object(v.k)({start:Ot,end:X});this.addShape(kt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({x:dt.x,y:dt.y,width:dt.width,height:dt.height},ct)})},Ft}(A.a),E=d,O=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},Ft.prototype.renderInner=function(kt){this.renderImage(kt)},Ft.prototype.getImageAttrs=function(){var kt=this.get("start"),Ot=this.get("end"),X=this.get("style"),ct=Object(v.k)({start:kt,end:Ot}),dt=this.get("src");return Object(at.a)({x:ct.x,y:ct.y,img:dt,width:ct.width,height:ct.height},X)},Ft.prototype.renderImage=function(kt){this.addShape(kt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},Ft}(A.a),C=O,p=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:S.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:S.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:S.a.fontFamily}}}})},Ft.prototype.renderInner=function(kt){Object(a.get)(this.get("line"),"display")&&this.renderLine(kt),Object(a.get)(this.get("text"),"display")&&this.renderText(kt),Object(a.get)(this.get("point"),"display")&&this.renderPoint(kt),this.get("autoAdjust")&&this.autoAdjust(kt)},Ft.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},Ft.prototype.renderPoint=function(kt){var Ot=this.getShapeAttrs().point;this.addShape(kt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:Ot})},Ft.prototype.renderLine=function(kt){var Ot=this.getShapeAttrs().line;this.addShape(kt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:Ot})},Ft.prototype.renderText=function(kt){var Ot=this.getShapeAttrs().text,X=Ot.x,ct=Ot.y,dt=Ot.text,pt=Object(at.c)(Ot,["x","y","text"]),Mt=this.get("text"),tt=Mt.background,lt=Mt.maxLength,it=Mt.autoEllipsis,U=Mt.isVertival,P=Mt.ellipsisPosition,H={x:X,y:ct,id:this.getElementId("text"),name:"annotation-text",content:dt,style:pt,background:tt,maxLength:lt,autoEllipsis:it,isVertival:U,ellipsisPosition:P};b(kt,H)},Ft.prototype.autoAdjust=function(kt){var Ot=this.get("direction"),X=this.get("x"),ct=this.get("y"),dt=Object(a.get)(this.get("line"),"length",0),pt=this.get("coordinateBBox"),Mt=kt.getBBox(),tt=Mt.minX,lt=Mt.maxX,it=Mt.minY,U=Mt.maxY,P=kt.findById(this.getElementId("text-group")),H=kt.findById(this.getElementId("text")),k=kt.findById(this.getElementId("line"));if(!!pt){if(P){if(X+tt<=pt.minX){var h=pt.minX-(X+tt);Object(i.c)(P,P.attr("x")+h,P.attr("y"))}if(X+lt>=pt.maxX){var h=X+lt-pt.maxX;Object(i.c)(P,P.attr("x")-h,P.attr("y"))}}if(Ot==="upward"&&ct+it<=pt.minY||Ot!=="upward"&&ct+U>=pt.maxY){var g=void 0,G=void 0;Ot==="upward"&&ct+it<=pt.minY?(g="top",G=1):(g="bottom",G=-1),H.attr("textBaseline",g),k&&k.attr("path",[["M",0,0],["L",0,dt*G]]),Object(i.c)(P,P.attr("x"),(dt+2)*G)}}},Ft.prototype.getShapeAttrs=function(){var kt=Object(a.get)(this.get("line"),"display"),Ot=Object(a.get)(this.get("point"),"style",{}),X=Object(a.get)(this.get("line"),"style",{}),ct=Object(a.get)(this.get("text"),"style",{}),dt=this.get("direction"),pt=kt?Object(a.get)(this.get("line"),"length",0):0,Mt=dt==="upward"?-1:1;return{point:Object(at.a)({x:0,y:0},Ot),line:Object(at.a)({path:[["M",0,0],["L",0,pt*Mt]]},X),text:Object(at.a)({x:0,y:(pt+2)*Mt,text:Object(a.get)(this.get("text"),"content",""),textBaseline:dt==="upward"?"bottom":"top"},ct)}},Ft}(A.a),x=p,T=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:S.a.textColor,fontFamily:S.a.fontFamily}}}})},Ft.prototype.renderInner=function(kt){var Ot=Object(a.get)(this.get("region"),"style",{}),X=Object(a.get)(this.get("text"),"style",{}),ct=this.get("lineLength")||0,dt=this.get("points");if(!!dt.length){var pt=Object(v.j)(dt),Mt=[];Mt.push(["M",dt[0].x,pt.minY-ct]),dt.forEach(function(lt){Mt.push(["L",lt.x,lt.y])}),Mt.push(["L",dt[dt.length-1].x,dt[dt.length-1].y-ct]),this.addShape(kt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({path:Mt},Ot)});var tt=Object(at.a)({id:this.getElementId("text"),name:"annotation-text",x:(pt.minX+pt.maxX)/2,y:pt.minY-ct},this.get("text"));b(kt,tt)}},Ft}(A.a),N=T,Y=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},Ft.prototype.renderInner=function(kt){var Ot=this,X=this.get("start"),ct=this.get("end"),dt=this.addGroup(kt,{id:this.getElementId("region-filter"),capture:!1});Object(a.each)(this.get("shapes"),function(Mt,tt){var lt=Mt.get("type"),it=Object(a.clone)(Mt.attr());Ot.adjustShapeAttrs(it),Ot.addShape(dt,{id:Ot.getElementId("shape-"+lt+"-"+tt),capture:!1,type:lt,attrs:it})});var pt=Object(v.k)({start:X,end:ct});dt.setClip({type:"rect",attrs:{x:pt.minX,y:pt.minY,width:pt.width,height:pt.height}})},Ft.prototype.adjustShapeAttrs=function(kt){var Ot=this.get("color");kt.fill&&(kt.fill=kt.fillStyle=Ot),kt.stroke=kt.strokeStyle=Ot},Ft}(A.a),q=Y,nt=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"shape",draw:a.noop})},Ft.prototype.renderInner=function(kt){var Ot=this.get("render");Object(a.isFunction)(Ot)&&Ot(kt)},Ft}(A.a),vt=nt,ht=z("fIp6"),St=z("de35"),wt=function(ft){Object(at.b)(Ft,ft);function Ft(){return ft!==null&&ft.apply(this,arguments)||this}return Ft.prototype.getDefaultCfg=function(){var kt=ft.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},kt),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},Ft.prototype.render=function(){var kt=this.getContainer(),Ot=this.get("html");Object(v.a)(kt);var X=Object(a.isFunction)(Ot)?Ot(kt):Ot;Object(a.isElement)(X)?kt.appendChild(X):Object(a.isString)(X)&&kt.appendChild(Object(ht.b)(X)),this.resetPosition()},Ft.prototype.resetPosition=function(){var kt=this.getContainer(),Ot=this.getLocation(),X=Ot.x,ct=Ot.y,dt=this.get("alignX"),pt=this.get("alignY"),Mt=this.get("offsetX"),tt=this.get("offsetY"),lt=Object(ht.d)(kt),it=Object(ht.c)(kt),U={x:X,y:ct};dt==="middle"?U.x-=Math.round(lt/2):dt==="right"&&(U.x-=Math.round(lt)),pt==="middle"?U.y-=Math.round(it/2):pt==="bottom"&&(U.y-=Math.round(it)),Mt&&(U.x+=Mt),tt&&(U.y+=tt),Object(ht.e)(kt,{position:"absolute",left:U.x+"px",top:U.y+"px",zIndex:this.get("zIndex")})},Ft}(St.a),xt=wt},uFwe:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return a});var at=z("BsWD");function a(A,e){var i;if(typeof Symbol=="undefined"||A[Symbol.iterator]==null){if(Array.isArray(A)||(i=Object(at.a)(A))||e&&A&&typeof A.length=="number"){i&&(A=i);var v=0,b=function(){};return{s:b,n:function(){return v>=A.length?{done:!0}:{done:!1,value:A[v++]}},e:function(y){throw y},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,f=!1,M;return{s:function(){i=A[Symbol.iterator]()},n:function(){var y=i.next();return S=y.done,y},e:function(y){f=!0,M=y},f:function(){try{!S&&i.return!=null&&i.return()}finally{if(f)throw M}}}}},"uw/B":function(Un,_t,z){"use strict";z.d(_t,"a",function(){return n});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),i=z("iTfj"),v=z("w02o"),b=z("tKoa"),S=z("hJqF");function f(s){var d=s.chart,E=s.options,O=E.data,C=E.areaStyle,p=E.color,x=E.point,T=E.line,N=E.isPercent,Y=E.xField,q=E.yField,nt=E.tooltip,vt=E.seriesField,ht=Object(e.a)(O,q,Y,q,N);d.data(ht);var St=N?Object(at.a)({formatter:function(Ft){return{name:Ft[vt]||Ft[Y],value:(Number(Ft[q])*100).toFixed(2)+"%"}}},nt):nt,wt=Object(A.b)({},s,{options:{area:{color:p,style:C},line:T&&Object(at.a)({color:p},T),point:x&&Object(at.a)({color:p},x),tooltip:St,label:void 0}}),xt=Object(A.b)({},wt,{options:{tooltip:!1}});return Object(b.a)(wt),Object(b.d)(xt),Object(b.e)(xt),s}function M(s){var d=s.chart,E=s.options,O=E.label,C=E.yField,p=Object(A.c)(d,"area");if(!O)p.label(!1);else{var x=O.callback,T=Object(at.c)(O,["callback"]);p.label({fields:[C],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(A.o)(T))})}return s}function I(s){var d=s.chart,E=s.options,O=E.isStack,C=E.isPercent;return(C||O)&&Object(i.each)(d.geometries,function(p){p.adjust("stack")}),s}function y(s){return Object(A.e)(f,S.d,I,v.j,S.b,S.c,v.k,M,v.h,Object(v.b)(),v.c,v.a,v.e)(s)}var n=function(s){Object(at.b)(d,s);function d(){var E=s!==null&&s.apply(this,arguments)||this;return E.type="area",E}return d.prototype.getDefaultOptions=function(){return Object(A.b)({},s.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}})},d.prototype.changeData=function(E){this.updateOption({data:E});var O=this.options,C=O.isPercent,p=O.xField,x=O.yField;this.chart.changeData(Object(e.a)(E,x,p,x,C))},d.prototype.getSchemaAdaptor=function(){return y},d}(a.a)},uzHj:function(Un,_t){},v7Ed:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"version",function(){return v});var at=z("aN7R");z.d(_t,"Shape",function(){return at});var a=z("aFU3");for(var A in a)["default","Canvas","Group","Shape","version"].indexOf(A)<0&&function(b){z.d(_t,b,function(){return a[b]})}(A);var e=z("wClo");z.d(_t,"Canvas",function(){return e.a});var i=z("5z4m");z.d(_t,"Group",function(){return i.a});var v="0.5.6"},vIgC:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return A}),z.d(_t,"c",function(){return i}),z.d(_t,"a",function(){return v});var at=z("sstZ"),a=z("lt7v");function A(b,S,f){var M=1;if(Object(at.h)(b)&&(M=b.split(`
`).length),M>1){var I=e(S,f);return S*M+I*(M-1)}return S}function e(b,S){return S?S-b:b*.14}function i(b,S){var f=Object(a.a)(),M=0;if(Object(at.e)(b)||b==="")return M;if(f.save(),f.font=S,Object(at.h)(b)&&b.includes(`
`)){var I=b.split(`
`);Object(at.a)(I,function(y){var n=f.measureText(y).width;M<n&&(M=n)})}else M=f.measureText(b).width;return f.restore(),M}function v(b){var S=b.fontSize,f=b.fontFamily,M=b.fontWeight,I=b.fontStyle,y=b.fontVariant;return[I,y,M,S+"px",f].join(" ").trim()}},vk7d:function(Un,_t){},w02o:function(Un,_t,z){"use strict";z.d(_t,"d",function(){return i}),z.d(_t,"k",function(){return v}),z.d(_t,"c",function(){return b}),z.d(_t,"a",function(){return S}),z.d(_t,"j",function(){return f}),z.d(_t,"i",function(){return M}),z.d(_t,"h",function(){return I}),z.d(_t,"g",function(){return y}),z.d(_t,"f",function(){return n}),z.d(_t,"b",function(){return s}),z.d(_t,"e",function(){return d});var at=z("mrSG"),a=z("iTfj"),A=z("n/J0"),e=z("YuPD");function i(E){var O=E.chart,C=E.options,p=C.legend,x=C.colorField,T=C.seriesField;return p===!1?O.legend(!1):(x||T)&&O.legend(x||T,p),E}function v(E){var O=E.chart,C=E.options,p=C.tooltip;return p!==void 0&&O.tooltip(p),E}function b(E){var O=E.chart,C=E.options,p=C.interactions;return Object(a.each)(p,function(x){x.enable===!1?O.removeInteraction(x.type):O.interaction(x.type,x.cfg||{})}),E}function S(E){var O=E.chart,C=E.options,p=C.animation;return typeof p=="boolean"?O.animate(p):O.animate(!0),Object(a.each)(O.geometries,function(x){x.animate(p)}),E}function f(E){var O=E.chart,C=E.options,p=C.theme;return p&&O.theme(p),E}function M(E){var O=E.chart,C=E.options,p=C.state;return p&&Object(a.each)(O.geometries,function(x){x.state(p)}),E}function I(E){var O=E.chart,C=E.options,p=C.slider;return O.option("slider",p),E}function y(E){var O=E.chart,C=E.options,p=C.scrollbar;return O.option("scrollbar",p),E}function n(E,O){return function(C){var p=C.chart,x=C.options,T={};return Object(a.each)(E,function(N,Y){T[Y]=Object(e.k)(N,A.a)}),T=Object(e.b)({},O,x.meta,T),p.scale(T),C}}function s(E){return function(O){var C=O.chart,p=O.options,x=C.getController("annotation");return Object(a.each)(Object(at.d)(p.annotations||[],E||[]),function(T){x.annotation(T)}),O}}function d(E){var O=E.chart,C=E.options,p=C.yAxis,x=C.limitInPlot,T=x;return Object(a.isObject)(p)&&Object(a.isNil)(x)&&(Object.values(Object(e.k)(p,["min","max","minLimit","maxLimit"])).some(function(N){return!Object(a.isNil)(N)})?T=!0:T=!1),O.limitInPlot=T,E}},wClo:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("IvmH"),e=z("c0lT"),i=z("APlK"),v=z("c+wO"),b=z("aN7R"),S=z("5z4m"),f=z("iTfj"),M=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,I=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function n(kt){var Ot=kt.match(y);if(!Ot)return"";var X="";return Ot.sort(function(ct,dt){return ct=ct.split(":"),dt=dt.split(":"),Number(ct[0])-Number(dt[0])}),Object(f.each)(Ot,function(ct){ct=ct.split(":"),X+='<stop offset="'+ct[0]+'" stop-color="'+ct[1]+'"></stop>'}),X}function s(kt,Ot){var X=M.exec(kt),ct=Object(f.mod)(Object(f.toRadian)(parseFloat(X[1])),Math.PI*2),dt=X[2],pt,Mt;ct>=0&&ct<.5*Math.PI?(pt={x:0,y:0},Mt={x:1,y:1}):.5*Math.PI<=ct&&ct<Math.PI?(pt={x:1,y:0},Mt={x:0,y:1}):Math.PI<=ct&&ct<1.5*Math.PI?(pt={x:1,y:1},Mt={x:0,y:0}):(pt={x:0,y:1},Mt={x:1,y:0});var tt=Math.tan(ct),lt=tt*tt,it=(Mt.x-pt.x+tt*(Mt.y-pt.y))/(lt+1)+pt.x,U=tt*(Mt.x-pt.x+tt*(Mt.y-pt.y))/(lt+1)+pt.y;Ot.setAttribute("x1",pt.x),Ot.setAttribute("y1",pt.y),Ot.setAttribute("x2",it),Ot.setAttribute("y2",U),Ot.innerHTML=n(dt)}function d(kt,Ot){var X=I.exec(kt),ct=parseFloat(X[1]),dt=parseFloat(X[2]),pt=parseFloat(X[3]),Mt=X[4];Ot.setAttribute("cx",ct),Ot.setAttribute("cy",dt),Ot.setAttribute("r",pt),Ot.innerHTML=n(Mt)}var E=function(){function kt(Ot){this.cfg={};var X=null,ct=Object(f.uniqueId)("gradient_");return Ot.toLowerCase()[0]==="l"?(X=Object(v.b)("linearGradient"),s(Ot,X)):(X=Object(v.b)("radialGradient"),d(Ot,X)),X.setAttribute("id",ct),this.el=X,this.id=ct,this.cfg=Ot,this}return kt.prototype.match=function(Ot,X){return this.cfg===X},kt}(),O=E,C={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},p={x:"-40%",y:"-40%",width:"200%",height:"200%"},x=function(){function kt(Ot){this.type="filter",this.cfg={},this.type="filter";var X=Object(v.b)("filter");return Object(f.each)(p,function(ct,dt){X.setAttribute(dt,ct)}),this.el=X,this.id=Object(f.uniqueId)("filter_"),this.el.id=this.id,this.cfg=Ot,this._parseShadow(Ot,X),this}return kt.prototype.match=function(Ot,X){if(this.type!==Ot)return!1;var ct=!0,dt=this.cfg;return Object(f.each)(Object.keys(dt),function(pt){if(dt[pt]!==X[pt])return ct=!1,!1}),ct},kt.prototype.update=function(Ot,X){var ct=this.cfg;return ct[C[Ot]]=X,this._parseShadow(ct,this.el),this},kt.prototype._parseShadow=function(Ot,X){var ct=`<feDropShadow
      dx="`+(Ot.dx||0)+`"
      dy="`+(Ot.dy||0)+`"
      stdDeviation="`+(Ot.blur?Ot.blur/10:0)+`"
      flood-color="`+(Ot.color?Ot.color:"#000")+`"
      flood-opacity="`+(Ot.opacity?Ot.opacity:1)+`"
      />`;X.innerHTML=ct},kt}(),T=x,N=function(){function kt(Ot,X){this.cfg={};var ct=Object(v.b)("marker"),dt=Object(f.uniqueId)("marker_");ct.setAttribute("id",dt);var pt=Object(v.b)("path");pt.setAttribute("stroke",Ot.stroke||"none"),pt.setAttribute("fill",Ot.fill||"none"),ct.appendChild(pt),ct.setAttribute("overflow","visible"),ct.setAttribute("orient","auto-start-reverse"),this.el=ct,this.child=pt,this.id=dt;var Mt=Ot[X==="marker-start"?"startArrow":"endArrow"];return this.stroke=Ot.stroke||"#000",Mt===!0?this._setDefaultPath(X,pt):(this.cfg=Mt,this._setMarker(Ot.lineWidth,pt)),this}return kt.prototype.match=function(){return!1},kt.prototype._setDefaultPath=function(Ot,X){var ct=this.el;X.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ct.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ct.setAttribute("refY",""+5)},kt.prototype._setMarker=function(Ot,X){var ct=this.el,dt=this.cfg.path,pt=this.cfg.d;Object(f.isArray)(dt)&&(dt=dt.map(function(Mt){return Mt.join(" ")}).join("")),X.setAttribute("d",dt),ct.appendChild(X),pt&&ct.setAttribute("refX",""+pt/Ot)},kt.prototype.update=function(Ot){var X=this.child;X.attr?X.attr("fill",Ot):X.setAttribute("fill",Ot)},kt}(),Y=N,q=function(){function kt(Ot){this.type="clip",this.cfg={};var X=Object(v.b)("clipPath");this.el=X,this.id=Object(f.uniqueId)("clip_"),X.id=this.id;var ct=Ot.cfg.el;return X.appendChild(ct),this.cfg=Ot,this}return kt.prototype.match=function(){return!1},kt.prototype.remove=function(){var Ot=this.el;Ot.parentNode.removeChild(Ot)},kt}(),nt=q,vt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ht=function(){function kt(Ot){this.cfg={};var X=Object(v.b)("pattern");X.setAttribute("patternUnits","userSpaceOnUse");var ct=Object(v.b)("image");X.appendChild(ct);var dt=Object(f.uniqueId)("pattern_");X.id=dt,this.el=X,this.id=dt,this.cfg=Ot;var pt=vt.exec(Ot),Mt=pt[2];ct.setAttribute("href",Mt);var tt=new Image;Mt.match(/^data:/i)||(tt.crossOrigin="Anonymous"),tt.src=Mt;function lt(){X.setAttribute("width",""+tt.width),X.setAttribute("height",""+tt.height)}return tt.complete?lt():(tt.onload=lt,tt.src=tt.src),this}return kt.prototype.match=function(Ot,X){return this.cfg===X},kt}(),St=ht,wt=function(){function kt(Ot){var X=Object(v.b)("defs"),ct=Object(f.uniqueId)("defs_");X.id=ct,Ot.appendChild(X),this.children=[],this.defaultArrow={},this.el=X,this.canvas=Ot}return kt.prototype.find=function(Ot,X){for(var ct=this.children,dt=null,pt=0;pt<ct.length;pt++)if(ct[pt].match(Ot,X)){dt=ct[pt].id;break}return dt},kt.prototype.findById=function(Ot){for(var X=this.children,ct=null,dt=0;dt<X.length;dt++)if(X[dt].id===Ot){ct=X[dt];break}return ct},kt.prototype.add=function(Ot){this.children.push(Ot),Ot.canvas=this.canvas,Ot.parent=this},kt.prototype.getDefaultArrow=function(Ot,X){var ct=Ot.stroke||Ot.strokeStyle;if(this.defaultArrow[ct])return this.defaultArrow[ct].id;var dt=new Y(Ot,X);return this.defaultArrow[ct]=dt,this.el.appendChild(dt.el),this.add(dt),dt.id},kt.prototype.addGradient=function(Ot){var X=new O(Ot);return this.el.appendChild(X.el),this.add(X),X.id},kt.prototype.addArrow=function(Ot,X){var ct=new Y(Ot,X);return this.el.appendChild(ct.el),this.add(ct),ct.id},kt.prototype.addShadow=function(Ot){var X=new T(Ot);return this.el.appendChild(X.el),this.add(X),X.id},kt.prototype.addPattern=function(Ot){var X=new St(Ot);return this.el.appendChild(X.el),this.add(X),X.id},kt.prototype.addClip=function(Ot){var X=new nt(Ot);return this.el.appendChild(X.el),this.add(X),X.id},kt}(),xt=wt,ft=function(kt){Object(at.b)(Ot,kt);function Ot(X){return kt.call(this,Object(at.a)(Object(at.a)({},X),{autoDraw:!0,renderer:"svg"}))||this}return Ot.prototype.getShapeBase=function(){return b},Ot.prototype.getGroupBase=function(){return S.a},Ot.prototype.getShape=function(X,ct,dt){var pt=dt.target||dt.srcElement;if(!A.a[pt.tagName]){for(var Mt=pt.parentNode;Mt&&!A.a[Mt.tagName];)Mt=Mt.parentNode;pt=Mt}return this.find(function(tt){return tt.get("el")===pt})},Ot.prototype.createDom=function(){var X=Object(v.b)("svg"),ct=new xt(X);return X.setAttribute("width",""+this.get("width")),X.setAttribute("height",""+this.get("height")),this.set("context",ct),X},Ot.prototype.onCanvasChange=function(X){var ct=this.get("context"),dt=this.get("el");if(X==="sort"){var pt=this.get("children");pt&&pt.length&&Object(v.d)(this,function(tt,lt){return pt.indexOf(tt)-pt.indexOf(lt)?1:0})}else if(X==="clear"){if(dt){dt.innerHTML="";var Mt=ct.el;Mt.innerHTML="",dt.appendChild(Mt)}}else X==="matrix"?Object(i.c)(this):X==="clip"?Object(i.a)(this,ct):X==="changeSize"&&(dt.setAttribute("width",""+this.get("width")),dt.setAttribute("height",""+this.get("height")))},Ot.prototype.draw=function(){var X=this.get("context"),ct=this.getChildren();Object(i.a)(this,X),ct.length&&Object(e.a)(X,ct)},Ot}(a.AbstractCanvas),Ft=_t.a=ft},wq2r:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("R5nb"),e=z("9eUa"),i=z("iTfj"),v=z("cyZq"),b=function(S){Object(at.b)(f,S);function f(){return S!==null&&S.apply(this,arguments)||this}return f.prototype.onCanvasChange=function(M){Object(e.h)(this,M)},f.prototype.getShapeBase=function(){return A},f.prototype.getGroupBase=function(){return f},f.prototype._applyClip=function(M,I){I&&(M.save(),Object(e.a)(M,I),I.createPath(M),M.restore(),M.clip(),I._afterDraw())},f.prototype.cacheCanvasBBox=function(){var M=this.cfg.children,I=[],y=[];Object(i.each)(M,function(x){var T=x.cfg.cacheCanvasBBox;T&&x.cfg.isInView&&(I.push(T.minX,T.maxX),y.push(T.minY,T.maxY))});var n=null;if(I.length){var s=Math.min.apply(null,I),d=Math.max.apply(null,I),E=Math.min.apply(null,y),O=Math.max.apply(null,y);n={minX:s,minY:E,x:s,y:E,maxX:d,maxY:O,width:d-s,height:O-E};var C=this.cfg.canvas;if(C){var p=C.getViewRange();this.set("isInView",Object(v.f)(n,p))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},f.prototype.draw=function(M,I){var y=this.cfg.children,n=I?this.cfg.refresh:!0;y.length&&n&&(M.save(),Object(e.a)(M,this),this._applyClip(M,this.getClip()),Object(e.d)(M,y,I),M.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},f.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},f}(a.AbstractGroup);_t.a=b},wy8a:function(Un,_t,z){var at=z("KxBF");function a(A,e,i){var v=A.length;return i=i===void 0?v:i,!e&&i>=v?A:at(A,e,i)}Un.exports=a},x3EW:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"Base",function(){return v}),z.d(_t,"Circle",function(){return f}),z.d(_t,"Line",function(){return I});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e=z("L16w"),i=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:e.a.lineColor}}}})},n.prototype.getLineType=function(){var s=this.get("line")||this.get("defaultCfg").line;return s.type},n.prototype.renderInner=function(s){this.drawGrid(s)},n.prototype.getAlternatePath=function(s,d){var E=this.getGridPath(s),O=d.slice(0).reverse(),C=this.getGridPath(O,!0),p=this.get("closed");return p?E=E.concat(C):(C[0][0]="L",E=E.concat(C),E.push(["Z"])),E},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(s){var d=this,E=this.get("line"),O=this.get("items"),C=this.get("alternateColor"),p=null;Object(a.each)(O,function(x,T){var N=x.id||T;if(E){var Y=d.getPathStyle();Y=Object(a.isFunction)(Y)?Y(x,T,O):Y;var q=d.getElementId("line-"+N),nt=d.getGridPath(x.points);d.addShape(s,{type:"path",name:"grid-line",id:q,attrs:Object(a.mix)({path:nt},Y)})}if(C&&T>0){var vt=d.getElementId("region-"+N),ht=T%2==0;if(Object(a.isString)(C))ht&&d.drawAlternateRegion(vt,s,p.points,x.points,C);else{var St=ht?C[1]:C[0];d.drawAlternateRegion(vt,s,p.points,x.points,St)}}p=x})},n.prototype.drawAlternateRegion=function(s,d,E,O,C){var p=this.getAlternatePath(E,O);this.addShape(d,{type:"path",id:s,name:"grid-region",attrs:{path:p,fill:C}})},n}(A.a),v=i;function b(y,n,s,d){var E=s-y,O=d-n;return Math.sqrt(E*E+O*O)}var S=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(s,d){var E=this.getLineType(),O=this.get("closed"),C=[];if(s.length)if(E==="circle"){var p=this.get("center"),x=s[0],T=b(p.x,p.y,x.x,x.y),N=d?0:1;O?(C.push(["M",p.x,p.y-T]),C.push(["A",T,T,0,0,N,p.x,p.y+T]),C.push(["A",T,T,0,0,N,p.x,p.y-T]),C.push(["Z"])):Object(a.each)(s,function(Y,q){q===0?C.push(["M",Y.x,Y.y]):C.push(["A",T,T,0,0,N,Y.x,Y.y])})}else Object(a.each)(s,function(Y,q){q===0?C.push(["M",Y.x,Y.y]):C.push(["L",Y.x,Y.y])}),O&&C.push(["Z"]);return C},n}(v),f=S,M=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"line"})},n.prototype.getGridPath=function(s){var d=[];return Object(a.each)(s,function(E,O){O===0?d.push(["M",E.x,E.y]):d.push(["L",E.x,E.y])}),d},n}(v),I=M},y753:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return E});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),i=z("tKoa");function v(O){var C=O.chart,p=O.options,x=p.data,T=p.lineStyle,N=p.color,Y=p.point,q=p.area;C.data(x);var nt=Object(A.b)({},O,{options:{line:{style:T,color:N},point:Y&&Object(at.a)({color:N},Y),area:q&&Object(at.a)({color:N},q),label:void 0}}),vt=Object(A.b)({},nt,{options:{tooltip:!1}});return Object(i.d)(nt),Object(i.e)(vt),Object(i.a)(vt),O}function b(O){var C,p=O.options,x=p.xAxis,T=p.yAxis,N=p.xField,Y=p.yField;return Object(A.e)(Object(e.f)((C={},C[N]=x,C[Y]=T,C)))(O)}function S(O){var C=O.chart,p=O.options,x=p.radius;return C.coordinate("polar",{radius:x}),O}function f(O){var C=O.chart,p=O.options,x=p.xField,T=p.xAxis,N=p.yField,Y=p.yAxis;return C.axis(x,T),C.axis(N,Y),O}function M(O){var C=O.chart,p=O.options,x=p.label,T=p.yField,N=Object(A.c)(C,"line");if(!x)N.label(!1);else{var Y=x.callback,q=Object(at.c)(x,["callback"]);N.label({fields:[T],callback:Y,cfg:Object(A.o)(q)})}return O}function I(O){return Object(A.e)(v,b,e.j,S,f,e.d,e.k,M,e.c,e.a,Object(e.b)())(O)}var y=z("Ihc8"),n=z("iTfj"),s=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return Object.defineProperty(C.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),C.prototype.getTooltipItems=function(p){var x=this.getTooltipCfg(),T=x.shared,N=x.title,Y=O.prototype.getTooltipItems.call(this,p);if(Y.length>0){var q=this.view.geometries[0],nt=q.dataArray,vt=Y[0].name,ht=[];return nt.forEach(function(St){St.forEach(function(wt){var xt=y.Util.getTooltipItems(wt,q),ft=xt[0];if(!T&&ft&&ft.name===vt){var Ft=Object(n.isNil)(N)?vt:N;ht.push(Object(at.a)(Object(at.a)({},ft),{name:ft.title,title:Ft}))}else if(T&&ft){var Ft=Object(n.isNil)(N)?ft.name||vt:N;ht.push(Object(at.a)(Object(at.a)({},ft),{name:ft.title,title:Ft}))}})}),ht}return[]},C}(y.TooltipController);Object(y.registerComponentController)("radar-tooltip",s);var d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.init=function(){var p=this.context.view;p.removeInteraction("tooltip")},C.prototype.show=function(){var p=this.context.event,x=this.getTooltipController();x.showTooltip({x:p.x,y:p.y})},C.prototype.hide=function(){var p=this.getTooltipController();p.hideTooltip()},C.prototype.getTooltipController=function(){var p=this.context.view;return p.getController("radar-tooltip")},C}(y.Action);Object(y.registerAction)("radar-tooltip",d),Object(y.registerInteraction)("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var E=function(O){Object(at.b)(C,O);function C(){var p=O!==null&&O.apply(this,arguments)||this;return p.type="radar",p}return C.prototype.changeData=function(p){this.updateOption({data:p}),this.chart.changeData(p)},C.prototype.getDefaultOptions=function(){return Object(A.b)({},O.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},C.prototype.getSchemaAdaptor=function(){return I},C}(a.a)},yU0y:function(Un,_t,z){"use strict";z.d(_t,"b",function(){return at}),z.d(_t,"a",function(){return a}),z.d(_t,"c",function(){return A});var at=1e-6,a=typeof Float32Array!="undefined"?Float32Array:Array,A=Math.random;function e(S){a=S}var i=Math.PI/180;function v(S){return S*i}function b(S,f){return Math.abs(S-f)<=at*Math.max(1,Math.abs(S),Math.abs(f))}Math.hypot||(Math.hypot=function(){for(var S=0,f=arguments.length;f--;)S+=arguments[f]*arguments[f];return Math.sqrt(S)})},yUfG:function(Un,_t,z){"use strict";z.r(_t),z.d(_t,"cluster",function(){return S}),z.d(_t,"hierarchy",function(){return f.c}),z.d(_t,"pack",function(){return xt}),z.d(_t,"packSiblings",function(){return vt}),z.d(_t,"packEnclose",function(){return y}),z.d(_t,"partition",function(){return Ot.a}),z.d(_t,"stratify",function(){return Mt}),z.d(_t,"tree",function(){return g}),z.d(_t,"treemap",function(){return G.a}),z.d(_t,"treemapBinary",function(){return V}),z.d(_t,"treemapDice",function(){return $.a}),z.d(_t,"treemapSlice",function(){return rt.a}),z.d(_t,"treemapSliceDice",function(){return ot}),z.d(_t,"treemapSquarify",function(){return At.a}),z.d(_t,"treemapResquarify",function(){return gt});function at(mt,bt){return mt.parent===bt.parent?1:2}function a(mt){return mt.reduce(A,0)/mt.length}function A(mt,bt){return mt+bt.x}function e(mt){return 1+mt.reduce(i,0)}function i(mt,bt){return Math.max(mt,bt.y)}function v(mt){for(var bt;bt=mt.children;)mt=bt[0];return mt}function b(mt){for(var bt;bt=mt.children;)mt=bt[bt.length-1];return mt}var S=function(){var mt=at,bt=1,jt=1,Dt=!1;function Ut(Ct){var Vt,Ht=0;Ct.eachAfter(function(Ne){var Ke=Ne.children;Ke?(Ne.x=a(Ke),Ne.y=e(Ke)):(Ne.x=Vt?Ht+=mt(Ne,Vt):0,Ne.y=0,Vt=Ne)});var re=v(Ct),pe=b(Ct),ye=re.x-mt(re,pe)/2,we=pe.x+mt(pe,re)/2;return Ct.eachAfter(Dt?function(Ne){Ne.x=(Ne.x-Ct.x)*bt,Ne.y=(Ct.y-Ne.y)*jt}:function(Ne){Ne.x=(Ne.x-ye)/(we-ye)*bt,Ne.y=(1-(Ct.y?Ne.y/Ct.y:1))*jt})}return Ut.separation=function(Ct){return arguments.length?(mt=Ct,Ut):mt},Ut.size=function(Ct){return arguments.length?(Dt=!1,bt=+Ct[0],jt=+Ct[1],Ut):Dt?null:[bt,jt]},Ut.nodeSize=function(Ct){return arguments.length?(Dt=!0,bt=+Ct[0],jt=+Ct[1],Ut):Dt?[bt,jt]:null},Ut},f=z("a8tM"),M=function(mt){return typeof mt=="object"&&"length"in mt?mt:Array.from(mt)};function I(mt){for(var bt=mt.length,jt,Dt;bt;)Dt=Math.random()*bt--|0,jt=mt[bt],mt[bt]=mt[Dt],mt[Dt]=jt;return mt}var y=function(mt){for(var bt=0,jt=(mt=I(Array.from(mt))).length,Dt=[],Ut,Ct;bt<jt;)Ut=mt[bt],Ct&&d(Ct,Ut)?++bt:(Ct=O(Dt=n(Dt,Ut)),bt=0);return Ct};function n(mt,bt){var jt,Dt;if(E(bt,mt))return[bt];for(jt=0;jt<mt.length;++jt)if(s(bt,mt[jt])&&E(p(mt[jt],bt),mt))return[mt[jt],bt];for(jt=0;jt<mt.length-1;++jt)for(Dt=jt+1;Dt<mt.length;++Dt)if(s(p(mt[jt],mt[Dt]),bt)&&s(p(mt[jt],bt),mt[Dt])&&s(p(mt[Dt],bt),mt[jt])&&E(x(mt[jt],mt[Dt],bt),mt))return[mt[jt],mt[Dt],bt];throw new Error}function s(mt,bt){var jt=mt.r-bt.r,Dt=bt.x-mt.x,Ut=bt.y-mt.y;return jt<0||jt*jt<Dt*Dt+Ut*Ut}function d(mt,bt){var jt=mt.r-bt.r+Math.max(mt.r,bt.r,1)*1e-9,Dt=bt.x-mt.x,Ut=bt.y-mt.y;return jt>0&&jt*jt>Dt*Dt+Ut*Ut}function E(mt,bt){for(var jt=0;jt<bt.length;++jt)if(!d(mt,bt[jt]))return!1;return!0}function O(mt){switch(mt.length){case 1:return C(mt[0]);case 2:return p(mt[0],mt[1]);case 3:return x(mt[0],mt[1],mt[2])}}function C(mt){return{x:mt.x,y:mt.y,r:mt.r}}function p(mt,bt){var jt=mt.x,Dt=mt.y,Ut=mt.r,Ct=bt.x,Vt=bt.y,Ht=bt.r,re=Ct-jt,pe=Vt-Dt,ye=Ht-Ut,we=Math.sqrt(re*re+pe*pe);return{x:(jt+Ct+re/we*ye)/2,y:(Dt+Vt+pe/we*ye)/2,r:(we+Ut+Ht)/2}}function x(mt,bt,jt){var Dt=mt.x,Ut=mt.y,Ct=mt.r,Vt=bt.x,Ht=bt.y,re=bt.r,pe=jt.x,ye=jt.y,we=jt.r,Ne=Dt-Vt,Ke=Dt-pe,pn=Ut-Ht,hn=Ut-ye,kn=re-Ct,Tn=we-Ct,Rn=Dt*Dt+Ut*Ut-Ct*Ct,Mn=Rn-Vt*Vt-Ht*Ht+re*re,Cn=Rn-pe*pe-ye*ye+we*we,_n=Ke*pn-Ne*hn,Kn=(pn*Cn-hn*Mn)/(_n*2)-Dt,tr=(hn*kn-pn*Tn)/_n,or=(Ke*Mn-Ne*Cn)/(_n*2)-Ut,nr=(Ne*Tn-Ke*kn)/_n,er=tr*tr+nr*nr-1,Sr=2*(Ct+Kn*tr+or*nr),Vr=Kn*Kn+or*or-Ct*Ct,ti=-(er?(Sr+Math.sqrt(Sr*Sr-4*er*Vr))/(2*er):Vr/Sr);return{x:Dt+Kn+tr*ti,y:Ut+or+nr*ti,r:ti}}function T(mt,bt,jt){var Dt=mt.x-bt.x,Ut,Ct,Vt=mt.y-bt.y,Ht,re,pe=Dt*Dt+Vt*Vt;pe?(Ct=bt.r+jt.r,Ct*=Ct,re=mt.r+jt.r,re*=re,Ct>re?(Ut=(pe+re-Ct)/(2*pe),Ht=Math.sqrt(Math.max(0,re/pe-Ut*Ut)),jt.x=mt.x-Ut*Dt-Ht*Vt,jt.y=mt.y-Ut*Vt+Ht*Dt):(Ut=(pe+Ct-re)/(2*pe),Ht=Math.sqrt(Math.max(0,Ct/pe-Ut*Ut)),jt.x=bt.x+Ut*Dt-Ht*Vt,jt.y=bt.y+Ut*Vt+Ht*Dt)):(jt.x=bt.x+jt.r,jt.y=bt.y)}function N(mt,bt){var jt=mt.r+bt.r-1e-6,Dt=bt.x-mt.x,Ut=bt.y-mt.y;return jt>0&&jt*jt>Dt*Dt+Ut*Ut}function Y(mt){var bt=mt._,jt=mt.next._,Dt=bt.r+jt.r,Ut=(bt.x*jt.r+jt.x*bt.r)/Dt,Ct=(bt.y*jt.r+jt.y*bt.r)/Dt;return Ut*Ut+Ct*Ct}function q(mt){this._=mt,this.next=null,this.previous=null}function nt(mt){if(!(Ut=(mt=M(mt)).length))return 0;var bt,jt,Dt,Ut,Ct,Vt,Ht,re,pe,ye,we;if(bt=mt[0],bt.x=0,bt.y=0,!(Ut>1))return bt.r;if(jt=mt[1],bt.x=-jt.r,jt.x=bt.r,jt.y=0,!(Ut>2))return bt.r+jt.r;T(jt,bt,Dt=mt[2]),bt=new q(bt),jt=new q(jt),Dt=new q(Dt),bt.next=Dt.previous=jt,jt.next=bt.previous=Dt,Dt.next=jt.previous=bt;t:for(Ht=3;Ht<Ut;++Ht){T(bt._,jt._,Dt=mt[Ht]),Dt=new q(Dt),re=jt.next,pe=bt.previous,ye=jt._.r,we=bt._.r;do if(ye<=we){if(N(re._,Dt._)){jt=re,bt.next=jt,jt.previous=bt,--Ht;continue t}ye+=re._.r,re=re.next}else{if(N(pe._,Dt._)){bt=pe,bt.next=jt,jt.previous=bt,--Ht;continue t}we+=pe._.r,pe=pe.previous}while(re!==pe.next);for(Dt.previous=bt,Dt.next=jt,bt.next=jt.previous=jt=Dt,Ct=Y(bt);(Dt=Dt.next)!==jt;)(Vt=Y(Dt))<Ct&&(bt=Dt,Ct=Vt);jt=bt.next}for(bt=[jt._],Dt=jt;(Dt=Dt.next)!==jt;)bt.push(Dt._);for(Dt=y(bt),Ht=0;Ht<Ut;++Ht)bt=mt[Ht],bt.x-=Dt.x,bt.y-=Dt.y;return Dt.r}var vt=function(mt){return nt(mt),mt},ht=z("IeU1"),St=z("CSvP");function wt(mt){return Math.sqrt(mt.value)}var xt=function(){var mt=null,bt=1,jt=1,Dt=St.a;function Ut(Ct){return Ct.x=bt/2,Ct.y=jt/2,mt?Ct.eachBefore(ft(mt)).eachAfter(Ft(Dt,.5)).eachBefore(kt(1)):Ct.eachBefore(ft(wt)).eachAfter(Ft(St.a,1)).eachAfter(Ft(Dt,Ct.r/Math.min(bt,jt))).eachBefore(kt(Math.min(bt,jt)/(2*Ct.r))),Ct}return Ut.radius=function(Ct){return arguments.length?(mt=Object(ht.a)(Ct),Ut):mt},Ut.size=function(Ct){return arguments.length?(bt=+Ct[0],jt=+Ct[1],Ut):[bt,jt]},Ut.padding=function(Ct){return arguments.length?(Dt=typeof Ct=="function"?Ct:Object(St.b)(+Ct),Ut):Dt},Ut};function ft(mt){return function(bt){bt.children||(bt.r=Math.max(0,+mt(bt)||0))}}function Ft(mt,bt){return function(jt){if(Dt=jt.children){var Dt,Ut,Ct=Dt.length,Vt=mt(jt)*bt||0,Ht;if(Vt)for(Ut=0;Ut<Ct;++Ut)Dt[Ut].r+=Vt;if(Ht=nt(Dt),Vt)for(Ut=0;Ut<Ct;++Ut)Dt[Ut].r-=Vt;jt.r=Ht+Vt}}}function kt(mt){return function(bt){var jt=bt.parent;bt.r*=mt,jt&&(bt.x=jt.x+mt*bt.x,bt.y=jt.y+mt*bt.y)}}var Ot=z("+Nd1"),X={depth:-1},ct={};function dt(mt){return mt.id}function pt(mt){return mt.parentId}var Mt=function(){var mt=dt,bt=pt;function jt(Dt){var Ut=Array.from(Dt),Ct=Ut.length,Vt,Ht,re,pe,ye,we,Ne,Ke=new Map;for(Ht=0;Ht<Ct;++Ht)Vt=Ut[Ht],ye=Ut[Ht]=new f.a(Vt),(we=mt(Vt,Ht,Dt))!=null&&(we+="")&&(Ne=ye.id=we,Ke.set(Ne,Ke.has(Ne)?ct:ye)),(we=bt(Vt,Ht,Dt))!=null&&(we+="")&&(ye.parent=we);for(Ht=0;Ht<Ct;++Ht)if(ye=Ut[Ht],we=ye.parent){if(pe=Ke.get(we),!pe)throw new Error("missing: "+we);if(pe===ct)throw new Error("ambiguous: "+we);pe.children?pe.children.push(ye):pe.children=[ye],ye.parent=pe}else{if(re)throw new Error("multiple roots");re=ye}if(!re)throw new Error("no root");if(re.parent=X,re.eachBefore(function(pn){pn.depth=pn.parent.depth+1,--Ct}).eachBefore(f.b),re.parent=null,Ct>0)throw new Error("cycle");return re}return jt.id=function(Dt){return arguments.length?(mt=Object(ht.b)(Dt),jt):mt},jt.parentId=function(Dt){return arguments.length?(bt=Object(ht.b)(Dt),jt):bt},jt};function tt(mt,bt){return mt.parent===bt.parent?1:2}function lt(mt){var bt=mt.children;return bt?bt[0]:mt.t}function it(mt){var bt=mt.children;return bt?bt[bt.length-1]:mt.t}function U(mt,bt,jt){var Dt=jt/(bt.i-mt.i);bt.c-=Dt,bt.s+=jt,mt.c+=Dt,bt.z+=jt,bt.m+=jt}function P(mt){for(var bt=0,jt=0,Dt=mt.children,Ut=Dt.length,Ct;--Ut>=0;)Ct=Dt[Ut],Ct.z+=bt,Ct.m+=bt,bt+=Ct.s+(jt+=Ct.c)}function H(mt,bt,jt){return mt.a.parent===bt.parent?mt.a:jt}function k(mt,bt){this._=mt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=bt}k.prototype=Object.create(f.a.prototype);function h(mt){for(var bt=new k(mt,0),jt,Dt=[bt],Ut,Ct,Vt,Ht;jt=Dt.pop();)if(Ct=jt._.children)for(jt.children=new Array(Ht=Ct.length),Vt=Ht-1;Vt>=0;--Vt)Dt.push(Ut=jt.children[Vt]=new k(Ct[Vt],Vt)),Ut.parent=jt;return(bt.parent=new k(null,0)).children=[bt],bt}var g=function(){var mt=tt,bt=1,jt=1,Dt=null;function Ut(pe){var ye=h(pe);if(ye.eachAfter(Ct),ye.parent.m=-ye.z,ye.eachBefore(Vt),Dt)pe.eachBefore(re);else{var we=pe,Ne=pe,Ke=pe;pe.eachBefore(function(Rn){Rn.x<we.x&&(we=Rn),Rn.x>Ne.x&&(Ne=Rn),Rn.depth>Ke.depth&&(Ke=Rn)});var pn=we===Ne?1:mt(we,Ne)/2,hn=pn-we.x,kn=bt/(Ne.x+pn+hn),Tn=jt/(Ke.depth||1);pe.eachBefore(function(Rn){Rn.x=(Rn.x+hn)*kn,Rn.y=Rn.depth*Tn})}return pe}function Ct(pe){var ye=pe.children,we=pe.parent.children,Ne=pe.i?we[pe.i-1]:null;if(ye){P(pe);var Ke=(ye[0].z+ye[ye.length-1].z)/2;Ne?(pe.z=Ne.z+mt(pe._,Ne._),pe.m=pe.z-Ke):pe.z=Ke}else Ne&&(pe.z=Ne.z+mt(pe._,Ne._));pe.parent.A=Ht(pe,Ne,pe.parent.A||we[0])}function Vt(pe){pe._.x=pe.z+pe.parent.m,pe.m+=pe.parent.m}function Ht(pe,ye,we){if(ye){for(var Ne=pe,Ke=pe,pn=ye,hn=Ne.parent.children[0],kn=Ne.m,Tn=Ke.m,Rn=pn.m,Mn=hn.m,Cn;pn=it(pn),Ne=lt(Ne),pn&&Ne;)hn=lt(hn),Ke=it(Ke),Ke.a=pe,Cn=pn.z+Rn-Ne.z-kn+mt(pn._,Ne._),Cn>0&&(U(H(pn,pe,we),pe,Cn),kn+=Cn,Tn+=Cn),Rn+=pn.m,kn+=Ne.m,Mn+=hn.m,Tn+=Ke.m;pn&&!it(Ke)&&(Ke.t=pn,Ke.m+=Rn-Tn),Ne&&!lt(hn)&&(hn.t=Ne,hn.m+=kn-Mn,we=pe)}return we}function re(pe){pe.x*=bt,pe.y=pe.depth*jt}return Ut.separation=function(pe){return arguments.length?(mt=pe,Ut):mt},Ut.size=function(pe){return arguments.length?(Dt=!1,bt=+pe[0],jt=+pe[1],Ut):Dt?null:[bt,jt]},Ut.nodeSize=function(pe){return arguments.length?(Dt=!0,bt=+pe[0],jt=+pe[1],Ut):Dt?[bt,jt]:null},Ut},G=z("tvR+"),V=function(mt,bt,jt,Dt,Ut){var Ct=mt.children,Vt,Ht=Ct.length,re,pe=new Array(Ht+1);for(pe[0]=re=Vt=0;Vt<Ht;++Vt)pe[Vt+1]=re+=Ct[Vt].value;ye(0,Ht,mt.value,bt,jt,Dt,Ut);function ye(we,Ne,Ke,pn,hn,kn,Tn){if(we>=Ne-1){var Rn=Ct[we];Rn.x0=pn,Rn.y0=hn,Rn.x1=kn,Rn.y1=Tn;return}for(var Mn=pe[we],Cn=Ke/2+Mn,_n=we+1,Kn=Ne-1;_n<Kn;){var tr=_n+Kn>>>1;pe[tr]<Cn?_n=tr+1:Kn=tr}Cn-pe[_n-1]<pe[_n]-Cn&&we+1<_n&&--_n;var or=pe[_n]-Mn,nr=Ke-or;if(kn-pn>Tn-hn){var er=Ke?(pn*nr+kn*or)/Ke:kn;ye(we,_n,or,pn,hn,er,Tn),ye(_n,Ne,nr,er,hn,kn,Tn)}else{var Sr=Ke?(hn*nr+Tn*or)/Ke:Tn;ye(we,_n,or,pn,hn,kn,Sr),ye(_n,Ne,nr,pn,Sr,kn,Tn)}}},$=z("FPPI"),rt=z("7IPS"),ot=function(mt,bt,jt,Dt,Ut){(mt.depth&1?rt.a:$.a)(mt,bt,jt,Dt,Ut)},At=z("I4jL"),gt=function mt(bt){function jt(Dt,Ut,Ct,Vt,Ht){if((re=Dt._squarify)&&re.ratio===bt)for(var re,pe,ye,we,Ne=-1,Ke,pn=re.length,hn=Dt.value;++Ne<pn;){for(pe=re[Ne],ye=pe.children,we=pe.value=0,Ke=ye.length;we<Ke;++we)pe.value+=ye[we].value;pe.dice?Object($.a)(pe,Ut,Ct,Vt,hn?Ct+=(Ht-Ct)*pe.value/hn:Ht):Object(rt.a)(pe,Ut,Ct,hn?Ut+=(Vt-Ut)*pe.value/hn:Vt,Ht),hn-=pe.value}else Dt._squarify=re=Object(At.c)(bt,Dt,Ut,Ct,Vt,Ht),re.ratio=bt}return jt.ratio=function(Dt){return mt((Dt=+Dt)>1?Dt:1)},jt}(At.b)},ycre:function(Un,_t,z){var at=z("711d"),a=at("length");Un.exports=a},yqCL:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return ct});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("w02o"),v=z("sqD9"),b=z("4Olw"),S;(function(dt){dt.Left="Left",dt.Right="Right"})(S||(S={}));var f;(function(dt){dt.Line="line",dt.Column="column"})(f||(f={}));var M="left-axes-view",I="right-axes-view",y={nice:!0,label:{autoHide:!0,autoRotate:!1}},n=Object(at.a)(Object(at.a)({},y),{position:"left"}),s=Object(at.a)(Object(at.a)({},y),{position:"right",grid:null});function d(dt){return Object(e.get)(dt,"geometry")===f.Line}function E(dt){return Object(e.get)(dt,"geometry")===f.Column}function O(dt,pt,Mt){return E(Mt)?Object(A.b)({},{geometry:f.Column,label:Mt.label&&Mt.isRange?{content:function(lt){var it;return(it=lt[pt])===null||it===void 0?void 0:it.join("-")}}:void 0},Mt):Object(at.a)({geometry:f.Line},Mt)}function C(dt,pt){var Mt=dt[0],tt=dt[1];if(Object(e.isArray)(pt)){var lt=pt[0],it=pt[1];return[lt,it]}var U=Object(e.get)(pt,Mt),P=Object(e.get)(pt,tt);return[U,P]}function p(dt,pt){return pt===S.Left?dt===!1?!1:Object(A.b)({},n,dt):pt===S.Right?dt===!1?!1:Object(A.b)({},s,dt):dt}var x=z("Ihc8");function T(dt){var pt=dt.view,Mt=dt.geometryOption,tt=dt.yField,lt=dt.legend,it=Object(e.get)(lt,"marker"),U=Object(A.c)(pt,d(Mt)?"line":"interval");if(!Mt.seriesField){var P=U.getAttribute("color"),H=P.values[0],k=it||(d(Mt)?{symbol:function(G,V,$){return[["M",G-$,V],["L",G+$,V]]},style:{lineWidth:2,r:6,stroke:H}}:{symbol:"square",style:{fill:H}});return[{value:tt,name:Object(e.get)(pt,"options.scales."+tt+".alias")||tt,marker:k,isGeometry:!0,viewId:pt.id}]}var h=U.getGroupAttributes();return Object(e.reduce)(h,function(g,G){var V=x.Util.getLegendItems(pt,U,G,pt.getTheme(),it);return g.concat(V)},[])}var N=z("tKoa");function Y(dt){var pt=dt.options,Mt=dt.chart,tt=pt.geometryOption,lt=tt.isStack,it=tt.color,U=tt.seriesField,P=tt.groupField,H=tt.isGroup,k=["xField","yField"];if(d(tt)){Object(N.d)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(pt,k)),tt),{line:{color:tt.color,style:tt.lineStyle}})})),Object(N.e)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(pt,k)),tt),{point:tt.point&&Object(at.a)({color:it,shape:"circle"},tt.point)})}));var h=[];H&&h.push({type:"dodge",dodgeBy:P||U,customOffset:0}),lt&&h.push({type:"stack"}),h.length&&Object(e.each)(Mt.geometries,function(g){g.adjust(h)})}return E(tt)&&Object(N.c)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(pt,k)),tt),{widthRatio:tt.columnWidthRatio,interval:Object(at.a)(Object(at.a)({},Object(A.k)(tt,["color"])),{style:tt.columnStyle})})})),dt}function q(dt){var pt,Mt=dt.options,tt=Mt.geometryOptions,lt=tt===void 0?[]:tt,it=Mt.xField,U=Mt.yField,P=Object(e.every)(lt,function(H){var k=H.geometry;return k===f.Line||k===void 0});return Object(A.b)({},{options:{geometryOptions:[],meta:(pt={},pt[it]={type:"cat",sync:!0,range:P?[0,1]:void 0},pt),tooltip:{showMarkers:P,showCrosshairs:P,shared:!0,crosshairs:{type:"x"}},interactions:P?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},dt,{options:{yAxis:C(U,Mt.yAxis),geometryOptions:[O(it,U[0],lt[0]),O(it,U[1],lt[1])],annotations:C(U,Mt.annotations)}})}function nt(dt){var pt=dt.chart,Mt=dt.options,tt=Mt.xField,lt=Mt.yField,it=Mt.geometryOptions,U=Mt.data,P=Mt.tooltip,H={line:0,column:1},k=[Object(at.a)(Object(at.a)({},it[0]),{id:M,data:U[0],yField:lt[0]}),Object(at.a)(Object(at.a)({},it[1]),{id:I,data:U[1],yField:lt[1]})];return k.sort(function(h,g){return-H[h.geometry]+H[g.geometry]}).forEach(function(h){var g=h.id,G=h.data,V=h.yField,$=E(h)&&h.isPercent,rt=$?Object(v.b)(G,V,tt,V):G,ot=pt.createView({id:g}).data(rt),At=$?Object(at.a)({formatter:function(mt){return{name:mt[h.seriesField]||V,value:(Number(mt[V])*100).toFixed(2)+"%"}}},P):P;Y({chart:ot,options:{xField:tt,yField:V,tooltip:At,geometryOption:h}})}),dt}function vt(dt){var pt,Mt=dt.chart,tt=dt.options,lt=tt.geometryOptions,it=((pt=Mt.getTheme())===null||pt===void 0?void 0:pt.colors10)||[],U=0;return Mt.once("beforepaint",function(){Object(e.each)(lt,function(P,H){var k=Object(b.a)(Mt,H===0?M:I);if(!P.color){var h=k.getGroupScales(),g=Object(e.get)(h,[0,"values","length"],1),G=it.slice(U,U+g).concat(H===0?[]:it);k.geometries.forEach(function(V){P.seriesField?V.color(P.seriesField,G):V.color(G[0])}),U+=g}}),Mt.render(!0)}),dt}function ht(dt){var pt,Mt,tt=dt.chart,lt=dt.options,it=lt.xAxis,U=lt.yAxis,P=lt.xField,H=lt.yField;return Object(i.f)((pt={},pt[P]=it,pt[H[0]]=U[0],pt))(Object(A.b)({},dt,{chart:Object(b.a)(tt,M)})),Object(i.f)((Mt={},Mt[P]=it,Mt[H[1]]=U[1],Mt))(Object(A.b)({},dt,{chart:Object(b.a)(tt,I)})),dt}function St(dt){var pt=dt.chart,Mt=dt.options,tt=Object(b.a)(pt,M),lt=Object(b.a)(pt,I),it=Mt.xField,U=Mt.yField,P=Mt.xAxis,H=Mt.yAxis;return pt.axis(it,!1),pt.axis(U[0],!1),pt.axis(U[1],!1),tt.axis(it,P),tt.axis(U[0],p(H[0],S.Left)),lt.axis(it,!1),lt.axis(U[1],p(H[1],S.Right)),dt}function wt(dt){var pt=dt.chart,Mt=dt.options,tt=Mt.tooltip,lt=Object(b.a)(pt,M),it=Object(b.a)(pt,I);return pt.tooltip(tt),lt.tooltip({shared:!0}),it.tooltip({shared:!0}),dt}function xt(dt){var pt=dt.chart;return Object(i.c)(Object(A.b)({},dt,{chart:Object(b.a)(pt,M)})),Object(i.c)(Object(A.b)({},dt,{chart:Object(b.a)(pt,I)})),dt}function ft(dt){var pt=dt.chart,Mt=dt.options,tt=Mt.annotations,lt=Object(e.get)(tt,[0]),it=Object(e.get)(tt,[1]);return Object(i.b)(lt)(Object(A.b)({},dt,{chart:Object(b.a)(pt,M),options:{annotations:lt}})),Object(i.b)(it)(Object(A.b)({},dt,{chart:Object(b.a)(pt,I),options:{annotations:it}})),dt}function Ft(dt){var pt=dt.chart;return Object(i.a)(Object(A.b)({},dt,{chart:Object(b.a)(pt,M)})),Object(i.a)(Object(A.b)({},dt,{chart:Object(b.a)(pt,I)})),dt}function kt(dt){var pt=dt.chart,Mt=dt.options,tt=Mt.yAxis;return Object(i.e)(Object(A.b)({},dt,{chart:Object(b.a)(pt,M),options:{yAxis:tt[0]}})),Object(i.e)(Object(A.b)({},dt,{chart:Object(b.a)(pt,I),options:{yAxis:tt[1]}})),dt}function Ot(dt){var pt=dt.chart,Mt=dt.options,tt=Mt.legend,lt=Mt.geometryOptions,it=Mt.yField,U=Mt.data,P=Object(b.a)(pt,M),H=Object(b.a)(pt,I);return tt===!1?pt.legend(!1):Object(e.isObject)(tt)&&tt.custom===!0?pt.legend(tt):(pt.once("beforepaint",function(){var k=U[0].length?T({view:P,geometryOption:lt[0],yField:it[0],legend:tt}):[],h=U[1].length?T({view:H,geometryOption:lt[1],yField:it[1],legend:tt}):[];pt.legend(Object(A.b)({},tt,{custom:!0,items:k.concat(h)}))}),pt.on("legend-item:click",function(k){var h=Object(e.get)(k,"gEvent.delegateObject",{});if(h&&h.item){var g=h.item,G=g.value,V=g.isGeometry,$=g.viewId;if(V){var rt=Object(e.findIndex)(it,function(gt){return gt===G});if(rt>-1){var ot=Object(e.get)(Object(b.a)(pt,$),"geometries");Object(e.each)(ot,function(gt){gt.changeVisible(!h.item.unchecked)})}}else{var At=Object(e.get)(pt.getController("legend"),"option.items",[]);Object(e.each)(pt.views,function(gt){var mt=gt.getGroupScales();Object(e.each)(mt,function(bt){bt.values&&bt.values.indexOf(G)>-1&&gt.filter(bt.field,function(jt){var Dt=Object(e.find)(At,function(Ut){return Ut.value===jt});return!Dt.unchecked})}),pt.render(!0)})}}})),dt}function X(dt){return Object(A.e)(q,nt,ht,St,kt,wt,xt,ft,i.j,Ft,vt,Ot)(dt)}var ct=function(dt){Object(at.b)(pt,dt);function pt(){var Mt=dt!==null&&dt.apply(this,arguments)||this;return Mt.type="dual-axes",Mt}return pt.prototype.getDefaultOptions=function(){return Object(A.b)({},dt.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},pt.prototype.getSchemaAdaptor=function(){return X},pt}(a.a)},z4Vf:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return s});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),i=z("w02o"),v=z("tKoa");function b(d){var E=d.chart,O=d.options,C=O.data,p=O.sectorStyle,x=O.color;return E.data(C),Object(A.e)(v.c)(Object(A.b)({},d,{options:{marginRatio:1,interval:{style:p,color:x}}})),d}function S(d){var E=d.chart,O=d.options,C=O.label,p=O.xField,x=Object(A.c)(E,"interval");if(C===!1)x.label(!1);else if(Object(e.isObject)(C)){var T=C.callback,N=C.fields,Y=Object(at.c)(C,["callback","fields"]),q=Y.offset,nt=Y.layout;(q===void 0||q>=0)&&(nt=nt?Object(e.isArray)(nt)?nt:[nt]:[],Y.layout=Object(e.filter)(nt,function(vt){return vt.type!=="limit-in-shape"}),Y.layout.length||delete Y.layout),x.label({fields:N||[p],callback:T,cfg:Object(A.o)(Y)})}else Object(A.j)(A.a.WARN,C===null,"the label option must be an Object."),x.label({fields:[p]});return d}function f(d){var E=d.chart,O=d.options,C=O.legend,p=O.seriesField;return C===!1?E.legend(!1):p&&E.legend(p,C),d}function M(d){var E=d.chart,O=d.options,C=O.radius,p=O.innerRadius;return E.coordinate({type:"polar",cfg:{radius:C,innerRadius:p}}),d}function I(d){var E,O=d.options,C=O.xAxis,p=O.yAxis,x=O.xField,T=O.yField;return Object(A.e)(Object(i.f)((E={},E[x]=C,E[T]=p,E)))(d)}function y(d){var E=d.chart,O=d.options,C=O.xAxis,p=O.yAxis,x=O.xField,T=O.yField;return C?E.axis(x,C):E.axis(x,!1),p?E.axis(T,p):E.axis(T,!1),d}function n(d){Object(A.e)(b,I,S,M,y,f,i.k,i.c,i.a,i.j,Object(i.b)(),i.i)(d)}var s=function(d){Object(at.b)(E,d);function E(){var O=d!==null&&d.apply(this,arguments)||this;return O.type="rose",O}return E.prototype.changeData=function(O){this.updateOption({data:O}),this.chart.changeData(O)},E.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},E.prototype.getSchemaAdaptor=function(){return n},E}(a.a)},zJSt:function(Un,_t,z){"use strict";z.d(_t,"a",function(){return f});var at=z("mrSG"),a=z("Ihc8"),A=z("iTfj"),e=z("f6Jy"),i=z("u3os"),v=z.n(i),b=z("YuPD"),S="data-chart-source-type",f=function(M){Object(at.b)(I,M);function I(y,n){var s=M.call(this)||this;return s.type="base",s.container=typeof y=="string"?document.getElementById(y):y,s.options=Object(b.b)({},s.getDefaultOptions(),n),s.createG2(),s.bindEvents(),s}return I.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},I.prototype.createG2=function(){var y=this.options,n=y.width,s=y.height,d=y.padding,E=y.appendPadding,O=y.renderer,C=y.pixelRatio,p=y.syncViewPadding,x=y.supportCSSTransform,T=y.limitInPlot;this.chart=new a.Chart(Object(at.a)(Object(at.a)({container:this.container,autoFit:!1},this.getChartSize(n,s)),{padding:d,appendPadding:E,renderer:O,pixelRatio:C,localRefresh:!1,syncViewPadding:p,supportCSSTransform:x,limitInPlot:T})),this.container.setAttribute(S,"G2Plot")},I.prototype.getChartSize=function(y,n){var s=Object(b.g)(this.container);return{width:y||s.width||400,height:n||s.height||400}},I.prototype.bindEvents=function(){var y=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&y.emit(n.type,n)})},I.prototype.getDefaultOptions=function(){return I.getDefaultOptions()},I.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},I.prototype.update=function(y){this.updateOption(y),this.render()},I.prototype.updateOption=function(y){this.options=Object(b.b)({},this.options,y)},I.prototype.setState=function(y,n,s){s===void 0&&(s=!0);var d=Object(b.f)(this.chart);Object(A.each)(d,function(E){n(E.getData())&&E.setState(y,s)})},I.prototype.getStates=function(){var y=Object(b.f)(this.chart),n=[];return Object(A.each)(y,function(s){var d=s.getData(),E=s.getStates();Object(A.each)(E,function(O){n.push({data:d,state:O,geometry:s.geometry,element:s})})}),n},I.prototype.changeData=function(y){this.update({data:y})},I.prototype.changeSize=function(y,n){this.chart.changeSize(y,n)},I.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(S)},I.prototype.execAdaptor=function(){var y=this.getSchemaAdaptor(),n=this.options,s=n.padding,d=n.appendPadding;this.chart.padding=s,this.chart.appendPadding=d,y({chart:this.chart,options:this.options})},I.prototype.triggerResize=function(){this.chart.forceFit()},I.prototype.bindSizeSensor=function(){var y=this;if(!this.unbind){var n=this.options.autoFit,s=n===void 0?!0:n;s&&(this.unbind=Object(i.bind)(this.container,function(){var d=Object(b.g)(y.container),E=d.width,O=d.height;(E!==y.chart.width||O!==y.chart.height)&&y.triggerResize()}))}},I.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},I}(e.a)},zK8m:function(Un,_t,z){"use strict";var at=z("mrSG"),a=z("iTfj"),A=z("6JdA"),e=z("sstZ"),i=z("aSjE"),v=z("LmB6"),b=A.a.transform,S="matrix",f=["zIndex","capture","visible","type"],M=["repeat"],I=":",y="*";function n(C){for(var p=[],x=0;x<C.length;x++)Object(a.isArray)(C[x])?p.push([].concat(C[x])):p.push(C[x]);return p}function s(C,p){var x={},T=p.attrs;for(var N in C)x[N]=T[N];return x}function d(C,p){var x={},T=p.attr();return Object(a.each)(C,function(N,Y){M.indexOf(Y)===-1&&!Object(a.isEqual)(T[Y],N)&&(x[Y]=N)}),x}function E(C,p){if(p.onFrame)return C;var x=p.startTime,T=p.delay,N=p.duration,Y=Object.prototype.hasOwnProperty;return Object(a.each)(C,function(q){x+T<q.startTime+q.delay+q.duration&&N>q.delay&&Object(a.each)(p.toAttrs,function(nt,vt){Y.call(q.toAttrs,vt)&&(delete q.toAttrs[vt],delete q.fromAttrs[vt])})}),C}var O=function(C){Object(at.b)(p,C);function p(x){var T=C.call(this,x)||this;T.attrs={};var N=T.getDefaultAttrs();return Object(a.mix)(N,x.attrs),T.attrs=N,T.initAttrs(N),T.initAnimate(),T}return p.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},p.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},p.prototype.onCanvasChange=function(x){},p.prototype.initAttrs=function(x){},p.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},p.prototype.isGroup=function(){return!1},p.prototype.getParent=function(){return this.get("parent")},p.prototype.getCanvas=function(){return this.get("canvas")},p.prototype.attr=function(){for(var x,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var Y=T[0],q=T[1];if(!Y)return this.attrs;if(Object(a.isObject)(Y)){for(var nt in Y)this.setAttr(nt,Y[nt]);return this.afterAttrsChange(Y),this}return T.length===2?(this.setAttr(Y,q),this.afterAttrsChange((x={},x[Y]=q,x)),this):this.attrs[Y]},p.prototype.isClipped=function(x,T){var N=this.getClip();return N&&!N.isHit(x,T)},p.prototype.setAttr=function(x,T){var N=this.attrs[x];N!==T&&(this.attrs[x]=T,this.onAttrChange(x,T,N))},p.prototype.onAttrChange=function(x,T,N){x==="matrix"&&this.set("totalMatrix",null)},p.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var T=this.cfg.applyTo;T&&T.onCanvasChange("clip")}else this.onCanvasChange("attr")},p.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},p.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},p.prototype.setZIndex=function(x){this.set("zIndex",x);var T=this.getParent();return T&&T.sort(),this},p.prototype.toFront=function(){var x=this.getParent();if(!!x){var T=x.getChildren(),N=this.get("el"),Y=T.indexOf(this);T.splice(Y,1),T.push(this),this.onCanvasChange("zIndex")}},p.prototype.toBack=function(){var x=this.getParent();if(!!x){var T=x.getChildren(),N=this.get("el"),Y=T.indexOf(this);T.splice(Y,1),T.unshift(this),this.onCanvasChange("zIndex")}},p.prototype.remove=function(x){x===void 0&&(x=!0);var T=this.getParent();T?(Object(e.j)(T.getChildren(),this),T.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},p.prototype.resetMatrix=function(){this.attr(S,this.getDefaultMatrix()),this.onCanvasChange("matrix")},p.prototype.getMatrix=function(){return this.attr(S)},p.prototype.setMatrix=function(x){this.attr(S,x),this.onCanvasChange("matrix")},p.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var T=this.attr("matrix"),N=this.cfg.parentMatrix;N&&T?x=Object(i.b)(N,T):x=T||N,this.set("totalMatrix",x)}return x},p.prototype.applyMatrix=function(x){var T=this.attr("matrix"),N=null;x&&T?N=Object(i.b)(x,T):N=T||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},p.prototype.getDefaultMatrix=function(){return null},p.prototype.applyToMatrix=function(x){var T=this.attr("matrix");return T?Object(i.c)(T,x):x},p.prototype.invertFromMatrix=function(x){var T=this.attr("matrix");if(T){var N=Object(i.a)(T);if(N)return Object(i.c)(N,x)}return x},p.prototype.setClip=function(x){var T=this.getCanvas(),N=null;if(x){var Y=this.getShapeBase(),q=Object(a.upperFirst)(x.type),nt=Y[q];nt&&(N=new nt({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:T}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},p.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},p.prototype.clone=function(){var x=this,T=this.attrs,N={};Object(a.each)(T,function(nt,vt){Object(a.isArray)(T[vt])?N[vt]=n(T[vt]):N[vt]=T[vt]});var Y=this.constructor,q=new Y({attrs:N});return Object(a.each)(f,function(nt){q.set(nt,x.get(nt))}),q},p.prototype.destroy=function(){var x=this.destroyed;x||(this.attrs={},C.prototype.destroy.call(this))},p.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},p.prototype.animate=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=this.isCanvas&&this.isCanvas();if(!(!N&&!this.get("canvas"))){this.set("animating",!0);var Y=this.get("timeline");Y||(Y=this.get("canvas").get("timeline"),this.set("timeline",Y));var q=this.get("animations")||[];Y.timer||Y.initTimer();var nt=x[0],vt=x[1],ht=x[2],St=ht===void 0?"easeLinear":ht,wt=x[3],xt=wt===void 0?a.noop:wt,ft=x[4],Ft=ft===void 0?0:ft,kt,Ot,X,ct,dt;Object(a.isFunction)(nt)?(kt=nt,nt={}):Object(a.isObject)(nt)&&nt.onFrame&&(kt=nt.onFrame,Ot=nt.repeat),Object(a.isObject)(vt)?(dt=vt,vt=dt.duration,St=dt.easing||"easeLinear",Ft=dt.delay||0,Ot=dt.repeat||Ot||!1,xt=dt.callback||a.noop,X=dt.pauseCallback||a.noop,ct=dt.resumeCallback||a.noop):(Object(a.isNumber)(xt)&&(Ft=xt,xt=null),Object(a.isFunction)(St)?(xt=St,St="easeLinear"):St=St||"easeLinear");var pt=d(nt,this),Mt={fromAttrs:s(pt,this),toAttrs:pt,duration:vt,easing:St,repeat:Ot,callback:xt,pauseCallback:X,resumeCallback:ct,delay:Ft,startTime:Y.getTime(),id:Object(a.uniqueId)(),onFrame:kt,pathFormatted:!1};q.length>0?q=E(q,Mt):Y.addAnimator(this),q.push(Mt),this.set("animations",q),this.set("_pause",{isPaused:!1})}},p.prototype.stopAnimate=function(x){var T=this;x===void 0&&(x=!0);var N=this.get("animations");Object(a.each)(N,function(Y){x&&(Y.onFrame?T.attr(Y.onFrame(1)):T.attr(Y.toAttrs)),Y.callback&&Y.callback()}),this.set("animating",!1),this.set("animations",[])},p.prototype.pauseAnimate=function(){var x=this.get("timeline"),T=this.get("animations"),N=x.getTime();return Object(a.each)(T,function(Y){Y._paused=!0,Y._pauseTime=N,Y.pauseCallback&&Y.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},p.prototype.resumeAnimate=function(){var x=this.get("timeline"),T=x.getTime(),N=this.get("animations"),Y=this.get("_pause").pauseTime;return Object(a.each)(N,function(q){q.startTime=q.startTime+(T-Y),q._paused=!1,q._pauseTime=null,q.resumeCallback&&q.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",N),this},p.prototype.emitDelegation=function(x,T){var N=this,Y=T.propagationPath,q=this.getEvents(),nt;x==="mouseenter"?nt=T.fromShape:x==="mouseleave"&&(nt=T.toShape);for(var vt=function(ft){var Ft=Y[ft],kt=Ft.get("name");if(kt){if((Ft.isGroup()||Ft.isCanvas&&Ft.isCanvas())&&nt&&Object(e.g)(Ft,nt))return"break";Object(a.isArray)(kt)?Object(a.each)(kt,function(Ot){N.emitDelegateEvent(Ft,Ot,T)}):ht.emitDelegateEvent(Ft,kt,T)}},ht=this,St=0;St<Y.length;St++){var wt=vt(St);if(wt==="break")break}},p.prototype.emitDelegateEvent=function(x,T,N){var Y=this.getEvents(),q=T+I+N.type;(Y[q]||Y[y])&&(N.name=q,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(q,N))},p.prototype.translate=function(x,T){x===void 0&&(x=0),T===void 0&&(T=0);var N=this.getMatrix(),Y=b(N,[["t",x,T]]);return this.setMatrix(Y),this},p.prototype.move=function(x,T){var N=this.attr("x")||0,Y=this.attr("y")||0;return this.translate(x-N,T-Y),this},p.prototype.moveTo=function(x,T){return this.move(x,T)},p.prototype.scale=function(x,T){var N=this.getMatrix(),Y=b(N,[["s",x,T||x]]);return this.setMatrix(Y),this},p.prototype.rotate=function(x){var T=this.getMatrix(),N=b(T,[["r",x]]);return this.setMatrix(N),this},p.prototype.rotateAtStart=function(x){var T=this.attr(),N=T.x,Y=T.y,q=this.getMatrix(),nt=b(q,[["t",-N,-Y],["r",x],["t",N,Y]]);return this.setMatrix(nt),this},p.prototype.rotateAtPoint=function(x,T,N){var Y=this.getMatrix(),q=b(Y,[["t",-x,-T],["r",N],["t",x,T]]);return this.setMatrix(q),this},p}(v.a);_t.a=O},zoYe:function(Un,_t,z){var at=z("nmnc"),a=z("eUgh"),A=z("Z0cm"),e=z("/9aa"),i=1/0,v=at?at.prototype:void 0,b=v?v.toString:void 0;function S(f){if(typeof f=="string")return f;if(A(f))return a(f,S)+"";if(e(f))return b?b.call(f):"";var M=f+"";return M=="0"&&1/f==-i?"-0":M}Un.exports=S}}]);
