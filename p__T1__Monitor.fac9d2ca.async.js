(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+DwW":function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("Mw2x"),A=function(e){Object(at.b)(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.isGroup=function(){return!0},i.prototype.isEntityGroup=function(){return!1},i.prototype.clone=function(){for(var p=e.prototype.clone.call(this),m=this.getChildren(),S=0;S<m.length;S++){var l=m[S];p.add(l.clone())}return p},i}(a.a);Gt.a=A},"+Nd1":function(Gn,Gt,_){"use strict";var at=_("DdT1"),a=_("FPPI");Gt.a=function(){var A=1,e=1,i=0,p=!1;function m(l){var M=l.height+1;return l.x0=l.y0=i,l.x1=A,l.y1=e/M,l.eachBefore(S(e,M)),p&&l.eachBefore(at.a),l}function S(l,M){return function(j){j.children&&Object(a.a)(j,j.x0,l*(j.depth+1)/M,j.x1,l*(j.depth+2)/M);var y=j.x0,n=j.y0,s=j.x1-i,d=j.y1-i;s<y&&(y=s=(y+s)/2),d<n&&(n=d=(n+d)/2),j.x0=y,j.y0=n,j.x1=s,j.y1=d}}return m.round=function(l){return arguments.length?(p=!!l,m):p},m.size=function(l){return arguments.length?(A=+l[0],e=+l[1],m):[A,e]},m.padding=function(l){return arguments.length?(i=+l,m):i},m}},"+Oe8":function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getReplaceAttrs=Gt.getPolygonCentroid=Gt.getAngle=Gt.getArcPath=Gt.getSectorPath=Gt.polarToCartesian=void 0;var at=_("iTfj");function a(l){if(at.isEmpty(l))return null;var M=l[0].x,j=l[0].x,y=l[0].y,n=l[0].y;return at.each(l,function(s){M=M>s.x?s.x:M,j=j<s.x?s.x:j,y=y>s.y?s.y:y,n=n<s.y?s.y:n}),{minX:M,maxX:j,minY:y,maxY:n,centerX:(M+j)/2,centerY:(y+n)/2}}function A(l,M,j,y){return{x:l+j*Math.cos(y),y:M+j*Math.sin(y)}}Gt.polarToCartesian=A;function e(l,M,j,y,n,s){s===void 0&&(s=0);var d=A(l,M,j,y),E=A(l,M,j,n),O=A(l,M,s,y),C=A(l,M,s,n);if(n-y==Math.PI*2){var v=A(l,M,j,y+Math.PI),x=A(l,M,s,y+Math.PI),T=[["M",d.x,d.y],["A",j,j,0,1,1,v.x,v.y],["A",j,j,0,1,1,E.x,E.y],["M",O.x,O.y]];return s&&(T.push(["A",s,s,0,1,0,x.x,x.y]),T.push(["A",s,s,0,1,0,C.x,C.y])),T.push(["M",d.x,d.y]),T.push(["Z"]),T}var N=n-y<=Math.PI?0:1,X=[["M",d.x,d.y],["A",j,j,0,N,1,E.x,E.y],["L",C.x,C.y]];return s&&X.push(["A",s,s,0,N,0,O.x,O.y]),X.push(["L",d.x,d.y]),X.push(["Z"]),X}Gt.getSectorPath=e;function i(l,M,j,y,n){var s=A(l,M,j,y),d=A(l,M,j,n);if(at.isNumberEqual(n-y,Math.PI*2)){var E=A(l,M,j,y+Math.PI);return[["M",s.x,s.y],["A",j,j,0,1,1,E.x,E.y],["A",j,j,0,1,1,s.x,s.y],["A",j,j,0,1,0,E.x,E.y],["A",j,j,0,1,0,s.x,s.y],["Z"]]}var O=n-y<=Math.PI?0:1;return[["M",s.x,s.y],["A",j,j,0,O,1,d.x,d.y]]}Gt.getArcPath=i;function p(l,M){var j=l.points,y=a(j),n,s,d=M.startAngle,E=M.endAngle,O=E-d;return M.isTransposed?(n=y.maxY*O,s=y.minY*O):(n=y.maxX*O,s=y.minX*O),n+=d,s+=d,{startAngle:s,endAngle:n}}Gt.getAngle=p;function m(l,M){if(at.isNumber(l)&&at.isNumber(M))return[l,M];for(var j=-1,y=0,n=0,s,d=l.length-1,E,O=0;++j<l.length;)s=d,d=j,O+=E=l[s]*M[d]-l[d]*M[s],y+=(l[s]+l[d])*E,n+=(M[s]+M[d])*E;return O*=3,[y/O,n/O]}Gt.getPolygonCentroid=m;function S(l,M){var j=l.attr(),y=M.attr();return at.each(j,function(n,s){y[s]===void 0&&(y[s]=void 0)}),y}Gt.getReplaceAttrs=S},"+wVF":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return d});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("n/J0"),p=_("w02o");function m(E){var O=E.chart,C=E.options,v=C.data,x=C.type,T=C.reflect,N=C.xField,X=C.yField,tt=C.colorField,nt=C.sizeField,vt=C.sizeRatio,ft=C.shape,bt=C.color;O.data(v);var St;x==="density"?St=O.heatmap().position(N+"*"+X):St=O.polygon().position(N+"*"+X),tt&&St.color(tt,bt||i.b.GRADIENT.CONTINUOUS),T&&O.coordinate().reflect(T);var pt=1;if((vt||vt===0)&&(!ft&&!nt?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):vt<0||vt>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):pt=vt),ft&&(nt||St.shape("",function(){return[ft,1,pt]}),nt)){var ct=v.map(function(wt){return wt[nt]}),zt=Math.min.apply(Math,ct),Nt=Math.max.apply(Math,ct);St.shape(nt,function(wt){return[ft,(wt-zt)/(Nt-zt),pt]})}return E}function S(E){var O,C=E.options,v=C.xAxis,x=C.yAxis,T=C.xField,N=C.yField;return Object(A.e)(Object(p.f)((O={},O[T]=v,O[N]=x,O)))(E)}function l(E){var O=E.chart,C=E.options,v=C.xAxis,x=C.yAxis,T=C.xField,N=C.yField;return v===!1?O.axis(T,!1):O.axis(T,v),x===!1?O.axis(N,!1):O.axis(N,x),E}function M(E){var O=E.chart,C=E.options,v=C.legend,x=C.colorField;return v?O.legend(x,v):O.legend(!1),E}function j(E){var O=E.chart,C=E.options,v=C.xField,x=C.yField,T=C.colorField,N=C.sizeField,X=C.heatmapStyle,tt=O.geometries[0];return X&&tt&&(Object(e.isFunction)(X)?tt.style(v+"*"+x+"*"+T+"*"+N,X):Object(e.isObject)(X)&&tt.style(X)),E}function y(E){var O=E.chart,C=E.options,v=C.label,x=C.colorField,T=C.type,N=Object(A.c)(O,T==="density"?"heatmap":"polygon");if(!v)N.label(!1);else if(x){var X=v.callback,tt=Object(at.c)(v,["callback"]);N.label({fields:[x],callback:X,cfg:Object(A.o)(tt)})}return E}function n(E){return Object(A.e)(m,S,p.j,l,M,p.k,j,y,Object(p.b)(),p.c,p.a)(E)}var s=_("kXyF");Object(s.registerShape)("polygon","circle",{draw:function(O,C){var v,x,T=O.x,N=O.y,X=this.parsePoints(O.points),tt=Math.abs(X[2].x-X[1].x),nt=Math.abs(X[1].y-X[0].y),vt=Math.min(tt,nt)/2,ft=Number(O.shape[1]),bt=Number(O.shape[2]),St=Math.sqrt(bt),pt=vt*St*Math.sqrt(ft),ct=((v=O.style)===null||v===void 0?void 0:v.fill)||O.color||((x=O.defaultStyle)===null||x===void 0?void 0:x.fill),zt=C.addShape("circle",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:T,y:N,r:pt},O.defaultStyle),O.style),{fill:ct})});return zt}}),Object(s.registerShape)("polygon","square",{draw:function(O,C){var v,x,T=O.x,N=O.y,X=this.parsePoints(O.points),tt=Math.abs(X[2].x-X[1].x),nt=Math.abs(X[1].y-X[0].y),vt=Math.min(tt,nt),ft=Number(O.shape[1]),bt=Number(O.shape[2]),St=Math.sqrt(bt),pt=vt*St*Math.sqrt(ft),ct=((v=O.style)===null||v===void 0?void 0:v.fill)||O.color||((x=O.defaultStyle)===null||x===void 0?void 0:x.fill),zt=C.addShape("rect",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:T-pt/2,y:N-pt/2,width:pt,height:pt},O.defaultStyle),O.style),{fill:ct})});return zt}});var d=function(E){Object(at.b)(O,E);function O(){var C=E!==null&&E.apply(this,arguments)||this;return C.type="heatmap",C}return O.prototype.getSchemaAdaptor=function(){return n},O.prototype.getDefaultOptions=function(){return Object(A.b)({},E.prototype.getDefaultOptions.call(this),{type:"polygon",legend:!1,xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}})},O}(a.a)},"/+3i":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return x});var at=_("mrSG"),a=_("YuPD"),A=_("zJSt"),e=_("iTfj"),i=_("w02o"),p=_("n/J0"),m="$$stock-range$$",S="trend",l="up",M="down",j=["#ef5350","#26a69a"],y={showTitle:!1,showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0},itemTpl:'<li class="g2-tooltip-list-item" data-index={index}><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}{value}</li>'};function n(T,N){return Object(e.map)(T,function(X){if(Object(e.isArray)(N)){var tt=N[0],nt=N[1],vt=N[2],ft=N[3];X[S]=X[tt]<=X[nt]?l:M,X[m]=[X[tt],X[nt],X[vt],X[ft]]}return X})}function s(T){var N=T.chart,X=T.options,tt=X.xField,nt=X.yField,vt=X.data;N.data(n(vt,nt));var ft=N.schema().position(tt+"*"+m).shape("candle");return ft.color(S,j),T}function d(T){var N,X,tt=T.chart,nt=T.options,vt=nt.meta,ft=nt.xAxis,bt=nt.yAxis,St=nt.xField,pt=(N={},N[St]={type:"timeCat",tickCount:6},N[S]={values:[l,M]},N),ct=Object(a.b)(pt,vt,(X={},X[St]=Object(a.k)(ft,p.a),X[m]=Object(a.k)(bt,p.a),X));return tt.scale(ct),T}function E(T){var N=T.chart,X=T.options,tt=X.xAxis,nt=X.yAxis,vt=X.xField;return tt===!1?N.axis(vt,!1):N.axis(vt,tt),nt===!1?N.axis(m,!1):N.axis(m,nt),T}function O(T){var N=T.chart,X=T.options,tt=X.xField,nt=X.yField,vt=X.meta,ft=vt===void 0?{}:vt,bt=X.tooltip,St=bt===void 0?{}:bt,pt=Object(a.c)(N,"schema"),ct=nt[0],zt=nt[1],Nt=nt[2],wt=nt[3],H=ft[ct]&&ft[ct].alias||ct,ht=ft[zt]?ft[zt].alias||ct:zt,dt=ft[Nt]&&ft[Nt].alias||Nt,yt=ft[wt]&&ft[wt].alias||wt,Mt={fields:[tt,ct,zt,Nt,wt],callback:function(z,P,Y,k,h){var g={name:z,value:`
          <br><span data-label="`+H+'" style="padding-left: 16px">'+H+"\uFF1A"+P+`</span>
          <br><span data-label="`+ht+'" style="padding-left: 16px">'+ht+"\uFF1A"+Y+`</span>
          <br><span data-label="`+dt+'" style="padding-left: 16px">'+dt+"\uFF1A"+k+`</span>
          <br><span data-label="`+yt+'" style="padding-left: 16px">'+yt+"\uFF1A"+h+`</span>
        `};return g}},$={crosshairs:{text:function(z,P,Y){var k={position:"end"};if(z==="x"){var h=Y[0];k.content=h?h.data[tt]:P}else k.content=P;return k}}};if(St){if(Object(e.isObject)(St)){var lt=Object(a.b)({},$,St);N.tooltip(lt),pt.tooltip(Mt)}}else N.tooltip(!1);return T}function C(T){var N=T.chart,X=T.options,tt=X.legend;return tt?N.legend(S,tt):tt===!1&&N.legend(!1),T}function v(T){Object(a.e)(s,d,i.j,E,O,C,i.c,i.a)(T)}var x=function(T){Object(at.b)(N,T);function N(){var X=T!==null&&T.apply(this,arguments)||this;return X.type="stock",X}return N.prototype.getDefaultOptions=function(){return Object(a.b)({},T.prototype.getDefaultOptions.call(this),{tooltip:y,interactions:[{type:"tooltip"}],legend:{position:"top-left"}})},N.prototype.getSchemaAdaptor=function(){return v},N.prototype.changeData=function(X){this.updateOption({data:X});var tt=this.options.yField;this.chart.changeData(n(X,tt))},N}(A.a)},"/3+T":function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return M}),_.d(Gt,"Circle",function(){return y}),_.d(Gt,"Base",function(){return S}),_.d(Gt,"Html",function(){return T});var at=_("mrSG"),a=_("5UbV"),A=_("iTfj"),e=_("MeYt"),i=_("jqgP"),p=_("L16w"),m=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:p.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:p.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:p.a.fontFamily}},textBackground:{padding:5,style:{stroke:p.a.lineColor}}}})},X.prototype.renderInner=function(tt){this.get("line")&&this.renderLine(tt),this.get("text")&&(this.renderText(tt),this.renderBackground(tt))},X.prototype.renderText=function(tt){var nt=this.get("text"),vt=nt.style,ft=nt.autoRotate,bt=nt.content;if(!Object(A.isNil)(bt)){var St=this.getTextPoint(),pt=null;if(ft){var ct=this.getRotateAngle();pt=Object(i.e)(St,ct)}this.addShape(tt,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Object(at.a)(Object(at.a)(Object(at.a)({},St),{text:bt,matrix:pt}),vt)})}},X.prototype.renderLine=function(tt){var nt=this.getLinePath(),vt=this.get("line"),ft=vt.style;this.addShape(tt,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Object(at.a)({path:nt},ft)})},X.prototype.renderBackground=function(tt){var nt=this.getElementId("text"),vt=tt.findById(nt),ft=this.get("textBackground");if(ft&&vt){var bt=vt.getBBox(),St=Object(a.c)(ft.padding),pt=ft.style,ct=this.addShape(tt,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Object(at.a)({x:bt.x-St[3],y:bt.y-St[0],width:bt.width+St[1]+St[3],height:bt.height+St[0]+St[2],matrix:vt.attr("matrix")},pt)});ct.toBack()}},X}(e.a),S=m,l=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{type:"line",locationType:"region",start:null,end:null})},X.prototype.getRotateAngle=function(){var tt=this.getLocation(),nt=tt.start,vt=tt.end,ft=this.get("text").position,bt=Math.atan2(vt.y-nt.y,vt.x-nt.x),St=ft==="start"?bt-Math.PI/2:bt+Math.PI/2;return St},X.prototype.getTextPoint=function(){var tt=this.getLocation(),nt=tt.start,vt=tt.end,ft=this.get("text"),bt=ft.position,St=ft.offset;return Object(a.f)(nt,vt,bt,St)},X.prototype.getLinePath=function(){var tt=this.getLocation(),nt=tt.start,vt=tt.end;return[["M",nt.x,nt.y],["L",vt.x,vt.y]]},X}(S),M=l,j=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},X.prototype.getRotateAngle=function(){var tt=this.getLocation(),nt=tt.startAngle,vt=tt.endAngle,ft=this.get("text").position,bt=ft==="start"?nt+Math.PI/2:vt-Math.PI/2;return bt},X.prototype.getTextPoint=function(){var tt=this.get("text"),nt=tt.position,vt=tt.offset,ft=this.getLocation(),bt=ft.center,St=ft.radius,pt=ft.startAngle,ct=ft.endAngle,zt=nt==="start"?pt:ct,Nt=this.getRotateAngle()-Math.PI,wt=Object(a.e)(bt,St,zt),H=Math.cos(Nt)*vt,ht=Math.sin(Nt)*vt;return{x:wt.x+H,y:wt.y+ht}},X.prototype.getLinePath=function(){var tt=this.getLocation(),nt=tt.center,vt=tt.radius,ft=tt.startAngle,bt=tt.endAngle,St=null;if(bt-ft==Math.PI*2){var pt=nt.x,ct=nt.y;St=[["M",pt,ct-vt],["A",vt,vt,0,1,1,pt,ct+vt],["A",vt,vt,0,1,1,pt,ct-vt],["Z"]]}else{var zt=Object(a.e)(nt,vt,ft),Nt=Object(a.e)(nt,vt,bt),wt=Math.abs(bt-ft)>Math.PI?1:0,H=ft>bt?0:1;St=[["M",zt.x,zt.y],["A",vt,vt,0,wt,H,Nt.x,Nt.y]]}return St},X}(S),y=j,n=_("fIp6"),s=_("de35"),d="g2-crosshair",E=d+"-line",O=d+"-text",C,v=(C={},C[""+d]={position:"relative"},C[""+E]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},C[""+O]={position:"absolute",color:p.a.textColor,fontFamily:p.a.fontFamily},C),x=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+d+'"></div>',crosshairTpl:'<div class="'+E+'"></div>',textTpl:'<span class="'+O+'">{content}</span>',domStyles:null,containerClassName:d,defaultStyles:v,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},X.prototype.render=function(){this.resetText(),this.resetPosition()},X.prototype.initCrossHair=function(){var tt=this.getContainer(),nt=this.get("crosshairTpl"),vt=Object(n.b)(nt);tt.appendChild(vt),this.applyStyle(E,vt),this.set("crosshairEl",vt)},X.prototype.getTextPoint=function(){var tt=this.getLocation(),nt=tt.start,vt=tt.end,ft=this.get("text"),bt=ft.position,St=ft.offset;return Object(a.f)(nt,vt,bt,St)},X.prototype.resetText=function(){var tt=this.get("text"),nt=this.get("textEl");if(tt){var vt=tt.content;if(!nt){var ft=this.getContainer(),bt=Object(A.substitute)(this.get("textTpl"),tt);nt=Object(n.b)(bt),ft.appendChild(nt),this.applyStyle(O,nt),this.set("textEl",nt)}nt.innerHTML=vt}else nt&&nt.remove()},X.prototype.isVertical=function(tt,nt){return tt.x===nt.x},X.prototype.resetPosition=function(){var tt=this.get("crosshairEl");tt||(this.initCrossHair(),tt=this.get("crosshairEl"));var nt=this.get("start"),vt=this.get("end"),ft=Math.min(nt.x,vt.x),bt=Math.min(nt.y,vt.y);this.isVertical(nt,vt)?Object(n.e)(tt,{width:"1px",height:Object(a.l)(Math.abs(vt.y-nt.y))}):Object(n.e)(tt,{height:"1px",width:Object(a.l)(Math.abs(vt.x-nt.x))}),Object(n.e)(tt,{top:Object(a.l)(bt),left:Object(a.l)(ft)}),this.alignText()},X.prototype.alignText=function(){var tt=this.get("textEl");if(tt){var nt=this.get("text").align,vt=tt.clientWidth,ft=this.getTextPoint();switch(nt){case"center":ft.x=ft.x-vt/2;break;case"right":ft.x=ft.x-vt;case"left":break}Object(n.e)(tt,{top:Object(a.l)(ft.y),left:Object(a.l)(ft.x)})}},X.prototype.updateInner=function(tt){Object(A.hasKey)(tt,"text")&&this.resetText(),N.prototype.updateInner.call(this,tt)},X}(s.a),T=x},"027J":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return n});var at=_("mrSG"),a=_("zJSt"),A=_("lFe4"),e=_("w02o"),i=_("YuPD"),p=_("tKoa"),m=_("7cv3"),S=_("DyAw");function l(s){var d,E,O=s.chart,C=s.options,v=C.data,x=C.xAxis,T=C.yAxis,N=C.color,X=C.columnStyle,tt=C.columnWidthRatio,nt=Object(A.a)(v);O.data(nt);var vt=Object(i.b)({},s,{options:{xField:m.b,yField:m.c,widthRatio:tt,interval:{style:X,color:N}}});return Object(p.c)(vt),O.axis(!1),O.legend(!1),O.interaction("element-active"),Object(e.f)((d={},d[m.b]=x,d[m.c]=T,d),(E={},E[m.b]={type:"cat"},E[m.c]=Object(S.a)(nt,m.c),E))(s),s}function M(s){return Object(i.e)(l,e.k,e.j,e.a,Object(e.b)())(s)}var j=_("iTfj"),y={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(d,E){return""+Object(j.get)(E,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},n=function(s){Object(at.b)(d,s);function d(){var E=s!==null&&s.apply(this,arguments)||this;return E.type="tiny-column",E}return d.prototype.changeData=function(E){this.updateOption({data:E}),this.chart.changeData(Object(A.a)(E))},d.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},y),animation:!0}},d.prototype.getSchemaAdaptor=function(){return M},d}(a.a)},"05BJ":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return j});var at=_("mrSG"),a=_("zJSt"),A=_("7cv3"),e=_("lFe4"),i=_("w02o"),p=_("YuPD"),m=_("tKoa"),S=_("DyAw");function l(y){var n,s,d=y.chart,E=y.options,O=E.data,C=E.xAxis,v=E.yAxis,x=E.color,T=E.areaStyle,N=E.point,X=E.line,tt=Object(e.a)(O);d.data(tt);var nt=Object(p.b)({},y,{options:{xField:A.b,yField:A.c,area:{color:x,style:T},line:X,point:N}}),vt=Object(p.b)({},nt,{options:{tooltip:!1}});return Object(m.a)(nt),Object(m.d)(vt),Object(m.e)(vt),d.axis(!1),d.legend(!1),Object(i.f)((n={},n[A.b]=C,n[A.c]=v,n),(s={},s[A.b]={type:"cat"},s[A.c]=Object(S.a)(tt,A.c),s))(y),y}function M(y){return Object(p.e)(l,i.k,i.j,i.a,Object(i.b)())(y)}var j=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-area",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(e.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},A.a),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:!0}},n.prototype.getSchemaAdaptor=function(){return M},n}(a.a)},"06Lf":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return Y}),_.d(Gt,"b",function(){return At}),_.d(Gt,"c",function(){return ye});var at=_("q1tI"),a=_.n(at),A=_("ma/q"),e=_("iTfj"),i=function(Xt,Se){var Wt={}.toString;return Wt.call(Xt)==="[object "+Se+"]"},p=function(Xt){if(!Xt)return Xt;var Se={};for(var Wt in Xt)Se[Wt]=Xt[Wt];return Se},m=function(Xt,Se){for(var Wt=Xt,ue=0;ue<Se.length;ue++)if(Wt==null?void 0:Wt[Se[ue]])Wt=Wt[Se[ue]];else{Wt=void 0;break}return Wt},S=function(Xt,Se,Wt){if(!Xt)return Xt;var ue=Xt;return Se.forEach(function(vn,Dn){Dn<Se.length-1?ue=ue[vn]:ue[vn]=Wt}),Xt},l=function(Xt,Se){!Xt||(Object(e.isFunction)(Xt)?Xt(Se):Xt.current=Se)},M={isType:i,clone:p,hasPath:m,setPath:S},j=_("i8i4"),y=_.n(j),n=function(Xt,Se){var Wt=document.createElement("div");return Se==="tooltip"&&(Wt.className="g2-tooltip"),y.a.render(Xt,Wt),Wt},s=n,d=function(){return d=Object.assign||function(_t){for(var Xt,Se=1,Wt=arguments.length;Se<Wt;Se++){Xt=arguments[Se];for(var ue in Xt)Object.prototype.hasOwnProperty.call(Xt,ue)&&(_t[ue]=Xt[ue])}return _t},d.apply(this,arguments)},E=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se};function O(_t,Xt){var Se=Object(at.useRef)(),Wt=Object(at.useRef)(),ue=Object(at.useRef)(null),vn=Xt.onReady,Dn=Xt.onEvent,zn=function(xt,$t){var me;return xt===void 0&&(xt="image/png"),(me=Se.current)===null||me===void 0?void 0:me.chart.canvas.cfg.el.toDataURL(xt,$t)},Un=function(xt,$t,me){var Zt;xt===void 0&&(xt="download"),$t===void 0&&($t="image/png");var de=xt;xt.indexOf(".")===-1&&(de=xt+"."+$t.split("/")[1]);var he=(Zt=Se.current)===null||Zt===void 0?void 0:Zt.chart.canvas.cfg.el.toDataURL($t,me),ce=document.createElement("a");return ce.href=he,ce.download=de,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ce=null,de},Ze=function(xt,$t,me){var Zt=M.hasPath,de=M.setPath,he=Zt(xt,$t);de(xt,$t,function(){for(var ce=[],Me=0;Me<arguments.length;Me++)ce[Me]=arguments[Me];var ze=M.isType(he,"Function")?he.apply(void 0,ce):he;return M.isType(ze,"String")||M.isType(ze,"Number")||M.isType(ze,"HTMLDivElement")?ze:s(ze,me)})},Ce=function(){var xt=M.hasPath;xt(Xt,["statistic","content","customHtml"])&&Ze(Xt,["statistic","content","customHtml"]),xt(Xt,["statistic","title","customHtml"])&&Ze(Xt,["statistic","title","customHtml"]),typeof Xt.tooltip=="object"&&(xt(Xt,["tooltip","container"])&&Ze(Xt,["tooltip","container"],"tooltip"),xt(Xt,["tooltip","customContent"])&&Ze(Xt,["tooltip","customContent"],"tooltip"))};return Object(at.useEffect)(function(){if(Se.current&&!Object(e.isEqual)(Wt.current,Xt)){var R=!1;if(Wt.current){var xt=Wt.current,$t=xt.data,me=xt.value,Zt=xt.percent,de=E(xt,["data","value","percent"]),he=Xt.data,ce=Xt.value,Me=Xt.percent,ze=E(Xt,["data","value","percent"]);R=Object(e.isEqual)(de,ze)}if(R){var Ve="data",ke=["percent"],tn=Object.keys(Xt);ke.forEach(function(De){tn.includes(De)&&(Ve=De)}),Se.current.changeData((Xt==null?void 0:Xt[Ve])||[])}else Ce(),Se.current.update(Xt);Wt.current=Xt}},[Xt]),Object(at.useEffect)(function(){if(!ue.current)return function(){return null};Ce();var R=new _t(ue.current,d({},Xt));R.__proto__.toDataURL=function($t,me){return zn($t,me)},R.__proto__.downloadImage=function($t,me,Zt){return Un($t,me,Zt)},R.render(),Wt.current||(Wt.current=Xt),Se.current=M.clone(R),vn&&vn(R);var xt=function(me){Dn&&Dn(R,me)};return R.on("*",xt),function(){Se.current&&(Se.current.destroy(),Se.current.off("*",xt),Se.current=void 0)}},[]),{chart:Se,container:ue}}var C=function(){var _t=function(Se,Wt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,vn){ue.__proto__=vn}||function(ue,vn){for(var Dn in vn)Object.prototype.hasOwnProperty.call(vn,Dn)&&(ue[Dn]=vn[Dn])},_t(Se,Wt)};return function(Xt,Se){_t(Xt,Se);function Wt(){this.constructor=Xt}Xt.prototype=Se===null?Object.create(Se):(Wt.prototype=Se.prototype,new Wt)}}(),v=function(_t){C(Xt,_t);function Xt(){var Se=_t!==null&&_t.apply(this,arguments)||this;return Se.state={hasError:!1},Se.renderError=function(Wt){var ue=Se.props.errorTemplate;switch(Wt){default:return ue&&typeof ue=="function"?ue(Wt):a.a.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Wt.message)}},Se}return Xt.getDerivedStateFromError=function(Se){return{hasError:!0,error:Se}},Xt.getDerivedStateFromProps=function(Se,Wt){return Wt.children!==Se.children?{children:Se.children,hasError:!1,error:void 0}:null},Xt.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):a.a.createElement(at.Fragment,null,this.props.children)},Xt}(a.a.Component),x=v;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T=function(){return T=Object.assign||function(Se){for(var Wt,ue=1,vn=arguments.length;ue<vn;ue++){Wt=arguments[ue];for(var Dn in Wt)Object.prototype.hasOwnProperty.call(Wt,Dn)&&(Se[Dn]=Wt[Dn])}return Se},T.apply(this,arguments)};function N(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se}var X=function(){return Math.random().toString(36).substring(6)},tt=function(Xt){var Se=Xt.animate,Wt=Xt.backgroundColor,ue=Xt.backgroundOpacity,vn=Xt.baseUrl,Dn=Xt.children,zn=Xt.foregroundColor,Un=Xt.foregroundOpacity,Ze=Xt.gradientRatio,Ce=Xt.uniqueKey,R=Xt.interval,xt=Xt.rtl,$t=Xt.speed,me=Xt.style,Zt=Xt.title,de=N(Xt,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),he=Ce||X(),ce=he+"-diff",Me=he+"-animated-diff",ze=he+"-aria",Ve=xt?{transform:"scaleX(-1)"}:null,ke="0; "+R+"; 1",tn=$t+"s";return Object(at.createElement)("svg",T({"aria-labelledby":ze,role:"img",style:T(T({},me),Ve)},de),Zt?Object(at.createElement)("title",{id:ze},Zt):null,Object(at.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+vn+"#"+ce+")",style:{fill:"url("+vn+"#"+Me+")"}}),Object(at.createElement)("defs",{role:"presentation"},Object(at.createElement)("clipPath",{id:ce},Dn),Object(at.createElement)("linearGradient",{id:Me},Object(at.createElement)("stop",{offset:"0%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze+"; "+-Ze+"; 1",keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"50%",stopColor:zn,stopOpacity:Un},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze/2+"; "+-Ze/2+"; "+(1+Ze/2),keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"100%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ze),keyTimes:ke,dur:tn,repeatCount:"indefinite"})))))};tt.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var nt=function(Xt){return Xt.children?Object(at.createElement)(tt,T({},Xt)):Object(at.createElement)(vt,T({},Xt))},vt=function(Xt){return Object(at.createElement)(nt,T({viewBox:"0 0 476 124"},Xt),Object(at.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(at.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ft=function(Xt){return Object(at.createElement)(nt,T({viewBox:"0 0 400 460"},Xt),Object(at.createElement)("circle",{cx:"31",cy:"31",r:"15"}),Object(at.createElement)("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},bt=function(Xt){return Object(at.createElement)(nt,T({viewBox:"0 0 340 84"},Xt),Object(at.createElement)("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},St=function(Xt){return Object(at.createElement)(nt,T({viewBox:"0 0 400 110"},Xt),Object(at.createElement)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},pt=function(Xt){return Object(at.createElement)(nt,T({viewBox:"0 0 245 125"},Xt),Object(at.createElement)("circle",{cx:"10",cy:"20",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"50",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"80",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"110",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},ct=nt,zt=function(Xt){var Se=Xt.loadingTemplate,Wt=function(){return Se||a.a.createElement(ct,{viewBox:"0 0 400 180",width:200,height:90,speed:1},a.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),a.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),a.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),a.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),a.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),a.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),a.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),a.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),a.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),a.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},Wt())},Nt=zt,wt=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},H=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=wt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Area,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),ht=H,dt=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},yt=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=dt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Bar,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Mt=yt,$=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},lt=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=$(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Bullet,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),rt=lt,z=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},P=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=z(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Column,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Y=P,k=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},h=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=k(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Funnel,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),g=h,B=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},V=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=B(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Histogram,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),q=V,it=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},ot=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=it(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Line,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),At=ot,gt=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},mt=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=gt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Box,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ot=mt,It=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Dt=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=It(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Liquid,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ut=Dt,Ct=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Vt=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Ct(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Heatmap,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ht=Vt,re=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},pe=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=re(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Pie,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),ye=pe,we=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Ne=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=we(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Gauge,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ke=Ne,pn=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},hn=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=pn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Progress,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),kn=hn,Tn=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Rn=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Tn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Radar,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Mn=Rn,Cn=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},_n=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Cn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.RingProgress,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Kn=_n,tr=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},or=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=tr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Rose,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),nr=or,er=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Sr=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=er(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Scatter,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Vr=Sr,ti=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},hi=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ti(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyArea,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Fi=hi,to=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},si=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=to(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyColumn,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ci=si,Ui=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Li=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Ui(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.DualAxes,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Vi=Li,ro=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},jr=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ro(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.TinyLine,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Ji=jr,pr=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Xr=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=pr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Waterfall,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Br=Xr,Nr=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Yr=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Nr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.WordCloud,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Kr=Yr,ni=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},fi=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ni(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Sunburst,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),$r=fi,ci=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Qr=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ci(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Stock,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),gi=Qr,Oi=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},bi=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Oi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.RadialBar,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),zi=bi,Qi=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},io=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Qi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Sankey,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Wi=io,Zi=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Pi=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Zi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.Treemap,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),no=Pi,Mo=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},ao=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Mo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.MultiView,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),uo=ao,xo=function(_t,Xt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Xt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Xt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},oe=Object(at.forwardRef)(function(_t,Xt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,Dn=_t.loading,zn=_t.loadingTemplate,Un=_t.errorTemplate,Ze=xo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Ce=O(A.BidirectionalBar,Ze),R=Ce.chart,xt=Ce.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Xt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},Dn&&a.a.createElement(Nt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:xt}))}),Kt=oe,te=_("fD4D"),Oe=function(){return Oe=Object.assign||function(_t){for(var Xt,Se=1,Wt=arguments.length;Se<Wt;Se++){Xt=arguments[Se];for(var ue in Xt)Object.prototype.hasOwnProperty.call(Xt,ue)&&(_t[ue]=Xt[ue])}return _t},Oe.apply(this,arguments)};te.default.registerNode("card-node",{draw:function(Xt,Se){var Wt=Xt&&Xt.color?Xt.color:"#5B8FF9",ue=Xt&&Xt.size?Xt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Xt&&Xt.style?Xt.style:{};vn=Object.assign({radius:2,fill:"#fff"},vn),Wt=vn.stroke||"#5B8FF9";var Dn=vn.radius||0,zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:ue[1],stroke:Wt},vn),name:"main-box",draggable:!0}),Un=(Xt==null?void 0:Xt.title)||(Xt==null?void 0:Xt.label),Ze,Ce=Xt&&Xt.labelCfg&&Xt.labelCfg.style?Xt.labelCfg.style:{};if(Un){var R=Object.assign({fill:"#fff"},Ce);Ze=Se.addShape("text",{attrs:Oe(Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+2,text:Un},R),{fill:"#fff"}),name:"title"})}var xt=Ze?Ze.getBBox():{height:ue[1]/2},$t=Se.addShape("rect",{attrs:{x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:xt.height+4,fill:Wt,radius:[Dn,Dn,0,0]},name:"title-rect",draggable:!0});Ze&&Ze.toFront();var me;(Xt==null?void 0:Xt.children)&&(me=Se.addShape("marker",{attrs:{x:ue[0]/2,y:0,r:6,cursor:"pointer",symbol:Xt.collapsed?te.default.Marker.expand:te.default.Marker.collapse,stroke:Wt,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var Zt=Xt&&Xt.description?Xt.description:void 0,de=$t.getBBox(),he;if(Zt&&(he=Se.addShape("text",{attrs:Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+de.height+8,text:Zt},Ce),name:"description"})),he){var ce=he.getBBox(),Me=de.height+16+ce.height,ze=ue[0]>ce.width+16?ue[0]:ce.width+16;zn.attr({width:ze,height:Me}),$t==null||$t.attr("width",ze),me==null||me.attr({x:ze-ue[0]/2,y:Me/2-ue[1]/2})}return zn},update:void 0},"single-node"),te.default.registerNode("round-rect",{drawShape:function(Xt,Se){var Wt=Xt&&Xt.color?Xt.color:"#5B8FF9",ue=Xt&&Xt.size?Xt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Xt&&Xt.style?Xt.style:{};vn.stroke&&(Wt=vn.stroke);var Dn=vn&&vn.fill?vn.fill:"#fff";vn=Object.assign({width:ue[0],height:ue[1],radius:ue[1]/2,fill:Dn,lineWidth:1.2,stroke:Wt},vn);var zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2},vn),name:"rect-shape"});return Se.addShape("circle",{attrs:{x:-ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape"}),Se.addShape("circle",{attrs:{x:ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape2"}),zn},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(Xt,Se){var Wt=Se.getContainer(),ue=Wt.get("children"),vn=ue[0],Dn=ue[1],zn=ue[2],Un=Xt.style&&Xt.style.stroke?Xt.style.stroke:"#5B8FF9";Un&&(vn.attr("stroke",Un),Dn.attr("fill",Un),zn.attr("fill",Un))}},"single-node");var Qe=function(Xt){te.default.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(Wt,ue){var vn=this.getShapeStyle(Wt),Dn=(Wt||{}).labelCfg,zn=Dn===void 0?{}:Dn,Un=ue.addShape("rect",{attrs:Oe(Oe({},vn),{x:0,y:0})}),Ze={fill:"#e6fffb"},Ce="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return(Wt==null?void 0:Wt.leftIcon)&&(Ze=Object.assign({},Ze,Wt.leftIcon.style),Ce=Wt.leftIcon.img),ue.addShape("rect",{attrs:Oe({x:1,y:1,width:38,height:vn.height-2},Ze)}),ue.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:Ce},name:"image-shape"}),Xt.enableEdit&&(ue.addShape("marker",{attrs:{x:vn.width/3,y:vn.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:te.default.Marker.expand},name:"add-item"}),ue.addShape("marker",{attrs:{x:vn.width*2/3,y:vn.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:te.default.Marker.collapse},name:"remove-item"})),(Wt==null?void 0:Wt.label)&&ue.addShape("text",{attrs:Oe(Oe({},zn.style),{text:Wt.label,x:vn.width/2,y:vn.height/1.5})}),Un}},"rect")};te.default.registerEdge("fund-polyline",{draw:function(Xt,Se){var Wt=Xt==null?void 0:Xt.startPoint,ue=Xt==null?void 0:Xt.endPoint,vn=ue.y-Wt.y,Dn=vn!==0?500/Math.abs(vn):0,zn=16,Un=vn<0?zn:-zn,Ze={x:Wt.x+Dn,y:ue.y+Un},Ce={x:Ze.x+zn,y:ue.y},R={x:(Ze.x-Wt.x)*(ue.y-Wt.y)/(Ze.y-Wt.y)+Wt.x,y:ue.y},xt=[["M",Wt.x,Wt.y],["L",Ze.x,Ze.y],["Q",R.x,R.y,Ce.x,Ce.y],["L",ue.x,ue.y]];vn===0&&(xt=[["M",Wt.x,Wt.y],["L",ue.x,ue.y]]);var $t=(Xt||{}).style,me=Se.addShape("path",{attrs:{path:xt,stroke:$t.stroke||(Xt==null?void 0:Xt.colorMap)&&Xt.colorMap[Xt.dataType]?(Xt==null?void 0:Xt.colorMap)[Xt==null?void 0:Xt.dataType]:"#5B8FF9",lineWidth:$t.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Zt=0,de=8,he;if((Xt==null?void 0:Xt.label)&&(he=Se.addShape("text",{attrs:{text:Xt.label,x:Ce.x+Zt,y:ue.y-de-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),Xt==null?void 0:Xt.dataType){var ce=he?he.getBBox():{height:0};Se.addShape("text",{attrs:{text:Xt.dataType,x:Ce.x+Zt,y:ue.y-de-ce.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(Xt==null?void 0:Xt.subLabel)&&Se.addShape("text",{attrs:{text:Xt.subLabel,x:Ce.x+Zt,y:ue.y+de+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),me},update:void 0},"single-edge"),te.default.registerEdge("flow-line",{draw:function(Xt,Se){var Wt=Xt==null?void 0:Xt.startPoint,ue=Xt==null?void 0:Xt.endPoint,vn=(Xt||{}).style,Dn=vn===void 0?{}:vn,zn=Se.addShape("path",{attrs:{stroke:Dn.stroke,endArrow:Dn.endArrow,path:[["M",Wt.x,Wt.y],["L",Wt.x,(Wt.y+ue.y)/2],["L",ue.x,(Wt.y+ue.y)/2],["L",ue.x,ue.y]]}});return zn}});var On=function(){return On=Object.assign||function(_t){for(var Xt,Se=1,Wt=arguments.length;Se<Wt;Se++){Xt=arguments[Se];for(var ue in Xt)Object.prototype.hasOwnProperty.call(Xt,ue)&&(_t[ue]=Xt[ue])}return _t},On.apply(this,arguments)},Vn={show:!1,size:[150,100],type:"keyShape"},Yn=function(Xt,Se,Wt){var ue,vn;return Wt&&Wt.current&&(ue=Wt.current.offsetWidth,vn=Wt.current.offsetHeight||500),!Xt&&!ue||!Se&&!vn?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[Xt||ue||500,Se||vn||500]},$e=function(Xt,Se){if(!(!Se||Se.destroyed)&&Xt&&Xt.show){var Wt=Object.assign(Vn,Xt),ue=new te.default.Minimap(On({},Wt));return Se.addPlugin(ue),ue}};function rn(_t,Xt,Se){var Wt=Object(at.useRef)(),ue=Xt.data,vn=Xt.nodeStyle,Dn=Xt.nodeAnchorPoints,zn=Xt.nodeType,Un=Xt.edgeType,Ze=Xt.edgeStyle,Ce=Xt.width,R=Xt.height,xt=Xt.layout,$t=Xt.minimapCfg,me=Xt.behaviors,Zt=Xt.nodeLabelCfg,de=Xt.edgeLabelCfg,he;return Object(at.useEffect)(function(){_t&&!_t.destroyed&&(_t.changeData(ue),_t.layout())},[ue]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.getNodes().forEach(function(ce){_t.updateItem(ce,{type:zn,style:vn,anchorPoints:Dn,labelCfg:Zt})})},[vn,Dn,zn]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.getEdges().forEach(function(ce){_t.updateItem(ce,{type:Un,style:Ze,labelCfg:de})})},[Ze,Un]),Object(at.useEffect)(function(){if(_t&&!_t.destroyed){var ce=Yn(Ce,R,Se);_t.changeSize(ce[0],ce[1])}},[Se,Ce,R]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.updateLayout(xt)},[xt]),Object(at.useEffect)(function(){if(!(!$t||!_t||_t.destroyed))if($t.show)he=$e($t,_t),he&&he.updateCanvas();else{var ce=_t.get("plugins")[0];ce&&_t.removePlugin(ce)}},[$t]),Object(at.useEffect)(function(){if(_t&&!_t.destroyed){var ce=_t.get("modes").default,Me=[];ce.forEach(function(ze){Object(e.isObject)(ze)?Me.push(ze.type):Object(e.isString)(ze)&&Me.push(ze)}),_t.removeBehaviors(Me,"default"),_t.addBehaviors(me,"default")}},[me]),Object(at.useEffect)(function(){if(Wt.current=_t,_t&&!_t.destroyed)return function(){_t.destroy(),_t=void 0}},[]),{graphHook:Wt}}var on={hover:{stroke:"#1890ff",lineWidth:2}},$n={fill:"#91d5ff",stroke:"#40a9ff",radius:5},vr={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},ar={type:"compactBox",direction:"TB",getId:function(Xt){return Xt.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},rr={style:{fill:"#000",fontSize:12}},Fr=function(Xt){var Se=Xt.data,Wt=Xt.className,ue=Xt.style,vn=Xt.width,Dn=Xt.height,zn=Xt.nodeType,Un=zn===void 0?"rect":zn,Ze=Xt.edgeType,Ce=Ze===void 0?"flow-line":Ze,R=Xt.collapseExpand,xt=R===void 0?!1:R,$t=Xt.nodeSize,me=$t===void 0?[120,40]:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?rr:Zt,he=Xt.edgeLabelCfg,ce=he===void 0?rr:he,Me=Xt.layout,ze=Me===void 0?ar:Me,Ve=Xt.enableEdit,ke=Ve===void 0?!1:Ve,tn=Xt.minimapCfg,De=Xt.nodeStyle,cn=De===void 0?$n:De,fn=Xt.edgeStyle,nn=fn===void 0?vr:fn,dn=Xt.nodeStateStyles,Sn=dn===void 0?on:dn,Pe=Xt.edgeStateStyles,le=Pe===void 0?on:Pe,Le=Xt.handleNodeClick,Be=Xt.handleEdgeClick,en=Xt.handleNodeHover,sn=Xt.handleNodeUnHover,_e=Xt.handleEdgeHover,ln=Xt.handleEdgeUnHover,mn=Xt.handleCanvasClick,Wn=Xt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Un,edgeType:Ce,collapseExpand:xt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,layout:ze,enableEdit:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleNodeClick:Le,handleEdgeClick:Be,handleNodeHover:en,handleNodeUnHover:sn,handleEdgeHover:_e,handleEdgeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(at.useEffect)(function(){var Hr=Yn(vn,Dn,lr);return(!An||An.destroyed)&&(Un==="icon-node"&&Qe({enableEdit:ke}),An=new te.default.TreeGraph({container:lr.current,width:Hr[0],height:Hr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:Un,size:me,style:cn,labelCfg:de},defaultEdge:{type:Ce,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ze}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),xt&&An.addBehaviors({type:"collapse-expand"},"default"),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),sn&&sn(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item,oi=Gr.target,ai=oi.get("type"),Zr=oi.get("name");if(ai==="marker"){var Yi=Mr.getModel();if(Zr==="add-item"){Yi.children||(Yi.children=[]);var $i=Math.random().toString(36).slice(-8);Yi.children.push({id:$i,label:$i}),An.updateChild(Yi,Yi.id)}else Zr==="remove-item"&&An.removeChild(Yi.id)}Le&&Le(Mr,An)}),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),_e&&_e(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Be&&Be(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},Ar=Fr,wr={hover:{stroke:"#1890ff",lineWidth:2}},xr=[120,40],Er={stroke:"#40a9ff"},Ir=[[.5,0],[.5,1]],Lr={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Pr={type:"dagre",rankdir:"TB",nodesepFunc:function(Xt){return 0},ranksepFunc:function(Xt){return 0},controlPoints:!0},Dr={style:{fill:"#000",fontSize:12}},ri=function(Xt){var Se=Xt.data,Wt=Xt.className,ue=Xt.style,vn=Xt.width,Dn=Xt.height,zn=Xt.nodeType,Un=zn===void 0?"modelRect":zn,Ze=Xt.edgeType,Ce=Ze===void 0?"polyline":Ze,R=Xt.behaviors,xt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Xt.nodeSize,me=$t===void 0?xr:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?Dr:Zt,he=Xt.edgeLabelCfg,ce=he===void 0?Dr:he,Me=Xt.nodeAnchorPoints,ze=Me===void 0?Ir:Me,Ve=Xt.layout,ke=Ve===void 0?Pr:Ve,tn=Xt.minimapCfg,De=Xt.nodeStyle,cn=De===void 0?Er:De,fn=Xt.edgeStyle,nn=fn===void 0?Lr:fn,dn=Xt.nodeStateStyles,Sn=dn===void 0?wr:dn,Pe=Xt.edgeStateStyles,le=Pe===void 0?wr:Pe,Le=Xt.handleEdgeClick,Be=Xt.handleEdgeHover,en=Xt.handleEdgeUnHover,sn=Xt.handleNodeClick,_e=Xt.handleNodeHover,ln=Xt.handleNodeUnHover,mn=Xt.handleCanvasClick,Wn=Xt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Un,edgeType:Ce,behaviors:xt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:_e,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(at.useEffect)(function(){var Hr=Yn(vn,Dn,lr);return(!An||An.destroyed)&&(An=new te.default.Graph({container:lr.current,width:Hr[0],height:Hr[1],modes:{default:xt},defaultNode:{type:Un,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Ce,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),Be&&Be(Mr,An)}),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),_e&&_e(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Le&&Le(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item;sn&&sn(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},vi=ri,ii={hover:{stroke:"#1890ff",lineWidth:2}},Si=[150,30],_i={stroke:"#72CC4A",fill:"#f00"},Xi=[[.5,0],[.5,1]],Bi={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Di={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},ve={style:{fill:"#000000A6",fontSize:10}},G=function(Xt){var Se=Xt.data,Wt=Xt.className,ue=Xt.style,vn=Xt.width,Dn=Xt.height,zn=Xt.nodeType,Un=zn===void 0?"round-rect":zn,Ze=Xt.edgeType,Ce=Ze===void 0?"fund-polyline":Ze,R=Xt.behaviors,xt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Xt.nodeSize,me=$t===void 0?Si:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?ve:Zt,he=Xt.edgeLabelCfg,ce=he===void 0?ve:he,Me=Xt.nodeAnchorPoints,ze=Me===void 0?Xi:Me,Ve=Xt.layout,ke=Ve===void 0?Di:Ve,tn=Xt.minimapCfg,De=Xt.nodeStyle,cn=De===void 0?_i:De,fn=Xt.edgeStyle,nn=fn===void 0?Bi:fn,dn=Xt.nodeStateStyles,Sn=dn===void 0?ii:dn,Pe=Xt.edgeStateStyles,le=Pe===void 0?ii:Pe,Le=Xt.colorMap,Be=Le===void 0?{}:Le,en=Xt.handleEdgeClick,sn=Xt.handleEdgeHover,_e=Xt.handleEdgeUnHover,ln=Xt.handleNodeClick,mn=Xt.handleNodeHover,Wn=Xt.handleNodeUnHover,An=Xt.handleCanvasClick,In=Xt.graphRef,lr,Hr=a.a.useRef(null),Gr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Un,edgeType:Ce,behaviors:xt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,colorMap:Be,handleEdgeClick:en,handleEdgeHover:sn,handleEdgeUnHover:_e,handleNodeClick:ln,handleNodeHover:mn,handleNodeUnHover:Wn,handleCanvasClick:An,graphRef:In};return rn(lr,Gr,Hr),Object(at.useEffect)(function(){var Mr=Yn(vn,Dn,Hr);(!lr||lr.destroyed)&&(lr=new te.default.Graph({container:Hr.current,width:Mr[0],height:Mr[1],modes:{default:xt},defaultNode:{type:Un,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Ce,style:nn,colorMap:Be,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),In&&(In.current=lr)),$e(tn,lr),lr.data(Se),lr.render();var oi=lr.getEdges();return oi.forEach(function(ai){var Zr=ai.getKeyShape(),Yi=Zr.attr("stroke"),$i=ai.getTarget();$i.update({style:{stroke:Yi}})}),lr.fitView(),lr.on("edge:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!0),sn&&sn(Zr,lr)}),lr.on("edge:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),_e&&_e(Zr,lr)}),lr.on("edge:click",function(ai){var Zr=ai.item;en&&en(Zr,lr)}),lr.on("node:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),mn&&mn(Zr,lr)}),lr.on("node:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Wn&&Wn(Zr,lr)}),lr.on("node:click",function(ai){var Zr=ai.item;ln&&ln(Zr,lr)}),lr.on("canvas:click",function(ai){An&&An(lr)}),function(){return lr.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:Hr}))},F=G,Z={hover:{stroke:"#1890ff",lineWidth:2}},ut=[120,40],Bt={stroke:"#40a9ff"},Jt=[[0,.5],[1,.5]],ie={stroke:"#ccc",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#ccc"}},se={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(Xt){return 100}},Te={style:{fill:"#000",fontSize:12}},Ee=function(Xt){var Se=Xt.data,Wt=Xt.className,ue=Xt.style,vn=Xt.width,Dn=Xt.height,zn=Xt.nodeType,Un=zn===void 0?"card-node":zn,Ze=Xt.edgeType,Ce=Ze===void 0?"cubic-horizontal":Ze,R=Xt.behaviors,xt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Xt.nodeSize,me=$t===void 0?ut:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?Te:Zt,he=Xt.nodeAnchorPoints,ce=he===void 0?Jt:he,Me=Xt.layout,ze=Me===void 0?se:Me,Ve=Xt.minimapCfg,ke=Xt.nodeStyle,tn=ke===void 0?Bt:ke,De=Xt.edgeStyle,cn=De===void 0?ie:De,fn=Xt.nodeStateStyles,nn=fn===void 0?Z:fn,dn=Xt.edgeStateStyles,Sn=dn===void 0?Z:dn,Pe=Xt.collapseExpand,le=Pe===void 0?!0:Pe,Le=Xt.handleEdgeClick,Be=Xt.handleEdgeHover,en=Xt.handleEdgeUnHover,sn=Xt.handleNodeClick,_e=Xt.handleNodeHover,ln=Xt.handleNodeUnHover,mn=Xt.handleCanvasClick,Wn=Xt.graphRef,An,In=a.a.useRef(null),lr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:Un,edgeType:Ce,behaviors:xt,nodeSize:me,nodeLabelCfg:de,nodeAnchorPoints:ce,layout:ze,minimapCfg:Ve,nodeStyle:tn,edgeStyle:cn,nodeStateStyles:nn,edgeStateStyles:Sn,collapseExpand:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:_e,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn};return rn(An,lr,In),Object(at.useEffect)(function(){var Hr=Yn(vn,Dn,In);if((!An||An.destroyed)&&(An=new te.default.TreeGraph({container:In.current,width:Hr[0],height:Hr[1],modes:{default:xt},defaultNode:{type:Un,size:me,style:tn,anchorPoints:ce,labelCfg:de},defaultEdge:{type:Ce,style:cn},nodeStateStyles:nn,edgeStateStyles:Sn,layout:ze}),Wn&&(Wn.current=An)),$e(Ve,An),An.data(Se),An.render(),An.fitView(),le){var Gr=function(oi){var ai=oi.item;oi.target.get("name")==="collapse-icon"?(An.updateItem(ai,{collapsed:!ai.getModel().collapsed}),An.layout()):sn&&sn(ai,An)};An.on("node:click",function(Mr){Gr(Mr)}),An.on("node:touchstart",function(Mr){Gr(Mr)})}return An.on("edge:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!0),Be&&Be(oi,An)}),An.on("edge:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),en&&en(oi,An)}),An.on("edge:click",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("edge:touchstart",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("node:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),_e&&_e(oi,An)}),An.on("node:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),ln&&ln(oi,An)}),An.on("canvas:click",function(Mr){mn&&mn(An)}),An.on("canvas:touchstart",function(Mr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:In}))},un=Ee,xn={Area:ht,Bar:Mt,Box:Ot,Bullet:rt,Column:Y,Funnel:g,Histogram:q,Line:At,Liquid:Ut,Heatmap:Ht,Pie:ye,Progress:kn,Radar:Mn,RingProgress:Kn,Rose:nr,Scatter:Vr,TinyArea:Fi,TinyColumn:Ci,TinyLine:Ji,Waterfall:Br,WordCloud:Kr,Sunburst:$r,DualAxes:Vi,Stock:gi,RadialBar:zi,Gauge:Ke,Sankey:Wi,Treemap:no,MultiView:uo,BidirectionalBar:Kt,OrganizationTreeGraph:Ar,DagreGraph:vi,IndentedTree:un,DagreFundFlowGraph:F,G2:A.G2}},"0JQy":function(Gn,Gt){var _="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",p="["+_+"]",m="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",l="(?:"+m+"|"+S+")",M="[^"+_+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",d="["+i+"]?",E="(?:"+n+"(?:"+[M,j,y].join("|")+")"+d+s+")*",O=d+s+E,C="(?:"+[M+m+"?",m,j,y,p].join("|")+")",v=RegExp(S+"(?="+S+")|"+C+O,"g");function x(T){return T.match(v)||[]}Gn.exports=x},"0Xep":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at}),_.d(Gt,"d",function(){return a}),_.d(Gt,"b",function(){return A}),_.d(Gt,"c",function(){return e});var at=0,a=1/2,A=1/2,e=.05},"1//c":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("aFU3");function a(A,e,i){var p=new at.Event(e,i);p.target=A,p.propagationPath.push(A),A.emitDelegation(e,p);for(var m=A.getParent();m;)m.emitDelegation(e,p),p.propagationPath.push(m),m=m.getParent()}},"17Tr":function(Gn,Gt,_){"use strict";var at=_("uCX8");_.d(Gt,"Annotation",function(){return at});var a=_("fP0w");_.d(Gt,"Axis",function(){return a});var A=_("/3+T");_.d(Gt,"Crosshair",function(){return A});var e=_("x3EW");_.d(Gt,"Grid",function(){return e});var i=_("5bFI");_.d(Gt,"Legend",function(){return i});var p=_("Ch+T");_.d(Gt,"Tooltip",function(){return p});var m=_("NmWf"),S=_("MeYt"),l=_("de35"),M=_("fFDA");_.d(Gt,"Slider",function(){return M.a});var j=_("3u8d");_.d(Gt,"Scrollbar",function(){return j.a});var y=_("vk7d"),n=_.n(y),s=_("uzHj"),d=_.n(s),E=_("1//c");_.d(Gt,"propagationDelegate",function(){return E.a});var O=_("u60a");_.d(Gt,"TOOLTIP_CSS_CONST",function(){return O})},"1MZV":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return A});var at=new Map;function a(x,T){at.set(x,T)}function A(x){return at.get(x)}var e=function(x){var T=x.attr(),N=T.x,X=T.y,tt=T.width,nt=T.height;return{x:N,y:X,width:tt,height:nt}},i=function(x){var T=x.attr(),N=T.x,X=T.y,tt=T.r;return{x:N-tt,y:X-tt,width:tt*2,height:tt*2}},p=_("EYNi");function m(x,T){return!x||!T?x||T:{minX:Math.min(x.minX,T.minX),minY:Math.min(x.minY,T.minY),maxX:Math.max(x.maxX,T.maxX),maxY:Math.max(x.maxY,T.maxY)}}function S(x,T){var N=x.get("startArrowShape"),X=x.get("endArrowShape"),tt=null,nt=null;return N&&(tt=N.getCanvasBBox(),T=m(T,tt)),X&&(nt=X.getCanvasBBox(),T=m(T,nt)),T}var l=function(x){for(var T=x.attr(),N=T.points,X=[],tt=[],nt=0;nt<N.length;nt++){var vt=N[nt];X.push(vt[0]),tt.push(vt[1])}var ft=p.f.getBBoxByArray(X,tt),bt=ft.x,St=ft.y,pt=ft.width,ct=ft.height,zt={minX:bt,minY:St,maxX:bt+pt,maxY:St+ct};return zt=S(x,zt),{x:zt.minX,y:zt.minY,width:zt.maxX-zt.minX,height:zt.maxY-zt.minY}},M=function(x){for(var T=x.attr(),N=T.points,X=[],tt=[],nt=0;nt<N.length;nt++){var vt=N[nt];X.push(vt[0]),tt.push(vt[1])}return p.f.getBBoxByArray(X,tt)},j=_("vIgC"),y=function(x){var T=x.attr(),N=T.x,X=T.y,tt=T.text,nt=T.fontSize,vt=T.lineHeight,ft=T.font;ft||(ft=Object(j.a)(T));var bt=Object(j.c)(tt,ft),St;if(!bt)St={x:N,y:X,width:0,height:0};else{var pt=T.textAlign,ct=T.textBaseline,zt=Object(j.b)(tt,nt,vt),Nt={x:N,y:X-zt};pt&&(pt==="end"||pt==="right"?Nt.x-=bt:pt==="center"&&(Nt.x-=bt/2)),ct&&(ct==="top"?Nt.y+=zt:ct==="middle"&&(Nt.y+=zt/2)),St={x:Nt.x,y:Nt.y,width:bt,height:zt}}return St},n=_("LvGN"),s=_("iTfj");function d(x,T){for(var N=[],X=[],tt=[],nt=0;nt<x.length;nt++){var vt=x[nt],ft=vt.currentPoint,bt=vt.params,St=vt.prePoint,pt=void 0;switch(vt.command){case"Q":pt=p.e.box(St[0],St[1],bt[1],bt[2],bt[3],bt[4]);break;case"C":pt=p.b.box(St[0],St[1],bt[1],bt[2],bt[3],bt[4],bt[5],bt[6]);break;case"A":var ct=vt.arcParams;pt=p.a.box(ct.cx,ct.cy,ct.rx,ct.ry,ct.xRotation,ct.startAngle,ct.endAngle);break;default:N.push(ft[0]),X.push(ft[1]);break}pt&&(vt.box=pt,N.push(pt.x,pt.x+pt.width),X.push(pt.y,pt.y+pt.height)),T&&(vt.command==="L"||vt.command==="M")&&vt.prePoint&&vt.nextPoint&&tt.push(vt)}N=N.filter(function(dt){return!Number.isNaN(dt)}),X=X.filter(function(dt){return!Number.isNaN(dt)});var zt=Math.min.apply(null,N),Nt=Math.min.apply(null,X),wt=Math.max.apply(null,N),H=Math.max.apply(null,X);if(tt.length===0)return{x:zt,y:Nt,width:wt-zt,height:H-Nt};for(var nt=0;nt<tt.length;nt++){var vt=tt[nt],ft=vt.currentPoint,ht=void 0;ft[0]===zt?(ht=E(vt,T),zt=zt-ht.xExtra):ft[0]===wt&&(ht=E(vt,T),wt=wt+ht.xExtra),ft[1]===Nt?(ht=E(vt,T),Nt=Nt-ht.yExtra):ft[1]===H&&(ht=E(vt,T),H=H+ht.yExtra)}return{x:zt,y:Nt,width:wt-zt,height:H-Nt}}function E(x,T){var N=x.prePoint,X=x.currentPoint,tt=x.nextPoint,nt=Math.pow(X[0]-N[0],2)+Math.pow(X[1]-N[1],2),vt=Math.pow(X[0]-tt[0],2)+Math.pow(X[1]-tt[1],2),ft=Math.pow(N[0]-tt[0],2)+Math.pow(N[1]-tt[1],2),bt=Math.acos((nt+vt-ft)/(2*Math.sqrt(nt)*Math.sqrt(vt)));if(!bt||Math.sin(bt)===0||Object(s.isNumberEqual)(bt,0))return{xExtra:0,yExtra:0};var St=Math.abs(Math.atan2(tt[1]-X[1],tt[0]-X[0])),pt=Math.abs(Math.atan2(tt[0]-X[0],tt[1]-X[1]));St=St>Math.PI/2?Math.PI-St:St,pt=pt>Math.PI/2?Math.PI-pt:pt;var ct={xExtra:Math.cos(bt/2-St)*(T/2*(1/Math.sin(bt/2)))-T/2||0,yExtra:Math.cos(pt-bt/2)*(T/2*(1/Math.sin(bt/2)))-T/2||0};return ct}var O=function(x){var T=x.attr(),N=T.path,X=T.stroke,tt=X?T.lineWidth:0,nt=x.get("segments")||Object(n.e)(N),vt=d(nt,tt),ft=vt.x,bt=vt.y,St=vt.width,pt=vt.height,ct={minX:ft,minY:bt,maxX:ft+St,maxY:bt+pt};return ct=S(x,ct),{x:ct.minX,y:ct.minY,width:ct.maxX-ct.minX,height:ct.maxY-ct.minY}},C=function(x){var T=x.attr(),N=T.x1,X=T.y1,tt=T.x2,nt=T.y2,vt=Math.min(N,tt),ft=Math.max(N,tt),bt=Math.min(X,nt),St=Math.max(X,nt),pt={minX:vt,maxX:ft,minY:bt,maxY:St};return pt=S(x,pt),{x:pt.minX,y:pt.minY,width:pt.maxX-pt.minX,height:pt.maxY-pt.minY}},v=function(x){var T=x.attr(),N=T.x,X=T.y,tt=T.rx,nt=T.ry;return{x:N-tt,y:X-nt,width:tt*2,height:nt*2}};a("rect",e),a("image",e),a("circle",i),a("marker",i),a("polyline",l),a("polygon",M),a("text",y),a("path",O),a("line",C),a("ellipse",v)},"24YM":function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.SensorTabIndex=Gt.SensorClassName=Gt.SizeSensorId=void 0;var at="size-sensor-id";Gt.SizeSensorId=at;var a="size-sensor-object";Gt.SensorClassName=a;var A="-1";Gt.SensorTabIndex=A},"3T7b":function(Gn,Gt){},"3u8d":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return m});var at=_("mrSG"),a=_("fIp6"),A=_("iTfj"),e=_("MeYt"),i={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},p={default:i,hover:{thumbColor:"rgba(0,0,0,0.2)"}},m=function(S){Object(at.b)(l,S);function l(){var M=S!==null&&S.apply(this,arguments)||this;return M.clearEvents=A.noop,M.onStartEvent=function(j){return function(y){M.isMobile=j,y.originalEvent.preventDefault();var n=j?Object(A.get)(y.originalEvent,"touches.0.clientX"):y.clientX,s=j?Object(A.get)(y.originalEvent,"touches.0.clientY"):y.clientY;M.startPos=M.cfg.isHorizontal?n:s,M.bindLaterEvent()}},M.bindLaterEvent=function(){var j=M.getContainerDOM(),y=[];M.isMobile?y=[Object(a.a)(j,"touchmove",M.onMouseMove),Object(a.a)(j,"touchend",M.onMouseUp),Object(a.a)(j,"touchcancel",M.onMouseUp)]:y=[Object(a.a)(j,"mousemove",M.onMouseMove),Object(a.a)(j,"mouseup",M.onMouseUp),Object(a.a)(j,"mouseleave",M.onMouseUp)],M.clearEvents=function(){y.forEach(function(n){n.remove()})}},M.onMouseMove=function(j){var y=M.cfg,n=y.isHorizontal,s=y.thumbOffset;j.preventDefault();var d=M.isMobile?Object(A.get)(j,"touches.0.clientX"):j.clientX,E=M.isMobile?Object(A.get)(j,"touches.0.clientY"):j.clientY,O=n?d:E,C=O-M.startPos;M.startPos=O,M.updateThumbOffset(s+C)},M.onMouseUp=function(j){j.preventDefault(),M.clearEvents()},M.onTrackClick=function(j){var y=M.cfg,n=y.isHorizontal,s=y.x,d=y.y,E=y.thumbLen,O=M.getContainerDOM(),C=O.getBoundingClientRect(),v=j.clientX,x=j.clientY,T=n?v-C.left-s-E/2:x-C.top-d-E/2,N=M.validateRange(T);M.updateThumbOffset(N)},M.onThumbMouseOver=function(){var j=M.cfg.theme.hover.thumbColor;M.getElementByLocalId("thumb").attr("stroke",j),M.draw()},M.onThumbMouseOut=function(){var j=M.cfg.theme.default.thumbColor;M.getElementByLocalId("thumb").attr("stroke",j),M.draw()},M}return l.prototype.setRange=function(M,j){this.set("minLimit",M),this.set("maxLimit",j);var y=this.getValue(),n=Object(A.clamp)(y,M,j);y!==n&&!this.get("isInit")&&this.setValue(n)},l.prototype.getRange=function(){var M=this.get("minLimit")||0,j=this.get("maxLimit")||1;return{min:M,max:j}},l.prototype.setValue=function(M){var j=this.getRange(),y=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Object(A.clamp)(M,j.min,j.max)}),this.delegateEmit("valuechange",{originalValue:y,value:this.getValue()})},l.prototype.getValue=function(){return Object(A.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},l.prototype.getDefaultCfg=function(){var M=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},M),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:p})},l.prototype.renderInner=function(M){this.renderTrackShape(M),this.renderThumbShape(M)},l.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},l.prototype.initEvent=function(){this.bindEvents()},l.prototype.renderTrackShape=function(M){var j=this.cfg,y=j.trackLen,n=j.theme,s=n===void 0?{default:{}}:n,d=s.default,E=d.lineCap,O=d.trackColor,C=d.size,v=this.get("isHorizontal")?{x1:0+C/2,y1:C/2,x2:y-C/2,y2:C/2,lineWidth:C,stroke:O,lineCap:E}:{x1:C/2,y1:0+C/2,x2:C/2,y2:y-C/2,lineWidth:C,stroke:O,lineCap:E};return this.addShape(M,{id:this.getElementId("track"),name:"track",type:"line",attrs:v})},l.prototype.renderThumbShape=function(M){var j=this.cfg,y=j.thumbOffset,n=j.thumbLen,s=j.theme,d=s===void 0?{default:{}}:s,E=d.default,O=E.size,C=E.lineCap,v=E.thumbColor,x=this.get("isHorizontal")?{x1:y+O/2,y1:O/2,x2:y+n-O/2,y2:O/2,lineWidth:O,stroke:v,lineCap:C,cursor:"default"}:{x1:O/2,y1:y+O/2,x2:O/2,y2:y+n-O/2,lineWidth:O,stroke:v,lineCap:C,cursor:"default"};return this.addShape(M,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:x})},l.prototype.bindEvents=function(){var M=this.get("group");M.on("mousedown",this.onStartEvent(!1)),M.on("mouseup",this.onMouseUp),M.on("touchstart",this.onStartEvent(!0)),M.on("touchend",this.onMouseUp);var j=M.findById(this.getElementId("track"));j.on("click",this.onTrackClick);var y=M.findById(this.getElementId("thumb"));y.on("mouseover",this.onThumbMouseOver),y.on("mouseout",this.onThumbMouseOut)},l.prototype.getContainerDOM=function(){var M=this.get("container"),j=M&&M.get("canvas");return j&&j.get("container")},l.prototype.validateRange=function(M){var j=this.cfg,y=j.thumbLen,n=j.trackLen,s=M;return M+y>n?s=n-y:M+y<y&&(s=0),s},l.prototype.draw=function(){var M=this.get("container"),j=M&&M.get("canvas");j&&j.draw()},l.prototype.updateThumbOffset=function(M){var j=this.cfg,y=j.thumbOffset,n=j.isHorizontal,s=j.thumbLen,d=j.size,E=this.validateRange(M);if(E!==y){var O=this.getElementByLocalId("thumb");n?O.attr({x1:E+d/2,x2:E+s-d/2}):O.attr({y1:E+d/2,y2:E+s-d/2}),this.emitOffsetChange(E)}},l.prototype.emitOffsetChange=function(M){var j=this.cfg,y=j.thumbOffset,n=j.trackLen,s=j.thumbLen;this.cfg.thumbOffset=M,this.emit("scrollchange",{thumbOffset:M,ratio:Object(A.clamp)(M/(n-s),0,1)}),this.delegateEmit("valuechange",{originalValue:y,value:M})},l}(e.a)},"46lQ":function(Gn,Gt,_){"use strict";var at=_("QG4C"),a;(function(i){i.DEV="DEV",i.BETA="BETA",i.STABLE="STABLE"})(a||(a={}));function A(i,p){console.warn(i===a.DEV?"Plot '"+p+"' is in DEV stage, just give us issues.":i===a.BETA?"Plot '"+p+"' is in BETA stage, DO NOT use it in production env.":i===a.STABLE?"Plot '"+p+`' is in STABLE stage, import it by "import { `+p+` } from '@antv/g2plot'".`:"invalid Stage type.")}var e=function(){function i(){}return Object.defineProperty(i,"MultiView",{get:function(){return A(a.STABLE,"MultiView"),at.a},enumerable:!1,configurable:!0}),i}()},"4Olw":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at});function at(a,A){return a.views.find(function(e){return e.id===A})}},"4cbP":function(Gn,Gt){},"5HRO":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("iTfj");function a(A,e){if(A===!1)return{fields:!1};var i=Object(at.get)(A,"fields"),p=Object(at.get)(A,"formatter");return p&&!i&&(i=e),{fields:i,formatter:p}}},"5OoT":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("iTfj");function a(A,e){return!Object(at.isNumber)(A)||!Object(at.isNumber)(e)?"-":A===e?"100%":A===0?"\u221E":e===0?"-\u221E":(100*e/A).toFixed(2)+"%"}},"5UbV":function(Gn,Gt,_){"use strict";_.d(Gt,"c",function(){return a}),_.d(Gt,"a",function(){return A}),_.d(Gt,"h",function(){return e}),_.d(Gt,"k",function(){return i}),_.d(Gt,"j",function(){return p}),_.d(Gt,"b",function(){return m}),_.d(Gt,"g",function(){return S}),_.d(Gt,"e",function(){return l}),_.d(Gt,"i",function(){return y}),_.d(Gt,"d",function(){return d}),_.d(Gt,"m",function(){return E}),_.d(Gt,"l",function(){return O}),_.d(Gt,"f",function(){return C});var at=_("iTfj");function a(v){var x=0,T=0,N=0,X=0;return Object(at.isNumber)(v)?x=T=N=X=v:Object(at.isArray)(v)&&(x=v[0],N=Object(at.isNil)(v[1])?v[0]:v[1],X=Object(at.isNil)(v[2])?v[0]:v[2],T=Object(at.isNil)(v[3])?N:v[3]),[x,N,X,T]}function A(v){for(var x=v.childNodes,T=x.length,N=T-1;N>=0;N--)v.removeChild(x[N])}function e(v,x){return!!v.className.match(new RegExp("(\\s|^)"+x+"(\\s|$)"))}function i(v){var x=v.start,T=v.end,N=Math.min(x.x,T.x),X=Math.min(x.y,T.y),tt=Math.max(x.x,T.x),nt=Math.max(x.y,T.y);return{x:N,y:X,minX:N,minY:X,maxX:tt,maxY:nt,width:tt-N,height:nt-X}}function p(v){var x=v.map(function(vt){return vt.x}),T=v.map(function(vt){return vt.y}),N=Math.min.apply(Math,x),X=Math.min.apply(Math,T),tt=Math.max.apply(Math,x),nt=Math.max.apply(Math,T);return{x:N,y:X,minX:N,minY:X,maxX:tt,maxY:nt,width:tt-N,height:nt-X}}function m(v,x,T,N){var X=v+T,tt=x+N;return{x:v,y:x,width:T,height:N,minX:v,minY:x,maxX:isNaN(X)?0:X,maxY:isNaN(tt)?0:tt}}function S(v,x,T){return(1-T)*v+x*T}function l(v,x,T){return{x:v.x+Math.cos(T)*x,y:v.y+Math.sin(T)*x}}function M(v,x){var T=x.x-v.x,N=x.y-v.y;return Math.sqrt(T*T+N*N)}var j=function(x){return new Promise(function(T){setTimeout(T,x)})},y=function(x,T,N){return N===void 0&&(N=Math.pow(Number.EPSILON,.5)),[x,T].includes(Infinity)?Math.abs(x)===Math.abs(T):Math.abs(x-T)<N};function n(v,x){var T=Math.max(v.minX,x.minX),N=Math.max(v.minY,x.minY),X=Math.min(v.maxX,x.maxX),tt=Math.min(v.maxY,x.maxY);return m(T,N,X-T,tt-N)}function s(v,x){var T=Math.min(v.minX,x.minX),N=Math.min(v.minY,x.minY),X=Math.max(v.maxX,x.maxX),tt=Math.max(v.maxY,x.maxY);return m(T,N,X-T,tt-N)}function d(v){var x=v.getClip(),T=x&&x.getBBox(),N;if(!v.isGroup())N=v.getBBox();else{var X=Infinity,tt=-Infinity,nt=Infinity,vt=-Infinity,ft=v.getChildren();ft.length>0?Object(at.each)(ft,function(bt){if(bt.get("visible")){if(bt.isGroup()&&bt.get("children").length===0)return!0;var St=d(bt),pt=bt.applyToMatrix([St.minX,St.minY,1]),ct=bt.applyToMatrix([St.minX,St.maxY,1]),zt=bt.applyToMatrix([St.maxX,St.minY,1]),Nt=bt.applyToMatrix([St.maxX,St.maxY,1]),wt=Math.min(pt[0],ct[0],zt[0],Nt[0]),H=Math.max(pt[0],ct[0],zt[0],Nt[0]),ht=Math.min(pt[1],ct[1],zt[1],Nt[1]),dt=Math.max(pt[1],ct[1],zt[1],Nt[1]);wt<X&&(X=wt),H>tt&&(tt=H),ht<nt&&(nt=ht),dt>vt&&(vt=dt)}}):(X=0,tt=0,nt=0,vt=0),N=m(X,nt,tt-X,vt-nt)}return T?n(N,T):N}function E(v,x){if(!(!v.getClip()&&!x.getClip())){var T=x.getClip();if(!T){v.setClip(null);return}var N={type:T.get("type"),attrs:T.attr()};v.setClip(N)}}function O(v){return v+"px"}function C(v,x,T,N){var X=M(v,x),tt=N/X,nt=0;return T==="start"?nt=0-tt:T==="end"&&(nt=1+tt),{x:S(v.x,x.x,nt),y:S(v.y,x.y,nt)}}},"5bFI":function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Category",function(){return y}),_.d(Gt,"Continuous",function(){return E}),_.d(Gt,"Base",function(){return M});var at=_("mrSG"),a=_("iTfj"),A=_("BgvD"),e=_("jqgP"),i=_("l3hu"),p=_("L16w"),m=_("MeYt"),S=_("5UbV"),l=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},C.prototype.getLayoutBBox=function(){var v=O.prototype.getLayoutBBox.call(this),x=this.get("maxWidth"),T=this.get("maxHeight"),N=v.width,X=v.height;return x&&(N=Math.min(N,x)),T&&(X=Math.min(X,T)),Object(S.b)(v.minX,v.minY,N,X)},C.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetLocation()},C.prototype.resetLocation=function(){var v=this.get("x"),x=this.get("y"),T=this.get("offsetX"),N=this.get("offsetY");this.moveElementTo(this.get("group"),{x:v+T,y:x+N})},C.prototype.applyOffset=function(){this.resetLocation()},C.prototype.getDrawPoint=function(){return this.get("currentPoint")},C.prototype.setDrawPoint=function(v){return this.set("currentPoint",v)},C.prototype.renderInner=function(v){this.resetDraw(),this.get("title")&&this.drawTitle(v),this.drawLegendContent(v),this.get("background")&&this.drawBackground(v)},C.prototype.drawBackground=function(v){var x=this.get("background"),T=v.getBBox(),N=Object(S.c)(x.padding),X=Object(at.a)({x:0,y:0,width:T.width+N[1]+N[3],height:T.height+N[0]+N[2]},x.style),tt=this.addShape(v,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:X});tt.toBack()},C.prototype.drawTitle=function(v){var x=this.get("currentPoint"),T=this.get("title"),N=T.spacing,X=T.style,tt=T.text,nt=this.addShape(v,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Object(at.a)({text:tt,x:x.x,y:x.y},X)}),vt=nt.getBBox();this.set("currentPoint",{x:x.x,y:vt.maxY+N})},C.prototype.resetDraw=function(){var v=this.get("background"),x={x:0,y:0};if(v){var T=Object(S.c)(v.padding);x.x=T[3],x.y=T[0]}this.set("currentPoint",x)},C}(m.a),M=l,j=function(O){Object(at.b)(C,O);function C(){var v=O!==null&&O.apply(this,arguments)||this;return v.currentPageIndex=1,v.totalPagesCnt=1,v.pageWidth=0,v.pageHeight=0,v.startX=0,v.startY=0,v.onNavigationBack=function(){var x=v.getElementByLocalId("item-group");if(v.currentPageIndex>1){v.currentPageIndex-=1,v.updateNavigation();var T=v.getCurrentNavigationMatrix();v.get("animate")?x.animate({matrix:T},100):x.attr({matrix:T})}},v.onNavigationAfter=function(){var x=v.getElementByLocalId("item-group");if(v.currentPageIndex<v.totalPagesCnt){v.currentPageIndex+=1,v.updateNavigation();var T=v.getCurrentNavigationMatrix();v.get("animate")?x.animate({matrix:T},100):x.attr({matrix:T})}},v}return C.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:p.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{fill:p.a.uncheckedColor,stroke:p.a.uncheckedColor}},inactive:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},C.prototype.isList=function(){return!0},C.prototype.getItems=function(){return this.get("items")},C.prototype.setItems=function(v){this.update({items:v})},C.prototype.updateItem=function(v,x){Object(a.mix)(v,x),this.clear(),this.render()},C.prototype.clearItems=function(){var v=this.getElementByLocalId("item-group");v&&v.clear()},C.prototype.setItemState=function(v,x,T){v[x]=T;var N=this.getElementByLocalId("item-"+v.id);if(N){var X=this.getItems(),tt=X.indexOf(v),nt=this.createOffScreenGroup(),vt=this.drawItem(v,tt,this.getItemHeight(),nt);this.updateElements(vt,N),this.clearUpdateStatus(N)}},C.prototype.hasState=function(v,x){return!!v[x]},C.prototype.getItemStates=function(v){var x=this.get("itemStates"),T=[];return Object(a.each)(x,function(N,X){v[X]&&T.push(X)}),T},C.prototype.clearItemsState=function(v){var x=this,T=this.getItemsByState(v);Object(a.each)(T,function(N){x.setItemState(N,v,!1)})},C.prototype.getItemsByState=function(v){var x=this,T=this.getItems();return Object(a.filter)(T,function(N){return x.hasState(N,v)})},C.prototype.drawLegendContent=function(v){this.processItems(),this.drawItems(v)},C.prototype.processItems=function(){var v=this.get("items");Object(a.each)(v,function(x){x.id||(x.id=x.name)})},C.prototype.drawItems=function(v){var x=this,T=this.addGroup(v,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),N=this.addGroup(T,{id:this.getElementId("item-group"),name:"legend-item-group"}),X=this.getItemHeight(),tt=this.get("itemWidth"),nt=this.get("itemSpacing"),vt=this.get("itemMarginBottom"),ft=this.get("currentPoint"),bt=ft.x,St=ft.y,pt=this.get("layout"),ct=this.get("items"),zt=!1,Nt=0,wt=this.get("maxWidth"),H=this.get("maxHeight");Object(a.each)(ct,function(ht,dt){var yt=x.drawItem(ht,dt,X,N),Mt=yt.getBBox(),$=tt||Mt.width;$>Nt&&(Nt=$),pt==="horizontal"?(wt&&wt<ft.x+$-bt&&(zt=!0,ft.x=bt,ft.y+=X+vt),x.moveElementTo(yt,ft),ft.x+=$+nt):(H&&H<ft.y+X+vt-St&&(zt=!0,ft.x+=Nt+nt,ft.y=St,Nt=0),x.moveElementTo(yt,ft),ft.y+=X+vt)}),zt&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=bt,this.startY=St,this.adjustNavigation(v,N))},C.prototype.getItemHeight=function(){var v=this.get("itemHeight");if(!v){var x=this.get("itemName");x&&(v=x.style.fontSize)}return v},C.prototype.drawMarker=function(v,x,T,N){var X=Object(at.a)(Object(at.a)(Object(at.a)({x:0,y:N/2},x.style),{symbol:Object(a.get)(T.marker,"symbol","circle")}),Object(a.get)(T.marker,"style",{})),tt=this.addShape(v,{type:"marker",id:this.getElementId("item-"+T.id+"-marker"),name:"legend-item-marker",attrs:X}),nt=tt.getBBox();tt.attr("x",nt.width/2);var vt=tt.attr(),ft=vt.stroke,bt=vt.fill;return ft&&tt.set("isStroke",!0),bt&&tt.set("isFill",!0),tt},C.prototype.drawItemText=function(v,x,T,N,X,tt,nt){var vt=T.formatter,ft=Object(at.a)({x:tt,y:X/2,text:vt?vt(N[x],N,nt):N[x]},T.style);return this.addShape(v,{type:"text",id:this.getElementId("item-"+N.id+"-"+x),name:"legend-item-"+x,attrs:ft})},C.prototype.drawItem=function(v,x,T,N){var X="item-"+v.id,tt=this.addGroup(N,{name:"legend-item-container",id:this.getElementId("item-container-"+X),delegateObject:{item:v,index:x}}),nt=this.addGroup(tt,{name:"legend-item",id:this.getElementId(X),delegateObject:{item:v,index:x}}),vt=this.get("marker"),ft=this.get("itemName"),bt=this.get("itemValue"),St=this.get("itemBackground"),pt=this.getLimitItemWidth(),ct=0;if(vt){var zt=this.drawMarker(nt,vt,v,T);ct=zt.getBBox().maxX+vt.spacing}if(ft){var Nt=this.drawItemText(nt,"name",ft,v,T,ct,x);pt&&Object(A.a)(!0,Nt,Object(a.clamp)(pt-ct,0,pt)),ct=Nt.getBBox().maxX+ft.spacing}if(bt){var wt=this.drawItemText(nt,"value",bt,v,T,ct,x);pt&&(bt.alignRight?(wt.attr({textAlign:"right",x:pt}),Object(A.a)(!0,wt,Object(a.clamp)(pt-ct,0,pt),"head")):Object(A.a)(!0,wt,Object(a.clamp)(pt-ct,0,pt)))}if(St){var H=nt.getBBox(),ht=this.addShape(nt,{type:"rect",name:"legend-item-background",id:this.getElementId(X+"-background"),attrs:Object(at.a)({x:0,y:0,width:H.width,height:T},St.style)});ht.toBack()}return this.applyItemStates(v,nt),nt},C.prototype.adjustNavigation=function(v,x){var T=this,N=this.startX,X=this.startY,tt=this.get("layout"),nt=x.findAll(function($){return $.get("name")==="legend-item"}),vt=this.get("maxWidth"),ft=this.get("maxHeight"),bt=this.get("itemWidth"),St=this.get("itemSpacing"),pt=this.getItemHeight(),ct=this.drawNavigation(v,tt,"00/00",12),zt=ct.getBBox(),Nt={x:N,y:X},wt=1,H=0,ht=0,dt=0;if(tt==="horizontal")this.pageHeight=pt,Object(a.each)(nt,function($){var lt=$.getBBox(),rt=bt||lt.width;(H&&H<Nt.x+rt+St||vt<Nt.x+rt+St+zt.width)&&(wt===1&&(H=Nt.x+St,T.pageWidth=H,T.moveElementTo(ct,{x:vt-St-zt.width-zt.minX,y:Nt.y+pt/2-zt.height/2-zt.minY})),wt+=1,Nt.x=N,Nt.y+=pt),T.moveElementTo($,Nt),$.getParent().setClip({type:"rect",attrs:{x:Nt.x,y:Nt.y,width:rt+St,height:pt}}),Nt.x+=rt+St});else{var yt=this.get("itemMarginBottom");Object(a.each)(nt,function($){var lt=$.getBBox();lt.width>ht&&(ht=lt.width)}),dt=ht,ht+=St,vt&&(ht=Math.min(vt,ht),dt=Math.min(vt,dt)),this.pageWidth=ht,this.pageHeight=ft-Math.max(zt.height,pt+yt);var Mt=Math.floor(this.pageHeight/(pt+yt));Object(a.each)(nt,function($,lt){lt!==0&&lt%Mt==0&&(wt+=1,Nt.x+=ht,Nt.y=X),T.moveElementTo($,Nt),$.getParent().setClip({type:"rect",attrs:{x:Nt.x,y:Nt.y,width:ht,height:pt}}),Nt.y+=pt+yt}),this.totalPagesCnt=wt,this.moveElementTo(ct,{x:N+dt/2-zt.width/2-zt.minX,y:ft-zt.height-zt.minY})}this.pageHeight&&this.pageWidth&&x.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=wt,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(ct),x.attr("matrix",this.getCurrentNavigationMatrix())},C.prototype.drawNavigation=function(v,x,T,N){var X={x:0,y:0},tt=this.addGroup(v,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),nt=this.drawArrow(tt,X,"navigation-arrow-left",x==="horizontal"?"up":"left",N);nt.on("click",this.onNavigationBack);var vt=nt.getBBox();X.x+=vt.width+2;var ft=this.addShape(tt,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:X.x,y:X.y+N/2,text:T,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),bt=ft.getBBox();X.x+=bt.width+2;var St=this.drawArrow(tt,X,"navigation-arrow-right",x==="horizontal"?"down":"right",N);return St.on("click",this.onNavigationAfter),tt},C.prototype.updateNavigation=function(v){var x=this.currentPageIndex+"/"+this.totalPagesCnt,T=v?v.getChildren()[1]:this.getElementByLocalId("navigation-text"),N=v?v.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),X=v?v.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),tt=T.getBBox();T.attr("text",x);var nt=T.getBBox();T.attr("x",T.attr("x")-(nt.width-tt.width)/2),N.attr("opacity",this.currentPageIndex===1?.45:1),N.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),X.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),X.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},C.prototype.drawArrow=function(v,x,T,N,X){var tt=x.x,nt=x.y,vt={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},ft=this.addShape(v,{type:"path",id:this.getElementId(T),name:T,attrs:{path:[["M",tt+X/2,nt],["L",tt,nt+X],["L",tt+X,nt+X],["Z"]],fill:"#000",cursor:"pointer"}});return ft.attr("matrix",Object(e.e)({x:tt+X/2,y:nt+X/2},vt[N])),ft},C.prototype.getCurrentNavigationMatrix=function(){var v=this,x=v.currentPageIndex,T=v.pageWidth,N=v.pageHeight,X=this.get("layout"),tt=X==="horizontal"?{x:0,y:N*(1-x)}:{x:T*(1-x),y:0};return Object(e.f)(tt)},C.prototype.applyItemStates=function(v,x){var T=this.getItemStates(v),N=T.length>0;if(N){var X=x.getChildren(),tt=this.get("itemStates");Object(a.each)(X,function(nt){var vt=nt.get("name"),ft=vt.split("-")[2],bt=Object(i.a)(v,ft,tt);bt&&(nt.attr(bt),ft==="marker"&&!(nt.get("isStroke")&&nt.get("isFill"))&&(nt.get("isStroke")&&nt.attr("fill",null),nt.get("isFill")&&nt.attr("stroke",null)))})}},C.prototype.getLimitItemWidth=function(){var v=this.get("itemWidth"),x=this.get("maxItemWidth");return x?v&&(x=v<=x?v:x):v&&(x=v),x},C}(M),y=j,n=1.4,s=.4,d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:p.a.textColor,textBaseline:"middle",fontFamily:p.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},C.prototype.isSlider=function(){return!0},C.prototype.getValue=function(){return this.getCurrentValue()},C.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},C.prototype.setRange=function(v,x){this.update({min:v,max:x})},C.prototype.setValue=function(v){var x=this.getValue();this.set("value",v);var T=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(T),this.delegateEmit("valuechanged",{originValue:x,value:v})},C.prototype.initEvent=function(){var v=this.get("group");this.bindSliderEvent(v),this.bindRailEvent(v),this.bindTrackEvent(v)},C.prototype.drawLegendContent=function(v){this.drawRail(v),this.drawLabels(v),this.fixedElements(v),this.resetTrack(v),this.resetTrackClip(v),this.get("slidable")&&this.resetHandlers(v)},C.prototype.bindSliderEvent=function(v){this.bindHandlersEvent(v)},C.prototype.bindHandlersEvent=function(v){var x=this;v.on("legend-handler-min:drag",function(T){var N=x.getValueByCanvasPoint(T.x,T.y),X=x.getCurrentValue(),tt=X[1];tt<N&&(tt=N),x.setValue([N,tt])}),v.on("legend-handler-max:drag",function(T){var N=x.getValueByCanvasPoint(T.x,T.y),X=x.getCurrentValue(),tt=X[0];tt>N&&(tt=N),x.setValue([tt,N])})},C.prototype.bindRailEvent=function(v){},C.prototype.bindTrackEvent=function(v){var x=this,T=null;v.on("legend-track:dragstart",function(N){T={x:N.x,y:N.y}}),v.on("legend-track:drag",function(N){if(!!T){var X=x.getValueByCanvasPoint(T.x,T.y),tt=x.getValueByCanvasPoint(N.x,N.y),nt=x.getCurrentValue(),vt=nt[1]-nt[0],ft=x.getRange(),bt=tt-X;bt<0?nt[0]+bt>ft.min?x.setValue([nt[0]+bt,nt[1]+bt]):x.setValue([ft.min,ft.min+vt]):bt>0&&(bt>0&&nt[1]+bt<ft.max?x.setValue([nt[0]+bt,nt[1]+bt]):x.setValue([ft.max-vt,ft.max])),T={x:N.x,y:N.y}}}),v.on("legend-track:dragend",function(N){T=null})},C.prototype.drawLabels=function(v){this.drawLabel("min",v),this.drawLabel("max",v)},C.prototype.drawLabel=function(v,x){var T=this.get("label"),N=T.style,X=T.align,tt=this.get(v),nt=this.getLabelAlignAttrs(v,X),vt="label-"+v;this.addShape(x,{type:"text",id:this.getElementId(vt),name:"legend-label-"+v,attrs:Object(at.a)(Object(at.a)({x:0,y:0,text:tt},N),nt)})},C.prototype.getLabelAlignAttrs=function(v,x){var T=this.isVertical(),N="center",X="middle";return T?(N="start",x!=="rail"?v==="min"?X="top":X="bottom":X="top"):x!=="rail"?(X="top",v==="min"?N="start":N="end"):(N="start",X="middle"),{textAlign:N,textBaseline:X}},C.prototype.getRailPath=function(v,x,T,N){var X=this.get("rail"),tt=X.size,nt=X.defaultLength,vt=X.type,ft=this.isVertical(),bt=nt,St=T,pt=N;St||(St=ft?tt:bt),pt||(pt=ft?bt:tt);var ct=[];return vt==="color"?(ct.push(["M",v,x]),ct.push(["L",v+St,x]),ct.push(["L",v+St,x+pt]),ct.push(["L",v,x+pt]),ct.push(["Z"])):(ct.push(["M",v+St,x]),ct.push(["L",v+St,x+pt]),ct.push(["L",v,x+pt]),ct.push(["Z"])),ct},C.prototype.drawRail=function(v){var x=this.get("rail"),T=x.style;this.addShape(v,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Object(at.a)({path:this.getRailPath(0,0)},T)})},C.prototype.getTrackColor=function(v){var x=v.length;if(!x)return null;if(x===1)return v[0];var T;this.isVertical()?T="l(90)":T="l(0)";for(var N=0;N<x;N++){var X=N/(x-1);T+=" "+X+":"+v[N]}return T},C.prototype.getTrackPath=function(v){var x=this.getRailShape(v),T=x.attr("path");return Object(a.clone)(T)},C.prototype.getClipTrackAttrs=function(v){var x=this.getCurrentValue(),T=x[0],N=x[1],X=this.getRailBBox(v),tt=this.getPointByValue(T,v),nt=this.getPointByValue(N,v),vt=this.isVertical(),ft,bt,St,pt;return vt?(ft=X.minX,bt=tt.y,St=X.width,pt=nt.y-tt.y):(ft=tt.x,bt=X.minY,St=nt.x-tt.x,pt=X.height),{x:ft,y:bt,width:St,height:pt}},C.prototype.getTrackAttrs=function(v){var x=this.get("track"),T=this.get("colors"),N=this.getTrackPath(v);return Object(a.mix)({path:N,fill:this.getTrackColor(T)},x.style)},C.prototype.resetTrackClip=function(v){var x=v||this.get("group"),T=this.getElementId("track"),N=x.findById(T),X=N.getClip(),tt=this.getClipTrackAttrs(v);X?X.attr(tt):N.setClip({type:"rect",attrs:tt})},C.prototype.resetTrack=function(v){var x=this.getElementId("track"),T=v.findById(x),N=this.getTrackAttrs(v);T?T.attr(N):this.addShape(v,{type:"path",id:x,draggable:this.get("slidable"),name:"legend-track",attrs:N})},C.prototype.getPointByValue=function(v,x){var T=this.getRange(),N=T.min,X=T.max,tt=(v-N)/(X-N),nt=this.getRailBBox(x),vt=this.isVertical(),ft={x:0,y:0};return vt?(ft.x=nt.minX+nt.width/2,ft.y=Object(S.g)(nt.minY,nt.maxY,tt)):(ft.x=Object(S.g)(nt.minX,nt.maxX,tt),ft.y=nt.minY+nt.height/2),ft},C.prototype.getRailShape=function(v){var x=v||this.get("group");return x.findById(this.getElementId("rail"))},C.prototype.getRailBBox=function(v){var x=this.getRailShape(v),T=x.getBBox();return T},C.prototype.getRailCanvasBBox=function(){var v=this.get("group"),x=v.findById(this.getElementId("rail")),T=x.getCanvasBBox();return T},C.prototype.isVertical=function(){return this.get("layout")==="vertical"},C.prototype.getValueByCanvasPoint=function(v,x){var T=this.getRange(),N=T.min,X=T.max,tt=this.getRailCanvasBBox(),nt=this.isVertical(),vt=this.get("step"),ft;nt?ft=(x-tt.minY)/tt.height:ft=(v-tt.minX)/tt.width;var bt=Object(S.g)(N,X,ft);if(vt){var St=Math.round((bt-N)/vt);bt=N+St*vt}return bt>X&&(bt=X),bt<N&&(bt=N),bt},C.prototype.getCurrentValue=function(){var v=this.get("value");return v||(v=[this.get("min"),this.get("max")]),v},C.prototype.resetHandlers=function(v){var x=this.getCurrentValue(),T=x[0],N=x[1];this.resetHandler(v,"min",T),this.resetHandler(v,"max",N)},C.prototype.getHandlerPath=function(v,x){var T=this.isVertical(),N=[],X=v.size,tt=x.x,nt=x.y,vt=X*n,ft=X/2,bt=X/6;if(T){var St=tt+vt*s;N.push(["M",tt,nt]),N.push(["L",St,nt+ft]),N.push(["L",tt+vt,nt+ft]),N.push(["L",tt+vt,nt-ft]),N.push(["L",St,nt-ft]),N.push(["Z"]),N.push(["M",St,nt+bt]),N.push(["L",tt+vt-2,nt+bt]),N.push(["M",St,nt-bt]),N.push(["L",tt+vt-2,nt-bt])}else{var pt=nt+vt*s;N.push(["M",tt,nt]),N.push(["L",tt-ft,pt]),N.push(["L",tt-ft,nt+vt]),N.push(["L",tt+ft,nt+vt]),N.push(["L",tt+ft,pt]),N.push(["Z"]),N.push(["M",tt-bt,pt]),N.push(["L",tt-bt,nt+vt-2]),N.push(["M",tt+bt,pt]),N.push(["L",tt+bt,nt+vt-2])}return N},C.prototype.resetHandler=function(v,x,T){var N=this.getPointByValue(T,v),X=this.get("handler"),tt=this.getHandlerPath(X,N),nt=this.getElementId("handler-"+x),vt=v.findById(nt),ft=this.isVertical();vt?vt.attr("path",tt):this.addShape(v,{type:"path",name:"legend-handler-"+x,draggable:!0,id:nt,attrs:Object(at.a)(Object(at.a)({path:tt},X.style),{cursor:ft?"ns-resize":"ew-resize"})})},C.prototype.fixedElements=function(v){var x=v.findById(this.getElementId("rail")),T=v.findById(this.getElementId("label-min")),N=v.findById(this.getElementId("label-max")),X=this.getDrawPoint();this.isVertical()?this.fixedVertail(T,N,x,X):this.fixedHorizontal(T,N,x,X)},C.prototype.fitRailLength=function(v,x,T,N){var X=this.isVertical(),tt=X?"height":"width",nt=this.get("label"),vt=nt.align,ft=nt.spacing,bt=this.get("max"+Object(a.upperFirst)(tt));if(bt){var St=vt==="rail"?T[tt]+v[tt]+x[tt]+ft*2:T[tt],pt=St-bt;pt>0&&this.changeRailLength(N,tt,T[tt]-pt)}},C.prototype.changeRailLength=function(v,x,T){var N=v.getBBox(),X;x==="height"?X=this.getRailPath(N.x,N.y,N.width,T):X=this.getRailPath(N.x,N.y,T,N.height),v.attr("path",X)},C.prototype.changeRailPosition=function(v,x,T){var N=v.getBBox(),X=this.getRailPath(x,T,N.width,N.height);v.attr("path",X)},C.prototype.fixedHorizontal=function(v,x,T,N){var X=this.get("label"),tt=X.align,nt=X.spacing,vt=T.getBBox(),ft=v.getBBox(),bt=x.getBBox(),St=vt.height;this.fitRailLength(ft,bt,vt,T),vt=T.getBBox(),tt==="rail"?(v.attr({x:N.x,y:N.y+St/2}),this.changeRailPosition(T,N.x+ft.width+nt,N.y),x.attr({x:N.x+ft.width+vt.width+nt*2,y:N.y+St/2})):tt==="top"?(v.attr({x:N.x,y:N.y}),x.attr({x:N.x+vt.width,y:N.y}),this.changeRailPosition(T,N.x,N.y+ft.height+nt)):(this.changeRailPosition(T,N.x,N.y),v.attr({x:N.x,y:N.y+vt.height+nt}),x.attr({x:N.x+vt.width,y:N.y+vt.height+nt}))},C.prototype.fixedVertail=function(v,x,T,N){var X=this.get("label"),tt=X.align,nt=X.spacing,vt=T.getBBox(),ft=v.getBBox(),bt=x.getBBox();if(this.fitRailLength(ft,bt,vt,T),vt=T.getBBox(),tt==="rail")v.attr({x:N.x,y:N.y}),this.changeRailPosition(T,N.x,N.y+ft.height+nt),x.attr({x:N.x,y:N.y+ft.height+vt.height+nt*2});else if(tt==="right")v.attr({x:N.x+vt.width+nt,y:N.y}),this.changeRailPosition(T,N.x,N.y),x.attr({x:N.x+vt.width+nt,y:N.y+vt.height});else{var St=Math.max(ft.width,bt.width);v.attr({x:N.x,y:N.y}),this.changeRailPosition(T,N.x+St+nt,N.y),x.attr({x:N.x,y:N.y+vt.height})}},C}(M),E=d},"5eLp":function(Gn,Gt,_){"use strict";var at=function(){function a(A,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=A,this.name=A,this.originalEvent=e,this.timeStamp=e.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var A=this.type;return"[Event (type="+A+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}();Gt.a=at},"5kt6":function(Gn,Gt,_){"use strict";_.d(Gt,"f",function(){return at}),_.d(Gt,"e",function(){return a}),_.d(Gt,"d",function(){return A}),_.d(Gt,"a",function(){return e}),_.d(Gt,"b",function(){return i}),_.d(Gt,"g",function(){return p}),_.d(Gt,"c",function(){return m});var at="range",a="type",A="percent",e="#f0f0f0",i="indicator-view",p="range-view",m="range-mask-view"},"5nFI":function(Gn,Gt,_){"use strict";var at=_("VTBJ"),a=_("cIOH"),A=_("6D9b"),e=_("cWXX"),i=_("rePB"),p=_("wx14"),m=_("q1tI"),S=_("TSYQ"),l=_.n(S),M=_("H84U"),j=_("/ezw"),y=_("B6l+"),n=_.n(y),s=function($){var lt=$.value,rt=$.formatter,z=$.precision,P=$.decimalSeparator,Y=$.groupSeparator,k=Y===void 0?"":Y,h=$.prefixCls,g;if(typeof rt=="function")g=rt(lt);else{var B=String(lt),V=B.match(/^(-?)(\d*)(\.(\d+))?$/);if(!V||B==="-")g=B;else{var q=V[1],it=V[2]||"0",ot=V[4]||"";it=it.replace(/\B(?=(\d{3})+(?!\d))/g,k),typeof z=="number"&&(ot=n()(ot,z,"0").slice(0,z)),ot&&(ot="".concat(P).concat(ot)),g=[m.createElement("span",{key:"int",className:"".concat(h,"-content-value-int")},q,it),ot&&m.createElement("span",{key:"decimal",className:"".concat(h,"-content-value-decimal")},ot)]}}return m.createElement("span",{className:"".concat(h,"-content-value")},g)},d=s,E=function($){var lt=$.prefixCls,rt=$.className,z=$.style,P=$.valueStyle,Y=$.value,k=Y===void 0?0:Y,h=$.title,g=$.valueRender,B=$.prefix,V=$.suffix,q=$.loading,it=$.direction,ot=$.onMouseEnter,At=$.onMouseLeave,gt=m.createElement(d,Object(p.a)({},$,{value:k})),mt=l()(lt,Object(i.a)({},"".concat(lt,"-rtl"),it==="rtl"),rt);return m.createElement("div",{className:mt,style:z,onMouseEnter:ot,onMouseLeave:At},h&&m.createElement("div",{className:"".concat(lt,"-title")},h),m.createElement(j.a,{paragraph:!1,loading:q},m.createElement("div",{style:P,className:"".concat(lt,"-content")},B&&m.createElement("span",{className:"".concat(lt,"-content-prefix")},B),g?g(gt):gt,V&&m.createElement("span",{className:"".concat(lt,"-content-suffix")},V))))};E.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var O=Object(M.c)({prefixCls:"statistic"})(E),C=O,v=_("1OyB"),x=_("vuIU"),T=_("Ji7U"),N=_("LK+K"),X=_("ODXe"),tt=_("QQZ/"),nt=_.n(tt),vt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function ft(Mt,$){var lt=Mt,rt=/\[[^\]]*]/g,z=($.match(rt)||[]).map(function(h){return h.slice(1,-1)}),P=$.replace(rt,"[]"),Y=vt.reduce(function(h,g){var B=Object(X.a)(g,2),V=B[0],q=B[1];if(h.indexOf(V)!==-1){var it=Math.floor(lt/q);return lt-=it*q,h.replace(new RegExp("".concat(V,"+"),"g"),function(ot){var At=ot.length;return nt()(it.toString(),At,"0")})}return h},P),k=0;return Y.replace(rt,function(){var h=z[k];return k+=1,h})}function bt(Mt,$){var lt=$.format,rt=lt===void 0?"":lt,z=new Date(Mt).getTime(),P=Date.now(),Y=Math.max(z-P,0);return ft(Y,rt)}var St=_("0n0R"),pt=1e3/30;function ct(Mt){return new Date(Mt).getTime()}var zt=function(Mt){Object(T.a)(lt,Mt);var $=Object(N.a)(lt);function lt(){var rt;return Object(v.a)(this,lt),rt=$.apply(this,arguments),rt.syncTimer=function(){var z=rt.props.value,P=ct(z);P>=Date.now()?rt.startTimer():rt.stopTimer()},rt.startTimer=function(){rt.countdownId||(rt.countdownId=window.setInterval(function(){rt.forceUpdate()},pt))},rt.stopTimer=function(){var z=rt.props,P=z.onFinish,Y=z.value;if(rt.countdownId){clearInterval(rt.countdownId),rt.countdownId=void 0;var k=ct(Y);P&&k<Date.now()&&P()}},rt.formatCountdown=function(z,P){var Y=rt.props.format;return bt(z,Object(p.a)(Object(p.a)({},P),{format:Y}))},rt.valueRender=function(z){return Object(St.a)(z,{title:void 0})},rt}return Object(x.a)(lt,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return m.createElement(C,Object(p.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),lt}(m.Component);zt.defaultProps={format:"HH:mm:ss"};var Nt=zt;C.Countdown=Nt;var wt=C,H=_("nKUr"),ht=_("Ff2n"),dt=function($){var lt=$.title,rt=lt===void 0?"title":lt,z=$.value,P=z===void 0?0:z,Y=$.precision,k=Y===void 0?2:Y,h=$.isNormal,g=h===void 0?!0:h,B=Object(ht.a)($,["title","value","precision","isNormal"]),V=function(){return g?"#000":P>=0?"#389e0d":"#cf1322"};return Object(H.jsx)(wt,Object(at.a)({title:rt,value:P,precision:k,valueStyle:{color:V(),fontWeight:600},prefix:!g&&Number(P)>=0?"+":""},B))},yt=Gt.a=dt},"5z4m":function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("aFU3"),A=_("iTfj"),e=_("aN7R"),i=_("c0lT"),p=_("APlK"),m=_("IvmH"),S=_("c+wO"),l=function(M){Object(at.b)(j,M);function j(){return M!==null&&M.apply(this,arguments)||this}return j.prototype.isEntityGroup=function(){return!0},j.prototype.createDom=function(){var y=Object(S.b)("g");this.set("el",y);var n=this.getParent();if(n){var s=n.get("el");s||(s=n.createDom(),n.set("el",s)),s.appendChild(y)}return y},j.prototype.afterAttrsChange=function(y){M.prototype.afterAttrsChange.call(this,y);var n=this.get("canvas");if(n&&n.get("autoDraw")){var s=n.get("context");this.createPath(s,y)}},j.prototype.onCanvasChange=function(y){Object(i.b)(this,y)},j.prototype.getShapeBase=function(){return e},j.prototype.getGroupBase=function(){return j},j.prototype.draw=function(y){var n=this.getChildren(),s=this.get("el");this.get("destroyed")?s&&s.parentNode.removeChild(s):(s||this.createDom(),Object(p.a)(this,y),this.createPath(y),n.length&&Object(i.a)(y,n))},j.prototype.createPath=function(y,n){var s=this.attr(),d=this.get("el");Object(A.each)(n||s,function(E,O){m.b[O]&&d.setAttribute(m.b[O],E)}),Object(p.c)(this)},j}(a.AbstractGroup);Gt.a=l},"6D9b":function(Gn,Gt,_){},"6JdA":function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return at}),_.d(Gt,"c",function(){return ht}),_.d(Gt,"d",function(){return dt}),_.d(Gt,"a",function(){return a});var at={};_.r(at),_.d(at,"create",function(){return e}),_.d(at,"fromMat4",function(){return i}),_.d(at,"clone",function(){return p}),_.d(at,"copy",function(){return m}),_.d(at,"fromValues",function(){return S}),_.d(at,"set",function(){return l}),_.d(at,"identity",function(){return M}),_.d(at,"transpose",function(){return j}),_.d(at,"invert",function(){return y}),_.d(at,"adjoint",function(){return n}),_.d(at,"determinant",function(){return s}),_.d(at,"multiply",function(){return d}),_.d(at,"translate",function(){return E}),_.d(at,"rotate",function(){return O}),_.d(at,"scale",function(){return C}),_.d(at,"fromTranslation",function(){return v}),_.d(at,"fromRotation",function(){return x}),_.d(at,"fromScaling",function(){return T}),_.d(at,"fromMat2d",function(){return N}),_.d(at,"fromQuat",function(){return X}),_.d(at,"normalFromMat4",function(){return tt}),_.d(at,"projection",function(){return nt}),_.d(at,"str",function(){return vt}),_.d(at,"frob",function(){return ft}),_.d(at,"add",function(){return bt}),_.d(at,"subtract",function(){return St}),_.d(at,"multiplyScalar",function(){return pt}),_.d(at,"multiplyScalarAndAdd",function(){return ct}),_.d(at,"exactEquals",function(){return zt}),_.d(at,"equals",function(){return Nt}),_.d(at,"mul",function(){return wt}),_.d(at,"sub",function(){return H});var a={};_.r(a),_.d(a,"leftTranslate",function(){return yt}),_.d(a,"leftRotate",function(){return Mt}),_.d(a,"leftScale",function(){return $}),_.d(a,"transform",function(){return rt}),_.d(a,"direction",function(){return z}),_.d(a,"angleTo",function(){return P}),_.d(a,"vertical",function(){return Y});var A=_("yU0y");function e(){var k=new A.a(9);return A.a!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function i(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[4],k[4]=h[5],k[5]=h[6],k[6]=h[8],k[7]=h[9],k[8]=h[10],k}function p(k){var h=new A.a(9);return h[0]=k[0],h[1]=k[1],h[2]=k[2],h[3]=k[3],h[4]=k[4],h[5]=k[5],h[6]=k[6],h[7]=k[7],h[8]=k[8],h}function m(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[3],k[4]=h[4],k[5]=h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function S(k,h,g,B,V,q,it,ot,At){var gt=new A.a(9);return gt[0]=k,gt[1]=h,gt[2]=g,gt[3]=B,gt[4]=V,gt[5]=q,gt[6]=it,gt[7]=ot,gt[8]=At,gt}function l(k,h,g,B,V,q,it,ot,At,gt){return k[0]=h,k[1]=g,k[2]=B,k[3]=V,k[4]=q,k[5]=it,k[6]=ot,k[7]=At,k[8]=gt,k}function M(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function j(k,h){if(k===h){var g=h[1],B=h[2],V=h[5];k[1]=h[3],k[2]=h[6],k[3]=g,k[5]=h[7],k[6]=B,k[7]=V}else k[0]=h[0],k[1]=h[3],k[2]=h[6],k[3]=h[1],k[4]=h[4],k[5]=h[7],k[6]=h[2],k[7]=h[5],k[8]=h[8];return k}function y(k,h){var g=h[0],B=h[1],V=h[2],q=h[3],it=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8],Ot=mt*it-ot*gt,It=-mt*q+ot*At,Dt=gt*q-it*At,Ut=g*Ot+B*It+V*Dt;return Ut?(Ut=1/Ut,k[0]=Ot*Ut,k[1]=(-mt*B+V*gt)*Ut,k[2]=(ot*B-V*it)*Ut,k[3]=It*Ut,k[4]=(mt*g-V*At)*Ut,k[5]=(-ot*g+V*q)*Ut,k[6]=Dt*Ut,k[7]=(-gt*g+B*At)*Ut,k[8]=(it*g-B*q)*Ut,k):null}function n(k,h){var g=h[0],B=h[1],V=h[2],q=h[3],it=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8];return k[0]=it*mt-ot*gt,k[1]=V*gt-B*mt,k[2]=B*ot-V*it,k[3]=ot*At-q*mt,k[4]=g*mt-V*At,k[5]=V*q-g*ot,k[6]=q*gt-it*At,k[7]=B*At-g*gt,k[8]=g*it-B*q,k}function s(k){var h=k[0],g=k[1],B=k[2],V=k[3],q=k[4],it=k[5],ot=k[6],At=k[7],gt=k[8];return h*(gt*q-it*At)+g*(-gt*V+it*ot)+B*(At*V-q*ot)}function d(k,h,g){var B=h[0],V=h[1],q=h[2],it=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],Ot=h[8],It=g[0],Dt=g[1],Ut=g[2],Ct=g[3],Vt=g[4],Ht=g[5],re=g[6],pe=g[7],ye=g[8];return k[0]=It*B+Dt*it+Ut*gt,k[1]=It*V+Dt*ot+Ut*mt,k[2]=It*q+Dt*At+Ut*Ot,k[3]=Ct*B+Vt*it+Ht*gt,k[4]=Ct*V+Vt*ot+Ht*mt,k[5]=Ct*q+Vt*At+Ht*Ot,k[6]=re*B+pe*it+ye*gt,k[7]=re*V+pe*ot+ye*mt,k[8]=re*q+pe*At+ye*Ot,k}function E(k,h,g){var B=h[0],V=h[1],q=h[2],it=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],Ot=h[8],It=g[0],Dt=g[1];return k[0]=B,k[1]=V,k[2]=q,k[3]=it,k[4]=ot,k[5]=At,k[6]=It*B+Dt*it+gt,k[7]=It*V+Dt*ot+mt,k[8]=It*q+Dt*At+Ot,k}function O(k,h,g){var B=h[0],V=h[1],q=h[2],it=h[3],ot=h[4],At=h[5],gt=h[6],mt=h[7],Ot=h[8],It=Math.sin(g),Dt=Math.cos(g);return k[0]=Dt*B+It*it,k[1]=Dt*V+It*ot,k[2]=Dt*q+It*At,k[3]=Dt*it-It*B,k[4]=Dt*ot-It*V,k[5]=Dt*At-It*q,k[6]=gt,k[7]=mt,k[8]=Ot,k}function C(k,h,g){var B=g[0],V=g[1];return k[0]=B*h[0],k[1]=B*h[1],k[2]=B*h[2],k[3]=V*h[3],k[4]=V*h[4],k[5]=V*h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function v(k,h){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=h[0],k[7]=h[1],k[8]=1,k}function x(k,h){var g=Math.sin(h),B=Math.cos(h);return k[0]=B,k[1]=g,k[2]=0,k[3]=-g,k[4]=B,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function T(k,h){return k[0]=h[0],k[1]=0,k[2]=0,k[3]=0,k[4]=h[1],k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function N(k,h){return k[0]=h[0],k[1]=h[1],k[2]=0,k[3]=h[2],k[4]=h[3],k[5]=0,k[6]=h[4],k[7]=h[5],k[8]=1,k}function X(k,h){var g=h[0],B=h[1],V=h[2],q=h[3],it=g+g,ot=B+B,At=V+V,gt=g*it,mt=B*it,Ot=B*ot,It=V*it,Dt=V*ot,Ut=V*At,Ct=q*it,Vt=q*ot,Ht=q*At;return k[0]=1-Ot-Ut,k[3]=mt-Ht,k[6]=It+Vt,k[1]=mt+Ht,k[4]=1-gt-Ut,k[7]=Dt-Ct,k[2]=It-Vt,k[5]=Dt+Ct,k[8]=1-gt-Ot,k}function tt(k,h){var g=h[0],B=h[1],V=h[2],q=h[3],it=h[4],ot=h[5],At=h[6],gt=h[7],mt=h[8],Ot=h[9],It=h[10],Dt=h[11],Ut=h[12],Ct=h[13],Vt=h[14],Ht=h[15],re=g*ot-B*it,pe=g*At-V*it,ye=g*gt-q*it,we=B*At-V*ot,Ne=B*gt-q*ot,Ke=V*gt-q*At,pn=mt*Ct-Ot*Ut,hn=mt*Vt-It*Ut,kn=mt*Ht-Dt*Ut,Tn=Ot*Vt-It*Ct,Rn=Ot*Ht-Dt*Ct,Mn=It*Ht-Dt*Vt,Cn=re*Mn-pe*Rn+ye*Tn+we*kn-Ne*hn+Ke*pn;return Cn?(Cn=1/Cn,k[0]=(ot*Mn-At*Rn+gt*Tn)*Cn,k[1]=(At*kn-it*Mn-gt*hn)*Cn,k[2]=(it*Rn-ot*kn+gt*pn)*Cn,k[3]=(V*Rn-B*Mn-q*Tn)*Cn,k[4]=(g*Mn-V*kn+q*hn)*Cn,k[5]=(B*kn-g*Rn-q*pn)*Cn,k[6]=(Ct*Ke-Vt*Ne+Ht*we)*Cn,k[7]=(Vt*ye-Ut*Ke-Ht*pe)*Cn,k[8]=(Ut*Ne-Ct*ye+Ht*re)*Cn,k):null}function nt(k,h,g){return k[0]=2/h,k[1]=0,k[2]=0,k[3]=0,k[4]=-2/g,k[5]=0,k[6]=-1,k[7]=1,k[8]=1,k}function vt(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function ft(k){return Math.hypot(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])}function bt(k,h,g){return k[0]=h[0]+g[0],k[1]=h[1]+g[1],k[2]=h[2]+g[2],k[3]=h[3]+g[3],k[4]=h[4]+g[4],k[5]=h[5]+g[5],k[6]=h[6]+g[6],k[7]=h[7]+g[7],k[8]=h[8]+g[8],k}function St(k,h,g){return k[0]=h[0]-g[0],k[1]=h[1]-g[1],k[2]=h[2]-g[2],k[3]=h[3]-g[3],k[4]=h[4]-g[4],k[5]=h[5]-g[5],k[6]=h[6]-g[6],k[7]=h[7]-g[7],k[8]=h[8]-g[8],k}function pt(k,h,g){return k[0]=h[0]*g,k[1]=h[1]*g,k[2]=h[2]*g,k[3]=h[3]*g,k[4]=h[4]*g,k[5]=h[5]*g,k[6]=h[6]*g,k[7]=h[7]*g,k[8]=h[8]*g,k}function ct(k,h,g,B){return k[0]=h[0]+g[0]*B,k[1]=h[1]+g[1]*B,k[2]=h[2]+g[2]*B,k[3]=h[3]+g[3]*B,k[4]=h[4]+g[4]*B,k[5]=h[5]+g[5]*B,k[6]=h[6]+g[6]*B,k[7]=h[7]+g[7]*B,k[8]=h[8]+g[8]*B,k}function zt(k,h){return k[0]===h[0]&&k[1]===h[1]&&k[2]===h[2]&&k[3]===h[3]&&k[4]===h[4]&&k[5]===h[5]&&k[6]===h[6]&&k[7]===h[7]&&k[8]===h[8]}function Nt(k,h){var g=k[0],B=k[1],V=k[2],q=k[3],it=k[4],ot=k[5],At=k[6],gt=k[7],mt=k[8],Ot=h[0],It=h[1],Dt=h[2],Ut=h[3],Ct=h[4],Vt=h[5],Ht=h[6],re=h[7],pe=h[8];return Math.abs(g-Ot)<=A.b*Math.max(1,Math.abs(g),Math.abs(Ot))&&Math.abs(B-It)<=A.b*Math.max(1,Math.abs(B),Math.abs(It))&&Math.abs(V-Dt)<=A.b*Math.max(1,Math.abs(V),Math.abs(Dt))&&Math.abs(q-Ut)<=A.b*Math.max(1,Math.abs(q),Math.abs(Ut))&&Math.abs(it-Ct)<=A.b*Math.max(1,Math.abs(it),Math.abs(Ct))&&Math.abs(ot-Vt)<=A.b*Math.max(1,Math.abs(ot),Math.abs(Vt))&&Math.abs(At-Ht)<=A.b*Math.max(1,Math.abs(At),Math.abs(Ht))&&Math.abs(gt-re)<=A.b*Math.max(1,Math.abs(gt),Math.abs(re))&&Math.abs(mt-pe)<=A.b*Math.max(1,Math.abs(mt),Math.abs(pe))}var wt=d,H=St,ht=_("ZxFD"),dt=_("n+fv");function yt(k,h,g){var B=[0,0,0,0,0,0,0,0,0];return at.fromTranslation(B,g),at.multiply(k,B,h)}function Mt(k,h,g){var B=[0,0,0,0,0,0,0,0,0];return at.fromRotation(B,g),at.multiply(k,B,h)}function $(k,h,g){var B=[0,0,0,0,0,0,0,0,0];return at.fromScaling(B,g),at.multiply(k,B,h)}function lt(k,h,g){return at.multiply(k,g,h)}function rt(k,h){for(var g=k?[].concat(k):[1,0,0,0,1,0,0,0,1],B=0,V=h.length;B<V;B++){var q=h[B];switch(q[0]){case"t":yt(g,g,[q[1],q[2]]);break;case"s":$(g,g,[q[1],q[2]]);break;case"r":Mt(g,g,q[1]);break;case"m":lt(g,g,q[1]);break;default:break}}return g}function z(k,h){return k[0]*h[1]-h[0]*k[1]}function P(k,h,g){var B=ht.angle(k,h),V=z(k,h)>=0;return g?V?Math.PI*2-B:B:V?B:Math.PI*2-B}function Y(k,h,g){return g?(k[0]=h[1],k[1]=-1*h[0]):(k[0]=-1*h[1],k[1]=h[0]),k}},"6UX8":function(Gn,Gt,_){"use strict";var at=_("iTfj"),a=/rgba?\(([\s.,0-9]+)\)/,A=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,p=function(C){return/^[r,R,L,l]{1}[\s]*\(/.test(C)},m=function(){var C=document.createElement("i");return C.title="Web Colour Picker",C.style.display="none",document.body.appendChild(C),C},S=function(C,v,x,T){return C[T]+(v[T]-C[T])*x};function l(O){return"#"+j(O[0])+j(O[1])+j(O[2])}var M=function(C){return[parseInt(C.substr(1,2),16),parseInt(C.substr(3,2),16),parseInt(C.substr(5,2),16)]},j=function(C){var v=Math.round(C).toString(16);return v.length===1?"0"+v:v},y=function(C,v){var x=isNaN(Number(v))||v<0?0:v>1?1:Number(v),T=C.length-1,N=Math.floor(T*x),X=T*x-N,tt=C[N],nt=N===T?tt:C[N+1];return l([S(tt,nt,X,0),S(tt,nt,X,1),S(tt,nt,X,2)])},n,s=function(C){if(C[0]==="#"&&C.length===7)return C;n||(n=m()),n.style.color=C;var v=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),x=a.exec(v),T=x[1].split(/\s*,\s*/).map(function(N){return Number(N)});return v=l(T),v},d=function(C){var v=Object(at.isString)(C)?C.split("-"):C,x=Object(at.map)(v,function(T){return M(T.indexOf("#")===-1?s(T):T)});return function(T){return y(x,T)}},E=function(C){if(p(C)){var v,x=void 0;if(C[0]==="l"){var T=A.exec(C),N=+T[1]+90;x=T[2],v="linear-gradient("+N+"deg, "}else if(C[0]==="r"){v="radial-gradient(";var T=e.exec(C);x=T[4]}var X=x.match(i);return Object(at.each)(X,function(tt,nt){var vt=tt.split(":");v+=vt[1]+" "+vt[0]*100+"%",nt!==X.length-1&&(v+=", ")}),v+=")",v}return C};Gt.a={rgb2arr:M,gradient:d,toRGB:Object(at.memoize)(s),toCSSGradient:E}},"7+4w":function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("YuPD"),A=_("zJSt"),e=function(i){Object(at.b)(p,i);function p(m,S,l,M){var j=i.call(this,m,Object(a.b)({},M,S))||this;return j.type="g2-plot",j.defaultOptions=M,j.adaptor=l,j}return p.prototype.getDefaultOptions=function(){return this.defaultOptions},p.prototype.getSchemaAdaptor=function(){return this.adaptor},p}(A.a)},"711d":function(Gn,Gt){function _(at){return function(a){return a==null?void 0:a[at]}}Gn.exports=_},"7IPS":function(Gn,Gt,_){"use strict";Gt.a=function(at,a,A,e,i){for(var p=at.children,m,S=-1,l=p.length,M=at.value&&(i-A)/at.value;++S<l;)m=p[S],m.x0=a,m.x1=e,m.y0=A,m.y1=A+=m.value*M}},"7ZbV":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return N});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("w02o"),p=_("tKoa"),m="first-axes-view",S="second-axes-view",l="series-field-key";function M(X,tt,nt,vt,ft){var bt=[];tt.forEach(function(wt){vt.forEach(function(H){var ht,dt=(ht={},ht[X]=H[X],ht[nt]=wt,ht[wt]=H[wt],ht);bt.push(dt)})});var St=Object.values(Object(e.groupBy)(bt,nt)),pt=St[0],ct=pt===void 0?[]:pt,zt=St[1],Nt=zt===void 0?[]:zt;return ft?[ct.reverse(),Nt.reverse()]:[ct,Nt]}function j(X){return X!=="vertical"}function y(X,tt,nt){var vt=tt[0],ft=tt[1],bt=vt.autoPadding,St=ft.autoPadding,pt=X.__axisPosition,ct=pt.layout,zt=pt.position;if(j(ct)&&zt==="top"&&(vt.autoPadding=nt.instance(bt.top,0,bt.bottom,bt.left),ft.autoPadding=nt.instance(St.top,bt.left,St.bottom,0)),j(ct)&&zt==="bottom"&&(vt.autoPadding=nt.instance(bt.top,bt.right/2+5,bt.bottom,bt.left),ft.autoPadding=nt.instance(St.top,St.right,St.bottom,bt.right/2+5)),!j(ct)&&zt==="bottom"){var Nt=bt.left>=St.left?bt.left:St.left;vt.autoPadding=nt.instance(bt.top,bt.right,bt.bottom/2+5,Nt),ft.autoPadding=nt.instance(bt.bottom/2+5,St.right,St.bottom,Nt)}if(!j(ct)&&zt==="top"){var Nt=bt.left>=St.left?bt.left:St.left;vt.autoPadding=nt.instance(bt.top,bt.right,0,Nt),ft.autoPadding=nt.instance(0,St.right,bt.top,Nt)}}function n(X){var tt=X.chart,nt=X.options,vt=nt.data,ft=nt.xField,bt=nt.yField,St=nt.color,pt=nt.barStyle,ct=nt.widthRatio,zt=nt.legend,Nt=nt.layout,wt=M(ft,bt,l,vt,j(Nt));zt?tt.legend(l,zt):zt===!1&&tt.legend(!1);var H,ht,dt=wt[0],yt=wt[1];j(Nt)?(H=tt.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:m}),H.coordinate().transpose().reflect("x"),ht=tt.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:S}),ht.coordinate().transpose(),H.data(dt),ht.data(yt)):(H=tt.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:m}),ht=tt.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:S}),ht.coordinate().reflect("y").rotate(Math.PI*0),H.data(dt),ht.data(yt));var Mt=Object(A.b)({},X,{chart:H,options:{widthRatio:ct,xField:ft,yField:bt[0],seriesField:l,interval:{color:St,style:pt}}});Object(p.c)(Mt);var $=Object(A.b)({},X,{chart:ht,options:{xField:ft,yField:bt[1],seriesField:l,widthRatio:ct,interval:{color:St,style:pt}}});return Object(p.c)($),X}function s(X){var tt,nt,vt,ft=X.options,bt=X.chart,St=ft.xAxis,pt=ft.yAxis,ct=ft.xField,zt=ft.yField,Nt=Object(A.d)(bt,m),wt=Object(A.d)(bt,S),H={};return Object(e.keys)((ft==null?void 0:ft.meta)||{}).map(function(ht){Object(e.get)(ft==null?void 0:ft.meta,[ht,"alias"])&&(H[ht]=ft.meta[ht].alias)}),bt.scale((tt={},tt[l]={sync:!0,formatter:function(dt){return Object(e.get)(H,dt,dt)}},tt)),Object(i.f)((nt={},nt[ct]=St,nt[zt[0]]=pt[zt[0]],nt))(Object(A.b)({},X,{chart:Nt})),Object(i.f)((vt={},vt[ct]=St,vt[zt[1]]=pt[zt[1]],vt))(Object(A.b)({},X,{chart:wt})),X}function d(X){var tt=X.chart,nt=X.options,vt=nt.xAxis,ft=nt.yAxis,bt=nt.xField,St=nt.yField,pt=nt.layout,ct=Object(A.d)(tt,m),zt=Object(A.d)(tt,S);return zt.axis(bt,!1),vt===!1?ct.axis(bt,!1):ct.axis(bt,Object(at.a)({position:j(pt)?"top":"bottom"},vt)),ft===!1?(ct.axis(St[0],!1),zt.axis(St[1],!1)):(ct.axis(St[0],ft[St[0]]),zt.axis(St[1],ft[St[1]])),tt.__axisPosition={position:ct.getOptions().axes[bt].position,layout:pt},X}function E(X){var tt=X.chart;return Object(i.c)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(i.c)(Object(A.b)({},X,{chart:Object(A.d)(tt,S)})),X}function O(X){var tt=X.chart,nt=X.options,vt=nt.yField,ft=nt.yAxis;return Object(i.e)(Object(A.b)({},X,{chart:Object(A.d)(tt,m),options:{yAxis:ft[vt[0]]}})),Object(i.e)(Object(A.b)({},X,{chart:Object(A.d)(tt,S),options:{yAxis:ft[vt[1]]}})),X}function C(X){var tt=X.chart;return Object(i.j)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(i.j)(Object(A.b)({},X,{chart:Object(A.d)(tt,S)})),X}function v(X){var tt=X.chart;return Object(i.a)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(i.a)(Object(A.b)({},X,{chart:Object(A.d)(tt,S)})),X}function x(X){var tt=X.chart,nt=X.options,vt=nt.label,ft=nt.yField,bt=Object(A.d)(tt,m),St=Object(A.d)(tt,S),pt=Object(A.c)(bt,"interval"),ct=Object(A.c)(St,"interval");if(!vt)pt.label(!1),ct.label(!1);else{var zt=vt.callback,Nt=Object(at.c)(vt,["callback"]);pt.label({fields:[ft[0]],callback:zt,cfg:Object(A.o)(Nt)}),ct.label({fields:[ft[1]],callback:zt,cfg:Object(A.o)(Nt)})}return X}function T(X){return Object(A.e)(n,s,d,O,C,x,i.k,E,v)(X)}var N=function(X){Object(at.b)(tt,X);function tt(){var nt=X!==null&&X.apply(this,arguments)||this;return nt.type="bidirectional-bar",nt}return tt.prototype.getDefaultOptions=function(){return Object(A.b)({},X.prototype.getDefaultOptions.call(this),{syncViewPadding:y})},tt.prototype.getSchemaAdaptor=function(){return T},tt}(a.a)},"7cv3":function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"c",function(){return A}),_.d(Gt,"a",function(){return e});var at=_("iTfj"),a="x",A="y",e={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(p,m){return""+Object(at.get)(m,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}}},"7s0d":function(Gn,Gt,_){"use strict";var at=_("FH2j");_.d(Gt,"getAdjust",function(){return at.getAdjust});var a=_("Qci9"),A=_("lOPJ"),e=_("KavR"),i=_("8FoI"),p=_("96lr"),m=_("WbAE"),S=_.n(m);Object(at.registerAdjust)("Dodge",A.a),Object(at.registerAdjust)("Jitter",e.a),Object(at.registerAdjust)("Stack",i.a),Object(at.registerAdjust)("Symmetric",p.a)},"8FoI":function(Gn,Gt,_){"use strict";var at=_("AA7f"),a=_("iTfj"),A=_("Qci9"),e=a.Cache,i=function(p){Object(at.b)(m,p);function m(S){var l=p.call(this,S)||this,M=S.adjustNames,j=M===void 0?["y"]:M,y=S.height,n=y===void 0?NaN:y,s=S.size,d=s===void 0?10:s,E=S.reverseOrder,O=E===void 0?!1:E;return l.adjustNames=j,l.height=n,l.size=d,l.reverseOrder=O,l}return m.prototype.process=function(S){var l=this,M=l.yField,j=l.reverseOrder,y=M?this.processStack(S):this.processOneDimStack(S);return j?this.reverse(y):y},m.prototype.reverse=function(S){return S.slice(0).reverse()},m.prototype.processStack=function(S){var l=this,M=l.xField,j=l.yField,y=l.reverseOrder,n=y?this.reverse(S):S,s=new e,d=new e;return n.map(function(E){return E.map(function(O){var C,v=a.get(O,M,0),x=a.get(O,[j]),T=v.toString();if(x=a.isArray(x)?x[1]:x,!a.isNil(x)){var N=x>=0?s:d;N.has(T)||N.set(T,0);var X=N.get(T),tt=x+X;return N.set(T,tt),Object(at.a)(Object(at.a)({},O),(C={},C[j]=[X,tt],C))}return O})})},m.prototype.processOneDimStack=function(S){var l=this,M=this,j=M.xField,y=M.height,n=M.reverseOrder,s="y",d=n?this.reverse(S):S,E=new e;return d.map(function(O){return O.map(function(C){var v,x=l.size,T=C[j],N=x*2/y;E.has(T)||E.set(T,N/2);var X=E.get(T);return E.set(T,X+N),Object(at.a)(Object(at.a)({},C),(v={},v[s]=X,v))})})},m}(A.a);Gt.a=i},"8vsG":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return M}),_.d(Gt,"b",function(){return Ut}),_.d(Gt,"c",function(){return m}),_.d(Gt,"d",function(){return Mn});var at={};_.r(at),_.d(at,"default",function(){return rt}),_.d(at,"assign",function(){return x}),_.d(at,"format",function(){return Mt}),_.d(at,"parse",function(){return $}),_.d(at,"defaultI18n",function(){return nt}),_.d(at,"setGlobalDateI18n",function(){return ft}),_.d(at,"setGlobalDateMasks",function(){return yt});var a=_("iTfj"),A={};function e(oe){return A[oe]}function i(oe,Kt){A[oe]=Kt}var p=function(){function oe(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return oe.prototype.translate=function(Kt){return Kt},oe.prototype.change=function(Kt){Object(a.assign)(this.__cfg__,Kt),this.init()},oe.prototype.clone=function(){return this.constructor(this.__cfg__)},oe.prototype.getTicks=function(){var Kt=this;return Object(a.map)(this.ticks,function(te,Oe){return Object(a.isObject)(te)?te:{text:Kt.getText(te,Oe),tickValue:te,value:Kt.scale(te)}})},oe.prototype.getText=function(Kt,te){var Oe=this.formatter,Qe=Oe?Oe(Kt,te):Kt;return Object(a.isNil)(Qe)||!Object(a.isFunction)(Qe.toString)?"":Qe.toString()},oe.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},oe.prototype.init=function(){Object(a.assign)(this,this.__cfg__),this.setDomain(),Object(a.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},oe.prototype.initCfg=function(){},oe.prototype.setDomain=function(){},oe.prototype.calculateTicks=function(){var Kt=this.tickMethod,te=[];if(Object(a.isString)(Kt)){var Oe=e(Kt);if(!Oe)throw new Error("There is no method to to calculate ticks!");te=Oe(this)}else Object(a.isFunction)(Kt)&&(te=Kt(this));return te},oe.prototype.rangeMin=function(){return Object(a.head)(this.range)},oe.prototype.rangeMax=function(){return Object(a.last)(this.range)},oe.prototype.calcPercent=function(Kt,te,Oe){return Object(a.isNumber)(Kt)?(Kt-te)/(Oe-te):NaN},oe.prototype.calcValue=function(Kt,te,Oe){return te+Kt*(Oe-te)},oe}(),m=p,S=_("mrSG"),l=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="cat",te.isCategory=!0,te.cache=new Map,te}return Kt.prototype.translate=function(te){if(this.cache.has(te))return this.cache.get(te);var Oe=Object(a.indexOf)(this.values,te);return Oe===-1&&(Oe=Object(a.isNumber)(te)?te:NaN),this.cache.set(te,Oe),Oe},Kt.prototype.scale=function(te){var Oe=this.translate(te),Qe=this.calcPercent(Oe,this.min,this.max);return this.calcValue(Qe,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(te){var Oe=this.max-this.min,Qe=this.calcPercent(te,this.rangeMin(),this.rangeMax()),On=Math.round(Oe*Qe)+this.min;return On<this.min||On>this.max?NaN:this.values[On]},Kt.prototype.getText=function(te){for(var Oe=[],Qe=1;Qe<arguments.length;Qe++)Oe[Qe-1]=arguments[Qe];var On=te;return Object(a.isNumber)(te)&&!this.values.includes(te)&&(On=this.values[On]),oe.prototype.getText.apply(this,Object(S.d)([On],Oe))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if(Object(a.isNil)(this.getConfig("min"))&&(this.min=0),Object(a.isNil)(this.getConfig("max"))){var te=this.values.length;this.max=te>1?te-1:te}this.cache&&this.cache.clear()},Kt}(m),M=l,j=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,y="[1-9]\\d?",n="\\d\\d",s="\\d{3}",d="\\d{4}",E="[^\\s]+",O=/\[([^]*?)\]/gm;function C(oe,Kt){for(var te=[],Oe=0,Qe=oe.length;Oe<Qe;Oe++)te.push(oe[Oe].substr(0,Kt));return te}var v=function(Kt){return function(te,Oe){var Qe=Oe[Kt].map(function(Vn){return Vn.toLowerCase()}),On=Qe.indexOf(te.toLowerCase());return On>-1?On:null}};function x(oe){for(var Kt=[],te=1;te<arguments.length;te++)Kt[te-1]=arguments[te];for(var Oe=0,Qe=Kt;Oe<Qe.length;Oe++){var On=Qe[Oe];for(var Vn in On)oe[Vn]=On[Vn]}return oe}var T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N=["January","February","March","April","May","June","July","August","September","October","November","December"],X=C(N,3),tt=C(T,3),nt={dayNamesShort:tt,dayNames:T,monthNamesShort:X,monthNames:N,amPm:["am","pm"],DoFn:function(Kt){return Kt+["th","st","nd","rd"][Kt%10>3?0:(Kt-Kt%10!=10?1:0)*Kt%10]}},vt=x({},nt),ft=function(Kt){return vt=x(vt,Kt)},bt=function(Kt){return Kt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},St=function(Kt,te){for(te===void 0&&(te=2),Kt=String(Kt);Kt.length<te;)Kt="0"+Kt;return Kt},pt={D:function(Kt){return String(Kt.getDate())},DD:function(Kt){return St(Kt.getDate())},Do:function(Kt,te){return te.DoFn(Kt.getDate())},d:function(Kt){return String(Kt.getDay())},dd:function(Kt){return St(Kt.getDay())},ddd:function(Kt,te){return te.dayNamesShort[Kt.getDay()]},dddd:function(Kt,te){return te.dayNames[Kt.getDay()]},M:function(Kt){return String(Kt.getMonth()+1)},MM:function(Kt){return St(Kt.getMonth()+1)},MMM:function(Kt,te){return te.monthNamesShort[Kt.getMonth()]},MMMM:function(Kt,te){return te.monthNames[Kt.getMonth()]},YY:function(Kt){return St(String(Kt.getFullYear()),4).substr(2)},YYYY:function(Kt){return St(Kt.getFullYear(),4)},h:function(Kt){return String(Kt.getHours()%12||12)},hh:function(Kt){return St(Kt.getHours()%12||12)},H:function(Kt){return String(Kt.getHours())},HH:function(Kt){return St(Kt.getHours())},m:function(Kt){return String(Kt.getMinutes())},mm:function(Kt){return St(Kt.getMinutes())},s:function(Kt){return String(Kt.getSeconds())},ss:function(Kt){return St(Kt.getSeconds())},S:function(Kt){return String(Math.round(Kt.getMilliseconds()/100))},SS:function(Kt){return St(Math.round(Kt.getMilliseconds()/10),2)},SSS:function(Kt){return St(Kt.getMilliseconds(),3)},a:function(Kt,te){return Kt.getHours()<12?te.amPm[0]:te.amPm[1]},A:function(Kt,te){return Kt.getHours()<12?te.amPm[0].toUpperCase():te.amPm[1].toUpperCase()},ZZ:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+St(Math.floor(Math.abs(te)/60)*100+Math.abs(te)%60,4)},Z:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+St(Math.floor(Math.abs(te)/60),2)+":"+St(Math.abs(te)%60,2)}},ct=function(Kt){return+Kt-1},zt=[null,y],Nt=[null,E],wt=["isPm",E,function(oe,Kt){var te=oe.toLowerCase();return te===Kt.amPm[0]?0:te===Kt.amPm[1]?1:null}],H=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(oe){var Kt=(oe+"").match(/([+-]|\d\d)/gi);if(Kt){var te=+Kt[1]*60+parseInt(Kt[2],10);return Kt[0]==="+"?te:-te}return 0}],ht={D:["day",y],DD:["day",n],Do:["day",y+E,function(oe){return parseInt(oe,10)}],M:["month",y,ct],MM:["month",n,ct],YY:["year",n,function(oe){var Kt=new Date,te=+(""+Kt.getFullYear()).substr(0,2);return+(""+(+oe>68?te-1:te)+oe)}],h:["hour",y,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",y],HH:["hour",n],m:["minute",y],mm:["minute",n],s:["second",y],ss:["second",n],YYYY:["year",d],S:["millisecond","\\d",function(oe){return+oe*100}],SS:["millisecond",n,function(oe){return+oe*10}],SSS:["millisecond",s],d:zt,dd:zt,ddd:Nt,dddd:Nt,MMM:["month",E,v("monthNamesShort")],MMMM:["month",E,v("monthNames")],a:wt,A:wt,ZZ:H,Z:H},dt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},yt=function(Kt){return x(dt,Kt)},Mt=function(Kt,te,Oe){if(te===void 0&&(te=dt.default),Oe===void 0&&(Oe={}),typeof Kt=="number"&&(Kt=new Date(Kt)),Object.prototype.toString.call(Kt)!=="[object Date]"||isNaN(Kt.getTime()))throw new Error("Invalid Date pass to format");te=dt[te]||te;var Qe=[];te=te.replace(O,function(Vn,Yn){return Qe.push(Yn),"@@@"});var On=x(x({},vt),Oe);return te=te.replace(j,function(Vn){return pt[Vn](Kt,On)}),te.replace(/@@@/g,function(){return Qe.shift()})};function $(oe,Kt,te){if(te===void 0&&(te={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=dt[Kt]||Kt,oe.length>1e3)return null;var Oe=new Date,Qe={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},On=[],Vn=[],Yn=Kt.replace(O,function(Ir,Lr){return Vn.push(bt(Lr)),"@@@"}),$e={},rn={};Yn=bt(Yn).replace(j,function(Ir){var Lr=ht[Ir],Pr=Lr[0],Dr=Lr[1],ri=Lr[3];if($e[Pr])throw new Error("Invalid format. "+Pr+" specified twice in format");return $e[Pr]=!0,ri&&(rn[ri]=!0),On.push(Lr),"("+Dr+")"}),Object.keys(rn).forEach(function(Ir){if(!$e[Ir])throw new Error("Invalid format. "+Ir+" is required in specified format")}),Yn=Yn.replace(/@@@/g,function(){return Vn.shift()});var on=oe.match(new RegExp(Yn,"i"));if(!on)return null;for(var $n=x(x({},vt),te),vr=1;vr<on.length;vr++){var ar=On[vr-1],rr=ar[0],Fr=ar[2],Ar=Fr?Fr(on[vr],$n):+on[vr];if(Ar==null)return null;Qe[rr]=Ar}Qe.isPm===1&&Qe.hour!=null&&+Qe.hour!=12?Qe.hour=+Qe.hour+12:Qe.isPm===0&&+Qe.hour==12&&(Qe.hour=0);for(var wr=new Date(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute,Qe.second,Qe.millisecond),xr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],vr=0,Er=xr.length;vr<Er;vr++)if($e[xr[vr][0]]&&Qe[xr[vr][0]]!==wr[xr[vr][1]]())return null;return Qe.timezoneOffset==null?wr:new Date(Date.UTC(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute-Qe.timezoneOffset,Qe.second,Qe.millisecond))}var lt={format:Mt,parse:$,defaultI18n:nt,setGlobalDateI18n:ft,setGlobalDateMasks:yt},rt=lt,z=function(oe){return function(Kt,te,Oe,Qe){for(var On=Object(a.isNil)(Oe)?0:Oe,Vn=Object(a.isNil)(Qe)?Kt.length:Qe;On<Vn;){var Yn=On+Vn>>>1;oe(Kt[Yn])>te?Vn=Yn:On=Yn+1}return On}},P="format";function Y(oe,Kt){var te=at[P]||rt[P];return te(oe,Kt)}function k(oe){return Object(a.isString)(oe)&&(oe.indexOf("T")>0?oe=new Date(oe).getTime():oe=new Date(oe.replace(/-/gi,"/")).getTime()),Object(a.isDate)(oe)&&(oe=oe.getTime()),oe}var h=1e3,g=60*h,B=60*g,V=24*B,q=V*31,it=V*365,ot=[["HH:mm:ss",h],["HH:mm:ss",h*10],["HH:mm:ss",h*30],["HH:mm",g],["HH:mm",g*10],["HH:mm",g*30],["HH",B],["HH",B*6],["HH",B*12],["YYYY-MM-DD",V],["YYYY-MM-DD",V*4],["YYYY-WW",V*7],["YYYY-MM",q],["YYYY-MM",q*4],["YYYY-MM",q*6],["YYYY",V*380]];function At(oe,Kt,te){var Oe=(Kt-oe)/te,Qe=z(function(Vn){return Vn[1]})(ot,Oe)-1,On=ot[Qe];return Qe<0?On=ot[0]:Qe>=ot.length&&(On=Object(a.last)(ot)),On}var gt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="timeCat",te}return Kt.prototype.translate=function(te){te=k(te);var Oe=this.values.indexOf(te);return Oe===-1&&(Object(a.isNumber)(te)&&te<this.values.length?Oe=te:Oe=NaN),Oe},Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te);if(Qe>-1){var On=this.values[Qe],Vn=this.formatter;return On=Vn?Vn(On,Oe):Y(On,this.mask),On}return te},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var te=this.values;Object(a.each)(te,function(Oe,Qe){te[Qe]=k(Oe)}),te.sort(function(Oe,Qe){return Oe-Qe}),oe.prototype.setDomain.call(this)},Kt}(M),mt=gt,Ot=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.isContinuous=!0,te}return Kt.prototype.scale=function(te){if(Object(a.isNil)(te))return NaN;var Oe=this.rangeMin(),Qe=this.rangeMax(),On=this.max,Vn=this.min;if(On===Vn)return Oe;var Yn=this.getScalePercent(te);return Oe+Yn*(Qe-Oe)},Kt.prototype.init=function(){oe.prototype.init.call(this);var te=this.ticks,Oe=Object(a.head)(te),Qe=Object(a.last)(te);Oe<this.min&&(this.min=Oe),Qe>this.max&&(this.max=Qe),Object(a.isNil)(this.minLimit)||(this.min=Oe),Object(a.isNil)(this.maxLimit)||(this.max=Qe)},Kt.prototype.setDomain=function(){var te=Object(a.getRange)(this.values),Oe=te.min,Qe=te.max;Object(a.isNil)(this.min)&&(this.min=Oe),Object(a.isNil)(this.max)&&(this.max=Qe),this.min>this.max&&(this.min=Oe,this.max=Qe)},Kt.prototype.calculateTicks=function(){var te=this,Oe=oe.prototype.calculateTicks.call(this);return this.nice||(Oe=Object(a.filter)(Oe,function(Qe){return Qe>=te.min&&Qe<=te.max})),Oe},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;return(te-Qe)/(Oe-Qe)},Kt.prototype.getInvertPercent=function(te){return(te-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(m),It=Ot,Dt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="linear",te.isLinear=!0,te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te);return this.min+Oe*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(It),Ut=Dt;function Ct(oe,Kt){var te=Math.E,Oe;return Kt>=0?Oe=Math.pow(te,Math.log(Kt)/oe):Oe=Math.pow(te,Math.log(-Kt)/oe)*-1,Oe}function Vt(oe,Kt){return oe===1?1:Math.log(Kt)/Math.log(oe)}function Ht(oe,Kt,te){Object(a.isNil)(te)&&(te=Math.max.apply(null,oe));var Oe=te;return Object(a.each)(oe,function(Qe){Qe>0&&Qe<Oe&&(Oe=Qe)}),Oe===te&&(Oe=te/Kt),Oe>1&&(Oe=1),Oe}var re=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="log",te}return Kt.prototype.invert=function(te){var Oe=this.base,Qe=Vt(Oe,this.max),On=this.rangeMin(),Vn=this.rangeMax()-On,Yn,$e=this.positiveMin;if($e){if(te===0)return 0;Yn=Vt(Oe,$e/Oe);var rn=1/(Qe-Yn)*Vn;if(te<rn)return te/rn*$e}else Yn=Vt(Oe,this.min);var on=(te-On)/Vn,$n=on*(Qe-Yn)+Yn;return Math.pow(Oe,$n)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){oe.prototype.setDomain.call(this);var te=this.min;if(te<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");te===0&&(this.positiveMin=Ht(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe||te<=0)return 0;var On=this.base,Vn=this.positiveMin;Vn&&(Qe=Vn*1/On);var Yn;return te<Vn?Yn=te/Vn/(Vt(On,Oe)-Vt(On,Qe)):Yn=(Vt(On,te)-Vt(On,Qe))/(Vt(On,Oe)-Vt(On,Qe)),Yn},Kt}(It),pe=re,ye=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="pow",te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te),Qe=this.exponent,On=Ct(Qe,this.max),Vn=Ct(Qe,this.min),Yn=Oe*(On-Vn)+Vn,$e=Yn>=0?1:-1;return Math.pow(Yn,Qe)*$e},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe)return 0;var On=this.exponent,Vn=(Ct(On,te)-Ct(On,Qe))/(Ct(On,Oe)-Ct(On,Qe));return Vn},Kt}(It),we=ye,Ne=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="time",te}return Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te),On=this.formatter;return On?On(Qe,Oe):Y(Qe,this.mask)},Kt.prototype.scale=function(te){var Oe=te;return(Object(a.isString)(Oe)||Object(a.isDate)(Oe))&&(Oe=this.translate(Oe)),oe.prototype.scale.call(this,Oe)},Kt.prototype.translate=function(te){return k(te)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var te=this.values,Oe=this.getConfig("min"),Qe=this.getConfig("max");if((!Object(a.isNil)(Oe)||!Object(a.isNumber)(Oe))&&(this.min=this.translate(this.min)),(!Object(a.isNil)(Qe)||!Object(a.isNumber)(Qe))&&(this.max=this.translate(this.max)),te&&te.length){var On=[],Vn=Infinity,Yn=Vn,$e=0;Object(a.each)(te,function(rn){var on=k(rn);if(isNaN(on))throw new TypeError("Invalid Time: "+rn+" in time scale!");Vn>on?(Yn=Vn,Vn=on):Yn>on&&(Yn=on),$e<on&&($e=on),On.push(on)}),te.length>1&&(this.minTickInterval=Yn-Vn),Object(a.isNil)(Oe)&&(this.min=Vn),Object(a.isNil)(Qe)&&(this.max=$e)}},Kt}(Ut),Ke=Ne,pn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantize",te}return Kt.prototype.invert=function(te){var Oe=this.ticks,Qe=Oe.length,On=this.getInvertPercent(te),Vn=Math.floor(On*(Qe-1));if(Vn>=Qe-1)return Object(a.last)(Oe);if(Vn<0)return Object(a.head)(Oe);var Yn=Oe[Vn],$e=Oe[Vn+1],rn=Vn/(Qe-1),on=(Vn+1)/(Qe-1);return Yn+(On-rn)/(on-rn)*($e-Yn)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var te=oe.prototype.calculateTicks.call(this);return this.nice||(Object(a.last)(te)!==this.max&&te.push(this.max),Object(a.head)(te)!==this.min&&te.unshift(this.min)),te},Kt.prototype.getScalePercent=function(te){var Oe=this.ticks;if(te<Object(a.head)(Oe))return 0;if(te>Object(a.last)(Oe))return 1;var Qe=0;return Object(a.each)(Oe,function(On,Vn){if(te>=On)Qe=Vn;else return!1}),Qe/(Oe.length-1)},Kt}(It),hn=pn,kn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantile",te}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(hn),Tn=kn,Rn={};function Mn(oe){return Rn[oe]}function Cn(oe,Kt){if(Mn(oe))throw new Error("type '"+oe+"' existed.");Rn[oe]=Kt}var _n=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="identity",te.isIdentity=!0,te}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(te){return this.values[0]!==te&&Object(a.isNumber)(te)?te:this.range[0]},Kt.prototype.invert=function(te){var Oe=this.range;return te<Oe[0]||te>Oe[1]?NaN:this.values[0]},Kt}(m),Kn=_n,tr=[1,5,2,2.5,4,3],or=[1,5,2,2.5,4,3,1.5,7,6,8,9],nr=Number.EPSILON*100;function er(oe,Kt){return(oe%Kt+Kt)%Kt}function Sr(oe,Kt,te,Oe,Qe,On){var Vn=Object(a.size)(Kt),Yn=Object(a.indexOf)(Kt,oe),$e=0,rn=er(Oe,On);return(rn<nr||On-rn<nr)&&Oe<=0&&Qe>=0&&($e=1),1-Yn/(Vn-1)-te+$e}function Vr(oe,Kt,te){var Oe=Object(a.size)(Kt),Qe=Object(a.indexOf)(Kt,oe),On=1;return 1-Qe/(Oe-1)-te+On}function ti(oe,Kt,te,Oe,Qe,On){var Vn=(oe-1)/(On-Qe),Yn=(Kt-1)/(Math.max(On,Oe)-Math.min(te,Qe));return 2-Math.max(Vn/Yn,Yn/Vn)}function hi(oe,Kt){return oe>=Kt?2-(oe-1)/(Kt-1):1}function Fi(oe,Kt,te,Oe){var Qe=Kt-oe;return 1-.5*(Math.pow(Kt-Oe,2)+Math.pow(oe-te,2))/Math.pow(.1*Qe,2)}function to(oe,Kt,te){var Oe=Kt-oe;if(te>Oe){var Qe=(te-Oe)/2;return 1-Math.pow(Qe,2)/Math.pow(.1*Oe,2)}return 1}function si(){return 1}function Ci(oe,Kt,te,Oe,Qe,On){if(te===void 0&&(te=5),Oe===void 0&&(Oe=!0),Qe===void 0&&(Qe=tr),On===void 0&&(On=[.25,.2,.5,.05]),typeof oe!="number"||typeof Kt!="number")return{min:0,max:0,ticks:[]};if(oe===Kt||te===1)return{min:oe,max:Kt,ticks:[oe]};for(var Vn={score:-2,lmin:0,lmax:0,lstep:0},Yn=1;Yn<Infinity;){for(var $e=0,rn=Qe;$e<rn.length;$e++){var on=rn[$e],$n=Vr(on,Qe,Yn);if(Number.isNaN($n))throw new Error("NaN");if(On[0]*$n+On[1]+On[2]+On[3]<Vn.score){Yn=Infinity;break}for(var vr=2;vr<Infinity;){var ar=hi(vr,te);if(On[0]*$n+On[1]+On[2]*ar+On[3]<Vn.score)break;for(var rr=(Kt-oe)/(vr+1)/Yn/on,Fr=Math.ceil(Math.log10(rr));Fr<Infinity;){var Ar=Yn*on*Math.pow(10,Fr),wr=to(oe,Kt,Ar*(vr-1));if(On[0]*$n+On[1]*wr+On[2]*ar+On[3]<Vn.score)break;var xr=Math.floor(Kt/Ar)*Yn-(vr-1)*Yn,Er=Math.ceil(oe/Ar)*Yn;if(xr>Er){Fr=Fr+1;continue}for(var Ir=xr;Ir<=Er;Ir=Ir+1){var Lr=Ir*(Ar/Yn),Pr=Lr+Ar*(vr-1),Dr=Ar,ri=Sr(on,Qe,Yn,Lr,Pr,Dr),vi=Fi(oe,Kt,Lr,Pr),ii=ti(vr,te,oe,Kt,Lr,Pr),Si=si(),_i=On[0]*ri+On[1]*vi+On[2]*ii+On[3]*Si;_i>Vn.score&&(!Oe||Lr<=oe&&Pr>=Kt)&&(Vn.lmin=Lr,Vn.lmax=Pr,Vn.lstep=Dr,Vn.score=_i)}Fr=Fr+1}vr=vr+1}}Yn=Yn+1}for(var Xi=Number.isInteger(Vn.lstep)?0:Math.ceil(Math.abs(Math.log10(Vn.lstep))),Bi=[],Di=Vn.lmin;Di<=Vn.lmax;Di+=Vn.lstep)Bi.push(Di);var ve=Xi?Object(a.map)(Bi,function(G){return Number.parseFloat(G.toFixed(Xi))}):Bi;return{min:Math.min(oe,Object(a.head)(ve)),max:Math.max(Kt,Object(a.last)(ve)),ticks:ve}}function Ui(oe){var Kt=oe.values,te=oe.tickInterval,Oe=oe.tickCount,Qe=Kt;if(Object(a.isNumber)(te))return Object(a.filter)(Qe,function(rn,on){return on%te==0});var On=oe.min,Vn=oe.max;if(Object(a.isNil)(On)&&(On=0),Object(a.isNil)(Vn)&&(Vn=Kt.length-1),Object(a.isNumber)(Oe)&&Oe<Vn-On){var Yn=Ci(On,Vn,Oe,!1,[1,2,5,3,4,7,6,8,9]).ticks,$e=Object(a.filter)(Yn,function(rn){return rn>=On&&rn<=Vn});return $e.map(function(rn){return Kt[rn]})}return Kt.slice(On,Vn+1)}function Li(oe){var Kt=oe.min,te=oe.max,Oe=oe.nice,Qe=oe.tickCount,On=new pr;return On.domain([Kt,te]),Oe&&On.nice(Qe),On.ticks(Qe)}var Vi=5,ro=Math.sqrt(50),jr=Math.sqrt(10),Ji=Math.sqrt(2),pr=function(){function oe(){this._domain=[0,1]}return oe.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},oe.prototype.nice=function(Kt){var te,Oe;Kt===void 0&&(Kt=Vi);var Qe=this._domain.slice(),On=0,Vn=this._domain.length-1,Yn=this._domain[On],$e=this._domain[Vn],rn;return $e<Yn&&(te=[$e,Yn],Yn=te[0],$e=te[1],Oe=[Vn,On],On=Oe[0],Vn=Oe[1]),rn=Br(Yn,$e,Kt),rn>0?(Yn=Math.floor(Yn/rn)*rn,$e=Math.ceil($e/rn)*rn,rn=Br(Yn,$e,Kt)):rn<0&&(Yn=Math.ceil(Yn*rn)/rn,$e=Math.floor($e*rn)/rn,rn=Br(Yn,$e,Kt)),rn>0?(Qe[On]=Math.floor(Yn/rn)*rn,Qe[Vn]=Math.ceil($e/rn)*rn,this.domain(Qe)):rn<0&&(Qe[On]=Math.ceil(Yn*rn)/rn,Qe[Vn]=Math.floor($e*rn)/rn,this.domain(Qe)),this},oe.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=Vi),Xr(this._domain[0],this._domain[this._domain.length-1],Kt||Vi)},oe}();function Xr(oe,Kt,te){var Oe,Qe=-1,On,Vn,Yn;if(Kt=+Kt,oe=+oe,te=+te,oe===Kt&&te>0)return[oe];if((Oe=Kt<oe)&&(On=oe,oe=Kt,Kt=On),(Yn=Br(oe,Kt,te))===0||!isFinite(Yn))return[];if(Yn>0)for(oe=Math.ceil(oe/Yn),Kt=Math.floor(Kt/Yn),Vn=new Array(On=Math.ceil(Kt-oe+1));++Qe<On;)Vn[Qe]=(oe+Qe)*Yn;else for(oe=Math.floor(oe*Yn),Kt=Math.ceil(Kt*Yn),Vn=new Array(On=Math.ceil(oe-Kt+1));++Qe<On;)Vn[Qe]=(oe-Qe)/Yn;return Oe&&Vn.reverse(),Vn}function Br(oe,Kt,te){var Oe=(Kt-oe)/Math.max(0,te),Qe=Math.floor(Math.log(Oe)/Math.LN10),On=Oe/Math.pow(10,Qe);return Qe>=0?(On>=ro?10:On>=jr?5:On>=Ji?2:1)*Math.pow(10,Qe):-Math.pow(10,-Qe)/(On>=ro?10:On>=jr?5:On>=Ji?2:1)}function Nr(oe,Kt,te){var Oe;return te==="ceil"?Oe=Math.ceil(oe/Kt):te==="floor"?Oe=Math.floor(oe/Kt):Oe=Math.round(oe/Kt),Oe*Kt}function Yr(oe,Kt,te){var Oe=Nr(oe,te,"floor"),Qe=Nr(Kt,te,"ceil");Oe=Object(a.fixedBase)(Oe,te),Qe=Object(a.fixedBase)(Qe,te);for(var On=[],Vn=Oe;Vn<=Qe;Vn=Vn+te){var Yn=Object(a.fixedBase)(Vn,te);On.push(Yn)}return{min:Oe,max:Qe,ticks:On}}function Kr(oe,Kt,te){var Oe,Qe=oe.minLimit,On=oe.maxLimit,Vn=oe.min,Yn=oe.max,$e=oe.tickCount,rn=$e===void 0?5:$e,on=Object(a.isNil)(Qe)?Object(a.isNil)(Kt)?Vn:Kt:Qe,$n=Object(a.isNil)(On)?Object(a.isNil)(te)?Yn:te:On;if(on>$n&&(Oe=[on,$n],$n=Oe[0],on=Oe[1]),rn<=2)return[on,$n];for(var vr=($n-on)/(rn-1),ar=[],rr=0;rr<rn;rr++)ar.push(on+vr*rr);return ar}function ni(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickInterval,Qe=oe.minLimit,On=oe.maxLimit,Vn=Li(oe);return!Object(a.isNil)(Qe)||!Object(a.isNil)(On)?Kr(oe,Object(a.head)(Vn),Object(a.last)(Vn)):Oe?Yr(Kt,te,Oe).ticks:Vn}function fi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.nice,On=oe.tickInterval,Vn=oe.minLimit,Yn=oe.maxLimit,$e=Ci(Kt,te,Oe,Qe).ticks;return!Object(a.isNil)(Vn)||!Object(a.isNil)(Yn)?Kr(oe,Object(a.head)($e),Object(a.last)($e)):On?Yr(Kt,te,On).ticks:$e}function $r(oe){var Kt=oe.base,te=oe.tickCount,Oe=oe.min,Qe=oe.max,On=oe.values,Vn,Yn=Vt(Kt,Qe);if(Oe>0)Vn=Math.floor(Vt(Kt,Oe));else{var $e=Ht(On,Kt,Qe);Vn=Math.floor(Vt(Kt,$e))}for(var rn=Yn-Vn,on=Math.ceil(rn/te),$n=[],vr=Vn;vr<Yn+on;vr=vr+on)$n.push(Math.pow(Kt,vr));return Oe<=0&&$n.unshift(0),$n}function ci(oe,Kt,te){te===void 0&&(te=5);var Oe={max:0,min:0,ticks:[]};if(oe===Kt)return{max:Kt,min:oe,ticks:[oe]};var Qe=1.5,On=.5+1.5*Qe,Vn=Kt-oe,Yn=Vn/te,$e=Math.pow(10,Math.floor(Math.log10(Yn))),rn=$e<1?Math.ceil(Math.abs(Math.log10($e))):0,on=$e;2*$e-Yn<Qe*(Yn-on)&&(on=2*$e,5*$e-Yn<On*(Yn-on)&&(on=5*$e,10*$e-Yn<Qe*(Yn-on)&&(on=10*$e)));var $n=Math.ceil(Kt/on),vr=Math.floor(oe/on);Oe.max=Math.max($n*on,Kt),Oe.min=Math.min(vr*on,oe);for(var ar=Number.parseFloat((vr*on).toFixed(rn));ar<Kt;)Oe.ticks.push(ar),ar+=on,rn&&(ar=Number.parseFloat(ar.toFixed(rn)));return Oe.ticks.push(ar),Oe}function Qr(oe){var Kt=oe.exponent,te=oe.tickCount,Oe=Math.ceil(Ct(Kt,oe.max)),Qe=Math.floor(Ct(Kt,oe.min)),On=ci(Qe,Oe,te).ticks;return On.map(function(Vn){var Yn=Vn>=0?1:-1;return Math.pow(Vn,Kt)*Yn})}function gi(oe,Kt){var te=oe.length*Kt;return Kt===1?oe[oe.length-1]:Kt===0?oe[0]:te%1!=0?oe[Math.ceil(te)-1]:oe.length%2==0?(oe[te-1]+oe[te])/2:oe[te]}function Oi(oe){var Kt=oe.tickCount,te=oe.values;if(!te||!te.length)return[];for(var Oe=te.slice().sort(function(Yn,$e){return Yn-$e}),Qe=[],On=0;On<Kt;On++){var Vn=On/(Kt-1);Qe.push(gi(Oe,Vn))}return Qe}function bi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.tickInterval,On=oe.minLimit,Vn=oe.maxLimit,Yn=ci(Kt,te,Oe).ticks;return!Object(a.isNil)(On)||!Object(a.isNil)(Vn)?Kr(oe,Object(a.head)(Yn),Object(a.last)(Yn)):Qe?Yr(Kt,te,Qe).ticks:Yn}function zi(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickInterval,On=oe.tickCount;if(Qe)On=Math.ceil((te-Kt)/Qe);else{Qe=At(Kt,te,On)[1];var Vn=(te-Kt)/Qe,Yn=Vn/On;Yn>1&&(Qe=Qe*Math.ceil(Yn)),Oe&&Qe<Oe&&(Qe=Oe)}for(var $e=[],rn=Kt;rn<te+Qe;rn+=Qe)$e.push(rn);return $e}function Qi(oe){var Kt=Ui(oe),te=Object(a.last)(oe.values);return te!==Object(a.last)(Kt)&&Kt.push(te),Kt}function io(oe){return new Date(oe).getFullYear()}function Wi(oe){return new Date(oe,0,1).getTime()}function Zi(oe){return new Date(oe).getMonth()}function Pi(oe,Kt){var te=io(oe),Oe=io(Kt),Qe=Zi(oe),On=Zi(Kt);return(Oe-te)*12+(On-Qe)%12}function no(oe,Kt){return new Date(oe,Kt,1).getTime()}function Mo(oe,Kt){return Math.ceil((Kt-oe)/V)}function ao(oe,Kt){return Math.ceil((Kt-oe)/B)}function uo(oe,Kt){return Math.ceil((Kt-oe)/(60*1e3))}function xo(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickCount,On=oe.tickInterval,Vn=[];On||(On=(te-Kt)/Qe,Oe&&On<Oe&&(On=Oe));var Yn=io(Kt);if(On>it)for(var $e=io(te),rn=Math.ceil(On/it),on=Yn;on<=$e+rn;on=on+rn)Vn.push(Wi(on));else if(On>q)for(var $n=Math.ceil(On/q),vr=Zi(Kt),ar=Pi(Kt,te),on=0;on<=ar+$n;on=on+$n)Vn.push(no(Yn,on+vr));else if(On>V)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),wr=rr.getDate(),xr=Math.ceil(On/V),Er=Mo(Kt,te),on=0;on<Er+xr;on=on+xr)Vn.push(new Date(Fr,Ar,wr+on).getTime());else if(On>B)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),xr=rr.getDate(),Ir=rr.getHours(),Lr=Math.ceil(On/B),Pr=ao(Kt,te),on=0;on<=Pr+Lr;on=on+Lr)Vn.push(new Date(Fr,Ar,xr,Ir+on).getTime());else if(On>g)for(var Dr=uo(Kt,te),ri=Math.ceil(On/g),on=0;on<=Dr+ri;on=on+ri)Vn.push(Kt+on*g);else{var vi=On;vi<h&&(vi=h);for(var ii=Math.floor(Kt/h)*h,Si=Math.ceil((te-Kt)/h),_i=Math.ceil(vi/h),on=0;on<Si+_i;on=on+_i)Vn.push(ii+on*h)}return Vn.length>=512&&console.warn("Notice: current ticks length("+Vn.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+On+") is too small, increase the value to solve the problem!"),Vn}i("cat",Ui),i("time-cat",Qi),i("wilkinson-extended",fi),i("r-pretty",bi),i("time",zi),i("time-pretty",xo),i("log",$r),i("pow",Qr),i("quantile",Oi),i("d3-linear",ni),Cn("cat",M),Cn("category",M),Cn("identity",Kn),Cn("linear",Ut),Cn("log",pe),Cn("pow",we),Cn("time",Ke),Cn("timeCat",mt),Cn("quantize",hn),Cn("quantile",Tn)},"96lr":function(Gn,Gt,_){"use strict";var at=_("AA7f"),a=_("iTfj"),A=_("Qci9"),e=function(i){Object(at.b)(p,i);function p(){return i!==null&&i.apply(this,arguments)||this}return p.prototype.process=function(m){var S=a.flatten(m),l=this,M=l.xField,j=l.yField,y=this.getXValuesMaxMap(S),n=Math.max.apply(Math,Object.keys(y).map(function(s){return y[s]}));return a.map(m,function(s){return a.map(s,function(d){var E,O,C=d[j],v=d[M];if(a.isArray(C)){var x=(n-y[v])/2;return Object(at.a)(Object(at.a)({},d),(E={},E[j]=a.map(C,function(N){return x+N}),E))}var T=(n-C)/2;return Object(at.a)(Object(at.a)({},d),(O={},O[j]=[T,C+T],O))})})},p.prototype.getXValuesMaxMap=function(m){var S=this,l=this,M=l.xField,j=l.yField,y=a.groupBy(m,function(n){return n[M]});return a.mapValues(y,function(n){return S.getDimMaxValue(n,j)})},p.prototype.getDimMaxValue=function(m,S){var l=a.map(m,function(j){return a.get(j,S,[])}),M=a.flatten(l);return Math.max.apply(Math,M)},p}(A.a);Gt.a=e},"9eUa":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return m}),_.d(Gt,"d",function(){return S}),_.d(Gt,"b",function(){return l}),_.d(Gt,"c",function(){return j}),_.d(Gt,"e",function(){return s}),_.d(Gt,"h",function(){return d}),_.d(Gt,"f",function(){return O}),_.d(Gt,"g",function(){return C});var at=_("iTfj"),a=_("r0DC"),A=_("nCnq"),e=_("cyZq"),i=_("nycV"),p={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function m(v,x){var T=x.attr();for(var N in T){var X=T[N],tt=p[N]?p[N]:N;tt==="matrix"&&X?v.transform(X[0],X[1],X[3],X[4],X[6],X[7]):tt==="lineDash"&&v.setLineDash?Object(at.isArray)(X)&&v.setLineDash(X):(tt==="strokeStyle"||tt==="fillStyle"?X=Object(a.b)(v,x,X):tt==="globalAlpha"&&(X=X*v.globalAlpha),v[tt]=X)}}function S(v,x,T){for(var N=0;N<x.length;N++){var X=x[N];X.cfg.visible?X.draw(v,T):X.skipDraw()}}function l(v,x,T){var N=v.get("refreshElements");Object(at.each)(N,function(X){if(X!==v)for(var tt=X.cfg.parent;tt&&tt!==v&&!tt.cfg.refresh;)tt.cfg.refresh=!0,tt=tt.cfg.parent}),N[0]===v?y(x,T):M(x,T)}function M(v,x){for(var T=0;T<v.length;T++){var N=v[T];if(N.cfg.visible)if(N.cfg.hasChanged)N.cfg.refresh=!0,N.isGroup()&&y(N.cfg.children,x);else if(N.cfg.refresh)N.isGroup()&&M(N.cfg.children,x);else{var X=n(N,x);N.cfg.refresh=X,X&&N.isGroup()&&M(N.cfg.children,x)}}}function j(v){for(var x=0;x<v.length;x++){var T=v[x];T.cfg.hasChanged=!1,T.isGroup()&&!T.destroyed&&j(T.cfg.children)}}function y(v,x){for(var T=0;T<v.length;T++){var N=v[T];N.cfg.refresh=!0,N.isGroup()&&y(N.get("children"),x)}}function n(v,x){var T=v.cfg.cacheCanvasBBox,N=v.cfg.isInView&&T&&Object(e.f)(T,x);return N}function s(v,x,T,N){var X=T.path,tt=T.startArrow,nt=T.endArrow;if(!!X){var vt=[0,0],ft=[0,0],bt={dx:0,dy:0};x.beginPath();for(var St=0;St<X.length;St++){var pt=X[St],ct=pt[0];if(St===0&&tt&&tt.d){var zt=v.getStartTangent();bt=i.c(zt[0][0],zt[0][1],zt[1][0],zt[1][1],tt.d)}else if(St===X.length-2&&X[St+1][0]==="Z"&&nt&&nt.d){var Nt=X[St+1];if(Nt[0]==="Z"){var zt=v.getEndTangent();bt=i.c(zt[0][0],zt[0][1],zt[1][0],zt[1][1],nt.d)}}else if(St===X.length-1&&nt&&nt.d&&X[0]!=="Z"){var zt=v.getEndTangent();bt=i.c(zt[0][0],zt[0][1],zt[1][0],zt[1][1],nt.d)}var wt=bt.dx,H=bt.dy;switch(ct){case"M":x.moveTo(pt[1]-wt,pt[2]-H),ft=[pt[1],pt[2]];break;case"L":x.lineTo(pt[1]-wt,pt[2]-H);break;case"Q":x.quadraticCurveTo(pt[1],pt[2],pt[3]-wt,pt[4]-H);break;case"C":x.bezierCurveTo(pt[1],pt[2],pt[3],pt[4],pt[5]-wt,pt[6]-H);break;case"A":{var ht=void 0;N?(ht=N[St],ht||(ht=Object(A.a)(vt,pt),N[St]=ht)):ht=Object(A.a)(vt,pt);var dt=ht.cx,yt=ht.cy,Mt=ht.rx,$=ht.ry,lt=ht.startAngle,rt=ht.endAngle,z=ht.xRotation,P=ht.sweepFlag;if(x.ellipse)x.ellipse(dt,yt,Mt,$,z,lt,rt,1-P);else{var Y=Mt>$?Mt:$,k=Mt>$?1:Mt/$,h=Mt>$?$/Mt:1;x.translate(dt,yt),x.rotate(z),x.scale(k,h),x.arc(0,0,Y,lt,rt,1-P),x.scale(1/k,1/h),x.rotate(-z),x.translate(-dt,-yt)}break}case"Z":x.closePath();break;default:break}if(ct==="Z")vt=ft;else{var g=pt.length;vt=[pt[g-2],pt[g-1]]}}}}function d(v,x){var T=v.get("canvas");T&&(x==="remove"&&(v._cacheCanvasBBox=v.get("cacheCanvasBBox")),v.get("hasChanged")||(v.set("hasChanged",!0),v.cfg.parent&&v.cfg.parent.get("hasChanged")||(T.refreshElement(v,x,T),T.get("autoDraw")&&T.draw())))}function E(v){var x;if(v.destroyed)x=v._cacheCanvasBBox;else{var T=v.get("cacheCanvasBBox"),N=T&&!!(T.width&&T.height),X=v.getCanvasBBox(),tt=X&&!!(X.width&&X.height);N&&tt?x=Object(e.l)(T,X):N?x=T:tt&&(x=X)}return x}function O(v){if(!v.length)return null;var x=[],T=[],N=[],X=[];return Object(at.each)(v,function(tt){var nt=E(tt);nt&&(x.push(nt.minX),T.push(nt.minY),N.push(nt.maxX),X.push(nt.maxY))}),{minX:Math.min.apply(null,x),minY:Math.min.apply(null,T),maxX:Math.max.apply(null,N),maxY:Math.max.apply(null,X)}}function C(v,x){return!v||!x||!Object(e.f)(v,x)?null:{minX:Math.max(v.minX,x.minX),minY:Math.max(v.minY,x.minY),maxX:Math.min(v.maxX,x.maxX),maxY:Math.min(v.maxY,x.maxY)}}},AA7f:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"a",function(){return A});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(vt,ft){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,St){bt.__proto__=St}||function(bt,St){for(var pt in St)St.hasOwnProperty(pt)&&(bt[pt]=St[pt])},at(vt,ft)};function a(nt,vt){at(nt,vt);function ft(){this.constructor=nt}nt.prototype=vt===null?Object.create(vt):(ft.prototype=vt.prototype,new ft)}var A=function(){return A=Object.assign||function(ft){for(var bt,St=1,pt=arguments.length;St<pt;St++){bt=arguments[St];for(var ct in bt)Object.prototype.hasOwnProperty.call(bt,ct)&&(ft[ct]=bt[ct])}return ft},A.apply(this,arguments)};function e(nt,vt){var ft={};for(var bt in nt)Object.prototype.hasOwnProperty.call(nt,bt)&&vt.indexOf(bt)<0&&(ft[bt]=nt[bt]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,bt=Object.getOwnPropertySymbols(nt);St<bt.length;St++)vt.indexOf(bt[St])<0&&Object.prototype.propertyIsEnumerable.call(nt,bt[St])&&(ft[bt[St]]=nt[bt[St]]);return ft}function i(nt,vt,ft,bt){var St=arguments.length,pt=St<3?vt:bt===null?bt=Object.getOwnPropertyDescriptor(vt,ft):bt,ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pt=Reflect.decorate(nt,vt,ft,bt);else for(var zt=nt.length-1;zt>=0;zt--)(ct=nt[zt])&&(pt=(St<3?ct(pt):St>3?ct(vt,ft,pt):ct(vt,ft))||pt);return St>3&&pt&&Object.defineProperty(vt,ft,pt),pt}function p(nt,vt){return function(ft,bt){vt(ft,bt,nt)}}function m(nt,vt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,vt)}function S(nt,vt,ft,bt){function St(pt){return pt instanceof ft?pt:new ft(function(ct){ct(pt)})}return new(ft||(ft=Promise))(function(pt,ct){function zt(H){try{wt(bt.next(H))}catch(ht){ct(ht)}}function Nt(H){try{wt(bt.throw(H))}catch(ht){ct(ht)}}function wt(H){H.done?pt(H.value):St(H.value).then(zt,Nt)}wt((bt=bt.apply(nt,vt||[])).next())})}function l(nt,vt){var ft={label:0,sent:function(){if(pt[0]&1)throw pt[1];return pt[1]},trys:[],ops:[]},bt,St,pt,ct;return ct={next:zt(0),throw:zt(1),return:zt(2)},typeof Symbol=="function"&&(ct[Symbol.iterator]=function(){return this}),ct;function zt(wt){return function(H){return Nt([wt,H])}}function Nt(wt){if(bt)throw new TypeError("Generator is already executing.");for(;ft;)try{if(bt=1,St&&(pt=wt[0]&2?St.return:wt[0]?St.throw||((pt=St.return)&&pt.call(St),0):St.next)&&!(pt=pt.call(St,wt[1])).done)return pt;switch(St=0,pt&&(wt=[wt[0]&2,pt.value]),wt[0]){case 0:case 1:pt=wt;break;case 4:return ft.label++,{value:wt[1],done:!1};case 5:ft.label++,St=wt[1],wt=[0];continue;case 7:wt=ft.ops.pop(),ft.trys.pop();continue;default:if(pt=ft.trys,!(pt=pt.length>0&&pt[pt.length-1])&&(wt[0]===6||wt[0]===2)){ft=0;continue}if(wt[0]===3&&(!pt||wt[1]>pt[0]&&wt[1]<pt[3])){ft.label=wt[1];break}if(wt[0]===6&&ft.label<pt[1]){ft.label=pt[1],pt=wt;break}if(pt&&ft.label<pt[2]){ft.label=pt[2],ft.ops.push(wt);break}pt[2]&&ft.ops.pop(),ft.trys.pop();continue}wt=vt.call(nt,ft)}catch(H){wt=[6,H],St=0}finally{bt=pt=0}if(wt[0]&5)throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}}function M(nt,vt,ft,bt){bt===void 0&&(bt=ft),nt[bt]=vt[ft]}function j(nt,vt){for(var ft in nt)ft!=="default"&&!vt.hasOwnProperty(ft)&&(vt[ft]=nt[ft])}function y(nt){var vt=typeof Symbol=="function"&&Symbol.iterator,ft=vt&&nt[vt],bt=0;if(ft)return ft.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&bt>=nt.length&&(nt=void 0),{value:nt&&nt[bt++],done:!nt}}};throw new TypeError(vt?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(nt,vt){var ft=typeof Symbol=="function"&&nt[Symbol.iterator];if(!ft)return nt;var bt=ft.call(nt),St,pt=[],ct;try{for(;(vt===void 0||vt-- >0)&&!(St=bt.next()).done;)pt.push(St.value)}catch(zt){ct={error:zt}}finally{try{St&&!St.done&&(ft=bt.return)&&ft.call(bt)}finally{if(ct)throw ct.error}}return pt}function s(){for(var nt=[],vt=0;vt<arguments.length;vt++)nt=nt.concat(n(arguments[vt]));return nt}function d(){for(var nt=0,vt=0,ft=arguments.length;vt<ft;vt++)nt+=arguments[vt].length;for(var bt=Array(nt),St=0,vt=0;vt<ft;vt++)for(var pt=arguments[vt],ct=0,zt=pt.length;ct<zt;ct++,St++)bt[St]=pt[ct];return bt}function E(nt){return this instanceof E?(this.v=nt,this):new E(nt)}function O(nt,vt,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=ft.apply(nt,vt||[]),St,pt=[];return St={},ct("next"),ct("throw"),ct("return"),St[Symbol.asyncIterator]=function(){return this},St;function ct(dt){bt[dt]&&(St[dt]=function(yt){return new Promise(function(Mt,$){pt.push([dt,yt,Mt,$])>1||zt(dt,yt)})})}function zt(dt,yt){try{Nt(bt[dt](yt))}catch(Mt){ht(pt[0][3],Mt)}}function Nt(dt){dt.value instanceof E?Promise.resolve(dt.value.v).then(wt,H):ht(pt[0][2],dt)}function wt(dt){zt("next",dt)}function H(dt){zt("throw",dt)}function ht(dt,yt){dt(yt),pt.shift(),pt.length&&zt(pt[0][0],pt[0][1])}}function C(nt){var vt,ft;return vt={},bt("next"),bt("throw",function(St){throw St}),bt("return"),vt[Symbol.iterator]=function(){return this},vt;function bt(St,pt){vt[St]=nt[St]?function(ct){return(ft=!ft)?{value:E(nt[St](ct)),done:St==="return"}:pt?pt(ct):ct}:pt}}function v(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=nt[Symbol.asyncIterator],ft;return vt?vt.call(nt):(nt=typeof y=="function"?y(nt):nt[Symbol.iterator](),ft={},bt("next"),bt("throw"),bt("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function bt(pt){ft[pt]=nt[pt]&&function(ct){return new Promise(function(zt,Nt){ct=nt[pt](ct),St(zt,Nt,ct.done,ct.value)})}}function St(pt,ct,zt,Nt){Promise.resolve(Nt).then(function(wt){pt({value:wt,done:zt})},ct)}}function x(nt,vt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:vt}):nt.raw=vt,nt}function T(nt){if(nt&&nt.__esModule)return nt;var vt={};if(nt!=null)for(var ft in nt)Object.hasOwnProperty.call(nt,ft)&&(vt[ft]=nt[ft]);return vt.default=nt,vt}function N(nt){return nt&&nt.__esModule?nt:{default:nt}}function X(nt,vt){if(!vt.has(nt))throw new TypeError("attempted to get private field on non-instance");return vt.get(nt)}function tt(nt,vt,ft){if(!vt.has(nt))throw new TypeError("attempted to set private field on non-instance");return vt.set(nt,ft),ft}},APlK:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"c",function(){return A}),_.d(Gt,"a",function(){return e});var at=_("c+wO");function a(i,p){var m=i.cfg.el,S=i.attr(),l={dx:S.shadowOffsetX,dy:S.shadowOffsetY,blur:S.shadowBlur,color:S.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)m.removeAttribute("filter");else{var M=p.find("filter",l);M||(M=p.addShadow(l)),m.setAttribute("filter","url(#"+M+")")}}function A(i){var p=i.attr().matrix;if(p){for(var m=i.cfg.el,S=[],l=0;l<9;l+=3)S.push(p[l]+","+p[l+1]);S=S.join(","),S.indexOf("NaN")===-1?m.setAttribute("transform","matrix("+S+")"):console.warn("invalid matrix:",p)}}function e(i,p){var m=i.getClip(),S=i.get("el");if(!m)S.removeAttribute("clip-path");else if(m&&!S.hasAttribute("clip-path")){Object(at.a)(m),m.createPath(p);var l=p.addClip(m);S.setAttribute("clip-path","url(#"+l+")")}}},B0vJ:function(Gn,Gt){},"B2d+":function(Gn,Gt){},B3DA:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return A});var at=_("iTfj"),a=_("F/eT");function A(e){var i=Object(at.clamp)(Object(a.a)(e)?e:0,0,1);return[{type:"current",percent:i},{type:"target",percent:1-i}]}},"B6l+":function(Gn,Gt,_){var at=_("Sq3C"),a=_("Z1HP"),A=_("Sxd8"),e=_("dt0z");function i(p,m,S){p=e(p),m=A(m);var l=m?a(p):0;return m&&l<m?p+at(m-l,S):p}Gn.exports=i},BYeR:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return s});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("w02o"),p=_("tKoa");function m(d){var E=d.data,O=d.xField,C=d.measureField,v=d.rangeField,x=d.targetField,T=d.layout,N=[],X=[];E.forEach(function(vt,ft){var bt;vt[v].sort(function(St,pt){return St-pt}),vt[v].forEach(function(St,pt){var ct,zt=pt===0?St:vt[v][pt]-vt[v][pt-1];N.push((ct={rKey:v+"_"+pt},ct[O]=O?vt[O]:String(ft),ct[v]=zt,ct))}),vt[C].forEach(function(St,pt){var ct;N.push((ct={mKey:vt[C].length>1?C+"_"+pt:""+C},ct[O]=O?vt[O]:String(ft),ct[C]=St,ct))}),N.push((bt={tKey:""+x},bt[O]=O?vt[O]:String(ft),bt[x]=vt[x],bt)),X.push(vt[v],vt[C],vt[x])});var tt=Math.min.apply(Math,X.flat(Infinity)),nt=Math.max.apply(Math,X.flat(Infinity));return tt=tt>0?0:tt,T==="vertical"&&N.reverse(),{min:tt,max:nt,ds:N}}function S(d){var E=d.chart,O=d.options,C=O.bulletStyle,v=O.targetField,x=O.rangeField,T=O.measureField,N=O.xField,X=O.color,tt=O.layout,nt=O.size,vt=O.label,ft=m(O),bt=ft.min,St=ft.max,pt=ft.ds;E.data(pt);var ct=Object(A.b)({},d,{options:{xField:N,yField:x,seriesField:"rKey",isStack:!0,label:Object(e.get)(vt,"range"),interval:{color:Object(e.get)(X,"range"),style:Object(e.get)(C,"range"),size:Object(e.get)(nt,"range")}}});Object(p.c)(ct),E.geometries[0].tooltip(!1);var zt=Object(A.b)({},d,{options:{xField:N,yField:T,seriesField:"mKey",isStack:!0,label:Object(e.get)(vt,"measure"),interval:{color:Object(e.get)(X,"measure"),style:Object(e.get)(C,"measure"),size:Object(e.get)(nt,"measure")}}});Object(p.c)(zt);var Nt=Object(A.b)({},d,{options:{xField:N,yField:v,seriesField:"tKey",label:Object(e.get)(vt,"target"),point:{color:Object(e.get)(X,"target"),style:Object(e.get)(C,"target"),size:Object(e.get)(nt,"target")/2,shape:tt==="horizontal"?"line":"hyphen"}}});return Object(p.e)(Nt),tt==="horizontal"&&E.coordinate().transpose(),Object(at.a)(Object(at.a)({},d),{ext:{data:{min:bt,max:St}}})}function l(d){var E,O,C=d.options,v=d.ext,x=C.xAxis,T=C.yAxis,N=C.targetField,X=C.rangeField,tt=C.measureField,nt=C.xField,vt=v.data;return Object(A.e)(Object(i.f)((E={},E[nt]=x,E[tt]=T,E),(O={},O[tt]={min:vt==null?void 0:vt.min,max:vt==null?void 0:vt.max},O[N]={sync:""+tt},O[X]={sync:""+tt},O)))(d)}function M(d){var E=d.chart,O=d.options,C=O.xAxis,v=O.yAxis,x=O.xField,T=O.measureField,N=O.rangeField,X=O.targetField;return E.axis(""+N,!1),E.axis(""+X,!1),C===!1?E.axis(""+x,!1):E.axis(""+x,C),v===!1?E.axis(""+T,!1):E.axis(""+T,v),d}function j(d){var E=d.chart,O=d.options,C=O.legend;return E.removeInteraction("legend-filter"),E.legend(C),E.legend("rKey",!1),E.legend("mKey",!1),E.legend("tKey",!1),d}function y(d){var E=d.chart,O=d.options,C=O.label,v=O.measureField,x=O.targetField,T=O.rangeField,N=E.geometries,X=N[0],tt=N[1],nt=N[2];return Object(e.get)(C,"range")?X.label(""+T,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.range))):X.label(!1),Object(e.get)(C,"measure")?tt.label(""+v,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.measure))):tt.label(!1),Object(e.get)(C,"target")?nt.label(""+x,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(C.target))):nt.label(!1),d}function n(d){Object(A.e)(S,l,M,j,i.j,y,i.k,i.c,i.a)(d)}var s=function(d){Object(at.b)(E,d);function E(){var O=d!==null&&d.apply(this,arguments)||this;return O.type="bullet",O}return E.prototype.changeData=function(O){this.updateOption({data:O});var C=m(this.options),v=C.min,x=C.max,T=C.ds;l({options:this.options,ext:{data:{min:v,max:x}},chart:this.chart}),this.chart.changeData(T)},E.prototype.getSchemaAdaptor=function(){return n},E.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}})},E}(a.a)},BgvD:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return M}),_.d(Gt,"a",function(){return n});var at=_("iTfj"),a="\u2026";function A(s){for(var d=0,E=0;E<s.length;E++)d+=e(s,E);return d}function e(s,d){return s.charCodeAt(d)>0&&s.charCodeAt(d)<128?1:2}function i(s,d,E){E===void 0&&(E="tail");var O=s.length,C="";if(E==="tail"){for(var v=0,x=0;v<d;){var T=e(s,x);if(v+T<=d)C+=s[x],v+=e(s,x),x++;else break}C+=a}else if(E==="head"){for(var v=0,x=O-1;v<d;){var T=e(s,x);if(v+T<=d)C+=s[x],v+=e(s,x),x--;else break}C=a+C}else{for(var N="",X="",v=0,tt=0,nt=O-1;v<d;){var vt=e(s,tt),ft=!1;vt+v<=d&&(N+=s[tt],tt++,v+=vt,ft=!0);var bt=e(s,nt);if(bt+v<=d&&(X=s[nt]+X,v+=bt,nt--,ft=!0),!ft)break}C=N+a+X}return C}var p="\u2026",m=2,S=400;function l(s){for(var d=s.map(function(N){var X=N.attr("text");return Object(at.isNil)(X)?"":""+X}),E=0,O=0,C=0;C<d.length;C+=1){for(var v=0,x=0;x<=d[C].length;x+=1){var T=d[C].charCodeAt(x);T>=19968&&T<=40869?v+=2:v+=1}v>E&&(E=v,O=C)}return s[O].getBBox().width}function M(s){if(s.length>S)return l(s);var d=0;return Object(at.each)(s,function(E){var O=E.getBBox(),C=O.width;d<C&&(d=C)}),d}function j(s,d){var E=d.getCanvasBBox();return s?E.width:E.height}function y(s,d){return s.getBBox().width<d}function n(s,d,E,O){O===void 0&&(O="tail");var C=d.attr("text"),v=j(s,d),x=A(C),T=!1;if(E<v){var N=Math.floor(E/v*x)-m,X=void 0;N>=0?X=i(C,N,O):X=p,X&&(d.attr("text",X),T=!0)}return T?d.set("tip",C):d.set("tip",null),T}},BwSJ:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return d});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj");function i(E,O){var C=Math.floor(E/O);return[O*C,O*(C+1)]}function p(E){return Math.ceil(Math.log(E.length)/Math.LN2)+1}function m(E,O,C,v,x){var T=Object(e.clone)(E);Object(e.sortBy)(T,O);var N=Object(e.valuesOfKey)(T,O),X=Object(e.getRange)(N),tt=X.max-X.min,nt=C;if(!C&&v&&(nt=tt/v),!C&&!v){var vt=p(N);nt=tt/vt}var ft={},bt=Object(e.groupBy)(T,x);Object(e.isEmpty)(bt)?Object(e.each)(T,function(pt){var ct=pt[O],zt=i(ct,nt),Nt=zt[0]+"-"+zt[1];Object(e.hasKey)(ft,Nt)||(ft[Nt]={range:zt,count:0}),ft[Nt].count+=1}):Object.keys(bt).forEach(function(pt){Object(e.each)(bt[pt],function(ct){var zt=ct[O],Nt=i(zt,nt),wt=Nt[0]+"-"+Nt[1],H=wt+"-"+pt;Object(e.hasKey)(ft,H)||(ft[H]={range:Nt,count:0},ft[H][x]=pt),ft[H].count+=1})});var St=[];return Object(e.each)(ft,function(pt){St.push(pt)}),St}var S=_("w02o"),l=_("tKoa");function M(E){var O=E.chart,C=E.options,v=C.data,x=C.binField,T=C.binNumber,N=C.binWidth,X=C.color,tt=C.stackField,nt=C.legend,vt=C.columnStyle,ft=m(v,x,N,T,tt);O.data(ft);var bt=Object(A.b)({},E,{options:{xField:"range",yField:"count",seriesField:tt,isStack:!0,interval:{color:X,style:vt}}});return Object(l.c)(bt),nt&&tt&&O.legend(tt,nt),E}function j(E){var O=E.options,C=O.xAxis,v=O.yAxis;return Object(A.e)(Object(S.f)({range:C,count:v}))(E)}function y(E){var O=E.chart,C=E.options,v=C.xAxis,x=C.yAxis;return v===!1?O.axis("range",!1):O.axis("range",v),x===!1?O.axis("count",!1):O.axis("count",x),E}function n(E){var O=E.chart,C=E.options,v=C.label,x=Object(A.c)(O,"interval");if(!v)x.label(!1);else{var T=v.callback,N=Object(at.c)(v,["callback"]);x.label({fields:["count"],callback:T,cfg:Object(A.o)(N)})}return E}function s(E){return Object(A.e)(M,j,y,S.j,n,S.k,S.c,S.a)(E)}var d=function(E){Object(at.b)(O,E);function O(){var C=E!==null&&E.apply(this,arguments)||this;return C.type="histogram",C}return O.prototype.changeData=function(C){this.updateOption({data:C});var v=this.options,x=v.binField,T=v.binNumber,N=v.binWidth,X=v.stackField;this.chart.changeData(m(C,x,N,T,X))},O.prototype.getDefaultOptions=function(){return Object(A.b)({},E.prototype.getDefaultOptions.call(this),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},O.prototype.getSchemaAdaptor=function(){return s},O}(a.a)},CSvP:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at});function at(){return 0}Gt.b=function(a){return function(){return a}}},"Ch+T":function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Html",function(){return E});var at=_("mrSG"),a=_("6UX8"),A=_("fIp6"),e=_("iTfj"),i=_("de35"),p=_("5UbV"),m=_("u60a"),S=_("L16w"),l,M=(l={},l[""+m.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:S.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},l[""+m.TITLE_CLASS]={marginBottom:"4px"},l[""+m.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},l[""+m.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},l[""+m.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},l[""+m.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},l[""+m.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l[""+m.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l);function j(O,C,v,x,T){var N={left:O<T.x,right:O+v>T.x+T.width,top:C<T.y,bottom:C+x>T.y+T.height};return N}function y(O,C,v,x,T,N){var X=O,tt=C;switch(N){case"left":X=O-x-v,tt=C-T/2;break;case"right":X=O+v,tt=C-T/2;break;case"top":X=O-x/2,tt=C-T-v;break;case"bottom":X=O-x/2,tt=C+v;break;default:X=O+v,tt=C-T-v;break}return{x:X,y:tt}}function n(O,C,v,x,T,N,X){var tt=y(O,C,v,x,T,N);if(X){var nt=j(tt.x,tt.y,x,T,X);N==="auto"?(nt.right&&(tt.x=Math.max(0,O-x-v)),nt.top&&(tt.y=Math.max(0,C-T-v))):N==="top"||N==="bottom"?(nt.left&&(tt.x=X.x),nt.right&&(tt.x=X.x+X.width-x),N==="top"&&nt.top&&(tt.y=C+v),N==="bottom"&&nt.bottom&&(tt.y=C-T-v)):(nt.top&&(tt.y=X.y),nt.bottom&&(tt.y=X.y+X.height-T),N==="left"&&nt.left&&(tt.x=O+v),N==="right"&&nt.right&&(tt.x=O-x-v))}return tt}function s(O,C){var v=!1;return Object(e.each)(C,function(x){if(Object(e.hasKey)(O,x))return v=!0,!1}),v}var d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+m.CONTAINER_CLASS+'"><div class="'+m.TITLE_CLASS+'"></div><ul class="'+m.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+m.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+m.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+m.NAME_CLASS+`">{name}</span>:
          <span class="`+m.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+m.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+m.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:m.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:M})},C.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},C.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},C.prototype.show=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!0),Object(A.e)(v,{visibility:"visible"}),this.setCrossHairsVisible(!0))},C.prototype.hide=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!1),Object(A.e)(v,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},C.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},C.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetPosition()},C.prototype.setCrossHairsVisible=function(v){var x=v?"":"none",T=this.get("xCrosshairDom"),N=this.get("yCrosshairDom");T&&Object(A.e)(T,{display:x}),N&&Object(A.e)(N,{display:x})},C.prototype.initContainer=function(){if(O.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var v=this.getHtmlContentNode();this.get("parent").appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()}},C.prototype.updateInner=function(v){this.get("customContent")?this.renderCustomContent():(s(v,["title","showTitle"])&&this.resetTitle(),Object(e.hasKey)(v,"items")&&this.renderItems()),O.prototype.updateInner.call(this,v)},C.prototype.initDom=function(){this.cacheDoms()},C.prototype.removeDom=function(){O.prototype.removeDom.call(this),this.clearCrosshairs()},C.prototype.resetPosition=function(){var v=this.get("x"),x=this.get("y"),T=this.get("offset"),N=this.getOffset(),X=N.offsetX,tt=N.offsetY,nt=this.get("position"),vt=this.get("region"),ft=this.getContainer(),bt=this.getBBox(),St=bt.width,pt=bt.height,ct;vt&&(ct=Object(p.k)(vt));var zt=n(v,x,T,St,pt,nt,ct);Object(A.e)(ft,{left:Object(p.l)(zt.x+X),top:Object(p.l)(zt.y+tt)}),this.resetCrosshairs()},C.prototype.renderCustomContent=function(){var v=this.getHtmlContentNode(),x=this.get("parent"),T=this.get("container");T&&T.parentNode===x?x.replaceChild(v,T):x.appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()},C.prototype.getHtmlContentNode=function(){var v,x=this.get("customContent");if(x){var T=x(this.get("title"),this.get("items"));Object(e.isElement)(T)?v=T:v=Object(A.b)(T)}return v},C.prototype.cacheDoms=function(){var v=this.getContainer(),x=v.getElementsByClassName(m.TITLE_CLASS)[0],T=v.getElementsByClassName(m.LIST_CLASS)[0];this.set("titleDom",x),this.set("listDom",T)},C.prototype.resetTitle=function(){var v=this.get("title"),x=this.get("showTitle");x&&v?this.setTitle(v):this.setTitle("")},C.prototype.setTitle=function(v){var x=this.get("titleDom");x&&(x.innerText=v)},C.prototype.resetCrosshairs=function(){var v=this.get("crosshairsRegion"),x=this.get("crosshairs");if(!v||!x)this.clearCrosshairs();else{var T=Object(p.k)(v),N=this.get("xCrosshairDom"),X=this.get("yCrosshairDom");x==="x"?(this.resetCrosshair("x",T),X&&(X.remove(),this.set("yCrosshairDom",null))):x==="y"?(this.resetCrosshair("y",T),N&&(N.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",T),this.resetCrosshair("y",T)),this.setCrossHairsVisible(this.get("visible"))}},C.prototype.resetCrosshair=function(v,x){var T=this.checkCrosshair(v),N=this.get(v);v==="x"?Object(A.e)(T,{left:Object(p.l)(N),top:Object(p.l)(x.y),height:Object(p.l)(x.height)}):Object(A.e)(T,{top:Object(p.l)(N),left:Object(p.l)(x.x),width:Object(p.l)(x.width)})},C.prototype.checkCrosshair=function(v){var x=v+"CrosshairDom",T=v+"CrosshairTpl",N="CROSSHAIR_"+v.toUpperCase(),X=m[N],tt=this.get(x),nt=this.get("parent");return tt||(tt=Object(A.b)(this.get(T)),this.applyStyle(X,tt),nt.appendChild(tt),this.set(x,tt)),tt},C.prototype.renderItems=function(){this.clearItemDoms();var v=this.get("items"),x=this.get("itemTpl"),T=this.get("listDom");T&&(Object(e.each)(v,function(N){var X=a.a.toCSSGradient(N.color),tt=Object(at.a)(Object(at.a)({},N),{color:X}),nt=Object(e.substitute)(x,tt),vt=Object(A.b)(nt);T.appendChild(vt)}),this.applyChildrenStyles(T,this.get("domStyles")))},C.prototype.clearItemDoms=function(){this.get("listDom")&&Object(p.a)(this.get("listDom"))},C.prototype.clearCrosshairs=function(){var v=this.get("xCrosshairDom"),x=this.get("yCrosshairDom");v&&v.remove(),x&&x.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},C}(i.a),E=d},CmcY:function(Gn,Gt,_){"use strict";var at=_("nKUr"),a=_("q1tI"),A=_("ek7X"),e=_("0NbB"),i=function(j){var y=j.direction,n=y===void 0?"up":y;return Object(at.jsx)(at.Fragment,{children:n==="up"?Object(at.jsx)(A.a,{className:"up"}):Object(at.jsx)(e.a,{className:"down"})})},p=i,m=_("5nFI"),S=function(j){var y=j.title,n=j.value,s=j.percent,d=j.precision,E=d===void 0?0:d,O=j.text,C=O===void 0?"\u6628\u65E5":O,v=s>=0?"up":"down";return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)(m.a,{title:y,value:n,precision:E}),Object(at.jsxs)("div",{children:[C," ",Object(at.jsx)(p,{direction:v}),Object(at.jsxs)("span",{className:v,children:[Math.abs(s),"%"]})]})]})},l=Gt.a=S},Cr25:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return tt});var at=_("mrSG"),a=_("zJSt"),A=_("iTfj"),e=_("w02o"),i=_("tKoa"),p=_("YuPD"),m=Object(p.b)({},a.a.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function S(nt,vt){var ft=null;return Object(A.each)(nt,function(bt){typeof bt[vt]=="number"&&(ft+=bt[vt])}),ft}function l(nt,vt){var ft;switch(nt){case"inner":return ft="-30%",Object(A.isString)(vt)&&vt.endsWith("%")?parseFloat(vt)*.01>0?ft:vt:vt<0?vt:ft;case"outer":return ft=12,Object(A.isString)(vt)&&vt.endsWith("%")?parseFloat(vt)*.01<0?ft:vt:vt>0?vt:ft;default:return vt}}function M(nt,vt){var ft=Object(A.filter)(nt,function(bt){var St=bt[vt];return typeof St=="number"&&!isNaN(St)||St===null});return Object(p.j)(p.a.WARN,ft.length===nt.length,"illegal data existed in chart data."),ft}function j(nt,vt){return Object(A.every)(nt,function(ft){return ft[vt]===0})}function y(nt){var vt=nt.chart,ft=nt.options,bt=ft.data,St=ft.angleField,pt=ft.colorField,ct=ft.color,zt=ft.pieStyle,Nt=M(bt,St);if(j(Nt,St)){var wt="$$percentage$$";Nt=Nt.map(function(ht){var dt;return Object(at.a)(Object(at.a)({},ht),(dt={},dt[wt]=1/Nt.length,dt))}),vt.data(Nt);var H=Object(p.b)({},nt,{options:{xField:"1",yField:wt,seriesField:pt,isStack:!0,interval:{color:ct,style:zt},args:{zIndexReversed:!0}}});Object(i.c)(H),vt.geometries[0].tooltip(pt+"*"+St)}else{vt.data(Nt);var H=Object(p.b)({},nt,{options:{xField:"1",yField:St,seriesField:pt,isStack:!0,interval:{color:ct,style:zt},args:{zIndexReversed:!0}}});Object(i.c)(H)}return nt}function n(nt){var vt,ft=nt.chart,bt=nt.options,St=bt.meta,pt=bt.colorField,ct=Object(p.b)({},St);return ft.scale(ct,(vt={},vt[pt]={type:"cat"},vt)),nt}function s(nt){var vt=nt.chart,ft=nt.options,bt=ft.radius,St=ft.innerRadius,pt=ft.startAngle,ct=ft.endAngle;return vt.coordinate({type:"theta",cfg:{radius:bt,innerRadius:St,startAngle:pt,endAngle:ct}}),nt}function d(nt){var vt=nt.chart,ft=nt.options,bt=ft.label,St=ft.colorField,pt=ft.angleField,ct=vt.geometries[0];if(!bt)ct.label(!1);else{var zt=bt.callback,Nt=Object(at.c)(bt,["callback"]),wt=Object(p.o)(Nt);if(wt.content){var H=wt.content;wt.content=function(Mt,$,lt){var rt=Mt[St],z=Mt[pt],P=vt.getScaleByField(pt),Y=P==null?void 0:P.scale(z);return Object(A.isFunction)(H)?H(Object(at.a)(Object(at.a)({},Mt),{percent:Y}),$,lt):Object(A.isString)(H)?Object(p.n)(H,{value:z,name:rt,percentage:Object(A.isNumber)(Y)&&!Object(A.isNil)(z)?(Y*100).toFixed(2)+"%":null}):H}}var ht={inner:"",outer:"pie-outer",spider:"pie-spider"},dt=wt.type?ht[wt.type]:"pie-outer",yt=wt.layout?Object(A.isArray)(wt.layout)?wt.layout:[wt.layout]:[];wt.layout=(dt?[{type:dt}]:[]).concat(yt),ct.label({fields:St?[pt,St]:[pt],callback:zt,cfg:Object(at.a)(Object(at.a)({},wt),{offset:l(wt.type,wt.offset),type:"pie"})})}return nt}function E(nt){var vt=nt.chart,ft=nt.options,bt=ft.innerRadius,St=ft.statistic,pt=ft.angleField,ct=ft.colorField,zt=ft.meta;if(vt.getController("annotation").clear(!0),Object(p.e)(Object(e.b)())(nt),bt&&St){var Nt=Object(p.b)({},m.statistic,St),wt=Nt.title,H=Nt.content;wt!==!1&&(wt=Object(p.b)({},{formatter:function(dt){return dt?dt[ct]:"\u603B\u8BA1"}},wt)),H!==!1&&(H=Object(p.b)({},{formatter:function(dt,yt){var Mt=Object(A.get)(zt,[pt,"formatter"]),$=dt?dt[pt]:S(yt,pt);return Mt?Mt($):$}},H)),Object(p.m)(vt,{statistic:{title:wt,content:H},plotType:"pie"})}return nt}function O(nt){return Object(A.get)(nt,["options","tooltip"])!==!1?Object(p.b)({},nt,{options:{tooltip:{shared:!1}}}):nt}function C(nt){return Object(p.e)(y,n,e.j,s,e.d,function(vt){return Object(e.k)(O(vt))},d,e.i,E,e.c,e.a)(nt)}var v=_("kXyF"),x=_("qaDU"),T=function(nt){Object(at.b)(vt,nt);function vt(){return nt!==null&&nt.apply(this,arguments)||this}return vt.prototype.getActiveElements=function(){var ft=v.Util.getDelegationObject(this.context);if(ft){var bt=this.context.view,St=ft.component,pt=ft.item,ct=St.get("field");if(ct){var zt=bt.geometries[0].elements;return zt.filter(function(Nt){return Nt.getModel().data[ct]===pt.value})}}return[]},vt.prototype.getActiveElementLabels=function(){var ft=this.context.view,bt=this.getActiveElements(),St=ft.geometries[0].labelsContainer.getChildren();return St.filter(function(pt){return bt.find(function(ct){return Object(A.isEqual)(ct.getData(),pt.get("data"))})})},vt.prototype.transfrom=function(ft){ft===void 0&&(ft=7.5);var bt=this.getActiveElements(),St=this.getActiveElementLabels();bt.forEach(function(pt,ct){var zt=St[ct],Nt=pt.geometry.coordinate;if(Nt.isPolar&&Nt.isTransposed){var wt=v.Util.getAngle(pt.getModel(),Nt),H=wt.startAngle,ht=wt.endAngle,dt=(H+ht)/2,yt=ft,Mt=yt*Math.cos(dt),$=yt*Math.sin(dt);pt.shape.setMatrix(Object(x.a)([["t",Mt,$]])),zt.setMatrix(Object(x.a)([["t",Mt,$]]))}})},vt.prototype.active=function(){this.transfrom()},vt.prototype.reset=function(){this.transfrom(0)},vt}(v.Action),N=_("mj6g"),X=function(nt){Object(at.b)(vt,nt);function vt(){return nt!==null&&nt.apply(this,arguments)||this}return vt.prototype.getAnnotations=function(ft){var bt=ft||this.context.view;return bt.getController("annotation").option},vt.prototype.getInitialAnnotation=function(){return this.initialAnnotation},vt.prototype.init=function(){var ft=this,bt=this.context.view;bt.removeInteraction("tooltip"),bt.on("afterchangesize",function(){var St=ft.getAnnotations(bt);ft.initialAnnotation=St})},vt.prototype.change=function(){var ft=this.context,bt=ft.view,St=ft.event,pt=this.getAnnotations();this.initialAnnotation||(this.initialAnnotation=pt);var ct=((St==null?void 0:St.data)||{}).data;if(St.type.match("legend-item")){var zt=v.Util.getDelegationObject(this.context),Nt=bt.getGroupedFields()[0];if(zt&&Nt){var wt=zt.item;ct=bt.getData().find(function(Y){return Y[Nt]===wt.value})}}if(ct){var H=bt.getController("annotation");H.clear(!0);var ht=bt.getScaleFields(),dt=ht[1],yt=ht[2],Mt=bt.getScaleByField(dt),$=bt.getScaleByField(yt),lt=pt.filter(function(Y){return!Object(A.get)(Y,"key","").match("statistic")}),rt=pt.filter(function(Y){return Object(A.get)(Y,"key","").match("statistic")}),z=rt.filter(function(Y){return Y.key==="top-statistic"}),P=rt.filter(function(Y){return Y.key==="bottom-statistic"});Object(A.each)(rt,function(Y){var k,h;Y.key==="top-statistic"?(k=$?$.getText(ct[yt]):null,h=P?"translate(-50%, -100%)":"translate(-50%, -50%)"):(k=Mt?Mt.getText(ct[dt]):ct[dt],h=z?"translate(-50%, 0)":"translate(-50%,-50%)"),lt.push(Object(at.a)(Object(at.a)({},Y),{html:function(B,V){var q=V.getCoordinate(),it=q.getRadius()*q.innerRadius*2,ot=Object(A.isFunction)(Y.style)?Y.style():Y.style;Object(N.d)(B,Object(at.a)({width:it+"px",transform:h},Object(N.a)(ot)));var At=V.getData();return Y.customHtml?Y.customHtml(B,V,ct,At):(Y.formatter&&(k=Y.formatter(ct,At)),k?Object(A.isString)(k)?k:""+k:"<div></div>")}})),lt.forEach(function(g){H.annotation(g)}),bt.render(!0)})}},vt.prototype.reset=function(){var ft=this.context.view,bt=ft.getController("annotation");bt.clear(!0);var St=this.getInitialAnnotation();Object(A.each)(St,function(pt){ft.annotation()[pt.type](pt)}),ft.render(!0)},vt}(v.Action);Object(v.registerAction)("pie-statistic",X),Object(v.registerInteraction)("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Object(v.registerAction)("pie-legend",T),Object(v.registerInteraction)("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var tt=function(nt){Object(at.b)(vt,nt);function vt(){var ft=nt!==null&&nt.apply(this,arguments)||this;return ft.type="pie",ft}return vt.getDefaultOptions=function(){return m},vt.prototype.changeData=function(ft){var bt=this.options,St=this.options.angleField,pt=M(bt.data,St),ct=M(ft,St);j(pt,St)||j(ct,St)?this.update({data:ft}):(this.updateOption({data:ft}),this.chart.data(ct),E({chart:this.chart,options:this.options}),this.chart.render(!0))},vt.prototype.getDefaultOptions=function(){return vt.getDefaultOptions()},vt.prototype.getSchemaAdaptor=function(){return C},vt}(a.a)},DMQx:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return tt});var at=_("mrSG"),a=_("YuPD"),A=_("w02o"),e=_("iTfj"),i=_("kXyF"),p=_("5OoT");function m(nt,vt){return Object(a.b)({size:vt?32:80,spacing:vt?8:12,offset:vt?32:0,arrow:nt.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:nt.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:p.a}},nt)}function S(nt,vt){return Object(e.map)(vt.getModel().points,function(ft){return nt.convertPoint(ft)})}function l(nt,vt,ft){var bt=nt.view,St=nt.geometry,pt=nt.group,ct=nt.options,zt=nt.horizontal,Nt=ct.offset,wt=ct.size,H=ct.arrow,ht=bt.getCoordinate(),dt=S(ht,vt)[zt?3:0],yt=S(ht,ft)[zt?0:3],Mt=yt.y-dt.y,$=yt.x-dt.x;if(typeof H!="boolean"){var lt=H.headSize,rt=ct.spacing,z;zt?($-lt)/2<rt?(rt=Math.max(1,($-lt)/2),z=[[dt.x+rt,dt.y-Nt],[dt.x+rt,dt.y-Nt-wt],[yt.x-rt,yt.y-Nt-wt/2]]):z=[[dt.x+rt,dt.y-Nt],[dt.x+rt,dt.y-Nt-wt],[yt.x-rt-lt,yt.y-Nt-wt],[yt.x-rt,yt.y-Nt-wt/2],[yt.x-rt-lt,yt.y-Nt]]:(Mt-lt)/2<rt?(rt=Math.max(1,(Mt-lt)/2),z=[[dt.x+Nt,dt.y+rt],[dt.x+Nt+wt,dt.y+rt],[yt.x+Nt+wt/2,yt.y-rt]]):z=[[dt.x+Nt,dt.y+rt],[dt.x+Nt+wt,dt.y+rt],[yt.x+Nt+wt,yt.y-rt-lt],[yt.x+Nt+wt/2,yt.y-rt],[yt.x+Nt,yt.y-rt-lt]],pt.addShape("polygon",{id:bt.id+"-conversion-tag-arrow-"+St.getElementId(vt.getModel().mappingData),name:"conversion-tag-arrow",attrs:Object(at.a)(Object(at.a)({},H.style||{}),{points:z})})}}function M(nt,vt,ft){var bt,St,pt,ct=nt.view,zt=nt.geometry,Nt=nt.group,wt=nt.options,H=nt.field,ht=nt.horizontal,dt=wt.offset,yt=wt.size;if(typeof wt.text!="boolean"){var Mt=ct.getCoordinate(),$=((bt=wt.text)===null||bt===void 0?void 0:bt.formatter)&&((St=wt.text)===null||St===void 0?void 0:St.formatter(vt.getData()[H],ft.getData()[H])),lt=S(Mt,vt)[ht?3:0],rt=S(Mt,ft)[ht?0:3],z=Nt.addShape("text",{id:ct.id+"-conversion-tag-text-"+zt.getElementId(vt.getModel().mappingData),name:"conversion-tag-text",attrs:Object(at.a)(Object(at.a)({},((pt=wt.text)===null||pt===void 0?void 0:pt.style)||{}),{text:$,x:ht?(lt.x+rt.x)/2:lt.x+dt+yt/2,y:ht?lt.y-dt-yt/2:(lt.y+rt.y)/2})});if(ht){var P=rt.x-lt.x,Y=z.getBBox().width;if(Y>P){var k=Y/$.length,h=Math.max(1,Math.ceil(P/k)-1),g=$.slice(0,h)+"...";z.attr("text",g)}}}}function j(nt,vt,ft){l(nt,vt,ft),M(nt,vt,ft)}function y(nt,vt,ft){return vt===void 0&&(vt=!0),ft===void 0&&(ft=!1),function(bt){var St=bt.options,pt=bt.chart,ct=St.conversionTag,zt=St.theme;return ct&&!ft&&(pt.theme(Object(a.b)({},Object(e.isObject)(zt)?zt:Object(i.getTheme)(zt),{columnWidthRatio:1/3})),pt.annotation().shape({render:function(wt,H){var ht=wt.addGroup({id:pt.id+"-conversion-tag-group",name:"conversion-tag-group"}),dt=Object(e.find)(pt.geometries,function($){return $.type==="interval"}),yt={view:H,geometry:dt,group:ht,field:nt,horizontal:vt,options:m(ct,vt)},Mt=vt?dt.elements:dt.elements.slice().reverse();Object(e.each)(Mt,function($,lt){lt>0&&j(yt,Mt[lt-1],$)})}})),bt}}var n={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};Object(i.registerInteraction)(n.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Object(i.registerInteraction)(n.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function s(nt){return nt===void 0&&(nt=!1),function(vt){var ft=vt.chart,bt=vt.options,St=bt.connectedArea,pt=function(){ft.removeInteraction(n.hover),ft.removeInteraction(n.click)};if(!nt&&St){var ct=St.trigger||"hover";pt(),ft.interaction(n[ct])}else pt();return vt}}var d=_("tKoa"),E=_("sqD9"),O=_("DyAw");function C(nt){var vt=nt.options,ft=vt.legend,bt=vt.seriesField,St=vt.isStack;return bt?ft!==!1&&(ft=Object(at.a)({position:St?"right-top":"top-left"},ft)):ft=!1,nt.options.legend=ft,nt}function v(nt){var vt=nt.chart,ft=nt.options,bt=ft.data,St=ft.columnStyle,pt=ft.color,ct=ft.columnWidthRatio,zt=ft.isPercent,Nt=ft.xField,wt=ft.yField,H=ft.seriesField,ht=ft.tooltip;vt.data(Object(E.a)(bt,wt,Nt,wt,zt));var dt=zt?Object(at.a)({formatter:function($){return{name:$[H]||$[Nt],value:(Number($[wt])*100).toFixed(2)+"%"}}},ht):ht,yt=Object(a.b)({},nt,{options:{widthRatio:ct,tooltip:dt,interval:{style:St,color:pt}}});return Object(d.c)(yt),nt}function x(nt){var vt,ft,bt=nt.options,St=bt.xAxis,pt=bt.yAxis,ct=bt.xField,zt=bt.yField,Nt=bt.data,wt=bt.isPercent,H=wt?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Object(a.e)(Object(A.f)((vt={},vt[ct]=St,vt[zt]=pt,vt),(ft={},ft[ct]={type:"cat"},ft[zt]=Object(at.a)(Object(at.a)({},Object(O.a)(Nt,zt)),H),ft)))(nt)}function T(nt){var vt=nt.chart,ft=nt.options,bt=ft.xAxis,St=ft.yAxis,pt=ft.xField,ct=ft.yField;return bt===!1?vt.axis(pt,!1):vt.axis(pt,bt),St===!1?vt.axis(ct,!1):vt.axis(ct,St),nt}function N(nt){var vt=nt.chart,ft=nt.options,bt=ft.legend,St=ft.seriesField;return bt&&St?vt.legend(St,bt):bt===!1&&vt.legend(!1),nt}function X(nt){var vt=nt.chart,ft=nt.options,bt=ft.label,St=ft.yField,pt=ft.isRange,ct=Object(a.c)(vt,"interval");if(!bt)ct.label(!1);else{var zt=bt.callback,Nt=Object(at.c)(bt,["callback"]);ct.label({fields:[St],callback:zt,cfg:Object(at.a)({layout:(Nt==null?void 0:Nt.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(a.o)(pt?Object(at.a)({content:function(H){var ht;return(ht=H[St])===null||ht===void 0?void 0:ht.join("-")}},Nt):Nt))})}return nt}function tt(nt,vt){vt===void 0&&(vt=!1);var ft=nt.options,bt=ft.seriesField;return Object(a.e)(C,A.j,v,x,T,N,A.k,A.h,A.g,X,A.c,A.a,Object(A.b)(),y(ft.yField,!vt,!!bt),s(!ft.isStack),A.e)(nt)}},DdT1:function(Gn,Gt,_){"use strict";Gt.a=function(at){at.x0=Math.round(at.x0),at.y0=Math.round(at.y0),at.x1=Math.round(at.x1),at.y1=Math.round(at.y1)}},Djfg:function(Gn,Gt,_){"use strict";var at=_("XiRp"),a=_.n(at),A=_("h4/5"),e=_.n(A),i=_("N9hJ"),p=_.n(i),m=_("3T7b"),S=_.n(m),l=_("B0vJ"),M=_.n(l),j=_("B2d+"),y=_.n(j)},DyAw:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a}),_.d(Gt,"b",function(){return A});var at=_("iTfj");function a(e,i){var p=e.filter(function(l){var M=Object(at.get)(l,[i]);return Object(at.isNumber)(M)&&!isNaN(M)}),m=p.every(function(l){return Object(at.get)(l,[i])>=0}),S=p.every(function(l){return Object(at.get)(l,[i])<=0});return m?{min:0}:S?{max:0}:{}}function A(e,i,p,m){if(!Array.isArray(e))return{nodes:[],links:[]};var S=[],l={},M=-1;return e.forEach(function(j){var y=j[i],n=j[p],s=j[m];l[y]||(l[y]={id:++M,name:y}),l[n]||(l[n]={id:++M,name:n}),S.push({source:l[y].id,target:l[n].id,value:s})}),{nodes:Object.values(l),links:S}}},EYNi:function(Gn,Gt,_){"use strict";_.d(Gt,"e",function(){return v}),_.d(Gt,"b",function(){return nt}),_.d(Gt,"a",function(){return dt}),_.d(Gt,"c",function(){return M}),_.d(Gt,"d",function(){return z}),_.d(Gt,"f",function(){return at});var at={};_.r(at),_.d(at,"distance",function(){return e}),_.d(at,"isNumberEqual",function(){return i}),_.d(at,"getBBoxByArray",function(){return p}),_.d(at,"getBBoxRange",function(){return m}),_.d(at,"piMod",function(){return S});function a(k){return Math.min.apply(null,k)}function A(k){return Math.max.apply(null,k)}function e(k,h,g,B){var V=k-g,q=h-B;return Math.sqrt(V*V+q*q)}function i(k,h){return Math.abs(k-h)<.001}function p(k,h){var g=a(k),B=a(h),V=A(k),q=A(h);return{x:g,y:B,width:V-g,height:q-B}}function m(k,h,g,B){return{minX:a([k,g]),maxX:A([k,g]),minY:a([h,B]),maxY:A([h,B])}}function S(k){return(k+Math.PI*2)%(Math.PI*2)}var l=_("ZxFD"),M={box:function(h,g,B,V){return p([h,B],[g,V])},length:function(h,g,B,V){return e(h,g,B,V)},pointAt:function(h,g,B,V,q){return{x:(1-q)*h+q*B,y:(1-q)*g+q*V}},pointDistance:function(h,g,B,V,q,it){var ot=(B-h)*(q-h)+(V-g)*(it-g);if(ot<0)return e(h,g,q,it);var At=(B-h)*(B-h)+(V-g)*(V-g);return ot>At?e(B,V,q,it):this.pointToLine(h,g,B,V,q,it)},pointToLine:function(h,g,B,V,q,it){var ot=[B-h,V-g];if(l.exactEquals(ot,[0,0]))return Math.sqrt((q-h)*(q-h)+(it-g)*(it-g));var At=[-ot[1],ot[0]];l.normalize(At,At);var gt=[q-h,it-g];return Math.abs(l.dot(gt,At))},tangentAngle:function(h,g,B,V){return Math.atan2(V-g,B-h)}},j=1e-4;function y(k,h,g,B,V,q){var it,ot=Infinity,At=[g,B],gt=20;q&&q>200&&(gt=q/10);for(var mt=1/gt,Ot=mt/10,It=0;It<=gt;It++){var Dt=It*mt,Ut=[V.apply(null,k.concat([Dt])),V.apply(null,h.concat([Dt]))],Ct=e(At[0],At[1],Ut[0],Ut[1]);Ct<ot&&(it=Dt,ot=Ct)}if(it===0)return{x:k[0],y:h[0]};if(it===1){var Vt=k.length;return{x:k[Vt-1],y:h[Vt-1]}}ot=Infinity;for(var It=0;It<32&&!(Ot<j);It++){var Ht=it-Ot,re=it+Ot,Ut=[V.apply(null,k.concat([Ht])),V.apply(null,h.concat([Ht]))],Ct=e(At[0],At[1],Ut[0],Ut[1]);if(Ht>=0&&Ct<ot)it=Ht,ot=Ct;else{var pe=[V.apply(null,k.concat([re])),V.apply(null,h.concat([re]))],ye=e(At[0],At[1],pe[0],pe[1]);re<=1&&ye<ot?(it=re,ot=ye):Ot*=.5}}return{x:V.apply(null,k.concat([it])),y:V.apply(null,h.concat([it]))}}function n(k,h){for(var g=0,B=k.length,V=0;V<B;V++){var q=k[V],it=h[V],ot=k[(V+1)%B],At=h[(V+1)%B];g+=e(q,it,ot,At)}return g/2}function s(k,h,g,B){var V=1-B;return V*V*k+2*B*V*h+B*B*g}function d(k,h,g){var B=k+g-2*h;if(i(B,0))return[.5];var V=(k-h)/B;return V<=1&&V>=0?[V]:[]}function E(k,h,g,B){return 2*(1-B)*(h-k)+2*B*(g-h)}function O(k,h,g,B,V,q,it){var ot=s(k,g,V,it),At=s(h,B,q,it),gt=M.pointAt(k,h,g,B,it),mt=M.pointAt(g,B,V,q,it);return[[k,h,gt.x,gt.y,ot,At],[ot,At,mt.x,mt.y,V,q]]}function C(k,h,g,B,V,q,it){if(it===0)return(e(k,h,g,B)+e(g,B,V,q)+e(k,h,V,q))/2;var ot=O(k,h,g,B,V,q,.5),At=ot[0],gt=ot[1];return At.push(it-1),gt.push(it-1),C.apply(null,At)+C.apply(null,gt)}var v={box:function(h,g,B,V,q,it){var ot=d(h,B,q)[0],At=d(g,V,it)[0],gt=[h,q],mt=[g,it];return ot!==void 0&&gt.push(s(h,B,q,ot)),At!==void 0&&mt.push(s(g,V,it,At)),p(gt,mt)},length:function(h,g,B,V,q,it){return C(h,g,B,V,q,it,3)},nearestPoint:function(h,g,B,V,q,it,ot,At){return y([h,B,q],[g,V,it],ot,At,s)},pointDistance:function(h,g,B,V,q,it,ot,At){var gt=this.nearestPoint(h,g,B,V,q,it,ot,At);return e(gt.x,gt.y,ot,At)},interpolationAt:s,pointAt:function(h,g,B,V,q,it,ot){return{x:s(h,B,q,ot),y:s(g,V,it,ot)}},divide:function(h,g,B,V,q,it,ot){return O(h,g,B,V,q,it,ot)},tangentAngle:function(h,g,B,V,q,it,ot){var At=E(h,B,q,ot),gt=E(g,V,it,ot),mt=Math.atan2(gt,At);return S(mt)}};function x(k,h,g,B,V){var q=1-V;return q*q*q*k+3*h*V*q*q+3*g*V*V*q+B*V*V*V}function T(k,h,g,B,V){var q=1-V;return 3*(q*q*(h-k)+2*q*V*(g-h)+V*V*(B-g))}function N(k,h,g,B){var V=-3*k+9*h-9*g+3*B,q=6*k-12*h+6*g,it=3*h-3*k,ot=[],At,gt,mt;if(i(V,0))i(q,0)||(At=-it/q,At>=0&&At<=1&&ot.push(At));else{var Ot=q*q-4*V*it;i(Ot,0)?ot.push(-q/(2*V)):Ot>0&&(mt=Math.sqrt(Ot),At=(-q+mt)/(2*V),gt=(-q-mt)/(2*V),At>=0&&At<=1&&ot.push(At),gt>=0&&gt<=1&&ot.push(gt))}return ot}function X(k,h,g,B,V,q,it,ot,At){var gt=x(k,g,V,it,At),mt=x(h,B,q,ot,At),Ot=M.pointAt(k,h,g,B,At),It=M.pointAt(g,B,V,q,At),Dt=M.pointAt(V,q,it,ot,At),Ut=M.pointAt(Ot.x,Ot.y,It.x,It.y,At),Ct=M.pointAt(It.x,It.y,Dt.x,Dt.y,At);return[[k,h,Ot.x,Ot.y,Ut.x,Ut.y,gt,mt],[gt,mt,Ct.x,Ct.y,Dt.x,Dt.y,it,ot]]}function tt(k,h,g,B,V,q,it,ot,At){if(At===0)return n([k,g,V,it],[h,B,q,ot]);var gt=X(k,h,g,B,V,q,it,ot,.5),mt=gt[0],Ot=gt[1];return mt.push(At-1),Ot.push(At-1),tt.apply(null,mt)+tt.apply(null,Ot)}var nt={extrema:N,box:function(h,g,B,V,q,it,ot,At){for(var gt=[h,ot],mt=[g,At],Ot=N(h,B,q,ot),It=N(g,V,it,At),Dt=0;Dt<Ot.length;Dt++)gt.push(x(h,B,q,ot,Ot[Dt]));for(var Dt=0;Dt<It.length;Dt++)mt.push(x(g,V,it,At,It[Dt]));return p(gt,mt)},length:function(h,g,B,V,q,it,ot,At){return tt(h,g,B,V,q,it,ot,At,3)},nearestPoint:function(h,g,B,V,q,it,ot,At,gt,mt,Ot){return y([h,B,q,ot],[g,V,it,At],gt,mt,x,Ot)},pointDistance:function(h,g,B,V,q,it,ot,At,gt,mt,Ot){var It=this.nearestPoint(h,g,B,V,q,it,ot,At,gt,mt,Ot);return e(It.x,It.y,gt,mt)},interpolationAt:x,pointAt:function(h,g,B,V,q,it,ot,At,gt){return{x:x(h,B,q,ot,gt),y:x(g,V,it,At,gt)}},divide:function(h,g,B,V,q,it,ot,At,gt){return X(h,g,B,V,q,it,ot,At,gt)},tangentAngle:function(h,g,B,V,q,it,ot,At,gt){var mt=T(h,B,q,ot,gt),Ot=T(g,V,it,At,gt);return S(Math.atan2(Ot,mt))}};function vt(k,h){var g=Math.abs(k);return h>0?g:g*-1}var ft={box:function(h,g,B,V){return{x:h-B,y:g-V,width:B*2,height:V*2}},length:function(h,g,B,V){return Math.PI*(3*(B+V)-Math.sqrt((3*B+V)*(B+3*V)))},nearestPoint:function(h,g,B,V,q,it){var ot=B,At=V;if(ot===0||At===0)return{x:h,y:g};for(var gt=q-h,mt=it-g,Ot=Math.abs(gt),It=Math.abs(mt),Dt=ot*ot,Ut=At*At,Ct=Math.PI/4,Vt,Ht,re=0;re<4;re++){Vt=ot*Math.cos(Ct),Ht=At*Math.sin(Ct);var pe=(Dt-Ut)*Math.pow(Math.cos(Ct),3)/ot,ye=(Ut-Dt)*Math.pow(Math.sin(Ct),3)/At,we=Vt-pe,Ne=Ht-ye,Ke=Ot-pe,pn=It-ye,hn=Math.hypot(Ne,we),kn=Math.hypot(pn,Ke),Tn=hn*Math.asin((we*pn-Ne*Ke)/(hn*kn)),Rn=Tn/Math.sqrt(Dt+Ut-Vt*Vt-Ht*Ht);Ct+=Rn,Ct=Math.min(Math.PI/2,Math.max(0,Ct))}return{x:h+vt(Vt,gt),y:g+vt(Ht,mt)}},pointDistance:function(h,g,B,V,q,it){var ot=this.nearestPoint(h,g,B,V,q,it);return e(ot.x,ot.y,q,it)},pointAt:function(h,g,B,V,q){var it=2*Math.PI*q;return{x:h+B*Math.cos(it),y:g+V*Math.sin(it)}},tangentAngle:function(h,g,B,V,q){var it=2*Math.PI*q,ot=Math.atan2(V*Math.cos(it),-B*Math.sin(it));return S(ot)}};function bt(k,h,g,B,V,q,it,ot){return-1*g*Math.cos(V)*Math.sin(ot)-B*Math.sin(V)*Math.cos(ot)}function St(k,h,g,B,V,q,it,ot){return-1*g*Math.sin(V)*Math.sin(ot)+B*Math.cos(V)*Math.cos(ot)}function pt(k,h,g){return Math.atan(-h/k*Math.tan(g))}function ct(k,h,g){return Math.atan(h/(k*Math.tan(g)))}function zt(k,h,g,B,V,q){return g*Math.cos(V)*Math.cos(q)-B*Math.sin(V)*Math.sin(q)+k}function Nt(k,h,g,B,V,q){return g*Math.sin(V)*Math.cos(q)+B*Math.cos(V)*Math.sin(q)+h}function wt(k,h,g,B){var V=Math.atan2(B*k,g*h);return(V+Math.PI*2)%(Math.PI*2)}function H(k,h,g){return{x:k*Math.cos(g),y:h*Math.sin(g)}}function ht(k,h,g){var B=Math.cos(g),V=Math.sin(g);return[k*B-h*V,k*V+h*B]}var dt={box:function(h,g,B,V,q,it,ot){for(var At=pt(B,V,q),gt=Infinity,mt=-Infinity,Ot=[it,ot],It=-Math.PI*2;It<=Math.PI*2;It+=Math.PI){var Dt=At+It;it<ot?it<Dt&&Dt<ot&&Ot.push(Dt):ot<Dt&&Dt<it&&Ot.push(Dt)}for(var It=0;It<Ot.length;It++){var Ut=zt(h,g,B,V,q,Ot[It]);Ut<gt&&(gt=Ut),Ut>mt&&(mt=Ut)}for(var Ct=ct(B,V,q),Vt=Infinity,Ht=-Infinity,re=[it,ot],It=-Math.PI*2;It<=Math.PI*2;It+=Math.PI){var pe=Ct+It;it<ot?it<pe&&pe<ot&&re.push(pe):ot<pe&&pe<it&&re.push(pe)}for(var It=0;It<re.length;It++){var ye=Nt(h,g,B,V,q,re[It]);ye<Vt&&(Vt=ye),ye>Ht&&(Ht=ye)}return{x:gt,y:Vt,width:mt-gt,height:Ht-Vt}},length:function(h,g,B,V,q,it,ot){},nearestPoint:function(h,g,B,V,q,it,ot,At,gt){var mt=ht(At-h,gt-g,-q),Ot=mt[0],It=mt[1],Dt=ft.nearestPoint(0,0,B,V,Ot,It),Ut=wt(B,V,Dt.x,Dt.y);Ut<it?Dt=H(B,V,it):Ut>ot&&(Dt=H(B,V,ot));var Ct=ht(Dt.x,Dt.y,q);return{x:Ct[0]+h,y:Ct[1]+g}},pointDistance:function(h,g,B,V,q,it,ot,At,gt){var mt=this.nearestPoint(h,g,B,V,At,gt);return e(mt.x,mt.y,At,gt)},pointAt:function(h,g,B,V,q,it,ot,At){var gt=(ot-it)*At+it;return{x:zt(h,g,B,V,q,gt),y:Nt(h,g,B,V,q,gt)}},tangentAngle:function(h,g,B,V,q,it,ot,At){var gt=(ot-it)*At+it,mt=bt(h,g,B,V,q,it,ot,gt),Ot=St(h,g,B,V,q,it,ot,gt);return S(Math.atan2(Ot,mt))}};function yt(k){for(var h=0,g=[],B=0;B<k.length-1;B++){var V=k[B],q=k[B+1],it=e(V[0],V[1],q[0],q[1]),ot={from:V,to:q,length:it};g.push(ot),h+=it}return{segments:g,totalLength:h}}function Mt(k){if(k.length<2)return 0;for(var h=0,g=0;g<k.length-1;g++){var B=k[g],V=k[g+1];h+=e(B[0],B[1],V[0],V[1])}return h}function $(k,h){if(h>1||h<0||k.length<2)return null;var g=yt(k),B=g.segments,V=g.totalLength;if(V===0)return{x:k[0][0],y:k[0][1]};for(var q=0,it=null,ot=0;ot<B.length;ot++){var At=B[ot],gt=At.from,mt=At.to,Ot=At.length/V;if(h>=q&&h<=q+Ot){var It=(h-q)/Ot;it=M.pointAt(gt[0],gt[1],mt[0],mt[1],It);break}q+=Ot}return it}function lt(k,h){if(h>1||h<0||k.length<2)return 0;for(var g=yt(k),B=g.segments,V=g.totalLength,q=0,it=0,ot=0;ot<B.length;ot++){var At=B[ot],gt=At.from,mt=At.to,Ot=At.length/V;if(h>=q&&h<=q+Ot){it=Math.atan2(mt[1]-gt[1],mt[0]-gt[0]);break}q+=Ot}return it}function rt(k,h,g){for(var B=Infinity,V=0;V<k.length-1;V++){var q=k[V],it=k[V+1],ot=M.pointDistance(q[0],q[1],it[0],it[1],h,g);ot<B&&(B=ot)}return B}var z={box:function(h){for(var g=[],B=[],V=0;V<h.length;V++){var q=h[V];g.push(q[0]),B.push(q[1])}return p(g,B)},length:function(h){return Mt(h)},pointAt:function(h,g){return $(h,g)},pointDistance:function(h,g,B){return rt(h,g,B)},tangentAngle:function(h,g){return lt(h,g)}};function P(k){var h=k.slice(0);return k.length&&h.push(k[0]),h}var Y={box:function(h){return z.box(h)},length:function(h){return Mt(P(h))},pointAt:function(h,g){return $(P(h),g)},pointDistance:function(h,g,B){return rt(P(h),g,B)},tangentAngle:function(h,g){return lt(P(h),g)}}},EkMX:function(Gn,Gt,_){"use strict";var at={};_.r(at),_.d(at,"easeLinear",function(){return ft}),_.d(at,"easeQuad",function(){return pt}),_.d(at,"easeQuadIn",function(){return bt}),_.d(at,"easeQuadOut",function(){return St}),_.d(at,"easeQuadInOut",function(){return pt}),_.d(at,"easeCubic",function(){return Nt}),_.d(at,"easeCubicIn",function(){return ct}),_.d(at,"easeCubicOut",function(){return zt}),_.d(at,"easeCubicInOut",function(){return Nt}),_.d(at,"easePoly",function(){return dt}),_.d(at,"easePolyIn",function(){return H}),_.d(at,"easePolyOut",function(){return ht}),_.d(at,"easePolyInOut",function(){return dt}),_.d(at,"easeSin",function(){return rt}),_.d(at,"easeSinIn",function(){return $}),_.d(at,"easeSinOut",function(){return lt}),_.d(at,"easeSinInOut",function(){return rt}),_.d(at,"easeExp",function(){return k}),_.d(at,"easeExpIn",function(){return P}),_.d(at,"easeExpOut",function(){return Y}),_.d(at,"easeExpInOut",function(){return k}),_.d(at,"easeCircle",function(){return B}),_.d(at,"easeCircleIn",function(){return h}),_.d(at,"easeCircleOut",function(){return g}),_.d(at,"easeCircleInOut",function(){return B}),_.d(at,"easeBounce",function(){return Ct}),_.d(at,"easeBounceIn",function(){return Ut}),_.d(at,"easeBounceOut",function(){return Ct}),_.d(at,"easeBounceInOut",function(){return Vt}),_.d(at,"easeBack",function(){return ye}),_.d(at,"easeBackIn",function(){return re}),_.d(at,"easeBackOut",function(){return pe}),_.d(at,"easeBackInOut",function(){return ye}),_.d(at,"easeElastic",function(){return hn}),_.d(at,"easeElasticIn",function(){return pn}),_.d(at,"easeElasticOut",function(){return hn}),_.d(at,"easeElasticInOut",function(){return kn});var a=_("mrSG"),A=_("e0ae"),e=_("Mw2x"),i=_("sstZ"),p=_("iTfj"),m=0,S=0,l=0,M=1e3,j,y,n=0,s=0,d=0,E=typeof performance=="object"&&performance.now?performance:Date,O=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(G){setTimeout(G,17)};function C(){return s||(O(v),s=E.now()+d)}function v(){s=0}function x(){this._call=this._time=this._next=null}x.prototype=T.prototype={constructor:x,restart:function(F,Z,ut){if(typeof F!="function")throw new TypeError("callback is not a function");ut=(ut==null?C():+ut)+(Z==null?0:+Z),!this._next&&y!==this&&(y?y._next=this:j=this,y=this),this._call=F,this._time=ut,vt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,vt())}};function T(G,F,Z){var ut=new x;return ut.restart(G,F,Z),ut}function N(){C(),++m;for(var G=j,F;G;)(F=s-G._time)>=0&&G._call.call(null,F),G=G._next;--m}function X(){s=(n=E.now())+d,m=S=0;try{N()}finally{m=0,nt(),s=0}}function tt(){var G=E.now(),F=G-n;F>M&&(d-=F,n=G)}function nt(){for(var G,F=j,Z,ut=Infinity;F;)F._call?(ut>F._time&&(ut=F._time),G=F,F=F._next):(Z=F._next,F._next=null,F=G?G._next=Z:j=Z);y=G,vt(ut)}function vt(G){if(!m){S&&(S=clearTimeout(S));var F=G-s;F>24?(G<Infinity&&(S=setTimeout(X,G-E.now()-d)),l&&(l=clearInterval(l))):(l||(n=E.now(),l=setInterval(tt,M)),m=1,O(X))}}function ft(G){return+G}function bt(G){return G*G}function St(G){return G*(2-G)}function pt(G){return((G*=2)<=1?G*G:--G*(2-G)+1)/2}function ct(G){return G*G*G}function zt(G){return--G*G*G+1}function Nt(G){return((G*=2)<=1?G*G*G:(G-=2)*G*G+2)/2}var wt=3,H=function G(F){F=+F;function Z(ut){return Math.pow(ut,F)}return Z.exponent=G,Z}(wt),ht=function G(F){F=+F;function Z(ut){return 1-Math.pow(1-ut,F)}return Z.exponent=G,Z}(wt),dt=function G(F){F=+F;function Z(ut){return((ut*=2)<=1?Math.pow(ut,F):2-Math.pow(2-ut,F))/2}return Z.exponent=G,Z}(wt),yt=Math.PI,Mt=yt/2;function $(G){return+G==1?1:1-Math.cos(G*Mt)}function lt(G){return Math.sin(G*Mt)}function rt(G){return(1-Math.cos(yt*G))/2}function z(G){return(Math.pow(2,-10*G)-.0009765625)*1.0009775171065494}function P(G){return z(1-+G)}function Y(G){return 1-z(G)}function k(G){return((G*=2)<=1?z(1-G):2-z(G-1))/2}function h(G){return 1-Math.sqrt(1-G*G)}function g(G){return Math.sqrt(1- --G*G)}function B(G){return((G*=2)<=1?1-Math.sqrt(1-G*G):Math.sqrt(1-(G-=2)*G)+1)/2}var V=4/11,q=6/11,it=8/11,ot=3/4,At=9/11,gt=10/11,mt=15/16,Ot=21/22,It=63/64,Dt=1/V/V;function Ut(G){return 1-Ct(1-G)}function Ct(G){return(G=+G)<V?Dt*G*G:G<it?Dt*(G-=q)*G+ot:G<gt?Dt*(G-=At)*G+mt:Dt*(G-=Ot)*G+It}function Vt(G){return((G*=2)<=1?1-Ct(1-G):Ct(G-1)+1)/2}var Ht=1.70158,re=function G(F){F=+F;function Z(ut){return(ut=+ut)*ut*(F*(ut-1)+ut)}return Z.overshoot=G,Z}(Ht),pe=function G(F){F=+F;function Z(ut){return--ut*ut*((ut+1)*F+ut)+1}return Z.overshoot=G,Z}(Ht),ye=function G(F){F=+F;function Z(ut){return((ut*=2)<1?ut*ut*((F+1)*ut-F):(ut-=2)*ut*((F+1)*ut+F)+2)/2}return Z.overshoot=G,Z}(Ht),we=2*Math.PI,Ne=1,Ke=.3,pn=function G(F,Z){var ut=Math.asin(1/(F=Math.max(1,F)))*(Z/=we);function Bt(Jt){return F*z(- --Jt)*Math.sin((ut-Jt)/Z)}return Bt.amplitude=function(Jt){return G(Jt,Z*we)},Bt.period=function(Jt){return G(F,Jt)},Bt}(Ne,Ke),hn=function G(F,Z){var ut=Math.asin(1/(F=Math.max(1,F)))*(Z/=we);function Bt(Jt){return 1-F*z(Jt=+Jt)*Math.sin((Jt+ut)/Z)}return Bt.amplitude=function(Jt){return G(Jt,Z*we)},Bt.period=function(Jt){return G(F,Jt)},Bt}(Ne,Ke),kn=function G(F,Z){var ut=Math.asin(1/(F=Math.max(1,F)))*(Z/=we);function Bt(Jt){return((Jt=Jt*2-1)<0?F*z(-Jt)*Math.sin((ut-Jt)/Z):2-F*z(Jt)*Math.sin((ut+Jt)/Z))/2}return Bt.amplitude=function(Jt){return G(Jt,Z*we)},Bt.period=function(Jt){return G(F,Jt)},Bt}(Ne,Ke),Tn=function(G,F,Z){G.prototype=F.prototype=Z,Z.constructor=G};function Rn(G,F){var Z=Object.create(G.prototype);for(var ut in F)Z[ut]=F[ut];return Z}function Mn(){}var Cn=.7,_n=1/Cn,Kn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,er=new RegExp("^rgb\\("+[Kn,Kn,Kn]+"\\)$"),Sr=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),Vr=new RegExp("^rgba\\("+[Kn,Kn,Kn,tr]+"\\)$"),ti=new RegExp("^rgba\\("+[or,or,or,tr]+"\\)$"),hi=new RegExp("^hsl\\("+[tr,or,or]+"\\)$"),Fi=new RegExp("^hsla\\("+[tr,or,or,tr]+"\\)$"),to={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(Mn,Li,{copy:function(F){return Object.assign(new this.constructor,this,F)},displayable:function(){return this.rgb().displayable()},hex:si,formatHex:si,formatHsl:Ci,formatRgb:Ui,toString:Ui});function si(){return this.rgb().formatHex()}function Ci(){return Kr(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Li(G){var F,Z;return G=(G+"").trim().toLowerCase(),(F=nr.exec(G))?(Z=F[1].length,F=parseInt(F[1],16),Z===6?Vi(F):Z===3?new pr(F>>8&15|F>>4&240,F>>4&15|F&240,(F&15)<<4|F&15,1):Z===8?ro(F>>24&255,F>>16&255,F>>8&255,(F&255)/255):Z===4?ro(F>>12&15|F>>8&240,F>>8&15|F>>4&240,F>>4&15|F&240,((F&15)<<4|F&15)/255):null):(F=er.exec(G))?new pr(F[1],F[2],F[3],1):(F=Sr.exec(G))?new pr(F[1]*255/100,F[2]*255/100,F[3]*255/100,1):(F=Vr.exec(G))?ro(F[1],F[2],F[3],F[4]):(F=ti.exec(G))?ro(F[1]*255/100,F[2]*255/100,F[3]*255/100,F[4]):(F=hi.exec(G))?Yr(F[1],F[2]/100,F[3]/100,1):(F=Fi.exec(G))?Yr(F[1],F[2]/100,F[3]/100,F[4]):to.hasOwnProperty(G)?Vi(to[G]):G==="transparent"?new pr(NaN,NaN,NaN,0):null}function Vi(G){return new pr(G>>16&255,G>>8&255,G&255,1)}function ro(G,F,Z,ut){return ut<=0&&(G=F=Z=NaN),new pr(G,F,Z,ut)}function jr(G){return G instanceof Mn||(G=Li(G)),G?(G=G.rgb(),new pr(G.r,G.g,G.b,G.opacity)):new pr}function Ji(G,F,Z,ut){return arguments.length===1?jr(G):new pr(G,F,Z,ut==null?1:ut)}function pr(G,F,Z,ut){this.r=+G,this.g=+F,this.b=+Z,this.opacity=+ut}Tn(pr,Ji,Rn(Mn,{brighter:function(F){return F=F==null?_n:Math.pow(_n,F),new pr(this.r*F,this.g*F,this.b*F,this.opacity)},darker:function(F){return F=F==null?Cn:Math.pow(Cn,F),new pr(this.r*F,this.g*F,this.b*F,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xr,formatHex:Xr,formatRgb:Br,toString:Br}));function Xr(){return"#"+Nr(this.r)+Nr(this.g)+Nr(this.b)}function Br(){var G=this.opacity;return G=isNaN(G)?1:Math.max(0,Math.min(1,G)),(G===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(G===1?")":", "+G+")")}function Nr(G){return G=Math.max(0,Math.min(255,Math.round(G)||0)),(G<16?"0":"")+G.toString(16)}function Yr(G,F,Z,ut){return ut<=0?G=F=Z=NaN:Z<=0||Z>=1?G=F=NaN:F<=0&&(G=NaN),new fi(G,F,Z,ut)}function Kr(G){if(G instanceof fi)return new fi(G.h,G.s,G.l,G.opacity);if(G instanceof Mn||(G=Li(G)),!G)return new fi;if(G instanceof fi)return G;G=G.rgb();var F=G.r/255,Z=G.g/255,ut=G.b/255,Bt=Math.min(F,Z,ut),Jt=Math.max(F,Z,ut),ie=NaN,se=Jt-Bt,Te=(Jt+Bt)/2;return se?(F===Jt?ie=(Z-ut)/se+(Z<ut)*6:Z===Jt?ie=(ut-F)/se+2:ie=(F-Z)/se+4,se/=Te<.5?Jt+Bt:2-Jt-Bt,ie*=60):se=Te>0&&Te<1?0:ie,new fi(ie,se,Te,G.opacity)}function ni(G,F,Z,ut){return arguments.length===1?Kr(G):new fi(G,F,Z,ut==null?1:ut)}function fi(G,F,Z,ut){this.h=+G,this.s=+F,this.l=+Z,this.opacity=+ut}Tn(fi,ni,Rn(Mn,{brighter:function(F){return F=F==null?_n:Math.pow(_n,F),new fi(this.h,this.s,this.l*F,this.opacity)},darker:function(F){return F=F==null?Cn:Math.pow(Cn,F),new fi(this.h,this.s,this.l*F,this.opacity)},rgb:function(){var F=this.h%360+(this.h<0)*360,Z=isNaN(F)||isNaN(this.s)?0:this.s,ut=this.l,Bt=ut+(ut<.5?ut:1-ut)*Z,Jt=2*ut-Bt;return new pr($r(F>=240?F-240:F+120,Jt,Bt),$r(F,Jt,Bt),$r(F<120?F+240:F-120,Jt,Bt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var F=this.opacity;return F=isNaN(F)?1:Math.max(0,Math.min(1,F)),(F===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(F===1?")":", "+F+")")}}));function $r(G,F,Z){return(G<60?F+(Z-F)*G/60:G<180?Z:G<240?F+(Z-F)*(240-G)/60:F)*255}function ci(G,F,Z,ut,Bt){var Jt=G*G,ie=Jt*G;return((1-3*G+3*Jt-ie)*F+(4-6*Jt+3*ie)*Z+(1+3*G+3*Jt-3*ie)*ut+ie*Bt)/6}var Qr=function(G){var F=G.length-1;return function(Z){var ut=Z<=0?Z=0:Z>=1?(Z=1,F-1):Math.floor(Z*F),Bt=G[ut],Jt=G[ut+1],ie=ut>0?G[ut-1]:2*Bt-Jt,se=ut<F-1?G[ut+2]:2*Jt-Bt;return ci((Z-ut/F)*F,ie,Bt,Jt,se)}},gi=function(G){var F=G.length;return function(Z){var ut=Math.floor(((Z%=1)<0?++Z:Z)*F),Bt=G[(ut+F-1)%F],Jt=G[ut%F],ie=G[(ut+1)%F],se=G[(ut+2)%F];return ci((Z-ut/F)*F,Bt,Jt,ie,se)}},Oi=function(G){return function(){return G}};function bi(G,F){return function(Z){return G+Z*F}}function zi(G,F,Z){return G=Math.pow(G,Z),F=Math.pow(F,Z)-G,Z=1/Z,function(ut){return Math.pow(G+ut*F,Z)}}function Qi(G,F){var Z=F-G;return Z?bi(G,Z>180||Z<-180?Z-360*Math.round(Z/360):Z):Oi(isNaN(G)?F:G)}function io(G){return(G=+G)==1?Wi:function(F,Z){return Z-F?zi(F,Z,G):Oi(isNaN(F)?Z:F)}}function Wi(G,F){var Z=F-G;return Z?bi(G,Z):Oi(isNaN(G)?F:G)}var Zi=function G(F){var Z=io(F);function ut(Bt,Jt){var ie=Z((Bt=Ji(Bt)).r,(Jt=Ji(Jt)).r),se=Z(Bt.g,Jt.g),Te=Z(Bt.b,Jt.b),Ee=Wi(Bt.opacity,Jt.opacity);return function(un){return Bt.r=ie(un),Bt.g=se(un),Bt.b=Te(un),Bt.opacity=Ee(un),Bt+""}}return ut.gamma=G,ut}(1);function Pi(G){return function(F){var Z=F.length,ut=new Array(Z),Bt=new Array(Z),Jt=new Array(Z),ie,se;for(ie=0;ie<Z;++ie)se=Ji(F[ie]),ut[ie]=se.r||0,Bt[ie]=se.g||0,Jt[ie]=se.b||0;return ut=G(ut),Bt=G(Bt),Jt=G(Jt),se.opacity=1,function(Te){return se.r=ut(Te),se.g=Bt(Te),se.b=Jt(Te),se+""}}}var no=Pi(Qr),Mo=Pi(gi),ao=function(G,F){F||(F=[]);var Z=G?Math.min(F.length,G.length):0,ut=F.slice(),Bt;return function(Jt){for(Bt=0;Bt<Z;++Bt)ut[Bt]=G[Bt]*(1-Jt)+F[Bt]*Jt;return ut}};function uo(G){return ArrayBuffer.isView(G)&&!(G instanceof DataView)}var xo=function(G,F){return(uo(F)?ao:oe)(G,F)};function oe(G,F){var Z=F?F.length:0,ut=G?Math.min(Z,G.length):0,Bt=new Array(ut),Jt=new Array(Z),ie;for(ie=0;ie<ut;++ie)Bt[ie]=rn(G[ie],F[ie]);for(;ie<Z;++ie)Jt[ie]=F[ie];return function(se){for(ie=0;ie<ut;++ie)Jt[ie]=Bt[ie](se);return Jt}}var Kt=function(G,F){var Z=new Date;return G=+G,F=+F,function(ut){return Z.setTime(G*(1-ut)+F*ut),Z}},te=function(G,F){return G=+G,F=+F,function(Z){return G*(1-Z)+F*Z}},Oe=function(G,F){var Z={},ut={},Bt;(G===null||typeof G!="object")&&(G={}),(F===null||typeof F!="object")&&(F={});for(Bt in F)Bt in G?Z[Bt]=rn(G[Bt],F[Bt]):ut[Bt]=F[Bt];return function(Jt){for(Bt in Z)ut[Bt]=Z[Bt](Jt);return ut}},Qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,On=new RegExp(Qe.source,"g");function Vn(G){return function(){return G}}function Yn(G){return function(F){return G(F)+""}}var $e=function(G,F){var Z=Qe.lastIndex=On.lastIndex=0,ut,Bt,Jt,ie=-1,se=[],Te=[];for(G=G+"",F=F+"";(ut=Qe.exec(G))&&(Bt=On.exec(F));)(Jt=Bt.index)>Z&&(Jt=F.slice(Z,Jt),se[ie]?se[ie]+=Jt:se[++ie]=Jt),(ut=ut[0])===(Bt=Bt[0])?se[ie]?se[ie]+=Bt:se[++ie]=Bt:(se[++ie]=null,Te.push({i:ie,x:te(ut,Bt)})),Z=On.lastIndex;return Z<F.length&&(Jt=F.slice(Z),se[ie]?se[ie]+=Jt:se[++ie]=Jt),se.length<2?Te[0]?Yn(Te[0].x):Vn(F):(F=Te.length,function(Ee){for(var un=0,xn;un<F;++un)se[(xn=Te[un]).i]=xn.x(Ee);return se.join("")})},rn=function(G,F){var Z=typeof F,ut;return F==null||Z==="boolean"?Oi(F):(Z==="number"?te:Z==="string"?(ut=Li(F))?(F=ut,Zi):$e:F instanceof Li?Zi:F instanceof Date?Kt:uo(F)?ao:Array.isArray(F)?oe:typeof F.valueOf!="function"&&typeof F.toString!="function"||isNaN(F)?Oe:te)(G,F)},on=_("tvuL"),$n=function(F){return["fill","stroke","fillStyle","strokeStyle"].includes(F)},vr=function(F){return/^[r,R,L,l]{1}[\s]*\(/.test(F)},ar=[1,0,0,0,1,0,0,0,1];function rr(G,F,Z){var ut={},Bt=F.fromAttrs,Jt=F.toAttrs;if(!G.destroyed){var ie;for(var se in Jt)if(!Object(p.isEqual)(Bt[se],Jt[se]))if(se==="path"){var Te=Jt[se],Ee=Bt[se];Te.length>Ee.length?(Te=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.fillPathByDiff(Ee,Te),Ee=on.formatPath(Ee,Te),F.fromAttrs.path=Ee,F.toAttrs.path=Te):F.pathFormatted||(Te=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.formatPath(Ee,Te),F.fromAttrs.path=Ee,F.toAttrs.path=Te,F.pathFormatted=!0),ut[se]=[];for(var un=0;un<Te.length;un++){for(var xn=Te[un],_t=Ee[un],Xt=[],Se=0;Se<xn.length;Se++)Object(p.isNumber)(xn[Se])&&_t&&Object(p.isNumber)(_t[Se])?(ie=rn(_t[Se],xn[Se]),Xt.push(ie(Z))):Xt.push(xn[Se]);ut[se].push(Xt)}}else if(se==="matrix"){var Wt=xo(Bt[se]||ar,Jt[se]||ar),ue=Wt(Z);ut[se]=ue}else $n(se)&&vr(Jt[se])?ut[se]=Jt[se]:Object(p.isFunction)(Jt[se])||(ie=rn(Bt[se],Jt[se]),ut[se]=ie(Z));G.attr(ut)}}function Fr(G,F,Z){var ut=F.startTime,Bt=F.delay;if(Z<ut+Bt||F._paused)return!1;var Jt,ie=F.duration,se=F.easing;if(Z=Z-ut-F.delay,F.repeat)Jt=Z%ie/ie,Jt=at[se](Jt);else if(Jt=Z/ie,Jt<1)Jt=at[se](Jt);else return F.onFrame?G.attr(F.onFrame(1)):G.attr(F.toAttrs),!0;if(F.onFrame){var Te=F.onFrame(Jt);G.attr(Te)}else rr(G,F,Jt);return!1}var Ar=function(){function G(F){this.animators=[],this.current=0,this.timer=null,this.canvas=F}return G.prototype.initTimer=function(){var F=this,Z=!1,ut,Bt,Jt;this.timer=T(function(ie){if(F.current=ie,F.animators.length>0){for(var se=F.animators.length-1;se>=0;se--){if(ut=F.animators[se],ut.destroyed){F.removeAnimator(se);continue}if(!ut.isAnimatePaused()){Bt=ut.get("animations");for(var Te=Bt.length-1;Te>=0;Te--)Jt=Bt[Te],Z=Fr(ut,Jt,ie),Z&&(Bt.splice(Te,1),Z=!1,Jt.callback&&Jt.callback())}Bt.length===0&&F.removeAnimator(se)}var Ee=F.canvas.get("autoDraw");Ee||F.canvas.draw()}})},G.prototype.addAnimator=function(F){this.animators.push(F)},G.prototype.removeAnimator=function(F){this.animators.splice(F,1)},G.prototype.isAnimating=function(){return!!this.animators.length},G.prototype.stop=function(){this.timer&&this.timer.stop()},G.prototype.stopAllAnimations=function(F){F===void 0&&(F=!0),this.animators.forEach(function(Z){Z.stopAnimate(F)}),this.animators=[],this.canvas.draw()},G.prototype.getTime=function(){return this.current},G}(),wr=Ar,xr=_("5eLp"),Er=40,Ir=0,Lr=":",Pr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Dr(G,F){for(var Z in G)if(G.hasOwnProperty(Z)&&Z.indexOf(Lr+F)>=0)return!0;return!1}function ri(G,F,Z){Z.name=F,Z.target=G,Z.currentTarget=G,Z.delegateTarget=G,G.emit(F,Z)}function vi(G,F,Z){if(Z.bubbles){var ut=void 0,Bt=!1;if(F==="mouseenter"?(ut=Z.fromShape,Bt=!0):F==="mouseleave"&&(Bt=!0,ut=Z.toShape),G.isCanvas()&&Bt)return;if(ut&&Object(i.g)(G,ut)){Z.bubbles=!1;return}Z.name=F,Z.currentTarget=G,Z.delegateTarget=G,G.emit(F,Z)}}var ii=function(){function G(F){var Z=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ut){var Bt=ut.type;Z._triggerEvent(Bt,ut)},this._onDocumentMove=function(ut){var Bt=Z.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&(Z.dragging||Z.currentShape)){var ie=Z._getPointInfo(ut);Z.dragging&&Z._emitEvent("drag",ut,ie,Z.draggingShape)}},this._onDocumentMouseUp=function(ut){var Bt=Z.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&Z.dragging){var ie=Z._getPointInfo(ut);Z.draggingShape&&Z._emitEvent("drop",ut,ie,null),Z._emitEvent("dragend",ut,ie,Z.draggingShape),Z._afterDrag(Z.draggingShape,ie,ut)}},this.canvas=F.canvas}return G.prototype.init=function(){this._bindEvents()},G.prototype._bindEvents=function(){var F=this,Z=this.canvas.get("el");Object(i.a)(Pr,function(ut){Z.addEventListener(ut,F._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._clearEvents=function(){var F=this,Z=this.canvas.get("el");Object(i.a)(Pr,function(ut){Z.removeEventListener(ut,F._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._getEventObj=function(F,Z,ut,Bt,Jt,ie){var se=new xr.a(F,Z);return se.fromShape=Jt,se.toShape=ie,se.x=ut.x,se.y=ut.y,se.clientX=ut.clientX,se.clientY=ut.clientY,se.propagationPath.push(Bt),se},G.prototype._getShape=function(F,Z){return this.canvas.getShape(F.x,F.y,Z)},G.prototype._getPointInfo=function(F){var Z=this.canvas,ut=Z.getClientByEvent(F),Bt=Z.getPointByEvent(F);return{x:Bt.x,y:Bt.y,clientX:ut.x,clientY:ut.y}},G.prototype._triggerEvent=function(F,Z){var ut=this._getPointInfo(Z),Bt=this._getShape(ut,Z),Jt=this["_on"+F],ie=!1;if(Jt)Jt.call(this,ut,Bt,Z);else{var se=this.currentShape;F==="mouseenter"||F==="dragenter"||F==="mouseover"?(this._emitEvent(F,Z,ut,null,null,Bt),Bt&&this._emitEvent(F,Z,ut,Bt,null,Bt),F==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",Z,ut,null)):F==="mouseleave"||F==="dragleave"||F==="mouseout"?(ie=!0,se&&this._emitEvent(F,Z,ut,se,se,null),this._emitEvent(F,Z,ut,null,se,null),F==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",Z,ut,null)):this._emitEvent(F,Z,ut,Bt,null,null)}if(ie||(this.currentShape=Bt),Bt&&!Bt.get("destroyed")){var Te=this.canvas,Ee=Te.get("el");Ee.style.cursor=Bt.attr("cursor")||Te.get("cursor")}},G.prototype._onmousedown=function(F,Z,ut){ut.button===Ir&&(this.mousedownShape=Z,this.mousedownPoint=F,this.mousedownTimeStamp=ut.timeStamp),this._emitEvent("mousedown",ut,F,Z,null,null)},G.prototype._emitMouseoverEvents=function(F,Z,ut,Bt){var Jt=this.canvas.get("el");ut!==Bt&&(ut&&(this._emitEvent("mouseout",F,Z,ut,ut,Bt),this._emitEvent("mouseleave",F,Z,ut,ut,Bt),(!Bt||Bt.get("destroyed"))&&(Jt.style.cursor=this.canvas.get("cursor"))),Bt&&(this._emitEvent("mouseover",F,Z,Bt,ut,Bt),this._emitEvent("mouseenter",F,Z,Bt,ut,Bt)))},G.prototype._emitDragoverEvents=function(F,Z,ut,Bt,Jt){Bt?(Bt!==ut&&(ut&&this._emitEvent("dragleave",F,Z,ut,ut,Bt),this._emitEvent("dragenter",F,Z,Bt,ut,Bt)),Jt||this._emitEvent("dragover",F,Z,Bt)):ut&&this._emitEvent("dragleave",F,Z,ut,ut,Bt),Jt&&this._emitEvent("dragover",F,Z,Bt)},G.prototype._afterDrag=function(F,Z,ut){F&&(F.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Bt=this._getShape(Z,ut);Bt!==F&&this._emitMouseoverEvents(ut,Z,F,Bt),this.currentShape=Bt},G.prototype._onmouseup=function(F,Z,ut){if(ut.button===Ir){var Bt=this.draggingShape;this.dragging?(Bt&&this._emitEvent("drop",ut,F,Z),this._emitEvent("dragend",ut,F,Bt),this._afterDrag(Bt,F,ut)):(this._emitEvent("mouseup",ut,F,Z),Z===this.mousedownShape&&this._emitEvent("click",ut,F,Z),this.mousedownShape=null,this.mousedownPoint=null)}},G.prototype._ondragover=function(F,Z,ut){ut.preventDefault();var Bt=this.currentShape;this._emitDragoverEvents(ut,F,Bt,Z,!0)},G.prototype._onmousemove=function(F,Z,ut){var Bt=this.canvas,Jt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(ut,F,Jt,Z,!1),this._emitEvent("drag",ut,F,ie);else{var se=this.mousedownPoint;if(se){var Te=this.mousedownShape,Ee=ut.timeStamp,un=Ee-this.mousedownTimeStamp,xn=se.clientX-F.clientX,_t=se.clientY-F.clientY,Xt=xn*xn+_t*_t;un>120||Xt>Er?Te&&Te.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",ut,F,ie),this.mousedownShape=null,this.mousedownPoint=null):!Te&&Bt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ut,F,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ut,F,Jt,Z),this._emitEvent("mousemove",ut,F,Z)):(this._emitMouseoverEvents(ut,F,Jt,Z),this._emitEvent("mousemove",ut,F,Z))}else this._emitMouseoverEvents(ut,F,Jt,Z),this._emitEvent("mousemove",ut,F,Z)}},G.prototype._emitEvent=function(F,Z,ut,Bt,Jt,ie){var se=this._getEventObj(F,Z,ut,Bt,Jt,ie);if(Bt){se.shape=Bt,ri(Bt,F,se);for(var Te=Bt.getParent();Te;)Te.emitDelegation(F,se),se.propagationStopped||vi(Te,F,se),se.propagationPath.push(Te),Te=Te.getParent()}else{var Ee=this.canvas;ri(Ee,F,se)}},G.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},G}(),Si=ii,_i="px",Xi=Object(A.a)(),Bi=Xi&&Xi.name==="firefox",Di=function(G){Object(a.b)(F,G);function F(Z){var ut=G.call(this,Z)||this;return ut.initContainer(),ut.initDom(),ut.initEvents(),ut.initTimeline(),ut}return F.prototype.getDefaultCfg=function(){var Z=G.prototype.getDefaultCfg.call(this);return Z.cursor="default",Z.supportCSSTransform=!1,Z},F.prototype.initContainer=function(){var Z=this.get("container");Object(i.h)(Z)&&(Z=document.getElementById(Z),this.set("container",Z))},F.prototype.initDom=function(){var Z=this.createDom();this.set("el",Z);var ut=this.get("container");ut.appendChild(Z),this.setDOMSize(this.get("width"),this.get("height"))},F.prototype.initEvents=function(){var Z=new Si({canvas:this});Z.init(),this.set("eventController",Z)},F.prototype.initTimeline=function(){var Z=new wr(this);this.set("timeline",Z)},F.prototype.setDOMSize=function(Z,ut){var Bt=this.get("el");i.c&&(Bt.style.width=Z+_i,Bt.style.height=ut+_i)},F.prototype.changeSize=function(Z,ut){this.setDOMSize(Z,ut),this.set("width",Z),this.set("height",ut),this.onCanvasChange("changeSize")},F.prototype.getRenderer=function(){return this.get("renderer")},F.prototype.getCursor=function(){return this.get("cursor")},F.prototype.setCursor=function(Z){this.set("cursor",Z);var ut=this.get("el");i.c&&ut&&(ut.style.cursor=Z)},F.prototype.getPointByEvent=function(Z){var ut=this.get("supportCSSTransform");if(ut){if(Bi&&!Object(i.e)(Z.layerX)&&Z.layerX!==Z.offsetX)return{x:Z.layerX,y:Z.layerY};if(!Object(i.e)(Z.offsetX))return{x:Z.offsetX,y:Z.offsetY}}var Bt=this.getClientByEvent(Z),Jt=Bt.x,ie=Bt.y;return this.getPointByClient(Jt,ie)},F.prototype.getClientByEvent=function(Z){var ut=Z;return Z.touches&&(Z.type==="touchend"?ut=Z.changedTouches[0]:ut=Z.touches[0]),{x:ut.clientX,y:ut.clientY}},F.prototype.getPointByClient=function(Z,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:Z-Jt.left,y:ut-Jt.top}},F.prototype.getClientByPoint=function(Z,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:Z+Jt.left,y:ut+Jt.top}},F.prototype.draw=function(){},F.prototype.removeDom=function(){var Z=this.get("el");Z.parentNode.removeChild(Z)},F.prototype.clearEvents=function(){var Z=this.get("eventController");Z.destroy()},F.prototype.isCanvas=function(){return!0},F.prototype.getParent=function(){return null},F.prototype.destroy=function(){var Z=this.get("timeline");this.get("destroyed")||(this.clear(),Z&&Z.stop(),this.clearEvents(),this.removeDom(),G.prototype.destroy.call(this))},F}(e.a),ve=Gt.a=Di},Em2t:function(Gn,Gt,_){var at=_("bahg"),a=_("quyA"),A=_("0JQy");function e(i){return a(i)?A(i):at(i)}Gn.exports=e},"F/eT":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at});function at(a){return typeof a=="number"&&!isNaN(a)}},FAXy:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return T});var at=_("mrSG"),a=_("zJSt"),A=_("iTfj"),e=_("w02o"),i=_("YuPD"),p=_("tKoa"),m="liquid";function S(N){return[{percent:N,type:m}]}function l(N){var X=N.chart,tt=N.options,nt=tt.percent,vt=tt.color,ft=tt.liquidStyle,bt=tt.radius,St=tt.outline,pt=tt.wave;X.scale({percent:{min:0,max:1}}),X.data(S(nt));var ct=Object(i.b)({},N,{options:{xField:"type",yField:"percent",widthRatio:bt,interval:{color:vt,style:ft,shape:"liquid-fill-gauge"}}}),zt=Object(p.c)(ct).ext,Nt=zt.geometry;return Nt.customInfo({radius:bt,outline:St,wave:pt}),X.legend(!1),X.axis(!1),X.tooltip(!1),N}function M(N,X){var tt=N.chart,nt=N.options,vt=nt.statistic,ft=nt.percent,bt=nt.meta;if(tt.getController("annotation").clear(!0),vt.content&&!vt.content.formatter){var St=Object(A.get)(bt,["percent","formatter"]);vt.content.formatter=function(pt){var ct=pt.percent;return St?St(ct):(ct*100).toFixed(2)+"%"}}return Object(i.m)(tt,{statistic:vt,plotType:"liquid"},{percent:ft}),X&&tt.render(!0),N}function j(N){return Object(i.e)(l,M,Object(e.f)({}),e.a,e.j,e.c)(N)}var y=_("kXyF"),n=_("qaDU"),s=5e3;function d(N,X,tt){return N+(X-N)*tt}function E(N){var X=Object(at.a)({opacity:1},N.style);return N.color&&!X.fill&&(X.fill=N.color),X}function O(N){var X={fill:"#fff",fillOpacity:0,lineWidth:4},tt=Object(A.mix)({},X,N.style);return N.color&&!tt.stroke&&(tt.stroke=N.color),Object(A.isNumber)(N.opacity)&&(tt.opacity=tt.strokeOpacity=N.opacity),tt}function C(N,X,tt,nt){return X===0?[[N+1/2*tt/Math.PI/2,nt/2],[N+1/2*tt/Math.PI,nt],[N+tt/4,nt]]:X===1?[[N+1/2*tt/Math.PI/2*(Math.PI-2),nt],[N+1/2*tt/Math.PI/2*(Math.PI-1),nt/2],[N+tt/4,0]]:X===2?[[N+1/2*tt/Math.PI/2,-nt/2],[N+1/2*tt/Math.PI,-nt],[N+tt/4,-nt]]:[[N+1/2*tt/Math.PI/2*(Math.PI-2),-nt],[N+1/2*tt/Math.PI/2*(Math.PI-1),-nt/2],[N+tt/4,0]]}function v(N,X,tt,nt,vt,ft,bt){for(var St=Math.ceil(2*N/tt*4)*4,pt=[],ct=nt;ct<-Math.PI*2;)ct+=Math.PI*2;for(;ct>0;)ct-=Math.PI*2;ct=ct/Math.PI/2*tt;var zt=ft-N+ct-N*2;pt.push(["M",zt,X]);for(var Nt=0,wt=0;wt<St;++wt){var H=wt%4,ht=C(wt*tt/4,H,tt,vt);pt.push(["C",ht[0][0]+zt,-ht[0][1]+X,ht[1][0]+zt,-ht[1][1]+X,ht[2][0]+zt,-ht[2][1]+X]),wt===St-1&&(Nt=ht[2][0])}return pt.push(["L",Nt+zt,bt+N]),pt.push(["L",zt,bt+N]),pt.push(["Z"]),pt}function x(N,X,tt,nt,vt,ft,bt,St,pt){for(var ct=vt.fill,zt=vt.opacity,Nt=bt.getBBox(),wt=Nt.maxX-Nt.minX,H=Nt.maxY-Nt.minY,ht=0;ht<nt;ht++){var dt=nt<=1?0:ht/(nt-1),yt=ft.addShape("path",{name:"waterwave-path",attrs:{path:v(St,Nt.minY+H*tt,pt,0,wt/32,N,X),fill:ct,opacity:d(.2,.9,dt)*zt}});try{var Mt=Object(n.a)([["t",pt,0]]);yt.stopAnimate(),yt.animate({matrix:Mt},{duration:d(.5*s,s,dt),repeat:!0})}catch($){console.warn("off-screen group animate error!")}}}Object(y.registerShape)("interval","liquid-fill-gauge",{draw:function(X,tt){var nt=.5,vt=.5,ft=X.customInfo,bt=ft.radius,St=ft.outline,pt=ft.wave,ct=St.border,zt=St.distance,Nt=pt.count,wt=pt.length,H=Object(A.reduce)(X.points,function(P,Y){return Math.min(P,Y.x)},Infinity),ht=this.parsePoint({x:nt,y:vt}),dt=this.parsePoint({x:H,y:vt}),yt=ht.x-dt.x,Mt=Math.min(yt,dt.y*bt),$=E(X),lt=O(X);tt.addShape("circle",{name:"wrap",attrs:Object(A.mix)(lt,{x:ht.x,y:ht.y,r:Mt,fill:"transparent",lineWidth:ct})});var rt=tt.addGroup({name:"waves"}),z=rt.setClip({type:"circle",attrs:{x:ht.x,y:ht.y,r:Mt-zt-ct/2}});return x(ht.x,ht.y,1-X.points[1].y,Nt,$,rt,z,Mt*2,wt),tt}});var T=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.type="liquid",tt}return X.prototype.getDefaultOptions=function(){return{color:"#6a99f9",radius:.9,statistic:{title:!1,content:{formatter:function(nt){var vt=nt.percent;return(vt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192}}},X.prototype.changeData=function(tt){this.updateOption({percent:tt}),this.chart.data(S(tt)),M({chart:this.chart,options:this.options},!0)},X.prototype.getSchemaAdaptor=function(){return j},X}(a.a)},FH2j:function(Gn,Gt,_){"use strict";_.d(Gt,"getAdjust",function(){return i}),_.d(Gt,"registerAdjust",function(){return p});var at=_("Qci9"),a=_("WbAE"),A=_.n(a),e={},i=function(S){return e[S.toLowerCase()]},p=function(S,l){if(i(S))throw new Error("Adjust type '"+S+"' existed.");e[S.toLowerCase()]=l}},FLLP:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return X});var at=_("mrSG"),a=_("zJSt"),A=_("iTfj"),e=_("w02o"),i=_("tKoa"),p=_("YuPD"),m="$$yField$$",S="$$diffField$$",l="$$absoluteField$$",M="$$isTotal$$";function j(tt,nt,vt,ft,bt){var St,pt=[];if(Object(A.reduce)(tt,function(zt,Nt){var wt;Object(p.j)(p.a.WARN,Object(A.isNumber)(Nt[vt]),Nt[vt]+" is not a valid number");var H=Object(A.isUndefined)(Nt[vt])?null:Nt[vt];return pt.push(Object(at.a)(Object(at.a)({},Nt),(wt={},wt[ft]=[zt,zt+H],wt))),zt+H},0),pt.length&&bt){var ct=Object(A.get)(pt,[[tt.length-1],ft,[1]]);pt.push((St={},St[nt]=bt.label,St[vt]=ct,St[ft]=[0,ct],St))}return pt}function y(tt,nt,vt,ft){var bt=j(tt,nt,vt,m,ft);return bt.map(function(St,pt){var ct;return Object(A.isObject)(St)?Object(at.a)(Object(at.a)({},St),(ct={},ct[l]=St[m][1],ct[S]=St[m][1]-St[m][0],ct[M]=pt===tt.length,ct)):St})}var n=_("kXyF");function s(tt){for(var nt=[],vt=0;vt<tt.length;vt++){var ft=tt[vt];if(ft){var bt=vt===0?"M":"L";nt.push([bt,ft.x,ft.y])}}var St=tt[0];return nt.push(["L",St.x,St.y]),nt.push(["z"]),nt}function d(tt){return Object(p.b)({},tt.defaultStyle,tt.style,{fill:tt.color})}Object(n.registerShape)("interval","waterfall",{draw:function(nt,vt){var ft=nt.customInfo,bt=nt.points,St=nt.nextPoints,pt=vt.addGroup(),ct=this.parsePath(s(bt)),zt=d(nt);pt.addShape("path",{attrs:Object(at.a)(Object(at.a)({},zt),{path:ct})});var Nt=Object(A.get)(ft,"leaderLine");if(Nt&&St){var wt=[["M",bt[2].x,bt[2].y],["L",St[0].x,St[0].y]];bt[2].y===St[1].y&&(wt[1]=["L",St[1].x,St[1].y]),wt=this.parsePath(wt),pt.addShape("path",{attrs:Object(at.a)({path:wt},Nt.style||{})})}return pt}});function E(tt){var nt=tt.chart,vt=tt.options,ft=vt.data,bt=vt.xField,St=vt.yField,pt=vt.total,ct=vt.leaderLine,zt=vt.columnWidthRatio,Nt=vt.waterfallStyle,wt=vt.risingFill,H=vt.fallingFill,ht=vt.color;nt.data(y(ft,bt,St,pt));var dt=ht||function(lt){return Object(A.get)(lt,[M])?Object(A.get)(pt,["style","fill"],""):Object(A.get)(lt,[m,1])-Object(A.get)(lt,[m,0])>0?wt:H},yt=Object(p.b)({},tt,{options:{xField:bt,yField:m,seriesField:bt,rawFields:[St,S,M,m],widthRatio:zt,interval:{style:Nt,shape:"waterfall",color:dt}}}),Mt=Object(i.c)(yt).ext,$=Mt.geometry;return $.customInfo({leaderLine:ct}),tt}function O(tt){var nt,vt,ft=tt.options,bt=ft.xAxis,St=ft.yAxis,pt=ft.xField,ct=ft.yField,zt=ft.meta,Nt=Object(p.b)({},{alias:ct},Object(A.get)(zt,ct));return Object(p.e)(Object(e.f)((nt={},nt[pt]=bt,nt[ct]=St,nt[m]=St,nt),Object(p.b)({},zt,(vt={},vt[m]=Nt,vt[S]=Nt,vt[l]=Nt,vt))))(tt)}function C(tt){var nt=tt.chart,vt=tt.options,ft=vt.xAxis,bt=vt.yAxis,St=vt.xField,pt=vt.yField;return ft===!1?nt.axis(St,!1):nt.axis(St,ft),bt===!1?(nt.axis(pt,!1),nt.axis(m,!1)):(nt.axis(pt,bt),nt.axis(m,bt)),tt}function v(tt){var nt=tt.chart,vt=tt.options,ft=vt.legend,bt=vt.total,St=vt.risingFill,pt=vt.fallingFill;if(ft===!1)nt.legend(!1);else{var ct=[{name:"\u589E\u52A0",value:"increase",marker:{symbol:"square",style:{r:5,fill:St}}},{name:"\u51CF\u5C11",value:"decrease",marker:{symbol:"square",style:{r:5,fill:pt}}}];bt&&ct.push({name:bt.label||"",value:"total",marker:{symbol:"square",style:Object(p.b)({},{r:5},Object(A.get)(bt,"style"))}}),nt.legend(Object(p.b)({},{custom:!0,position:"top",items:ct},ft)),nt.removeInteraction("legend-filter")}return tt}function x(tt){var nt=tt.chart,vt=tt.options,ft=vt.label,bt=vt.labelMode,St=vt.xField,pt=Object(p.c)(nt,"interval");if(!ft)pt.label(!1);else{var ct=ft.callback,zt=Object(at.c)(ft,["callback"]);pt.label({fields:bt==="absolute"?[l,St]:[S,St],callback:ct,cfg:Object(p.o)(zt)})}return tt}function T(tt){var nt=tt.chart,vt=tt.options,ft=vt.tooltip,bt=vt.xField,St=vt.yField;if(ft!==!1){nt.tooltip(Object(at.a)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[St]},ft));var pt=nt.geometries[0];(ft==null?void 0:ft.formatter)?pt.tooltip(bt+"*"+St,ft.formatter):pt.tooltip(St)}else nt.tooltip(!1);return tt}function N(tt){return Object(p.e)(E,O,C,v,T,x,e.i,e.j,e.c,e.a,Object(e.b)())(tt)}var X=function(tt){Object(at.b)(nt,tt);function nt(){var vt=tt!==null&&tt.apply(this,arguments)||this;return vt.type="waterfall",vt}return nt.prototype.changeData=function(vt){var ft=this.options,bt=ft.xField,St=ft.yField,pt=ft.total;this.updateOption({data:vt}),this.chart.changeData(y(vt,bt,St,pt))},nt.prototype.getSchemaAdaptor=function(){return N},nt.prototype.getDefaultOptions=function(){return{label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{label:"\u603B\u8BA1",style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}}},nt}(a.a)},FPPI:function(Gn,Gt,_){"use strict";Gt.a=function(at,a,A,e,i){for(var p=at.children,m,S=-1,l=p.length,M=at.value&&(e-a)/at.value;++S<l;)m=p[S],m.y0=A,m.y1=i,m.x0=a,m.x1=a+=m.value*M}},FxDU:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var at=_("QO+J"),a=_("j5sG"),A=typeof ResizeObserver!="undefined"?a.createSensor:at.createSensor;Gt.createSensor=A},I4jL:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"c",function(){return e});var at=_("FPPI"),a=_("7IPS"),A=(1+Math.sqrt(5))/2;function e(i,p,m,S,l,M){for(var j=[],y=p.children,n,s,d=0,E=0,O=y.length,C,v,x=p.value,T,N,X,tt,nt,vt,ft;d<O;){C=l-m,v=M-S;do T=y[E++].value;while(!T&&E<O);for(N=X=T,vt=Math.max(v/C,C/v)/(x*i),ft=T*T*vt,nt=Math.max(X/ft,ft/N);E<O;++E){if(T+=s=y[E].value,s<N&&(N=s),s>X&&(X=s),ft=T*T*vt,tt=Math.max(X/ft,ft/N),tt>nt){T-=s;break}nt=tt}j.push(n={value:T,dice:C<v,children:y.slice(d,E)}),n.dice?Object(at.a)(n,m,S,l,x?S+=v*T/x:M):Object(a.a)(n,m,S,x?m+=C*T/x:l,M),x-=T,d=E}return j}Gt.a=function i(p){function m(S,l,M,j,y){e(p,S,l,M,j,y)}return m.ratio=function(S){return i((S=+S)>1?S:1)},m}(A)},I7nc:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"a",function(){return e});var at=_("iTfj"),a="Invalid field: it must be a string!";function A(i,p){var m=i.field,S=i.fields;if(Object(at.isString)(m))return m;if(Object(at.isArray)(m))return console.warn(a),m[0];if(console.warn(a+" will try to get fields instead."),Object(at.isString)(S))return S;if(Object(at.isArray)(S)&&S.length)return S[0];if(p)return p;throw new TypeError(a)}function e(i){var p=[];return i&&i.each?i.each(function(m){p.push(m)}):i&&i.eachNode&&i.eachNode(function(m){p.push(m)}),p}},IeU1:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at}),_.d(Gt,"b",function(){return a});function at(A){return A==null?null:a(A)}function a(A){if(typeof A!="function")throw new Error;return A}},IvmH:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at}),_.d(Gt,"b",function(){return a});var at={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},a={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},A=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},KMYG:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return i});var at=_("mrSG"),a=_("5HRO"),A=_("YuPD"),e=_("WOQw");function i(p){var m=p.options,S=m.polygon,l=m.xField,M=m.yField,j=m.seriesField,y=m.tooltip,n=Object(a.a)(y,[l,M,j]),s=n.fields,d=n.formatter;return S?Object(e.a)(Object(A.b)({},p,{options:{type:"polygon",colorField:j,tooltipFields:s,mapping:Object(at.a)({tooltip:d},S)}})):p}},KavR:function(Gn,Gt,_){"use strict";var at=_("AA7f"),a=_("iTfj"),A=_("0Xep"),e=_("Qci9");function i(m,S){return(S-m)*Math.random()+m}var p=function(m){Object(at.b)(S,m);function S(){return m!==null&&m.apply(this,arguments)||this}return S.prototype.process=function(l){var M=a.clone(l),j=a.flatten(M);return this.adjustData(M,j),M},S.prototype.adjustDim=function(l,M,j){var y=this,n=this.groupData(j,l);return a.each(n,function(s,d){return y.adjustGroup(s,l,parseFloat(d),M)})},S.prototype.getAdjustOffset=function(l){var M=l.pre,j=l.next,y=(j-M)*A.c;return i(M+y,j-y)},S.prototype.adjustGroup=function(l,M,j,y){var n=this,s=this.getAdjustRange(M,j,y);return a.each(l,function(d){d[M]=n.getAdjustOffset(s)}),l},S}(e.a);Gt.a=p},KxBF:function(Gn,Gt){function _(at,a,A){var e=-1,i=at.length;a<0&&(a=-a>i?0:i+a),A=A>i?i:A,A<0&&(A+=i),i=a>A?0:A-a>>>0,a>>>=0;for(var p=Array(i);++e<i;)p[e]=at[e+a];return p}Gn.exports=_},L16w:function(Gn,Gt,_){"use strict";Gt.a={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},LmB6:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("f6Jy"),A=_("sstZ"),e=function(i){Object(at.b)(p,i);function p(m){var S=i.call(this)||this;S.destroyed=!1;var l=S.getDefaultCfg();return S.cfg=Object(A.i)(l,m),S}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.get=function(m){return this.cfg[m]},p.prototype.set=function(m,S){this.cfg[m]=S},p.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},p}(a.a);Gt.a=e},LvGN:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return p}),_.d(Gt,"c",function(){return T}),_.d(Gt,"d",function(){return tt}),_.d(Gt,"e",function(){return B}),_.d(Gt,"b",function(){return Ut});var at=_("iTfj"),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,A=/[^\s\,]+/ig;function e(Ct){var Vt=Ct||[];if(Object(at.isArray)(Vt))return Vt;if(Object(at.isString)(Vt))return Vt=Vt.match(a),Object(at.each)(Vt,function(Ht,re){if(Ht=Ht.match(A),Ht[0].length>1){var pe=Ht[0].charAt(0);Ht.splice(1,0,Ht[0].substr(1)),Ht[0]=pe}Object(at.each)(Ht,function(ye,we){isNaN(ye)||(Ht[we]=+ye)}),Vt[re]=Ht}),Vt}var i=e;function p(Ct,Vt){for(var Ht=[],re=0,pe=Ct.length;pe-2*!Vt>re;re+=2){var ye=[{x:+Ct[re-2],y:+Ct[re-1]},{x:+Ct[re],y:+Ct[re+1]},{x:+Ct[re+2],y:+Ct[re+3]},{x:+Ct[re+4],y:+Ct[re+5]}];Vt?re?pe-4===re?ye[3]={x:+Ct[0],y:+Ct[1]}:pe-2===re&&(ye[2]={x:+Ct[0],y:+Ct[1]},ye[3]={x:+Ct[2],y:+Ct[3]}):ye[0]={x:+Ct[pe-2],y:+Ct[pe-1]}:pe-4===re?ye[3]=ye[2]:re||(ye[0]={x:+Ct[re],y:+Ct[re+1]}),Ht.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return Ht}function m(Ct,Vt){var Ht=[],re=[];function pe(ye,we){if(ye.length===1)Ht.push(ye[0]),re.push(ye[0]);else{for(var Ne=[],Ke=0;Ke<ye.length-1;Ke++)Ke===0&&Ht.push(ye[0]),Ke===ye.length-2&&re.push(ye[Ke+1]),Ne[Ke]=[(1-we)*ye[Ke][0]+we*ye[Ke+1][0],(1-we)*ye[Ke][1]+we*ye[Ke+1][1]];pe(Ne,we)}}return Ct.length&&pe(Ct,Vt),{left:Ht,right:re.reverse()}}function S(Ct,Vt,Ht){var re=[[Ct[1],Ct[2]]];Ht=Ht||2;var pe=[];Vt[0]==="A"?(re.push(Vt[6]),re.push(Vt[7])):Vt[0]==="C"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]]),re.push([Vt[5],Vt[6]])):Vt[0]==="S"||Vt[0]==="Q"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]])):re.push([Vt[1],Vt[2]]);for(var ye=re,we=1/Ht,Ne=0;Ne<Ht-1;Ne++){var Ke=we/(1-we*Ne),pn=m(ye,Ke);pe.push(pn.left),ye=pn.right}pe.push(ye);var hn=pe.map(function(kn){var Tn=[];return kn.length===4&&(Tn.push("C"),Tn=Tn.concat(kn[2])),kn.length>=3&&(kn.length===3&&Tn.push("Q"),Tn=Tn.concat(kn[1])),kn.length===2&&Tn.push("L"),Tn=Tn.concat(kn[kn.length-1]),Tn});return hn}function l(Ct,Vt,Ht){if(Ht===1)return[[].concat(Ct)];var re=[];if(Vt[0]==="L"||Vt[0]==="C"||Vt[0]==="Q")re=re.concat(S(Ct,Vt,Ht));else{var pe=[].concat(Ct);pe[0]==="M"&&(pe[0]="L");for(var ye=0;ye<=Ht-1;ye++)re.push(pe)}return re}function M(Ct,Vt){if(Ct.length===1)return Ct;var Ht=Ct.length-1,re=Vt.length-1,pe=Ht/re,ye=[];if(Ct.length===1&&Ct[0][0]==="M"){for(var we=0;we<re-Ht;we++)Ct.push(Ct[0]);return Ct}for(var we=0;we<re;we++){var Ne=Math.floor(pe*we);ye[Ne]=(ye[Ne]||0)+1}var Ke=ye.reduce(function(pn,hn,kn){return kn===Ht?pn.concat(Ct[Ht]):pn.concat(l(Ct[kn],Ct[kn+1],hn))},[]);return Ke.unshift(Ct[0]),(Vt[re]==="Z"||Vt[re]==="z")&&Ke.push("Z"),Ke}function j(Ct,Vt,Ht){var re=null,pe=Ht;return Vt<pe&&(pe=Vt,re="add"),Ct<pe&&(pe=Ct,re="del"),{type:re,min:pe}}var y=function(Vt,Ht){var re=Vt.length,pe=Ht.length,ye,we,Ne=0;if(re===0||pe===0)return null;for(var Ke=[],pn=0;pn<=re;pn++)Ke[pn]=[],Ke[pn][0]={min:pn};for(var hn=0;hn<=pe;hn++)Ke[0][hn]={min:hn};for(var pn=1;pn<=re;pn++){ye=Vt[pn-1];for(var hn=1;hn<=pe;hn++){we=Ht[hn-1],Object(at.isEqual)(ye,we)?Ne=0:Ne=1;var kn=Ke[pn-1][hn].min+1,Tn=Ke[pn][hn-1].min+1,Rn=Ke[pn-1][hn-1].min+Ne;Ke[pn][hn]=j(kn,Tn,Rn)}}return Ke};function n(Ct,Vt){var Ht=y(Ct,Vt),re=Ct.length,pe=Vt.length,ye=[],we=1,Ne=1;if(Ht[re][pe]!==re){for(var Ke=1;Ke<=re;Ke++){var pn=Ht[Ke][Ke].min;Ne=Ke;for(var hn=we;hn<=pe;hn++)Ht[Ke][hn].min<pn&&(pn=Ht[Ke][hn].min,Ne=hn);we=Ne,Ht[Ke][we].type&&ye.push({index:Ke-1,type:Ht[Ke][we].type})}for(var Ke=ye.length-1;Ke>=0;Ke--)we=ye[Ke].index,ye[Ke].type==="add"?Ct.splice(we,0,[].concat(Ct[we])):Ct.splice(we,1)}if(re=Ct.length,re<pe)for(var Ke=0;Ke<pe-re;Ke++)Ct[re-1][0]==="z"||Ct[re-1][0]==="Z"?Ct.splice(re-2,0,Ct[re-2]):Ct.push(Ct[re-1]);return Ct}function s(Ct){var Vt=[];switch(Ct[0]){case"M":Vt.push([Ct[1],Ct[2]]);break;case"L":Vt.push([Ct[1],Ct[2]]);break;case"A":Vt.push([Ct[6],Ct[7]]);break;case"Q":Vt.push([Ct[3],Ct[4]]),Vt.push([Ct[1],Ct[2]]);break;case"T":Vt.push([Ct[1],Ct[2]]);break;case"C":Vt.push([Ct[5],Ct[6]]),Vt.push([Ct[1],Ct[2]]),Vt.push([Ct[3],Ct[4]]);break;case"S":Vt.push([Ct[3],Ct[4]]),Vt.push([Ct[1],Ct[2]]);break;case"H":Vt.push([Ct[1],Ct[1]]);break;case"V":Vt.push([Ct[1],Ct[1]]);break;default:}return Vt}function d(Ct,Vt,Ht){for(var re=[].concat(Ct),pe,ye=1/(Ht+1),we=s(Vt)[0],Ne=1;Ne<=Ht;Ne++)ye*=Ne,pe=Math.floor(Ct.length*ye),pe===0?re.unshift([we[0]*ye+Ct[pe][0]*(1-ye),we[1]*ye+Ct[pe][1]*(1-ye)]):re.splice(pe,0,[we[0]*ye+Ct[pe][0]*(1-ye),we[1]*ye+Ct[pe][1]*(1-ye)]);return re}function E(Ct,Vt){if(Ct.length<=1)return Ct;for(var Ht,re=0;re<Vt.length;re++)if(Ct[re][0]!==Vt[re][0])switch(Ht=s(Ct[re]),Vt[re][0]){case"M":Ct[re]=["M"].concat(Ht[0]);break;case"L":Ct[re]=["L"].concat(Ht[0]);break;case"A":Ct[re]=[].concat(Vt[re]),Ct[re][6]=Ht[0][0],Ct[re][7]=Ht[0][1];break;case"Q":if(Ht.length<2)if(re>0)Ht=d(Ht,Ct[re-1],1);else{Ct[re]=Vt[re];break}Ct[re]=["Q"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"T":Ct[re]=["T"].concat(Ht[0]);break;case"C":if(Ht.length<3)if(re>0)Ht=d(Ht,Ct[re-1],2);else{Ct[re]=Vt[re];break}Ct[re]=["C"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"S":if(Ht.length<2)if(re>0)Ht=d(Ht,Ct[re-1],1);else{Ct[re]=Vt[re];break}Ct[re]=["S"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;default:Ct[re]=Vt[re]}return Ct}function O(Ct,Vt,Ht,re,pe){return pe?[["M",+Ct+ +pe,Vt],["l",Ht-pe*2,0],["a",pe,pe,0,0,1,pe,pe],["l",0,re-pe*2],["a",pe,pe,0,0,1,-pe,pe],["l",pe*2-Ht,0],["a",pe,pe,0,0,1,-pe,-pe],["l",0,pe*2-re],["a",pe,pe,0,0,1,pe,-pe],["z"]]:[["M",Ct,Vt],["l",Ht,0],["l",0,re],["l",-Ht,0],["z"]]}var C=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,v=new RegExp("([a-z])["+C+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+C+"]*,?["+C+"]*)+)","ig"),x=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+C+"]*,?["+C+"]*","ig");function T(Ct){if(!Ct)return null;if(Object(at.isArray)(Ct))return Ct;var Vt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ht=[];return String(Ct).replace(v,function(re,pe,ye){var we=[],Ne=pe.toLowerCase();if(ye.replace(x,function(Ke,pn){pn&&we.push(+pn)}),Ne==="m"&&we.length>2&&(Ht.push([pe].concat(we.splice(0,2))),Ne="l",pe=pe==="m"?"l":"L"),Ne==="o"&&we.length===1&&Ht.push([pe,we[0]]),Ne==="r")Ht.push([pe].concat(we));else for(;we.length>=Vt[Ne]&&(Ht.push([pe].concat(we.splice(0,Vt[Ne]))),!!Vt[Ne]););return""}),Ht}var N=/[a-z]/;function X(Ct,Vt){return[Vt[0]+(Vt[0]-Ct[0]),Vt[1]+(Vt[1]-Ct[1])]}function tt(Ct){var Vt=T(Ct);if(!Vt||!Vt.length)return[["M",0,0]];for(var Ht=!1,re=0;re<Vt.length;re++){var pe=Vt[re][0];if(N.test(pe)||["V","H","T","S"].indexOf(pe)>=0){Ht=!0;break}}if(!Ht)return Vt;var ye=[],we=0,Ne=0,Ke=0,pn=0,hn=0,kn,Tn,Rn=Vt[0];(Rn[0]==="M"||Rn[0]==="m")&&(we=+Rn[1],Ne=+Rn[2],Ke=we,pn=Ne,hn++,ye[0]=["M",we,Ne]);for(var re=hn,Mn=Vt.length;re<Mn;re++){var Cn=Vt[re],_n=ye[re-1],Kn=[],pe=Cn[0],tr=pe.toUpperCase();if(pe!==tr)switch(Kn[0]=tr,tr){case"A":Kn[1]=Cn[1],Kn[2]=Cn[2],Kn[3]=Cn[3],Kn[4]=Cn[4],Kn[5]=Cn[5],Kn[6]=+Cn[6]+we,Kn[7]=+Cn[7]+Ne;break;case"V":Kn[1]=+Cn[1]+Ne;break;case"H":Kn[1]=+Cn[1]+we;break;case"M":Ke=+Cn[1]+we,pn=+Cn[2]+Ne;break;default:for(var or=1,nr=Cn.length;or<nr;or++)Kn[or]=+Cn[or]+(or%2?we:Ne)}else Kn=Vt[re];switch(tr){case"Z":we=+Ke,Ne=+pn;break;case"H":we=Kn[1],Kn=["L",we,Ne];break;case"V":Ne=Kn[1],Kn=["L",we,Ne];break;case"T":we=Kn[1],Ne=Kn[2];var er=X([_n[1],_n[2]],[_n[3],_n[4]]);Kn=["Q",er[0],er[1],we,Ne];break;case"S":we=Kn[Kn.length-2],Ne=Kn[Kn.length-1];var Sr=_n.length,Vr=X([_n[Sr-4],_n[Sr-3]],[_n[Sr-2],_n[Sr-1]]);Kn=["C",Vr[0],Vr[1],Kn[1],Kn[2],we,Ne];break;case"M":Ke=Kn[Kn.length-2],pn=Kn[Kn.length-1];break;default:we=Kn[Kn.length-2],Ne=Kn[Kn.length-1]}ye.push(Kn)}return ye}var nt=function Ct(Vt,Ht,re,pe,ye,we,Ne,Ke,pn,hn){re===pe&&(re+=1);var kn=Math.PI*120/180,Tn=Math.PI/180*(+ye||0),Rn=[],Mn,Cn,_n,Kn,tr,or=function(ci,Qr,gi){var Oi=ci*Math.cos(gi)-Qr*Math.sin(gi),bi=ci*Math.sin(gi)+Qr*Math.cos(gi);return{x:Oi,y:bi}};if(hn)Cn=hn[0],_n=hn[1],Kn=hn[2],tr=hn[3];else{Mn=or(Vt,Ht,-Tn),Vt=Mn.x,Ht=Mn.y,Mn=or(Ke,pn,-Tn),Ke=Mn.x,pn=Mn.y,Vt===Ke&&Ht===pn&&(Ke+=1,pn+=1);var nr=(Vt-Ke)/2,er=(Ht-pn)/2,Sr=nr*nr/(re*re)+er*er/(pe*pe);Sr>1&&(Sr=Math.sqrt(Sr),re=Sr*re,pe=Sr*pe);var Vr=re*re,ti=pe*pe,hi=(we===Ne?-1:1)*Math.sqrt(Math.abs((Vr*ti-Vr*er*er-ti*nr*nr)/(Vr*er*er+ti*nr*nr)));Kn=hi*re*er/pe+(Vt+Ke)/2,tr=hi*-pe*nr/re+(Ht+pn)/2,Cn=Math.asin(Number(((Ht-tr)/pe).toFixed(9))),_n=Math.asin(Number(((pn-tr)/pe).toFixed(9))),Cn=Vt<Kn?Math.PI-Cn:Cn,_n=Ke<Kn?Math.PI-_n:_n,Cn<0&&(Cn=Math.PI*2+Cn),_n<0&&(_n=Math.PI*2+_n),Ne&&Cn>_n&&(Cn=Cn-Math.PI*2),!Ne&&_n>Cn&&(_n=_n-Math.PI*2)}var Fi=_n-Cn;if(Math.abs(Fi)>kn){var to=_n,si=Ke,Ci=pn;_n=Cn+kn*(Ne&&_n>Cn?1:-1),Ke=Kn+re*Math.cos(_n),pn=tr+pe*Math.sin(_n),Rn=Ct(Ke,pn,re,pe,ye,0,Ne,si,Ci,[_n,to,Kn,tr])}Fi=_n-Cn;var Ui=Math.cos(Cn),Li=Math.sin(Cn),Vi=Math.cos(_n),ro=Math.sin(_n),jr=Math.tan(Fi/4),Ji=4/3*re*jr,pr=4/3*pe*jr,Xr=[Vt,Ht],Br=[Vt+Ji*Li,Ht-pr*Ui],Nr=[Ke+Ji*ro,pn-pr*Vi],Yr=[Ke,pn];if(Br[0]=2*Xr[0]-Br[0],Br[1]=2*Xr[1]-Br[1],hn)return[Br,Nr,Yr].concat(Rn);Rn=[Br,Nr,Yr].concat(Rn).join().split(",");for(var Kr=[],ni=0,fi=Rn.length;ni<fi;ni++)Kr[ni]=ni%2?or(Rn[ni-1],Rn[ni],Tn).y:or(Rn[ni],Rn[ni+1],Tn).x;return Kr},vt=function(Vt,Ht,re,pe){return[Vt,Ht,re,pe,re,pe]},ft=function(Vt,Ht,re,pe,ye,we){var Ne=1/3,Ke=2/3;return[Ne*Vt+Ke*re,Ne*Ht+Ke*pe,Ne*ye+Ke*re,Ne*we+Ke*pe,ye,we]};function bt(Ct,Vt){var Ht=tt(Ct),re=Vt&&tt(Vt),pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},we=[],Ne=[],Ke="",pn="",hn,kn=function(nr,er,Sr){var Vr,ti;if(!nr)return["C",er.x,er.y,er.x,er.y,er.x,er.y];switch(!(nr[0]in{T:1,Q:1})&&(er.qx=er.qy=null),nr[0]){case"M":er.X=nr[1],er.Y=nr[2];break;case"A":nr=["C"].concat(nt.apply(0,[er.x,er.y].concat(nr.slice(1))));break;case"S":Sr==="C"||Sr==="S"?(Vr=er.x*2-er.bx,ti=er.y*2-er.by):(Vr=er.x,ti=er.y),nr=["C",Vr,ti].concat(nr.slice(1));break;case"T":Sr==="Q"||Sr==="T"?(er.qx=er.x*2-er.qx,er.qy=er.y*2-er.qy):(er.qx=er.x,er.qy=er.y),nr=["C"].concat(ft(er.x,er.y,er.qx,er.qy,nr[1],nr[2]));break;case"Q":er.qx=nr[1],er.qy=nr[2],nr=["C"].concat(ft(er.x,er.y,nr[1],nr[2],nr[3],nr[4]));break;case"L":nr=["C"].concat(vt(er.x,er.y,nr[1],nr[2]));break;case"H":nr=["C"].concat(vt(er.x,er.y,nr[1],er.y));break;case"V":nr=["C"].concat(vt(er.x,er.y,er.x,nr[1]));break;case"Z":nr=["C"].concat(vt(er.x,er.y,er.X,er.Y));break;default:break}return nr},Tn=function(nr,er){if(nr[er].length>7){nr[er].shift();for(var Sr=nr[er];Sr.length;)we[er]="A",re&&(Ne[er]="A"),nr.splice(er++,0,["C"].concat(Sr.splice(0,6)));nr.splice(er,1),hn=Math.max(Ht.length,re&&re.length||0)}},Rn=function(nr,er,Sr,Vr,ti){nr&&er&&nr[ti][0]==="M"&&er[ti][0]!=="M"&&(er.splice(ti,0,["M",Vr.x,Vr.y]),Sr.bx=0,Sr.by=0,Sr.x=nr[ti][1],Sr.y=nr[ti][2],hn=Math.max(Ht.length,re&&re.length||0))};hn=Math.max(Ht.length,re&&re.length||0);for(var Mn=0;Mn<hn;Mn++){Ht[Mn]&&(Ke=Ht[Mn][0]),Ke!=="C"&&(we[Mn]=Ke,Mn&&(pn=we[Mn-1])),Ht[Mn]=kn(Ht[Mn],pe,pn),we[Mn]!=="A"&&Ke==="C"&&(we[Mn]="C"),Tn(Ht,Mn),re&&(re[Mn]&&(Ke=re[Mn][0]),Ke!=="C"&&(Ne[Mn]=Ke,Mn&&(pn=Ne[Mn-1])),re[Mn]=kn(re[Mn],ye,pn),Ne[Mn]!=="A"&&Ke==="C"&&(Ne[Mn]="C"),Tn(re,Mn)),Rn(Ht,re,pe,ye,Mn),Rn(re,Ht,ye,pe,Mn);var Cn=Ht[Mn],_n=re&&re[Mn],Kn=Cn.length,tr=re&&_n.length;pe.x=Cn[Kn-2],pe.y=Cn[Kn-1],pe.bx=parseFloat(Cn[Kn-4])||pe.x,pe.by=parseFloat(Cn[Kn-3])||pe.y,ye.bx=re&&(parseFloat(_n[tr-4])||ye.x),ye.by=re&&(parseFloat(_n[tr-3])||ye.y),ye.x=re&&_n[tr-2],ye.y=re&&_n[tr-1]}return re?[Ht,re]:Ht}var St=function(Vt,Ht,re,pe,ye){var we=-3*Ht+9*re-9*pe+3*ye,Ne=Vt*we+6*Ht-12*re+6*pe;return Vt*Ne-3*Ht+3*re},pt=function(Vt,Ht,re,pe,ye,we,Ne,Ke,pn){pn===null&&(pn=1),pn=pn>1?1:pn<0?0:pn;for(var hn=pn/2,kn=12,Tn=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Rn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Mn=0,Cn=0;Cn<kn;Cn++){var _n=hn*Tn[Cn]+hn,Kn=St(_n,Vt,re,ye,Ne),tr=St(_n,Ht,pe,we,Ke),or=Kn*Kn+tr*tr;Mn+=Rn[Cn]*Math.sqrt(or)}return hn*Mn},ct=function(Vt,Ht,re,pe,ye,we,Ne,Ke){for(var pn=[],hn=[[],[]],kn,Tn,Rn,Mn,Cn=0;Cn<2;++Cn){if(Cn===0?(Tn=6*Vt-12*re+6*ye,kn=-3*Vt+9*re-9*ye+3*Ne,Rn=3*re-3*Vt):(Tn=6*Ht-12*pe+6*we,kn=-3*Ht+9*pe-9*we+3*Ke,Rn=3*pe-3*Ht),Math.abs(kn)<1e-12){if(Math.abs(Tn)<1e-12)continue;Mn=-Rn/Tn,Mn>0&&Mn<1&&pn.push(Mn);continue}var _n=Tn*Tn-4*Rn*kn,Kn=Math.sqrt(_n);if(!(_n<0)){var tr=(-Tn+Kn)/(2*kn);tr>0&&tr<1&&pn.push(tr);var or=(-Tn-Kn)/(2*kn);or>0&&or<1&&pn.push(or)}}for(var nr=pn.length,er=nr,Sr;nr--;)Mn=pn[nr],Sr=1-Mn,hn[0][nr]=Sr*Sr*Sr*Vt+3*Sr*Sr*Mn*re+3*Sr*Mn*Mn*ye+Mn*Mn*Mn*Ne,hn[1][nr]=Sr*Sr*Sr*Ht+3*Sr*Sr*Mn*pe+3*Sr*Mn*Mn*we+Mn*Mn*Mn*Ke;return hn[0][er]=Vt,hn[1][er]=Ht,hn[0][er+1]=Ne,hn[1][er+1]=Ke,hn[0].length=hn[1].length=er+2,{min:{x:Math.min.apply(0,hn[0]),y:Math.min.apply(0,hn[1])},max:{x:Math.max.apply(0,hn[0]),y:Math.max.apply(0,hn[1])}}},zt=function(Vt,Ht,re,pe,ye,we,Ne,Ke){if(!(Math.max(Vt,re)<Math.min(ye,Ne)||Math.min(Vt,re)>Math.max(ye,Ne)||Math.max(Ht,pe)<Math.min(we,Ke)||Math.min(Ht,pe)>Math.max(we,Ke))){var pn=(Vt*pe-Ht*re)*(ye-Ne)-(Vt-re)*(ye*Ke-we*Ne),hn=(Vt*pe-Ht*re)*(we-Ke)-(Ht-pe)*(ye*Ke-we*Ne),kn=(Vt-re)*(we-Ke)-(Ht-pe)*(ye-Ne);if(!!kn){var Tn=pn/kn,Rn=hn/kn,Mn=+Tn.toFixed(2),Cn=+Rn.toFixed(2);if(!(Mn<+Math.min(Vt,re).toFixed(2)||Mn>+Math.max(Vt,re).toFixed(2)||Mn<+Math.min(ye,Ne).toFixed(2)||Mn>+Math.max(ye,Ne).toFixed(2)||Cn<+Math.min(Ht,pe).toFixed(2)||Cn>+Math.max(Ht,pe).toFixed(2)||Cn<+Math.min(we,Ke).toFixed(2)||Cn>+Math.max(we,Ke).toFixed(2)))return{x:Tn,y:Rn}}}},Nt=function(Vt,Ht,re){return Ht>=Vt.x&&Ht<=Vt.x+Vt.width&&re>=Vt.y&&re<=Vt.y+Vt.height},wt=function(Vt,Ht,re,pe){return Vt===null&&(Vt=Ht=re=pe=0),Ht===null&&(Ht=Vt.y,re=Vt.width,pe=Vt.height,Vt=Vt.x),{x:Vt,y:Ht,width:re,w:re,height:pe,h:pe,x2:Vt+re,y2:Ht+pe,cx:Vt+re/2,cy:Ht+pe/2,r1:Math.min(re,pe)/2,r2:Math.max(re,pe)/2,r0:Math.sqrt(re*re+pe*pe)/2,path:O(Vt,Ht,re,pe),vb:[Vt,Ht,re,pe].join(" ")}},H=function(Vt,Ht){return Vt=wt(Vt),Ht=wt(Ht),Nt(Ht,Vt.x,Vt.y)||Nt(Ht,Vt.x2,Vt.y)||Nt(Ht,Vt.x,Vt.y2)||Nt(Ht,Vt.x2,Vt.y2)||Nt(Vt,Ht.x,Ht.y)||Nt(Vt,Ht.x2,Ht.y)||Nt(Vt,Ht.x,Ht.y2)||Nt(Vt,Ht.x2,Ht.y2)||(Vt.x<Ht.x2&&Vt.x>Ht.x||Ht.x<Vt.x2&&Ht.x>Vt.x)&&(Vt.y<Ht.y2&&Vt.y>Ht.y||Ht.y<Vt.y2&&Ht.y>Vt.y)},ht=function(Vt,Ht,re,pe,ye,we,Ne,Ke){Object(at.isArray)(Vt)||(Vt=[Vt,Ht,re,pe,ye,we,Ne,Ke]);var pn=ct.apply(null,Vt);return wt(pn.min.x,pn.min.y,pn.max.x-pn.min.x,pn.max.y-pn.min.y)},dt=function(Vt,Ht,re,pe,ye,we,Ne,Ke,pn){var hn=1-pn,kn=Math.pow(hn,3),Tn=Math.pow(hn,2),Rn=pn*pn,Mn=Rn*pn,Cn=kn*Vt+Tn*3*pn*re+hn*3*pn*pn*ye+Mn*Ne,_n=kn*Ht+Tn*3*pn*pe+hn*3*pn*pn*we+Mn*Ke,Kn=Vt+2*pn*(re-Vt)+Rn*(ye-2*re+Vt),tr=Ht+2*pn*(pe-Ht)+Rn*(we-2*pe+Ht),or=re+2*pn*(ye-re)+Rn*(Ne-2*ye+re),nr=pe+2*pn*(we-pe)+Rn*(Ke-2*we+pe),er=hn*Vt+pn*re,Sr=hn*Ht+pn*pe,Vr=hn*ye+pn*Ne,ti=hn*we+pn*Ke,hi=90-Math.atan2(Kn-or,tr-nr)*180/Math.PI;return{x:Cn,y:_n,m:{x:Kn,y:tr},n:{x:or,y:nr},start:{x:er,y:Sr},end:{x:Vr,y:ti},alpha:hi}},yt=function(Vt,Ht,re){var pe=ht(Vt),ye=ht(Ht);if(!H(pe,ye))return re?0:[];for(var we=pt.apply(0,Vt),Ne=pt.apply(0,Ht),Ke=~~(we/8),pn=~~(Ne/8),hn=[],kn=[],Tn={},Rn=re?0:[],Mn=0;Mn<Ke+1;Mn++){var Cn=dt.apply(0,Vt.concat(Mn/Ke));hn.push({x:Cn.x,y:Cn.y,t:Mn/Ke})}for(var Mn=0;Mn<pn+1;Mn++){var Cn=dt.apply(0,Ht.concat(Mn/pn));kn.push({x:Cn.x,y:Cn.y,t:Mn/pn})}for(var Mn=0;Mn<Ke;Mn++)for(var _n=0;_n<pn;_n++){var Kn=hn[Mn],tr=hn[Mn+1],or=kn[_n],nr=kn[_n+1],er=Math.abs(tr.x-Kn.x)<.001?"y":"x",Sr=Math.abs(nr.x-or.x)<.001?"y":"x",Vr=zt(Kn.x,Kn.y,tr.x,tr.y,or.x,or.y,nr.x,nr.y);if(Vr){if(Tn[Vr.x.toFixed(4)]===Vr.y.toFixed(4))continue;Tn[Vr.x.toFixed(4)]=Vr.y.toFixed(4);var ti=Kn.t+Math.abs((Vr[er]-Kn[er])/(tr[er]-Kn[er]))*(tr.t-Kn.t),hi=or.t+Math.abs((Vr[Sr]-or[Sr])/(nr[Sr]-or[Sr]))*(nr.t-or.t);ti>=0&&ti<=1&&hi>=0&&hi<=1&&(re?Rn++:Rn.push({x:Vr.x,y:Vr.y,t1:ti,t2:hi}))}}return Rn},Mt=function(Vt,Ht,re){Vt=bt(Vt),Ht=bt(Ht);for(var pe,ye,we,Ne,Ke,pn,hn,kn,Tn,Rn,Mn=re?0:[],Cn=0,_n=Vt.length;Cn<_n;Cn++){var Kn=Vt[Cn];if(Kn[0]==="M")pe=Ke=Kn[1],ye=pn=Kn[2];else{Kn[0]==="C"?(Tn=[pe,ye].concat(Kn.slice(1)),pe=Tn[6],ye=Tn[7]):(Tn=[pe,ye,pe,ye,Ke,pn,Ke,pn],pe=Ke,ye=pn);for(var tr=0,or=Ht.length;tr<or;tr++){var nr=Ht[tr];if(nr[0]==="M")we=hn=nr[1],Ne=kn=nr[2];else{nr[0]==="C"?(Rn=[we,Ne].concat(nr.slice(1)),we=Rn[6],Ne=Rn[7]):(Rn=[we,Ne,we,Ne,hn,kn,hn,kn],we=hn,Ne=kn);var er=yt(Tn,Rn,re);if(re)Mn+=er;else{for(var Sr=0,Vr=er.length;Sr<Vr;Sr++)er[Sr].segment1=Cn,er[Sr].segment2=tr,er[Sr].bez1=Tn,er[Sr].bez2=Rn;Mn=Mn.concat(er)}}}}}return Mn};function $(Ct,Vt){return Mt(Ct,Vt)}var lt=/,?([a-z]),?/gi;function rt(Ct){return Ct.join(",").replace(lt,"$1")}function z(Ct){return Math.sqrt(Ct[0]*Ct[0]+Ct[1]*Ct[1])}function P(Ct,Vt){return z(Ct)*z(Vt)?(Ct[0]*Vt[0]+Ct[1]*Vt[1])/(z(Ct)*z(Vt)):1}function Y(Ct,Vt){return(Ct[0]*Vt[1]<Ct[1]*Vt[0]?-1:1)*Math.acos(P(Ct,Vt))}function k(Ct,Vt){return Ct[0]===Vt[0]&&Ct[1]===Vt[1]}function h(Ct,Vt){var Ht=Vt[1],re=Vt[2],pe=Object(at.mod)(Object(at.toRadian)(Vt[3]),Math.PI*2),ye=Vt[4],we=Vt[5],Ne=Ct[0],Ke=Ct[1],pn=Vt[6],hn=Vt[7],kn=Math.cos(pe)*(Ne-pn)/2+Math.sin(pe)*(Ke-hn)/2,Tn=-1*Math.sin(pe)*(Ne-pn)/2+Math.cos(pe)*(Ke-hn)/2,Rn=kn*kn/(Ht*Ht)+Tn*Tn/(re*re);Rn>1&&(Ht*=Math.sqrt(Rn),re*=Math.sqrt(Rn));var Mn=Ht*Ht*(Tn*Tn)+re*re*(kn*kn),Cn=Mn?Math.sqrt((Ht*Ht*(re*re)-Mn)/Mn):1;ye===we&&(Cn*=-1),isNaN(Cn)&&(Cn=0);var _n=re?Cn*Ht*Tn/re:0,Kn=Ht?Cn*-re*kn/Ht:0,tr=(Ne+pn)/2+Math.cos(pe)*_n-Math.sin(pe)*Kn,or=(Ke+hn)/2+Math.sin(pe)*_n+Math.cos(pe)*Kn,nr=[(kn-_n)/Ht,(Tn-Kn)/re],er=[(-1*kn-_n)/Ht,(-1*Tn-Kn)/re],Sr=Y([1,0],nr),Vr=Y(nr,er);return P(nr,er)<=-1&&(Vr=Math.PI),P(nr,er)>=1&&(Vr=0),we===0&&Vr>0&&(Vr=Vr-2*Math.PI),we===1&&Vr<0&&(Vr=Vr+2*Math.PI),{cx:tr,cy:or,rx:k(Ct,[pn,hn])?0:Ht,ry:k(Ct,[pn,hn])?0:re,startAngle:Sr,endAngle:Sr+Vr,xRotation:pe,arcFlag:ye,sweepFlag:we}}function g(Ct,Vt){return[Vt[0]+(Vt[0]-Ct[0]),Vt[1]+(Vt[1]-Ct[1])]}function B(Ct){Ct=i(Ct);for(var Vt=[],Ht=null,re=null,pe=null,ye=0,we=Ct.length,Ne=0;Ne<we;Ne++){var Ke=Ct[Ne];re=Ct[Ne+1];var pn=Ke[0],hn={command:pn,prePoint:Ht,params:Ke,startTangent:null,endTangent:null};switch(pn){case"M":pe=[Ke[1],Ke[2]],ye=Ne;break;case"A":var kn=h(Ht,Ke);hn.arcParams=kn;break;default:break}if(pn==="Z")Ht=pe,re=Ct[ye+1];else{var Tn=Ke.length;Ht=[Ke[Tn-2],Ke[Tn-1]]}re&&re[0]==="Z"&&(re=Ct[ye],Vt[ye]&&(Vt[ye].prePoint=Ht)),hn.currentPoint=Ht,Vt[ye]&&k(Ht,Vt[ye].currentPoint)&&(Vt[ye].prePoint=hn.prePoint);var Rn=re?[re[re.length-2],re[re.length-1]]:null;hn.nextPoint=Rn;var Mn=hn.prePoint;if(["L","H","V"].includes(pn))hn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],hn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]];else if(pn==="Q"){var Cn=[Ke[1],Ke[2]];hn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],hn.endTangent=[Ht[0]-Cn[0],Ht[1]-Cn[1]]}else if(pn==="T"){var _n=Vt[Ne-1],Cn=g(_n.currentPoint,Mn);_n.command==="Q"?(hn.command="Q",hn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],hn.endTangent=[Ht[0]-Cn[0],Ht[1]-Cn[1]]):(hn.command="TL",hn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],hn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]])}else if(pn==="C"){var Kn=[Ke[1],Ke[2]],tr=[Ke[3],Ke[4]];hn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]}else if(pn==="S"){var _n=Vt[Ne-1],Kn=g(_n.currentPoint,Mn),tr=[Ke[1],Ke[2]];_n.command==="C"?(hn.command="C",hn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]):(hn.command="SQ",hn.startTangent=[Mn[0]-tr[0],Mn[1]-tr[1]],hn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]])}else if(pn==="A"){var or=.001,nr=hn.arcParams||{},er=nr.cx,Sr=er===void 0?0:er,Vr=nr.cy,ti=Vr===void 0?0:Vr,hi=nr.rx,Fi=hi===void 0?0:hi,to=nr.ry,si=to===void 0?0:to,Ci=nr.sweepFlag,Ui=Ci===void 0?0:Ci,Li=nr.startAngle,Vi=Li===void 0?0:Li,ro=nr.endAngle,jr=ro===void 0?0:ro;Ui===0&&(or*=-1);var Ji=Fi*Math.cos(Vi-or)+Sr,pr=si*Math.sin(Vi-or)+ti;hn.startTangent=[Ji-pe[0],pr-pe[1]];var Xr=Fi*Math.cos(Vi+jr+or)+Sr,Br=si*Math.sin(Vi+jr-or)+ti;hn.endTangent=[Mn[0]-Xr,Mn[1]-Br]}Vt.push(hn)}return Vt}var V=function(Vt,Ht,re){return Vt>=Ht&&Vt<=re};function q(Ct,Vt,Ht,re){var pe=.001,ye={x:Ht.x-Ct.x,y:Ht.y-Ct.y},we={x:Vt.x-Ct.x,y:Vt.y-Ct.y},Ne={x:re.x-Ht.x,y:re.y-Ht.y},Ke=we.x*Ne.y-we.y*Ne.x,pn=Ke*Ke,hn=we.x*we.x+we.y*we.y,kn=Ne.x*Ne.x+Ne.y*Ne.y,Tn=null;if(pn>pe*hn*kn){var Rn=(ye.x*Ne.y-ye.y*Ne.x)/Ke,Mn=(ye.x*we.y-ye.y*we.x)/Ke;V(Rn,0,1)&&V(Mn,0,1)&&(Tn={x:Ct.x+Rn*we.x,y:Ct.y+Rn*we.y})}return Tn}var it=1e-6;function ot(Ct){return Math.abs(Ct)<it?0:Ct<0?-1:1}function At(Ct,Vt,Ht){return(Ht[0]-Ct[0])*(Vt[1]-Ct[1])==(Vt[0]-Ct[0])*(Ht[1]-Ct[1])&&Math.min(Ct[0],Vt[0])<=Ht[0]&&Ht[0]<=Math.max(Ct[0],Vt[0])&&Math.min(Ct[1],Vt[1])<=Ht[1]&&Ht[1]<=Math.max(Ct[1],Vt[1])}function gt(Ct,Vt,Ht){var re=!1,pe=Ct.length;if(pe<=2)return!1;for(var ye=0;ye<pe;ye++){var we=Ct[ye],Ne=Ct[(ye+1)%pe];if(At(we,Ne,[Vt,Ht]))return!0;ot(we[1]-Ht)>0!=ot(Ne[1]-Ht)>0&&ot(Vt-(Ht-we[1])*(we[0]-Ne[0])/(we[1]-Ne[1])-we[0])<0&&(re=!re)}return re}function mt(Ct){for(var Vt=[],Ht=Ct.length,re=0;re<Ht-1;re++){var pe=Ct[re],ye=Ct[re+1];Vt.push({from:{x:pe[0],y:pe[1]},to:{x:ye[0],y:ye[1]}})}if(Vt.length>1){var we=Ct[0],Ne=Ct[Ht-1];Vt.push({from:{x:Ne[0],y:Ne[1]},to:{x:we[0],y:we[1]}})}return Vt}function Ot(Ct,Vt){var Ht=!1;return Object(at.each)(Ct,function(re){if(q(re.from,re.to,Vt.from,Vt.to))return Ht=!0,!1}),Ht}function It(Ct){var Vt=Ct.map(function(re){return re[0]}),Ht=Ct.map(function(re){return re[1]});return{minX:Math.min.apply(null,Vt),maxX:Math.max.apply(null,Vt),minY:Math.min.apply(null,Ht),maxY:Math.max.apply(null,Ht)}}function Dt(Ct,Vt){return!(Vt.minX>Ct.maxX||Vt.maxX<Ct.minX||Vt.minY>Ct.maxY||Vt.maxY<Ct.minY)}function Ut(Ct,Vt){if(Ct.length<2||Vt.length<2)return!1;var Ht=It(Ct),re=It(Vt);if(!Dt(Ht,re))return!1;var pe=!1;if(Object(at.each)(Vt,function(Ke){if(gt(Ct,Ke[0],Ke[1]))return pe=!0,!1}),pe||(Object(at.each)(Ct,function(Ke){if(gt(Vt,Ke[0],Ke[1]))return pe=!0,!1}),pe))return!0;var ye=mt(Ct),we=mt(Vt),Ne=!1;return Object(at.each)(we,function(Ke){if(Ot(ye,Ke))return Ne=!0,!1}),Ne}},MaEA:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("zK8m"),A=_("aSjE"),e=function(i){Object(at.b)(p,i);function p(m){return i.call(this,m)||this}return p.prototype._isInBBox=function(m,S){var l=this.getBBox();return l.minX<=m&&l.maxX>=m&&l.minY<=S&&l.maxY>=S},p.prototype.afterAttrsChange=function(m){i.prototype.afterAttrsChange.call(this,m),this.clearCacheBBox()},p.prototype.getBBox=function(){var m=this.cfg.bbox;return m||(m=this.calculateBBox(),this.set("bbox",m)),m},p.prototype.getCanvasBBox=function(){var m=this.cfg.canvasBBox;return m||(m=this.calculateCanvasBBox(),this.set("canvasBBox",m)),m},p.prototype.applyMatrix=function(m){i.prototype.applyMatrix.call(this,m),this.set("canvasBBox",null)},p.prototype.calculateCanvasBBox=function(){var m=this.getBBox(),S=this.getTotalMatrix(),l=m.minX,M=m.minY,j=m.maxX,y=m.maxY;if(S){var n=Object(A.c)(S,[m.minX,m.minY]),s=Object(A.c)(S,[m.maxX,m.minY]),d=Object(A.c)(S,[m.minX,m.maxY]),E=Object(A.c)(S,[m.maxX,m.maxY]);l=Math.min(n[0],s[0],d[0],E[0]),j=Math.max(n[0],s[0],d[0],E[0]),M=Math.min(n[1],s[1],d[1],E[1]),y=Math.max(n[1],s[1],d[1],E[1])}var O=this.attrs;if(O.shadowColor){var C=O.shadowBlur,v=C===void 0?0:C,x=O.shadowOffsetX,T=x===void 0?0:x,N=O.shadowOffsetY,X=N===void 0?0:N,tt=l-v+T,nt=j+v+T,vt=M-v+X,ft=y+v+X;l=Math.min(l,tt),j=Math.max(j,nt),M=Math.min(M,vt),y=Math.max(y,ft)}return{x:l,y:M,minX:l,minY:M,maxX:j,maxY:y,width:j-l,height:y-M}},p.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},p.prototype.isClipShape=function(){return this.get("isClipShape")},p.prototype.isInShape=function(m,S){return!1},p.prototype.isOnlyHitBox=function(){return!1},p.prototype.isHit=function(m,S){var l=this.get("startArrowShape"),M=this.get("endArrowShape"),j=[m,S,1];j=this.invertFromMatrix(j);var y=j[0],n=j[1],s=this._isInBBox(y,n);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(y,n)&&(this.isInShape(y,n)||l&&l.isHit(y,n)||M&&M.isHit(y,n)))},p}(a.a);Gt.a=e},MeYt:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("iTfj"),A=_("1//c"),e=_("jqgP"),i=_("5UbV"),p=_("NmWf"),m="update_status",S=["visible","tip","delegateObject"],l=["container","group","shapesMap","isRegister","isUpdating","destroyed"],M=function(j){Object(at.b)(y,j);function y(){return j!==null&&j.apply(this,arguments)||this}return y.prototype.getDefaultCfg=function(){var n=j.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},n),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},y.prototype.remove=function(){this.clear();var n=this.get("group");n.remove()},y.prototype.clear=function(){var n=this.get("group");n.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},y.prototype.getChildComponentById=function(n){var s=this.getElementById(n),d=s&&s.get("component");return d},y.prototype.getElementById=function(n){return this.get("shapesMap")[n]},y.prototype.getElementByLocalId=function(n){var s=this.getElementId(n);return this.getElementById(s)},y.prototype.getElementsByName=function(n){var s=[];return Object(a.each)(this.get("shapesMap"),function(d){d.get("name")===n&&s.push(d)}),s},y.prototype.getContainer=function(){return this.get("container")},y.prototype.updateInner=function(n){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},y.prototype.render=function(){var n=this.get("offScreenGroup");n||(n=this.offScreenRender());var s=this.get("group");this.updateElements(n,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},y.prototype.show=function(){var n=this.get("group");n.show(),this.set("visible",!0)},y.prototype.hide=function(){var n=this.get("group");n.hide(),this.set("visible",!1)},y.prototype.setCapture=function(n){var s=this.get("group");s.set("capture",n),this.set("capture",n)},y.prototype.destroy=function(){this.removeEvent(),this.remove(),j.prototype.destroy.call(this)},y.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},y.prototype.getLayoutBBox=function(){var n=this.get("group"),s=this.getInnerLayoutBBox(),d=n.getTotalMatrix();return d&&(s=Object(e.a)(d,s)),s},y.prototype.on=function(n,s,d){var E=this.get("group");return E.on(n,s,d),this},y.prototype.off=function(n,s){var d=this.get("group");return d&&d.off(n,s),this},y.prototype.emit=function(n,s){var d=this.get("group");d.emit(n,s)},y.prototype.init=function(){j.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},y.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},y.prototype.delegateEmit=function(n,s){var d=this.get("group");s.target=d,d.emit(n,s),Object(A.a)(d,n,s)},y.prototype.createOffScreenGroup=function(){var n=this.get("group"),s=n.getGroupBase(),d=new s({delegateObject:this.getDelegateObject()});return d},y.prototype.applyOffset=function(){var n=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:n,y:s})},y.prototype.initGroup=function(){var n=this.get("container");this.set("group",n.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},y.prototype.offScreenRender=function(){this.clearOffScreenCache();var n=this.createOffScreenGroup();return this.renderInner(n),this.set("offScreenGroup",n),this.set("offScreenBBox",Object(i.d)(n)),n},y.prototype.addGroup=function(n,s){this.appendDelegateObject(n,s);var d=n.addGroup(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addShape=function(n,s){this.appendDelegateObject(n,s);var d=n.addShape(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addComponent=function(n,s){var d=s.id,E=s.component,O=Object(at.c)(s,["id","component"]),C=new E(Object(at.a)(Object(at.a)({},O),{id:d,container:n,updateAutoRender:this.get("updateAutoRender")}));return C.init(),C.render(),this.get("isRegister")&&this.registerElement(C.get("group")),C},y.prototype.initEvent=function(){},y.prototype.removeEvent=function(){var n=this.get("group");n.off()},y.prototype.getElementId=function(n){var s=this.get("id"),d=this.get("name");return s+"-"+d+"-"+n},y.prototype.registerElement=function(n){var s=n.get("id");this.get("shapesMap")[s]=n},y.prototype.unregisterElement=function(n){var s=n.get("id");delete this.get("shapesMap")[s]},y.prototype.moveElementTo=function(n,s){var d=Object(e.f)(s);n.attr("matrix",d)},y.prototype.addAnimation=function(n,s,d){var E=s.attr("opacity");Object(a.isNil)(E)&&(E=1),s.attr("opacity",0),s.animate({opacity:E},d)},y.prototype.removeAnimation=function(n,s,d){s.animate({opacity:0},d)},y.prototype.updateAnimation=function(n,s,d,E){s.animate(d,E)},y.prototype.updateElements=function(n,s){var d=this,E=this.get("animate"),O=this.get("animateOption"),C=n.getChildren().slice(0),v;Object(a.each)(C,function(x){var T=x.get("id"),N=d.getElementById(T),X=x.get("name");if(N)if(x.get("isComponent")){var tt=x.get("component"),nt=N.get("component"),vt=Object(a.pick)(tt.cfg,Object(a.difference)(Object(a.keys)(tt.cfg),l));nt.update(vt),N.set(m,"update")}else{var ft=d.getReplaceAttrs(N,x);E&&O.update?d.updateAnimation(X,N,ft,O.update):N.attr(ft),x.isGroup()&&d.updateElements(x,N),Object(a.each)(S,function(ct){N.set(ct,x.get(ct))}),Object(i.m)(N,x),v=N,N.set(m,"update")}else{s.add(x);var bt=s.getChildren();if(bt.splice(bt.length-1,1),v){var St=bt.indexOf(v);bt.splice(St+1,0,x)}else bt.unshift(x);if(d.registerElement(x),x.set(m,"add"),x.get("isComponent")){var tt=x.get("component");tt.set("container",s)}else x.isGroup()&&d.registerNewGroup(x);if(v=x,E){var pt=d.get("isInit")?O.appear:O.enter;pt&&d.addAnimation(X,x,pt)}}})},y.prototype.clearUpdateStatus=function(n){var s=n.getChildren();Object(a.each)(s,function(d){d.set(m,null)})},y.prototype.clearOffScreenCache=function(){var n=this.get("offScreenGroup");n&&n.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},y.prototype.getDelegateObject=function(){var n,s=this.get("name"),d=(n={},n[s]=this,n.component=this,n);return d},y.prototype.appendDelegateObject=function(n,s){var d=n.get("delegateObject");s.delegateObject||(s.delegateObject={}),Object(a.mix)(s.delegateObject,d)},y.prototype.getReplaceAttrs=function(n,s){var d=n.attr(),E=s.attr();return Object(a.each)(d,function(O,C){E[C]===void 0&&(E[C]=void 0)}),E},y.prototype.registerNewGroup=function(n){var s=this,d=n.getChildren();Object(a.each)(d,function(E){s.registerElement(E),E.set(m,"add"),E.isGroup()&&s.registerNewGroup(E)})},y.prototype.deleteElements=function(){var n=this,s=this.get("shapesMap"),d=[];Object(a.each)(s,function(C,v){!C.get(m)||C.destroyed?d.push([v,C]):C.set(m,null)});var E=this.get("animate"),O=this.get("animateOption");Object(a.each)(d,function(C){var v=C[0],x=C[1];if(!x.destroyed){var T=x.get("name");if(E&&O.leave){var N=Object(a.mix)({callback:function(){n.removeElement(x)}},O.leave);n.removeAnimation(T,x,N)}else n.removeElement(x)}delete s[v]})},y.prototype.removeElement=function(n){if(n.get("isGroup")){var s=n.get("component");s&&s.destroy()}n.remove()},y}(p.a);Gt.a=M},Mj7Y:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return k});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("w02o"),i=_("tKoa"),p=_("iTfj"),m={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function S(h,g){return g=Object(p.assign)({},m,g),l(h,g)}function l(h,g){var B=St();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(gt){Object(p.isNil)(g[gt])||B[gt](g[gt])}),B.words(h),g.imageMask&&B.createMask(g.imageMask);var V=B.start(),q=V._tags;q.forEach(function(gt){gt.x+=g.size[0]/2,gt.y+=g.size[1]/2});var it=g.size,ot=it[0],At=it[1];return q.push({text:"",value:0,x:0,y:0,opacity:0}),q.push({text:"",value:0,x:ot,y:At,opacity:0}),q}var M=Math.PI/180,j=1<<11>>5,y=1<<11;function n(h){return h.text}function s(){return"serif"}function d(){return"normal"}function E(h){return h.value}function O(){return~~(Math.random()*2)*90}function C(){return 1}function v(h,g,B,V){if(!g.sprite){var q=h.context,it=h.ratio;q.clearRect(0,0,(j<<5)/it,y/it);var ot=0,At=0,gt=0,mt=B.length;for(--V;++V<mt;){g=B[V],q.save(),q.font=g.style+" "+g.weight+" "+~~((g.size+1)/it)+"px "+g.font;var Ot=q.measureText(g.text+"m").width*it,It=g.size<<1;if(g.rotate){var Dt=Math.sin(g.rotate*M),Ut=Math.cos(g.rotate*M),Ct=Ot*Ut,Vt=Ot*Dt,Ht=It*Ut,re=It*Dt;Ot=Math.max(Math.abs(Ct+re),Math.abs(Ct-re))+31>>5<<5,It=~~Math.max(Math.abs(Vt+Ht),Math.abs(Vt-Ht))}else Ot=Ot+31>>5<<5;if(It>gt&&(gt=It),ot+Ot>=j<<5&&(ot=0,At+=gt,gt=0),At+It>=y)break;q.translate((ot+(Ot>>1))/it,(At+(It>>1))/it),g.rotate&&q.rotate(g.rotate*M),q.fillText(g.text,0,0),g.padding&&(q.lineWidth=2*g.padding,q.strokeText(g.text,0,0)),q.restore(),g.width=Ot,g.height=It,g.xoff=ot,g.yoff=At,g.x1=Ot>>1,g.y1=It>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,ot+=Ot}for(var pe=q.getImageData(0,0,(j<<5)/it,y/it).data,ye=[];--V>=0;)if(g=B[V],!!g.hasText){for(var Ot=g.width,we=Ot>>5,It=g.y1-g.y0,Ne=0;Ne<It*we;Ne++)ye[Ne]=0;if(ot=g.xoff,ot==null)return;At=g.yoff;for(var Ke=0,pn=-1,hn=0;hn<It;hn++){for(var Ne=0;Ne<Ot;Ne++){var kn=we*hn+(Ne>>5),Tn=pe[(At+hn)*(j<<5)+(ot+Ne)<<2]?1<<31-Ne%32:0;ye[kn]|=Tn,Ke|=Tn}Ke?pn=hn:(g.y0++,It--,hn--,At++)}g.y1=g.y0+pn,g.sprite=ye.slice(0,(g.y1-g.y0)*we)}}}function x(h,g,B){B>>=5;for(var V=h.sprite,q=h.width>>5,it=h.x-(q<<4),ot=it&127,At=32-ot,gt=h.y1-h.y0,mt=(h.y+h.y0)*B+(it>>5),Ot,It=0;It<gt;It++){Ot=0;for(var Dt=0;Dt<=q;Dt++)if((Ot<<At|(Dt<q?(Ot=V[It*q+Dt])>>>ot:0))&g[mt+Dt])return!0;mt+=B}return!1}function T(h,g){var B=h[0],V=h[1];g.x+g.x0<B.x&&(B.x=g.x+g.x0),g.y+g.y0<B.y&&(B.y=g.y+g.y0),g.x+g.x1>V.x&&(V.x=g.x+g.x1),g.y+g.y1>V.y&&(V.y=g.y+g.y1)}function N(h,g){return h.x+h.x1>g[0].x&&h.x+h.x0<g[1].x&&h.y+h.y1>g[0].y&&h.y+h.y0<g[1].y}function X(h){var g=h[0]/h[1];return function(B){return[g*(B*=.1)*Math.cos(B),B*Math.sin(B)]}}function tt(h){var g=4,B=g*h[0]/h[1],V=0,q=0;return function(it){var ot=it<0?-1:1;switch(Math.sqrt(1+4*ot*it)-ot&3){case 0:V+=B;break;case 1:q+=g;break;case 2:V-=B;break;default:q-=g;break}return[V,q]}}function nt(h){for(var g=[],B=-1;++B<h;)g[B]=0;return g}function vt(){return document.createElement("canvas")}function ft(h){return Object(p.isFunction)(h)?h:function(){return h}}var bt={archimedean:X,rectangular:tt};function St(){var h=[256,256],g=s,B=E,V=d,q=O,it=C,ot=X,At=Math.random,gt=[],mt=Infinity,Ot=n,It=d,Dt=vt,Ut={};Ut.start=function(){var Ht=h[0],re=h[1],pe=Ct(Dt()),ye=Ut.board?Ut.board:nt((h[0]>>5)*h[1]),we=gt.length,Ne=[],Ke=gt.map(function(Tn,Rn,Mn){return Tn.text=Ot.call(this,Tn,Rn,Mn),Tn.font=g.call(this,Tn,Rn,Mn),Tn.style=It.call(this,Tn,Rn,Mn),Tn.weight=V.call(this,Tn,Rn,Mn),Tn.rotate=q.call(this,Tn,Rn,Mn),Tn.size=~~B.call(this,Tn,Rn,Mn),Tn.padding=it.call(this,Tn,Rn,Mn),Tn}).sort(function(Tn,Rn){return Rn.size-Tn.size}),pn=-1,hn=Ut.board?[{x:0,y:0},{x:Ht,y:re}]:null;kn();function kn(){for(var Tn=Date.now();Date.now()-Tn<mt&&++pn<we;){var Rn=Ke[pn];Rn.x=Ht*(At()+.5)>>1,Rn.y=re*(At()+.5)>>1,v(pe,Rn,Ke,pn),Rn.hasText&&Vt(ye,Rn,hn)&&(Ne.push(Rn),hn?Ut.hasImage||T(hn,Rn):hn=[{x:Rn.x+Rn.x0,y:Rn.y+Rn.y0},{x:Rn.x+Rn.x1,y:Rn.y+Rn.y1}],Rn.x-=h[0]>>1,Rn.y-=h[1]>>1)}Ut._tags=Ne,Ut._bounds=hn}return Ut};function Ct(Ht){Ht.width=Ht.height=1;var re=Math.sqrt(Ht.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ht.width=(j<<5)/re,Ht.height=y/re;var pe=Ht.getContext("2d");return pe.fillStyle=pe.strokeStyle="red",pe.textAlign="center",{context:pe,ratio:re}}function Vt(Ht,re,pe){for(var ye=re.x,we=re.y,Ne=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Ke=ot(h),pn=At()<.5?1:-1,hn,kn=-pn,Tn,Rn;(hn=Ke(kn+=pn))&&(Tn=~~hn[0],Rn=~~hn[1],!(Math.min(Math.abs(Tn),Math.abs(Rn))>=Ne));)if(re.x=ye+Tn,re.y=we+Rn,!(re.x+re.x0<0||re.y+re.y0<0||re.x+re.x1>h[0]||re.y+re.y1>h[1])&&(!pe||!x(re,Ht,h[0]))&&(!pe||N(re,pe))){for(var Mn=re.sprite,Cn=re.width>>5,_n=h[0]>>5,Kn=re.x-(Cn<<4),tr=Kn&127,or=32-tr,nr=re.y1-re.y0,er=void 0,Sr=(re.y+re.y0)*_n+(Kn>>5),Vr=0;Vr<nr;Vr++){er=0;for(var ti=0;ti<=Cn;ti++)Ht[Sr+ti]|=er<<or|(ti<Cn?(er=Mn[Vr*Cn+ti])>>>tr:0);Sr+=_n}return delete re.sprite,!0}return!1}return Ut.createMask=function(Ht){var re=document.createElement("canvas"),pe=h[0],ye=h[1];if(!(!pe||!ye)){var we=pe>>5,Ne=nt((pe>>5)*ye);re.width=pe,re.height=ye;var Ke=re.getContext("2d");Ke.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,pe,ye);for(var pn=Ke.getImageData(0,0,pe,ye).data,hn=0;hn<ye;hn++)for(var kn=0;kn<pe;kn++){var Tn=we*hn+(kn>>5),Rn=hn*pe+kn<<2,Mn=pn[Rn]>=250&&pn[Rn+1]>=250&&pn[Rn+2]>=250,Cn=Mn?1<<31-kn%32:0;Ne[Tn]|=Cn}Ut.board=Ne,Ut.hasImage=!0}},Ut.timeInterval=function(Ht){mt=Ht==null?Infinity:Ht},Ut.words=function(Ht){gt=Ht},Ut.size=function(Ht){h=[+Ht[0],+Ht[1]]},Ut.font=function(Ht){g=ft(Ht)},Ut.fontWeight=function(Ht){V=ft(Ht)},Ut.rotate=function(Ht){q=ft(Ht)},Ut.spiral=function(Ht){ot=bt[Ht]||Ht},Ut.fontSize=function(Ht){B=ft(Ht)},Ut.padding=function(Ht){it=ft(Ht)},Ut.random=function(Ht){At=ft(Ht)},Ut}function pt(h){var g=h.options,B=h.chart,V=B,q=V.width,it=V.height,ot=V.padding,At=V.appendPadding,gt=V.ele,mt=g.data,Ot=g.imageMask,It=g.wordField,Dt=g.weightField,Ut=g.colorField,Ct=g.wordStyle,Vt=g.timeInterval,Ht=g.random,re=g.spiral,pe=g.autoFit,ye=pe===void 0?!0:pe,we=g.placementStrategy;if(!mt||!mt.length)return[];var Ne=Ct.fontFamily,Ke=Ct.fontWeight,pn=Ct.padding,hn=Ct.fontSize,kn=ht(mt,Dt),Tn=[Mt(kn),$(kn)],Rn=mt.map(function(_n){return{text:_n[It],value:_n[Dt],color:_n[Ut],datum:_n}}),Mn={imageMask:Ot,font:Ne,fontSize:H(hn,Tn),fontWeight:Ke,size:ct({width:q,height:it,padding:ot,appendPadding:At,autoFit:ye,container:gt}),padding:pn,timeInterval:Vt,random:Ht,spiral:re,rotate:dt(g)};if(Object(p.isFunction)(we)){var Cn=Rn.map(function(_n,Kn,tr){return Object(at.a)(Object(at.a)(Object(at.a)({},_n),{hasText:!!_n.text,font:ft(Mn.font)(_n,Kn,tr),weight:ft(Mn.fontWeight)(_n,Kn,tr),rotate:ft(Mn.rotate)(_n,Kn,tr),size:ft(Mn.fontSize)(_n,Kn,tr),style:"normal"}),we.call(B,_n,Kn,tr))});return Cn.push({text:"",value:0,x:0,y:0,opacity:0}),Cn.push({text:"",value:0,x:Mn.size[0],y:Mn.size[1],opacity:0}),Cn}return S(Rn,Mn)}function ct(h){var g=h.width,B=h.height,V=h.container,q=h.autoFit,it=h.padding,ot=h.appendPadding;if(q){var At=Object(A.g)(V);g=At.width,B=At.height}g=g||400,B=B||400;var gt=zt({padding:it,appendPadding:ot}),mt=gt[0],Ot=gt[1],It=gt[2],Dt=gt[3],Ut=[g-(Dt+Ot),B-(mt+It)];return Ut}function zt(h){var g=Nt(h.padding),B=Nt(h.appendPadding),V=g[0]+B[0],q=g[1]+B[1],it=g[2]+B[2],ot=g[3]+B[3];return[V,q,it,ot]}function Nt(h){if(Object(p.isNumber)(h))return[h,h,h,h];if(Object(p.isArray)(h)){var g=h.length;if(g===1)return[h[0],h[0],h[0],h[0]];if(g===2)return[h[0],h[1],h[0],h[1]];if(g===3)return[h[0],h[1],h[2],h[1]];if(g===4)return h}return[0,0,0,0]}function wt(h){return new Promise(function(g,B){if(h instanceof HTMLImageElement){g(h);return}if(Object(p.isString)(h)){var V=new Image;V.crossOrigin="anonymous",V.src=h,V.onload=function(){g(V)},V.onerror=function(){Object(A.j)(A.a.ERROR,!1,"image %s load failed !!!",h),B()};return}Object(A.j)(A.a.WARN,h===void 0,"The type of imageMask option must be String or HTMLImageElement."),B()})}function H(h,g){if(Object(p.isFunction)(h))return h;if(Object(p.isArray)(h)){var B=h[0],V=h[1];if(!g)return function(){return(V+B)/2};var q=g[0],it=g[1];return it===q?function(){return(V+B)/2}:function(At){var gt=At.value;return(V-B)/(it-q)*(gt-q)+B}}return function(){return h}}function ht(h,g){return h.map(function(B){return B[g]}).filter(function(B){return typeof B=="number"&&!isNaN(B)})}function dt(h){var g=yt(h),B=g.rotation,V=g.rotationSteps;if(!Object(p.isArray)(B))return B;var q=B[0],it=B[1],ot=V===1?0:(it-q)/(V-1);return function(){return it===q?it:Math.floor(Math.random()*V)*ot}}function yt(h){var g=h.wordStyle.rotationSteps;return g<1&&(Object(A.j)(A.a.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),g=1),{rotation:h.wordStyle.rotation,rotationSteps:g}}function Mt(h){return Math.min.apply(Math,h)}function $(h){return Math.max.apply(Math,h)}function lt(h){var g=h.chart,B=h.options,V=B.colorField,q=B.color,it=pt(h);g.data(it);var ot=Object(A.b)({},h,{options:{xField:"x",yField:"y",seriesField:V&&"color",point:{color:q,shape:"word-cloud"}}}),At=Object(i.e)(ot).ext;return At.geometry.label(!1),g.coordinate().reflect("y"),g.axis(!1),h}function rt(h){return Object(A.e)(Object(e.f)({x:{nice:!1},y:{nice:!1}}))(h)}function z(h){Object(A.e)(lt,rt,e.k,e.d,e.c,e.a,e.j,e.i)(h)}var P=_("kXyF");Object(P.registerShape)("point","word-cloud",{draw:function(g,B){var V=g.x,q=g.y,it=B.addShape("text",{attrs:Object(at.a)(Object(at.a)({},Y(g)),{x:V,y:q})}),ot=g.data.rotate;return typeof ot=="number"&&P.Util.rotate(it,ot*Math.PI/180),it}});function Y(h){return{fontSize:h.data.size,text:h.data.text,textAlign:"center",fontFamily:h.data.font,fontWeight:h.data.weight,fill:h.color||h.defaultStyle.stroke,textBaseline:"alphabetic"}}var k=function(h){Object(at.b)(g,h);function g(){var B=h!==null&&h.apply(this,arguments)||this;return B.type="word-cloud",B}return g.prototype.changeData=function(B){this.updateOption({data:B}),this.options.imageMask?this.render():this.chart.changeData(pt({chart:this.chart,options:this.options}))},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(V){return{name:V.text,value:V.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}})},g.prototype.render=function(){var B=this;return new Promise(function(V){var q=B.options.imageMask;if(!q){h.prototype.render.call(B),V();return}var it=function(At){B.options=Object(at.a)(Object(at.a)({},B.options),{imageMask:At||null}),h.prototype.render.call(B),V()};wt(q).then(it).catch(it)})},g.prototype.getSchemaAdaptor=function(){return z},g.prototype.triggerResize=function(){var B=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){h.prototype.triggerResize.call(B)}))},g}(a.a)},Mw2x:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("zK8m"),A=_("sstZ"),e={},i="_INDEX";function p(y,n){if(y.set("canvas",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){p(d,n)})}}function m(y,n){if(y.set("timeline",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){m(d,n)})}}function S(y,n){var s=y.getChildren();return s.indexOf(n)>=0}function l(y,n,s){s===void 0&&(s=!0),s?n.destroy():(n.set("parent",null),n.set("canvas",null)),Object(A.j)(y.getChildren(),n)}function M(y){return function(n,s){var d=y(n,s);return d===0?n[i]-s[i]:d}}var j=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var s=Infinity,d=-Infinity,E=Infinity,O=-Infinity,C=[],v=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var X=N.getBBox();C.push(X.minX,X.maxX),v.push(X.minY,X.maxY)}),s=Math.min.apply(null,C),d=Math.max.apply(null,C),E=Math.min.apply(null,v),O=Math.max.apply(null,v)):(s=0,d=0,E=0,O=0);var T={x:s,y:E,minX:s,minY:E,maxX:d,maxY:O,width:d-s,height:O-E};return T},n.prototype.getCanvasBBox=function(){var s=Infinity,d=-Infinity,E=Infinity,O=-Infinity,C=[],v=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var X=N.getCanvasBBox();C.push(X.minX,X.maxX),v.push(X.minY,X.maxY)}),s=Math.min.apply(null,C),d=Math.max.apply(null,C),E=Math.min.apply(null,v),O=Math.max.apply(null,v)):(s=0,d=0,E=0,O=0);var T={x:s,y:E,minX:s,minY:E,maxX:d,maxY:O,width:d-s,height:O-E};return T},n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return s.children=[],s},n.prototype.onAttrChange=function(s,d,E){if(y.prototype.onAttrChange.call(this,s,d,E),s==="matrix"){var O=this.getTotalMatrix();this._applyChildrenMarix(O)}},n.prototype.applyMatrix=function(s){var d=this.getTotalMatrix();y.prototype.applyMatrix.call(this,s);var E=this.getTotalMatrix();E!==d&&this._applyChildrenMarix(E)},n.prototype._applyChildrenMarix=function(s){var d=this.getChildren();Object(A.a)(d,function(E){E.applyMatrix(s)})},n.prototype.addShape=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var E=s[0],O=s[1];Object(A.f)(E)?O=E:O.type=E;var C=e[O.type];C||(C=Object(A.k)(O.type),e[O.type]=C);var v=this.getShapeBase(),x=new v[C](O);return this.add(x),x},n.prototype.addGroup=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var E=s[0],O=s[1],C;if(Object(A.d)(E))O?C=new E(O):C=new E({parent:this});else{var v=E||{},x=this.getGroupBase();C=new x(v)}return this.add(C),C},n.prototype.getCanvas=function(){var s;return this.isCanvas()?s=this:s=this.get("canvas"),s},n.prototype.getShape=function(s,d,E){if(!Object(A.b)(this))return null;var O=this.getChildren(),C;if(this.isCanvas())C=this._findShape(O,s,d,E);else{var v=[s,d,1];v=this.invertFromMatrix(v),this.isClipped(v[0],v[1])||(C=this._findShape(O,v[0],v[1],E))}return C},n.prototype._findShape=function(s,d,E,O){for(var C=null,v=s.length-1;v>=0;v--){var x=s[v];if(Object(A.b)(x)&&(x.isGroup()?C=x.getShape(d,E,O):x.isHit(d,E)&&(C=x)),C)break}return C},n.prototype.add=function(s){var d=this.getCanvas(),E=this.getChildren(),O=this.get("timeline"),C=s.getParent();C&&l(C,s,!1),s.set("parent",this),d&&p(s,d),O&&m(s,O),E.push(s),s.onCanvasChange("add"),this._applyElementMatrix(s)},n.prototype._applyElementMatrix=function(s){var d=this.getTotalMatrix();d&&s.applyMatrix(d)},n.prototype.getChildren=function(){return this.get("children")},n.prototype.sort=function(){var s=this.getChildren();Object(A.a)(s,function(d,E){return d[i]=E,d}),s.sort(M(function(d,E){return d.get("zIndex")-E.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var s=this.getChildren(),d=s.length-1;d>=0;d--)s[d].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),y.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var s=this.getChildren();return this.getChildByIndex(s.length-1)},n.prototype.getChildByIndex=function(s){var d=this.getChildren();return d[s]},n.prototype.getCount=function(){var s=this.getChildren();return s.length},n.prototype.contain=function(s){var d=this.getChildren();return d.indexOf(s)>-1},n.prototype.removeChild=function(s,d){d===void 0&&(d=!0),this.contain(s)&&s.remove(d)},n.prototype.findAll=function(s){var d=[],E=this.getChildren();return Object(A.a)(E,function(O){s(O)&&d.push(O),O.isGroup()&&(d=d.concat(O.findAll(s)))}),d},n.prototype.find=function(s){var d=null,E=this.getChildren();return Object(A.a)(E,function(O){if(s(O)?d=O:O.isGroup()&&(d=O.find(s)),d)return!1}),d},n.prototype.findById=function(s){return this.find(function(d){return d.get("id")===s})},n.prototype.findByClassName=function(s){return this.find(function(d){return d.get("className")===s})},n.prototype.findAllByName=function(s){return this.findAll(function(d){return d.get("name")===s})},n}(a.a);Gt.a=j},N9hJ:function(Gn,Gt){},NmWf:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("aFU3"),A=_("iTfj"),e={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},i=function(p){Object(at.b)(m,p);function m(S){var l=p.call(this,S)||this;return l.initCfg(),l}return m.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},m.prototype.clear=function(){},m.prototype.update=function(S){var l=this,M=this.get("defaultCfg");Object(A.each)(S,function(j,y){var n=l.get(y),s=j;n!==j&&(Object(A.isObject)(j)&&M[y]&&(s=Object(A.deepMix)({},M[y],j)),l.set(y,s))}),this.updateInner(S),this.afterUpdate(S)},m.prototype.updateInner=function(S){},m.prototype.afterUpdate=function(S){Object(A.hasKey)(S,"visible")&&(S.visible?this.show():this.hide()),Object(A.hasKey)(S,"capture")&&this.setCapture(S.capture)},m.prototype.getLayoutBBox=function(){return this.getBBox()},m.prototype.getLocationType=function(){return this.get("locationType")},m.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},m.prototype.setOffset=function(S,l){this.update({offsetX:S,offsetY:l})},m.prototype.setLocation=function(S){var l=Object(at.a)({},S);this.update(l)},m.prototype.getLocation=function(){var S=this,l={},M=this.get("locationType"),j=e[M];return Object(A.each)(j,function(y){l[y]=S.get(y)}),l},m.prototype.isList=function(){return!1},m.prototype.isSlider=function(){return!1},m.prototype.init=function(){},m.prototype.initCfg=function(){var S=this,l=this.get("defaultCfg");Object(A.each)(l,function(M,j){var y=S.get(j);if(Object(A.isObject)(y)){var n=Object(A.deepMix)({},M,y);S.set(j,n)}})},m}(a.Base);Gt.a=i},NohK:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var at=function(A){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,i=null;return function(){for(var p=this,m=arguments.length,S=new Array(m),l=0;l<m;l++)S[l]=arguments[l];clearTimeout(i),i=setTimeout(function(){A.apply(p,S)},e)}};Gt.default=at},NzZ7:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return m});var at=_("tvR+"),a=_("yUfG"),A=_("a8tM"),e=_("iTfj"),i=_("I7nc"),p={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function m(S,l){l=Object(e.assign)({},p,l);var M=l.as;if(!Object(e.isArray)(M)||M.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var j;try{j=Object(i.b)(l)}catch(E){console.warn(E)}var y=function(O){return at.a().tile(a[l.tile]).size(l.size).round(l.round).padding(l.padding).paddingInner(l.paddingInner).paddingOuter(l.paddingOuter).paddingTop(l.paddingTop).paddingRight(l.paddingRight).paddingBottom(l.paddingBottom).paddingLeft(l.paddingLeft)(A.c(O).sum(function(C){return l.ignoreParentValue&&C.children?0:C[j]}))},n=y(S),s=M[0],d=M[1];return n.each(function(E){E[s]=[E.x0,E.x1,E.x1,E.x0],E[d]=[E.y1,E.y1,E.y0,E.y0],["x0","x1","y0","y1"].forEach(function(O){M.indexOf(O)===-1&&delete E[O]})}),Object(i.a)(n)}},P4Qj:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.removeSensor=Gt.getSensor=void 0;var at=e(_("chpo")),a=_("FxDU"),A=_("24YM");function e(S){return S&&S.__esModule?S:{default:S}}var i={},p=function(l){var M=l.getAttribute(A.SizeSensorId);if(M&&i[M])return i[M];var j=(0,at.default)();l.setAttribute(A.SizeSensorId,j);var y=(0,a.createSensor)(l);return i[j]=y,y};Gt.getSensor=p;var m=function(l){var M=l.element.getAttribute(A.SizeSensorId);l.element.removeAttribute(A.SizeSensorId),l.destroy(),M&&i[M]&&delete i[M]};Gt.removeSensor=m},QG4C:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return M});var at=_("mrSG"),a=_("zJSt"),A=_("iTfj"),e=_("WOQw"),i=_("w02o"),p=_("YuPD"),m=_("n/J0");function S(j){var y=j.chart,n=j.options,s=n.views,d=n.legend,E=n.tooltip;return Object(A.each)(s,function(O){var C=O.region,v=O.data,x=O.meta,T=O.axes,N=O.coordinate,X=O.interactions,tt=O.annotations,nt=O.geometries,vt=y.createView({region:C});vt.data(v);var ft={};T&&Object(A.each)(T,function(bt,St){ft[St]=Object(p.k)(bt,m.a)}),ft=Object(p.b)({},x,ft),vt.scale(ft),T?Object(A.each)(T,function(bt,St){vt.axis(St,bt)}):vt.axis(!1),vt.coordinate(N),Object(A.each)(nt,function(bt){var St=Object(e.a)({chart:vt,options:bt}).ext,pt=bt.adjust;pt&&St.geometry.adjust(pt)}),Object(A.each)(X,function(bt){bt.enable===!1?vt.removeInteraction(bt.type):vt.interaction(bt.type,bt.cfg)}),Object(A.each)(tt,function(bt){vt.annotation()[bt.type](Object(at.a)({},bt))})}),d?Object(A.each)(d,function(O,C){y.legend(C,O)}):y.legend(!1),y.tooltip(E),j}function l(j){return Object(p.e)(i.a,S,i.c,i.a,i.j,i.k)(j)}var M=function(j){Object(at.b)(y,j);function y(){var n=j!==null&&j.apply(this,arguments)||this;return n.type="multi-view",n}return y.prototype.getSchemaAdaptor=function(){return l},y}(a.a)},"QO+J":function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var at=A(_("NohK")),a=_("24YM");function A(i){return i&&i.__esModule?i:{default:i}}var e=function(p){var m=void 0,S=[],l=function(){getComputedStyle(p).position==="static"&&(p.style.position="relative");var d=document.createElement("object");return d.onload=function(){d.contentDocument.defaultView.addEventListener("resize",M),M()},d.style.display="block",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.opacity="0",d.setAttribute("class",a.SensorClassName),d.setAttribute("tabindex",a.SensorTabIndex),d.type="text/html",p.appendChild(d),d.data="about:blank",d},M=(0,at.default)(function(){S.forEach(function(s){s(p)})}),j=function(d){m||(m=l()),S.indexOf(d)===-1&&S.push(d)},y=function(){m&&m.parentNode&&(m.contentDocument&&m.contentDocument.defaultView.removeEventListener("resize",M),m.parentNode.removeChild(m),m=void 0,S=[])},n=function(d){var E=S.indexOf(d);E!==-1&&S.splice(E,1),S.length===0&&m&&y()};return{element:p,bind:j,destroy:y,unbind:n}};Gt.createSensor=e},"QQZ/":function(Gn,Gt,_){var at=_("Sq3C"),a=_("Z1HP"),A=_("Sxd8"),e=_("dt0z");function i(p,m,S){p=e(p),m=A(m);var l=m?a(p):0;return m&&l<m?at(m-l,S)+p:p}Gn.exports=i},Qci9:function(Gn,Gt,_){"use strict";var at=_("iTfj"),a=_("0Xep"),A=function(){function e(i){var p=i.xField,m=i.yField,S=i.adjustNames,l=S===void 0?["x","y"]:S;this.adjustNames=l,this.xField=p,this.yField=m}return e.prototype.isAdjust=function(i){return this.adjustNames.indexOf(i)>=0},e.prototype.getAdjustRange=function(i,p,m){var S=this.yField,l=m.indexOf(p),M=m.length,j,y;return!S&&this.isAdjust("y")?(j=0,y=1):M>1?(j=m[l===0?0:l-1],y=m[l===M-1?M-1:l+1],l!==0?j+=(p-j)/2:j-=(y-p)/2,l!==M-1?y-=(y-p)/2:y+=(p-m[M-2])/2):(j=p===0?0:p-.5,y=p===0?1:p+.5),{pre:j,next:y}},e.prototype.adjustData=function(i,p){var m=this,S=this.getDimValues(p);at.each(i,function(l,M){at.each(S,function(j,y){m.adjustDim(y,j,l,M)})})},e.prototype.groupData=function(i,p){return at.each(i,function(m){m[p]===void 0&&(m[p]=a.a)}),at.groupBy(i,p)},e.prototype.adjustDim=function(i,p,m,S){},e.prototype.getDimValues=function(i){var p=this,m=p.xField,S=p.yField,l={},M=[];if(m&&this.isAdjust("x")&&M.push(m),S&&this.isAdjust("y")&&M.push(S),M.forEach(function(y){l[y]=at.valuesOfKey(i,y).sort(function(n,s){return n-s})}),!S&&this.isAdjust("y")){var j="y";l[j]=[a.a,1]}return l},e}();Gt.a=A},R5nb:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return S}),_.d(Gt,"Circle",function(){return M}),_.d(Gt,"Ellipse",function(){return n}),_.d(Gt,"Image",function(){return E}),_.d(Gt,"Line",function(){return T}),_.d(Gt,"Marker",function(){return vt}),_.d(Gt,"Path",function(){return rt}),_.d(Gt,"Polygon",function(){return Y}),_.d(Gt,"Polyline",function(){return h}),_.d(Gt,"Rect",function(){return it}),_.d(Gt,"Text",function(){return At});var at={};_.r(at),_.d(at,"Base",function(){return S}),_.d(at,"Circle",function(){return M}),_.d(at,"Ellipse",function(){return n}),_.d(at,"Image",function(){return E}),_.d(at,"Line",function(){return T}),_.d(at,"Marker",function(){return vt}),_.d(at,"Path",function(){return rt}),_.d(at,"Polygon",function(){return Y}),_.d(at,"Polyline",function(){return h}),_.d(at,"Rect",function(){return it}),_.d(at,"Text",function(){return At});var a=_("mrSG"),A=_("aFU3"),e=_("cyZq"),i=_("9eUa"),p=_("wq2r"),m=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},mt.prototype.getShapeBase=function(){return at},mt.prototype.getGroupBase=function(){return p.a},mt.prototype.onCanvasChange=function(Ot){Object(i.h)(this,Ot)},mt.prototype.calculateBBox=function(){var Ot=this.get("type"),It=this.getHitLineWidth(),Dt=Object(A.getBBoxMethod)(Ot),Ut=Dt(this),Ct=It/2,Vt=Ut.x-Ct,Ht=Ut.y-Ct,re=Ut.x+Ut.width+Ct,pe=Ut.y+Ut.height+Ct;return{x:Vt,minX:Vt,y:Ht,minY:Ht,width:Ut.width+It,height:Ut.height+It,maxX:re,maxY:pe}},mt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},mt.prototype.isStroke=function(){return!!this.attrs.stroke},mt.prototype._applyClip=function(Ot,It){It&&(Ot.save(),Object(i.a)(Ot,It),It.createPath(Ot),Ot.restore(),Ot.clip(),It._afterDraw())},mt.prototype.draw=function(Ot,It){var Dt=this.cfg.clipShape;if(It){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var Ut=this.getCanvasBBox();if(!Object(e.f)(It,Ut)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}Ot.save(),Object(i.a)(Ot,this),this._applyClip(Ot,Dt),this.drawPath(Ot),Ot.restore(),this._afterDraw()},mt.prototype.getCanvasViewBox=function(){var Ot=this.cfg.canvas;return Ot?Ot.getViewRange():null},mt.prototype.cacheCanvasBBox=function(){var Ot=this.getCanvasViewBox();if(Ot){var It=this.getCanvasBBox(),Dt=Object(e.f)(It,Ot);this.set("isInView",Dt),Dt?this.set("cacheCanvasBBox",It):this.set("cacheCanvasBBox",null)}},mt.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},mt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},mt.prototype.drawPath=function(Ot){this.createPath(Ot),this.strokeAndFill(Ot),this.afterDrawPath(Ot)},mt.prototype.fill=function(Ot){Ot.fill()},mt.prototype.stroke=function(Ot){Ot.stroke()},mt.prototype.strokeAndFill=function(Ot){var It=this.attrs,Dt=It.lineWidth,Ut=It.opacity,Ct=It.strokeOpacity,Vt=It.fillOpacity;this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(Ot.globalAlpha=Vt,this.fill(Ot),Ot.globalAlpha=Ut):this.fill(Ot)),this.isStroke()&&Dt>0&&(!Object(e.i)(Ct)&&Ct!==1&&(Ot.globalAlpha=Ct),this.stroke(Ot)),this.afterDrawPath(Ot)},mt.prototype.createPath=function(Ot){},mt.prototype.afterDrawPath=function(Ot){},mt.prototype.isInShape=function(Ot,It){var Dt=this.isStroke(),Ut=this.isFill(),Ct=this.getHitLineWidth();return this.isInStrokeOrPath(Ot,It,Dt,Ut,Ct)},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){return!1},mt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var Ot=this.attrs;return Ot.lineWidth+Ot.lineAppendWidth},mt}(A.AbstractShape),S=m,l=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x:0,y:0,r:0})},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.r,ye=Ct/2,we=Object(e.b)(Ht,re,Ot,It);return Ut&&Dt?we<=pe+ye:Ut?we<=pe:Dt?we>=pe-ye&&we<=pe+ye:!1},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.x,Ut=It.y,Ct=It.r;Ot.beginPath(),Ot.arc(Dt,Ut,Ct,0,Math.PI*2,!1),Ot.closePath()},mt}(S),M=l;function j(gt,mt,Ot,It){return gt/(Ot*Ot)+mt/(It*It)}var y=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x:0,y:0,rx:0,ry:0})},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){var Vt=this.attr(),Ht=Ct/2,re=Vt.x,pe=Vt.y,ye=Vt.rx,we=Vt.ry,Ne=(Ot-re)*(Ot-re),Ke=(It-pe)*(It-pe);return Ut&&Dt?j(Ne,Ke,ye+Ht,we+Ht)<=1:Ut?j(Ne,Ke,ye,we)<=1:Dt?j(Ne,Ke,ye-Ht,we-Ht)>=1&&j(Ne,Ke,ye+Ht,we+Ht)<=1:!1},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.x,Ut=It.y,Ct=It.rx,Vt=It.ry;if(Ot.beginPath(),Ot.ellipse)Ot.ellipse(Dt,Ut,Ct,Vt,0,0,Math.PI*2,!1);else{var Ht=Ct>Vt?Ct:Vt,re=Ct>Vt?1:Ct/Vt,pe=Ct>Vt?Vt/Ct:1;Ot.save(),Ot.translate(Dt,Ut),Ot.scale(re,pe),Ot.arc(0,0,Ht,0,Math.PI*2),Ot.restore(),Ot.closePath()}},mt}(S),n=y;function s(gt){return gt instanceof HTMLElement&&Object(e.k)(gt.nodeName)&&gt.nodeName.toUpperCase()==="CANVAS"}var d=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x:0,y:0,width:0,height:0})},mt.prototype.initAttrs=function(Ot){this._setImage(Ot.img)},mt.prototype.isStroke=function(){return!1},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var Ot=this.get("canvas");Ot?Ot.draw():this.createPath(this.get("context"))}},mt.prototype._setImage=function(Ot){var It=this,Dt=this.attrs;if(Object(e.k)(Ot)){var Ut=new Image;Ut.onload=function(){if(It.destroyed)return!1;It.attr("img",Ut),It.set("loading",!1),It._afterLoading();var Ct=It.get("callback");Ct&&Ct.call(It)},Ut.crossOrigin="Anonymous",Ut.src=Ot,this.set("loading",!0)}else Ot instanceof Image?(Dt.width||(Dt.width=Ot.width),Dt.height||(Dt.height=Ot.height)):s(Ot)&&(Dt.width||(Dt.width=Number(Ot.getAttribute("width"))),Dt.height||(Dt.height,Number(Ot.getAttribute("height"))))},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),Ot==="img"&&this._setImage(It)},mt.prototype.createPath=function(Ot){if(this.get("loading")){this.set("toDraw",!0),this.set("context",Ot);return}var It=this.attr(),Dt=It.x,Ut=It.y,Ct=It.width,Vt=It.height,Ht=It.sx,re=It.sy,pe=It.swidth,ye=It.sheight,we=It.img;(we instanceof Image||s(we))&&(!Object(e.i)(Ht)&&!Object(e.i)(re)&&!Object(e.i)(pe)&&!Object(e.i)(ye)?Ot.drawImage(we,Ht,re,pe,ye,Dt,Ut,Ct,Vt):Ot.drawImage(we,Dt,Ut,Ct,Vt))},mt}(S),E=d,O=_("EYNi");function C(gt,mt,Ot,It,Dt,Ut,Ct){var Vt=Math.min(gt,Ot),Ht=Math.max(gt,Ot),re=Math.min(mt,It),pe=Math.max(mt,It),ye=Dt/2;return Ut>=Vt-ye&&Ut<=Ht+ye&&Ct>=re-ye&&Ct<=pe+ye?O.c.pointToLine(gt,mt,Ot,It,Ut,Ct)<=Dt/2:!1}var v=_("nycV"),x=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(Ot){this.setArrow()},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),this.setArrow()},mt.prototype.setArrow=function(){var Ot=this.attr(),It=Ot.x1,Dt=Ot.y1,Ut=Ot.x2,Ct=Ot.y2,Vt=Ot.startArrow,Ht=Ot.endArrow;Vt&&v.b(this,Ot,Ut,Ct,It,Dt),Ht&&v.a(this,Ot,It,Dt,Ut,Ct)},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){if(!Dt||!Ct)return!1;var Vt=this.attr(),Ht=Vt.x1,re=Vt.y1,pe=Vt.x2,ye=Vt.y2;return C(Ht,re,pe,ye,Ct,Ot,It)},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.x1,Ut=It.y1,Ct=It.x2,Vt=It.y2,Ht=It.startArrow,re=It.endArrow,pe={dx:0,dy:0},ye={dx:0,dy:0};Ht&&Ht.d&&(pe=v.c(Dt,Ut,Ct,Vt,It.startArrow.d)),re&&re.d&&(ye=v.c(Dt,Ut,Ct,Vt,It.endArrow.d)),Ot.beginPath(),Ot.moveTo(Dt+pe.dx,Ut+pe.dy),Ot.lineTo(Ct-ye.dx,Vt-ye.dy)},mt.prototype.afterDrawPath=function(Ot){var It=this.get("startArrowShape"),Dt=this.get("endArrowShape");It&&It.draw(Ot),Dt&&Dt.draw(Ot)},mt.prototype.getTotalLength=function(){var Ot=this.attr(),It=Ot.x1,Dt=Ot.y1,Ut=Ot.x2,Ct=Ot.y2;return O.c.length(It,Dt,Ut,Ct)},mt.prototype.getPoint=function(Ot){var It=this.attr(),Dt=It.x1,Ut=It.y1,Ct=It.x2,Vt=It.y2;return O.c.pointAt(Dt,Ut,Ct,Vt,Ot)},mt}(S),T=x,N=_("iTfj"),X=_("LvGN"),tt={circle:function(mt,Ot,It){return[["M",mt-It,Ot],["A",It,It,0,1,0,mt+It,Ot],["A",It,It,0,1,0,mt-It,Ot]]},square:function(mt,Ot,It){return[["M",mt-It,Ot-It],["L",mt+It,Ot-It],["L",mt+It,Ot+It],["L",mt-It,Ot+It],["Z"]]},diamond:function(mt,Ot,It){return[["M",mt-It,Ot],["L",mt,Ot-It],["L",mt+It,Ot],["L",mt,Ot+It],["Z"]]},triangle:function(mt,Ot,It){var Dt=It*Math.sin(1/3*Math.PI);return[["M",mt-It,Ot+Dt],["L",mt,Ot-Dt],["L",mt+It,Ot+Dt],["Z"]]},"triangle-down":function(mt,Ot,It){var Dt=It*Math.sin(1/3*Math.PI);return[["M",mt-It,Ot-Dt],["L",mt+It,Ot-Dt],["L",mt,Ot+Dt],["Z"]]}},nt=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.initAttrs=function(Ot){this._resetParamsCache()},mt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),["symbol","x","y","r","radius"].indexOf(Ot)!==-1&&this._resetParamsCache()},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype._getR=function(Ot){return Object(N.isNil)(Ot.r)?Ot.radius:Ot.r},mt.prototype._getPath=function(){var Ot=this.attr(),It=Ot.x,Dt=Ot.y,Ut=Ot.symbol||"circle",Ct=this._getR(Ot),Vt,Ht;if(Object(e.h)(Ut))Vt=Ut,Ht=Vt(It,Dt,Ct),Ht=Object(X.d)(Ht);else{if(Vt=mt.Symbols[Ut],!Vt)return console.warn(Ut+" marker is not supported."),null;Ht=Vt(It,Dt,Ct)}return Ht},mt.prototype.createPath=function(Ot){var It=this._getPath(),Dt=this.get("paramsCache");Object(i.e)(this,Ot,{path:It},Dt)},mt.Symbols=tt,mt}(S),vt=nt;function ft(gt,mt,Ot){var It=Object(A.getOffScreenContext)();return gt.createPath(It),It.isPointInPath(mt,Ot)}var bt=1e-6;function St(gt){return Math.abs(gt)<bt?0:gt<0?-1:1}function pt(gt,mt,Ot){return(Ot[0]-gt[0])*(mt[1]-gt[1])==(mt[0]-gt[0])*(Ot[1]-gt[1])&&Math.min(gt[0],mt[0])<=Ot[0]&&Ot[0]<=Math.max(gt[0],mt[0])&&Math.min(gt[1],mt[1])<=Ot[1]&&Ot[1]<=Math.max(gt[1],mt[1])}function ct(gt,mt,Ot){var It=!1,Dt=gt.length;if(Dt<=2)return!1;for(var Ut=0;Ut<Dt;Ut++){var Ct=gt[Ut],Vt=gt[(Ut+1)%Dt];if(pt(Ct,Vt,[mt,Ot]))return!0;St(Ct[1]-Ot)>0!=St(Vt[1]-Ot)>0&&St(mt-(Ot-Ct[1])*(Ct[0]-Vt[0])/(Ct[1]-Vt[1])-Ct[0])<0&&(It=!It)}return It}var zt=_("6JdA"),Nt=_("n+fv");function wt(gt,mt,Ot,It,Dt,Ut,Ct,Vt){var Ht=(Math.atan2(Vt-mt,Ct-gt)+Math.PI*2)%(Math.PI*2);if(Ht<It||Ht>Dt)return!1;var re={x:gt+Ot*Math.cos(Ht),y:mt+Ot*Math.sin(Ht)};return Object(e.b)(re.x,re.y,Ct,Vt)<=Ut/2}var H=zt.a.transform;function ht(gt){for(var mt=!1,Ot=gt.length,It=0;It<Ot;It++){var Dt=gt[It],Ut=Dt[0];if(Ut==="C"||Ut==="A"||Ut==="Q"){mt=!0;break}}return mt}function dt(gt,mt,Ot,It,Dt){for(var Ut=!1,Ct=mt/2,Vt=0;Vt<gt.length;Vt++){var Ht=gt[Vt],re=Ht.currentPoint,pe=Ht.params,ye=Ht.prePoint,we=Ht.box;if(!(we&&!Object(e.e)(we.x-Ct,we.y-Ct,we.width+mt,we.height+mt,Ot,It))){switch(Ht.command){case"L":case"Z":Ut=C(ye[0],ye[1],re[0],re[1],mt,Ot,It);break;case"Q":var Ne=O.e.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],Ot,It);Ut=Ne<=mt/2;break;case"C":var Ke=O.b.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],Ot,It,Dt);Ut=Ke<=mt/2;break;case"A":var pn=Ht.arcParams,hn=pn.cx,kn=pn.cy,Tn=pn.rx,Rn=pn.ry,Mn=pn.startAngle,Cn=pn.endAngle,_n=pn.xRotation,Kn=[Ot,It,1],tr=Tn>Rn?Tn:Rn,or=Tn>Rn?1:Tn/Rn,nr=Tn>Rn?Rn/Tn:1,er=H(null,[["t",-hn,-kn],["r",-_n],["s",1/or,1/nr]]);Nt.transformMat3(Kn,Kn,er),Ut=wt(0,0,tr,Mn,Cn,mt,Kn[0],Kn[1]);break;default:break}if(Ut)break}}return Ut}function yt(gt){for(var mt=gt.length,Ot=[],It=[],Dt=[],Ut=0;Ut<mt;Ut++){var Ct=gt[Ut],Vt=Ct[0];Vt==="M"?(Dt.length&&(It.push(Dt),Dt=[]),Dt.push([Ct[1],Ct[2]])):Vt==="Z"?Dt.length&&(Ot.push(Dt),Dt=[]):Dt.push([Ct[1],Ct[2]])}return Dt.length>0&&It.push(Dt),{polygons:Ot,polylines:It}}var Mt=Object(a.a)({hasArc:ht,extractPolygons:yt,isPointInStroke:dt},A.PathUtil);function $(gt,mt,Ot){for(var It=!1,Dt=0;Dt<gt.length;Dt++){var Ut=gt[Dt];if(It=ct(Ut,mt,Ot),It)break}return It}var lt=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(Ot){this._setPathArr(Ot.path),this.setArrow()},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),Ot==="path"&&this._setPathArr(It),this.setArrow()},mt.prototype._setPathArr=function(Ot){this.attrs.path=Object(X.d)(Ot);var It=Mt.hasArc(Ot);this.set("hasArc",It),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},mt.prototype.getSegments=function(){var Ot=this.get("segements");return Ot||(Ot=Object(X.e)(this.attr("path")),this.set("segments",Ot)),Ot},mt.prototype.setArrow=function(){var Ot=this.attr(),It=Ot.startArrow,Dt=Ot.endArrow;if(It){var Ut=this.getStartTangent();v.b(this,Ot,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}if(Dt){var Ut=this.getEndTangent();v.a(this,Ot,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){var Vt=this.getSegments(),Ht=this.get("hasArc"),re=!1;if(Dt){var pe=this.getTotalLength();re=Mt.isPointInStroke(Vt,Ct,Ot,It,pe)}if(!re&&Ut)if(Ht)re=ft(this,Ot,It);else{var ye=this.attr("path"),we=Mt.extractPolygons(ye);re=$(we.polygons,Ot,It)||$(we.polylines,Ot,It)}return re},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=this.get("paramsCache");Object(i.e)(this,Ot,It,Dt)},mt.prototype.afterDrawPath=function(Ot){var It=this.get("startArrowShape"),Dt=this.get("endArrowShape");It&&It.draw(Ot),Dt&&Dt.draw(Ot)},mt.prototype.getTotalLength=function(){var Ot=this.get("totalLength");return Object(N.isNil)(Ot)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):Ot},mt.prototype.getPoint=function(Ot){var It=this.get("tCache");It||(this._calculateCurve(),this._setTcache(),It=this.get("tCache"));var Dt,Ut,Ct=this.get("curve");if(!It||It.length===0)return Ct?{x:Ct[0][1],y:Ct[0][2]}:null;Object(N.each)(It,function(pe,ye){Ot>=pe[0]&&Ot<=pe[1]&&(Dt=(Ot-pe[0])/(pe[1]-pe[0]),Ut=ye)});var Vt=Ct[Ut];if(Object(N.isNil)(Vt)||Object(N.isNil)(Ut))return null;var Ht=Vt.length,re=Ct[Ut+1];return O.b.pointAt(Vt[Ht-2],Vt[Ht-1],re[1],re[2],re[3],re[4],re[5],re[6],Dt)},mt.prototype._calculateCurve=function(){var Ot=this.attr().path;this.set("curve",Mt.pathToCurve(Ot))},mt.prototype._setTcache=function(){var Ot=0,It=0,Dt=[],Ut,Ct,Vt,Ht,re=this.get("curve");if(!!re){if(Object(N.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(Ot+=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6])||0)}),this.set("totalLength",Ot),Ot===0){this.set("tCache",[]);return}Object(N.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(Ut=[],Ut[0]=It/Ot,Ct=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6]),It+=Ct||0,Ut[1]=It/Ot,Dt.push(Ut))}),this.set("tCache",Dt)}},mt.prototype.getStartTangent=function(){var Ot=this.getSegments(),It;if(Ot.length>1){var Dt=Ot[0].currentPoint,Ut=Ot[1].currentPoint,Ct=Ot[1].startTangent;It=[],Ct?(It.push([Dt[0]-Ct[0],Dt[1]-Ct[1]]),It.push([Dt[0],Dt[1]])):(It.push([Ut[0],Ut[1]]),It.push([Dt[0],Dt[1]]))}return It},mt.prototype.getEndTangent=function(){var Ot=this.getSegments(),It=Ot.length,Dt;if(It>1){var Ut=Ot[It-2].currentPoint,Ct=Ot[It-1].currentPoint,Vt=Ot[It-1].endTangent;Dt=[],Vt?(Dt.push([Ct[0]-Vt[0],Ct[1]-Vt[1]]),Dt.push([Ct[0],Ct[1]])):(Dt.push([Ut[0],Ut[1]]),Dt.push([Ct[0],Ct[1]]))}return Dt},mt}(S),rt=lt;function z(gt,mt,Ot,It,Dt){var Ut=gt.length;if(Ut<2)return!1;for(var Ct=0;Ct<Ut-1;Ct++){var Vt=gt[Ct][0],Ht=gt[Ct][1],re=gt[Ct+1][0],pe=gt[Ct+1][1];if(C(Vt,Ht,re,pe,mt,Ot,It))return!0}if(Dt){var ye=gt[0],we=gt[Ut-1];if(C(ye[0],ye[1],we[0],we[1],mt,Ot,It))return!0}return!1}var P=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){var Vt=this.attr().points,Ht=!1;return Dt&&(Ht=z(Vt,Ct,Ot,It,!0)),!Ht&&Ut&&(Ht=ct(Vt,Ot,It)),Ht},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.points;if(!(Dt.length<2)){Ot.beginPath();for(var Ut=0;Ut<Dt.length;Ut++){var Ct=Dt[Ut];Ut===0?Ot.moveTo(Ct[0],Ct[1]):Ot.lineTo(Ct[0],Ct[1])}Ot.closePath()}},mt}(S),Y=P,k=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{startArrow:!1,endArrow:!1})},mt.prototype.initAttrs=function(Ot){this.setArrow()},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),this.setArrow(),["points"].indexOf(Ot)!==-1&&this._resetCache()},mt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},mt.prototype.setArrow=function(){var Ot=this.attr(),It=this.attrs,Dt=It.points,Ut=It.startArrow,Ct=It.endArrow,Vt=Dt.length,Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];Ut&&v.b(this,Ot,Dt[1][0],Dt[1][1],Ht,re),Ct&&v.a(this,Ot,Dt[Vt-2][0],Dt[Vt-2][1],pe,ye)},mt.prototype.isFill=function(){return!1},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){if(!Dt||!Ct)return!1;var Vt=this.attr().points;return z(Vt,Ct,Ot,It,!1)},mt.prototype.isStroke=function(){return!0},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.points,Ut=It.startArrow,Ct=It.endArrow,Vt=Dt.length;if(!(Dt.length<2)){var Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];if(Ut&&Ut.d){var we=v.c(Ht,re,Dt[1][0],Dt[1][1],Ut.d);Ht+=we.dx,re+=we.dy}if(Ct&&Ct.d){var we=v.c(Dt[Vt-2][0],Dt[Vt-2][1],pe,ye,Ct.d);pe-=we.dx,ye-=we.dy}Ot.beginPath(),Ot.moveTo(Ht,re);for(var Ne=0;Ne<Vt-1;Ne++){var Ke=Dt[Ne];Ot.lineTo(Ke[0],Ke[1])}Ot.lineTo(pe,ye)}},mt.prototype.afterDrawPath=function(Ot){var It=this.get("startArrowShape"),Dt=this.get("endArrowShape");It&&It.draw(Ot),Dt&&Dt.draw(Ot)},mt.prototype.getTotalLength=function(){var Ot=this.attr().points,It=this.get("totalLength");return Object(N.isNil)(It)?(this.set("totalLength",O.d.length(Ot)),this.get("totalLength")):It},mt.prototype.getPoint=function(Ot){var It=this.attr().points,Dt=this.get("tCache");Dt||(this._setTcache(),Dt=this.get("tCache"));var Ut,Ct;return Object(N.each)(Dt,function(Vt,Ht){Ot>=Vt[0]&&Ot<=Vt[1]&&(Ut=(Ot-Vt[0])/(Vt[1]-Vt[0]),Ct=Ht)}),O.c.pointAt(It[Ct][0],It[Ct][1],It[Ct+1][0],It[Ct+1][1],Ut)},mt.prototype._setTcache=function(){var Ot=this.attr().points;if(!(!Ot||Ot.length===0)){var It=this.getTotalLength();if(!(It<=0)){var Dt=0,Ut=[],Ct,Vt;Object(N.each)(Ot,function(Ht,re){Ot[re+1]&&(Ct=[],Ct[0]=Dt/It,Vt=O.c.length(Ht[0],Ht[1],Ot[re+1][0],Ot[re+1][1]),Dt+=Vt,Ct[1]=Dt/It,Ut.push(Ct))}),this.set("tCache",Ut)}}},mt.prototype.getStartTangent=function(){var Ot=this.attr().points,It=[];return It.push([Ot[1][0],Ot[1][1]]),It.push([Ot[0][0],Ot[0][1]]),It},mt.prototype.getEndTangent=function(){var Ot=this.attr().points,It=Ot.length-1,Dt=[];return Dt.push([Ot[It-1][0],Ot[It-1][1]]),Dt.push([Ot[It][0],Ot[It][1]]),Dt},mt}(S),h=k,g=_("r0DC");function B(gt,mt,Ot,It,Dt,Ut,Ct){var Vt=Dt/2;return Object(e.e)(gt-Vt,mt-Vt,Ot,Dt,Ut,Ct)||Object(e.e)(gt+Ot-Vt,mt-Vt,Dt,It,Ut,Ct)||Object(e.e)(gt+Vt,mt+It-Vt,Ot,Dt,Ut,Ct)||Object(e.e)(gt-Vt,mt+Vt,Dt,It,Ut,Ct)}function V(gt,mt,Ot,It,Dt,Ut,Ct,Vt){var Ht=Ut/2;return C(gt+Dt,mt,gt+Ot-Dt,mt,Ut,Ct,Vt)||C(gt+Ot,mt+Dt,gt+Ot,mt+It-Dt,Ut,Ct,Vt)||C(gt+Ot-Dt,mt+It,gt+Dt,mt+It,Ut,Ct,Vt)||C(gt,mt+It-Dt,gt,mt+Dt,Ut,Ct,Vt)||wt(gt+Ot-Dt,mt+Dt,Dt,1.5*Math.PI,2*Math.PI,Ut,Ct,Vt)||wt(gt+Ot-Dt,mt+It-Dt,Dt,0,.5*Math.PI,Ut,Ct,Vt)||wt(gt+Dt,mt+It-Dt,Dt,.5*Math.PI,Math.PI,Ut,Ct,Vt)||wt(gt+Dt,mt+Dt,Dt,Math.PI,1.5*Math.PI,Ut,Ct,Vt)}var q=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x:0,y:0,width:0,height:0,radius:0})},mt.prototype.isInStrokeOrPath=function(Ot,It,Dt,Ut,Ct){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.width,ye=Vt.height,we=Vt.radius;if(we){var Ke=!1;return Dt&&(Ke=V(Ht,re,pe,ye,we,Ct,Ot,It)),!Ke&&Ut&&(Ke=ft(this,Ot,It)),Ke}else{var Ne=Ct/2;if(Ut&&Dt)return Object(e.e)(Ht-Ne,re-Ne,pe+Ne,ye+Ne,Ot,It);if(Ut)return Object(e.e)(Ht,re,pe,ye,Ot,It);if(Dt)return B(Ht,re,pe,ye,Ct,Ot,It)}},mt.prototype.createPath=function(Ot){var It=this.attr(),Dt=It.x,Ut=It.y,Ct=It.width,Vt=It.height,Ht=It.radius;if(Ot.beginPath(),Ht===0)Ot.rect(Dt,Ut,Ct,Vt);else{var re=Object(g.a)(Ht),pe=re[0],ye=re[1],we=re[2],Ne=re[3];Ot.moveTo(Dt+pe,Ut),Ot.lineTo(Dt+Ct-ye,Ut),ye!==0&&Ot.arc(Dt+Ct-ye,Ut+ye,ye,-Math.PI/2,0),Ot.lineTo(Dt+Ct,Ut+Vt-we),we!==0&&Ot.arc(Dt+Ct-we,Ut+Vt-we,we,0,Math.PI/2),Ot.lineTo(Dt+Ne,Ut+Vt),Ne!==0&&Ot.arc(Dt+Ne,Ut+Vt-Ne,Ne,Math.PI/2,Math.PI),Ot.lineTo(Dt,Ut+pe),pe!==0&&Ot.arc(Dt+pe,Ut+pe,pe,Math.PI,Math.PI*1.5),Ot.closePath()}},mt}(S),it=q,ot=function(gt){Object(a.b)(mt,gt);function mt(){return gt!==null&&gt.apply(this,arguments)||this}return mt.prototype.getDefaultAttrs=function(){var Ot=gt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},Ot),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},mt.prototype.isOnlyHitBox=function(){return!0},mt.prototype.initAttrs=function(Ot){this._assembleFont(),Ot.text&&this._setText(Ot.text)},mt.prototype._assembleFont=function(){var Ot=this.attrs;Ot.font=Object(A.assembleFont)(Ot)},mt.prototype._setText=function(Ot){var It=null;Object(e.k)(Ot)&&Ot.indexOf(`
`)!==-1&&(It=Ot.split(`
`)),this.set("textArr",It)},mt.prototype.onAttrChange=function(Ot,It,Dt){gt.prototype.onAttrChange.call(this,Ot,It,Dt),Ot.startsWith("font")&&this._assembleFont(),Ot==="text"&&this._setText(It)},mt.prototype._getSpaceingY=function(){var Ot=this.attrs,It=Ot.lineHeight,Dt=Ot.fontSize*1;return It?It-Dt:Dt*.14},mt.prototype._drawTextArr=function(Ot,It,Dt){var Ut=this.attrs,Ct=Ut.textBaseline,Vt=Ut.x,Ht=Ut.y,re=Ut.fontSize*1,pe=this._getSpaceingY(),ye=Object(A.getTextHeight)(Ut.text,Ut.fontSize,Ut.lineHeight),we;Object(e.c)(It,function(Ne,Ke){we=Ht+Ke*(pe+re)-ye+re,Ct==="middle"&&(we+=ye-re-(ye-re)/2),Ct==="top"&&(we+=ye-re),Dt?Ot.fillText(Ne,Vt,we):Ot.strokeText(Ne,Vt,we)})},mt.prototype._drawText=function(Ot,It){var Dt=this.attr(),Ut=Dt.x,Ct=Dt.y,Vt=this.get("textArr");if(Vt)this._drawTextArr(Ot,Vt,It);else{var Ht=Dt.text;It?Ot.fillText(Ht,Ut,Ct):Ot.strokeText(Ht,Ut,Ct)}},mt.prototype.strokeAndFill=function(Ot){var It=this.attrs,Dt=It.lineWidth,Ut=It.opacity,Ct=It.strokeOpacity,Vt=It.fillOpacity;this.isStroke()&&Dt>0&&(!Object(e.i)(Ct)&&Ct!==1&&(Ot.globalAlpha=Ut),this.stroke(Ot)),this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(Ot.globalAlpha=Vt,this.fill(Ot),Ot.globalAlpha=Ut):this.fill(Ot)),this.afterDrawPath(Ot)},mt.prototype.fill=function(Ot){this._drawText(Ot,!0)},mt.prototype.stroke=function(Ot){this._drawText(Ot,!1)},mt}(S),At=ot},SZbK:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at});var at=["#FAAD14","#E8EDF3"]},ShmH:function(Gn,Gt,_){var at=_("o0o1");(function(a,A){Gn.exports=A()})(this,function(){return function(a){var A={};function e(i){if(A[i])return A[i].exports;var p=A[i]={i,l:!1,exports:{}};return a[i].call(p.exports,p,p.exports,e),p.l=!0,p.exports}return e.m=a,e.c=A,e.d=function(i,p,m){e.o(i,p)||Object.defineProperty(i,p,{enumerable:!0,get:m})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,p){if(1&p&&(i=e(i)),8&p||4&p&&typeof i=="object"&&i&&i.__esModule)return i;var m=Object.create(null);if(e.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:i}),2&p&&typeof i!="string")for(var S in i)e.d(m,S,function(l){return i[l]}.bind(null,S));return m},e.n=function(i){var p=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(p,"a",p),p},e.o=function(i,p){return Object.prototype.hasOwnProperty.call(i,p)},e.p="",e(e.s=262)}([function(a,A,e){"use strict";e.d(A,"j",function(){return C}),e.d(A,"k",function(){return T}),e.d(A,"y",function(){return N}),e.d(A,"g",function(){return p}),e.d(A,"J",function(){return X}),e.d(A,"h",function(){return tt}),e.d(A,"u",function(){return vt}),e.d(A,"B",function(){return ft}),e.d(A,"G",function(){return St}),e.d(A,"I",function(){return ct}),e.d(A,"m",function(){return j}),e.d(A,"n",function(){return wt}),e.d(A,"o",function(){return H}),e.d(A,"r",function(){return l}),e.d(A,"s",function(){return M}),e.d(A,"t",function(){return nt}),e.d(A,"v",function(){return n}),e.d(A,"w",function(){return O}),e.d(A,"x",function(){return x}),e.d(A,"D",function(){return yt}),e.d(A,"b",function(){return Mt}),e.d(A,"c",function(){return z}),e.d(A,"d",function(){return P}),e.d(A,"e",function(){return k}),e.d(A,"f",function(){return s}),e.d(A,"l",function(){return h}),e.d(A,"p",function(){return B}),e.d(A,"q",function(){return V}),e.d(A,"z",function(){return q}),e.d(A,"A",function(){return lt}),e.d(A,"a",function(){return lt}),e.d(A,"i",function(){return it}),e.d(A,"F",function(){return ot}),e.d(A,"H",function(){return gt}),e.d(A,"C",function(){return mt}),e.d(A,"E",function(){return Ot});var i=function(Dt){return Dt!==null&&typeof Dt!="function"&&isFinite(Dt.length)},p=function(Dt,Ut){if(!i(Dt))return Dt;for(var Ct=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];Ut(Ht,Vt)&&Ct.push(Ht)}return Ct},m={}.toString,S=function(Dt,Ut){return m.call(Dt)==="[object "+Ut+"]"},l=function(Dt){return S(Dt,"Function")},M=function(Dt){return Dt==null},j=function(Dt){return Array.isArray?Array.isArray(Dt):S(Dt,"Array")};function y(It){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(It)}var n=function(Dt){var Ut=y(Dt);return Dt!==null&&Ut==="object"||Ut==="function"},s=function(Dt,Ut){if(Dt){if(j(Dt))for(var Ct=0,Vt=Dt.length;Ct<Vt&&Ut(Dt[Ct],Ct)!==!1;Ct++);else if(n(Dt)){for(var Ht in Dt)if(Dt.hasOwnProperty(Ht)&&Ut(Dt[Ht],Ht)===!1)break}}};function d(It){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(It)}var E=function(Dt){return d(Dt)==="object"&&Dt!==null},O=function(Dt){if(!E(Dt)||!S(Dt,"Object"))return!1;if(Object.getPrototypeOf(Dt)===null)return!0;for(var Ut=Dt;Object.getPrototypeOf(Ut)!==null;)Ut=Object.getPrototypeOf(Ut);return Object.getPrototypeOf(Dt)===Ut},C=function(Dt){var Ut=Dt.filter(function(re){return!isNaN(re)});if(!Ut.length)return{min:0,max:0};if(j(Dt[0])){for(var Ct=[],Vt=0;Vt<Dt.length;Vt++)Ct=Ct.concat(Dt[Vt]);Ut=Ct}var Ht=Math.max.apply(null,Ut);return{min:Math.min.apply(null,Ut),max:Ht}},v=Array.prototype,x=(v.splice,v.indexOf,Array.prototype.splice,function(It){return S(It,"String")});function T(It){if(i(It))return It[0]}function N(It){if(i(It))return It[It.length-1]}var X=function(Dt,Ut){if(Dt["_wrap_"+Ut])return Dt["_wrap_"+Ut];var Ct=function(Ht){Dt[Ut](Ht)};return Dt["_wrap_"+Ut]=Ct,Ct},tt=function(Dt,Ut){var Ct=Ut.toString(),Vt=Ct.indexOf(".");if(Vt===-1)return Math.round(Dt);var Ht=Ct.substr(Vt+1).length;return Ht>20&&(Ht=20),parseFloat(Dt.toFixed(Ht))},nt=function(Dt){return S(Dt,"Number")};Number.isInteger&&Number.isInteger;function vt(It,Dt,Ut){return Ut===void 0&&(Ut=1e-5),Math.abs(It-Dt)<Ut}var ft=function(Dt,Ut){return(Dt%Ut+Ut)%Ut},bt=(parseInt,Math.PI/180),St=function(Dt){return bt*Dt},pt=function(It){return M(It)?"":It.toString()},ct=function(Dt){var Ut=pt(Dt);return Ut.charAt(0).toUpperCase()+Ut.substring(1)},zt={}.toString,Nt=function(Dt){return zt.call(Dt).replace(/^\[object /,"").replace(/]$/,"")},wt=function(Dt){return S(Dt,"Boolean")},H=function(Dt){return S(Dt,"Date")},ht=Object.prototype,dt=function(Dt){var Ut=Dt&&Dt.constructor;return Dt===(typeof Ut=="function"&&Ut.prototype||ht)};function yt(It){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Dt){return setTimeout(Dt,16)})(It)}function Mt(It){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(It)}function $(It,Dt){for(var Ut in Dt)Dt.hasOwnProperty(Ut)&&Ut!=="constructor"&&Dt[Ut]!==void 0&&(It[Ut]=Dt[Ut])}function lt(It,Dt,Ut,Ct){return Dt&&$(It,Dt),Ut&&$(It,Ut),Ct&&$(It,Ct),It}function rt(It){return(rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(It)}var z=function It(Dt){if(rt(Dt)!=="object"||Dt===null)return Dt;var Ut;if(j(Dt)){Ut=[];for(var Ct=0,Vt=Dt.length;Ct<Vt;Ct++)rt(Dt[Ct])==="object"&&Dt[Ct]!=null?Ut[Ct]=It(Dt[Ct]):Ut[Ct]=Dt[Ct]}else for(var Ht in Ut={},Dt)rt(Dt[Ht])==="object"&&Dt[Ht]!=null?Ut[Ht]=It(Dt[Ht]):Ut[Ht]=Dt[Ht];return Ut},P=function(Dt,Ut,Ct){var Vt;return function(){var Ht=this,re=arguments,pe=function(){Vt=null,Ct||Dt.apply(Ht,re)},ye=Ct&&!Vt;clearTimeout(Vt),Vt=setTimeout(pe,Ut),ye&&Dt.apply(Ht,re)}};function Y(It,Dt,Ut,Ct){for(var Vt in Ut=Ut||0,Ct=Ct||5,Dt)if(Dt.hasOwnProperty(Vt)){var Ht=Dt[Vt];Ht!==null&&O(Ht)?(O(It[Vt])||(It[Vt]={}),Ut<Ct?Y(It[Vt],Ht,Ut+1,Ct):It[Vt]=Dt[Vt]):j(Ht)?(It[Vt]=[],It[Vt]=It[Vt].concat(Ht)):Ht!==void 0&&(It[Vt]=Ht)}}var k=function(Dt){for(var Ut=[],Ct=1;Ct<arguments.length;Ct++)Ut[Ct-1]=arguments[Ct];for(var Vt=0;Vt<Ut.length;Vt+=1)Y(Dt,Ut[Vt]);return Dt},h=function(Dt,Ut){if(!i(Dt))return-1;var Ct=Array.prototype.indexOf;if(Ct)return Ct.call(Dt,Ut);for(var Vt=-1,Ht=0;Ht<Dt.length;Ht++)if(Dt[Ht]===Ut){Vt=Ht;break}return Vt},g=Object.prototype.hasOwnProperty,B=function(Dt){if(M(Dt))return!0;if(i(Dt))return!Dt.length;var Ut=Nt(Dt);if(Ut==="Map"||Ut==="Set")return!Dt.size;if(dt(Dt))return!Object.keys(Dt).length;for(var Ct in Dt)if(g.call(Dt,Ct))return!1;return!0},V=function It(Dt,Ut){if(Dt===Ut)return!0;if(!Dt||!Ut||x(Dt)||x(Ut))return!1;if(i(Dt)||i(Ut)){if(Dt.length!==Ut.length)return!1;for(var Ct=!0,Vt=0;Vt<Dt.length&&(Ct=It(Dt[Vt],Ut[Vt]));Vt++);return Ct}if(E(Dt)||E(Ut)){var Ht=Object.keys(Dt),re=Object.keys(Ut);if(Ht.length!==re.length)return!1;for(Ct=!0,Vt=0;Vt<Ht.length&&(Ct=It(Dt[Ht[Vt]],Ut[Ht[Vt]]));Vt++);return Ct}return!1},q=function(Dt,Ut){if(!i(Dt))return Dt;for(var Ct=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];Ct.push(Ut(Ht,Vt))}return Ct},it=function(Dt,Ut,Ct){for(var Vt=0,Ht=x(Ut)?Ut.split("."):Ut;Dt&&Vt<Ht.length;)Dt=Dt[Ht[Vt++]];return Dt===void 0||Vt<Ht.length?Ct:Dt},ot=function(It){return i(It)?Array.prototype.slice.call(It):[]},At={},gt=function(Dt){return At[Dt=Dt||"g"]?At[Dt]+=1:At[Dt]=1,Dt+At[Dt]},mt=function(){};function Ot(It){return M(It)?0:i(It)?It.length:Object.keys(It).length}(function(){function It(){this.map={}}It.prototype.has=function(Dt){return this.map[Dt]!==void 0},It.prototype.get=function(Dt,Ut){var Ct=this.map[Dt];return Ct===void 0?Ut:Ct},It.prototype.set=function(Dt,Ut){this.map[Dt]=Ut},It.prototype.clear=function(){this.map={}},It.prototype.delete=function(Dt){delete this.map[Dt]},It.prototype.size=function(){return Object.keys(this.map).length}})()},function(a,A,e){"use strict";e.d(A,"b",function(){return p}),e.d(A,"a",function(){return m}),e.d(A,"c",function(){return S}),e.d(A,"d",function(){return l});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(j,y){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])})(j,y)};function p(M,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function y(){this.constructor=M}i(M,j),M.prototype=j===null?Object.create(j):(y.prototype=j.prototype,new y)}var m=function(){return(m=Object.assign||function(j){for(var y,n=1,s=arguments.length;n<s;n++)for(var d in y=arguments[n])Object.prototype.hasOwnProperty.call(y,d)&&(j[d]=y[d]);return j}).apply(this,arguments)};function S(M,j){var y={};for(var n in M)Object.prototype.hasOwnProperty.call(M,n)&&j.indexOf(n)<0&&(y[n]=M[n]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(M);s<n.length;s++)j.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(M,n[s])&&(y[n[s]]=M[n[s]])}return y}function l(){for(var M=0,j=0,y=arguments.length;j<y;j++)M+=arguments[j].length;var n=Array(M),s=0;for(j=0;j<y;j++)for(var d=arguments[j],E=0,O=d.length;E<O;E++,s++)n[s]=d[E];return n}},function(a,A,e){"use strict";e.d(A,"a",function(){return i}),e.d(A,"b",function(){return p}),e.d(A,"c",function(){return S}),e.d(A,"d",function(){return Ce}),e.d(A,"e",function(){return si}),e.d(A,"f",function(){return m});var i={};e.r(i),e.d(i,"create",function(){return M}),e.d(i,"fromMat4",function(){return j}),e.d(i,"clone",function(){return y}),e.d(i,"copy",function(){return n}),e.d(i,"fromValues",function(){return s}),e.d(i,"set",function(){return d}),e.d(i,"identity",function(){return E}),e.d(i,"transpose",function(){return O}),e.d(i,"invert",function(){return C}),e.d(i,"adjoint",function(){return v}),e.d(i,"determinant",function(){return x}),e.d(i,"multiply",function(){return T}),e.d(i,"translate",function(){return N}),e.d(i,"rotate",function(){return X}),e.d(i,"scale",function(){return tt}),e.d(i,"fromTranslation",function(){return nt}),e.d(i,"fromRotation",function(){return vt}),e.d(i,"fromScaling",function(){return ft}),e.d(i,"fromMat2d",function(){return bt}),e.d(i,"fromQuat",function(){return St}),e.d(i,"normalFromMat4",function(){return pt}),e.d(i,"projection",function(){return ct}),e.d(i,"str",function(){return zt}),e.d(i,"frob",function(){return Nt}),e.d(i,"add",function(){return wt}),e.d(i,"subtract",function(){return H}),e.d(i,"multiplyScalar",function(){return ht}),e.d(i,"multiplyScalarAndAdd",function(){return dt}),e.d(i,"exactEquals",function(){return yt}),e.d(i,"equals",function(){return Mt}),e.d(i,"mul",function(){return $}),e.d(i,"sub",function(){return lt});var p={};e.r(p),e.d(p,"create",function(){return rt}),e.d(p,"clone",function(){return z}),e.d(p,"copy",function(){return P}),e.d(p,"fromValues",function(){return Y}),e.d(p,"set",function(){return k}),e.d(p,"identity",function(){return h}),e.d(p,"transpose",function(){return g}),e.d(p,"invert",function(){return B}),e.d(p,"adjoint",function(){return V}),e.d(p,"determinant",function(){return q}),e.d(p,"multiply",function(){return it}),e.d(p,"translate",function(){return ot}),e.d(p,"scale",function(){return At}),e.d(p,"rotate",function(){return gt}),e.d(p,"rotateX",function(){return mt}),e.d(p,"rotateY",function(){return Ot}),e.d(p,"rotateZ",function(){return It}),e.d(p,"fromTranslation",function(){return Dt}),e.d(p,"fromScaling",function(){return Ut}),e.d(p,"fromRotation",function(){return Ct}),e.d(p,"fromXRotation",function(){return Vt}),e.d(p,"fromYRotation",function(){return Ht}),e.d(p,"fromZRotation",function(){return re}),e.d(p,"fromRotationTranslation",function(){return pe}),e.d(p,"fromQuat2",function(){return ye}),e.d(p,"getTranslation",function(){return we}),e.d(p,"getScaling",function(){return Ne}),e.d(p,"getRotation",function(){return Ke}),e.d(p,"fromRotationTranslationScale",function(){return pn}),e.d(p,"fromRotationTranslationScaleOrigin",function(){return hn}),e.d(p,"fromQuat",function(){return kn}),e.d(p,"frustum",function(){return Tn}),e.d(p,"perspective",function(){return Rn}),e.d(p,"perspectiveFromFieldOfView",function(){return Mn}),e.d(p,"ortho",function(){return Cn}),e.d(p,"lookAt",function(){return _n}),e.d(p,"targetTo",function(){return Kn}),e.d(p,"str",function(){return tr}),e.d(p,"frob",function(){return or}),e.d(p,"add",function(){return nr}),e.d(p,"subtract",function(){return er}),e.d(p,"multiplyScalar",function(){return Sr}),e.d(p,"multiplyScalarAndAdd",function(){return Vr}),e.d(p,"exactEquals",function(){return ti}),e.d(p,"equals",function(){return hi}),e.d(p,"mul",function(){return Fi}),e.d(p,"sub",function(){return to});var m={};e.r(m),e.d(m,"create",function(){return Ci}),e.d(m,"clone",function(){return Ui}),e.d(m,"fromValues",function(){return Li}),e.d(m,"copy",function(){return Vi}),e.d(m,"set",function(){return ro}),e.d(m,"add",function(){return jr}),e.d(m,"subtract",function(){return Ji}),e.d(m,"multiply",function(){return pr}),e.d(m,"divide",function(){return Xr}),e.d(m,"ceil",function(){return Br}),e.d(m,"floor",function(){return Nr}),e.d(m,"min",function(){return Yr}),e.d(m,"max",function(){return Kr}),e.d(m,"round",function(){return ni}),e.d(m,"scale",function(){return fi}),e.d(m,"scaleAndAdd",function(){return $r}),e.d(m,"distance",function(){return ci}),e.d(m,"squaredDistance",function(){return Qr}),e.d(m,"length",function(){return gi}),e.d(m,"squaredLength",function(){return Oi}),e.d(m,"negate",function(){return bi}),e.d(m,"inverse",function(){return zi}),e.d(m,"normalize",function(){return Qi}),e.d(m,"dot",function(){return io}),e.d(m,"cross",function(){return Wi}),e.d(m,"lerp",function(){return Zi}),e.d(m,"random",function(){return Pi}),e.d(m,"transformMat4",function(){return no}),e.d(m,"transformQuat",function(){return Mo}),e.d(m,"zero",function(){return ao}),e.d(m,"str",function(){return uo}),e.d(m,"exactEquals",function(){return xo}),e.d(m,"equals",function(){return oe}),e.d(m,"sub",function(){return te}),e.d(m,"mul",function(){return Oe}),e.d(m,"div",function(){return Qe}),e.d(m,"dist",function(){return On}),e.d(m,"sqrDist",function(){return Vn}),e.d(m,"len",function(){return Yn}),e.d(m,"sqrLen",function(){return $e}),e.d(m,"forEach",function(){return rn});var S={};e.r(S),e.d(S,"create",function(){return on}),e.d(S,"identity",function(){return $n}),e.d(S,"setAxisAngle",function(){return vr}),e.d(S,"getAxisAngle",function(){return ar}),e.d(S,"getAngle",function(){return rr}),e.d(S,"multiply",function(){return Fr}),e.d(S,"rotateX",function(){return Ar}),e.d(S,"rotateY",function(){return wr}),e.d(S,"rotateZ",function(){return xr}),e.d(S,"calculateW",function(){return Er}),e.d(S,"exp",function(){return Ir}),e.d(S,"ln",function(){return Lr}),e.d(S,"pow",function(){return Pr}),e.d(S,"slerp",function(){return Dr}),e.d(S,"random",function(){return ri}),e.d(S,"invert",function(){return vi}),e.d(S,"conjugate",function(){return ii}),e.d(S,"fromMat3",function(){return Si}),e.d(S,"fromEuler",function(){return _i}),e.d(S,"str",function(){return Xi}),e.d(S,"clone",function(){return ut}),e.d(S,"fromValues",function(){return Bt}),e.d(S,"copy",function(){return Jt}),e.d(S,"set",function(){return ie}),e.d(S,"add",function(){return se}),e.d(S,"mul",function(){return Te}),e.d(S,"scale",function(){return Ee}),e.d(S,"dot",function(){return un}),e.d(S,"lerp",function(){return xn}),e.d(S,"length",function(){return _t}),e.d(S,"len",function(){return Xt}),e.d(S,"squaredLength",function(){return Se}),e.d(S,"sqrLen",function(){return Wt}),e.d(S,"normalize",function(){return ue}),e.d(S,"exactEquals",function(){return vn}),e.d(S,"equals",function(){return Dn}),e.d(S,"rotationTo",function(){return zn}),e.d(S,"sqlerp",function(){return Un}),e.d(S,"setAxes",function(){return Ze});var l=e(11);function M(){var R=new l.a(9);return l.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}function j(R,xt){return R[0]=xt[0],R[1]=xt[1],R[2]=xt[2],R[3]=xt[4],R[4]=xt[5],R[5]=xt[6],R[6]=xt[8],R[7]=xt[9],R[8]=xt[10],R}function y(R){var xt=new l.a(9);return xt[0]=R[0],xt[1]=R[1],xt[2]=R[2],xt[3]=R[3],xt[4]=R[4],xt[5]=R[5],xt[6]=R[6],xt[7]=R[7],xt[8]=R[8],xt}function n(R,xt){return R[0]=xt[0],R[1]=xt[1],R[2]=xt[2],R[3]=xt[3],R[4]=xt[4],R[5]=xt[5],R[6]=xt[6],R[7]=xt[7],R[8]=xt[8],R}function s(R,xt,$t,me,Zt,de,he,ce,Me){var ze=new l.a(9);return ze[0]=R,ze[1]=xt,ze[2]=$t,ze[3]=me,ze[4]=Zt,ze[5]=de,ze[6]=he,ze[7]=ce,ze[8]=Me,ze}function d(R,xt,$t,me,Zt,de,he,ce,Me,ze){return R[0]=xt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=de,R[5]=he,R[6]=ce,R[7]=Me,R[8]=ze,R}function E(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function O(R,xt){if(R===xt){var $t=xt[1],me=xt[2],Zt=xt[5];R[1]=xt[3],R[2]=xt[6],R[3]=$t,R[5]=xt[7],R[6]=me,R[7]=Zt}else R[0]=xt[0],R[1]=xt[3],R[2]=xt[6],R[3]=xt[1],R[4]=xt[4],R[5]=xt[7],R[6]=xt[2],R[7]=xt[5],R[8]=xt[8];return R}function C(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=xt[4],ce=xt[5],Me=xt[6],ze=xt[7],Ve=xt[8],ke=Ve*he-ce*ze,tn=-Ve*de+ce*Me,De=ze*de-he*Me,cn=$t*ke+me*tn+Zt*De;return cn?(cn=1/cn,R[0]=ke*cn,R[1]=(-Ve*me+Zt*ze)*cn,R[2]=(ce*me-Zt*he)*cn,R[3]=tn*cn,R[4]=(Ve*$t-Zt*Me)*cn,R[5]=(-ce*$t+Zt*de)*cn,R[6]=De*cn,R[7]=(-ze*$t+me*Me)*cn,R[8]=(he*$t-me*de)*cn,R):null}function v(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=xt[4],ce=xt[5],Me=xt[6],ze=xt[7],Ve=xt[8];return R[0]=he*Ve-ce*ze,R[1]=Zt*ze-me*Ve,R[2]=me*ce-Zt*he,R[3]=ce*Me-de*Ve,R[4]=$t*Ve-Zt*Me,R[5]=Zt*de-$t*ce,R[6]=de*ze-he*Me,R[7]=me*Me-$t*ze,R[8]=$t*he-me*de,R}function x(R){var xt=R[0],$t=R[1],me=R[2],Zt=R[3],de=R[4],he=R[5],ce=R[6],Me=R[7],ze=R[8];return xt*(ze*de-he*Me)+$t*(-ze*Zt+he*ce)+me*(Me*Zt-de*ce)}function T(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=xt[8],tn=$t[0],De=$t[1],cn=$t[2],fn=$t[3],nn=$t[4],dn=$t[5],Sn=$t[6],Pe=$t[7],le=$t[8];return R[0]=tn*me+De*he+cn*ze,R[1]=tn*Zt+De*ce+cn*Ve,R[2]=tn*de+De*Me+cn*ke,R[3]=fn*me+nn*he+dn*ze,R[4]=fn*Zt+nn*ce+dn*Ve,R[5]=fn*de+nn*Me+dn*ke,R[6]=Sn*me+Pe*he+le*ze,R[7]=Sn*Zt+Pe*ce+le*Ve,R[8]=Sn*de+Pe*Me+le*ke,R}function N(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=xt[8],tn=$t[0],De=$t[1];return R[0]=me,R[1]=Zt,R[2]=de,R[3]=he,R[4]=ce,R[5]=Me,R[6]=tn*me+De*he+ze,R[7]=tn*Zt+De*ce+Ve,R[8]=tn*de+De*Me+ke,R}function X(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=xt[8],tn=Math.sin($t),De=Math.cos($t);return R[0]=De*me+tn*he,R[1]=De*Zt+tn*ce,R[2]=De*de+tn*Me,R[3]=De*he-tn*me,R[4]=De*ce-tn*Zt,R[5]=De*Me-tn*de,R[6]=ze,R[7]=Ve,R[8]=ke,R}function tt(R,xt,$t){var me=$t[0],Zt=$t[1];return R[0]=me*xt[0],R[1]=me*xt[1],R[2]=me*xt[2],R[3]=Zt*xt[3],R[4]=Zt*xt[4],R[5]=Zt*xt[5],R[6]=xt[6],R[7]=xt[7],R[8]=xt[8],R}function nt(R,xt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=xt[0],R[7]=xt[1],R[8]=1,R}function vt(R,xt){var $t=Math.sin(xt),me=Math.cos(xt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=-$t,R[4]=me,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function ft(R,xt){return R[0]=xt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=xt[1],R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function bt(R,xt){return R[0]=xt[0],R[1]=xt[1],R[2]=0,R[3]=xt[2],R[4]=xt[3],R[5]=0,R[6]=xt[4],R[7]=xt[5],R[8]=1,R}function St(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,fn=de*he,nn=de*ce,dn=de*Me;return R[0]=1-ke-cn,R[3]=Ve-dn,R[6]=tn+nn,R[1]=Ve+dn,R[4]=1-ze-cn,R[7]=De-fn,R[2]=tn-nn,R[5]=De+fn,R[8]=1-ze-ke,R}function pt(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=xt[4],ce=xt[5],Me=xt[6],ze=xt[7],Ve=xt[8],ke=xt[9],tn=xt[10],De=xt[11],cn=xt[12],fn=xt[13],nn=xt[14],dn=xt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*fn-ke*cn,_e=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*fn,Wn=ke*dn-De*fn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*_e+en*sn;return In?(In=1/In,R[0]=(ce*An-Me*Wn+ze*mn)*In,R[1]=(Me*ln-he*An-ze*_e)*In,R[2]=(he*Wn-ce*ln+ze*sn)*In,R[3]=(Zt*Wn-me*An-de*mn)*In,R[4]=($t*An-Zt*ln+de*_e)*In,R[5]=(me*ln-$t*Wn-de*sn)*In,R[6]=(fn*en-nn*Be+dn*Le)*In,R[7]=(nn*le-cn*en-dn*Pe)*In,R[8]=(cn*Be-fn*le+dn*Sn)*In,R):null}function ct(R,xt,$t){return R[0]=2/xt,R[1]=0,R[2]=0,R[3]=0,R[4]=-2/$t,R[5]=0,R[6]=-1,R[7]=1,R[8]=1,R}function zt(R){return"mat3("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+")"}function Nt(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8])}function wt(R,xt,$t){return R[0]=xt[0]+$t[0],R[1]=xt[1]+$t[1],R[2]=xt[2]+$t[2],R[3]=xt[3]+$t[3],R[4]=xt[4]+$t[4],R[5]=xt[5]+$t[5],R[6]=xt[6]+$t[6],R[7]=xt[7]+$t[7],R[8]=xt[8]+$t[8],R}function H(R,xt,$t){return R[0]=xt[0]-$t[0],R[1]=xt[1]-$t[1],R[2]=xt[2]-$t[2],R[3]=xt[3]-$t[3],R[4]=xt[4]-$t[4],R[5]=xt[5]-$t[5],R[6]=xt[6]-$t[6],R[7]=xt[7]-$t[7],R[8]=xt[8]-$t[8],R}function ht(R,xt,$t){return R[0]=xt[0]*$t,R[1]=xt[1]*$t,R[2]=xt[2]*$t,R[3]=xt[3]*$t,R[4]=xt[4]*$t,R[5]=xt[5]*$t,R[6]=xt[6]*$t,R[7]=xt[7]*$t,R[8]=xt[8]*$t,R}function dt(R,xt,$t,me){return R[0]=xt[0]+$t[0]*me,R[1]=xt[1]+$t[1]*me,R[2]=xt[2]+$t[2]*me,R[3]=xt[3]+$t[3]*me,R[4]=xt[4]+$t[4]*me,R[5]=xt[5]+$t[5]*me,R[6]=xt[6]+$t[6]*me,R[7]=xt[7]+$t[7]*me,R[8]=xt[8]+$t[8]*me,R}function yt(R,xt){return R[0]===xt[0]&&R[1]===xt[1]&&R[2]===xt[2]&&R[3]===xt[3]&&R[4]===xt[4]&&R[5]===xt[5]&&R[6]===xt[6]&&R[7]===xt[7]&&R[8]===xt[8]}function Mt(R,xt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=R[4],ce=R[5],Me=R[6],ze=R[7],Ve=R[8],ke=xt[0],tn=xt[1],De=xt[2],cn=xt[3],fn=xt[4],nn=xt[5],dn=xt[6],Sn=xt[7],Pe=xt[8];return Math.abs($t-ke)<=l.b*Math.max(1,Math.abs($t),Math.abs(ke))&&Math.abs(me-tn)<=l.b*Math.max(1,Math.abs(me),Math.abs(tn))&&Math.abs(Zt-De)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(De))&&Math.abs(de-cn)<=l.b*Math.max(1,Math.abs(de),Math.abs(cn))&&Math.abs(he-fn)<=l.b*Math.max(1,Math.abs(he),Math.abs(fn))&&Math.abs(ce-nn)<=l.b*Math.max(1,Math.abs(ce),Math.abs(nn))&&Math.abs(Me-dn)<=l.b*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(ze-Sn)<=l.b*Math.max(1,Math.abs(ze),Math.abs(Sn))&&Math.abs(Ve-Pe)<=l.b*Math.max(1,Math.abs(Ve),Math.abs(Pe))}var $=T,lt=H;function rt(){var R=new l.a(16);return l.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R}function z(R){var xt=new l.a(16);return xt[0]=R[0],xt[1]=R[1],xt[2]=R[2],xt[3]=R[3],xt[4]=R[4],xt[5]=R[5],xt[6]=R[6],xt[7]=R[7],xt[8]=R[8],xt[9]=R[9],xt[10]=R[10],xt[11]=R[11],xt[12]=R[12],xt[13]=R[13],xt[14]=R[14],xt[15]=R[15],xt}function P(R,xt){return R[0]=xt[0],R[1]=xt[1],R[2]=xt[2],R[3]=xt[3],R[4]=xt[4],R[5]=xt[5],R[6]=xt[6],R[7]=xt[7],R[8]=xt[8],R[9]=xt[9],R[10]=xt[10],R[11]=xt[11],R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15],R}function Y(R,xt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn){var nn=new l.a(16);return nn[0]=R,nn[1]=xt,nn[2]=$t,nn[3]=me,nn[4]=Zt,nn[5]=de,nn[6]=he,nn[7]=ce,nn[8]=Me,nn[9]=ze,nn[10]=Ve,nn[11]=ke,nn[12]=tn,nn[13]=De,nn[14]=cn,nn[15]=fn,nn}function k(R,xt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn,nn){return R[0]=xt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=de,R[5]=he,R[6]=ce,R[7]=Me,R[8]=ze,R[9]=Ve,R[10]=ke,R[11]=tn,R[12]=De,R[13]=cn,R[14]=fn,R[15]=nn,R}function h(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function g(R,xt){if(R===xt){var $t=xt[1],me=xt[2],Zt=xt[3],de=xt[6],he=xt[7],ce=xt[11];R[1]=xt[4],R[2]=xt[8],R[3]=xt[12],R[4]=$t,R[6]=xt[9],R[7]=xt[13],R[8]=me,R[9]=de,R[11]=xt[14],R[12]=Zt,R[13]=he,R[14]=ce}else R[0]=xt[0],R[1]=xt[4],R[2]=xt[8],R[3]=xt[12],R[4]=xt[1],R[5]=xt[5],R[6]=xt[9],R[7]=xt[13],R[8]=xt[2],R[9]=xt[6],R[10]=xt[10],R[11]=xt[14],R[12]=xt[3],R[13]=xt[7],R[14]=xt[11],R[15]=xt[15];return R}function B(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=xt[4],ce=xt[5],Me=xt[6],ze=xt[7],Ve=xt[8],ke=xt[9],tn=xt[10],De=xt[11],cn=xt[12],fn=xt[13],nn=xt[14],dn=xt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*fn-ke*cn,_e=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*fn,Wn=ke*dn-De*fn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*_e+en*sn;return In?(In=1/In,R[0]=(ce*An-Me*Wn+ze*mn)*In,R[1]=(Zt*Wn-me*An-de*mn)*In,R[2]=(fn*en-nn*Be+dn*Le)*In,R[3]=(tn*Be-ke*en-De*Le)*In,R[4]=(Me*ln-he*An-ze*_e)*In,R[5]=($t*An-Zt*ln+de*_e)*In,R[6]=(nn*le-cn*en-dn*Pe)*In,R[7]=(Ve*en-tn*le+De*Pe)*In,R[8]=(he*Wn-ce*ln+ze*sn)*In,R[9]=(me*ln-$t*Wn-de*sn)*In,R[10]=(cn*Be-fn*le+dn*Sn)*In,R[11]=(ke*le-Ve*Be-De*Sn)*In,R[12]=(ce*_e-he*mn-Me*sn)*In,R[13]=($t*mn-me*_e+Zt*sn)*In,R[14]=(fn*Pe-cn*Le-nn*Sn)*In,R[15]=(Ve*Le-ke*Pe+tn*Sn)*In,R):null}function V(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=xt[4],ce=xt[5],Me=xt[6],ze=xt[7],Ve=xt[8],ke=xt[9],tn=xt[10],De=xt[11],cn=xt[12],fn=xt[13],nn=xt[14],dn=xt[15];return R[0]=ce*(tn*dn-De*nn)-ke*(Me*dn-ze*nn)+fn*(Me*De-ze*tn),R[1]=-(me*(tn*dn-De*nn)-ke*(Zt*dn-de*nn)+fn*(Zt*De-de*tn)),R[2]=me*(Me*dn-ze*nn)-ce*(Zt*dn-de*nn)+fn*(Zt*ze-de*Me),R[3]=-(me*(Me*De-ze*tn)-ce*(Zt*De-de*tn)+ke*(Zt*ze-de*Me)),R[4]=-(he*(tn*dn-De*nn)-Ve*(Me*dn-ze*nn)+cn*(Me*De-ze*tn)),R[5]=$t*(tn*dn-De*nn)-Ve*(Zt*dn-de*nn)+cn*(Zt*De-de*tn),R[6]=-($t*(Me*dn-ze*nn)-he*(Zt*dn-de*nn)+cn*(Zt*ze-de*Me)),R[7]=$t*(Me*De-ze*tn)-he*(Zt*De-de*tn)+Ve*(Zt*ze-de*Me),R[8]=he*(ke*dn-De*fn)-Ve*(ce*dn-ze*fn)+cn*(ce*De-ze*ke),R[9]=-($t*(ke*dn-De*fn)-Ve*(me*dn-de*fn)+cn*(me*De-de*ke)),R[10]=$t*(ce*dn-ze*fn)-he*(me*dn-de*fn)+cn*(me*ze-de*ce),R[11]=-($t*(ce*De-ze*ke)-he*(me*De-de*ke)+Ve*(me*ze-de*ce)),R[12]=-(he*(ke*nn-tn*fn)-Ve*(ce*nn-Me*fn)+cn*(ce*tn-Me*ke)),R[13]=$t*(ke*nn-tn*fn)-Ve*(me*nn-Zt*fn)+cn*(me*tn-Zt*ke),R[14]=-($t*(ce*nn-Me*fn)-he*(me*nn-Zt*fn)+cn*(me*Me-Zt*ce)),R[15]=$t*(ce*tn-Me*ke)-he*(me*tn-Zt*ke)+Ve*(me*Me-Zt*ce),R}function q(R){var xt=R[0],$t=R[1],me=R[2],Zt=R[3],de=R[4],he=R[5],ce=R[6],Me=R[7],ze=R[8],Ve=R[9],ke=R[10],tn=R[11],De=R[12],cn=R[13],fn=R[14],nn=R[15];return(xt*he-$t*de)*(ke*nn-tn*fn)-(xt*ce-me*de)*(Ve*nn-tn*cn)+(xt*Me-Zt*de)*(Ve*fn-ke*cn)+($t*ce-me*he)*(ze*nn-tn*De)-($t*Me-Zt*he)*(ze*fn-ke*De)+(me*Me-Zt*ce)*(ze*cn-Ve*De)}function it(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=xt[8],tn=xt[9],De=xt[10],cn=xt[11],fn=xt[12],nn=xt[13],dn=xt[14],Sn=xt[15],Pe=$t[0],le=$t[1],Le=$t[2],Be=$t[3];return R[0]=Pe*me+le*ce+Le*ke+Be*fn,R[1]=Pe*Zt+le*Me+Le*tn+Be*nn,R[2]=Pe*de+le*ze+Le*De+Be*dn,R[3]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[4],le=$t[5],Le=$t[6],Be=$t[7],R[4]=Pe*me+le*ce+Le*ke+Be*fn,R[5]=Pe*Zt+le*Me+Le*tn+Be*nn,R[6]=Pe*de+le*ze+Le*De+Be*dn,R[7]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[8],le=$t[9],Le=$t[10],Be=$t[11],R[8]=Pe*me+le*ce+Le*ke+Be*fn,R[9]=Pe*Zt+le*Me+Le*tn+Be*nn,R[10]=Pe*de+le*ze+Le*De+Be*dn,R[11]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[12],le=$t[13],Le=$t[14],Be=$t[15],R[12]=Pe*me+le*ce+Le*ke+Be*fn,R[13]=Pe*Zt+le*Me+Le*tn+Be*nn,R[14]=Pe*de+le*ze+Le*De+Be*dn,R[15]=Pe*he+le*Ve+Le*cn+Be*Sn,R}function ot(R,xt,$t){var me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn=$t[0],nn=$t[1],dn=$t[2];return xt===R?(R[12]=xt[0]*fn+xt[4]*nn+xt[8]*dn+xt[12],R[13]=xt[1]*fn+xt[5]*nn+xt[9]*dn+xt[13],R[14]=xt[2]*fn+xt[6]*nn+xt[10]*dn+xt[14],R[15]=xt[3]*fn+xt[7]*nn+xt[11]*dn+xt[15]):(me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=xt[8],tn=xt[9],De=xt[10],cn=xt[11],R[0]=me,R[1]=Zt,R[2]=de,R[3]=he,R[4]=ce,R[5]=Me,R[6]=ze,R[7]=Ve,R[8]=ke,R[9]=tn,R[10]=De,R[11]=cn,R[12]=me*fn+ce*nn+ke*dn+xt[12],R[13]=Zt*fn+Me*nn+tn*dn+xt[13],R[14]=de*fn+ze*nn+De*dn+xt[14],R[15]=he*fn+Ve*nn+cn*dn+xt[15]),R}function At(R,xt,$t){var me=$t[0],Zt=$t[1],de=$t[2];return R[0]=xt[0]*me,R[1]=xt[1]*me,R[2]=xt[2]*me,R[3]=xt[3]*me,R[4]=xt[4]*Zt,R[5]=xt[5]*Zt,R[6]=xt[6]*Zt,R[7]=xt[7]*Zt,R[8]=xt[8]*de,R[9]=xt[9]*de,R[10]=xt[10]*de,R[11]=xt[11]*de,R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15],R}function gt(R,xt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,fn,nn,dn,Sn,Pe,le,Le,Be,en,sn,_e,ln,mn,Wn=me[0],An=me[1],In=me[2],lr=Math.hypot(Wn,An,In);return lr<l.b?null:(Wn*=lr=1/lr,An*=lr,In*=lr,Zt=Math.sin($t),he=1-(de=Math.cos($t)),ce=xt[0],Me=xt[1],ze=xt[2],Ve=xt[3],ke=xt[4],tn=xt[5],De=xt[6],cn=xt[7],fn=xt[8],nn=xt[9],dn=xt[10],Sn=xt[11],Pe=Wn*Wn*he+de,le=An*Wn*he+In*Zt,Le=In*Wn*he-An*Zt,Be=Wn*An*he-In*Zt,en=An*An*he+de,sn=In*An*he+Wn*Zt,_e=Wn*In*he+An*Zt,ln=An*In*he-Wn*Zt,mn=In*In*he+de,R[0]=ce*Pe+ke*le+fn*Le,R[1]=Me*Pe+tn*le+nn*Le,R[2]=ze*Pe+De*le+dn*Le,R[3]=Ve*Pe+cn*le+Sn*Le,R[4]=ce*Be+ke*en+fn*sn,R[5]=Me*Be+tn*en+nn*sn,R[6]=ze*Be+De*en+dn*sn,R[7]=Ve*Be+cn*en+Sn*sn,R[8]=ce*_e+ke*ln+fn*mn,R[9]=Me*_e+tn*ln+nn*mn,R[10]=ze*_e+De*ln+dn*mn,R[11]=Ve*_e+cn*ln+Sn*mn,xt!==R&&(R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15]),R)}function mt(R,xt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=xt[4],he=xt[5],ce=xt[6],Me=xt[7],ze=xt[8],Ve=xt[9],ke=xt[10],tn=xt[11];return xt!==R&&(R[0]=xt[0],R[1]=xt[1],R[2]=xt[2],R[3]=xt[3],R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15]),R[4]=de*Zt+ze*me,R[5]=he*Zt+Ve*me,R[6]=ce*Zt+ke*me,R[7]=Me*Zt+tn*me,R[8]=ze*Zt-de*me,R[9]=Ve*Zt-he*me,R[10]=ke*Zt-ce*me,R[11]=tn*Zt-Me*me,R}function Ot(R,xt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=xt[0],he=xt[1],ce=xt[2],Me=xt[3],ze=xt[8],Ve=xt[9],ke=xt[10],tn=xt[11];return xt!==R&&(R[4]=xt[4],R[5]=xt[5],R[6]=xt[6],R[7]=xt[7],R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15]),R[0]=de*Zt-ze*me,R[1]=he*Zt-Ve*me,R[2]=ce*Zt-ke*me,R[3]=Me*Zt-tn*me,R[8]=de*me+ze*Zt,R[9]=he*me+Ve*Zt,R[10]=ce*me+ke*Zt,R[11]=Me*me+tn*Zt,R}function It(R,xt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=xt[0],he=xt[1],ce=xt[2],Me=xt[3],ze=xt[4],Ve=xt[5],ke=xt[6],tn=xt[7];return xt!==R&&(R[8]=xt[8],R[9]=xt[9],R[10]=xt[10],R[11]=xt[11],R[12]=xt[12],R[13]=xt[13],R[14]=xt[14],R[15]=xt[15]),R[0]=de*Zt+ze*me,R[1]=he*Zt+Ve*me,R[2]=ce*Zt+ke*me,R[3]=Me*Zt+tn*me,R[4]=ze*Zt-de*me,R[5]=Ve*Zt-he*me,R[6]=ke*Zt-ce*me,R[7]=tn*Zt-Me*me,R}function Dt(R,xt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=xt[0],R[13]=xt[1],R[14]=xt[2],R[15]=1,R}function Ut(R,xt){return R[0]=xt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=xt[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=xt[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Ct(R,xt,$t){var me,Zt,de,he=$t[0],ce=$t[1],Me=$t[2],ze=Math.hypot(he,ce,Me);return ze<l.b?null:(he*=ze=1/ze,ce*=ze,Me*=ze,me=Math.sin(xt),de=1-(Zt=Math.cos(xt)),R[0]=he*he*de+Zt,R[1]=ce*he*de+Me*me,R[2]=Me*he*de-ce*me,R[3]=0,R[4]=he*ce*de-Me*me,R[5]=ce*ce*de+Zt,R[6]=Me*ce*de+he*me,R[7]=0,R[8]=he*Me*de+ce*me,R[9]=ce*Me*de-he*me,R[10]=Me*Me*de+Zt,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}function Vt(R,xt){var $t=Math.sin(xt),me=Math.cos(xt);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=me,R[6]=$t,R[7]=0,R[8]=0,R[9]=-$t,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Ht(R,xt){var $t=Math.sin(xt),me=Math.cos(xt);return R[0]=me,R[1]=0,R[2]=-$t,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=$t,R[9]=0,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function re(R,xt){var $t=Math.sin(xt),me=Math.cos(xt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=0,R[4]=-$t,R[5]=me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function pe(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=me+me,Me=Zt+Zt,ze=de+de,Ve=me*ce,ke=me*Me,tn=me*ze,De=Zt*Me,cn=Zt*ze,fn=de*ze,nn=he*ce,dn=he*Me,Sn=he*ze;return R[0]=1-(De+fn),R[1]=ke+Sn,R[2]=tn-dn,R[3]=0,R[4]=ke-Sn,R[5]=1-(Ve+fn),R[6]=cn+nn,R[7]=0,R[8]=tn+dn,R[9]=cn-nn,R[10]=1-(Ve+De),R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function ye(R,xt){var $t=new l.a(3),me=-xt[0],Zt=-xt[1],de=-xt[2],he=xt[3],ce=xt[4],Me=xt[5],ze=xt[6],Ve=xt[7],ke=me*me+Zt*Zt+de*de+he*he;return ke>0?($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt)/ke,$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de)/ke,$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)/ke):($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt),$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de),$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)),pe(R,xt,$t),R}function we(R,xt){return R[0]=xt[12],R[1]=xt[13],R[2]=xt[14],R}function Ne(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[4],he=xt[5],ce=xt[6],Me=xt[8],ze=xt[9],Ve=xt[10];return R[0]=Math.hypot($t,me,Zt),R[1]=Math.hypot(de,he,ce),R[2]=Math.hypot(Me,ze,Ve),R}function Ke(R,xt){var $t=new l.a(3);Ne($t,xt);var me=1/$t[0],Zt=1/$t[1],de=1/$t[2],he=xt[0]*me,ce=xt[1]*Zt,Me=xt[2]*de,ze=xt[4]*me,Ve=xt[5]*Zt,ke=xt[6]*de,tn=xt[8]*me,De=xt[9]*Zt,cn=xt[10]*de,fn=he+Ve+cn,nn=0;return fn>0?(nn=2*Math.sqrt(fn+1),R[3]=.25*nn,R[0]=(ke-De)/nn,R[1]=(tn-Me)/nn,R[2]=(ce-ze)/nn):he>Ve&&he>cn?(nn=2*Math.sqrt(1+he-Ve-cn),R[3]=(ke-De)/nn,R[0]=.25*nn,R[1]=(ce+ze)/nn,R[2]=(tn+Me)/nn):Ve>cn?(nn=2*Math.sqrt(1+Ve-he-cn),R[3]=(tn-Me)/nn,R[0]=(ce+ze)/nn,R[1]=.25*nn,R[2]=(ke+De)/nn):(nn=2*Math.sqrt(1+cn-he-Ve),R[3]=(ce-ze)/nn,R[0]=(tn+Me)/nn,R[1]=(ke+De)/nn,R[2]=.25*nn),R}function pn(R,xt,$t,me){var Zt=xt[0],de=xt[1],he=xt[2],ce=xt[3],Me=Zt+Zt,ze=de+de,Ve=he+he,ke=Zt*Me,tn=Zt*ze,De=Zt*Ve,cn=de*ze,fn=de*Ve,nn=he*Ve,dn=ce*Me,Sn=ce*ze,Pe=ce*Ve,le=me[0],Le=me[1],Be=me[2];return R[0]=(1-(cn+nn))*le,R[1]=(tn+Pe)*le,R[2]=(De-Sn)*le,R[3]=0,R[4]=(tn-Pe)*Le,R[5]=(1-(ke+nn))*Le,R[6]=(fn+dn)*Le,R[7]=0,R[8]=(De+Sn)*Be,R[9]=(fn-dn)*Be,R[10]=(1-(ke+cn))*Be,R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function hn(R,xt,$t,me,Zt){var de=xt[0],he=xt[1],ce=xt[2],Me=xt[3],ze=de+de,Ve=he+he,ke=ce+ce,tn=de*ze,De=de*Ve,cn=de*ke,fn=he*Ve,nn=he*ke,dn=ce*ke,Sn=Me*ze,Pe=Me*Ve,le=Me*ke,Le=me[0],Be=me[1],en=me[2],sn=Zt[0],_e=Zt[1],ln=Zt[2],mn=(1-(fn+dn))*Le,Wn=(De+le)*Le,An=(cn-Pe)*Le,In=(De-le)*Be,lr=(1-(tn+dn))*Be,Hr=(nn+Sn)*Be,Gr=(cn+Pe)*en,Mr=(nn-Sn)*en,oi=(1-(tn+fn))*en;return R[0]=mn,R[1]=Wn,R[2]=An,R[3]=0,R[4]=In,R[5]=lr,R[6]=Hr,R[7]=0,R[8]=Gr,R[9]=Mr,R[10]=oi,R[11]=0,R[12]=$t[0]+sn-(mn*sn+In*_e+Gr*ln),R[13]=$t[1]+_e-(Wn*sn+lr*_e+Mr*ln),R[14]=$t[2]+ln-(An*sn+Hr*_e+oi*ln),R[15]=1,R}function kn(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,fn=de*he,nn=de*ce,dn=de*Me;return R[0]=1-ke-cn,R[1]=Ve+dn,R[2]=tn-nn,R[3]=0,R[4]=Ve-dn,R[5]=1-ze-cn,R[6]=De+fn,R[7]=0,R[8]=tn+nn,R[9]=De-fn,R[10]=1-ze-ke,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Tn(R,xt,$t,me,Zt,de,he){var ce=1/($t-xt),Me=1/(Zt-me),ze=1/(de-he);return R[0]=2*de*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*de*Me,R[6]=0,R[7]=0,R[8]=($t+xt)*ce,R[9]=(Zt+me)*Me,R[10]=(he+de)*ze,R[11]=-1,R[12]=0,R[13]=0,R[14]=he*de*2*ze,R[15]=0,R}function Rn(R,xt,$t,me,Zt){var de,he=1/Math.tan(xt/2);return R[0]=he/$t,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=he,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,Zt!=null&&Zt!==1/0?(de=1/(me-Zt),R[10]=(Zt+me)*de,R[14]=2*Zt*me*de):(R[10]=-1,R[14]=-2*me),R}function Mn(R,xt,$t,me){var Zt=Math.tan(xt.upDegrees*Math.PI/180),de=Math.tan(xt.downDegrees*Math.PI/180),he=Math.tan(xt.leftDegrees*Math.PI/180),ce=Math.tan(xt.rightDegrees*Math.PI/180),Me=2/(he+ce),ze=2/(Zt+de);return R[0]=Me,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=ze,R[6]=0,R[7]=0,R[8]=-(he-ce)*Me*.5,R[9]=(Zt-de)*ze*.5,R[10]=me/($t-me),R[11]=-1,R[12]=0,R[13]=0,R[14]=me*$t/($t-me),R[15]=0,R}function Cn(R,xt,$t,me,Zt,de,he){var ce=1/(xt-$t),Me=1/(me-Zt),ze=1/(de-he);return R[0]=-2*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*Me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*ze,R[11]=0,R[12]=(xt+$t)*ce,R[13]=(Zt+me)*Me,R[14]=(he+de)*ze,R[15]=1,R}function _n(R,xt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn=xt[0],fn=xt[1],nn=xt[2],dn=me[0],Sn=me[1],Pe=me[2],le=$t[0],Le=$t[1],Be=$t[2];return Math.abs(cn-le)<l.b&&Math.abs(fn-Le)<l.b&&Math.abs(nn-Be)<l.b?h(R):(Ve=cn-le,ke=fn-Le,tn=nn-Be,Zt=Sn*(tn*=De=1/Math.hypot(Ve,ke,tn))-Pe*(ke*=De),de=Pe*(Ve*=De)-dn*tn,he=dn*ke-Sn*Ve,(De=Math.hypot(Zt,de,he))?(Zt*=De=1/De,de*=De,he*=De):(Zt=0,de=0,he=0),ce=ke*he-tn*de,Me=tn*Zt-Ve*he,ze=Ve*de-ke*Zt,(De=Math.hypot(ce,Me,ze))?(ce*=De=1/De,Me*=De,ze*=De):(ce=0,Me=0,ze=0),R[0]=Zt,R[1]=ce,R[2]=Ve,R[3]=0,R[4]=de,R[5]=Me,R[6]=ke,R[7]=0,R[8]=he,R[9]=ze,R[10]=tn,R[11]=0,R[12]=-(Zt*cn+de*fn+he*nn),R[13]=-(ce*cn+Me*fn+ze*nn),R[14]=-(Ve*cn+ke*fn+tn*nn),R[15]=1,R)}function Kn(R,xt,$t,me){var Zt=xt[0],de=xt[1],he=xt[2],ce=me[0],Me=me[1],ze=me[2],Ve=Zt-$t[0],ke=de-$t[1],tn=he-$t[2],De=Ve*Ve+ke*ke+tn*tn;De>0&&(Ve*=De=1/Math.sqrt(De),ke*=De,tn*=De);var cn=Me*tn-ze*ke,fn=ze*Ve-ce*tn,nn=ce*ke-Me*Ve;return(De=cn*cn+fn*fn+nn*nn)>0&&(cn*=De=1/Math.sqrt(De),fn*=De,nn*=De),R[0]=cn,R[1]=fn,R[2]=nn,R[3]=0,R[4]=ke*nn-tn*fn,R[5]=tn*cn-Ve*nn,R[6]=Ve*fn-ke*cn,R[7]=0,R[8]=Ve,R[9]=ke,R[10]=tn,R[11]=0,R[12]=Zt,R[13]=de,R[14]=he,R[15]=1,R}function tr(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}function or(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15])}function nr(R,xt,$t){return R[0]=xt[0]+$t[0],R[1]=xt[1]+$t[1],R[2]=xt[2]+$t[2],R[3]=xt[3]+$t[3],R[4]=xt[4]+$t[4],R[5]=xt[5]+$t[5],R[6]=xt[6]+$t[6],R[7]=xt[7]+$t[7],R[8]=xt[8]+$t[8],R[9]=xt[9]+$t[9],R[10]=xt[10]+$t[10],R[11]=xt[11]+$t[11],R[12]=xt[12]+$t[12],R[13]=xt[13]+$t[13],R[14]=xt[14]+$t[14],R[15]=xt[15]+$t[15],R}function er(R,xt,$t){return R[0]=xt[0]-$t[0],R[1]=xt[1]-$t[1],R[2]=xt[2]-$t[2],R[3]=xt[3]-$t[3],R[4]=xt[4]-$t[4],R[5]=xt[5]-$t[5],R[6]=xt[6]-$t[6],R[7]=xt[7]-$t[7],R[8]=xt[8]-$t[8],R[9]=xt[9]-$t[9],R[10]=xt[10]-$t[10],R[11]=xt[11]-$t[11],R[12]=xt[12]-$t[12],R[13]=xt[13]-$t[13],R[14]=xt[14]-$t[14],R[15]=xt[15]-$t[15],R}function Sr(R,xt,$t){return R[0]=xt[0]*$t,R[1]=xt[1]*$t,R[2]=xt[2]*$t,R[3]=xt[3]*$t,R[4]=xt[4]*$t,R[5]=xt[5]*$t,R[6]=xt[6]*$t,R[7]=xt[7]*$t,R[8]=xt[8]*$t,R[9]=xt[9]*$t,R[10]=xt[10]*$t,R[11]=xt[11]*$t,R[12]=xt[12]*$t,R[13]=xt[13]*$t,R[14]=xt[14]*$t,R[15]=xt[15]*$t,R}function Vr(R,xt,$t,me){return R[0]=xt[0]+$t[0]*me,R[1]=xt[1]+$t[1]*me,R[2]=xt[2]+$t[2]*me,R[3]=xt[3]+$t[3]*me,R[4]=xt[4]+$t[4]*me,R[5]=xt[5]+$t[5]*me,R[6]=xt[6]+$t[6]*me,R[7]=xt[7]+$t[7]*me,R[8]=xt[8]+$t[8]*me,R[9]=xt[9]+$t[9]*me,R[10]=xt[10]+$t[10]*me,R[11]=xt[11]+$t[11]*me,R[12]=xt[12]+$t[12]*me,R[13]=xt[13]+$t[13]*me,R[14]=xt[14]+$t[14]*me,R[15]=xt[15]+$t[15]*me,R}function ti(R,xt){return R[0]===xt[0]&&R[1]===xt[1]&&R[2]===xt[2]&&R[3]===xt[3]&&R[4]===xt[4]&&R[5]===xt[5]&&R[6]===xt[6]&&R[7]===xt[7]&&R[8]===xt[8]&&R[9]===xt[9]&&R[10]===xt[10]&&R[11]===xt[11]&&R[12]===xt[12]&&R[13]===xt[13]&&R[14]===xt[14]&&R[15]===xt[15]}function hi(R,xt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=R[4],ce=R[5],Me=R[6],ze=R[7],Ve=R[8],ke=R[9],tn=R[10],De=R[11],cn=R[12],fn=R[13],nn=R[14],dn=R[15],Sn=xt[0],Pe=xt[1],le=xt[2],Le=xt[3],Be=xt[4],en=xt[5],sn=xt[6],_e=xt[7],ln=xt[8],mn=xt[9],Wn=xt[10],An=xt[11],In=xt[12],lr=xt[13],Hr=xt[14],Gr=xt[15];return Math.abs($t-Sn)<=l.b*Math.max(1,Math.abs($t),Math.abs(Sn))&&Math.abs(me-Pe)<=l.b*Math.max(1,Math.abs(me),Math.abs(Pe))&&Math.abs(Zt-le)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(le))&&Math.abs(de-Le)<=l.b*Math.max(1,Math.abs(de),Math.abs(Le))&&Math.abs(he-Be)<=l.b*Math.max(1,Math.abs(he),Math.abs(Be))&&Math.abs(ce-en)<=l.b*Math.max(1,Math.abs(ce),Math.abs(en))&&Math.abs(Me-sn)<=l.b*Math.max(1,Math.abs(Me),Math.abs(sn))&&Math.abs(ze-_e)<=l.b*Math.max(1,Math.abs(ze),Math.abs(_e))&&Math.abs(Ve-ln)<=l.b*Math.max(1,Math.abs(Ve),Math.abs(ln))&&Math.abs(ke-mn)<=l.b*Math.max(1,Math.abs(ke),Math.abs(mn))&&Math.abs(tn-Wn)<=l.b*Math.max(1,Math.abs(tn),Math.abs(Wn))&&Math.abs(De-An)<=l.b*Math.max(1,Math.abs(De),Math.abs(An))&&Math.abs(cn-In)<=l.b*Math.max(1,Math.abs(cn),Math.abs(In))&&Math.abs(fn-lr)<=l.b*Math.max(1,Math.abs(fn),Math.abs(lr))&&Math.abs(nn-Hr)<=l.b*Math.max(1,Math.abs(nn),Math.abs(Hr))&&Math.abs(dn-Gr)<=l.b*Math.max(1,Math.abs(dn),Math.abs(Gr))}var Fi=it,to=er,si=e(40);function Ci(){var R=new l.a(4);return l.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}function Ui(R){var xt=new l.a(4);return xt[0]=R[0],xt[1]=R[1],xt[2]=R[2],xt[3]=R[3],xt}function Li(R,xt,$t,me){var Zt=new l.a(4);return Zt[0]=R,Zt[1]=xt,Zt[2]=$t,Zt[3]=me,Zt}function Vi(R,xt){return R[0]=xt[0],R[1]=xt[1],R[2]=xt[2],R[3]=xt[3],R}function ro(R,xt,$t,me,Zt){return R[0]=xt,R[1]=$t,R[2]=me,R[3]=Zt,R}function jr(R,xt,$t){return R[0]=xt[0]+$t[0],R[1]=xt[1]+$t[1],R[2]=xt[2]+$t[2],R[3]=xt[3]+$t[3],R}function Ji(R,xt,$t){return R[0]=xt[0]-$t[0],R[1]=xt[1]-$t[1],R[2]=xt[2]-$t[2],R[3]=xt[3]-$t[3],R}function pr(R,xt,$t){return R[0]=xt[0]*$t[0],R[1]=xt[1]*$t[1],R[2]=xt[2]*$t[2],R[3]=xt[3]*$t[3],R}function Xr(R,xt,$t){return R[0]=xt[0]/$t[0],R[1]=xt[1]/$t[1],R[2]=xt[2]/$t[2],R[3]=xt[3]/$t[3],R}function Br(R,xt){return R[0]=Math.ceil(xt[0]),R[1]=Math.ceil(xt[1]),R[2]=Math.ceil(xt[2]),R[3]=Math.ceil(xt[3]),R}function Nr(R,xt){return R[0]=Math.floor(xt[0]),R[1]=Math.floor(xt[1]),R[2]=Math.floor(xt[2]),R[3]=Math.floor(xt[3]),R}function Yr(R,xt,$t){return R[0]=Math.min(xt[0],$t[0]),R[1]=Math.min(xt[1],$t[1]),R[2]=Math.min(xt[2],$t[2]),R[3]=Math.min(xt[3],$t[3]),R}function Kr(R,xt,$t){return R[0]=Math.max(xt[0],$t[0]),R[1]=Math.max(xt[1],$t[1]),R[2]=Math.max(xt[2],$t[2]),R[3]=Math.max(xt[3],$t[3]),R}function ni(R,xt){return R[0]=Math.round(xt[0]),R[1]=Math.round(xt[1]),R[2]=Math.round(xt[2]),R[3]=Math.round(xt[3]),R}function fi(R,xt,$t){return R[0]=xt[0]*$t,R[1]=xt[1]*$t,R[2]=xt[2]*$t,R[3]=xt[3]*$t,R}function $r(R,xt,$t,me){return R[0]=xt[0]+$t[0]*me,R[1]=xt[1]+$t[1]*me,R[2]=xt[2]+$t[2]*me,R[3]=xt[3]+$t[3]*me,R}function ci(R,xt){var $t=xt[0]-R[0],me=xt[1]-R[1],Zt=xt[2]-R[2],de=xt[3]-R[3];return Math.hypot($t,me,Zt,de)}function Qr(R,xt){var $t=xt[0]-R[0],me=xt[1]-R[1],Zt=xt[2]-R[2],de=xt[3]-R[3];return $t*$t+me*me+Zt*Zt+de*de}function gi(R){var xt=R[0],$t=R[1],me=R[2],Zt=R[3];return Math.hypot(xt,$t,me,Zt)}function Oi(R){var xt=R[0],$t=R[1],me=R[2],Zt=R[3];return xt*xt+$t*$t+me*me+Zt*Zt}function bi(R,xt){return R[0]=-xt[0],R[1]=-xt[1],R[2]=-xt[2],R[3]=-xt[3],R}function zi(R,xt){return R[0]=1/xt[0],R[1]=1/xt[1],R[2]=1/xt[2],R[3]=1/xt[3],R}function Qi(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=$t*$t+me*me+Zt*Zt+de*de;return he>0&&(he=1/Math.sqrt(he)),R[0]=$t*he,R[1]=me*he,R[2]=Zt*he,R[3]=de*he,R}function io(R,xt){return R[0]*xt[0]+R[1]*xt[1]+R[2]*xt[2]+R[3]*xt[3]}function Wi(R,xt,$t,me){var Zt=$t[0]*me[1]-$t[1]*me[0],de=$t[0]*me[2]-$t[2]*me[0],he=$t[0]*me[3]-$t[3]*me[0],ce=$t[1]*me[2]-$t[2]*me[1],Me=$t[1]*me[3]-$t[3]*me[1],ze=$t[2]*me[3]-$t[3]*me[2],Ve=xt[0],ke=xt[1],tn=xt[2],De=xt[3];return R[0]=ke*ze-tn*Me+De*ce,R[1]=-Ve*ze+tn*he-De*de,R[2]=Ve*Me-ke*he+De*Zt,R[3]=-Ve*ce+ke*de-tn*Zt,R}function Zi(R,xt,$t,me){var Zt=xt[0],de=xt[1],he=xt[2],ce=xt[3];return R[0]=Zt+me*($t[0]-Zt),R[1]=de+me*($t[1]-de),R[2]=he+me*($t[2]-he),R[3]=ce+me*($t[3]-ce),R}function Pi(R,xt){var $t,me,Zt,de,he,ce;xt=xt||1;do he=($t=2*l.c()-1)*$t+(me=2*l.c()-1)*me;while(he>=1);do ce=(Zt=2*l.c()-1)*Zt+(de=2*l.c()-1)*de;while(ce>=1);var Me=Math.sqrt((1-he)/ce);return R[0]=xt*$t,R[1]=xt*me,R[2]=xt*Zt*Me,R[3]=xt*de*Me,R}function no(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3];return R[0]=$t[0]*me+$t[4]*Zt+$t[8]*de+$t[12]*he,R[1]=$t[1]*me+$t[5]*Zt+$t[9]*de+$t[13]*he,R[2]=$t[2]*me+$t[6]*Zt+$t[10]*de+$t[14]*he,R[3]=$t[3]*me+$t[7]*Zt+$t[11]*de+$t[15]*he,R}function Mo(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=$t[0],ce=$t[1],Me=$t[2],ze=$t[3],Ve=ze*me+ce*de-Me*Zt,ke=ze*Zt+Me*me-he*de,tn=ze*de+he*Zt-ce*me,De=-he*me-ce*Zt-Me*de;return R[0]=Ve*ze+De*-he+ke*-Me-tn*-ce,R[1]=ke*ze+De*-ce+tn*-he-Ve*-Me,R[2]=tn*ze+De*-Me+Ve*-ce-ke*-he,R[3]=xt[3],R}function ao(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=0,R}function uo(R){return"vec4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}function xo(R,xt){return R[0]===xt[0]&&R[1]===xt[1]&&R[2]===xt[2]&&R[3]===xt[3]}function oe(R,xt){var $t=R[0],me=R[1],Zt=R[2],de=R[3],he=xt[0],ce=xt[1],Me=xt[2],ze=xt[3];return Math.abs($t-he)<=l.b*Math.max(1,Math.abs($t),Math.abs(he))&&Math.abs(me-ce)<=l.b*Math.max(1,Math.abs(me),Math.abs(ce))&&Math.abs(Zt-Me)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(Me))&&Math.abs(de-ze)<=l.b*Math.max(1,Math.abs(de),Math.abs(ze))}var Kt,te=Ji,Oe=pr,Qe=Xr,On=ci,Vn=Qr,Yn=gi,$e=Oi,rn=(Kt=Ci(),function(R,xt,$t,me,Zt,de){var he,ce;for(xt||(xt=4),$t||($t=0),ce=me?Math.min(me*xt+$t,R.length):R.length,he=$t;he<ce;he+=xt)Kt[0]=R[he],Kt[1]=R[he+1],Kt[2]=R[he+2],Kt[3]=R[he+3],Zt(Kt,Kt,de),R[he]=Kt[0],R[he+1]=Kt[1],R[he+2]=Kt[2],R[he+3]=Kt[3];return R});function on(){var R=new l.a(4);return l.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R[3]=1,R}function $n(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=1,R}function vr(R,xt,$t){$t*=.5;var me=Math.sin($t);return R[0]=me*xt[0],R[1]=me*xt[1],R[2]=me*xt[2],R[3]=Math.cos($t),R}function ar(R,xt){var $t=2*Math.acos(xt[3]),me=Math.sin($t/2);return me>l.b?(R[0]=xt[0]/me,R[1]=xt[1]/me,R[2]=xt[2]/me):(R[0]=1,R[1]=0,R[2]=0),$t}function rr(R,xt){var $t=un(R,xt);return Math.acos(2*$t*$t-1)}function Fr(R,xt,$t){var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=$t[0],Me=$t[1],ze=$t[2],Ve=$t[3];return R[0]=me*Ve+he*ce+Zt*ze-de*Me,R[1]=Zt*Ve+he*Me+de*ce-me*ze,R[2]=de*Ve+he*ze+me*Me-Zt*ce,R[3]=he*Ve-me*ce-Zt*Me-de*ze,R}function Ar(R,xt,$t){$t*=.5;var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+he*ce,R[1]=Zt*Me+de*ce,R[2]=de*Me-Zt*ce,R[3]=he*Me-me*ce,R}function wr(R,xt,$t){$t*=.5;var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me-de*ce,R[1]=Zt*Me+he*ce,R[2]=de*Me+me*ce,R[3]=he*Me-Zt*ce,R}function xr(R,xt,$t){$t*=.5;var me=xt[0],Zt=xt[1],de=xt[2],he=xt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+Zt*ce,R[1]=Zt*Me-me*ce,R[2]=de*Me+he*ce,R[3]=he*Me-de*ce,R}function Er(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2];return R[0]=$t,R[1]=me,R[2]=Zt,R[3]=Math.sqrt(Math.abs(1-$t*$t-me*me-Zt*Zt)),R}function Ir(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=Math.exp(de),Me=he>0?ce*Math.sin(he)/he:0;return R[0]=$t*Me,R[1]=me*Me,R[2]=Zt*Me,R[3]=ce*Math.cos(he),R}function Lr(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=he>0?Math.atan2(he,de)/he:0;return R[0]=$t*ce,R[1]=me*ce,R[2]=Zt*ce,R[3]=.5*Math.log($t*$t+me*me+Zt*Zt+de*de),R}function Pr(R,xt,$t){return Lr(R,xt),Ee(R,R,$t),Ir(R,R),R}function Dr(R,xt,$t,me){var Zt,de,he,ce,Me,ze=xt[0],Ve=xt[1],ke=xt[2],tn=xt[3],De=$t[0],cn=$t[1],fn=$t[2],nn=$t[3];return(de=ze*De+Ve*cn+ke*fn+tn*nn)<0&&(de=-de,De=-De,cn=-cn,fn=-fn,nn=-nn),1-de>l.b?(Zt=Math.acos(de),he=Math.sin(Zt),ce=Math.sin((1-me)*Zt)/he,Me=Math.sin(me*Zt)/he):(ce=1-me,Me=me),R[0]=ce*ze+Me*De,R[1]=ce*Ve+Me*cn,R[2]=ce*ke+Me*fn,R[3]=ce*tn+Me*nn,R}function ri(R){var xt=l.c(),$t=l.c(),me=l.c(),Zt=Math.sqrt(1-xt),de=Math.sqrt(xt);return R[0]=Zt*Math.sin(2*Math.PI*$t),R[1]=Zt*Math.cos(2*Math.PI*$t),R[2]=de*Math.sin(2*Math.PI*me),R[3]=de*Math.cos(2*Math.PI*me),R}function vi(R,xt){var $t=xt[0],me=xt[1],Zt=xt[2],de=xt[3],he=$t*$t+me*me+Zt*Zt+de*de,ce=he?1/he:0;return R[0]=-$t*ce,R[1]=-me*ce,R[2]=-Zt*ce,R[3]=de*ce,R}function ii(R,xt){return R[0]=-xt[0],R[1]=-xt[1],R[2]=-xt[2],R[3]=xt[3],R}function Si(R,xt){var $t,me=xt[0]+xt[4]+xt[8];if(me>0)$t=Math.sqrt(me+1),R[3]=.5*$t,$t=.5/$t,R[0]=(xt[5]-xt[7])*$t,R[1]=(xt[6]-xt[2])*$t,R[2]=(xt[1]-xt[3])*$t;else{var Zt=0;xt[4]>xt[0]&&(Zt=1),xt[8]>xt[3*Zt+Zt]&&(Zt=2);var de=(Zt+1)%3,he=(Zt+2)%3;$t=Math.sqrt(xt[3*Zt+Zt]-xt[3*de+de]-xt[3*he+he]+1),R[Zt]=.5*$t,$t=.5/$t,R[3]=(xt[3*de+he]-xt[3*he+de])*$t,R[de]=(xt[3*de+Zt]+xt[3*Zt+de])*$t,R[he]=(xt[3*he+Zt]+xt[3*Zt+he])*$t}return R}function _i(R,xt,$t,me){var Zt=.5*Math.PI/180;xt*=Zt,$t*=Zt,me*=Zt;var de=Math.sin(xt),he=Math.cos(xt),ce=Math.sin($t),Me=Math.cos($t),ze=Math.sin(me),Ve=Math.cos(me);return R[0]=de*Me*Ve-he*ce*ze,R[1]=he*ce*Ve+de*Me*ze,R[2]=he*Me*ze-de*ce*Ve,R[3]=he*Me*Ve+de*ce*ze,R}function Xi(R){return"quat("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}var Bi,Di,ve,G,F,Z,ut=Ui,Bt=Li,Jt=Vi,ie=ro,se=jr,Te=Fr,Ee=fi,un=io,xn=Zi,_t=gi,Xt=_t,Se=Oi,Wt=Se,ue=Qi,vn=xo,Dn=oe,zn=(Bi=si.create(),Di=si.fromValues(1,0,0),ve=si.fromValues(0,1,0),function(R,xt,$t){var me=si.dot(xt,$t);return me<-.999999?(si.cross(Bi,Di,xt),si.len(Bi)<1e-6&&si.cross(Bi,ve,xt),si.normalize(Bi,Bi),vr(R,Bi,Math.PI),R):me>.999999?(R[0]=0,R[1]=0,R[2]=0,R[3]=1,R):(si.cross(Bi,xt,$t),R[0]=Bi[0],R[1]=Bi[1],R[2]=Bi[2],R[3]=1+me,ue(R,R))}),Un=(G=on(),F=on(),function(R,xt,$t,me,Zt,de){return Dr(G,xt,Zt,de),Dr(F,$t,me,de),Dr(R,G,F,2*de*(1-de)),R}),Ze=(Z=M(),function(R,xt,$t,me){return Z[0]=$t[0],Z[3]=$t[1],Z[6]=$t[2],Z[1]=me[0],Z[4]=me[1],Z[7]=me[2],Z[2]=-xt[0],Z[5]=-xt[1],Z[8]=-xt[2],ue(R,Si(R,Z))}),Ce=e(80)},function(a,A){a.exports=function(e,i,p){return i in e?Object.defineProperty(e,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[i]=p,e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.METADATA_KEY=void 0;var i=e(32);A.METADATA_KEY=i;var p=e(446);Object.defineProperty(A,"Container",{enumerable:!0,get:function(){return p.Container}});var m=e(55);Object.defineProperty(A,"BindingScopeEnum",{enumerable:!0,get:function(){return m.BindingScopeEnum}}),Object.defineProperty(A,"BindingTypeEnum",{enumerable:!0,get:function(){return m.BindingTypeEnum}}),Object.defineProperty(A,"TargetTypeEnum",{enumerable:!0,get:function(){return m.TargetTypeEnum}});var S=e(462);Object.defineProperty(A,"AsyncContainerModule",{enumerable:!0,get:function(){return S.AsyncContainerModule}}),Object.defineProperty(A,"ContainerModule",{enumerable:!0,get:function(){return S.ContainerModule}});var l=e(463);Object.defineProperty(A,"injectable",{enumerable:!0,get:function(){return l.injectable}});var M=e(464);Object.defineProperty(A,"tagged",{enumerable:!0,get:function(){return M.tagged}});var j=e(465);Object.defineProperty(A,"named",{enumerable:!0,get:function(){return j.named}});var y=e(222);Object.defineProperty(A,"inject",{enumerable:!0,get:function(){return y.inject}}),Object.defineProperty(A,"LazyServiceIdentifer",{enumerable:!0,get:function(){return y.LazyServiceIdentifer}});var n=e(466);Object.defineProperty(A,"optional",{enumerable:!0,get:function(){return n.optional}});var s=e(467);Object.defineProperty(A,"unmanaged",{enumerable:!0,get:function(){return s.unmanaged}});var d=e(468);Object.defineProperty(A,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var E=e(469);Object.defineProperty(A,"targetName",{enumerable:!0,get:function(){return E.targetName}});var O=e(470);Object.defineProperty(A,"postConstruct",{enumerable:!0,get:function(){return O.postConstruct}});var C=e(220);Object.defineProperty(A,"MetadataReader",{enumerable:!0,get:function(){return C.MetadataReader}});var v=e(67);Object.defineProperty(A,"id",{enumerable:!0,get:function(){return v.id}});var x=e(59);Object.defineProperty(A,"decorate",{enumerable:!0,get:function(){return x.decorate}});var T=e(225);Object.defineProperty(A,"traverseAncerstors",{enumerable:!0,get:function(){return T.traverseAncerstors}}),Object.defineProperty(A,"taggedConstraint",{enumerable:!0,get:function(){return T.taggedConstraint}}),Object.defineProperty(A,"namedConstraint",{enumerable:!0,get:function(){return T.namedConstraint}}),Object.defineProperty(A,"typeConstraint",{enumerable:!0,get:function(){return T.typeConstraint}});var N=e(88);Object.defineProperty(A,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return N.getServiceIdentifierAsString}});var X=e(471);Object.defineProperty(A,"multiBindToService",{enumerable:!0,get:function(){return X.multiBindToService}})},function(a,A,e){"use strict";e.d(A,"i",function(){return It}),e.d(A,"h",function(){return Er}),e.d(A,"d",function(){return Ir}),e.d(A,"m",function(){return Pr}),e.d(A,"l",function(){return Nr}),e.d(A,"g",function(){return Br}),e.d(A,"f",function(){return Yr}),e.d(A,"j",function(){return Qe}),e.d(A,"k",function(){return Lr}),e.d(A,"r",function(){return Si}),e.d(A,"p",function(){return Xi}),e.d(A,"b",function(){return Vn}),e.d(A,"n",function(){return ri}),e.d(A,"q",function(){return _i}),e.d(A,"o",function(){return Bi}),e.d(A,"c",function(){return vi}),e.d(A,"a",function(){return ii}),e.d(A,"e",function(){return Di});var i={};e.r(i),e.d(i,"compare",function(){return C}),e.d(i,"getLineIntersect",function(){return x}),e.d(i,"getRectIntersectByPoint",function(){return T}),e.d(i,"getCircleIntersectByPoint",function(){return N}),e.d(i,"getEllipseIntersectByPoint",function(){return X}),e.d(i,"applyMatrix",function(){return tt}),e.d(i,"invertMatrix",function(){return nt}),e.d(i,"getCircleCenterByPoints",function(){return vt}),e.d(i,"distance",function(){return ft}),e.d(i,"scaleMatrix",function(){return bt}),e.d(i,"floydWarshall",function(){return St}),e.d(i,"getAdjMatrix",function(){return pt}),e.d(i,"translate",function(){return ct}),e.d(i,"move",function(){return zt}),e.d(i,"scale",function(){return Nt}),e.d(i,"rotate",function(){return wt}),e.d(i,"getDegree",function(){return H}),e.d(i,"isPointInPolygon",function(){return dt}),e.d(i,"intersectBBox",function(){return yt}),e.d(i,"isPolygonsIntersect",function(){return Mt}),e.d(i,"Line",function(){return $}),e.d(i,"getBBoxBoundLine",function(){return lt}),e.d(i,"itemIntersectByLine",function(){return z}),e.d(i,"fractionToLine",function(){return P}),e.d(i,"getPointsCenter",function(){return Y}),e.d(i,"squareDist",function(){return k}),e.d(i,"pointLineSquareDist",function(){return h}),e.d(i,"isPointsOverlap",function(){return g}),e.d(i,"pointRectSquareDist",function(){return B});var p={};e.r(p),e.d(p,"uniqueId",function(){return Dt}),e.d(p,"formatPadding",function(){return Ut}),e.d(p,"cloneEvent",function(){return Ct}),e.d(p,"isViewportChanged",function(){return Vt}),e.d(p,"isNaN",function(){return Ht}),e.d(p,"calculationItemsBBox",function(){return re}),e.d(p,"processParallelEdges",function(){return pe});var m={};e.r(m),e.d(m,"getBBox",function(){return Tn}),e.d(m,"getLoopCfgs",function(){return Rn}),e.d(m,"getLabelPosition",function(){return Mn}),e.d(m,"traverseTree",function(){return _n}),e.d(m,"traverseTreeUp",function(){return Kn}),e.d(m,"getLetterWidth",function(){return tr}),e.d(m,"getTextSize",function(){return or}),e.d(m,"plainCombosToTrees",function(){return nr}),e.d(m,"reconstructTree",function(){return er}),e.d(m,"getComboBBox",function(){return Sr}),e.d(m,"shouldRefreshEdge",function(){return Vr}),e.d(m,"cloneBesidesImg",function(){return ti});var S={};e.r(S),e.d(S,"getSpline",function(){return Qr}),e.d(S,"getControlPoint",function(){return gi}),e.d(S,"pointsToPolygon",function(){return Oi}),e.d(S,"pathToPoints",function(){return bi}),e.d(S,"getClosedSpline",function(){return zi}),e.d(S,"roundedHull",function(){return Zi}),e.d(S,"paddedHull",function(){return Pi});var l=e(0),M={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(G){return Object.assign(this,G),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(G){var F=this,Z=this.events;this.graph=G,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!0),Object(l.f)(Z,function(ut,Bt){G.on(Bt,ut)}),document.addEventListener("visibilitychange",function(){F.keydown=!1})},unbind:function(G){var F=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!1),Object(l.f)(F,function(Z,ut){G.off(ut,Z)})},get:function(G){return this[G]},set:function(G,F){return this[G]=F,this}},j=function(){function ve(){}return ve.registerBehavior=function(G,F){if(!F)throw new Error("please specify handler for this behavior: "+G);var Z=Object(l.c)(M);Object.assign(Z,F);var ut=function(Jt){var ie=this;Object.assign(this,this.getDefaultCfg(),Jt);var se=this.getEvents();this.events=null;var Te={};se&&(Object(l.f)(se,function(Ee,un){Te[un]=Object(l.J)(ie,Ee)}),this.events=Te)};ut.prototype=Z,ve.types[G]=ut},ve.hasBehavior=function(G){return!!ve.types[G]},ve.getBehavior=function(G){return ve.types[G]},ve.types={},ve}(),y=j,n=e(1),s=e(79),d=e(10),E=e(33),O=d.a.transform,C=function(G){return function(F,Z){return F[G]-Z[G]}},v=function(G,F,Z){return G>=F&&G<=Z},x=function(G,F,Z,ut){var Bt=Z.x-G.x,Jt=Z.y-G.y,ie=F.x-G.x,se=F.y-G.y,Te=ut.x-Z.x,Ee=ut.y-Z.y,un=ie*Ee-se*Te,xn=1/un,_t=null;if(un*un>1e-4*(ie*ie+se*se)*(Te*Te+Ee*Ee)){var Xt=(Bt*Ee-Jt*Te)*xn,Se=(Bt*se-Jt*ie)*xn;v(Xt,0,1)&&v(Se,0,1)&&(_t={x:G.x+Xt*ie,y:G.y+Xt*se})}return _t},T=function(G,F){var Z=G.x,ut=G.y,Bt=G.width,Jt=G.height,ie=[],se={x:Z+Bt/2,y:ut+Jt/2};ie.push({x:Z,y:ut}),ie.push({x:Z+Bt,y:ut}),ie.push({x:Z+Bt,y:ut+Jt}),ie.push({x:Z,y:ut+Jt}),ie.push({x:Z,y:ut});for(var Te=null,Ee=1;Ee<ie.length&&!(Te=x(ie[Ee-1],ie[Ee],se,F));Ee++);return Te},N=function(G,F){var Z=G.x,ut=G.y,Bt=G.r,Jt=F.x-Z,ie=F.y-ut;if(Math.sqrt(Jt*Jt+ie*ie)<Bt)return null;var se=Math.sign(Jt),Te=Math.sign(ie),Ee=Math.atan(ie/Jt);return{x:Z+Math.abs(Bt*Math.cos(Ee))*se,y:ut+Math.abs(Bt*Math.sin(Ee))*Te}},X=function(G,F){var Z=G.rx,ut=G.ry,Bt=G.x,Jt=G.y,ie=F.x-Bt,se=F.y-Jt,Te=Math.atan2(se/ut,ie/Z);return Te<0&&(Te+=2*Math.PI),{x:Bt+Z*Math.cos(Te),y:Jt+ut*Math.sin(Te)}},tt=function(G,F,Z){Z===void 0&&(Z=1);var ut=[G.x,G.y,Z];return F&&!isNaN(F[0])||(F=[1,0,0,0,1,0,0,0,1]),d.d.transformMat3(ut,ut,F),{x:ut[0],y:ut[1]}},nt=function(G,F,Z){Z===void 0&&(Z=1),F&&!isNaN(F[0])||(F=[1,0,0,0,1,0,0,0,1]);var ut=d.b.invert([1,0,0,0,1,0,0,0,1],F);ut||(ut=[1,0,0,0,1,0,0,0,1]);var Bt=[G.x,G.y,Z];return d.d.transformMat3(Bt,Bt,ut),{x:Bt[0],y:Bt[1]}},vt=function(G,F,Z){var ut=G.x-F.x,Bt=G.y-F.y,Jt=G.x-Z.x,ie=G.y-Z.y,se=(G.x*G.x-F.x*F.x-F.y*F.y+G.y*G.y)/2,Te=(G.x*G.x-Z.x*Z.x-Z.y*Z.y+G.y*G.y)/2,Ee=Bt*Jt-ut*ie;return{x:-(ie*se-Bt*Te)/Ee,y:-(ut*Te-Jt*se)/Ee}},ft=function(G,F){var Z=G.x-F.x,ut=G.y-F.y;return Math.sqrt(Z*Z+ut*ut)},bt=function(G,F){var Z=[];return G.forEach(function(ut){var Bt=[];ut.forEach(function(Jt){Bt.push(Jt*F)}),Z.push(Bt)}),Z},St=function(G){for(var F=[],Z=G.length,ut=0;ut<Z;ut+=1){F[ut]=[];for(var Bt=0;Bt<Z;Bt+=1)ut===Bt?F[ut][Bt]=0:G[ut][Bt]!==0&&G[ut][Bt]?F[ut][Bt]=G[ut][Bt]:F[ut][Bt]=1/0}for(var Jt=0;Jt<Z;Jt+=1)for(ut=0;ut<Z;ut+=1)for(Bt=0;Bt<Z;Bt+=1)F[ut][Bt]>F[ut][Jt]+F[Jt][Bt]&&(F[ut][Bt]=F[ut][Jt]+F[Jt][Bt]);return F},pt=function(G,F){var Z=G.nodes,ut=G.edges,Bt=[],Jt={};if(!Z)throw new Error("invalid nodes data!");return Z&&Z.forEach(function(ie,se){Jt[ie.id]=se,Bt.push([])}),ut&&ut.forEach(function(ie){var se=ie.source,Te=ie.target,Ee=Jt[se],un=Jt[Te];Bt[Ee][un]=1,F||(Bt[un][Ee]=1)}),Bt},ct=function(G,F){G.translate(F.x,F.y)},zt=function(G,F){var Z=G.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=G.getCanvasBBox(),Bt=F.x-ut.minX,Jt=F.y-ut.minY,ie=O(Z,[["t",Bt,Jt]]);G.setMatrix(ie)},Nt=function(G,F){var Z=G.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=F;Object(l.m)(F)||(ut=[F,F]),Object(l.m)(F)&&F.length===1&&(ut=[F[0],F[0]]),Z=O(Z,[["s",ut[0],ut[1]]]),G.setMatrix(Z)},wt=function(G,F){var Z=G.getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]),Z=O(Z,[["r",F]]),G.setMatrix(Z)},H=function(G,F,Z){for(var ut=[],Bt=0;Bt<G;Bt++)ut[Bt]=0;return Z.forEach(function(Jt){Jt.source&&(ut[F[Jt.source]]+=1),Jt.target&&(ut[F[Jt.target]]+=1)}),ut};function ht(ve,G,F){return(F[0]-ve[0])*(G[1]-ve[1])==(G[0]-ve[0])*(F[1]-ve[1])&&Math.min(ve[0],G[0])<=F[0]&&F[0]<=Math.max(ve[0],G[0])&&Math.min(ve[1],G[1])<=F[1]&&F[1]<=Math.max(ve[1],G[1])}var dt=function(G,F,Z){var ut=!1,Bt=G.length;function Jt(Ee){return Math.abs(Ee)<1e-6?0:Ee<0?-1:1}if(Bt<=2)return!1;for(var ie=0;ie<Bt;ie++){var se=G[ie],Te=G[(ie+1)%Bt];if(ht(se,Te,[F,Z]))return!0;Jt(se[1]-Z)>0!=Jt(Te[1]-Z)>0&&Jt(F-(Z-se[1])*(se[0]-Te[0])/(se[1]-Te[1])-se[0])<0&&(ut=!ut)}return ut},yt=function(G,F){return!(F.minX>G.maxX||F.maxX<G.minX||F.minY>G.maxY||F.maxY<G.minY)},Mt=function(G,F){var Z=function(xn){var _t=xn.map(function(Se){return Se[0]}),Xt=xn.map(function(Se){return Se[1]});return{minX:Math.min.apply(null,_t),maxX:Math.max.apply(null,_t),minY:Math.min.apply(null,Xt),maxY:Math.max.apply(null,Xt)}},ut=function(xn){for(var _t=[],Xt=xn.length,Se=0;Se<Xt-1;Se++){var Wt=xn[Se],ue=xn[Se+1];_t.push({from:{x:Wt[0],y:Wt[1]},to:{x:ue[0],y:ue[1]}})}if(_t.length>1){var vn=xn[0],Dn=xn[Xt-1];_t.push({from:{x:Dn[0],y:Dn[1]},to:{x:vn[0],y:vn[1]}})}return _t};if(G.length<2||F.length<2)return!1;var Bt=Z(G),Jt=Z(F);if(!yt(Bt,Jt))return!1;var ie=!1;if(Object(l.f)(F,function(un){if(dt(G,un[0],un[1]))return ie=!0,!1}),ie||(Object(l.f)(G,function(un){if(dt(F,un[0],un[1]))return ie=!0,!1}),ie))return!0;var se=ut(G),Te=ut(F),Ee=!1;return Object(l.f)(Te,function(un){if(function(xn,_t){var Xt=!1;return Object(l.f)(xn,function(Se){if(x(Se.from,Se.to,_t.from,_t.to))return Xt=!0,!1}),Xt}(se,un))return Ee=!0,!1}),Ee},$=function(){function ve(G,F,Z,ut){this.x1=G,this.y1=F,this.x2=Z,this.y2=ut}return ve.prototype.getBBox=function(){var G=Math.min(this.x1,this.x2),F=Math.min(this.y1,this.y2),Z=Math.max(this.x1,this.x2),ut=Math.max(this.y1,this.y2);return{x:G,y:F,minX:G,minY:F,maxX:Z,maxY:ut,width:Z-G,height:ut-F}},ve}(),lt=function(G,F){return{top:[G.minX,G.minY,G.maxX,G.minY],left:[G.minX,G.minY,G.minX,G.maxY],bottom:[G.minX,G.maxY,G.maxX,G.maxY],right:[G.maxX,G.minY,G.maxX,G.maxY]}[F]},rt=function(G,F){var Z=(F.x2-F.x1)*(G.y1-F.y1)-(F.y2-F.y1)*(G.x1-F.x1),ut=(G.x2-G.x1)*(G.y1-F.y1)-(G.y2-G.y1)*(G.x1-F.x1),Bt=(F.y2-F.y1)*(G.x2-G.x1)-(F.x2-F.x1)*(G.y2-G.y1);if(Bt){var Jt=Z/Bt,ie=ut/Bt;if(Jt>=0&&Jt<=1&&ie>=0&&ie<=1)return Jt}return Number.POSITIVE_INFINITY},z=function(G,F){for(var Z=["top","left","bottom","right"],ut=G.getBBox(),Bt=0,Jt=[],ie=0;ie<4;ie++){var se=lt(ut,Z[ie]),Te=se[0],Ee=se[1],un=se[2],xn=se[3];Jt[ie]=x({x:F.x1,y:F.y1},{x:F.x2,y:F.y2},{x:Te,y:Ee},{x:un,y:xn}),Jt[ie]&&(Bt+=1)}return[Jt,Bt]},P=function(G,F){for(var Z=["top","left","bottom","right"],ut=G.getBBox(),Bt=Number.POSITIVE_INFINITY,Jt=0,ie=0;ie<4;ie++){var se=lt(ut,Z[ie]),Te=se[0],Ee=se[1],un=se[2],xn=se[3],_t=rt(F,new $(Te,Ee,un,xn));(_t=Math.abs(_t-.5))>=0&&_t<=1&&(Jt+=1,Bt=_t<Bt?_t:Bt)}return Jt===0?-1:Bt},Y=function(G){var F=0,Z=0;if(G.length>0){for(var ut=0,Bt=G;ut<Bt.length;ut++){var Jt=Bt[ut];F+=Jt.x,Z+=Jt.y}F/=G.length,Z/=G.length}return{x:F,y:Z}},k=function(G,F){return Math.pow(G.x-F.x,2)+Math.pow(G.y-F.y,2)},h=function(G,F){var Z,ut=F.x1,Bt=F.y1,Jt=F.x2-ut,ie=F.y2-Bt,se=G.x-ut,Te=G.y-Bt,Ee=se*Jt+Te*ie;Z=Ee<=0||(Ee=(se=Jt-se)*Jt+(Te=ie-Te)*ie)<=0?0:Ee*Ee/(Jt*Jt+ie*ie);var un=se*se+Te*Te-Z;return un<0&&(un=0),un},g=function(G,F,Z){return Z===void 0&&(Z=.001),Math.pow(G.x-F.x,2)+Math.pow(G.y-F.y,2)<Math.pow(Z,2)},B=function(G,F){var Z=G.x<F.x,ut=G.x>F.x+F.width,Bt=G.y>F.y+F.height,Jt=G.y<F.y;if(!(Z||ut||Bt||Jt))return 0;if(Bt&&!Z&&!ut)return Math.pow(F.y+F.height-G.y,2);if(Jt&&!Z&&!ut)return Math.pow(G.y-F.y,2);if(Z&&!Bt&&!Jt)return Math.pow(F.x-G.x,2);if(ut&&!Bt&&!Jt)return Math.pow(F.x+F.width-G.x,2);var ie=Math.min(Math.abs(F.x-G.x),Math.abs(F.x+F.width-G.x)),se=Math.min(Math.abs(F.y-G.y),Math.abs(F.y+F.height-G.y));return ie*ie+se*se},V="rgb(95, 149, 255)",q="rgb(253, 253, 253)",it="rgb(247, 250, 255)",ot="rgb(224, 224, 224)",At="rgb(224, 224, 224)",gt={version:"0.0.9",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:V,fill:"rgb(239, 244, 255)"},size:20,color:V,linkPoints:{size:8,lineWidth:1,fill:it,stroke:V}},nodeStateStyles:{active:{fill:it,stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:V,lineWidth:4,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ot,lineAppendWidth:2},color:ot},edgeStateStyles:{active:{stroke:V,lineWidth:1},selected:{stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:V,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:q,lineWidth:1,stroke:At,r:5,width:20,height:10},size:[20,5],color:At,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:V,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:V,lineWidth:2,fill:q,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:q,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:q,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},mt=function(){function ve(G){this.graph=G,this.destroyed=!1,this.modes=G.get("modes")||{default:[]},this.formatModes(),this.mode=G.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ve.prototype.formatModes=function(){var G=this.modes;Object(l.f)(G,function(F){Object(l.f)(F,function(Z,ut){Object(l.x)(Z)&&(F[ut]={type:Z})})})},ve.prototype.setBehaviors=function(G){var F,Z=this.graph,ut=this.modes[G],Bt=[];Object(l.f)(ut||[],function(Jt){var ie=j.getBehavior(Jt.type||Jt);ie&&(F=new ie(Jt))&&(F.bind(Z),Bt.push(F))}),this.currentBehaves=Bt},ve.mergeBehaviors=function(G,F){return Object(l.f)(F,function(Z){G.indexOf(Z)<0&&(Object(l.x)(Z)&&(Z={type:Z}),G.push(Z))}),G},ve.filterBehaviors=function(G,F){var Z=[];return G.forEach(function(ut){var Bt="";Bt=Object(l.x)(ut)?ut:ut.type,F.indexOf(Bt)<0&&Z.push(ut)}),Z},ve.prototype.setMode=function(G){var F=this.modes,Z=this.graph,ut=G;F[ut]&&(Z.emit("beforemodechange",{mode:G}),Object(l.f)(this.currentBehaves,function(Bt){Bt.delegate&&Bt.delegate.remove(),Bt.unbind(Z)}),this.setBehaviors(ut),Z.emit("aftermodechange",{mode:G}),this.mode=G)},ve.prototype.getMode=function(){return this.mode},ve.prototype.manipulateBehaviors=function(G,F,Z){var ut,Bt=this;if(ut=Object(l.m)(G)?G:[G],Object(l.m)(F))return Object(l.f)(F,function(ie){Bt.modes[ie]?Bt.modes[ie]=Z?ve.mergeBehaviors(Bt.modes[ie]||[],ut):ve.filterBehaviors(Bt.modes[ie]||[],ut):Z&&(Bt.modes[ie]=ut)}),this;var Jt=F;return F||(Jt=this.mode),this.modes[Jt]||Z&&(this.modes[Jt]=ut),this.modes[Jt]=Z?ve.mergeBehaviors(this.modes[Jt]||[],ut):ve.filterBehaviors(this.modes[Jt]||[],ut),this.setMode(this.mode),this},ve.prototype.updateBehavior=function(G,F,Z){Object(l.x)(G)&&(G={type:G});var ut=[];if(Z&&Z!==this.mode&&Z!=="default"){if(!(ut=this.modes[Z])||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var Bt=ut.length;for(ie=0;ie<Bt;ie++){if((se=ut[ie]).type===G.type||se===G.type)return se===G.type&&(se={type:se}),Object.assign(se,F),ut[ie]=se,this;ie===Bt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(ut=this.currentBehaves)||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Jt=ut.length,ie=0;ie<Jt;ie++){var se;if((se=ut[ie]).type===G.type)return se.updateCfg(F),this;ie===Jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ve.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ve}(),Ot=e(14),It=function(ve){function G(F,Z){var ut=ve.call(this,F,Z)||this;return ut.item=Z.item,ut.canvasX=Z.canvasX,ut.canvasY=Z.canvasY,ut.wheelDelta=Z.wheelDelta,ut.detail=Z.detail,ut}return Object(n.b)(G,ve),G}(e(18).Event),Dt=function(G){return G+"-"+Math.random()+Date.now()},Ut=function(G){var F=0,Z=0,ut=0,Bt=0;return Object(l.t)(G)?F=Z=ut=Bt=G:Object(l.x)(G)?F=Z=ut=Bt=parseInt(G,10):Object(l.m)(G)&&(F=G[0],ut=Object(l.s)(G[1])?G[0]:G[1],Bt=Object(l.s)(G[2])?G[0]:G[2],Z=Object(l.s)(G[3])?ut:G[3]),[F,ut,Bt,Z]},Ct=function(G){var F=new It(G.type,G);return F.clientX=G.clientX,F.clientY=G.clientY,F.x=G.x,F.y=G.y,F.target=G.target,F.currentTarget=G.currentTarget,F.bubbles=!0,F.item=G.item,F},Vt=function(G){if(!G)return!1;for(var F=[1,0,0,0,1,0,0,0,1],Z=0;Z<9;Z++)if(G[Z]!==F[Z])return!0;return!1},Ht=function(G){return Number.isNaN(Number(G))},re=function(G){for(var F=1/0,Z=-1/0,ut=1/0,Bt=-1/0,Jt=0;Jt<G.length;Jt++){var ie=G[Jt].getBBox(),se=ie.minX,Te=ie.minY,Ee=ie.maxX,un=ie.maxY;se<F&&(F=se),Te<ut&&(ut=Te),Ee>Z&&(Z=Ee),un>Bt&&(Bt=un)}return{x:Math.floor(F),y:Math.floor(ut),width:Math.ceil(Z)-Math.floor(F),height:Math.ceil(Bt)-Math.floor(ut),minX:F,minY:ut,maxX:Z,maxY:Bt}},pe=function(G,F,Z,ut,Bt){F===void 0&&(F=15),Z===void 0&&(Z="quadratic");for(var Jt=G.length,ie=2*F,se=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],Te={},Ee=[],un={},xn=0;xn<Jt;xn++){var _t=G[xn],Xt=_t.source,Se=_t.target,Wt=Xt+"-"+Se;if(!Ee[xn]){Te[Wt]||(Te[Wt]=[]),Ee[xn]=!0,Te[Wt].push(_t);for(var ue=0;ue<Jt;ue++)if(xn!==ue){var vn=G[ue],Dn=vn.source,zn=vn.target;Ee[ue]||(Xt===zn&&Se===Dn?(Te[Wt].push(vn),Ee[ue]=!0,un[Dn+"|"+zn+"|"+(Te[Wt].length-1)]=!0):Xt===Dn&&Se===zn&&(Te[Wt].push(vn),Ee[ue]=!0))}}}for(var Un in Te)for(var Ze=Te[Un],Ce=Ze.length,R=0;R<Ce;R++){var xt=Ze[R];if(xt.source!==xt.target)if(Ce===1&&ut&&xt.source!==xt.target)xt.type=ut;else{xt.type=Z;var $t=(R%2==0?1:-1)*(un[xt.source+"|"+xt.target+"|"+R]?-1:1);xt.curveOffset=Ce%2==1?$t*Math.ceil(R/2)*ie:$t*(Math.floor(R/2)*ie+F)}else Bt&&(xt.type=Bt),xt.loopCfg={position:se[R%8],dist:20*Math.floor(R/8)+50}}return G},ye=function(){function ve(G){this.destroyed=!1,this.graph=G,this.destroyed=!1}return ve.prototype.getViewCenter=function(){var G=this.getFormatPadding(),F=this.graph,Z=this.graph.get("width"),ut=F.get("height");return{x:(Z-G[1]-G[3])/2+G[3],y:(ut-G[0]-G[2])/2+G[0]}},ve.prototype.fitCenter=function(){var G=this.graph,F=G.get("group");F.resetMatrix();var Z=F.getCanvasBBox();if(Z.width!==0&&Z.height!==0){var ut=this.getViewCenter(),Bt=Z.x+Z.width/2,Jt=Z.y+Z.height/2;G.translate(ut.x-Bt,ut.y-Jt)}},ve.prototype.fitView=function(){var G=this.graph,F=this.getFormatPadding(),Z=G.get("width"),ut=G.get("height"),Bt=G.get("group");Bt.resetMatrix();var Jt=Bt.getCanvasBBox();if(Jt.width!==0&&Jt.height!==0){var ie=this.getViewCenter(),se=Jt.x+Jt.width/2,Te=Jt.y+Jt.height/2;G.translate(ie.x-se,ie.y-Te);var Ee=(Z-F[1]-F[3])/Jt.width,un=(ut-F[0]-F[2])/Jt.height,xn=Ee;Ee>un&&(xn=un),G.zoom(xn,ie)}},ve.prototype.getFormatPadding=function(){var G=this.graph.get("fitViewPadding");return Ut(G)},ve.prototype.focusPoint=function(G,F,Z){var ut=this,Bt=this.getViewCenter(),Jt=this.getPointByCanvas(Bt.x,Bt.y),ie=this.graph.get("group").getMatrix();if(ie||(ie=[1,0,0,0,1,0,0,0,1]),F){var se=(Jt.x-G.x)*ie[0],Te=(Jt.y-G.y)*ie[4],Ee=0,un=0,xn=0,_t=0;this.graph.get("canvas").animate(function(Xt){xn=se*Xt,_t=Te*Xt,ut.graph.translate(xn-Ee,_t-un),Ee=xn,un=_t},Object(n.a)({},Z))}else this.graph.translate((Jt.x-G.x)*ie[0],(Jt.y-G.y)*ie[4])},ve.prototype.getPointByCanvas=function(G,F){var Z=this.graph.get("group").getMatrix();return Z||(Z=[1,0,0,0,1,0,0,0,1]),nt({x:G,y:F},Z)},ve.prototype.getPointByClient=function(G,F){var Z=this.graph.get("canvas").getPointByClient(G,F);return this.getPointByCanvas(Z.x,Z.y)},ve.prototype.getClientByPoint=function(G,F){var Z=this.graph.get("canvas"),ut=this.getCanvasByPoint(G,F),Bt=Z.getClientByPoint(ut.x,ut.y);return{x:Bt.x,y:Bt.y}},ve.prototype.getCanvasByPoint=function(G,F){var Z=this.graph.get("group").getMatrix();return Z||(Z=[1,0,0,0,1,0,0,0,1]),tt({x:G,y:F},Z)},ve.prototype.focus=function(G,F,Z){Object(l.x)(G)&&(G=this.graph.findById(G));var ut=G.get("group").getMatrix();ut||(ut=[1,0,0,0,1,0,0,0,1]),G&&this.focusPoint({x:ut[6],y:ut[7]},F,Z)},ve.prototype.changeSize=function(G,F){var Z=this.graph;if(!Object(l.t)(G)||!Object(l.t)(F))throw Error("invalid canvas width & height, please make sure width & height type is number");Z.set({width:G,height:F}),Z.get("canvas").changeSize(G,F),Z.get("plugins").forEach(function(ut){if(ut.get("gridContainer")){var Bt=Z.get("minZoom");Object(Ot.c)(ut.get("container"),{width:G+"px",height:F+"px"}),Object(Ot.c)(ut.get("gridContainer"),{width:G/Bt+"px",height:F/Bt+"px",left:0,top:0})}})},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ve}(),we={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ne=Math.PI,Ke=Math.sin,pn=Math.cos,hn=Ke(Ne/8),kn=pn(Ne/8),Tn=function(G,F){var Z=G.getBBox(),ut={x:Z.minX,y:Z.minY},Bt={x:Z.maxX,y:Z.maxY};if(F){var Jt=F.getMatrix();Jt||(Jt=[1,0,0,0,1,0,0,0,1]),ut=tt(ut,Jt),Bt=tt(Bt,Jt)}var ie=ut.x,se=ut.y,Te=Bt.x,Ee=Bt.y;return{x:ie,y:se,minX:ie,minY:se,maxX:Te,maxY:Ee,width:Te-ie,height:Ee-se}},Rn=function(G){var F=G.sourceNode||G.targetNode,Z=F.get("group").getMatrix();Z||(Z=[1,0,0,0,1,0,0,0,1]);var ut=F.getKeyShape().getBBox(),Bt=G.loopCfg||{},Jt=Bt.dist||2*Math.max(ut.width,ut.height),ie=Bt.position||gt.defaultLoopPosition,se=[Z[6],Z[7]],Te=[G.startPoint.x,G.startPoint.y],Ee=[G.endPoint.x,G.endPoint.y],un=ut.height/2,xn=ut.height/2,_t=un*hn,Xt=un*kn,Se=xn*hn,Wt=xn*kn;if(Te[0]===Ee[0]&&Te[1]===Ee[1]){switch(ie){case"top":Te=[se[0]-_t,se[1]-Xt],Ee=[se[0]+Se,se[1]-Wt];break;case"top-right":un=ut.height/2,xn=ut.width/2,Te=[se[0]+(_t=un*hn),se[1]-(Xt=un*kn)],Ee=[se[0]+(Wt=xn*kn),se[1]-(Se=xn*hn)];break;case"right":un=ut.width/2,xn=ut.width/2,Te=[se[0]+(Xt=un*kn),se[1]-(_t=un*hn)],Ee=[se[0]+(Wt=xn*kn),se[1]+(Se=xn*hn)];break;case"bottom-right":un=ut.width/2,xn=ut.height/2,Te=[se[0]+(Xt=un*kn),se[1]+(_t=un*hn)],Ee=[se[0]+(Se=xn*hn),se[1]+(Wt=xn*kn)];break;case"bottom":un=ut.height/2,xn=ut.height/2,Te=[se[0]+(_t=un*hn),se[1]+(Xt=un*kn)],Ee=[se[0]-(Se=xn*hn),se[1]+(Wt=xn*kn)];break;case"bottom-left":un=ut.height/2,xn=ut.width/2,Te=[se[0]-(_t=un*hn),se[1]+(Xt=un*kn)],Ee=[se[0]-(Wt=xn*kn),se[1]+(Se=xn*hn)];break;case"left":un=ut.width/2,xn=ut.width/2,Te=[se[0]-(Xt=un*kn),se[1]+(_t=un*hn)],Ee=[se[0]-(Wt=xn*kn),se[1]-(Se=xn*hn)];break;case"top-left":un=ut.width/2,xn=ut.height/2,Te=[se[0]-(Xt=un*kn),se[1]-(_t=un*hn)],Ee=[se[0]-(Se=xn*hn),se[1]-(Wt=xn*kn)];break;default:un=ut.width/2,xn=ut.width/2,Te=[se[0]-(_t=un*hn),se[1]-(Xt=un*kn)],Ee=[se[0]+(Se=xn*hn),se[1]-(Wt=xn*kn)]}if(Bt.clockwise===!1){var ue=[Te[0],Te[1]];Te=[Ee[0],Ee[1]],Ee=[ue[0],ue[1]]}}var vn=[Te[0]-se[0],Te[1]-se[1]],Dn=(un+Jt)/un,zn=(xn+Jt)/xn;Bt.clockwise===!1&&(Dn=(xn+Jt)/xn,zn=(un+Jt)/un);var Un=d.c.scale([0,0],vn,Dn),Ze=[se[0]+Un[0],se[1]+Un[1]],Ce=[Ee[0]-se[0],Ee[1]-se[1]],R=d.c.scale([0,0],Ce,zn),xt=[se[0]+R[0],se[1]+R[1]];return G.startPoint={x:Te[0],y:Te[1]},G.endPoint={x:Ee[0],y:Ee[1]},G.controlPoints=[{x:Ze[0],y:Ze[1]},{x:xt[0],y:xt[1]}],G},Mn=function(G,F,Z,ut,Bt){var Jt=[],ie=G.getPoint(F);if(ie===null)return{x:0,y:0,angle:0};if(F<1e-4)Jt=G.getStartTangent().reverse();else if(F>.9999)Jt=G.getEndTangent();else{var se=G.getPoint(F+1e-4);Jt.push([ie.x,ie.y]),Jt.push([se.x,se.y])}var Te=Math.atan2(Jt[1][1]-Jt[0][1],Jt[1][0]-Jt[0][0]);if(Te<0&&(Te+=2*Ne),Z&&(ie.x+=pn(Te)*Z,ie.y+=Ke(Te)*Z),ut){var Ee=Te-Ne/2;Te>.5*Ne&&Te<1.5*Ne&&(Ee-=Ne),ie.x+=pn(Ee)*ut,ie.y+=Ke(Ee)*ut}var un={x:ie.x,y:ie.y,angle:Te};return Bt?(Te>.5*Ne&&Te<1.5*Ne&&(Te-=Ne),Object(n.a)({rotate:Te},un)):un},Cn=function ve(G,F){if(F(G)===!1)return!1;if(G&&G.children){for(var Z=G.children.length-1;Z>=0;Z--)if(!ve(G.children[Z],F))return!1}return!0},_n=function(G,F){typeof F=="function"&&Cn(G,F)},Kn=function(G,F){typeof F=="function"&&function Z(ut,Bt){if(ut&&ut.children){for(var Jt=ut.children.length-1;Jt>=0;Jt--)if(!Z(ut.children[Jt],Bt))return}return Bt(ut)!==!1}(G,F)},tr=function(G,F){return F*(we[G]||1)},or=function(G,F){var Z=0,ut=new RegExp("[\u4E00-\u9FA5]+");return G.split("").forEach(function(Bt){ut.test(Bt)?Z+=F:Z+=tr(Bt,F)}),[Z,F]},nr=function(G,F){var Z=[],ut={},Bt={};G.forEach(function(se){Bt[se.id]=se}),G.forEach(function(se,Te){var Ee=Object(l.c)(se);Ee.itemType="combo",Ee.children=void 0,Ee.parentId===Ee.id?(console.warn("The parentId for combo "+Ee.id+" can not be the same as the combo's id"),delete Ee.parentId):Ee.parentId&&!Bt[Ee.parentId]&&(console.warn("The parent combo for combo "+Ee.id+" does not exist!"),delete Ee.parentId);var un=ut[Ee.id];if(un){if(Ee.children=un.children,ut[Ee.id]=Ee,!(un=Ee).parentId)return void Z.push(un);var xn=ut[un.parentId];if(xn)xn.children?xn.children.push(Ee):xn.children=[Ee];else{var _t={id:un.parentId,children:[un]};ut[un.parentId]=_t,ut[Ee.id]=Ee}}else if(Object(l.x)(se.parentId)){var Xt=ut[se.parentId];if(Xt)Xt.children?Xt.children.push(Ee):Xt.children=[Ee],ut[Ee.id]=Ee;else{var Se={id:se.parentId,children:[Ee]};ut[Se.id]=Se,ut[Ee.id]=Ee}}else Z.push(Ee),ut[Ee.id]=Ee});var Jt={};(F||[]).forEach(function(se){Jt[se.id]=se;var Te=ut[se.comboId];if(Te){var Ee={id:se.id,comboId:se.comboId};Te.children?Te.children.push(Ee):Te.children=[Ee],Ee.itemType="node",ut[se.id]=Ee}});var ie=0;return Z.forEach(function(se){se.depth=ie+10,Cn(se,function(Te){var Ee,un=ut[Te.id].itemType;Ee=un==="node"?ut[Te.comboId]:ut[Te.parentId],Te.depth=Ee&&un==="node"?ie+1:ie+10,ie<Te.depth&&(ie=Te.depth);var xn=Jt[Te.id];return xn&&(xn.depth=Te.depth),!0})}),Z},er=function(G,F,Z){var ut,Bt=G,Jt={root:{children:G}},ie=!1,se="root";(G||[]).forEach(function(_t){if(!ie)return _t.id===F?(ut=_t,_t.itemType==="combo"?ut.parentId=Z:ut.comboId=Z,void(ie=!0)):void _n(_t,function(Xt){return Jt[Xt.id]={children:Xt.children},Bt=Jt[Xt.parentId||Xt.comboId||"root"].children,!Xt||!Xt.removed&&F!==Xt.id||!Bt||(se=Xt.parentId||Xt.comboId||"root",ut=Xt,Xt.itemType==="combo"?ut.parentId=Z:ut.comboId=Z,ie=!0,!1)})});var Te=(Bt=Jt[se].children)?Bt.indexOf(ut):-1;if(Te>-1&&Bt.splice(Te,1),ie||(ut={id:F,itemType:"node",comboId:Z},Jt[F]={children:void 0}),F){var Ee=!1;if(Z){var un=0;(G||[]).forEach(function(_t){Ee||_n(_t,function(Xt){return Z!==Xt.id||(Ee=!0,Xt.children?Xt.children.push(ut):Xt.children=[ut],un=Xt.depth,ut.itemType==="node"?ut.depth=un+2:ut.depth=un+1,!1)})})}else Z&&Ee||ut.itemType==="node"||G.push(ut);var xn=ut.depth;_n(ut,function(_t){return _t.itemType==="node"?xn+=2:xn+=1,_t.depth=xn,!0})}return G},Sr=function(G,F){var Z={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return G&&G.length!==0&&(G.forEach(function(ut){var Bt=F.findById(ut.id);if(Bt&&Bt.isVisible()){Bt.set("bboxCanvasCache",void 0);var Jt=Bt.getCanvasBBox();Jt.x&&Z.minX>Jt.minX&&(Z.minX=Jt.minX),Jt.y&&Z.minY>Jt.minY&&(Z.minY=Jt.minY),Jt.x&&Z.maxX<Jt.maxX&&(Z.maxX=Jt.maxX),Jt.y&&Z.maxY<Jt.maxY&&(Z.maxY=Jt.maxY)}}),Z.x=(Z.minX+Z.maxX)/2,Z.y=(Z.minY+Z.maxY)/2,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Object.keys(Z).forEach(function(ut){Z[ut]!==1/0&&Z[ut]!==-1/0||(Z[ut]=void 0)})),Z},Vr=function(G){var F=Object(l.t)(G.x)||Object(l.t)(G.y)||G.type||G.anchorPoints||G.size;return G.style&&(F=F||Object(l.t)(G.style.r)||Object(l.t)(G.style.width)||Object(l.t)(G.style.height)||Object(l.t)(G.style.rx)||Object(l.t)(G.style.ry)),F},ti=function(G){var F={};return Object.keys(G).forEach(function(Z){var ut=G[Z];if(Object(l.v)(ut)){var Bt={};Object.keys(ut).forEach(function(Jt){var ie=ut[Jt];(Jt!=="img"||Object(l.x)(ie))&&(Bt[Jt]=Object(l.c)(ie))}),F[Z]=Bt}else F[Z]=Object(l.c)(ut)}),F};function hi(ve){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(ve)}function Fi(ve){if(typeof ve!="string")return ve;var G=function(Ze){if(typeof Ze!="string")return Ze;try{return JSON.parse(Ze.trim())}catch(Ce){return Ze.trim()}},F=G(ve);if(typeof F!="string")return F;for(var Z=function(Ze){return Ze[Ze.length-1]},ut=ve.trim(),Bt=[],Jt=[],ie=function(){for(var Ze=[],Ce=0;Ce<arguments.length;Ce++)Ze[Ce]=arguments[Ce];return Ze.some(function(R){return Z(Jt)===R})},se=null,Te=0,Ee="";Te<ut.length;){var un=ut[Te],xn=ie('"',"'");if(xn||un.trim()){var _t=ut[Te-1]==="\\",Xt=ie("}"),Se=ie("]"),Wt=ie(","),ue=Z(Bt);if(xn)if(Z(Jt)!==un||_t)Ee+=un;else{Jt.pop();var vn=G(Ee);ue.push(vn),se=vn,Ee=""}else if(Se&&un===",")Ee&&(ue.push(G(Ee)),Ee="");else if(Xt&&un===":")Jt.push(","),Ee&&(ue.push(Ee),Ee="");else if(Wt&&un===",")Ee&&(ue.push(G(Ee)),Ee=""),Jt.pop();else if(un==="}"&&(Xt||Wt)){Ee&&(ue.push(G(Ee)),Ee=""),Wt&&Jt.pop();for(var Dn={},zn=1;zn<ue.length;zn+=2)Dn[ue[zn-1]]=ue[zn];Bt.pop(),Bt.length&&Z(Bt).push(Dn),Jt.pop(),se=Dn}else un==="]"&&Se?(Ee&&(ue.push(G(Ee)),Ee=""),Bt.pop(),Bt.length&&Z(Bt).push(ue),Jt.pop(),se=ue):un==="{"?(Bt.push([]),Jt.push("}")):un==="["?(Bt.push([]),Jt.push("]")):un==='"'?Jt.push('"'):un==="'"?Jt.push("'"):Ee+=un;Te+=1}else Te+=1}return se||Ee}function to(ve,G){var F;G===void 0&&(G={x:0,y:0});var Z=Object(n.a)({x:0,y:0,width:0,height:0},G);if((F=ve.children)===null||F===void 0?void 0:F.length){var ut=ve.attrs,Bt=ut===void 0?{}:ut,Jt=Bt.marginTop,ie=Object(n.a)({},G);Jt&&(ie.y+=Jt);for(var se=0;se<ve.children.length;se++){ve.children[se].attrs.key=(Bt.key||"root")+" -"+se+" ";var Te=to(ve.children[se],ie);if(Te.bbox){var Ee=Te.bbox;Te.attrs.next==="inline"?ie.x+=Te.bbox.width:ie.y+=Te.bbox.height,Ee.width+Ee.x>Z.width&&(Z.width=Ee.width+Ee.x),Ee.height+Ee.y>Z.height&&(Z.height=Ee.height+Ee.y)}}}return ve.bbox=function(un,xn,_t){var Xt,Se,Wt=un.attrs,ue=Wt===void 0?{}:Wt,vn={x:xn.x||0,y:xn.y||0,width:_t.width||0,height:_t.height||0};switch(un.type){case"maker":case"circle":ue.r&&(Se=2*ue.r,Xt=2*ue.r);break;case"text":ue.text&&(Se=or(ue.text,ue.fontSize||12)[0],Xt=16,vn.y+=Xt,vn.height=Xt,vn.width=Se,un.attrs=Object(n.a)({fontSize:12,fill:"#000"},ue));break;default:ue.width&&(Se=ue.width),ue.height&&(Xt=ue.height)}return Xt>=0&&(vn.height=Xt),Se>=0&&(vn.width=Se),ue.marginTop&&(vn.y+=ue.marginTop),ue.marginLeft&&(vn.x+=ue.marginLeft),vn}(ve,G,Z),ve.attrs=Object(n.a)(Object(n.a)({},ve.attrs),ve.bbox),ve}function si(ve){var G={},F=function(ut){var Bt=function(se){return function(Te){for(var Ee=se.length,un=[],xn=0,_t="";xn<Ee;)if(se[xn]==="{"&&se[xn+1]==="{")un.push(_t),_t="",xn+=2;else if(se[xn]==="}"&&se[xn+1]==="}"){if(un.length){var Xt=un.pop();_t=Object(l.i)(Te,_t,Xt.endsWith("=")?'"{'+_t+'}"':_t),un.push(Xt+_t)}xn+=2,_t=""}else _t+=se[xn],xn+=1;return un.push(_t),un.map(function(Se,Wt){return un[Wt-1]&&un[Wt-1].endsWith("=")?'"{'+Se+'}"':Se}).join("")}}(typeof ve=="function"?ve(ut):ve)(ut),Jt=document.createElement("div");Jt.innerHTML=Bt;var ie=to(function se(Te,Ee){var un={},xn=Te.getAttributeNames&&Te.getAttributeNames()||[],_t=Te.children&&Array.from(Te.children).map(function(Wt){return se(Wt,Ee)}),Xt={},Se=Te.tagName?Te.tagName.toLowerCase():"group";return Se==="text"&&(un.text=Te.innerText),Xt.type=Se,Se==="img"&&(Xt.type="image"),Array.from(xn).forEach(function(Wt){var ue=Wt.split("-").reduce(function(zn,Un){return zn+Un.charAt(0).toUpperCase()+Un.slice(1)}),vn=Te.getAttribute(Wt);try{if(ue==="style"||ue==="attrs"){var Dn=Fi(vn);un=Object(n.a)(Object(n.a)({},un),Dn)}else Xt[ue]=Fi(vn)}catch(zn){if(ue==="style")throw zn;Xt[ue]=vn}}),Xt.attrs=un,Ee&&Ee.style&&Xt.name&&hi(Ee.style[Xt.name])==="object"&&(Xt.attrs=Object(n.a)(Object(n.a)({},Xt.attrs),Ee.style[Xt.name])),Ee&&Ee.style&&Xt.keyshape&&(Xt.attrs=Object(n.a)(Object(n.a)({},Xt.attrs),Ee.style)),_t.length&&(Xt.children=_t),Xt}(Jt.children[0],ut));return Jt.remove(),ie};return{draw:function(ut,Bt){var Jt=F(ut),ie=Bt;return function se(Te){var Ee=Te.attrs,un=Ee===void 0?{}:Ee,xn=Te.bbox,_t=Te.type,Xt=Te.children,Se=Object(n.c)(Te,["attrs","bbox","type","children"]);if(Te.type!=="group"){var Wt=Bt.addShape(Te.type,Object(n.a)({attrs:un,origin:{bbox:xn,type:_t,children:Xt}},Se));Te.keyshape&&(ie=Wt)}Te.children&&Te.children.forEach(function(ue){return se(ue)})}(Jt),G[ut.id]=[Jt],ie},update:function(ut,Bt){G[ut.id]||(G[ut.id]=[]);var Jt=Bt.getContainer(),ie=Jt.get("children"),se=F(ut),Te=function xn(_t,Xt){var Se,Wt,ue,vn,Dn=(_t||{}).type,zn=((Xt==null?void 0:Xt.attrs)||{}).key;if(zn&&_t&&(_t.attrs.key=zn),!_t&&Xt)return{action:"delete",val:Xt,type:Dn,key:zn};if(_t&&!Xt)return{action:"add",val:_t,type:Dn};if(!_t&&!Xt)return{action:"same",type:Dn};var Un=[];if(((Se=_t.children)===null||Se===void 0?void 0:Se.length)>0||((Wt=Xt.children)===null||Wt===void 0?void 0:Wt.length)>0)for(var Ze=Math.max((ue=_t.children)===null||ue===void 0?void 0:ue.length,(vn=Xt.children)===null||vn===void 0?void 0:vn.length),Ce=Xt.children||[],R=_t.children||[],xt=0;xt<Ze;xt+=1)Un.push(xn(R[xt],Ce[xt]));var $t=Object.keys(Xt.attrs),me=Object.keys(_t.attrs);return Xt.type!==_t.type?{action:"restructure",nowTarget:_t,formerTarget:Xt,key:zn,children:Un}:$t.filter(function(Zt){return Zt!=="children"}).some(function(Zt){return _t.attrs[Zt]!==Xt.attrs[Zt]||!me.includes(Zt)})?{action:"change",val:_t,children:Un,type:Dn,key:zn}:{action:"same",children:Un,type:Dn,key:zn}}(se,G[ut.id].pop()),Ee=function xn(_t){var Xt;_t.type!=="group"&&Jt.addShape(_t.type,{attrs:_t.attrs}),((Xt=_t.children)===null||Xt===void 0?void 0:Xt.length)&&_t.children.map(function(Se){return xn(Se)})},un=function xn(_t){var Xt,Se=ie.find(function(Wt){return Wt.attrs.key===_t.attrs.key});Se&&Jt.removeChild(Se),((Xt=_t.children)===null||Xt===void 0?void 0:Xt.length)&&_t.children.map(function(Wt){return xn(Wt)})};(function xn(_t){var Xt=_t.key;if(_t.type!=="group"){var Se=ie.find(function(ue){return ue.attrs.key===Xt});switch(_t.action){case"change":if(Se){var Wt=_t.val.keyshape?Bt.getOriginStyle():{};Se.attr(Object(n.a)(Object(n.a)({},Wt),_t.val.attrs))}break;case"add":Ee(_t.val);break;case"delete":un(_t.val);break;case"restructure":un(_t.formerTarget),Ee(_t.nowTarget)}}_t.children&&_t.children.forEach(function(ue){return xn(ue)})})(Te),G[ut.id].push(se)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ci={};function Ui(ve){return Ci[ve]||(Ci[ve]=Object(l.I)(ve)),Ci[ve]}var Li={defaultShapeType:"defaultType",className:null,getShape:function(G){return this[G]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(G,F,Z){var ut=this.getShape(G),Bt=ut.draw(F,Z);return ut.afterDraw&&ut.afterDraw(F,Z,Bt),Bt},baseUpdate:function(G,F,Z){var ut=this.getShape(G);ut.update&&ut.update(F,Z),ut.afterUpdate&&ut.afterUpdate(F,Z)},setState:function(G,F,Z,ut){this.getShape(G).setState(F,Z,ut)},shouldUpdate:function(G){return!!this.getShape(G).update},getControlPoints:function(G,F){return this.getShape(G).getControlPoints(F)},getAnchorPoints:function(G,F){return this.getShape(G).getAnchorPoints(F)}},Vi={options:{},draw:function(G,F){return this.drawShape(G,F)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){var F=this.options.anchorPoints;return G.anchorPoints||F}},ro=function(){function ve(){}return ve.registerFactory=function(G,F){var Z=Ui(G),ut=Li,Bt=Object(n.a)(Object(n.a)({},ut),F);return ve[Z]=Bt,Bt.className=Z,Bt},ve.getFactory=function(G){return ve[Ui(G)]},ve.registerNode=function(G,F,Z){var ut,Bt=ve.Node;if(typeof F=="string"||typeof F=="function"){var Jt=si(F);ut=Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt)}else if(F.jsx)Jt=si(F.jsx),ut=Object(n.a)(Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt),F);else{Bt.getShape(Z);var ie=Z?Bt.getShape(Z):Vi;ut=Object(n.a)(Object(n.a)({},ie),F)}return ut.type=G,ut.itemType="node",Bt[G]=ut,ut},ve.registerEdge=function(G,F,Z){var ut=ve.Edge,Bt=Z?ut.getShape(Z):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),F);return Jt.type=G,Jt.itemType="edge",ut[G]=Jt,Jt},ve.registerCombo=function(G,F,Z){var ut=ve.Combo,Bt=Z?ut.getShape(Z):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),F);return Jt.type=G,Jt.itemType="combo",ut[G]=Jt,Jt},ve}(),jr=ro;ro.registerFactory("node",{defaultShapeType:"circle"}),ro.registerFactory("edge",{defaultShapeType:"line"}),ro.registerFactory("combo",{defaultShapeType:"circle"});var Ji=["startArrow","endArrow"],pr=function(){function ve(G){this._cfg={},this.destroyed=!1;var F={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(F,this.getDefaultCfg(),G);var Z=this.get("model"),ut=Z.id,Bt=this.get("type");ut||(ut=Dt(Bt),this.get("model").id=ut),this.set("id",ut);var Jt=G.group;Jt&&(Jt.set("item",this),Jt.set("id",ut)),this.init(),this.draw();var ie=Z.shape||Z.type||(Bt==="edge"?"line":"circle"),se=this.get("shapeFactory");if(se&&se[ie]){var Te=se[ie].options;if(Te&&Te.stateStyles){var Ee=this.get("styles")||Z.stateStyles;Ee=Object(l.e)({},Te.stateStyles,Ee),this.set("styles",Ee)}}}return ve.prototype.calculateBBox=function(){var G=this.get("keyShape"),F=this.get("group"),Z=Tn(G,F);return Z.x=Z.minX,Z.y=Z.minY,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Z},ve.prototype.calculateCanvasBBox=function(){var G=this.get("keyShape"),F=this.get("group"),Z=Tn(G,F);return Z.x=Z.minX,Z.y=Z.minY,Z.width=Z.maxX-Z.minX,Z.height=Z.maxY-Z.minY,Z.centerX=(Z.minX+Z.maxX)/2,Z.centerY=(Z.minY+Z.maxY)/2,Z},ve.prototype.drawInner=function(){var G=this.get("shapeFactory"),F=this.get("group"),Z=this.get("model");F.clear();var ut=Z.visible;if(ut===void 0||ut||this.changeVisibility(ut),G){this.updatePosition(Z);var Bt=this.getShapeCfg(Z),Jt=Bt.type,ie=G.draw(Jt,Bt,F);ie&&(this.set("keyShape",ie),ie.set("isKeyShape",!0),ie.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Jt),this.restoreStates(G,Jt)}},ve.prototype.setOriginStyle=function(G){var F=this.get("group").get("children"),Z=this.getKeyShape(),ut=this,Bt=Z.get("name");if(this.get("originStyle")){var Jt=this.getOriginStyle();Bt&&!Jt[Bt]&&(Jt[Bt]={});var ie=this.getCurrentStatesStyle();Object(l.f)(F,function(Te){var Ee=Te.get("name"),un=Te.attr();if(Ee&&Ee!==Bt){var xn=ie[Ee];Jt[Ee]||(Jt[Ee]={}),xn?Object.keys(un).forEach(function(Se){var Wt=un[Se];Wt!==xn[Se]&&(Jt[Ee][Se]=Wt)}):Jt[Ee]=Object(l.c)(un)}else{var _t=Te.attr(),Xt=Object(n.a)(Object(n.a)({},ie),ie[Bt]);Object.keys(_t).forEach(function(Se){var Wt=_t[Se];Object(l.w)(Wt)&&Ji.indexOf(Ee)===-1||Xt[Se]!==Wt&&(Bt?Jt[Bt][Se]=Wt:Jt[Se]=Wt)})}}),Jt.path&&delete Jt.path,Jt.matrix&&delete Jt.matrix,ut.set("originStyle",Jt)}else{var se={};Object(l.f)(F,function(Te){var Ee=Te.get("type"),un=Te.get("name");if(un&&un!==Bt)se[un]=Ee!=="image"?Object(l.c)(Te.attr()):ut.getShapeStyleByName(un);else{var xn=ut.getShapeStyleByName();if(xn.path&&delete xn.path,xn.matrix&&delete xn.matrix,Bt)if(un)se[Bt]=xn;else{var _t=Dt("shape");Te.set("name",_t),se[_t]=Ee!=="image"?Object(l.c)(Te.attr()):ut.getShapeStyleByName(un)}else Object.assign(se,xn)}}),ut.set("originStyle",se)}},ve.prototype.restoreStates=function(G,F){var Z=this,ut=Z.get("states");Object(l.f)(ut,function(Bt){G.setState(F,Bt,!0,Z)})},ve.prototype.init=function(){var G=jr.getFactory(this.get("type"));this.set("shapeFactory",G)},ve.prototype.get=function(G){return this._cfg[G]},ve.prototype.set=function(G,F){Object(l.w)(G)?this._cfg=Object(n.a)(Object(n.a)({},this._cfg),G):this._cfg[G]=F},ve.prototype.getDefaultCfg=function(){return{}},ve.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},ve.prototype.beforeDraw=function(){},ve.prototype.afterDraw=function(){},ve.prototype.afterUpdate=function(){},ve.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ve.prototype.getShapeStyleByName=function(G){var F,Z=this.get("group");if(F=G?Z.find(function(Bt){return Bt.get("name")===G}):this.getKeyShape()){var ut={};return Object(l.f)(F.attr(),function(Bt,Jt){Jt!=="img"&&(ut[Jt]=Bt)}),ut}return{}},ve.prototype.getShapeCfg=function(G){var F=this.get("styles");if(F){var Z=G;return Z.style=Object(n.a)(Object(n.a)({},F),G.style),Z}return G},ve.prototype.getStateStyle=function(G){var F=this.get("styles");return F&&F[G]},ve.prototype.getOriginStyle=function(){return this.get("originStyle")},ve.prototype.getCurrentStatesStyle=function(){var G=this,F={},Z=G.getStates();return Z&&Z.length?(Object(l.f)(G.getStates(),function(ut){F=Object.assign(F,G.getStateStyle(ut))}),F):this.getOriginStyle()},ve.prototype.setState=function(G,F){var Z=this.get("states"),ut=this.get("shapeFactory"),Bt=G,Jt=G;Object(l.x)(F)&&(Bt=G+":"+F,Jt=G+":");var ie=Z;if(Object(l.n)(F)){var se=Z.indexOf(Jt);if(F){if(se>-1)return;Z.push(Bt)}else se>-1&&Z.splice(se,1)}else if(Object(l.x)(F)){var Te=Z.filter(function(un){return un.includes(Jt)});Te.length>0&&this.clearStates(Te),(ie=ie.filter(function(un){return!un.includes(Jt)})).push(Bt),this.set("states",ie)}if(ut){var Ee=this.get("model").type;ut.setState(Ee,G,F,this)}},ve.prototype.clearStates=function(G){var F=this,Z=F.getStates(),ut=F.get("shapeFactory"),Bt=F.get("model").type;G||(G=Z),Object(l.x)(G)&&(G=[G]);var Jt=Z.filter(function(ie){return G.indexOf(ie)===-1});F.set("states",Jt),G.forEach(function(ie){ut.setState(Bt,ie,!1,F)})},ve.prototype.getContainer=function(){return this.get("group")},ve.prototype.getKeyShape=function(){return this.get("keyShape")},ve.prototype.getModel=function(){return this.get("model")},ve.prototype.getType=function(){return this.get("type")},ve.prototype.getID=function(){return this.get("id")},ve.prototype.isItem=function(){return!0},ve.prototype.getStates=function(){return this.get("states")},ve.prototype.hasState=function(G){return this.getStates().indexOf(G)>=0},ve.prototype.refresh=function(){var G=this.get("model");this.updatePosition(G),this.updateShape(),this.afterUpdate(),this.clearCache()},ve.prototype.isOnlyMove=function(G){return!1},ve.prototype.update=function(G,F){F===void 0&&(F=!1);var Z=this.get("model"),ut=Z.visible,Bt=G.visible;ut!==Bt&&Bt!==void 0&&this.changeVisibility(Bt);var Jt=Z.x,ie=Z.y;G.x=isNaN(G.x)?Z.x:G.x,G.y=isNaN(G.y)?Z.y:G.y;var se=this.get("styles");if(G.stateStyles){var Te=G.stateStyles;Object(l.A)(se,Te),delete G.stateStyles}Object.assign(Z,G),F?this.updatePosition(G):(Jt===G.x&&ie===G.y||this.updatePosition(G),this.updateShape()),this.afterUpdate(),this.clearCache()},ve.prototype.updateShape=function(){var G=this.get("shapeFactory"),F=this.get("model"),Z=F.type;if(G.shouldUpdate(Z)&&Z===this.get("currentShape")){var ut=this.getShapeCfg(F);G.baseUpdate(Z,ut,this)}else this.draw();this.setOriginStyle(F),this.restoreStates(G,Z)},ve.prototype.updatePosition=function(G){var F=this.get("model"),Z=Object(l.s)(G.x)?F.x:G.x,ut=Object(l.s)(G.y)?F.y:G.y,Bt=this.get("group");Object(l.s)(Z)||Object(l.s)(ut)||(Bt.resetMatrix(),ct(Bt,{x:Z,y:ut}),F.x=Z,F.y=ut,this.clearCache())},ve.prototype.getBBox=function(){var G=this.get("bboxCache");return G||(G=this.calculateBBox(),this.set("bboxCache",G)),G},ve.prototype.getCanvasBBox=function(){var G=this.get("bboxCanvasCache");return G||(G=this.calculateCanvasBBox(),this.set("bboxCanvasCache",G)),G},ve.prototype.toFront=function(){this.get("group").toFront()},ve.prototype.toBack=function(){this.get("group").toBack()},ve.prototype.show=function(){this.changeVisibility(!0)},ve.prototype.hide=function(){this.changeVisibility(!1)},ve.prototype.changeVisibility=function(G){var F=this.get("group");G?F.show():F.hide(),this.set("visible",G)},ve.prototype.isVisible=function(){return this.get("visible")},ve.prototype.enableCapture=function(G){var F=this.get("group");F&&F.set("capture",G)},ve.prototype.destroy=function(){if(!this.destroyed){var G=this.get("animate"),F=this.get("group");G&&F.stopAnimate(),this.clearCache(),F.remove(),this._cfg=null,this.destroyed=!0}},ve}(),Xr={source:"start",target:"end"},Br=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},G.prototype.setEnd=function(F,Z){var ut=Xr[F]+"Point",Bt=F+"Node",Jt=this.get(Bt);Jt&&!Jt.destroyed&&Jt.removeEdge(this),Object(l.w)(Z)?(this.set(ut,Z),this.set(Bt,null)):(Z.addEdge(this),this.set(Bt,Z),this.set(ut,null))},G.prototype.getLinkPoint=function(F,Z,ut){var Bt=Xr[F]+"Point",Jt=F+"Node",ie=this.get(Bt);if(!ie){var se=this.get(Jt),Te=F+"Anchor",Ee=this.getPrePoint(F,ut),un=Z[Te];Object(l.s)(un)||(ie=se.getLinkPointByAnchor(un)),ie=ie||se.getLinkPoint(Ee),Object(l.s)(ie.index)||this.set(F+"AnchorIndex",ie.index)}return ie},G.prototype.getPrePoint=function(F,Z){if(Z&&Z.length)return Z[F==="source"?0:Z.length-1];var ut=F==="source"?"target":"source";return this.getEndPoint(ut)},G.prototype.getEndPoint=function(F){var Z=F+"Node",ut=Xr[F]+"Point",Bt=this.get(Z);return Bt?Bt.get("model"):this.get(ut)},G.prototype.getControlPointsByCenter=function(F){var Z=this.getEndPoint("source"),ut=this.getEndPoint("target"),Bt=this.get("shapeFactory"),Jt=F.type;return Bt.getControlPoints(Jt,{startPoint:Z,endPoint:ut})},G.prototype.getEndCenter=function(F){var Z=F+"Node",ut=Xr[F]+"Point",Bt=this.get(Z);if(Bt){var Jt=Bt.getBBox();return{x:Jt.centerX,y:Jt.centerY}}return this.get(ut)},G.prototype.init=function(){ve.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},G.prototype.getShapeCfg=function(F){var Z=this.get("linkCenter"),ut=ve.prototype.getShapeCfg.call(this,F);if(Z)ut.startPoint=this.getEndCenter("source"),ut.endPoint=this.getEndCenter("target");else{var Bt=ut.controlPoints||this.getControlPointsByCenter(ut);ut.startPoint=this.getLinkPoint("source",F,Bt),ut.endPoint=this.getLinkPoint("target",F,Bt)}return ut.sourceNode=this.get("sourceNode"),ut.targetNode=this.get("targetNode"),ut},G.prototype.getModel=function(){var F=this.get("model"),Z=this.get("sourceNode"),ut=this.get("targetNode");return Z?delete F.sourceNode:F.source=this.get("startPoint"),ut?delete F.targetNode:F.target=this.get("endPoint"),Object(l.x)(F.source)||Object(l.w)(F.source)||(F.source=F.source.getID()),Object(l.x)(F.target)||Object(l.w)(F.target)||(F.target=F.target.getID()),F},G.prototype.setSource=function(F){this.setEnd("source",F),this.set("source",F)},G.prototype.setTarget=function(F){this.setEnd("target",F),this.set("target",F)},G.prototype.getSource=function(){return this.get("source")},G.prototype.getTarget=function(){return this.get("target")},G.prototype.updatePosition=function(){},G.prototype.update=function(F,Z){Z===void 0&&(Z=!1);var ut=this.get("model"),Bt=ut.visible,Jt=F.visible;Bt!==Jt&&Jt!==void 0&&this.changeVisibility(Jt);var ie=this.get("styles");if(F.stateStyles){var se=F.stateStyles;Object(l.A)(ie,se),delete F.stateStyles}Object.assign(ut,F),this.updateShape(),this.afterUpdate(),this.clearCache()},G.prototype.destroy=function(){var F=this.get("sourceNode"),Z=this.get("targetNode");F&&!F.destroyed&&F.removeEdge(this),Z&&!Z.destroyed&&Z.removeEdge(this),ve.prototype.destroy.call(this)},G}(pr),Nr=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getNearestPoint=function(F,Z){for(var ut=0,Bt=F[0],Jt=ft(F[0],Z),ie=0;ie<F.length;ie++){var se=F[ie],Te=ft(se,Z);Te<Jt&&(Bt=se,Jt=Te,ut=ie)}return Bt.anchorIndex=ut,Bt},G.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getInEdges=function(){var F=this;return this.get("edges").filter(function(Z){return Z.get("target")===F})},G.prototype.getOutEdges=function(){var F=this;return this.get("edges").filter(function(Z){return Z.get("source")===F})},G.prototype.getNeighbors=function(F){var Z=this,ut=this.get("edges");return F==="target"?ut.filter(function(Bt){return Bt.getSource()===Z}).map(function(Bt){return Bt.getTarget()}):F==="source"?ut.filter(function(Bt){return Bt.getTarget()===Z}).map(function(Bt){return Bt.getSource()}):ut.map(function(Bt){return Bt.getSource()===Z?Bt.getTarget():Bt.getSource()})},G.prototype.getLinkPointByAnchor=function(F){return this.getAnchorPoints()[F]},G.prototype.getLinkPoint=function(F){var Z,ut,Bt=this.get("keyShape").get("type"),Jt=this.get("type"),ie=this.getBBox();Jt==="combo"?(Z=ie.centerX||(ie.maxX+ie.minX)/2,ut=ie.centerY||(ie.maxY+ie.minY)/2):(Z=ie.centerX,ut=ie.centerY);var se,Te=this.getAnchorPoints();switch(Bt){case"circle":se=N({x:Z,y:ut,r:ie.width/2},F);break;case"ellipse":se=X({x:Z,y:ut,rx:ie.width/2,ry:ie.height/2},F);break;default:se=T(ie,F)}var Ee=se;return Te.length&&(Ee||(Ee=F),Ee=this.getNearestPoint(Te,Ee)),Ee||(Ee={x:Z,y:ut}),Ee},G.prototype.getAnchorPoints=function(){var F=this.get("anchorPointsCache");if(!F){F=[];var Z=this.get("shapeFactory"),ut=this.getBBox(),Bt=this.get("model"),Jt=this.getShapeCfg(Bt),ie=Bt.type,se=Z.getAnchorPoints(ie,Jt)||[];Object(l.f)(se,function(Te,Ee){var un={x:ut.minX+Te[0]*ut.width,y:ut.minY+Te[1]*ut.height,anchorIndex:Ee};F.push(un)}),this.set("anchorPointsCache",F)}return F},G.prototype.addEdge=function(F){this.get("edges").push(F)},G.prototype.lock=function(){this.set("locked",!0)},G.prototype.unlock=function(){this.set("locked",!1)},G.prototype.hasLocked=function(){return this.get("locked")},G.prototype.removeEdge=function(F){var Z=this.getEdges(),ut=Z.indexOf(F);ut>-1&&Z.splice(ut,1)},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},G.prototype.isOnlyMove=function(F){if(!F)return!1;var Z=!Object(l.s)(F.x),ut=!Object(l.s)(F.y),Bt=Object.keys(F);return Bt.length===1&&(Z||ut)||Bt.length===2&&Z&&ut},G}(pr),Yr=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},G.prototype.getShapeCfg=function(F){var Z=this.get("styles"),ut=this.get("bbox");if(Z&&ut){var Bt=F,Jt={r:Math.hypot(ut.height,ut.width)/2||gt.defaultCombo.size[0]/2,width:ut.width||gt.defaultCombo.size[0],height:ut.height||gt.defaultCombo.size[1]};Bt.style=Object(n.a)(Object(n.a)(Object(n.a)({},Z),F.style),Jt);var ie=F.padding||gt.defaultCombo.padding;return Object(l.t)(ie)?(Jt.r+=ie,Jt.width+=2*ie,Jt.height+=2*ie):(Jt.r+=ie[0],Jt.width+=ie[1]+ie[3]||2*ie[1],Jt.height+=ie[0]+ie[2]||2*ie[0]),this.set("sizeCache",Jt),Bt}return F},G.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var F=this.get("keyShape"),Z=this.get("group"),ut=Tn(F,Z);ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2;var Bt=this.get("sizeCache"),Jt=this.get("bboxCache")||{},ie=Jt.x,se=Jt.x;return Bt?(F.get("type")==="circle"?(ut.width=2*Bt.r,ut.height=2*Bt.r):(ut.width=Bt.width,ut.height=Bt.height),ut.minX=ut.centerX-ut.width/2,ut.minY=ut.centerY-ut.height/2,ut.maxX=ut.centerX+ut.width/2,ut.maxY=ut.centerY+ut.height/2):(ut.width=ut.maxX-ut.minX,ut.height=ut.maxY-ut.minY,ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2),ut.x=ut.minX,ut.y=ut.minY,ut.x===ie&&ut.y===se||this.set("anchorPointsCache",null),ut}},G.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.addChild=function(F){switch(F.getType()){case"node":this.addNode(F);break;case"combo":this.addCombo(F);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.addCombo=function(F){return this.get("combos").push(F),!0},G.prototype.addNode=function(F){return this.get("nodes").push(F),!0},G.prototype.removeChild=function(F){switch(F.getType()){case"node":this.removeNode(F);break;case"combo":this.removeCombo(F);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.removeCombo=function(F){if(F){var Z=this.getCombos(),ut=Z.indexOf(F);return ut>-1&&(Z.splice(ut,1),!0)}},G.prototype.removeNode=function(F){if(F){var Z=this.getNodes(),ut=Z.indexOf(F);return ut>-1&&(Z.splice(ut,1),!0)}},G.prototype.isOnlyMove=function(F){return!1},G.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},G.prototype.destroy=function(){if(!this.destroyed){var F=this.get("animate"),Z=this.get("group");F&&Z.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),Z.remove(),this._cfg=null,this.destroyed=!0}},G}(Nr),Kr=function(){function ve(G){this.graph=G,this.destroyed=!1}return ve.prototype.addItem=function(G,F){var Z=this,ut=this.graph,Bt=G==="vedge"?"edge":G,Jt=ut.get(Bt+"Group")||ut.get("group"),ie=Object(l.I)(Bt),se=null,Te=ut.get(Bt+Object(l.I)("stateStyles"))||{},Ee=ut.get("default"+ie);F.stateStyles&&(Te=F.stateStyles),Ee&&Object(l.f)(Ee,function(Dn,zn){Object(l.v)(Dn)&&!Object(l.m)(Dn)?F[zn]=Object(l.e)({},Dn,F[zn]):Object(l.m)(Dn)?F[zn]=F[zn]||Object(l.c)(Ee[zn]):F[zn]=F[zn]||Ee[zn]});var un=ut.get(Bt+"Mapper");if(un){var xn=un(F);xn.stateStyles&&(Te=xn.stateStyles,delete xn.stateStyles),Object(l.f)(xn,function(Dn,zn){Object(l.v)(Dn)&&!Object(l.m)(Dn)?F[zn]=Object(l.e)({},F[zn],Dn):F[zn]=xn[zn]||F[zn]})}if(ut.emit("beforeadditem",{type:G,model:F}),G==="edge"||G==="vedge"){var _t=void 0,Xt=void 0;if(_t=F.source,Xt=F.target,_t&&Object(l.x)(_t)&&(_t=ut.findById(_t)),Xt&&Object(l.x)(Xt)&&(Xt=ut.findById(Xt)),!_t||!Xt)return void console.warn("The source or target node of edge "+F.id+" does not exist!");_t.getType&&_t.getType()==="combo"&&(F.isComboEdge=!0),Xt.getType&&Xt.getType()==="combo"&&(F.isComboEdge=!0),se=new Br({model:F,source:_t,target:Xt,styles:Te,linkCenter:ut.get("linkCenter"),group:Jt.addGroup()})}else if(G==="node")se=new Nr({model:F,styles:Te,group:Jt.addGroup()});else if(G==="combo"){var Se=F.children,Wt=Sr(Se,ut);F.x=Wt.x||F.x||100*Math.random(),F.y=Wt.y||F.y||100*Math.random();var ue=Jt.addGroup();ue.setZIndex(F.depth);var vn=(se=new Yr({model:F,styles:Te,bbox:Wt,group:ue})).getModel();(Se||[]).forEach(function(Dn){var zn=ut.findById(Dn.id);se.addChild(zn),Dn.depth=vn.depth+2}),F.collapsed&&setTimeout(function(){ut.collapseCombo(se),Z.updateCombo(se,[])},250)}if(se)return ut.get(G+"s").push(se),ut.get("itemMap")[se.get("id")]=se,ut.emit("afteradditem",{item:se,model:F}),se},ve.prototype.updateItem=function(G,F){var Z,ut,Bt=this.graph;if(Object(l.x)(G)&&(G=Bt.findById(G)),G&&!G.destroyed){var Jt="";G.getType&&(Jt=G.getType());var ie=Bt.get(Jt+"Mapper"),se=G.getModel(),Te=G.isOnlyMove(F);if(ie){var Ee=ie(Object(l.e)({},se,F)),un=Object(l.e)({},se,Ee,F);Ee.stateStyles&&(G.set("styles",un.stateStyles),delete un.stateStyles),Object(l.f)(un,function(vn,Dn){F[Dn]=vn})}else Object(l.f)(F,function(vn,Dn){se[Dn]&&Object(l.v)(vn)&&!Object(l.m)(vn)&&(F[Dn]=Object(n.a)(Object(n.a)({},se[Dn]),F[Dn]))});if(Bt.emit("beforeupdateitem",{item:G,cfg:F}),Jt==="edge"){if(F.source){var xn=F.source;Object(l.x)(xn)&&(xn=Bt.findById(xn)),G.setSource(xn)}if(F.target){var _t=F.target;Object(l.x)(_t)&&(_t=Bt.findById(_t)),G.setTarget(_t)}G.update(F)}if(Jt==="node"||Jt==="combo"){G.update(F,Te);var Xt=G.getEdges(),Se=Vr(F);if(Se&&Jt==="node")Object(l.f)(Xt,function(vn){vn.refresh()});else if(Se&&Jt==="combo"){var Wt=G.get("shapeFactory"),ue=se.type||"circle";(se.animate===void 0||F.animate===void 0?(ut=(Z=Wt[ue])===null||Z===void 0?void 0:Z.options)===null||ut===void 0?void 0:ut.animate:se.animate||F.animate)?setTimeout(function(){if(G&&!G.destroyed){var vn=G.getKeyShape();vn&&!vn.destroyed&&Object(l.f)(Xt,function(Dn){Dn&&!Dn.destroyed&&Dn.refresh()})}},201):Object(l.f)(Xt,function(vn){vn.refresh()})}}Bt.emit("afterupdateitem",{item:G,cfg:F})}},ve.prototype.updateCombo=function(G,F){var Z,ut,Bt=this.graph;if(Object(l.x)(G)&&(G=Bt.findById(G)),G&&!G.destroyed){var Jt=Sr(F,Bt);G.set("bbox",Jt),G.update({x:Jt.x,y:Jt.y});var ie=G.getEdges()||[],se=ie.length,Te=G.getModel(),Ee=G.get("shapeFactory"),un=Te.type||"circle";if(Te.animate===void 0?(ut=(Z=Ee[un])===null||Z===void 0?void 0:Z.options)===null||ut===void 0?void 0:ut.animate:Te.animate)setTimeout(function(){if(G&&!G.destroyed){var Xt=G.getKeyShape();if(Xt&&!Xt.destroyed)for(var Se=0;Se<se;Se++){var Wt=ie[Se];Wt&&!Wt.destroyed&&Wt.refresh()}}},201);else for(var xn=0;xn<se;xn++){var _t=ie[xn];_t&&!_t.destroyed&&_t.refresh()}}},ve.prototype.collapseCombo=function(G){var F=this.graph;Object(l.x)(G)&&(G=F.findById(G));var Z=G.getChildren();Z.nodes.forEach(function(ut){F.hideItem(ut)}),Z.combos.forEach(function(ut){F.hideItem(ut)})},ve.prototype.expandCombo=function(G){var F=this.graph;Object(l.x)(G)&&(G=F.findById(G));var Z=G.getChildren();Z.nodes.forEach(function(ut){F.showItem(ut)}),Z.combos.forEach(function(ut){ut.getModel().collapsed?ut.show():F.showItem(ut)})},ve.prototype.removeItem=function(G){var F=this,Z=this.graph;if(Object(l.x)(G)&&(G=Z.findById(G)),G&&!G.destroyed){var ut=Object(l.c)(G.getModel());Z.emit("beforeremoveitem",{item:ut});var Bt="";G.getType&&(Bt=G.getType());var Jt=Z.get(Bt+"s"),ie=Jt.indexOf(G);if(ie>-1&&Jt.splice(ie,1),Bt==="edge"){var se=Z.get("v"+Bt+"s"),Te=se.indexOf(G);Te>-1&&se.splice(Te,1)}var Ee=G.get("id");delete Z.get("itemMap")[Ee];var un=Z.get("comboTrees"),xn=G.get("id");if(Bt==="node"){var _t=G.getModel().comboId;if(un){var Xt=un,Se=!1;un.forEach(function(Un){Se||_n(Un,function(Ze){if(Ze.id===xn&&Xt){var Ce=Xt.indexOf(Ze);return Xt.splice(Ce,1),Se=!0,!1}return Xt=Ze.children,!0})})}for(var Wt=(zn=G.getEdges()).length-1;Wt>=0;Wt--)Z.removeItem(zn[Wt],!1);_t&&Z.updateCombo(_t)}else if(Bt==="combo"){var ue,vn=G.getModel().parentId,Dn=!1;(un||[]).forEach(function(Un){Dn||_n(Un,function(Ze){return Ze.id!==xn||(ue=Ze,Dn=!0,!1)})}),ue.removed=!0,ue&&ue.children&&ue.children.forEach(function(Un){F.removeItem(Un.id)});var zn;for(Wt=(zn=G.getEdges()).length;Wt>=0;Wt--)Z.removeItem(zn[Wt],!1);vn&&Z.updateCombo(vn)}G.destroy(),Z.emit("afterremoveitem",{item:ut})}},ve.prototype.setItemState=function(G,F,Z){var ut=this.graph,Bt=F;Object(l.x)(Z)&&(Bt=F+":"+Z),G.hasState(Bt)===Z&&Z||Object(l.x)(Z)&&G.hasState(Bt)||(ut.emit("beforeitemstatechange",{item:G,state:Bt,enabled:Z}),G.setState(F,Z),ut.autoPaint(),ut.emit("afteritemstatechange",{item:G,state:Bt,enabled:Z}))},ve.prototype.priorityState=function(G,F){var Z=this.graph,ut=G;Object(l.x)(G)&&(ut=Z.findById(G)),this.setItemState(ut,F,!1),this.setItemState(ut,F,!0)},ve.prototype.clearItemStates=function(G,F){var Z=this.graph;Object(l.x)(G)&&(G=Z.findById(G)),Z.emit("beforeitemstatesclear",{item:G,states:F}),G.clearStates(F),Z.emit("afteritemstatesclear",{item:G,states:F})},ve.prototype.refreshItem=function(G){var F=this.graph;Object(l.x)(G)&&(G=F.findById(G)),F.emit("beforeitemrefresh",{item:G}),G.refresh(),F.emit("afteritemrefresh",{item:G})},ve.prototype.addCombos=function(G,F){var Z=this,ut=this.graph;(G||[]).forEach(function(Jt){Kn(Jt,function(ie){var se;return F.forEach(function(Te){Te.id===ie.id&&(Te.children=ie.children,Te.depth=ie.depth,se=Te)}),se&&Z.addItem("combo",se),!0})});var Bt=ut.get("comboGroup");Bt&&Bt.sort()},ve.prototype.changeItemVisibility=function(G,F){var Z=this,ut=this.graph;if(Object(l.x)(G)&&(G=ut.findById(G)),G){if(ut.emit("beforeitemvisibilitychange",{item:G,visible:F}),G.changeVisibility(F),G.getType&&G.getType()==="node"){var Bt=G.getEdges();Object(l.f)(Bt,function(Ee){(!F||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&Z.changeItemVisibility(Ee,F)})}else if(G.getType&&G.getType()==="combo"){var Jt=ut.get("comboTrees"),ie=G.get("id"),se=[],Te=!1;(Jt||[]).forEach(function(Ee){Te||Ee.children&&Ee.children.length!==0&&_n(Ee,function(un){return un.id!==ie||(se=un.children,Te=!0,!1)})}),se&&se.forEach(function(Ee){var un=ut.findById(Ee.id);Z.changeItemVisibility(un,F)}),Bt=G.getEdges(),Object(l.f)(Bt,function(Ee){(!F||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&Z.changeItemVisibility(Ee,F)})}return ut.emit("afteritemvisibilitychange",{item:G,visible:F}),G}console.warn("The item to be shown or hidden does not exist!")},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ve}(),ni=null,fi=function(){function ve(G){this.graph=G,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return ve.checkCache=function(G,F,Z){if(Z[F]){var ut=Z[F].indexOf(G);ut>=0&&Z[F].splice(ut,1)}},ve.cacheState=function(G,F,Z){Z[F]||(Z[F]=[]),Z[F].push(G)},ve.prototype.updateState=function(G,F,Z){var ut=this,Bt=ve.checkCache,Jt=ve.cacheState;if(!G.destroyed){var ie=this.cachedStates,se=ie.enabled,Te=ie.disabled;Z?(Bt(G,F,Te),Jt(G,F,se)):(Bt(G,F,se),Jt(G,F,Te)),ni&&clearTimeout(ni),ni=setTimeout(function(){ni=null,ut.updateGraphStates()},16)}},ve.prototype.updateStates=function(G,F,Z){var ut=this;Object(l.x)(F)?this.updateState(G,F,Z):F.forEach(function(Bt){ut.updateState(G,Bt,Z)})},ve.prototype.updateGraphStates=function(){var G=this.graph.get("states"),F=this.cachedStates;Object(l.f)(F.disabled,function(Z,ut){G[ut]&&(G[ut]=G[ut].filter(function(Bt){return Z.indexOf(Bt)<0&&!Z.destroyed}))}),Object(l.f)(F.enabled,function(Z,ut){if(G[ut]){var Bt={};G[ut].forEach(function(Jt){Jt.destroyed||(Bt[Jt.get("id")]=!0)}),Z.forEach(function(Jt){if(!Jt.destroyed){var ie=Jt.get("id");Bt[ie]||(Bt[ie]=!0,G[ut].push(Jt))}})}else G[ut]=Z}),this.graph.emit("graphstatechange",{states:G}),this.cachedStates={enabled:{},disabled:{}}},ve.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ni&&clearTimeout(ni),ni=null,this.destroyed=!0},ve}(),$r=e(31),ci=function(G,F){return G&&F?G.replace(/\\?\{([^{}]+)\}/g,function(Z,ut){if(Z.charAt(0)==="\\")return Z.slice(1);var Bt=F[ut];return Bt===0&&(Bt="0"),Bt||""}):G},Qr=function(G){var F=[];if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);for(var Z=0,ut=G;Z<ut.length;Z++){var Bt=ut[Z],Jt=Bt.x,ie=Bt.y;F.push(Jt),F.push(ie)}var se=Object($r.a)(F);return se.unshift(["M",G[0].x,G[0].y]),se},gi=function(G,F,Z,ut){Z===void 0&&(Z=0),ut===void 0&&(ut=0);var Bt={x:(1-Z)*G.x+Z*F.x,y:(1-Z)*G.y+Z*F.y},Jt=[0,0];d.c.normalize(Jt,[F.x-G.x,F.y-G.y]),Jt&&(Jt[0]||Jt[1])||(Jt=[0,0]);var ie=[-Jt[1]*ut,Jt[0]*ut];return Bt.x+=ie[0],Bt.y+=ie[1],Bt},Oi=function(G,F){var Z=G.length;if(!Z)return"";for(var ut="",Bt=0;Bt<Z;Bt++){var Jt=G[Bt];ut+=ci(Bt===0?"M{x} {y}":"L{x} {y}",Jt)}return F&&(ut+="Z"),ut},bi=function(G){var F=[];return G.forEach(function(Z){if(Z[0]!=="A")for(var ut=1;ut<Z.length;ut+=2)F.push([Z[ut],Z[ut+1]]);else{var Bt=Z.length;F.push([Z[Bt-2],Z[Bt-1]])}}),F},zi=function(G){if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);var F=G[0],Z=G[1],ut=G[G.length-1],Bt=G[G.length-2];G.unshift(ut),G.unshift(Bt),G.push(F),G.push(Z);for(var Jt=[],ie=1;ie<G.length-2;ie+=1){var se=G[ie-1].x,Te=G[ie-1].y,Ee=G[ie].x,un=G[ie].y,xn=G[ie+1].x,_t=G[ie+1].y,Xt=Ee+(xn-se)/6,Se=un+(_t-Te)/6,Wt=xn-((ie!==G.length-2?G[ie+2].x:xn)-Ee)/6,ue=_t-((ie!==G.length-2?G[ie+2].y:_t)-un)/6;Jt.push(["C",Xt,Se,Wt,ue,xn,_t])}return Jt.unshift(["M",ut.x,ut.y]),Jt},Qi=function(G,F){return d.c.scale([0,0],d.c.normalize([0,0],G),F)},io=function(G,F){var Z=[G[1]-F[1],F[0]-G[0]],ut=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);if(ut===0)throw new Error("p0 should not be equal to p1");return[Z[0]/ut,Z[1]/ut]},Wi=function(G,F){return[F[0]-G[0],F[1]-G[1]]};function Zi(ve,G){if(!ve||ve.length<1)return"";if(ve.length===1)return function(se){var Te=[se[0][0],se[0][1]-G],Ee=[se[0][0],se[0][1]+G];return"M "+Te+" A "+G+","+G+",0,0,0,"+Ee+" A "+G+","+G+",0,0,0,"+Te}(ve);if(ve.length===2)return function(se){var Te=d.c.scale([0,0],io(se[0],se[1]),G),Ee=d.c.scale([0,0],Te,-1),un=d.c.add([0,0],se[0],Te),xn=d.c.add([0,0],se[1],Te),_t=d.c.add([0,0],se[1],Ee),Xt=d.c.add([0,0],se[0],Ee);return"M "+un+" L "+xn+" A "+[G,G,"0,0,0",_t].join(",")+" L "+Xt+" A "+[G,G,"0,0,0",un].join(",")}(ve);for(var F=new Array(ve.length),Z=0;Z<F.length;++Z){var ut=Z===0?ve[ve.length-1]:ve[Z-1],Bt=ve[Z],Jt=d.c.scale([0,0],io(ut,Bt),G);F[Z]=[d.c.add([0,0],ut,Jt),d.c.add([0,0],Bt,Jt)]}var ie="A "+[G,G,"0,0,0,"].join(",");return(F=F.map(function(se,Te){var Ee="";return Te===0&&(Ee="M "+F[F.length-1][1]+" "),Ee+=ie+se[0]+" L "+se[1]})).join(" ")}function Pi(ve,G){var F,Z,ut,Bt=ve.length;if(!ve||Bt<1)return"";if(Bt===1)return Z=[(F=ve)[0][0],F[0][1]-G],ut=[F[0][0],F[0][1]+G],"M "+Z+" A "+[G,G,"0,0,0",ut].join(",")+" A "+[G,G,"0,0,0",Z].join(",");if(Bt===2)return function(Ee){var un=Wi(Ee[0],Ee[1]),xn=Qi(un,G),_t=d.c.add([0,0],Ee[0],d.c.scale([0,0],xn,-1)),Xt=d.c.add([0,0],Ee[1],xn),Se=1.2*G,Wt=Qi(d.c.normalize([0,0],un),Se),ue=d.c.scale([0,0],Wt,-1),vn=d.c.add([0,0],_t,ue),Dn=d.c.add([0,0],Xt,ue),zn=d.c.add([0,0],_t,Wt);return"M "+_t+" C "+[vn,Dn,Xt].join(",")+" S "+[zn,_t].join(",")+" Z"}(ve);for(var Jt=ve.map(function(Ee,un){var xn=ve[(un+1)%Bt];return{p:Ee,v:d.c.normalize([0,0],Wi(Ee,xn))}}),ie=0;ie<Jt.length;++ie){var se=ie>0?ie-1:Bt-1,Te=d.c.normalize([0,0],d.c.add([0,0],Jt[se].v,d.c.scale([0,0],Jt[ie].v,-1)));Jt[ie].p=d.c.add([0,0],Jt[ie].p,d.c.scale([0,0],Te,G))}return Jt.map(function(Ee){var un=Ee.p;return{x:un[0],y:un[1]}})}var no=function(G,F,Z){return(G.y-Z.y)*(F.x-Z.x)-(G.x-Z.x)*(F.y-Z.y)},Mo=function(G){var F=G.map(function(Jt){return{x:Jt.getModel().x,y:Jt.getModel().y}});if(F.sort(function(Jt,ie){return Jt.x===ie.x?Jt.y-ie.y:Jt.x-ie.x}),F.length===1)return F;for(var Z=[],ut=0;ut<F.length;ut++){for(;Z.length>=2&&no(Z[Z.length-2],Z[Z.length-1],F[ut])<=0;)Z.pop();Z.push(F[ut])}var Bt=[];for(ut=F.length-1;ut>=0;ut--){for(;Bt.length>=2&&no(Bt[Bt.length-2],Bt[Bt.length-1],F[ut])<=0;)Bt.pop();Bt.push(F[ut])}return Bt.pop(),Z.pop(),Z.concat(Bt)},ao={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function uo(ve,G,F){var Z=!1,ut=function(se,Te){return G.cells[se+Te*G.width]},Bt=function(se,Te){var Ee=0;return ut(se-1,Te-1)>=F&&(Ee+=1),ut(se,Te-1)>F&&(Ee+=2),ut(se-1,Te)>F&&(Ee+=4),ut(se,Te)>F&&(Ee+=8),Ee},Jt=function(se,Te){for(var Ee,un,xn=se,_t=Te,Xt=0;Xt<G.width*G.height;Xt++){if(Ee=xn,un=_t,ve.findIndex(function(Wt){return Wt.x===xn&&Wt.y===_t})>-1){if(ve[0].x===xn&&ve[0].y===_t)return!0}else ve.push({x:xn,y:_t});var Se=Bt(xn,_t);switch(Se){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:xn++;break;case 12:case 14:case 4:xn--;break;case 6:Ee===0&&(un===-1?xn-=1:xn+=1);break;case 1:case 13:case 5:_t--;break;case 9:Ee===1&&(un===0?_t-=1:_t+=1);break;case 10:case 8:case 11:_t++;break;default:return console.warn("Marching squares invalid state: "+Se),!0}}};this.march=function(){for(var ie=0;ie<G.width&&!Z;ie+=1)for(var se=0;se<G.height&&!Z;se+=1)ut(ie,se)>F&&Bt(ie,se)!==15&&(Z=Jt(ie,se));return Z}}var xo=function(G,F){var Z=Number.POSITIVE_INFINITY,ut=null;return G.forEach(function(Bt){var Jt=P(Bt,F);Jt>=0&&Jt<Z&&(ut=Bt,Z=Jt)}),ut};function oe(ve,G,F,Z,ut){var Bt=function(Jt,ie,se){var Te=null,Ee=Number.POSITIVE_INFINITY;return ie.forEach(function(un){var xn={x:Jt.getModel().x,y:Jt.getModel().y},_t={x:un.getModel().x,y:un.getModel().y},Xt=k(xn,_t),Se=new $(xn.x,xn.y,_t.x,_t.y),Wt=se.reduce(function(ue,vn){return P(vn,Se)>0?ue+1:ue},0);Xt*Math.pow(Wt+1,2)<Ee&&(Te=un,Ee=Xt*Math.pow(Wt+1,2))}),Te}(ve,F,G);return Bt===null?[]:function(Jt){for(var ie=[];Jt.length>0;){var se=Jt.pop();if(Jt.length===0){ie.push(se);break}var Te=Jt.pop(),Ee=new $(se.x1,se.y1,Te.x2,Te.y2);xo(G,Ee)?(ie.push(se),Jt.push(Te)):Jt.push(Ee)}return ie}(function(Jt,ie,se,Te){var Ee=[],un=[];un.push(Jt);for(var xn=!0,_t=0,Xt=function(vn,Dn){var zn=!1;return Dn.forEach(function(Un){zn||(g(vn,{x:Un.x1,y:Un.y1})||g(vn,{x:Un.x2,y:Un.y2}))&&(zn=!0)}),zn},Se=function(vn,Dn){for(var zn=0,Un=Dn;zn<Un.length;zn++){var Ze=Un[zn].getBBox(),Ce=[[Ze.x,Ze.y],[Ze.x+Ze.width,Ze.y],[Ze.x,Ze.y+Ze.height],[Ze.x+Ze.width,Ze.y+Ze.height]];if(dt(Ce,vn.x,vn.y))return!0}return!1};xn&&_t<se;){xn=!1;for(var Wt=function(){var vn=un.pop(),Dn=xo(ie,vn);if(Dn){var zn=z(Dn,vn),Un=zn[0];if(zn[1]===2){var Ze=function(R){for(var xt=Te,$t=Oe(Dn,xt,Un,R),me=Xt($t,un)||Xt($t,Ee),Zt=Se($t,ie);!me&&Zt&&xt>=1;)$t=Oe(Dn,xt/=1.5,Un,R),me=Xt($t,un)||Xt($t,Ee),Zt=Se($t,ie);!$t||me||R&&Zt||(un.push(new $(vn.x1,vn.y1,$t.x,$t.y)),un.push(new $($t.x,$t.y,vn.x2,vn.y2)),xn=!0)};Ze(!0),xn||Ze(!1)}}xn||Ee.push(vn),_t+=1};!xn&&un.length;)Wt()}for(;un.length;)Ee.push(un.pop());return Ee}(new $(ve.getModel().x,ve.getModel().y,Bt.getModel().x,Bt.getModel().y),G,Z,ut))}var Kt=function(G,F,Z){var ut=Object.assign(ao,Z),Bt=Y(G.map(function(Ze){return{x:Ze.getModel().x,y:Ze.getModel().y}}));G=G.sort(function(Ze,Ce){return k({x:Ze.getModel().x,y:Ze.getModel().y},Bt)-k({x:Ce.getModel().x,y:Ce.getModel().y},Bt)});var Jt=[],ie=[];G.forEach(function(Ze){oe(Ze,F,Jt,ut.maxRoutingIterations,ut.morphBuffer).forEach(function(Ce){ie.push(Ce)}),Jt.push(Ze)});for(var se,Te,Ee,un,xn,_t=function(Ze,Ce,R){var xt={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},$t=[];Ze.forEach(function(he){$t.push(he.getBBox())}),Ce.forEach(function(he){$t.push(he.getBBox())});for(var me=0,Zt=$t;me<Zt.length;me++){var de=Zt[me];xt.minX=(de.minX<xt.minX?de.minX:xt.minX)-R,xt.minY=(de.minY<xt.minY?de.minY:xt.minY)-R,xt.maxX=(de.maxX>xt.maxX?de.maxX:xt.maxX)+R,xt.maxY=(de.maxY>xt.maxY?de.maxY:xt.maxY)+R}return xt.width=xt.maxX-xt.minX,xt.height=xt.maxY-xt.minY,xt.x=xt.minX,xt.y=xt.minY,xt}(G,ie,ut.nodeR0),Xt=(se=_t.width,Te=_t.height,Ee=ut.pixelGroupSize,un=Math.ceil(se/Ee),xn=Math.ceil(Te/Ee),{cells:new Float32Array(Math.max(0,un*xn)).fill(0),width:un,height:xn}),Se=[],Wt=[],ue=0;ue<ut.maxMarchingIterations;ue++)if(te(G,F,ie,_t,Xt,ut),Wt=[],new uo(Se=[],Xt,ut.threshold).march()){var vn=Se.map(function(Ze){return{x:Math.round(Ze.x*ut.pixelGroupSize+_t.minX),y:Math.round(Ze.y*ut.pixelGroupSize+_t.minY)}});if(vn){var Dn=vn.length;if(ut.skip>1)for(Dn=Math.floor(vn.length/ut.skip);Dn<3&&ut.skip>1;)ut.skip-=1,Dn=Math.floor(vn.length/ut.skip);for(var zn=0,Un=0;Un<Dn;Un+=1,zn+=ut.skip)Wt.push({x:vn[zn].x,y:vn[zn].y})}if(Wt&&function(){for(var Ze=0,Ce=G;Ze<Ce.length;Ze++){var R=Ce[Ze],xt=Wt.map(function($t){return[$t.x,$t.y]});if(!dt(xt,R.getBBox().centerX,R.getBBox().centerY))return!1}return!0}())return Wt;if(ut.threshold*=.9,ue<=.5*ut.maxMarchingIterations)ut.memberInfluenceFactor*=1.2,ut.edgeInfluenceFactor*=1.2;else{if(!(ut.nonMemberInfluenceFactor!==0&&F.length>0))break;ut.nonMemberInfluenceFactor*=.8}}return Wt};function te(ve,G,F,Z,ut,Bt){function Jt(xn,_t){var Xt=Math.floor((xn-_t)/Bt.pixelGroupSize);return Xt<0?0:Xt}function ie(xn,_t){return xn*Bt.pixelGroupSize+_t}var se=(Bt.nodeR0-Bt.nodeR1)*(Bt.nodeR0-Bt.nodeR1),Te=(Bt.edgeR0-Bt.edgeR1)*(Bt.edgeR0-Bt.edgeR1),Ee=function(_t,Xt){return[Math.min(Jt(_t.minX,Xt+Z.minX),ut.width),Math.min(Jt(_t.minY,Xt+Z.minY),ut.height),Math.min(Jt(_t.maxX,-Xt+Z.minX),ut.width),Math.min(Jt(_t.maxY,-Xt+Z.minY),ut.height)]},un=function(_t,Xt){for(var Se=_t.getBBox(),Wt=Ee(Se,Bt.nodeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],Un=vn;Un<zn;Un+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Xt<0&&ut[Ze+Un*ut.width]<=0)){var Ce=ie(Ze,Z.minX),R=ie(Un,Z.minY),xt=B({x:Ce,y:R},{x:Se.minX,y:Se.minY,width:Se.width,height:Se.height});if(xt<Math.pow(Bt.nodeR1,2)){var $t=Math.sqrt(xt)-Bt.nodeR1;ut.cells[Ze+Un*ut.width]+=Xt*$t*$t}}};Bt.nodeInfluenceFactor&&ve.forEach(function(xn){un(xn,Bt.nodeInfluenceFactor/se)}),Bt.edgeInfluenceFactor&&F.forEach(function(xn){(function(_t,Xt){for(var Se=_t.getBBox(),Wt=Ee(Se,Bt.edgeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],Un=vn;Un<zn;Un+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Xt<0&&ut.cells[Ze+Un*ut.width]<=0)){var Ce=ie(Ze,Z.minX),R=ie(Un,Z.minY),xt=h({x:Ce,y:R},_t);if(xt<Math.pow(Bt.edgeR1,2)){var $t=Math.sqrt(xt)-Bt.edgeR1;ut.cells[Ze+Un*ut.width]+=Xt*$t*$t}}})(xn,Bt.edgeInfluenceFactor/Te)}),Bt.negativeNodeInfluenceFactor&&G.forEach(function(xn){un(xn,Bt.negativeNodeInfluenceFactor/se)})}function Oe(ve,G,F,Z){var ut=ve.getBBox(),Bt=F[0],Jt=F[1],ie=F[2],se=F[3],Te={topLeft:{x:ut.minX-G,y:ut.minY-G},topRight:{x:ut.maxX+G,y:ut.minY-G},bottomLeft:{x:ut.minX-G,y:ut.maxY+G},bottomRight:{x:ut.maxX+G,y:ut.maxY+G}},Ee=ut.height*ut.width;function un(xn,_t){return ut.width*(.5*(xn.y-ut.minY+(_t.y-ut.minY)))}if(Jt)return Bt?Z?Te.topLeft:Te.bottomRight:ie?Z?Te.bottomLeft:Te.topRight:un(Jt,se)<.5*Ee?Jt.y>se.y?Z?Te.topLeft:Te.bottomRight:Z?Te.topRight:Te.bottomLeft:Jt.y<se.y?Z?Te.bottomLeft:Te.topRight:Z?Te.bottomRight:Te.topLeft;if(se){if(Bt)return Z?Te.topRight:Te.bottomLeft;if(ie)return Z?Te.bottomRight:Te.topLeft}return un(Bt,ie)<.5*Ee?Bt.x>ie.x?Z?Te.topLeft:Te.bottomRight:Z?Te.bottomLeft:Te.topRight:Bt.x<ie.x?Z?Te.topRight:Te.bottomLeft:Z?Te.bottomRight:Te.topLeft}var Qe=function(){function ve(G,F){this.cfg=Object(l.e)(this.getDefaultCfg(),F),this.graph=G,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(Z){return Object(l.x)(Z)?G.findById(Z):Z}),this.nonMembers=this.cfg.nonMembers.map(function(Z){return Object(l.x)(Z)?G.findById(Z):Z}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ve.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ve.prototype.setPadding=function(){var G=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+G:10+G,this.cfg.bubbleCfg={nodeR0:this.padding-G,nodeR1:this.padding-G,morphBuffer:this.padding-G}},ve.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ve.prototype.calcPath=function(G,F){var Z,ut,Bt;switch(this.type){case"round-convex":Bt=Zi((Z=Mo(G)).map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt);break;case"smooth-convex":(Z=Mo(G)).length===2?(Bt=Zi(Z.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt)):Z.length>2&&(Bt=Pi(Z.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=zi(Bt));break;case"bubble":ut=(Z=Kt(G,F,this.cfg.bubbleCfg)).length>=2&&zi(Z)}return ut},ve.prototype.render=function(){this.group.addShape("path",{attrs:Object(n.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},ve.prototype.addMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.members.push(G);var F=this.nonMembers.indexOf(G);return F>-1&&this.nonMembers.splice(F,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.addNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.nonMembers.push(G);var F=this.members.indexOf(G);return F>-1&&this.members.splice(F,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.removeMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var F=this.members.indexOf(G);return F>-1&&(this.members.splice(F,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.removeNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var F=this.nonMembers.indexOf(G);return F>-1&&(this.nonMembers.splice(F,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.updateData=function(G,F){var Z=this;this.group.findById(this.id).remove(),G&&(this.members=G.map(function(ut){return Object(l.x)(ut)?Z.graph.findById(ut):ut})),F&&(this.nonMembers=F.map(function(ut){return Object(l.x)(ut)?Z.graph.findById(ut):ut})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.updateStyle=function(G){this.group.findById(this.id).attr(Object(n.a)({},G))},ve.prototype.updateCfg=function(G){var F=this;this.cfg=Object(l.e)(this.cfg,G),this.id=this.cfg.id,this.group=this.cfg.group,G.members&&(this.members=this.cfg.members.map(function(Z){return Object(l.x)(Z)?F.graph.findById(Z):Z})),G.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(Z){return Object(l.x)(Z)?F.graph.findById(Z):Z})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.contain=function(G){var F,Z,ut=this,Bt=(F=Object(l.x)(G)?this.graph.findById(G):G).getKeyShape();if(F.get("type")==="path")Z=bi(Bt.attr("path"));else{var Jt=Bt.getCanvasBBox();Z=[[Jt.minX,Jt.minY],[Jt.maxX,Jt.minY],[Jt.maxX,Jt.maxY],[Jt.minX,Jt.maxY]]}return Z=Z.map(function(ie){var se=ut.graph.getPointByCanvas(ie[0],ie[1]);return[se.x,se.y]}),Mt(Z,bi(this.path))},ve.prototype.destroy=function(){this.group.remove(),this.cfg=null},ve}(),On=d.a.transform,Vn=function(ve){function G(F){var Z=ve.call(this)||this;return Z.cfg=Object(l.e)(Z.getDefaultCfg(),F),Z.init(),Z.animating=!1,Z.destroyed=!1,Z.cfg.enabledStack&&(Z.undoStack=new E.Stack(Z.cfg.maxStep),Z.redoStack=new E.Stack(Z.cfg.maxStep)),Z}return Object(n.b)(G,ve),G.prototype.init=function(){this.initCanvas();var F=new ye(this),Z=new mt(this),ut=new Kr(this),Bt=new fi(this);this.set({viewController:F,modeController:Z,itemController:ut,stateController:Bt}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},G.prototype.initGroups=function(){var F=this.get("canvas"),Z=this.get("canvas").get("el").id,ut=F.addGroup({id:Z+"-root",className:gt.rootContainerClassName});if(this.get("groupByTypes")){var Bt=ut.addGroup({id:Z+"-edge",className:gt.edgeContainerClassName}),Jt=ut.addGroup({id:Z+"-node",className:gt.nodeContainerClassName}),ie=ut.addGroup({id:Z+"-combo",className:gt.comboContainerClassName});ie.toBack(),this.set({nodeGroup:Jt,edgeGroup:Bt,comboGroup:ie})}var se=ut.addGroup({id:Z+"-delegate",className:gt.delegateContainerClassName});this.set({delegateGroup:se}),this.set("group",ut)},G.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},G.prototype.set=function(F,Z){return Object(l.w)(F)?this.cfg=Object(n.a)(Object(n.a)({},this.cfg),F):this.cfg[F]=Z,this},G.prototype.get=function(F){return this.cfg[F]},G.prototype.getGroup=function(){return this.get("group")},G.prototype.getContainer=function(){return this.get("container")},G.prototype.getMinZoom=function(){return this.get("minZoom")},G.prototype.setMinZoom=function(F){return this.set("minZoom",F)},G.prototype.getMaxZoom=function(){return this.get("maxZoom")},G.prototype.setMaxZoom=function(F){return this.set("maxZoom",F)},G.prototype.getWidth=function(){return this.get("width")},G.prototype.getHeight=function(){return this.get("height")},G.prototype.clearItemStates=function(F,Z){Object(l.x)(F)&&(F=this.findById(F));var ut=this.get("itemController");Z||(Z=F.get("states")),ut.clearItemStates(F,Z),this.get("stateController").updateStates(F,Z,!1)},G.prototype.node=function(F){typeof F=="function"&&this.set("nodeMapper",F)},G.prototype.edge=function(F){typeof F=="function"&&this.set("edgeMapper",F)},G.prototype.combo=function(F){typeof F=="function"&&this.set("comboMapper",F)},G.prototype.findById=function(F){return this.get("itemMap")[F]},G.prototype.find=function(F,Z){var ut,Bt=this.get(F+"s");return Object(l.f)(Bt,function(Jt,ie){if(Z(Jt,ie))return ut=Jt}),ut},G.prototype.findAll=function(F,Z){var ut=[];return Object(l.f)(this.get(F+"s"),function(Bt,Jt){Z(Bt,Jt)&&ut.push(Bt)}),ut},G.prototype.findAllByState=function(F,Z){return this.findAll(F,function(ut){return ut.hasState(Z)})},G.prototype.translate=function(F,Z){var ut=this.get("group"),Bt=Object(l.c)(ut.getMatrix());Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,[["t",F,Z]]),ut.setMatrix(Bt),this.emit("viewportchange",{action:"translate",matrix:ut.getMatrix()}),this.autoPaint()},G.prototype.moveTo=function(F,Z){var ut=this.get("group");zt(ut,{x:F,y:Z}),this.emit("viewportchange",{action:"move",matrix:ut.getMatrix()})},G.prototype.fitView=function(F){F&&this.set("fitViewPadding",F),this.get("viewController").fitView(),this.autoPaint()},G.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},G.prototype.addBehaviors=function(F,Z){return this.get("modeController").manipulateBehaviors(F,Z,!0),this},G.prototype.removeBehaviors=function(F,Z){return this.get("modeController").manipulateBehaviors(F,Z,!1),this},G.prototype.updateBehavior=function(F,Z,ut){return this.get("modeController").updateBehavior(F,Z,ut),this},G.prototype.zoom=function(F,Z){var ut=this.get("group"),Bt=Object(l.c)(ut.getMatrix()),Jt=this.get("minZoom"),ie=this.get("maxZoom");Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,Z?[["t",-Z.x,-Z.y],["s",F,F],["t",Z.x,Z.y]]:[["s",F,F]]),Jt&&Bt[0]<Jt||ie&&Bt[0]>ie||(ut.setMatrix(Bt),this.emit("viewportchange",{action:"zoom",matrix:Bt}),this.autoPaint())},G.prototype.zoomTo=function(F,Z){var ut=F/this.getZoom();this.zoom(ut,Z)},G.prototype.focusItem=function(F,Z,ut){var Bt=this.get("viewController"),Jt=!1;Z?Jt=!0:Z===void 0&&(Jt=this.get("animate"));var ie={};ut?ie=ut:ut===void 0&&(ie=this.get("animateCfg")),Bt.focus(F,Jt,ie),this.autoPaint()},G.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},G.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},G.prototype.getPointByClient=function(F,Z){return this.get("viewController").getPointByClient(F,Z)},G.prototype.getClientByPoint=function(F,Z){return this.get("viewController").getClientByPoint(F,Z)},G.prototype.getPointByCanvas=function(F,Z){return this.get("viewController").getPointByCanvas(F,Z)},G.prototype.getCanvasByPoint=function(F,Z){return this.get("viewController").getCanvasByPoint(F,Z)},G.prototype.showItem=function(F,Z){Z===void 0&&(Z=!0);var ut=this.get("itemController").changeItemVisibility(F,!0);if(Z&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!1}],ie.nodes=[{id:Bt,visible:!0}];break;case"edge":Jt.nodes=[{id:Bt,visible:!1}],ie.edges=[{id:Bt,visible:!0}];break;case"combo":Jt.nodes=[{id:Bt,visible:!1}],ie.combos=[{id:Bt,visible:!0}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.hideItem=function(F,Z){Z===void 0&&(Z=!0);var ut=this.get("itemController").changeItemVisibility(F,!1);if(Z&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!0}],ie.nodes=[{id:Bt,visible:!1}];break;case"edge":Jt.nodes=[{id:Bt,visible:!0}],ie.edges=[{id:Bt,visible:!1}];break;case"combo":Jt.nodes=[{id:Bt,visible:!0}],ie.combos=[{id:Bt,visible:!1}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.refreshItem=function(F){this.get("itemController").refreshItem(F)},G.prototype.setAutoPaint=function(F){this.set("autoPaint",F),this.get("canvas").set("autoDraw",F)},G.prototype.remove=function(F,Z){Z===void 0&&(Z=!0),this.removeItem(F,Z)},G.prototype.removeItem=function(F,Z){Z===void 0&&(Z=!0);var ut=F;if(Object(l.x)(F)&&(ut=this.findById(F)),!ut&&Object(l.x)(F))console.warn("The item to be removed does not exist!");else if(ut){var Bt="";if(ut.getType&&(Bt=ut.getType()),Z&&this.get("enabledStack")){var Jt=Object(n.a)(Object(n.a)({},ut.getModel()),{itemType:Bt}),ie={};switch(Bt){case"node":ie.nodes=[Jt],ie.edges=[];for(var se=ut.getEdges(),Te=se.length-1;Te>=0;Te--)ie.edges.push(Object(n.a)(Object(n.a)({},se[Te].getModel()),{itemType:"edge"}));break;case"edge":ie.edges=[Jt];break;case"combo":ie.combos=[Jt]}this.pushStack("delete",{before:ie,after:{}})}if(Bt==="node"&&ut.getModel().comboId&&this.updateComboTree(ut),this.get("itemController").removeItem(ut),Bt==="combo"){var Ee=er(this.get("comboTrees"));this.set("comboTrees",Ee)}}},G.prototype.addItem=function(F,Z,ut,Bt){ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0);var Jt=this.get("comboSorted");this.set("comboSorted",Jt&&!Bt);var ie=this.get("itemController");if(!Z.id||!this.findById(Z.id)){var se,Te=this.get("comboTrees");if(Te||(Te=[]),F==="combo"){var Ee=this.get("itemMap"),un=!1;if(Te.forEach(function(zn){un||Kn(zn,function(Un){if(Z.parentId===Un.id){un=!0;var Ze=Object(n.a)({id:Z.id,depth:Un.depth+2},Z);Un.children?Un.children.push(Ze):Un.children=[Ze],Z.depth=Ze.depth,se=ie.addItem(F,Z)}var Ce=Ee[Un.id];return un&&Ce&&Ce.getType&&Ce.getType()==="combo"&&ie.updateCombo(Ce,Un.children),!0})}),!un){var xn=Object(n.a)({id:Z.id,depth:0},Z);Z.depth=xn.depth,Te.push(xn),se=ie.addItem(F,Z)}this.set("comboTrees",Te)}else if(F==="node"&&Object(l.x)(Z.comboId)&&Te){var _t;if((_t=this.findById(Z.comboId))&&_t.getType&&_t.getType()!=="combo")return void console.warn("'"+Z.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");se=ie.addItem(F,Z);var Xt=this.get("itemMap"),Se=!1,Wt=!1;(Te||[]).forEach(function(zn){Wt||Se||Kn(zn,function(Un){if(Un.id===Z.id)return Wt=!0,!1;if(Z.comboId===Un.id&&!Wt){Se=!0;var Ze=Object(l.c)(Z);Ze.itemType="node",Un.children?Un.children.push(Ze):Un.children=[Ze],Z.depth=Un.depth+1}return Se&&Xt[Un.id].getType&&Xt[Un.id].getType()==="combo"&&ie.updateCombo(Xt[Un.id],Un.children),!0})})}else se=ie.addItem(F,Z);(F==="node"&&Z.comboId||F==="combo"&&Z.parentId)&&(_t=this.findById(Z.comboId||Z.parentId))&&_t.addChild(se);var ue=this.get("combos");if(ue&&ue.length>0&&this.sortCombos(),this.autoPaint(),ut&&this.get("enabledStack")){var vn=Object(n.a)(Object(n.a)({},se.getModel()),{itemType:F}),Dn={};switch(F){case"node":Dn.nodes=[vn];break;case"edge":Dn.edges=[vn];break;case"combo":Dn.combos=[vn]}this.pushStack("add",{before:{},after:Dn})}return se}console.warn("This item exists already. Be sure the id %c"+Z.id+"%c is unique.","font-size: 20px; color: red;","")},G.prototype.add=function(F,Z,ut,Bt){return ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0),this.addItem(F,Z,ut,Bt)},G.prototype.updateItem=function(F,Z,ut){var Bt=this;ut===void 0&&(ut=!0);var Jt,ie=this.get("itemController");Jt=Object(l.x)(F)?this.findById(F):F;var se=Object(l.c)(Jt.getModel()),Te="";Jt.getType&&(Te=Jt.getType());var Ee=Object(n.d)(Jt.getStates());if(Te==="combo"&&Object(l.f)(Ee,function(Xt){return Bt.setItemState(Jt,Xt,!1)}),ie.updateItem(Jt,Z),Te==="combo"&&Object(l.f)(Ee,function(Xt){return Bt.setItemState(Jt,Xt,!0)}),ut&&this.get("enabledStack")){var un={nodes:[],edges:[],combos:[]},xn={nodes:[],edges:[],combos:[]},_t=Object(n.a)({id:se.id},Z);switch(Te){case"node":un.nodes.push(se),xn.nodes.push(_t);break;case"edge":un.edges.push(se),xn.edges.push(_t);break;case"combo":un.combos.push(se),xn.combos.push(_t)}Te==="node"&&un.nodes.push(se),this.pushStack("update",{before:un,after:xn})}},G.prototype.update=function(F,Z,ut){ut===void 0&&(ut=!0),this.updateItem(F,Z,ut)},G.prototype.setItemState=function(F,Z,ut){Object(l.x)(F)&&(F=this.findById(F)),this.get("itemController").setItemState(F,Z,ut);var Bt=this.get("stateController");Object(l.x)(ut)?Bt.updateState(F,Z+":"+ut,!0):Bt.updateState(F,Z,ut)},G.prototype.priorityState=function(F,Z){this.get("itemController").priorityState(F,Z)},G.prototype.data=function(F){this.set("data",F)},G.prototype.render=function(){var F=this;this.set("comboSorted",!1);var Z=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!Z)throw new Error("data must be defined first");var ut=Z.nodes,Bt=ut===void 0?[]:ut,Jt=Z.edges,ie=Jt===void 0?[]:Jt,se=Z.combos,Te=se===void 0?[]:se;if(this.clear(),this.emit("beforerender"),Object(l.f)(Bt,function(_t){F.add("node",_t,!1,!1)}),Te&&Te.length!==0){var Ee=nr(Te,Bt);this.set("comboTrees",Ee),F.addCombos(Te)}Object(l.f)(ie,function(_t){F.add("edge",_t,!1,!1)});var un=F.get("animate");(F.get("fitView")||F.get("fitCenter"))&&F.set("animate",!1);var xn=F.get("layoutController");if(xn){if(xn.layout(function(){F.get("fitView")?F.fitView():F.get("fitCenter")&&F.fitCenter(),F.autoPaint(),F.emit("afterrender"),(F.get("fitView")||F.get("fitCenter"))&&F.set("animate",un)}),this.destroyed)return}else F.get("fitView")&&F.fitView(),F.get("fitCenter")&&F.fitCenter(),F.emit("afterrender"),F.set("animate",un);this.get("groupByTypes")||(Te&&Te.length!==0?this.sortCombos():Z.nodes&&Z.edges&&Z.nodes.length<Z.edges.length?this.getNodes().forEach(function(_t){_t.toFront()}):this.getEdges().forEach(function(_t){_t.toBack()})),this.get("enabledStack")&&this.pushStack("render")},G.prototype.read=function(F){this.data(F),this.render()},G.prototype.diffItems=function(F,Z,ut){var Bt,Jt=this,ie=this.get("itemMap");Object(l.f)(ut,function(se){if(Bt=ie[se.id]){if(Jt.get("animate")&&F==="node"){var Te=Bt.getContainer().getMatrix();Te||(Te=[1,0,0,0,1,0,0,0,1]),Bt.set("originAttrs",{x:Te[6],y:Te[7]})}Jt.updateItem(Bt,se,!1)}else Bt=Jt.addItem(F,se,!1);Bt&&Z[F+"s"].push(Bt)})},G.prototype.changeData=function(F,Z){Z===void 0&&(Z=!0);var ut=this;if(!F)return this;Z&&this.get("enabledStack")&&this.pushStack("changedata",{before:ut.save(),after:F}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Xt){return ut.clearItemStates(Xt)}),this.getEdges().map(function(Xt){return ut.clearItemStates(Xt)});var Bt=this.get("canvas"),Jt=Bt.get("localRefresh");Bt.set("localRefresh",!1),ut.get("data")||(ut.data(F),ut.render());var ie=this.get("itemMap"),se={nodes:[],edges:[]},Te=F.combos;if(Te){var Ee=nr(Te,F.nodes);this.set("comboTrees",Ee)}this.diffItems("node",se,F.nodes),Object(l.f)(ie,function(Xt,Se){ie[Se].getModel().depth=0,Xt.getType&&Xt.getType()==="edge"||(Xt.getType&&Xt.getType()==="combo"?(delete ie[Se],Xt.destroy()):se.nodes.indexOf(Xt)<0&&(delete ie[Se],ut.remove(Xt,!1)))});for(var un=this.getCombos(),xn=un.length-1;xn>=0;xn--)un[xn].destroyed&&un.splice(xn,1);Te&&(ut.addCombos(Te),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",se,F.edges),Object(l.f)(ie,function(Xt,Se){(!Xt.getType||Xt.getType()!=="node"&&Xt.getType()!=="combo")&&se.edges.indexOf(Xt)<0&&(delete ie[Se],ut.remove(Xt,!1))}),this.set({nodes:se.nodes,edges:se.edges});var _t=this.get("layoutController");return _t&&(_t.changeData(),ut.get("animate")&&!_t.getLayoutType()?ut.positionsAnimate():ut.autoPaint()),setTimeout(function(){Bt.set("localRefresh",Jt)},16),this},G.prototype.addCombos=function(F){var Z=this.get("comboTrees");this.get("itemController").addCombos(Z,F)},G.prototype.createCombo=function(F,Z){var ut=this;this.set("comboSorted",!1);var Bt,Jt="";if(F){if(Object(l.x)(F))Jt=F,Bt={id:F};else{if(!(Jt=F.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");Bt=F}var ie=Z.map(function(Te){var Ee=ut.findById(Te),un="";Ee.getType&&(un=Ee.getType());var xn={id:Ee.getID(),itemType:un};return un==="combo"?xn.parentId=Jt:un==="node"&&(xn.comboId=Jt),xn});Bt.children=ie,this.addItem("combo",Bt,!1),this.set("comboSorted",!1);var se=this.get("comboTrees");(se||[]).forEach(function(Te){Kn(Te,function(Ee){return Ee.id!==Jt||(Ee.itemType="combo",Ee.children=ie,!1)})}),se&&this.sortCombos()}},G.prototype.uncombo=function(F){var Z=this,ut=F;if(Object(l.x)(F)&&(ut=this.findById(F)),!ut||ut.getType&&ut.getType()!=="combo")console.warn("The item is not a combo!");else{var Bt=ut.getModel().parentId,Jt=this.get("comboTrees");Jt||(Jt=[]);var ie,se=this.get("itemMap"),Te=ut.get("id"),Ee=[],un=this.get("combos"),xn=this.findById(Bt);if(Jt.forEach(function(Xt){ie||Kn(Xt,function(Se){if(Se.id===Te){ie=Se,ut.getEdges().forEach(function(ue){Z.removeItem(ue,!1)});var Wt=un.indexOf(F);un.splice(Wt,1),delete se[Te],ut.destroy()}return!Bt||!ie||Se.id!==Bt||(xn.removeCombo(ut),(Wt=(Ee=Se.children).indexOf(ie))!==-1&&Ee.splice(Wt,1),ie.children.forEach(function(ue){var vn=Z.findById(ue.id),Dn=vn.getModel();vn.getType&&vn.getType()==="combo"?(ue.parentId=Bt,delete ue.comboId,Dn.parentId=Bt,delete Dn.comboId):vn.getType&&vn.getType()==="node"&&(ue.comboId=Bt,Dn.comboId=Bt),xn.addChild(vn),Ee.push(ue)}),!1)})}),!Bt&&ie){var _t=Jt.indexOf(ie);Jt.splice(_t,1),ie.children.forEach(function(Xt){Xt.parentId=void 0,Z.findById(Xt.id).getModel().parentId=void 0,Xt.itemType!=="node"&&Jt.push(Xt)})}}},G.prototype.updateCombos=function(){var F=this,Z=this.get("comboTrees"),ut=this.get("itemController"),Bt=this.get("itemMap");(Z||[]).forEach(function(Jt){Kn(Jt,function(ie){if(!ie)return!0;var se=Bt[ie.id];if(se&&se.getType&&se.getType()==="combo"){var Te=Object(n.d)(se.getStates());Object(l.f)(Te,function(Ee){return F.setItemState(se,Ee,!1)}),ut.updateCombo(se,ie.children),Object(l.f)(Te,function(Ee){return F.setItemState(se,Ee,!0)})}return!0})}),this.sortCombos()},G.prototype.updateCombo=function(F){var Z,ut=this,Bt=F;if(Object(l.x)(F)&&(Bt=this.findById(F)),!Bt||Bt.getType&&Bt.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{Z=Bt.get("id");var Jt=this.get("comboTrees"),ie=this.get("itemController"),se=this.get("itemMap");(Jt||[]).forEach(function(Te){Kn(Te,function(Ee){if(!Ee)return!0;var un=se[Ee.id];if(Z===Ee.id&&un&&un.getType&&un.getType()==="combo"){var xn=Object(n.d)(un.getStates());Object(l.f)(xn,function(_t){un.getStateStyle(_t)&&ut.setItemState(un,_t,!1)}),ie.updateCombo(un,Ee.children),Object(l.f)(xn,function(_t){un.getStateStyle(_t)&&ut.setItemState(un,_t,!0)}),Z&&(Z=Ee.parentId)}return!0})})}},G.prototype.updateComboTree=function(F,Z,ut){ut===void 0&&(ut=!0);var Bt;this.set("comboSorted",!1);var Jt,ie=(Bt=Object(l.x)(F)?this.findById(F):F).getModel(),se=ie.comboId||ie.parentId,Te="";if(Bt.getType&&(Te=Bt.getType()),Z&&Te==="combo"){var Ee,un=this.get("comboTrees"),xn=!0;if((un||[]).forEach(function(ue){Ee||_n(ue,function(vn){if(!Ee)return vn.id===Bt.getID()&&(Ee=vn),!0})}),_n(Ee,function(ue){return ue.id!==Z||(xn=!1,!1)}),!xn)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(ut&&this.get("enabledStack")){var _t={},Xt={};Te==="combo"?(_t.combos=[{id:ie.id,parentId:ie.parentId}],Xt.combos=[{id:ie.id,parentId:Z}]):Te==="node"&&(_t.nodes=[{id:ie.id,parentId:ie.comboId}],Xt.nodes=[{id:ie.id,parentId:Z}]),this.pushStack("updateComboTree",{before:_t,after:Xt})}if(ie.parentId||ie.comboId){var Se=this.findById(ie.parentId||ie.comboId);Se&&Se.removeChild(Bt)}Te==="combo"?ie.parentId=Z:Te==="node"&&(ie.comboId=Z),Z&&(Jt=this.findById(Z))&&Jt.addChild(Bt),se&&(Jt=this.findById(se))&&Jt.removeChild(Bt);var Wt=er(this.get("comboTrees"),ie.id,Z);this.set("comboTrees",Wt),this.updateCombos()},G.prototype.save=function(){var F=[],Z=[],ut=[];return Object(l.f)(this.get("nodes"),function(Bt){F.push(Bt.getModel())}),Object(l.f)(this.get("edges"),function(Bt){Z.push(Bt.getModel())}),Object(l.f)(this.get("combos"),function(Bt){ut.push(Bt.getModel())}),{nodes:F,edges:Z,combos:ut}},G.prototype.changeSize=function(F,Z){return this.get("viewController").changeSize(F,Z),this},G.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var F=this.get("nodes"),Z=this.get("edges"),ut=this.get("edges");Object(l.f)(F,function(Bt){Bt.refresh()}),Object(l.f)(Z,function(Bt){Bt.refresh()}),Object(l.f)(ut,function(Bt){Bt.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.getComboChildren=function(F){if(Object(l.x)(F)&&(F=this.findById(F)),F&&(!F.getType||F.getType()==="combo"))return F.getChildren();console.warn("The combo does not exist!")},G.prototype.positionsAnimate=function(){var F=this;F.emit("beforeanimate");var Z=F.get("animateCfg"),ut=Z.onFrame,Bt=F.getNodes(),Jt=Bt.map(function(ie){var se=ie.getModel();return{id:se.id,x:se.x,y:se.y}});F.isAnimating()&&F.stopAnimate(),F.get("canvas").animate(function(ie){Object(l.f)(Jt,function(se){var Te=F.findById(se.id);if(Te&&!Te.destroyed){var Ee=Te.get("originAttrs"),un=Te.get("model");if(!Ee){var xn=Te.getContainer().getMatrix();xn||(xn=[1,0,0,0,1,0,0,0,1]),Ee={x:xn[6],y:xn[7]},Te.set("originAttrs",Ee)}if(ut){var _t=ut(Te,ie,se,Ee);Te.set("model",Object.assign(un,_t))}else un.x=Ee.x+(se.x-Ee.x)*ie,un.y=Ee.y+(se.y-Ee.y)*ie}}),F.refreshPositions()},{duration:Z.duration,easing:Z.easing,callback:function(){Object(l.f)(Bt,function(se){se.set("originAttrs",null)}),Z.callback&&Z.callback(),F.emit("afteranimate"),F.animating=!1}})},G.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var F,Z=this.get("nodes"),ut=this.get("edges"),Bt=this.get("vedges"),Jt=this.get("combos"),ie={};Object(l.f)(Z,function(se){F=se.getModel();var Te=se.get("originAttrs");Te&&F.x===Te.x&&F.y===Te.y||(se.updatePosition({x:F.x,y:F.y}),ie[F.id]=!0,F.comboId&&(ie[F.comboId]=!0))}),Jt&&Jt.length!==0&&this.updateCombos(),Object(l.f)(ut,function(se){var Te=se.getSource().getModel(),Ee=se.getTarget().getModel();(ie[Te.id]||ie[Ee.id]||se.getModel().isComboEdge)&&se.refresh()}),Object(l.f)(Bt,function(se){se.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},G.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},G.prototype.isAnimating=function(){return this.animating},G.prototype.getZoom=function(){var F=this.get("group").getMatrix();return F?F[0]:1},G.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},G.prototype.setMode=function(F){return this.get("modeController").setMode(F),this},G.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},G.prototype.updateLayout=function(F){var Z,ut=this.get("layoutController");Object(l.x)(F)?F={type:Z=F}:Z=F.type;var Bt=this.get("layout"),Jt=Bt?Bt.type:void 0;if(Z&&Jt!==Z||F.gpuEnabled!==void 0&&F.gpuEnabled!==Bt.gpuEnabled)Z||(Z=Jt),this.set("layout",F),ut.changeLayout(Z);else{var ie={};Object.assign(ie,Bt,F),ie.type=Jt||"random",this.set("layout",ie),ut.updateLayoutCfg(ie)}},G.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},G.prototype.layout=function(){var F=this.get("layoutController"),Z=this.get("layout");Z&&F&&(Z.workerEnabled?F.layout():F.layoutMethod?F.relayout(!0):F.layout())},G.prototype.collapseCombo=function(F){var Z=this;if(Object(l.x)(F)&&(F=this.findById(F)),F){this.emit("beforecollapseexpandcombo",{action:"expand",item:F});var ut=F.getModel();this.get("itemController").collapseCombo(F),ut.collapsed=!0;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Te=!1,Ee={};(se||[]).forEach(function(_t){Ee[_t.id]=_t}),(se||[]).forEach(function(_t){Te||_n(_t,function(Xt){if(Te&&Ee[Xt.id])return!1;if(ut.parentId===Xt.id?(Ee={},Xt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Xt.id&&(Te=!0),Te){var Se=Z.findById(Xt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn=[];Bt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Xt=_t.getSource(),Se=_t.getTarget();if((Jt.includes(Xt)||ie.includes(Xt))&&!Jt.includes(Se)&&!ie.includes(Se)||Xt.getModel().id===ut.id){if((Dn=_t.getModel()).isVEdge)return void Z.removeItem(_t,!1);for(var Wt=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(Wt.parentId||Wt.comboId))||!Wt.parentId&&!Wt.comboId)return;Wt=Se.getModel()}var ue=Wt.id;if(un[ut.id+"-"+ue])return void(un[ut.id+"-"+ue]+=Dn.size||1);var vn=Z.addItem("vedge",{source:ut.id,target:ue,isVEdge:!0},!1);un[ut.id+"-"+ue]=Dn.size||1,xn.push(vn)}else if(!Jt.includes(Xt)&&!ie.includes(Xt)&&(Jt.includes(Se)||ie.includes(Se))||Se.getModel().id===ut.id){var Dn;if((Dn=_t.getModel()).isVEdge)return void Z.removeItem(_t,!1);for(var zn=Xt.getModel();!Xt.isVisible();){if(!(Xt=Z.findById(zn.parentId||zn.comboId))||!zn.parentId&&!zn.comboId)return;zn=Xt.getModel()}var Un=zn.id;if(un[Un+"-"+ut.id])return void(un[Un+"-"+ut.id]+=Dn.size||1);vn=Z.addItem("vedge",{target:ut.id,source:Un,isVEdge:!0},!1),un[Un+"-"+ut.id]=Dn.size||1,xn.push(vn)}}}),xn.forEach(function(_t){var Xt=_t.getModel();Z.updateItem(_t,{size:un[Xt.source+"-"+Xt.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:F})}else console.warn("The combo to be collapsed does not exist!")},G.prototype.expandCombo=function(F){var Z=this;if(Object(l.x)(F)&&(F=this.findById(F)),!F||F.getType&&F.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:F});var ut=F.getModel();this.get("itemController").expandCombo(F),ut.collapsed=!1;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Te=!1,Ee={};(se||[]).forEach(function(_t){Ee[_t.id]=_t}),(se||[]).forEach(function(_t){Te||_n(_t,function(Xt){if(Te&&Ee[Xt.id])return!1;if(ut.parentId===Xt.id?(Ee={},Xt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Xt.id&&(Te=!0),Te){var Se=Z.findById(Xt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn={};Bt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Xt=_t.getSource(),Se=_t.getTarget(),Wt=Xt.get("id"),ue=Se.get("id");if((Jt.includes(Xt)||ie.includes(Xt))&&!Jt.includes(Se)&&!ie.includes(Se)||Wt===ut.id){if(_t.getModel().isVEdge)return void Z.removeItem(_t,!1);for(var vn=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;vn=Se.getModel()}ue=vn.id;for(var Dn=Xt.getModel();!Xt.isVisible();){if(!(Xt=Z.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;if(Dn.comboId===ut.id||Dn.parentId===ut.id)break;Dn=Xt.getModel()}if(Wt=Dn.id,ue){if(un[Un=Wt+"-"+ue])return un[Un]+=_t.getModel().size||1,void Z.updateItem(xn[Un],{size:un[Un]},!1);var zn=Z.addItem("vedge",{source:Wt,target:ue,isVEdge:!0},!1);un[Un]=_t.getModel().size||1,xn[Un]=zn}}else if(!Jt.includes(Xt)&&!ie.includes(Xt)&&(Jt.includes(Se)||ie.includes(Se))||ue===ut.id){if(_t.getModel().isVEdge)return void Z.removeItem(_t,!1);for(Dn=Xt.getModel();!Xt.isVisible();){if(!(Xt=Z.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;Dn=Xt.getModel()}for(Wt=Dn.id,vn=Se.getModel();!Se.isVisible();){if(!(Se=Z.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;if(vn.comboId===ut.id||vn.parentId===ut.id)break;vn=Se.getModel()}if(ue=vn.id,Wt){var Un;if(un[Un=Wt+"-"+ue])return un[Un]+=_t.getModel().size||1,void Z.updateItem(xn[Un],{size:un[Un]},!1);zn=Z.addItem("vedge",{target:ue,source:Wt,isVEdge:!0},!1),un[Un]=_t.getModel().size||1,xn[Un]=zn}}else(Jt.includes(Xt)||ie.includes(Xt))&&(Jt.includes(Se)||ie.includes(Se))&&Xt.isVisible()&&Se.isVisible()&&_t.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:F})}},G.prototype.collapseExpandCombo=function(F){if(Object(l.x)(F)&&(F=this.findById(F)),!F.getType||F.getType()==="combo"){for(var Z=F.getModel(),ut=this.findById(Z.parentId);ut;){var Bt=ut.getModel();if(Bt.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(ut=void 0);ut=this.findById(Bt.parentId)}Z.collapsed?this.expandCombo(F):this.collapseCombo(F),this.updateCombo(F)}},G.prototype.sortCombos=function(){var F=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var Z=[],ut={};(this.get("comboTrees")||[]).forEach(function(Bt){_n(Bt,function(Jt){return Z[Jt.depth]?Z[Jt.depth].push(Jt.id):Z[Jt.depth]=[Jt.id],ut[Jt.id]=Jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(Bt){var Jt=Bt.getModel(),ie=ut[Jt.source]||0,se=ut[Jt.target]||0,Te=Math.max(ie,se);Z[Te]?Z[Te].push(Jt.id):Z[Te]=[Jt.id]}),Z.forEach(function(Bt){if(Bt&&Bt.length)for(var Jt=Bt.length-1;Jt>=0;Jt--){var ie=F.findById(Bt[Jt]);ie&&ie.toFront()}})}},G.prototype.getNeighbors=function(F,Z){var ut=F;return Object(l.x)(F)&&(ut=this.findById(F)),ut.getNeighbors(Z)},G.prototype.getNodeDegree=function(F,Z){Z===void 0&&(Z=void 0);var ut=F;Object(l.x)(F)&&(ut=this.findById(F));var Bt=this.get("degrees");Bt||(Bt=Object(E.getDegree)(this.get("data"))),this.set("degees",Bt);var Jt,ie=Bt[ut.getID()];switch(Z){case"in":Jt=ie.inDegree;break;case"out":Jt=ie.outDegree;break;case"all":Jt=ie;break;default:Jt=ie.degree}return Jt},G.prototype.getUndoStack=function(){return this.undoStack},G.prototype.getRedoStack=function(){return this.redoStack},G.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},G.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},G.prototype.pushStack=function(F,Z,ut){if(F===void 0&&(F="update"),ut===void 0&&(ut="undo"),this.get("enabledStack")){var Bt=Z?Object(l.c)(Z):{before:{},after:Object(l.c)(this.save())};ut==="redo"?this.redoStack.push({action:F,data:Bt}):this.undoStack.push({action:F,data:Bt}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},G.prototype.getAdjMatrix=function(F,Z){F===void 0&&(F=!0),Z===void 0&&(Z=this.get("directed"));var ut=this.get("adjMatrix");return ut&&F||(ut=Object(E.getAdjMatrix)(this.save(),Z),this.set("adjMatrix",ut)),ut},G.prototype.getShortestPathMatrix=function(F,Z){F===void 0&&(F=!0),Z===void 0&&(Z=this.get("directed"));var ut=this.get("adjMatrix"),Bt=this.get("shortestPathMatrix");return ut&&F||(ut=Object(E.getAdjMatrix)(this.save(),Z),this.set("adjMatrix",ut)),Bt&&F||(Bt=Object(E.floydWarshall)(this.save(),Z),this.set("shortestPathMatrix",Bt)),Bt},G.prototype.on=function(F,Z,ut){return ve.prototype.on.call(this,F,Z,ut)},G.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},G.prototype.createHull=function(F){if(F.members&&!(F.members.length<1)){var Z=this.get("hullGroup"),ut=this.get("hullMap");if(ut||(ut={},this.set("hullMap",ut)),Z||((Z=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",Z)),ut[F.id])return console.warn("Existed hull id."),ut[F.id];var Bt=Z.addGroup({id:F.id+"-container"}),Jt=new Qe(this,Object(n.a)(Object(n.a)({},F),{group:Bt}));return ut[Jt.id]=Jt,Jt}console.warn("Create hull failed! The members is empty.")},G.prototype.getHulls=function(){return this.get("hullMap")},G.prototype.getHullById=function(F){return this.get("hullMap")[F]},G.prototype.removeHull=function(F){var Z;Z=Object(l.x)(F)?this.getHullById(F):F,delete this.get("hullMap")[Z.id],Z.destroy()},G.prototype.removeHulls=function(){var F=this.getHulls();F&&Object.keys(F).length&&(F.forEach(function(Z){Z.destroy()}),this.set("hullMap",{}))},G}(s.a);function Yn(ve){return(Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(ve)}var $e=d.a.transform,rn=["startArrow","endArrow"],on={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$n={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:on,combo:on},vr={options:{},itemType:"",type:"",getCustomConfig:function(G){return{}},getOptions:function(G){return Object(l.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(G)||{},G)},draw:function(G,F){var Z=this.drawShape(G,F);return Z.set("className",this.itemType+"-shape"),G.label&&this.drawLabel(G,F).set("className",this.itemType+"-label"),Z},afterDraw:function(G,F,Z){},drawShape:function(G,F){return null},drawLabel:function(G,F){var Z=this.getOptions(G).labelCfg||{},ut=this.getLabelStyle(G,Z,F),Bt=ut.rotate;delete ut.rotate;var Jt=F.addShape("text",{attrs:ut,draggable:!0,className:"text-shape",name:"text-shape"});if(Bt){var ie=Jt.getBBox(),se=Jt.getMatrix();if(se||(se=[1,0,0,0,1,0,0,0,1]),ut.rotateCenter)switch(ut.rotateCenter){case"center":se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]]);break;case"lefttop":se=$e(se,[["t",-ut.x,-ut.y],["r",Bt],["t",ut.x,ut.y]]);break;case"leftcenter":se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);break;default:se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]])}else se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);Jt.setMatrix(se)}if(ut.background){var Te=this.drawLabelBg(G,F,Jt),Ee=this.itemType+"-label-bg";Te.set("classname",Ee),Jt.toFront()}return Jt},drawLabelBg:function(G,F,Z){var ut=this.options.labelCfg,Bt=Object(l.A)({},ut,G.labelCfg),Jt=this.getLabelBgStyleByPosition(Z,G,Bt,F);return F.addShape("rect",{name:"text-bg-shape",attrs:Jt})},getLabelStyleByPosition:function(G,F,Z){return{text:G.label}},getLabelBgStyleByPosition:function(G,F,Z,ut){return{}},getLabelStyle:function(G,F,Z){var ut=this.getLabelStyleByPosition(G,F,Z),Bt=this.itemType+"Label",Jt=gt[Bt]?gt[Bt].style:null;return Object(n.a)(Object(n.a)(Object(n.a)({},Jt),ut),F.style)},getShapeStyle:function(G){return G.style},update:function(G,F){this.updateShapeStyle(G,F),this.updateLabel(G,F)},updateShapeStyle:function(G,F){var Z=F.getContainer(),ut=F.getKeyShape(),Bt=Object(l.A)({},ut.attr(),G.style),Jt=function(Te){var Ee,un=Bt[Te];if(Object(l.w)(un)){var xn=Z.find(function(_t){return _t.get("name")===Te});xn&&xn.attr(un)}else ut.attr(((Ee={})[Te]=un,Ee))};for(var ie in Bt)Jt(ie)},updateLabel:function(G,F){var Z=F.getContainer(),ut=this.getOptions({}).labelCfg,Bt=this.itemType+"-label",Jt=Z.find(function(zn){return zn.get("className")===Bt}),ie=this.itemType+"-label-bg",se=Z.find(function(zn){return zn.get("classname")===ie});if(G.label||G.label==="")if(Jt){var Te={};F.getModel&&(Te=F.getModel().labelCfg);var Ee=Object(l.e)({},ut,Te,G.labelCfg),un=this.getLabelStyleByPosition(G,Ee,Z),xn=G.labelCfg?G.labelCfg.style:void 0,_t=Ee.style&&Ee.style.background,Xt=Object(n.a)(Object(n.a)(Object(n.a)({},Jt.attr()),un),xn),Se=Xt.rotate;if(delete Xt.rotate,Se){var Wt=[1,0,0,0,1,0,0,0,1];Wt=$e(Wt,[["t",-Xt.x,-Xt.y],["r",Se],["t",Xt.x,Xt.y]]),Jt.resetMatrix(),Jt.attr(Object(n.a)(Object(n.a)({},Xt),{matrix:Wt}))}else Jt.resetMatrix(),Jt.attr(Xt);if(se)if(Xt.background){var ue=this.getLabelBgStyleByPosition(Jt,G,Ee,Z),vn=Object(n.a)(Object(n.a)({},ue),_t);if(se.resetMatrix(),Se){var Dn=[1,0,0,0,1,0,0,0,1];Dn=$e(Dn,[["t",-vn.x,-vn.y],["r",Se],["t",vn.x,vn.y]]),vn.matrix=Dn}se.attr(vn)}else Z.removeChild(se);else Xt.background&&((se=this.drawLabelBg(G,Z,Jt)).set("classname",ie),Jt.toFront())}else this.drawLabel(G,Z).set("className",Bt)},afterUpdate:function(G,F){},setState:function(G,F,Z){var ut,Bt,Jt=Z.get("keyShape");if(Jt){var ie=Z.getType(),se=Object(l.n)(F)?G:G+":"+F,Te=this.getStateStyle(se,Z),Ee=Z.getStateStyle(se);if(Ee||Te){var un=Object(l.A)({},Ee||Te),xn=Z.getContainer(),_t={x:1,y:1,cx:1,cy:1};if(ie==="combo"&&(_t.r=1,_t.width=1,_t.height=1),F){var Xt=function(ce){var Me,ze=un[ce];if(Object(l.w)(ze)&&!rn.includes(ce)){var Ve=xn.find(function(ke){return ke.get("name")===ce});Ve&&Ve.attr(ze)}else Jt.attr(((Me={})[ce]=ze,Me))};for(var Se in un)Xt(Se)}else{var Wt=ti(Z.getCurrentStatesStyle()),ue=Z.getModel(),vn=Object(l.A)({},ue.style,ti(Z.getOriginStyle())),Dn=Jt.get("name"),zn=Jt.attr(),Un={};Object.keys(zn).forEach(function(he){if(he!=="img"){var ce=zn[he];ce&&Yn(ce)==="object"?Un[he]=Object(l.c)(ce):Un[he]=ce}});var Ze={},Ce=function(ce){var Me=un[ce];if(Object(l.w)(Me)&&!rn.includes(ce)){var ze=xn.find(function(tn){return tn.get("name")===ce});if(ze){var Ve=Object(l.c)(ze.attr());Object(l.f)(Me,function(tn,De){if(ce===Dn&&Un[De]&&!_t[De]){delete Un[De];var cn=vn[ce][De]||$n[ie][De];Jt.attr(De,cn)}else if(Ve[De]||Ve[De]===0){delete Ve[De];var fn=vn[ce][De]||$n[ie][De];ze.attr(De,fn)}}),Ze[ce]=Ve}}else if(Un[ce]&&!_t[ce]){delete Un[ce];var ke=vn[ce]||(vn[Dn]?vn[Dn][ce]:void 0)||$n[ie][ce];Jt.attr(ce,ke)}};for(var R in un)Ce(R);for(var Se in Dn?Ze[Dn]=Un:Object(l.A)(Ze,Un),Wt)if(!_t[Se]){var xt=Wt[Se];Object(l.w)(xt)&&!rn.includes(Se)||(Dn?(Object(l.A)(vn[Dn],((Bt={})[Se]=xt,Bt)),delete vn[Se]):Object(l.A)(vn,((ut={})[Se]=xt,ut)),delete Wt[Se])}var $t={};Object(l.e)($t,vn,Ze,Wt);var me=!1,Zt=function(ce){var Me,ze,Ve=$t[ce];if(Object(l.w)(Ve)&&!rn.includes(ce)){var ke=xn.find(function(De){return De.get("name")===ce});ke&&(ce===Dn&&(ie==="combo"&&(delete Ve.r,delete Ve.width,delete Ve.height),me=!0),ke.attr(Ve))}else if(!me){var tn=Ve||$n[ie][ce];ie==="combo"?Dn||Jt.attr(((Me={})[ce]=tn,Me)):Jt.attr(((ze={})[ce]=tn,ze))}};for(var de in $t)Zt(de)}}}},getStateStyle:function(G,F){var Z=F.getModel(),ut=F.getType(),Bt=this.getOptions(Z),Jt=Bt.stateStyles,ie=Bt.style,se=ie===void 0?{}:ie,Te=Z.stateStyles?Z.stateStyles[G]:Jt&&Jt[G];return ut==="combo"?Object(l.c)(Te):Object(l.A)({},se,Te)},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){return this.getOptions(G).anchorPoints}},ar={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:gt.nodeLabel.offset,getSize:function(G){var F=G.size||this.getOptions({}).size||gt.defaultNode.size;return Object(l.m)(F)&&F.length===1&&(F=[F[0],F[0]]),Object(l.m)(F)||(F=[F,F]),F},getLabelStyleByPosition:function(G,F){var Z=F.position||this.labelPosition;if(Z==="center")return{x:0,y:0,text:G.label};var ut=F.offset;Object(l.s)(ut)&&(ut=this.offset);var Bt,Jt=this.getSize(G),ie=Jt[0],se=Jt[1];switch(Z){case"top":Bt={x:0,y:0-se/2-ut,textBaseline:"bottom"};break;case"bottom":Bt={x:0,y:se/2+ut,textBaseline:"top"};break;case"left":Bt={x:0-ie/2-ut,y:0,textAlign:"right"};break;default:Bt={x:ie/2+ut,y:0,textAlign:"left"}}return Bt.text=G.label,Bt},getLabelBgStyleByPosition:function(G,F,Z,ut){if(!G)return{};var Bt=G.getBBox(),Jt=Z.style&&Z.style.background;if(!Jt)return{};var ie,se=Ut(Jt.padding),Te=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],un=Z.offset;return Object(l.s)(un)&&(un=this.offset),ie={x:Bt.minX-se[3],y:Bt.minY-se[0]},ie=Object(n.a)(Object(n.a)(Object(n.a)({},ie),Jt),{width:Te,height:Ee})},drawShape:function(G,F){var Z=this.shapeType,ut=this.getShapeStyle(G);return F.addShape(Z,{attrs:ut,draggable:!0,name:"node-shape"})},updateLinkPoints:function(G,F){var Z,ut=this.getOptions(G).linkPoints,Bt=F.find(function(Ce){return Ce.get("className")==="link-point-left"}),Jt=F.find(function(Ce){return Ce.get("className")==="link-point-right"}),ie=F.find(function(Ce){return Ce.get("className")==="link-point-top"}),se=F.find(function(Ce){return Ce.get("className")==="link-point-bottom"});Bt&&(Z=Bt.attr()),Jt&&!Z&&(Z=Jt.attr()),ie&&!Z&&(Z=ie.attr()),se&&!Z&&(Z=se.attr()),Z||(Z=ut);var Te=Object(l.A)({},Z,G.linkPoints),Ee=Te.fill,un=Te.stroke,xn=Te.lineWidth,_t=Te.size/2;_t||(_t=Te.r);var Xt=G.linkPoints?G.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Se=Xt.left,Wt=Xt.right,ue=Xt.top,vn=Xt.bottom,Dn=this.getSize(G),zn=Dn[0],Un=Dn[1],Ze={r:_t,fill:Ee,stroke:un,lineWidth:xn};Bt?Se||Se===void 0?Bt.attr(Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0})):Bt.remove():Se&&F.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Jt?(Wt||Wt===void 0||Jt.remove(),Jt.attr(Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}))):Wt&&F.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),ie?(ue||ue===void 0||ie.remove(),ie.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Un/2}))):ue&&F.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Un/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),se?vn||vn===void 0?se.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:Un/2})):se.remove():vn&&F.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:Un/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(G,F,Z,ut){F.get("keyShape").attr(Object(n.a)({},Z)),this.updateLabel(G,F),ut&&this.updateIcon(G,F)},updateIcon:function(G,F){var Z=this,ut=F.getContainer(),Bt=this.getOptions(G).icon,Jt=(G.icon?G.icon:{show:void 0}).show,ie=ut.find(function(xn){return xn.get("className")===Z.type+"-icon"});if(ie)if(Jt||Jt===void 0){var se=Object(l.A)({},ie.attr(),Bt),Te=se.width,Ee=se.height;ie.attr(Object(n.a)(Object(n.a)({},se),{x:-Te/2,y:-Ee/2}))}else ie.remove();else if(Jt){Te=Bt.width,Ee=Bt.height,ut.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Bt),{x:-Te/2,y:-Ee/2}),className:this.type+"-icon",name:this.type+"-icon"});var un=ut.find(function(xn){return xn.get("className")==="node-label"});un&&un.toFront()}}},rr=Object(n.a)(Object(n.a)({},vr),ar);jr.registerNode("single-node",rr);var Fr={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:gt.defaultEdge.size,style:{x:0,y:0,stroke:gt.defaultEdge.style.stroke,lineAppendWidth:gt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:gt.edgeLabel.style.fill,fontSize:gt.edgeLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.edgeStateStyles)},getPath:function(G){var F=[];return Object(l.f)(G,function(Z,ut){ut===0?F.push(["M",Z.x,Z.y]):F.push(["L",Z.x,Z.y])}),F},getShapeStyle:function(G){var F=this.options.style,Z={stroke:G.color},ut=Object(l.A)({},F,Z,G.style),Bt=G.size||gt.defaultEdge.size,Jt=(G=this.getPathPoints(G)).startPoint,ie=G.endPoint,se=this.getControlPoints(G),Te=[Jt];se&&(Te=Te.concat(se)),Te.push(ie);var Ee=this.getPath(Te);return Object(l.A)({},gt.defaultEdge.style,{stroke:gt.defaultEdge.color,lineWidth:Bt,path:Ee},ut)},updateShapeStyle:function(G,F){var Z=F.getContainer(),ut={stroke:G.color},Bt=Z.find(function(vn){return vn.get("className")==="edge-shape"})||F.getKeyShape(),Jt=G.size,ie=(G=this.getPathPoints(G)).startPoint,se=G.endPoint,Te=this.getControlPoints(G),Ee=[ie];Te&&(Ee=Ee.concat(Te)),Ee.push(se);var un=Bt.attr(),xn=Object(l.A)({},ut,un,G.style),_t=G.sourceNode,Xt=G.targetNode,Se={radius:xn.radius};Te||(Se={source:_t,target:Xt,offset:xn.offset,radius:xn.radius}),un.endArrow&&xn.endArrow===!1&&(G.style.endArrow={path:""}),un.startArrow&&xn.startArrow===!1&&(G.style.startArrow={path:""});var Wt=this.getPath(Ee,Se),ue=Object(l.A)(ut,Bt.attr(),{lineWidth:Jt,path:Wt},G.style);Bt&&Bt.attr(ue)},getLabelStyleByPosition:function(G,F,Z){var ut,Bt=F.position||this.labelPosition,Jt={},ie=Z&&Z.find(function(xn){return xn.get("className")==="edge-shape"});ut=Bt==="start"?0:Bt==="end"?1:.5;var se=F.refX||this.refX,Te=F.refY||this.refY;if(G.startPoint.x===G.endPoint.x&&G.startPoint.y===G.endPoint.y)return Jt.x=G.startPoint.x+se,Jt.y=G.startPoint.y+Te,Jt.text=G.label,Jt;var Ee=Object(l.s)(F.autoRotate)?this.labelAutoRotate:F.autoRotate,un=Mn(ie,ut,se,Te,Ee);return Jt.x=un.x,Jt.y=un.y,Jt.rotate=un.rotate,Jt.textAlign=this._getTextAlign(Bt,un.angle),Jt.text=G.label,Jt},getLabelBgStyleByPosition:function(G,F,Z,ut){if(!G)return{};var Bt=G.getBBox(),Jt=Z.style&&Z.style.background;if(!Jt)return{};var ie,se=Jt.padding,Te=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],un=Z.position||this.labelPosition,xn=Object(n.a)(Object(n.a)({},Jt),{width:Te,height:Ee,x:Bt.minX-se[2],y:Bt.minY-se[0],rotate:0}),_t=Object(l.s)(Z.autoRotate)?this.labelAutoRotate:Z.autoRotate,Xt=ut&&ut.find(function(Dn){return Dn.get("className")==="edge-shape"});ie=un==="start"?0:un==="end"?1:.5;var Se=Z.refX||this.refX,Wt=Z.refY||this.refY;if(F.startPoint.x===F.endPoint.x&&F.startPoint.y===F.endPoint.y)return xn.x=F.startPoint.x+Se-Te/2,xn.y=F.startPoint.y+Wt-Ee/2,xn;var ue=Mn(Xt,ie,Se-Te/2,Wt+Ee/2,_t),vn=ue.angle;return vn>.5*Math.PI&&vn<1.5*Math.PI&&(ue=Mn(Xt,ie,Se+Te/2,Wt+Ee/2,_t)),_t&&(xn.x=ue.x,xn.y=ue.y),xn.rotate=ue.rotate,xn},_getTextAlign:function(G,F){var Z="center";return F?(F%=2*Math.PI,G!=="center"&&(Z=F>=0&&F<=Math.PI/2||F>=1.5*Math.PI&&F<2*Math.PI?G:function(ut){var Bt=ut;return ut==="start"?Bt="end":ut==="end"&&(Bt="start"),Bt}(G)),Z):G},getControlPoints:function(G){return G.controlPoints},getPathPoints:function(G){return G},drawShape:function(G,F){var Z=this.getShapeStyle(G);return F.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:Z})},drawLabel:function(G,F){var Z=this.options.labelCfg,ut=Object(l.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Z,G.labelCfg),Bt=this.getLabelStyle(G,ut,F),Jt=Bt.rotate;delete Bt.rotate;var ie=F.addShape("text",{attrs:Bt,name:"text-shape"});if(Jt&&ie.rotateAtStart(Jt),Bt.background){var se=this.drawLabelBg(G,F,ie),Te=this.itemType+"-label-bg";se.set("classname",Te),ie.toFront()}return ie},drawLabelBg:function(G,F,Z){var ut=this.options.labelCfg,Bt=Object(l.e)({},ut,G.labelCfg),Jt=this.getLabelStyle(G,Bt,F).rotate,ie=this.getLabelBgStyleByPosition(Z,G,Bt,F);delete ie.rotate;var se=F.addShape("rect",{name:"text-bg-shape",attrs:ie});return Jt&&se.rotateAtStart(Jt),se}},Ar=Object(n.a)(Object(n.a)({},vr),Fr);jr.registerEdge("single-edge",Ar),jr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),jr.registerEdge("spline",{getPath:function(G){return Qr(G)}},"single-edge"),jr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(G){var F,Z,ut=G.startPoint,Bt=G.endPoint,Jt=(ut.x+Bt.x)/2,ie=(ut.y+Bt.y)/2;if(G.controlPoints!==void 0){if(Z=G.controlPoints[0],F=vt(ut,Z,Bt),ut.x<=Bt.x&&ut.y>Bt.y?this.clockwise=F.x>Z.x?0:1:ut.x<=Bt.x&&ut.y<Bt.y?this.clockwise=F.x>Z.x?1:0:ut.x>Bt.x&&ut.y<=Bt.y?this.clockwise=F.y<Z.y?0:1:this.clockwise=F.y<Z.y?1:0,(Z.x-ut.x)/(Z.y-ut.y)==(Bt.x-ut.x)/(Bt.y-ut.y))return[]}else{G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),Object(l.m)(G.curveOffset)&&(G.curveOffset=G.curveOffset[0]),G.curveOffset<0?this.clockwise=0:this.clockwise=1;var se={x:Bt.x-ut.x,y:Bt.y-ut.y},Te=Math.atan2(se.y,se.x);Z={x:G.curveOffset*Math.cos(-Math.PI/2+Te)+Jt,y:G.curveOffset*Math.sin(-Math.PI/2+Te)+ie},F=vt(ut,Z,Bt)}var Ee=ft(ut,F);return[{x:Ee,y:Ee}]},getPath:function(G){var F=[];return F.push(["M",G[0].x,G[0].y]),G.length===2?F.push(["L",G[1].x,G[1].y]):F.push(["A",G[1].x,G[1].y,0,0,this.clockwise,G[2].x,G[2].y]),F}},"single-edge"),jr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(G){var F=G.controlPoints;if(!F||!F.length){var Z=G.startPoint,ut=G.endPoint;G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.m)(this.curveOffset)&&(G.curveOffset=G.curveOffset[0]),Object(l.m)(this.curvePosition)&&(G.curvePosition=G.curveOffset[0]),F=[gi(Z,ut,G.curvePosition,G.curveOffset)]}return F},getPath:function(G){var F=[];return F.push(["M",G[0].x,G[0].y]),F.push(["Q",G[1].x,G[1].y,G[2].x,G[2].y]),F}},"single-edge"),jr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(G){var F=G.controlPoints;if(G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.t)(G.curveOffset)&&(G.curveOffset=[G.curveOffset,-G.curveOffset]),Object(l.t)(G.curvePosition)&&(G.curvePosition=[G.curvePosition,1-G.curvePosition]),!F||!F.length||F.length<2){var Z=G.startPoint,ut=G.endPoint;F=[gi(Z,ut,G.curvePosition[0],G.curveOffset[0]),gi(Z,ut,G.curvePosition[1],G.curveOffset[1])]}return F},getPath:function(G){var F=[];return F.push(["M",G[0].x,G[0].y]),F.push(["C",G[1].x,G[1].y,G[2].x,G[2].y,G[3].x,G[3].y]),F}},"single-edge"),jr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(G){var F=G.startPoint,Z=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:F.x,y:(Z.y-F.y)*this.curvePosition[0]+F.y},{x:Z.x,y:(Z.y-F.y)*this.curvePosition[1]+F.y}]}},"cubic"),jr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(G){var F=G.startPoint,Z=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(Z.x-F.x)*this.curvePosition[0]+F.x,y:F.y},{x:(Z.x-F.x)*this.curvePosition[1]+F.x,y:Z.y}]}},"cubic"),jr.registerEdge("loop",{getPathPoints:function(G){return Rn(G)},getControlPoints:function(G){return G.controlPoints},afterDraw:function(G){G.controlPoints=void 0},afterUpdate:function(G){G.controlPoints=void 0}},"cubic");var wr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:gt.comboLabel.refX,refY:gt.comboLabel.refY,options:{style:{stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.comboStateStyles)},getSize:function(G){var F=Object(l.c)(G.size||this.options.size||gt.defaultCombo.size);return Object(l.m)(F)&&F.length===1&&(F=[F[0],F[0]]),Object(l.m)(F)||(F=[F,F]),F},getLabelStyleByPosition:function(G,F){var Z=F.position||this.labelPosition,ut=G.style,Bt=G.padding||this.options.padding;Object(l.m)(Bt)&&(Bt=Bt[0]);var Jt=F.refX,ie=F.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Te=this.getSize(G),Ee=(Math.max(ut.r,Te[0]/2)||Te[0]/2)+Bt;switch(Z){case"top":se={x:0,y:-Ee-ie,textBaseline:"bottom",textAlign:"center"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:-Ee+Jt,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Ee+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},drawShape:function(G,F){var Z=this.shapeType,ut=this.getShapeStyle(G);return F.addShape(Z,{attrs:ut,draggable:!0,name:"combo-shape"})},updateShape:function(G,F,Z){var ut=F.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&ut.animate?ut.animate(Z,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},Z)),this.updateLabel(G,F)}},xr=Object(n.a)(Object(n.a)({},vr),wr);jr.registerCombo("single-combo",xr),jr.registerCombo("circle",{options:{size:[gt.defaultCombo.size[0],gt.defaultCombo.size[0]],padding:gt.defaultCombo.padding[0],animate:!0,style:{stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(n.a)({},gt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(G,F){var Z=this.getShapeStyle(G);return delete Z.height,delete Z.width,F.addShape("circle",{attrs:Z,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(G){var F=this.options.style,Z=G.padding||this.options.padding;Object(l.m)(Z)&&(Z=Z[0]);var ut,Bt={stroke:G.color},Jt=Object(l.A)({},F,Bt,G.style),ie=this.getSize(G);ut=!Object(l.t)(Jt.r)||isNaN(Jt.r)?ie[0]/2||gt.defaultCombo.style.r:Math.max(Jt.r,ie[0]/2)||ie[0]/2,Jt.r=ut+Z;var se=Object(n.a)({x:0,y:0},Jt);return G.style?G.style.r=ut:G.style={r:ut},se},update:function(G,F){var Z=this.getSize(G),ut=G.padding||this.options.padding;Object(l.m)(ut)&&(ut=ut[0]);var Bt=Object(l.c)(G.style),Jt=Math.max(Bt.r,Z[0]/2)||Z[0]/2;Bt.r=Jt+ut;var ie=F.get("sizeCache");ie&&(ie.r=Bt.r);var se={stroke:G.color},Te=F.get("keyShape"),Ee=Object(l.A)({},Te.attr(),se,Bt);G.style?G.style.r=Jt:G.style={r:Jt},this.updateShape(G,F,Ee,!0)}},"single-combo"),jr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:gt.defaultCombo.style.stroke,fill:gt.defaultCombo.style.fill,lineWidth:gt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:gt.comboLabel.style.fill,fontSize:gt.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},gt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(G,F){var Z=this.getShapeStyle(G);return F.addShape("rect",{attrs:Z,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(G,F){var Z=F.position||this.labelPosition,ut=G.style,Bt=G.padding||this.options.padding;Object(l.t)(Bt)&&(Bt=[Bt,Bt,Bt,Bt]);var Jt=F.refX,ie=F.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Te=ut.width/2+Bt[3],Ee=ut.height/2+Bt[0];switch(Z){case"top":se={x:0-Te+Jt,y:0-Ee+ie,textBaseline:"top",textAlign:"left"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:0-Te+ie,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Te+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},getShapeStyle:function(G){var F=this.options.style,Z=G.padding||this.options.padding;Object(l.t)(Z)&&(Z=[Z,Z,Z,Z]);var ut,Bt,Jt={stroke:G.color},ie=Object(l.A)({},F,Jt,G.style),se=this.getSize(G);ut=!Object(l.t)(ie.width)||isNaN(ie.width)?se[0]||gt.defaultCombo.style.width:Math.max(ie.width,se[0])||se[0],Bt=!Object(l.t)(ie.height)||isNaN(ie.height)?se[1]||gt.defaultCombo.style.height:Math.max(ie.height,se[1])||se[1];var Te=-ut/2-Z[3],Ee=-Bt/2-Z[0];ie.width=ut+Z[1]+Z[3],ie.height=Bt+Z[0]+Z[2];var un=Object(n.a)({x:Te,y:Ee},ie);return G.style?(G.style.width=ut,G.style.height=Bt):G.style={width:ut,height:Bt},un},update:function(G,F){var Z=this.getSize(G),ut=G.padding||this.options.padding;Object(l.t)(ut)&&(ut=[ut,ut,ut,ut]);var Bt=Object(l.c)(G.style),Jt=Math.max(Bt.width,Z[0])||Z[0],ie=Math.max(Bt.height,Z[1])||Z[1];Bt.width=Jt+ut[1]+ut[3],Bt.height=ie+ut[0]+ut[2];var se=F.get("sizeCache");se&&(se.width=Bt.width,se.height=Bt.height),Bt.x=-Jt/2-ut[3],Bt.y=-ie/2-ut[0];var Te={stroke:G.color},Ee=F.get("keyShape"),un=Object(l.A)({},Ee.attr(),Te,Bt);G.style?(G.style.width=Jt,G.style.height=ie):G.style={width:Jt,height:ie},this.updateShape(G,F,un,!1)},updateShape:function(G,F,Z){var ut=F.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&ut.animate?ut.animate(Z,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},Z)),this.updateLabel(G,F)}},"single-combo"),jr.registerNode("simple-circle",{options:{size:gt.defaultNode.size,style:{x:0,y:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize}},stateStyles:Object(n.a)({},gt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(G,F){var Z=this.getShapeStyle(G);return F.addShape("circle",{attrs:Z,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var F=this.getOptions(G).style,Z={stroke:G.color},ut=Object(l.e)({},F,Z),Bt=this.getSize(G)[0]/2;return Object(n.a)({x:0,y:0,r:Bt},ut)},update:function(G,F){var Z=this.getSize(G),ut={stroke:G.color,r:Z[0]/2},Bt=F.get("keyShape"),Jt=Object(l.e)({},Bt.attr(),ut,G.style);this.updateShape(G,F,Jt,!0)}},"single-node"),jr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},gt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(G,F){var Z=this.getShapeStyle(G);return F.addShape("rect",{attrs:Z,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var F=this.getOptions(G).style,Z={stroke:G.color},ut=Object(l.A)({},F,Z),Bt=this.getSize(G),Jt=ut.width||Bt[0],ie=ut.height||Bt[1];return Object(n.a)({x:-Jt/2,y:-ie/2,width:Jt,height:ie},ut)},update:function(G,F){F.getContainer();var Z=this.getOptions({}).style,ut=this.getSize(G),Bt=F.get("keyShape");G.size||(ut[0]=Bt.attr("width")||Z.width,ut[1]=Bt.attr("height")||Z.height);var Jt={stroke:G.color,x:-ut[0]/2,y:-ut[1]/2,width:ut[0],height:ut[1]},ie=Object(l.A)({},Z,Bt.attr(),Jt);ie=Object(l.A)(ie,G.style),this.updateShape(G,F,ie,!1)}},"single-node"),jr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(G,F){var Z=this.shapeType,ut=this.getShapeStyle(G);delete ut.fill;var Bt=F.addShape(Z,{attrs:ut,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(G,Bt),Bt},drawClip:function(G,F){var Z=this.getOptions(G).clipCfg;if(Z.show){var ut=Z.type,Bt=Z.x,Jt=Z.y,ie=Z.style;if(ut==="circle"){var se=Z.r;F.setClip({type:"circle",attrs:Object(n.a)({r:se,x:Bt,y:Jt},ie)})}else if(ut==="rect"){var Te=Z.width,Ee=Z.height,un=Bt-Te/2,xn=Jt-Ee/2;F.setClip({type:"rect",attrs:Object(n.a)({x:un,y:xn,width:Te,height:Ee},ie)})}else if(ut==="ellipse"){var _t=Z.rx,Xt=Z.ry;F.setClip({type:"ellipse",attrs:Object(n.a)({x:Bt,y:Jt,rx:_t,ry:Xt},ie)})}else if(ut==="polygon"){var Se=Z.points;F.setClip({type:"polygon",attrs:Object(n.a)({points:Se},ie)})}else if(ut==="path"){var Wt=Z.path;F.setClip({type:"path",attrs:Object(n.a)({path:Wt},ie)})}}},getShapeStyle:function(G){var F=this.getOptions(G).style,Z=this.getSize(G),ut=this.getOptions(G).img,Bt=Z[0],Jt=Z[1];return F&&(Bt=F.width||Z[0],Jt=F.height||Z[1]),Object(n.a)({x:-Bt/2,y:-Jt/2,width:Bt,height:Jt,img:ut},F)},updateShapeStyle:function(G,F){var Z=F.getContainer(),ut=this.itemType+"-shape",Bt=Z.find(function(ie){return ie.get("className")===ut})||F.getKeyShape(),Jt=this.getShapeStyle(G);Bt&&Bt.attr(Jt)}},"single-node");var Er,Ir={triangle:function(G,F,Z){G===void 0&&(G=10),F===void 0&&(F=15),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+",0 L "+(ut+F)+",-"+G/2+" L "+(ut+F)+","+G/2+" Z"},vee:function(G,F,Z){G===void 0&&(G=15),F===void 0&&(F=20),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+",0 L "+(ut+F)+",-"+G/2+`
        L `+(ut+2*F/3)+",0 L "+(ut+F)+","+G/2+" Z"},circle:function(G,F){return G===void 0&&(G=5),F===void 0&&(F=0),"M "+2*F+`, 0
            a `+G+","+G+" 0 1,0 "+2*G+`,0
            a `+G+","+G+" 0 1,0 "+2*-G+",0"},rect:function(G,F,Z){G===void 0&&(G=10),F===void 0&&(F=10),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+","+-G/2+` 
        L `+(ut+F)+","+-G/2+` 
        L `+(ut+F)+","+G/2+` 
        L `+ut+","+G/2+" Z"},diamond:function(G,F,Z){G===void 0&&(G=15),F===void 0&&(F=15),Z===void 0&&(Z=0);var ut=2*Z;return"M "+ut+`,0 
        L `+(ut+F/2)+","+-G/2+` 
        L `+(ut+F)+`,0 
        L `+(ut+F/2)+","+G/2+" Z"},triangleRect:function(G,F,Z,ut,Bt,Jt){G===void 0&&(G=15),F===void 0&&(F=15),Z===void 0&&(Z=15),ut===void 0&&(ut=3),Bt===void 0&&(Bt=5),Jt===void 0&&(Jt=0);var ie=2*Jt,se=ie+F+Bt;return"M "+ie+",0 L "+(ie+F)+",-"+G/2+" L "+(ie+F)+","+G/2+` Z
            M `+se+", -"+Z/2+`
            L `+(se+ut)+" -"+Z/2+`
            L `+(se+ut)+" "+Z/2+`
            L `+se+" "+Z/2+`
            Z`}},Lr={collapse:function(G,F,Z){return[["M",G-Z,F],["a",Z,Z,0,1,0,2*Z,0],["a",Z,Z,0,1,0,2*-Z,0],["M",G-Z+4,F],["L",G+Z-4,F]]},expand:function(G,F,Z){return[["M",G-Z,F],["a",Z,Z,0,1,0,2*Z,0],["a",Z,Z,0,1,0,2*-Z,0],["M",G-Z+4,F],["L",G-Z+2*Z-4,F],["M",G-Z+Z,F-Z+4],["L",G,F+Z-4]]},upTriangle:function(G,F,Z){var ut=Z*Math.cos(Math.PI/6),Bt=Z*Math.sin(Math.PI/6);return[["M",G-ut,F+Bt],["L",G+ut,F+Bt],["L",G,F-Z],["Z"]]},downTriangle:function(G,F,Z){var ut=Z*Math.cos(Math.PI/6),Bt=Z*Math.sin(Math.PI/6);return[["M",G-ut,F-Bt],["L",G+ut,F-Bt],["L",G,F+Z],["Z"]]}},Pr=jr,Dr=d.a.transform,ri=Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},p),m),S),i),{transform:Dr,mat3:d.b}),vi=function(){function ve(G){this.graph=G,this.layoutCfg=G.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return ve.prototype.initLayout=function(){},ve.prototype.getLayoutType=function(){return this.layoutCfg.type},ve.prototype.refreshLayout=function(){var G=this.graph;G&&(G.get("animate")?G.positionsAnimate():G.refreshPositions())},ve.prototype.changeLayout=function(G){var F=this.graph,Z=this.layoutMethod;this.layoutType=G,this.layoutCfg=F.get("layout")||{},this.layoutCfg.type=G,Z&&Z.destroy(),this.layout()},ve.prototype.changeData=function(){var G=this.layoutMethod;G&&G.destroy(),this.layout()},ve.prototype.destroyLayout=function(){var G=this.layoutMethod,F=this.graph;G&&G.destroy(),F.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},ve.prototype.setDataFromGraph=function(){for(var G=[],F=[],Z=[],ut=this.graph.getNodes(),Bt=this.graph.getEdges(),Jt=this.graph.getCombos(),ie=ut.length,se=0;se<ie;se++){var Te=ut[se];if(Te.isVisible()){var Ee=Te.getModel();G.push(Ee)}}var un=Bt.length;for(se=0;se<un;se++){var xn=Bt[se];xn&&!xn.destroyed&&xn.isVisible()&&((Ee=xn.getModel()).isComboEdge||F.push(Ee))}var _t=Jt.length;for(se=0;se<_t;se++){var Xt=Jt[se];!Xt.destroyed&&Xt.isVisible()&&(Ee=Xt.getModel(),Z.push(Ee))}return{nodes:G,edges:F,combos:Z}},ve.prototype.relayout=function(G){var F=this.graph,Z=this.layoutMethod,ut=this.layoutCfg;if(G){this.data=this.setDataFromGraph();var Bt=this.data.nodes;if(!Bt)return!1;this.initPositions(ut.center,Bt),Z.init(this.data)}this.layoutType==="force"&&(Z.ticking=!1,Z.forceSimulation.stop()),F.emit("beforelayout"),Z.execute(G),Z.isCustomLayout&&ut.onLayoutEnd&&ut.onLayoutEnd()},ve.prototype.layoutAnimate=function(){},ve.prototype.moveToZero=function(){var G=this.graph.get("data").nodes;if(G[0].x!==void 0&&G[0].x!==null&&!Ht(G[0].x)){for(var F=[0,0],Z=G.length,ut=0;ut<Z;ut++){var Bt=G[ut];F[0]+=Bt.x,F[1]+=Bt.y}for(F[0]/=G.length,F[1]/=G.length,ut=0;ut<Z;ut++)(Bt=G[ut]).x-=F[0],Bt.y-=F[1]}},ve.prototype.initPositions=function(G,F){var Z=this.graph;if(!F)return!1;var ut=!0,Bt=.85*Z.get("width"),Jt=.85*Z.get("height"),ie=F.length,se=Math.ceil(Math.sqrt(ie)*(Bt/Jt)),Te=Bt/(se-1),Ee=Jt/(Math.ceil(ie/se)-1);isFinite(Te)&&Te||(Te=0),isFinite(Ee)&&Te||(Ee=0);for(var un=G[0]-Bt/2,xn=G[1]-Jt/2,_t=F.length,Xt=0;Xt<_t;Xt++){var Se=F[Xt];Ht(Se.x)&&(ut=!1,Se.x=Xt%se*Te+un),Ht(Se.y)&&(ut=!1,Se.y=Math.floor(Xt/se)*Ee+xn)}return ut},ve.prototype.destroy=function(){var G=this.layoutMethod;this.graph=null,G&&(G.destroy(),G.destroyed=!0),this.destroyed=!0},ve}(),ii=function(G){this.graph=G,this.destroyed=!1,this.initEvents()};(function(ve){ve.CLICK="click",ve.DBLCLICK="dblclick",ve.MOUSEDOWN="mousedown",ve.MOUDEUP="mouseup",ve.CONTEXTMENU="contextmenu",ve.MOUSEENTER="mouseenter",ve.MOUSEOUT="mouseout",ve.MOUSEOVER="mouseover",ve.MOUSEMOVE="mousemove",ve.MOUSELEAVE="mouseleave",ve.DRAGSTART="dragstart",ve.DRAGEND="dragend",ve.DRAG="drag",ve.DRAGENTER="dragenter",ve.DRAGLEAVE="dragleave",ve.DRAGOVER="dragover",ve.DRAGOUT="dragout",ve.DDROP="drop",ve.KEYUP="keyup",ve.KEYDOWN="keydown",ve.WHEEL="wheel",ve.FOCUS="focus",ve.BLUR="blur",ve.TOUCHSTART="touchstart",ve.TOUCHMOVE="touchmove",ve.TOUCHEND="touchend",ve.NODE_CONTEXTMENU="node:contextmenu",ve.NODE_CLICK="node:click",ve.NODE_DBLCLICK="node:dblclick",ve.NODE_MOUSEDOWN="node:mousedown",ve.NODE_MOUSEUP="node:mouseup",ve.NODE_MOUSEENTER="node:mouseenter",ve.NODE_MOUSELEAVE="node:mouseleave",ve.NODE_MOUSEMOVE="node:mousemove",ve.NODE_MOUSEOUT="node:mouseout",ve.NODE_MOUSEOVER="node:mouseover",ve.NODE_DROP="node:drop",ve.NODE_DRAGOVER="node:dragover",ve.NODE_DRAGENTER="node:dragenter",ve.NODE_DRAGLEAVE="node:dragleave",ve.NODE_DRAGSTART="node:dragstart",ve.NODE_DRAG="node:drag",ve.NODE_DRAGEND="node:dragend",ve.COMBO_CONTEXTMENU="combo:contextmenu",ve.COMBO_CLICK="combo:click",ve.COMBO_DBLCLICK="combo:dblclick",ve.COMBO_MOUSEDOWN="combo:mousedown",ve.COMBO_MOUSEUP="combo:mouseup",ve.COMBO_MOUSEENTER="combo:mouseenter",ve.COMBO_MOUSELEAVE="combo:mouseleave",ve.COMBO_MOUSEMOVE="combo:mousemove",ve.COMBO_MOUSEOUT="combo:mouseout",ve.COMBO_MOUSEOVER="combo:mouseover",ve.COMBO_DROP="combo:drop",ve.COMBO_DRAGOVER="combo:dragover",ve.COMBO_DRAGENTER="combo:dragenter",ve.COMBO_DRAGLEAVE="combo:dragleave",ve.COMBO_DRAGSTART="combo:dragstart",ve.COMBO_DRAG="combo:drag",ve.COMBO_DRAGEND="combo:dragend",ve.EDGE_CONTEXTMENU="edge:contextmenu",ve.EDGE_CLICK="edge:click",ve.EDGE_DBLCLICK="edge:dblclick",ve.EDGE_MOUSEDOWN="edge:mousedown",ve.EDGE_MOUSEUP="edge:mouseup",ve.EDGE_MOUSEENTER="edge:mouseenter",ve.EDGE_MOUSELEAVE="edge:mouseleave",ve.EDGE_MOUSEMOVE="edge:mousemove",ve.EDGE_MOUSEOUT="edge:mouseout",ve.EDGE_MOUSEOVER="edge:mouseover",ve.EDGE_DROP="edge:drop",ve.EDGE_DRAGOVER="edge:dragover",ve.EDGE_DRAGENTER="edge:dragenter",ve.EDGE_DRAGLEAVE="edge:dragleave",ve.CANVAS_CONTEXTMENU="canvas:contextmenu",ve.CANVAS_CLICK="canvas:click",ve.CANVAS_DBLCLICK="canvas:dblclick",ve.CANVAS_MOUSEDOWN="canvas:mousedown",ve.CANVAS_MOUSEUP="canvas:mouseup",ve.CANVAS_MOUSEENTER="canvas:mouseenter",ve.CANVAS_MOUSELEAVE="canvas:mouseleave",ve.CANVAS_MOUSEMOVE="canvas:mousemove",ve.CANVAS_MOUSEOUT="canvas:mouseout",ve.CANVAS_MOUSEOVER="canvas:mouseover",ve.CANVAS_DROP="canvas:drop",ve.CANVAS_DRAGENTER="canvas:dragenter",ve.CANVAS_DRAGLEAVE="canvas:dragleave",ve.CANVAS_DRAGSTART="canvas:dragstart",ve.CANVAS_DRAG="canvas:drag",ve.CANVAS_DRAGEND="canvas:dragend",ve.BEFORERENDER="beforerender",ve.AFTERRENDER="afterrender",ve.BEFOREADDITEM="beforeadditem",ve.AFTERADDITEM="afteradditem",ve.BEFOREREMOVEITEM="beforeremoveitem",ve.AFTERREMOVEITEM="afterremoveitem",ve.BEFOREUPDATEITEM="beforeupdateitem",ve.AFTERUPDATEITEM="afterupdateitem",ve.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",ve.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",ve.BEFOREITEMSTATECHANGE="beforeitemstatechange",ve.AFTERITEMSTATECHANGE="afteritemstatechange",ve.BEFOREITEMREFRESH="beforeitemrefresh",ve.AFTERITEMREFRESH="afteritemrefresh",ve.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",ve.AFTERITEMSTATESCLEAR="afteritemstatesclear",ve.BEFOREMODECHANGE="beforemodechange",ve.AFTERMODECHANGE="aftermodechange",ve.BEFORELAYOUT="beforelayout",ve.AFTERLAYOUT="afterlayout",ve.BEFORECREATEEDGE="beforecreateedge",ve.AFTERCREATEEDGE="aftercreateedge",ve.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",ve.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",ve.BEFOREGRAPHREFRESH="beforegraphrefresh",ve.AFTERGRAPHREFRESH="aftergraphrefresh",ve.BEFOREANIMATE="beforeanimate",ve.AFTERANIMATE="afteranimate",ve.BEFOREPAINT="beforepaint",ve.AFTERPAINT="afterpaint",ve.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",ve.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",ve.GRAPHSTATECHANGE="graphstatechange",ve.AFTERACTIVATERELATIONS="afteractivaterelations",ve.NODESELECTCHANGE="nodeselectchange",ve.TOOLTIPCHANGE="tooltipchange",ve.WHEELZOOM="wheelzoom",ve.VIEWPORTCHANGE="viewportchange",ve.DRAGNODEEND="dragnodeend",ve.STACKCHANGE="stackchange"})(Er||(Er={}));var Si=Pr.registerNode,_i=Pr.registerEdge,Xi=Pr.registerCombo,Bi=y.registerBehavior,Di=gt;Pr.registerNode,Pr.registerEdge,Pr.registerCombo,y.registerBehavior},function(a,A){a.exports=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),function(i){i.TextureCompressionBC="texture-compression-bc"}(A.ExtensionName||(A.ExtensionName={})),function(i){i.ClampToEdge="clamp-to-edge",i.Repeat="repeat",i.MirrorRepeat="mirror-repeat"}(A.AddressMode||(A.AddressMode={})),function(i){i.UniformBuffer="uniform-buffer",i.StorageBuffer="storage-buffer",i.ReadonlyStorageBuffer="readonly-storage-buffer",i.Sampler="sampler",i.ComparisonSampler="comparison-sampler",i.SampledTexture="sampled-texture",i.ReadonlyStorageTexture="readonly-storage-texture",i.WriteonlyStorageTexture="writeonly-storage-texture"}(A.BindingType||(A.BindingType={})),function(i){i.Zero="zero",i.One="one",i.SrcColor="src-color",i.OneMinusSrcColor="one-minus-src-color",i.SrcAlpha="src-alpha",i.OneMinusSrcAlpha="one-minus-src-alpha",i.DstColor="dst-color",i.OneMinusDstColor="one-minus-dst-color",i.DstAlpha="dst-alpha",i.OneMinusDstAlpha="one-minus-dst-alpha",i.SrcAlphaSaturated="src-alpha-saturated",i.BlendColor="blend-color",i.OneMinusBlendColor="one-minus-blend-color"}(A.BlendFactor||(A.BlendFactor={})),function(i){i.Add="add",i.Subtract="subtract",i.ReverseSubtract="reverse-subtract",i.Min="min",i.Max="max"}(A.BlendOperation||(A.BlendOperation={})),function(i){i.Never="never",i.Less="less",i.Equal="equal",i.LessEqual="less-equal",i.Greater="greater",i.NotEqual="not-equal",i.GreaterEqual="greater-equal",i.Always="always"}(A.CompareFunction||(A.CompareFunction={})),function(i){i.None="none",i.Front="front",i.Back="back"}(A.CullMode||(A.CullMode={})),function(i){i.Nearest="nearest",i.Linear="linear"}(A.FilterMode||(A.FilterMode={})),function(i){i.CCW="ccw",i.CW="cw"}(A.FrontFace||(A.FrontFace={})),function(i){i.Uint16="uint16",i.Uint32="uint32"}(A.IndexFormat||(A.IndexFormat={})),function(i){i.Vertex="vertex",i.Instance="instance"}(A.InputStepMode||(A.InputStepMode={})),function(i){i.Load="load"}(A.LoadOp||(A.LoadOp={})),function(i){i.PointList="point-list",i.LineList="line-list",i.LineStrip="line-strip",i.TriangleList="triangle-list",i.TriangleStrip="triangle-strip"}(A.PrimitiveTopology||(A.PrimitiveTopology={})),function(i){i.Keep="keep",i.Zero="zero",i.Replace="replace",i.Invert="invert",i.IncrementClamp="increment-clamp",i.DecrementClamp="decrement-clamp",i.IncrementWrap="increment-wrap",i.DecrementWrap="decrement-wrap"}(A.StencilOperation||(A.StencilOperation={})),function(i){i.Store="store",i.Clear="clear"}(A.StoreOp||(A.StoreOp={})),function(i){i.E1d="1d",i.E2d="2d",i.E3d="3d"}(A.TextureDimension||(A.TextureDimension={})),function(i){i.R8Unorm="r8unorm",i.R8Snorm="r8snorm",i.R8Uint="r8uint",i.R8Sint="r8sint",i.R16Uint="r16uint",i.R16Sint="r16sint",i.R16Float="r16float",i.RG8Unorm="rg8unorm",i.RG8Snorm="rg8snorm",i.RG8Uint="rg8uint",i.RG8Sint="rg8sint",i.R32Uint="r32uint",i.R32Sint="r32sint",i.R32Float="r32float",i.RG16Uint="rg16uint",i.RG16Sint="rg16sint",i.RG16Float="rg16float",i.RGBA8Unorm="rgba8unorm",i.RGBA8UnormSRGB="rgba8unorm-srgb",i.RGBA8Snorm="rgba8snorm",i.RGBA8Uint="rgba8uint",i.RGBA8Sint="rgba8sint",i.BGRA8Unorm="bgra8unorm",i.BGRA8UnormSRGB="bgra8unorm-srgb",i.RGB10A2Unorm="rgb10a2unorm",i.RG11B10Float="rg11b10float",i.RG32Uint="rg32uint",i.RG32Sint="rg32sint",i.RG32Float="rg32float",i.RGBA16Uint="rgba16uint",i.RGBA16Sint="rgba16sint",i.RGBA16Float="rgba16float",i.RGBA32Uint="rgba32uint",i.RGBA32Sint="rgba32sint",i.RGBA32Float="rgba32float",i.Depth32Float="depth32float",i.Depth24Plus="depth24plus",i.Depth24PlusStencil8="depth24plus-stencil8"}(A.TextureFormat||(A.TextureFormat={})),function(i){i.Float="float",i.Sint="sint",i.Uint="uint"}(A.TextureComponentType||(A.TextureComponentType={})),function(i){i.E1d="1d",i.E2d="2d",i.E2dArray="2d-array",i.Cube="cube",i.CubeArray="cube-array",i.E3d="3d"}(A.TextureViewDimension||(A.TextureViewDimension={})),function(i){i.Uchar2="uchar2",i.Uchar4="uchar4",i.Char2="char2",i.Char4="char4",i.Uchar2Norm="uchar2norm",i.Uchar4Norm="uchar4norm",i.Char2Norm="char2norm",i.Char4Norm="char4norm",i.Ushort2="ushort2",i.Ushort4="ushort4",i.Short2="short2",i.Short4="short4",i.Ushort2Norm="ushort2norm",i.Ushort4Norm="ushort4norm",i.Short2Norm="short2norm",i.Short4Norm="short4norm",i.Half2="half2",i.Half4="half4",i.Float="float",i.Float2="float2",i.Float3="float3",i.Float4="float4",i.Uint="uint",i.Uint2="uint2",i.Uint3="uint3",i.Uint4="uint4",i.Int="int",i.Int2="int2",i.Int3="int3",i.Int4="int4"}(A.VertexFormat||(A.VertexFormat={})),function(i){i.All="all",i.StencilOnly="stencil-only",i.DepthOnly="depth-only"}(A.TextureAspect||(A.TextureAspect={})),function(i){i.Error="error",i.Warning="warning",i.Info="info"}(A.CompilationMessageType||(A.CompilationMessageType={})),function(i){i.Occlusion="occlusion"}(A.QueryType||(A.QueryType={})),function(i){i[i.MapRead=1]="MapRead",i[i.MapWrite=2]="MapWrite",i[i.CopySrc=4]="CopySrc",i[i.CopyDst=8]="CopyDst",i[i.Index=16]="Index",i[i.Vertex=32]="Vertex",i[i.Uniform=64]="Uniform",i[i.Storage=128]="Storage",i[i.Indirect=256]="Indirect",i[i.QueryResolve=512]="QueryResolve"}(A.BufferUsage||(A.BufferUsage={})),function(i){i[i.Red=1]="Red",i[i.Green=2]="Green",i[i.Blue=4]="Blue",i[i.Alpha=8]="Alpha",i[i.All=15]="All"}(A.ColorWrite||(A.ColorWrite={})),function(i){i[i.Vertex=1]="Vertex",i[i.Fragment=2]="Fragment",i[i.Compute=4]="Compute"}(A.ShaderStage||(A.ShaderStage={})),function(i){i[i.CopySrc=1]="CopySrc",i[i.CopyDst=2]="CopyDst",i[i.Sampled=4]="Sampled",i[i.Storage=8]="Storage",i[i.OutputAttachment=16]="OutputAttachment"}(A.TextureUsage||(A.TextureUsage={})),function(i){i[i.Read=1]="Read",i[i.Write=2]="Write"}(A.MapMode||(A.MapMode={}))},function(a,A){function e(i,p){for(var m=0;m<p.length;m++){var S=p[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(i,S.key,S)}}a.exports=function(i,p,m){return p&&e(i.prototype,p),m&&e(i,m),i}},function(a,A,e){a.exports=e(442)},function(a,A,e){"use strict";e.d(A,"b",function(){return p.a}),e.d(A,"c",function(){return p.d}),e.d(A,"d",function(){return p.e}),e.d(A,"a",function(){return i});var i={};e.r(i),e.d(i,"leftTranslate",function(){return m}),e.d(i,"leftRotate",function(){return S}),e.d(i,"leftScale",function(){return l}),e.d(i,"transform",function(){return M}),e.d(i,"direction",function(){return j}),e.d(i,"angleTo",function(){return y}),e.d(i,"vertical",function(){return n});var p=e(2);function m(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(O,E),p.a.multiply(s,O,d)}function S(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(O,E),p.a.multiply(s,O,d)}function l(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(O,E),p.a.multiply(s,O,d)}function M(s,d){for(var E,O,C,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,T=d.length;x<T;x++){var N=d[x];switch(N[0]){case"t":m(v,v,[N[1],N[2]]);break;case"s":l(v,v,[N[1],N[2]]);break;case"r":S(v,v,N[1]);break;case"m":E=v,O=v,C=N[1],p.a.multiply(E,C,O)}}return v}function j(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,E){var O=p.d.angle(s,d),C=j(s,d)>=0;return E?C?2*Math.PI-O:O:C?O:2*Math.PI-O}function n(s,d,E){return E?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.d(A,"b",function(){return i}),e.d(A,"a",function(){return p}),e.d(A,"c",function(){return m});var i=1e-6,p=typeof Float32Array!="undefined"?Float32Array:Array,m=Math.random;Math.hypot||(Math.hypot=function(){for(var S=0,l=arguments.length;l--;)S+=arguments[l]*arguments[l];return Math.sqrt(S)})},function(a,A){a.exports=function(e,i,p,m){p&&Object.defineProperty(e,i,{enumerable:p.enumerable,configurable:p.configurable,writable:p.writable,value:p.initializer?p.initializer.call(m):void 0})}},function(a,A){a.exports=function(e,i,p,m,S){var l={};return Object.keys(m).forEach(function(M){l[M]=m[M]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=p.slice().reverse().reduce(function(M,j){return j(e,i,M)||M},l),S&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(S):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(e,i,l),l=null),l}},function(a,A,e){"use strict";function i(y,n,s){if(y){if(typeof y.addEventListener=="function")return y.addEventListener(n,s,!1),{remove:function(){y.removeEventListener(n,s,!1)}};if(typeof y.attachEvent=="function")return y.attachEvent("on"+n,s),{remove:function(){y.detachEvent("on"+n,s)}}}}var p,m,S,l;function M(y){p||(p=document.createElement("table"),m=document.createElement("tr"),S=/^\s*<(\w+|!)[^>]*>/,l={tr:document.createElement("tbody"),tbody:p,thead:p,tfoot:p,td:m,th:m,"*":document.createElement("div")});var n=S.test(y)&&RegExp.$1;n&&n in l||(n="*");var s=l[n];y=y.replace(/(^\s*)|(\s*$)/g,""),s.innerHTML=""+y;var d=s.childNodes[0];return s.removeChild(d),d}function j(y,n){if(y)for(var s in n)n.hasOwnProperty(s)&&(y.style[s]=n[s]);return y}e.d(A,"a",function(){return i}),e.d(A,"b",function(){return M}),e.d(A,"c",function(){return j})},function(a,A){function e(i,p,m,S,l,M,j){try{var y=i[M](j),n=y.value}catch(s){return void m(s)}y.done?p(n):Promise.resolve(n).then(S,l)}a.exports=function(i){return function(){var p=this,m=arguments;return new Promise(function(S,l){var M=i.apply(p,m);function j(n){e(M,S,l,j,y,"next",n)}function y(n){e(M,S,l,j,y,"throw",n)}j(void 0)})}}},function(a,A,e){"use strict";e.d(A,"a",function(){return i}),e.d(A,"b",function(){return p});var i={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},p={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(a,A,e){"use strict";e.d(A,"d",function(){return p}),e.d(A,"b",function(){return m}),e.d(A,"e",function(){return S}),e.d(A,"f",function(){return l}),e.d(A,"l",function(){return M}),e.d(A,"j",function(){return j});var i=e(0);function p(){return window?window.devicePixelRatio:1}function m(y,n,s,d){var E=y-s,O=n-d;return Math.sqrt(E*E+O*O)}function S(y,n,s,d,E,O){return E>=y&&E<=y+s&&O>=n&&O<=n+d}function l(y,n){return!(n.minX>y.maxX||n.maxX<y.minX||n.minY>y.maxY||n.maxY<y.minY)}function M(y,n){return y&&n?{minX:Math.min(y.minX,n.minX),minY:Math.min(y.minY,n.minY),maxX:Math.max(y.maxX,n.maxX),maxY:Math.max(y.maxY,n.maxY)}:y||n}function j(y,n){return y[0]===n[0]&&y[1]===n[1]}e.d(A,"i",function(){return i.s}),e.d(A,"k",function(){return i.x}),e.d(A,"h",function(){return i.r}),e.d(A,"g",function(){return i.m}),e.d(A,"c",function(){return i.f}),e.d(A,"o",function(){return i.G}),e.d(A,"m",function(){return i.B}),e.d(A,"n",function(){return i.D}),e.d(A,"a",function(){return i.b})},function(a,A,e){"use strict";var i=e(51);e.d(A,"PathUtil",function(){return i});var p=e(156);e.o(p,"ICanvas")&&e.d(A,"ICanvas",function(){return p.ICanvas}),e.o(p,"IGroup")&&e.d(A,"IGroup",function(){return p.IGroup}),e.o(p,"IShape")&&e.d(A,"IShape",function(){return p.IShape});var m=e(157);e.o(m,"ICanvas")&&e.d(A,"ICanvas",function(){return m.ICanvas}),e.o(m,"IGroup")&&e.d(A,"IGroup",function(){return m.IGroup}),e.o(m,"IShape")&&e.d(A,"IShape",function(){return m.IShape});var S=e(114);e.d(A,"Event",function(){return S.a}),e(115);var l=e(247);e.d(A,"AbstractCanvas",function(){return l.a});var M=e(159);e.d(A,"AbstractGroup",function(){return M.a});var j=e(160);e.d(A,"AbstractShape",function(){return j.a});var y=e(248);e.d(A,"getBBoxMethod",function(){return y.a});var n=e(68);e.d(A,"getTextHeight",function(){return n.b}),e.d(A,"assembleFont",function(){return n.a});var s=e(19);e.d(A,"isAllowCapture",function(){return s.b});var d=e(39);e.d(A,"multiplyVec2",function(){return d.c}),e.d(A,"invert",function(){return d.a});var E=e(116);e.d(A,"getOffScreenContext",function(){return E.a})},function(a,A,e){"use strict";e.d(A,"j",function(){return p}),e.d(A,"c",function(){return m}),e.d(A,"g",function(){return S}),e.d(A,"b",function(){return l});var i=e(0);function p(M,j){var y=M.indexOf(j);y!==-1&&M.splice(y,1)}e.d(A,"e",function(){return i.s}),e.d(A,"d",function(){return i.r}),e.d(A,"h",function(){return i.x}),e.d(A,"f",function(){return i.v}),e.d(A,"i",function(){return i.A}),e.d(A,"a",function(){return i.f}),e.d(A,"k",function(){return i.I});var m=typeof window!="undefined"&&window.document!==void 0;function S(M,j){if(M.isCanvas())return!0;for(var y=j.getParent(),n=!1;y;){if(y===M){n=!0;break}y=y.getParent()}return n}function l(M){return M.cfg.visible&&M.cfg.capture}},function(a,A,e){"use strict";e.d(A,"e",function(){return x}),e.d(A,"b",function(){return vt}),e.d(A,"a",function(){return Nt}),e.d(A,"c",function(){return s}),e.d(A,"d",function(){return Mt}),e.d(A,"f",function(){return i});var i={};function p($){return Math.min.apply(null,$)}function m($){return Math.max.apply(null,$)}function S($,lt,rt,z){var P=$-rt,Y=lt-z;return Math.sqrt(P*P+Y*Y)}function l($,lt){return Math.abs($-lt)<.001}function M($,lt){var rt=p($),z=p(lt);return{x:rt,y:z,width:m($)-rt,height:m(lt)-z}}function j($,lt,rt,z){return{minX:p([$,rt]),maxX:m([$,rt]),minY:p([lt,z]),maxY:m([lt,z])}}function y($){return($+2*Math.PI)%(2*Math.PI)}e.r(i),e.d(i,"distance",function(){return S}),e.d(i,"isNumberEqual",function(){return l}),e.d(i,"getBBoxByArray",function(){return M}),e.d(i,"getBBoxRange",function(){return j}),e.d(i,"piMod",function(){return y});var n=e(80),s={box:function(lt,rt,z,P){return M([lt,z],[rt,P])},length:function(lt,rt,z,P){return S(lt,rt,z,P)},pointAt:function(lt,rt,z,P,Y){return{x:(1-Y)*lt+Y*z,y:(1-Y)*rt+Y*P}},pointDistance:function(lt,rt,z,P,Y,k){var h=(z-lt)*(Y-lt)+(P-rt)*(k-rt);return h<0?S(lt,rt,Y,k):h>(z-lt)*(z-lt)+(P-rt)*(P-rt)?S(z,P,Y,k):this.pointToLine(lt,rt,z,P,Y,k)},pointToLine:function(lt,rt,z,P,Y,k){var h=[z-lt,P-rt];if(n.exactEquals(h,[0,0]))return Math.sqrt((Y-lt)*(Y-lt)+(k-rt)*(k-rt));var g=[-h[1],h[0]];n.normalize(g,g);var B=[Y-lt,k-rt];return Math.abs(n.dot(B,g))},tangentAngle:function(lt,rt,z,P){return Math.atan2(P-rt,z-lt)}};function d($,lt,rt,z,P,Y){var k,h=1/0,g=[rt,z],B=20;Y&&Y>200&&(B=Y/10);for(var V=1/B,q=V/10,it=0;it<=B;it++){var ot=it*V,At=[P.apply(null,$.concat([ot])),P.apply(null,lt.concat([ot]))];(It=S(g[0],g[1],At[0],At[1]))<h&&(k=ot,h=It)}if(k===0)return{x:$[0],y:lt[0]};if(k===1){var gt=$.length;return{x:$[gt-1],y:lt[gt-1]}}for(h=1/0,it=0;it<32&&!(q<1e-4);it++){var mt=k-q,Ot=k+q,It=(At=[P.apply(null,$.concat([mt])),P.apply(null,lt.concat([mt]))],S(g[0],g[1],At[0],At[1]));if(mt>=0&&It<h)k=mt,h=It;else{var Dt=[P.apply(null,$.concat([Ot])),P.apply(null,lt.concat([Ot]))],Ut=S(g[0],g[1],Dt[0],Dt[1]);Ot<=1&&Ut<h?(k=Ot,h=Ut):q*=.5}}return{x:P.apply(null,$.concat([k])),y:P.apply(null,lt.concat([k]))}}function E($,lt,rt,z){var P=1-z;return P*P*$+2*z*P*lt+z*z*rt}function O($,lt,rt){var z=$+rt-2*lt;if(l(z,0))return[.5];var P=($-lt)/z;return P<=1&&P>=0?[P]:[]}function C($,lt,rt,z){return 2*(1-z)*(lt-$)+2*z*(rt-lt)}function v($,lt,rt,z,P,Y,k){var h=E($,rt,P,k),g=E(lt,z,Y,k),B=s.pointAt($,lt,rt,z,k),V=s.pointAt(rt,z,P,Y,k);return[[$,lt,B.x,B.y,h,g],[h,g,V.x,V.y,P,Y]]}var x={box:function(lt,rt,z,P,Y,k){var h=O(lt,z,Y)[0],g=O(rt,P,k)[0],B=[lt,Y],V=[rt,k];return h!==void 0&&B.push(E(lt,z,Y,h)),g!==void 0&&V.push(E(rt,P,k,g)),M(B,V)},length:function(lt,rt,z,P,Y,k){return function h(g,B,V,q,it,ot,At){if(At===0)return(S(g,B,V,q)+S(V,q,it,ot)+S(g,B,it,ot))/2;var gt=v(g,B,V,q,it,ot,.5),mt=gt[0],Ot=gt[1];return mt.push(At-1),Ot.push(At-1),h.apply(null,mt)+h.apply(null,Ot)}(lt,rt,z,P,Y,k,3)},nearestPoint:function(lt,rt,z,P,Y,k,h,g){return d([lt,z,Y],[rt,P,k],h,g,E)},pointDistance:function(lt,rt,z,P,Y,k,h,g){var B=this.nearestPoint(lt,rt,z,P,Y,k,h,g);return S(B.x,B.y,h,g)},interpolationAt:E,pointAt:function(lt,rt,z,P,Y,k,h){return{x:E(lt,z,Y,h),y:E(rt,P,k,h)}},divide:function(lt,rt,z,P,Y,k,h){return v(lt,rt,z,P,Y,k,h)},tangentAngle:function(lt,rt,z,P,Y,k,h){var g=C(lt,z,Y,h),B=C(rt,P,k,h);return y(Math.atan2(B,g))}};function T($,lt,rt,z,P){var Y=1-P;return Y*Y*Y*$+3*lt*P*Y*Y+3*rt*P*P*Y+z*P*P*P}function N($,lt,rt,z,P){var Y=1-P;return 3*(Y*Y*(lt-$)+2*Y*P*(rt-lt)+P*P*(z-rt))}function X($,lt,rt,z){var P,Y,k,h=-3*$+9*lt-9*rt+3*z,g=6*$-12*lt+6*rt,B=3*lt-3*$,V=[];if(l(h,0))l(g,0)||(P=-B/g)>=0&&P<=1&&V.push(P);else{var q=g*g-4*h*B;l(q,0)?V.push(-g/(2*h)):q>0&&(Y=(-g-(k=Math.sqrt(q)))/(2*h),(P=(-g+k)/(2*h))>=0&&P<=1&&V.push(P),Y>=0&&Y<=1&&V.push(Y))}return V}function tt($,lt,rt,z,P,Y,k,h,g){var B=T($,rt,P,k,g),V=T(lt,z,Y,h,g),q=s.pointAt($,lt,rt,z,g),it=s.pointAt(rt,z,P,Y,g),ot=s.pointAt(P,Y,k,h,g),At=s.pointAt(q.x,q.y,it.x,it.y,g),gt=s.pointAt(it.x,it.y,ot.x,ot.y,g);return[[$,lt,q.x,q.y,At.x,At.y,B,V],[B,V,gt.x,gt.y,ot.x,ot.y,k,h]]}function nt($,lt,rt,z,P,Y,k,h,g){if(g===0)return function(it,ot){for(var At=0,gt=it.length,mt=0;mt<gt;mt++)At+=S(it[mt],ot[mt],it[(mt+1)%gt],ot[(mt+1)%gt]);return At/2}([$,rt,P,k],[lt,z,Y,h]);var B=tt($,lt,rt,z,P,Y,k,h,.5),V=B[0],q=B[1];return V.push(g-1),q.push(g-1),nt.apply(null,V)+nt.apply(null,q)}var vt={extrema:X,box:function(lt,rt,z,P,Y,k,h,g){for(var B=[lt,h],V=[rt,g],q=X(lt,z,Y,h),it=X(rt,P,k,g),ot=0;ot<q.length;ot++)B.push(T(lt,z,Y,h,q[ot]));for(ot=0;ot<it.length;ot++)V.push(T(rt,P,k,g,it[ot]));return M(B,V)},length:function(lt,rt,z,P,Y,k,h,g){return nt(lt,rt,z,P,Y,k,h,g,3)},nearestPoint:function(lt,rt,z,P,Y,k,h,g,B,V,q){return d([lt,z,Y,h],[rt,P,k,g],B,V,T,q)},pointDistance:function(lt,rt,z,P,Y,k,h,g,B,V,q){var it=this.nearestPoint(lt,rt,z,P,Y,k,h,g,B,V,q);return S(it.x,it.y,B,V)},interpolationAt:T,pointAt:function(lt,rt,z,P,Y,k,h,g,B){return{x:T(lt,z,Y,h,B),y:T(rt,P,k,g,B)}},divide:function(lt,rt,z,P,Y,k,h,g,B){return tt(lt,rt,z,P,Y,k,h,g,B)},tangentAngle:function(lt,rt,z,P,Y,k,h,g,B){var V=N(lt,z,Y,h,B),q=N(rt,P,k,g,B);return y(Math.atan2(q,V))}};function ft($,lt){var rt=Math.abs($);return lt>0?rt:-1*rt}var bt=function(lt,rt,z,P,Y,k){var h=z,g=P;if(h===0||g===0)return{x:lt,y:rt};for(var B,V,q=Y-lt,it=k-rt,ot=Math.abs(q),At=Math.abs(it),gt=h*h,mt=g*g,Ot=Math.PI/4,It=0;It<4;It++){B=h*Math.cos(Ot),V=g*Math.sin(Ot);var Dt=(gt-mt)*Math.pow(Math.cos(Ot),3)/h,Ut=(mt-gt)*Math.pow(Math.sin(Ot),3)/g,Ct=B-Dt,Vt=V-Ut,Ht=ot-Dt,re=At-Ut,pe=Math.hypot(Vt,Ct),ye=Math.hypot(re,Ht);Ot+=pe*Math.asin((Ct*re-Vt*Ht)/(pe*ye))/Math.sqrt(gt+mt-B*B-V*V),Ot=Math.min(Math.PI/2,Math.max(0,Ot))}return{x:lt+ft(B,q),y:rt+ft(V,it)}};function St($,lt,rt,z,P,Y){return rt*Math.cos(P)*Math.cos(Y)-z*Math.sin(P)*Math.sin(Y)+$}function pt($,lt,rt,z,P,Y){return rt*Math.sin(P)*Math.cos(Y)+z*Math.cos(P)*Math.sin(Y)+lt}function ct($,lt,rt){return{x:$*Math.cos(rt),y:lt*Math.sin(rt)}}function zt($,lt,rt){var z=Math.cos(rt),P=Math.sin(rt);return[$*z-lt*P,$*P+lt*z]}var Nt={box:function(lt,rt,z,P,Y,k,h){for(var g=function(Ct,Vt,Ht){return Math.atan(-Vt/Ct*Math.tan(Ht))}(z,P,Y),B=1/0,V=-1/0,q=[k,h],it=2*-Math.PI;it<=2*Math.PI;it+=Math.PI){var ot=g+it;k<h?k<ot&&ot<h&&q.push(ot):h<ot&&ot<k&&q.push(ot)}for(it=0;it<q.length;it++){var At=St(lt,0,z,P,Y,q[it]);At<B&&(B=At),At>V&&(V=At)}var gt=function(Ct,Vt,Ht){return Math.atan(Vt/(Ct*Math.tan(Ht)))}(z,P,Y),mt=1/0,Ot=-1/0,It=[k,h];for(it=2*-Math.PI;it<=2*Math.PI;it+=Math.PI){var Dt=gt+it;k<h?k<Dt&&Dt<h&&It.push(Dt):h<Dt&&Dt<k&&It.push(Dt)}for(it=0;it<It.length;it++){var Ut=pt(0,rt,z,P,Y,It[it]);Ut<mt&&(mt=Ut),Ut>Ot&&(Ot=Ut)}return{x:B,y:mt,width:V-B,height:Ot-mt}},length:function(lt,rt,z,P,Y,k,h){},nearestPoint:function(lt,rt,z,P,Y,k,h,g,B){var V=zt(g-lt,B-rt,-Y),q=V[0],it=V[1],ot=bt(0,0,z,P,q,it),At=function(mt,Ot,It,Dt){return(Math.atan2(Dt*mt,It*Ot)+2*Math.PI)%(2*Math.PI)}(z,P,ot.x,ot.y);At<k?ot=ct(z,P,k):At>h&&(ot=ct(z,P,h));var gt=zt(ot.x,ot.y,Y);return{x:gt[0]+lt,y:gt[1]+rt}},pointDistance:function(lt,rt,z,P,Y,k,h,g,B){var V=this.nearestPoint(lt,rt,z,P,g,B);return S(V.x,V.y,g,B)},pointAt:function(lt,rt,z,P,Y,k,h,g){var B=(h-k)*g+k;return{x:St(lt,0,z,P,Y,B),y:pt(0,rt,z,P,Y,B)}},tangentAngle:function(lt,rt,z,P,Y,k,h,g){var B=(h-k)*g+k,V=function(it,ot,At,gt,mt,Ot,It,Dt){return-1*At*Math.cos(mt)*Math.sin(Dt)-gt*Math.sin(mt)*Math.cos(Dt)}(0,0,z,P,Y,0,0,B),q=function(it,ot,At,gt,mt,Ot,It,Dt){return-1*At*Math.sin(mt)*Math.sin(Dt)+gt*Math.cos(mt)*Math.cos(Dt)}(0,0,z,P,Y,0,0,B);return y(Math.atan2(q,V))}};function wt($){for(var lt=0,rt=[],z=0;z<$.length-1;z++){var P=$[z],Y=$[z+1],k=S(P[0],P[1],Y[0],Y[1]),h={from:P,to:Y,length:k};rt.push(h),lt+=k}return{segments:rt,totalLength:lt}}function H($){if($.length<2)return 0;for(var lt=0,rt=0;rt<$.length-1;rt++){var z=$[rt],P=$[rt+1];lt+=S(z[0],z[1],P[0],P[1])}return lt}function ht($,lt){if(lt>1||lt<0||$.length<2)return null;var rt=wt($),z=rt.segments,P=rt.totalLength;if(P===0)return{x:$[0][0],y:$[0][1]};for(var Y=0,k=null,h=0;h<z.length;h++){var g=z[h],B=g.from,V=g.to,q=g.length/P;if(lt>=Y&&lt<=Y+q){var it=(lt-Y)/q;k=s.pointAt(B[0],B[1],V[0],V[1],it);break}Y+=q}return k}function dt($,lt){if(lt>1||lt<0||$.length<2)return 0;for(var rt=wt($),z=rt.segments,P=rt.totalLength,Y=0,k=0,h=0;h<z.length;h++){var g=z[h],B=g.from,V=g.to,q=g.length/P;if(lt>=Y&&lt<=Y+q){k=Math.atan2(V[1]-B[1],V[0]-B[0]);break}Y+=q}return k}function yt($,lt,rt){for(var z=1/0,P=0;P<$.length-1;P++){var Y=$[P],k=$[P+1],h=s.pointDistance(Y[0],Y[1],k[0],k[1],lt,rt);h<z&&(z=h)}return z}var Mt={box:function(lt){for(var rt=[],z=[],P=0;P<lt.length;P++){var Y=lt[P];rt.push(Y[0]),z.push(Y[1])}return M(rt,z)},length:function(lt){return H(lt)},pointAt:function(lt,rt){return ht(lt,rt)},pointDistance:function(lt,rt,z){return yt(lt,rt,z)},tangentAngle:function(lt,rt){return dt(lt,rt)}}},function(a,A){function e(i){return a.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},e(i)}a.exports=e},function(a,A,e){"use strict";e.d(A,"b",function(){return m}),e.d(A,"a",function(){return S}),e.d(A,"d",function(){return l}),e.d(A,"c",function(){return M});var i=e(0),p=e(16);function m(j){return document.createElementNS("http://www.w3.org/2000/svg",j)}function S(j){var y=p.a[j.type],n=j.getParent();if(!y)throw new Error("the type "+j.type+" is not supported by svg");var s=m(y);if(j.get("id")&&(s.id=j.get("id")),j.set("el",s),j.set("attrs",{}),n){var d=n.get("el");d||(d=n.createDom(),n.set("el",d)),d.appendChild(s)}return s}function l(j,y){var n=j.get("el"),s=Object(i.F)(n.children).sort(y),d=document.createDocumentFragment();s.forEach(function(E){d.appendChild(E)}),n.appendChild(d)}function M(j,y){var n=j.parentNode,s=Array.from(n.childNodes).filter(function(C){return C.nodeType===1&&C.nodeName.toLowerCase()!=="defs"}),d=s[y],E=s.indexOf(j);if(d){if(E>y)n.insertBefore(j,d);else if(E<y){var O=s[y+1];O?n.insertBefore(j,O):n.appendChild(j)}}else n.appendChild(j)}},function(a,A,e){var i=e(474),p=e(475),m=e(218),S=e(476);a.exports=function(l){return i(l)||p(l)||m(l)||S()}},function(a,A,e){var i;try{i={cloneDeep:e(383),constant:e(134),defaults:e(384),each:e(181),filter:e(184),find:e(385),flatten:e(212),forEach:e(182),forIn:e(390),has:e(195),isUndefined:e(196),last:e(391),map:e(197),mapValues:e(392),max:e(393),merge:e(395),min:e(400),minBy:e(401),now:e(402),pick:e(403),range:e(408),reduce:e(199),sortBy:e(411),uniqueId:e(416),values:e(205),zipObject:e(417)}}catch(p){}i||(i=window._),a.exports=i},function(a,A){a.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(a,A){var e=Array.isArray;a.exports=e},function(a,A,e){var i=e(472);a.exports=function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&i(p,m)}},function(a,A,e){var i=e(90),p=e(25);a.exports=function(m,S){return!S||i(S)!=="object"&&typeof S!="function"?p(m):S}},function(a,A,e){"use strict";e.d(A,"a",function(){return j}),e.d(A,"d",function(){return y}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return s}),e.d(A,"e",function(){return O}),e.d(A,"h",function(){return C}),e.d(A,"f",function(){return v}),e.d(A,"g",function(){return x});var i=e(0),p=e(120),m=e(89),S=e(17),l=e(34),M={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function j(T,N){var X=N.attr();for(var tt in X){var nt=X[tt],vt=M[tt]?M[tt]:tt;vt==="matrix"&&nt?T.transform(nt[0],nt[1],nt[3],nt[4],nt[6],nt[7]):vt==="lineDash"&&T.setLineDash?Object(i.m)(nt)&&T.setLineDash(nt):(vt==="strokeStyle"||vt==="fillStyle"?nt=Object(p.b)(T,N,nt):vt==="globalAlpha"&&(nt*=T.globalAlpha),T[vt]=nt)}}function y(T,N,X){for(var tt=0;tt<N.length;tt++){var nt=N[tt];nt.cfg.visible?nt.draw(T,X):nt.skipDraw()}}function n(T,N,X){var tt=T.get("refreshElements");Object(i.f)(tt,function(nt){if(nt!==T)for(var vt=nt.cfg.parent;vt&&vt!==T&&!vt.cfg.refresh;)vt.cfg.refresh=!0,vt=vt.cfg.parent}),tt[0]===T?d(N,X):function nt(vt,ft){for(var bt=0;bt<vt.length;bt++){var St=vt[bt];if(St.cfg.visible)if(St.cfg.hasChanged)St.cfg.refresh=!0,St.isGroup()&&d(St.cfg.children,ft);else if(St.cfg.refresh)St.isGroup()&&nt(St.cfg.children,ft);else{var pt=E(St,ft);St.cfg.refresh=pt,pt&&St.isGroup()&&nt(St.cfg.children,ft)}}}(N,X)}function s(T){for(var N=0;N<T.length;N++){var X=T[N];X.cfg.hasChanged=!1,X.isGroup()&&!X.destroyed&&s(X.cfg.children)}}function d(T,N){for(var X=0;X<T.length;X++){var tt=T[X];tt.cfg.refresh=!0,tt.isGroup()&&d(tt.get("children"),N)}}function E(T,N){var X=T.cfg.cacheCanvasBBox;return T.cfg.isInView&&X&&Object(S.f)(X,N)}function O(T,N,X,tt){var nt=X.path,vt=X.startArrow,ft=X.endArrow;if(nt){var bt=[0,0],St=[0,0],pt={dx:0,dy:0};N.beginPath();for(var ct=0;ct<nt.length;ct++){var zt=nt[ct],Nt=zt[0];if(ct===0&&vt&&vt.d){var wt=T.getStartTangent();pt=l.c(wt[0][0],wt[0][1],wt[1][0],wt[1][1],vt.d)}else ct===nt.length-2&&nt[ct+1][0]==="Z"&&ft&&ft.d?nt[ct+1][0]==="Z"&&(wt=T.getEndTangent(),pt=l.c(wt[0][0],wt[0][1],wt[1][0],wt[1][1],ft.d)):ct===nt.length-1&&ft&&ft.d&&nt[0]!=="Z"&&(wt=T.getEndTangent(),pt=l.c(wt[0][0],wt[0][1],wt[1][0],wt[1][1],ft.d));var H=pt.dx,ht=pt.dy;switch(Nt){case"M":N.moveTo(zt[1]-H,zt[2]-ht),St=[zt[1],zt[2]];break;case"L":N.lineTo(zt[1]-H,zt[2]-ht);break;case"Q":N.quadraticCurveTo(zt[1],zt[2],zt[3]-H,zt[4]-ht);break;case"C":N.bezierCurveTo(zt[1],zt[2],zt[3],zt[4],zt[5]-H,zt[6]-ht);break;case"A":var dt=void 0;tt?(dt=tt[ct])||(dt=Object(m.a)(bt,zt),tt[ct]=dt):dt=Object(m.a)(bt,zt);var yt=dt.cx,Mt=dt.cy,$=dt.rx,lt=dt.ry,rt=dt.startAngle,z=dt.endAngle,P=dt.xRotation,Y=dt.sweepFlag;if(N.ellipse)N.ellipse(yt,Mt,$,lt,P,rt,z,1-Y);else{var k=$>lt?$:lt,h=$>lt?1:$/lt,g=$>lt?lt/$:1;N.translate(yt,Mt),N.rotate(P),N.scale(h,g),N.arc(0,0,k,rt,z,1-Y),N.scale(1/h,1/g),N.rotate(-P),N.translate(-yt,-Mt)}break;case"Z":N.closePath()}if(Nt==="Z")bt=St;else{var B=zt.length;bt=[zt[B-2],zt[B-1]]}}}}function C(T,N){var X=T.get("canvas");X&&(N==="remove"&&(T._cacheCanvasBBox=T.get("cacheCanvasBBox")),T.get("hasChanged")||(T.set("hasChanged",!0),T.cfg.parent&&T.cfg.parent.get("hasChanged")||(X.refreshElement(T,N,X),X.get("autoDraw")&&X.draw())))}function v(T){if(!T.length)return null;var N=[],X=[],tt=[],nt=[];return Object(i.f)(T,function(vt){var ft=function(bt){var St;if(bt.destroyed)St=bt._cacheCanvasBBox;else{var pt=bt.get("cacheCanvasBBox"),ct=pt&&!(!pt.width||!pt.height),zt=bt.getCanvasBBox(),Nt=zt&&!(!zt.width||!zt.height);ct&&Nt?St=Object(S.l)(pt,zt):ct?St=pt:Nt&&(St=zt)}return St}(vt);ft&&(N.push(ft.minX),X.push(ft.minY),tt.push(ft.maxX),nt.push(ft.maxY))}),{minX:Math.min.apply(null,N),minY:Math.min.apply(null,X),maxX:Math.max.apply(null,tt),maxY:Math.max.apply(null,nt)}}function x(T,N){return T&&N&&Object(S.f)(T,N)?{minX:Math.max(T.minX,N.minX),minY:Math.max(T.minY,N.minY),maxX:Math.min(T.maxX,N.maxX),maxY:Math.min(T.maxY,N.maxY)}:null}},function(a,A){a.exports=function(e,i){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(a,A,e){"use strict";e.d(A,"a",function(){return l}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return E}),e.d(A,"d",function(){return X});var i=e(0),p=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,m=/[^\s\,]+/gi,S=function(nt){var vt=nt||[];return Object(i.m)(vt)?vt:Object(i.x)(vt)?(vt=vt.match(p),Object(i.f)(vt,function(ft,bt){if((ft=ft.match(m))[0].length>1){var St=ft[0].charAt(0);ft.splice(1,0,ft[0].substr(1)),ft[0]=St}Object(i.f)(ft,function(pt,ct){isNaN(pt)||(ft[ct]=+pt)}),vt[bt]=ft}),vt):void 0};function l(tt,nt){for(var vt=[],ft=0,bt=tt.length;bt-2*!nt>ft;ft+=2){var St=[{x:+tt[ft-2],y:+tt[ft-1]},{x:+tt[ft],y:+tt[ft+1]},{x:+tt[ft+2],y:+tt[ft+3]},{x:+tt[ft+4],y:+tt[ft+5]}];nt?ft?bt-4===ft?St[3]={x:+tt[0],y:+tt[1]}:bt-2===ft&&(St[2]={x:+tt[0],y:+tt[1]},St[3]={x:+tt[2],y:+tt[3]}):St[0]={x:+tt[bt-2],y:+tt[bt-1]}:bt-4===ft?St[3]=St[2]:ft||(St[0]={x:+tt[ft],y:+tt[ft+1]}),vt.push(["C",(-St[0].x+6*St[1].x+St[2].x)/6,(-St[0].y+6*St[1].y+St[2].y)/6,(St[1].x+6*St[2].x-St[3].x)/6,(St[1].y+6*St[2].y-St[3].y)/6,St[2].x,St[2].y])}return vt}var M=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,j=new RegExp("([a-z])["+M+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+M+"]*,?["+M+"]*)+)","ig"),y=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+M+"]*,?["+M+"]*","ig");function n(tt){if(!tt)return null;if(Object(i.m)(tt))return tt;var nt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},vt=[];return String(tt).replace(j,function(ft,bt,St){var pt=[],ct=bt.toLowerCase();if(St.replace(y,function(zt,Nt){Nt&&pt.push(+Nt)}),ct==="m"&&pt.length>2&&(vt.push([bt].concat(pt.splice(0,2))),ct="l",bt=bt==="m"?"l":"L"),ct==="o"&&pt.length===1&&vt.push([bt,pt[0]]),ct==="r")vt.push([bt].concat(pt));else for(;pt.length>=nt[ct]&&(vt.push([bt].concat(pt.splice(0,nt[ct]))),nt[ct]););return""}),vt}var s=/[a-z]/;function d(tt,nt){return[nt[0]+(nt[0]-tt[0]),nt[1]+(nt[1]-tt[1])]}function E(tt){var nt=n(tt);if(!nt||!nt.length)return[["M",0,0]];for(var vt=!1,ft=0;ft<nt.length;ft++){var bt=nt[ft][0];if(s.test(bt)||["V","H","T","S"].indexOf(bt)>=0){vt=!0;break}}if(!vt)return nt;var St=[],pt=0,ct=0,zt=0,Nt=0,wt=0,H=nt[0];H[0]!=="M"&&H[0]!=="m"||(zt=pt=+H[1],Nt=ct=+H[2],wt++,St[0]=["M",pt,ct]),ft=wt;for(var ht=nt.length;ft<ht;ft++){var dt=nt[ft],yt=St[ft-1],Mt=[],$=(bt=dt[0]).toUpperCase();if(bt!==$)switch(Mt[0]=$,$){case"A":Mt[1]=dt[1],Mt[2]=dt[2],Mt[3]=dt[3],Mt[4]=dt[4],Mt[5]=dt[5],Mt[6]=+dt[6]+pt,Mt[7]=+dt[7]+ct;break;case"V":Mt[1]=+dt[1]+ct;break;case"H":Mt[1]=+dt[1]+pt;break;case"M":zt=+dt[1]+pt,Nt=+dt[2]+ct;break;default:for(var lt=1,rt=dt.length;lt<rt;lt++)Mt[lt]=+dt[lt]+(lt%2?pt:ct)}else Mt=nt[ft];switch($){case"Z":pt=+zt,ct=+Nt;break;case"H":Mt=["L",pt=Mt[1],ct];break;case"V":Mt=["L",pt,ct=Mt[1]];break;case"T":pt=Mt[1],ct=Mt[2];var z=d([yt[1],yt[2]],[yt[3],yt[4]]);Mt=["Q",z[0],z[1],pt,ct];break;case"S":pt=Mt[Mt.length-2],ct=Mt[Mt.length-1];var P=yt.length,Y=d([yt[P-4],yt[P-3]],[yt[P-2],yt[P-1]]);Mt=["C",Y[0],Y[1],Mt[1],Mt[2],pt,ct];break;case"M":zt=Mt[Mt.length-2],Nt=Mt[Mt.length-1];break;default:pt=Mt[Mt.length-2],ct=Mt[Mt.length-1]}St.push(Mt)}return St}function O(tt){return Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1])}function C(tt,nt){return O(tt)*O(nt)?(tt[0]*nt[0]+tt[1]*nt[1])/(O(tt)*O(nt)):1}function v(tt,nt){return(tt[0]*nt[1]<tt[1]*nt[0]?-1:1)*Math.acos(C(tt,nt))}function x(tt,nt){return tt[0]===nt[0]&&tt[1]===nt[1]}function T(tt,nt){var vt=nt[1],ft=nt[2],bt=Object(i.B)(Object(i.G)(nt[3]),2*Math.PI),St=nt[4],pt=nt[5],ct=tt[0],zt=tt[1],Nt=nt[6],wt=nt[7],H=Math.cos(bt)*(ct-Nt)/2+Math.sin(bt)*(zt-wt)/2,ht=-1*Math.sin(bt)*(ct-Nt)/2+Math.cos(bt)*(zt-wt)/2,dt=H*H/(vt*vt)+ht*ht/(ft*ft);dt>1&&(vt*=Math.sqrt(dt),ft*=Math.sqrt(dt));var yt=vt*vt*(ht*ht)+ft*ft*(H*H),Mt=yt?Math.sqrt((vt*vt*(ft*ft)-yt)/yt):1;St===pt&&(Mt*=-1),isNaN(Mt)&&(Mt=0);var $=ft?Mt*vt*ht/ft:0,lt=vt?Mt*-ft*H/vt:0,rt=(ct+Nt)/2+Math.cos(bt)*$-Math.sin(bt)*lt,z=(zt+wt)/2+Math.sin(bt)*$+Math.cos(bt)*lt,P=[(H-$)/vt,(ht-lt)/ft],Y=[(-1*H-$)/vt,(-1*ht-lt)/ft],k=v([1,0],P),h=v(P,Y);return C(P,Y)<=-1&&(h=Math.PI),C(P,Y)>=1&&(h=0),pt===0&&h>0&&(h-=2*Math.PI),pt===1&&h<0&&(h+=2*Math.PI),{cx:rt,cy:z,rx:x(tt,[Nt,wt])?0:vt,ry:x(tt,[Nt,wt])?0:ft,startAngle:k,endAngle:k+h,xRotation:bt,arcFlag:St,sweepFlag:pt}}function N(tt,nt){return[nt[0]+(nt[0]-tt[0]),nt[1]+(nt[1]-tt[1])]}function X(tt){for(var nt=[],vt=null,ft=null,bt=null,St=0,pt=(tt=S(tt)).length,ct=0;ct<pt;ct++){var zt=tt[ct];ft=tt[ct+1];var Nt=zt[0],wt={command:Nt,prePoint:vt,params:zt,startTangent:null,endTangent:null};switch(Nt){case"M":bt=[zt[1],zt[2]],St=ct;break;case"A":var H=T(vt,zt);wt.arcParams=H}if(Nt==="Z")vt=bt,ft=tt[St+1];else{var ht=zt.length;vt=[zt[ht-2],zt[ht-1]]}ft&&ft[0]==="Z"&&(ft=tt[St],nt[St]&&(nt[St].prePoint=vt)),wt.currentPoint=vt,nt[St]&&x(vt,nt[St].currentPoint)&&(nt[St].prePoint=wt.prePoint);var dt=ft?[ft[ft.length-2],ft[ft.length-1]]:null;wt.nextPoint=dt;var yt=wt.prePoint;if(["L","H","V"].includes(Nt))wt.startTangent=[yt[0]-vt[0],yt[1]-vt[1]],wt.endTangent=[vt[0]-yt[0],vt[1]-yt[1]];else if(Nt==="Q"){var Mt=[zt[1],zt[2]];wt.startTangent=[yt[0]-Mt[0],yt[1]-Mt[1]],wt.endTangent=[vt[0]-Mt[0],vt[1]-Mt[1]]}else if(Nt==="T")Mt=N((rt=nt[ct-1]).currentPoint,yt),rt.command==="Q"?(wt.command="Q",wt.startTangent=[yt[0]-Mt[0],yt[1]-Mt[1]],wt.endTangent=[vt[0]-Mt[0],vt[1]-Mt[1]]):(wt.command="TL",wt.startTangent=[yt[0]-vt[0],yt[1]-vt[1]],wt.endTangent=[vt[0]-yt[0],vt[1]-yt[1]]);else if(Nt==="C"){var $=[zt[1],zt[2]],lt=[zt[3],zt[4]];wt.startTangent=[yt[0]-$[0],yt[1]-$[1]],wt.endTangent=[vt[0]-lt[0],vt[1]-lt[1]]}else if(Nt==="S"){var rt;$=N((rt=nt[ct-1]).currentPoint,yt),lt=[zt[1],zt[2]],rt.command==="C"?(wt.command="C",wt.startTangent=[yt[0]-$[0],yt[1]-$[1]],wt.endTangent=[vt[0]-lt[0],vt[1]-lt[1]]):(wt.command="SQ",wt.startTangent=[yt[0]-lt[0],yt[1]-lt[1]],wt.endTangent=[vt[0]-lt[0],vt[1]-lt[1]])}else if(Nt==="A"){var z=.001,P=wt.arcParams||{},Y=P.cx,k=Y===void 0?0:Y,h=P.cy,g=h===void 0?0:h,B=P.rx,V=B===void 0?0:B,q=P.ry,it=q===void 0?0:q,ot=P.sweepFlag,At=ot===void 0?0:ot,gt=P.startAngle,mt=gt===void 0?0:gt,Ot=P.endAngle,It=Ot===void 0?0:Ot;At===0&&(z*=-1);var Dt=V*Math.cos(mt-z)+k,Ut=it*Math.sin(mt-z)+g;wt.startTangent=[Dt-bt[0],Ut-bt[1]];var Ct=V*Math.cos(mt+It+z)+k,Vt=it*Math.sin(mt+It-z)+g;wt.endTangent=[yt[0]-Ct,yt[1]-Vt]}nt.push(wt)}return nt}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.POST_CONSTRUCT=A.DESIGN_PARAM_TYPES=A.PARAM_TYPES=A.TAGGED_PROP=A.TAGGED=A.MULTI_INJECT_TAG=A.INJECT_TAG=A.OPTIONAL_TAG=A.UNMANAGED_TAG=A.NAME_TAG=A.NAMED_TAG=void 0,A.NAMED_TAG="named",A.NAME_TAG="name",A.UNMANAGED_TAG="unmanaged",A.OPTIONAL_TAG="optional",A.INJECT_TAG="inject",A.MULTI_INJECT_TAG="multi_inject",A.TAGGED="inversify:tagged",A.TAGGED_PROP="inversify:tagged_props",A.PARAM_TYPES="inversify:paramtypes",A.DESIGN_PARAM_TYPES="design:paramtypes",A.POST_CONSTRUCT="post_construct"},function(a,A,e){var i,p,m;function S(l){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}(function(l,M){S(A)=="object"&&a!==void 0?M(A):(p=[A],(m=typeof(i=M)=="function"?i.apply(A,p):i)===void 0||(a.exports=m))})(0,function(l){"use strict";var M=function(ht,dt){var yt=ht.nodes,Mt=ht.edges,$=[],lt={};if(!yt)throw Error("invalid nodes data!");return yt&&yt.forEach(function(rt,z){lt[rt.id]=z,$.push([])}),Mt&&Mt.forEach(function(rt){var z=lt[rt.source],P=lt[rt.target];$[z][P]=1,dt||($[P][z]=1)}),$};function j(H,ht){if(!(H instanceof ht))throw new TypeError("Cannot call a class as a function")}function y(H,ht){for(var dt=0;ht.length>dt;dt++){var yt=ht[dt];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(H,yt.key,yt)}}function n(H,ht,dt){return ht&&y(H.prototype,ht),dt&&y(H,dt),H}function s(H){return function(ht){if(Array.isArray(ht))return E(ht)}(H)||function(ht){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(ht))return Array.from(ht)}(H)||d(H)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(H,ht){if(H){if(typeof H=="string")return E(H,ht);var dt=Object.prototype.toString.call(H).slice(8,-1);return dt==="Object"&&H.constructor&&(dt=H.constructor.name),dt==="Map"||dt==="Set"?Array.from(H):dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt)?E(H,ht):void 0}}function E(H,ht){(ht==null||ht>H.length)&&(ht=H.length);for(var dt=0,yt=Array(ht);ht>dt;dt++)yt[dt]=H[dt];return yt}function O(H,ht){var dt;if(typeof Symbol=="undefined"||H[Symbol.iterator]==null){if(Array.isArray(H)||(dt=d(H))||ht&&H&&typeof H.length=="number"){dt&&(H=dt);var yt=0,Mt=function(){};return{s:Mt,n:function(){return H.length>yt?{done:!1,value:H[yt++]}:{done:!0}},e:function(P){throw P},f:Mt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $,lt=!0,rt=!1;return{s:function(){dt=H[Symbol.iterator]()},n:function(){var P=dt.next();return lt=P.done,P},e:function(P){rt=!0,$=P},f:function(){try{lt||dt.return==null||dt.return()}finally{if(rt)throw $}}}}var C=function(ht,dt){return ht===dt},v=function(){function H(ht){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j(this,H),this.value=ht,this.next=dt}return n(H,[{key:"toString",value:function(dt){return dt?dt(this.value):"".concat(this.value)}}]),H}(),x=function(){function H(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;j(this,H),this.head=null,this.tail=null,this.compare=ht}return n(H,[{key:"prepend",value:function(dt){var yt=new v(dt,this.head);return this.head=yt,this.tail||(this.tail=yt),this}},{key:"append",value:function(dt){var yt=new v(dt);return this.head?(this.tail.next=yt,this.tail=yt,this):(this.head=yt,this.tail=yt,this)}},{key:"delete",value:function(dt){if(!this.head)return null;for(var yt=null;this.head&&this.compare(this.head.value,dt);)yt=this.head,this.head=this.head.next;var Mt=this.head;if(Mt!==null)for(;Mt.next;)this.compare(Mt.next.value,dt)?(yt=Mt.next,Mt.next=Mt.next.next):Mt=Mt.next;return this.compare(this.tail.value,dt)&&(this.tail=Mt),yt}},{key:"find",value:function(dt){var yt=dt.value,Mt=yt===void 0?void 0:yt,$=dt.callback,lt=$===void 0?void 0:$;if(!this.head)return null;for(var rt=this.head;rt;){if(lt&&lt(rt.value)||Mt!==void 0&&this.compare(rt.value,Mt))return rt;rt=rt.next}return null}},{key:"deleteTail",value:function(){var dt=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,dt;for(var yt=this.head;yt.next;)yt.next.next?yt=yt.next:yt.next=null;return this.tail=yt,dt}},{key:"deleteHead",value:function(){if(!this.head)return null;var dt=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),dt}},{key:"fromArray",value:function(dt){var yt=this;return dt.forEach(function(Mt){return yt.append(Mt)}),this}},{key:"toArray",value:function(){for(var dt=[],yt=this.head;yt;)dt.push(yt),yt=yt.next;return dt}},{key:"reverse",value:function(){for(var dt=this.head,yt=null,Mt=null;dt;)Mt=dt.next,dt.next=yt,yt=dt,dt=Mt;this.tail=this.head,this.head=yt}},{key:"toString",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return""+this.toArray().map(function(yt){return yt.toString(dt)})}}]),H}(),T=function(){function H(){j(this,H),this.linkedList=new x}return n(H,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"peek",value:function(){return this.linkedList.head?this.linkedList.head.value:null}},{key:"enqueue",value:function(dt){this.linkedList.append(dt)}},{key:"dequeue",value:function(){var dt=this.linkedList.deleteHead();return dt?dt.value:null}},{key:"toString",value:function(dt){return this.linkedList.toString(dt)}}]),H}(),N=function(ht){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],yt=arguments.length>2?arguments[2]:void 0,Mt=dt.filter(function(z){return z.source===ht||z.target===ht});if(yt==="target"){var $=function(P){return P.source===ht};return Mt.filter($).map(function(z){return z.target})}if(yt==="source"){var lt=function(P){return P.target===ht};return Mt.filter(lt).map(function(z){return z.source})}var rt=function(P){return P.source===ht?P.target:P.source};return Mt.map(rt)},X=function(ht,dt){return dt.filter(function(yt){return yt.source===ht||yt.target===ht})},tt=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,dt="".concat(Math.random()).split(".")[1].substr(0,5),yt="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ht,"-").concat(dt).concat(yt)},nt=function(ht){var dt={},yt=ht.nodes,Mt=ht.edges,$=Mt===void 0?[]:Mt;return(yt===void 0?[]:yt).forEach(function(lt){dt[lt.id]={degree:0,inDegree:0,outDegree:0}}),$.forEach(function(lt){dt[lt.source].degree++,dt[lt.source].outDegree++,dt[lt.target].degree++,dt[lt.target].inDegree++}),dt};function vt(H,ht,dt){(function yt(Mt,$,lt,rt){rt.enter({current:$,previous:lt});var z=Mt.edges;N($,z===void 0?[]:z,"target").forEach(function(P){rt.allowTraversal({previous:lt,current:$,next:P})&&yt(Mt,P,$,rt)}),rt.leave({current:$,previous:lt})})(H,ht,"",function(){var yt,Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=Mt,lt=function(){},rt=(yt={},function(z){var P=z.next;return!yt[P]&&(yt[P]=!0,!0)});return $.allowTraversal=Mt.allowTraversal||rt,$.enter=Mt.enter||lt,$.leave=Mt.leave||lt,$}(dt))}var ft=function(ht,dt,yt,Mt){var $=ht.nodes,lt=$===void 0?[]:$,rt=ht.edges,z=rt===void 0?[]:rt,P={},Y={},k={};lt.forEach(function(At,gt){var mt=At.id;Y[mt]=1/0,mt===dt&&(Y[mt]=0)});for(var h=lt.length,g=function(gt){var mt=function(It,Dt,Ut){for(var Ct,Vt=1/0,Ht=0;Dt.length>Ht;Ht++){var re=Dt[Ht].id;Ut[re]||It[re]>Vt||(Vt=It[re],Ct=Dt[Ht])}return Ct}(Y,lt,P),Ot=mt.id;if(P[Ot]=!0,Y[Ot]===1/0)return"continue";(yt?function(It,Dt){return Dt.filter(function(Ut){return Ut.source===It})}(Ot,z):X(Ot,z)).forEach(function(It){var Dt=It.target,Ut=Dt===Ot?It.source:Dt,Ct=Mt&&It[Mt]?It[Mt]:1;Y[Ut]>Y[mt.id]+Ct?(Y[Ut]=Y[mt.id]+Ct,k[Ut]=[mt.id]):Y[Ut]===Y[mt.id]+Ct&&k[Ut].push(mt.id)})},B=0;h>B;B++)g();k[dt]=[dt];var V={};for(var q in Y)Y[q]!==1/0&&bt(dt,q,k,V);var it={};for(var ot in V)it[ot]=V[ot][0];return{length:Y,path:it,allPaths:V}};function bt(H,ht,dt,yt){if(H===ht)return[H];if(yt[ht])return yt[ht];var Mt,$=[],lt=O(dt[ht]);try{for(lt.s();!(Mt=lt.n()).done;){var rt,z=O(bt(H,Mt.value,dt,yt));try{for(z.s();!(rt=z.n()).done;)$.push([].concat(s(rt.value),[ht]))}catch(P){z.e(P)}finally{z.f()}}}catch(P){lt.e(P)}finally{lt.f()}yt[ht]=$}var St=function(ht,dt,yt,Mt){for(var $=dt.length,lt=2*Mt,rt=0,z=0;$>z;z++)for(var P=ht[z].clusterId,Y=0;$>Y;Y++)P===ht[Y].clusterId&&(rt+=(dt[z][Y]||0)-(yt[z]||0)*(yt[Y]||0)/lt);return rt*(1/lt)},pt=function(){function H(ht){j(this,H),this.count=ht.length,this.parent={};var dt,yt=O(ht);try{for(yt.s();!(dt=yt.n()).done;){var Mt=dt.value;this.parent[Mt]=Mt}}catch($){yt.e($)}finally{yt.f()}}return n(H,[{key:"find",value:function(dt){for(;this.parent[dt]!==dt;)dt=this.parent[dt];return dt}},{key:"union",value:function(dt,yt){var Mt=this.find(dt),$=this.find(yt);Mt!==$&&($>Mt?(this.parent[yt]!==yt&&this.union(this.parent[yt],dt),this.parent[yt]=this.parent[dt]):(this.parent[dt]!==dt&&this.union(this.parent[dt],yt),this.parent[dt]=this.parent[yt]))}},{key:"connected",value:function(dt,yt){return this.find(dt)===this.find(yt)}}]),H}(),ct=function(ht,dt){return ht-dt},zt=function(){function H(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ct;j(this,H),this.compareFn=ht,this.list=[]}return n(H,[{key:"getLeft",value:function(dt){return 2*dt+1}},{key:"getRight",value:function(dt){return 2*dt+2}},{key:"getParent",value:function(dt){return dt===0?null:Math.floor((dt-1)/2)}},{key:"isEmpty",value:function(){return 0>=this.list.length}},{key:"top",value:function(){return this.isEmpty()?void 0:this.list[0]}},{key:"delMin",value:function(){var dt=this.top(),yt=this.list.pop();return this.list.length>0&&(this.list[0]=yt,this.moveDown(0)),dt}},{key:"insert",value:function(dt){return dt!==null&&(this.list.push(dt),this.moveUp(this.list.length-1),!0)}},{key:"moveUp",value:function(dt){for(var yt=this.getParent(dt);dt&&dt>0&&this.compareFn(this.list[yt],this.list[dt])>0;){var Mt=this.list[yt];this.list[yt]=this.list[dt],this.list[dt]=Mt,yt=this.getParent(dt=yt)}}},{key:"moveDown",value:function(dt){var yt=dt,Mt=this.getLeft(dt),$=this.getRight(dt),lt=this.list.length;if(Mt!==null&&lt>Mt&&this.compareFn(this.list[yt],this.list[Mt])>0?yt=Mt:$!==null&&lt>$&&this.compareFn(this.list[yt],this.list[$])>0&&(yt=$),dt!==yt){var rt=[this.list[yt],this.list[dt]];this.list[dt]=rt[0],this.list[yt]=rt[1],this.moveDown(yt)}}}]),H}(),Nt=function(ht,dt){var yt=[],Mt=ht.nodes,$=Mt===void 0?[]:Mt,lt=ht.edges,rt=lt===void 0?[]:lt;if($.length===0)return yt;var z=$[0],P=new Set;P.add(z);var Y=new zt(function(B,V){return dt?B.weight-V.weight:0});for(X(z.id,rt).forEach(function(B){Y.insert(B)});!Y.isEmpty();){var k=Y.delMin(),h=k.source,g=k.target;P.has(h)&&P.has(g)||(yt.push(k),P.has(h)||(P.add(h),X(h,rt).forEach(function(B){Y.insert(B)})),P.has(g)||(P.add(g),X(g,rt).forEach(function(B){Y.insert(B)})))}return yt},wt=function(ht,dt){var yt=[],Mt=ht.nodes,$=Mt===void 0?[]:Mt,lt=ht.edges;if($.length===0)return yt;var rt=(lt===void 0?[]:lt).map(function(h){return h});dt&&rt.sort(function(h,g){return h.weight-g.weight});for(var z=new pt($.map(function(h){return h.id}));rt.length>0;){var P=rt.shift(),Y=P.source,k=P.target;z.connected(Y,k)||(yt.push(P),z.union(Y,k))}return yt};l.Stack=function(){function H(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;j(this,H),this.linkedList=new x,this.maxStep=ht}return n(H,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"isMaxStack",value:function(){return this.toArray().length>=this.maxStep}},{key:"peek",value:function(){return this.isEmpty()?null:this.linkedList.head.value}},{key:"push",value:function(dt){this.linkedList.prepend(dt),this.length>this.maxStep&&this.linkedList.deleteTail()}},{key:"pop",value:function(){var dt=this.linkedList.deleteHead();return dt?dt.value:null}},{key:"toArray",value:function(){return this.linkedList.toArray().map(function(dt){return dt.value})}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}},{key:"length",get:function(){return this.linkedList.toArray().length}}]),H}(),l.breadthFirstSearch=function(H,ht,dt){var yt=function(){var P,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=Y,h=function(){},g=(P={},function(B){var V=B.next;return!P[V]&&(P[V]=!0,!0)});return k.allowTraversal=Y.allowTraversal||g,k.enter=Y.enter||h,k.leave=Y.leave||h,k}(dt),Mt=new T,$=H.edges,lt=$===void 0?[]:$;Mt.enqueue(ht);for(var rt="",z=function(){var Y=Mt.dequeue();yt.enter({current:Y,previous:rt}),N(Y,lt,"target").forEach(function(k){yt.allowTraversal({previous:rt,current:Y,next:k})&&Mt.enqueue(k)}),yt.leave({current:Y,previous:rt}),rt=Y};!Mt.isEmpty();)z()},l.connectedComponent=function(H,ht){return ht?function(dt){var yt,Mt=dt.nodes,$=Mt===void 0?[]:Mt,lt=dt.edges,rt=lt===void 0?[]:lt,z=[],P={},Y={},k={},h=[],g=0,B=function it(ot){Y[ot.id]=g,k[ot.id]=g,g+=1,z.push(ot),P[ot.id]=!0;for(var At=N(ot.id,rt,"target").filter(function(Dt){return $.map(function(Ut){return Ut.id}).indexOf(Dt)>-1}),gt=function(Ut){var Ct=At[Ut];if(Y[Ct]||Y[Ct]===0)P[Ct]&&(k[ot.id]=Math.min(k[ot.id],Y[Ct]));else{var Vt=$.filter(function(Ht){return Ht.id===Ct});Vt.length>0&&it(Vt[0]),k[ot.id]=Math.min(k[ot.id],k[Ct])}},mt=0;At.length>mt;mt++)gt(mt);if(k[ot.id]===Y[ot.id]){for(var Ot=[];z.length>0;){var It=z.pop();if(P[It.id]=!1,Ot.push(It),It===ot)break}Ot.length>0&&h.push(Ot)}},V=O($);try{for(V.s();!(yt=V.n()).done;){var q=yt.value;Y[q.id]||Y[q.id]===0||B(q)}}catch(it){V.e(it)}finally{V.f()}return h}(H):function(dt){for(var yt=dt.nodes,Mt=yt===void 0?[]:yt,$=dt.edges,lt=$===void 0?[]:$,rt=[],z={},P=[],Y=function B(V){P.push(V),z[V.id]=!0;for(var q=N(V.id,lt),it=function(gt){var mt=q[gt];if(!z[mt]){var Ot=Mt.filter(function(It){return It.id===mt});Ot.length>0&&B(Ot[0])}},ot=0;q.length>ot;++ot)it(ot)},k=0;Mt.length>k;k++){var h=Mt[k];if(!z[h.id]){Y(h);for(var g=[];P.length>0;)g.push(P.pop());rt.push(g)}}return rt}(H)},l.depthFirstSearch=vt,l.detectCycle=function(H){var ht=null,dt=H.nodes,yt={},Mt={},$={},lt={};(dt===void 0?[]:dt).forEach(function(z){Mt[z.id]=z});for(var rt={enter:function(P){var Y=P.current,k=P.previous;if($[Y]){ht={};for(var h=Y,g=k;g!==Y;)ht[h]=g,h=g,g=yt[g];ht[h]=g}else $[Y]=Y,delete Mt[Y],yt[Y]=k},leave:function(P){var Y=P.current;lt[Y]=Y,delete $[Y]},allowTraversal:function(P){return!ht&&!lt[P.next]}};Object.keys(Mt).length;)vt(H,Object.keys(Mt)[0],rt);return ht},l.dijkstra=ft,l.findAllPath=function(H,ht,dt,yt){if(ht===dt)return[[ht]];var Mt,$,lt=H.edges,rt=lt===void 0?[]:lt,z=[ht],P=(($=ht)in(Mt={})?Object.defineProperty(Mt,$,{value:!0,enumerable:!0,configurable:!0,writable:!0}):Mt[$]=!0,Mt),Y=[],k=[],h=yt?N(ht,rt,"target"):N(ht,rt);for(Y.push(h);z.length>0&&Y.length>0;){var g=Y[Y.length-1];if(g.length){var B=g.shift();if(B&&(z.push(B),P[B]=!0,h=yt?N(B,rt,"target"):N(B,rt),Y.push(h.filter(function(ot){return!P[ot]}))),z[z.length-1]===dt){var V=z.map(function(ot){return ot});k.push(V);var q=z.pop();P[q]=!1,Y.pop()}}else{var it=z.pop();P[it]=!1,Y.pop()}}return k},l.findShortestPath=function(H,ht,dt,yt,Mt){var $=ft(H,ht,yt,Mt);return{length:$.length[dt],path:$.path[dt],allPath:$.allPaths[dt]}},l.floydWarshall=function(H,ht){for(var dt=M(H,ht),yt=[],Mt=dt.length,$=0;Mt>$;$+=1){yt[$]=[];for(var lt=0;Mt>lt;lt+=1)yt[$][lt]=$===lt?0:dt[$][lt]!==0&&dt[$][lt]?dt[$][lt]:1/0}for(var rt=0;Mt>rt;rt+=1)for(var z=0;Mt>z;z+=1)for(var P=0;Mt>P;P+=1)yt[z][P]>yt[z][rt]+yt[rt][P]&&(yt[z][P]=yt[z][rt]+yt[rt][P]);return yt},l.getAdjMatrix=M,l.getDegree=nt,l.getInDegree=function(H,ht){return nt(H)[ht]?nt(H)[ht].inDegree:0},l.getNeighbors=N,l.getOutDegree=function(H,ht){return nt(H)[ht]?nt(H)[ht].outDegree:0},l.labelPropagation=function(H){var ht=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e3,Mt=H.nodes,$=Mt===void 0?[]:Mt,lt=H.edges,rt=lt===void 0?[]:lt,z={},P={};$.forEach(function(it,ot){var At=tt();it.clusterId=At,z[At]={id:At,nodes:[it]},P[it.id]={node:it,idx:ot}});var Y=M(H,ht),k={};Y.forEach(function(it,ot){var At=$[ot].id;k[At]={},it.forEach(function(gt,mt){gt&&(k[At][$[mt].id]=gt)})});for(var h=0;yt>h;){var g=!1;if($.forEach(function(it){var ot={};Object.keys(k[it.id]).forEach(function(Ct){var Vt=k[it.id][Ct],Ht=P[Ct].node.clusterId;ot[Ht]||(ot[Ht]=0),ot[Ht]+=Vt});var At=-1/0,gt=[];if(Object.keys(ot).forEach(function(Ct){ot[Ct]>At?(At=ot[Ct],gt=[Ct]):At===ot[Ct]&&gt.push(Ct)}),gt.length!==1||gt[0]!==it.clusterId){var mt=gt.indexOf(it.clusterId);if(0>mt||gt.splice(mt,1),gt&&gt.length){g=!0;var Ot=z[it.clusterId],It=Ot.nodes.indexOf(it);Ot.nodes.splice(It,1);var Dt=Math.floor(Math.random()*gt.length),Ut=z[gt[Dt]];Ut.nodes.push(it),it.clusterId=Ut.id}}}),!g)break;h++}Object.keys(z).forEach(function(it){var ot=z[it];ot.nodes&&ot.nodes.length||delete z[it]});var B=[],V={};rt.forEach(function(it){var ot=it[dt]||1,At=P[it.source].node.clusterId,gt=P[it.target].node.clusterId,mt="".concat(At,"---").concat(gt);if(V[mt])V[mt].weight+=ot,V[mt].count++;else{var Ot={source:At,target:gt,weight:ot,count:1};V[mt]=Ot,B.push(Ot)}});var q=[];return Object.keys(z).forEach(function(it){q.push(z[it])}),{clusters:q,clusterEdges:B}},l.louvain=function(H){var ht=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-4,Mt=H.nodes,$=Mt===void 0?[]:Mt,lt=H.edges,rt=lt===void 0?[]:lt,z={},P={};$.forEach(function(gt,mt){var Ot=tt();gt.clusterId=Ot,z[Ot]={id:Ot,nodes:[gt]},P[gt.id]={node:gt,idx:mt}});var Y=M(H,ht),k=[],h={},g=0;Y.forEach(function(gt,mt){var Ot=0,It=$[mt].id;h[It]={},gt.forEach(function(Dt,Ut){Dt&&(Ot+=Dt,h[It][$[Ut].id]=Dt,g+=Dt)}),k.push(Ot)}),g/=2;for(var B=1/0,V=1/0,q=0;B=St($,Y,k,g),Math.abs(B-V)>=yt&&100>=q;)V=B,q++,Object.keys(z).forEach(function(gt){var mt=0;rt.forEach(function(Ot){var It=P[Ot.source].node.clusterId,Dt=P[Ot.target].node.clusterId;(It===gt&&Dt!==gt||Dt===gt&&It!==gt)&&(mt+=Ot[dt]||1)}),z[gt].sumTot=mt}),$.forEach(function(gt,mt){var Ot,It=z[gt.clusterId],Dt=0,Ut=k[mt]/(2*g),Ct=0;It.nodes.forEach(function(we){Ct+=Y[mt][P[we.id].idx]||0});var Vt=Ct-It.sumTot*Ut;if(Object.keys(h[gt.id]).forEach(function(we){var Ne=P[we].node.clusterId;if(Ne!==gt.clusterId){var Ke=z[Ne],pn=Ke.nodes;if(pn&&pn.length){var hn=0;pn.forEach(function(Tn){hn+=Y[mt][P[Tn.id].idx]||0});var kn=hn-Ke.sumTot*Ut-Vt;kn>Dt&&(Dt=kn,Ot=Ke)}}}),Dt>0){Ot.nodes.push(gt);var Ht=gt.clusterId;gt.clusterId=Ot.id;var re=It.nodes.indexOf(gt);It.nodes.splice(re,1);var pe=0,ye=0;rt.forEach(function(we){var Ne=P[we.source].node.clusterId,Ke=P[we.target].node.clusterId;(Ne===Ot.id&&Ke!==Ot.id||Ke===Ot.id&&Ne!==Ot.id)&&(pe+=we[dt]||1),(Ne===Ht&&Ke!==Ht||Ke===Ht&&Ne!==Ht)&&(ye+=we[dt]||1)}),Ot.sumTot=pe,It.sumTot=ye}});Object.keys(z).forEach(function(gt){var mt=z[gt];mt.nodes&&mt.nodes.length||delete z[gt]});var it=[],ot={};rt.forEach(function(gt){var mt=gt[dt]||1,Ot=P[gt.source].node.clusterId,It=P[gt.target].node.clusterId,Dt="".concat(Ot,"---").concat(It);if(ot[Dt])ot[Dt].weight+=mt,ot[Dt].count++;else{var Ut={source:Ot,target:It,weight:mt,count:1};ot[Dt]=Ut,it.push(Ut)}});var At=[];return Object.keys(z).forEach(function(gt){At.push(z[gt])}),{clusters:At,clusterEdges:it}},l.minimumSpanningTree=function(H,ht,dt){return dt?{prim:Nt,kruskal:wt}[dt](H,ht):wt(H,ht)},l.pageRank=function(H,ht,dt){typeof ht!="number"&&(ht=1e-6),typeof dt!="number"&&(dt=.85);for(var yt,Mt=1,$=0,lt=1e3,rt=H.nodes,z=rt===void 0?[]:rt,P=H.edges,Y=P===void 0?[]:P,k=z.length,h={},g={},B=0;k>B;++B){var V=z[B].id;h[V]=1/k,g[V]=1/k}for(var q=nt(H);lt>0&&Mt>ht;){$=0;for(var it=0;k>it;++it){var ot=z[it],At=ot.id;if(yt=0,q[ot.id].inDegree===0)h[At]=0;else{for(var gt=N(At,Y,"source"),mt=0;gt.length>mt;++mt){var Ot=gt[mt],It=q[Ot].outDegree;It>0&&(yt+=g[Ot]/It)}h[At]=dt*yt,$+=h[At]}}$=(1-$)/k,Mt=0;for(var Dt=0;k>Dt;++Dt){var Ut=z[Dt].id;Mt+=Math.abs((yt=h[Ut]+$)-g[Ut]),g[Ut]=yt}lt-=1}return g},Object.defineProperty(l,"__esModule",{value:!0})})},function(a,A,e){"use strict";e.d(A,"c",function(){return s}),e.d(A,"b",function(){return d}),e.d(A,"a",function(){return E});var i=e(1),p=e(56);function m(O){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(O)}var S=Math.sin,l=Math.cos,M=Math.atan2,j=Math.PI;function y(O,C,v,x,T,N,X){var tt=C.stroke,nt=C.lineWidth,vt=M(x-N,v-T),ft=new p.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*l(j/6)+","+10*S(j/6)+" L0,0 L"+10*l(j/6)+",-"+10*S(j/6),stroke:tt,lineWidth:nt}});ft.translate(T,N),ft.rotateAtPoint(T,N,vt),O.set(X?"startArrowShape":"endArrowShape",ft)}function n(O,C,v,x,T,N,X){var tt=C.startArrow,nt=C.endArrow,vt=C.stroke,ft=C.lineWidth,bt=X?tt:nt,St=bt.d,pt=bt.fill,ct=bt.stroke,zt=bt.lineWidth,Nt=Object(i.c)(bt,["d","fill","stroke","lineWidth"]),wt=M(x-N,v-T);St&&(T-=l(wt)*St,N-=S(wt)*St);var H=new p.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:Object(i.a)(Object(i.a)({},Nt),{stroke:ct||vt,lineWidth:zt||ft,fill:pt})});H.translate(T,N),H.rotateAtPoint(T,N,wt),O.set(X?"startArrowShape":"endArrowShape",H)}function s(O,C,v,x,T){var N=M(x-C,v-O);return{dx:l(N)*T,dy:S(N)*T}}function d(O,C,v,x,T,N){m(C.startArrow)==="object"?n(O,C,v,x,T,N,!0):C.startArrow?y(O,C,v,x,T,N,!0):O.set("startArrowShape",null)}function E(O,C,v,x,T,N){m(C.endArrow)==="object"?n(O,C,v,x,T,N,!1):C.endArrow?y(O,C,v,x,T,N,!1):O.set("startArrowShape",null)}},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"leftTranslate",function(){return nt}),e.d(i,"leftRotate",function(){return vt}),e.d(i,"leftScale",function(){return ft}),e.d(i,"transform",function(){return bt}),e.d(i,"direction",function(){return St}),e.d(i,"angleTo",function(){return pt}),e.d(i,"vertical",function(){return ct});var p={};e.r(p),e.d(p,"default",function(){return or}),e.d(p,"assign",function(){return Ut}),e.d(p,"format",function(){return Kn}),e.d(p,"parse",function(){return tr}),e.d(p,"defaultI18n",function(){return re}),e.d(p,"setGlobalDateI18n",function(){return ye}),e.d(p,"setGlobalDateMasks",function(){return _n});var m={};e.r(m),e.d(m,"compare",function(){return ue}),e.d(m,"getLineIntersect",function(){return Dn}),e.d(m,"getRectIntersectByPoint",function(){return zn}),e.d(m,"getCircleIntersectByPoint",function(){return Un}),e.d(m,"getEllipseIntersectByPoint",function(){return Ze}),e.d(m,"applyMatrix",function(){return Ce}),e.d(m,"invertMatrix",function(){return R}),e.d(m,"getCircleCenterByPoints",function(){return xt}),e.d(m,"distance",function(){return $t}),e.d(m,"scaleMatrix",function(){return me}),e.d(m,"floydWarshall",function(){return Zt}),e.d(m,"getAdjMatrix",function(){return de}),e.d(m,"translate",function(){return he}),e.d(m,"move",function(){return ce}),e.d(m,"scale",function(){return Me}),e.d(m,"rotate",function(){return ze}),e.d(m,"getDegree",function(){return Ve}),e.d(m,"isPointInPolygon",function(){return tn}),e.d(m,"intersectBBox",function(){return De}),e.d(m,"isPolygonsIntersect",function(){return cn}),e.d(m,"Line",function(){return fn}),e.d(m,"getBBoxBoundLine",function(){return nn}),e.d(m,"itemIntersectByLine",function(){return Sn}),e.d(m,"fractionToLine",function(){return Pe}),e.d(m,"getPointsCenter",function(){return le}),e.d(m,"squareDist",function(){return Le}),e.d(m,"pointLineSquareDist",function(){return Be}),e.d(m,"isPointsOverlap",function(){return en}),e.d(m,"pointRectSquareDist",function(){return sn});var S={};e.r(S),e.d(S,"uniqueId",function(){return Gr}),e.d(S,"formatPadding",function(){return Mr}),e.d(S,"cloneEvent",function(){return oi}),e.d(S,"isViewportChanged",function(){return ai}),e.d(S,"isNaN",function(){return Zr}),e.d(S,"calculationItemsBBox",function(){return Yi}),e.d(S,"processParallelEdges",function(){return $i});var l={};e.r(l),e.d(l,"getBBox",function(){return zo}),e.d(l,"getLoopCfgs",function(){return Xo}),e.d(l,"getLabelPosition",function(){return Yo}),e.d(l,"traverseTree",function(){return di}),e.d(l,"traverseTreeUp",function(){return ea}),e.d(l,"getLetterWidth",function(){return xi}),e.d(l,"getTextSize",function(){return ks}),e.d(l,"plainCombosToTrees",function(){return Ri}),e.d(l,"reconstructTree",function(){return Rs}),e.d(l,"getComboBBox",function(){return Mi}),e.d(l,"shouldRefreshEdge",function(){return hu}),e.d(l,"cloneBesidesImg",function(){return ui});var M={};e.r(M),e.d(M,"getSpline",function(){return Ns}),e.d(M,"getControlPoint",function(){return ts}),e.d(M,"pointsToPolygon",function(){return Ls}),e.d(M,"pathToPoints",function(){return Ho}),e.d(M,"getClosedSpline",function(){return es}),e.d(M,"roundedHull",function(){return ps}),e.d(M,"paddedHull",function(){return yu});var j,y=e(14),n=e(0),s=function(){function kt(f){this._cfgs=Object(n.e)(this.getDefaultCfgs(),f),this._events={},this.destroyed=!1}return kt.prototype.getDefaultCfgs=function(){return{}},kt.prototype.initPlugin=function(f){var u=this;u.set("graph",f);var I=u.getEvents(),W={};Object(n.f)(I,function(st,Tt){var Ft=Object(n.J)(u,st);W[Tt]=Ft,f.on(Tt,Ft)}),this._events=W,this.init()},kt.prototype.getEvents=function(){return{}},kt.prototype.get=function(f){return this._cfgs[f]},kt.prototype.set=function(f,u){this._cfgs[f]=u},kt.prototype.destroy=function(){},kt.prototype.destroyPlugin=function(){this.destroy();var f=this.get("graph"),u=this._events;Object(n.f)(u,function(I,W){f.off(W,I)}),this._events=null,this._cfgs=null,this.destroyed=!0},kt}(),d=(j=function(f,u){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var st in W)Object.prototype.hasOwnProperty.call(W,st)&&(I[st]=W[st])})(f,u)},function(kt,f){function u(){this.constructor=kt}j(kt,f),kt.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}),E="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",O=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return d(f,kt),f.prototype.getDefaultCfgs=function(){return{img:E}},f.prototype.init=function(){var u=this.get("graph"),I=u.get("minZoom"),W=u.get("container"),st=u.get("canvas").get("el"),Tt=u.get("width"),Ft=u.get("height"),Yt=this.get("img")||E,ee=Object(y.b)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),ae=Object(y.b)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+Yt+`;
        user-select: none
        '></div>`);ee.appendChild(ae),Object(y.c)(ee,{width:Tt+"px",height:Ft+"px",left:W.offsetLeft+"px",top:W.offsetTop+"px"}),Object(y.c)(ae,{width:Tt/I+"px",height:Ft/I+"px",left:"0px",top:"0px"}),W.insertBefore(ee,st),this.set("container",ee),this.set("gridContainer",ae)},f.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},f.prototype.updateGrid=function(u){var I=this.get("gridContainer"),W=u.matrix;W||(W=[1,0,0,0,1,0,0,0,1]);var st="matrix("+W[0]+", "+W[1]+", "+W[3]+", "+W[4]+", 0, 0)";Object(y.c)(I,{transform:st})},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){var u=this.get("graph").get("container"),I=this.get("container");u.removeChild(I)},f}(s),C=e(81),v=e.n(C),x=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var T=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return x(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(I){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(I){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},f.prototype.init=function(){var u=this.get("className"),I=Object(y.b)("<div class="+(u||"g6-component-contextmenu")+"></div>");Object(y.c)(I,{top:"0px",position:"absolute",visibility:"hidden"});var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.appendChild(I),this.set("menu",I)},f.prototype.onMenuShow=function(u){var I=this;u.preventDefault(),u.stopPropagation();var W=this.get("itemTypes");if(u.item){if(u.item&&u.item.getType&&W.indexOf(u.item.getType())===-1)return void I.onMenuHide()}else if(W.indexOf("canvas")===-1)return;if(this.get("shouldBegin")(u)){var st=this.get("menu"),Tt=this.get("getContent"),Ft=this.get("graph"),Yt=Tt(u,Ft);Object(n.x)(Yt)?st.innerHTML=Yt:st.innerHTML=Yt.outerHTML,this.removeMenuEventListener();var ee=this.get("handleMenuClick");if(ee){var ae=function(Or){ee(Or.target,u.item,Ft)};this.set("handleMenuClickWrapper",ae),st.addEventListener("click",ae)}var je=Ft.get("width"),Fe=Ft.get("height"),Ue=st.getBoundingClientRect(),He=this.get("offsetX")||0,bn=this.get("offsetY")||0,wn=Ft.getContainer().offsetTop,Nn=Ft.getContainer().offsetLeft,Bn=u.canvasX+Nn+He,Fn=u.canvasY+wn+bn;Bn+Ue.width>je&&(Bn=u.canvasX-Ue.width-He+Nn),Fn+Ue.height>Fe&&(Fn=u.canvasY-Ue.height-bn+wn),Object(y.c)(st,{top:Fn+"px",left:Bn+"px",visibility:"visible"});var sr=function(Or){I.onMenuHide()};document.body.addEventListener("click",sr),this.set("handler",sr)}},f.prototype.removeMenuEventListener=function(){var u=this.get("handleMenuClickWrapper"),I=this.get("handler");u&&(this.get("menu").removeEventListener("click",u),this.set("handleMenuClickWrapper",null)),I&&document.body.removeEventListener("click",I)},f.prototype.onMenuHide=function(){var u=this.get("menu");u&&Object(y.c)(u,{visibility:"hidden"}),this.removeMenuEventListener()},f.prototype.destroy=function(){var u=this.get("menu");if(this.removeMenuEventListener(),u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),N=e(52),X=e(62),tt=e(2);function nt(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromTranslation(I,u),tt.a.multiply(kt,I,f)}function vt(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromRotation(I,u),tt.a.multiply(kt,I,f)}function ft(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromScaling(I,u),tt.a.multiply(kt,I,f)}function bt(kt,f){for(var u,I,W,st=kt?[].concat(kt):[1,0,0,0,1,0,0,0,1],Tt=0,Ft=f.length;Tt<Ft;Tt++){var Yt=f[Tt];switch(Yt[0]){case"t":nt(st,st,[Yt[1],Yt[2]]);break;case"s":ft(st,st,[Yt[1],Yt[2]]);break;case"r":vt(st,st,Yt[1]);break;case"m":u=st,I=st,W=Yt[1],tt.a.multiply(u,W,I)}}return st}function St(kt,f){return kt[0]*f[1]-f[0]*kt[1]}function pt(kt,f,u){var I=tt.d.angle(kt,f),W=St(kt,f)>=0;return u?W?2*Math.PI-I:I:W?I:2*Math.PI-I}function ct(kt,f,u){return u?(kt[0]=f[1],kt[1]=-1*f[0]):(kt[0]=-1*f[1],kt[1]=f[0]),kt}var zt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),Nt=function(){return(Nt=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},wt=Math.max,H=i.transform,ht=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.handleUpdateCanvas=Object(n.d)(function(I){var W=u;W.destroyed||W.updateCanvas()},100,!1),u}return zt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.size,st=I.graph;if(!this.destroyed){var Tt=this.get("canvas").get("container"),Ft=Object(y.b)(`
      <div
        class=`+I.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),Yt=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ee=0,ae=0,je=!1,Fe=0,Ue=0,He=0,bn=0,wn=0,Nn=0;Ft.addEventListener("dragstart",function(Bn){var Fn,sr;if(Bn.dataTransfer){var ur=new Image;ur.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(sr=(Fn=Bn.dataTransfer).setDragImage)===null||sr===void 0||sr.call(Fn,ur,0,0);try{Bn.dataTransfer.setData("text/html","view-port-minimap")}catch(ei){Bn.dataTransfer.setData("text","view-port-minimap")}}if(I.refresh=!1,Bn.target===Ft){var Or=Ft.style;Fe=parseInt(Or.left,10),Ue=parseInt(Or.top,10),He=parseInt(Or.width,10),bn=parseInt(Or.height,10),He>W[0]||bn>W[1]||(Nn=st.getZoom(),wn=u.get("ratio"),je=!0,ee=Bn.clientX,ae=Bn.clientY)}},!1),Ft.addEventListener(Yt?"dragover":"drag",function(Bn){if(je&&!Object(n.s)(Bn.clientX)&&!Object(n.s)(Bn.clientY)){var Fn=ee-Bn.clientX,sr=ae-Bn.clientY;(Fe-Fn<0||Fe-Fn+He>=W[0])&&(Fn=0),(Ue-sr<0||Ue-sr+bn>=W[1])&&(sr=0),Fe-=Fn,Ue-=sr,Object(y.c)(Ft,{left:Fe+"px",top:Ue+"px"}),st.translate(Fn*Nn/wn,sr*Nn/wn),ee=Bn.clientX,ae=Bn.clientY}},!1),Ft.addEventListener("dragend",function(){je=!1,I.refresh=!0},!1),this.set("viewport",Ft),Tt.appendChild(Ft)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=(this.get("dx"),this.get("dy"),this.get("totaldx")),W=this.get("totaldy"),st=this.get("graph"),Tt=this.get("size"),Ft=st.get("width"),Yt=st.get("height"),ee=st.getPointByCanvas(0,0),ae=st.getPointByCanvas(Ft,Yt),je=this.get("viewport");je||this.initViewport(),st.getZoom();var Fe=(ae.x-ee.x)*u,Ue=(ae.y-ee.y)*u,He=ee.x*u+I,bn=ee.y*u+W,wn=He+Fe,Nn=bn+Ue;He<0&&(Fe+=He,He=0),wn>Tt[0]&&(Fe-=wn-Tt[0]),bn<0&&(Ue+=bn,bn=0),Nn>Tt[1]&&(Ue-=Nn-Tt[1]),this.set("ratio",u);var Bn=He+"px",Fn=bn+"px";Object(y.c)(je,{left:Bn,top:Fn,width:Fe+"px",height:Ue+"px"})}},f.prototype.updateGraphShapes=function(){var u=this._cfgs.graph,I=this.get("canvas"),W=u.get("group");if(!W.destroyed){var st=W.clone();st.resetMatrix(),I.clear(),I.add(st),u.get("renderer")==="svg"&&this.updateVisible(st)}},f.prototype.updateVisible=function(u){var I=this;if(u.isGroup()||u.get("visible")){var W=u.get("children");if(!W||!W.length)return;W.forEach(function(st){st.get("visible")||st.hide(),I.updateVisible(st)})}else u.hide()},f.prototype.updateKeyShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeKeyShape(W)}),this.clearDestroyedShapes()},f.prototype.updateOneNodeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("itemMap")||{},Tt=st[u.get("id")],Ft=u.getBBox(),Yt=u.get("keyShape").clone(),ee=Yt.attr(),ae={x:Ft.centerX,y:Ft.centerY};Tt?ae=Object.assign(ee,ae):(Tt=Yt,W.add(Tt));var je=Tt.get("type");je!=="rect"&&je!=="image"||(ae.x=Ft.minX,ae.y=Ft.minY),Tt.attr(ae),u.isVisible()||Tt.hide(),Tt.exist=!0,st[u.get("id")]=Tt,this.set("itemMap",st)},f.prototype.updateDelegateShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeDelegateShape(W)}),this.clearDestroyedShapes()},f.prototype.clearDestroyedShapes=function(){var u=this.get("itemMap")||{},I=Object.keys(u);if(I&&I.length!==0)for(var W=I.length-1;W>=0;W--){var st=u[I[W]],Tt=st.exist;st.exist=!1,Tt||(st.remove(),delete u[I[W]])}},f.prototype.updateOneEdgeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("itemMap")||{},Tt=st[u.get("id")];if(Tt){var Ft=u.get("keyShape").attr("path");Tt.attr("path",Ft)}else Tt=u.get("keyShape").clone(),W.add(Tt),Tt.toBack();u.isVisible()||Tt.hide(),Tt.exist=!0,st[u.get("id")]=Tt,this.set("itemMap",st)},f.prototype.updateOneNodeDelegateShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("delegateStyle"),Tt=this.get("itemMap")||{},Ft=Tt[u.get("id")],Yt=u.getBBox();if(Ft){var ee={x:Yt.minX,y:Yt.minY,width:Yt.width,height:Yt.height};Ft.attr(ee)}else Ft=W.addShape("rect",{attrs:Nt({x:Yt.minX,y:Yt.minY,width:Yt.width,height:Yt.height},st),name:"minimap-node-shape"});u.isVisible()||Ft.hide(),Ft.exist=!0,Tt[u.get("id")]=Ft,this.set("itemMap",Tt)},f.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},f.prototype.initContainer=function(){var u=this.get("graph"),I=this.get("size"),W=this.get("className"),st=this.get("container"),Tt=Object(y.b)("<div class='"+W+"' style='width: "+I[0]+"px; height: "+I[1]+"px; overflow: hidden'></div>");Object(n.x)(st)&&(st=document.getElementById(st)),st?st.appendChild(Tt):u.get("container").appendChild(Tt),this.set("container",Tt);var Ft,Yt=Object(y.b)('<div class="g6-minimap-container" style="position: relative;"></div>');Tt.appendChild(Yt),Ft=u.get("renderer")==="svg"?new X.Canvas({container:Yt,width:I[0],height:I[1]}):new N.Canvas({container:Yt,width:I[0],height:I[1]}),this.set("canvas",Ft),this.updateCanvas()},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("size"),W=this.get("canvas"),st=this.get("type"),Tt=this.get("padding");if(!W.destroyed){switch(st){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var Ft=W.get("children")[0];if(Ft){Ft.resetMatrix();var Yt=Ft.getCanvasBBox(),ee=u.get("canvas").getCanvasBBox(),ae=ee.width,je=ee.height;Number.isFinite(Yt.width)&&(ae=wt(Yt.width,ae),je=wt(Yt.height,je)),ae+=2*Tt,je+=2*Tt;var Fe=Math.min(I[0]/ae,I[1]/je),Ue=[1,0,0,0,1,0,0,0,1],He=0,bn=0;Number.isFinite(Yt.minX)&&(He=-Yt.minX),Number.isFinite(Yt.minY)&&(bn=-Yt.minY);var wn=(I[0]-(ae-2*Tt)*Fe)/2,Nn=(I[1]-(je-2*Tt)*Fe)/2;Ue=H(Ue,[["t",He,bn],["s",Fe,Fe],["t",wn,Nn]]),Ft.setMatrix(Ue),this.set("ratio",Fe),this.set("totaldx",wn+He*Fe),this.set("totaldy",Nn+bn*Fe),this.set("dx",wn),this.set("dy",Nn),this.updateViewport()}}}}},f.prototype.getCanvas=function(){return this.get("canvas")},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){this.get("canvas").destroy();var u=this.get("container");u.parentNode.removeChild(u)},f}(s),dt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();function yt(kt,f,u){var I=kt.x-f.x,W=kt.y-f.y;return!u||Math.abs(I)>u||Math.abs(W)>u?Math.sqrt(I*I+W*W):u}function Mt(kt,f){var u=(f.source.y-f.target.y)/(f.source.x-f.target.x),I=(u*u*f.source.x+u*(kt.y-f.source.y)+kt.x)/(u*u+1);return{x:I,y:u*(I-f.source.x)+f.source.y}}var $=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return dt(f,kt),f.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},f.prototype.init=function(){var u=this.get("graph"),I=this.get("onTick");this.set("tick",function(){I&&I(),u.refreshPositions()})},f.prototype.bundling=function(u){var I=this;if(I.set("data",u),!I.isTicking()){var W=u.edges||[],st=u.nodes||[],Tt={},Ft=!1;if(st.forEach(function(Fn){Fn.x!==null&&!Fn.y!==null&&Fn.x!==void 0&&!Fn.y!==void 0||(Ft=!0),Tt[Fn.id]=Fn}),Ft)throw new Error("please layout the graph or assign x and y for nodes first");I.set("nodeIdMap",Tt);var Yt=I.get("divisions"),ee=I.get("divRate"),ae=I.divideEdges(Yt);I.set("edgePoints",ae);var je=I.getEdgeBundles();I.set("edgeBundles",je);for(var Fe=I.get("cycles"),Ue=I.get("iterations"),He=I.get("iterRate"),bn=I.get("lambda"),wn=0;wn<Fe;wn++){for(var Nn=function(sr){var ur=[];W.forEach(function(Or,ei){if(Or.source!==Or.target){var Ti=Tt[Or.source],kr=Tt[Or.target];ur[ei]=I.getEdgeForces({source:Ti,target:kr},ei,Yt,bn);for(var yi=0;yi<Yt+1;yi++)ae[ei][yi].x+=ur[ei][yi].x,ae[ei][yi].y+=ur[ei][yi].y}})},Bn=0;Bn<Ue;Bn++)Nn();bn/=2,Yt*=ee,Ue*=He,ae=I.divideEdges(Yt),I.set("edgePoints",ae)}W.forEach(function(Fn,sr){Fn.source!==Fn.target&&(Fn.type="polyline",Fn.controlPoints=ae[sr].slice(1,ae[sr].length-1))}),I.get("graph").refresh()}},f.prototype.updateBundling=function(u){var I=this,W=u.data;if(W&&I.set("data",W),I.get("ticking")&&I.set("ticking",!1),Object.keys(u).forEach(function(Tt){I.set(Tt,u[Tt])}),u.onTick){var st=this.get("graph");I.set("tick",function(){u.onTick(),st.refresh()})}I.bundling(W)},f.prototype.divideEdges=function(u){var I=this,W=I.get("data").edges,st=I.get("nodeIdMap"),Tt=I.get("edgePoints");return Tt&&Tt!==void 0||(Tt=[]),W.forEach(function(Ft,Yt){Tt[Yt]&&Tt[Yt]!==void 0||(Tt[Yt]=[]);var ee=st[Ft.source],ae=st[Ft.target];if(u===1)Tt[Yt].push({x:ee.x,y:ee.y}),Tt[Yt].push({x:.5*(ee.x+ae.x),y:.5*(ee.y+ae.y)}),Tt[Yt].push({x:ae.x,y:ae.y});else{var je=(Tt[Yt]&&Tt[Yt]!==[]?I.getEdgeLength(Tt[Yt]):yt({x:ee.x,y:ee.y},{x:ae.x,y:ae.y}))/(u+1),Fe=je,Ue=[{x:ee.x,y:ee.y}];Tt[Yt].forEach(function(He,bn){if(bn!==0){for(var wn=yt(He,Tt[Yt][bn-1]);wn>Fe;){var Nn=Fe/wn,Bn={x:Tt[Yt][bn-1].x,y:Tt[Yt][bn-1].y};Bn.x+=Nn*(He.x-Tt[Yt][bn-1].x),Bn.y+=Nn*(He.y-Tt[Yt][bn-1].y),Ue.push(Bn),wn-=Fe,Fe=je}Fe-=wn}}),Ue.push({x:ae.x,y:ae.y}),Tt[Yt]=Ue}}),Tt},f.prototype.getEdgeLength=function(u){var I=0;return u.forEach(function(W,st){st!==0&&(I+=yt(W,u[st-1]))}),I},f.prototype.getEdgeBundles=function(){var u=this,I=u.get("data").edges||[],W=u.get("bundleThreshold"),st=u.get("nodeIdMap"),Tt=u.get("edgeBundles");return Tt||(Tt=[]),I.forEach(function(Ft,Yt){Tt[Yt]&&Tt[Yt]!==void 0||(Tt[Yt]=[])}),I.forEach(function(Ft,Yt){var ee=st[Ft.source],ae=st[Ft.target];I.forEach(function(je,Fe){if(!(Fe<=Yt)){var Ue=st[je.source],He=st[je.target];u.getBundleScore({source:ee,target:ae},{source:Ue,target:He})>=W&&(Tt[Yt].push(Fe),Tt[Fe].push(Yt))}})}),Tt},f.prototype.getBundleScore=function(u,I){return u.vx=u.target.x-u.source.x,u.vy=u.target.y-u.source.y,I.vx=I.target.x-I.source.x,I.vy=I.target.y-I.source.y,u.length=yt({x:u.source.x,y:u.source.y},{x:u.target.x,y:u.target.y}),I.length=yt({x:I.source.x,y:I.source.y},{x:I.target.x,y:I.target.y}),this.getAngleScore(u,I)*this.getScaleScore(u,I)*this.getPositionScore(u,I)*this.getVisibilityScore(u,I)},f.prototype.getAngleScore=function(u,I){return function(W,st){return W.x*st.x+W.y*st.y}({x:u.vx,y:u.vy},{x:I.vx,y:I.vy})/(u.length*I.length)},f.prototype.getScaleScore=function(u,I){var W=(u.length+I.length)/2;return 2/(W/Math.min(u.length,I.length)+Math.max(u.length,I.length)/W)},f.prototype.getPositionScore=function(u,I){var W=(u.length+I.length)/2;return W/(W+yt({x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2},{x:(I.source.x+I.target.x)/2,y:(I.source.y+I.target.y)/2}))},f.prototype.getVisibilityScore=function(u,I){var W=this.getEdgeVisibility(u,I),st=this.getEdgeVisibility(I,u);return W<st?W:st},f.prototype.getEdgeVisibility=function(u,I){var W=Mt(I.source,u),st=Mt(I.target,u),Tt={x:(W.x+st.x)/2,y:(W.y+st.y)/2},Ft={x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2};return Math.max(0,1-2*yt(Tt,Ft)/yt(W,st))},f.prototype.getEdgeForces=function(u,I,W,st){for(var Tt=this.get("edgePoints"),Ft=this.get("K")/(yt(u.source,u.target)*(W+1)),Yt=[{x:0,y:0}],ee=1;ee<W;ee++){var ae={x:0,y:0},je=this.getSpringForce({pre:Tt[I][ee-1],cur:Tt[I][ee],next:Tt[I][ee+1]},Ft),Fe=this.getElectrostaticForce(ee,I);ae.x=st*(je.x+Fe.x),ae.y=st*(je.y+Fe.y),Yt.push(ae)}return Yt.push({x:0,y:0}),Yt},f.prototype.getSpringForce=function(u,I){var W=u.pre.x+u.next.x-2*u.cur.x,st=u.pre.y+u.next.y-2*u.cur.y;return{x:W*=I,y:st*=I}},f.prototype.getElectrostaticForce=function(u,I){var W=this.get("eps"),st=this.get("edgeBundles"),Tt=this.get("edgePoints"),Ft=st[I],Yt={x:0,y:0};return Ft.forEach(function(ee){var ae={x:Tt[ee][u].x-Tt[I][u].x,y:Tt[ee][u].y-Tt[I][u].y};if(Math.abs(ae.x)>W||Math.abs(ae.y)>W){var je=1/yt(Tt[ee][u],Tt[I][u]);Yt.x+=ae.x*je,Yt.y+=ae.y*je}}),Yt},f.prototype.isTicking=function(){return this.get("ticking")},f.prototype.getSimulation=function(){return this.get("forceSimulation")},f.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),kt.prototype.destroy.call(this)},f}(s),lt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),rt=function(){return(rt=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},z={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},P=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return lt(f,kt),f.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(n.c)(z),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"magnify"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"magnify"}}return u},f.prototype.init=function(){var u=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",u*u);var I=this.get("d");this.set("molecularParam",(I+1)*u)},f.prototype.createDelegate=function(u){var I=this,W=this,st=W.get("delegate");st&&!st.destroyed||(W.magnify(u),(st=W.get("delegate")).on("dragstart",function(Tt){W.set("delegateCenterDiff",{x:st.attr("x")-Tt.x,y:st.attr("y")-Tt.y})}),st.on("drag",function(Tt){W.magnify(Tt)}),this.get("scaleDBy")==="wheel"&&st.on("mousewheel",function(Tt){I.scaleDByWheel(Tt)}),this.get("scaleRBy")==="wheel"&&st.on("mousewheel",function(Tt){W.scaleRByWheel(Tt)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),st=this.get("delegate"),Tt=(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY);I=u.originalEvent.wheelDelta<0?.95:1/.95;var Ft=this.get("maxR"),Yt=this.get("minR"),ee=this.get("r");(ee>(Ft||W.get("height"))&&I>1||ee<(Yt||.05*W.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.set("delegateCenterDiff",void 0),this.magnify(u,Tt)}},f.prototype.scaleRByDrag=function(u){if(u){var I,W=this.get("dragPrePos"),st=this.get("graph"),Tt=st.getPointByClient(u.clientX,u.clientY);I=u.x-W.x<0?.95:1/.95;var Ft=this.get("maxR"),Yt=this.get("minR"),ee=this.get("r");(ee>(Ft||st.get("height"))&&I>1||ee<(Yt||.05*st.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.magnify(u,Tt),this.set("dragPrePos",{x:u.x,y:u.y})}},f.prototype.scaleDByWheel=function(u){if(u||u.originalEvent){u.preventDefault&&u.preventDefault();var I=0;I=u.originalEvent.wheelDelta<0?-.1:.1;var W=this.get("d")+I,st=this.get("maxD"),Tt=this.get("minD");if(W<st&&W>Tt){this.set("d",W);var Ft=this.get("r");this.set("molecularParam",(W+1)*Ft);var Yt=this.get("delegate"),ee=Yt?{x:Yt.attr("x"),y:Yt.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(u,ee)}}},f.prototype.scaleDByDrag=function(u){var I=this.get("dragPrePos"),W=u.x-I.x>0?.1:-.1,st=this.get("d")+W,Tt=this.get("maxD"),Ft=this.get("minD");if(st<Tt&&st>Ft){this.set("d",st);var Yt=this.get("r");this.set("molecularParam",(st+1)*Yt),this.magnify(u)}this.set("dragPrePos",{x:u.x,y:u.y})},f.prototype.magnify=function(u,I){this.restoreCache();var W=this.get("graph"),st=this.get("cachedMagnifiedModels"),Tt=this.get("cachedOriginPositions"),Ft=this.get("showLabel"),Yt=this.get("r"),ee=this.get("r2"),ae=this.get("d"),je=this.get("molecularParam"),Fe=W.getNodes(),Ue=Fe.length,He=I?{x:I.x,y:I.y}:{x:u.x,y:u.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(He=this.get("cacheCenter"));var bn=this.get("delegateCenterDiff");bn&&(He.x+=bn.x,He.y+=bn.y),this.updateDelegate(He,Yt);for(var wn=0;wn<Ue;wn++){var Nn=Fe[wn].getModel(),Bn=Nn.x,Fn=Nn.y;if(!isNaN(Bn)&&!isNaN(Fn)){var sr=(Bn-He.x)*(Bn-He.x)+(Fn-He.y)*(Fn-He.y);if(!isNaN(sr)&&sr<ee&&sr!==0){var ur=Math.sqrt(sr),Or=je*ur/(ae*ur+Yt),ei=(Bn-He.x)/ur,Ti=(Fn-He.y)/ur;if(Nn.x=ei*Or+He.x,Nn.y=Ti*Or+He.y,Tt[Nn.id]||(Tt[Nn.id]={x:Bn,y:Fn,texts:[]}),st.push(Nn),Ft&&2*ur<Yt)for(var kr=Fe[wn].getContainer().getChildren(),yi=kr.length,oo=0;oo<yi;oo++){var so=kr[oo];so.get("type")==="text"&&(Tt[Nn.id].texts.push({visible:so.get("visible"),shape:so}),so.set("visible",!0))}}}}W.refreshPositions()},f.prototype.restoreCache=function(){for(var u=this.get("cachedMagnifiedModels"),I=this.get("cachedOriginPositions"),W=u.length,st=0;st<W;st++){var Tt=u[st],Ft=I[Tt.id];Tt.x=Ft.x,Tt.y=Ft.y;for(var Yt=Ft.texts.length,ee=0;ee<Yt;ee++){var ae=Ft.texts[ee];ae.shape.set("visible",ae.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},f.prototype.updateParams=function(u){var I=u.r,W=u.d,st=u.trigger,Tt=u.minD,Ft=u.maxD,Yt=u.minR,ee=u.maxR,ae=u.scaleDBy,je=u.scaleRBy;isNaN(u.r)||(this.set("r",I),this.set("r2",I*I)),isNaN(W)||this.set("d",W),isNaN(Ft)||this.set("maxD",Ft),isNaN(Tt)||this.set("minD",Tt),isNaN(ee)||this.set("maxR",ee),isNaN(Yt)||this.set("minR",Yt);var Fe,Ue=this.get("d"),He=this.get("r");this.set("molecularParam",(Ue+1)*He),st!=="mousemove"&&st!=="click"&&st!=="drag"||this.set("trigger",st),(ae==="drag"||ae==="wheel"||ae==="unset")&&(this.set("scaleDBy",ae),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy())),je!=="drag"&&je!=="wheel"&&je!=="unset"||(this.set("scaleRBy",je),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy()))},f.prototype.updateDelegate=function(u,I){var W=this,st=this,Tt=st.get("graph"),Ft=st.get("delegate");if(!Ft||Ft.destroyed){var Yt=Tt.get("group"),ee=st.get("delegateStyle")||z;Ft=Yt.addShape("circle",{attrs:rt({r:I/1.5,x:u.x,y:u.y},ee),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?Ft.on("mousewheel",function(Ue){st.scaleRByWheel(Ue)}):this.get("scaleRBy")==="drag"&&(Ft.on("dragstart",function(Ue){st.set("dragging",!0),st.set("cacheCenter",{x:Ue.x,y:Ue.y}),st.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Ft.on("drag",function(Ue){st.scaleRByDrag(Ue)}),Ft.on("dragend",function(Ue){st.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?Ft.on("mousewheel",function(Ue){W.scaleDByWheel(Ue)}):this.get("scaleDBy")==="drag"&&(Ft.on("dragstart",function(Ue){st.set("dragging",!0),st.set("cacheCenter",{x:Ue.x,y:Ue.y}),st.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Ft.on("drag",function(Ue){W.scaleDByDrag(Ue)}),Ft.on("dragend",function(Ue){st.set("dragging",!1)})))}else Ft.attr({x:u.x,y:u.y,r:I/1.5});if(st.get("showDPercent")){var ae=Math.round((st.get("d")-st.get("minD"))/(st.get("maxD")-st.get("minD"))*100),je=st.get("dPercentText"),Fe=u.y+I/1.5+16;!je||je.destroyed?(je=Tt.get("group").addShape("text",{attrs:{text:ae+"%",x:u.x,y:Fe,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),st.set("dPercentText",je)):je.attr({text:ae+"%",x:u.x,y:Fe})}st.set("delegate",Ft)},f.prototype.clear=function(){var u=this.get("graph");this.restoreCache(),u.refreshPositions();var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy());var W=this.get("dPercentText");W&&!W.destroyed&&(W.remove(),W.destroy())},f.prototype.destroy=function(){this.clear()},f}(s),Y=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var k=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Y(f,kt),f.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(I){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},f.prototype.init=function(){var u=this,I=this.get("graph"),W=this.get("getContent")(I),st=W;Object(n.x)(W)&&(st=Object(y.b)(W));var Tt=this.get("className");st.setAttribute("class",Tt||"g6-component-toolbar");var Ft=this.get("container");Ft||(Ft=this.get("graph").get("container")),Object(n.x)(Ft)&&(Ft=document.getElementById(Ft)),Ft.appendChild(st),this.set("toolBar",st);var Yt=this.get("handleClick");st.addEventListener("click",function(ae){var je=function(Ue){if(!Ue)return[];if(Ue.composedPath)return Ue.composedPath();for(var He=[],bn=Ue.target;bn;){if(He.push(bn),bn.tagName==="HTML")return He.push(document,window),He;bn=bn.parentElement}return He}(ae).filter(function(Ue){return Ue.nodeName==="LI"});if(je.length!==0){var Fe=je[0].getAttribute("code");Fe&&(Yt?Yt(Fe,I):u.handleDefaultOperator(Fe,I))}});var ee=this.get("position");ee&&Object(y.c)(st,{top:ee.y+"px",left:ee.x+"px"}),this.bindUndoRedo()},f.prototype.bindUndoRedo=function(){var u=this.get("graph"),I=document.querySelector('.g6-component-toolbar li[code="undo"]'),W=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),st=document.querySelector('.g6-component-toolbar li[code="redo"]'),Tt=document.querySelector('.g6-component-toolbar li[code="redo"] svg');I&&W&&st&&Tt&&u.on("stackchange",function(Ft){var Yt=Ft.undoStack,ee=Ft.redoStack,ae=Yt.length,je=ee.length;ae===1?(I.setAttribute("style","cursor: not-allowed"),W.setAttribute("style","opacity: 0.4")):(I.removeAttribute("style"),W.removeAttribute("style")),je===0?(st.setAttribute("style","cursor: not-allowed"),Tt.setAttribute("style","opacity: 0.4")):(st.removeAttribute("style"),Tt.removeAttribute("style"))})},f.prototype.undo=function(){var u=this.get("graph"),I=u.getUndoStack();if(I&&I.length!==0){var W=I.pop();if(W){var st=W.action;u.pushStack(st,Object(n.c)(W.data),"redo");var Tt=W.data.before;if(st==="add"&&(Tt=W.data.after),!Tt)return;switch(st){case"visible":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Tt,!1);break;case"delete":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"add":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){u.removeItem(ee.id,!1)})});break;case"updateComboTree":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.redo=function(){var u=this.get("graph"),I=u.getRedoStack();if(I&&I.length!==0){var W=I.pop();if(W){var st=W.action,Tt=W.data.after;if(u.pushStack(st,Object(n.c)(W.data)),st==="delete"&&(Tt=W.data.before),!Tt)return;switch(st){case"visible":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Tt,!1);break;case"delete":Tt.edges&&Tt.edges.forEach(function(Ft){u.removeItem(Ft.id,!1)}),Tt.nodes&&Tt.nodes.forEach(function(Ft){u.removeItem(Ft.id,!1)}),Tt.combos&&Tt.combos.forEach(function(Ft){u.removeItem(Ft.id,!1)});break;case"add":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"updateComboTree":Object.keys(Tt).forEach(function(Ft){var Yt=Tt[Ft];Yt&&Yt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.handleDefaultOperator=function(u,I){var W=I.getZoom();switch(u){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var st=1/(1-.05*this.get("zoomSensitivity"));if(st*W>(this.get("maxZoom")||I.get("maxZoom")))return;I.zoomTo(W*st);break;case"zoomIn":var Tt=1-.05*this.get("zoomSensitivity");if(Tt*W<(this.get("minZoom")||I.get("minZoom")))return;I.zoomTo(W*Tt);break;case"realZoom":I.zoomTo(1);break;case"autoZoom":I.fitView([20,20])}},f.prototype.destroy=function(){var u=this.get("toolBar");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}var W=this.get("handleClick");W&&u.removeEventListener("click",W)},f}(s),h=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var g=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return h(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(I){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+I.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+I.item.getID()+`</span>
        `},shouldBegin:function(I){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},f.prototype.init=function(){var u=this.get("className")||"g6-component-tooltip",I=Object(y.b)("<div class="+u+"></div>"),W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),Object(y.c)(I,{position:"absolute",visibility:"hidden"}),W.appendChild(I),this.set("tooltip",I)},f.prototype.onMouseEnter=function(u){var I=this.get("itemTypes");if(!u.item||!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=u.item,st=this.get("graph");this.currentTarget=W,this.showTooltip(u),st.emit("tooltipchange",{item:u.item,action:"show"})}},f.prototype.onMouseMove=function(u){var I=this.get("itemTypes");u.item&&u.item.getType&&I.indexOf(u.item.getType())===-1||this.currentTarget&&u.item===this.currentTarget&&this.showTooltip(u)},f.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},f.prototype.showTooltip=function(u){if(u.item){var I=this.get("itemTypes");if(!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=this.get("tooltip"),st=this.get("getContent")(u);Object(n.x)(st)?W.innerHTML=st:W.innerHTML=st.outerHTML,this.updatePosition(u)}}},f.prototype.hideTooltip=function(){var u=this.get("tooltip");u&&Object(y.c)(u,{visibility:"hidden"})},f.prototype.updatePosition=function(u){var I=this.get("shouldBegin"),W=this.get("tooltip");if(I(u)){var st=this.get("graph"),Tt=st.get("width"),Ft=st.get("height"),Yt=this.get("offsetX")||0,ee=this.get("offsetY")||0,ae=st.getPointByClient(u.clientX,u.clientY),je=st.getCanvasByPoint(ae.x,ae.y),Fe=je.x,Ue=je.y;Fe+=Yt,Ue+=ee;var He=W.getBoundingClientRect();Fe+He.width>Tt&&(Fe=Fe-He.width-Yt),Ue+He.height>Ft&&(Ue=Ue-He.height-ee),Object(y.c)(W,{left:Fe+"px",top:Ue+"px",visibility:"visible"})}else Object(y.c)(W,{visibility:"hidden"})},f.prototype.hide=function(){this.onMouseLeave()},f.prototype.destroy=function(){var u=this.get("tooltip");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),B=e(31),V={};function q(kt,f){V[kt]=f}var it=function(){function kt(f){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=f,this.initCfg(),this.init()}return kt.prototype.translate=function(f){return f},kt.prototype.change=function(f){Object(n.a)(this.__cfg__,f),this.init()},kt.prototype.clone=function(){return this.constructor(this.__cfg__)},kt.prototype.getTicks=function(){var f=this;return Object(n.z)(this.ticks,function(u,I){return Object(n.v)(u)?u:{text:f.getText(u,I),tickValue:u,value:f.scale(u)}})},kt.prototype.getText=function(f,u){var I=this.formatter,W=I?I(f,u):f;return Object(n.s)(W)||!Object(n.r)(W.toString)?"":W.toString()},kt.prototype.getConfig=function(f){return this.__cfg__[f]},kt.prototype.init=function(){Object(n.a)(this,this.__cfg__),this.setDomain(),Object(n.p)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},kt.prototype.initCfg=function(){},kt.prototype.setDomain=function(){},kt.prototype.calculateTicks=function(){var f=this.tickMethod,u=[];if(Object(n.x)(f)){var I=V[f];if(!I)throw new Error("There is no method to to calculate ticks!");u=I(this)}else Object(n.r)(f)&&(u=f(this));return u},kt.prototype.rangeMin=function(){return Object(n.k)(this.range)},kt.prototype.rangeMax=function(){return Object(n.y)(this.range)},kt.prototype.calcPercent=function(f,u,I){return Object(n.t)(f)?(f-u)/(I-u):NaN},kt.prototype.calcValue=function(f,u,I){return u+f*(I-u)},kt}(),ot=e(1),At=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="cat",u.isCategory=!0,u.cache=new Map,u}return Object(ot.b)(f,kt),f.prototype.translate=function(u){if(this.cache.has(u))return this.cache.get(u);var I=Object(n.l)(this.values,u);return I===-1&&(I=Object(n.t)(u)?u:NaN),this.cache.set(u,I),I},f.prototype.scale=function(u){var I=this.translate(u),W=this.calcPercent(I,this.min,this.max);return this.calcValue(W,this.rangeMin(),this.rangeMax())},f.prototype.invert=function(u){var I=this.max-this.min,W=this.calcPercent(u,this.rangeMin(),this.rangeMax()),st=Math.round(I*W)+this.min;return st<this.min||st>this.max?NaN:this.values[st]},f.prototype.getText=function(u){for(var I=[],W=1;W<arguments.length;W++)I[W-1]=arguments[W];var st=u;return Object(n.t)(u)&&!this.values.includes(u)&&(st=this.values[st]),kt.prototype.getText.apply(this,Object(ot.d)([st],I))},f.prototype.initCfg=function(){this.tickMethod="cat"},f.prototype.setDomain=function(){if(Object(n.s)(this.getConfig("min"))&&(this.min=0),Object(n.s)(this.getConfig("max"))){var u=this.values.length;this.max=u>1?u-1:u}this.cache&&this.cache.clear()},f}(it),gt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,mt="[^\\s]+",Ot=/\[([^]*?)\]/gm;function It(kt,f){for(var u=[],I=0,W=kt.length;I<W;I++)u.push(kt[I].substr(0,f));return u}var Dt=function(f){return function(u,I){var W=I[f].map(function(st){return st.toLowerCase()}).indexOf(u.toLowerCase());return W>-1?W:null}};function Ut(kt){for(var f=[],u=1;u<arguments.length;u++)f[u-1]=arguments[u];for(var I=0,W=f;I<W.length;I++){var st=W[I];for(var Tt in st)kt[Tt]=st[Tt]}return kt}var Ct=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Vt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ht=It(Vt,3),re={dayNamesShort:It(Ct,3),dayNames:Ct,monthNamesShort:Ht,monthNames:Vt,amPm:["am","pm"],DoFn:function(f){return f+["th","st","nd","rd"][f%10>3?0:(f-f%10!=10?1:0)*f%10]}},pe=Ut({},re),ye=function(f){return pe=Ut(pe,f)},we=function(f){return f.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ne=function(f,u){for(u===void 0&&(u=2),f=String(f);f.length<u;)f="0"+f;return f},Ke={D:function(f){return String(f.getDate())},DD:function(f){return Ne(f.getDate())},Do:function(f,u){return u.DoFn(f.getDate())},d:function(f){return String(f.getDay())},dd:function(f){return Ne(f.getDay())},ddd:function(f,u){return u.dayNamesShort[f.getDay()]},dddd:function(f,u){return u.dayNames[f.getDay()]},M:function(f){return String(f.getMonth()+1)},MM:function(f){return Ne(f.getMonth()+1)},MMM:function(f,u){return u.monthNamesShort[f.getMonth()]},MMMM:function(f,u){return u.monthNames[f.getMonth()]},YY:function(f){return Ne(String(f.getFullYear()),4).substr(2)},YYYY:function(f){return Ne(f.getFullYear(),4)},h:function(f){return String(f.getHours()%12||12)},hh:function(f){return Ne(f.getHours()%12||12)},H:function(f){return String(f.getHours())},HH:function(f){return Ne(f.getHours())},m:function(f){return String(f.getMinutes())},mm:function(f){return Ne(f.getMinutes())},s:function(f){return String(f.getSeconds())},ss:function(f){return Ne(f.getSeconds())},S:function(f){return String(Math.round(f.getMilliseconds()/100))},SS:function(f){return Ne(Math.round(f.getMilliseconds()/10),2)},SSS:function(f){return Ne(f.getMilliseconds(),3)},a:function(f,u){return f.getHours()<12?u.amPm[0]:u.amPm[1]},A:function(f,u){return f.getHours()<12?u.amPm[0].toUpperCase():u.amPm[1].toUpperCase()},ZZ:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+Ne(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4)},Z:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+Ne(Math.floor(Math.abs(u)/60),2)+":"+Ne(Math.abs(u)%60,2)}},pn=function(f){return+f-1},hn=[null,"[1-9]\\d?"],kn=[null,mt],Tn=["isPm",mt,function(kt,f){var u=kt.toLowerCase();return u===f.amPm[0]?0:u===f.amPm[1]?1:null}],Rn=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(kt){var f=(kt+"").match(/([+-]|\d\d)/gi);if(f){var u=60*+f[1]+parseInt(f[2],10);return f[0]==="+"?u:-u}return 0}],Mn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+mt,function(kt){return parseInt(kt,10)}],M:["month","[1-9]\\d?",pn],MM:["month","\\d\\d",pn],YY:["year","\\d\\d",function(kt){var f=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+kt>68?f-1:f)+kt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(kt){return 100*+kt}],SS:["millisecond","\\d\\d",function(kt){return 10*+kt}],SSS:["millisecond","\\d{3}"],d:hn,dd:hn,ddd:kn,dddd:kn,MMM:["month",mt,Dt("monthNamesShort")],MMMM:["month",mt,Dt("monthNames")],a:Tn,A:Tn,ZZ:Rn,Z:Rn},Cn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},_n=function(f){return Ut(Cn,f)},Kn=function(f,u,I){if(u===void 0&&(u=Cn.default),I===void 0&&(I={}),typeof f=="number"&&(f=new Date(f)),Object.prototype.toString.call(f)!=="[object Date]"||isNaN(f.getTime()))throw new Error("Invalid Date pass to format");var W=[];u=(u=Cn[u]||u).replace(Ot,function(Tt,Ft){return W.push(Ft),"@@@"});var st=Ut(Ut({},pe),I);return(u=u.replace(gt,function(Tt){return Ke[Tt](f,st)})).replace(/@@@/g,function(){return W.shift()})};function tr(kt,f,u){if(u===void 0&&(u={}),typeof f!="string")throw new Error("Invalid format in fecha parse");if(f=Cn[f]||f,kt.length>1e3)return null;var I={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},W=[],st=[],Tt=f.replace(Ot,function(Fn,sr){return st.push(we(sr)),"@@@"}),Ft={},Yt={};Tt=we(Tt).replace(gt,function(Fn){var sr=Mn[Fn],ur=sr[0],Or=sr[1],ei=sr[3];if(Ft[ur])throw new Error("Invalid format. "+ur+" specified twice in format");return Ft[ur]=!0,ei&&(Yt[ei]=!0),W.push(sr),"("+Or+")"}),Object.keys(Yt).forEach(function(Fn){if(!Ft[Fn])throw new Error("Invalid format. "+Fn+" is required in specified format")}),Tt=Tt.replace(/@@@/g,function(){return st.shift()});var ee=kt.match(new RegExp(Tt,"i"));if(!ee)return null;for(var ae=Ut(Ut({},pe),u),je=1;je<ee.length;je++){var Fe=W[je-1],Ue=Fe[0],He=Fe[2],bn=He?He(ee[je],ae):+ee[je];if(bn==null)return null;I[Ue]=bn}I.isPm===1&&I.hour!=null&&+I.hour!=12?I.hour=+I.hour+12:I.isPm===0&&+I.hour==12&&(I.hour=0);for(var wn=new Date(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond),Nn=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Bn=(je=0,Nn.length);je<Bn;je++)if(Ft[Nn[je][0]]&&I[Nn[je][0]]!==wn[Nn[je][1]]())return null;return I.timezoneOffset==null?wn:new Date(Date.UTC(I.year,I.month,I.day,I.hour,I.minute-I.timezoneOffset,I.second,I.millisecond))}var or={format:Kn,parse:tr,defaultI18n:re,setGlobalDateI18n:ye,setGlobalDateMasks:_n};function nr(kt,f){return(p.format||or.format)(kt,f)}function er(kt){return Object(n.x)(kt)&&(kt=kt.indexOf("T")>0?new Date(kt).getTime():new Date(kt.replace(/-/gi,"/")).getTime()),Object(n.o)(kt)&&(kt=kt.getTime()),kt}var Sr=36e5,Vr=24*Sr,ti=31*Vr,hi=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Sr],["HH",6*Sr],["HH",12*Sr],["YYYY-MM-DD",Vr],["YYYY-MM-DD",4*Vr],["YYYY-WW",7*Vr],["YYYY-MM",ti],["YYYY-MM",4*ti],["YYYY-MM",6*ti],["YYYY",380*Vr]];function Fi(kt,f,u){var I,W=(I=function(Ft){return Ft[1]},function(Tt,Ft,Yt,ee){for(var ae=Object(n.s)(Yt)?0:Yt,je=Object(n.s)(ee)?Tt.length:ee;ae<je;){var Fe=ae+je>>>1;I(Tt[Fe])>Ft?je=Fe:ae=Fe+1}return ae})(hi,(f-kt)/u)-1,st=hi[W];return W<0?st=hi[0]:W>=hi.length&&(st=Object(n.y)(hi)),st}var to=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="timeCat",u}return Object(ot.b)(f,kt),f.prototype.translate=function(u){u=er(u);var I=this.values.indexOf(u);return I===-1&&(I=Object(n.t)(u)&&u<this.values.length?u:NaN),I},f.prototype.getText=function(u,I){var W=this.translate(u);if(W>-1){var st=this.values[W],Tt=this.formatter;return st=Tt?Tt(st,I):nr(st,this.mask)}return u},f.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},f.prototype.setDomain=function(){var u=this.values;Object(n.f)(u,function(I,W){u[W]=er(I)}),u.sort(function(I,W){return I-W}),kt.prototype.setDomain.call(this)},f}(At),si=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.isContinuous=!0,u}return Object(ot.b)(f,kt),f.prototype.scale=function(u){if(Object(n.s)(u))return NaN;var I=this.rangeMin(),W=this.rangeMax();return this.max===this.min?I:I+this.getScalePercent(u)*(W-I)},f.prototype.init=function(){kt.prototype.init.call(this);var u=this.ticks,I=Object(n.k)(u),W=Object(n.y)(u);I<this.min&&(this.min=I),W>this.max&&(this.max=W),Object(n.s)(this.minLimit)||(this.min=I),Object(n.s)(this.maxLimit)||(this.max=W)},f.prototype.setDomain=function(){var u=Object(n.j)(this.values),I=u.min,W=u.max;Object(n.s)(this.min)&&(this.min=I),Object(n.s)(this.max)&&(this.max=W),this.min>this.max&&(this.min=I,this.max=W)},f.prototype.calculateTicks=function(){var u=this,I=kt.prototype.calculateTicks.call(this);return this.nice||(I=Object(n.g)(I,function(W){return W>=u.min&&W<=u.max})),I},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;return(u-W)/(I-W)},f.prototype.getInvertPercent=function(u){return(u-this.rangeMin())/(this.rangeMax()-this.rangeMin())},f}(it),Ci=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="linear",u.isLinear=!0,u}return Object(ot.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u);return this.min+I*(this.max-this.min)},f.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},f}(si);function Ui(kt,f){var u=Math.E;return f>=0?Math.pow(u,Math.log(f)/kt):-1*Math.pow(u,Math.log(-f)/kt)}function Li(kt,f){return kt===1?1:Math.log(f)/Math.log(kt)}function Vi(kt,f,u){Object(n.s)(u)&&(u=Math.max.apply(null,kt));var I=u;return Object(n.f)(kt,function(W){W>0&&W<I&&(I=W)}),I===u&&(I=u/f),I>1&&(I=1),I}var ro=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="log",u}return Object(ot.b)(f,kt),f.prototype.invert=function(u){var I,W=this.base,st=Li(W,this.max),Tt=this.rangeMin(),Ft=this.rangeMax()-Tt,Yt=this.positiveMin;if(Yt){if(u===0)return 0;var ee=1/(st-(I=Li(W,Yt/W)))*Ft;if(u<ee)return u/ee*Yt}else I=Li(W,this.min);var ae=(u-Tt)/Ft*(st-I)+I;return Math.pow(W,ae)},f.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},f.prototype.setDomain=function(){kt.prototype.setDomain.call(this);var u=this.min;if(u<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");u===0&&(this.positiveMin=Vi(this.values,this.base,this.max))},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W||u<=0)return 0;var st=this.base,Tt=this.positiveMin;return Tt&&(W=1*Tt/st),u<Tt?u/Tt/(Li(st,I)-Li(st,W)):(Li(st,u)-Li(st,W))/(Li(st,I)-Li(st,W))},f}(si),jr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="pow",u}return Object(ot.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u),W=this.exponent,st=Ui(W,this.max),Tt=Ui(W,this.min),Ft=I*(st-Tt)+Tt,Yt=Ft>=0?1:-1;return Math.pow(Ft,W)*Yt},f.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W)return 0;var st=this.exponent;return(Ui(st,u)-Ui(st,W))/(Ui(st,I)-Ui(st,W))},f}(si),Ji=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="time",u}return Object(ot.b)(f,kt),f.prototype.getText=function(u,I){var W=this.translate(u),st=this.formatter;return st?st(W,I):nr(W,this.mask)},f.prototype.scale=function(u){var I=u;return(Object(n.x)(I)||Object(n.o)(I))&&(I=this.translate(I)),kt.prototype.scale.call(this,I)},f.prototype.translate=function(u){return er(u)},f.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},f.prototype.setDomain=function(){var u=this.values,I=this.getConfig("min"),W=this.getConfig("max");if(Object(n.s)(I)&&Object(n.t)(I)||(this.min=this.translate(this.min)),Object(n.s)(W)&&Object(n.t)(W)||(this.max=this.translate(this.max)),u&&u.length){var st=[],Tt=1/0,Ft=Tt,Yt=0;Object(n.f)(u,function(ee){var ae=er(ee);if(isNaN(ae))throw new TypeError("Invalid Time: "+ee+" in time scale!");Tt>ae?(Ft=Tt,Tt=ae):Ft>ae&&(Ft=ae),Yt<ae&&(Yt=ae),st.push(ae)}),u.length>1&&(this.minTickInterval=Ft-Tt),Object(n.s)(I)&&(this.min=Tt),Object(n.s)(W)&&(this.max=Yt)}},f}(Ci),pr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantize",u}return Object(ot.b)(f,kt),f.prototype.invert=function(u){var I=this.ticks,W=I.length,st=this.getInvertPercent(u),Tt=Math.floor(st*(W-1));if(Tt>=W-1)return Object(n.y)(I);if(Tt<0)return Object(n.k)(I);var Ft=I[Tt],Yt=Tt/(W-1);return Ft+(st-Yt)/((Tt+1)/(W-1)-Yt)*(I[Tt+1]-Ft)},f.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},f.prototype.calculateTicks=function(){var u=kt.prototype.calculateTicks.call(this);return this.nice||(Object(n.y)(u)!==this.max&&u.push(this.max),Object(n.k)(u)!==this.min&&u.unshift(this.min)),u},f.prototype.getScalePercent=function(u){var I=this.ticks;if(u<Object(n.k)(I))return 0;if(u>Object(n.y)(I))return 1;var W=0;return Object(n.f)(I,function(st,Tt){if(!(u>=st))return!1;W=Tt}),W/(I.length-1)},f}(si),Xr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantile",u}return Object(ot.b)(f,kt),f.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},f}(pr),Br={};function Nr(kt,f){if(function(u){return Br[u]}(kt))throw new Error("type '"+kt+"' existed.");Br[kt]=f}var Yr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="identity",u.isIdentity=!0,u}return Object(ot.b)(f,kt),f.prototype.calculateTicks=function(){return this.values},f.prototype.scale=function(u){return this.values[0]!==u&&Object(n.t)(u)?u:this.range[0]},f.prototype.invert=function(u){var I=this.range;return u<I[0]||u>I[1]?NaN:this.values[0]},f}(it),Kr=[1,5,2,2.5,4,3],ni=100*Number.EPSILON;function fi(kt,f,u,I,W,st){var Tt=Object(n.E)(f),Ft=Object(n.l)(f,kt),Yt=0,ee=function(ae,je){return(ae%je+je)%je}(I,st);return(ee<ni||st-ee<ni)&&I<=0&&W>=0&&(Yt=1),1-Ft/(Tt-1)-u+Yt}function $r(kt,f,u){var I=Object(n.E)(f);return 1-Object(n.l)(f,kt)/(I-1)-u+1}function ci(kt,f,u,I,W,st){var Tt=(kt-1)/(st-W),Ft=(f-1)/(Math.max(st,I)-Math.min(u,W));return 2-Math.max(Tt/Ft,Ft/Tt)}function Qr(kt,f){return kt>=f?2-(kt-1)/(f-1):1}function gi(kt,f,u,I){var W=f-kt;return 1-.5*(Math.pow(f-I,2)+Math.pow(kt-u,2))/Math.pow(.1*W,2)}function Oi(kt,f,u){var I=f-kt;if(u>I){var W=(u-I)/2;return 1-Math.pow(W,2)/Math.pow(.1*I,2)}return 1}function bi(kt,f,u,I,W,st){if(u===void 0&&(u=5),I===void 0&&(I=!0),W===void 0&&(W=Kr),st===void 0&&(st=[.25,.2,.5,.05]),typeof kt!="number"||typeof f!="number")return{min:0,max:0,ticks:[]};if(kt===f||u===1)return{min:kt,max:f,ticks:[kt]};for(var Tt={score:-2,lmin:0,lmax:0,lstep:0},Ft=1;Ft<1/0;){for(var Yt=0,ee=W;Yt<ee.length;Yt++){var ae=ee[Yt],je=$r(ae,W,Ft);if(Number.isNaN(je))throw new Error("NaN");if(st[0]*je+st[1]+st[2]+st[3]<Tt.score){Ft=1/0;break}for(var Fe=2;Fe<1/0;){var Ue=Qr(Fe,u);if(st[0]*je+st[1]+st[2]*Ue+st[3]<Tt.score)break;for(var He=(f-kt)/(Fe+1)/Ft/ae,bn=Math.ceil(Math.log10(He));bn<1/0;){var wn=Ft*ae*Math.pow(10,bn),Nn=Oi(kt,f,wn*(Fe-1));if(st[0]*je+st[1]*Nn+st[2]*Ue+st[3]<Tt.score)break;var Bn=Math.floor(f/wn)*Ft-(Fe-1)*Ft,Fn=Math.ceil(kt/wn)*Ft;if(Bn>Fn)bn+=1;else{for(var sr=Bn;sr<=Fn;sr+=1){var ur=sr*(wn/Ft),Or=ur+wn*(Fe-1),ei=wn,Ti=fi(ae,W,Ft,ur,Or,ei),kr=gi(kt,f,ur,Or),yi=ci(Fe,u,kt,f,ur,Or),oo=st[0]*Ti+st[1]*kr+st[2]*yi+1*st[3];oo>Tt.score&&(!I||ur<=kt&&Or>=f)&&(Tt.lmin=ur,Tt.lmax=Or,Tt.lstep=ei,Tt.score=oo)}bn+=1}}Fe+=1}}Ft+=1}for(var so=Number.isInteger(Tt.lstep)?0:Math.ceil(Math.abs(Math.log10(Tt.lstep))),co=[],lo=Tt.lmin;lo<=Tt.lmax;lo+=Tt.lstep)co.push(lo);var Hi=so?Object(n.z)(co,function(Io){return Number.parseFloat(Io.toFixed(so))}):co;return{min:Math.min(kt,Object(n.k)(Hi)),max:Math.max(f,Object(n.y)(Hi)),ticks:Hi}}function zi(kt){var f=kt.values,u=kt.tickInterval,I=kt.tickCount,W=f;if(Object(n.t)(u))return Object(n.g)(W,function(Yt,ee){return ee%u==0});var st=kt.min,Tt=kt.max;if(Object(n.s)(st)&&(st=0),Object(n.s)(Tt)&&(Tt=f.length-1),Object(n.t)(I)&&I<Tt-st){var Ft=bi(st,Tt,I,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(n.g)(Ft,function(Yt){return Yt>=st&&Yt<=Tt}).map(function(Yt){return f[Yt]})}return f.slice(st,Tt+1)}var Qi=Math.sqrt(50),io=Math.sqrt(10),Wi=Math.sqrt(2),Zi=function(){function kt(){this._domain=[0,1]}return kt.prototype.domain=function(f){return f?(this._domain=Array.from(f,Number),this):this._domain.slice()},kt.prototype.nice=function(f){var u,I;f===void 0&&(f=5);var W,st=this._domain.slice(),Tt=0,Ft=this._domain.length-1,Yt=this._domain[Tt],ee=this._domain[Ft];return ee<Yt&&(Yt=(u=[ee,Yt])[0],ee=u[1],Tt=(I=[Ft,Tt])[0],Ft=I[1]),(W=Pi(Yt,ee,f))>0?W=Pi(Yt=Math.floor(Yt/W)*W,ee=Math.ceil(ee/W)*W,f):W<0&&(W=Pi(Yt=Math.ceil(Yt*W)/W,ee=Math.floor(ee*W)/W,f)),W>0?(st[Tt]=Math.floor(Yt/W)*W,st[Ft]=Math.ceil(ee/W)*W,this.domain(st)):W<0&&(st[Tt]=Math.ceil(Yt*W)/W,st[Ft]=Math.floor(ee*W)/W,this.domain(st)),this},kt.prototype.ticks=function(f){return f===void 0&&(f=5),function(u,I,W){var st,Tt,Ft,Yt,ee=-1;if(W=+W,(u=+u)==(I=+I)&&W>0)return[u];if((st=I<u)&&(Tt=u,u=I,I=Tt),(Yt=Pi(u,I,W))===0||!isFinite(Yt))return[];if(Yt>0)for(u=Math.ceil(u/Yt),I=Math.floor(I/Yt),Ft=new Array(Tt=Math.ceil(I-u+1));++ee<Tt;)Ft[ee]=(u+ee)*Yt;else for(u=Math.floor(u*Yt),I=Math.ceil(I*Yt),Ft=new Array(Tt=Math.ceil(u-I+1));++ee<Tt;)Ft[ee]=(u-ee)/Yt;return st&&Ft.reverse(),Ft}(this._domain[0],this._domain[this._domain.length-1],f||5)},kt}();function Pi(kt,f,u){var I=(f-kt)/Math.max(0,u),W=Math.floor(Math.log(I)/Math.LN10),st=I/Math.pow(10,W);return W>=0?(st>=Qi?10:st>=io?5:st>=Wi?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(st>=Qi?10:st>=io?5:st>=Wi?2:1)}function no(kt,f,u){return(u==="ceil"?Math.ceil(kt/f):u==="floor"?Math.floor(kt/f):Math.round(kt/f))*f}function Mo(kt,f,u){var I=no(kt,u,"floor"),W=no(f,u,"ceil");I=Object(n.h)(I,u),W=Object(n.h)(W,u);for(var st=[],Tt=I;Tt<=W;Tt+=u){var Ft=Object(n.h)(Tt,u);st.push(Ft)}return{min:I,max:W,ticks:st}}function ao(kt,f,u){var I,W=kt.minLimit,st=kt.maxLimit,Tt=kt.min,Ft=kt.max,Yt=kt.tickCount,ee=Yt===void 0?5:Yt,ae=Object(n.s)(W)?Object(n.s)(f)?Tt:f:W,je=Object(n.s)(st)?Object(n.s)(u)?Ft:u:st;if(ae>je&&(je=(I=[ae,je])[0],ae=I[1]),ee<=2)return[ae,je];for(var Fe=(je-ae)/(ee-1),Ue=[],He=0;He<ee;He++)Ue.push(ae+Fe*He);return Ue}function uo(kt,f,u){u===void 0&&(u=5);var I={max:0,min:0,ticks:[]};if(kt===f)return{max:f,min:kt,ticks:[kt]};var W=(f-kt)/u,st=Math.pow(10,Math.floor(Math.log10(W))),Tt=st<1?Math.ceil(Math.abs(Math.log10(st))):0,Ft=st;2*st-W<1.5*(W-Ft)&&5*st-W<2.75*(W-(Ft=2*st))&&10*st-W<1.5*(W-(Ft=5*st))&&(Ft=10*st);var Yt=Math.ceil(f/Ft),ee=Math.floor(kt/Ft);I.max=Math.max(Yt*Ft,f),I.min=Math.min(ee*Ft,kt);for(var ae=Number.parseFloat((ee*Ft).toFixed(Tt));ae<f;)I.ticks.push(ae),ae+=Ft,Tt&&(ae=Number.parseFloat(ae.toFixed(Tt)));return I.ticks.push(ae),I}function xo(kt,f){var u=kt.length*f;return f===1?kt[kt.length-1]:f===0?kt[0]:u%1!=0?kt[Math.ceil(u)-1]:kt.length%2==0?(kt[u-1]+kt[u])/2:kt[u]}function oe(kt){return new Date(kt).getFullYear()}function Kt(kt){return new Date(kt,0,1).getTime()}function te(kt){return new Date(kt).getMonth()}function Oe(kt,f){return new Date(kt,f,1).getTime()}q("cat",zi),q("time-cat",function(kt){var f=zi(kt),u=Object(n.y)(kt.values);return u!==Object(n.y)(f)&&f.push(u),f}),q("wilkinson-extended",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.nice,st=kt.tickInterval,Tt=kt.minLimit,Ft=kt.maxLimit,Yt=bi(f,u,I,W).ticks;return Object(n.s)(Tt)&&Object(n.s)(Ft)?st?Mo(f,u,st).ticks:Yt:ao(kt,Object(n.k)(Yt),Object(n.y)(Yt))}),q("r-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.tickInterval,st=kt.minLimit,Tt=kt.maxLimit,Ft=uo(f,u,I).ticks;return Object(n.s)(st)&&Object(n.s)(Tt)?W?Mo(f,u,W).ticks:Ft:ao(kt,Object(n.k)(Ft),Object(n.y)(Ft))}),q("time",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickInterval,st=kt.tickCount;if(W)st=Math.ceil((u-f)/W);else{var Tt=(u-f)/(W=Fi(f,u,st)[1])/st;Tt>1&&(W*=Math.ceil(Tt)),I&&W<I&&(W=I)}for(var Ft=[],Yt=f;Yt<u+W;Yt+=W)Ft.push(Yt);return Ft}),q("time-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickCount,st=kt.tickInterval,Tt=[];st||(st=(u-f)/W,I&&st<I&&(st=I));var Ft=oe(f);if(st>31536e6)for(var Yt=oe(u),ee=Math.ceil(st/31536e6),ae=Ft;ae<=Yt+ee;ae+=ee)Tt.push(Kt(ae));else if(st>ti){var je=Math.ceil(st/ti),Fe=te(f),Ue=function(co,lo){var Hi=oe(co),Io=oe(lo),ko=te(co);return 12*(Io-Hi)+(te(lo)-ko)%12}(f,u);for(ae=0;ae<=Ue+je;ae+=je)Tt.push(Oe(Ft,ae+Fe))}else if(st>Vr){var He=(Fn=new Date(f)).getFullYear(),bn=Fn.getMonth(),wn=Fn.getDate(),Nn=Math.ceil(st/Vr),Bn=function(co,lo){return Math.ceil((lo-co)/Vr)}(f,u);for(ae=0;ae<Bn+Nn;ae+=Nn)Tt.push(new Date(He,bn,wn+ae).getTime())}else if(st>Sr){He=(Fn=new Date(f)).getFullYear(),bn=Fn.getMonth(),Nn=Fn.getDate();var Fn,sr=Fn.getHours(),ur=Math.ceil(st/Sr),Or=function(co,lo){return Math.ceil((lo-co)/Sr)}(f,u);for(ae=0;ae<=Or+ur;ae+=ur)Tt.push(new Date(He,bn,Nn,sr+ae).getTime())}else if(st>6e4){var ei=function(co,lo){return Math.ceil((lo-co)/6e4)}(f,u),Ti=Math.ceil(st/6e4);for(ae=0;ae<=ei+Ti;ae+=Ti)Tt.push(f+6e4*ae)}else{var kr=st;kr<1e3&&(kr=1e3);var yi=1e3*Math.floor(f/1e3),oo=Math.ceil((u-f)/1e3),so=Math.ceil(kr/1e3);for(ae=0;ae<oo+so;ae+=so)Tt.push(yi+1e3*ae)}return Tt.length>=512&&console.warn("Notice: current ticks length("+Tt.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+st+") is too small, increase the value to solve the problem!"),Tt}),q("log",function(kt){var f,u=kt.base,I=kt.tickCount,W=kt.min,st=kt.max,Tt=kt.values,Ft=Li(u,st);if(W>0)f=Math.floor(Li(u,W));else{var Yt=Vi(Tt,u,st);f=Math.floor(Li(u,Yt))}for(var ee=Ft-f,ae=Math.ceil(ee/I),je=[],Fe=f;Fe<Ft+ae;Fe+=ae)je.push(Math.pow(u,Fe));return W<=0&&je.unshift(0),je}),q("pow",function(kt){var f=kt.exponent,u=kt.tickCount,I=Math.ceil(Ui(f,kt.max));return uo(Math.floor(Ui(f,kt.min)),I,u).ticks.map(function(W){var st=W>=0?1:-1;return Math.pow(W,f)*st})}),q("quantile",function(kt){var f=kt.tickCount,u=kt.values;if(!u||!u.length)return[];for(var I=u.slice().sort(function(Ft,Yt){return Ft-Yt}),W=[],st=0;st<f;st++){var Tt=st/(f-1);W.push(xo(I,Tt))}return W}),q("d3-linear",function(kt){var f=kt.min,u=kt.max,I=kt.tickInterval,W=kt.minLimit,st=kt.maxLimit,Tt=function(Ft){var Yt=Ft.min,ee=Ft.max,ae=Ft.nice,je=Ft.tickCount,Fe=new Zi;return Fe.domain([Yt,ee]),ae&&Fe.nice(je),Fe.ticks(je)}(kt);return Object(n.s)(W)&&Object(n.s)(st)?I?Mo(f,u,I).ticks:Tt:ao(kt,Object(n.k)(Tt),Object(n.y)(Tt))}),Nr("cat",At),Nr("category",At),Nr("identity",Yr),Nr("linear",Ci),Nr("log",ro),Nr("pow",jr),Nr("time",Ji),Nr("timeCat",to),Nr("quantize",pr),Nr("quantile",Xr);var Qe=function(){for(var f=0,u=0,I=arguments.length;u<I;u++)f+=arguments[u].length;var W=Array(f),st=0;for(u=0;u<I;u++)for(var Tt=arguments[u],Ft=0,Yt=Tt.length;Ft<Yt;Ft++,st++)W[st]=Tt[Ft];return W};function On(kt){return function(f){return Object(n.z)(f,function(u,I){return[I===0?"M":"L",u[0],u[1]]})}(kt)}function Vn(kt,f,u,I){I===void 0&&(I=!0);var W=new Ci({values:kt}),st=new At({values:Object(n.z)(kt,function(Ft,Yt){return Yt})}),Tt=Object(n.z)(kt,function(Ft,Yt){return[st.scale(Yt)*f,u-W.scale(Ft)*u]});return I?function(Ft){if(Ft.length<=2)return On(Ft);var Yt=[];Object(n.f)(Ft,function(Ue){Object(n.q)(Ue,Yt.slice(Yt.length-2))||Yt.push(Ue[0],Ue[1])});var ee=B.a(Yt,!1),ae=Object(n.k)(Ft),je=ae[0],Fe=ae[1];return ee.unshift(["M",je,Fe]),ee}(Tt):On(Tt)}function Yn(kt,f,u){for(var I=new Ci({values:kt}),W=new At({values:Object(n.z)(kt,function(ae,je){return je})}),st=Object(n.z)(kt,function(ae,je){return[W.scale(je)*f,u-I.scale(ae)*u]}),Tt=[],Ft=0;Ft<st.length;Ft++){var Yt=st[Ft],ee=rn({x:Yt[0],y:Yt[1],y0:u,size:5});Tt.push.apply(Tt,ee)}return function(ae,je){je===void 0&&(je=!0);var Fe=[],Ue=ae[0];Fe.push(["M",Ue.x,Ue.y]);for(var He=1,bn=ae.length;He<bn;He++)Fe.push(["L",ae[He].x,ae[He].y]);return je&&(Fe.push(["L",Ue.x,Ue.y]),Fe.push(["z"])),Fe}(Tt)}function $e(kt,f,u,I){var W=Qe(kt),st=function(Tt,Ft){var Yt=new Ci({values:Tt}),ee=Math.max(0,Yt.min);return Ft-Yt.scale(ee)*Ft}(I,u);return W.push(["L",f,st]),W.push(["L",0,st]),W.push(["Z"]),W}function rn(kt){var f,u,I,W,st=kt.x,Tt=kt.y,Ft=kt.y0,Yt=kt.size;Object(n.m)(Tt)?(f=Tt[0],u=Tt[1]):(f=Ft,u=Tt),Object(n.m)(st)?(I=st[0],W=st[1]):(I=st-Yt/2,W=st+Yt/2);var ee=[{x:I,y:f},{x:I,y:u}];return ee.push({x:W,y:u},{x:W,y:f}),ee}var on=function(){return(on=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},$n={stroke:"#C5C5C5",strokeOpacity:.85},vr={fill:"#CACED4",opacity:.85},ar=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,st=W===void 0?0:W,Tt=f.width,Ft=Tt===void 0?200:Tt,Yt=f.height,ee=Yt===void 0?26:Yt,ae=f.smooth,je=ae===void 0||ae,Fe=f.isArea,Ue=Fe!==void 0&&Fe,He=f.data,bn=He===void 0?[]:He,wn=f.lineStyle,Nn=f.areaStyle,Bn=f.group,Fn=f.interval,sr=Fn===void 0?null:Fn;this.group=Bn,this.x=I,this.y=st,this.width=Ft,this.height=ee,this.data=bn,this.smooth=je,this.isArea=Ue,this.lineStyle=Object.assign({},$n,wn),this.areaStyle=Object.assign({},vr,Nn),this.intervalConfig=sr,this.renderLine()}return kt.prototype.renderLine=function(){var f=this,u=f.x,I=f.y,W=f.width,st=f.height,Tt=f.data,Ft=f.smooth,Yt=f.isArea,ee=(f.backgroundStyle,f.lineStyle),ae=f.areaStyle,je=this.group.addGroup({name:"trend-group"});if(Tt){var Fe=Vn(Tt,W,st,Ft);if(je.addShape("path",{attrs:on({path:Fe},ee)}),Yt){var Ue=$e(Fe,W,st,Tt);je.addShape("path",{attrs:on({path:Ue},ae)})}}this.intervalConfig&&je.addShape("path",{attrs:on({path:Yn(this.intervalConfig.data,W,st)},this.intervalConfig.style)}),je.move(u,I)},kt.prototype.destory=function(){this.group.destroy()},kt}(),rr=function(){return(rr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Fr={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ar={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},wr=function(){function kt(f){var u=f.group,I=f.name,W=f.type,st=f.x,Tt=st===void 0?0:st,Ft=f.y,Yt=Ft===void 0?0:Ft,ee=f.width,ae=ee===void 0?2:ee,je=f.height,Fe=je===void 0?24:je,Ue=f.style,He=Ue===void 0?{}:Ue;this.group=u,this.name=I,this.handleType=W,this.x=Tt,this.y=Yt,this.width=ae,this.height=Fe,W==="trend"?this.style=rr(rr({},Fr),He):W==="simple"&&(this.style=rr(rr({},Ar),He)),this.renderHandle()}return kt.prototype.setX=function(f){this.setXY(f,void 0)},kt.prototype.setY=function(f){this.setXY(void 0,f)},kt.prototype.setXY=function(f,u){Object(n.t)(f)&&(this.x=f),Object(n.t)(u)&&(this.y=u),this.updateXY()},kt.prototype.renderHandle=function(){var f=this.width,u=this.height,I=this.style,W=this.name,st=I.fill,Tt=I.stroke,Ft=I.radius,Yt=I.opacity,ee=I.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:f,height:u,fill:st,stroke:Tt,radius:Ft,opacity:Yt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:0,r:2*f,fill:st,stroke:Tt,radius:Ft,opacity:Yt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u,r:2*f,fill:st,stroke:Tt,radius:Ft,opacity:Yt,cursor:ee},name:W+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:st,stroke:Tt,radius:Ft,opacity:Yt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:st,stroke:Tt,radius:Ft,opacity:Yt,cursor:ee},name:W+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.name;this.handleGroup.on(u+"-handler:mouseenter",function(){var I=f.style.highLightFill;f.background.attr("fill",I)}),this.handleGroup.on(u+"-handler:mouseleave",function(){var I=f.style.fill;f.background.attr("fill",I)})},kt.prototype.show=function(){this.handleGroup.show()},kt.prototype.hide=function(){this.handleGroup.hide()},kt.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},kt}(),xr=function(){return(xr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Er=function(){function kt(f){this.config=Object(n.e)({},f),this.init()}return kt.prototype.update=function(f){this.config=Object(n.e)({},this.config,f),this.updateElement(),this.renderMarker()},kt.prototype.init=function(){this.initElement(),this.renderMarker()},kt.prototype.initElement=function(){var f=this.config,u=f.group,I=f.style;this.circle=u.addShape("circle",{attrs:xr({x:this.config.x,y:this.config.y,r:this.config.r},I)}),this.startMarker=u.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=u.addGroup();var W=1/4*this.config.r,st=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:2.5*W,height:st,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"})},kt.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var f=1/4*this.config.r,u=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-u/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",u),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-u/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",u)},kt.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},kt.prototype.getStartMarkerPath=function(){var f=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-f/Math.sqrt(3)/2,this.config.y-f/2],["L",this.config.x+f/Math.sqrt(3),this.config.y],["L",this.config.x-f/Math.sqrt(3)/2,this.config.y+f/2]]},kt}(),Ir=function(){return(Ir=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Lr={fill:"#607889",stroke:"#607889"},Pr={fill:"#fff"},Dr={fill:"green"},ri={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},vi=function(){function kt(f){this.controllerCfg=Object(n.e)({},ri,f),this.group=f.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=f.fontFamily||"Arial, sans-serif",this.init()}return kt.prototype.init=function(){this.renderPlayButton()},kt.prototype.getNextMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f+I,u],["L",f,u+I]]},kt.prototype.getPreMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f-I,u],["L",f,u+I]]},kt.prototype.renderPlayButton=function(){var f=this.controllerCfg,u=f.width,I=f.height,W=f.x,st=f.y,Tt=f.hiddleToggle,Ft=f.fill,Yt=Ft===void 0?"#ccc":Ft,ee=f.stroke,ae=ee===void 0?"green":ee,je=f.playBtnStyle,Fe=je===void 0?Lr:je,Ue=f.preBtnStyle,He=Ue===void 0?Pr:Ue,bn=f.nextBtnStyle,wn=bn===void 0?Dr:bn,Nn=I/2-5,Bn=st+10,Fn=this.group.addShape("rect",{attrs:{x:W,y:Bn,width:u,height:I,stroke:ae,fill:Yt},name:"container-rect"});this.playButton?this.playButton.update({x:u/2,y:Bn,r:Nn}):this.playButton=new Er({group:this.group,x:u/2,y:Bn+Nn+5,r:Nn,isPlay:this.isPlay,style:Fe}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-5*Nn,Bn+Nn+5,.5*Nn)},He),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-4.5*Nn,Bn+Nn+5,.5*Nn)},He),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+4.5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),Fn.toBack(),this.renderSpeedBtn(),Tt||this.renderToggleTime(),this.bindEvent()},kt.prototype.renderSpeedBtn=function(){var f=this.controllerCfg,u=f.y,I=f.width,W=f.hiddleToggle,st=this.group.addGroup({name:"speed-group"});this.speedGroup=st;for(var Tt=1,Ft=[],Yt=9,ee=0;ee<5;ee++){var ae=u+15+ee*(ee+1)+Tt;st.addShape("rect",{attrs:{x:I-(W?50:110),y:ae,width:15,height:2,fill:"#ccc"},speed:Yt,name:"speed-rect"}),this.speedAxisY.push(ae),Ft.push(Yt),Yt-=2,Tt++}for(ee=0;ee<4;ee++)st.addShape("rect",{attrs:{x:I-(W?50:110),y:this.speedAxisY[ee]+2,width:15,height:2*ee+1,fill:"#fff",opacity:.3},speed:Ft[ee]-1,name:"speed-rect"});this.speedText=st.addShape("text",{attrs:{x:I-(W?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc",fontFamily:this.fontFamily||"Arial, sans-serif"}}),this.speedPoint=st.addShape("path",{attrs:{path:this.getPath(I-(W?50:110),this.speedAxisY[4]),fill:"#ccc"}})},kt.prototype.getPath=function(f,u){return[["M",f,u],["L",f-12,u-6],["L",f-12,u+6],["Z"]]},kt.prototype.renderToggleTime=function(){var f,u=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:u-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",u-50+3,this.speedAxisY[1]+6],["L",u-50+7,this.speedAxisY[1]+10],["L",u-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:((f=this.controllerCfg)===null||f===void 0?void 0:f.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:u-50+20,y:this.speedAxisY[1]+15,fill:"#ccc",fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}})},kt.prototype.bindEvent=function(){var f=this,u=this.controllerCfg,I=u.width,W=u.hiddleToggle;this.speedGroup.on("speed-rect:click",function(st){f.speedPoint.attr("path",f.getPath(I-(W?50:110),st.y)),f.currentSpeed=st.target.get("speed"),f.speedText.attr("text",f.currentSpeed+".0X"),f.group.emit("timebarConfigChanged",{speed:f.currentSpeed,type:f.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(st){var Tt,Ft,Yt=st.target.get("isChecked");Yt?(f.checkedIcon.hide(),f.checkedText.attr("text",((Ft=f.controllerCfg)===null||Ft===void 0?void 0:Ft.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),f.currentType="range"):(f.checkedIcon.show(),f.checkedText.attr("text",((Tt=f.controllerCfg)===null||Tt===void 0?void 0:Tt.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),f.currentType="single"),st.target.set("isChecked",!Yt),f.group.emit("timebarConfigChanged",{type:f.currentType,speed:f.currentSpeed})})},kt.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},kt}(),ii=function(){return(ii=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Si={fill:"#416180",opacity:.05},_i={fill:"#416180",opacity:.15,radius:5},Xi={fill:"#5B8FF9",opacity:.3,cursor:"move"},Bi={width:2,height:24},Di={textBaseline:"middle",fill:"#000",opacity:.45},ve=function(){function kt(f){var u=this;this.prevX=0,this.onMouseDown=function(jo){return function(ho){u.currentHandler=jo;var fa=ho.originalEvent;fa.stopPropagation(),fa.preventDefault(),u.prevX=Object(n.i)(fa,"touches.0.pageX",fa.pageX);var Zo=u.canvas.get("container");Zo.addEventListener("mousemove",u.onMouseMove),Zo.addEventListener("mouseup",u.onMouseUp),Zo.addEventListener("mouseleave",u.onMouseUp),Zo.addEventListener("touchmove",u.onMouseMove),Zo.addEventListener("touchend",u.onMouseUp),Zo.addEventListener("touchcancel",u.onMouseUp)}},this.onMouseMove=function(jo){jo.stopPropagation(),jo.preventDefault();var ho=Object(n.i)(jo,"touches.0.pageX",jo.pageX),fa=ho-u.prevX,Zo=u.adjustOffsetRange(fa/u.width);u.updateStartEnd(Zo),u.updateUI(),u.prevX=ho},this.onMouseUp=function(){u.currentHandler&&(u.currentHandler=void 0);var jo=u.canvas.get("container");jo&&(jo.removeEventListener("mousemove",u.onMouseMove),jo.removeEventListener("mouseup",u.onMouseUp),jo.removeEventListener("mouseleave",u.onMouseUp),jo.removeEventListener("touchmove",u.onMouseMove),jo.removeEventListener("touchend",u.onMouseUp),jo.removeEventListener("touchcancel",u.onMouseUp))};var I=f.x,W=I===void 0?0:I,st=f.y,Tt=st===void 0?0:st,Ft=f.width,Yt=Ft===void 0?100:Ft,ee=f.height,ae=f.padding,je=ae===void 0?10:ae,Fe=f.trendCfg,Ue=f.controllerCfg,He=Ue===void 0?{speed:1}:Ue,bn=f.backgroundStyle,wn=bn===void 0?{}:bn,Nn=f.foregroundStyle,Bn=Nn===void 0?{}:Nn,Fn=f.handlerStyle,sr=Fn===void 0?{}:Fn,ur=f.textStyle,Or=ur===void 0?{}:ur,ei=f.start,Ti=ei===void 0?0:ei,kr=f.end,yi=kr===void 0?1:kr,oo=f.minText,so=oo===void 0?"":oo,co=f.maxText,lo=co===void 0?"":co,Hi=f.group,Io=f.graph,ko=f.canvas,Ro=f.ticks,bo=f.type;this.graph=Io,this.canvas=ko,this.group=Hi,this.timeBarType=bo,this.x=W,this.y=Tt,this.width=Yt,this.height=ee,this.padding=je,this.ticks=Ro,this.trendCfg=Fe,this.controllerCfg=He,this.currentSpeed=He.speed||1,bo==="trend"?this.backgroundStyle=ii(ii({},Si),wn):bo==="simple"&&(this.backgroundStyle=ii(ii({},_i),wn)),this.foregroundStyle=ii(ii({},Xi),Bn),this.handlerStyle=ii(ii({},Bi),sr),this.textStyle=ii(ii({},Di),Or),this.currentMode="range",this.start=Ti,this.end=yi,this.minText=so,this.maxText=lo,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return kt.prototype.update=function(f){var u=f.x,I=f.y,W=f.width,st=f.height,Tt=f.minText,Ft=f.maxText,Yt=f.start,ee=f.end;this.start=Math.min(1,Math.max(Yt,0)),this.end=Math.min(1,Math.max(ee,0)),Object(n.a)(this,{x:u,y:I,width:W,height:st,minText:Tt,maxText:Ft}),this.updateUI()},kt.prototype.setText=function(f,u){this.minTextShape.attr("text",f),this.maxTextShape.attr("text",u)},kt.prototype.renderSlider=function(){var f=this,u=this.width,I=this.height,W=this.timeBarType;if(W==="trend"&&Object(n.E)(Object(n.i)(this.trendCfg,"data"))){var st=new ar(ii(ii({x:this.x,y:this.y,width:u,height:I},this.trendCfg),{group:this.group}));this.trendComponent=st}var Tt=this.group.addGroup({name:"slider-group"});Tt.addShape("rect",{attrs:ii({x:0,y:0,width:u,height:I},this.backgroundStyle)});var Ft=this.group.addGroup();W==="trend"?(this.minTextShape=Ft.addShape("text",{attrs:ii({x:0,y:I/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Ft.addShape("text",{attrs:ii({y:I/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=Ft.addShape("text",{attrs:ii({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Ft.addShape("text",{attrs:ii({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:ii({x:0,y:this.y,height:I},this.foregroundStyle)});var Yt=Object(n.i)(this.handlerStyle,"width",2),ee=Object(n.i)(this.handlerStyle,"height",24),ae=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new wr(ii({name:"minHandlerShape",group:ae,type:W,x:this.x,y:this.y,width:Yt,height:ee,cursor:"ew-resize"},this.handlerStyle));var je=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new wr(ii({name:"maxHandlerShape",group:je,type:W,x:this.x,y:this.y,width:Yt,height:ee,cursor:"ew-resize"},this.handlerStyle));var Fe=this.ticks,Ue=u/(Fe.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(bn){bn.destroy()});var He=-1/0;this.textList=Fe.map(function(bn,wn){f.tickPosList.push(f.x+wn*Ue);var Nn=f.group.addShape("text",{attrs:{x:f.x+wn*Ue,y:f.y+I+5,text:bn,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35,fontFamily:f.fontFamily||"Arial, sans-serif"}}),Bn=f.group.addShape("line",{attrs:{x1:f.x+wn*Ue,y1:f.y+I+2,x2:f.x+wn*Ue,y2:f.y+I+6,lineWidth:1,stroke:"#ccc"}}),Fn=Nn.getBBox();return Fn.minX>He?(Nn.show(),Bn.show(),He=Fn.minX+Fn.width+10):(Nn.hide(),Bn.hide()),Nn}),this.controllerBtnGroup=new vi(ii({group:this.group,x:this.x,y:this.y+I+25,width:u,height:40},this.controllerCfg)),this.updateUI(),Tt.move(this.x,this.y),this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.group.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),u.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var I=this.group.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),I.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.currentHandler=f.maxHandlerShape,f.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(.01),f.updateUI()}),this.group.on("preStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(-.01),f.updateUI()}),this.group.on("timebarConfigChanged",function(W){var st=W.type,Tt=W.speed;f.currentSpeed=Tt,f.currentMode=st,st==="single"?(f.minHandlerShape.hide(),f.foregroundShape.hide(),f.minTextShape.hide()):st==="range"&&(f.minHandlerShape.show(),f.foregroundShape.show(),f.minTextShape.show())})},kt.prototype.adjustTickIndex=function(f){for(var u=0;u<this.tickPosList.length-1;u++)if(this.tickPosList[u]<=f&&f<=this.tickPosList[u+1])return Math.abs(this.tickPosList[u]-f)<Math.abs(f-this.tickPosList[u+1])?u:u+1},kt.prototype.adjustOffsetRange=function(f){switch(this.currentHandler){case this.minHandlerShape:var u=0-this.start,I=1-this.start;return Math.min(I,Math.max(u,f));case this.maxHandlerShape:return u=0-this.end,I=1-this.end,Math.min(I,Math.max(u,f));case this.foregroundShape:return u=0-this.start,I=1-this.end,Math.min(I,Math.max(u,f));default:return 0}},kt.prototype.updateStartEnd=function(f){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=f,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=f,this.end+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},kt.prototype.updateUI=function(){var f=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var u=this.start*this.width,I=this.end*this.width;this.foregroundShape.attr("x",u),this.foregroundShape.attr("width",I-u);var W=Object(n.i)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var st=this.dodgeText([u,I]),Tt=st[0],Ft=st[1];this.minHandlerShape.setX(u-W/2),Object(n.f)(Tt,function(Yt,ee){return f.minTextShape.attr(ee,Yt)}),this.maxHandlerShape.setX(I-W/2),Object(n.f)(Ft,function(Yt,ee){return f.maxTextShape.attr(ee,Yt)}),this.currentMode==="range"?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valueChange",{value:[this.end,this.end]})},kt.prototype.dodgeText=function(f){var u,I,W=Object(n.i)(this.handlerStyle,"width",2),st=this.minTextShape,Tt=this.maxTextShape,Ft=f[0],Yt=f[1],ee=!1;Ft>Yt&&(Ft=(u=[Yt,Ft])[0],Yt=u[1],st=(I=[Tt,st])[0],Tt=I[1],ee=!0);var ae=st.getBBox(),je=Tt.getBBox(),Fe=null,Ue=null;return this.timeBarType==="trend"?(Fe=ae.width>Ft-2?{x:Ft+W/2+2,textAlign:"left"}:{x:Ft-W/2-2,textAlign:"right"},Ue=je.width>this.width-Yt-2?{x:Yt-W/2-2,textAlign:"right"}:{x:Yt+W/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(Fe=ae.width>Ft-2?{x:Ft+W/2+2,textAlign:"center"}:{x:Ft-W/2-2,textAlign:"center"},Ue=je.width>this.width-Yt-2?{x:Yt-W/2-2,textAlign:"center"}:{x:Yt+W/2+2,textAlign:"center"}),ee?[Ue,Fe]:[Fe,Ue]},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f,I=u.ticks,W=u.width,st=f.currentSpeed,Tt=W/I.length/(1e3*(10-st)/60),Ft=f.adjustOffsetRange(Tt/f.width);f.updateStartEnd(Ft),f.updateUI(),f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.group,u=f.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.off("minHandlerShape-handler:mousedown"),u.off("minHandlerShape-handler:touchstart"),u.destroy());var I=f.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.off("maxHandlerShape-handler:mousedown"),I.off("maxHandlerShape-handler:touchstart"),I.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),f.destroy(),this.trendComponent&&this.trendComponent.destory()},kt}(),G=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,st=W===void 0?0:W,Tt=f.container,Ft=f.text,Yt=f.padding,ee=Yt===void 0?[4,4,4,4]:Yt,ae=f.className,je=ae===void 0?"g6-component-timebar-tooltip":ae,Fe=f.backgroundColor,Ue=Fe===void 0?"#000":Fe,He=f.textColor,bn=He===void 0?"#fff":He,wn=f.opacity,Nn=wn===void 0?.8:wn,Bn=f.fontSize,Fn=Bn===void 0?12:Bn;this.container=Tt,this.className=je,this.backgroundColor=Ue,this.textColor=bn,this.x=I,this.y=st,this.text=Ft,this.padding=ee,this.opacity=Nn,this.fontSize=Fn,this.render()}return kt.prototype.render=function(){var f=this.className,u=(this.x,this.y,this.backgroundColor),I=this.textColor,W=this.text,st=this.padding,Tt=this.opacity,Ft=this.fontSize,Yt=this.container,ee=Object(y.b)("<div class='"+f+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+Tt+'"></div>');Object(n.x)(Yt)&&(Yt=document.getElementById(Yt)),Yt.appendChild(ee),this.parentHeight=Yt.offsetHeight,this.parentWidth=Yt.offsetWidth,Object(y.c)(ee,{visibility:"hidden",top:0,left:0});var ae=Object(y.b)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+u+"; font-size: "+Ft+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+I+"; padding: "+st[0]+"px "+st[1]+"px "+st[2]+"px "+st[3]+"px'></div>");ae.innerHTML=W,ee.appendChild(ae),this.backgroundDOM=ae;var je=Object(y.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+u+"'></div>");ee.appendChild(je),this.arrowDOM=je,this.container=ee},kt.prototype.show=function(f){var u=f.text,I=f.x;f.y,f.clientX,f.clientY,this.backgroundDOM.innerHTML=u;var W=this.backgroundDOM.offsetWidth,st=this.backgroundDOM.offsetHeight,Tt=this.arrowDOM.offsetWidth,Ft=this.arrowDOM.offsetHeight;Object(y.c)(this.container,{top:-st-Ft+"px",left:I+"px",visibility:"visible"}),Object(y.c)(this.backgroundDOM,{marginLeft:-W/2+"px"}),Object(y.c)(this.arrowDOM,{marginLeft:-Tt/2+"px",top:st+"px"});var Yt=I-W/2,ee=I+W/2;Yt<0?Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-Yt+"px"}):ee>this.parentWidth&&Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-ee+this.parentWidth+12+"px"})},kt.prototype.hide=function(){Object(y.c)(this.container,{top:0,left:0,visibility:"hidden"})},kt}(),F=function(){return(F=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Z={fill:"#5B8FF9"},ut={fill:"#e6e8e9"},Bt=function(){function kt(f){this.frameCount=0,this.fontFamily="Arial, sans-serif";var u=f.graph,I=f.canvas,W=f.group,st=f.width,Tt=f.height,Ft=f.padding,Yt=f.data,ee=f.start,ae=f.end,je=f.x,Fe=je===void 0?0:je,Ue=f.y,He=Ue===void 0?0:Ue,bn=f.tickLabelFormatter,wn=f.selectedTickStyle,Nn=wn===void 0?Z:wn,Bn=f.unselectedTickStyle,Fn=Bn===void 0?ut:Bn,sr=f.tooltipBackgroundColor,ur=f.tooltipFomatter;this.graph=u,this.group=W,this.sliceGroup=W.addGroup({name:"slice-group"}),this.canvas=I,this.width=st,this.height=Tt,this.padding=Ft,this.data=Yt,this.start=ee,this.end=ae,this.tickLabelFormatter=bn,this.selectedTickStyle=Nn,this.unselectedTickStyle=Fn,this.x=Fe,this.y=He,this.tooltipBackgroundColor=sr,this.tooltipFomatter=ur,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return kt.prototype.renderSlices=function(){var f=this,u=this,I=u.width,W=u.height,st=u.padding,Tt=u.data,Ft=u.start,Yt=u.end,ee=u.tickLabelFormatter,ae=u.selectedTickStyle,je=u.unselectedTickStyle,Fe=I-2*st,Ue=W-(3*st+4+10)-2*st,He=Tt.length,bn=(Fe-2*(He-1))/He;this.tickWidth=bn;var wn=this.sliceGroup,Nn=[],Bn=[],Fn=Math.round(He*Ft),sr=Math.round(He*Yt);this.startTickRectId=Fn,this.endTickRectId=sr,Tt.forEach(function(Or,ei){var Ti=ei>=Fn&&ei<=sr?ae:je,kr=wn.addShape("rect",{attrs:F({x:st+ei*(bn+2),y:st,width:bn,height:Ue},Ti),draggable:!0,name:"tick-rect-"+ei}),yi=wn.addShape("rect",{attrs:{x:st+ei*bn+2*(2*ei-1)/2,y:st,width:ei===0||ei===He-1?bn+1:bn+2,height:Ue,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+ei});yi.toFront();var oo,so=kr.getBBox(),co=(so.minX+so.maxX)/2;if(Nn.push({rect:kr,pickRect:yi,value:Or.date,x:co,y:so.minY}),ee?(oo=ee(Or),!Object(n.x)(oo)&&oo&&(oo=Or.date)):ei%Math.round(He/10)==0&&(oo=Or.date),oo){Bn.push(oo);var lo=so.maxY+2*st;wn.addShape("line",{attrs:{stroke:"#BFBFBF",x1:co,y1:lo,x2:co,y2:lo+4}});var Hi=lo+4+st,Io=wn.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:co,y:Hi,textAlign:"center",text:oo,textBaseline:"top",fontSize:10,fontFamily:f.fontFamily||"Arial, sans-serif"},capture:!1}),ko=Io.getBBox();ko.maxX>I?Io.attr("textAlign","right"):ko.minX<0&&Io.attr("textAlign","left")}}),this.tickRects=Nn;var ur=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vi({group:ur,x:this.x,y:this.y+W+5,width:I,height:40,hiddleToggle:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},kt.prototype.initEvent=function(){var f=this,u=this.sliceGroup;u.on("click",function(ee){var ae=ee.target;if(ae.get("type")==="rect"&&ae.get("name")){var je=parseInt(ae.get("name").split("-")[2],10);if(!isNaN(je)){var Fe=f.tickRects,Ue=f.unselectedTickStyle;Fe.forEach(function(wn){wn.rect.attr(Ue)});var He=f.selectedTickStyle;Fe[je].rect.attr(He),f.startTickRectId=je,f.endTickRectId=je;var bn=je/Fe.length;f.graph.emit("valueChange",{value:[bn,bn]})}}}),u.on("dragstart",function(ee){var ae=f.tickRects,je=f.unselectedTickStyle;ae.forEach(function(wn){wn.rect.attr(je)});var Fe=ee.target,Ue=parseInt(Fe.get("name").split("-")[2],10),He=f.selectedTickStyle;ae[Ue].rect.attr(He),f.startTickRectId=Ue;var bn=Ue/ae.length;f.graph.emit("valueChange",{value:[bn,bn]}),f.dragging=!0}),u.on("dragover",function(ee){if(f.dragging&&ee.target.get("type")==="rect"){for(var ae=parseInt(ee.target.get("name").split("-")[2],10),je=f.startTickRectId,Fe=f.tickRects,Ue=f.selectedTickStyle,He=f.unselectedTickStyle,bn=0;bn<Fe.length;bn++){var wn=bn>=je&&bn<=ae?Ue:He;Fe[bn].rect.attr(wn)}var Nn=Fe.length;f.endTickRectId=ae;var Bn=je/Nn,Fn=ae/Nn;f.graph.emit("valueChange",{value:[Bn,Fn]})}}),u.on("drop",function(ee){if(f.dragging&&(f.dragging=!1,ee.target.get("type")==="rect")){var ae=f.startTickRectId,je=parseInt(ee.target.get("name").split("-")[2],10);if(!(je<ae)){var Fe=f.selectedTickStyle,Ue=f.tickRects;Ue[je].rect.attr(Fe),f.endTickRectId=je;var He=Ue.length,bn=ae/He,wn=je/He;f.graph.emit("valueChange",{value:[bn,wn]})}}});var I=this.tooltipBackgroundColor,W=this.tooltipFomatter,st=this.canvas,Tt=new G({container:st.get("container"),backgroundColor:I}),Ft=this.tickRects;Ft.forEach(function(ee){var ae=ee.pickRect;ae.on("mouseenter",function(je){var Fe=je.target;if(Fe.get("type")==="rect"){var Ue=parseInt(Fe.get("name").split("-")[2],10),He=st.getClientByPoint(Ft[Ue].x,Ft[Ue].y);Tt.show({x:Ft[Ue].x,y:Ft[Ue].y,clientX:He.x,clientY:He.y,text:W?W(Ft[Ue].value):Ft[Ue].value})}}),ae.on("mouseleave",function(je){Tt.hide()})});var Yt=this.group;Yt.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.changePlayStatus()}),Yt.on("nextStepBtn:click",function(){f.updateStartEnd(1)}),Yt.on("preStepBtn:click",function(){f.updateStartEnd(-1)}),Yt.on("timebarConfigChanged",function(ee){ee.type;var ae=ee.speed;f.currentSpeed=ae})},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f.currentSpeed;f.frameCount%(60/u)==0&&(f.frameCount=0,f.updateStartEnd(1)),f.frameCount++,f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.updateStartEnd=function(f){var u=this.tickRects,I=u.length,W=this.unselectedTickStyle,st=this.selectedTickStyle,Tt=this.endTickRectId;if(f>0?this.endTickRectId++:(u[this.endTickRectId].rect.attr(W),this.endTickRectId--),Tt!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var Ft=this.startTickRectId;Ft<=this.endTickRectId-1;Ft++)u[Ft].rect.attr(W);this.startTickRectId=this.endTickRectId}if(u[this.endTickRectId]){u[this.endTickRectId].rect.attr(st);var Yt=this.startTickRectId/I,ee=this.endTickRectId/I;this.graph.emit("valueChange",{value:[Yt,ee]})}},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.sliceGroup;f.off("click"),f.off("dragstart"),f.off("dragover"),f.off("drop"),this.tickRects.forEach(function(u){var I=u.pickRect;I.off("mouseenter"),I.off("mouseleave")}),this.tickRects.length=0,f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),this.sliceGroup.destroy()},kt}(),Jt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),ie=function(){return(ie=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},se=function(f,u){var I={};for(var W in f)Object.prototype.hasOwnProperty.call(f,W)&&u.indexOf(W)<0&&(I[W]=f[W]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var st=0;for(W=Object.getOwnPropertySymbols(f);st<W.length;st++)u.indexOf(W[st])<0&&Object.prototype.propertyIsEnumerable.call(f,W[st])&&(I[W[st]]=f[W[st]])}return I},Te=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Jt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{}}},f.prototype.initContainer=function(){var u,I,W=this.get("graph"),st=this._cfgs,Tt=st.width,Ft=st.height,Yt=this.get("className")||"g6-component-timebar",ee=this.get("container"),ae=this.get("graph").get("container");ee?(Object(n.x)(ee)&&(ee=document.getElementById(ee)),u=ee):(u=Object(y.b)("<div class='"+Yt+"'></div>"),Object(y.c)(u,{position:"relative"})),ae.appendChild(u),this.set("timeBarContainer",u),I=W.get("renderer")==="SVG"?new X.Canvas({container:u,width:Tt,height:Ft}):new N.Canvas({container:u,width:Tt,height:Ft}),this.set("canvas",I)},f.prototype.init=function(){this.initContainer();var u=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",u),this.renderTrend(),this.initEvent();var I=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",I)},f.prototype.renderTrend=function(){var u=this._cfgs,I=u.width,W=u.x,st=u.y,Tt=u.padding,Ft=u.type,Yt=u.trend,ee=u.slider,ae=u.controllerCfg,je=u.textStyle,Fe=Yt.data,Ue=se(Yt,["data"]),He=I-2*Tt,bn=Ft==="trend"?26:8,wn=this.get("graph"),Nn=this.get("timeBarGroup"),Bn=this.get("canvas"),Fn=null;if(Ft==="trend"||Ft==="simple")Fn=new ve(ie(ie({graph:wn,canvas:Bn,group:Nn,type:Ft,x:W+Tt,y:Ft==="trend"?st+Tt:st+Tt+15,width:He,height:bn,padding:Tt,trendCfg:ie(ie({},Ue),{data:Fe.map(function(ur){return ur.value})})},ee),{ticks:Fe.map(function(ur){return ur.date}),handlerStyle:ie(ie({},ee.handlerStyle),{height:ee.height||bn}),controllerCfg:ae,textStyle:je}));else if(Ft==="tick"){var sr=this._cfgs.tick;Fn=new Bt(ie({graph:wn,canvas:Bn,group:Nn,x:W+Tt,y:st+Tt},sr))}this.set("timebar",Fn)},f.prototype.filterData=function(u){var I=u.value,W=null,st=this._cfgs.type;if(st==="trend"||st==="simple"?W=this._cfgs.trend.data:st==="tick"&&(W=this._cfgs.tick.data),W&&W.length!==0){var Tt=this.get("rangeChange"),Ft=this.get("graph"),Yt=Math.round(W.length*I[0]),ee=Math.round(W.length*I[1]);ee=ee>=W.length?W.length-1:ee;var ae=W[Yt].date,je=W[ee].date;if(st!=="tick"&&this.get("timebar").setText(ae,je),Tt)Tt(Ft,ae,je);else{var Fe=Ft.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=Fe);var Ue=this.cacheGraphData.nodes.filter(function(wn){return wn.date>=ae&&wn.date<=je}),He=Ue.map(function(wn){return wn.id}),bn=this.cacheGraphData.edges.filter(function(wn){return He.includes(wn.source)&&He.includes(wn.target)});Ft.changeData({nodes:Ue,edges:bn})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},f.prototype.initEvent=function(){var u=this,I=0,W=0,st=this._cfgs.type;st&&st!=="trend"&&st!=="simple"?st==="tick"&&(I=this._cfgs.tick.start,W=this._cfgs.tick.end):(I=this._cfgs.slider.start,W=this._cfgs.slider.end);var Tt=this.get("graph");Tt.on("afterrender",function(){u.filterData({value:[I,W]})}),Tt.on("valueChange",function(Ft){u.filterData(Ft)})},f.prototype.destroy=function(){var u=this.get("timebar");u&&u.destory&&u.destory(),kt.prototype.destroy.call(this);var I=this.get("timeBarContainer");if(I){var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.removeChild(I)}},f}(s),Ee={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(f){return Object.assign(this,f),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(f){var u=this,I=this.events;this.graph=f,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!0),Object(n.f)(I,function(W,st){f.on(st,W)}),document.addEventListener("visibilitychange",function(){u.keydown=!1})},unbind:function(f){var u=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!1),Object(n.f)(u,function(I,W){f.off(W,I)})},get:function(f){return this[f]},set:function(f,u){return this[f]=u,this}},un=function(){function kt(){}return kt.registerBehavior=function(f,u){if(!u)throw new Error("please specify handler for this behavior: "+f);var I=Object(n.c)(Ee);Object.assign(I,u);var W=function(Tt){var Ft=this;Object.assign(this,this.getDefaultCfg(),Tt);var Yt=this.getEvents();this.events=null;var ee={};Yt&&(Object(n.f)(Yt,function(ae,je){ee[je]=Object(n.J)(Ft,ae)}),this.events=ee)};W.prototype=I,kt.types[f]=W},kt.hasBehavior=function(f){return!!kt.types[f]},kt.getBehavior=function(f){return kt.types[f]},kt.types={},kt}(),xn=un,_t=e(79),Xt=e(10),Se=e(33),Wt=Xt.a.transform,ue=function(f){return function(u,I){return u[f]-I[f]}},vn=function(f,u,I){return f>=u&&f<=I},Dn=function(f,u,I,W){var st=I.x-f.x,Tt=I.y-f.y,Ft=u.x-f.x,Yt=u.y-f.y,ee=W.x-I.x,ae=W.y-I.y,je=Ft*ae-Yt*ee,Fe=null;if(je*je>.001*(Ft*Ft+Yt*Yt)*(ee*ee+ae*ae)){var Ue=(st*ae-Tt*ee)/je,He=(st*Yt-Tt*Ft)/je;vn(Ue,0,1)&&vn(He,0,1)&&(Fe={x:f.x+Ue*Ft,y:f.y+Ue*Yt})}return Fe},zn=function(f,u){var I=f.x,W=f.y,st=f.width,Tt=f.height,Ft=[],Yt={x:I+st/2,y:W+Tt/2};Ft.push({x:I,y:W}),Ft.push({x:I+st,y:W}),Ft.push({x:I+st,y:W+Tt}),Ft.push({x:I,y:W+Tt}),Ft.push({x:I,y:W});for(var ee=null,ae=1;ae<Ft.length&&!(ee=Dn(Ft[ae-1],Ft[ae],Yt,u));ae++);return ee},Un=function(f,u){var I=f.x,W=f.y,st=f.r,Tt=u.x-I,Ft=u.y-W;if(Math.sqrt(Tt*Tt+Ft*Ft)<st)return null;var Yt=Math.sign(Tt),ee=Math.sign(Ft),ae=Math.atan(Ft/Tt);return{x:I+Math.abs(st*Math.cos(ae))*Yt,y:W+Math.abs(st*Math.sin(ae))*ee}},Ze=function(f,u){var I=f.rx,W=f.ry,st=f.x,Tt=f.y,Ft=u.x-st,Yt=u.y-Tt,ee=Math.atan2(Yt/W,Ft/I);return ee<0&&(ee+=2*Math.PI),{x:st+I*Math.cos(ee),y:Tt+W*Math.sin(ee)}},Ce=function(f,u,I){I===void 0&&(I=1);var W=[f.x,f.y,I];return u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]),Xt.d.transformMat3(W,W,u),{x:W[0],y:W[1]}},R=function(f,u,I){I===void 0&&(I=1),u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]);var W=Xt.b.invert([1,0,0,0,1,0,0,0,1],u);W||(W=[1,0,0,0,1,0,0,0,1]);var st=[f.x,f.y,I];return Xt.d.transformMat3(st,st,W),{x:st[0],y:st[1]}},xt=function(f,u,I){var W=f.x-u.x,st=f.y-u.y,Tt=f.x-I.x,Ft=f.y-I.y,Yt=(f.x*f.x-u.x*u.x-u.y*u.y+f.y*f.y)/2,ee=(f.x*f.x-I.x*I.x-I.y*I.y+f.y*f.y)/2,ae=st*Tt-W*Ft;return{x:-(Ft*Yt-st*ee)/ae,y:-(W*ee-Tt*Yt)/ae}},$t=function(f,u){var I=f.x-u.x,W=f.y-u.y;return Math.sqrt(I*I+W*W)},me=function(f,u){var I=[];return f.forEach(function(W){var st=[];W.forEach(function(Tt){st.push(Tt*u)}),I.push(st)}),I},Zt=function(f){for(var u=[],I=f.length,W=0;W<I;W+=1){u[W]=[];for(var st=0;st<I;st+=1)W===st?u[W][st]=0:f[W][st]!==0&&f[W][st]?u[W][st]=f[W][st]:u[W][st]=1/0}for(var Tt=0;Tt<I;Tt+=1)for(W=0;W<I;W+=1)for(st=0;st<I;st+=1)u[W][st]>u[W][Tt]+u[Tt][st]&&(u[W][st]=u[W][Tt]+u[Tt][st]);return u},de=function(f,u){var I=f.nodes,W=f.edges,st=[],Tt={};if(!I)throw new Error("invalid nodes data!");return I&&I.forEach(function(Ft,Yt){Tt[Ft.id]=Yt,st.push([])}),W&&W.forEach(function(Ft){var Yt=Ft.source,ee=Ft.target,ae=Tt[Yt],je=Tt[ee];st[ae][je]=1,u||(st[je][ae]=1)}),st},he=function(f,u){f.translate(u.x,u.y)},ce=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=f.getCanvasBBox(),st=u.x-W.minX,Tt=u.y-W.minY,Ft=Wt(I,[["t",st,Tt]]);f.setMatrix(Ft)},Me=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u;Object(n.m)(u)||(W=[u,u]),Object(n.m)(u)&&u.length===1&&(W=[u[0],u[0]]),I=Wt(I,[["s",W[0],W[1]]]),f.setMatrix(I)},ze=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]),I=Wt(I,[["r",u]]),f.setMatrix(I)},Ve=function(f,u,I){for(var W=[],st=0;st<f;st++)W[st]=0;return I.forEach(function(Tt){Tt.source&&(W[u[Tt.source]]+=1),Tt.target&&(W[u[Tt.target]]+=1)}),W};function ke(kt,f,u){return(u[0]-kt[0])*(f[1]-kt[1])==(f[0]-kt[0])*(u[1]-kt[1])&&Math.min(kt[0],f[0])<=u[0]&&u[0]<=Math.max(kt[0],f[0])&&Math.min(kt[1],f[1])<=u[1]&&u[1]<=Math.max(kt[1],f[1])}var tn=function(f,u,I){var W=!1,st=f.length;function Tt(ae){return Math.abs(ae)<1e-6?0:ae<0?-1:1}if(st<=2)return!1;for(var Ft=0;Ft<st;Ft++){var Yt=f[Ft],ee=f[(Ft+1)%st];if(ke(Yt,ee,[u,I]))return!0;Tt(Yt[1]-I)>0!=Tt(ee[1]-I)>0&&Tt(u-(I-Yt[1])*(Yt[0]-ee[0])/(Yt[1]-ee[1])-Yt[0])<0&&(W=!W)}return W},De=function(f,u){return!(u.minX>f.maxX||u.maxX<f.minX||u.minY>f.maxY||u.maxY<f.minY)},cn=function(f,u){var I=function(Fe){var Ue=Fe.map(function(bn){return bn[0]}),He=Fe.map(function(bn){return bn[1]});return{minX:Math.min.apply(null,Ue),maxX:Math.max.apply(null,Ue),minY:Math.min.apply(null,He),maxY:Math.max.apply(null,He)}},W=function(Fe){for(var Ue=[],He=Fe.length,bn=0;bn<He-1;bn++){var wn=Fe[bn],Nn=Fe[bn+1];Ue.push({from:{x:wn[0],y:wn[1]},to:{x:Nn[0],y:Nn[1]}})}if(Ue.length>1){var Bn=Fe[0],Fn=Fe[He-1];Ue.push({from:{x:Fn[0],y:Fn[1]},to:{x:Bn[0],y:Bn[1]}})}return Ue};if(f.length<2||u.length<2)return!1;var st=I(f),Tt=I(u);if(!De(st,Tt))return!1;var Ft=!1;if(Object(n.f)(u,function(je){if(tn(f,je[0],je[1]))return Ft=!0,!1}),Ft||(Object(n.f)(f,function(je){if(tn(u,je[0],je[1]))return Ft=!0,!1}),Ft))return!0;var Yt=W(f),ee=W(u),ae=!1;return Object(n.f)(ee,function(je){if(function(Fe,Ue){var He=!1;return Object(n.f)(Fe,function(bn){if(Dn(bn.from,bn.to,Ue.from,Ue.to))return He=!0,!1}),He}(Yt,je))return ae=!0,!1}),ae},fn=function(){function kt(f,u,I,W){this.x1=f,this.y1=u,this.x2=I,this.y2=W}return kt.prototype.getBBox=function(){var f=Math.min(this.x1,this.x2),u=Math.min(this.y1,this.y2),I=Math.max(this.x1,this.x2),W=Math.max(this.y1,this.y2);return{x:f,y:u,minX:f,minY:u,maxX:I,maxY:W,width:I-f,height:W-u}},kt}(),nn=function(f,u){return{top:[f.minX,f.minY,f.maxX,f.minY],left:[f.minX,f.minY,f.minX,f.maxY],bottom:[f.minX,f.maxY,f.maxX,f.maxY],right:[f.maxX,f.minY,f.maxX,f.maxY]}[u]},dn=function(f,u){var I=(u.x2-u.x1)*(f.y1-u.y1)-(u.y2-u.y1)*(f.x1-u.x1),W=(f.x2-f.x1)*(f.y1-u.y1)-(f.y2-f.y1)*(f.x1-u.x1),st=(u.y2-u.y1)*(f.x2-f.x1)-(u.x2-u.x1)*(f.y2-f.y1);if(st){var Tt=I/st,Ft=W/st;if(Tt>=0&&Tt<=1&&Ft>=0&&Ft<=1)return Tt}return Number.POSITIVE_INFINITY},Sn=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),st=0,Tt=[],Ft=0;Ft<4;Ft++){var Yt=nn(W,I[Ft]),ee=Yt[0],ae=Yt[1],je=Yt[2],Fe=Yt[3];Tt[Ft]=Dn({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},{x:ee,y:ae},{x:je,y:Fe}),Tt[Ft]&&(st+=1)}return[Tt,st]},Pe=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),st=Number.POSITIVE_INFINITY,Tt=0,Ft=0;Ft<4;Ft++){var Yt=nn(W,I[Ft]),ee=Yt[0],ae=Yt[1],je=Yt[2],Fe=Yt[3],Ue=dn(u,new fn(ee,ae,je,Fe));(Ue=Math.abs(Ue-.5))>=0&&Ue<=1&&(Tt+=1,st=Ue<st?Ue:st)}return Tt===0?-1:st},le=function(f){var u=0,I=0;if(f.length>0){for(var W=0,st=f;W<st.length;W++){var Tt=st[W];u+=Tt.x,I+=Tt.y}u/=f.length,I/=f.length}return{x:u,y:I}},Le=function(f,u){return Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)},Be=function(f,u){var I,W=u.x1,st=u.y1,Tt=u.x2-W,Ft=u.y2-st,Yt=f.x-W,ee=f.y-st,ae=Yt*Tt+ee*Ft;I=ae<=0||(ae=(Yt=Tt-Yt)*Tt+(ee=Ft-ee)*Ft)<=0?0:ae*ae/(Tt*Tt+Ft*Ft);var je=Yt*Yt+ee*ee-I;return je<0&&(je=0),je},en=function(f,u,I){return I===void 0&&(I=.001),Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)<Math.pow(I,2)},sn=function(f,u){var I=f.x<u.x,W=f.x>u.x+u.width,st=f.y>u.y+u.height,Tt=f.y<u.y;if(!(I||W||st||Tt))return 0;if(st&&!I&&!W)return Math.pow(u.y+u.height-f.y,2);if(Tt&&!I&&!W)return Math.pow(f.y-u.y,2);if(I&&!st&&!Tt)return Math.pow(u.x-f.x,2);if(W&&!st&&!Tt)return Math.pow(u.x+u.width-f.x,2);var Ft=Math.min(Math.abs(u.x-f.x),Math.abs(u.x+u.width-f.x)),Yt=Math.min(Math.abs(u.y-f.y),Math.abs(u.y+u.height-f.y));return Ft*Ft+Yt*Yt},_e="rgb(95, 149, 255)",ln="rgb(253, 253, 253)",mn="rgb(247, 250, 255)",Wn="rgb(224, 224, 224)",An="rgb(224, 224, 224)",In={version:"0.0.8",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:_e,fill:"rgb(239, 244, 255)"},size:20,color:_e,linkPoints:{size:8,lineWidth:1,fill:mn,stroke:_e}},nodeStateStyles:{active:{fill:mn,stroke:_e,lineWidth:2,shadowColor:_e,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:_e,lineWidth:4,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Wn,lineAppendWidth:2},color:Wn},edgeStateStyles:{active:{stroke:_e,lineWidth:1},selected:{stroke:_e,lineWidth:2,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:_e,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ln,lineWidth:1,stroke:An,r:5,width:20,height:10},size:[20,5],color:An,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:_e,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:_e,lineWidth:2,fill:ln,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:ln,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:ln,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},lr=function(){function kt(f){this.graph=f,this.destroyed=!1,this.modes=f.get("modes")||{default:[]},this.formatModes(),this.mode=f.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return kt.prototype.formatModes=function(){var f=this.modes;Object(n.f)(f,function(u){Object(n.f)(u,function(I,W){Object(n.x)(I)&&(u[W]={type:I})})})},kt.prototype.setBehaviors=function(f){var u,I=this.graph,W=this.modes[f],st=[];Object(n.f)(W||[],function(Tt){var Ft=un.getBehavior(Tt.type||Tt);Ft&&(u=new Ft(Tt))&&(u.bind(I),st.push(u))}),this.currentBehaves=st},kt.mergeBehaviors=function(f,u){return Object(n.f)(u,function(I){f.indexOf(I)<0&&(Object(n.x)(I)&&(I={type:I}),f.push(I))}),f},kt.filterBehaviors=function(f,u){var I=[];return f.forEach(function(W){var st="";st=Object(n.x)(W)?W:W.type,u.indexOf(st)<0&&I.push(W)}),I},kt.prototype.setMode=function(f){var u=this.modes,I=this.graph,W=f;u[W]&&(I.emit("beforemodechange",{mode:f}),Object(n.f)(this.currentBehaves,function(st){st.delegate&&st.delegate.remove(),st.unbind(I)}),this.setBehaviors(W),I.emit("aftermodechange",{mode:f}),this.mode=f)},kt.prototype.getMode=function(){return this.mode},kt.prototype.manipulateBehaviors=function(f,u,I){var W,st=this;if(W=Object(n.m)(f)?f:[f],Object(n.m)(u))return Object(n.f)(u,function(Ft){st.modes[Ft]?st.modes[Ft]=I?kt.mergeBehaviors(st.modes[Ft]||[],W):kt.filterBehaviors(st.modes[Ft]||[],W):I&&(st.modes[Ft]=W)}),this;var Tt=u;return u||(Tt=this.mode),this.modes[Tt]||I&&(this.modes[Tt]=W),this.modes[Tt]=I?kt.mergeBehaviors(this.modes[Tt]||[],W):kt.filterBehaviors(this.modes[Tt]||[],W),this.setMode(this.mode),this},kt.prototype.updateBehavior=function(f,u,I){Object(n.x)(f)&&(f={type:f});var W=[];if(I&&I!==this.mode&&I!=="default"){if(!(W=this.modes[I])||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var st=W.length;for(Ft=0;Ft<st;Ft++){if((Yt=W[Ft]).type===f.type||Yt===f.type)return Yt===f.type&&(Yt={type:Yt}),Object.assign(Yt,u),W[Ft]=Yt,this;Ft===st-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(W=this.currentBehaves)||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Tt=W.length,Ft=0;Ft<Tt;Ft++){var Yt;if((Yt=W[Ft]).type===f.type)return Yt.updateCfg(u),this;Ft===Tt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},kt.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},kt}(),Hr=function(kt){function f(u,I){var W=kt.call(this,u,I)||this;return W.item=I.item,W.canvasX=I.canvasX,W.canvasY=I.canvasY,W.wheelDelta=I.wheelDelta,W.detail=I.detail,W}return Object(ot.b)(f,kt),f}(e(18).Event),Gr=function(f){return f+"-"+Math.random()+Date.now()},Mr=function(f){var u=0,I=0,W=0,st=0;return Object(n.t)(f)?u=I=W=st=f:Object(n.x)(f)?u=I=W=st=parseInt(f,10):Object(n.m)(f)&&(u=f[0],W=Object(n.s)(f[1])?f[0]:f[1],st=Object(n.s)(f[2])?f[0]:f[2],I=Object(n.s)(f[3])?W:f[3]),[u,W,st,I]},oi=function(f){var u=new Hr(f.type,f);return u.clientX=f.clientX,u.clientY=f.clientY,u.x=f.x,u.y=f.y,u.target=f.target,u.currentTarget=f.currentTarget,u.bubbles=!0,u.item=f.item,u},ai=function(f){if(!f)return!1;for(var u=[1,0,0,0,1,0,0,0,1],I=0;I<9;I++)if(f[I]!==u[I])return!0;return!1},Zr=function(f){return Number.isNaN(Number(f))},Yi=function(f){for(var u=1/0,I=-1/0,W=1/0,st=-1/0,Tt=0;Tt<f.length;Tt++){var Ft=f[Tt].getBBox(),Yt=Ft.minX,ee=Ft.minY,ae=Ft.maxX,je=Ft.maxY;Yt<u&&(u=Yt),ee<W&&(W=ee),ae>I&&(I=ae),je>st&&(st=je)}return{x:Math.floor(u),y:Math.floor(W),width:Math.ceil(I)-Math.floor(u),height:Math.ceil(st)-Math.floor(W),minX:u,minY:W,maxX:I,maxY:st}},$i=function(f,u,I,W,st){u===void 0&&(u=15),I===void 0&&(I="quadratic");for(var Tt=f.length,Ft=2*u,Yt=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],ee={},ae=[],je={},Fe=0;Fe<Tt;Fe++){var Ue=f[Fe],He=Ue.source,bn=Ue.target,wn=He+"-"+bn;if(!ae[Fe]){ee[wn]||(ee[wn]=[]),ae[Fe]=!0,ee[wn].push(Ue);for(var Nn=0;Nn<Tt;Nn++)if(Fe!==Nn){var Bn=f[Nn],Fn=Bn.source,sr=Bn.target;ae[Nn]||(He===sr&&bn===Fn?(ee[wn].push(Bn),ae[Nn]=!0,je[Fn+"|"+sr+"|"+(ee[wn].length-1)]=!0):He===Fn&&bn===sr&&(ee[wn].push(Bn),ae[Nn]=!0))}}}for(var ur in ee)for(var Or=ee[ur],ei=Or.length,Ti=0;Ti<ei;Ti++){var kr=Or[Ti];if(kr.source!==kr.target)if(ei===1&&W&&kr.source!==kr.target)kr.type=W;else{kr.type=I;var yi=(Ti%2==0?1:-1)*(je[kr.source+"|"+kr.target+"|"+Ti]?-1:1);kr.curveOffset=ei%2==1?yi*Math.ceil(Ti/2)*Ft:yi*(Math.floor(Ti/2)*Ft+u)}else st&&(kr.type=st),kr.loopCfg={position:Yt[Ti%8],dist:20*Math.floor(Ti/8)+50}}return f},Go=function(){function kt(f){this.destroyed=!1,this.graph=f,this.destroyed=!1}return kt.prototype.getViewCenter=function(){var f=this.getFormatPadding(),u=this.graph,I=this.graph.get("width"),W=u.get("height");return{x:(I-f[1]-f[3])/2+f[3],y:(W-f[0]-f[2])/2+f[0]}},kt.prototype.fitCenter=function(){var f=this.graph,u=f.get("group");u.resetMatrix();var I=u.getCanvasBBox();if(I.width!==0&&I.height!==0){var W=this.getViewCenter(),st=I.x+I.width/2,Tt=I.y+I.height/2;f.translate(W.x-st,W.y-Tt)}},kt.prototype.fitView=function(){var f=this.graph,u=this.getFormatPadding(),I=f.get("width"),W=f.get("height"),st=f.get("group");st.resetMatrix();var Tt=st.getCanvasBBox();if(Tt.width!==0&&Tt.height!==0){var Ft=this.getViewCenter(),Yt=Tt.x+Tt.width/2,ee=Tt.y+Tt.height/2;f.translate(Ft.x-Yt,Ft.y-ee);var ae=(I-u[1]-u[3])/Tt.width,je=(W-u[0]-u[2])/Tt.height,Fe=ae;ae>je&&(Fe=je),f.zoom(Fe,Ft)}},kt.prototype.getFormatPadding=function(){var f=this.graph.get("fitViewPadding");return Mr(f)},kt.prototype.focusPoint=function(f,u,I){var W=this,st=this.getViewCenter(),Tt=this.getPointByCanvas(st.x,st.y),Ft=this.graph.get("group").getMatrix();if(Ft||(Ft=[1,0,0,0,1,0,0,0,1]),u){var Yt=(Tt.x-f.x)*Ft[0],ee=(Tt.y-f.y)*Ft[4],ae=0,je=0,Fe=0,Ue=0;this.graph.get("canvas").animate(function(He){Fe=Yt*He,Ue=ee*He,W.graph.translate(Fe-ae,Ue-je),ae=Fe,je=Ue},Object(ot.a)({},I))}else this.graph.translate((Tt.x-f.x)*Ft[0],(Tt.y-f.y)*Ft[4])},kt.prototype.getPointByCanvas=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),R({x:f,y:u},I)},kt.prototype.getPointByClient=function(f,u){var I=this.graph.get("canvas").getPointByClient(f,u);return this.getPointByCanvas(I.x,I.y)},kt.prototype.getClientByPoint=function(f,u){var I=this.graph.get("canvas"),W=this.getCanvasByPoint(f,u),st=I.getClientByPoint(W.x,W.y);return{x:st.x,y:st.y}},kt.prototype.getCanvasByPoint=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),Ce({x:f,y:u},I)},kt.prototype.focus=function(f,u,I){Object(n.x)(f)&&(f=this.graph.findById(f));var W=f.get("group").getMatrix();W||(W=[1,0,0,0,1,0,0,0,1]),f&&this.focusPoint({x:W[6],y:W[7]},u,I)},kt.prototype.changeSize=function(f,u){var I=this.graph;if(!Object(n.t)(f)||!Object(n.t)(u))throw Error("invalid canvas width & height, please make sure width & height type is number");I.set({width:f,height:u}),I.get("canvas").changeSize(f,u),I.get("plugins").forEach(function(W){if(W.get("gridContainer")){var st=I.get("minZoom");Object(y.c)(W.get("container"),{width:f+"px",height:u+"px"}),Object(y.c)(W.get("gridContainer"),{width:f/st+"px",height:u/st+"px",left:0,top:0})}})},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!1},kt}(),Uo={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},_o=Math.PI,ta=Math.sin,li=Math.cos,Oo=ta(_o/8),qi=li(_o/8),zo=function(f,u){var I=f.getBBox(),W={x:I.minX,y:I.minY},st={x:I.maxX,y:I.maxY};if(u){var Tt=u.getMatrix();Tt||(Tt=[1,0,0,0,1,0,0,0,1]),W=Ce(W,Tt),st=Ce(st,Tt)}var Ft=W.x,Yt=W.y,ee=st.x,ae=st.y;return{x:Ft,y:Yt,minX:Ft,minY:Yt,maxX:ee,maxY:ae,width:ee-Ft,height:ae-Yt}},Xo=function(f){var u=f.sourceNode||f.targetNode,I=u.get("group").getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u.getKeyShape().getBBox(),st=f.loopCfg||{},Tt=st.dist||2*Math.max(W.width,W.height),Ft=st.position||In.defaultLoopPosition,Yt=[I[6],I[7]],ee=[f.startPoint.x,f.startPoint.y],ae=[f.endPoint.x,f.endPoint.y],je=W.height/2,Fe=W.height/2,Ue=je*Oo,He=je*qi,bn=Fe*Oo,wn=Fe*qi;if(ee[0]===ae[0]&&ee[1]===ae[1]){switch(Ft){case"top":ee=[Yt[0]-Ue,Yt[1]-He],ae=[Yt[0]+bn,Yt[1]-wn];break;case"top-right":je=W.height/2,Fe=W.width/2,ee=[Yt[0]+(Ue=je*Oo),Yt[1]-(He=je*qi)],ae=[Yt[0]+(wn=Fe*qi),Yt[1]-(bn=Fe*Oo)];break;case"right":je=W.width/2,Fe=W.width/2,ee=[Yt[0]+(He=je*qi),Yt[1]-(Ue=je*Oo)],ae=[Yt[0]+(wn=Fe*qi),Yt[1]+(bn=Fe*Oo)];break;case"bottom-right":je=W.width/2,Fe=W.height/2,ee=[Yt[0]+(He=je*qi),Yt[1]+(Ue=je*Oo)],ae=[Yt[0]+(bn=Fe*Oo),Yt[1]+(wn=Fe*qi)];break;case"bottom":je=W.height/2,Fe=W.height/2,ee=[Yt[0]+(Ue=je*Oo),Yt[1]+(He=je*qi)],ae=[Yt[0]-(bn=Fe*Oo),Yt[1]+(wn=Fe*qi)];break;case"bottom-left":je=W.height/2,Fe=W.width/2,ee=[Yt[0]-(Ue=je*Oo),Yt[1]+(He=je*qi)],ae=[Yt[0]-(wn=Fe*qi),Yt[1]+(bn=Fe*Oo)];break;case"left":je=W.width/2,Fe=W.width/2,ee=[Yt[0]-(He=je*qi),Yt[1]+(Ue=je*Oo)],ae=[Yt[0]-(wn=Fe*qi),Yt[1]-(bn=Fe*Oo)];break;case"top-left":je=W.width/2,Fe=W.height/2,ee=[Yt[0]-(He=je*qi),Yt[1]-(Ue=je*Oo)],ae=[Yt[0]-(bn=Fe*Oo),Yt[1]-(wn=Fe*qi)];break;default:je=W.width/2,Fe=W.width/2,ee=[Yt[0]-(Ue=je*Oo),Yt[1]-(He=je*qi)],ae=[Yt[0]+(bn=Fe*Oo),Yt[1]-(wn=Fe*qi)]}if(st.clockwise===!1){var Nn=[ee[0],ee[1]];ee=[ae[0],ae[1]],ae=[Nn[0],Nn[1]]}}var Bn=[ee[0]-Yt[0],ee[1]-Yt[1]],Fn=(je+Tt)/je,sr=(Fe+Tt)/Fe;st.clockwise===!1&&(Fn=(Fe+Tt)/Fe,sr=(je+Tt)/je);var ur=Xt.c.scale([0,0],Bn,Fn),Or=[Yt[0]+ur[0],Yt[1]+ur[1]],ei=[ae[0]-Yt[0],ae[1]-Yt[1]],Ti=Xt.c.scale([0,0],ei,sr),kr=[Yt[0]+Ti[0],Yt[1]+Ti[1]];return f.startPoint={x:ee[0],y:ee[1]},f.endPoint={x:ae[0],y:ae[1]},f.controlPoints=[{x:Or[0],y:Or[1]},{x:kr[0],y:kr[1]}],f},Yo=function(f,u,I,W,st){var Tt=[],Ft=f.getPoint(u);if(Ft===null)return{x:0,y:0,angle:0};if(u<1e-4)Tt=f.getStartTangent().reverse();else if(u>.9999)Tt=f.getEndTangent();else{var Yt=f.getPoint(u+1e-4);Tt.push([Ft.x,Ft.y]),Tt.push([Yt.x,Yt.y])}var ee=Math.atan2(Tt[1][1]-Tt[0][1],Tt[1][0]-Tt[0][0]);if(ee<0&&(ee+=2*_o),I&&(Ft.x+=li(ee)*I,Ft.y+=ta(ee)*I),W){var ae=ee-_o/2;ee>.5*_o&&ee<1.5*_o&&(ae-=_o),Ft.x+=li(ae)*W,Ft.y+=ta(ae)*W}var je={x:Ft.x,y:Ft.y,angle:ee};return st?(ee>.5*_o&&ee<1.5*_o&&(ee-=_o),Object(ot.a)({rotate:ee},je)):je},ua=function kt(f,u){if(u(f)===!1)return!1;if(f&&f.children){for(var I=f.children.length-1;I>=0;I--)if(!kt(f.children[I],u))return!1}return!0},di=function(f,u){typeof u=="function"&&ua(f,u)},ea=function(f,u){typeof u=="function"&&function I(W,st){if(W&&W.children){for(var Tt=W.children.length-1;Tt>=0;Tt--)if(!I(W.children[Tt],st))return}return st(W)!==!1}(f,u)},xi=function(f,u){return u*(Uo[f]||1)},ks=function(f,u){var I=0,W=new RegExp("[\u4E00-\u9FA5]+");return f.split("").forEach(function(st){W.test(st)?I+=u:I+=xi(st,u)}),[I,u]},Ri=function(f,u){var I=[],W={},st={};f.forEach(function(Yt){st[Yt.id]=Yt}),f.forEach(function(Yt,ee){var ae=Object(n.c)(Yt);ae.itemType="combo",ae.children=void 0,ae.parentId===ae.id?(console.warn("The parentId for combo "+ae.id+" can not be the same as the combo's id"),delete ae.parentId):ae.parentId&&!st[ae.parentId]&&(console.warn("The parent combo for combo "+ae.id+" does not exist!"),delete ae.parentId);var je=W[ae.id];if(je){if(ae.children=je.children,W[ae.id]=ae,!(je=ae).parentId)return void I.push(je);var Fe=W[je.parentId];if(Fe)Fe.children?Fe.children.push(ae):Fe.children=[ae];else{var Ue={id:je.parentId,children:[je]};W[je.parentId]=Ue,W[ae.id]=ae}}else if(Object(n.x)(Yt.parentId)){var He=W[Yt.parentId];if(He)He.children?He.children.push(ae):He.children=[ae],W[ae.id]=ae;else{var bn={id:Yt.parentId,children:[ae]};W[bn.id]=bn,W[ae.id]=ae}}else I.push(ae),W[ae.id]=ae});var Tt={};(u||[]).forEach(function(Yt){Tt[Yt.id]=Yt;var ee=W[Yt.comboId];if(ee){var ae={id:Yt.id,comboId:Yt.comboId};ee.children?ee.children.push(ae):ee.children=[ae],ae.itemType="node",W[Yt.id]=ae}});var Ft=0;return I.forEach(function(Yt){Yt.depth=Ft+10,ua(Yt,function(ee){var ae,je=W[ee.id].itemType;ae=je==="node"?W[ee.comboId]:W[ee.parentId],ee.depth=ae&&je==="node"?Ft+1:Ft+10,Ft<ee.depth&&(Ft=ee.depth);var Fe=Tt[ee.id];return Fe&&(Fe.depth=ee.depth),!0})}),I},Rs=function(f,u,I){var W,st=f,Tt={root:{children:f}},Ft=!1,Yt="root";(f||[]).forEach(function(Ue){if(!Ft)return Ue.id===u?(W=Ue,Ue.itemType==="combo"?W.parentId=I:W.comboId=I,void(Ft=!0)):void di(Ue,function(He){return Tt[He.id]={children:He.children},st=Tt[He.parentId||He.comboId||"root"].children,!He||!He.removed&&u!==He.id||!st||(Yt=He.parentId||He.comboId||"root",W=He,He.itemType==="combo"?W.parentId=I:W.comboId=I,Ft=!0,!1)})});var ee=(st=Tt[Yt].children)?st.indexOf(W):-1;if(ee>-1&&st.splice(ee,1),Ft||(W={id:u,itemType:"node",comboId:I},Tt[u]={children:void 0}),u){var ae=!1;if(I){var je=0;(f||[]).forEach(function(Ue){ae||di(Ue,function(He){return I!==He.id||(ae=!0,He.children?He.children.push(W):He.children=[W],je=He.depth,W.itemType==="node"?W.depth=je+2:W.depth=je+1,!1)})})}else I&&ae||W.itemType==="node"||f.push(W);var Fe=W.depth;di(W,function(Ue){return Ue.itemType==="node"?Fe+=2:Fe+=1,Ue.depth=Fe,!0})}return f},Mi=function(f,u){var I={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return f&&f.length!==0&&(f.forEach(function(W){var st=u.findById(W.id);if(st&&st.isVisible()){st.set("bboxCanvasCache",void 0);var Tt=st.getCanvasBBox();Tt.x&&I.minX>Tt.minX&&(I.minX=Tt.minX),Tt.y&&I.minY>Tt.minY&&(I.minY=Tt.minY),Tt.x&&I.maxX<Tt.maxX&&(I.maxX=Tt.maxX),Tt.y&&I.maxY<Tt.maxY&&(I.maxY=Tt.maxY)}}),I.x=(I.minX+I.maxX)/2,I.y=(I.minY+I.maxY)/2,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,Object.keys(I).forEach(function(W){I[W]!==1/0&&I[W]!==-1/0||(I[W]=void 0)})),I},hu=function(f){var u=Object(n.t)(f.x)||Object(n.t)(f.y)||f.type||f.anchorPoints||f.size;return f.style&&(u=u||Object(n.t)(f.style.r)||Object(n.t)(f.style.width)||Object(n.t)(f.style.height)||Object(n.t)(f.style.rx)||Object(n.t)(f.style.ry)),u},ui=function(f){var u={};return Object.keys(f).forEach(function(I){var W=f[I];if(Object(n.v)(W)){var st={};Object.keys(W).forEach(function(Tt){var Ft=W[Tt];(Tt!=="img"||Object(n.x)(Ft))&&(st[Tt]=Object(n.c)(Ft))}),u[I]=st}else u[I]=Object(n.c)(W)}),u};function du(kt){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}function eo(kt){if(typeof kt!="string")return kt;var f=function(Or){if(typeof Or!="string")return Or;try{return JSON.parse(Or.trim())}catch(ei){return Or.trim()}},u=f(kt);if(typeof u!="string")return u;for(var I=function(Or){return Or[Or.length-1]},W=kt.trim(),st=[],Tt=[],Ft=function(){for(var Or=[],ei=0;ei<arguments.length;ei++)Or[ei]=arguments[ei];return Or.some(function(Ti){return I(Tt)===Ti})},Yt=null,ee=0,ae="";ee<W.length;){var je=W[ee],Fe=Ft('"',"'");if(Fe||je.trim()){var Ue=W[ee-1]==="\\",He=Ft("}"),bn=Ft("]"),wn=Ft(","),Nn=I(st);if(Fe)if(I(Tt)!==je||Ue)ae+=je;else{Tt.pop();var Bn=f(ae);Nn.push(Bn),Yt=Bn,ae=""}else if(bn&&je===",")ae&&(Nn.push(f(ae)),ae="");else if(He&&je===":")Tt.push(","),ae&&(Nn.push(ae),ae="");else if(wn&&je===",")ae&&(Nn.push(f(ae)),ae=""),Tt.pop();else if(je==="}"&&(He||wn)){ae&&(Nn.push(f(ae)),ae=""),wn&&Tt.pop();for(var Fn={},sr=1;sr<Nn.length;sr+=2)Fn[Nn[sr-1]]=Nn[sr];st.pop(),st.length&&I(st).push(Fn),Tt.pop(),Yt=Fn}else je==="]"&&bn?(ae&&(Nn.push(f(ae)),ae=""),st.pop(),st.length&&I(st).push(Nn),Tt.pop(),Yt=Nn):je==="{"?(st.push([]),Tt.push("}")):je==="["?(st.push([]),Tt.push("]")):je==='"'?Tt.push('"'):je==="'"?Tt.push("'"):ae+=je;ee+=1}else ee+=1}return Yt||ae}function vu(kt,f){var u;f===void 0&&(f={x:0,y:0});var I=Object(ot.a)({x:0,y:0,width:0,height:0},f);if((u=kt.children)===null||u===void 0?void 0:u.length){var W=kt.attrs,st=W===void 0?{}:W,Tt=st.marginTop,Ft=Object(ot.a)({},f);Tt&&(Ft.y+=Tt);for(var Yt=0;Yt<kt.children.length;Yt++){kt.children[Yt].attrs.key=(st.key||"root")+" -"+Yt+" ";var ee=vu(kt.children[Yt],Ft);if(ee.bbox){var ae=ee.bbox;ee.attrs.next==="inline"?Ft.x+=ee.bbox.width:Ft.y+=ee.bbox.height,ae.width+ae.x>I.width&&(I.width=ae.width+ae.x),ae.height+ae.y>I.height&&(I.height=ae.height+ae.y)}}}return kt.bbox=function(je,Fe,Ue){var He,bn,wn=je.attrs,Nn=wn===void 0?{}:wn,Bn={x:Fe.x||0,y:Fe.y||0,width:Ue.width||0,height:Ue.height||0};switch(je.type){case"maker":case"circle":Nn.r&&(bn=2*Nn.r,He=2*Nn.r);break;case"text":Nn.text&&(bn=ks(Nn.text,Nn.fontSize||12)[0],He=16,Bn.y+=He,Bn.height=He,Bn.width=bn,je.attrs=Object(ot.a)({fontSize:12,fill:"#000"},Nn));break;default:Nn.width&&(bn=Nn.width),Nn.height&&(He=Nn.height)}return He>=0&&(Bn.height=He),bn>=0&&(Bn.width=bn),Nn.marginTop&&(Bn.y+=Nn.marginTop),Nn.marginLeft&&(Bn.x+=Nn.marginLeft),Bn}(kt,f,I),kt.attrs=Object(ot.a)(Object(ot.a)({},kt.attrs),kt.bbox),kt}function na(kt){var f={},u=function(W){var st=function(Yt){return function(ee){for(var ae=Yt.length,je=[],Fe=0,Ue="";Fe<ae;)if(Yt[Fe]==="{"&&Yt[Fe+1]==="{")je.push(Ue),Ue="",Fe+=2;else if(Yt[Fe]==="}"&&Yt[Fe+1]==="}"){if(je.length){var He=je.pop();Ue=Object(n.i)(ee,Ue,He.endsWith("=")?'"{'+Ue+'}"':Ue),je.push(He+Ue)}Fe+=2,Ue=""}else Ue+=Yt[Fe],Fe+=1;return je.push(Ue),je.map(function(bn,wn){return je[wn-1]&&je[wn-1].endsWith("=")?'"{'+bn+'}"':bn}).join("")}}(typeof kt=="function"?kt(W):kt)(W),Tt=document.createElement("div");Tt.innerHTML=st;var Ft=vu(function Yt(ee,ae){var je={},Fe=ee.getAttributeNames&&ee.getAttributeNames()||[],Ue=ee.children&&Array.from(ee.children).map(function(wn){return Yt(wn,ae)}),He={},bn=ee.tagName?ee.tagName.toLowerCase():"group";return bn==="text"&&(je.text=ee.innerText),He.type=bn,bn==="img"&&(He.type="image"),Array.from(Fe).forEach(function(wn){var Nn=wn.split("-").reduce(function(sr,ur){return sr+ur.charAt(0).toUpperCase()+ur.slice(1)}),Bn=ee.getAttribute(wn);try{if(Nn==="style"||Nn==="attrs"){var Fn=eo(Bn);je=Object(ot.a)(Object(ot.a)({},je),Fn)}else He[Nn]=eo(Bn)}catch(sr){if(Nn==="style")throw sr;He[Nn]=Bn}}),He.attrs=je,ae&&ae.style&&He.name&&du(ae.style[He.name])==="object"&&(He.attrs=Object(ot.a)(Object(ot.a)({},He.attrs),ae.style[He.name])),ae&&ae.style&&He.keyshape&&(He.attrs=Object(ot.a)(Object(ot.a)({},He.attrs),ae.style)),Ue.length&&(He.children=Ue),He}(Tt.children[0],W));return Tt.remove(),Ft};return{draw:function(W,st){var Tt=u(W),Ft=st;return function Yt(ee){var ae=ee.attrs,je=ae===void 0?{}:ae,Fe=ee.bbox,Ue=ee.type,He=ee.children,bn=Object(ot.c)(ee,["attrs","bbox","type","children"]);if(ee.type!=="group"){var wn=st.addShape(ee.type,Object(ot.a)({attrs:je,origin:{bbox:Fe,type:Ue,children:He}},bn));ee.keyshape&&(Ft=wn)}ee.children&&ee.children.forEach(function(Nn){return Yt(Nn)})}(Tt),f[W.id]=[Tt],Ft},update:function(W,st){f[W.id]||(f[W.id]=[]);var Tt=st.getContainer(),Ft=Tt.get("children"),Yt=u(W),ee=function Fe(Ue,He){var bn,wn,Nn,Bn,Fn=(Ue||{}).type,sr=((He==null?void 0:He.attrs)||{}).key;if(sr&&Ue&&(Ue.attrs.key=sr),!Ue&&He)return{action:"delete",val:He,type:Fn,key:sr};if(Ue&&!He)return{action:"add",val:Ue,type:Fn};if(!Ue&&!He)return{action:"same",type:Fn};var ur=[];if(((bn=Ue.children)===null||bn===void 0?void 0:bn.length)>0||((wn=He.children)===null||wn===void 0?void 0:wn.length)>0)for(var Or=Math.max((Nn=Ue.children)===null||Nn===void 0?void 0:Nn.length,(Bn=He.children)===null||Bn===void 0?void 0:Bn.length),ei=He.children||[],Ti=Ue.children||[],kr=0;kr<Or;kr+=1)ur.push(Fe(Ti[kr],ei[kr]));var yi=Object.keys(He.attrs),oo=Object.keys(Ue.attrs);return He.type!==Ue.type?{action:"restructure",nowTarget:Ue,formerTarget:He,key:sr,children:ur}:yi.filter(function(so){return so!=="children"}).some(function(so){return Ue.attrs[so]!==He.attrs[so]||!oo.includes(so)})?{action:"change",val:Ue,children:ur,type:Fn,key:sr}:{action:"same",children:ur,type:Fn,key:sr}}(Yt,f[W.id].pop()),ae=function Fe(Ue){var He;Ue.type!=="group"&&Tt.addShape(Ue.type,{attrs:Ue.attrs}),((He=Ue.children)===null||He===void 0?void 0:He.length)&&Ue.children.map(function(bn){return Fe(bn)})},je=function Fe(Ue){var He,bn=Ft.find(function(wn){return wn.attrs.key===Ue.attrs.key});bn&&Tt.removeChild(bn),((He=Ue.children)===null||He===void 0?void 0:He.length)&&Ue.children.map(function(wn){return Fe(wn)})};(function Fe(Ue){var He=Ue.key;if(Ue.type!=="group"){var bn=Ft.find(function(Nn){return Nn.attrs.key===He});switch(Ue.action){case"change":if(bn){var wn=Ue.val.keyshape?st.getOriginStyle():{};bn.attr(Object(ot.a)(Object(ot.a)({},wn),Ue.val.attrs))}break;case"add":ae(Ue.val);break;case"delete":je(Ue.val);break;case"restructure":je(Ue.formerTarget),ae(Ue.nowTarget)}}Ue.children&&Ue.children.forEach(function(Nn){return Fe(Nn)})})(ee),f[W.id].push(Yt)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ra={};function ia(kt){return ra[kt]||(ra[kt]=Object(n.I)(kt)),ra[kt]}var tc={defaultShapeType:"defaultType",className:null,getShape:function(f){return this[f]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(f,u,I){var W=this.getShape(f),st=W.draw(u,I);return W.afterDraw&&W.afterDraw(u,I,st),st},baseUpdate:function(f,u,I){var W=this.getShape(f);W.update&&W.update(u,I),W.afterUpdate&&W.afterUpdate(u,I)},setState:function(f,u,I,W){this.getShape(f).setState(u,I,W)},shouldUpdate:function(f){return!!this.getShape(f).update},getControlPoints:function(f,u){return this.getShape(f).getControlPoints(u)},getAnchorPoints:function(f,u){return this.getShape(f).getAnchorPoints(u)}},ya={options:{},draw:function(f,u){return this.drawShape(f,u)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){var u=this.options.anchorPoints;return f.anchorPoints||u}},Ur=function(){function kt(){}return kt.registerFactory=function(f,u){var I=ia(f),W=tc,st=Object(ot.a)(Object(ot.a)({},W),u);return kt[I]=st,st.className=I,st},kt.getFactory=function(f){return kt[ia(f)]},kt.registerNode=function(f,u,I){var W,st=kt.Node;if(typeof u=="string"||typeof u=="function"){var Tt=na(u);W=Object(ot.a)(Object(ot.a)({},st.getShape("single-node")),Tt)}else if(u.jsx)Tt=na(u.jsx),W=Object(ot.a)(Object(ot.a)(Object(ot.a)({},st.getShape("single-node")),Tt),u);else{st.getShape(I);var Ft=I?st.getShape(I):ya;W=Object(ot.a)(Object(ot.a)({},Ft),u)}return W.type=f,W.itemType="node",st[f]=W,W},kt.registerEdge=function(f,u,I){var W=kt.Edge,st=I?W.getShape(I):ya,Tt=Object(ot.a)(Object(ot.a)({},st),u);return Tt.type=f,Tt.itemType="edge",W[f]=Tt,Tt},kt.registerCombo=function(f,u,I){var W=kt.Combo,st=I?W.getShape(I):ya,Tt=Object(ot.a)(Object(ot.a)({},st),u);return Tt.type=f,Tt.itemType="combo",W[f]=Tt,Tt},kt}(),yr=Ur;Ur.registerFactory("node",{defaultShapeType:"circle"}),Ur.registerFactory("edge",{defaultShapeType:"line"}),Ur.registerFactory("combo",{defaultShapeType:"circle"});var Yc=["startArrow","endArrow"],pu=function(){function kt(f){this._cfg={},this.destroyed=!1;var u={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(u,this.getDefaultCfg(),f);var I=this.get("model"),W=I.id,st=this.get("type");W||(W=Gr(st),this.get("model").id=W),this.set("id",W);var Tt=f.group;Tt&&(Tt.set("item",this),Tt.set("id",W)),this.init(),this.draw();var Ft=I.shape||I.type||(st==="edge"?"line":"circle"),Yt=this.get("shapeFactory");if(Yt&&Yt[Ft]){var ee=Yt[Ft].options;if(ee&&ee.stateStyles){var ae=this.get("styles")||I.stateStyles;ae=Object(n.e)({},ee.stateStyles,ae),this.set("styles",ae)}}}return kt.prototype.calculateBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=zo(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.calculateCanvasBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=zo(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.drawInner=function(){var f=this.get("shapeFactory"),u=this.get("group"),I=this.get("model");u.clear();var W=I.visible;if(W===void 0||W||this.changeVisibility(W),f){this.updatePosition(I);var st=this.getShapeCfg(I),Tt=st.type,Ft=f.draw(Tt,st,u);Ft&&(this.set("keyShape",Ft),Ft.set("isKeyShape",!0),Ft.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Tt),this.restoreStates(f,Tt)}},kt.prototype.setOriginStyle=function(f){var u=this.get("group").get("children"),I=this.getKeyShape(),W=this,st=I.get("name");if(this.get("originStyle")){var Tt=this.getOriginStyle();st&&!Tt[st]&&(Tt[st]={});var Ft=this.getCurrentStatesStyle();Object(n.f)(u,function(ee){var ae=ee.get("name"),je=ee.attr();if(ae&&ae!==st){var Fe=Ft[ae];Tt[ae]||(Tt[ae]={}),Fe?Object.keys(je).forEach(function(bn){var wn=je[bn];wn!==Fe[bn]&&(Tt[ae][bn]=wn)}):Tt[ae]=Object(n.c)(je)}else{var Ue=ee.attr(),He=Object(ot.a)(Object(ot.a)({},Ft),Ft[st]);Object.keys(Ue).forEach(function(bn){var wn=Ue[bn];Object(n.w)(wn)&&Yc.indexOf(ae)===-1||He[bn]!==wn&&(st?Tt[st][bn]=wn:Tt[bn]=wn)})}}),Tt.path&&delete Tt.path,Tt.matrix&&delete Tt.matrix,W.set("originStyle",Tt)}else{var Yt={};Object(n.f)(u,function(ee){var ae=ee.get("type"),je=ee.get("name");if(je&&je!==st)Yt[je]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je);else{var Fe=W.getShapeStyleByName();if(Fe.path&&delete Fe.path,Fe.matrix&&delete Fe.matrix,st)if(je)Yt[st]=Fe;else{var Ue=Gr("shape");ee.set("name",Ue),Yt[Ue]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je)}else Object.assign(Yt,Fe)}}),W.set("originStyle",Yt)}},kt.prototype.restoreStates=function(f,u){var I=this,W=I.get("states");Object(n.f)(W,function(st){f.setState(u,st,!0,I)})},kt.prototype.init=function(){var f=yr.getFactory(this.get("type"));this.set("shapeFactory",f)},kt.prototype.get=function(f){return this._cfg[f]},kt.prototype.set=function(f,u){Object(n.w)(f)?this._cfg=Object(ot.a)(Object(ot.a)({},this._cfg),f):this._cfg[f]=u},kt.prototype.getDefaultCfg=function(){return{}},kt.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},kt.prototype.beforeDraw=function(){},kt.prototype.afterDraw=function(){},kt.prototype.afterUpdate=function(){},kt.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},kt.prototype.getShapeStyleByName=function(f){var u,I=this.get("group");if(u=f?I.find(function(st){return st.get("name")===f}):this.getKeyShape()){var W={};return Object(n.f)(u.attr(),function(st,Tt){Tt!=="img"&&(W[Tt]=st)}),W}return{}},kt.prototype.getShapeCfg=function(f){var u=this.get("styles");if(u){var I=f;return I.style=Object(ot.a)(Object(ot.a)({},u),f.style),I}return f},kt.prototype.getStateStyle=function(f){var u=this.get("styles");return u&&u[f]},kt.prototype.getOriginStyle=function(){return this.get("originStyle")},kt.prototype.getCurrentStatesStyle=function(){var f=this,u={},I=f.getStates();return I&&I.length?(Object(n.f)(f.getStates(),function(W){u=Object.assign(u,f.getStateStyle(W))}),u):this.getOriginStyle()},kt.prototype.setState=function(f,u){var I=this.get("states"),W=this.get("shapeFactory"),st=f,Tt=f;Object(n.x)(u)&&(st=f+":"+u,Tt=f+":");var Ft=I;if(Object(n.n)(u)){var Yt=I.indexOf(Tt);if(u){if(Yt>-1)return;I.push(st)}else Yt>-1&&I.splice(Yt,1)}else if(Object(n.x)(u)){var ee=I.filter(function(je){return je.includes(Tt)});ee.length>0&&this.clearStates(ee),(Ft=Ft.filter(function(je){return!je.includes(Tt)})).push(st),this.set("states",Ft)}if(W){var ae=this.get("model").type;W.setState(ae,f,u,this)}},kt.prototype.clearStates=function(f){var u=this,I=u.getStates(),W=u.get("shapeFactory"),st=u.get("model").type;f||(f=I),Object(n.x)(f)&&(f=[f]);var Tt=I.filter(function(Ft){return f.indexOf(Ft)===-1});u.set("states",Tt),f.forEach(function(Ft){W.setState(st,Ft,!1,u)})},kt.prototype.getContainer=function(){return this.get("group")},kt.prototype.getKeyShape=function(){return this.get("keyShape")},kt.prototype.getModel=function(){return this.get("model")},kt.prototype.getType=function(){return this.get("type")},kt.prototype.getID=function(){return this.get("id")},kt.prototype.isItem=function(){return!0},kt.prototype.getStates=function(){return this.get("states")},kt.prototype.hasState=function(f){return this.getStates().indexOf(f)>=0},kt.prototype.refresh=function(){var f=this.get("model");this.updatePosition(f),this.updateShape(),this.afterUpdate(),this.clearCache()},kt.prototype.isOnlyMove=function(f){return!1},kt.prototype.update=function(f,u){u===void 0&&(u=!1);var I=this.get("model"),W=I.visible,st=f.visible;W!==st&&st!==void 0&&this.changeVisibility(st);var Tt=I.x,Ft=I.y;f.x=isNaN(f.x)?I.x:f.x,f.y=isNaN(f.y)?I.y:f.y;var Yt=this.get("styles");if(f.stateStyles){var ee=f.stateStyles;Object(n.A)(Yt,ee),delete f.stateStyles}Object.assign(I,f),u?this.updatePosition(f):(Tt===f.x&&Ft===f.y||this.updatePosition(f),this.updateShape()),this.afterUpdate(),this.clearCache()},kt.prototype.updateShape=function(){var f=this.get("shapeFactory"),u=this.get("model"),I=u.type;if(f.shouldUpdate(I)&&I===this.get("currentShape")){var W=this.getShapeCfg(u);f.baseUpdate(I,W,this)}else this.draw();this.setOriginStyle(u),this.restoreStates(f,I)},kt.prototype.updatePosition=function(f){var u=this.get("model"),I=Object(n.s)(f.x)?u.x:f.x,W=Object(n.s)(f.y)?u.y:f.y,st=this.get("group");Object(n.s)(I)||Object(n.s)(W)||(st.resetMatrix(),he(st,{x:I,y:W}),u.x=I,u.y=W,this.clearCache())},kt.prototype.getBBox=function(){var f=this.get("bboxCache");return f||(f=this.calculateBBox(),this.set("bboxCache",f)),f},kt.prototype.getCanvasBBox=function(){var f=this.get("bboxCanvasCache");return f||(f=this.calculateCanvasBBox(),this.set("bboxCanvasCache",f)),f},kt.prototype.toFront=function(){this.get("group").toFront()},kt.prototype.toBack=function(){this.get("group").toBack()},kt.prototype.show=function(){this.changeVisibility(!0)},kt.prototype.hide=function(){this.changeVisibility(!1)},kt.prototype.changeVisibility=function(f){var u=this.get("group");f?u.show():u.hide(),this.set("visible",f)},kt.prototype.isVisible=function(){return this.get("visible")},kt.prototype.enableCapture=function(f){var u=this.get("group");u&&u.set("capture",f)},kt.prototype.destroy=function(){if(!this.destroyed){var f=this.get("animate"),u=this.get("group");f&&u.stopAnimate(),this.clearCache(),u.remove(),this._cfg=null,this.destroyed=!0}},kt}(),ds={source:"start",target:"end"},ec=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(ot.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},f.prototype.setEnd=function(u,I){var W=ds[u]+"Point",st=u+"Node",Tt=this.get(st);Tt&&!Tt.destroyed&&Tt.removeEdge(this),Object(n.w)(I)?(this.set(W,I),this.set(st,null)):(I.addEdge(this),this.set(st,I),this.set(W,null))},f.prototype.getLinkPoint=function(u,I,W){var st=ds[u]+"Point",Tt=u+"Node",Ft=this.get(st);if(!Ft){var Yt=this.get(Tt),ee=u+"Anchor",ae=this.getPrePoint(u,W),je=I[ee];Object(n.s)(je)||(Ft=Yt.getLinkPointByAnchor(je)),Ft=Ft||Yt.getLinkPoint(ae),Object(n.s)(Ft.index)||this.set(u+"AnchorIndex",Ft.index)}return Ft},f.prototype.getPrePoint=function(u,I){if(I&&I.length)return I[u==="source"?0:I.length-1];var W=u==="source"?"target":"source";return this.getEndPoint(W)},f.prototype.getEndPoint=function(u){var I=u+"Node",W=ds[u]+"Point",st=this.get(I);return st?st.get("model"):this.get(W)},f.prototype.getControlPointsByCenter=function(u){var I=this.getEndPoint("source"),W=this.getEndPoint("target"),st=this.get("shapeFactory"),Tt=u.type;return st.getControlPoints(Tt,{startPoint:I,endPoint:W})},f.prototype.getEndCenter=function(u){var I=u+"Node",W=ds[u]+"Point",st=this.get(I);if(st){var Tt=st.getBBox();return{x:Tt.centerX,y:Tt.centerY}}return this.get(W)},f.prototype.init=function(){kt.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},f.prototype.getShapeCfg=function(u){var I=this.get("linkCenter"),W=kt.prototype.getShapeCfg.call(this,u);if(I)W.startPoint=this.getEndCenter("source"),W.endPoint=this.getEndCenter("target");else{var st=W.controlPoints||this.getControlPointsByCenter(W);W.startPoint=this.getLinkPoint("source",u,st),W.endPoint=this.getLinkPoint("target",u,st)}return W.sourceNode=this.get("sourceNode"),W.targetNode=this.get("targetNode"),W},f.prototype.getModel=function(){var u=this.get("model"),I=this.get("sourceNode"),W=this.get("targetNode");return I?delete u.sourceNode:u.source=this.get("startPoint"),W?delete u.targetNode:u.target=this.get("endPoint"),Object(n.x)(u.source)||Object(n.w)(u.source)||(u.source=u.source.getID()),Object(n.x)(u.target)||Object(n.w)(u.target)||(u.target=u.target.getID()),u},f.prototype.setSource=function(u){this.setEnd("source",u),this.set("source",u)},f.prototype.setTarget=function(u){this.setEnd("target",u),this.set("target",u)},f.prototype.getSource=function(){return this.get("source")},f.prototype.getTarget=function(){return this.get("target")},f.prototype.updatePosition=function(){},f.prototype.update=function(u,I){I===void 0&&(I=!1);var W=this.get("model"),st=W.visible,Tt=u.visible;st!==Tt&&Tt!==void 0&&this.changeVisibility(Tt);var Ft=this.get("styles");if(u.stateStyles){var Yt=u.stateStyles;Object(n.A)(Ft,Yt),delete u.stateStyles}Object.assign(W,u),this.updateShape(),this.afterUpdate(),this.clearCache()},f.prototype.destroy=function(){var u=this.get("sourceNode"),I=this.get("targetNode");u&&!u.destroyed&&u.removeEdge(this),I&&!I.destroyed&&I.removeEdge(this),kt.prototype.destroy.call(this)},f}(pu),Qo=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(ot.b)(f,kt),f.prototype.getNearestPoint=function(u,I){for(var W=0,st=u[0],Tt=$t(u[0],I),Ft=0;Ft<u.length;Ft++){var Yt=u[Ft],ee=$t(Yt,I);ee<Tt&&(st=Yt,Tt=ee,W=Ft)}return st.anchorIndex=W,st},f.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getInEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("target")===u})},f.prototype.getOutEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("source")===u})},f.prototype.getNeighbors=function(u){var I=this,W=this.get("edges");return u==="target"?W.filter(function(st){return st.getSource()===I}).map(function(st){return st.getTarget()}):u==="source"?W.filter(function(st){return st.getTarget()===I}).map(function(st){return st.getSource()}):W.map(function(st){return st.getSource()===I?st.getTarget():st.getSource()})},f.prototype.getLinkPointByAnchor=function(u){return this.getAnchorPoints()[u]},f.prototype.getLinkPoint=function(u){var I,W,st=this.get("keyShape").get("type"),Tt=this.get("type"),Ft=this.getBBox();Tt==="combo"?(I=Ft.centerX||(Ft.maxX+Ft.minX)/2,W=Ft.centerY||(Ft.maxY+Ft.minY)/2):(I=Ft.centerX,W=Ft.centerY);var Yt,ee=this.getAnchorPoints();switch(st){case"circle":Yt=Un({x:I,y:W,r:Ft.width/2},u);break;case"ellipse":Yt=Ze({x:I,y:W,rx:Ft.width/2,ry:Ft.height/2},u);break;default:Yt=zn(Ft,u)}var ae=Yt;return ee.length&&(ae||(ae=u),ae=this.getNearestPoint(ee,ae)),ae||(ae={x:I,y:W}),ae},f.prototype.getAnchorPoints=function(){var u=this.get("anchorPointsCache");if(!u){u=[];var I=this.get("shapeFactory"),W=this.getBBox(),st=this.get("model"),Tt=this.getShapeCfg(st),Ft=st.type,Yt=I.getAnchorPoints(Ft,Tt)||[];Object(n.f)(Yt,function(ee,ae){var je={x:W.minX+ee[0]*W.width,y:W.minY+ee[1]*W.height,anchorIndex:ae};u.push(je)}),this.set("anchorPointsCache",u)}return u},f.prototype.addEdge=function(u){this.get("edges").push(u)},f.prototype.lock=function(){this.set("locked",!0)},f.prototype.unlock=function(){this.set("locked",!1)},f.prototype.hasLocked=function(){return this.get("locked")},f.prototype.removeEdge=function(u){var I=this.getEdges(),W=I.indexOf(u);W>-1&&I.splice(W,1)},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},f.prototype.isOnlyMove=function(u){if(!u)return!1;var I=!Object(n.s)(u.x),W=!Object(n.s)(u.y),st=Object.keys(u);return st.length===1&&(I||W)||st.length===2&&I&&W},f}(pu),nc=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(ot.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},f.prototype.getShapeCfg=function(u){var I=this.get("styles"),W=this.get("bbox");if(I&&W){var st=u,Tt={r:Math.hypot(W.height,W.width)/2||In.defaultCombo.size[0]/2,width:W.width||In.defaultCombo.size[0],height:W.height||In.defaultCombo.size[1]};st.style=Object(ot.a)(Object(ot.a)(Object(ot.a)({},I),u.style),Tt);var Ft=u.padding||In.defaultCombo.padding;return Object(n.t)(Ft)?(Tt.r+=Ft,Tt.width+=2*Ft,Tt.height+=2*Ft):(Tt.r+=Ft[0],Tt.width+=Ft[1]+Ft[3]||2*Ft[1],Tt.height+=Ft[0]+Ft[2]||2*Ft[0]),this.set("sizeCache",Tt),st}return u},f.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var u=this.get("keyShape"),I=this.get("group"),W=zo(u,I);W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2;var st=this.get("sizeCache"),Tt=this.get("bboxCache")||{},Ft=Tt.x,Yt=Tt.x;return st?(u.get("type")==="circle"?(W.width=2*st.r,W.height=2*st.r):(W.width=st.width,W.height=st.height),W.minX=W.centerX-W.width/2,W.minY=W.centerY-W.height/2,W.maxX=W.centerX+W.width/2,W.maxY=W.centerY+W.height/2):(W.width=W.maxX-W.minX,W.height=W.maxY-W.minY,W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2),W.x=W.minX,W.y=W.minY,W.x===Ft&&W.y===Yt||this.set("anchorPointsCache",null),W}},f.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.addChild=function(u){switch(u.getType()){case"node":this.addNode(u);break;case"combo":this.addCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.addCombo=function(u){return this.get("combos").push(u),!0},f.prototype.addNode=function(u){return this.get("nodes").push(u),!0},f.prototype.removeChild=function(u){switch(u.getType()){case"node":this.removeNode(u);break;case"combo":this.removeCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.removeCombo=function(u){if(u){var I=this.getCombos(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.removeNode=function(u){if(u){var I=this.getNodes(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.isOnlyMove=function(u){return!1},f.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},f.prototype.destroy=function(){if(!this.destroyed){var u=this.get("animate"),I=this.get("group");u&&I.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),I.remove(),this._cfg=null,this.destroyed=!0}},f}(Qo),Vo=function(){function kt(f){this.graph=f,this.destroyed=!1}return kt.prototype.addItem=function(f,u){var I=this,W=this.graph,st=f==="vedge"?"edge":f,Tt=W.get(st+"Group")||W.get("group"),Ft=Object(n.I)(st),Yt=null,ee=W.get(st+Object(n.I)("stateStyles"))||{},ae=W.get("default"+Ft);u.stateStyles&&(ee=u.stateStyles),ae&&Object(n.f)(ae,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},Fn,u[sr]):Object(n.m)(Fn)?u[sr]=u[sr]||Object(n.c)(ae[sr]):u[sr]=u[sr]||ae[sr]});var je=W.get(st+"Mapper");if(je){var Fe=je(u);Fe.stateStyles&&(ee=Fe.stateStyles,delete Fe.stateStyles),Object(n.f)(Fe,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},u[sr],Fn):u[sr]=Fe[sr]||u[sr]})}if(W.emit("beforeadditem",{type:f,model:u}),f==="edge"||f==="vedge"){var Ue=void 0,He=void 0;if(Ue=u.source,He=u.target,Ue&&Object(n.x)(Ue)&&(Ue=W.findById(Ue)),He&&Object(n.x)(He)&&(He=W.findById(He)),!Ue||!He)return void console.warn("The source or target node of edge "+u.id+" does not exist!");Ue.getType&&Ue.getType()==="combo"&&(u.isComboEdge=!0),He.getType&&He.getType()==="combo"&&(u.isComboEdge=!0),Yt=new ec({model:u,source:Ue,target:He,styles:ee,linkCenter:W.get("linkCenter"),group:Tt.addGroup()})}else if(f==="node")Yt=new Qo({model:u,styles:ee,group:Tt.addGroup()});else if(f==="combo"){var bn=u.children,wn=Mi(bn,W);u.x=wn.x||u.x||100*Math.random(),u.y=wn.y||u.y||100*Math.random();var Nn=Tt.addGroup();Nn.setZIndex(u.depth);var Bn=(Yt=new nc({model:u,styles:ee,bbox:wn,group:Nn})).getModel();(bn||[]).forEach(function(Fn){var sr=W.findById(Fn.id);Yt.addChild(sr),Fn.depth=Bn.depth+2}),u.collapsed&&setTimeout(function(){W.collapseCombo(Yt),I.updateCombo(Yt,[])},250)}if(Yt)return W.get(f+"s").push(Yt),W.get("itemMap")[Yt.get("id")]=Yt,W.emit("afteradditem",{item:Yt,model:u}),Yt},kt.prototype.updateItem=function(f,u){var I,W,st=this.graph;if(Object(n.x)(f)&&(f=st.findById(f)),f&&!f.destroyed){var Tt="";f.getType&&(Tt=f.getType());var Ft=st.get(Tt+"Mapper"),Yt=f.getModel(),ee=f.isOnlyMove(u);if(Ft){var ae=Ft(Object(n.e)({},Yt,u)),je=Object(n.e)({},Yt,ae,u);ae.stateStyles&&(f.set("styles",je.stateStyles),delete je.stateStyles),Object(n.f)(je,function(Bn,Fn){u[Fn]=Bn})}else Object(n.f)(u,function(Bn,Fn){Yt[Fn]&&Object(n.v)(Bn)&&!Object(n.m)(Bn)&&(u[Fn]=Object(ot.a)(Object(ot.a)({},Yt[Fn]),u[Fn]))});if(st.emit("beforeupdateitem",{item:f,cfg:u}),Tt==="edge"){if(u.source){var Fe=u.source;Object(n.x)(Fe)&&(Fe=st.findById(Fe)),f.setSource(Fe)}if(u.target){var Ue=u.target;Object(n.x)(Ue)&&(Ue=st.findById(Ue)),f.setTarget(Ue)}f.update(u)}if(Tt==="node"||Tt==="combo"){f.update(u,ee);var He=f.getEdges(),bn=hu(u);if(bn&&Tt==="node")Object(n.f)(He,function(Bn){Bn.refresh()});else if(bn&&Tt==="combo"){var wn=f.get("shapeFactory"),Nn=Yt.type||"circle";(Yt.animate===void 0||u.animate===void 0?(W=(I=wn[Nn])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:Yt.animate||u.animate)?setTimeout(function(){if(f&&!f.destroyed){var Bn=f.getKeyShape();Bn&&!Bn.destroyed&&Object(n.f)(He,function(Fn){Fn&&!Fn.destroyed&&Fn.refresh()})}},201):Object(n.f)(He,function(Bn){Bn.refresh()})}}st.emit("afterupdateitem",{item:f,cfg:u})}},kt.prototype.updateCombo=function(f,u){var I,W,st=this.graph;if(Object(n.x)(f)&&(f=st.findById(f)),f&&!f.destroyed){var Tt=Mi(u,st);f.set("bbox",Tt),f.update({x:Tt.x,y:Tt.y});var Ft=f.getEdges()||[],Yt=Ft.length,ee=f.getModel(),ae=f.get("shapeFactory"),je=ee.type||"circle";if(ee.animate===void 0?(W=(I=ae[je])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:ee.animate)setTimeout(function(){if(f&&!f.destroyed){var He=f.getKeyShape();if(He&&!He.destroyed)for(var bn=0;bn<Yt;bn++){var wn=Ft[bn];wn&&!wn.destroyed&&wn.refresh()}}},201);else for(var Fe=0;Fe<Yt;Fe++){var Ue=Ft[Fe];Ue&&!Ue.destroyed&&Ue.refresh()}}},kt.prototype.collapseCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.hideItem(W)}),I.combos.forEach(function(W){u.hideItem(W)})},kt.prototype.expandCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.showItem(W)}),I.combos.forEach(function(W){W.getModel().collapsed?W.show():u.showItem(W)})},kt.prototype.removeItem=function(f){var u=this,I=this.graph;if(Object(n.x)(f)&&(f=I.findById(f)),f&&!f.destroyed){var W=Object(n.c)(f.getModel());I.emit("beforeremoveitem",{item:W});var st="";f.getType&&(st=f.getType());var Tt=I.get(st+"s"),Ft=Tt.indexOf(f);if(Ft>-1&&Tt.splice(Ft,1),st==="edge"){var Yt=I.get("v"+st+"s"),ee=Yt.indexOf(f);ee>-1&&Yt.splice(ee,1)}var ae=f.get("id");delete I.get("itemMap")[ae];var je=I.get("comboTrees"),Fe=f.get("id");if(st==="node"){var Ue=f.getModel().comboId;if(je){var He=je,bn=!1;je.forEach(function(ur){bn||di(ur,function(Or){if(Or.id===Fe&&He){var ei=He.indexOf(Or);return He.splice(ei,1),bn=!0,!1}return He=Or.children,!0})})}for(var wn=(sr=f.getEdges()).length-1;wn>=0;wn--)I.removeItem(sr[wn],!1);Ue&&I.updateCombo(Ue)}else if(st==="combo"){var Nn,Bn=f.getModel().parentId,Fn=!1;(je||[]).forEach(function(ur){Fn||di(ur,function(Or){return Or.id!==Fe||(Nn=Or,Fn=!0,!1)})}),Nn.removed=!0,Nn&&Nn.children&&Nn.children.forEach(function(ur){u.removeItem(ur.id)});var sr;for(wn=(sr=f.getEdges()).length;wn>=0;wn--)I.removeItem(sr[wn],!1);Bn&&I.updateCombo(Bn)}f.destroy(),I.emit("afterremoveitem",{item:W})}},kt.prototype.setItemState=function(f,u,I){var W=this.graph,st=u;Object(n.x)(I)&&(st=u+":"+I),f.hasState(st)===I&&I||Object(n.x)(I)&&f.hasState(st)||(W.emit("beforeitemstatechange",{item:f,state:st,enabled:I}),f.setState(u,I),W.autoPaint(),W.emit("afteritemstatechange",{item:f,state:st,enabled:I}))},kt.prototype.priorityState=function(f,u){var I=this.graph,W=f;Object(n.x)(f)&&(W=I.findById(f)),this.setItemState(W,u,!1),this.setItemState(W,u,!0)},kt.prototype.clearItemStates=function(f,u){var I=this.graph;Object(n.x)(f)&&(f=I.findById(f)),I.emit("beforeitemstatesclear",{item:f,states:u}),f.clearStates(u),I.emit("afteritemstatesclear",{item:f,states:u})},kt.prototype.refreshItem=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f)),u.emit("beforeitemrefresh",{item:f}),f.refresh(),u.emit("afteritemrefresh",{item:f})},kt.prototype.addCombos=function(f,u){var I=this,W=this.graph;(f||[]).forEach(function(Tt){ea(Tt,function(Ft){var Yt;return u.forEach(function(ee){ee.id===Ft.id&&(ee.children=Ft.children,ee.depth=Ft.depth,Yt=ee)}),Yt&&I.addItem("combo",Yt),!0})});var st=W.get("comboGroup");st&&st.sort()},kt.prototype.changeItemVisibility=function(f,u){var I=this,W=this.graph;if(Object(n.x)(f)&&(f=W.findById(f)),f){if(W.emit("beforeitemvisibilitychange",{item:f,visible:u}),f.changeVisibility(u),f.getType&&f.getType()==="node"){var st=f.getEdges();Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}else if(f.getType&&f.getType()==="combo"){var Tt=W.get("comboTrees"),Ft=f.get("id"),Yt=[],ee=!1;(Tt||[]).forEach(function(ae){ee||ae.children&&ae.children.length!==0&&di(ae,function(je){return je.id!==Ft||(Yt=je.children,ee=!0,!1)})}),Yt&&Yt.forEach(function(ae){var je=W.findById(ae.id);I.changeItemVisibility(je,u)}),st=f.getEdges(),Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}return W.emit("afteritemvisibilitychange",{item:f,visible:u}),f}console.warn("The item to be shown or hidden does not exist!")},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!0},kt}(),Aa=null,Co=function(){function kt(f){this.graph=f,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return kt.checkCache=function(f,u,I){if(I[u]){var W=I[u].indexOf(f);W>=0&&I[u].splice(W,1)}},kt.cacheState=function(f,u,I){I[u]||(I[u]=[]),I[u].push(f)},kt.prototype.updateState=function(f,u,I){var W=this,st=kt.checkCache,Tt=kt.cacheState;if(!f.destroyed){var Ft=this.cachedStates,Yt=Ft.enabled,ee=Ft.disabled;I?(st(f,u,ee),Tt(f,u,Yt)):(st(f,u,Yt),Tt(f,u,ee)),Aa&&clearTimeout(Aa),Aa=setTimeout(function(){Aa=null,W.updateGraphStates()},16)}},kt.prototype.updateStates=function(f,u,I){var W=this;Object(n.x)(u)?this.updateState(f,u,I):u.forEach(function(st){W.updateState(f,st,I)})},kt.prototype.updateGraphStates=function(){var f=this.graph.get("states"),u=this.cachedStates;Object(n.f)(u.disabled,function(I,W){f[W]&&(f[W]=f[W].filter(function(st){return I.indexOf(st)<0&&!I.destroyed}))}),Object(n.f)(u.enabled,function(I,W){if(f[W]){var st={};f[W].forEach(function(Tt){Tt.destroyed||(st[Tt.get("id")]=!0)}),I.forEach(function(Tt){if(!Tt.destroyed){var Ft=Tt.get("id");st[Ft]||(st[Ft]=!0,f[W].push(Tt))}})}else f[W]=I}),this.graph.emit("graphstatechange",{states:f}),this.cachedStates={enabled:{},disabled:{}}},kt.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Aa&&clearTimeout(Aa),Aa=null,this.destroyed=!0},kt}(),vs=function(f,u){return f&&u?f.replace(/\\?\{([^{}]+)\}/g,function(I,W){if(I.charAt(0)==="\\")return I.slice(1);var st=u[W];return st===0&&(st="0"),st||""}):f},Ns=function(f){var u=[];if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);for(var I=0,W=f;I<W.length;I++){var st=W[I],Tt=st.x,Ft=st.y;u.push(Tt),u.push(Ft)}var Yt=Object(B.a)(u);return Yt.unshift(["M",f[0].x,f[0].y]),Yt},ts=function(f,u,I,W){I===void 0&&(I=0),W===void 0&&(W=0);var st={x:(1-I)*f.x+I*u.x,y:(1-I)*f.y+I*u.y},Tt=[0,0];Xt.c.normalize(Tt,[u.x-f.x,u.y-f.y]),Tt&&(Tt[0]||Tt[1])||(Tt=[0,0]);var Ft=[-Tt[1]*W,Tt[0]*W];return st.x+=Ft[0],st.y+=Ft[1],st},Ls=function(f,u){var I=f.length;if(!I)return"";for(var W="",st=0;st<I;st++){var Tt=f[st];W+=vs(st===0?"M{x} {y}":"L{x} {y}",Tt)}return u&&(W+="Z"),W},Ho=function(f){var u=[];return f.forEach(function(I){if(I[0]!=="A")for(var W=1;W<I.length;W+=2)u.push([I[W],I[W+1]]);else{var st=I.length;u.push([I[st-2],I[st-1]])}}),u},es=function(f){if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);var u=f[0],I=f[1],W=f[f.length-1],st=f[f.length-2];f.unshift(W),f.unshift(st),f.push(u),f.push(I);for(var Tt=[],Ft=1;Ft<f.length-2;Ft+=1){var Yt=f[Ft-1].x,ee=f[Ft-1].y,ae=f[Ft].x,je=f[Ft].y,Fe=f[Ft+1].x,Ue=f[Ft+1].y,He=ae+(Fe-Yt)/6,bn=je+(Ue-ee)/6,wn=Fe-((Ft!==f.length-2?f[Ft+2].x:Fe)-ae)/6,Nn=Ue-((Ft!==f.length-2?f[Ft+2].y:Ue)-je)/6;Tt.push(["C",He,bn,wn,Nn,Fe,Ue])}return Tt.unshift(["M",W.x,W.y]),Tt},Bs=function(f,u){return Xt.c.scale([0,0],Xt.c.normalize([0,0],f),u)},gu=function(f,u){var I=[f[1]-u[1],u[0]-f[0]],W=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(W===0)throw new Error("p0 should not be equal to p1");return[I[0]/W,I[1]/W]},Do=function(f,u){return[u[0]-f[0],u[1]-f[1]]};function ps(kt,f){if(!kt||kt.length<1)return"";if(kt.length===1)return function(Yt){var ee=[Yt[0][0],Yt[0][1]-f],ae=[Yt[0][0],Yt[0][1]+f];return"M "+ee+" A "+f+","+f+",0,0,0,"+ae+" A "+f+","+f+",0,0,0,"+ee}(kt);if(kt.length===2)return function(Yt){var ee=Xt.c.scale([0,0],gu(Yt[0],Yt[1]),f),ae=Xt.c.scale([0,0],ee,-1),je=Xt.c.add([0,0],Yt[0],ee),Fe=Xt.c.add([0,0],Yt[1],ee),Ue=Xt.c.add([0,0],Yt[1],ae),He=Xt.c.add([0,0],Yt[0],ae);return"M "+je+" L "+Fe+" A "+[f,f,"0,0,0",Ue].join(",")+" L "+He+" A "+[f,f,"0,0,0",je].join(",")}(kt);for(var u=new Array(kt.length),I=0;I<u.length;++I){var W=I===0?kt[kt.length-1]:kt[I-1],st=kt[I],Tt=Xt.c.scale([0,0],gu(W,st),f);u[I]=[Xt.c.add([0,0],W,Tt),Xt.c.add([0,0],st,Tt)]}var Ft="A "+[f,f,"0,0,0,"].join(",");return(u=u.map(function(Yt,ee){var ae="";return ee===0&&(ae="M "+u[u.length-1][1]+" "),ae+=Ft+Yt[0]+" L "+Yt[1]})).join(" ")}function yu(kt,f){var u,I,W,st=kt.length;if(!kt||st<1)return"";if(st===1)return I=[(u=kt)[0][0],u[0][1]-f],W=[u[0][0],u[0][1]+f],"M "+I+" A "+[f,f,"0,0,0",W].join(",")+" A "+[f,f,"0,0,0",I].join(",");if(st===2)return function(ae){var je=Do(ae[0],ae[1]),Fe=Bs(je,f),Ue=Xt.c.add([0,0],ae[0],Xt.c.scale([0,0],Fe,-1)),He=Xt.c.add([0,0],ae[1],Fe),bn=1.2*f,wn=Bs(Xt.c.normalize([0,0],je),bn),Nn=Xt.c.scale([0,0],wn,-1),Bn=Xt.c.add([0,0],Ue,Nn),Fn=Xt.c.add([0,0],He,Nn),sr=Xt.c.add([0,0],Ue,wn);return"M "+Ue+" C "+[Bn,Fn,He].join(",")+" S "+[sr,Ue].join(",")+" Z"}(kt);for(var Tt=kt.map(function(ae,je){var Fe=kt[(je+1)%st];return{p:ae,v:Xt.c.normalize([0,0],Do(ae,Fe))}}),Ft=0;Ft<Tt.length;++Ft){var Yt=Ft>0?Ft-1:st-1,ee=Xt.c.normalize([0,0],Xt.c.add([0,0],Tt[Yt].v,Xt.c.scale([0,0],Tt[Ft].v,-1)));Tt[Ft].p=Xt.c.add([0,0],Tt[Ft].p,Xt.c.scale([0,0],ee,f))}return Tt.map(function(ae){var je=ae.p;return{x:je[0],y:je[1]}})}var Fs=function(f,u,I){return(f.y-I.y)*(u.x-I.x)-(f.x-I.x)*(u.y-I.y)},mr=function(f){var u=f.map(function(Tt){return{x:Tt.getModel().x,y:Tt.getModel().y}});if(u.sort(function(Tt,Ft){return Tt.x===Ft.x?Tt.y-Ft.y:Tt.x-Ft.x}),u.length===1)return u;for(var I=[],W=0;W<u.length;W++){for(;I.length>=2&&Fs(I[I.length-2],I[I.length-1],u[W])<=0;)I.pop();I.push(u[W])}var st=[];for(W=u.length-1;W>=0;W--){for(;st.length>=2&&Fs(st[st.length-2],st[st.length-1],u[W])<=0;)st.pop();st.push(u[W])}return st.pop(),I.pop(),I.concat(st)},Gs={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Eo(kt,f,u){var I=!1,W=function(Yt,ee){return f.cells[Yt+ee*f.width]},st=function(Yt,ee){var ae=0;return W(Yt-1,ee-1)>=u&&(ae+=1),W(Yt,ee-1)>u&&(ae+=2),W(Yt-1,ee)>u&&(ae+=4),W(Yt,ee)>u&&(ae+=8),ae},Tt=function(Yt,ee){for(var ae,je,Fe=Yt,Ue=ee,He=0;He<f.width*f.height;He++){if(ae=Fe,je=Ue,kt.findIndex(function(wn){return wn.x===Fe&&wn.y===Ue})>-1){if(kt[0].x===Fe&&kt[0].y===Ue)return!0}else kt.push({x:Fe,y:Ue});var bn=st(Fe,Ue);switch(bn){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Fe++;break;case 12:case 14:case 4:Fe--;break;case 6:ae===0&&(je===-1?Fe-=1:Fe+=1);break;case 1:case 13:case 5:Ue--;break;case 9:ae===1&&(je===0?Ue-=1:Ue+=1);break;case 10:case 8:case 11:Ue++;break;default:return console.warn("Marching squares invalid state: "+bn),!0}}};this.march=function(){for(var Ft=0;Ft<f.width&&!I;Ft+=1)for(var Yt=0;Yt<f.height&&!I;Yt+=1)W(Ft,Yt)>u&&st(Ft,Yt)!==15&&(I=Tt(Ft,Yt));return I}}var ma=function(f,u){var I=Number.POSITIVE_INFINITY,W=null;return f.forEach(function(st){var Tt=Pe(st,u);Tt>=0&&Tt<I&&(W=st,I=Tt)}),W};function mu(kt,f,u,I,W){var st=function(Tt,Ft,Yt){var ee=null,ae=Number.POSITIVE_INFINITY;return Ft.forEach(function(je){var Fe={x:Tt.getModel().x,y:Tt.getModel().y},Ue={x:je.getModel().x,y:je.getModel().y},He=Le(Fe,Ue),bn=new fn(Fe.x,Fe.y,Ue.x,Ue.y),wn=Yt.reduce(function(Nn,Bn){return Pe(Bn,bn)>0?Nn+1:Nn},0);He*Math.pow(wn+1,2)<ae&&(ee=je,ae=He*Math.pow(wn+1,2))}),ee}(kt,u,f);return st===null?[]:function(Tt){for(var Ft=[];Tt.length>0;){var Yt=Tt.pop();if(Tt.length===0){Ft.push(Yt);break}var ee=Tt.pop(),ae=new fn(Yt.x1,Yt.y1,ee.x2,ee.y2);ma(f,ae)?(Ft.push(Yt),Tt.push(ee)):Tt.push(ae)}return Ft}(function(Tt,Ft,Yt,ee){var ae=[],je=[];je.push(Tt);for(var Fe=!0,Ue=0,He=function(Bn,Fn){var sr=!1;return Fn.forEach(function(ur){sr||(en(Bn,{x:ur.x1,y:ur.y1})||en(Bn,{x:ur.x2,y:ur.y2}))&&(sr=!0)}),sr},bn=function(Bn,Fn){for(var sr=0,ur=Fn;sr<ur.length;sr++){var Or=ur[sr].getBBox(),ei=[[Or.x,Or.y],[Or.x+Or.width,Or.y],[Or.x,Or.y+Or.height],[Or.x+Or.width,Or.y+Or.height]];if(tn(ei,Bn.x,Bn.y))return!0}return!1};Fe&&Ue<Yt;){Fe=!1;for(var wn=function(){var Bn=je.pop(),Fn=ma(Ft,Bn);if(Fn){var sr=Sn(Fn,Bn),ur=sr[0];if(sr[1]===2){var Or=function(Ti){for(var kr=ee,yi=fe(Fn,kr,ur,Ti),oo=He(yi,je)||He(yi,ae),so=bn(yi,Ft);!oo&&so&&kr>=1;)yi=fe(Fn,kr/=1.5,ur,Ti),oo=He(yi,je)||He(yi,ae),so=bn(yi,Ft);!yi||oo||Ti&&so||(je.push(new fn(Bn.x1,Bn.y1,yi.x,yi.y)),je.push(new fn(yi.x,yi.y,Bn.x2,Bn.y2)),Fe=!0)};Or(!0),Fe||Or(!1)}}Fe||ae.push(Bn),Ue+=1};!Fe&&je.length;)wn()}for(;je.length;)ae.push(je.pop());return ae}(new fn(kt.getModel().x,kt.getModel().y,st.getModel().x,st.getModel().y),f,I,W))}var bu=function(f,u,I){var W=Object.assign(Gs,I),st=le(f.map(function(Or){return{x:Or.getModel().x,y:Or.getModel().y}}));f=f.sort(function(Or,ei){return Le({x:Or.getModel().x,y:Or.getModel().y},st)-Le({x:ei.getModel().x,y:ei.getModel().y},st)});var Tt=[],Ft=[];f.forEach(function(Or){mu(Or,u,Tt,W.maxRoutingIterations,W.morphBuffer).forEach(function(ei){Ft.push(ei)}),Tt.push(Or)});for(var Yt,ee,ae,je,Fe,Ue=function(Or,ei,Ti){var kr={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},yi=[];Or.forEach(function(lo){yi.push(lo.getBBox())}),ei.forEach(function(lo){yi.push(lo.getBBox())});for(var oo=0,so=yi;oo<so.length;oo++){var co=so[oo];kr.minX=(co.minX<kr.minX?co.minX:kr.minX)-Ti,kr.minY=(co.minY<kr.minY?co.minY:kr.minY)-Ti,kr.maxX=(co.maxX>kr.maxX?co.maxX:kr.maxX)+Ti,kr.maxY=(co.maxY>kr.maxY?co.maxY:kr.maxY)+Ti}return kr.width=kr.maxX-kr.minX,kr.height=kr.maxY-kr.minY,kr.x=kr.minX,kr.y=kr.minY,kr}(f,Ft,W.nodeR0),He=(Yt=Ue.width,ee=Ue.height,ae=W.pixelGroupSize,je=Math.ceil(Yt/ae),Fe=Math.ceil(ee/ae),{cells:new Float32Array(Math.max(0,je*Fe)).fill(0),width:je,height:Fe}),bn=[],wn=[],Nn=0;Nn<W.maxMarchingIterations;Nn++)if(Jn(f,u,Ft,Ue,He,W),wn=[],new Eo(bn=[],He,W.threshold).march()){var Bn=bn.map(function(Or){return{x:Math.round(Or.x*W.pixelGroupSize+Ue.minX),y:Math.round(Or.y*W.pixelGroupSize+Ue.minY)}});if(Bn){var Fn=Bn.length;if(W.skip>1)for(Fn=Math.floor(Bn.length/W.skip);Fn<3&&W.skip>1;)W.skip-=1,Fn=Math.floor(Bn.length/W.skip);for(var sr=0,ur=0;ur<Fn;ur+=1,sr+=W.skip)wn.push({x:Bn[sr].x,y:Bn[sr].y})}if(wn&&function(){for(var Or=0,ei=f;Or<ei.length;Or++){var Ti=ei[Or],kr=wn.map(function(yi){return[yi.x,yi.y]});if(!tn(kr,Ti.getBBox().centerX,Ti.getBBox().centerY))return!1}return!0}())return wn;if(W.threshold*=.9,Nn<=.5*W.maxMarchingIterations)W.memberInfluenceFactor*=1.2,W.edgeInfluenceFactor*=1.2;else{if(!(W.nonMemberInfluenceFactor!==0&&u.length>0))break;W.nonMemberInfluenceFactor*=.8}}return wn};function Jn(kt,f,u,I,W,st){function Tt(Fe,Ue){var He=Math.floor((Fe-Ue)/st.pixelGroupSize);return He<0?0:He}function Ft(Fe,Ue){return Fe*st.pixelGroupSize+Ue}var Yt=(st.nodeR0-st.nodeR1)*(st.nodeR0-st.nodeR1),ee=(st.edgeR0-st.edgeR1)*(st.edgeR0-st.edgeR1),ae=function(Ue,He){return[Math.min(Tt(Ue.minX,He+I.minX),W.width),Math.min(Tt(Ue.minY,He+I.minY),W.height),Math.min(Tt(Ue.maxX,-He+I.minX),W.width),Math.min(Tt(Ue.maxY,-He+I.minY),W.height)]},je=function(Ue,He){for(var bn=Ue.getBBox(),wn=ae(bn,st.nodeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(He<0&&W[Or+ur*W.width]<=0)){var ei=Ft(Or,I.minX),Ti=Ft(ur,I.minY),kr=sn({x:ei,y:Ti},{x:bn.minX,y:bn.minY,width:bn.width,height:bn.height});if(kr<Math.pow(st.nodeR1,2)){var yi=Math.sqrt(kr)-st.nodeR1;W.cells[Or+ur*W.width]+=He*yi*yi}}};st.nodeInfluenceFactor&&kt.forEach(function(Fe){je(Fe,st.nodeInfluenceFactor/Yt)}),st.edgeInfluenceFactor&&u.forEach(function(Fe){(function(Ue,He){for(var bn=Ue.getBBox(),wn=ae(bn,st.edgeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(He<0&&W.cells[Or+ur*W.width]<=0)){var ei=Ft(Or,I.minX),Ti=Ft(ur,I.minY),kr=Be({x:ei,y:Ti},Ue);if(kr<Math.pow(st.edgeR1,2)){var yi=Math.sqrt(kr)-st.edgeR1;W.cells[Or+ur*W.width]+=He*yi*yi}}})(Fe,st.edgeInfluenceFactor/ee)}),st.negativeNodeInfluenceFactor&&f.forEach(function(Fe){je(Fe,st.negativeNodeInfluenceFactor/Yt)})}function fe(kt,f,u,I){var W=kt.getBBox(),st=u[0],Tt=u[1],Ft=u[2],Yt=u[3],ee={topLeft:{x:W.minX-f,y:W.minY-f},topRight:{x:W.maxX+f,y:W.minY-f},bottomLeft:{x:W.minX-f,y:W.maxY+f},bottomRight:{x:W.maxX+f,y:W.maxY+f}},ae=W.height*W.width;function je(Fe,Ue){return W.width*(.5*(Fe.y-W.minY+(Ue.y-W.minY)))}if(Tt)return st?I?ee.topLeft:ee.bottomRight:Ft?I?ee.bottomLeft:ee.topRight:je(Tt,Yt)<.5*ae?Tt.y>Yt.y?I?ee.topLeft:ee.bottomRight:I?ee.topRight:ee.bottomLeft:Tt.y<Yt.y?I?ee.bottomLeft:ee.topRight:I?ee.bottomRight:ee.topLeft;if(Yt){if(st)return I?ee.topRight:ee.bottomLeft;if(Ft)return I?ee.bottomRight:ee.topLeft}return je(st,Ft)<.5*ae?st.x>Ft.x?I?ee.topLeft:ee.bottomRight:I?ee.bottomLeft:ee.topRight:st.x<Ft.x?I?ee.topRight:ee.bottomLeft:I?ee.bottomRight:ee.topLeft}var Ta=function(){function kt(f,u){this.cfg=Object(n.e)(this.getDefaultCfg(),u),this.graph=f,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return kt.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},kt.prototype.setPadding=function(){var f=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+f:10+f,this.cfg.bubbleCfg={nodeR0:this.padding-f,nodeR1:this.padding-f,morphBuffer:this.padding-f}},kt.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},kt.prototype.calcPath=function(f,u){var I,W,st;switch(this.type){case"round-convex":st=ps((I=mr(f)).map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=Object(B.b)(st);break;case"smooth-convex":(I=mr(f)).length===2?(st=ps(I.map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=Object(B.b)(st)):I.length>2&&(st=yu(I.map(function(Tt){return[Tt.x,Tt.y]}),this.padding),W=es(st));break;case"bubble":W=(I=bu(f,u,this.cfg.bubbleCfg)).length>=2&&es(I)}return W},kt.prototype.render=function(){this.group.addShape("path",{attrs:Object(ot.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},kt.prototype.addMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.members.push(f);var u=this.nonMembers.indexOf(f);return u>-1&&this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.addNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.nonMembers.push(f);var u=this.members.indexOf(f);return u>-1&&this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.removeMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.members.indexOf(f);return u>-1&&(this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.removeNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.nonMembers.indexOf(f);return u>-1&&(this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.updateData=function(f,u){var I=this;this.group.findById(this.id).remove(),f&&(this.members=f.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),u&&(this.nonMembers=u.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.updateStyle=function(f){this.group.findById(this.id).attr(Object(ot.a)({},f))},kt.prototype.updateCfg=function(f){var u=this;this.cfg=Object(n.e)(this.cfg,f),this.id=this.cfg.id,this.group=this.cfg.group,f.members&&(this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),f.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.contain=function(f){var u,I,W=this,st=(u=Object(n.x)(f)?this.graph.findById(f):f).getKeyShape();if(u.get("type")==="path")I=Ho(st.attr("path"));else{var Tt=st.getCanvasBBox();I=[[Tt.minX,Tt.minY],[Tt.maxX,Tt.minY],[Tt.maxX,Tt.maxY],[Tt.minX,Tt.maxY]]}return I=I.map(function(Ft){var Yt=W.graph.getPointByCanvas(Ft[0],Ft[1]);return[Yt.x,Yt.y]}),cn(I,Ho(this.path))},kt.prototype.destroy=function(){this.group.remove(),this.cfg=null},kt}(),Us=Xt.a.transform;(function(kt){function f(u){var I=kt.call(this)||this;return I.cfg=Object(n.e)(I.getDefaultCfg(),u),I.init(),I.animating=!1,I.destroyed=!1,I.cfg.enabledStack&&(I.undoStack=new Se.Stack(I.cfg.maxStep),I.redoStack=new Se.Stack(I.cfg.maxStep)),I}Object(ot.b)(f,kt),f.prototype.init=function(){this.initCanvas();var u=new Go(this),I=new lr(this),W=new Vo(this),st=new Co(this);this.set({viewController:u,modeController:I,itemController:W,stateController:st}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},f.prototype.initGroups=function(){var u=this.get("canvas"),I=this.get("canvas").get("el").id,W=u.addGroup({id:I+"-root",className:In.rootContainerClassName});if(this.get("groupByTypes")){var st=W.addGroup({id:I+"-edge",className:In.edgeContainerClassName}),Tt=W.addGroup({id:I+"-node",className:In.nodeContainerClassName}),Ft=W.addGroup({id:I+"-combo",className:In.comboContainerClassName});Ft.toBack(),this.set({nodeGroup:Tt,edgeGroup:st,comboGroup:Ft})}var Yt=W.addGroup({id:I+"-delegate",className:In.delegateContainerClassName});this.set({delegateGroup:Yt}),this.set("group",W)},f.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},f.prototype.set=function(u,I){return Object(n.w)(u)?this.cfg=Object(ot.a)(Object(ot.a)({},this.cfg),u):this.cfg[u]=I,this},f.prototype.get=function(u){return this.cfg[u]},f.prototype.getGroup=function(){return this.get("group")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.getMinZoom=function(){return this.get("minZoom")},f.prototype.setMinZoom=function(u){return this.set("minZoom",u)},f.prototype.getMaxZoom=function(){return this.get("maxZoom")},f.prototype.setMaxZoom=function(u){return this.set("maxZoom",u)},f.prototype.getWidth=function(){return this.get("width")},f.prototype.getHeight=function(){return this.get("height")},f.prototype.clearItemStates=function(u,I){Object(n.x)(u)&&(u=this.findById(u));var W=this.get("itemController");I||(I=u.get("states")),W.clearItemStates(u,I),this.get("stateController").updateStates(u,I,!1)},f.prototype.node=function(u){typeof u=="function"&&this.set("nodeMapper",u)},f.prototype.edge=function(u){typeof u=="function"&&this.set("edgeMapper",u)},f.prototype.combo=function(u){typeof u=="function"&&this.set("comboMapper",u)},f.prototype.findById=function(u){return this.get("itemMap")[u]},f.prototype.find=function(u,I){var W,st=this.get(u+"s");return Object(n.f)(st,function(Tt,Ft){if(I(Tt,Ft))return W=Tt}),W},f.prototype.findAll=function(u,I){var W=[];return Object(n.f)(this.get(u+"s"),function(st,Tt){I(st,Tt)&&W.push(st)}),W},f.prototype.findAllByState=function(u,I){return this.findAll(u,function(W){return W.hasState(I)})},f.prototype.translate=function(u,I){var W=this.get("group"),st=Object(n.c)(W.getMatrix());st||(st=[1,0,0,0,1,0,0,0,1]),st=Us(st,[["t",u,I]]),W.setMatrix(st),this.emit("viewportchange",{action:"translate",matrix:W.getMatrix()}),this.autoPaint()},f.prototype.moveTo=function(u,I){var W=this.get("group");ce(W,{x:u,y:I}),this.emit("viewportchange",{action:"move",matrix:W.getMatrix()})},f.prototype.fitView=function(u){u&&this.set("fitViewPadding",u),this.get("viewController").fitView(),this.autoPaint()},f.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},f.prototype.addBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!0),this},f.prototype.removeBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!1),this},f.prototype.updateBehavior=function(u,I,W){return this.get("modeController").updateBehavior(u,I,W),this},f.prototype.zoom=function(u,I){var W=this.get("group"),st=Object(n.c)(W.getMatrix()),Tt=this.get("minZoom"),Ft=this.get("maxZoom");st||(st=[1,0,0,0,1,0,0,0,1]),st=Us(st,I?[["t",-I.x,-I.y],["s",u,u],["t",I.x,I.y]]:[["s",u,u]]),Tt&&st[0]<Tt||Ft&&st[0]>Ft||(W.setMatrix(st),this.emit("viewportchange",{action:"zoom",matrix:st}),this.autoPaint())},f.prototype.zoomTo=function(u,I){var W=u/this.getZoom();this.zoom(W,I)},f.prototype.focusItem=function(u,I,W){var st=this.get("viewController"),Tt=!1;I?Tt=!0:I===void 0&&(Tt=this.get("animate"));var Ft={};W?Ft=W:W===void 0&&(Ft=this.get("animateCfg")),st.focus(u,Tt,Ft),this.autoPaint()},f.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},f.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},f.prototype.getPointByClient=function(u,I){return this.get("viewController").getPointByClient(u,I)},f.prototype.getClientByPoint=function(u,I){return this.get("viewController").getClientByPoint(u,I)},f.prototype.getPointByCanvas=function(u,I){return this.get("viewController").getPointByCanvas(u,I)},f.prototype.getCanvasByPoint=function(u,I){return this.get("viewController").getCanvasByPoint(u,I)},f.prototype.showItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!0);if(I&&this.get("enabledStack")){var st=W.getID(),Tt={},Ft={};switch(W.getType()){case"node":Tt.nodes=[{id:st,visible:!1}],Ft.nodes=[{id:st,visible:!0}];break;case"edge":Tt.nodes=[{id:st,visible:!1}],Ft.edges=[{id:st,visible:!0}];break;case"combo":Tt.nodes=[{id:st,visible:!1}],Ft.combos=[{id:st,visible:!0}]}this.pushStack("visible",{before:Tt,after:Ft})}},f.prototype.hideItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!1);if(I&&this.get("enabledStack")){var st=W.getID(),Tt={},Ft={};switch(W.getType()){case"node":Tt.nodes=[{id:st,visible:!0}],Ft.nodes=[{id:st,visible:!1}];break;case"edge":Tt.nodes=[{id:st,visible:!0}],Ft.edges=[{id:st,visible:!1}];break;case"combo":Tt.nodes=[{id:st,visible:!0}],Ft.combos=[{id:st,visible:!1}]}this.pushStack("visible",{before:Tt,after:Ft})}},f.prototype.refreshItem=function(u){this.get("itemController").refreshItem(u)},f.prototype.setAutoPaint=function(u){this.set("autoPaint",u),this.get("canvas").set("autoDraw",u)},f.prototype.remove=function(u,I){I===void 0&&(I=!0),this.removeItem(u,I)},f.prototype.removeItem=function(u,I){I===void 0&&(I=!0);var W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W&&Object(n.x)(u))console.warn("The item to be removed does not exist!");else if(W){var st="";if(W.getType&&(st=W.getType()),I&&this.get("enabledStack")){var Tt=Object(ot.a)(Object(ot.a)({},W.getModel()),{itemType:st}),Ft={};switch(st){case"node":Ft.nodes=[Tt],Ft.edges=[];for(var Yt=W.getEdges(),ee=Yt.length-1;ee>=0;ee--)Ft.edges.push(Object(ot.a)(Object(ot.a)({},Yt[ee].getModel()),{itemType:"edge"}));break;case"edge":Ft.edges=[Tt];break;case"combo":Ft.combos=[Tt]}this.pushStack("delete",{before:Ft,after:{}})}if(st==="node"&&W.getModel().comboId&&this.updateComboTree(W),this.get("itemController").removeItem(W),st==="combo"){var ae=Rs(this.get("comboTrees"));this.set("comboTrees",ae)}}},f.prototype.addItem=function(u,I,W,st){W===void 0&&(W=!0),st===void 0&&(st=!0);var Tt=this.get("comboSorted");this.set("comboSorted",Tt&&!st);var Ft=this.get("itemController");if(!I.id||!this.findById(I.id)){var Yt,ee=this.get("comboTrees");if(ee||(ee=[]),u==="combo"){var ae=this.get("itemMap"),je=!1;if(ee.forEach(function(sr){je||ea(sr,function(ur){if(I.parentId===ur.id){je=!0;var Or=Object(ot.a)({id:I.id,depth:ur.depth+2},I);ur.children?ur.children.push(Or):ur.children=[Or],I.depth=Or.depth,Yt=Ft.addItem(u,I)}var ei=ae[ur.id];return je&&ei&&ei.getType&&ei.getType()==="combo"&&Ft.updateCombo(ei,ur.children),!0})}),!je){var Fe=Object(ot.a)({id:I.id,depth:0},I);I.depth=Fe.depth,ee.push(Fe),Yt=Ft.addItem(u,I)}this.set("comboTrees",ee)}else if(u==="node"&&Object(n.x)(I.comboId)&&ee){var Ue;if((Ue=this.findById(I.comboId))&&Ue.getType&&Ue.getType()!=="combo")return void console.warn("'"+I.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");Yt=Ft.addItem(u,I);var He=this.get("itemMap"),bn=!1,wn=!1;(ee||[]).forEach(function(sr){wn||bn||ea(sr,function(ur){if(ur.id===I.id)return wn=!0,!1;if(I.comboId===ur.id&&!wn){bn=!0;var Or=Object(n.c)(I);Or.itemType="node",ur.children?ur.children.push(Or):ur.children=[Or],I.depth=ur.depth+1}return bn&&He[ur.id].getType&&He[ur.id].getType()==="combo"&&Ft.updateCombo(He[ur.id],ur.children),!0})})}else Yt=Ft.addItem(u,I);(u==="node"&&I.comboId||u==="combo"&&I.parentId)&&(Ue=this.findById(I.comboId||I.parentId))&&Ue.addChild(Yt);var Nn=this.get("combos");if(Nn&&Nn.length>0&&this.sortCombos(),this.autoPaint(),W&&this.get("enabledStack")){var Bn=Object(ot.a)(Object(ot.a)({},Yt.getModel()),{itemType:u}),Fn={};switch(u){case"node":Fn.nodes=[Bn];break;case"edge":Fn.edges=[Bn];break;case"combo":Fn.combos=[Bn]}this.pushStack("add",{before:{},after:Fn})}return Yt}console.warn("This item exists already. Be sure the id %c"+I.id+"%c is unique.","font-size: 20px; color: red;","")},f.prototype.add=function(u,I,W,st){return W===void 0&&(W=!0),st===void 0&&(st=!0),this.addItem(u,I,W,st)},f.prototype.updateItem=function(u,I,W){var st=this;W===void 0&&(W=!0);var Tt,Ft=this.get("itemController");Tt=Object(n.x)(u)?this.findById(u):u;var Yt=Object(n.c)(Tt.getModel()),ee="";Tt.getType&&(ee=Tt.getType());var ae=Object(ot.d)(Tt.getStates());if(ee==="combo"&&Object(n.f)(ae,function(He){return st.setItemState(Tt,He,!1)}),Ft.updateItem(Tt,I),ee==="combo"&&Object(n.f)(ae,function(He){return st.setItemState(Tt,He,!0)}),W&&this.get("enabledStack")){var je={nodes:[],edges:[],combos:[]},Fe={nodes:[],edges:[],combos:[]},Ue=Object(ot.a)({id:Yt.id},I);switch(ee){case"node":je.nodes.push(Yt),Fe.nodes.push(Ue);break;case"edge":je.edges.push(Yt),Fe.edges.push(Ue);break;case"combo":je.combos.push(Yt),Fe.combos.push(Ue)}ee==="node"&&je.nodes.push(Yt),this.pushStack("update",{before:je,after:Fe})}},f.prototype.update=function(u,I,W){W===void 0&&(W=!0),this.updateItem(u,I,W)},f.prototype.setItemState=function(u,I,W){Object(n.x)(u)&&(u=this.findById(u)),this.get("itemController").setItemState(u,I,W);var st=this.get("stateController");Object(n.x)(W)?st.updateState(u,I+":"+W,!0):st.updateState(u,I,W)},f.prototype.priorityState=function(u,I){this.get("itemController").priorityState(u,I)},f.prototype.data=function(u){this.set("data",u)},f.prototype.render=function(){var u=this;this.set("comboSorted",!1);var I=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!I)throw new Error("data must be defined first");var W=I.nodes,st=W===void 0?[]:W,Tt=I.edges,Ft=Tt===void 0?[]:Tt,Yt=I.combos,ee=Yt===void 0?[]:Yt;if(this.clear(),this.emit("beforerender"),Object(n.f)(st,function(Ue){u.add("node",Ue,!1,!1)}),ee&&ee.length!==0){var ae=Ri(ee,st);this.set("comboTrees",ae),u.addCombos(ee)}Object(n.f)(Ft,function(Ue){u.add("edge",Ue,!1,!1)});var je=u.get("animate");(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",!1);var Fe=u.get("layoutController");if(Fe){if(Fe.layout(function(){u.get("fitView")?u.fitView():u.get("fitCenter")&&u.fitCenter(),u.autoPaint(),u.emit("afterrender"),(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",je)}),this.destroyed)return}else u.get("fitView")&&u.fitView(),u.get("fitCenter")&&u.fitCenter(),u.emit("afterrender"),u.set("animate",je);this.get("groupByTypes")||(ee&&ee.length!==0?this.sortCombos():I.nodes&&I.edges&&I.nodes.length<I.edges.length?this.getNodes().forEach(function(Ue){Ue.toFront()}):this.getEdges().forEach(function(Ue){Ue.toBack()})),this.get("enabledStack")&&this.pushStack("render")},f.prototype.read=function(u){this.data(u),this.render()},f.prototype.diffItems=function(u,I,W){var st,Tt=this,Ft=this.get("itemMap");Object(n.f)(W,function(Yt){if(st=Ft[Yt.id]){if(Tt.get("animate")&&u==="node"){var ee=st.getContainer().getMatrix();ee||(ee=[1,0,0,0,1,0,0,0,1]),st.set("originAttrs",{x:ee[6],y:ee[7]})}Tt.updateItem(st,Yt,!1)}else st=Tt.addItem(u,Yt,!1);st&&I[u+"s"].push(st)})},f.prototype.changeData=function(u,I){I===void 0&&(I=!0);var W=this;if(!u)return this;I&&this.get("enabledStack")&&this.pushStack("changedata",{before:W.save(),after:u}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(He){return W.clearItemStates(He)}),this.getEdges().map(function(He){return W.clearItemStates(He)});var st=this.get("canvas"),Tt=st.get("localRefresh");st.set("localRefresh",!1),W.get("data")||(W.data(u),W.render());var Ft=this.get("itemMap"),Yt={nodes:[],edges:[]},ee=u.combos;if(ee){var ae=Ri(ee,u.nodes);this.set("comboTrees",ae)}this.diffItems("node",Yt,u.nodes),Object(n.f)(Ft,function(He,bn){Ft[bn].getModel().depth=0,He.getType&&He.getType()==="edge"||(He.getType&&He.getType()==="combo"?(delete Ft[bn],He.destroy()):Yt.nodes.indexOf(He)<0&&(delete Ft[bn],W.remove(He,!1)))});for(var je=this.getCombos(),Fe=je.length-1;Fe>=0;Fe--)je[Fe].destroyed&&je.splice(Fe,1);ee&&(W.addCombos(ee),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",Yt,u.edges),Object(n.f)(Ft,function(He,bn){(!He.getType||He.getType()!=="node"&&He.getType()!=="combo")&&Yt.edges.indexOf(He)<0&&(delete Ft[bn],W.remove(He,!1))}),this.set({nodes:Yt.nodes,edges:Yt.edges});var Ue=this.get("layoutController");return Ue&&(Ue.changeData(),W.get("animate")&&!Ue.getLayoutType()?W.positionsAnimate():W.autoPaint()),setTimeout(function(){st.set("localRefresh",Tt)},16),this},f.prototype.addCombos=function(u){var I=this.get("comboTrees");this.get("itemController").addCombos(I,u)},f.prototype.createCombo=function(u,I){var W=this;this.set("comboSorted",!1);var st,Tt="";if(u){if(Object(n.x)(u))Tt=u,st={id:u};else{if(!(Tt=u.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");st=u}var Ft=I.map(function(ee){var ae=W.findById(ee),je="";ae.getType&&(je=ae.getType());var Fe={id:ae.getID(),itemType:je};return je==="combo"?Fe.parentId=Tt:je==="node"&&(Fe.comboId=Tt),Fe});st.children=Ft,this.addItem("combo",st,!1),this.set("comboSorted",!1);var Yt=this.get("comboTrees");(Yt||[]).forEach(function(ee){ea(ee,function(ae){return ae.id!==Tt||(ae.itemType="combo",ae.children=Ft,!1)})}),Yt&&this.sortCombos()}},f.prototype.uncombo=function(u){var I=this,W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W||W.getType&&W.getType()!=="combo")console.warn("The item is not a combo!");else{var st=W.getModel().parentId,Tt=this.get("comboTrees");Tt||(Tt=[]);var Ft,Yt=this.get("itemMap"),ee=W.get("id"),ae=[],je=this.get("combos"),Fe=this.findById(st);if(Tt.forEach(function(He){Ft||ea(He,function(bn){if(bn.id===ee){Ft=bn,W.getEdges().forEach(function(Nn){I.removeItem(Nn,!1)});var wn=je.indexOf(u);je.splice(wn,1),delete Yt[ee],W.destroy()}return!st||!Ft||bn.id!==st||(Fe.removeCombo(W),(wn=(ae=bn.children).indexOf(Ft))!==-1&&ae.splice(wn,1),Ft.children.forEach(function(Nn){var Bn=I.findById(Nn.id),Fn=Bn.getModel();Bn.getType&&Bn.getType()==="combo"?(Nn.parentId=st,delete Nn.comboId,Fn.parentId=st,delete Fn.comboId):Bn.getType&&Bn.getType()==="node"&&(Nn.comboId=st,Fn.comboId=st),Fe.addChild(Bn),ae.push(Nn)}),!1)})}),!st&&Ft){var Ue=Tt.indexOf(Ft);Tt.splice(Ue,1),Ft.children.forEach(function(He){He.parentId=void 0,I.findById(He.id).getModel().parentId=void 0,He.itemType!=="node"&&Tt.push(He)})}}},f.prototype.updateCombos=function(){var u=this,I=this.get("comboTrees"),W=this.get("itemController"),st=this.get("itemMap");(I||[]).forEach(function(Tt){ea(Tt,function(Ft){if(!Ft)return!0;var Yt=st[Ft.id];if(Yt&&Yt.getType&&Yt.getType()==="combo"){var ee=Object(ot.d)(Yt.getStates());Object(n.f)(ee,function(ae){return u.setItemState(Yt,ae,!1)}),W.updateCombo(Yt,Ft.children),Object(n.f)(ee,function(ae){return u.setItemState(Yt,ae,!0)})}return!0})}),this.sortCombos()},f.prototype.updateCombo=function(u){var I,W=this,st=u;if(Object(n.x)(u)&&(st=this.findById(u)),!st||st.getType&&st.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{I=st.get("id");var Tt=this.get("comboTrees"),Ft=this.get("itemController"),Yt=this.get("itemMap");(Tt||[]).forEach(function(ee){ea(ee,function(ae){if(!ae)return!0;var je=Yt[ae.id];if(I===ae.id&&je&&je.getType&&je.getType()==="combo"){var Fe=Object(ot.d)(je.getStates());Object(n.f)(Fe,function(Ue){je.getStateStyle(Ue)&&W.setItemState(je,Ue,!1)}),Ft.updateCombo(je,ae.children),Object(n.f)(Fe,function(Ue){je.getStateStyle(Ue)&&W.setItemState(je,Ue,!0)}),I&&(I=ae.parentId)}return!0})})}},f.prototype.updateComboTree=function(u,I,W){W===void 0&&(W=!0);var st;this.set("comboSorted",!1);var Tt,Ft=(st=Object(n.x)(u)?this.findById(u):u).getModel(),Yt=Ft.comboId||Ft.parentId,ee="";if(st.getType&&(ee=st.getType()),I&&ee==="combo"){var ae,je=this.get("comboTrees"),Fe=!0;if((je||[]).forEach(function(Nn){ae||di(Nn,function(Bn){if(!ae)return Bn.id===st.getID()&&(ae=Bn),!0})}),di(ae,function(Nn){return Nn.id!==I||(Fe=!1,!1)}),!Fe)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(W&&this.get("enabledStack")){var Ue={},He={};ee==="combo"?(Ue.combos=[{id:Ft.id,parentId:Ft.parentId}],He.combos=[{id:Ft.id,parentId:I}]):ee==="node"&&(Ue.nodes=[{id:Ft.id,parentId:Ft.comboId}],He.nodes=[{id:Ft.id,parentId:I}]),this.pushStack("updateComboTree",{before:Ue,after:He})}if(Ft.parentId||Ft.comboId){var bn=this.findById(Ft.parentId||Ft.comboId);bn&&bn.removeChild(st)}ee==="combo"?Ft.parentId=I:ee==="node"&&(Ft.comboId=I),I&&(Tt=this.findById(I))&&Tt.addChild(st),Yt&&(Tt=this.findById(Yt))&&Tt.removeChild(st);var wn=Rs(this.get("comboTrees"),Ft.id,I);this.set("comboTrees",wn),this.updateCombos()},f.prototype.save=function(){var u=[],I=[],W=[];return Object(n.f)(this.get("nodes"),function(st){u.push(st.getModel())}),Object(n.f)(this.get("edges"),function(st){I.push(st.getModel())}),Object(n.f)(this.get("combos"),function(st){W.push(st.getModel())}),{nodes:u,edges:I,combos:W}},f.prototype.changeSize=function(u,I){return this.get("viewController").changeSize(u,I),this},f.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var u=this.get("nodes"),I=this.get("edges"),W=this.get("edges");Object(n.f)(u,function(st){st.refresh()}),Object(n.f)(I,function(st){st.refresh()}),Object(n.f)(W,function(st){st.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.getComboChildren=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),u&&(!u.getType||u.getType()==="combo"))return u.getChildren();console.warn("The combo does not exist!")},f.prototype.positionsAnimate=function(){var u=this;u.emit("beforeanimate");var I=u.get("animateCfg"),W=I.onFrame,st=u.getNodes(),Tt=st.map(function(Ft){var Yt=Ft.getModel();return{id:Yt.id,x:Yt.x,y:Yt.y}});u.isAnimating()&&u.stopAnimate(),u.get("canvas").animate(function(Ft){Object(n.f)(Tt,function(Yt){var ee=u.findById(Yt.id);if(ee&&!ee.destroyed){var ae=ee.get("originAttrs"),je=ee.get("model");if(!ae){var Fe=ee.getContainer().getMatrix();Fe||(Fe=[1,0,0,0,1,0,0,0,1]),ae={x:Fe[6],y:Fe[7]},ee.set("originAttrs",ae)}if(W){var Ue=W(ee,Ft,Yt,ae);ee.set("model",Object.assign(je,Ue))}else je.x=ae.x+(Yt.x-ae.x)*Ft,je.y=ae.y+(Yt.y-ae.y)*Ft}}),u.refreshPositions()},{duration:I.duration,easing:I.easing,callback:function(){Object(n.f)(st,function(Yt){Yt.set("originAttrs",null)}),I.callback&&I.callback(),u.emit("afteranimate"),u.animating=!1}})},f.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var u,I=this.get("nodes"),W=this.get("edges"),st=this.get("vedges"),Tt=this.get("combos"),Ft={};Object(n.f)(I,function(Yt){u=Yt.getModel();var ee=Yt.get("originAttrs");ee&&u.x===ee.x&&u.y===ee.y||(Yt.updatePosition({x:u.x,y:u.y}),Ft[u.id]=!0,u.comboId&&(Ft[u.comboId]=!0))}),Tt&&Tt.length!==0&&this.updateCombos(),Object(n.f)(W,function(Yt){var ee=Yt.getSource().getModel(),ae=Yt.getTarget().getModel();(Ft[ee.id]||Ft[ae.id]||Yt.getModel().isComboEdge)&&Yt.refresh()}),Object(n.f)(st,function(Yt){Yt.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},f.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},f.prototype.isAnimating=function(){return this.animating},f.prototype.getZoom=function(){var u=this.get("group").getMatrix();return u?u[0]:1},f.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},f.prototype.setMode=function(u){return this.get("modeController").setMode(u),this},f.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},f.prototype.updateLayout=function(u){var I,W=this.get("layoutController");Object(n.x)(u)?u={type:I=u}:I=u.type;var st=this.get("layout"),Tt=st?st.type:void 0;if(I&&Tt!==I||u.gpuEnabled!==void 0&&u.gpuEnabled!==st.gpuEnabled)I||(I=Tt),this.set("layout",u),W.changeLayout(I);else{var Ft={};Object.assign(Ft,st,u),Ft.type=Tt||"random",this.set("layout",Ft),W.updateLayoutCfg(Ft)}},f.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},f.prototype.layout=function(){var u=this.get("layoutController"),I=this.get("layout");I&&u&&(I.workerEnabled?u.layout():u.layoutMethod?u.relayout(!0):u.layout())},f.prototype.collapseCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),u){this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").collapseCombo(u),W.collapsed=!0;var st=this.getEdges().concat(this.get("vedges")),Tt=[],Ft=[],Yt=this.get("comboTrees"),ee=!1,ae={};(Yt||[]).forEach(function(Ue){ae[Ue.id]=Ue}),(Yt||[]).forEach(function(Ue){ee||di(Ue,function(He){if(ee&&ae[He.id])return!1;if(W.parentId===He.id?(ae={},He.children.forEach(function(wn){ae[wn.id]=wn})):W.id===He.id&&(ee=!0),ee){var bn=I.findById(He.id);bn&&bn.getType&&bn.getType()==="combo"&&(Tt=Tt.concat(bn.getNodes()),Ft=Ft.concat(bn.getCombos()))}return!0})});var je={},Fe=[];st.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var He=Ue.getSource(),bn=Ue.getTarget();if((Tt.includes(He)||Ft.includes(He))&&!Tt.includes(bn)&&!Ft.includes(bn)||He.getModel().id===W.id){if((Fn=Ue.getModel()).isVEdge)return void I.removeItem(Ue,!1);for(var wn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(wn.parentId||wn.comboId))||!wn.parentId&&!wn.comboId)return;wn=bn.getModel()}var Nn=wn.id;if(je[W.id+"-"+Nn])return void(je[W.id+"-"+Nn]+=Fn.size||1);var Bn=I.addItem("vedge",{source:W.id,target:Nn,isVEdge:!0},!1);je[W.id+"-"+Nn]=Fn.size||1,Fe.push(Bn)}else if(!Tt.includes(He)&&!Ft.includes(He)&&(Tt.includes(bn)||Ft.includes(bn))||bn.getModel().id===W.id){var Fn;if((Fn=Ue.getModel()).isVEdge)return void I.removeItem(Ue,!1);for(var sr=He.getModel();!He.isVisible();){if(!(He=I.findById(sr.parentId||sr.comboId))||!sr.parentId&&!sr.comboId)return;sr=He.getModel()}var ur=sr.id;if(je[ur+"-"+W.id])return void(je[ur+"-"+W.id]+=Fn.size||1);Bn=I.addItem("vedge",{target:W.id,source:ur,isVEdge:!0},!1),je[ur+"-"+W.id]=Fn.size||1,Fe.push(Bn)}}}),Fe.forEach(function(Ue){var He=Ue.getModel();I.updateItem(Ue,{size:je[He.source+"-"+He.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:u})}else console.warn("The combo to be collapsed does not exist!")},f.prototype.expandCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),!u||u.getType&&u.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").expandCombo(u),W.collapsed=!1;var st=this.getEdges().concat(this.get("vedges")),Tt=[],Ft=[],Yt=this.get("comboTrees"),ee=!1,ae={};(Yt||[]).forEach(function(Ue){ae[Ue.id]=Ue}),(Yt||[]).forEach(function(Ue){ee||di(Ue,function(He){if(ee&&ae[He.id])return!1;if(W.parentId===He.id?(ae={},He.children.forEach(function(wn){ae[wn.id]=wn})):W.id===He.id&&(ee=!0),ee){var bn=I.findById(He.id);bn&&bn.getType&&bn.getType()==="combo"&&(Tt=Tt.concat(bn.getNodes()),Ft=Ft.concat(bn.getCombos()))}return!0})});var je={},Fe={};st.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var He=Ue.getSource(),bn=Ue.getTarget(),wn=He.get("id"),Nn=bn.get("id");if((Tt.includes(He)||Ft.includes(He))&&!Tt.includes(bn)&&!Ft.includes(bn)||wn===W.id){if(Ue.getModel().isVEdge)return void I.removeItem(Ue,!1);for(var Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;Bn=bn.getModel()}Nn=Bn.id;for(var Fn=He.getModel();!He.isVisible();){if(!(He=I.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;if(Fn.comboId===W.id||Fn.parentId===W.id)break;Fn=He.getModel()}if(wn=Fn.id,Nn){if(je[ur=wn+"-"+Nn])return je[ur]+=Ue.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);var sr=I.addItem("vedge",{source:wn,target:Nn,isVEdge:!0},!1);je[ur]=Ue.getModel().size||1,Fe[ur]=sr}}else if(!Tt.includes(He)&&!Ft.includes(He)&&(Tt.includes(bn)||Ft.includes(bn))||Nn===W.id){if(Ue.getModel().isVEdge)return void I.removeItem(Ue,!1);for(Fn=He.getModel();!He.isVisible();){if(!(He=I.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;Fn=He.getModel()}for(wn=Fn.id,Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;if(Bn.comboId===W.id||Bn.parentId===W.id)break;Bn=bn.getModel()}if(Nn=Bn.id,wn){var ur;if(je[ur=wn+"-"+Nn])return je[ur]+=Ue.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);sr=I.addItem("vedge",{target:Nn,source:wn,isVEdge:!0},!1),je[ur]=Ue.getModel().size||1,Fe[ur]=sr}}else(Tt.includes(He)||Ft.includes(He))&&(Tt.includes(bn)||Ft.includes(bn))&&He.isVisible()&&bn.isVisible()&&Ue.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:u})}},f.prototype.collapseExpandCombo=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),!u.getType||u.getType()==="combo"){for(var I=u.getModel(),W=this.findById(I.parentId);W;){var st=W.getModel();if(st.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(W=void 0);W=this.findById(st.parentId)}I.collapsed?this.expandCombo(u):this.collapseCombo(u),this.updateCombo(u)}},f.prototype.sortCombos=function(){var u=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var I=[],W={};(this.get("comboTrees")||[]).forEach(function(st){di(st,function(Tt){return I[Tt.depth]?I[Tt.depth].push(Tt.id):I[Tt.depth]=[Tt.id],W[Tt.id]=Tt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(st){var Tt=st.getModel(),Ft=W[Tt.source]||0,Yt=W[Tt.target]||0,ee=Math.max(Ft,Yt);I[ee]?I[ee].push(Tt.id):I[ee]=[Tt.id]}),I.forEach(function(st){if(st&&st.length)for(var Tt=st.length-1;Tt>=0;Tt--){var Ft=u.findById(st[Tt]);Ft&&Ft.toFront()}})}},f.prototype.getNeighbors=function(u,I){var W=u;return Object(n.x)(u)&&(W=this.findById(u)),W.getNeighbors(I)},f.prototype.getNodeDegree=function(u,I){I===void 0&&(I=void 0);var W=u;Object(n.x)(u)&&(W=this.findById(u));var st=this.get("degrees");st||(st=Object(Se.getDegree)(this.get("data"))),this.set("degees",st);var Tt,Ft=st[W.getID()];switch(I){case"in":Tt=Ft.inDegree;break;case"out":Tt=Ft.outDegree;break;case"all":Tt=Ft;break;default:Tt=Ft.degree}return Tt},f.prototype.getUndoStack=function(){return this.undoStack},f.prototype.getRedoStack=function(){return this.redoStack},f.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},f.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},f.prototype.pushStack=function(u,I,W){if(u===void 0&&(u="update"),W===void 0&&(W="undo"),this.get("enabledStack")){var st=I?Object(n.c)(I):{before:{},after:Object(n.c)(this.save())};W==="redo"?this.redoStack.push({action:u,data:st}):this.undoStack.push({action:u,data:st}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},f.prototype.getAdjMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),W},f.prototype.getShortestPathMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix"),st=this.get("shortestPathMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),st&&u||(st=Object(Se.floydWarshall)(this.save(),I),this.set("shortestPathMatrix",st)),st},f.prototype.on=function(u,I,W){return kt.prototype.on.call(this,u,I,W)},f.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},f.prototype.createHull=function(u){if(u.members&&!(u.members.length<1)){var I=this.get("hullGroup"),W=this.get("hullMap");if(W||(W={},this.set("hullMap",W)),I||((I=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",I)),W[u.id])return console.warn("Existed hull id."),W[u.id];var st=I.addGroup({id:u.id+"-container"}),Tt=new Ta(this,Object(ot.a)(Object(ot.a)({},u),{group:st}));return W[Tt.id]=Tt,Tt}console.warn("Create hull failed! The members is empty.")},f.prototype.getHulls=function(){return this.get("hullMap")},f.prototype.getHullById=function(u){return this.get("hullMap")[u]},f.prototype.removeHull=function(u){var I;I=Object(n.x)(u)?this.getHullById(u):u,delete this.get("hullMap")[I.id],I.destroy()},f.prototype.removeHulls=function(){var u=this.getHulls();u&&Object.keys(u).length&&(u.forEach(function(I){I.destroy()}),this.set("hullMap",{}))}})(_t.a);function ns(kt){return(ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}var ba=Xt.a.transform,ca=["startArrow","endArrow"],gs={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Fa={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:gs,combo:gs},ys={options:{},itemType:"",type:"",getCustomConfig:function(f){return{}},getOptions:function(f){return Object(n.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(f)||{},f)},draw:function(f,u){var I=this.drawShape(f,u);return I.set("className",this.itemType+"-shape"),f.label&&this.drawLabel(f,u).set("className",this.itemType+"-label"),I},afterDraw:function(f,u,I){},drawShape:function(f,u){return null},drawLabel:function(f,u){var I=this.getOptions(f).labelCfg||{},W=this.getLabelStyle(f,I,u),st=W.rotate;delete W.rotate;var Tt=u.addShape("text",{attrs:W,draggable:!0,className:"text-shape",name:"text-shape"});if(st){var Ft=Tt.getBBox(),Yt=Tt.getMatrix();if(Yt||(Yt=[1,0,0,0,1,0,0,0,1]),W.rotateCenter)switch(W.rotateCenter){case"center":Yt=ba(Yt,[["t",-Ft.width/2,-Ft.height/2],["r",st],["t",Ft.width/2,Ft.height/2]]);break;case"lefttop":Yt=ba(Yt,[["t",-W.x,-W.y],["r",st],["t",W.x,W.y]]);break;case"leftcenter":Yt=ba(Yt,[["t",-W.x,-W.y-Ft.height/2],["r",st],["t",W.x,W.y+Ft.height/2]]);break;default:Yt=ba(Yt,[["t",-Ft.width/2,-Ft.height/2],["r",st],["t",Ft.width/2,Ft.height/2]])}else Yt=ba(Yt,[["t",-W.x,-W.y-Ft.height/2],["r",st],["t",W.x,W.y+Ft.height/2]]);Tt.setMatrix(Yt)}if(W.background){var ee=this.drawLabelBg(f,u,Tt),ae=this.itemType+"-label-bg";ee.set("classname",ae),Tt.toFront()}return Tt},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,st=Object(n.A)({},W,f.labelCfg),Tt=this.getLabelBgStyleByPosition(I,f,st,u);return u.addShape("rect",{name:"text-bg-shape",attrs:Tt})},getLabelStyleByPosition:function(f,u,I){return{text:f.label}},getLabelBgStyleByPosition:function(f,u,I,W){return{}},getLabelStyle:function(f,u,I){var W=this.getLabelStyleByPosition(f,u,I),st=this.itemType+"Label",Tt=In[st]?In[st].style:null;return Object(ot.a)(Object(ot.a)(Object(ot.a)({},Tt),W),u.style)},getShapeStyle:function(f){return f.style},update:function(f,u){this.updateShapeStyle(f,u),this.updateLabel(f,u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=u.getKeyShape(),st=Object(n.A)({},W.attr(),f.style),Tt=function(ee){var ae,je=st[ee];if(Object(n.w)(je)){var Fe=I.find(function(Ue){return Ue.get("name")===ee});Fe&&Fe.attr(je)}else W.attr(((ae={})[ee]=je,ae))};for(var Ft in st)Tt(Ft)},updateLabel:function(f,u){var I=u.getContainer(),W=this.getOptions({}).labelCfg,st=this.itemType+"-label",Tt=I.find(function(sr){return sr.get("className")===st}),Ft=this.itemType+"-label-bg",Yt=I.find(function(sr){return sr.get("classname")===Ft});if(f.label||f.label==="")if(Tt){var ee={};u.getModel&&(ee=u.getModel().labelCfg);var ae=Object(n.e)({},W,ee,f.labelCfg),je=this.getLabelStyleByPosition(f,ae,I),Fe=f.labelCfg?f.labelCfg.style:void 0,Ue=ae.style&&ae.style.background,He=Object(ot.a)(Object(ot.a)(Object(ot.a)({},Tt.attr()),je),Fe),bn=He.rotate;if(delete He.rotate,bn){var wn=[1,0,0,0,1,0,0,0,1];wn=ba(wn,[["t",-He.x,-He.y],["r",bn],["t",He.x,He.y]]),Tt.resetMatrix(),Tt.attr(Object(ot.a)(Object(ot.a)({},He),{matrix:wn}))}else Tt.resetMatrix(),Tt.attr(He);if(Yt)if(He.background){var Nn=this.getLabelBgStyleByPosition(Tt,f,ae,I),Bn=Object(ot.a)(Object(ot.a)({},Nn),Ue);if(Yt.resetMatrix(),bn){var Fn=[1,0,0,0,1,0,0,0,1];Fn=ba(Fn,[["t",-Bn.x,-Bn.y],["r",bn],["t",Bn.x,Bn.y]]),Bn.matrix=Fn}Yt.attr(Bn)}else I.removeChild(Yt);else He.background&&((Yt=this.drawLabelBg(f,I,Tt)).set("classname",Ft),Tt.toFront())}else this.drawLabel(f,I).set("className",st)},afterUpdate:function(f,u){},setState:function(f,u,I){var W,st,Tt=I.get("keyShape");if(Tt){var Ft=I.getType(),Yt=Object(n.n)(u)?f:f+":"+u,ee=this.getStateStyle(Yt,I),ae=I.getStateStyle(Yt);if(ae||ee){var je=Object(n.A)({},ae||ee),Fe=I.getContainer(),Ue={x:1,y:1,cx:1,cy:1};if(Ft==="combo"&&(Ue.r=1,Ue.width=1,Ue.height=1),u){var He=function(Hi){var Io,ko=je[Hi];if(Object(n.w)(ko)&&!ca.includes(Hi)){var Ro=Fe.find(function(bo){return bo.get("name")===Hi});Ro&&Ro.attr(ko)}else Tt.attr(((Io={})[Hi]=ko,Io))};for(var bn in je)He(bn)}else{var wn=ui(I.getCurrentStatesStyle()),Nn=I.getModel(),Bn=Object(n.A)({},Nn.style,ui(I.getOriginStyle())),Fn=Tt.get("name"),sr=Tt.attr(),ur={};Object.keys(sr).forEach(function(lo){if(lo!=="img"){var Hi=sr[lo];Hi&&ns(Hi)==="object"?ur[lo]=Object(n.c)(Hi):ur[lo]=Hi}});var Or={},ei=function(Hi){var Io=je[Hi];if(Object(n.w)(Io)&&!ca.includes(Hi)){var ko=Fe.find(function(jo){return jo.get("name")===Hi});if(ko){var Ro=Object(n.c)(ko.attr());Object(n.f)(Io,function(jo,ho){if(Hi===Fn&&ur[ho]&&!Ue[ho]){delete ur[ho];var fa=Bn[Hi][ho]||Fa[Ft][ho];Tt.attr(ho,fa)}else if(Ro[ho]||Ro[ho]===0){delete Ro[ho];var Zo=Bn[Hi][ho]||Fa[Ft][ho];ko.attr(ho,Zo)}}),Or[Hi]=Ro}}else if(ur[Hi]&&!Ue[Hi]){delete ur[Hi];var bo=Bn[Hi]||(Bn[Fn]?Bn[Fn][Hi]:void 0)||Fa[Ft][Hi];Tt.attr(Hi,bo)}};for(var Ti in je)ei(Ti);for(var bn in Fn?Or[Fn]=ur:Object(n.A)(Or,ur),wn)if(!Ue[bn]){var kr=wn[bn];Object(n.w)(kr)&&!ca.includes(bn)||(Fn?(Object(n.A)(Bn[Fn],((st={})[bn]=kr,st)),delete Bn[bn]):Object(n.A)(Bn,((W={})[bn]=kr,W)),delete wn[bn])}var yi={};Object(n.e)(yi,Bn,Or,wn);var oo=!1,so=function(Hi){var Io,ko,Ro=yi[Hi];if(Object(n.w)(Ro)&&!ca.includes(Hi)){var bo=Fe.find(function(ho){return ho.get("name")===Hi});bo&&(Hi===Fn&&(Ft==="combo"&&(delete Ro.r,delete Ro.width,delete Ro.height),oo=!0),bo.attr(Ro))}else if(!oo){var jo=Ro||Fa[Ft][Hi];Ft==="combo"?Fn||Tt.attr(((Io={})[Hi]=jo,Io)):Tt.attr(((ko={})[Hi]=jo,ko))}};for(var co in yi)so(co)}}}},getStateStyle:function(f,u){var I=u.getModel(),W=u.getType(),st=this.getOptions(I),Tt=st.stateStyles,Ft=st.style,Yt=Ft===void 0?{}:Ft,ee=I.stateStyles?I.stateStyles[f]:Tt&&Tt[f];return W==="combo"?Object(n.c)(ee):Object(n.A)({},Yt,ee)},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){return this.getOptions(f).anchorPoints}},jn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:In.nodeLabel.offset,getSize:function(f){var u=f.size||this.getOptions({}).size||In.defaultNode.size;return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition;if(I==="center")return{x:0,y:0,text:f.label};var W=u.offset;Object(n.s)(W)&&(W=this.offset);var st,Tt=this.getSize(f),Ft=Tt[0],Yt=Tt[1];switch(I){case"top":st={x:0,y:0-Yt/2-W,textBaseline:"bottom"};break;case"bottom":st={x:0,y:Yt/2+W,textBaseline:"top"};break;case"left":st={x:0-Ft/2-W,y:0,textAlign:"right"};break;default:st={x:Ft/2+W,y:0,textAlign:"left"}}return st.text=f.label,st},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var st=f.getBBox(),Tt=I.style&&I.style.background;if(!Tt)return{};var Ft,Yt=Mr(Tt.padding),ee=st.width+Yt[1]+Yt[3],ae=st.height+Yt[0]+Yt[2],je=I.offset;return Object(n.s)(je)&&(je=this.offset),Ft={x:st.minX-Yt[3],y:st.minY-Yt[0]},Ft=Object(ot.a)(Object(ot.a)(Object(ot.a)({},Ft),Tt),{width:ee,height:ae})},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"node-shape"})},updateLinkPoints:function(f,u){var I,W=this.getOptions(f).linkPoints,st=u.find(function(ei){return ei.get("className")==="link-point-left"}),Tt=u.find(function(ei){return ei.get("className")==="link-point-right"}),Ft=u.find(function(ei){return ei.get("className")==="link-point-top"}),Yt=u.find(function(ei){return ei.get("className")==="link-point-bottom"});st&&(I=st.attr()),Tt&&!I&&(I=Tt.attr()),Ft&&!I&&(I=Ft.attr()),Yt&&!I&&(I=Yt.attr()),I||(I=W);var ee=Object(n.A)({},I,f.linkPoints),ae=ee.fill,je=ee.stroke,Fe=ee.lineWidth,Ue=ee.size/2;Ue||(Ue=ee.r);var He=f.linkPoints?f.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},bn=He.left,wn=He.right,Nn=He.top,Bn=He.bottom,Fn=this.getSize(f),sr=Fn[0],ur=Fn[1],Or={r:Ue,fill:ae,stroke:je,lineWidth:Fe};st?bn||bn===void 0?st.attr(Object(ot.a)(Object(ot.a)({},Or),{x:-sr/2,y:0})):st.remove():bn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:-sr/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Tt?(wn||wn===void 0||Tt.remove(),Tt.attr(Object(ot.a)(Object(ot.a)({},Or),{x:sr/2,y:0}))):wn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:sr/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ft?(Nn||Nn===void 0||Ft.remove(),Ft.attr(Object(ot.a)(Object(ot.a)({},Or),{x:0,y:-ur/2}))):Nn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:0,y:-ur/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Yt?Bn||Bn===void 0?Yt.attr(Object(ot.a)(Object(ot.a)({},Or),{x:0,y:ur/2})):Yt.remove():Bn&&u.addShape("circle",{attrs:Object(ot.a)(Object(ot.a)({},Or),{x:0,y:ur/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(f,u,I,W){u.get("keyShape").attr(Object(ot.a)({},I)),this.updateLabel(f,u),W&&this.updateIcon(f,u)},updateIcon:function(f,u){var I=this,W=u.getContainer(),st=this.getOptions(f).icon,Tt=(f.icon?f.icon:{show:void 0}).show,Ft=W.find(function(Fe){return Fe.get("className")===I.type+"-icon"});if(Ft)if(Tt||Tt===void 0){var Yt=Object(n.A)({},Ft.attr(),st),ee=Yt.width,ae=Yt.height;Ft.attr(Object(ot.a)(Object(ot.a)({},Yt),{x:-ee/2,y:-ae/2}))}else Ft.remove();else if(Tt){ee=st.width,ae=st.height,W.addShape("image",{attrs:Object(ot.a)(Object(ot.a)({},st),{x:-ee/2,y:-ae/2}),className:this.type+"-icon",name:this.type+"-icon"});var je=W.find(function(Fe){return Fe.get("className")==="node-label"});je&&je.toFront()}}},_s=Object(ot.a)(Object(ot.a)({},ys),jn);yr.registerNode("single-node",_s);var Wo={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:In.defaultEdge.size,style:{x:0,y:0,stroke:In.defaultEdge.style.stroke,lineAppendWidth:In.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:In.edgeLabel.style.fill,fontSize:In.edgeLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.edgeStateStyles)},getPath:function(f){var u=[];return Object(n.f)(f,function(I,W){W===0?u.push(["M",I.x,I.y]):u.push(["L",I.x,I.y])}),u},getShapeStyle:function(f){var u=this.options.style,I={stroke:f.color},W=Object(n.A)({},u,I,f.style),st=f.size||In.defaultEdge.size,Tt=(f=this.getPathPoints(f)).startPoint,Ft=f.endPoint,Yt=this.getControlPoints(f),ee=[Tt];Yt&&(ee=ee.concat(Yt)),ee.push(Ft);var ae=this.getPath(ee);return Object(n.A)({},In.defaultEdge.style,{stroke:In.defaultEdge.color,lineWidth:st,path:ae},W)},updateShapeStyle:function(f,u){var I=u.getContainer(),W={stroke:f.color},st=I.find(function(Bn){return Bn.get("className")==="edge-shape"})||u.getKeyShape(),Tt=f.size,Ft=(f=this.getPathPoints(f)).startPoint,Yt=f.endPoint,ee=this.getControlPoints(f),ae=[Ft];ee&&(ae=ae.concat(ee)),ae.push(Yt);var je=st.attr(),Fe=Object(n.A)({},W,je,f.style),Ue=f.sourceNode,He=f.targetNode,bn={radius:Fe.radius};ee||(bn={source:Ue,target:He,offset:Fe.offset,radius:Fe.radius}),je.endArrow&&Fe.endArrow===!1&&(f.style.endArrow={path:""}),je.startArrow&&Fe.startArrow===!1&&(f.style.startArrow={path:""});var wn=this.getPath(ae,bn),Nn=Object(n.A)(W,st.attr(),{lineWidth:Tt,path:wn},f.style);st&&st.attr(Nn)},getLabelStyleByPosition:function(f,u,I){var W,st=u.position||this.labelPosition,Tt={},Ft=I&&I.find(function(Fe){return Fe.get("className")==="edge-shape"});W=st==="start"?0:st==="end"?1:.5;var Yt=u.refX||this.refX,ee=u.refY||this.refY;if(f.startPoint.x===f.endPoint.x&&f.startPoint.y===f.endPoint.y)return Tt.x=f.startPoint.x+Yt,Tt.y=f.startPoint.y+ee,Tt.text=f.label,Tt;var ae=Object(n.s)(u.autoRotate)?this.labelAutoRotate:u.autoRotate,je=Yo(Ft,W,Yt,ee,ae);return Tt.x=je.x,Tt.y=je.y,Tt.rotate=je.rotate,Tt.textAlign=this._getTextAlign(st,je.angle),Tt.text=f.label,Tt},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var st=f.getBBox(),Tt=I.style&&I.style.background;if(!Tt)return{};var Ft,Yt=Tt.padding,ee=st.width+Yt[1]+Yt[3],ae=st.height+Yt[0]+Yt[2],je=I.position||this.labelPosition,Fe=Object(ot.a)(Object(ot.a)({},Tt),{width:ee,height:ae,x:st.minX-Yt[2],y:st.minY-Yt[0],rotate:0}),Ue=Object(n.s)(I.autoRotate)?this.labelAutoRotate:I.autoRotate,He=W&&W.find(function(Fn){return Fn.get("className")==="edge-shape"});Ft=je==="start"?0:je==="end"?1:.5;var bn=I.refX||this.refX,wn=I.refY||this.refY;if(u.startPoint.x===u.endPoint.x&&u.startPoint.y===u.endPoint.y)return Fe.x=u.startPoint.x+bn-ee/2,Fe.y=u.startPoint.y+wn-ae/2,Fe;var Nn=Yo(He,Ft,bn-ee/2,wn+ae/2,Ue),Bn=Nn.angle;return Bn>.5*Math.PI&&Bn<1.5*Math.PI&&(Nn=Yo(He,Ft,bn+ee/2,wn+ae/2,Ue)),Ue&&(Fe.x=Nn.x,Fe.y=Nn.y),Fe.rotate=Nn.rotate,Fe},_getTextAlign:function(f,u){var I="center";return u?(u%=2*Math.PI,f!=="center"&&(I=u>=0&&u<=Math.PI/2||u>=1.5*Math.PI&&u<2*Math.PI?f:function(W){var st=W;return W==="start"?st="end":W==="end"&&(st="start"),st}(f)),I):f},getControlPoints:function(f){return f.controlPoints},getPathPoints:function(f){return f},drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:I})},drawLabel:function(f,u){var I=this.options.labelCfg,W=Object(n.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},I,f.labelCfg),st=this.getLabelStyle(f,W,u),Tt=st.rotate;delete st.rotate;var Ft=u.addShape("text",{attrs:st,name:"text-shape"});if(Tt&&Ft.rotateAtStart(Tt),st.background){var Yt=this.drawLabelBg(f,u,Ft),ee=this.itemType+"-label-bg";Yt.set("classname",ee),Ft.toFront()}return Ft},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,st=Object(n.e)({},W,f.labelCfg),Tt=this.getLabelStyle(f,st,u).rotate,Ft=this.getLabelBgStyleByPosition(I,f,st,u);delete Ft.rotate;var Yt=u.addShape("rect",{name:"text-bg-shape",attrs:Ft});return Tt&&Yt.rotateAtStart(Tt),Yt}},rc=Object(ot.a)(Object(ot.a)({},ys),Wo);yr.registerEdge("single-edge",rc),yr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),yr.registerEdge("spline",{getPath:function(f){return Ns(f)}},"single-edge"),yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(f){var u,I,W=f.startPoint,st=f.endPoint,Tt=(W.x+st.x)/2,Ft=(W.y+st.y)/2;if(f.controlPoints!==void 0){if(I=f.controlPoints[0],u=xt(W,I,st),W.x<=st.x&&W.y>st.y?this.clockwise=u.x>I.x?0:1:W.x<=st.x&&W.y<st.y?this.clockwise=u.x>I.x?1:0:W.x>st.x&&W.y<=st.y?this.clockwise=u.y<I.y?0:1:this.clockwise=u.y<I.y?1:0,(I.x-W.x)/(I.y-W.y)==(st.x-W.x)/(st.y-W.y))return[]}else{f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),Object(n.m)(f.curveOffset)&&(f.curveOffset=f.curveOffset[0]),f.curveOffset<0?this.clockwise=0:this.clockwise=1;var Yt={x:st.x-W.x,y:st.y-W.y},ee=Math.atan2(Yt.y,Yt.x);I={x:f.curveOffset*Math.cos(-Math.PI/2+ee)+Tt,y:f.curveOffset*Math.sin(-Math.PI/2+ee)+Ft},u=xt(W,I,st)}var ae=$t(W,u);return[{x:ae,y:ae}]},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),f.length===2?u.push(["L",f[1].x,f[1].y]):u.push(["A",f[1].x,f[1].y,0,0,this.clockwise,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(f){var u=f.controlPoints;if(!u||!u.length){var I=f.startPoint,W=f.endPoint;f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.m)(this.curveOffset)&&(f.curveOffset=f.curveOffset[0]),Object(n.m)(this.curvePosition)&&(f.curvePosition=f.curveOffset[0]),u=[ts(I,W,f.curvePosition,f.curveOffset)]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["Q",f[1].x,f[1].y,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(f){var u=f.controlPoints;if(f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.t)(f.curveOffset)&&(f.curveOffset=[f.curveOffset,-f.curveOffset]),Object(n.t)(f.curvePosition)&&(f.curvePosition=[f.curvePosition,1-f.curvePosition]),!u||!u.length||u.length<2){var I=f.startPoint,W=f.endPoint;u=[ts(I,W,f.curvePosition[0],f.curveOffset[0]),ts(I,W,f.curvePosition[1],f.curveOffset[1])]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["C",f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y]),u}},"single-edge"),yr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:u.x,y:(I.y-u.y)*this.curvePosition[0]+u.y},{x:I.x,y:(I.y-u.y)*this.curvePosition[1]+u.y}]}},"cubic"),yr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(I.x-u.x)*this.curvePosition[0]+u.x,y:u.y},{x:(I.x-u.x)*this.curvePosition[1]+u.x,y:I.y}]}},"cubic"),yr.registerEdge("loop",{getPathPoints:function(f){return Xo(f)},getControlPoints:function(f){return f.controlPoints},afterDraw:function(f){f.controlPoints=void 0},afterUpdate:function(f){f.controlPoints=void 0}},"cubic");var ic={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:In.comboLabel.refX,refY:In.comboLabel.refY,options:{style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.comboStateStyles)},getSize:function(f){var u=Object(n.c)(f.size||this.options.size||In.defaultCombo.size);return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,st=f.padding||this.options.padding;Object(n.m)(st)&&(st=st[0]);var Tt=u.refX,Ft=u.refY;Object(n.s)(Tt)&&(Tt=this.refX),Object(n.s)(Ft)&&(Ft=this.refY);var Yt,ee=this.getSize(f),ae=(Math.max(W.r,ee[0]/2)||ee[0]/2)+st;switch(I){case"top":Yt={x:0,y:-ae-Ft,textBaseline:"bottom",textAlign:"center"};break;case"bottom":Yt={x:0,y:ae+Ft,textBaseline:"bottom",textAlign:"center"};break;case"left":Yt={x:-ae+Tt,y:0,textAlign:"left"};break;case"center":Yt={x:0,y:0,text:f.label,textAlign:"center"};break;default:Yt={x:ae+Tt,y:0,textAlign:"right"}}return Yt.text=f.label,Yt},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"combo-shape"})},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(ot.a)({},I)),this.updateLabel(f,u)}},ms=Object(ot.a)(Object(ot.a)({},ys),ic);yr.registerCombo("single-combo",ms),yr.registerCombo("circle",{options:{size:[In.defaultCombo.size[0],In.defaultCombo.size[0]],padding:In.defaultCombo.padding[0],animate:!0,style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(ot.a)({},In.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return delete I.height,delete I.width,u.addShape("circle",{attrs:I,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.m)(I)&&(I=I[0]);var W,st={stroke:f.color},Tt=Object(n.A)({},u,st,f.style),Ft=this.getSize(f);W=!Object(n.t)(Tt.r)||isNaN(Tt.r)?Ft[0]/2||In.defaultCombo.style.r:Math.max(Tt.r,Ft[0]/2)||Ft[0]/2,Tt.r=W+I;var Yt=Object(ot.a)({x:0,y:0},Tt);return f.style?f.style.r=W:f.style={r:W},Yt},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.m)(W)&&(W=W[0]);var st=Object(n.c)(f.style),Tt=Math.max(st.r,I[0]/2)||I[0]/2;st.r=Tt+W;var Ft=u.get("sizeCache");Ft&&(Ft.r=st.r);var Yt={stroke:f.color},ee=u.get("keyShape"),ae=Object(n.A)({},ee.attr(),Yt,st);f.style?f.style.r=Tt:f.style={r:Tt},this.updateShape(f,u,ae,!0)}},"single-combo"),yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(ot.a)({},In.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,st=f.padding||this.options.padding;Object(n.t)(st)&&(st=[st,st,st,st]);var Tt=u.refX,Ft=u.refY;Object(n.s)(Tt)&&(Tt=this.refX),Object(n.s)(Ft)&&(Ft=this.refY);var Yt,ee=W.width/2+st[3],ae=W.height/2+st[0];switch(I){case"top":Yt={x:0-ee+Tt,y:0-ae+Ft,textBaseline:"top",textAlign:"left"};break;case"bottom":Yt={x:0,y:ae+Ft,textBaseline:"bottom",textAlign:"center"};break;case"left":Yt={x:0-ee+Ft,y:0,textAlign:"left"};break;case"center":Yt={x:0,y:0,text:f.label,textAlign:"center"};break;default:Yt={x:ee+Tt,y:0,textAlign:"right"}}return Yt.text=f.label,Yt},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.t)(I)&&(I=[I,I,I,I]);var W,st,Tt={stroke:f.color},Ft=Object(n.A)({},u,Tt,f.style),Yt=this.getSize(f);W=!Object(n.t)(Ft.width)||isNaN(Ft.width)?Yt[0]||In.defaultCombo.style.width:Math.max(Ft.width,Yt[0])||Yt[0],st=!Object(n.t)(Ft.height)||isNaN(Ft.height)?Yt[1]||In.defaultCombo.style.height:Math.max(Ft.height,Yt[1])||Yt[1];var ee=-W/2-I[3],ae=-st/2-I[0];Ft.width=W+I[1]+I[3],Ft.height=st+I[0]+I[2];var je=Object(ot.a)({x:ee,y:ae},Ft);return f.style?(f.style.width=W,f.style.height=st):f.style={width:W,height:st},je},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.t)(W)&&(W=[W,W,W,W]);var st=Object(n.c)(f.style),Tt=Math.max(st.width,I[0])||I[0],Ft=Math.max(st.height,I[1])||I[1];st.width=Tt+W[1]+W[3],st.height=Ft+W[0]+W[2];var Yt=u.get("sizeCache");Yt&&(Yt.width=st.width,Yt.height=st.height),st.x=-Tt/2-W[3],st.y=-Ft/2-W[0];var ee={stroke:f.color},ae=u.get("keyShape"),je=Object(n.A)({},ae.attr(),ee,st);f.style?(f.style.width=Tt,f.style.height=Ft):f.style={width:Tt,height:Ft},this.updateShape(f,u,je,!1)},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(ot.a)({},I)),this.updateLabel(f,u)}},"single-combo"),yr.registerNode("simple-circle",{options:{size:In.defaultNode.size,style:{x:0,y:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},stateStyles:Object(ot.a)({},In.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("circle",{attrs:I,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.e)({},u,I),st=this.getSize(f)[0]/2;return Object(ot.a)({x:0,y:0,r:st},W)},update:function(f,u){var I=this.getSize(f),W={stroke:f.color,r:I[0]/2},st=u.get("keyShape"),Tt=Object(n.e)({},st.attr(),W,f.style);this.updateShape(f,u,Tt,!0)}},"single-node"),yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(ot.a)({},In.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.A)({},u,I),st=this.getSize(f),Tt=W.width||st[0],Ft=W.height||st[1];return Object(ot.a)({x:-Tt/2,y:-Ft/2,width:Tt,height:Ft},W)},update:function(f,u){u.getContainer();var I=this.getOptions({}).style,W=this.getSize(f),st=u.get("keyShape");f.size||(W[0]=st.attr("width")||I.width,W[1]=st.attr("height")||I.height);var Tt={stroke:f.color,x:-W[0]/2,y:-W[1]/2,width:W[0],height:W[1]},Ft=Object(n.A)({},I,st.attr(),Tt);Ft=Object(n.A)(Ft,f.style),this.updateShape(f,u,Ft,!1)}},"single-node"),yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);delete W.fill;var st=u.addShape(I,{attrs:W,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(f,st),st},drawClip:function(f,u){var I=this.getOptions(f).clipCfg;if(I.show){var W=I.type,st=I.x,Tt=I.y,Ft=I.style;if(W==="circle"){var Yt=I.r;u.setClip({type:"circle",attrs:Object(ot.a)({r:Yt,x:st,y:Tt},Ft)})}else if(W==="rect"){var ee=I.width,ae=I.height,je=st-ee/2,Fe=Tt-ae/2;u.setClip({type:"rect",attrs:Object(ot.a)({x:je,y:Fe,width:ee,height:ae},Ft)})}else if(W==="ellipse"){var Ue=I.rx,He=I.ry;u.setClip({type:"ellipse",attrs:Object(ot.a)({x:st,y:Tt,rx:Ue,ry:He},Ft)})}else if(W==="polygon"){var bn=I.points;u.setClip({type:"polygon",attrs:Object(ot.a)({points:bn},Ft)})}else if(W==="path"){var wn=I.path;u.setClip({type:"path",attrs:Object(ot.a)({path:wn},Ft)})}}},getShapeStyle:function(f){var u=this.getOptions(f).style,I=this.getSize(f),W=this.getOptions(f).img,st=I[0],Tt=I[1];return u&&(st=u.width||I[0],Tt=u.height||I[1]),Object(ot.a)({x:-st/2,y:-Tt/2,width:st,height:Tt,img:W},u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=this.itemType+"-shape",st=I.find(function(Ft){return Ft.get("className")===W})||u.getKeyShape(),Tt=this.getShapeStyle(f);st&&st.attr(Tt)}},"single-node");var oa,fo=yr,bs=Xt.a.transform,zs=Object(ot.a)(Object(ot.a)(Object(ot.a)(Object(ot.a)(Object(ot.a)({},S),l),M),m),{transform:bs,mat3:Xt.b});(function(){function kt(f){this.graph=f,this.layoutCfg=f.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}kt.prototype.initLayout=function(){},kt.prototype.getLayoutType=function(){return this.layoutCfg.type},kt.prototype.refreshLayout=function(){var f=this.graph;f&&(f.get("animate")?f.positionsAnimate():f.refreshPositions())},kt.prototype.changeLayout=function(f){var u=this.graph,I=this.layoutMethod;this.layoutType=f,this.layoutCfg=u.get("layout")||{},this.layoutCfg.type=f,I&&I.destroy(),this.layout()},kt.prototype.changeData=function(){var f=this.layoutMethod;f&&f.destroy(),this.layout()},kt.prototype.destroyLayout=function(){var f=this.layoutMethod,u=this.graph;f&&f.destroy(),u.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},kt.prototype.setDataFromGraph=function(){for(var f=[],u=[],I=[],W=this.graph.getNodes(),st=this.graph.getEdges(),Tt=this.graph.getCombos(),Ft=W.length,Yt=0;Yt<Ft;Yt++){var ee=W[Yt];if(ee.isVisible()){var ae=ee.getModel();f.push(ae)}}var je=st.length;for(Yt=0;Yt<je;Yt++){var Fe=st[Yt];Fe&&!Fe.destroyed&&Fe.isVisible()&&((ae=Fe.getModel()).isComboEdge||u.push(ae))}var Ue=Tt.length;for(Yt=0;Yt<Ue;Yt++){var He=Tt[Yt];!He.destroyed&&He.isVisible()&&(ae=He.getModel(),I.push(ae))}return{nodes:f,edges:u,combos:I}},kt.prototype.relayout=function(f){var u=this.graph,I=this.layoutMethod,W=this.layoutCfg;if(f){this.data=this.setDataFromGraph();var st=this.data.nodes;if(!st)return!1;this.initPositions(W.center,st),I.init(this.data)}this.layoutType==="force"&&(I.ticking=!1,I.forceSimulation.stop()),u.emit("beforelayout"),I.execute(f),I.isCustomLayout&&W.onLayoutEnd&&W.onLayoutEnd()},kt.prototype.layoutAnimate=function(){},kt.prototype.moveToZero=function(){var f=this.graph.get("data").nodes;if(f[0].x!==void 0&&f[0].x!==null&&!Zr(f[0].x)){for(var u=[0,0],I=f.length,W=0;W<I;W++){var st=f[W];u[0]+=st.x,u[1]+=st.y}for(u[0]/=f.length,u[1]/=f.length,W=0;W<I;W++)(st=f[W]).x-=u[0],st.y-=u[1]}},kt.prototype.initPositions=function(f,u){var I=this.graph;if(!u)return!1;var W=!0,st=.85*I.get("width"),Tt=.85*I.get("height"),Ft=u.length,Yt=Math.ceil(Math.sqrt(Ft)*(st/Tt)),ee=st/(Yt-1),ae=Tt/(Math.ceil(Ft/Yt)-1);isFinite(ee)&&ee||(ee=0),isFinite(ae)&&ee||(ae=0);for(var je=f[0]-st/2,Fe=f[1]-Tt/2,Ue=u.length,He=0;He<Ue;He++){var bn=u[He];Zr(bn.x)&&(W=!1,bn.x=He%Yt*ee+je),Zr(bn.y)&&(W=!1,bn.y=Math.floor(He/Yt)*ae+Fe)}return W},kt.prototype.destroy=function(){var f=this.layoutMethod;this.graph=null,f&&(f.destroy(),f.destroyed=!0),this.destroyed=!0}})(),function(kt){kt.CLICK="click",kt.DBLCLICK="dblclick",kt.MOUSEDOWN="mousedown",kt.MOUDEUP="mouseup",kt.CONTEXTMENU="contextmenu",kt.MOUSEENTER="mouseenter",kt.MOUSEOUT="mouseout",kt.MOUSEOVER="mouseover",kt.MOUSEMOVE="mousemove",kt.MOUSELEAVE="mouseleave",kt.DRAGSTART="dragstart",kt.DRAGEND="dragend",kt.DRAG="drag",kt.DRAGENTER="dragenter",kt.DRAGLEAVE="dragleave",kt.DRAGOVER="dragover",kt.DRAGOUT="dragout",kt.DDROP="drop",kt.KEYUP="keyup",kt.KEYDOWN="keydown",kt.WHEEL="wheel",kt.FOCUS="focus",kt.BLUR="blur",kt.TOUCHSTART="touchstart",kt.TOUCHMOVE="touchmove",kt.TOUCHEND="touchend",kt.NODE_CONTEXTMENU="node:contextmenu",kt.NODE_CLICK="node:click",kt.NODE_DBLCLICK="node:dblclick",kt.NODE_MOUSEDOWN="node:mousedown",kt.NODE_MOUSEUP="node:mouseup",kt.NODE_MOUSEENTER="node:mouseenter",kt.NODE_MOUSELEAVE="node:mouseleave",kt.NODE_MOUSEMOVE="node:mousemove",kt.NODE_MOUSEOUT="node:mouseout",kt.NODE_MOUSEOVER="node:mouseover",kt.NODE_DROP="node:drop",kt.NODE_DRAGOVER="node:dragover",kt.NODE_DRAGENTER="node:dragenter",kt.NODE_DRAGLEAVE="node:dragleave",kt.NODE_DRAGSTART="node:dragstart",kt.NODE_DRAG="node:drag",kt.NODE_DRAGEND="node:dragend",kt.COMBO_CONTEXTMENU="combo:contextmenu",kt.COMBO_CLICK="combo:click",kt.COMBO_DBLCLICK="combo:dblclick",kt.COMBO_MOUSEDOWN="combo:mousedown",kt.COMBO_MOUSEUP="combo:mouseup",kt.COMBO_MOUSEENTER="combo:mouseenter",kt.COMBO_MOUSELEAVE="combo:mouseleave",kt.COMBO_MOUSEMOVE="combo:mousemove",kt.COMBO_MOUSEOUT="combo:mouseout",kt.COMBO_MOUSEOVER="combo:mouseover",kt.COMBO_DROP="combo:drop",kt.COMBO_DRAGOVER="combo:dragover",kt.COMBO_DRAGENTER="combo:dragenter",kt.COMBO_DRAGLEAVE="combo:dragleave",kt.COMBO_DRAGSTART="combo:dragstart",kt.COMBO_DRAG="combo:drag",kt.COMBO_DRAGEND="combo:dragend",kt.EDGE_CONTEXTMENU="edge:contextmenu",kt.EDGE_CLICK="edge:click",kt.EDGE_DBLCLICK="edge:dblclick",kt.EDGE_MOUSEDOWN="edge:mousedown",kt.EDGE_MOUSEUP="edge:mouseup",kt.EDGE_MOUSEENTER="edge:mouseenter",kt.EDGE_MOUSELEAVE="edge:mouseleave",kt.EDGE_MOUSEMOVE="edge:mousemove",kt.EDGE_MOUSEOUT="edge:mouseout",kt.EDGE_MOUSEOVER="edge:mouseover",kt.EDGE_DROP="edge:drop",kt.EDGE_DRAGOVER="edge:dragover",kt.EDGE_DRAGENTER="edge:dragenter",kt.EDGE_DRAGLEAVE="edge:dragleave",kt.CANVAS_CONTEXTMENU="canvas:contextmenu",kt.CANVAS_CLICK="canvas:click",kt.CANVAS_DBLCLICK="canvas:dblclick",kt.CANVAS_MOUSEDOWN="canvas:mousedown",kt.CANVAS_MOUSEUP="canvas:mouseup",kt.CANVAS_MOUSEENTER="canvas:mouseenter",kt.CANVAS_MOUSELEAVE="canvas:mouseleave",kt.CANVAS_MOUSEMOVE="canvas:mousemove",kt.CANVAS_MOUSEOUT="canvas:mouseout",kt.CANVAS_MOUSEOVER="canvas:mouseover",kt.CANVAS_DROP="canvas:drop",kt.CANVAS_DRAGENTER="canvas:dragenter",kt.CANVAS_DRAGLEAVE="canvas:dragleave",kt.CANVAS_DRAGSTART="canvas:dragstart",kt.CANVAS_DRAG="canvas:drag",kt.CANVAS_DRAGEND="canvas:dragend",kt.BEFORERENDER="beforerender",kt.AFTERRENDER="afterrender",kt.BEFOREADDITEM="beforeadditem",kt.AFTERADDITEM="afteradditem",kt.BEFOREREMOVEITEM="beforeremoveitem",kt.AFTERREMOVEITEM="afterremoveitem",kt.BEFOREUPDATEITEM="beforeupdateitem",kt.AFTERUPDATEITEM="afterupdateitem",kt.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",kt.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",kt.BEFOREITEMSTATECHANGE="beforeitemstatechange",kt.AFTERITEMSTATECHANGE="afteritemstatechange",kt.BEFOREITEMREFRESH="beforeitemrefresh",kt.AFTERITEMREFRESH="afteritemrefresh",kt.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",kt.AFTERITEMSTATESCLEAR="afteritemstatesclear",kt.BEFOREMODECHANGE="beforemodechange",kt.AFTERMODECHANGE="aftermodechange",kt.BEFORELAYOUT="beforelayout",kt.AFTERLAYOUT="afterlayout",kt.BEFORECREATEEDGE="beforecreateedge",kt.AFTERCREATEEDGE="aftercreateedge",kt.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",kt.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",kt.BEFOREGRAPHREFRESH="beforegraphrefresh",kt.AFTERGRAPHREFRESH="aftergraphrefresh",kt.BEFOREANIMATE="beforeanimate",kt.AFTERANIMATE="afteranimate",kt.BEFOREPAINT="beforepaint",kt.AFTERPAINT="afterpaint",kt.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",kt.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",kt.GRAPHSTATECHANGE="graphstatechange",kt.AFTERACTIVATERELATIONS="afteractivaterelations",kt.NODESELECTCHANGE="nodeselectchange",kt.TOOLTIPCHANGE="tooltipchange",kt.WHEELZOOM="wheelzoom",kt.VIEWPORTCHANGE="viewportchange",kt.DRAGNODEEND="dragnodeend",kt.STACKCHANGE="stackchange"}(oa||(oa={})),fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior,fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior;var Ga=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),Ua=zs.applyMatrix,xu=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ga(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.graph;if(!this.destroyed){var st=this.get("container");Object(n.x)(st)&&(st=document.getElementById(st));var Tt=Object(y.b)("<div class="+I.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),Ft=0,Yt=0,ee=!1,ae=0,je=0,Fe=0,Ue=0,He=0,bn=0;st.addEventListener("mousedown",function(wn){if(I.refresh=!1,wn.target===Tt){var Nn=Tt.style;Fe=parseInt(Nn.width,10),Ue=parseInt(Nn.height,10);var Bn=u.get("width"),Fn=u.get("height");Fe>Bn||Ue>Fn||(bn=W.getZoom(),He=u.get("ratio"),ee=!0,Ft=wn.clientX,Yt=wn.clientY)}},!1),st.addEventListener("mousemove",function(wn){if(ee&&!Object(n.s)(wn.clientX)&&!Object(n.s)(wn.clientY)){var Nn=u.get("width"),Bn=u.get("height"),Fn=Tt.style;ae=parseInt(Fn.left,10),je=parseInt(Fn.top,10),Fe=parseInt(Fn.width,10),Ue=parseInt(Fn.height,10);var sr=Ft-wn.clientX,ur=Yt-wn.clientY;ae-sr<0?sr=ae:ae-sr+Fe>=Nn&&(sr=0),je-ur<0?ur=je:je-ur+Ue>=Bn&&(ur=0),ae-=sr,je-=ur,Object(y.c)(Tt,{left:ae+"px",top:je+"px"}),W.translate(sr*bn/He,ur*bn/He),Ft=wn.clientX,Yt=wn.clientY}},!1),st.addEventListener("mouseleave",function(){ee=!1,I.refresh=!0},!1),st.addEventListener("mouseup",function(){ee=!1,I.refresh=!0},!1),this.set("viewport",Tt),st.appendChild(Tt)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=this.get("width"),W=this.get("height"),st=this.get("graph"),Tt=st.get("width"),Ft=Tt/st.get("height"),Yt=st.getGroup(),ee=Yt.getCanvasBBox(),ae=[(ee.minX+ee.maxX)/2,(ee.minY+ee.maxY)/2],je=[ee.maxX-ee.minX,ee.maxY-ee.minY],Fe={centerX:ae[0],centerY:ae[1],width:0,height:0,minX:0,minY:0};ee[0]/ee[1]>Ft?(Fe.width=je[0],Fe.height=Fe.width/Ft):(Fe.height=je[1],Fe.width=Fe.height*Ft),Fe.minX=ae[0]-Fe.width/2,Fe.minY=ae[1]-Fe.height/2;var Ue=Yt.getMatrix();Ue||(Ue=[1,0,0,0,1,0,0,0,1]);var He=tt.a.invert([1,0,0,0,1,0,0,0,1],Ue),bn=Ua({x:Fe.minX,y:Fe.minY},He),wn=st.getCanvasByPoint(bn.x,bn.y),Nn=this.get("viewport");Nn||this.initViewport();var Bn=Tt/Fe.width,Fn=Bn*I,sr=Bn*W,ur=I*-wn.x/Fe.width,Or=W*-wn.y/Fe.height,ei=ur+Fn,Ti=Or+sr;ur<0&&(Fn+=ur,ur=0),ei>I&&(Fn-=ei-I),Or<0&&(sr+=Or,Or=0),Ti>W&&(sr-=Ti-W),this.set("ratio",u);var kr=ur+"px",yi=Or+"px";Object(y.c)(Nn,{left:kr,top:yi,width:Fn+"px",height:sr+"px"})}},f.prototype.init=function(){this.initContainer()},f.prototype.initContainer=function(){var u=this.get("graph"),I=u.get("width"),W=u.get("height")/I,st=this.get("className"),Tt=this.get("container"),Ft=this.get("width"),Yt=this.get("height");Ft||Yt||(Ft=200),Ft?(Yt=W*Ft,this.set("height",Yt)):(Ft=1/W*Yt,this.set("width",Ft));var ee=Object(y.b)("<div class='"+st+"' style='width: "+Ft+"px; height: "+Yt+"px; overflow: hidden; position: relative;'></div>");Object(n.x)(Tt)&&(Tt=document.getElementById(Tt)),Tt?Tt.appendChild(ee):u.get("container").appendChild(ee),this.set("container",ee);var ae=Object(y.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');ee.appendChild(ae);var je=Object(y.b)('<span style="display: table-cell; vertical-align: middle; "></span>');ae.appendChild(je),this.set("containerDOM",ae),this.set("containerSpan",je);var Fe=Object(y.b)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",Fe),this.updateImgSize(),je.appendChild(Fe),this.updateCanvas()},f.prototype.updateImgSize=function(){var u=this.get("imgDOM"),I=this.get("width"),W=this.get("height");u.onload=function(){var st=function(Tt,Ft){var Yt,ee;if(Tt.naturalWidth)Yt=Tt.naturalWidth,ee=Tt.naturalHeight;else{var ae=new Image;ae.src=Tt.src,ae.onload=function(){Ft&&Ft(ae.width,ae.height)}}return[Yt,ee]}(u);st[0]>st[1]?u.width=I:u.height=W}},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("width")/u.get("canvas").getCanvasBBox().width;this.set("ratio",I),this.updateViewport()}}},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.updateGraphImg=function(u){this.get("imgDOM").remove(),this.set("graphImg",u);var I=Object(y.b)('<img alt="" src="'+u+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",I),I.src=u,this.updateImgSize(),this.get("containerSpan").appendChild(I),this.updateCanvas()},f.prototype.destroy=function(){var u=this.get("container");u.parentNode.removeChild(u)},f}(s),Ou=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var Tt in st)Object.prototype.hasOwnProperty.call(st,Tt)&&(W[Tt]=st[Tt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),la=function(){return(la=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},rs=zs.distance,Ca={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Vs={PluginBase:s,Menu:T,Grid:O,Minimap:ht,Bundling:$,ToolBar:k,Tooltip:g,Fisheye:P,TimeBar:Te,ImageMinimap:xu,EdgeFilterLens:function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ou(f,kt),f.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(n.c)(Ca),showLabel:"edge",scaleRBy:"wheel"}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"filter"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"filter"}}return u},f.prototype.init=function(){var u=this.get("showLabel"),I=u==="node"||u==="both",W=u==="edge"||u==="both";this.set("showNodeLabel",I),this.set("showEdgeLabel",W),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},f.prototype.createDelegate=function(u){var I=this,W=I.get("delegate");W&&!W.destroyed||(I.filter(u),(W=I.get("delegate")).on("dragstart",function(st){}),W.on("drag",function(st){I.filter(st)}),this.get("scaleRBy")==="wheel"&&W.on("mousewheel",function(st){I.scaleRByWheel(st)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),st=this.get("delegate");(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY),I=u.originalEvent.wheelDelta<0?.95:1/.95;var Tt=this.get("maxR"),Ft=this.get("minR"),Yt=this.get("r");(Yt>(Tt||W.get("height"))&&I>1||Yt<(Ft||.05*W.get("height"))&&I<1)&&(I=1),Yt*=I,this.set("r",Yt),this.filter(u)}},f.prototype.filter=function(u){var I=this.get("graph"),W=I.getNodes(),st={},Tt=this.get("r"),Ft=this.get("type"),Yt={x:u.x,y:u.y};this.updateDelegate(Yt,Tt);var ee=this.get("shouldShow"),ae=this.get("vShapes");ae&&ae.forEach(function(wn){wn.remove(),wn.destroy()}),ae=[],W.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.x,Fn=Nn.y;rs({x:Bn,y:Fn},Yt)<Tt&&(st[Nn.id]=wn)});var je=I.getEdges(),Fe=[];je.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.source,Fn=Nn.target;ee(Nn)&&(Ft==="only-source"||Ft==="one"?st[Bn]&&!st[Fn]&&Fe.push(wn):Ft==="only-target"||Ft==="one"?st[Fn]&&!st[Bn]&&Fe.push(wn):Ft==="both"&&st[Bn]&&st[Fn]&&Fe.push(wn))});var Ue=this.get("showNodeLabel"),He=this.get("showEdgelabel"),bn=I.get("group");Fe.forEach(function(wn){wn.get("group").get("children").forEach(function(Nn){var Bn=Nn.get("type"),Fn=bn.addShape(Bn,{attrs:Nn.attr()});ae.push(Fn),Ue&&Bn==="text"&&Fn.set("visible",!0)})}),Object.keys(st).forEach(function(wn){var Nn=st[wn].get("group").clone();if(bn.add(Nn),ae.push(Nn),He)for(var Bn=Nn.get("children"),Fn=0;Fn<Bn.length;Fn++){var sr=Bn[Fn];sr.get("type")==="text"&&sr.set("visible",!0)}}),this.set("vShapes",ae)},f.prototype.updateParams=function(u){var I=u.r,W=u.trigger,st=u.minR,Tt=u.maxR,Ft=u.scaleRBy,Yt=u.showLabel,ee=u.shouldShow;if(isNaN(u.r)||this.set("r",I),isNaN(Tt)||this.set("maxR",Tt),isNaN(st)||this.set("minR",st),W!=="mousemove"&&W!=="click"||this.set("trigger",W),Ft==="wheel"||Ft==="unset"){this.set("scaleRBy",Ft),this.get("delegate").remove(),this.get("delegate").destroy();var ae=this.get("dPercentText");ae&&(ae.remove(),ae.destroy())}Yt!=="node"&&Yt!=="both"||this.set("showNodeLabel",!0),Yt!=="edge"&&Yt!=="both"||this.set("showEdgeLabel",!0),ee&&this.set("shouldShow",ee)},f.prototype.updateDelegate=function(u,I){var W=this,st=W.get("graph"),Tt=W.get("delegate");if(!Tt||Tt.destroyed){var Ft=st.get("group"),Yt=W.get("delegateStyle")||Ca;Tt=Ft.addShape("circle",{attrs:la({r:I,x:u.x,y:u.y},Yt),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&Tt.on("mousewheel",function(ee){W.scaleRByWheel(ee)})}else Tt.attr({x:u.x,y:u.y,r:I});W.set("delegate",Tt)},f.prototype.clear=function(){var u=this.get("vShapes");u&&u.forEach(function(W){W.remove(),W.destroy()}),u=[],this.set("vShapes",u);var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy())},f.prototype.destroy=function(){this.clear()},f}(s)};A.a=Vs},function(a,A,e){"use strict";e.d(A,"b",function(){return p}),e.d(A,"c",function(){return m}),e.d(A,"a",function(){return S});var i=e(22);function p(l,M){var j=l.cfg.el,y=l.attr(),n={dx:y.shadowOffsetX,dy:y.shadowOffsetY,blur:y.shadowBlur,color:y.shadowColor};if(n.dx||n.dy||n.blur||n.color){var s=M.find("filter",n);s||(s=M.addShadow(n)),j.setAttribute("filter","url(#"+s+")")}else j.removeAttribute("filter")}function m(l){var M=l.attr().matrix;if(M){for(var j=l.cfg.el,y=[],n=0;n<9;n+=3)y.push(M[n]+","+M[n+1]);(y=y.join(",")).indexOf("NaN")===-1?j.setAttribute("transform","matrix("+y+")"):console.warn("invalid matrix:",M)}}function S(l,M){var j=l.getClip(),y=l.get("el");if(j){if(j&&!y.hasAttribute("clip-path")){Object(i.a)(j),j.createPath(M);var n=M.addClip(j);y.setAttribute("clip-path","url(#"+n+")")}}else y.removeAttribute("clip-path")}},function(a,A,e){"use strict";var i=e(24),p=e(46).Graph;function m(l,M,j,y){var n;do n=i.uniqueId(y);while(l.hasNode(n));return j.dummy=M,l.setNode(n,j),n}function S(l){return i.max(i.map(l.nodes(),function(M){var j=l.node(M).rank;if(!i.isUndefined(j))return j}))}a.exports={addDummyNode:m,simplify:function(M){var j=new p().setGraph(M.graph());return i.forEach(M.nodes(),function(y){j.setNode(y,M.node(y))}),i.forEach(M.edges(),function(y){var n=j.edge(y.v,y.w)||{weight:0,minlen:1},s=M.edge(y);j.setEdge(y.v,y.w,{weight:n.weight+s.weight,minlen:Math.max(n.minlen,s.minlen)})}),j},asNonCompoundGraph:function(M){var j=new p({multigraph:M.isMultigraph()}).setGraph(M.graph());return i.forEach(M.nodes(),function(y){M.children(y).length||j.setNode(y,M.node(y))}),i.forEach(M.edges(),function(y){j.setEdge(y,M.edge(y))}),j},successorWeights:function(M){var j=i.map(M.nodes(),function(y){var n={};return i.forEach(M.outEdges(y),function(s){n[s.w]=(n[s.w]||0)+M.edge(s).weight}),n});return i.zipObject(M.nodes(),j)},predecessorWeights:function(M){var j=i.map(M.nodes(),function(y){var n={};return i.forEach(M.inEdges(y),function(s){n[s.v]=(n[s.v]||0)+M.edge(s).weight}),n});return i.zipObject(M.nodes(),j)},intersectRect:function(M,j){var y,n,s=M.x,d=M.y,E=j.x-s,O=j.y-d,C=M.width/2,v=M.height/2;if(!E&&!O)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(O)*C>Math.abs(E)*v?(O<0&&(v=-v),y=v*E/O,n=v):(E<0&&(C=-C),y=C,n=C*O/E),{x:s+y,y:d+n}},buildLayerMatrix:function(M){var j=i.map(i.range(S(M)+1),function(){return[]});return i.forEach(M.nodes(),function(y){var n=M.node(y),s=n.rank;i.isUndefined(s)||(j[s][n.order]=y)}),j},normalizeRanks:function(M){var j=i.min(i.map(M.nodes(),function(y){return M.node(y).rank}));i.forEach(M.nodes(),function(y){var n=M.node(y);i.has(n,"rank")&&(n.rank-=j)})},removeEmptyRanks:function(M){var j=i.min(i.map(M.nodes(),function(d){return M.node(d).rank})),y=[];i.forEach(M.nodes(),function(d){var E=M.node(d).rank-j;y[E]||(y[E]=[]),y[E].push(d)});var n=0,s=M.graph().nodeRankFactor;i.forEach(y,function(d,E){i.isUndefined(d)&&E%s!=0?--n:n&&i.forEach(d,function(O){M.node(O).rank+=n})})},addBorderNode:function(M,j,y,n){var s={width:0,height:0};return arguments.length>=4&&(s.rank=y,s.order=n),m(M,"border",s,j)},maxRank:S,partition:function(M,j){var y={lhs:[],rhs:[]};return i.forEach(M,function(n){j(n)?y.lhs.push(n):y.rhs.push(n)}),y},time:function(M,j){var y=i.now();try{return j()}finally{console.log(M+" time: "+(i.now()-y)+"ms")}},notime:function(M,j){return j()}}},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"proccessToFunc",function(){return j}),e.d(i,"buildTextureData",function(){return y}),e.d(i,"buildTextureDataWithOneEdgeAttr",function(){return n}),e.d(i,"buildTextureDataWithTwoEdgeAttr",function(){return s}),e.d(i,"attributesToTextureData",function(){return d}),e.d(i,"arrayToTextureData",function(){return E}),e.d(i,"radialLayout",function(){return O});var p=e(1),m=e(123),S=e(5),l=e(0),M=S.n.traverseTree,j=function(T,N){return T?Object(l.t)(T)?function(X){return T}:T:function(X){return N||1}},y=function(T,N){var X=[],tt=[],nt={},vt=0;for(vt=0;vt<T.length;vt++){var ft=T[vt];nt[ft.id]=vt,X.push(ft.x),X.push(ft.y),X.push(0),X.push(0),tt.push([])}for(vt=0;vt<N.length;vt++){var bt=N[vt];tt[nt[bt.source]].push(nt[bt.target]),tt[nt[bt.target]].push(nt[bt.source])}var St=0;for(vt=0;vt<T.length;vt++){var pt=X.length,ct=tt[vt],zt=ct.length;X[4*vt+2]=pt,X[4*vt+3]=ct.length,St=Math.max(St,ct.length);for(var Nt=0;Nt<zt;++Nt){var wt=ct[Nt];X.push(+wt)}}for(;X.length%4!=0;)X.push(0);return{array:new Float32Array(X),maxEdgePerVetex:St}},n=function(T,N,X){var tt=[],nt=[],vt={},ft=0;for(ft=0;ft<T.length;ft++){var bt=T[ft];vt[bt.id]=ft,tt.push(bt.x),tt.push(bt.y),tt.push(0),tt.push(0),nt.push([])}for(ft=0;ft<N.length;ft++){var St=N[ft];nt[vt[St.source]].push(vt[St.target]),nt[vt[St.source]].push(X(St)),nt[vt[St.target]].push(vt[St.source]),nt[vt[St.target]].push(X(St))}var pt=0;for(ft=0;ft<T.length;ft++){var ct=tt.length,zt=nt[ft],Nt=zt.length;tt[4*ft+2]=ct,tt[4*ft+3]=Nt/2,pt=Math.max(pt,Nt/2);for(var wt=0;wt<Nt;++wt){var H=zt[wt];tt.push(+H)}}for(;tt.length%4!=0;)tt.push(0);return{array:new Float32Array(tt),maxEdgePerVetex:pt}},s=function(T,N,X,tt){var nt=[],vt=[],ft={},bt=0;for(bt=0;bt<T.length;bt++){var St=T[bt];ft[St.id]=bt,nt.push(St.x),nt.push(St.y),nt.push(0),nt.push(0),vt.push([])}for(bt=0;bt<N.length;bt++){var pt=N[bt];vt[ft[pt.source]].push(ft[pt.target]),vt[ft[pt.source]].push(X(pt)),vt[ft[pt.source]].push(tt(pt)),vt[ft[pt.source]].push(0),vt[ft[pt.target]].push(ft[pt.source]),vt[ft[pt.target]].push(X(pt)),vt[ft[pt.target]].push(tt(pt)),vt[ft[pt.target]].push(0)}var ct=0;for(bt=0;bt<T.length;bt++){var zt=nt.length,Nt=vt[bt],wt=Nt.length;nt[4*bt+2]=zt+1048576*wt/4,nt[4*bt+3]=0,ct=Math.max(ct,wt/4);for(var H=0;H<wt;++H){var ht=Nt[H];nt.push(+ht)}}for(;nt.length%4!=0;)nt.push(0);return{array:new Float32Array(nt),maxEdgePerVetex:ct}},d=function(T,N){var X=[],tt=T.length,nt={};return N.forEach(function(vt){T.forEach(function(ft,bt){if(nt[vt[ft]]===void 0&&(nt[vt[ft]]=Object.keys(nt).length),X.push(nt[vt[ft]]),bt===tt-1)for(;X.length%4!=0;)X.push(0)})}),{array:new Float32Array(X),count:Object.keys(nt).length}},E=function(T){for(var N=[],X=T.length,tt=T[0].length,nt=function(bt){T.forEach(function(St,pt){if(N.push(St[bt]),pt===X-1)for(;N.length%4!=0;)N.push(0)})},vt=0;vt<tt;vt++)nt(vt);return new Float32Array(N)},O=function(T,N){var X={x:1/0,y:1/0},tt={x:-1/0,y:-1/0},nt="x",vt="y";N&&["V","TB","BT"].indexOf(N)>=0&&(vt="x",nt="y");var ft=0;M(T,function(pt){return ft++,pt.x>tt.x&&(tt.x=pt.x),pt.x<X.x&&(X.x=pt.x),pt.y>tt.y&&(tt.y=pt.y),pt.y<X.y&&(X.y=pt.y),!0});var bt=2*Math.PI/ft,St=tt[vt]-X[vt];return St===0||M(T,function(pt){var ct=(pt[vt]-X[vt])/St*(2*Math.PI-bt)+bt,zt=Math.abs(nt==="x"?pt.x-T.x:pt.y-T.y);return pt.x=zt*Math.cos(ct),pt.y=zt*Math.sin(ct),!0}),T},C=e(121),v=Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},S.n),m),i),C);A.a=v},function(a,A,e){"use strict";function i(S,l){var M=[],j=S[0],y=S[1],n=S[2],s=S[3],d=S[4],E=S[5],O=S[6],C=S[7],v=S[8],x=l[0],T=l[1],N=l[2],X=l[3],tt=l[4],nt=l[5],vt=l[6],ft=l[7],bt=l[8];return M[0]=x*j+T*s+N*O,M[1]=x*y+T*d+N*C,M[2]=x*n+T*E+N*v,M[3]=X*j+tt*s+nt*O,M[4]=X*y+tt*d+nt*C,M[5]=X*n+tt*E+nt*v,M[6]=vt*j+ft*s+bt*O,M[7]=vt*y+ft*d+bt*C,M[8]=vt*n+ft*E+bt*v,M}function p(S,l){var M=[],j=l[0],y=l[1];return M[0]=S[0]*j+S[3]*y+S[6],M[1]=S[1]*j+S[4]*y+S[7],M}function m(S){var l=[],M=S[0],j=S[1],y=S[2],n=S[3],s=S[4],d=S[5],E=S[6],O=S[7],C=S[8],v=C*s-d*O,x=-C*n+d*E,T=O*n-s*E,N=M*v+j*x+y*T;return N?(N=1/N,l[0]=v*N,l[1]=(-C*j+y*O)*N,l[2]=(d*j-y*s)*N,l[3]=x*N,l[4]=(C*M-y*E)*N,l[5]=(-d*M+y*n)*N,l[6]=T*N,l[7]=(-O*M+j*E)*N,l[8]=(s*M-j*n)*N,l):null}e.d(A,"b",function(){return i}),e.d(A,"c",function(){return p}),e.d(A,"a",function(){return m})},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return p}),e.d(A,"clone",function(){return m}),e.d(A,"length",function(){return S}),e.d(A,"fromValues",function(){return l}),e.d(A,"copy",function(){return M}),e.d(A,"set",function(){return j}),e.d(A,"add",function(){return y}),e.d(A,"subtract",function(){return n}),e.d(A,"multiply",function(){return s}),e.d(A,"divide",function(){return d}),e.d(A,"ceil",function(){return E}),e.d(A,"floor",function(){return O}),e.d(A,"min",function(){return C}),e.d(A,"max",function(){return v}),e.d(A,"round",function(){return x}),e.d(A,"scale",function(){return T}),e.d(A,"scaleAndAdd",function(){return N}),e.d(A,"distance",function(){return X}),e.d(A,"squaredDistance",function(){return tt}),e.d(A,"squaredLength",function(){return nt}),e.d(A,"negate",function(){return vt}),e.d(A,"inverse",function(){return ft}),e.d(A,"normalize",function(){return bt}),e.d(A,"dot",function(){return St}),e.d(A,"cross",function(){return pt}),e.d(A,"lerp",function(){return ct}),e.d(A,"hermite",function(){return zt}),e.d(A,"bezier",function(){return Nt}),e.d(A,"random",function(){return wt}),e.d(A,"transformMat4",function(){return H}),e.d(A,"transformMat3",function(){return ht}),e.d(A,"transformQuat",function(){return dt}),e.d(A,"rotateX",function(){return yt}),e.d(A,"rotateY",function(){return Mt}),e.d(A,"rotateZ",function(){return $}),e.d(A,"angle",function(){return lt}),e.d(A,"zero",function(){return rt}),e.d(A,"str",function(){return z}),e.d(A,"exactEquals",function(){return P}),e.d(A,"equals",function(){return Y}),e.d(A,"sub",function(){return h}),e.d(A,"mul",function(){return g}),e.d(A,"div",function(){return B}),e.d(A,"dist",function(){return V}),e.d(A,"sqrDist",function(){return q}),e.d(A,"len",function(){return it}),e.d(A,"sqrLen",function(){return ot}),e.d(A,"forEach",function(){return At});var i=e(11);function p(){var gt=new i.a(3);return i.a!=Float32Array&&(gt[0]=0,gt[1]=0,gt[2]=0),gt}function m(gt){var mt=new i.a(3);return mt[0]=gt[0],mt[1]=gt[1],mt[2]=gt[2],mt}function S(gt){var mt=gt[0],Ot=gt[1],It=gt[2];return Math.hypot(mt,Ot,It)}function l(gt,mt,Ot){var It=new i.a(3);return It[0]=gt,It[1]=mt,It[2]=Ot,It}function M(gt,mt){return gt[0]=mt[0],gt[1]=mt[1],gt[2]=mt[2],gt}function j(gt,mt,Ot,It){return gt[0]=mt,gt[1]=Ot,gt[2]=It,gt}function y(gt,mt,Ot){return gt[0]=mt[0]+Ot[0],gt[1]=mt[1]+Ot[1],gt[2]=mt[2]+Ot[2],gt}function n(gt,mt,Ot){return gt[0]=mt[0]-Ot[0],gt[1]=mt[1]-Ot[1],gt[2]=mt[2]-Ot[2],gt}function s(gt,mt,Ot){return gt[0]=mt[0]*Ot[0],gt[1]=mt[1]*Ot[1],gt[2]=mt[2]*Ot[2],gt}function d(gt,mt,Ot){return gt[0]=mt[0]/Ot[0],gt[1]=mt[1]/Ot[1],gt[2]=mt[2]/Ot[2],gt}function E(gt,mt){return gt[0]=Math.ceil(mt[0]),gt[1]=Math.ceil(mt[1]),gt[2]=Math.ceil(mt[2]),gt}function O(gt,mt){return gt[0]=Math.floor(mt[0]),gt[1]=Math.floor(mt[1]),gt[2]=Math.floor(mt[2]),gt}function C(gt,mt,Ot){return gt[0]=Math.min(mt[0],Ot[0]),gt[1]=Math.min(mt[1],Ot[1]),gt[2]=Math.min(mt[2],Ot[2]),gt}function v(gt,mt,Ot){return gt[0]=Math.max(mt[0],Ot[0]),gt[1]=Math.max(mt[1],Ot[1]),gt[2]=Math.max(mt[2],Ot[2]),gt}function x(gt,mt){return gt[0]=Math.round(mt[0]),gt[1]=Math.round(mt[1]),gt[2]=Math.round(mt[2]),gt}function T(gt,mt,Ot){return gt[0]=mt[0]*Ot,gt[1]=mt[1]*Ot,gt[2]=mt[2]*Ot,gt}function N(gt,mt,Ot,It){return gt[0]=mt[0]+Ot[0]*It,gt[1]=mt[1]+Ot[1]*It,gt[2]=mt[2]+Ot[2]*It,gt}function X(gt,mt){var Ot=mt[0]-gt[0],It=mt[1]-gt[1],Dt=mt[2]-gt[2];return Math.hypot(Ot,It,Dt)}function tt(gt,mt){var Ot=mt[0]-gt[0],It=mt[1]-gt[1],Dt=mt[2]-gt[2];return Ot*Ot+It*It+Dt*Dt}function nt(gt){var mt=gt[0],Ot=gt[1],It=gt[2];return mt*mt+Ot*Ot+It*It}function vt(gt,mt){return gt[0]=-mt[0],gt[1]=-mt[1],gt[2]=-mt[2],gt}function ft(gt,mt){return gt[0]=1/mt[0],gt[1]=1/mt[1],gt[2]=1/mt[2],gt}function bt(gt,mt){var Ot=mt[0],It=mt[1],Dt=mt[2],Ut=Ot*Ot+It*It+Dt*Dt;return Ut>0&&(Ut=1/Math.sqrt(Ut)),gt[0]=mt[0]*Ut,gt[1]=mt[1]*Ut,gt[2]=mt[2]*Ut,gt}function St(gt,mt){return gt[0]*mt[0]+gt[1]*mt[1]+gt[2]*mt[2]}function pt(gt,mt,Ot){var It=mt[0],Dt=mt[1],Ut=mt[2],Ct=Ot[0],Vt=Ot[1],Ht=Ot[2];return gt[0]=Dt*Ht-Ut*Vt,gt[1]=Ut*Ct-It*Ht,gt[2]=It*Vt-Dt*Ct,gt}function ct(gt,mt,Ot,It){var Dt=mt[0],Ut=mt[1],Ct=mt[2];return gt[0]=Dt+It*(Ot[0]-Dt),gt[1]=Ut+It*(Ot[1]-Ut),gt[2]=Ct+It*(Ot[2]-Ct),gt}function zt(gt,mt,Ot,It,Dt,Ut){var Ct=Ut*Ut,Vt=Ct*(2*Ut-3)+1,Ht=Ct*(Ut-2)+Ut,re=Ct*(Ut-1),pe=Ct*(3-2*Ut);return gt[0]=mt[0]*Vt+Ot[0]*Ht+It[0]*re+Dt[0]*pe,gt[1]=mt[1]*Vt+Ot[1]*Ht+It[1]*re+Dt[1]*pe,gt[2]=mt[2]*Vt+Ot[2]*Ht+It[2]*re+Dt[2]*pe,gt}function Nt(gt,mt,Ot,It,Dt,Ut){var Ct=1-Ut,Vt=Ct*Ct,Ht=Ut*Ut,re=Vt*Ct,pe=3*Ut*Vt,ye=3*Ht*Ct,we=Ht*Ut;return gt[0]=mt[0]*re+Ot[0]*pe+It[0]*ye+Dt[0]*we,gt[1]=mt[1]*re+Ot[1]*pe+It[1]*ye+Dt[1]*we,gt[2]=mt[2]*re+Ot[2]*pe+It[2]*ye+Dt[2]*we,gt}function wt(gt,mt){mt=mt||1;var Ot=2*i.c()*Math.PI,It=2*i.c()-1,Dt=Math.sqrt(1-It*It)*mt;return gt[0]=Math.cos(Ot)*Dt,gt[1]=Math.sin(Ot)*Dt,gt[2]=It*mt,gt}function H(gt,mt,Ot){var It=mt[0],Dt=mt[1],Ut=mt[2],Ct=Ot[3]*It+Ot[7]*Dt+Ot[11]*Ut+Ot[15];return Ct=Ct||1,gt[0]=(Ot[0]*It+Ot[4]*Dt+Ot[8]*Ut+Ot[12])/Ct,gt[1]=(Ot[1]*It+Ot[5]*Dt+Ot[9]*Ut+Ot[13])/Ct,gt[2]=(Ot[2]*It+Ot[6]*Dt+Ot[10]*Ut+Ot[14])/Ct,gt}function ht(gt,mt,Ot){var It=mt[0],Dt=mt[1],Ut=mt[2];return gt[0]=It*Ot[0]+Dt*Ot[3]+Ut*Ot[6],gt[1]=It*Ot[1]+Dt*Ot[4]+Ut*Ot[7],gt[2]=It*Ot[2]+Dt*Ot[5]+Ut*Ot[8],gt}function dt(gt,mt,Ot){var It=Ot[0],Dt=Ot[1],Ut=Ot[2],Ct=Ot[3],Vt=mt[0],Ht=mt[1],re=mt[2],pe=Dt*re-Ut*Ht,ye=Ut*Vt-It*re,we=It*Ht-Dt*Vt,Ne=Dt*we-Ut*ye,Ke=Ut*pe-It*we,pn=It*ye-Dt*pe,hn=2*Ct;return pe*=hn,ye*=hn,we*=hn,Ne*=2,Ke*=2,pn*=2,gt[0]=Vt+pe+Ne,gt[1]=Ht+ye+Ke,gt[2]=re+we+pn,gt}function yt(gt,mt,Ot,It){var Dt=[],Ut=[];return Dt[0]=mt[0]-Ot[0],Dt[1]=mt[1]-Ot[1],Dt[2]=mt[2]-Ot[2],Ut[0]=Dt[0],Ut[1]=Dt[1]*Math.cos(It)-Dt[2]*Math.sin(It),Ut[2]=Dt[1]*Math.sin(It)+Dt[2]*Math.cos(It),gt[0]=Ut[0]+Ot[0],gt[1]=Ut[1]+Ot[1],gt[2]=Ut[2]+Ot[2],gt}function Mt(gt,mt,Ot,It){var Dt=[],Ut=[];return Dt[0]=mt[0]-Ot[0],Dt[1]=mt[1]-Ot[1],Dt[2]=mt[2]-Ot[2],Ut[0]=Dt[2]*Math.sin(It)+Dt[0]*Math.cos(It),Ut[1]=Dt[1],Ut[2]=Dt[2]*Math.cos(It)-Dt[0]*Math.sin(It),gt[0]=Ut[0]+Ot[0],gt[1]=Ut[1]+Ot[1],gt[2]=Ut[2]+Ot[2],gt}function $(gt,mt,Ot,It){var Dt=[],Ut=[];return Dt[0]=mt[0]-Ot[0],Dt[1]=mt[1]-Ot[1],Dt[2]=mt[2]-Ot[2],Ut[0]=Dt[0]*Math.cos(It)-Dt[1]*Math.sin(It),Ut[1]=Dt[0]*Math.sin(It)+Dt[1]*Math.cos(It),Ut[2]=Dt[2],gt[0]=Ut[0]+Ot[0],gt[1]=Ut[1]+Ot[1],gt[2]=Ut[2]+Ot[2],gt}function lt(gt,mt){var Ot=gt[0],It=gt[1],Dt=gt[2],Ut=mt[0],Ct=mt[1],Vt=mt[2],Ht=Math.sqrt(Ot*Ot+It*It+Dt*Dt)*Math.sqrt(Ut*Ut+Ct*Ct+Vt*Vt),re=Ht&&St(gt,mt)/Ht;return Math.acos(Math.min(Math.max(re,-1),1))}function rt(gt){return gt[0]=0,gt[1]=0,gt[2]=0,gt}function z(gt){return"vec3("+gt[0]+", "+gt[1]+", "+gt[2]+")"}function P(gt,mt){return gt[0]===mt[0]&&gt[1]===mt[1]&&gt[2]===mt[2]}function Y(gt,mt){var Ot=gt[0],It=gt[1],Dt=gt[2],Ut=mt[0],Ct=mt[1],Vt=mt[2];return Math.abs(Ot-Ut)<=i.b*Math.max(1,Math.abs(Ot),Math.abs(Ut))&&Math.abs(It-Ct)<=i.b*Math.max(1,Math.abs(It),Math.abs(Ct))&&Math.abs(Dt-Vt)<=i.b*Math.max(1,Math.abs(Dt),Math.abs(Vt))}var k,h=n,g=s,B=d,V=X,q=tt,it=S,ot=nt,At=(k=p(),function(gt,mt,Ot,It,Dt,Ut){var Ct,Vt;for(mt||(mt=3),Ot||(Ot=0),Vt=It?Math.min(It*mt+Ot,gt.length):gt.length,Ct=Ot;Ct<Vt;Ct+=mt)k[0]=gt[Ct],k[1]=gt[Ct+1],k[2]=gt[Ct+2],Dt(k,k,Ut),gt[Ct]=k[0],gt[Ct+1]=k[1],gt[Ct+2]=k[2];return gt})},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.STACK_OVERFLOW=A.CIRCULAR_DEPENDENCY_IN_FACTORY=A.POST_CONSTRUCT_ERROR=A.MULTIPLE_POST_CONSTRUCT_METHODS=A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=A.ARGUMENTS_LENGTH_MISMATCH=A.INVALID_DECORATOR_OPERATION=A.INVALID_TO_SELF_VALUE=A.INVALID_FUNCTION_BINDING=A.INVALID_MIDDLEWARE_RETURN=A.NO_MORE_SNAPSHOTS_AVAILABLE=A.INVALID_BINDING_TYPE=A.NOT_IMPLEMENTED=A.CIRCULAR_DEPENDENCY=A.UNDEFINED_INJECT_ANNOTATION=A.MISSING_INJECT_ANNOTATION=A.MISSING_INJECTABLE_ANNOTATION=A.NOT_REGISTERED=A.CANNOT_UNBIND=A.AMBIGUOUS_MATCH=A.KEY_NOT_FOUND=A.NULL_ARGUMENT=A.DUPLICATED_METADATA=A.DUPLICATED_INJECTABLE_DECORATOR=void 0,A.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",A.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",A.NULL_ARGUMENT="NULL argument",A.KEY_NOT_FOUND="Key Not Found",A.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",A.CANNOT_UNBIND="Could not unbind serviceIdentifier:",A.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",A.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",A.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",A.UNDEFINED_INJECT_ANNOTATION=function(i){return"@inject called with undefined this could mean that the class "+i+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},A.CIRCULAR_DEPENDENCY="Circular dependency found:",A.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",A.INVALID_BINDING_TYPE="Invalid binding type:",A.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",A.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",A.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",A.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",A.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",A.ARGUMENTS_LENGTH_MISMATCH=function(){for(var i=[],p=0;p<arguments.length;p++)i[p]=arguments[p];return"The number of constructor arguments in the derived class "+i[0]+" must be >= than the number of constructor arguments of its base class."},A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",A.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",A.POST_CONSTRUCT_ERROR=function(){for(var i=[],p=0;p<arguments.length;p++)i[p]=arguments[p];return"@postConstruct error in class "+i[0]+": "+i[1]},A.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var i=[],p=0;p<arguments.length;p++)i[p]=arguments[p];return"It looks like there is a circular dependency in one of the '"+i[0]+"' bindings. Please investigate bindings withservice identifier '"+i[1]+"'."},A.STACK_OVERFLOW="Maximum call stack size exceeded"},function(a,A,e){var i;try{i={clone:e(272),constant:e(134),each:e(181),filter:e(184),has:e(195),isArray:e(26),isEmpty:e(348),isFunction:e(83),isUndefined:e(196),keys:e(58),map:e(197),reduce:e(199),size:e(351),transform:e(357),union:e(358),values:e(205)}}catch(p){}i||(i=window._),a.exports=i},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(i)}a.exports=function(i){var p=e(i);return i!=null&&(p=="object"||p=="function")}},function(a,A,e){var i=e(305),p=e(103),m=e(129),S=m&&m.isTypedArray,l=S?p(S):i;a.exports=l},function(a,A,e){"use strict";var i=e(123),p=Object(i.getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)");A.a={version:"0.0.12",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:p.mainStroke,fill:p.mainFill},size:20,color:p.mainStroke,linkPoints:{size:8,lineWidth:1,fill:p.activeFill,stroke:p.activeStroke}},nodeStateStyles:{active:{fill:p.activeFill,stroke:p.activeStroke,lineWidth:2,shadowColor:p.mainStroke,shadowBlur:10},selected:{fill:p.selectedFill,stroke:p.selectedStroke,lineWidth:4,shadowColor:p.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:p.highlightFill,stroke:p.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:p.inactiveFill,stroke:p.inactiveStroke,lineWidth:1},disable:{fill:p.disableFill,stroke:p.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:p.edgeMainStroke,lineAppendWidth:2},color:p.edgeMainStroke},edgeStateStyles:{active:{stroke:p.edgeActiveStroke,lineWidth:1},selected:{stroke:p.edgeSelectedStroke,lineWidth:2,shadowColor:p.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:p.edgeInactiveStroke,lineWidth:1},disable:{stroke:p.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:p.comboMainFill,lineWidth:1,stroke:p.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:p.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:p.comboActiveStroke,lineWidth:1,fill:p.comboActiveFill},selected:{stroke:p.comboSelectedStroke,lineWidth:2,fill:p.comboSelectedFill,shadowColor:p.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.comboHighlightStroke,lineWidth:2,fill:p.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:p.comboInactiveStroke,fill:p.comboInactiveFill,lineWidth:1},disable:{stroke:p.comboDisableStroke,fill:p.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"}},function(a,A,e){var i;try{i=e(270)}catch(p){}i||(i=window.graphlib),a.exports=i},function(a,A,e){function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}var p=e(163),m=(typeof self=="undefined"?"undefined":i(self))=="object"&&self&&self.Object===Object&&self,S=p||m||Function("return this")();a.exports=S},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(i)}a.exports=function(i){return i!=null&&e(i)=="object"}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Metadata=void 0;var i=e(32),p=function(){function m(S,l){this.key=S,this.value=l}return m.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},m}();A.Metadata=p},function(a,A){},function(a,A,e){"use strict";e.r(A),e.d(A,"catmullRomToBezier",function(){return M}),e.d(A,"fillPath",function(){return zt}),e.d(A,"fillPathByDiff",function(){return H}),e.d(A,"formatPath",function(){return yt}),e.d(A,"intersection",function(){return St}),e.d(A,"parsePathArray",function(){return C}),e.d(A,"parsePathString",function(){return l}),e.d(A,"pathToAbsolute",function(){return y}),e.d(A,"pathToCurve",function(){return E}),e.d(A,"rectPath",function(){return tt});var i=e(0),p=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,m=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),S=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),l=function($){if(!$)return null;if(Object(i.m)($))return $;var lt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},rt=[];return String($).replace(m,function(z,P,Y){var k=[],h=P.toLowerCase();if(Y.replace(S,function(g,B){B&&k.push(+B)}),h==="m"&&k.length>2&&(rt.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&rt.push([P,k[0]]),h==="r")rt.push([P].concat(k));else for(;k.length>=lt[h]&&(rt.push([P].concat(k.splice(0,lt[h]))),lt[h]););return $}),rt},M=function($,lt){for(var rt=[],z=0,P=$.length;P-2*!lt>z;z+=2){var Y=[{x:+$[z-2],y:+$[z-1]},{x:+$[z],y:+$[z+1]},{x:+$[z+2],y:+$[z+3]},{x:+$[z+4],y:+$[z+5]}];lt?z?P-4===z?Y[3]={x:+$[0],y:+$[1]}:P-2===z&&(Y[2]={x:+$[0],y:+$[1]},Y[3]={x:+$[2],y:+$[3]}):Y[0]={x:+$[P-2],y:+$[P-1]}:P-4===z?Y[3]=Y[2]:z||(Y[0]={x:+$[z],y:+$[z+1]}),rt.push(["C",(-Y[0].x+6*Y[1].x+Y[2].x)/6,(-Y[0].y+6*Y[1].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return rt},j=function($,lt,rt,z,P){var Y=[];if(P===null&&z===null&&(z=rt),$=+$,lt=+lt,rt=+rt,z=+z,P!==null){var k=Math.PI/180,h=$+rt*Math.cos(-z*k),g=$+rt*Math.cos(-P*k);Y=[["M",h,lt+rt*Math.sin(-z*k)],["A",rt,rt,0,+(P-z>180),0,g,lt+rt*Math.sin(-P*k)]]}else Y=[["M",$,lt],["m",0,-z],["a",rt,z,0,1,1,0,2*z],["a",rt,z,0,1,1,0,-2*z],["z"]];return Y},y=function($){if(!($=l($))||!$.length)return[["M",0,0]];var lt,rt,z=[],P=0,Y=0,k=0,h=0,g=0;$[0][0]==="M"&&(k=P=+$[0][1],h=Y=+$[0][2],g++,z[0]=["M",P,Y]);for(var B=$.length===3&&$[0][0]==="M"&&$[1][0].toUpperCase()==="R"&&$[2][0].toUpperCase()==="Z",V=void 0,q=void 0,it=g,ot=$.length;it<ot;it++){if(z.push(V=[]),(lt=(q=$[it])[0])!==lt.toUpperCase())switch(V[0]=lt.toUpperCase(),V[0]){case"A":V[1]=q[1],V[2]=q[2],V[3]=q[3],V[4]=q[4],V[5]=q[5],V[6]=+q[6]+P,V[7]=+q[7]+Y;break;case"V":V[1]=+q[1]+Y;break;case"H":V[1]=+q[1]+P;break;case"R":for(var At=2,gt=(rt=[P,Y].concat(q.slice(1))).length;At<gt;At++)rt[At]=+rt[At]+P,rt[++At]=+rt[At]+Y;z.pop(),z=z.concat(M(rt,B));break;case"O":z.pop(),(rt=j(P,Y,q[1],q[2])).push(rt[0]),z=z.concat(rt);break;case"U":z.pop(),z=z.concat(j(P,Y,q[1],q[2],q[3])),V=["U"].concat(z[z.length-1].slice(-2));break;case"M":k=+q[1]+P,h=+q[2]+Y;break;default:for(At=1,gt=q.length;At<gt;At++)V[At]=+q[At]+(At%2?P:Y)}else if(lt==="R")rt=[P,Y].concat(q.slice(1)),z.pop(),z=z.concat(M(rt,B)),V=["R"].concat(q.slice(-2));else if(lt==="O")z.pop(),(rt=j(P,Y,q[1],q[2])).push(rt[0]),z=z.concat(rt);else if(lt==="U")z.pop(),z=z.concat(j(P,Y,q[1],q[2],q[3])),V=["U"].concat(z[z.length-1].slice(-2));else for(var mt=0,Ot=q.length;mt<Ot;mt++)V[mt]=q[mt];if((lt=lt.toUpperCase())!=="O")switch(V[0]){case"Z":P=+k,Y=+h;break;case"H":P=V[1];break;case"V":Y=V[1];break;case"M":k=V[V.length-2],h=V[V.length-1];break;default:P=V[V.length-2],Y=V[V.length-1]}}return z},n=function($,lt,rt,z){return[$,lt,rt,z,rt,z]},s=function($,lt,rt,z,P,Y){return[1/3*$+2/3*rt,1/3*lt+2/3*z,1/3*P+2/3*rt,1/3*Y+2/3*z,P,Y]},d=function Mt($,lt,rt,z,P,Y,k,h,g,B){rt===z&&(rt+=1);var V,q,it,ot,At,gt=120*Math.PI/180,mt=Math.PI/180*(+P||0),Ot=[],It=function(Vr,ti,hi){return{x:Vr*Math.cos(hi)-ti*Math.sin(hi),y:Vr*Math.sin(hi)+ti*Math.cos(hi)}};if(B)q=B[0],it=B[1],ot=B[2],At=B[3];else{$=(V=It($,lt,-mt)).x,lt=V.y,h=(V=It(h,g,-mt)).x,g=V.y,$===h&&lt===g&&(h+=1,g+=1);var Dt=($-h)/2,Ut=(lt-g)/2,Ct=Dt*Dt/(rt*rt)+Ut*Ut/(z*z);Ct>1&&(rt*=Ct=Math.sqrt(Ct),z*=Ct);var Vt=rt*rt,Ht=z*z,re=(Y===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));ot=re*rt*Ut/z+($+h)/2,At=re*-z*Dt/rt+(lt+g)/2,q=Math.asin(((lt-At)/z).toFixed(9)),it=Math.asin(((g-At)/z).toFixed(9)),q=$<ot?Math.PI-q:q,it=h<ot?Math.PI-it:it,q<0&&(q=2*Math.PI+q),it<0&&(it=2*Math.PI+it),k&&q>it&&(q-=2*Math.PI),!k&&it>q&&(it-=2*Math.PI)}var pe=it-q;if(Math.abs(pe)>gt){var ye=it,we=h,Ne=g;it=q+gt*(k&&it>q?1:-1),Ot=Mt(h=ot+rt*Math.cos(it),g=At+z*Math.sin(it),rt,z,P,0,k,we,Ne,[it,ye,ot,At])}pe=it-q;var Ke=Math.cos(q),pn=Math.sin(q),hn=Math.cos(it),kn=Math.sin(it),Tn=Math.tan(pe/4),Rn=4/3*rt*Tn,Mn=4/3*z*Tn,Cn=[$,lt],_n=[$+Rn*pn,lt-Mn*Ke],Kn=[h+Rn*kn,g-Mn*hn],tr=[h,g];if(_n[0]=2*Cn[0]-_n[0],_n[1]=2*Cn[1]-_n[1],B)return[_n,Kn,tr].concat(Ot);for(var or=[],nr=0,er=(Ot=[_n,Kn,tr].concat(Ot).join().split(",")).length;nr<er;nr++)or[nr]=nr%2?It(Ot[nr-1],Ot[nr],mt).y:It(Ot[nr],Ot[nr+1],mt).x;return or},E=function($,lt){var rt,z=y($),P=lt&&y(lt),Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=[],g=[],B="",V="",q=function(Ut,Ct,Vt){var Ht,re;if(!Ut)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(!(Ut[0]in{T:1,Q:1})&&(Ct.qx=Ct.qy=null),Ut[0]){case"M":Ct.X=Ut[1],Ct.Y=Ut[2];break;case"A":Ut=["C"].concat(d.apply(0,[Ct.x,Ct.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=2*Ct.x-Ct.bx,re=2*Ct.y-Ct.by):(Ht=Ct.x,re=Ct.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(Ct.qx=2*Ct.x-Ct.qx,Ct.qy=2*Ct.y-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),Ut=["C"].concat(s(Ct.x,Ct.y,Ct.qx,Ct.qy,Ut[1],Ut[2]));break;case"Q":Ct.qx=Ut[1],Ct.qy=Ut[2],Ut=["C"].concat(s(Ct.x,Ct.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(n(Ct.x,Ct.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(n(Ct.x,Ct.y,Ut[1],Ct.y));break;case"V":Ut=["C"].concat(n(Ct.x,Ct.y,Ct.x,Ut[1]));break;case"Z":Ut=["C"].concat(n(Ct.x,Ct.y,Ct.X,Ct.Y))}return Ut},it=function(Ut,Ct){if(Ut[Ct].length>7){Ut[Ct].shift();for(var Vt=Ut[Ct];Vt.length;)h[Ct]="A",P&&(g[Ct]="A"),Ut.splice(Ct++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(Ct,1),rt=Math.max(z.length,P&&P.length||0)}},ot=function(Ut,Ct,Vt,Ht,re){Ut&&Ct&&Ut[re][0]==="M"&&Ct[re][0]!=="M"&&(Ct.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],rt=Math.max(z.length,P&&P.length||0))};rt=Math.max(z.length,P&&P.length||0);for(var At=0;At<rt;At++){z[At]&&(B=z[At][0]),B!=="C"&&(h[At]=B,At&&(V=h[At-1])),z[At]=q(z[At],Y,V),h[At]!=="A"&&B==="C"&&(h[At]="C"),it(z,At),P&&(P[At]&&(B=P[At][0]),B!=="C"&&(g[At]=B,At&&(V=g[At-1])),P[At]=q(P[At],k,V),g[At]!=="A"&&B==="C"&&(g[At]="C"),it(P,At)),ot(z,P,Y,k,At),ot(P,z,k,Y,At);var gt=z[At],mt=P&&P[At],Ot=gt.length,It=P&&mt.length;Y.x=gt[Ot-2],Y.y=gt[Ot-1],Y.bx=parseFloat(gt[Ot-4])||Y.x,Y.by=parseFloat(gt[Ot-3])||Y.y,k.bx=P&&(parseFloat(mt[It-4])||k.x),k.by=P&&(parseFloat(mt[It-3])||k.y),k.x=P&&mt[It-2],k.y=P&&mt[It-1]}return P?[z,P]:z},O=/,?([a-z]),?/gi,C=function($){return $.join(",").replace(O,"$1")},v=function($,lt,rt,z,P){return $*($*(-3*lt+9*rt-9*z+3*P)+6*lt-12*rt+6*z)-3*lt+3*rt},x=function($,lt,rt,z,P,Y,k,h,g){g===null&&(g=1);for(var B=(g=g>1?1:g<0?0:g)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],q=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],it=0,ot=0;ot<12;ot++){var At=B*V[ot]+B,gt=v(At,$,rt,P,k),mt=v(At,lt,z,Y,h),Ot=gt*gt+mt*mt;it+=q[ot]*Math.sqrt(Ot)}return B*it},T=function($,lt,rt,z,P,Y,k,h){for(var g,B,V,q,it=[],ot=[[],[]],At=0;At<2;++At)if(At===0?(B=6*$-12*rt+6*P,g=-3*$+9*rt-9*P+3*k,V=3*rt-3*$):(B=6*lt-12*z+6*Y,g=-3*lt+9*z-9*Y+3*h,V=3*z-3*lt),Math.abs(g)<1e-12){if(Math.abs(B)<1e-12)continue;(q=-V/B)>0&&q<1&&it.push(q)}else{var gt=B*B-4*V*g,mt=Math.sqrt(gt);if(!(gt<0)){var Ot=(-B+mt)/(2*g);Ot>0&&Ot<1&&it.push(Ot);var It=(-B-mt)/(2*g);It>0&&It<1&&it.push(It)}}for(var Dt,Ut=it.length,Ct=Ut;Ut--;)Dt=1-(q=it[Ut]),ot[0][Ut]=Dt*Dt*Dt*$+3*Dt*Dt*q*rt+3*Dt*q*q*P+q*q*q*k,ot[1][Ut]=Dt*Dt*Dt*lt+3*Dt*Dt*q*z+3*Dt*q*q*Y+q*q*q*h;return ot[0][Ct]=$,ot[1][Ct]=lt,ot[0][Ct+1]=k,ot[1][Ct+1]=h,ot[0].length=ot[1].length=Ct+2,{min:{x:Math.min.apply(0,ot[0]),y:Math.min.apply(0,ot[1])},max:{x:Math.max.apply(0,ot[0]),y:Math.max.apply(0,ot[1])}}},N=function($,lt,rt,z,P,Y,k,h){if(!(Math.max($,rt)<Math.min(P,k)||Math.min($,rt)>Math.max(P,k)||Math.max(lt,z)<Math.min(Y,h)||Math.min(lt,z)>Math.max(Y,h))){var g=($-rt)*(Y-h)-(lt-z)*(P-k);if(g){var B=(($*z-lt*rt)*(P-k)-($-rt)*(P*h-Y*k))/g,V=(($*z-lt*rt)*(Y-h)-(lt-z)*(P*h-Y*k))/g,q=+B.toFixed(2),it=+V.toFixed(2);if(!(q<+Math.min($,rt).toFixed(2)||q>+Math.max($,rt).toFixed(2)||q<+Math.min(P,k).toFixed(2)||q>+Math.max(P,k).toFixed(2)||it<+Math.min(lt,z).toFixed(2)||it>+Math.max(lt,z).toFixed(2)||it<+Math.min(Y,h).toFixed(2)||it>+Math.max(Y,h).toFixed(2)))return{x:B,y:V}}}},X=function($,lt,rt){return lt>=$.x&&lt<=$.x+$.width&&rt>=$.y&&rt<=$.y+$.height},tt=function($,lt,rt,z,P){if(P)return[["M",+$+ +P,lt],["l",rt-2*P,0],["a",P,P,0,0,1,P,P],["l",0,z-2*P],["a",P,P,0,0,1,-P,P],["l",2*P-rt,0],["a",P,P,0,0,1,-P,-P],["l",0,2*P-z],["a",P,P,0,0,1,P,-P],["z"]];var Y=[["M",$,lt],["l",rt,0],["l",0,z],["l",-rt,0],["z"]];return Y.parsePathArray=C,Y},nt=function($,lt,rt,z){return $===null&&($=lt=rt=z=0),lt===null&&(lt=$.y,rt=$.width,z=$.height,$=$.x),{x:$,y:lt,width:rt,w:rt,height:z,h:z,x2:$+rt,y2:lt+z,cx:$+rt/2,cy:lt+z/2,r1:Math.min(rt,z)/2,r2:Math.max(rt,z)/2,r0:Math.sqrt(rt*rt+z*z)/2,path:tt($,lt,rt,z),vb:[$,lt,rt,z].join(" ")}},vt=function($,lt,rt,z,P,Y,k,h){Object(i.m)($)||($=[$,lt,rt,z,P,Y,k,h]);var g=T.apply(null,$);return nt(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},ft=function($,lt,rt,z,P,Y,k,h,g){var B=1-g,V=Math.pow(B,3),q=Math.pow(B,2),it=g*g,ot=it*g,At=$+2*g*(rt-$)+it*(P-2*rt+$),gt=lt+2*g*(z-lt)+it*(Y-2*z+lt),mt=rt+2*g*(P-rt)+it*(k-2*P+rt),Ot=z+2*g*(Y-z)+it*(h-2*Y+z);return{x:V*$+3*q*g*rt+3*B*g*g*P+ot*k,y:V*lt+3*q*g*z+3*B*g*g*Y+ot*h,m:{x:At,y:gt},n:{x:mt,y:Ot},start:{x:B*$+g*rt,y:B*lt+g*z},end:{x:B*P+g*k,y:B*Y+g*h},alpha:90-180*Math.atan2(At-mt,gt-Ot)/Math.PI}},bt=function($,lt,rt){if(!function(Ct,Vt){return Ct=nt(Ct),Vt=nt(Vt),X(Vt,Ct.x,Ct.y)||X(Vt,Ct.x2,Ct.y)||X(Vt,Ct.x,Ct.y2)||X(Vt,Ct.x2,Ct.y2)||X(Ct,Vt.x,Vt.y)||X(Ct,Vt.x2,Vt.y)||X(Ct,Vt.x,Vt.y2)||X(Ct,Vt.x2,Vt.y2)||(Ct.x<Vt.x2&&Ct.x>Vt.x||Vt.x<Ct.x2&&Vt.x>Ct.x)&&(Ct.y<Vt.y2&&Ct.y>Vt.y||Vt.y<Ct.y2&&Vt.y>Ct.y)}(vt($),vt(lt)))return rt?0:[];for(var z=~~(x.apply(0,$)/8),P=~~(x.apply(0,lt)/8),Y=[],k=[],h={},g=rt?0:[],B=0;B<z+1;B++){var V=ft.apply(0,$.concat(B/z));Y.push({x:V.x,y:V.y,t:B/z})}for(B=0;B<P+1;B++)V=ft.apply(0,lt.concat(B/P)),k.push({x:V.x,y:V.y,t:B/P});for(B=0;B<z;B++)for(var q=0;q<P;q++){var it=Y[B],ot=Y[B+1],At=k[q],gt=k[q+1],mt=Math.abs(ot.x-it.x)<.001?"y":"x",Ot=Math.abs(gt.x-At.x)<.001?"y":"x",It=N(it.x,it.y,ot.x,ot.y,At.x,At.y,gt.x,gt.y);if(It){if(h[It.x.toFixed(4)]===It.y.toFixed(4))continue;h[It.x.toFixed(4)]=It.y.toFixed(4);var Dt=it.t+Math.abs((It[mt]-it[mt])/(ot[mt]-it[mt]))*(ot.t-it.t),Ut=At.t+Math.abs((It[Ot]-At[Ot])/(gt[Ot]-At[Ot]))*(gt.t-At.t);Dt>=0&&Dt<=1&&Ut>=0&&Ut<=1&&(rt?g+=1:g.push({x:It.x,y:It.y,t1:Dt,t2:Ut}))}}return g},St=function($,lt){return function(rt,z,P){var Y,k,h,g,B,V,q,it,ot,At;rt=E(rt),z=E(z);for(var gt=P?0:[],mt=0,Ot=rt.length;mt<Ot;mt++){var It=rt[mt];if(It[0]==="M")Y=B=It[1],k=V=It[2];else{It[0]==="C"?(ot=[Y,k].concat(It.slice(1)),Y=ot[6],k=ot[7]):(ot=[Y,k,Y,k,B,V,B,V],Y=B,k=V);for(var Dt=0,Ut=z.length;Dt<Ut;Dt++){var Ct=z[Dt];if(Ct[0]==="M")h=q=Ct[1],g=it=Ct[2];else{Ct[0]==="C"?(At=[h,g].concat(Ct.slice(1)),h=At[6],g=At[7]):(At=[h,g,h,g,q,it,q,it],h=q,g=it);var Vt=bt(ot,At,P);if(P)gt+=Vt;else{for(var Ht=0,re=Vt.length;Ht<re;Ht++)Vt[Ht].segment1=mt,Vt[Ht].segment2=Dt,Vt[Ht].bez1=ot,Vt[Ht].bez2=At;gt=gt.concat(Vt)}}}}}return gt}($,lt)};function pt(Mt,$){var lt=[],rt=[];return Mt.length&&function z(P,Y){if(P.length===1)lt.push(P[0]),rt.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&lt.push(P[0]),h===P.length-2&&rt.push(P[h+1]),k[h]=[(1-Y)*P[h][0]+Y*P[h+1][0],(1-Y)*P[h][1]+Y*P[h+1][1]];z(k,Y)}}(Mt,$),{left:lt,right:rt.reverse()}}var ct=function($,lt,rt){if(rt===1)return[[].concat($)];var z=[];if(lt[0]==="L"||lt[0]==="C"||lt[0]==="Q")z=z.concat(function(k,h,g){var B=[[k[1],k[2]]];g=g||2;var V=[];h[0]==="A"?(B.push(h[6]),B.push(h[7])):h[0]==="C"?(B.push([h[1],h[2]]),B.push([h[3],h[4]]),B.push([h[5],h[6]])):h[0]==="S"||h[0]==="Q"?(B.push([h[1],h[2]]),B.push([h[3],h[4]])):B.push([h[1],h[2]]);for(var q=B,it=1/g,ot=0;ot<g-1;ot++){var At=pt(q,it/(1-it*ot));V.push(At.left),q=At.right}return V.push(q),V.map(function(gt){var mt=[];return gt.length===4&&(mt.push("C"),mt=mt.concat(gt[2])),gt.length>=3&&(gt.length===3&&mt.push("Q"),mt=mt.concat(gt[1])),gt.length===2&&mt.push("L"),mt=mt.concat(gt[gt.length-1])})}($,lt,rt));else{var P=[].concat($);P[0]==="M"&&(P[0]="L");for(var Y=0;Y<=rt-1;Y++)z.push(P)}return z},zt=function($,lt){if($.length===1)return $;var rt=$.length-1,z=lt.length-1,P=rt/z,Y=[];if($.length===1&&$[0][0]==="M"){for(var k=0;k<z-rt;k++)$.push($[0]);return $}for(k=0;k<z;k++){var h=Math.floor(P*k);Y[h]=(Y[h]||0)+1}var g=Y.reduce(function(B,V,q){return q===rt?B.concat($[rt]):B.concat(ct($[q],$[q+1],V))},[]);return g.unshift($[0]),lt[z]!=="Z"&&lt[z]!=="z"||g.push("Z"),g},Nt=function($,lt){if($.length!==lt.length)return!1;var rt=!0;return Object(i.f)($,function(z,P){if(z!==lt[P])return rt=!1,!1}),rt};function wt(Mt,$,lt){var rt=null,z=lt;return $<z&&(z=$,rt="add"),Mt<z&&(z=Mt,rt="del"),{type:rt,min:z}}var H=function($,lt){var rt=function(it,ot){var At,gt,mt=it.length,Ot=ot.length,It=0;if(mt===0||Ot===0)return null;for(var Dt=[],Ut=0;Ut<=mt;Ut++)Dt[Ut]=[],Dt[Ut][0]={min:Ut};for(var Ct=0;Ct<=Ot;Ct++)Dt[0][Ct]={min:Ct};for(Ut=1;Ut<=mt;Ut++)for(At=it[Ut-1],Ct=1;Ct<=Ot;Ct++){gt=ot[Ct-1],It=Nt(At,gt)?0:1;var Vt=Dt[Ut-1][Ct].min+1,Ht=Dt[Ut][Ct-1].min+1,re=Dt[Ut-1][Ct-1].min+It;Dt[Ut][Ct]=wt(Vt,Ht,re)}return Dt}($,lt),z=$.length,P=lt.length,Y=[],k=1,h=1;if(rt[z][P].min!==z){for(var g=1;g<=z;g++){var B=rt[g][g].min;h=g;for(var V=k;V<=P;V++)rt[g][V].min<B&&(B=rt[g][V].min,h=V);k=h,rt[g][k].type&&Y.push({index:g-1,type:rt[g][k].type})}for(g=Y.length-1;g>=0;g--)k=Y[g].index,Y[g].type==="add"?$.splice(k,0,[].concat($[k])):$.splice(k,1)}var q=P-(z=$.length);if(z<P)for(g=0;g<q;g++)$[z-1][0]==="z"||$[z-1][0]==="Z"?$.splice(z-2,0,$[z-2]):$.push($[z-1]),z+=1;return $};function ht(Mt,$,lt){for(var rt,z=[].concat(Mt),P=1/(lt+1),Y=dt($)[0],k=1;k<=lt;k++)P*=k,(rt=Math.floor(Mt.length*P))===0?z.unshift([Y[0]*P+Mt[rt][0]*(1-P),Y[1]*P+Mt[rt][1]*(1-P)]):z.splice(rt,0,[Y[0]*P+Mt[rt][0]*(1-P),Y[1]*P+Mt[rt][1]*(1-P)]);return z}function dt(Mt){var $=[];switch(Mt[0]){case"M":case"L":$.push([Mt[1],Mt[2]]);break;case"A":$.push([Mt[6],Mt[7]]);break;case"Q":$.push([Mt[3],Mt[4]]),$.push([Mt[1],Mt[2]]);break;case"T":$.push([Mt[1],Mt[2]]);break;case"C":$.push([Mt[5],Mt[6]]),$.push([Mt[1],Mt[2]]),$.push([Mt[3],Mt[4]]);break;case"S":$.push([Mt[3],Mt[4]]),$.push([Mt[1],Mt[2]]);break;case"H":case"V":$.push([Mt[1],Mt[1]])}return $}var yt=function($,lt){if($.length<=1)return $;for(var rt,z=0;z<lt.length;z++)if($[z][0]!==lt[z][0])switch(rt=dt($[z]),lt[z][0]){case"M":$[z]=["M"].concat(rt[0]);break;case"L":$[z]=["L"].concat(rt[0]);break;case"A":$[z]=[].concat(lt[z]),$[z][6]=rt[0][0],$[z][7]=rt[0][1];break;case"Q":if(rt.length<2){if(!(z>0)){$[z]=lt[z];break}rt=ht(rt,$[z-1],1)}$[z]=["Q"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;case"T":$[z]=["T"].concat(rt[0]);break;case"C":if(rt.length<3){if(!(z>0)){$[z]=lt[z];break}rt=ht(rt,$[z-1],2)}$[z]=["C"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;case"S":if(rt.length<2){if(!(z>0)){$[z]=lt[z];break}rt=ht(rt,$[z-1],1)}$[z]=["S"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;default:$[z]=lt[z]}return $}},function(a,A,e){"use strict";e(56),e(18);var i=e(250);e.d(A,"Canvas",function(){return i.a}),e(76),e(89)},function(a,A,e){var i=e(83),p=e(128);a.exports=function(m){return m!=null&&p(m.length)&&!i(m)}},function(a,A,e){function i(j){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}var p=e(328),m=e(338),S=e(66),l=e(26),M=e(345);a.exports=function(j){return typeof j=="function"?j:j==null?S:i(j)=="object"?l(j)?m(j[0],j[1]):p(j):M(j)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.TargetTypeEnum=A.BindingTypeEnum=A.BindingScopeEnum=void 0,A.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},A.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},A.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return j}),e.d(A,"Circle",function(){return y}),e.d(A,"Ellipse",function(){return s}),e.d(A,"Image",function(){return E}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return tt}),e.d(A,"Path",function(){return H}),e.d(A,"Polygon",function(){return dt}),e.d(A,"Polyline",function(){return yt}),e.d(A,"Rect",function(){return $}),e.d(A,"Text",function(){return lt});var i={};e.r(i),e.d(i,"Base",function(){return j}),e.d(i,"Circle",function(){return y}),e.d(i,"Ellipse",function(){return s}),e.d(i,"Image",function(){return E}),e.d(i,"Line",function(){return x}),e.d(i,"Marker",function(){return tt}),e.d(i,"Path",function(){return H}),e.d(i,"Polygon",function(){return dt}),e.d(i,"Polyline",function(){return yt}),e.d(i,"Rect",function(){return $}),e.d(i,"Text",function(){return lt});var p=e(1),m=e(18),S=e(17),l=e(29),M=e(76),j=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},z.prototype.getShapeBase=function(){return i},z.prototype.getGroupBase=function(){return M.a},z.prototype.onCanvasChange=function(P){Object(l.h)(this,P)},z.prototype.calculateBBox=function(){var P=this.get("type"),Y=this.getHitLineWidth(),k=Object(m.getBBoxMethod)(P)(this),h=Y/2,g=k.x-h,B=k.y-h,V=k.x+k.width+h,q=k.y+k.height+h;return{x:g,minX:g,y:B,minY:B,width:k.width+Y,height:k.height+Y,maxX:V,maxY:q}},z.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},z.prototype.isStroke=function(){return!!this.attrs.stroke},z.prototype._applyClip=function(P,Y){Y&&(P.save(),Object(l.a)(P,Y),Y.createPath(P),P.restore(),P.clip(),Y._afterDraw())},z.prototype.draw=function(P,Y){var k=this.cfg.clipShape;if(Y){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var h=this.getCanvasBBox();if(!Object(S.f)(Y,h))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}P.save(),Object(l.a)(P,this),this._applyClip(P,k),this.drawPath(P),P.restore(),this._afterDraw()},z.prototype.getCanvasViewBox=function(){var P=this.cfg.canvas;return P?P.getViewRange():null},z.prototype.cacheCanvasBBox=function(){var P=this.getCanvasViewBox();if(P){var Y=this.getCanvasBBox(),k=Object(S.f)(Y,P);this.set("isInView",k),k?this.set("cacheCanvasBBox",Y):this.set("cacheCanvasBBox",null)}},z.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},z.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},z.prototype.drawPath=function(P){this.createPath(P),this.strokeAndFill(P),this.afterDrawPath(P)},z.prototype.fill=function(P){P.fill()},z.prototype.stroke=function(P){P.stroke()},z.prototype.strokeAndFill=function(P){var Y=this.attrs,k=Y.lineWidth,h=Y.opacity,g=Y.strokeOpacity,B=Y.fillOpacity;this.isFill()&&(Object(S.i)(B)||B===1?this.fill(P):(P.globalAlpha=B,this.fill(P),P.globalAlpha=h)),this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=g),this.stroke(P)),this.afterDrawPath(P)},z.prototype.createPath=function(P){},z.prototype.afterDrawPath=function(P){},z.prototype.isInShape=function(P,Y){var k=this.isStroke(),h=this.isFill(),g=this.getHitLineWidth();return this.isInStrokeOrPath(P,Y,k,h,g)},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){return!1},z.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var P=this.attrs;return P.lineWidth+P.lineAppendWidth},z}(m.AbstractShape),y=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,r:0})},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var B=this.attr(),V=B.x,q=B.y,it=B.r,ot=g/2,At=Object(S.b)(V,q,P,Y);return h&&k?At<=it+ot:h?At<=it:!!k&&At>=it-ot&&At<=it+ot},z.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.r;P.beginPath(),P.arc(k,h,g,0,2*Math.PI,!1),P.closePath()},z}(j);function n(rt,z,P,Y){return rt/(P*P)+z/(Y*Y)}var s=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,rx:0,ry:0})},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var B=this.attr(),V=g/2,q=B.x,it=B.y,ot=B.rx,At=B.ry,gt=(P-q)*(P-q),mt=(Y-it)*(Y-it);return h&&k?n(gt,mt,ot+V,At+V)<=1:h?n(gt,mt,ot,At)<=1:!!k&&n(gt,mt,ot-V,At-V)>=1&&n(gt,mt,ot+V,At+V)<=1},z.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.rx,B=Y.ry;if(P.beginPath(),P.ellipse)P.ellipse(k,h,g,B,0,0,2*Math.PI,!1);else{var V=g>B?g:B,q=g>B?1:g/B,it=g>B?B/g:1;P.save(),P.translate(k,h),P.scale(q,it),P.arc(0,0,V,0,2*Math.PI),P.restore(),P.closePath()}},z}(j);function d(rt){return rt instanceof HTMLElement&&Object(S.k)(rt.nodeName)&&rt.nodeName.toUpperCase()==="CANVAS"}var E=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0})},z.prototype.initAttrs=function(P){this._setImage(P.img)},z.prototype.isStroke=function(){return!1},z.prototype.isOnlyHitBox=function(){return!0},z.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var P=this.get("canvas");P?P.draw():this.createPath(this.get("context"))}},z.prototype._setImage=function(P){var Y=this,k=this.attrs;if(Object(S.k)(P)){var h=new Image;h.onload=function(){if(Y.destroyed)return!1;Y.attr("img",h),Y.set("loading",!1),Y._afterLoading();var g=Y.get("callback");g&&g.call(Y)},h.crossOrigin="Anonymous",h.src=P,this.set("loading",!0)}else P instanceof Image?(k.width||(k.width=P.width),k.height||(k.height=P.height)):d(P)&&(k.width||(k.width=Number(P.getAttribute("width"))),k.height||(k.height,Number(P.getAttribute("height"))))},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),P==="img"&&this._setImage(Y)},z.prototype.createPath=function(P){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",P);var Y=this.attr(),k=Y.x,h=Y.y,g=Y.width,B=Y.height,V=Y.sx,q=Y.sy,it=Y.swidth,ot=Y.sheight,At=Y.img;(At instanceof Image||d(At))&&(Object(S.i)(V)||Object(S.i)(q)||Object(S.i)(it)||Object(S.i)(ot)?P.drawImage(At,k,h,g,B):P.drawImage(At,V,q,it,ot,k,h,g,B))},z}(j),O=e(20);function C(rt,z,P,Y,k,h,g){var B=Math.min(rt,P),V=Math.max(rt,P),q=Math.min(z,Y),it=Math.max(z,Y),ot=k/2;return h>=B-ot&&h<=V+ot&&g>=q-ot&&g<=it+ot&&O.c.pointToLine(rt,z,P,Y,h,g)<=k/2}var v=e(34),x=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this.setArrow()},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),this.setArrow()},z.prototype.setArrow=function(){var P=this.attr(),Y=P.x1,k=P.y1,h=P.x2,g=P.y2,B=P.startArrow,V=P.endArrow;B&&v.b(this,P,h,g,Y,k),V&&v.a(this,P,Y,k,h,g)},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){if(!k||!g)return!1;var B=this.attr();return C(B.x1,B.y1,B.x2,B.y2,g,P,Y)},z.prototype.createPath=function(P){var Y=this.attr(),k=Y.x1,h=Y.y1,g=Y.x2,B=Y.y2,V=Y.startArrow,q=Y.endArrow,it={dx:0,dy:0},ot={dx:0,dy:0};V&&V.d&&(it=v.c(k,h,g,B,Y.startArrow.d)),q&&q.d&&(ot=v.c(k,h,g,B,Y.endArrow.d)),P.beginPath(),P.moveTo(k+it.dx,h+it.dy),P.lineTo(g-ot.dx,B-ot.dy)},z.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.attr(),Y=P.x1,k=P.y1,h=P.x2,g=P.y2;return O.c.length(Y,k,h,g)},z.prototype.getPoint=function(P){var Y=this.attr(),k=Y.x1,h=Y.y1,g=Y.x2,B=Y.y2;return O.c.pointAt(k,h,g,B,P)},z}(j),T=e(0),N=e(31),X={circle:function(z,P,Y){return[["M",z-Y,P],["A",Y,Y,0,1,0,z+Y,P],["A",Y,Y,0,1,0,z-Y,P]]},square:function(z,P,Y){return[["M",z-Y,P-Y],["L",z+Y,P-Y],["L",z+Y,P+Y],["L",z-Y,P+Y],["Z"]]},diamond:function(z,P,Y){return[["M",z-Y,P],["L",z,P-Y],["L",z+Y,P],["L",z,P+Y],["Z"]]},triangle:function(z,P,Y){var k=Y*Math.sin(1/3*Math.PI);return[["M",z-Y,P+k],["L",z,P-k],["L",z+Y,P+k],["Z"]]},"triangle-down":function(z,P,Y){var k=Y*Math.sin(1/3*Math.PI);return[["M",z-Y,P-k],["L",z+Y,P-k],["L",z,P+k],["Z"]]}},tt=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.initAttrs=function(P){this._resetParamsCache()},z.prototype._resetParamsCache=function(){this.set("paramsCache",{})},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),["symbol","x","y","r","radius"].indexOf(P)!==-1&&this._resetParamsCache()},z.prototype.isOnlyHitBox=function(){return!0},z.prototype._getR=function(P){return Object(T.s)(P.r)?P.radius:P.r},z.prototype._getPath=function(){var P,Y,k=this.attr(),h=k.x,g=k.y,B=k.symbol||"circle",V=this._getR(k);if(Object(S.h)(B))Y=(P=B)(h,g,V),Y=Object(N.c)(Y);else{if(!(P=z.Symbols[B]))return console.warn(B+" marker is not supported."),null;Y=P(h,g,V)}return Y},z.prototype.createPath=function(P){var Y=this._getPath(),k=this.get("paramsCache");Object(l.e)(this,P,{path:Y},k)},z.Symbols=X,z}(j);function nt(rt,z,P){var Y=Object(m.getOffScreenContext)();return rt.createPath(Y),Y.isPointInPath(z,P)}function vt(rt){return Math.abs(rt)<1e-6?0:rt<0?-1:1}function ft(rt,z,P){return(P[0]-rt[0])*(z[1]-rt[1])==(z[0]-rt[0])*(P[1]-rt[1])&&Math.min(rt[0],z[0])<=P[0]&&P[0]<=Math.max(rt[0],z[0])&&Math.min(rt[1],z[1])<=P[1]&&P[1]<=Math.max(rt[1],z[1])}function bt(rt,z,P){var Y=!1,k=rt.length;if(k<=2)return!1;for(var h=0;h<k;h++){var g=rt[h],B=rt[(h+1)%k];if(ft(g,B,[z,P]))return!0;vt(g[1]-P)>0!=vt(B[1]-P)>0&&vt(z-(P-g[1])*(g[0]-B[0])/(g[1]-B[1])-g[0])<0&&(Y=!Y)}return Y}var St=e(10),pt=e(40);function ct(rt,z,P,Y,k,h,g,B){var V=(Math.atan2(B-z,g-rt)+2*Math.PI)%(2*Math.PI);if(V<Y||V>k)return!1;var q={x:rt+P*Math.cos(V),y:z+P*Math.sin(V)};return Object(S.b)(q.x,q.y,g,B)<=h/2}var zt=St.a.transform,Nt=Object(p.a)({hasArc:function(z){for(var P=!1,Y=z.length,k=0;k<Y;k++){var h=z[k][0];if(h==="C"||h==="A"||h==="Q"){P=!0;break}}return P},extractPolygons:function(z){for(var P=z.length,Y=[],k=[],h=[],g=0;g<P;g++){var B=z[g],V=B[0];V==="M"?(h.length&&(k.push(h),h=[]),h.push([B[1],B[2]])):V==="Z"?h.length&&(Y.push(h),h=[]):h.push([B[1],B[2]])}return h.length>0&&k.push(h),{polygons:Y,polylines:k}},isPointInStroke:function(z,P,Y,k,h){for(var g=!1,B=P/2,V=0;V<z.length;V++){var q=z[V],it=q.currentPoint,ot=q.params,At=q.prePoint,gt=q.box;if(!gt||Object(S.e)(gt.x-B,gt.y-B,gt.width+P,gt.height+P,Y,k)){switch(q.command){case"L":case"Z":g=C(At[0],At[1],it[0],it[1],P,Y,k);break;case"Q":g=O.e.pointDistance(At[0],At[1],ot[1],ot[2],ot[3],ot[4],Y,k)<=P/2;break;case"C":g=O.b.pointDistance(At[0],At[1],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6],Y,k,h)<=P/2;break;case"A":var mt=q.arcParams,Ot=mt.cx,It=mt.cy,Dt=mt.rx,Ut=mt.ry,Ct=mt.startAngle,Vt=mt.endAngle,Ht=mt.xRotation,re=[Y,k,1],pe=Dt>Ut?Dt:Ut,ye=zt(null,[["t",-Ot,-It],["r",-Ht],["s",1/(Dt>Ut?1:Dt/Ut),1/(Dt>Ut?Ut/Dt:1)]]);pt.transformMat3(re,re,ye),g=ct(0,0,pe,Ct,Vt,P,re[0],re[1])}if(g)break}}return g}},m.PathUtil);function wt(rt,z,P){for(var Y=!1,k=0;k<rt.length&&!(Y=bt(rt[k],z,P));k++);return Y}var H=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this._setPathArr(P.path),this.setArrow()},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),P==="path"&&this._setPathArr(Y),this.setArrow()},z.prototype._setPathArr=function(P){this.attrs.path=Object(N.c)(P);var Y=Nt.hasArc(P);this.set("hasArc",Y),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},z.prototype.getSegments=function(){var P=this.get("segements");return P||(P=Object(N.d)(this.attr("path")),this.set("segments",P)),P},z.prototype.setArrow=function(){var P=this.attr(),Y=P.startArrow,k=P.endArrow;if(Y){var h=this.getStartTangent();v.b(this,P,h[0][0],h[0][1],h[1][0],h[1][1])}k&&(h=this.getEndTangent(),v.a(this,P,h[0][0],h[0][1],h[1][0],h[1][1]))},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var B=this.getSegments(),V=this.get("hasArc"),q=!1;if(k){var it=this.getTotalLength();q=Nt.isPointInStroke(B,g,P,Y,it)}if(!q&&h)if(V)q=nt(this,P,Y);else{var ot=this.attr("path"),At=Nt.extractPolygons(ot);q=wt(At.polygons,P,Y)||wt(At.polylines,P,Y)}return q},z.prototype.createPath=function(P){var Y=this.attr(),k=this.get("paramsCache");Object(l.e)(this,P,Y,k)},z.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.get("totalLength");return Object(T.s)(P)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):P},z.prototype.getPoint=function(P){var Y,k,h=this.get("tCache");h||(this._calculateCurve(),this._setTcache(),h=this.get("tCache"));var g=this.get("curve");if(!h||h.length===0)return g?{x:g[0][1],y:g[0][2]}:null;Object(T.f)(h,function(it,ot){P>=it[0]&&P<=it[1]&&(Y=(P-it[0])/(it[1]-it[0]),k=ot)});var B=g[k];if(Object(T.s)(B)||Object(T.s)(k))return null;var V=B.length,q=g[k+1];return O.b.pointAt(B[V-2],B[V-1],q[1],q[2],q[3],q[4],q[5],q[6],Y)},z.prototype._calculateCurve=function(){var P=this.attr().path;this.set("curve",Nt.pathToCurve(P))},z.prototype._setTcache=function(){var P,Y,k,h,g=0,B=0,V=[],q=this.get("curve");q&&(Object(T.f)(q,function(it,ot){k=q[ot+1],h=it.length,k&&(g+=O.b.length(it[h-2],it[h-1],k[1],k[2],k[3],k[4],k[5],k[6])||0)}),this.set("totalLength",g),g!==0?(Object(T.f)(q,function(it,ot){k=q[ot+1],h=it.length,k&&((P=[])[0]=B/g,Y=O.b.length(it[h-2],it[h-1],k[1],k[2],k[3],k[4],k[5],k[6]),B+=Y||0,P[1]=B/g,V.push(P))}),this.set("tCache",V)):this.set("tCache",[]))},z.prototype.getStartTangent=function(){var P,Y=this.getSegments();if(Y.length>1){var k=Y[0].currentPoint,h=Y[1].currentPoint,g=Y[1].startTangent;P=[],g?(P.push([k[0]-g[0],k[1]-g[1]]),P.push([k[0],k[1]])):(P.push([h[0],h[1]]),P.push([k[0],k[1]]))}return P},z.prototype.getEndTangent=function(){var P,Y=this.getSegments(),k=Y.length;if(k>1){var h=Y[k-2].currentPoint,g=Y[k-1].currentPoint,B=Y[k-1].endTangent;P=[],B?(P.push([g[0]-B[0],g[1]-B[1]]),P.push([g[0],g[1]])):(P.push([h[0],h[1]]),P.push([g[0],g[1]]))}return P},z}(j);function ht(rt,z,P,Y,k){var h=rt.length;if(h<2)return!1;for(var g=0;g<h-1;g++)if(C(rt[g][0],rt[g][1],rt[g+1][0],rt[g+1][1],z,P,Y))return!0;if(k){var B=rt[0],V=rt[h-1];if(C(B[0],B[1],V[0],V[1],z,P,Y))return!0}return!1}var dt=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var B=this.attr().points,V=!1;return k&&(V=ht(B,g,P,Y,!0)),!V&&h&&(V=bt(B,P,Y)),V},z.prototype.createPath=function(P){var Y=this.attr().points;if(!(Y.length<2)){P.beginPath();for(var k=0;k<Y.length;k++){var h=Y[k];k===0?P.moveTo(h[0],h[1]):P.lineTo(h[0],h[1])}P.closePath()}},z}(j),yt=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this.setArrow()},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),this.setArrow(),["points"].indexOf(P)!==-1&&this._resetCache()},z.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},z.prototype.setArrow=function(){var P=this.attr(),Y=this.attrs,k=Y.points,h=Y.startArrow,g=Y.endArrow,B=k.length,V=k[0][0],q=k[0][1],it=k[B-1][0],ot=k[B-1][1];h&&v.b(this,P,k[1][0],k[1][1],V,q),g&&v.a(this,P,k[B-2][0],k[B-2][1],it,ot)},z.prototype.isFill=function(){return!1},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){return!(!k||!g)&&ht(this.attr().points,g,P,Y,!1)},z.prototype.isStroke=function(){return!0},z.prototype.createPath=function(P){var Y=this.attr(),k=Y.points,h=Y.startArrow,g=Y.endArrow,B=k.length;if(!(k.length<2)){var V,q=k[0][0],it=k[0][1],ot=k[B-1][0],At=k[B-1][1];h&&h.d&&(q+=(V=v.c(q,it,k[1][0],k[1][1],h.d)).dx,it+=V.dy),g&&g.d&&(ot-=(V=v.c(k[B-2][0],k[B-2][1],ot,At,g.d)).dx,At-=V.dy),P.beginPath(),P.moveTo(q,it);for(var gt=0;gt<B-1;gt++){var mt=k[gt];P.lineTo(mt[0],mt[1])}P.lineTo(ot,At)}},z.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.attr().points,Y=this.get("totalLength");return Object(T.s)(Y)?(this.set("totalLength",O.d.length(P)),this.get("totalLength")):Y},z.prototype.getPoint=function(P){var Y,k,h=this.attr().points,g=this.get("tCache");return g||(this._setTcache(),g=this.get("tCache")),Object(T.f)(g,function(B,V){P>=B[0]&&P<=B[1]&&(Y=(P-B[0])/(B[1]-B[0]),k=V)}),O.c.pointAt(h[k][0],h[k][1],h[k+1][0],h[k+1][1],Y)},z.prototype._setTcache=function(){var P=this.attr().points;if(P&&P.length!==0){var Y=this.getTotalLength();if(!(Y<=0)){var k,h,g=0,B=[];Object(T.f)(P,function(V,q){P[q+1]&&((k=[])[0]=g/Y,h=O.c.length(V[0],V[1],P[q+1][0],P[q+1][1]),g+=h,k[1]=g/Y,B.push(k))}),this.set("tCache",B)}}},z.prototype.getStartTangent=function(){var P=this.attr().points,Y=[];return Y.push([P[1][0],P[1][1]]),Y.push([P[0][0],P[0][1]]),Y},z.prototype.getEndTangent=function(){var P=this.attr().points,Y=P.length-1,k=[];return k.push([P[Y-1][0],P[Y-1][1]]),k.push([P[Y][0],P[Y][1]]),k},z}(j),Mt=e(120),$=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0,radius:0})},z.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var B=this.attr(),V=B.x,q=B.y,it=B.width,ot=B.height,At=B.radius;if(At){var gt=!1;return k&&(gt=function(Ot,It,Dt,Ut,Ct,Vt,Ht,re){return C(Ot+Ct,It,Ot+Dt-Ct,It,Vt,Ht,re)||C(Ot+Dt,It+Ct,Ot+Dt,It+Ut-Ct,Vt,Ht,re)||C(Ot+Dt-Ct,It+Ut,Ot+Ct,It+Ut,Vt,Ht,re)||C(Ot,It+Ut-Ct,Ot,It+Ct,Vt,Ht,re)||ct(Ot+Dt-Ct,It+Ct,Ct,1.5*Math.PI,2*Math.PI,Vt,Ht,re)||ct(Ot+Dt-Ct,It+Ut-Ct,Ct,0,.5*Math.PI,Vt,Ht,re)||ct(Ot+Ct,It+Ut-Ct,Ct,.5*Math.PI,Math.PI,Vt,Ht,re)||ct(Ot+Ct,It+Ct,Ct,Math.PI,1.5*Math.PI,Vt,Ht,re)}(V,q,it,ot,At,g,P,Y)),!gt&&h&&(gt=nt(this,P,Y)),gt}var mt=g/2;return h&&k?Object(S.e)(V-mt,q-mt,it+mt,ot+mt,P,Y):h?Object(S.e)(V,q,it,ot,P,Y):k?function(Ot,It,Dt,Ut,Ct,Vt,Ht){var re=Ct/2;return Object(S.e)(Ot-re,It-re,Dt,Ct,Vt,Ht)||Object(S.e)(Ot+Dt-re,It-re,Ct,Ut,Vt,Ht)||Object(S.e)(Ot+re,It+Ut-re,Dt,Ct,Vt,Ht)||Object(S.e)(Ot-re,It+re,Ct,Ut,Vt,Ht)}(V,q,it,ot,g,P,Y):void 0},z.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.width,B=Y.height,V=Y.radius;if(P.beginPath(),V===0)P.rect(k,h,g,B);else{var q=Object(Mt.a)(V),it=q[0],ot=q[1],At=q[2],gt=q[3];P.moveTo(k+it,h),P.lineTo(k+g-ot,h),ot!==0&&P.arc(k+g-ot,h+ot,ot,-Math.PI/2,0),P.lineTo(k+g,h+B-At),At!==0&&P.arc(k+g-At,h+B-At,At,0,Math.PI/2),P.lineTo(k+gt,h+B),gt!==0&&P.arc(k+gt,h+B-gt,gt,Math.PI/2,Math.PI),P.lineTo(k,h+it),it!==0&&P.arc(k+it,h+it,it,Math.PI,1.5*Math.PI),P.closePath()}},z}(j),lt=function(rt){function z(){return rt!==null&&rt.apply(this,arguments)||this}return Object(p.b)(z,rt),z.prototype.getDefaultAttrs=function(){var P=rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},z.prototype.isOnlyHitBox=function(){return!0},z.prototype.initAttrs=function(P){this._assembleFont(),P.text&&this._setText(P.text)},z.prototype._assembleFont=function(){var P=this.attrs;P.font=Object(m.assembleFont)(P)},z.prototype._setText=function(P){var Y=null;Object(S.k)(P)&&P.indexOf(`
`)!==-1&&(Y=P.split(`
`)),this.set("textArr",Y)},z.prototype.onAttrChange=function(P,Y,k){rt.prototype.onAttrChange.call(this,P,Y,k),P.startsWith("font")&&this._assembleFont(),P==="text"&&this._setText(Y)},z.prototype._getSpaceingY=function(){var P=this.attrs,Y=P.lineHeight,k=1*P.fontSize;return Y?Y-k:.14*k},z.prototype._drawTextArr=function(P,Y,k){var h,g=this.attrs,B=g.textBaseline,V=g.x,q=g.y,it=1*g.fontSize,ot=this._getSpaceingY(),At=Object(m.getTextHeight)(g.text,g.fontSize,g.lineHeight);Object(S.c)(Y,function(gt,mt){h=q+mt*(ot+it)-At+it,B==="middle"&&(h+=At-it-(At-it)/2),B==="top"&&(h+=At-it),k?P.fillText(gt,V,h):P.strokeText(gt,V,h)})},z.prototype._drawText=function(P,Y){var k=this.attr(),h=k.x,g=k.y,B=this.get("textArr");if(B)this._drawTextArr(P,B,Y);else{var V=k.text;Y?P.fillText(V,h,g):P.strokeText(V,h,g)}},z.prototype.strokeAndFill=function(P){var Y=this.attrs,k=Y.lineWidth,h=Y.opacity,g=Y.strokeOpacity,B=Y.fillOpacity;this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=h),this.stroke(P)),this.isFill()&&(Object(S.i)(B)||B===1?this.fill(P):(P.globalAlpha=B,this.fill(P),P.globalAlpha=h)),this.afterDrawPath(P)},z.prototype.fill=function(P){this._drawText(P,!0)},z.prototype.stroke=function(P){this._drawText(P,!1)},z}(j)},function(a,A,e){var i=e(72),p=e(284),m=e(285),S=i?i.toStringTag:void 0;a.exports=function(l){return l==null?l===void 0?"[object Undefined]":"[object Null]":S&&S in Object(l)?p(l):m(l)}},function(a,A,e){var i=e(167),p=e(130),m=e(53);a.exports=function(S){return m(S)?i(S):p(S)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagProperty=A.tagParameter=A.decorate=void 0;var i=e(41),p=e(32);function m(M,j,y,n,s){var d={},E=typeof s=="number",O=s!==void 0&&E?s.toString():y;if(E&&y!==void 0)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(M,j)&&(d=Reflect.getMetadata(M,j));var C=d[O];if(Array.isArray(C))for(var v=0,x=C;v<x.length;v++){var T=x[v];if(T.key===n.key)throw new Error(i.DUPLICATED_METADATA+" "+T.key.toString())}else C=[];C.push(n),d[O]=C,Reflect.defineMetadata(M,d,j)}function S(M,j){Reflect.decorate(M,j)}function l(M,j){return function(y,n){j(y,n,M)}}A.tagParameter=function(M,j,y,n){m(p.TAGGED,M,j,n,y)},A.tagProperty=function(M,j,y){m(p.TAGGED_PROP,M.constructor,j,y)},A.decorate=function(M,j,y){typeof y=="number"?S([l(y,M)],j):typeof y=="string"?Reflect.decorate([M],j,y):S([M],j)}},function(a,A,e){var i=e(443),p=e(444),m=e(218),S=e(445);a.exports=function(l,M){return i(l)||p(l,M)||m(l,M)||S()}},function(a,A,e){var i=e(57),p=e(48);a.exports=function(m){return typeof m=="number"||p(m)&&i(m)=="[object Number]"}},function(a,A,e){"use strict";e(78),e(18);var i=e(249);e.d(A,"Canvas",function(){return i.a}),e(77)},function(a,A,e){var i=e(236),p=e(235),m=e(243),S=e(150),l=e(244),M=[0,0];a.exports.computeMiter=function(j,y,n,s,d){return i(j,n,s),m(j,j),p(y,-j[1],j[0]),p(M,-n[1],n[0]),d/l(y,M)},a.exports.normal=function(j,y){return p(j,-y[1],y[0]),j},a.exports.direction=function(j,y,n){return S(j,y,n),m(j,j),j}},function(a,A,e){var i=e(283),p=e(288);a.exports=function(m,S){var l=p(m,S);return i(l)?l:void 0}},function(a,A,e){var i=e(167),p=e(308),m=e(53);a.exports=function(S){return m(S)?i(S,!0):p(S)}},function(a,A){a.exports=function(e){return e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.id=void 0;var i=0;A.id=function(){return i++}},function(a,A,e){"use strict";e.d(A,"b",function(){return m}),e.d(A,"c",function(){return S}),e.d(A,"a",function(){return l});var i=e(19),p=e(116);function m(M,j,y){var n=1;return Object(i.h)(M)&&(n=M.split(`
`).length),n>1?j*n+function(s,d){return d?d-s:.14*s}(j,y)*(n-1):j}function S(M,j){var y=Object(p.a)(),n=0;if(Object(i.e)(M)||M==="")return n;if(y.save(),y.font=j,Object(i.h)(M)&&M.includes(`
`)){var s=M.split(`
`);Object(i.a)(s,function(d){var E=y.measureText(d).width;n<E&&(n=E)})}else n=y.measureText(M).width;return y.restore(),n}function l(M){var j=M.fontSize,y=M.fontFamily,n=M.fontWeight;return[M.fontStyle,M.fontVariant,n,j+"px",y].join(" ").trim()}},function(a,A,e){"use strict";e.d(A,"a",function(){return po}),e.d(A,"b",function(){return wo});var i,p,m=function(U){return typeof U=="string"},S=/-(\w)/g,l=(i=function(U){return U.replace(S,function(w,L){return L?L.toUpperCase():""})},p=Object.create(null),Array.isArray),M=function(U){return typeof U=="number"},j=function(U){return Number.isNaN(Number(U))},y=function(U,w,L){for(var J=[],jt=0;jt<U;jt++)J[jt]=0;return L&&L.forEach(function(Rt){Rt.source&&(J[w[Rt.source]]+=1),Rt.target&&(J[w[Rt.target]]+=1)}),J},n=function(U){for(var w=[],L=U.length,J=0;J<L;J+=1){w[J]=[];for(var jt=0;jt<L;jt+=1)J===jt?w[J][jt]=0:U[J][jt]!==0&&U[J][jt]?w[J][jt]=U[J][jt]:w[J][jt]=1/0}for(var Rt=0;Rt<L;Rt+=1)for(var K=0;K<L;K+=1)for(var Pt=0;Pt<L;Pt+=1)w[K][Pt]>w[K][Rt]+w[Rt][Pt]&&(w[K][Pt]=w[K][Rt]+w[Rt][Pt]);return w},s=function(U,w){var L=U.nodes,J=U.edges,jt=[],Rt={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(K,Pt){Rt[K.id]=Pt,jt.push([])}),J&&J.forEach(function(K){var Pt=K.source,Qt=K.target,qt=Rt[Pt],xe=Rt[Qt];jt[qt][xe]=1,w||(jt[xe][qt]=1)}),jt},d=function(U,w){typeof w=="function"&&function L(J,jt){if(J&&J.children){for(var Rt=J.children.length-1;Rt>=0;Rt--)if(!L(J.children[Rt],jt))return}return!!jt(J)}(U,w)};function E(Q){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}var O=function Q(U){if(U===null)return U;if(U instanceof Date)return new Date(U.getTime());if(U instanceof Array){var w=[];return U.forEach(function(J){w.push(J)}),w.map(function(J){return Q(J)})}if(E(U)==="object"&&U!=={}){var L=Object.assign({},U);return Object.keys(L).forEach(function(J){L[J]=Q(L[J])}),L}return U},C=function(U){return typeof U=="function"};function v(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var x=function(){function Q(){(function(J,jt){if(!(J instanceof jt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var U,w,L;return U=Q,(w=[{key:"layout",value:function(jt){return this.init(jt),this.execute(!0)}},{key:"init",value:function(jt){this.nodes=jt.nodes||[],this.edges=jt.edges||[],this.combos=jt.combos||[]}},{key:"execute",value:function(jt){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(jt){jt&&Object.assign(this,jt)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&v(U.prototype,w),L&&v(U,L),Q}();function T(Q){return(T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function N(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function X(Q,U){return(X=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function tt(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=vt(Q);if(U){var J=vt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return nt(this,w)}}function nt(Q,U){return!U||T(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function vt(Q){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ft=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&X(Rt,K)})(jt,Q);var U,w,L,J=tt(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).begin=[0,0],K.preventOverlap=!0,K.preventOverlapPadding=10,K.condense=!1,K.sortBy="degree",K.nodeSize=30,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.row=0,K.col=0,K.cellWidth=0,K.cellHeight=0,K.cellUsed={},K.id2manPos={},K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=Pt.length,qt=K.begin;if(Qt!==0){if(Qt===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.edges,Ie=[];Pt.forEach(function(qn){Ie.push(qn)});var Xe={};if(Ie.forEach(function(qn,fr){Xe[qn.id]=fr}),(K.sortBy==="degree"||!m(K.sortBy)||Ie[0][K.sortBy]===void 0)&&(K.sortBy="degree",j(Pt[0].degree))){var Re=y(Ie.length,Xe,xe);Ie.forEach(function(qn,fr){qn.degree=Re[fr]})}Ie.sort(function(qn,fr){return fr[K.sortBy]-qn[K.sortBy]}),K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var Ye=K.rows,Je=K.cols!=null?K.cols:K.columns;if(K.cells=Qt,Ye!=null&&Je!=null?(K.rows=Ye,K.cols=Je):Ye!=null&&Je==null?(K.rows=Ye,K.cols=Math.ceil(K.cells/K.rows)):Ye==null&&Je!=null?(K.cols=Je,K.rows=Math.ceil(K.cells/K.cols)):(K.splits=Math.sqrt(K.cells*K.height/K.width),K.rows=Math.round(K.splits),K.cols=Math.round(K.width/K.height*K.splits)),K.cols*K.rows>K.cells){var Ge=K.small(),qe=K.large();(Ge-1)*qe>=K.cells?K.small(Ge-1):(qe-1)*Ge>=K.cells&&K.large(qe-1)}else for(;K.cols*K.rows<K.cells;){var yn=K.small(),Pn=K.large();(Pn+1)*yn>=K.cells?K.large(Pn+1):K.small(yn+1)}K.cellWidth=K.width/K.cols,K.cellHeight=K.height/K.rows,K.condense&&(K.cellWidth=0,K.cellHeight=0),K.preventOverlap&&Ie.forEach(function(qn){var fr,br;qn.x&&qn.y||(qn.x=0,qn.y=0),l(qn.size)?(fr=qn.size[0],br=qn.size[1]):M(qn.size)&&(fr=qn.size,br=qn.size),fr!==void 0&&br!==void 0||(l(K.nodeSize)?(fr=K.nodeSize[0],br=K.nodeSize[1]):M(K.nodeSize)?(fr=K.nodeSize,br=K.nodeSize):(fr=30,br=30));var gr=K.preventOverlapPadding,hr=fr+gr,Tr=br+gr;K.cellWidth=Math.max(K.cellWidth,hr),K.cellHeight=Math.max(K.cellHeight,Tr)}),K.cellUsed={},K.row=0,K.col=0,K.id2manPos={};for(var En=0;En<Ie.length;En++){var Ln=Ie[En],Zn=void 0;if(K.position&&(Zn=K.position(Ln)),Zn&&(Zn.row!==void 0||Zn.col!==void 0)){var Qn={row:Zn.row,col:Zn.col};if(Qn.col===void 0)for(Qn.col=0;K.used(Qn.row,Qn.col);)Qn.col++;else if(Qn.row===void 0)for(Qn.row=0;K.used(Qn.row,Qn.col);)Qn.row++;K.id2manPos[Ln.id]=Qn,K.use(Qn.row,Qn.col)}K.getPos(Ln)}return K.onLayoutEnd&&K.onLayoutEnd(),{edges:xe,nodes:Ie}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"small",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.min(Qt,qt):Math.min(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"large",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.max(Qt,qt):Math.max(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"used",value:function(K,Pt){return this.cellUsed["c-".concat(K,"-").concat(Pt)]||!1}},{key:"use",value:function(K,Pt){this.cellUsed["c-".concat(K,"-").concat(Pt)]=!0}},{key:"moveToNextCell",value:function(){var K=this.cols||5;this.col++,this.col>=K&&(this.col=0,this.row++)}},{key:"getPos",value:function(K){var Pt,Qt,qt=this.begin,xe=this.cellWidth,Ie=this.cellHeight,Xe=this.id2manPos[K.id];if(Xe)Pt=Xe.col*xe+xe/2+qt[0],Qt=Xe.row*Ie+Ie/2+qt[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();Pt=this.col*xe+xe/2+qt[0],Qt=this.row*Ie+Ie/2+qt[1],this.use(this.row,this.col),this.moveToNextCell()}K.x=Pt,K.y=Qt}},{key:"getType",value:function(){return"grid"}}])&&N(U.prototype,w),L&&N(U,L),jt}(x);function bt(Q){return(bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function St(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function pt(Q,U){return(pt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function ct(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Nt(Q);if(U){var J=Nt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zt(this,w)}}function zt(Q,U){return!U||bt(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Nt(Q){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var wt=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&pt(Rt,K)})(jt,Q);var U,w,L,J=ct(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).center=[0,0],K.width=300,K.height=300,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.center;return K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),Pt&&Pt.forEach(function(qt){qt.x=.9*(Math.random()-.5)*K.width+Qt[0],qt.y=.9*(Math.random()-.5)*K.height+Qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&St(U.prototype,w),L&&St(U,L),jt}(x);function H(Q){return(H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function ht(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function dt(Q,U){return(dt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function yt(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=$(Q);if(U){var J=$(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Mt(this,w)}}function Mt(Q,U){return!U||H(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function $(Q){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var lt=function(U,w){return U?M(U)?function(L){return U}:U:function(L){return w||1}},rt=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&dt(Rt,K)})(jt,Q);var U,w,L,J=yt(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=.5,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.preventOverlap=!0,K.tick=function(){},K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var K=this,Pt=K.nodes;if(K.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(K.timeInterval),Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var Qt=K.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var qt={},xe={};Pt.forEach(function(Ge,qe){M(Ge.x)||(Ge.x=Math.random()*K.width),M(Ge.y)||(Ge.y=Math.random()*K.height),qt[Ge.id]=Ge,xe[Ge.id]=qe}),K.nodeMap=qt,K.nodeIdxMap=xe,K.linkDistance=lt(K.linkDistance,1),K.nodeStrength=lt(K.nodeStrength,1),K.edgeStrength=lt(K.edgeStrength,1);var Ie,Xe=K.nodeSize;if(K.preventOverlap){var Re,Ye=K.nodeSpacing;Re=M(Ye)?function(){return Ye}:C(Ye)?Ye:function(){return 0},Ie=Xe?l(Xe)?function(Ge){return(Xe[0]>Xe[1]?Xe[0]:Xe[1])+Re(Ge)}:function(Ge){return Xe+Re(Ge)}:function(Ge){return Ge.size?l(Ge.size)?(Ge.size[0]>Ge.size[1]?Ge.size[0]:Ge.size[1])+Re(Ge):Ge.size+Re(Ge):10+Re(Ge)}}K.nodeSize=Ie;var Je=K.edges;K.degrees=y(Pt.length,K.nodeIdxMap,Je),K.getMass||(K.getMass=function(Ge){return K.degrees[K.nodeIdxMap[Ge.id]]}),K.run()}else K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration;if(typeof window!="undefined"){var xe=0;this.timeInterval=window.setInterval(function(){var Ie=[],Xe=[];if(Pt){Pt.forEach(function(Ge,qe){Ie[2*qe]=0,Ie[2*qe+1]=0,Xe[2*qe]=0,Xe[2*qe+1]=0}),K.calRepulsive(Ie,Pt),Qt&&K.calAttractive(Ie,Qt),K.calGravity(Ie,Pt);var Re=Math.max(.02,K.interval-.002*xe);K.updateVelocity(Ie,Xe,Re,Pt);var Ye=[];Pt.forEach(function(Ge){Ye.push({x:Ge.x,y:Ge.y})}),K.updatePosition(Xe,Re,Pt),K.tick&&K.tick();var Je=0;Pt.forEach(function(Ge,qe){var yn=Ge.x-Ye[qe].x,Pn=Ge.y-Ye[qe].y;Je+=Math.sqrt(yn*yn+Pn*Pn)}),(Je/=Pt.length)<K.minMovement&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd()),++xe>qt&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd())}},0)}}},{key:"calRepulsive",value:function(K,Pt){var Qt=this.getMass,qt=this.nodeStrength,xe=this.factor,Ie=this.coulombDisScale,Xe=this.preventOverlap,Re=this.nodeSize;Pt.forEach(function(Ye,Je){var Ge=Qt?Qt(Ye):1;Pt.forEach(function(qe,yn){if(!(Je>=yn)){var Pn=Ye.x-qe.x,En=Ye.y-qe.y,Ln=Math.sqrt(Pn*Pn+En*En)+.01,Zn=(Ln+.1)*Ie,Qn=Pn/Ln,qn=En/Ln,fr=(qt(Ye)+qt(qe))/2*xe/(Zn*Zn),br=Qt?Qt(qe):1;if(K[2*Je]+=Qn*fr/Ge,K[2*Je+1]+=qn*fr/Ge,K[2*yn]-=Qn*fr/br,K[2*yn+1]-=qn*fr/br,Xe&&Ln<(Re(Ye)+Re(qe))/2){var gr=(qt(Ye)+qt(qe))/2/(Ln*Ln);K[2*Je]+=Qn*gr/Ge,K[2*Je+1]+=qn*gr/Ge,K[2*yn]-=Qn*gr/br,K[2*yn+1]-=qn*gr/br}}})})}},{key:"calAttractive",value:function(K,Pt){var Qt=this.nodeMap,qt=this.nodeIdxMap,xe=this.linkDistance,Ie=this.edgeStrength,Xe=this.getMass;Pt.forEach(function(Re,Ye){var Je=Qt[Re.source],Ge=Qt[Re.target],qe=Ge.x-Je.x,yn=Ge.y-Je.y,Pn=Math.sqrt(qe*qe+yn*yn)+.01,En=qe/Pn,Ln=yn/Pn,Zn=((xe(Re)||1)-Pn)*Ie(Re),Qn=qt[Re.source],qn=qt[Re.target],fr=Xe?Xe(Je):1,br=Xe?Xe(Ge):1;K[2*Qn]-=En*Zn/fr,K[2*Qn+1]-=Ln*Zn/fr,K[2*qn]+=En*Zn/br,K[2*qn+1]+=Ln*Zn/br})}},{key:"calGravity",value:function(K,Pt){for(var Qt=this.center,qt=this.gravity,xe=this.degrees,Ie=Pt.length,Xe=0;Xe<Ie;Xe++){var Re=Pt[Xe],Ye=Re.x-Qt[0],Je=Re.y-Qt[1],Ge=qt;if(this.getCenter){var qe=this.getCenter(Re,xe[Xe]);qe&&M(qe[0])&&M(qe[1])&&M(qe[2])&&(Ye=Re.x-qe[0],Je=Re.y-qe[1],Ge=qe[2])}Ge&&(K[2*Xe]-=Ge*Ye,K[2*Xe+1]-=Ge*Je)}}},{key:"updateVelocity",value:function(K,Pt,Qt,qt){var xe=this,Ie=Qt*xe.damping;qt.forEach(function(Xe,Re){var Ye=K[2*Re]*Ie||.01,Je=K[2*Re+1]*Ie||.01,Ge=Math.sqrt(Ye*Ye+Je*Je);if(Ge>xe.maxSpeed){var qe=xe.maxSpeed/Ge;Ye*=qe,Je*=qe}Pt[2*Re]=Ye,Pt[2*Re+1]=Je})}},{key:"updatePosition",value:function(K,Pt,Qt){Qt.forEach(function(qt,xe){var Ie=K[2*xe]*Pt,Xe=K[2*xe+1]*Pt;qt.x+=Ie,qt.y+=Xe})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&ht(U.prototype,w),L&&ht(U,L),jt}(x);function z(Q,U,w,L){if(isNaN(U)||isNaN(w))return Q;var J,jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe=Q._root,Re={data:L},Ye=Q._x0,Je=Q._y0,Ge=Q._x1,qe=Q._y1;if(!Xe)return Q._root=Re,Q;for(;Xe.length;)if((Qt=U>=(jt=(Ye+Ge)/2))?Ye=jt:Ge=jt,(qt=w>=(Rt=(Je+qe)/2))?Je=Rt:qe=Rt,J=Xe,!(Xe=Xe[xe=qt<<1|Qt]))return J[xe]=Re,Q;if(K=+Q._x.call(null,Xe.data),Pt=+Q._y.call(null,Xe.data),U===K&&w===Pt)return Re.next=Xe,J?J[xe]=Re:Q._root=Re,Q;do J=J?J[xe]=new Array(4):Q._root=new Array(4),(Qt=U>=(jt=(Ye+Ge)/2))?Ye=jt:Ge=jt,(qt=w>=(Rt=(Je+qe)/2))?Je=Rt:qe=Rt;while((xe=qt<<1|Qt)==(Ie=(Pt>=Rt)<<1|K>=jt));return J[Ie]=Xe,J[xe]=Re,Q}var P=function(U,w,L,J,jt){this.node=U,this.x0=w,this.y0=L,this.x1=J,this.y1=jt};function Y(Q){return Q[0]}function k(Q){return Q[1]}function h(Q,U,w){var L=new g(U==null?Y:U,w==null?k:w,NaN,NaN,NaN,NaN);return Q==null?L:L.addAll(Q)}function g(Q,U,w,L,J,jt){this._x=Q,this._y=U,this._x0=w,this._y0=L,this._x1=J,this._y1=jt,this._root=void 0}function B(Q){for(var U={data:Q.data},w=U;Q=Q.next;)w=w.next={data:Q.data};return U}var V=h.prototype=g.prototype;V.copy=function(){var Q,U,w=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),L=this._root;if(!L)return w;if(!L.length)return w._root=B(L),w;for(Q=[{source:L,target:w._root=new Array(4)}];L=Q.pop();)for(var J=0;J<4;++J)(U=L.source[J])&&(U.length?Q.push({source:U,target:L.target[J]=new Array(4)}):L.target[J]=B(U));return w},V.add=function(Q){var U=+this._x.call(null,Q),w=+this._y.call(null,Q);return z(this.cover(U,w),U,w,Q)},V.addAll=function(Q){var U,w,L,J,jt=Q.length,Rt=new Array(jt),K=new Array(jt),Pt=1/0,Qt=1/0,qt=-1/0,xe=-1/0;for(w=0;w<jt;++w)isNaN(L=+this._x.call(null,U=Q[w]))||isNaN(J=+this._y.call(null,U))||(Rt[w]=L,K[w]=J,L<Pt&&(Pt=L),L>qt&&(qt=L),J<Qt&&(Qt=J),J>xe&&(xe=J));if(Pt>qt||Qt>xe)return this;for(this.cover(Pt,Qt).cover(qt,xe),w=0;w<jt;++w)z(this,Rt[w],K[w],Q[w]);return this},V.cover=function(Q,U){if(isNaN(Q=+Q)||isNaN(U=+U))return this;var w=this._x0,L=this._y0,J=this._x1,jt=this._y1;if(isNaN(w))J=(w=Math.floor(Q))+1,jt=(L=Math.floor(U))+1;else{for(var Rt,K,Pt=J-w||1,Qt=this._root;w>Q||Q>=J||L>U||U>=jt;)switch(K=(U<L)<<1|Q<w,(Rt=new Array(4))[K]=Qt,Qt=Rt,Pt*=2,K){case 0:J=w+Pt,jt=L+Pt;break;case 1:w=J-Pt,jt=L+Pt;break;case 2:J=w+Pt,L=jt-Pt;break;case 3:w=J-Pt,L=jt-Pt}this._root&&this._root.length&&(this._root=Qt)}return this._x0=w,this._y0=L,this._x1=J,this._y1=jt,this},V.data=function(){var Q=[];return this.visit(function(U){if(!U.length)do Q.push(U.data);while(U=U.next)}),Q},V.extent=function(Q){return arguments.length?this.cover(+Q[0][0],+Q[0][1]).cover(+Q[1][0],+Q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},V.find=function(Q,U,w){var L,J,jt,Rt,K,Pt,Qt,qt=this._x0,xe=this._y0,Ie=this._x1,Xe=this._y1,Re=[],Ye=this._root;for(Ye&&Re.push(new P(Ye,qt,xe,Ie,Xe)),w==null?w=1/0:(qt=Q-w,xe=U-w,Ie=Q+w,Xe=U+w,w*=w);Pt=Re.pop();)if(!(!(Ye=Pt.node)||(J=Pt.x0)>Ie||(jt=Pt.y0)>Xe||(Rt=Pt.x1)<qt||(K=Pt.y1)<xe))if(Ye.length){var Je=(J+Rt)/2,Ge=(jt+K)/2;Re.push(new P(Ye[3],Je,Ge,Rt,K),new P(Ye[2],J,Ge,Je,K),new P(Ye[1],Je,jt,Rt,Ge),new P(Ye[0],J,jt,Je,Ge)),(Qt=(U>=Ge)<<1|Q>=Je)&&(Pt=Re[Re.length-1],Re[Re.length-1]=Re[Re.length-1-Qt],Re[Re.length-1-Qt]=Pt)}else{var qe=Q-+this._x.call(null,Ye.data),yn=U-+this._y.call(null,Ye.data),Pn=qe*qe+yn*yn;if(Pn<w){var En=Math.sqrt(w=Pn);qt=Q-En,xe=U-En,Ie=Q+En,Xe=U+En,L=Ye.data}}return L},V.remove=function(Q){if(isNaN(jt=+this._x.call(null,Q))||isNaN(Rt=+this._y.call(null,Q)))return this;var U,w,L,J,jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe=this._root,Re=this._x0,Ye=this._y0,Je=this._x1,Ge=this._y1;if(!Xe)return this;if(Xe.length)for(;;){if((Qt=jt>=(K=(Re+Je)/2))?Re=K:Je=K,(qt=Rt>=(Pt=(Ye+Ge)/2))?Ye=Pt:Ge=Pt,U=Xe,!(Xe=Xe[xe=qt<<1|Qt]))return this;if(!Xe.length)break;(U[xe+1&3]||U[xe+2&3]||U[xe+3&3])&&(w=U,Ie=xe)}for(;Xe.data!==Q;)if(L=Xe,!(Xe=Xe.next))return this;return(J=Xe.next)&&delete Xe.next,L?(J?L.next=J:delete L.next,this):U?(J?U[xe]=J:delete U[xe],(Xe=U[0]||U[1]||U[2]||U[3])&&Xe===(U[3]||U[2]||U[1]||U[0])&&!Xe.length&&(w?w[Ie]=Xe:this._root=Xe),this):(this._root=J,this)},V.removeAll=function(Q){for(var U=0,w=Q.length;U<w;++U)this.remove(Q[U]);return this},V.root=function(){return this._root},V.size=function(){var Q=0;return this.visit(function(U){if(!U.length)do++Q;while(U=U.next)}),Q},V.visit=function(Q){var U,w,L,J,jt,Rt,K=[],Pt=this._root;for(Pt&&K.push(new P(Pt,this._x0,this._y0,this._x1,this._y1));U=K.pop();)if(!Q(Pt=U.node,L=U.x0,J=U.y0,jt=U.x1,Rt=U.y1)&&Pt.length){var Qt=(L+jt)/2,qt=(J+Rt)/2;(w=Pt[3])&&K.push(new P(w,Qt,qt,jt,Rt)),(w=Pt[2])&&K.push(new P(w,L,qt,Qt,Rt)),(w=Pt[1])&&K.push(new P(w,Qt,J,jt,qt)),(w=Pt[0])&&K.push(new P(w,L,J,Qt,qt))}return this},V.visitAfter=function(Q){var U,w=[],L=[];for(this._root&&w.push(new P(this._root,this._x0,this._y0,this._x1,this._y1));U=w.pop();){var J=U.node;if(J.length){var jt,Rt=U.x0,K=U.y0,Pt=U.x1,Qt=U.y1,qt=(Rt+Pt)/2,xe=(K+Qt)/2;(jt=J[0])&&w.push(new P(jt,Rt,K,qt,xe)),(jt=J[1])&&w.push(new P(jt,qt,K,Pt,xe)),(jt=J[2])&&w.push(new P(jt,Rt,xe,qt,Qt)),(jt=J[3])&&w.push(new P(jt,qt,xe,Pt,Qt))}L.push(U)}for(;U=L.pop();)Q(U.node,U.x0,U.y0,U.x1,U.y1);return this},V.x=function(Q){return arguments.length?(this._x=Q,this):this._x},V.y=function(Q){return arguments.length?(this._y=Q,this):this._y};var q=function(U){return function(){return U}},it=function(U){return 1e-6*(U()-.5)},ot={value:function(){}};function At(){for(var Q,U=0,w=arguments.length,L={};U<w;++U){if(!(Q=arguments[U]+"")||Q in L||/[\s.]/.test(Q))throw new Error("illegal type: "+Q);L[Q]=[]}return new gt(L)}function gt(Q){this._=Q}function mt(Q,U){return Q.trim().split(/^|\s+/).map(function(w){var L="",J=w.indexOf(".");if(J>=0&&(L=w.slice(J+1),w=w.slice(0,J)),w&&!U.hasOwnProperty(w))throw new Error("unknown type: "+w);return{type:w,name:L}})}function Ot(Q,U){for(var w,L=0,J=Q.length;L<J;++L)if((w=Q[L]).name===U)return w.value}function It(Q,U,w){for(var L=0,J=Q.length;L<J;++L)if(Q[L].name===U){Q[L]=ot,Q=Q.slice(0,L).concat(Q.slice(L+1));break}return w!=null&&Q.push({name:U,value:w}),Q}gt.prototype=At.prototype={constructor:gt,on:function(U,w){var L,J=this._,jt=mt(U+"",J),Rt=-1,K=jt.length;if(!(arguments.length<2)){if(w!=null&&typeof w!="function")throw new Error("invalid callback: "+w);for(;++Rt<K;)if(L=(U=jt[Rt]).type)J[L]=It(J[L],U.name,w);else if(w==null)for(L in J)J[L]=It(J[L],U.name,null);return this}for(;++Rt<K;)if((L=(U=jt[Rt]).type)&&(L=Ot(J[L],U.name)))return L},copy:function(){var U={},w=this._;for(var L in w)U[L]=w[L].slice();return new gt(U)},call:function(U,w){if((L=arguments.length-2)>0)for(var L,J,jt=new Array(L),Rt=0;Rt<L;++Rt)jt[Rt]=arguments[Rt+2];if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(Rt=0,L=(J=this._[U]).length;Rt<L;++Rt)J[Rt].value.apply(w,jt)},apply:function(U,w,L){if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(var J=this._[U],jt=0,Rt=J.length;jt<Rt;++jt)J[jt].value.apply(w,L)}};var Dt=At;function Ut(Q){return(Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}var Ct,Vt,Ht=0,re=0,pe=0,ye=0,we=0,Ne=0,Ke=(typeof performance=="undefined"?"undefined":Ut(performance))==="object"&&performance.now?performance:Date,pn=(typeof window=="undefined"?"undefined":Ut(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Q){setTimeout(Q,17)};function hn(){return we||(pn(kn),we=Ke.now()+Ne)}function kn(){we=0}function Tn(){this._call=this._time=this._next=null}function Rn(Q,U,w){var L=new Tn;return L.restart(Q,U,w),L}function Mn(){we=(ye=Ke.now())+Ne,Ht=re=0;try{(function(){hn(),++Ht;for(var Q,U=Ct;U;)(Q=we-U._time)>=0&&U._call.call(null,Q),U=U._next;--Ht})()}finally{Ht=0,function(){for(var Q,U,w=Ct,L=1/0;w;)w._call?(L>w._time&&(L=w._time),Q=w,w=w._next):(U=w._next,w._next=null,w=Q?Q._next=U:Ct=U);Vt=Q,_n(L)}(),we=0}}function Cn(){var Q=Ke.now(),U=Q-ye;U>1e3&&(Ne-=U,ye=Q)}function _n(Q){Ht||(re&&(re=clearTimeout(re)),Q-we>24?(Q<1/0&&(re=setTimeout(Mn,Q-Ke.now()-Ne)),pe&&(pe=clearInterval(pe))):(pe||(ye=Ke.now(),pe=setInterval(Cn,1e3)),Ht=1,pn(Mn)))}Tn.prototype=Rn.prototype={constructor:Tn,restart:function(U,w,L){if(typeof U!="function")throw new TypeError("callback is not a function");L=(L==null?hn():+L)+(w==null?0:+w),this._next||Vt===this||(Vt?Vt._next=this:Ct=this,Vt=this),this._call=U,this._time=L,_n()},stop:function(){this._call&&(this._call=null,this._time=1/0,_n())}};function Kn(Q){return Q.x}function tr(Q){return Q.y}var or=Math.PI*(3-Math.sqrt(5)),nr=function(U){var w,L,J=1,jt=.001,Rt=1-Math.pow(jt,1/300),K=0,Pt=.6,Qt=new Map,qt=Rn(Xe),xe=Dt("tick","end"),Ie=(L=1,function(){return(L=(1664525*L+1013904223)%4294967296)/4294967296});function Xe(){Re(),xe.call("tick",w),J<jt&&(qt.stop(),xe.call("end",w))}function Re(Ge){var qe,yn,Pn=U.length;Ge===void 0&&(Ge=1);for(var En=0;En<Ge;++En)for(J+=(K-J)*Rt,Qt.forEach(function(Ln){Ln(J)}),qe=0;qe<Pn;++qe)(yn=U[qe]).fx==null?yn.x+=yn.vx*=Pt:(yn.x=yn.fx,yn.vx=0),yn.fy==null?yn.y+=yn.vy*=Pt:(yn.y=yn.fy,yn.vy=0);return w}function Ye(){for(var Ge,qe=0,yn=U.length;qe<yn;++qe){if((Ge=U[qe]).index=qe,Ge.fx!=null&&(Ge.x=Ge.fx),Ge.fy!=null&&(Ge.y=Ge.fy),isNaN(Ge.x)||isNaN(Ge.y)){var Pn=10*Math.sqrt(.5+qe),En=qe*or;Ge.x=Pn*Math.cos(En),Ge.y=Pn*Math.sin(En)}(isNaN(Ge.vx)||isNaN(Ge.vy))&&(Ge.vx=Ge.vy=0)}}function Je(Ge){return Ge.initialize&&Ge.initialize(U,Ie),Ge}return U==null&&(U=[]),Ye(),w={tick:Re,restart:function(){return qt.restart(Xe),w},stop:function(){return qt.stop(),w},nodes:function(qe){return arguments.length?(U=qe,Ye(),Qt.forEach(Je),w):U},alpha:function(qe){return arguments.length?(J=+qe,w):J},alphaMin:function(qe){return arguments.length?(jt=+qe,w):jt},alphaDecay:function(qe){return arguments.length?(Rt=+qe,w):+Rt},alphaTarget:function(qe){return arguments.length?(K=+qe,w):K},velocityDecay:function(qe){return arguments.length?(Pt=1-qe,w):1-Pt},randomSource:function(qe){return arguments.length?(Ie=qe,Qt.forEach(Je),w):Ie},force:function(qe,yn){return arguments.length>1?(yn==null?Qt.delete(qe):Qt.set(qe,Je(yn)),w):Qt.get(qe)},find:function(qe,yn,Pn){var En,Ln,Zn,Qn,qn,fr=0,br=U.length;for(Pn==null?Pn=1/0:Pn*=Pn,fr=0;fr<br;++fr)(Zn=(En=qe-(Qn=U[fr]).x)*En+(Ln=yn-Qn.y)*Ln)<Pn&&(qn=Qn,Pn=Zn);return qn},on:function(qe,yn){return arguments.length>1?(xe.on(qe,yn),w):xe.on(qe)}}},er=function(){var U,w,L,J,jt,Rt=q(-30),K=1,Pt=1/0,Qt=.81;function qt(Re){var Ye,Je=U.length,Ge=h(U,Kn,tr).visitAfter(Ie);for(J=Re,Ye=0;Ye<Je;++Ye)w=U[Ye],Ge.visit(Xe)}function xe(){if(U){var Re,Ye,Je=U.length;for(jt=new Array(Je),Re=0;Re<Je;++Re)Ye=U[Re],jt[Ye.index]=+Rt(Ye,Re,U)}}function Ie(Re){var Ye,Je,Ge,qe,yn,Pn=0,En=0;if(Re.length){for(Ge=qe=yn=0;yn<4;++yn)(Ye=Re[yn])&&(Je=Math.abs(Ye.value))&&(Pn+=Ye.value,En+=Je,Ge+=Je*Ye.x,qe+=Je*Ye.y);Re.x=Ge/En,Re.y=qe/En}else{(Ye=Re).x=Ye.data.x,Ye.y=Ye.data.y;do Pn+=jt[Ye.data.index];while(Ye=Ye.next)}Re.value=Pn}function Xe(Re,Ye,Je,Ge){if(!Re.value)return!0;var qe=Re.x-w.x,yn=Re.y-w.y,Pn=Ge-Ye,En=qe*qe+yn*yn;if(Pn*Pn/Qt<En)return En<Pt&&(qe===0&&(En+=(qe=it(L))*qe),yn===0&&(En+=(yn=it(L))*yn),En<K&&(En=Math.sqrt(K*En)),w.vx+=qe*Re.value*J/En,w.vy+=yn*Re.value*J/En),!0;if(!(Re.length||En>=Pt)){(Re.data!==w||Re.next)&&(qe===0&&(En+=(qe=it(L))*qe),yn===0&&(En+=(yn=it(L))*yn),En<K&&(En=Math.sqrt(K*En)));do Re.data!==w&&(Pn=jt[Re.data.index]*J/En,w.vx+=qe*Pn,w.vy+=yn*Pn);while(Re=Re.next)}}return qt.initialize=function(Re,Ye){U=Re,L=Ye,xe()},qt.strength=function(Re){return arguments.length?(Rt=typeof Re=="function"?Re:q(+Re),xe(),qt):Rt},qt.distanceMin=function(Re){return arguments.length?(K=Re*Re,qt):Math.sqrt(K)},qt.distanceMax=function(Re){return arguments.length?(Pt=Re*Re,qt):Math.sqrt(Pt)},qt.theta=function(Re){return arguments.length?(Qt=Re*Re,qt):Math.sqrt(Qt)},qt};function Sr(Q){return(Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Vr(Q){return Q.index}function ti(Q,U){var w=Q.get(U);if(!w)throw new Error("node not found: "+U);return w}var hi=function(U){var w,L,J,jt,Rt,K,Pt=Vr,Qt=function(Ge){return 1/Math.min(jt[Ge.source.index],jt[Ge.target.index])},qt=q(30),xe=1;function Ie(Je){for(var Ge=0,qe=U.length;Ge<xe;++Ge)for(var yn,Pn,En,Ln,Zn,Qn,qn,fr=0;fr<qe;++fr)Pn=(yn=U[fr]).source,Ln=(En=yn.target).x+En.vx-Pn.x-Pn.vx||it(K),Zn=En.y+En.vy-Pn.y-Pn.vy||it(K),Ln*=Qn=((Qn=Math.sqrt(Ln*Ln+Zn*Zn))-L[fr])/Qn*Je*w[fr],Zn*=Qn,En.vx-=Ln*(qn=Rt[fr]),En.vy-=Zn*qn,Pn.vx+=Ln*(qn=1-qn),Pn.vy+=Zn*qn}function Xe(){if(J){var Je,Ge,qe=J.length,yn=U.length,Pn=new Map(J.map(function(En,Ln){return[Pt(En,Ln,J),En]}));for(Je=0,jt=new Array(qe);Je<yn;++Je)(Ge=U[Je]).index=Je,Sr(Ge.source)!=="object"&&(Ge.source=ti(Pn,Ge.source)),Sr(Ge.target)!=="object"&&(Ge.target=ti(Pn,Ge.target)),jt[Ge.source.index]=(jt[Ge.source.index]||0)+1,jt[Ge.target.index]=(jt[Ge.target.index]||0)+1;for(Je=0,Rt=new Array(yn);Je<yn;++Je)Ge=U[Je],Rt[Je]=jt[Ge.source.index]/(jt[Ge.source.index]+jt[Ge.target.index]);w=new Array(yn),Re(),L=new Array(yn),Ye()}}function Re(){if(J)for(var Je=0,Ge=U.length;Je<Ge;++Je)w[Je]=+Qt(U[Je],Je,U)}function Ye(){if(J)for(var Je=0,Ge=U.length;Je<Ge;++Je)L[Je]=+qt(U[Je],Je,U)}return U==null&&(U=[]),Ie.initialize=function(Je,Ge){J=Je,K=Ge,Xe()},Ie.links=function(Je){return arguments.length?(U=Je,Xe(),Ie):U},Ie.id=function(Je){return arguments.length?(Pt=Je,Ie):Pt},Ie.iterations=function(Je){return arguments.length?(xe=+Je,Ie):xe},Ie.strength=function(Je){return arguments.length?(Qt=typeof Je=="function"?Je:q(+Je),Re(),Ie):Qt},Ie.distance=function(Je){return arguments.length?(qt=typeof Je=="function"?Je:q(+Je),Ye(),Ie):qt},Ie};function Fi(Q){return Q.x+Q.vx}function to(Q){return Q.y+Q.vy}var si=function(U){var w,L,J,jt=1,Rt=1;function K(){for(var qt,xe,Ie,Xe,Re,Ye,Je,Ge=w.length,qe=0;qe<Rt;++qe)for(xe=h(w,Fi,to).visitAfter(Pt),qt=0;qt<Ge;++qt)Ie=w[qt],Ye=L[Ie.index],Je=Ye*Ye,Xe=Ie.x+Ie.vx,Re=Ie.y+Ie.vy,xe.visit(yn);function yn(Pn,En,Ln,Zn,Qn){var qn=Pn.data,fr=Pn.r,br=Ye+fr;if(!qn)return En>Xe+br||Zn<Xe-br||Ln>Re+br||Qn<Re-br;if(qn.index>Ie.index){var gr=Xe-qn.x-qn.vx,hr=Re-qn.y-qn.vy,Tr=gr*gr+hr*hr;Tr<br*br&&(gr===0&&(Tr+=(gr=it(J))*gr),hr===0&&(Tr+=(hr=it(J))*hr),Tr=(br-(Tr=Math.sqrt(Tr)))/Tr*jt,Ie.vx+=(gr*=Tr)*(br=(fr*=fr)/(Je+fr)),Ie.vy+=(hr*=Tr)*br,qn.vx-=gr*(br=1-br),qn.vy-=hr*br)}}}function Pt(qt){if(qt.data)return qt.r=L[qt.data.index];for(var xe=qt.r=0;xe<4;++xe)qt[xe]&&qt[xe].r>qt.r&&(qt.r=qt[xe].r)}function Qt(){if(w){var qt,xe,Ie=w.length;for(L=new Array(Ie),qt=0;qt<Ie;++qt)xe=w[qt],L[xe.index]=+U(xe,qt,w)}}return typeof U!="function"&&(U=q(U==null?1:+U)),K.initialize=function(qt,xe){w=qt,J=xe,Qt()},K.iterations=function(qt){return arguments.length?(Rt=+qt,K):Rt},K.strength=function(qt){return arguments.length?(jt=+qt,K):jt},K.radius=function(qt){return arguments.length?(U=typeof qt=="function"?qt:q(+qt),Qt(),K):U},K};function Ci(Q,U){return function(w){if(Array.isArray(w))return w}(Q)||function(w,L){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(w)))){var J=[],jt=!0,Rt=!1,K=void 0;try{for(var Pt,Qt=w[Symbol.iterator]();!(jt=(Pt=Qt.next()).done)&&(J.push(Pt.value),!L||J.length!==L);jt=!0);}catch(qt){Rt=!0,K=qt}finally{try{jt||Qt.return==null||Qt.return()}finally{if(Rt)throw K}}return J}}(Q,U)||function(w,L){if(!!w){if(typeof w=="string")return Ui(w,L);var J=Object.prototype.toString.call(w).slice(8,-1);if(J==="Object"&&w.constructor&&(J=w.constructor.name),J==="Map"||J==="Set")return Array.from(w);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return Ui(w,L)}}(Q,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ui(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}function Li(){function Q(Ln){return function(){return Ln}}var U,w=function(Zn){return Zn.cluster},L=Q(1),J=Q(-1),jt=Q(100),Rt=Q(.1),K=[0,0],Pt=[],Qt={},qt=[],xe=100,Ie=100,Xe={none:{x:0,y:0}},Re=[],Ye="force",Je=!0,Ge=.1;function qe(Ln){if(!Je)return qe;U.tick(),Pn();for(var Zn,Qn=0,qn=Pt.length,fr=Ln*Ge;Qn<qn;++Qn)(Zn=Pt[Qn]).vx+=(Xe[w(Zn)].x-Zn.x)*fr,Zn.vy+=(Xe[w(Zn)].y-Zn.y)*fr}function yn(){Pt&&function(){if(!(!Pt||!Pt.length)){if(w(Pt[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ln=(Qn=[],qn=[],fr={},br=[],Zn=function(gr){var hr={};return gr.forEach(function(Tr){var dr=w(Tr);hr[dr]||(hr[dr]={count:0,sumforceNodeSize:0})}),gr.forEach(function(Tr){var dr=w(Tr),Jr=L(Tr),qr=hr[dr];qr.count=qr.count+1,qr.sumforceNodeSize=qr.sumforceNodeSize+Math.PI*(Jr*Jr)*1.3,hr[dr]=qr}),hr}(Pt),br=function(gr){var hr={},Tr=[];return gr.forEach(function(dr){var Jr=function(wi){var Cr=w(Qt[wi.source]),pi=w(Qt[wi.target]);return Cr<=pi?"".concat(Cr,"~").concat(pi):"".concat(pi,"~").concat(Cr)}(dr),qr=0;hr[Jr]!==void 0&&(qr=hr[Jr]),qr+=1,hr[Jr]=qr}),Object.entries(hr).forEach(function(dr){var Jr=Ci(dr,2),qr=Jr[0],wi=Jr[1],Cr=qr.split("~")[0],pi=qr.split("~")[1];Cr!==void 0&&pi!==void 0&&Tr.push({source:Cr,target:pi,count:wi})}),Tr}(qt),Object.keys(Zn).forEach(function(gr,hr){var Tr=Zn[gr];Qn.push({id:gr,size:Tr.count,r:Math.sqrt(Tr.sumforceNodeSize/Math.PI)}),fr[gr]=hr}),br.forEach(function(gr){var hr=fr[gr.source],Tr=fr[gr.target];hr!==void 0&&Tr!==void 0&&qn.push({source:hr,target:Tr,count:gr.count})}),{nodes:Qn,links:qn}),Zn,Qn,qn,fr,br;U=nr(Ln.nodes).force("x",function(gr){var hr,Tr,dr,Jr=q(.1);function qr(Cr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vx+=(dr[Ei]-pi.x)*Tr[Ei]*Cr}function wi(){if(hr){var Cr,pi=hr.length;for(Tr=new Array(pi),dr=new Array(pi),Cr=0;Cr<pi;++Cr)Tr[Cr]=isNaN(dr[Cr]=+gr(hr[Cr],Cr,hr))?0:+Jr(hr[Cr],Cr,hr)}}return typeof gr!="function"&&(gr=q(gr==null?0:+gr)),qr.initialize=function(Cr){hr=Cr,wi()},qr.strength=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:q(+Cr),wi(),qr):Jr},qr.x=function(Cr){return arguments.length?(gr=typeof Cr=="function"?Cr:q(+Cr),wi(),qr):gr},qr}(xe).strength(.1)).force("y",function(gr){var hr,Tr,dr,Jr=q(.1);function qr(Cr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vy+=(dr[Ei]-pi.y)*Tr[Ei]*Cr}function wi(){if(hr){var Cr,pi=hr.length;for(Tr=new Array(pi),dr=new Array(pi),Cr=0;Cr<pi;++Cr)Tr[Cr]=isNaN(dr[Cr]=+gr(hr[Cr],Cr,hr))?0:+Jr(hr[Cr],Cr,hr)}}return typeof gr!="function"&&(gr=q(gr==null?0:+gr)),qr.initialize=function(Cr){hr=Cr,wi()},qr.strength=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:q(+Cr),wi(),qr):Jr},qr.y=function(Cr){return arguments.length?(gr=typeof Cr=="function"?Cr:q(+Cr),wi(),qr):gr},qr}(Ie).strength(.1)).force("collide",si(function(gr){return gr.r}).iterations(4)).force("charge",er().strength(J)).force("links",hi(Ln.nodes.length?Ln.links:[]).distance(jt).strength(Rt)),Re=U.nodes(),Pn()}}()}function Pn(){return Xe={none:{x:0,y:0}},Re.forEach(function(Ln){Xe[Ln.id]={x:Ln.x-K[0],y:Ln.y-K[1]}}),Xe}function En(Ln){Qt={},Ln.forEach(function(Zn){Qt[Zn.id]=Zn})}return qe.initialize=function(Ln){Pt=Ln,yn()},qe.template=function(Ln){return arguments.length?(Ye=Ln,yn(),qe):Ye},qe.groupBy=function(Ln){return arguments.length?typeof Ln=="string"?(w=function(Qn){return Qn[Ln]},qe):(w=Ln,qe):w},qe.enableGrouping=function(Ln){return arguments.length?(Je=Ln,qe):Je},qe.strength=function(Ln){return arguments.length?(Ge=Ln,qe):Ge},qe.centerX=function(Ln){return arguments.length?(xe=Ln,qe):xe},qe.centerY=function(Ln){return arguments.length?(Ie=Ln,qe):Ie},qe.nodes=function(Ln){return arguments.length?(En(Ln||[]),Pt=Ln||[],qe):Pt},qe.links=function(Ln){return arguments.length?(qt=Ln||[],yn(),qe):qt},qe.forceNodeSize=function(Ln){return arguments.length?(L=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):L},qe.nodeSize=qe.forceNodeSize,qe.forceCharge=function(Ln){return arguments.length?(J=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):J},qe.forceLinkDistance=function(Ln){return arguments.length?(jt=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):jt},qe.forceLinkStrength=function(Ln){return arguments.length?(Rt=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):Rt},qe.offset=function(Ln){return arguments.length?(K=Ln,qe):K},qe.getFocis=Pn,qe}var Vi="LAYOUT_RUN",ro="LAYOUT_END",jr="LAYOUT_ERROR",Ji="LAYOUT_TICK",pr="GPU_LAYOUT_RUN",Xr="GPU_LAYOUT_END";function Br(Q){return(Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Nr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Yr(Q,U){return(Yr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Kr(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=fi(Q);if(U){var J=fi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return ni(this,w)}}function ni(Q,U){return!U||Br(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function fi(Q){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var $r=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Yr(Rt,K)})(jt,Q);var U,w,L,J=Kr(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).center=[0,0],K.nodeStrength=null,K.edgeStrength=null,K.preventOverlap=!1,K.clusterNodeStrength=null,K.clusterEdgeStrength=null,K.clusterEdgeDistance=null,K.clusterNodeSize=null,K.clusterFociStrength=null,K.linkDistance=50,K.alphaDecay=.028,K.alphaMin=.001,K.alpha=.3,K.collideStrength=1,K.workerEnabled=!1,K.tick=function(){},K.onLayoutEnd=function(){},K.ticking=void 0,Rt&&K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(K){this.nodes=K.nodes||[];var Pt=K.edges||[];this.edges=Pt.map(function(Qt){var qt={},xe=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Qt).forEach(function(Ie){xe.indexOf(Ie)>-1||(qt[Ie]=Qt[Ie])}),qt}),this.ticking=!1}},{key:"execute",value:function(K){var Pt=this,Qt=Pt.nodes,qt=Pt.edges;if(!Pt.ticking){var xe=Pt.forceSimulation,Ie=Pt.alphaMin,Xe=Pt.alphaDecay,Re=Pt.alpha;if(xe){if(K){if(Pt.clustering&&Pt.clusterForce&&(Pt.clusterForce.nodes(Qt),Pt.clusterForce.links(qt)),xe.nodes(Qt),qt&&Pt.edgeForce)Pt.edgeForce.links(qt);else if(qt&&!Pt.edgeForce){var Ye=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&Ye.strength(Pt.edgeStrength),Pt.linkDistance&&Ye.distance(Pt.linkDistance),Pt.edgeForce=Ye,xe.force("link",Ye)}}Pt.preventOverlap&&Pt.overlapProcess(xe),xe.alpha(Re).restart(),this.ticking=!0}else try{var Je=er();if(Pt.nodeStrength&&Je.strength(Pt.nodeStrength),xe=nr().nodes(Qt),Pt.clustering){var Ge=Li();Ge.centerX(Pt.center[0]).centerY(Pt.center[1]).template("force").strength(Pt.clusterFociStrength),qt&&Ge.links(qt),Qt&&Ge.nodes(Qt),Ge.forceLinkDistance(Pt.clusterEdgeDistance).forceLinkStrength(Pt.clusterEdgeStrength).forceCharge(Pt.clusterNodeStrength).forceNodeSize(Pt.clusterNodeSize),Pt.clusterForce=Ge,xe.force("group",Ge)}if(xe.force("center",function(En,Ln){var Zn,Qn=1;function qn(){var fr,br,gr=Zn.length,hr=0,Tr=0;for(fr=0;fr<gr;++fr)hr+=(br=Zn[fr]).x,Tr+=br.y;for(hr=(hr/gr-En)*Qn,Tr=(Tr/gr-Ln)*Qn,fr=0;fr<gr;++fr)(br=Zn[fr]).x-=hr,br.y-=Tr}return En==null&&(En=0),Ln==null&&(Ln=0),qn.initialize=function(fr){Zn=fr},qn.x=function(fr){return arguments.length?(En=+fr,qn):En},qn.y=function(fr){return arguments.length?(Ln=+fr,qn):Ln},qn.strength=function(fr){return arguments.length?(Qn=+fr,qn):Qn},qn}(Pt.center[0],Pt.center[1])).force("charge",Je).alpha(Re).alphaDecay(Xe).alphaMin(Ie),Pt.preventOverlap&&Pt.overlapProcess(xe),qt){var qe=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&qe.strength(Pt.edgeStrength),Pt.linkDistance&&qe.distance(Pt.linkDistance),Pt.edgeForce=qe,xe.force("link",qe)}if(Pt.workerEnabled&&!ci()&&(Pt.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),Pt.workerEnabled){xe.stop();for(var yn=function(En){var Ln=En.alphaMin(),Zn=En.alphaTarget(),Qn=En.alpha(),qn=Math.log((Ln-Zn)/(Qn-Zn))/Math.log(1-En.alphaDecay());return Math.ceil(qn)}(xe),Pn=1;Pn<=yn;Pn++)xe.tick(),postMessage({nodes:Qt,currentTick:Pn,totalTicks:yn,type:Ji},void 0);Pt.ticking=!1}else xe.on("tick",function(){Pt.tick()}).on("end",function(){Pt.ticking=!1,Pt.onLayoutEnd&&Pt.onLayoutEnd()}),Pt.ticking=!0;Pt.forceSimulation=xe,Pt.ticking=!0}catch(En){Pt.ticking=!1,console.warn(En)}}}},{key:"overlapProcess",value:function(K){var Pt,Qt,qt=this.nodeSize,xe=this.nodeSpacing,Ie=this.collideStrength;if(Qt=M(xe)?function(){return xe}:C(xe)?xe:function(){return 0},qt)if(C(qt))Pt=function(Je){return qt(Je)+Qt(Je)};else if(l(qt)){var Xe=(qt[0]>qt[1]?qt[0]:qt[1])/2;Pt=function(Je){return Xe+Qt(Je)}}else if(M(qt)){var Re=qt/2;Pt=function(Je){return Re+Qt(Je)}}else Pt=function(){return 10};else Pt=function(Je){return Je.size?l(Je.size)?(Je.size[0]>Je.size[1]?Je.size[0]:Je.size[1])/2+Qt(Je):Je.size/2+Qt(Je):10+Qt(Je)};K.force("collisionForce",si(Pt).strength(Ie))}},{key:"updateCfg",value:function(K){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,K)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&Nr(U.prototype,w),L&&Nr(U,L),jt}(x);function ci(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Qr(Q){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function gi(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oi(Q,U){return(Oi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function bi(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Qi(Q);if(U){var J=Qi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zi(this,w)}}function zi(Q,U){return!U||Qr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Qi(Q){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function io(Q,U,w,L){Q.forEach(function(J,jt){Q[jt].children=[],Q[jt].parent=[]}),L?U.forEach(function(J){var jt=0;J.source&&(jt=w[J.source]);var Rt=0;J.target&&(Rt=w[J.target]);var K=Q[jt].children,Pt=Q[Rt].parent;K.push(Q[Rt].id),Pt.push(Q[jt].id)}):U.forEach(function(J){var jt=0;J.source&&(jt=w[J.source]);var Rt=0;J.target&&(Rt=w[J.target]);var K=Q[jt].children,Pt=Q[Rt].children;K.push(Q[Rt].id),Pt.push(Q[jt].id)})}function Wi(Q,U,w){for(var L=w.length,J=0;J<L;J++)if(Q.id===w[J].source&&U.id===w[J].target||U.id===w[J].source&&Q.id===w[J].target)return!0;return!1}function Zi(Q,U){var w=Q.degree,L=U.degree;return w<L?-1:w>L?1:0}var Pi=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Oi(Rt,K)})(jt,Q);var U,w,L,J=bi(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).radius=null,K.startRadius=null,K.endRadius=null,K.startAngle=0,K.endAngle=2*Math.PI,K.clockwise=!0,K.divisions=1,K.ordering=null,K.angleRatio=1,K.nodes=[],K.edges=[],K.nodeMap={},K.degrees=[],K.width=300,K.height=300,K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=K.length;if(Qt!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var qt=this.center;if(Qt===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.radius,Ie=this.startRadius,Xe=this.endRadius,Re=this.divisions,Ye=this.startAngle,Je=this.endAngle,Ge=(Je-Ye)/Qt,qe={};K.forEach(function(gr,hr){qe[gr.id]=hr}),this.nodeMap=qe;var yn=y(K.length,qe,Pt);this.degrees=yn,xe||Ie||Xe?!Ie&&Xe?Ie=Xe:Ie&&!Xe&&(Xe=Ie):xe=this.height>this.width?this.width/2:this.height/2;var Pn=Ge*this.angleRatio,En=this.ordering,Ln=[];Ln=En==="topology"?this.topologyOrdering():En==="topology-directed"?this.topologyOrdering(!0):En==="degree"?this.degreeOrdering():K;for(var Zn=this.clockwise,Qn=Math.ceil(Qt/Re),qn=0;qn<Qt;++qn){var fr=xe;fr||Ie===null||Xe===null||(fr=Ie+qn*(Xe-Ie)/(Qt-1)),fr||(fr=10+100*qn/(Qt-1));var br=Ye+qn%Qn*Pn+2*Math.PI/Re*Math.floor(qn/Qn);Zn||(br=Je-qn%Qn*Pn-2*Math.PI/Re*Math.floor(qn/Qn)),Ln[qn].x=qt[0]+Math.cos(br)*fr,Ln[qn].y=qt[1]+Math.sin(br)*fr,Ln[qn].weight=yn[qn]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:Ln,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var K=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Pt=this,Qt=Pt.degrees,qt=Pt.edges,xe=Pt.nodes,Ie=O(xe),Xe=Pt.nodeMap,Re=[Ie[0]],Ye=[xe[0]],Je=[],Ge=xe.length;Je[0]=!0,io(Ie,qt,Xe,K);var qe=0;return Ie.forEach(function(yn,Pn){if(Pn!==0)if(Pn!==Ge-1&&Qt[Pn]===Qt[Pn+1]&&!Wi(Re[qe],yn,qt)||Je[Pn]){for(var En=Re[qe].children,Ln=!1,Zn=0;Zn<En.length;Zn++){var Qn=Xe[En[Zn]];if(Qt[Qn]===Qt[Pn]&&!Je[Qn]){Re.push(Ie[Qn]),Ye.push(xe[Xe[Ie[Qn].id]]),Je[Qn]=!0,Ln=!0;break}}for(var qn=0;!Ln&&(Je[qn]||(Re.push(Ie[qn]),Ye.push(xe[Xe[Ie[qn].id]]),Je[qn]=!0,Ln=!0),++qn!==Ge););}else Re.push(yn),Ye.push(xe[Xe[yn.id]]),Je[Pn]=!0,qe++}),Ye}},{key:"degreeOrdering",value:function(){var K=this.nodes,Pt=[],Qt=this.degrees;return K.forEach(function(qt,xe){qt.degree=Qt[xe],Pt.push(qt)}),Pt.sort(Zi),Pt}},{key:"getType",value:function(){return"circular"}}])&&gi(U.prototype,w),L&&gi(U,L),jt}(x),no=e(153),Mo=e.n(no);function ao(Q){return(ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function uo(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function xo(Q,U){return(xo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function oe(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=te(Q);if(U){var J=te(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Kt(this,w)}}function Kt(Q,U){return!U||ao(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function te(Q){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Oe=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&xo(Rt,K)})(jt,Q);var U,w,L,J=oe(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).rankdir="TB",K.nodesep=50,K.ranksep=50,K.controlPoints=!1,K.sortByCombo=!1,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.nodeSize,qt=K.rankdir;if(Pt){var xe,Ie=K.edges||[],Xe=new Mo.a.graphlib.Graph;xe=Qt?l(Qt)?function(){return Qt}:function(){return[Qt,Qt]}:function(Ge){return Ge.size?l(Ge.size)?Ge.size:[Ge.size,Ge.size]:[40,40]};var Re,Ye=Qe(K.nodesepFunc,K.nodesep,50),Je=Qe(K.ranksepFunc,K.ranksep,50);return qt!=="LR"&&qt!=="RL"||(Ye=Qe(K.ranksepFunc,K.ranksep,50),Je=Qe(K.nodesepFunc,K.nodesep,50)),Xe.setDefaultEdgeLabel(function(){return{}}),Xe.setGraph(K),Pt.forEach(function(Ge){var qe=xe(Ge),yn=Je(Ge),Pn=Ye(Ge),En=qe[0]+2*Pn,Ln=qe[1]+2*yn;Xe.setNode(Ge.id,{width:En,height:Ln})}),Ie.forEach(function(Ge){Xe.setEdge(Ge.source,Ge.target,{weight:Ge.weight||1})}),Mo.a.layout(Xe),Xe.nodes().forEach(function(Ge){Re=Xe.node(Ge);var qe=Pt.findIndex(function(yn){return yn.id===Ge});Pt[qe].x=Re.x,Pt[qe].y=Re.y}),Xe.edges().forEach(function(Ge){Re=Xe.edge(Ge);var qe=Ie.findIndex(function(yn){return yn.source===Ge.v&&yn.target===Ge.w});K.controlPoints&&Ie[qe].type!=="loop"&&(Ie[qe].controlPoints=Re.points.slice(1,Re.points.length-1))}),K.sortByCombo&&K.sortLevel("comboId"),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Ie}}}},{key:"sortLevel",value:function(K){var Pt=this,Qt=Pt.nodes,qt={};Qt.forEach(function(xe){qt[xe.y]||(qt[xe.y]={y:xe.y,nodes:[]}),qt[xe.y].nodes.push(xe)}),Object.keys(qt).forEach(function(xe){var Ie=qt[xe].nodes,Xe=Ie.length,Re={};if(Ie.forEach(function(qe){var yn=qe.comboId;Re[yn]||(Re[yn]={x:0,y:0,count:0}),Re[yn].x+=qe.x,Re[yn].y+=qe.y,Re[yn].count++}),Object.keys(Re).forEach(function(qe){Re[qe].x/=Re[qe].count,Re[qe].y/=Re[qe].count}),Xe!==1){var Ye=Ie.sort(function(qe,yn){return qe.x-yn.x}),Je=Ye[0].x,Ge=(Ye[Xe-1].x-Je)/(Xe-1);Ie.sort(function(qe,yn){var Pn=qe[K]||"undefined",En=yn[K]||"undefined";return Pn<En?-1:Pn>En?1:0}).forEach(function(qe,yn){qe.x=Je+yn*Ge})}else Pt.onLayoutEnd&&Pt.onLayoutEnd()})}},{key:"getType",value:function(){return"dagre"}}])&&uo(U.prototype,w),L&&uo(U,L),jt}(x);function Qe(Q,U,w){return Q||(M(U)?function(){return U}:function(){return w})}var On=Object.prototype.toString;function Vn(Q){return On.call(Q).endsWith("Array]")}var Yn=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,jt=w.toIndex,Rt=jt===void 0?U.length:jt;if(J<0||J>=U.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Rt<=J||Rt>U.length||!Number.isInteger(Rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[J],Pt=J+1;Pt<Rt;Pt++)U[Pt]>K&&(K=U[Pt]);return K},$e=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,jt=w.toIndex,Rt=jt===void 0?U.length:jt;if(J<0||J>=U.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Rt<=J||Rt>U.length||!Number.isInteger(Rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[J],Pt=J+1;Pt<Rt;Pt++)U[Pt]<K&&(K=U[Pt]);return K},rn=function(U){var w,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");if(L.output!==void 0){if(!Vn(L.output))throw new TypeError("output option must be an array if specified");w=L.output}else w=new Array(U.length);var J=$e(U),jt=Yn(U);if(J===jt)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Rt=L.min,K=Rt===void 0?L.autoMinMax?J:0:Rt,Pt=L.max,Qt=Pt===void 0?L.autoMinMax?jt:1:Pt;if(K>=Qt)throw new RangeError("min option must be smaller than max option");for(var qt=(Qt-K)/(jt-J),xe=0;xe<U.length;xe++)w[xe]=(U[xe]-J)*qt+K;return w},on=" ".repeat(2),$n=" ".repeat(4);function vr(Q){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=U.maxRows,L=w===void 0?15:w,J=U.maxColumns,jt=J===void 0?10:J,Rt=U.maxNumSize,K=Rt===void 0?8:Rt;return"".concat(Q.constructor.name,` {
`).concat(on,`[
`).concat($n).concat(ar(Q,L,jt,K),`
`).concat(on,`]
`).concat(on,"rows: ").concat(Q.rows,`
`).concat(on,"columns: ").concat(Q.columns,`
}`)}function ar(Q,U,w,L){for(var J=Q.rows,jt=Q.columns,Rt=Math.min(J,U),K=Math.min(jt,w),Pt=[],Qt=0;Qt<Rt;Qt++){for(var qt=[],xe=0;xe<K;xe++)qt.push(rr(Q.get(Qt,xe),L));Pt.push("".concat(qt.join(" ")))}return K!==jt&&(Pt[Pt.length-1]+=" ... ".concat(jt-w," more columns")),Rt!==J&&Pt.push("... ".concat(J-U," more rows")),Pt.join(`
`.concat($n))}function rr(Q,U){var w=String(Q);if(w.length<=U)return w.padEnd(U," ");var L=Q.toPrecision(U-2);if(L.length<=U)return L;var J=Q.toExponential(U-2),jt=J.indexOf("e"),Rt=J.slice(jt);return J.slice(0,U-Rt.length)+Rt}function Fr(Q){return(Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Ar(Q,U,w){var L=w?Q.rows:Q.rows-1;if(U<0||U>L)throw new RangeError("Row index out of range")}function wr(Q,U,w){var L=w?Q.columns:Q.columns-1;if(U<0||U>L)throw new RangeError("Column index out of range")}function xr(Q,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Q.columns)throw new RangeError("vector size must be the same as the number of columns");return U}function Er(Q,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Q.rows)throw new RangeError("vector size must be the same as the number of rows");return U}function Ir(Q,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for row indices");if(U.some(function(w){return w<0||w>=Q.rows}))throw new RangeError("row indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Lr(Q,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for column indices");if(U.some(function(w){return w<0||w>=Q.columns}))throw new RangeError("column indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Pr(Q,U,w,L,J){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ri("startRow",U),ri("endRow",w),ri("startColumn",L),ri("endColumn",J),U>w||L>J||U<0||U>=Q.rows||w<0||w>=Q.rows||L<0||L>=Q.columns||J<0||J>=Q.columns)throw new RangeError("Submatrix indices are out of range")}function Dr(Q){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=[],L=0;L<Q;L++)w.push(U);return w}function ri(Q,U){if(typeof U!="number")throw new TypeError("".concat(Q," must be a number"))}function vi(Q){if(Q.isEmpty())throw new Error("Empty matrix has no elements to index")}function ii(Q,U,w){for(var L=Q.rows,J=Q.columns,jt=[],Rt=0;Rt<L;Rt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<J;qt++)K+=Qt=Q.get(Rt,qt)-w[Rt],Pt+=Qt*Qt;U?jt.push((Pt-K*K/J)/(J-1)):jt.push((Pt-K*K/J)/J)}return jt}function Si(Q,U,w){for(var L=Q.rows,J=Q.columns,jt=[],Rt=0;Rt<J;Rt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<L;qt++)K+=Qt=Q.get(qt,Rt)-w[Rt],Pt+=Qt*Qt;U?jt.push((Pt-K*K/L)/(L-1)):jt.push((Pt-K*K/L)/L)}return jt}function _i(Q,U,w){for(var L=Q.rows,J=Q.columns,jt=L*J,Rt=0,K=0,Pt=0,Qt=0;Qt<L;Qt++)for(var qt=0;qt<J;qt++)Rt+=Pt=Q.get(Qt,qt)-w,K+=Pt*Pt;return U?(K-Rt*Rt/jt)/(jt-1):(K-Rt*Rt/jt)/jt}function Xi(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U[w])}function Bi(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U[L])}function Di(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U)}function ve(Q){for(var U=[],w=0;w<Q.rows;w++){for(var L=0,J=0;J<Q.columns;J++)L+=Math.pow(Q.get(w,J),2)/(Q.columns-1);U.push(Math.sqrt(L))}return U}function G(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U[w])}function F(Q){for(var U=[],w=0;w<Q.columns;w++){for(var L=0,J=0;J<Q.rows;J++)L+=Math.pow(Q.get(J,w),2)/(Q.rows-1);U.push(Math.sqrt(L))}return U}function Z(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U[L])}function ut(Q){for(var U=Q.size-1,w=0,L=0;L<Q.columns;L++)for(var J=0;J<Q.rows;J++)w+=Math.pow(Q.get(J,L),2)/U;return Math.sqrt(w)}function Bt(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U)}function Jt(Q,U){return(Jt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function ie(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Te(Q);if(U){var J=Te(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return se(this,w)}}function se(Q,U){return!U||Ee(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Te(Q){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function Ee(Q){return(Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function un(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")}function xn(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function _t(Q,U,w){return U&&xn(Q.prototype,U),w&&xn(Q,w),Q}var Xt=function(){function Q(){un(this,Q)}return _t(Q,[{key:"apply",value:function(w){if(typeof w!="function")throw new TypeError("callback must be a function");for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.call(this,L,J);return this}},{key:"to1DArray",value:function(){for(var w=[],L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.push(this.get(L,J));return w}},{key:"to2DArray",value:function(){for(var w=[],L=0;L<this.rows;L++){w.push([]);for(var J=0;J<this.columns;J++)w[L].push(this.get(L,J))}return w}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var w=0;w<this.rows;w++)for(var L=0;L<=w;L++)if(this.get(w,L)!==this.get(L,w))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var w=0,L=0,J=-1,jt=!0,Rt=!1;w<this.rows&&jt;){for(L=0,Rt=!1;L<this.columns&&Rt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Rt=!0,J=L):(jt=!1,Rt=!0);w++}return jt}},{key:"isReducedEchelonForm",value:function(){for(var w=0,L=0,J=-1,jt=!0,Rt=!1;w<this.rows&&jt;){for(L=0,Rt=!1;L<this.columns&&Rt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Rt=!0,J=L):(jt=!1,Rt=!0);for(var K=L+1;K<this.rows;K++)this.get(w,K)!==0&&(jt=!1);w++}return jt}},{key:"echelonForm",value:function(){for(var w=this.clone(),L=0,J=0;L<w.rows&&J<w.columns;){for(var jt=L,Rt=L;Rt<w.rows;Rt++)w.get(Rt,J)>w.get(jt,J)&&(jt=Rt);if(w.get(jt,J)===0)J++;else{w.swapRows(L,jt);for(var K=w.get(L,J),Pt=J;Pt<w.columns;Pt++)w.set(L,Pt,w.get(L,Pt)/K);for(var Qt=L+1;Qt<w.rows;Qt++){var qt=w.get(Qt,J)/w.get(L,J);w.set(Qt,J,0);for(var xe=J+1;xe<w.columns;xe++)w.set(Qt,xe,w.get(Qt,xe)-w.get(L,xe)*qt)}L++,J++}}return w}},{key:"reducedEchelonForm",value:function(){for(var w=this.echelonForm(),L=w.columns,J=w.rows,jt=J-1;jt>=0;)if(w.maxRow(jt)===0)jt--;else{for(var Rt=0,K=!1;Rt<J&&K===!1;)w.get(jt,Rt)===1?K=!0:Rt++;for(var Pt=0;Pt<jt;Pt++)for(var Qt=w.get(Pt,Rt),qt=Rt;qt<L;qt++){var xe=w.get(Pt,qt)-Qt*w.get(jt,qt);w.set(Pt,qt,xe)}jt--}return w}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.rows,J=L===void 0?1:L,jt=w.columns,Rt=jt===void 0?1:jt;if(!Number.isInteger(J)||J<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Rt)||Rt<=0)throw new TypeError("columns must be a positive integer");for(var K=new vn(this.rows*J,this.columns*Rt),Pt=0;Pt<J;Pt++)for(var Qt=0;Qt<Rt;Qt++)K.setSubMatrix(this,this.rows*Pt,this.columns*Qt);return K}},{key:"fill",value:function(w){for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,w);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(w){Ar(this,w);for(var L=[],J=0;J<this.columns;J++)L.push(this.get(w,J));return L}},{key:"getRowVector",value:function(w){return vn.rowVector(this.getRow(w))}},{key:"setRow",value:function(w,L){Ar(this,w),L=xr(this,L);for(var J=0;J<this.columns;J++)this.set(w,J,L[J]);return this}},{key:"swapRows",value:function(w,L){Ar(this,w),Ar(this,L);for(var J=0;J<this.columns;J++){var jt=this.get(w,J);this.set(w,J,this.get(L,J)),this.set(L,J,jt)}return this}},{key:"getColumn",value:function(w){wr(this,w);for(var L=[],J=0;J<this.rows;J++)L.push(this.get(J,w));return L}},{key:"getColumnVector",value:function(w){return vn.columnVector(this.getColumn(w))}},{key:"setColumn",value:function(w,L){wr(this,w),L=Er(this,L);for(var J=0;J<this.rows;J++)this.set(J,w,L[J]);return this}},{key:"swapColumns",value:function(w,L){wr(this,w),wr(this,L);for(var J=0;J<this.rows;J++){var jt=this.get(J,w);this.set(J,w,this.get(J,L)),this.set(J,L,jt)}return this}},{key:"addRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[J]);return this}},{key:"subRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[J]);return this}},{key:"mulRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[J]);return this}},{key:"divRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[J]);return this}},{key:"addColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[L]);return this}},{key:"subColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[L]);return this}},{key:"mulColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[L]);return this}},{key:"divColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[L]);return this}},{key:"mulRow",value:function(w,L){Ar(this,w);for(var J=0;J<this.columns;J++)this.set(w,J,this.get(w,J)*L);return this}},{key:"mulColumn",value:function(w,L){wr(this,w);for(var J=0;J<this.rows;J++)this.set(J,w,this.get(J,w)*L);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)>w&&(w=this.get(L,J));return w}},{key:"maxIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var jt=0;jt<this.columns;jt++)this.get(J,jt)>w&&(w=this.get(J,jt),L[0]=J,L[1]=jt);return L}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)<w&&(w=this.get(L,J));return w}},{key:"minIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var jt=0;jt<this.columns;jt++)this.get(J,jt)<w&&(w=this.get(J,jt),L[0]=J,L[1]=jt);return L}},{key:"maxRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)>L&&(L=this.get(w,J));return L}},{key:"maxRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],jt=1;jt<this.columns;jt++)this.get(w,jt)>L&&(L=this.get(w,jt),J[1]=jt);return J}},{key:"minRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)<L&&(L=this.get(w,J));return L}},{key:"minRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],jt=1;jt<this.columns;jt++)this.get(w,jt)<L&&(L=this.get(w,jt),J[1]=jt);return J}},{key:"maxColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)>L&&(L=this.get(J,w));return L}},{key:"maxColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],jt=1;jt<this.rows;jt++)this.get(jt,w)>L&&(L=this.get(jt,w),J[0]=jt);return J}},{key:"minColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)<L&&(L=this.get(J,w));return L}},{key:"minColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],jt=1;jt<this.rows;jt++)this.get(jt,w)<L&&(L=this.get(jt,w),J[0]=jt);return J}},{key:"diag",value:function(){for(var w=Math.min(this.rows,this.columns),L=[],J=0;J<w;J++)L.push(this.get(J,J));return L}},{key:"norm",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",L=0;if(w==="max")return this.max();if(w==="frobenius"){for(var J=0;J<this.rows;J++)for(var jt=0;jt<this.columns;jt++)L+=this.get(J,jt)*this.get(J,jt);return Math.sqrt(L)}throw new RangeError("unknown norm type: ".concat(w))}},{key:"cumulativeSum",value:function(){for(var w=0,L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w+=this.get(L,J),this.set(L,J,w);return this}},{key:"dot",value:function(w){Q.isMatrix(w)&&(w=w.to1DArray());var L=this.to1DArray();if(L.length!==w.length)throw new RangeError("vectors do not have the same size");for(var J=0,jt=0;jt<L.length;jt++)J+=L[jt]*w[jt];return J}},{key:"mmul",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,jt=w.columns,Rt=new vn(L,jt),K=new Float64Array(J),Pt=0;Pt<jt;Pt++){for(var Qt=0;Qt<J;Qt++)K[Qt]=w.get(Qt,Pt);for(var qt=0;qt<L;qt++){for(var xe=0,Ie=0;Ie<J;Ie++)xe+=this.get(qt,Ie)*K[Ie];Rt.set(qt,Pt,xe)}}return Rt}},{key:"strassen2x2",value:function(w){w=vn.checkMatrix(w);var L=new vn(2,2),J=this.get(0,0),jt=w.get(0,0),Rt=this.get(0,1),K=w.get(0,1),Pt=this.get(1,0),Qt=w.get(1,0),qt=this.get(1,1),xe=w.get(1,1),Ie=(J+qt)*(jt+xe),Xe=(Pt+qt)*jt,Re=J*(K-xe),Ye=qt*(Qt-jt),Je=(J+Rt)*xe,Ge=Ie+Ye-Je+(Rt-qt)*(Qt+xe),qe=Re+Je,yn=Xe+Ye,Pn=Ie-Xe+Re+(Pt-J)*(jt+K);return L.set(0,0,Ge),L.set(0,1,qe),L.set(1,0,yn),L.set(1,1,Pn),L}},{key:"strassen3x3",value:function(w){w=vn.checkMatrix(w);var L=new vn(3,3),J=this.get(0,0),jt=this.get(0,1),Rt=this.get(0,2),K=this.get(1,0),Pt=this.get(1,1),Qt=this.get(1,2),qt=this.get(2,0),xe=this.get(2,1),Ie=this.get(2,2),Xe=w.get(0,0),Re=w.get(0,1),Ye=w.get(0,2),Je=w.get(1,0),Ge=w.get(1,1),qe=w.get(1,2),yn=w.get(2,0),Pn=w.get(2,1),En=w.get(2,2),Ln=(J-K)*(-Re+Ge),Zn=(-J+K+Pt)*(Xe-Re+Ge),Qn=(K+Pt)*(-Xe+Re),qn=J*Xe,fr=(-J+qt+xe)*(Xe-Ye+qe),br=(-J+qt)*(Ye-qe),gr=(qt+xe)*(-Xe+Ye),hr=(-Rt+xe+Ie)*(Ge+yn-Pn),Tr=(Rt-Ie)*(Ge-Pn),dr=Rt*yn,Jr=(xe+Ie)*(-yn+Pn),qr=(-Rt+Pt+Qt)*(qe+yn-En),wi=(Rt-Qt)*(qe-En),Cr=(Pt+Qt)*(-yn+En),pi=qn+dr+jt*Je,Ei=(J+jt+Rt-K-Pt-xe-Ie)*Ge+Zn+Qn+qn+hr+dr+Jr,ji=qn+fr+gr+(J+jt+Rt-Pt-Qt-qt-xe)*qe+dr+qr+Cr,Ao=Ln+Pt*(-Xe+Re+Je-Ge-qe-yn+En)+Zn+qn+dr+qr+wi,go=Ln+Zn+Qn+qn+Qt*Pn,Ii=dr+qr+wi+Cr+K*Ye,Gi=qn+fr+br+xe*(-Xe+Ye+Je-Ge-qe-yn+Pn)+hr+Tr+dr,Po=hr+Tr+dr+Jr+qt*Re,Fo=qn+fr+br+gr+Ie*En;return L.set(0,0,pi),L.set(0,1,Ei),L.set(0,2,ji),L.set(1,0,Ao),L.set(1,1,go),L.set(1,2,Ii),L.set(2,0,Gi),L.set(2,1,Po),L.set(2,2,Fo),L}},{key:"mmulStrassen",value:function(w){w=vn.checkMatrix(w);var L=this.clone(),J=L.rows,jt=L.columns,Rt=w.rows,K=w.columns;function Pt(xe,Ie,Xe){var Re=xe.rows,Ye=xe.columns;if(Re===Ie&&Ye===Xe)return xe;var Je=Q.zeros(Ie,Xe);return Je=Je.setSubMatrix(xe,0,0)}jt!==Rt&&console.warn("Multiplying ".concat(J," x ").concat(jt," and ").concat(Rt," x ").concat(K," matrix: dimensions do not match."));var Qt=Math.max(J,Rt),qt=Math.max(jt,K);return function xe(Ie,Xe,Re,Ye){if(Re<=512||Ye<=512)return Ie.mmul(Xe);Re%2==1&&Ye%2==1?(Ie=Pt(Ie,Re+1,Ye+1),Xe=Pt(Xe,Re+1,Ye+1)):Re%2==1?(Ie=Pt(Ie,Re+1,Ye),Xe=Pt(Xe,Re+1,Ye)):Ye%2==1&&(Ie=Pt(Ie,Re,Ye+1),Xe=Pt(Xe,Re,Ye+1));var Je=parseInt(Ie.rows/2,10),Ge=parseInt(Ie.columns/2,10),qe=Ie.subMatrix(0,Je-1,0,Ge-1),yn=Xe.subMatrix(0,Je-1,0,Ge-1),Pn=Ie.subMatrix(0,Je-1,Ge,Ie.columns-1),En=Xe.subMatrix(0,Je-1,Ge,Xe.columns-1),Ln=Ie.subMatrix(Je,Ie.rows-1,0,Ge-1),Zn=Xe.subMatrix(Je,Xe.rows-1,0,Ge-1),Qn=Ie.subMatrix(Je,Ie.rows-1,Ge,Ie.columns-1),qn=Xe.subMatrix(Je,Xe.rows-1,Ge,Xe.columns-1),fr=xe(Q.add(qe,Qn),Q.add(yn,qn),Je,Ge),br=xe(Q.add(Ln,Qn),yn,Je,Ge),gr=xe(qe,Q.sub(En,qn),Je,Ge),hr=xe(Qn,Q.sub(Zn,yn),Je,Ge),Tr=xe(Q.add(qe,Pn),qn,Je,Ge),dr=xe(Q.sub(Ln,qe),Q.add(yn,En),Je,Ge),Jr=xe(Q.sub(Pn,Qn),Q.add(Zn,qn),Je,Ge),qr=Q.add(fr,hr);qr.sub(Tr),qr.add(Jr);var wi=Q.add(gr,Tr),Cr=Q.add(br,hr),pi=Q.sub(fr,br);pi.add(gr),pi.add(dr);var Ei=Q.zeros(2*qr.rows,2*qr.columns);return(Ei=(Ei=(Ei=(Ei=Ei.setSubMatrix(qr,0,0)).setSubMatrix(wi,qr.rows,0)).setSubMatrix(Cr,0,qr.columns)).setSubMatrix(pi,qr.rows,qr.columns)).subMatrix(0,Re-1,0,Ye-1)}(L=Pt(L,Qt,qt),w=Pt(w,Qt,qt),Qt,qt)}},{key:"scaleRows",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,jt=w.max,Rt=jt===void 0?1:jt;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Rt))throw new TypeError("max must be a number");if(J>=Rt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.rows;Pt++){var Qt=this.getRow(Pt);Qt.length>0&&rn(Qt,{min:J,max:Rt,output:Qt}),K.setRow(Pt,Qt)}return K}},{key:"scaleColumns",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,jt=w.max,Rt=jt===void 0?1:jt;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Rt))throw new TypeError("max must be a number");if(J>=Rt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.columns;Pt++){var Qt=this.getColumn(Pt);Qt.length&&rn(Qt,{min:J,max:Rt,output:Qt}),K.setColumn(Pt,Qt)}return K}},{key:"flipRows",value:function(){for(var w=Math.ceil(this.columns/2),L=0;L<this.rows;L++)for(var J=0;J<w;J++){var jt=this.get(L,J),Rt=this.get(L,this.columns-1-J);this.set(L,J,Rt),this.set(L,this.columns-1-J,jt)}return this}},{key:"flipColumns",value:function(){for(var w=Math.ceil(this.rows/2),L=0;L<this.columns;L++)for(var J=0;J<w;J++){var jt=this.get(J,L),Rt=this.get(this.rows-1-J,L);this.set(J,L,Rt),this.set(this.rows-1-J,L,jt)}return this}},{key:"kroneckerProduct",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,jt=w.rows,Rt=w.columns,K=new vn(L*jt,J*Rt),Pt=0;Pt<L;Pt++)for(var Qt=0;Qt<J;Qt++)for(var qt=0;qt<jt;qt++)for(var xe=0;xe<Rt;xe++)K.set(jt*Pt+qt,Rt*Qt+xe,this.get(Pt,Qt)*w.get(qt,xe));return K}},{key:"transpose",value:function(){for(var w=new vn(this.columns,this.rows),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(J,L,this.get(L,J));return w}},{key:"sortRows",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.rows;L++)this.setRow(L,this.getRow(L).sort(w));return this}},{key:"sortColumns",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.columns;L++)this.setColumn(L,this.getColumn(L).sort(w));return this}},{key:"subMatrix",value:function(w,L,J,jt){Pr(this,w,L,J,jt);for(var Rt=new vn(L-w+1,jt-J+1),K=w;K<=L;K++)for(var Pt=J;Pt<=jt;Pt++)Rt.set(K-w,Pt-J,this.get(K,Pt));return Rt}},{key:"subMatrixRow",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.columns-1),L>J||L<0||L>=this.columns||J<0||J>=this.columns)throw new RangeError("Argument out of range");for(var jt=new vn(w.length,J-L+1),Rt=0;Rt<w.length;Rt++)for(var K=L;K<=J;K++){if(w[Rt]<0||w[Rt]>=this.rows)throw new RangeError("Row index out of range: ".concat(w[Rt]));jt.set(Rt,K-L,this.get(w[Rt],K))}return jt}},{key:"subMatrixColumn",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.rows-1),L>J||L<0||L>=this.rows||J<0||J>=this.rows)throw new RangeError("Argument out of range");for(var jt=new vn(J-L+1,w.length),Rt=0;Rt<w.length;Rt++)for(var K=L;K<=J;K++){if(w[Rt]<0||w[Rt]>=this.columns)throw new RangeError("Column index out of range: ".concat(w[Rt]));jt.set(K-L,Rt,this.get(K,w[Rt]))}return jt}},{key:"setSubMatrix",value:function(w,L,J){if((w=vn.checkMatrix(w)).isEmpty())return this;Pr(this,L,L+w.rows-1,J,J+w.columns-1);for(var jt=0;jt<w.rows;jt++)for(var Rt=0;Rt<w.columns;Rt++)this.set(L+jt,J+Rt,w.get(jt,Rt));return this}},{key:"selection",value:function(w,L){for(var J=function(qt,xe,Ie){return{row:Ir(qt,xe),column:Lr(qt,Ie)}}(this,w,L),jt=new vn(w.length,L.length),Rt=0;Rt<J.row.length;Rt++)for(var K=J.row[Rt],Pt=0;Pt<J.column.length;Pt++){var Qt=J.column[Pt];jt.set(Rt,Pt,this.get(K,Qt))}return jt}},{key:"trace",value:function(){for(var w=Math.min(this.rows,this.columns),L=0,J=0;J<w;J++)L+=this.get(J,J);return L}},{key:"clone",value:function(){for(var w=new vn(this.rows,this.columns),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(L,J,this.get(L,J));return w}},{key:"sum",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows),jt=0;jt<L.rows;++jt)for(var Rt=0;Rt<L.columns;++Rt)J[jt]+=L.get(jt,Rt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns),jt=0;jt<L.rows;++jt)for(var Rt=0;Rt<L.columns;++Rt)J[Rt]+=L.get(jt,Rt);return J}(this);case void 0:return function(L){for(var J=0,jt=0;jt<L.rows;jt++)for(var Rt=0;Rt<L.columns;Rt++)J+=L.get(jt,Rt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"product",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows,1),jt=0;jt<L.rows;++jt)for(var Rt=0;Rt<L.columns;++Rt)J[jt]*=L.get(jt,Rt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns,1),jt=0;jt<L.rows;++jt)for(var Rt=0;Rt<L.columns;++Rt)J[Rt]*=L.get(jt,Rt);return J}(this);case void 0:return function(L){for(var J=1,jt=0;jt<L.rows;jt++)for(var Rt=0;Rt<L.columns;Rt++)J*=L.get(jt,Rt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"mean",value:function(w){var L=this.sum(w);switch(w){case"row":for(var J=0;J<this.rows;J++)L[J]/=this.columns;return L;case"column":for(var jt=0;jt<this.columns;jt++)L[jt]/=this.rows;return L;case void 0:return L/this.size;default:throw new Error("invalid option: ".concat(w))}}},{key:"variance",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,jt=J.unbiased,Rt=jt===void 0||jt,K=J.mean,Pt=K===void 0?this.mean(w):K;if(typeof Rt!="boolean")throw new TypeError("unbiased must be a boolean");switch(w){case"row":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return ii(this,Rt,Pt);case"column":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return Si(this,Rt,Pt);case void 0:if(typeof Pt!="number")throw new TypeError("mean must be a number");return _i(this,Rt,Pt);default:throw new Error("invalid option: ".concat(w))}}},{key:"standardDeviation",value:function(w,L){Ee(w)==="object"&&(L=w,w=void 0);var J=this.variance(w,L);if(w===void 0)return Math.sqrt(J);for(var jt=0;jt<J.length;jt++)J[jt]=Math.sqrt(J[jt]);return J}},{key:"center",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,jt=J.center,Rt=jt===void 0?this.mean(w):jt;switch(w){case"row":if(!Array.isArray(Rt))throw new TypeError("center must be an array");return Xi(this,Rt),this;case"column":if(!Array.isArray(Rt))throw new TypeError("center must be an array");return Bi(this,Rt),this;case void 0:if(typeof Rt!="number")throw new TypeError("center must be a number");return Di(this,Rt),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"scale",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L.scale;switch(w){case"row":if(J===void 0)J=ve(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return G(this,J),this;case"column":if(J===void 0)J=F(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return Z(this,J),this;case void 0:if(J===void 0)J=ut(this);else if(typeof J!="number")throw new TypeError("scale must be a number");return Bt(this,J),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"toString",value:function(w){return vr(this,w)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(w,L,J){if(w*L!==J.length)throw new RangeError("data length does not match given dimensions");for(var jt=new vn(w,L),Rt=0;Rt<w;Rt++)for(var K=0;K<L;K++)jt.set(Rt,K,J[Rt*L+K]);return jt}},{key:"rowVector",value:function(w){for(var L=new vn(1,w.length),J=0;J<w.length;J++)L.set(0,J,w[J]);return L}},{key:"columnVector",value:function(w){for(var L=new vn(w.length,1),J=0;J<w.length;J++)L.set(J,0,w[J]);return L}},{key:"zeros",value:function(w,L){return new vn(w,L)}},{key:"ones",value:function(w,L){return new vn(w,L).fill(1)}},{key:"rand",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");for(var jt=J.random,Rt=jt===void 0?Math.random:jt,K=new vn(w,L),Pt=0;Pt<w;Pt++)for(var Qt=0;Qt<L;Qt++)K.set(Pt,Qt,Rt());return K}},{key:"randInt",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");var jt=J.min,Rt=jt===void 0?0:jt,K=J.max,Pt=K===void 0?1e3:K,Qt=J.random,qt=Qt===void 0?Math.random:Qt;if(!Number.isInteger(Rt))throw new TypeError("min must be an integer");if(!Number.isInteger(Pt))throw new TypeError("max must be an integer");if(Rt>=Pt)throw new RangeError("min must be smaller than max");for(var xe=Pt-Rt,Ie=new vn(w,L),Xe=0;Xe<w;Xe++)for(var Re=0;Re<L;Re++){var Ye=Rt+Math.round(qt()*xe);Ie.set(Xe,Re,Ye)}return Ie}},{key:"eye",value:function(w,L,J){L===void 0&&(L=w),J===void 0&&(J=1);for(var jt=Math.min(w,L),Rt=this.zeros(w,L),K=0;K<jt;K++)Rt.set(K,K,J);return Rt}},{key:"diag",value:function(w,L,J){var jt=w.length;L===void 0&&(L=jt),J===void 0&&(J=L);for(var Rt=Math.min(jt,L,J),K=this.zeros(L,J),Pt=0;Pt<Rt;Pt++)K.set(Pt,Pt,w[Pt]);return K}},{key:"min",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,jt=w.columns,Rt=new vn(J,jt),K=0;K<J;K++)for(var Pt=0;Pt<jt;Pt++)Rt.set(K,Pt,Math.min(w.get(K,Pt),L.get(K,Pt)));return Rt}},{key:"max",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,jt=w.columns,Rt=new this(J,jt),K=0;K<J;K++)for(var Pt=0;Pt<jt;Pt++)Rt.set(K,Pt,Math.max(w.get(K,Pt),L.get(K,Pt)));return Rt}},{key:"checkMatrix",value:function(w){return Q.isMatrix(w)?w:new vn(w)}},{key:"isMatrix",value:function(w){return w!=null&&w.klass==="Matrix"}}]),Q}();function Se(Q,U){return Q-U}Xt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return vr(this)}),Xt.random=Xt.rand,Xt.randomInt=Xt.randInt,Xt.diagonal=Xt.diag,Xt.prototype.diagonal=Xt.prototype.diag,Xt.identity=Xt.eye,Xt.prototype.negate=Xt.prototype.neg,Xt.prototype.tensorProduct=Xt.prototype.kroneckerProduct;var Wt,ue,vn=function(Q){(function(L,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(J&&J.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),J&&Jt(L,J)})(w,Q);var U=ie(w);function w(L,J){var jt;if(un(this,w),jt=U.call(this),w.isMatrix(L))return se(jt,L.clone());if(Number.isInteger(L)&&L>=0){if(jt.data=[],!(Number.isInteger(J)&&J>=0))throw new TypeError("nColumns must be a positive integer");for(var Rt=0;Rt<L;Rt++)jt.data.push(new Float64Array(J))}else{if(!Array.isArray(L))throw new TypeError("First argument must be a positive number or an array");var K=L;if(typeof(J=(L=K.length)?K[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");jt.data=[];for(var Pt=0;Pt<L;Pt++){if(K[Pt].length!==J)throw new RangeError("Inconsistent array dimensions");jt.data.push(Float64Array.from(K[Pt]))}}return jt.rows=L,jt.columns=J,jt}return _t(w,[{key:"set",value:function(J,jt,Rt){return this.data[J][jt]=Rt,this}},{key:"get",value:function(J,jt){return this.data[J][jt]}},{key:"removeRow",value:function(J){return Ar(this,J),this.data.splice(J,1),this.rows-=1,this}},{key:"addRow",value:function(J,jt){return jt===void 0&&(jt=J,J=this.rows),Ar(this,J,!0),jt=Float64Array.from(xr(this,jt)),this.data.splice(J,0,jt),this.rows+=1,this}},{key:"removeColumn",value:function(J){wr(this,J);for(var jt=0;jt<this.rows;jt++){for(var Rt=new Float64Array(this.columns-1),K=0;K<J;K++)Rt[K]=this.data[jt][K];for(var Pt=J+1;Pt<this.columns;Pt++)Rt[Pt-1]=this.data[jt][Pt];this.data[jt]=Rt}return this.columns-=1,this}},{key:"addColumn",value:function(J,jt){jt===void 0&&(jt=J,J=this.columns),wr(this,J,!0),jt=Er(this,jt);for(var Rt=0;Rt<this.rows;Rt++){for(var K=new Float64Array(this.columns+1),Pt=0;Pt<J;Pt++)K[Pt]=this.data[Rt][Pt];for(K[Pt++]=jt[Rt];Pt<this.columns+1;Pt++)K[Pt]=this.data[Rt][Pt-1];this.data[Rt]=K}return this.columns+=1,this}}]),w}(Xt);function Dn(Q){return(Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function zn(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Un(Q,U){return(Un=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Ze(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=R(Q);if(U){var J=R(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ce(this,w)}}function Ce(Q,U){return!U||Dn(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function R(Q){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}ue=vn,(Wt=Xt).prototype.add=function(Q){return typeof Q=="number"?this.addS(Q):this.addM(Q)},Wt.prototype.addS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Q);return this},Wt.prototype.addM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Q.get(U,w));return this},Wt.add=function(Q,U){return new ue(Q).add(U)},Wt.prototype.sub=function(Q){return typeof Q=="number"?this.subS(Q):this.subM(Q)},Wt.prototype.subS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Q);return this},Wt.prototype.subM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Q.get(U,w));return this},Wt.sub=function(Q,U){return new ue(Q).sub(U)},Wt.prototype.subtract=Wt.prototype.sub,Wt.prototype.subtractS=Wt.prototype.subS,Wt.prototype.subtractM=Wt.prototype.subM,Wt.subtract=Wt.sub,Wt.prototype.mul=function(Q){return typeof Q=="number"?this.mulS(Q):this.mulM(Q)},Wt.prototype.mulS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Q);return this},Wt.prototype.mulM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Q.get(U,w));return this},Wt.mul=function(Q,U){return new ue(Q).mul(U)},Wt.prototype.multiply=Wt.prototype.mul,Wt.prototype.multiplyS=Wt.prototype.mulS,Wt.prototype.multiplyM=Wt.prototype.mulM,Wt.multiply=Wt.mul,Wt.prototype.div=function(Q){return typeof Q=="number"?this.divS(Q):this.divM(Q)},Wt.prototype.divS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Q);return this},Wt.prototype.divM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Q.get(U,w));return this},Wt.div=function(Q,U){return new ue(Q).div(U)},Wt.prototype.divide=Wt.prototype.div,Wt.prototype.divideS=Wt.prototype.divS,Wt.prototype.divideM=Wt.prototype.divM,Wt.divide=Wt.div,Wt.prototype.mod=function(Q){return typeof Q=="number"?this.modS(Q):this.modM(Q)},Wt.prototype.modS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Q);return this},Wt.prototype.modM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Q.get(U,w));return this},Wt.mod=function(Q,U){return new ue(Q).mod(U)},Wt.prototype.modulus=Wt.prototype.mod,Wt.prototype.modulusS=Wt.prototype.modS,Wt.prototype.modulusM=Wt.prototype.modM,Wt.modulus=Wt.mod,Wt.prototype.and=function(Q){return typeof Q=="number"?this.andS(Q):this.andM(Q)},Wt.prototype.andS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Q);return this},Wt.prototype.andM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Q.get(U,w));return this},Wt.and=function(Q,U){return new ue(Q).and(U)},Wt.prototype.or=function(Q){return typeof Q=="number"?this.orS(Q):this.orM(Q)},Wt.prototype.orS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Q);return this},Wt.prototype.orM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Q.get(U,w));return this},Wt.or=function(Q,U){return new ue(Q).or(U)},Wt.prototype.xor=function(Q){return typeof Q=="number"?this.xorS(Q):this.xorM(Q)},Wt.prototype.xorS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Q);return this},Wt.prototype.xorM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Q.get(U,w));return this},Wt.xor=function(Q,U){return new ue(Q).xor(U)},Wt.prototype.leftShift=function(Q){return typeof Q=="number"?this.leftShiftS(Q):this.leftShiftM(Q)},Wt.prototype.leftShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Q);return this},Wt.prototype.leftShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Q.get(U,w));return this},Wt.leftShift=function(Q,U){return new ue(Q).leftShift(U)},Wt.prototype.signPropagatingRightShift=function(Q){return typeof Q=="number"?this.signPropagatingRightShiftS(Q):this.signPropagatingRightShiftM(Q)},Wt.prototype.signPropagatingRightShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Q);return this},Wt.prototype.signPropagatingRightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Q.get(U,w));return this},Wt.signPropagatingRightShift=function(Q,U){return new ue(Q).signPropagatingRightShift(U)},Wt.prototype.rightShift=function(Q){return typeof Q=="number"?this.rightShiftS(Q):this.rightShiftM(Q)},Wt.prototype.rightShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Q);return this},Wt.prototype.rightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Q.get(U,w));return this},Wt.rightShift=function(Q,U){return new ue(Q).rightShift(U)},Wt.prototype.zeroFillRightShift=Wt.prototype.rightShift,Wt.prototype.zeroFillRightShiftS=Wt.prototype.rightShiftS,Wt.prototype.zeroFillRightShiftM=Wt.prototype.rightShiftM,Wt.zeroFillRightShift=Wt.rightShift,Wt.prototype.not=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,~this.get(Q,U));return this},Wt.not=function(Q){return new ue(Q).not()},Wt.prototype.abs=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.abs(this.get(Q,U)));return this},Wt.abs=function(Q){return new ue(Q).abs()},Wt.prototype.acos=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.acos(this.get(Q,U)));return this},Wt.acos=function(Q){return new ue(Q).acos()},Wt.prototype.acosh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.acosh(this.get(Q,U)));return this},Wt.acosh=function(Q){return new ue(Q).acosh()},Wt.prototype.asin=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.asin(this.get(Q,U)));return this},Wt.asin=function(Q){return new ue(Q).asin()},Wt.prototype.asinh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.asinh(this.get(Q,U)));return this},Wt.asinh=function(Q){return new ue(Q).asinh()},Wt.prototype.atan=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.atan(this.get(Q,U)));return this},Wt.atan=function(Q){return new ue(Q).atan()},Wt.prototype.atanh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.atanh(this.get(Q,U)));return this},Wt.atanh=function(Q){return new ue(Q).atanh()},Wt.prototype.cbrt=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cbrt(this.get(Q,U)));return this},Wt.cbrt=function(Q){return new ue(Q).cbrt()},Wt.prototype.ceil=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.ceil(this.get(Q,U)));return this},Wt.ceil=function(Q){return new ue(Q).ceil()},Wt.prototype.clz32=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.clz32(this.get(Q,U)));return this},Wt.clz32=function(Q){return new ue(Q).clz32()},Wt.prototype.cos=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cos(this.get(Q,U)));return this},Wt.cos=function(Q){return new ue(Q).cos()},Wt.prototype.cosh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cosh(this.get(Q,U)));return this},Wt.cosh=function(Q){return new ue(Q).cosh()},Wt.prototype.exp=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.exp(this.get(Q,U)));return this},Wt.exp=function(Q){return new ue(Q).exp()},Wt.prototype.expm1=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.expm1(this.get(Q,U)));return this},Wt.expm1=function(Q){return new ue(Q).expm1()},Wt.prototype.floor=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.floor(this.get(Q,U)));return this},Wt.floor=function(Q){return new ue(Q).floor()},Wt.prototype.fround=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.fround(this.get(Q,U)));return this},Wt.fround=function(Q){return new ue(Q).fround()},Wt.prototype.log=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log(this.get(Q,U)));return this},Wt.log=function(Q){return new ue(Q).log()},Wt.prototype.log1p=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log1p(this.get(Q,U)));return this},Wt.log1p=function(Q){return new ue(Q).log1p()},Wt.prototype.log10=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log10(this.get(Q,U)));return this},Wt.log10=function(Q){return new ue(Q).log10()},Wt.prototype.log2=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log2(this.get(Q,U)));return this},Wt.log2=function(Q){return new ue(Q).log2()},Wt.prototype.round=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.round(this.get(Q,U)));return this},Wt.round=function(Q){return new ue(Q).round()},Wt.prototype.sign=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sign(this.get(Q,U)));return this},Wt.sign=function(Q){return new ue(Q).sign()},Wt.prototype.sin=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sin(this.get(Q,U)));return this},Wt.sin=function(Q){return new ue(Q).sin()},Wt.prototype.sinh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sinh(this.get(Q,U)));return this},Wt.sinh=function(Q){return new ue(Q).sinh()},Wt.prototype.sqrt=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sqrt(this.get(Q,U)));return this},Wt.sqrt=function(Q){return new ue(Q).sqrt()},Wt.prototype.tan=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.tan(this.get(Q,U)));return this},Wt.tan=function(Q){return new ue(Q).tan()},Wt.prototype.tanh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.tanh(this.get(Q,U)));return this},Wt.tanh=function(Q){return new ue(Q).tanh()},Wt.prototype.trunc=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.trunc(this.get(Q,U)));return this},Wt.trunc=function(Q){return new ue(Q).trunc()},Wt.pow=function(Q,U){return new ue(Q).pow(U)},Wt.prototype.pow=function(Q){return typeof Q=="number"?this.powS(Q):this.powM(Q)},Wt.prototype.powS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Q));return this},Wt.prototype.powM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Q.get(U,w)));return this};var xt=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Un(Rt,K)})(jt,Q);var U,w,L,J=Ze(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).data=Rt,K.rows=Rt.length,K.columns=Rt[0].length,K}return U=jt,(w=[{key:"set",value:function(K,Pt,Qt){return this.data[K][Pt]=Qt,this}},{key:"get",value:function(K,Pt){return this.data[K][Pt]}}])&&zn(U.prototype,w),L&&zn(U,L),jt}(Xt);function $t(Q,U){var w=0;return Math.abs(Q)>Math.abs(U)?(w=U/Q,Math.abs(Q)*Math.sqrt(1+w*w)):U!==0?(w=Q/U,Math.abs(U)*Math.sqrt(1+w*w)):0}function me(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")}function Zt(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var de=function(){function Q(J){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me(this,Q),(J=xt.checkMatrix(J)).isEmpty())throw new Error("Matrix must be non-empty");var Rt,K=J.rows,Pt=J.columns,Qt=jt.computeLeftSingularVectors,qt=Qt===void 0||Qt,xe=jt.computeRightSingularVectors,Ie=xe===void 0||xe,Xe=jt.autoTranspose,Re=Xe!==void 0&&Xe,Ye=Boolean(qt),Je=Boolean(Ie),Ge=!1;if(K<Pt)if(Re){K=(Rt=J.transpose()).rows,Pt=Rt.columns,Ge=!0;var qe=Ye;Ye=Je,Je=qe}else Rt=J.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Rt=J.clone();for(var yn=Math.min(K,Pt),Pn=Math.min(K+1,Pt),En=new Float64Array(Pn),Ln=new vn(K,yn),Zn=new vn(Pt,Pt),Qn=new Float64Array(Pt),qn=new Float64Array(K),fr=new Float64Array(Pn),br=0;br<Pn;br++)fr[br]=br;for(var gr=Math.min(K-1,Pt),hr=Math.max(0,Math.min(Pt-2,K)),Tr=Math.max(gr,hr),dr=0;dr<Tr;dr++){if(dr<gr){En[dr]=0;for(var Jr=dr;Jr<K;Jr++)En[dr]=$t(En[dr],Rt.get(Jr,dr));if(En[dr]!==0){Rt.get(dr,dr)<0&&(En[dr]=-En[dr]);for(var qr=dr;qr<K;qr++)Rt.set(qr,dr,Rt.get(qr,dr)/En[dr]);Rt.set(dr,dr,Rt.get(dr,dr)+1)}En[dr]=-En[dr]}for(var wi=dr+1;wi<Pt;wi++){if(dr<gr&&En[dr]!==0){for(var Cr=0,pi=dr;pi<K;pi++)Cr+=Rt.get(pi,dr)*Rt.get(pi,wi);Cr=-Cr/Rt.get(dr,dr);for(var Ei=dr;Ei<K;Ei++)Rt.set(Ei,wi,Rt.get(Ei,wi)+Cr*Rt.get(Ei,dr))}Qn[wi]=Rt.get(dr,wi)}if(Ye&&dr<gr)for(var ji=dr;ji<K;ji++)Ln.set(ji,dr,Rt.get(ji,dr));if(dr<hr){Qn[dr]=0;for(var Ao=dr+1;Ao<Pt;Ao++)Qn[dr]=$t(Qn[dr],Qn[Ao]);if(Qn[dr]!==0){Qn[dr+1]<0&&(Qn[dr]=0-Qn[dr]);for(var go=dr+1;go<Pt;go++)Qn[go]/=Qn[dr];Qn[dr+1]+=1}if(Qn[dr]=-Qn[dr],dr+1<K&&Qn[dr]!==0){for(var Ii=dr+1;Ii<K;Ii++)qn[Ii]=0;for(var Gi=dr+1;Gi<K;Gi++)for(var Po=dr+1;Po<Pt;Po++)qn[Gi]+=Qn[Po]*Rt.get(Gi,Po);for(var Fo=dr+1;Fo<Pt;Fo++)for(var Ra=-Qn[Fo]/Qn[dr+1],pa=dr+1;pa<K;pa++)Rt.set(pa,Fo,Rt.get(pa,Fo)+Ra*qn[pa])}if(Je)for(var qa=dr+1;qa<Pt;qa++)Zn.set(qa,dr,Qn[qa])}}var To=Math.min(Pt,K+1);if(gr<Pt&&(En[gr]=Rt.get(gr,gr)),K<To&&(En[To-1]=0),hr+1<To&&(Qn[hr]=Rt.get(hr,To-1)),Qn[To-1]=0,Ye){for(var Lc=gr;Lc<yn;Lc++){for(var yd=0;yd<K;yd++)Ln.set(yd,Lc,0);Ln.set(Lc,Lc,1)}for(var Lo=gr-1;Lo>=0;Lo--)if(En[Lo]!==0){for(var Bc=Lo+1;Bc<yn;Bc++){for(var lh=0,fh=Lo;fh<K;fh++)lh+=Ln.get(fh,Lo)*Ln.get(fh,Bc);lh=-lh/Ln.get(Lo,Lo);for(var Fc=Lo;Fc<K;Fc++)Ln.set(Fc,Bc,Ln.get(Fc,Bc)+lh*Ln.get(Fc,Lo))}for(var hh=Lo;hh<K;hh++)Ln.set(hh,Lo,-Ln.get(hh,Lo));Ln.set(Lo,Lo,1+Ln.get(Lo,Lo));for(var md=0;md<Lo-1;md++)Ln.set(md,Lo,0)}else{for(var bd=0;bd<K;bd++)Ln.set(bd,Lo,0);Ln.set(Lo,Lo,1)}}if(Je)for(var aa=Pt-1;aa>=0;aa--){if(aa<hr&&Qn[aa]!==0)for(var Gc=aa+1;Gc<Pt;Gc++){for(var dh=0,vh=aa+1;vh<Pt;vh++)dh+=Zn.get(vh,aa)*Zn.get(vh,Gc);dh=-dh/Zn.get(aa+1,aa);for(var Uc=aa+1;Uc<Pt;Uc++)Zn.set(Uc,Gc,Zn.get(Uc,Gc)+dh*Zn.get(Uc,aa))}for(var xd=0;xd<Pt;xd++)Zn.set(xd,aa,0);Zn.set(aa,aa,1)}for(var Id=To-1,Pd=Number.EPSILON;To>0;){var Ni=void 0,_c=void 0;for(Ni=To-2;Ni>=-1&&Ni!==-1;Ni--){var kd=Number.MIN_VALUE+Pd*Math.abs(En[Ni]+Math.abs(En[Ni+1]));if(Math.abs(Qn[Ni])<=kd||Number.isNaN(Qn[Ni])){Qn[Ni]=0;break}}if(Ni===To-2)_c=4;else{var ga=void 0;for(ga=To-1;ga>=Ni&&ga!==Ni;ga--){var Rd=(ga!==To?Math.abs(Qn[ga]):0)+(ga!==Ni+1?Math.abs(Qn[ga-1]):0);if(Math.abs(En[ga])<=Pd*Rd){En[ga]=0;break}}ga===Ni?_c=3:ga===To-1?_c=1:(_c=2,Ni=ga)}switch(Ni++,_c){case 1:var Od=Qn[To-2];Qn[To-2]=0;for(var Ma=To-2;Ma>=Ni;Ma--){var zc=$t(En[Ma],Od),Sd=En[Ma]/zc,wd=Od/zc;if(En[Ma]=zc,Ma!==Ni&&(Od=-wd*Qn[Ma-1],Qn[Ma-1]=Sd*Qn[Ma-1]),Je)for(var js=0;js<Pt;js++)zc=Sd*Zn.get(js,Ma)+wd*Zn.get(js,To-1),Zn.set(js,To-1,-wd*Zn.get(js,Ma)+Sd*Zn.get(js,To-1)),Zn.set(js,Ma,zc)}break;case 2:var Ed=Qn[Ni-1];Qn[Ni-1]=0;for(var Na=Ni;Na<To;Na++){var Vc=$t(En[Na],Ed),Md=En[Na]/Vc,Ad=Ed/Vc;if(En[Na]=Vc,Ed=-Ad*Qn[Na],Qn[Na]=Md*Qn[Na],Ye)for(var Is=0;Is<K;Is++)Vc=Md*Ln.get(Is,Na)+Ad*Ln.get(Is,Ni-1),Ln.set(Is,Ni-1,-Ad*Ln.get(Is,Na)+Md*Ln.get(Is,Ni-1)),Ln.set(Is,Na,Vc)}break;case 3:var Wc=Math.max(Math.abs(En[To-1]),Math.abs(En[To-2]),Math.abs(Qn[To-2]),Math.abs(En[Ni]),Math.abs(Qn[Ni])),Qu=En[To-1]/Wc,Dd=En[To-2]/Wc,ph=Qn[To-2]/Wc,Td=En[Ni]/Wc,Nd=Qn[Ni]/Wc,lu=((Dd+Qu)*(Dd-Qu)+ph*ph)/2,gh=Qu*ph*(Qu*ph),Cd=0;lu===0&&gh===0||(Cd=gh/(lu+(Cd=lu<0?0-Math.sqrt(lu*lu+gh):Math.sqrt(lu*lu+gh))));for(var fu=(Td+Qu)*(Td-Qu)+Cd,Zu=Td*Nd,mo=Ni;mo<To-1;mo++){var sa=$t(fu,Zu);sa===0&&(sa=Number.MIN_VALUE);var La=fu/sa,Ba=Zu/sa;if(mo!==Ni&&(Qn[mo-1]=sa),fu=La*En[mo]+Ba*Qn[mo],Qn[mo]=La*Qn[mo]-Ba*En[mo],Zu=Ba*En[mo+1],En[mo+1]=La*En[mo+1],Je)for(var Ps=0;Ps<Pt;Ps++)sa=La*Zn.get(Ps,mo)+Ba*Zn.get(Ps,mo+1),Zn.set(Ps,mo+1,-Ba*Zn.get(Ps,mo)+La*Zn.get(Ps,mo+1)),Zn.set(Ps,mo,sa);if((sa=$t(fu,Zu))===0&&(sa=Number.MIN_VALUE),La=fu/sa,Ba=Zu/sa,En[mo]=sa,fu=La*Qn[mo]+Ba*En[mo+1],En[mo+1]=-Ba*Qn[mo]+La*En[mo+1],Zu=Ba*Qn[mo+1],Qn[mo+1]=La*Qn[mo+1],Ye&&mo<K-1)for(var Ds=0;Ds<K;Ds++)sa=La*Ln.get(Ds,mo)+Ba*Ln.get(Ds,mo+1),Ln.set(Ds,mo+1,-Ba*Ln.get(Ds,mo)+La*Ln.get(Ds,mo+1)),Ln.set(Ds,mo,sa)}Qn[To-2]=fu;break;case 4:if(En[Ni]<=0&&(En[Ni]=En[Ni]<0?-En[Ni]:0,Je))for(var yh=0;yh<=Id;yh++)Zn.set(yh,Ni,-Zn.get(yh,Ni));for(;Ni<Id&&!(En[Ni]>=En[Ni+1]);){var Xc=En[Ni];if(En[Ni]=En[Ni+1],En[Ni+1]=Xc,Je&&Ni<Pt-1)for(var $u=0;$u<Pt;$u++)Xc=Zn.get($u,Ni+1),Zn.set($u,Ni+1,Zn.get($u,Ni)),Zn.set($u,Ni,Xc);if(Ye&&Ni<K-1)for(var qu=0;qu<K;qu++)Xc=Ln.get(qu,Ni+1),Ln.set(qu,Ni+1,Ln.get(qu,Ni)),Ln.set(qu,Ni,Xc);Ni++}To--}}if(Ge){var Ld=Zn;Zn=Ln,Ln=Ld}this.m=K,this.n=Pt,this.s=En,this.U=Ln,this.V=Zn}var U,w,L;return U=Q,(w=[{key:"solve",value:function(jt){for(var Rt=jt,K=this.threshold,Pt=this.s.length,Qt=vn.zeros(Pt,Pt),qt=0;qt<Pt;qt++)Math.abs(this.s[qt])<=K?Qt.set(qt,qt,0):Qt.set(qt,qt,1/this.s[qt]);for(var xe=this.U,Ie=this.rightSingularVectors,Xe=Ie.mmul(Qt),Re=Ie.rows,Ye=xe.rows,Je=vn.zeros(Re,Ye),Ge=0;Ge<Re;Ge++)for(var qe=0;qe<Ye;qe++){for(var yn=0,Pn=0;Pn<Pt;Pn++)yn+=Xe.get(Ge,Pn)*xe.get(qe,Pn);Je.set(Ge,qe,yn)}return Je.mmul(Rt)}},{key:"solveForDiagonal",value:function(jt){return this.solve(vn.diag(jt))}},{key:"inverse",value:function(){for(var jt=this.V,Rt=this.threshold,K=jt.rows,Pt=jt.columns,Qt=new vn(K,this.s.length),qt=0;qt<K;qt++)for(var xe=0;xe<Pt;xe++)Math.abs(this.s[xe])>Rt&&Qt.set(qt,xe,jt.get(qt,xe)/this.s[xe]);for(var Ie=this.U,Xe=Ie.rows,Re=Ie.columns,Ye=new vn(K,Xe),Je=0;Je<K;Je++)for(var Ge=0;Ge<Xe;Ge++){for(var qe=0,yn=0;yn<Re;yn++)qe+=Qt.get(Je,yn)*Ie.get(Ge,yn);Ye.set(Je,Ge,qe)}return Ye}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var jt=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Rt=0,K=this.s,Pt=0,Qt=K.length;Pt<Qt;Pt++)K[Pt]>jt&&Rt++;return Rt}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return vn.diag(this.s)}}])&&Zt(U.prototype,w),L&&Zt(U,L),Q}();function he(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ce=function(){function Q(J){(function(jt,Rt){if(!(jt instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.distances=J.distances,this.dimension=J.dimension||2,this.linkDistance=J.linkDistance}var U,w,L;return U=Q,(w=[{key:"layout",value:function(){var jt=this.dimension,Rt=this.distances,K=this.linkDistance;try{var Pt=vn.mul(vn.pow(Rt,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Xe=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(qe){return vn.mul([qe],[Xe]).toJSON()[0].splice(0,jt)})}catch(qe){for(var Re=[],Ye=0;Ye<Rt.length;Ye++){var Je=Math.random()*K,Ge=Math.random()*K;Re.push([Je,Ge])}return Re}}}])&&he(U.prototype,w),L&&he(U,L),Q}();function Me(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ze=function(){function Q(J){(function(jt,Rt){if(!(jt instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.disp=[],this.positions=J.positions,this.adjMatrix=J.adjMatrix,this.focusID=J.focusID,this.radii=J.radii,this.iterations=J.iterations||10,this.height=J.height||10,this.width=J.width||10,this.speed=J.speed||100,this.gravity=J.gravity||10,this.nodeSizeFunc=J.nodeSizeFunc,this.k=J.k||5,this.strictRadial=J.strictRadial,this.nodes=J.nodes}var U,w,L;return U=Q,(w=[{key:"layout",value:function(){var jt=this.positions,Rt=[],K=this.iterations,Pt=this.width/10;this.maxDisplace=Pt,this.disp=Rt;for(var Qt=0;Qt<K;Qt++)jt.forEach(function(qt,xe){Rt[xe]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return jt}},{key:"getRepulsion",value:function(){var jt=this,Rt=jt.positions,K=jt.nodes,Pt=jt.disp,Qt=jt.k,qt=jt.radii||[];Rt.forEach(function(xe,Ie){Pt[Ie]={x:0,y:0},Rt.forEach(function(Xe,Re){if(Ie!==Re&&qt[Ie]===qt[Re]){var Ye=xe[0]-Xe[0],Je=xe[1]-Xe[1],Ge=Math.sqrt(Ye*Ye+Je*Je);if(Ge===0){Ge=1;var qe=Ie>Re?1:-1;Ye=.01*qe,Je=.01*qe}if(Ge<jt.nodeSizeFunc(K[Ie])/2+jt.nodeSizeFunc(K[Re])/2){var yn=Qt*Qt/Ge;Pt[Ie].x+=Ye/Ge*yn,Pt[Ie].y+=Je/Ge*yn}}})})}},{key:"updatePositions",value:function(){var jt=this.positions,Rt=this.disp,K=this.speed,Pt=this.strictRadial,Qt=this.focusID,qt=this.maxDisplace||this.width/10;Pt&&Rt.forEach(function(Ie,Xe){var Re=jt[Xe][0]-jt[Qt][0],Ye=jt[Xe][1]-jt[Qt][1],Je=Math.sqrt(Re*Re+Ye*Ye),Ge=Ye/Je,qe=-Re/Je,yn=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Pn=Math.acos((Ge*Ie.x+qe*Ie.y)/yn);Pn>Math.PI/2&&(Pn-=Math.PI/2,Ge*=-1,qe*=-1);var En=Math.cos(Pn)*yn;Ie.x=Ge*En,Ie.y=qe*En});var xe=this.radii;jt.forEach(function(Ie,Xe){if(Xe!==Qt){var Re=Math.sqrt(Rt[Xe].x*Rt[Xe].x+Rt[Xe].y*Rt[Xe].y);if(Re>0&&Xe!==Qt){var Ye=Math.min(qt*(K/800),Re);if(Ie[0]+=Rt[Xe].x/Re*Ye,Ie[1]+=Rt[Xe].y/Re*Ye,Pt){var Je=Ie[0]-jt[Qt][0],Ge=Ie[1]-jt[Qt][1],qe=Math.sqrt(Je*Je+Ge*Ge);Je=Je/qe*xe[Xe],Ge=Ge/qe*xe[Xe],Ie[0]=jt[Qt][0]+Je,Ie[1]=jt[Qt][1]+Ge}}}})}}])&&Me(U.prototype,w),L&&Me(U,L),Q}();function Ve(Q){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function ke(Q){return function(U){if(Array.isArray(U))return tn(U)}(Q)||function(U){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(U))return Array.from(U)}(Q)||function(U,w){if(!!U){if(typeof U=="string")return tn(U,w);var L=Object.prototype.toString.call(U).slice(8,-1);if(L==="Object"&&U.constructor&&(L=U.constructor.name),L==="Map"||L==="Set")return Array.from(U);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return tn(U,w)}}(Q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tn(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}function De(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function cn(Q,U){return(cn=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function fn(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=dn(Q);if(U){var J=dn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return nn(this,w)}}function nn(Q,U){return!U||Ve(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function dn(Q){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function Sn(Q,U){return Math.sqrt((Q[0]-U[0])*(Q[0]-U[0])+(Q[1]-U[1])*(Q[1]-U[1]))}var Pe=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&cn(Rt,K)})(jt,Q);var U,w,L,J=fn(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).maxIteration=1e3,K.focusNode=null,K.unitRadius=null,K.linkDistance=50,K.preventOverlap=!1,K.strictRadial=!0,K.maxPreventOverlapIteration=200,K.sortStrength=10,K.nodes=[],K.edges=[],K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges||[];if(Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var qt=K.center;if(Pt.length===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.linkDistance,Ie=null;if(m(K.focusNode)){for(var Xe=!1,Re=0;Re<Pt.length;Re++)Pt[Re].id===K.focusNode&&(Ie=Pt[Re],K.focusNode=Ie,Xe=!0,Re=Pt.length);Xe||(Ie=null)}else Ie=K.focusNode;Ie||(Ie=Pt[0],K.focusNode=Ie);var Ye,Je,Ge,qe=(Ye=Pt,Je=Ie.id,Ge=-1,Ye.forEach(function(Ii,Gi){Ii.id===Je&&(Ge=Gi)}),Ge);K.focusIndex=qe;var yn=s({nodes:Pt,edges:Qt},!1),Pn=n(yn),En=K.maxToFocus(Pn,qe);K.handleInfinity(Pn,qe,En+1),K.distances=Pn;var Ln=Pn[qe],Zn=K.width||500,Qn=K.height||500,qn=Zn-qt[0]>qt[0]?qt[0]:Zn-qt[0],fr=Qn-qt[1]>qt[1]?qt[1]:Qn-qt[1];qn===0&&(qn=Zn/2),fr===0&&(fr=Qn/2);var br=fr>qn?qn:fr,gr=Math.max.apply(Math,ke(Ln)),hr=[];Ln.forEach(function(Ii,Gi){K.unitRadius||(K.unitRadius=br/gr),hr[Gi]=Ii*K.unitRadius}),K.radii=hr;var Tr=K.eIdealDisMatrix();K.eIdealDistances=Tr;var dr=function(Ii){for(var Gi=Ii.length,Po=Ii[0].length,Fo=[],Ra=0;Ra<Gi;Ra++){for(var pa=[],qa=0;qa<Po;qa++)Ii[Ra][qa]!==0?pa.push(1/(Ii[Ra][qa]*Ii[Ra][qa])):pa.push(0);Fo.push(pa)}return Fo}(Tr);K.weights=dr;var Jr=new ce({linkDistance:xe,distances:Tr}).layout();Jr.forEach(function(Ii){j(Ii[0])&&(Ii[0]=Math.random()*xe),j(Ii[1])&&(Ii[1]=Math.random()*xe)}),K.positions=Jr,Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),Jr.forEach(function(Ii){Ii[0]-=Jr[qe][0],Ii[1]-=Jr[qe][1]}),K.run();var qr,wi=K.preventOverlap,Cr=K.nodeSize,pi=K.strictRadial;if(wi){var Ei,ji=K.nodeSpacing;Ei=M(ji)?function(){return ji}:C(ji)?ji:function(){return 0},qr=Cr?l(Cr)?function(Ii){return(Cr[0]>Cr[1]?Cr[0]:Cr[1])+Ei(Ii)}:function(Ii){return Cr+Ei(Ii)}:function(Ii){return Ii.size?l(Ii.size)?(Ii.size[0]>Ii.size[1]?Ii.size[0]:Ii.size[1])+Ei(Ii):Ii.size+Ei(Ii):10+Ei(Ii)};var Ao={nodes:Pt,nodeSizeFunc:qr,adjMatrix:yn,positions:Jr,radii:hr,height:Qn,width:Zn,strictRadial:pi,focusID:qe,iterations:K.maxPreventOverlapIteration||200,k:Jr.length/4.5},go=new ze(Ao);Jr=go.layout()}return Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){for(var K=this.maxIteration,Pt=this.positions||[],Qt=this.weights||[],qt=this.eIdealDistances||[],xe=this.radii||[],Ie=0;Ie<=K;Ie++){var Xe=Ie/K;this.oneIteration(Xe,Pt,xe,qt,Qt)}}},{key:"oneIteration",value:function(K,Pt,Qt,qt,xe){var Ie=1-K,Xe=this.focusIndex;Pt.forEach(function(Re,Ye){var Je=Sn(Re,[0,0]),Ge=Je===0?0:1/Je;if(Ye!==Xe){var qe=0,yn=0,Pn=0;Pt.forEach(function(Ln,Zn){if(Ye!==Zn){var Qn=Sn(Re,Ln),qn=Qn===0?0:1/Qn,fr=qt[Zn][Ye];Pn+=xe[Ye][Zn],qe+=xe[Ye][Zn]*(Ln[0]+fr*(Re[0]-Ln[0])*qn),yn+=xe[Ye][Zn]*(Ln[1]+fr*(Re[1]-Ln[1])*qn)}});var En=Qt[Ye]===0?0:1/Qt[Ye];Pn*=Ie,Pn+=K*En*En,qe*=Ie,qe+=K*En*Re[0]*Ge,Re[0]=qe/Pn,yn*=Ie,yn+=K*En*Re[1]*Ge,Re[1]=yn/Pn}})}},{key:"eIdealDisMatrix",value:function(){var K=this,Pt=K.nodes;if(!Pt)return[];var Qt=K.distances,qt=K.linkDistance,xe=K.radii||[],Ie=K.unitRadius||50,Xe=[];return Qt&&Qt.forEach(function(Re,Ye){var Je=[];Re.forEach(function(Ge,qe){if(Ye===qe)Je.push(0);else if(xe[Ye]===xe[qe])if(K.sortBy==="data")Je.push(Ge*(Math.abs(Ye-qe)*K.sortStrength)/(xe[Ye]/Ie));else if(K.sortBy){var yn=Pt[Ye][K.sortBy]||0,Pn=Pt[qe][K.sortBy]||0;m(yn)&&(yn=yn.charCodeAt(0)),m(Pn)&&(Pn=Pn.charCodeAt(0)),Je.push(Ge*(Math.abs(yn-Pn)*K.sortStrength)/(xe[Ye]/Ie))}else Je.push(Ge*qt/(xe[Ye]/Ie));else{var En=(qt+Ie)/2;Je.push(Ge*En)}}),Xe.push(Je)}),Xe}},{key:"handleInfinity",value:function(K,Pt,Qt){for(var qt=K.length,xe=0;xe<qt;xe++)if(K[Pt][xe]===1/0){K[Pt][xe]=Qt,K[xe][Pt]=Qt;for(var Ie=0;Ie<qt;Ie++)K[xe][Ie]!==1/0&&K[Pt][Ie]===1/0&&(K[Pt][Ie]=Qt+K[xe][Ie],K[Ie][Pt]=Qt+K[xe][Ie])}for(var Xe=0;Xe<qt;Xe++)if(Xe!==Pt){for(var Re=0;Re<qt;Re++)if(K[Xe][Re]===1/0){var Ye=Math.abs(K[Pt][Xe]-K[Pt][Re]);Ye=Ye===0?1:Ye,K[Xe][Re]=Ye}}}},{key:"maxToFocus",value:function(K,Pt){for(var Qt=0,qt=0;qt<K[Pt].length;qt++)K[Pt][qt]!==1/0&&(Qt=K[Pt][qt]>Qt?K[Pt][qt]:Qt);return Qt}},{key:"getType",value:function(){return"radial"}}])&&De(U.prototype,w),L&&De(U,L),jt}(x);function le(Q){return(le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Le(Q,U){return(Le=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Be(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=_e(Q);if(U){var J=_e(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return en(this,w)}}function en(Q,U){return!U||le(U)!=="object"&&typeof U!="function"?sn(Q):U}function sn(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function _e(Q){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ln=new Map,mn=function(U,w){if(ln.get(U)&&console.warn("The layout with the name ".concat(U," exists already, it will be overridden")),(J=w)!==null&&E(J)==="object"){var L=function(jt){(function(Pt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Qt&&Le(Pt,Qt)})(K,jt);var Rt=Be(K);function K(Pt){var Qt;(function(Xe,Re){if(!(Xe instanceof Re))throw new TypeError("Cannot call a class as a function")})(this,K);var qt=sn(Qt=Rt.call(this)),xe={},Ie=qt.getDefaultCfg();return Object.assign(xe,Ie,w,Pt),Object.keys(xe).forEach(function(Xe){var Re=xe[Xe];qt[Xe]=Re}),Qt}return K}(x);ln.set(U,L)}else ln.set(U,w);var J},Wn=function(U){return ln.has(U)?ln.get(U):null};function An(Q){return(An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function In(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function lr(Q,U){return(lr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Hr(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Mr(Q);if(U){var J=Mr(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Gr(this,w)}}function Gr(Q,U){return!U||An(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Mr(Q){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var oi=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&lr(Rt,K)})(jt,Q);var U,w,L,J=Hr(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).nodeSize=30,K.minNodeSpacing=10,K.preventOverlap=!1,K.equidistant=!1,K.startAngle=1.5*Math.PI,K.clockwise=!0,K.sortBy="degree",K.nodes=[],K.edges=[],K.width=300,K.height=300,K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=Pt.length;if(qt!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var xe=K.center;if(qt===1)return Pt[0].x=xe[0],Pt[0].y=xe[1],void(K.onLayoutEnd&&K.onLayoutEnd());var Ie,Xe=[];Ie=l(K.nodeSize)?Math.max(K.nodeSize[0],K.nodeSize[1]):K.nodeSize,Pt.forEach(function(br){Xe.push(br);var gr=Ie;l(br.size)?gr=Math.max(br.size[0],br.size[1]):M(br.size)&&(gr=br.size),Ie=Math.max(Ie,gr)}),K.clockwise=K.counterclockwise!==void 0?!K.counterclockwise:K.clockwise;var Re={},Ye={};if(Xe.forEach(function(br,gr){Re[br.id]=br,Ye[br.id]=gr}),!(K.sortBy!=="degree"&&m(K.sortBy)&&Xe[0][K.sortBy]!==void 0||(K.sortBy="degree",M(Pt[0].degree)))){var Je=y(Pt.length,Ye,Qt);Xe.forEach(function(br,gr){br.degree=Je[gr]})}Xe.sort(function(br,gr){return gr[K.sortBy]-br[K.sortBy]}),K.maxValueNode=Xe[0],K.maxLevelDiff=K.maxLevelDiff||K.maxValueNode[K.sortBy]/4;var Ge=[[]],qe=Ge[0];Xe.forEach(function(br){if(qe.length>0){var gr=Math.abs(qe[0][K.sortBy]-br[K.sortBy]);K.maxLevelDiff&&gr>=K.maxLevelDiff&&(qe=[],Ge.push(qe))}qe.push(br)});var yn=Ie+K.minNodeSpacing;if(!K.preventOverlap){var Pn=Ge.length>0&&Ge[0].length>1,En=(Math.min(K.width,K.height)/2-yn)/(Ge.length+(Pn?1:0));yn=Math.min(yn,En)}var Ln=0;if(Ge.forEach(function(br){var gr=K.sweep;gr===void 0&&(gr=2*Math.PI-2*Math.PI/br.length);var hr=br.dTheta=gr/Math.max(1,br.length-1);if(br.length>1&&K.preventOverlap){var Tr=Math.cos(hr)-Math.cos(0),dr=Math.sin(hr)-Math.sin(0),Jr=Math.sqrt(yn*yn/(Tr*Tr+dr*dr));Ln=Math.max(Jr,Ln)}br.r=Ln,Ln+=yn}),K.equidistant){for(var Zn=0,Qn=0,qn=0;qn<Ge.length;qn++){var fr=Ge[qn].r-Qn;Zn=Math.max(Zn,fr)}Qn=0,Ge.forEach(function(br,gr){gr===0&&(Qn=br.r),br.r=Qn,Qn+=Zn})}return Ge.forEach(function(br){var gr=br.dTheta,hr=br.r;br.forEach(function(Tr,dr){var Jr=K.startAngle+(K.clockwise?1:-1)*gr*dr;Tr.x=xe[0]+hr*Math.cos(Jr),Tr.y=xe[1]+hr*Math.sin(Jr)})}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&In(U.prototype,w),L&&In(U,L),jt}(x);function ai(Q){return(ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Zr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Yi(Q,U){return(Yi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function $i(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Uo(Q);if(U){var J=Uo(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Go(this,w)}}function Go(Q,U){return!U||ai(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Uo(Q){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var _o=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Yi(Rt,K)})(jt,Q);var U,w,L,J=$i(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).center=[0,0],K.linkDistance=50,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=Pt===void 0?[]:Pt,qt=this.center;if(K&&K.length!==0){if(K.length===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.linkDistance,Ie=s({nodes:K,edges:Qt},!1),Xe=n(Ie);this.handleInfinity(Xe);var Re,Ye,Je=(Re=xe,Ye=[],Xe.forEach(function(qe){var yn=[];qe.forEach(function(Pn){yn.push(Pn*Re)}),Ye.push(yn)}),Ye);this.scaledDistances=Je;var Ge=this.runMDS();return this.positions=Ge,Ge.forEach(function(qe,yn){K[yn].x=qe[0]+qt[0],K[yn].y=qe[1]+qt[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:K,edges:Qt}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var K=this.scaledDistances,Pt=vn.mul(vn.pow(K,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Xe=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(Re){return vn.mul([Re],[Xe]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(K){var Pt=-999999;K.forEach(function(Qt){Qt.forEach(function(qt){qt!==1/0&&Pt<qt&&(Pt=qt)})}),K.forEach(function(Qt,qt){Qt.forEach(function(xe,Ie){xe===1/0&&(K[qt][Ie]=Pt)})})}},{key:"getType",value:function(){return"mds"}}])&&Zr(U.prototype,w),L&&Zr(U,L),jt}(x);function ta(Q){return(ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function li(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oo(Q,U){return(Oo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function qi(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Xo(Q);if(U){var J=Xo(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zo(this,w)}}function zo(Q,U){return!U||ta(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Xo(Q){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Yo=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Oo(Rt,K)})(jt,Q);var U,w,L,J=qi(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterGravity=10,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var K=this,Pt=this.nodes;if(Pt&&Pt.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var Qt=this.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var qt={},xe={};return Pt.forEach(function(Ie,Xe){M(Ie.x)||(Ie.x=Math.random()*K.width),M(Ie.y)||(Ie.y=Math.random()*K.height),qt[Ie.id]=Ie,xe[Ie.id]=Xe}),this.nodeMap=qt,this.nodeIdxMap=xe,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration,xe=K.center,Ie=K.height*K.width,Xe=Math.sqrt(Ie)/10,Re=Ie/(Pt.length+1),Ye=Math.sqrt(Re),Je=K.gravity,Ge=K.speed,qe=K.clustering,yn={};if(qe)for(var Pn in Pt.forEach(function(Zn){if(yn[Zn.cluster]===void 0){var Qn={name:Zn.cluster,cx:0,cy:0,count:0};yn[Zn.cluster]=Qn}var qn=yn[Zn.cluster];M(Zn.x)&&(qn.cx+=Zn.x),M(Zn.y)&&(qn.cy+=Zn.y),qn.count++}),yn)yn[Pn].cx/=yn[Pn].count,yn[Pn].cy/=yn[Pn].count;for(var En=function(Qn){var qn=[];if(Pt.forEach(function(hr,Tr){qn[Tr]={x:0,y:0}}),K.applyCalculate(Pt,Qt,qn,Ye,Re),qe){var fr=K.clusterGravity||Je;for(var br in Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=yn[hr.cluster],Jr=Math.sqrt((hr.x-dr.cx)*(hr.x-dr.cx)+(hr.y-dr.cy)*(hr.y-dr.cy)),qr=Ye*fr;qn[Tr].x-=qr*(hr.x-dr.cx)/Jr,qn[Tr].y-=qr*(hr.y-dr.cy)/Jr}}),yn)yn[br].cx=0,yn[br].cy=0,yn[br].count=0;for(var gr in Pt.forEach(function(hr){var Tr=yn[hr.cluster];M(hr.x)&&(Tr.cx+=hr.x),M(hr.y)&&(Tr.cy+=hr.y),Tr.count++}),yn)yn[gr].cx/=yn[gr].count,yn[gr].cy/=yn[gr].count}Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=.01*Ye*Je;qn[Tr].x-=dr*(hr.x-xe[0]),qn[Tr].y-=dr*(hr.y-xe[1])}}),Pt.forEach(function(hr,Tr){if(M(hr.x)&&M(hr.y)){var dr=Math.sqrt(qn[Tr].x*qn[Tr].x+qn[Tr].y*qn[Tr].y);if(dr>0){var Jr=Math.min(Xe*(Ge/800),dr);hr.x+=qn[Tr].x/dr*Jr,hr.y+=qn[Tr].y/dr*Jr}}})},Ln=0;Ln<qt;Ln++)En();return K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}},{key:"applyCalculate",value:function(K,Pt,Qt,qt,xe){this.calRepulsive(K,Qt,xe),this.calAttractive(Pt,Qt,qt)}},{key:"calRepulsive",value:function(K,Pt,Qt){K.forEach(function(qt,xe){Pt[xe]={x:0,y:0},K.forEach(function(Ie,Xe){if(xe!==Xe&&M(qt.x)&&M(Ie.x)&&M(qt.y)&&M(Ie.y)){var Re=qt.x-Ie.x,Ye=qt.y-Ie.y,Je=Re*Re+Ye*Ye;if(Je===0){Je=1;var Ge=xe>Xe?1:-1;Re=.01*Ge,Ye=.01*Ge}var qe=Qt/Je;Pt[xe].x+=Re*qe,Pt[xe].y+=Ye*qe}})})}},{key:"calAttractive",value:function(K,Pt,Qt){var qt=this;K.forEach(function(xe){if(xe.source&&xe.target){var Ie=qt.nodeIdxMap[xe.source],Xe=qt.nodeIdxMap[xe.target];if(Ie!==Xe){var Re=qt.nodeMap[xe.source],Ye=qt.nodeMap[xe.target];if(M(Ye.x)&&M(Re.x)&&M(Ye.y)&&M(Re.y)){var Je=Ye.x-Re.x,Ge=Ye.y-Re.y,qe=Math.sqrt(Je*Je+Ge*Ge),yn=qe*qe/Qt;Pt[Xe].x-=Je/qe*yn,Pt[Xe].y-=Ge/qe*yn,Pt[Ie].x+=Je/qe*yn,Pt[Ie].y+=Ge/qe*yn}}}})}},{key:"getType",value:function(){return"fruchterman"}}])&&li(U.prototype,w),L&&li(U,L),jt}(x),ua=e(12),di=e.n(ua),ea=e(6),xi=e.n(ea),ks=e(8),Ri=e.n(ks),Rs=e(13),Mi=e.n(Rs),hu=(e(30),e(217),e(9)),ui=e.n(hu),du=e(15),eo=e.n(du),vu=1;function na(){return vu++}var ra=function Q(U){xi()(this,Q)},ia=function(){function Q(w){xi()(this,Q),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=w}var U;return Ri()(Q,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(L){return this.lookup[L]>-1}},{key:"create",value:function(L,J){this.lookup[L]=this.components.length;var jt=new this.clazz(J||{});return this.components.push(jt),this.entities.push(L),jt}},{key:"remove",value:function(L){var J=this.lookup[L];J>-1&&J<this.components.length-1&&(this.components[J]=this.components[this.components.length-1],this.entities[J]=this.entities[this.entities.length-1],this.lookup[this.entities[J]]=J),this.components.pop(),this.entities.pop(),delete this.lookup[L]}},{key:"removeKeepSorted",value:function(L){var J=this.lookup[L];if(J>-1){var jt=this.entities[J];if(J<this.components.length-1){for(var Rt=J+1;Rt<this.components.length;++Rt)this.components[Rt-1]=this.components[Rt];for(var K=J+1;K<this.entities.length;++K)this.entities[K-1]=this.entities[K],this.lookup[this.entities[K-1]]=K-1}this.components.pop(),this.entities.pop(),delete this.lookup[jt]}}},{key:"moveItem",value:function(L,J){if(L!==J){for(var jt=this.components[L],Rt=this.entities[L],K=L<J?1:-1,Pt=L;Pt!==J;Pt+=K){var Qt=Pt+K;this.components[Pt]=this.components[Qt],this.entities[Pt]=this.entities[Qt],this.lookup[this.entities[Pt]]=Pt}this.components[J]=jt,this.entities[J]=Rt,this.lookup[Rt]=J}}},{key:"getEntity",value:function(L){return this.entities[L]}},{key:"getComponent",value:function(L){return this.components[L]}},{key:"getComponentByEntity",value:function(L){var J=this.lookup[L];return J>-1?this.components[J]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(L){for(var J=0,jt=Object.keys(this.lookup);J<jt.length;J++){var Rt=jt[J],K=Number(Rt);if(this.lookup[K]===L)return K}return-1}},{key:"find",value:function(L){for(var J=0;J<this.getCount();J++){var jt=this.getComponent(J);if(L(jt,J))return jt}return null}},{key:"findIndex",value:function(L){for(var J=0;J<this.getCount();J++)if(L(this.getComponent(J),J))return J;return-1}},{key:"forEach",value:function(L){for(var J=0,jt=Object.keys(this.lookup);J<jt.length;J++){var Rt=jt[J],K=Number(Rt),Pt=this.lookup[K];L(K,this.getComponent(Pt))}}},{key:"forEachAsync",value:(U=eo()(ui.a.mark(function w(L){var J,jt,Rt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:J=0,jt=Object.keys(this.lookup);case 1:if(!(J<jt.length)){Qt.next=10;break}return Rt=jt[J],K=Number(Rt),Pt=this.lookup[K],Qt.next=7,L(K,this.getComponent(Pt));case 7:J++,Qt.next=1;break;case 10:case"end":return Qt.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"map",value:function(L){for(var J=[],jt=0,Rt=Object.keys(this.lookup);jt<Rt.length;jt++){var K=Rt[jt],Pt=Number(K),Qt=this.lookup[Pt];J.push(L(Pt,this.getComponent(Qt)))}return J}}]),Q}(),tc=e(60),ya=e.n(tc),Ur=e(4),yr={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Yc=function Q(){xi()(this,Q),this.index=void 0},pu=function Q(){xi()(this,Q),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},ds=function(){function Q(){xi()(this,Q),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Ri()(Q,[{key:"read",value:function(w){return this.reads.find(function(L){return L.index===w.index})||this.reads.push(w),w}},{key:"sample",value:function(w){return this.read(w),w}},{key:"write",value:function(w,L){if(this.writes.find(function(Rt){return Rt.index===L.index}))return L;var J=w.getResourceNode(L);J.resource.version++,J.resource.imported&&(this.hasSideEffect=!0);var jt=w.createResourceNode(J.resource);return w.getResourceNode(jt).writer=this,this.writes.push(jt),jt}}]),Q}(),ec=e(27),Qo=e.n(ec),nc=e(28),Vo=e.n(nc),Aa=e(21),Co=e.n(Aa);function vs(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ns,ts,Ls,Ho,es,Bs=function(Q){Qo()(w,Q);var U=vs(w);function w(){var L;xi()(this,w);for(var J=arguments.length,jt=new Array(J),Rt=0;Rt<J;Rt++)jt[Rt]=arguments[Rt];return(L=U.call.apply(U,[this].concat(jt))).version=0,L.refs=0,L.name=void 0,L.imported=void 0,L.priority=void 0,L.discardStart=!0,L.discardEnd=!1,L.descriptor=void 0,L.resource=void 0,L}return Ri()(w,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),w}(function Q(){xi()(this,Q),this.first=void 0,this.last=void 0}),gu=function Q(){xi()(this,Q),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function Do(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return ps(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return ps(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,Rt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,jt=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw jt}}}}function ps(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var yu=(Ns=Object(Ur.injectable)(),ts=Object(Ur.inject)(yr.RenderEngine),Ns((Ho=function(){function Q(){xi()(this,Q),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],di()(this,"engine",es,this)}var U,w;return Ri()(Q,[{key:"execute",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return this.compile(),jt.next=3,this.executePassNodes(J);case 3:case"end":return jt.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(J){J.tearDown&&J.tearDown()}),this.reset()}},{key:"addPass",value:function(J,jt,Rt,K){var Pt=new pu;Pt.execute=Rt,K&&(Pt.tearDown=K),Pt.name=J;var Qt=new ds;return Qt.name=J,this.passNodes.push(Qt),this.frameGraphPasses.push(Pt),jt(this,Qt,Pt),Pt}},{key:"getPass",value:function(J){return this.frameGraphPasses.find(function(jt){return jt.name===J})}},{key:"compile",value:function(){var J,jt=this,Rt=Do(this.passNodes);try{for(Rt.s();!(J=Rt.n()).done;){var K=J.value;K.refCount=K.writes.length+(K.hasSideEffect?1:0),K.reads.forEach(function(Cr){jt.resourceNodes[Cr.index].readerCount++})}}catch(Cr){Rt.e(Cr)}finally{Rt.f()}var Pt,Qt=[],qt=Do(this.resourceNodes);try{for(qt.s();!(Pt=qt.n()).done;){var xe=Pt.value;xe.readerCount===0&&Qt.push(xe)}}catch(Cr){qt.e(Cr)}finally{qt.f()}for(;Qt.length;){var Ie=Qt.pop(),Xe=Ie&&Ie.writer;if(Xe&&--Xe.refCount==0){var Re,Ye=Do(Xe.reads);try{for(Ye.s();!(Re=Ye.n()).done;){var Je=Re.value,Ge=this.resourceNodes[Je.index];--Ge.readerCount==0&&Qt.push(Ge)}}catch(Cr){Ye.e(Cr)}finally{Ye.f()}}}this.resourceNodes.forEach(function(Cr){Cr.resource.refs+=Cr.readerCount});var qe,yn=Do(this.passNodes);try{for(yn.s();!(qe=yn.n()).done;){var Pn=qe.value;if(Pn.refCount){var En,Ln=Do(Pn.reads);try{for(Ln.s();!(En=Ln.n()).done;){var Zn=En.value,Qn=this.resourceNodes[Zn.index].resource;Qn.first=Qn.first?Qn.first:Pn,Qn.last=Pn}}catch(Cr){Ln.e(Cr)}finally{Ln.f()}var qn,fr=Do(Pn.writes);try{for(fr.s();!(qn=fr.n()).done;){var br=qn.value,gr=this.resourceNodes[br.index].resource;gr.first=gr.first?gr.first:Pn,gr.last=Pn}}catch(Cr){fr.e(Cr)}finally{fr.f()}}}}catch(Cr){yn.e(Cr)}finally{yn.f()}for(var hr=0;hr<2;hr++){var Tr,dr=Do(this.resourceNodes);try{for(dr.s();!(Tr=dr.n()).done;){var Jr=Tr.value.resource;if(Jr.priority===hr&&Jr.refs){var qr=Jr.first,wi=Jr.last;qr&&wi&&(qr.devirtualize.push(Jr),wi.destroy.push(Jr))}}}catch(Cr){dr.e(Cr)}finally{dr.f()}}}},{key:"executePassNodes",value:(U=eo()(ui.a.mark(function L(J){var jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe,Re,Ye,Je,Ge;return ui.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:jt=Do(this.passNodes.entries()),qe.prev=1,jt.s();case 3:if((Rt=jt.n()).done){qe.next=18;break}if(K=ya()(Rt.value,2),Pt=K[0],!(Qt=K[1]).refCount){qe.next=16;break}qt=Do(Qt.devirtualize);try{for(qt.s();!(xe=qt.n()).done;)xe.value.preExecuteDevirtualize(this.engine)}catch(yn){qt.e(yn)}finally{qt.f()}Ie=Do(Qt.destroy);try{for(Ie.s();!(Xe=Ie.n()).done;)Xe.value.preExecuteDestroy(this.engine)}catch(yn){Ie.e(yn)}finally{Ie.f()}return qe.next=12,this.frameGraphPasses[Pt].execute(this,this.frameGraphPasses[Pt],J);case 12:Re=Do(Qt.devirtualize);try{for(Re.s();!(Ye=Re.n()).done;)Ye.value.postExecuteDevirtualize(this.engine)}catch(yn){Re.e(yn)}finally{Re.f()}Je=Do(Qt.destroy);try{for(Je.s();!(Ge=Je.n()).done;)Ge.value.postExecuteDestroy(this.engine)}catch(yn){Je.e(yn)}finally{Je.f()}case 16:qe.next=3;break;case 18:qe.next=23;break;case 20:qe.prev=20,qe.t0=qe.catch(1),jt.e(qe.t0);case 23:return qe.prev=23,jt.f(),qe.finish(23);case 26:this.reset();case 27:case"end":return qe.stop()}},L,this,[[1,20,23,26]])})),function(L){return U.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(J){return this.resourceNodes[J.index]}},{key:"createResourceNode",value:function(J){var jt=new gu;jt.resource=J,jt.version=J.version,this.resourceNodes.push(jt);var Rt=new Yc;return Rt.index=this.resourceNodes.length-1,Rt}},{key:"createTexture",value:function(J,jt,Rt){var K=new Bs;return K.name=jt,K.descriptor=Rt,this.createResourceNode(K)}},{key:"createRenderTarget",value:function(J,jt,Rt){var K=new Bs;return K.name=jt,K.descriptor=Rt,this.createResourceNode(K)}},{key:"present",value:function(J){this.addPass("Present",function(jt,Rt){Rt.read(J),Rt.hasSideEffect=!0},eo()(ui.a.mark(function jt(){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:case"end":return Rt.stop()}},jt)})))}}]),Q}(),es=Mi()(Ho.prototype,"engine",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=Ho))||Ls),Fs=e(3),mr=e.n(Fs),Gs=e(25),Eo=e.n(Gs);function ma(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function mu(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ma(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ma(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function bu(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Jn,fe,Ta,Us,ns,ba,ca,gs,Fa,ys=function(Q){Qo()(w,Q);var U=bu(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).dirty=!0,J.attributes=[],J.indices=void 0,J.indicesBuffer=void 0,J.vertexCount=void 0,J.maxInstancedCount=void 0,J.aabb=void 0,Object.assign(Eo()(J),L),J}return Ri()(w,[{key:"setAttribute",value:function(J,jt,Rt,K){var Pt=this.attributes.find(function(Qt){return Qt.name===J});return Pt?(Pt.data=jt,Pt.dirty=!0):this.attributes.push(mu(mu({dirty:!0,name:J,data:jt},Rt),{},{bufferGetter:K})),this.dirty=!0,this}},{key:"setIndex",value:function(J){return this.indices=new Uint32Array(J.buffer?J.buffer:J),this.dirty=!0,this}}]),w}(ra),jn=(e(226),e(2)),_s=function(){function Q(U,w){xi()(this,Q),this.center=void 0,this.halfExtents=void 0,this.min=jn.e.create(),this.max=jn.e.create(),this.update(U,w)}return Ri()(Q,[{key:"update",value:function(w,L){this.center=w||jn.e.create(),this.halfExtents=L||jn.e.fromValues(.5,.5,.5),this.min=jn.e.sub(this.min,this.center,this.halfExtents),this.max=jn.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(w,L){jn.e.add(this.center,L,w),jn.e.scale(this.center,this.center,.5),jn.e.sub(this.halfExtents,L,w),jn.e.scale(this.halfExtents,this.halfExtents,.5),jn.e.copy(this.min,w),jn.e.copy(this.max,L)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(w){var L=this.center,J=L[0],jt=L[1],Rt=L[2],K=this.halfExtents,Pt=K[0],Qt=K[1],qt=K[2],xe=J-Pt,Ie=J+Pt,Xe=jt-Qt,Re=jt+Qt,Ye=Rt-qt,Je=Rt+qt,Ge=w.center,qe=Ge[0],yn=Ge[1],Pn=Ge[2],En=w.halfExtents,Ln=En[0],Zn=En[1],Qn=En[2],qn=qe-Ln,fr=qe+Ln,br=yn-Zn,gr=yn+Zn,hr=Pn-Qn,Tr=Pn+Qn;qn<xe&&(xe=qn),fr>Ie&&(Ie=fr),br<Xe&&(Xe=br),gr>Re&&(Re=gr),hr<Ye&&(Ye=hr),Tr>Je&&(Je=Tr),L[0]=.5*(xe+Ie),L[1]=.5*(Xe+Re),L[2]=.5*(Ye+Je),K[0]=.5*(Ie-xe),K[1]=.5*(Re-Xe),K[2]=.5*(Je-Ye),this.min[0]=xe,this.min[1]=Xe,this.min[2]=Ye,this.max[0]=Ie,this.max[1]=Re,this.max[2]=Je}},{key:"intersects",value:function(w){var L=this.getMax(),J=this.getMin(),jt=w.getMax(),Rt=w.getMin();return J[0]<=jt[0]&&L[0]>=Rt[0]&&J[1]<=jt[1]&&L[1]>=Rt[1]&&J[2]<=jt[2]&&L[2]>=Rt[2]}},{key:"containsPoint",value:function(w){var L=this.getMin(),J=this.getMax();return!(w[0]<L[0]||w[0]>J[0]||w[1]<L[1]||w[1]>J[1]||w[2]<L[2]||w[2]>J[2])}},{key:"getNegativeFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.min):w.pnVertexFlag===272?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):w.pnVertexFlag===257?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===256?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===17?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===16?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===1?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):jn.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.max):w.pnVertexFlag===272?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):w.pnVertexFlag===257?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===256?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===17?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===16?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===1?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):jn.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),Q}();function Wo(Q){for(var U=new _s,w=jn.e.fromValues(Q[0],Q[1],Q[2]),L=jn.e.fromValues(Q[0],Q[1],Q[2]),J=3;J<Q.length;){var jt=Q[J++],Rt=Q[J++],K=Q[J++];jt<w[0]&&(w[0]=jt),Rt<w[1]&&(w[1]=Rt),K<w[2]&&(w[2]=K),jt>L[0]&&(L[0]=jt),Rt>L[1]&&(L[1]=Rt),K>L[2]&&(L[2]=K)}return U.setMinMax(w,L),U}(fe=Jn||(Jn={}))[fe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",fe[fe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",fe[fe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",fe[fe.POINTS=0]="POINTS",fe[fe.LINES=1]="LINES",fe[fe.LINE_LOOP=2]="LINE_LOOP",fe[fe.LINE_STRIP=3]="LINE_STRIP",fe[fe.TRIANGLES=4]="TRIANGLES",fe[fe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",fe[fe.TRIANGLE_FAN=6]="TRIANGLE_FAN",fe[fe.ZERO=0]="ZERO",fe[fe.ONE=1]="ONE",fe[fe.SRC_COLOR=768]="SRC_COLOR",fe[fe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",fe[fe.SRC_ALPHA=770]="SRC_ALPHA",fe[fe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",fe[fe.DST_ALPHA=772]="DST_ALPHA",fe[fe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",fe[fe.DST_COLOR=774]="DST_COLOR",fe[fe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",fe[fe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",fe[fe.FUNC_ADD=32774]="FUNC_ADD",fe[fe.BLEND_EQUATION=32777]="BLEND_EQUATION",fe[fe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",fe[fe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",fe[fe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",fe[fe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",fe[fe.MAX_EXT=32776]="MAX_EXT",fe[fe.MIN_EXT=32775]="MIN_EXT",fe[fe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",fe[fe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",fe[fe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",fe[fe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",fe[fe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",fe[fe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",fe[fe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",fe[fe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",fe[fe.BLEND_COLOR=32773]="BLEND_COLOR",fe[fe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",fe[fe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",fe[fe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",fe[fe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",fe[fe.STREAM_DRAW=35040]="STREAM_DRAW",fe[fe.STATIC_DRAW=35044]="STATIC_DRAW",fe[fe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",fe[fe.BUFFER_SIZE=34660]="BUFFER_SIZE",fe[fe.BUFFER_USAGE=34661]="BUFFER_USAGE",fe[fe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",fe[fe.FRONT=1028]="FRONT",fe[fe.BACK=1029]="BACK",fe[fe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",fe[fe.CULL_FACE=2884]="CULL_FACE",fe[fe.BLEND=3042]="BLEND",fe[fe.DITHER=3024]="DITHER",fe[fe.STENCIL_TEST=2960]="STENCIL_TEST",fe[fe.DEPTH_TEST=2929]="DEPTH_TEST",fe[fe.SCISSOR_TEST=3089]="SCISSOR_TEST",fe[fe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",fe[fe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",fe[fe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",fe[fe.NO_ERROR=0]="NO_ERROR",fe[fe.INVALID_ENUM=1280]="INVALID_ENUM",fe[fe.INVALID_VALUE=1281]="INVALID_VALUE",fe[fe.INVALID_OPERATION=1282]="INVALID_OPERATION",fe[fe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",fe[fe.CW=2304]="CW",fe[fe.CCW=2305]="CCW",fe[fe.LINE_WIDTH=2849]="LINE_WIDTH",fe[fe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",fe[fe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",fe[fe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",fe[fe.FRONT_FACE=2886]="FRONT_FACE",fe[fe.DEPTH_RANGE=2928]="DEPTH_RANGE",fe[fe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",fe[fe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",fe[fe.DEPTH_FUNC=2932]="DEPTH_FUNC",fe[fe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",fe[fe.STENCIL_FUNC=2962]="STENCIL_FUNC",fe[fe.STENCIL_FAIL=2964]="STENCIL_FAIL",fe[fe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",fe[fe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",fe[fe.STENCIL_REF=2967]="STENCIL_REF",fe[fe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",fe[fe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",fe[fe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",fe[fe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",fe[fe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",fe[fe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",fe[fe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",fe[fe.VIEWPORT=2978]="VIEWPORT",fe[fe.SCISSOR_BOX=3088]="SCISSOR_BOX",fe[fe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",fe[fe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",fe[fe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",fe[fe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",fe[fe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",fe[fe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",fe[fe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",fe[fe.RED_BITS=3410]="RED_BITS",fe[fe.GREEN_BITS=3411]="GREEN_BITS",fe[fe.BLUE_BITS=3412]="BLUE_BITS",fe[fe.ALPHA_BITS=3413]="ALPHA_BITS",fe[fe.DEPTH_BITS=3414]="DEPTH_BITS",fe[fe.STENCIL_BITS=3415]="STENCIL_BITS",fe[fe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",fe[fe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",fe[fe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",fe[fe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",fe[fe.SAMPLES=32937]="SAMPLES",fe[fe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",fe[fe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",fe[fe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",fe[fe.DONT_CARE=4352]="DONT_CARE",fe[fe.FASTEST=4353]="FASTEST",fe[fe.NICEST=4354]="NICEST",fe[fe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",fe[fe.BYTE=5120]="BYTE",fe[fe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fe[fe.SHORT=5122]="SHORT",fe[fe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fe[fe.INT=5124]="INT",fe[fe.UNSIGNED_INT=5125]="UNSIGNED_INT",fe[fe.FLOAT=5126]="FLOAT",fe[fe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fe[fe.ALPHA=6406]="ALPHA",fe[fe.RGB=6407]="RGB",fe[fe.RGBA=6408]="RGBA",fe[fe.LUMINANCE=6409]="LUMINANCE",fe[fe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fe[fe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fe[fe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fe[fe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fe[fe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",fe[fe.VERTEX_SHADER=35633]="VERTEX_SHADER",fe[fe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",fe[fe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",fe[fe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",fe[fe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",fe[fe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",fe[fe.SHADER_TYPE=35663]="SHADER_TYPE",fe[fe.DELETE_STATUS=35712]="DELETE_STATUS",fe[fe.LINK_STATUS=35714]="LINK_STATUS",fe[fe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",fe[fe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",fe[fe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",fe[fe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",fe[fe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",fe[fe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",fe[fe.NEVER=512]="NEVER",fe[fe.LESS=513]="LESS",fe[fe.EQUAL=514]="EQUAL",fe[fe.LEQUAL=515]="LEQUAL",fe[fe.GREATER=516]="GREATER",fe[fe.NOTEQUAL=517]="NOTEQUAL",fe[fe.GEQUAL=518]="GEQUAL",fe[fe.ALWAYS=519]="ALWAYS",fe[fe.KEEP=7680]="KEEP",fe[fe.REPLACE=7681]="REPLACE",fe[fe.INCR=7682]="INCR",fe[fe.DECR=7683]="DECR",fe[fe.INVERT=5386]="INVERT",fe[fe.INCR_WRAP=34055]="INCR_WRAP",fe[fe.DECR_WRAP=34056]="DECR_WRAP",fe[fe.VENDOR=7936]="VENDOR",fe[fe.RENDERER=7937]="RENDERER",fe[fe.VERSION=7938]="VERSION",fe[fe.NEAREST=9728]="NEAREST",fe[fe.LINEAR=9729]="LINEAR",fe[fe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",fe[fe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",fe[fe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",fe[fe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",fe[fe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",fe[fe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",fe[fe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",fe[fe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",fe[fe.TEXTURE_2D=3553]="TEXTURE_2D",fe[fe.TEXTURE=5890]="TEXTURE",fe[fe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",fe[fe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",fe[fe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",fe[fe.TEXTURE0=33984]="TEXTURE0",fe[fe.TEXTURE1=33985]="TEXTURE1",fe[fe.TEXTURE2=33986]="TEXTURE2",fe[fe.TEXTURE3=33987]="TEXTURE3",fe[fe.TEXTURE4=33988]="TEXTURE4",fe[fe.TEXTURE5=33989]="TEXTURE5",fe[fe.TEXTURE6=33990]="TEXTURE6",fe[fe.TEXTURE7=33991]="TEXTURE7",fe[fe.TEXTURE8=33992]="TEXTURE8",fe[fe.TEXTURE9=33993]="TEXTURE9",fe[fe.TEXTURE10=33994]="TEXTURE10",fe[fe.TEXTURE11=33995]="TEXTURE11",fe[fe.TEXTURE12=33996]="TEXTURE12",fe[fe.TEXTURE13=33997]="TEXTURE13",fe[fe.TEXTURE14=33998]="TEXTURE14",fe[fe.TEXTURE15=33999]="TEXTURE15",fe[fe.TEXTURE16=34e3]="TEXTURE16",fe[fe.TEXTURE17=34001]="TEXTURE17",fe[fe.TEXTURE18=34002]="TEXTURE18",fe[fe.TEXTURE19=34003]="TEXTURE19",fe[fe.TEXTURE20=34004]="TEXTURE20",fe[fe.TEXTURE21=34005]="TEXTURE21",fe[fe.TEXTURE22=34006]="TEXTURE22",fe[fe.TEXTURE23=34007]="TEXTURE23",fe[fe.TEXTURE24=34008]="TEXTURE24",fe[fe.TEXTURE25=34009]="TEXTURE25",fe[fe.TEXTURE26=34010]="TEXTURE26",fe[fe.TEXTURE27=34011]="TEXTURE27",fe[fe.TEXTURE28=34012]="TEXTURE28",fe[fe.TEXTURE29=34013]="TEXTURE29",fe[fe.TEXTURE30=34014]="TEXTURE30",fe[fe.TEXTURE31=34015]="TEXTURE31",fe[fe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",fe[fe.REPEAT=10497]="REPEAT",fe[fe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",fe[fe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",fe[fe.FLOAT_VEC2=35664]="FLOAT_VEC2",fe[fe.FLOAT_VEC3=35665]="FLOAT_VEC3",fe[fe.FLOAT_VEC4=35666]="FLOAT_VEC4",fe[fe.INT_VEC2=35667]="INT_VEC2",fe[fe.INT_VEC3=35668]="INT_VEC3",fe[fe.INT_VEC4=35669]="INT_VEC4",fe[fe.BOOL=35670]="BOOL",fe[fe.BOOL_VEC2=35671]="BOOL_VEC2",fe[fe.BOOL_VEC3=35672]="BOOL_VEC3",fe[fe.BOOL_VEC4=35673]="BOOL_VEC4",fe[fe.FLOAT_MAT2=35674]="FLOAT_MAT2",fe[fe.FLOAT_MAT3=35675]="FLOAT_MAT3",fe[fe.FLOAT_MAT4=35676]="FLOAT_MAT4",fe[fe.SAMPLER_2D=35678]="SAMPLER_2D",fe[fe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",fe[fe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",fe[fe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",fe[fe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",fe[fe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",fe[fe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",fe[fe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",fe[fe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",fe[fe.COMPILE_STATUS=35713]="COMPILE_STATUS",fe[fe.LOW_FLOAT=36336]="LOW_FLOAT",fe[fe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",fe[fe.HIGH_FLOAT=36338]="HIGH_FLOAT",fe[fe.LOW_INT=36339]="LOW_INT",fe[fe.MEDIUM_INT=36340]="MEDIUM_INT",fe[fe.HIGH_INT=36341]="HIGH_INT",fe[fe.FRAMEBUFFER=36160]="FRAMEBUFFER",fe[fe.RENDERBUFFER=36161]="RENDERBUFFER",fe[fe.RGBA4=32854]="RGBA4",fe[fe.RGB5_A1=32855]="RGB5_A1",fe[fe.RGB565=36194]="RGB565",fe[fe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",fe[fe.STENCIL_INDEX=6401]="STENCIL_INDEX",fe[fe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",fe[fe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",fe[fe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",fe[fe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",fe[fe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",fe[fe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",fe[fe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",fe[fe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",fe[fe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",fe[fe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",fe[fe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",fe[fe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",fe[fe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",fe[fe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",fe[fe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",fe[fe.NONE=0]="NONE",fe[fe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",fe[fe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",fe[fe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",fe[fe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",fe[fe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",fe[fe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",fe[fe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",fe[fe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",fe[fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",fe[fe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",fe[fe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",fe[fe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",fe[fe.COPY_SRC=1]="COPY_SRC",fe[fe.COPY_DST=2]="COPY_DST",fe[fe.SAMPLED=4]="SAMPLED",fe[fe.STORAGE=8]="STORAGE",fe[fe.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var rc=(Ta=Object(Ur.injectable)(),Us=Object(Ur.inject)(yr.GeometryComponentManager),ns=Object(Ur.inject)(yr.RenderEngine),Ta((ca=function(){function Q(){xi()(this,Q),di()(this,"geometry",gs,this),di()(this,"engine",Fa,this)}var U;return Ri()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){var L=this;return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:this.geometry.forEach(function(jt,Rt){Rt.dirty&&(Rt.attributes.forEach(function(K){var Pt;K.dirty&&K.data&&(K.buffer?(Pt=K.buffer)===null||Pt===void 0||Pt.subData({data:K.data,offset:0}):K.buffer=L.engine.createBuffer({data:K.data,type:Jn.FLOAT}),K.dirty=!1)}),Rt.indices&&(Rt.indicesBuffer?Rt.indicesBuffer.subData({data:Rt.indices,offset:0}):Rt.indicesBuffer=L.engine.createElements({data:Rt.indices,count:Rt.indices.length,type:Jn.UNSIGNED_INT,usage:Jn.STATIC_DRAW})),Rt.dirty=!1)});case 1:case"end":return J.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(L,J){J.indicesBuffer&&J.indicesBuffer.destroy(),J.attributes.forEach(function(jt){jt.buffer&&jt.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},J=L.vertexCount,jt=na();return this.geometry.create(jt,{vertexCount:J})}},{key:"createInstancedBufferGeometry",value:function(L){var J=L.maxInstancedCount,jt=L.vertexCount,Rt=na();return this.geometry.create(Rt,{maxInstancedCount:J,vertexCount:jt})}},{key:"createBox",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=L.widthSegments||1,jt=L.heightSegments||1,Rt=L.depthSegments||1,K=L.halfExtents||jn.e.fromValues(.5,.5,.5),Pt=ya()(K,3),Qt=Pt[0],qt=Pt[1],xe=Pt[2],Ie=[jn.e.fromValues(-Qt,-qt,xe),jn.e.fromValues(Qt,-qt,xe),jn.e.fromValues(Qt,qt,xe),jn.e.fromValues(-Qt,qt,xe),jn.e.fromValues(Qt,-qt,-xe),jn.e.fromValues(-Qt,-qt,-xe),jn.e.fromValues(-Qt,qt,-xe),jn.e.fromValues(Qt,qt,-xe)],Xe=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Re=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Ye={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Je=[],Ge=[],qe=[],yn=[],Pn=[],En=0,Ln=function(fr,br,gr){var hr,Tr,dr,Jr;for(dr=0;dr<=br;dr++)for(Jr=0;Jr<=gr;Jr++){var qr=jn.e.create(),wi=jn.e.create(),Cr=jn.e.create(),pi=jn.e.create();jn.e.lerp(qr,Ie[Xe[fr][0]],Ie[Xe[fr][1]],dr/br),jn.e.lerp(wi,Ie[Xe[fr][0]],Ie[Xe[fr][2]],Jr/gr),jn.e.sub(Cr,wi,Ie[Xe[fr][0]]),jn.e.add(pi,qr,Cr),hr=dr/br,Tr=Jr/gr,Je.push(pi[0],pi[1],pi[2]),Ge.push(Re[fr][0],Re[fr][1],Re[fr][2]),qe.push(hr,Tr),hr=.875*(hr/=3)+4/64,Tr=.875*(Tr/=3)+4/64,hr+=fr%3/3,Tr+=Math.floor(fr/3)/3,yn.push(hr,Tr),dr<br&&Jr<gr&&(Pn.push(En+gr+1,En+1,En),Pn.push(En+gr+1,En+gr+2,En+1)),En++}};Ln(Ye.FRONT,J,jt),Ln(Ye.BACK,J,jt),Ln(Ye.TOP,J,Rt),Ln(Ye.BOTTOM,J,Rt),Ln(Ye.RIGHT,Rt,jt),Ln(Ye.LEFT,Rt,jt);var Zn=Wo(Je),Qn=na();return this.geometry.create(Qn,{indices:Uint32Array.from(Pn),aabb:Zn,attributes:[{dirty:!0,name:"position",data:Float32Array.from(Je),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),Q}(),gs=Mi()(ca.prototype,"geometry",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=Mi()(ca.prototype,"engine",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=ca))||ba);e(227);function ic(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ms,oa,fo,bs,zs,Ga,Ua,xu,Ou,la=function(Q){Qo()(w,Q);var U=ic(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).vertexShaderGLSL=void 0,J.fragmentShaderGLSL=void 0,J.dirty=!0,J.uniforms=[],J.cull={enable:!0,face:Jn.BACK},J.depth={enable:!0},J.blend=void 0,Object.assign(Eo()(J),L),J}return Ri()(w,[{key:"setCull",value:function(J){return this.cull=J,this}},{key:"setDepth",value:function(J){return this.depth=J,this}},{key:"setBlend",value:function(J){return this.blend=J,this}},{key:"setUniform",value:function(J,jt){var Rt=this;if(typeof J!="string")return Object.keys(J).forEach(function(Pt){return Rt.setUniform(Pt,J[Pt])}),this;var K=this.uniforms.find(function(Pt){return Pt.name===J});return K?(K.dirty=!0,K.data=jt):this.uniforms.push({name:J,dirty:!0,data:jt}),this.dirty=!0,this}}]),w}(ra);function rs(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ca(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?rs(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):rs(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Vs,kt=(ms=Object(Ur.injectable)(),oa=Object(Ur.inject)(yr.MaterialComponentManager),fo=Object(Ur.inject)(yr.RenderEngine),bs=Object(Ur.inject)(yr.ShaderModuleService),ms((Ga=function(){function Q(){xi()(this,Q),di()(this,"material",Ua,this),di()(this,"engine",xu,this),di()(this,"shaderModule",Ou,this)}var U;return Ri()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.all(this.material.map(function(){var J=eo()(ui.a.mark(function jt(Rt,K){return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:case"end":return Pt.stop()}},jt)}));return function(jt,Rt){return J.apply(this,arguments)}}()));case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var L=na();return this.material.create(L,{vertexShaderGLSL:this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;
}`,fragmentShaderGLSL:this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`})}},{key:"createShaderMaterial",value:function(L){var J=na(),jt=L.vertexShader,Rt=L.fragmentShader,K=[];if(!this.engine.supportWebGPU){var Pt="material-".concat(J);this.shaderModule.registerModule(Pt,{vs:L.vertexShader,fs:L.fragmentShader});var Qt=this.shaderModule.getModule(Pt);jt=Qt.vs,Rt=Qt.fs,Qt.uniforms&&(K=Object.keys(Qt.uniforms).map(function(qt){return{dirty:!0,name:qt,data:Qt.uniforms[qt]}}))}return this.material.create(J,Ca(Ca({vertexShaderGLSL:jt,fragmentShaderGLSL:Rt},L),{},{uniforms:K}))}}]),Q}(),Ua=Mi()(Ga.prototype,"material",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=Mi()(Ga.prototype,"engine",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ou=Mi()(Ga.prototype,"shaderModule",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zs=Ga))||zs);function f(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}(function(Q){Q[Q.Standard=0]="Standard"})(Vs||(Vs={}));var u=function(Q){Qo()(w,Q);var U=f(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).strategy=Vs.Standard,J.visibilityPlaneMask=0,J.visible=!1,Object.assign(Eo()(J),L),J}return w}(ra);e(228);function I(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var W,st=function(Q){Qo()(w,Q);var U=I(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).material=void 0,J.geometry=void 0,J.aabb=new _s,J.aabbDirty=!0,J.model=void 0,J.visible=!0,Object.assign(Eo()(J),L),J}return w}(ra),Tt=function(){function Q(U,w){xi()(this,Q),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=U||0,this.normal=w||jn.e.fromValues(0,1,0),this.updatePNVertexFlag()}return Ri()(Q,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(w){return jn.e.dot(w,this.normal)-this.distance}},{key:"normalize",value:function(){var w=1/jn.e.len(this.normal);jn.e.scale(this.normal,this.normal,w),this.distance*=w}},{key:"intersectsLine",value:function(w,L,J){var jt=this.distanceToPoint(w),Rt=jt/(jt-this.distanceToPoint(L)),K=Rt>=0&&Rt<=1;return K&&J&&jn.e.lerp(J,w,L,Rt),K}}]),Q}();(function(Q){Q[Q.OUTSIDE=4294967295]="OUTSIDE",Q[Q.INSIDE=0]="INSIDE",Q[Q.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var Ft,Yt,ee,ae,je,Fe,Ue,He,bn,wn,Nn,Bn,Fn,sr=function(){function Q(U){if(xi()(this,Q),this.planes=[],U)this.planes=U;else for(var w=0;w<6;w++)this.planes.push(new Tt)}return Ri()(Q,[{key:"extractFromVPMatrix",value:function(w){var L=ya()(w,16),J=L[0],jt=L[1],Rt=L[2],K=L[3],Pt=L[4],Qt=L[5],qt=L[6],xe=L[7],Ie=L[8],Xe=L[9],Re=L[10],Ye=L[11],Je=L[12],Ge=L[13],qe=L[14],yn=L[15];jn.e.set(this.planes[0].normal,K-J,xe-Pt,Ye-Ie),this.planes[0].distance=-(yn-Je),jn.e.set(this.planes[1].normal,K+J,xe+Pt,Ye+Ie),this.planes[1].distance=-(yn+Je),jn.e.set(this.planes[2].normal,K+jt,xe+Qt,Ye+Xe),this.planes[2].distance=-(yn+Ge),jn.e.set(this.planes[3].normal,K-jt,xe-Qt,Ye-Xe),this.planes[3].distance=-(yn-Ge),jn.e.set(this.planes[4].normal,K-Rt,xe-qt,Ye-Re),this.planes[4].distance=-(yn-qe),jn.e.set(this.planes[5].normal,K+Rt,xe+qt,Ye+Re),this.planes[5].distance=-(yn+qe),this.planes.forEach(function(Pn){Pn.normalize(),Pn.updatePNVertexFlag()})}}]),Q}(),ur=e(61),Or=e.n(ur);function ei(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Ti(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Ti(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,Rt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,jt=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw jt}}}}function Ti(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var kr,yi,oo,so,co,lo,Hi,Io,ko,Ro,bo,jo,ho,fa,Zo,Hc,Su,Kc,Jc,Qc,mh,Zc,wu,$c,Eu=(Ft=Object(Ur.injectable)(),Yt=Object(Ur.inject)(yr.MeshComponentManager),ee=Object(Ur.inject)(yr.CullableComponentManager),ae=Object(Ur.inject)(yr.GeometryComponentManager),je=Object(Ur.inject)(yr.HierarchyComponentManager),Fe=Object(Ur.inject)(yr.TransformComponentManager),Ft((He=function(){function Q(){xi()(this,Q),di()(this,"mesh",bn,this),di()(this,"cullable",wn,this),di()(this,"geometry",Nn,this),di()(this,"hierarchy",Bn,this),di()(this,"transform",Fn,this),this.planes=void 0}var U;return Ri()(Q,[{key:"setFrustumPlanes",value:function(L){this.planes=L}},{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var J,jt,Rt,K=this;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:J=ei(L);try{for(Rt=function(){var qt=jt.value,xe=(qt.getScene(),qt.getCamera());K.mesh.forEach(function(Ie,Xe){var Re,Ye,Je=K.hierarchy.getComponentByEntity(Ie),Ge=K.cullable.getComponentByEntity(Ie),qe=Xe.geometry,yn=K.transform.getComponentByEntity(Ie);if(qe&&qe.aabb&&yn&&Xe.aabbDirty){var Pn=yn.worldTransform,En=qe.aabb,Ln=En.center,Zn=En.halfExtents,Qn=jn.e.transformMat4(jn.e.create(),Ln,Pn),qn=(Re=Pn,(Ye=jn.a.create())[0]=Re[0],Ye[1]=Re[1],Ye[2]=Re[2],Ye[3]=Re[4],Ye[4]=Re[5],Ye[5]=Re[6],Ye[6]=Re[8],Ye[7]=Re[9],Ye[8]=Re[10],Ye),fr=jn.e.transformMat3(jn.e.create(),Zn,qn);Xe.aabb.update(Qn,fr),Xe.aabbDirty=!1}if(Ge&&qe){var br=K.cullable.getComponentByEntity((Je==null?void 0:Je.parentID)||-1);Ge.visibilityPlaneMask=K.computeVisibilityWithPlaneMask(Xe.aabb,(br==null?void 0:br.visibilityPlaneMask)||W.INDETERMINATE,K.planes||xe.getFrustum().planes),Ge.visible=Ge.visibilityPlaneMask!==W.OUTSIDE}})},J.s();!(jt=J.n()).done;)Rt()}catch(Qt){J.e(Qt)}finally{J.f()}case 2:case"end":return Pt.stop()}},w)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(L,J,jt){if(J===W.OUTSIDE||J===W.INSIDE)return J;for(var Rt=W.INSIDE,K=0,Pt=jt.length;K<Pt;++K){var Qt=K<31?1<<K:0;if(!(K<31&&(J&Qt)==0)){var qt=jt[K],xe=qt.normal,Ie=qt.distance;if(jn.e.dot(xe,L.getNegativeFarPoint(jt[K]))+Ie>0)return W.OUTSIDE;jn.e.dot(xe,L.getPositiveFarPoint(jt[K]))+Ie>0&&(Rt|=Qt)}}return Rt}}]),Q}(),bn=Mi()(He.prototype,"mesh",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=Mi()(He.prototype,"cullable",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Mi()(He.prototype,"geometry",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bn=Mi()(He.prototype,"hierarchy",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=Mi()(He.prototype,"transform",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=He))||Ue);function Ws(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return qc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return qc(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,Rt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,jt=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw jt}}}}function qc(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var bh,tl,el,nl,oc,rl,il,ol,al,Mu,Au,xs,ac,sl,sc,Os,ul,xh,cl,ll,uc,fl,Ss=(kr=Object(Ur.injectable)(),yi=Object(Ur.inject)(yr.MeshComponentManager),oo=Object(Ur.inject)(yr.GeometryComponentManager),so=Object(Ur.inject)(yr.MaterialComponentManager),co=Object(Ur.inject)(yr.CullableComponentManager),lo=Object(Ur.inject)(yr.TransformComponentManager),Hi=Object(Ur.inject)(yr.HierarchyComponentManager),Io=Object(Ur.inject)(yr.Systems),ko=Object(Ur.named)(yr.FrameGraphSystem),Ro=Object(Ur.inject)(yr.RenderEngine),bo=Object(Ur.inject)(yr.ResourcePool),kr(($c=wu=function(){function Q(){var L=this;xi()(this,Q),di()(this,"mesh",fa,this),di()(this,"geometry",Zo,this),di()(this,"material",Hc,this),di()(this,"cullable",Su,this),di()(this,"transform",Kc,this),di()(this,"hierarchy",Jc,this),di()(this,"frameGraphSystem",Qc,this),di()(this,"engine",mh,this),di()(this,"resourcePool",Zc,this),this.setup=function(J,jt,Rt){var K=J.createRenderTarget(jt,"color buffer",{width:1,height:1,usage:Jn.RENDER_ATTACHMENT|Jn.SAMPLED|Jn.COPY_SRC});Rt.data={output:jt.write(J,K)}},this.execute=function(){var J=eo()(ui.a.mark(function jt(Rt,K,Pt){var Qt,qt,xe,Ie,Xe,Re;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:Qt=Rt.getResourceNode(K.data.output),qt=L.resourcePool.getOrCreateResource(Qt.resource),xe=Ws(Pt),Ye.prev=3,xe.s();case 5:if((Ie=xe.n()).done){Ye.next=11;break}return Xe=Ie.value,Ye.next=9,L.initView(Xe);case 9:Ye.next=5;break;case 11:Ye.next=16;break;case 13:Ye.prev=13,Ye.t0=Ye.catch(3),xe.e(Ye.t0);case 16:return Ye.prev=16,xe.f(),Ye.finish(16);case 19:Re=L.engine.getCanvas(),qt.resize({width:Re.width,height:Re.height}),L.engine.setScissor({enable:!1}),L.engine.clear({framebuffer:qt,color:Pt[0].getClearColor(),depth:1}),L.engine.useFramebuffer(qt,function(){var Je,Ge=Ws(Pt);try{for(Ge.s();!(Je=Ge.n()).done;){var qe=Je.value;L.renderView(qe)}}catch(yn){Ge.e(yn)}finally{Ge.f()}});case 24:case"end":return Ye.stop()}},jt,null,[[3,13,16,19]])}));return function(jt,Rt,K){return J.apply(this,arguments)}}()}var U,w;return Ri()(Q,[{key:"renderView",value:function(J){var jt=J.getScene(),Rt=J.getCamera(),K=Rt.getViewTransform(),Pt=jn.b.multiply(jn.b.create(),Rt.getPerspective(),K);Rt.getFrustum().extractFromVPMatrix(Pt);var Qt=J.getViewport(),qt=Qt.x,xe=Qt.y,Ie=Qt.width,Xe=Qt.height;this.engine.viewport({x:qt,y:xe,width:Ie,height:Xe});var Re,Ye=Ws(jt.getEntities());try{for(Ye.s();!(Re=Ye.n()).done;){var Je=Re.value;this.renderMesh(Je,{camera:Rt,view:J,viewMatrix:K})}}catch(Ge){Ye.e(Ge)}finally{Ye.f()}}},{key:"renderMesh",value:function(J,jt){var Rt=this,K=jt.camera,Pt=jt.view,Qt=jt.viewMatrix,qt=this.mesh.getComponentByEntity(J);if(qt.visible){this.hierarchy.forEach(function(qe,yn){yn.parentID===J&&Rt.renderMesh(qe,{camera:K,view:Pt,viewMatrix:Qt})});var xe=qt.material,Ie=qt.geometry;if(Ie&&!Ie.dirty&&xe){var Xe=this.transform.getComponentByEntity(J),Re=jn.b.multiply(jn.b.create(),Qt,Xe.worldTransform),Ye=Pt.getViewport(),Je=Ye.width,Ge=Ye.height;xe.setUniform({projectionMatrix:K.getPerspective(),modelViewMatrix:Re,modelMatrix:Xe.worldTransform,viewMatrix:Qt,cameraPosition:K.getPosition(),u_viewport:[Je,Ge]}),qt.model&&(qt.model.draw({uniforms:xe.uniforms.reduce(function(qe,yn){return qe[yn.name]=yn.data,qe},{})}),xe.uniforms.forEach(function(qe){qe.dirty=!1}),xe.dirty=!1)}}}},{key:"initMesh",value:(w=eo()(ui.a.mark(function L(J,jt){var Rt,K,Pt,Qt,qt,xe,Ie,Xe=this;return ui.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(Rt=this.mesh.getComponentByEntity(J)){Re.next=3;break}return Re.abrupt("return");case 3:return K=Rt.material,Pt=Rt.geometry,Re.next=7,this.hierarchy.forEachAsync(function(){var Ye=eo()(ui.a.mark(function Je(Ge,qe){return ui.a.wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(qe.parentID!==J){yn.next=4;break}return yn.next=4,Xe.initMesh(Ge,jt);case 4:case"end":return yn.stop()}},Je)}));return function(Je,Ge){return Ye.apply(this,arguments)}}());case 7:if(Pt&&!Pt.dirty&&K){Re.next=9;break}return Re.abrupt("return");case 9:if(Rt.model){Re.next=21;break}return K.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Qt=this.engine,qt=Qt.createModel,xe=Qt.createAttribute,Ie={vs:K.vertexShaderGLSL,fs:K.fragmentShaderGLSL,attributes:Pt.attributes.reduce(function(Ye,Je){return Je.data&&Je.buffer&&(Ye[Je.name]=xe({buffer:Je.buffer,attributes:Je.attributes,arrayStride:Je.arrayStride,stepMode:Je.stepMode,divisor:Je.stepMode==="vertex"?0:1})),Ye},{}),uniforms:K.uniforms.reduce(function(Ye,Je){return Ye[Je.name]=Je.data,Ye},{}),scissor:{enable:!0,box:function(){return jt.getViewport()}}},K.cull&&(Ie.cull=K.cull),K.depth&&(Ie.depth=K.depth),K.blend&&(Ie.blend=K.blend),Pt.indicesBuffer&&(Ie.elements=Pt.indicesBuffer),Pt.maxInstancedCount&&(Ie.instances=Pt.maxInstancedCount,Ie.count=Pt.vertexCount||3),Re.next=20,qt(Ie);case 20:Rt.model=Re.sent;case 21:case"end":return Re.stop()}},L,this)})),function(L,J){return w.apply(this,arguments)})},{key:"initView",value:(U=eo()(ui.a.mark(function L(J){var jt,Rt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:jt=J.getScene(),Rt=Ws(jt.getEntities()),Qt.prev=2,Rt.s();case 4:if((K=Rt.n()).done){Qt.next=10;break}return Pt=K.value,Qt.next=8,this.initMesh(Pt,J);case 8:Qt.next=4;break;case 10:Qt.next=15;break;case 12:Qt.prev=12,Qt.t0=Qt.catch(2),Rt.e(Qt.t0);case 15:return Qt.prev=15,Rt.f(),Qt.finish(15);case 18:case"end":return Qt.stop()}},L,this,[[2,12,15,18]])})),function(L){return U.apply(this,arguments)})}]),Q}(),wu.IDENTIFIER="Render Pass",ho=$c,fa=Mi()(ho.prototype,"mesh",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zo=Mi()(ho.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Mi()(ho.prototype,"material",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=Mi()(ho.prototype,"cullable",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=Mi()(ho.prototype,"transform",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=Mi()(ho.prototype,"hierarchy",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qc=Mi()(ho.prototype,"frameGraphSystem",[Io,ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=Mi()(ho.prototype,"engine",[Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=Mi()(ho.prototype,"resourcePool",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=ho))||jo),Tu=(bh=Object(Ur.injectable)(),tl=Object(Ur.inject)(yr.RenderEngine),el=Object(Ur.inject)(yr.ResourcePool),bh((al=ol=function Q(){var U=this;xi()(this,Q),di()(this,"engine",rl,this),di()(this,"resourcePool",il,this),this.model=void 0,this.setup=function(w,L,J){var jt=w.getPass(Ss.IDENTIFIER);if(jt){var Rt=w.createRenderTarget(L,"render to screen",{width:1,height:1});J.data={input:L.read(jt.data.output),output:L.write(w,Rt)}}},this.execute=function(){var w=eo()(ui.a.mark(function L(J,jt){var Rt,K,Pt,Qt,qt,xe,Ie;return ui.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(Rt=U.engine,K=Rt.createModel,Pt=Rt.createAttribute,Qt=Rt.createBuffer,U.model){Xe.next=6;break}return Xe.next=4,K({vs:U.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:U.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Pt({buffer:Qt({data:[-4,-4,4,-4,0,4],type:Jn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:qt=Xe.sent,U.model=qt;case 6:xe=J.getResourceNode(jt.data.input),Ie=U.resourcePool.getOrCreateResource(xe.resource),U.engine.useFramebuffer(null,function(){U.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),U.model.draw({uniforms:{u_Texture:Ie}})});case 9:case"end":return Xe.stop()}},L)}));return function(L,J){return w.apply(this,arguments)}}(),this.tearDown=function(){U.model=void 0}},ol.IDENTIFIER="Copy Pass",oc=al,rl=Mi()(oc.prototype,"engine",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=Mi()(oc.prototype,"resourcePool",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=oc))||nl);function cc(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return lc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return lc(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,Rt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,jt=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw jt}}}}function lc(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var hl,Cu,dl,Oh,vl,pl,gl,ws,Sh,yl,ml,bl,jd=1,xl=2,fc=(Mu=Object(Ur.injectable)(),Au=Object(Ur.inject)(yr.RenderEngine),xs=Object(Ur.inject)(yr.ResourcePool),ac=Object(Ur.inject)(yr.RenderPassFactory),sl=Object(Ur.inject)(yr.MeshComponentManager),Mu((fl=uc=function(){function Q(){var U=this;xi()(this,Q),di()(this,"engine",ul,this),di()(this,"resourcePool",xh,this),di()(this,"renderPassFactory",cl,this),di()(this,"mesh",ll,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(w,L,J){var jt=w.createRenderTarget(L,"picking fbo",{width:1,height:1});J.data={output:L.write(w,jt)},L.hasSideEffect=!0},this.execute=function(){var w=eo()(ui.a.mark(function L(J,jt,Rt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(U.views=Rt,!U.alreadyInRendering){qt.next=3;break}return qt.abrupt("return");case 3:K=cc(Rt);try{for(Qt=function(){var Ie=Pt.value,Xe=Ie.getViewport(),Re=Xe.width,Ye=Xe.height;U.alreadyInRendering=!0;var Je=J.getResourceNode(jt.data.output);U.pickingFBO=U.resourcePool.getOrCreateResource(Je.resource),U.pickingFBO.resize({width:Re,height:Ye}),U.engine.useFramebuffer(U.pickingFBO,function(){U.engine.clear({framebuffer:U.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Ge,qe=U.renderPassFactory(Ss.IDENTIFIER),yn=[],Pn=cc(Ie.getScene().getEntities());try{for(Pn.s();!(Ge=Pn.n()).done;){var En=Ge.value,Ln=U.mesh.getComponentByEntity(En);Ln.material.setUniform("u_PickingStage",jd),yn.push(Ln)}}catch(Zn){Pn.e(Zn)}finally{Pn.f()}qe.renderView(Ie),yn.forEach(function(Zn){Zn.material.setUniform("u_PickingStage",xl)}),U.alreadyInRendering=!1})},K.s();!(Pt=K.n()).done;)Qt()}catch(xe){K.e(xe)}finally{K.f()}case 5:case"end":return qt.stop()}},L)}));return function(L,J,jt){return w.apply(this,arguments)}}(),this.pick=function(w,L){var J,jt,Rt=w.x,K=w.y,Pt=U.engine,Qt=Pt.readPixels,qt=Pt.useFramebuffer,xe=L.getViewport(),Ie=xe.width,Xe=xe.height,Re=Rt*window.devicePixelRatio,Ye=K*window.devicePixelRatio;if(!(Re>Ie||Re<0||Ye>Xe||Ye<0))return qt(U.pickingFBO,function(){var Je,Ge;(J=Qt({x:Math.round(Re),y:Math.round(Xe-(K+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:U.pickingFBO}))[0]===0&&J[1]===0&&J[2]===0||(Je=J,Ge=ya()(Je,3),jt=Ge[0]+256*Ge[1]+65536*Ge[2]-1,U.highlightEnabled&&U.highlightPickedFeature(J,L))}),jt}}return Ri()(Q,[{key:"enableHighlight",value:function(w){this.highlightEnabled=w}},{key:"setHighlightColor",value:function(w){this.highlightColor=w}},{key:"highlightPickedFeature",value:function(w,L){if(w){var J,jt=cc(L.getScene().getEntities());try{for(jt.s();!(J=jt.n()).done;){var Rt=J.value,K=this.mesh.getComponentByEntity(Rt).material;K.setUniform("u_PickingStage",xl),K.setUniform("u_PickingColor",[w[0],w[1],w[2]]),K.setUniform("u_HighlightColor",this.highlightColor)}}catch(Pt){jt.e(Pt)}finally{jt.f()}}}}]),Q}(),uc.IDENTIFIER="PixelPicking Pass",Os=fl,ul=Mi()(Os.prototype,"engine",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Mi()(Os.prototype,"resourcePool",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl=Mi()(Os.prototype,"renderPassFactory",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=Mi()(Os.prototype,"mesh",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=Os))||sc),hc=(hl=Object(Ur.injectable)(),Cu=Object(Ur.inject)(yr.Systems),dl=Object(Ur.named)(yr.FrameGraphSystem),Oh=Object(Ur.inject)(yr.RenderPassFactory),vl=Object(Ur.inject)(yr.ConfigService),pl=Object(Ur.inject)(yr.ResourcePool),hl((ws=function(){function Q(){xi()(this,Q),di()(this,"frameGraphSystem",Sh,this),di()(this,"renderPassFactory",yl,this),di()(this,"configService",ml,this),di()(this,"resourcePool",bl,this)}var U;return Ri()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var J,jt,Rt,K,Pt,Qt,qt,xe;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:J=this.renderPassFactory(Ss.IDENTIFIER),jt=J.setup,Rt=J.execute,this.frameGraphSystem.addPass(Ss.IDENTIFIER,jt,Rt),K=this.renderPassFactory(Tu.IDENTIFIER),Pt=K.setup,Qt=K.execute,qt=K.tearDown,xe=this.frameGraphSystem.addPass(Tu.IDENTIFIER,Pt,Qt,qt),this.frameGraphSystem.present(xe.data.output);case 5:case"end":return Ie.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(L,J){return this.renderPassFactory(fc.IDENTIFIER).pick(L,J)}}]),Q}(),Sh=Mi()(ws.prototype,"frameGraphSystem",[Cu,dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=Mi()(ws.prototype,"renderPassFactory",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=Mi()(ws.prototype,"configService",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Mi()(ws.prototype,"resourcePool",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=ws))||gl);function dc(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ol,Sl,wl,Xs,El,Ys,Ml,Al,Tl,wh=function(Q){Qo()(w,Q);var U=dc(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).parentID=void 0,Object.assign(Eo()(J),L),J}return w}(ra),Eh=(Ol=Object(Ur.injectable)(),Sl=Object(Ur.inject)(yr.HierarchyComponentManager),wl=Object(Ur.inject)(yr.TransformComponentManager),Xs=Object(Ur.inject)(yr.MeshComponentManager),Ol((Ys=function(){function Q(){xi()(this,Q),di()(this,"hierarchy",Ml,this),di()(this,"transform",Al,this),di()(this,"mesh",Tl,this)}var U;return Ri()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var L=this;this.transform.forEach(function(J,jt){jt.isDirty()&&(L.setMeshAABBDirty(J),jt.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var L=this;this.hierarchy.forEach(function(J,jt){var Rt=L.transform.getComponentByEntity(J),K=L.transform.getComponentByEntity(jt.parentID);Rt!==null&&K!==null&&Rt.updateTransformWithParent(K)})}},{key:"attach",value:function(L,J,jt){if(this.hierarchy.contains(L)&&this.detach(L),this.hierarchy.create(L,{parentID:J}),this.setMeshAABBDirty(J),this.hierarchy.getCount()>1){for(var Rt=this.hierarchy.getCount()-1;Rt>0;--Rt)for(var K=this.hierarchy.getEntity(Rt),Pt=0;Pt<Rt;++Pt)if(this.hierarchy.getComponent(Pt).parentID===K){this.hierarchy.moveItem(Rt,Pt),++Rt;break}}this.hierarchy.getComponentByEntity(L);var Qt=this.transform.getComponentByEntity(J);Qt===null&&(Qt=this.transform.create(J));var qt=this.transform.getComponentByEntity(L);qt===null&&(qt=this.transform.create(L),Qt=this.transform.getComponentByEntity(J)),!jt&&Qt&&(qt.matrixTransform(jn.b.invert(jn.b.create(),Qt.worldTransform)),qt.updateTransform()),Qt&&qt.updateTransformWithParent(Qt)}},{key:"detach",value:function(L){if(this.hierarchy.getComponentByEntity(L)!==null){var J=this.transform.getComponentByEntity(L);J!==null&&J.applyTransform(),this.hierarchy.removeKeepSorted(L),this.setMeshAABBDirty(L)}}},{key:"detachChildren",value:function(L){for(var J=0;J<this.hierarchy.getCount();){var jt;if(((jt=this.hierarchy.getComponent(J))===null||jt===void 0?void 0:jt.parentID)===L){var Rt=this.hierarchy.getEntity(J);this.detach(Rt)}else++J}}},{key:"setMeshAABBDirty",value:function(L){var J=this.mesh.getComponentByEntity(L);J&&(J.aabbDirty=!0)}}]),Q}(),Ml=Mi()(Ys.prototype,"hierarchy",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Mi()(Ys.prototype,"transform",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tl=Mi()(Ys.prototype,"mesh",[Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=Ys))||El);function Mh(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vc=function(Q){Qo()(w,Q);var U=Mh(w);function w(L){var J,jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe,Re,Ye,Je,Ge,qe;return xi()(this,w),(J=U.call(this,L)).dirtyFlag=void 0,J.localTranslation=jn.e.fromValues(0,0,0),J.localRotation=jn.c.fromValues(0,0,0,1),J.localScale=jn.e.fromValues(1,1,1),J.localTransform=jn.b.create(),J.worldTransform=jn.b.create(),J.getRotation=(jt=jn.c.create(),function(){return jn.b.getRotation(jt,J.worldTransform),jt}),J.getScale=(Rt=jn.e.create(),function(){return jn.b.getScaling(Rt,J.worldTransform),Rt}),J.getPosition=(K=jn.e.create(),function(){return jn.b.getTranslation(K,J.worldTransform),K}),J.getLocalMatrix=(Pt=jn.b.create(),function(){return jn.b.fromRotationTranslationScale(Pt,J.localRotation,J.localTranslation,J.localScale),Pt}),J.matrixTransform=(Qt=jn.b.create(),function(yn){jn.b.multiply(Qt,J.getLocalMatrix(),yn),jn.b.getScaling(J.localScale,Qt),jn.b.getTranslation(J.localTranslation,Qt),jn.b.getRotation(J.localRotation,Qt)}),J.rotateRollPitchYaw=(qt=jn.c.create(),xe=jn.c.create(),Ie=jn.c.create(),function(yn,Pn,En){J.setDirty(),jn.c.fromEuler(qt,yn,0,0),jn.c.fromEuler(xe,0,Pn,0),jn.c.fromEuler(Ie,0,0,En),jn.c.multiply(J.localRotation,qt,J.localRotation),jn.c.multiply(J.localRotation,J.localRotation,xe),jn.c.multiply(J.localRotation,Ie,J.localRotation),jn.c.normalize(J.localRotation,J.localRotation)}),J.lerp=(Xe=jn.e.create(),Re=jn.c.create(),Ye=jn.e.create(),Je=jn.e.create(),Ge=jn.c.create(),qe=jn.e.create(),function(yn,Pn,En){J.setDirty(),jn.b.getScaling(Xe,yn.worldTransform),jn.b.getTranslation(Ye,yn.worldTransform),jn.b.getRotation(Re,yn.worldTransform),jn.b.getScaling(Je,Pn.worldTransform),jn.b.getTranslation(qe,Pn.worldTransform),jn.b.getRotation(Ge,Pn.worldTransform),jn.e.lerp(J.localScale,Xe,Je,En),jn.c.slerp(J.localRotation,Re,Ge,En),jn.e.lerp(J.localTranslation,Ye,qe,En)}),J}return Ri()(w,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var J=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];J?this.dirtyFlag|=w.DIRTY:this.dirtyFlag&=~w.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),jn.b.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(J){jn.b.multiply(this.worldTransform,this.getLocalMatrix(),J.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),jn.b.getScaling(this.localScale,this.worldTransform),jn.b.getTranslation(this.localTranslation,this.worldTransform),jn.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=jn.e.fromValues(0,0,0),this.localRotation=jn.c.fromValues(0,0,0,1),this.localScale=jn.e.fromValues(1,1,1)}},{key:"translate",value:function(J){return this.setDirty(),jn.e.add(this.localTranslation,this.localTranslation,J),this}},{key:"scale",value:function(J){return this.setDirty(),jn.e.multiply(this.localScale,this.localScale,J),this}},{key:"rotate",value:function(J){return this.setDirty(),jn.c.multiply(this.localRotation,this.localRotation,J),jn.c.normalize(this.localRotation,this.localRotation),this}}]),w}(ra);vc.DIRTY=1,e(143),e(144),e(229),e(145),e(146),e(113),e(147),e(50),e(148),e(230);var pc,Cl,jl,ju,Il,Pl=e(154),Ah=e(251),Th=e.n(Ah),Iu=(pc=Object(Ur.injectable)(),Cl=Object(Ur.inject)(yr.RenderEngine),pc((ju=function(){function Q(){xi()(this,Q),di()(this,"engine",Il,this),this.resourcePool={}}return Ri()(Q,[{key:"getOrCreateResource",value:function(w){if(!this.resourcePool[w.name]){var L=w.descriptor,J=L.width,jt=L.height,Rt=L.usage;this.resourcePool[w.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:J,height:jt,wrapS:Jn.CLAMP_TO_EDGE,wrapT:Jn.CLAMP_TO_EDGE,usage:Rt})})}return this.resourcePool[w.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Q}(),Il=Mi()(ju.prototype,"engine",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jl=ju))||jl);function Ch(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var gc,Dl,jh=function(Q){Qo()(w,Q);var U=Ch(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).name=void 0,J.name=L.name||"",J}return w}(ra),kl=Object(Ur.injectable)()(gc=function(){function Q(){xi()(this,Q),this.config=void 0}return Ri()(Q,[{key:"get",value:function(){return this.config}},{key:"set",value:function(w){this.config=w}}]),Q}())||gc,Ih=Object(Ur.injectable)()(Dl=function(){function Q(){xi()(this,Q)}return Ri()(Q,[{key:"listen",value:function(w){}},{key:"on",value:function(w,L){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),Q}())||Dl,Ph=e(252),Rl=e.n(Ph),yc,Dh=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Nl(Q){var U={};return{content:Q=Q.replace(Dh,function(w,L,J){var jt=J.split(":"),Rt=jt[0].trim(),K="";switch(jt.length>1&&(K=jt[1].trim()),L){case"bool":K=K==="true";break;case"float":case"int":K=Number(K);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":K=K?K.replace("[","").replace("]","").split(",").reduce(function(Pt,Qt){return Pt.push(Number(Qt.trim())),Pt},[]):new Array(function(Pt){var Qt=0;switch(Pt){case"vec2":case"ivec2":Qt=2;break;case"vec3":case"ivec3":Qt=3;break;case"vec4":case"ivec4":case"mat2":Qt=4;break;case"mat3":Qt=9;break;case"mat4":Qt=16}return Qt}(L)).fill(0)}return U[Rt]=K,"uniform ".concat(L," ").concat(Rt,`;
`)}),uniforms:U}}function Pu(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Hs(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Pu(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Pu(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Ll=/precision\s+(high|low|medium)p\s+float/,kh=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Rh=Object(Ur.injectable)()(yc=function(){function Q(){xi()(this,Q),this.moduleCache={},this.rawContentCache={}}return Ri()(Q,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(w,L){if(!this.rawContentCache[w]){var J=L.vs,jt=L.fs,Rt=L.uniforms,K=Nl(J),Pt=K.content,Qt=K.uniforms,qt=Nl(jt),xe=qt.content,Ie=qt.uniforms;this.rawContentCache[w]={fs:xe,uniforms:Hs(Hs(Hs({},Qt),Ie),Rt),vs:Pt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(w){var L=this;if(this.moduleCache[w])return this.moduleCache[w];var J=this.rawContentCache[w].vs,jt=this.rawContentCache[w].fs,Rt=this.processModule(J,[],"vs"),K=Rt.content,Pt=Rt.includeList,Qt=this.processModule(jt,[],"fs"),qt=Qt.content,xe=Qt.includeList,Ie=qt,Xe=Rl()(Pt.concat(xe).concat(w)).reduce(function(Re,Ye){return Hs(Hs({},Re),L.rawContentCache[Ye].uniforms)},{});return Ll.test(qt)||(Ie=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+qt),this.moduleCache[w]={fs:Ie.trim(),uniforms:Xe,vs:K.trim()},this.moduleCache[w]}},{key:"processModule",value:function(w,L,J){var jt=this;return{content:w.replace(kh,function(Rt,K){var Pt=K.split(" ")[0].replace(/"/g,"");if(L.indexOf(Pt)>-1)return"";var Qt=jt.rawContentCache[Pt][J];return L.push(Pt),jt.processModule(Qt,L,J).content}),includeList:L}}}]),Q}())||yc,ha=new Ur.Container;Object(Ur.decorate)(Object(Ur.injectable)(),Pl.EventEmitter),ha.bind(yr.IEventEmitter).to(Pl.EventEmitter),Th()(ha,!1);function Nh(){var Q=new Ur.Container;return Q.parent=ha,Q.bind(yr.Systems).to(Eh).inSingletonScope().whenTargetNamed(yr.SceneGraphSystem),Q.bind(yr.Systems).to(yu).inSingletonScope().whenTargetNamed(yr.FrameGraphSystem),Q.bind(yr.Systems).to(Eu).inSingletonScope().whenTargetNamed(yr.MeshSystem),Q.bind(yr.Systems).to(rc).inSingletonScope().whenTargetNamed(yr.GeometrySystem),Q.bind(yr.Systems).to(kt).inSingletonScope().whenTargetNamed(yr.MaterialSystem),Q.bind(yr.Systems).to(hc).inSingletonScope().whenTargetNamed(yr.RendererSystem),Q.bind(yr.ResourcePool).to(Iu).inSingletonScope(),Q.bind(yr.ConfigService).to(kl).inSingletonScope(),Q.bind(yr.InteractorService).to(Ih).inSingletonScope(),Q.bind(yr.RenderPass).to(Ss).inSingletonScope().whenTargetNamed(Ss.IDENTIFIER),Q.bind(yr.RenderPass).to(Tu).inSingletonScope().whenTargetNamed(Tu.IDENTIFIER),Q.bind(yr.RenderPass).to(fc).inSingletonScope().whenTargetNamed(fc.IDENTIFIER),Q.bind(yr.RenderPassFactory).toFactory(function(U){return function(w){return U.container.getNamed(yr.RenderPass,w)}}),Q}ha.bind(yr.ShaderModuleService).to(Rh).inSingletonScope(),ha.bind(yr.NameComponentManager).toConstantValue(new ia(jh)),ha.bind(yr.HierarchyComponentManager).toConstantValue(new ia(wh)),ha.bind(yr.TransformComponentManager).toConstantValue(new ia(vc)),ha.bind(yr.MeshComponentManager).toConstantValue(new ia(st)),ha.bind(yr.CullableComponentManager).toConstantValue(new ia(u)),ha.bind(yr.GeometryComponentManager).toConstantValue(new ia(ys)),ha.bind(yr.MaterialComponentManager).toConstantValue(new ia(la));var Bl;e(231),e(149),function(Q){Q.PANSTART="PANSTART",Q.PANEND="PANEND",Q.PANMOVE="PANMOVE",Q.PINCH="PINCH",Q.KEYDOWN="KEYDOWN",Q.KEYUP="KEYUP",Q.HOVER="HOVER"}(Bl||(Bl={})),e(232);var _a,Fl,za,Ks,$o=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(Q){Q.Void="Void",Q.Boolean="Boolean",Q.Float="Float",Q.Uint32="Uint32",Q.Int32="Int32",Q.Vector="Vector",Q.Vector2Float="vec2<f32>",Q.Vector3Float="vec3<f32>",Q.Vector4Float="vec4<f32>",Q.Vector2Boolean="vec2<bool>",Q.Vector3Boolean="vec3<bool>",Q.Vector4Boolean="vec4<bool>",Q.Vector2Uint="vec2<u32>",Q.Vector3Uint="vec3<u32>",Q.Vector4Uint="vec4<u32>",Q.Vector2Int="vec2<i32>",Q.Vector3Int="vec3<i32>",Q.Vector4Int="vec4<i32>",Q.Matrix="Matrix",Q.Matrix3x3Float="mat3x3<f32>",Q.Matrix4x4Float="mat4x4<i32>",Q.Struct="Struct",Q.FloatArray="Float[]",Q.Vector4FloatArray="vec4<f32>[]"})(_a||(_a={})),function(Q){Q.Program="Program",Q.Identifier="Identifier",Q.VariableDeclaration="VariableDeclaration",Q.BlockStatement="BlockStatement",Q.ReturnStatement="ReturnStatement",Q.FunctionDeclaration="FunctionDeclaration",Q.VariableDeclarator="VariableDeclarator",Q.AssignmentExpression="AssignmentExpression",Q.LogicalExpression="LogicalExpression",Q.BinaryExpression="BinaryExpression",Q.ArrayExpression="ArrayExpression",Q.UnaryExpression="UnaryExpression",Q.UpdateExpression="UpdateExpression",Q.FunctionExpression="FunctionExpression",Q.MemberExpression="MemberExpression",Q.ConditionalExpression="ConditionalExpression",Q.ExpressionStatement="ExpressionStatement",Q.CallExpression="CallExpression",Q.NumThreadStatement="NumThreadStatement",Q.StorageStatement="StorageStatement",Q.DoWhileStatement="DoWhileStatement",Q.WhileStatement="WhileStatement",Q.ForStatement="ForStatement",Q.BreakStatement="BreakStatement",Q.ContinueStatement="ContinueStatement",Q.IfStatement="IfStatement",Q.ImportedFunctionStatement="ImportedFunctionStatement"}(Fl||(Fl={})),function(Q){Q.Input="Input",Q.Output="Output",Q.Uniform="Uniform",Q.Workgroup="Workgroup",Q.UniformConstant="UniformConstant",Q.Image="Image",Q.StorageBuffer="StorageBuffer",Q.Private="Private",Q.Function="Function"}(za||(za={})),function(Q){Q.GLSL100="GLSL100",Q.GLSL450="GLSL450",Q.WGSL="WGSL"}(Ks||(Ks={}));function ja(Q){return Q===void 0?0:Q>360||Q<-360?Q%360:Q}function Va(Q,U,w){return Or()(Q)?jn.e.fromValues(Q,U,w):Q.length===3?jn.e.clone(Q):jn.e.fromValues(Q[0],Q[1],Q[2])}var Js,mc,bc,xc,Gl,So,Du,Wa,Ul=function(){function Q(U,w){xi()(this,Q),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=U,this.matrix=jn.b.clone(w.matrix),this.right=jn.e.clone(w.right),this.up=jn.e.clone(w.up),this.forward=jn.e.clone(w.forward),this.position=jn.e.clone(w.position),this.focalPoint=jn.e.clone(w.focalPoint),this.distanceVector=jn.e.clone(w.distanceVector),this.azimuth=w.azimuth,this.elevation=w.elevation,this.roll=w.roll,this.relAzimuth=w.relAzimuth,this.relElevation=w.relElevation,this.relRoll=w.relRoll,this.dollyingStep=w.dollyingStep,this.distance=w.distance}return Ri()(Q,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(w){w.matrix=jn.b.copy(w.matrix,this.matrix),w.right=jn.e.copy(w.right,this.right),w.up=jn.e.copy(w.up,this.up),w.forward=jn.e.copy(w.forward,this.forward),w.position=jn.e.copy(w.position,this.position),w.focalPoint=jn.e.copy(w.focalPoint,this.focalPoint),w.distanceVector=jn.e.copy(w.distanceVector,this.distanceVector),w.azimuth=this.azimuth,w.elevation=this.elevation,w.roll=this.roll,w.relAzimuth=this.relAzimuth,w.relElevation=this.relElevation,w.relRoll=this.relRoll,w.dollyingStep=this.dollyingStep,w.distance=this.distance}}]),Q}();(function(Q){Q.ORBITING="ORBITING",Q.EXPLORING="EXPLORING",Q.TRACKING="TRACKING"})(So||(So={})),function(Q){Q.DEFAULT="DEFAULT",Q.ROTATIONAL="ROTATIONAL",Q.TRANSLATIONAL="TRANSLATIONAL",Q.CINEMATIC="CINEMATIC"}(Du||(Du={})),function(Q){Q.ORTHOGRAPHIC="ORTHOGRAPHIC",Q.PERSPECTIVE="PERSPECTIVE"}(Wa||(Wa={}));var _l,zl,Vl,Wl,ku,Xl,Yl,Ia=Math.PI/180,is=180/Math.PI,Hl=(Js=Object(Ur.injectable)(),mc=Object(Ur.inject)(yr.InteractorService),Js((xc=function(){function Q(){xi()(this,Q),this.matrix=jn.b.create(),this.right=jn.e.fromValues(1,0,0),this.up=jn.e.fromValues(0,1,0),this.forward=jn.e.fromValues(0,0,1),this.position=jn.e.fromValues(0,0,1),this.focalPoint=jn.e.fromValues(0,0,0),this.distanceVector=jn.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,di()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=jn.b.create(),this.view=void 0,this.following=void 0,this.type=So.EXPLORING,this.trackingMode=Du.DEFAULT,this.projectionMode=Wa.PERSPECTIVE,this.frustum=new sr,this.landmarks=[],this.landmarkAnimationID=void 0}return Ri()(Q,[{key:"clone",value:function(){var w=new Q;return w.setType(this.type,void 0),w.interactor=this.interactor,w}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(w,L){return this.type=w,this.type===So.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===So.TRACKING&&L!==void 0&&this.setTrackingMode(L),this}},{key:"setProjectionMode",value:function(w){return this.projectionMode=w,this}},{key:"setTrackingMode",value:function(w){if(this.type!==So.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=w,this}},{key:"setWorldRotation",value:function(w){this.rotateWorld=w,this._getAngles()}},{key:"getViewTransform",value:function(){return jn.b.invert(jn.b.create(),this.matrix)}},{key:"setMatrix",value:function(w){return this.matrix=w,this._update(),this}},{key:"setAspect",value:function(w){return this.setPerspective(this.near,this.far,this.fov,w),this}},{key:"setViewOffset",value:function(w,L,J,jt,Rt,K){return this.aspect=w/L,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=w,this.view.fullHeight=L,this.view.offsetX=J,this.view.offsetY=jt,this.view.width=Rt,this.view.height=K,this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(w,L,J,jt){return this.projectionMode=Wa.PERSPECTIVE,this.fov=J,this.near=w,this.far=L,this.aspect=jt,jn.b.perspective(this.perspective,this.fov*Ia,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(w,L,J,jt,Rt,K){this.projectionMode=Wa.ORTHOGRAPHIC,this.rright=L,this.left=w,this.top=J,this.bottom=jt,this.near=Rt,this.far=K;var Pt=(this.rright-this.left)/(2*this.zoom),Qt=(this.top-this.bottom)/(2*this.zoom),qt=(this.rright+this.left)/2,xe=(this.top+this.bottom)/2,Ie=qt-Pt,Xe=qt+Pt,Re=xe+Qt,Ye=xe-Qt;if(this.view!==void 0&&this.view.enabled){var Je=(this.rright-this.left)/this.view.fullWidth/this.zoom,Ge=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Xe=(Ie+=Je*this.view.offsetX)+Je*this.view.width,Ye=(Re-=Ge*this.view.offsetY)-Ge*this.view.height}return jn.b.ortho(this.perspective,Ie,Xe,Re,Ye,Rt,K),this}},{key:"setPosition",value:function(w,L,J){return this._setPosition(w,L,J),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(w,L,J){var jt=jn.e.fromValues(0,1,0);if(this.focalPoint=Va(w,L,J),this.trackingMode===Du.CINEMATIC){var Rt=jn.e.subtract(jn.e.create(),this.focalPoint,this.position);w=Rt[0],L=Rt[1],J=Rt[2];var K=jn.e.length(Rt),Pt=Math.asin(L/K)*is,Qt=90+Math.atan2(J,w)*is,qt=jn.b.create();jn.b.rotateY(qt,qt,Qt*Ia),jn.b.rotateX(qt,qt,Pt*Ia),jt=jn.e.transformMat4(jn.e.create(),[0,1,0],qt)}return jn.b.invert(this.matrix,jn.b.lookAt(jn.b.create(),this.position,this.focalPoint,jt)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(w){if(!(this.distance===w||w<0)){this.distance=w,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var L=jn.e.create();w=this.distance;var J=this.forward,jt=this.focalPoint;return L[0]=w*J[0]+jt[0],L[1]=w*J[1]+jt[1],L[2]=w*J[2]+jt[2],this._setPosition(L),this}}},{key:"changeAzimuth",value:function(w){return this.setAzimuth(this.azimuth+w),this}},{key:"changeElevation",value:function(w){return this.setElevation(this.elevation+w),this}},{key:"changeRoll",value:function(w){return this.setRoll(this.roll+w),this}},{key:"setAzimuth",value:function(w){return this.azimuth=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(w){return this.elevation=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(w){return this.roll=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(w,L,J){if(this.type===So.EXPLORING){w=ja(w),L=ja(L),J=ja(J);var jt=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*L*Ia),Rt=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*w*Ia),K=jn.c.setAxisAngle(jn.c.create(),[0,0,1],J*Ia),Pt=jn.c.multiply(jn.c.create(),Rt,jt);Pt=jn.c.multiply(jn.c.create(),Pt,K);var Qt=jn.b.fromQuat(jn.b.create(),Pt);jn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),jn.b.multiply(this.matrix,this.matrix,Qt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+L)>90)return;this.relElevation=ja(L),this.relAzimuth=ja(w),this.relRoll=ja(J),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(w,L){var J=Va(w,L,0),jt=jn.e.clone(this.position);return jn.e.add(jt,jt,jn.e.scale(jn.e.create(),this.right,J[0])),jn.e.add(jt,jt,jn.e.scale(jn.e.create(),this.up,J[1])),this._setPosition(jt),this}},{key:"dolly",value:function(w){var L=this.forward,J=jn.e.clone(this.position),jt=w*this.dollyingStep;return J[0]+=jt*L[0],J[1]+=jt*L[1],J[2]+=jt*L[2],this._setPosition(J),this.type===So.ORBITING||this.type===So.EXPLORING?this._getDistance():this.type===So.TRACKING&&jn.e.add(this.focalPoint,J,this.distanceVector),this}},{key:"createLandmark",value:function(w,L){var J=this.clone();J.setPosition(L.position),J.setFocalPoint(L.focalPoint),L.roll!==void 0&&J.setRoll(L.roll);var jt=new Ul(w,J);return this.landmarks.push(jt),jt}},{key:"setLandmark",value:function(w){var L=new Ul(w,this);return this.landmarks.push(L),this}},{key:"gotoLandmark",value:function(w){var L=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,jt=this.landmarks.find(function(xe){return xe.name===w});if(jt){if(J===0)return void jt.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Rt,K=jt.getPosition(),Pt=jt.getFocalPoint(),Qt=jt.getRoll(),qt=function xe(Ie){Rt===void 0&&(Rt=Ie);var Xe,Re=Ie-Rt,Ye=(1-Math.cos(Re/J*Math.PI))/2,Je=jn.e.create(),Ge=jn.e.create();if(jn.e.lerp(Je,L.focalPoint,Pt,Ye),jn.e.lerp(Ge,L.position,K,Ye),Xe=L.roll*(1-Ye)+Qt*Ye,L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Xe),L.computeMatrix(),!(jn.e.dist(Je,Pt)+jn.e.dist(Ge,K)>.01))return L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Xe),L.computeMatrix(),void L.interactor.connect();Re<J&&(L.landmarkAnimationID=window.requestAnimationFrame(xe))};window.requestAnimationFrame(qt)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var w,L,J=jn.c.setAxisAngle(jn.c.create(),[0,0,1],this.roll*Ia);jn.b.identity(this.matrix),w=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.elevation*Ia),L=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.azimuth*Ia);var jt=jn.c.multiply(jn.c.create(),L,w);jt=jn.c.multiply(jn.c.create(),jt,J);var Rt=jn.b.fromQuat(jn.b.create(),jt);this.type===So.ORBITING||this.type===So.EXPLORING?(jn.b.translate(this.matrix,this.matrix,this.focalPoint),jn.b.multiply(this.matrix,this.matrix,Rt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===So.TRACKING&&(jn.b.translate(this.matrix,this.matrix,this.position),jn.b.multiply(this.matrix,this.matrix,Rt))}},{key:"_setPosition",value:function(w,L,J){this.position=Va(w,L,J);var jt=this.matrix;jt[12]=this.position[0],jt[13]=this.position[1],jt[14]=this.position[2],jt[15]=1}},{key:"_getAxes",value:function(){jn.e.copy(this.right,Va(jn.f.transformMat4(jn.f.create(),[1,0,0,0],this.matrix))),jn.e.copy(this.up,Va(jn.f.transformMat4(jn.f.create(),[0,1,0,0],this.matrix))),jn.e.copy(this.forward,Va(jn.f.transformMat4(jn.f.create(),[0,0,1,0],this.matrix))),jn.e.normalize(this.right,this.right),jn.e.normalize(this.up,this.up),jn.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var w=this.distanceVector[0],L=this.distanceVector[1],J=this.distanceVector[2],jt=jn.e.length(this.distanceVector);if(jt===0)return this.elevation=0,void(this.azimuth=0);this.type===So.TRACKING||this.rotateWorld?(this.elevation=Math.asin(L/jt)*is,this.azimuth=Math.atan2(-w,-J)*is):(this.elevation=-Math.asin(L/jt)*is,this.azimuth=-Math.atan2(-w,-J)*is)}},{key:"_getPosition",value:function(){jn.e.copy(this.position,Va(jn.f.transformMat4(jn.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){jn.e.transformMat3(this.distanceVector,[0,0,-this.distance],jn.a.fromMat4(jn.a.create(),this.matrix)),jn.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=jn.e.subtract(jn.e.create(),this.focalPoint,this.position),this.distance=jn.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),Q}(),Gl=Mi()(xc.prototype,"interactor",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=xc))||bc),Kl=e(44),Ru=e.n(Kl),Lh=e(26),Jl=e.n(Lh),Wr=e(7);function Oc(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ql(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Nu(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Ql(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Ql(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Zl,Qs,$l,ql,tf,ef,nf,Xa,rf,of,af,sf,Lu,uf,Pa,Es,xa,qo,Zs,Ya,os,Bu,Oa,Ko,Bo,Sa,wa,Fu,cf=(_l=Object(Ur.injectable)(),zl=Object(Ur.inject)(yr.RenderEngine),Vl=Object(Ur.inject)(yr.ConfigService),_l((ku=function(){function Q(){xi()(this,Q),di()(this,"engine",Xl,this),di()(this,"configService",Yl,this),this.entity=na(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var U,w,L;return Ri()(Q,[{key:"init",value:function(){var jt=this.configService.get(),Rt=jt.canvas,K=jt.engineOptions;this.initPromise=this.engine.init(Nu({canvas:Rt||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},K))}},{key:"setBundle",value:function(jt){this.compiledBundle=JSON.parse(JSON.stringify(jt))}},{key:"setDispatch",value:function(jt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=jt),this}},{key:"setMaxIteration",value:function(jt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=jt),this}},{key:"setBinding",value:function(jt,Rt){var K=this;if(typeof jt=="string"){var Pt=Or()(Rt)||Ru()(Rt)||Jl()(Rt);if(this.compiledBundle&&this.compiledBundle.context){var Qt=this.compiledBundle.context.defines.find(function(xe){return xe.name===jt});if(Qt)return Qt.value=Rt,this;var qt=this.compiledBundle.context.uniforms.find(function(xe){return xe.name===jt});qt&&(Pt?(qt.data=Rt,qt.isReferer=!1,qt.storageClass===za.Uniform?this.model&&this.model.updateUniform(jt,Rt):this.model&&this.model.updateBuffer(jt,Rt)):(qt.isReferer=!0,qt.data=Rt))}}else Object.keys(jt).forEach(function(xe){K.setBinding(xe,jt[xe])});return this}},{key:"execute",value:(L=eo()(ui.a.mark(function J(){var jt,Rt,K=this,Pt=arguments;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(jt=Pt.length>0&&Pt[0]!==void 0?Pt[0]:1,!this.dirty){Qt.next=6;break}return this.compiledBundle.context&&(jt>1?this.compiledBundle.context.maxIteration=jt:this.compiledBundle.context.maxIteration++),Qt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(qt){return qt.isReferer}).forEach(function(qt){var xe=qt.data,Ie=qt.name;K.model.confirmInput(xe.model,Ie)}),Rt=0;Rt<jt;Rt++)this.model.run();return this.engine.endFrame(),Qt.abrupt("return",this);case 12:case"end":return Qt.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"getOutput",value:(w=eo()(ui.a.mark(function J(){return ui.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.abrupt("return",this.model.readData());case 1:case"end":return jt.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"compile",value:(U=eo()(ui.a.mark(function J(){var jt,Rt,K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.initPromise;case 2:return jt=Nu({},this.compiledBundle.context),Rt=this.engine.supportWebGPU?this.engine.useWGSL?Ks.WGSL:Ks.GLSL450:Ks.GLSL100,K=this.compiledBundle.shaders[Rt],jt.defines.filter(function(Qt){return Qt.runtime}).forEach(function(Qt){var qt="".concat("__DefineValuePlaceholder__").concat(Qt.name);K=K.replace(qt,"".concat(Qt.value))}),jt.shader=K,jt.uniforms.forEach(function(Qt){if(!Qt.data&&Qt.storageClass===za.StorageBuffer){var qt=1;Qt.type===_a.FloatArray?qt=1:Qt.type===_a.Vector4FloatArray&&(qt=4),Qt.data=new Float32Array(jt.output.length*qt).fill(0)}}),this.compiledBundle.context=jt,Pt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Pt.sent;case 12:case"end":return Pt.stop()}},J,this)})),function(){return U.apply(this,arguments)})}]),Q}(),Xl=Mi()(ku.prototype,"engine",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yl=Mi()(ku.prototype,"configService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=ku))||Wl),Ha=(Zl=Object(Ur.injectable)(),Qs=Object(Ur.inject)(yr.MeshComponentManager),$l=Object(Ur.inject)(yr.CullableComponentManager),ql=Object(Ur.inject)(yr.TransformComponentManager),tf=Object(Ur.inject)(yr.Systems),ef=Object(Ur.named)(yr.SceneGraphSystem),Zl((uf=Lu=function(){function Q(){xi()(this,Q),this.attributes={},this.config=void 0,di()(this,"mesh",rf,this),di()(this,"cullable",of,this),di()(this,"transform",af,this),di()(this,"sceneGraphSystem",sf,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Ri()(Q,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(w){this.config=w}},{key:"setEntity",value:function(w){this.entity=w,this.cullable.create(w),this.meshComponent=this.mesh.create(w),this.transformComponent=this.transform.create(w),this.onEntityCreated()}},{key:"setMaterial",value:function(w){return this.meshComponent.material=w,this}},{key:"setGeometry",value:function(w){return this.meshComponent.geometry=w,this}},{key:"setAttributes",value:function(w){var L=this;Object.keys(w).forEach(function(J){w[J]!==void 0&&w[J]!==L.attributes[J]&&(L.onAttributeChanged({name:J,data:w[J]}),L.attributes[J]=w[J])})}},{key:"setVisible",value:function(w){return this.meshComponent.visible=w,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(w){return this.sceneGraphSystem.attach(this.entity,w.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(w){var L=w.name,J=w.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(L),J)}},{key:"convertAttributeName2UniformName",value:function(w){return w}}]),Q}(),Lu.POINT="point",Lu.LINE="line",Lu.GRID="grid",Xa=uf,rf=Mi()(Xa.prototype,"mesh",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Mi()(Xa.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Mi()(Xa.prototype,"transform",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf=Mi()(Xa.prototype,"sceneGraphSystem",[tf,ef],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=Xa))||nf),Bh=e(253),Fh=e.n(Bh),Gh=function(){function Q(U,w){xi()(this,Q),this.attribute=void 0,this.buffer=void 0;var L=w.buffer,J=w.offset,jt=w.stride,Rt=w.normalized,K=w.size,Pt=w.divisor;this.buffer=L,this.attribute={buffer:L.get(),offset:J||0,stride:jt||0,normalized:Rt||!1,divisor:Pt||0},K&&(this.attribute.size=K)}return Ri()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),Uh=(Pa={},mr()(Pa,Jn.POINTS,"points"),mr()(Pa,Jn.LINES,"lines"),mr()(Pa,Jn.LINE_LOOP,"line loop"),mr()(Pa,Jn.LINE_STRIP,"line strip"),mr()(Pa,Jn.TRIANGLES,"triangles"),mr()(Pa,Jn.TRIANGLE_FAN,"triangle fan"),mr()(Pa,Jn.TRIANGLE_STRIP,"triangle strip"),Pa),lf=(Es={},mr()(Es,Jn.STATIC_DRAW,"static"),mr()(Es,Jn.DYNAMIC_DRAW,"dynamic"),mr()(Es,Jn.STREAM_DRAW,"stream"),Es),Sc=(xa={},mr()(xa,Jn.BYTE,"int8"),mr()(xa,Jn.UNSIGNED_INT,"int16"),mr()(xa,Jn.INT,"int32"),mr()(xa,Jn.UNSIGNED_BYTE,"uint8"),mr()(xa,Jn.UNSIGNED_SHORT,"uint16"),mr()(xa,Jn.UNSIGNED_INT,"uint32"),mr()(xa,Jn.FLOAT,"float"),xa),_h=(qo={},mr()(qo,Jn.ALPHA,"alpha"),mr()(qo,Jn.LUMINANCE,"luminance"),mr()(qo,Jn.LUMINANCE_ALPHA,"luminance alpha"),mr()(qo,Jn.RGB,"rgb"),mr()(qo,Jn.RGBA,"rgba"),mr()(qo,Jn.RGBA4,"rgba4"),mr()(qo,Jn.RGB5_A1,"rgb5 a1"),mr()(qo,Jn.RGB565,"rgb565"),mr()(qo,Jn.DEPTH_COMPONENT,"depth"),mr()(qo,Jn.DEPTH_STENCIL,"depth stencil"),qo),ff=(Zs={},mr()(Zs,Jn.DONT_CARE,"dont care"),mr()(Zs,Jn.NICEST,"nice"),mr()(Zs,Jn.FASTEST,"fast"),Zs),hf=(Ya={},mr()(Ya,Jn.NEAREST,"nearest"),mr()(Ya,Jn.LINEAR,"linear"),mr()(Ya,Jn.LINEAR_MIPMAP_LINEAR,"mipmap"),mr()(Ya,Jn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),mr()(Ya,Jn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),mr()(Ya,Jn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ya),$s=(os={},mr()(os,Jn.REPEAT,"repeat"),mr()(os,Jn.CLAMP_TO_EDGE,"clamp"),mr()(os,Jn.MIRRORED_REPEAT,"mirror"),os),Gu=(Bu={},mr()(Bu,Jn.NONE,"none"),mr()(Bu,Jn.BROWSER_DEFAULT_WEBGL,"browser"),Bu),zh=(Oa={},mr()(Oa,Jn.NEVER,"never"),mr()(Oa,Jn.ALWAYS,"always"),mr()(Oa,Jn.LESS,"less"),mr()(Oa,Jn.LEQUAL,"lequal"),mr()(Oa,Jn.GREATER,"greater"),mr()(Oa,Jn.GEQUAL,"gequal"),mr()(Oa,Jn.EQUAL,"equal"),mr()(Oa,Jn.NOTEQUAL,"notequal"),Oa),df=(Ko={},mr()(Ko,Jn.FUNC_ADD,"add"),mr()(Ko,Jn.MIN_EXT,"min"),mr()(Ko,Jn.MAX_EXT,"max"),mr()(Ko,Jn.FUNC_SUBTRACT,"subtract"),mr()(Ko,Jn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ko),qs=(Bo={},mr()(Bo,Jn.ZERO,"zero"),mr()(Bo,Jn.ONE,"one"),mr()(Bo,Jn.SRC_COLOR,"src color"),mr()(Bo,Jn.ONE_MINUS_SRC_COLOR,"one minus src color"),mr()(Bo,Jn.SRC_ALPHA,"src alpha"),mr()(Bo,Jn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),mr()(Bo,Jn.DST_COLOR,"dst color"),mr()(Bo,Jn.ONE_MINUS_DST_COLOR,"one minus dst color"),mr()(Bo,Jn.DST_ALPHA,"dst alpha"),mr()(Bo,Jn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),mr()(Bo,Jn.CONSTANT_COLOR,"constant color"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),mr()(Bo,Jn.CONSTANT_ALPHA,"constant alpha"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),mr()(Bo,Jn.SRC_ALPHA_SATURATE,"src alpha saturate"),Bo),Uu=(Sa={},mr()(Sa,Jn.NEVER,"never"),mr()(Sa,Jn.ALWAYS,"always"),mr()(Sa,Jn.LESS,"less"),mr()(Sa,Jn.LEQUAL,"lequal"),mr()(Sa,Jn.GREATER,"greater"),mr()(Sa,Jn.GEQUAL,"gequal"),mr()(Sa,Jn.EQUAL,"equal"),mr()(Sa,Jn.NOTEQUAL,"notequal"),Sa),Ka=(wa={},mr()(wa,Jn.ZERO,"zero"),mr()(wa,Jn.KEEP,"keep"),mr()(wa,Jn.REPLACE,"replace"),mr()(wa,Jn.INVERT,"invert"),mr()(wa,Jn.INCR,"increment"),mr()(wa,Jn.DECR,"decrement"),mr()(wa,Jn.INCR_WRAP,"increment wrap"),mr()(wa,Jn.DECR_WRAP,"decrement wrap"),wa),vf=(Fu={},mr()(Fu,Jn.FRONT,"front"),mr()(Fu,Jn.BACK,"back"),Fu),Ja=function(){function Q(U,w){xi()(this,Q),this.buffer=void 0;var L=w.data,J=w.usage,jt=w.type;this.buffer=U.buffer({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[jt||Jn.UNSIGNED_BYTE]})}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.buffer.subdata(L,J)}}]),Q}(),pf=e(23),No=e.n(pf);function gf(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Da(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?gf(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):gf(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var yf=0,mf=function(){function Q(w,L){var J=this;xi()(this,Q),this.reGl=w,this.context=L,this.entity=na(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var jt={};this.context.uniforms.forEach(function(qt){var xe=qt.name,Ie=qt.type,Xe=qt.data,Re=qt.isReferer,Ye=qt.storageClass;if(Ye===za.StorageBuffer){if(Re)J.textureCache[xe]={data:void 0},jt["".concat(xe,"Size")]=function(){return Xe.compiledBundle.context.output.textureSize};else{J.textureCache[xe]=J.calcDataTexture(xe,Ie,Xe);var Je=J.textureCache[xe],Ge=Je.textureWidth,qe=Je.isOutput;jt["".concat(xe,"Size")]=[Ge,Ge],qe&&(J.outputTextureName=xe,J.context.needPingpong&&(J.outputTextureName="".concat(xe,"Output"),J.textureCache[J.outputTextureName]=J.calcDataTexture(xe,Ie,Xe)))}jt[xe]=function(){return J.textureCache[xe].texture}}else if(Ye===za.Uniform){if(Xe&&(Array.isArray(Xe)||Ru()(Xe))&&Xe.length>16)throw new Error("invalid data type ".concat(Ie));jt[xe]=function(){return qt.data}}});var Rt=this.getOuputDataTexture(),K=Rt.textureWidth,Pt=Rt.texelCount;jt.u_OutputTextureSize=[K,K],jt.u_OutputTexelCount=Pt,this.context.output.textureSize=[K,K];var Qt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:jt,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Qt)}var U;return Ri()(Q,[{key:"run",value:function(){var L=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){L.computeCommand()})}},{key:"readData",value:(U=eo()(ui.a.mark(function w(){var L,J,jt,Rt,K,Pt,Qt,qt,xe=this;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){L=xe.reGl.read()}),!L){Ie.next=6;break}if(J=this.getOuputDataTexture(),jt=J.originalDataLength,Rt=J.elementsPerTexel,K=J.typedArrayConstructor,Pt=K===void 0?Float32Array:K,Qt=[],Rt!==4)for(qt=0;qt<L.length;qt+=4)Rt===1?Qt.push(L[qt]):Rt===2?Qt.push(L[qt],L[qt+1]):Qt.push(L[qt],L[qt+1],L[qt+2]);else Qt=L;return Ie.abrupt("return",new Pt(Qt.slice(0,jt)));case 6:return Ie.abrupt("return",new Float32Array);case 7:case"end":return Ie.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"confirmInput",value:function(L,J){var jt;this.entity===L.entity?(this.dynamicPingpong=!0,jt=this):jt=L,this.textureCache[J].id=jt.getOuputDataTexture().id,this.textureCache[J].texture=jt.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(L,J){var jt=this.context.uniforms.find(function(Qt){return Qt.name===L});if(jt){var Rt=this.calcDataTexture(L,jt.type,J),K=Rt.texture,Pt=Rt.data;this.textureCache[L].data=Pt,this.textureCache[L].texture=K}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var L=this.context.output.name;this.textureCache[L].id=this.getOuputDataTexture().id,this.textureCache[L].texture=this.getOuputDataTexture().texture}var J=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=J}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var L=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=L}},{key:"cloneDataTexture",value:function(L){var J=L.data,jt=L.textureWidth;return Da(Da({},L),{},{id:yf++,texture:this.reGl.texture({width:jt,height:jt,data:J,type:"float"})})}},{key:"calcDataTexture",value:function(L,J,jt){var Rt=1;J===_a.Vector4FloatArray&&(Rt=4);for(var K=[],Pt=0;Pt<jt.length;Pt+=Rt)Rt===1?K.push(jt[Pt],0,0,0):Rt===2?K.push(jt[Pt],jt[Pt+1],0,0):Rt===3?K.push(jt[Pt],jt[Pt+1],jt[Pt+2],0):Rt===4&&K.push(jt[Pt],jt[Pt+1],jt[Pt+2],jt[Pt+3]);var Qt=jt.length,qt=Math.ceil(Qt/Rt),xe=Math.ceil(Math.sqrt(qt)),Ie=xe*xe;qt<Ie&&K.push.apply(K,No()(new Array(4*(Ie-qt)).fill(0)));var Xe=this.reGl.texture({width:xe,height:xe,data:K,type:"float"});return{id:yf++,data:K,originalDataLength:Qt,typedArrayConstructor:Ru()(jt)?jt.constructor:void 0,textureWidth:xe,texture:Xe,texelCount:qt,elementsPerTexel:Rt,isOutput:L===this.context.output.name}}}]),Q}(),bf=function(){function Q(U,w){xi()(this,Q),this.elements=void 0;var L=w.data,J=w.usage,jt=w.type,Rt=w.count;this.elements=U.elements({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[jt||Jn.UNSIGNED_BYTE],count:Rt})}return Ri()(Q,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(w){var L=w.data;this.elements.subdata(L)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Q}(),Vh=function(){function Q(U,w){xi()(this,Q),this.framebuffer=void 0;var L=w.width,J=w.height,jt=w.color,Rt=w.colors,K=(w.depth,w.stencil,{width:L,height:J});Array.isArray(Rt)&&(K.colors=Rt.map(function(Pt){return Pt.get()})),jt&&typeof jt!="boolean"&&(K.color=jt.get()),this.framebuffer=U.framebuffer(K)}return Ri()(Q,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.framebuffer.resize(L,J)}}]),Q}(),Wh=e(90),Xh=e.n(Wh),xf=e(151),_u=e.n(xf);function tu(Q){var U={};return Object.keys(Q).forEach(function(w){(function L(J,jt,Rt,K){if(jt===null||typeof jt=="number"||typeof jt=="boolean"||Array.isArray(jt)&&typeof jt[0]=="number"||Ru()(jt)||jt===""||"resize"in jt)return void(Rt["".concat(K&&K+".").concat(J)]=jt);_u()(jt)&&Object.keys(jt).forEach(function(Pt){L(Pt,jt[Pt],Rt,"".concat(K&&K+".").concat(J))}),Array.isArray(jt)&&jt.forEach(function(Pt,Qt){Object.keys(Pt).forEach(function(qt){L(qt,Pt[qt],Rt,"".concat(K&&K+".").concat(J,"[").concat(Qt,"]"))})})})(w,Q[w],U,"")}),U}function Of(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ms(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Of(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Of(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Sf,as,wf=function(){function Q(U,w){xi()(this,Q),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=U;var L=w.vs,J=w.fs,jt=w.attributes,Rt=w.uniforms,K=w.primitive,Pt=w.count,Qt=w.elements,qt=w.depth,xe=w.blend,Ie=w.stencil,Xe=w.cull,Re=w.instances,Ye=w.scissor,Je=w.viewport,Ge={};Rt&&(this.uniforms=tu(Rt),Object.keys(Rt).forEach(function(Pn){Ge[Pn]=U.prop(Pn)}));var qe={};Object.keys(jt).forEach(function(Pn){qe[Pn]=jt[Pn].get()});var yn={attributes:qe,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(J),uniforms:Ge,vert:L,primitive:Uh[K===void 0?Jn.TRIANGLES:K]};Re&&(yn.instances=Re),Pt&&(yn.count=Pt),Qt&&(yn.elements=Qt.get()),Ye&&(yn.scissor=Ye),Je&&(yn.viewport=Je),this.initDepthDrawParams({depth:qt},yn),this.initBlendDrawParams({blend:xe},yn),this.initStencilDrawParams({stencil:Ie},yn),this.initCullDrawParams({cull:Xe},yn),this.drawCommand=U(yn)}return Ri()(Q,[{key:"addUniforms",value:function(w){this.uniforms=Ms(Ms({},this.uniforms),tu(w))}},{key:"draw",value:function(w){var L=Ms(Ms({},this.uniforms),tu(w.uniforms||{})),J={};Object.keys(L).forEach(function(jt){var Rt=Xh()(L[jt]);Rt==="boolean"||Rt==="number"||Array.isArray(L[jt])||L[jt].BYTES_PER_ELEMENT?J[jt]=L[jt]:J[jt]=L[jt].get()}),this.drawCommand(J)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(w,L){var J=w.depth;J&&(L.depth={enable:J.enable===void 0||!!J.enable,mask:J.mask===void 0||!!J.mask,func:zh[J.func||Jn.LESS],range:J.range||[0,1]})}},{key:"initBlendDrawParams",value:function(w,L){var J=w.blend;if(J){var jt=J.enable,Rt=J.func,K=J.equation,Pt=J.color,Qt=Pt===void 0?[0,0,0,0]:Pt;L.blend={enable:!!jt,func:{srcRGB:qs[Rt&&Rt.srcRGB||Jn.SRC_ALPHA],srcAlpha:qs[Rt&&Rt.srcAlpha||Jn.SRC_ALPHA],dstRGB:qs[Rt&&Rt.dstRGB||Jn.ONE_MINUS_SRC_ALPHA],dstAlpha:qs[Rt&&Rt.dstAlpha||Jn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:df[K&&K.rgb||Jn.FUNC_ADD],alpha:df[K&&K.alpha||Jn.FUNC_ADD]},color:Qt}}}},{key:"initStencilDrawParams",value:function(w,L){var J=w.stencil;if(J){var jt=J.enable,Rt=J.mask,K=Rt===void 0?-1:Rt,Pt=J.func,Qt=Pt===void 0?{cmp:Jn.ALWAYS,ref:0,mask:-1}:Pt,qt=J.opFront,xe=qt===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:qt,Ie=J.opBack,Xe=Ie===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:Ie;L.stencil={enable:!!jt,mask:K,func:Ms(Ms({},Qt),{},{cmp:Uu[Qt.cmp]}),opFront:{fail:Ka[xe.fail],zfail:Ka[xe.zfail],zpass:Ka[xe.zpass]},opBack:{fail:Ka[Xe.fail],zfail:Ka[Xe.zfail],zpass:Ka[Xe.zpass]}}}}},{key:"initCullDrawParams",value:function(w,L){var J=w.cull;if(J){var jt=J.enable,Rt=J.face,K=Rt===void 0?Jn.BACK:Rt;L.cull={enable:!!jt,face:vf[K]}}}}]),Q}(),Yh=function(){function Q(U,w){xi()(this,Q),this.texture=void 0,this.width=void 0,this.height=void 0;var L=w.data,J=w.type,jt=J===void 0?Jn.UNSIGNED_BYTE:J,Rt=w.width,K=w.height,Pt=w.flipY,Qt=Pt!==void 0&&Pt,qt=w.format,xe=qt===void 0?Jn.RGBA:qt,Ie=w.mipmap,Xe=Ie!==void 0&&Ie,Re=w.wrapS,Ye=Re===void 0?Jn.CLAMP_TO_EDGE:Re,Je=w.wrapT,Ge=Je===void 0?Jn.CLAMP_TO_EDGE:Je,qe=w.aniso,yn=qe===void 0?0:qe,Pn=w.alignment,En=Pn===void 0?1:Pn,Ln=w.premultiplyAlpha,Zn=Ln!==void 0&&Ln,Qn=w.mag,qn=Qn===void 0?Jn.NEAREST:Qn,fr=w.min,br=fr===void 0?Jn.NEAREST:fr,gr=w.colorSpace,hr=gr===void 0?Jn.BROWSER_DEFAULT_WEBGL:gr;this.width=Rt,this.height=K;var Tr={width:Rt,height:K,type:Sc[jt],format:_h[xe],wrapS:$s[Ye],wrapT:$s[Ge],mag:hf[qn],min:hf[br],alignment:En,flipY:Qt,colorSpace:Gu[hr],premultiplyAlpha:Zn,aniso:yn};L&&(Tr.data=L),typeof Xe=="number"?Tr.mipmap=ff[Xe]:typeof Xe=="boolean"&&(Tr.mipmap=Xe),this.texture=U.texture(Tr)}return Ri()(Q,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.texture.resize(L,J),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture.destroy()}}]),Q}(),Hh=Object(Ur.injectable)()(Sf=function(){function Q(){var w=this;xi()(this,Q),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var L=eo()(ui.a.mark(function J(jt){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",new wf(w.gl,jt));case 1:case"end":return Rt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.createAttribute=function(L){return new Gh(w.gl,L)},this.createBuffer=function(L){return new Ja(w.gl,L)},this.createElements=function(L){return new bf(w.gl,L)},this.createTexture2D=function(L){return new Yh(w.gl,L)},this.createFramebuffer=function(L){return new Vh(w.gl,L)},this.useFramebuffer=function(L,J){w.gl({framebuffer:L?L.get():null})(J)},this.createComputeModel=function(){var L=eo()(ui.a.mark(function J(jt){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",new mf(w.gl,jt));case 1:case"end":return Rt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.clear=function(L){var J=L.color,jt=L.depth,Rt=L.stencil,K=L.framebuffer,Pt=K===void 0?null:K,Qt={color:J,depth:jt,stencil:Rt};Qt.framebuffer=Pt===null?Pt:Pt.get(),w.gl.clear(Qt)},this.setScissor=function(L){w.gl&&w.gl._gl&&(L.enable&&L.box?(w.gl._gl.enable(Jn.SCISSOR_TEST),w.gl._gl.scissor(L.box.x,L.box.y,L.box.width,L.box.height)):w.gl._gl.disable(Jn.SCISSOR_TEST),w.gl._refresh())},this.viewport=function(L){var J=L.x,jt=L.y,Rt=L.width,K=L.height;w.gl&&w.gl._gl&&(w.gl._gl.viewport(J,jt,Rt,K),w.gl._refresh())},this.readPixels=function(L){var J=L.framebuffer,jt={x:L.x,y:L.y,width:L.width,height:L.height};return J&&(jt.framebuffer=J.get()),w.gl.read(jt)},this.getCanvas=function(){return w.$canvas},this.getGLContext=function(){return w.gl._gl},this.destroy=function(){w.gl&&(w.gl.destroy(),w.inited=!1)}}var U;return Ri()(Q,[{key:"init",value:(U=eo()(ui.a.mark(function w(L){return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.inited){J.next=2;break}return J.abrupt("return");case 2:return this.$canvas=L.canvas,J.next=5,new Promise(function(jt,Rt){Fh()({canvas:L.canvas,attributes:{alpha:!0,antialias:L.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Pt,Qt){!Pt&&Qt||Rt(Pt),jt(Qt)}})});case 5:this.gl=J.sent,this.inited=!0;case 7:case"end":return J.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Q}())||Sf;function Kh(Q,U,w,L){if(typeof window!="undefined"){var J=document.getElementsByTagName("head")[0],jt=document.createElement("script");jt.setAttribute("type","text/javascript"),jt.setAttribute("src",Q),L&&(jt.id=L),jt.onload=function(){U&&U()},jt.onerror=function(Rt){w&&w("Unable to load script '".concat(Q,"'"),Rt)},J.appendChild(jt)}}function Jh(Q,U){return new Promise(function(w,L){Kh(Q,function(){w()},function(J,jt){L(jt)})})}var Qh=function(){return Ef.apply(this,arguments)};function Ef(){return(Ef=eo()(ui.a.mark(function Q(){return ui.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!as){U.next=2;break}return U.abrupt("return",as);case 2:return U.next=4,Jh("https://preview.babylonjs.com/glslang/glslang.js");case 4:return as=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),U.abrupt("return",as);case 6:case"end":return U.stop()}},Q)}))).apply(this,arguments)}var ka,da,ss,Jo,As,zu,eu,wc=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.attribute=void 0,this.buffer=void 0;var L=w,J=L.buffer,jt=L.offset,Rt=L.stride,K=L.normalized,Pt=L.size,Qt=L.divisor,qt=L.arrayStride,xe=L.attributes,Ie=L.stepMode;this.buffer=J,this.attribute={buffer:J.get(),offset:jt||0,stride:Rt||0,normalized:K||!1,divisor:Qt||0,arrayStride:qt||0,attributes:xe,stepMode:Ie||"vertex"},Pt&&(this.attribute.size=Pt)}return Ri()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),us=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.buffer=void 0;var L=w,J=L.data,jt=L.usage;L.type,this.buffer=this.createBuffer(J instanceof Array?new Float32Array(J):J,jt||Wr.BufferUsage.Vertex|Wr.BufferUsage.CopyDst)}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.setSubData(this.buffer,J,L instanceof Array?new Float32Array(L):L)}},{key:"createBuffer",value:function(w,L){var J=w.byteLength%4,jt={size:w.byteLength+J,usage:L},Rt=this.engine.device.createBuffer(jt);return this.setSubData(Rt,0,w),Rt}},{key:"setSubData",value:function(w,L,J){($o?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(w,L,J)}}]),Q}(),Zh=e(92),nu=e.n(Zh),$h=function(){function Q(J,jt){xi()(this,Q),this.engine=J,this.context=jt,this.entity=na(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var U,w,L;return Ri()(Q,[{key:"init",value:(L=eo()(ui.a.mark(function J(){var jt,Rt,K,Pt,Qt,qt,xe,Ie=this;return ui.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:jt=Xe.sent,Rt=jt.computeStage,K=this.context.uniforms.filter(function(Re){return Re.storageClass===za.StorageBuffer}),Pt=this.context.uniforms.filter(function(Re){return Re.storageClass===za.Uniform}),Qt=Pt.length?1:0,this.bindGroupEntries=[],Qt&&(qt=0,xe=[],Pt.forEach(function(Re){if(Or()(Re.data))Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt}),qt+=4,xe.push(Re.data);else{var Ye,Je=((Ye=Re.data)===null||Ye===void 0?void 0:Ye.length)||1;Je===3&&(Je=4,Re.data.push(0));var Ge=qt/4%4;if(Ge>0){var qe=4-Ge;if(Je>1&&Je<=qe)Je===2&&(qe===3&&(qt+=4,xe.push(0)),xe.push.apply(xe,No()(Re.data)),Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt}));else{for(var yn=0;yn<qe;yn++)qt+=4,xe.push(0);xe.push.apply(xe,No()(Re.data)),Ie.uniformGPUBufferLayout.push({name:Re.name,offset:qt})}}qt+=4*Je}}),this.uniformBuffer=new us(this.engine,{data:xe instanceof Array?new Float32Array(xe):xe,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),K.forEach(function(Re){var Ye;nu()(Re.data)||Re.type!==_a.Vector4FloatArray&&Re.type!==_a.FloatArray||(Re.name===Ie.context.output.name?(Ye=new us(Ie.engine,{data:isFinite(Number(Re.data))?[Re.data]:Re.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.outputBuffer=Ye,Ie.context.output={name:Re.name,length:isFinite(Number(Re.data))?1:Re.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Ye.get()}):Re.isReferer?Re.data.model&&Re.data.model.outputBuffer&&(Ye=Re.data.model.outputBuffer):Ye=new us(Ie.engine,{data:isFinite(Number(Re.data))?[Re.data]:Re.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.vertexBuffers[Re.name]=Ye,Ie.bindGroupEntries.push({binding:Qt,resource:{name:Re.name,refer:Ye?void 0:Re.data,buffer:Ye?Ye.get():void 0}}),Qt++)}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Rt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Xe.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"destroy",value:function(){var jt=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Rt){return jt.vertexBuffers[Rt].destroy()})}},{key:"readData",value:(w=eo()(ui.a.mark(function J(){var jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe;return ui.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(!(jt=this.context.output)){Re.next=16;break}if(Rt=jt.length,K=jt.typedArrayConstructor,!(Pt=jt.gpuBuffer)){Re.next=16;break}return Qt=Rt*K.BYTES_PER_ELEMENT,qt=this.engine.device.createBuffer({size:Qt,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(xe=this.engine.device.createCommandEncoder()).copyBufferToBuffer(Pt,0,qt,0,Qt),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([xe.finish()]),Re.next=12,qt.mapAsync(Wr.MapMode.Read);case 12:return Ie=qt.getMappedRange(),Xe=new K(Ie.slice(0)),qt.unmap(),Re.abrupt("return",Xe);case 16:return Re.abrupt("return",new Float32Array);case 17:case"end":return Re.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"run",value:function(){var jt;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(jt=this.engine.currentComputePass).dispatch.apply(jt,No()(this.context.dispatch)))}},{key:"updateBuffer",value:function(jt,Rt){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Pt=this.vertexBuffers[jt];Pt&&Pt.subData({data:Rt,offset:K})}},{key:"updateUniform",value:function(jt,Rt){var K=this.uniformGPUBufferLayout.find(function(Pt){return Pt.name===jt});K&&this.uniformBuffer.subData({data:Number.isFinite(Rt)?new Float32Array([Rt]):new Float32Array(Rt),offset:K.offset})}},{key:"confirmInput",value:function(jt,Rt){var K=this.vertexBuffers[Rt],Pt=jt.outputBuffer;if(K&&Pt&&K!==Pt){var Qt=this.engine.device.createCommandEncoder(),qt=jt.context.output,xe=qt.length*qt.typedArrayConstructor.BYTES_PER_ELEMENT;Qt.copyBufferToBuffer(Pt.get(),0,K.get(),0,xe),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([Qt.finish()])}}},{key:"compileShaderToSpirV",value:function(jt,Rt,K){return this.compileRawShaderToSpirV(K+jt,Rt)}},{key:"compileRawShaderToSpirV",value:function(jt,Rt){return this.engine.glslang.compileGLSL(jt,Rt)}},{key:"compileComputePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function J(jt){var Rt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Rt=jt,this.engine.options.useWGSL){K.next=6;break}return K.next=5,this.compileShaderToSpirV(jt,"compute",`#version 450
`);case 5:Rt=K.sent;case 6:return K.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Rt,isWHLSL:$o}),entryPoint:"main"}});case 7:case"end":return K.stop()}},J,this)})),function(J){return U.apply(this,arguments)})}]),Q}(),qh=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.indexCount=void 0,this.buffer=void 0;var L=w,J=L.data,jt=(L.usage,L.type,L.count);this.indexCount=jt||0,this.buffer=new us(U,{data:J instanceof Array?new Uint16Array(J):J,usage:Wr.BufferUsage.Index|Wr.BufferUsage.CopyDst})}return Ri()(Q,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),td=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var L=w,J=(L.width,L.height,L.color),jt=(L.colors,L.depth);L.stencil,J&&(this.colorTexture=J),jt&&(this.depthTexture=jt)}return Ri()(Q,[{key:"get",value:function(){var w,L;return{color:(w=this.colorTexture)===null||w===void 0?void 0:w.get(),depth:(L=this.depthTexture)===null||L===void 0?void 0:L.get()}}},{key:"destroy",value:function(){var w,L;(w=this.colorTexture)===null||w===void 0||w.destroy(),(L=this.depthTexture)===null||L===void 0||L.destroy()}},{key:"resize",value:function(w){var L,J,jt=w.width,Rt=w.height;jt===this.width&&Rt===this.height||((L=this.colorTexture)===null||L===void 0||L.resize({width:jt,height:Rt}),(J=this.depthTexture)===null||J===void 0||J.resize({width:jt,height:Rt})),this.width=jt,this.height=Rt}}]),Q}(),ed=(ka={},mr()(ka,Jn.POINTS,Wr.PrimitiveTopology.PointList),mr()(ka,Jn.LINES,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_LOOP,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_STRIP,Wr.PrimitiveTopology.LineStrip),mr()(ka,Jn.TRIANGLES,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_FAN,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_STRIP,Wr.PrimitiveTopology.TriangleStrip),ka),nd=(da={},mr()(da,Jn.NEVER,Wr.CompareFunction.Never),mr()(da,Jn.ALWAYS,Wr.CompareFunction.Always),mr()(da,Jn.LESS,Wr.CompareFunction.Less),mr()(da,Jn.LEQUAL,Wr.CompareFunction.LessEqual),mr()(da,Jn.GREATER,Wr.CompareFunction.Greater),mr()(da,Jn.GEQUAL,Wr.CompareFunction.GreaterEqual),mr()(da,Jn.EQUAL,Wr.CompareFunction.Equal),mr()(da,Jn.NOTEQUAL,Wr.CompareFunction.NotEqual),da),Vu=(ss={},mr()(ss,Jn.FUNC_ADD,Wr.BlendOperation.Add),mr()(ss,Jn.MIN_EXT,Wr.BlendOperation.Min),mr()(ss,Jn.MAX_EXT,Wr.BlendOperation.Max),mr()(ss,Jn.FUNC_SUBTRACT,Wr.BlendOperation.Subtract),mr()(ss,Jn.FUNC_REVERSE_SUBTRACT,Wr.BlendOperation.ReverseSubtract),ss),Wu=(Jo={},mr()(Jo,Jn.ZERO,Wr.BlendFactor.Zero),mr()(Jo,Jn.ONE,Wr.BlendFactor.One),mr()(Jo,Jn.SRC_COLOR,Wr.BlendFactor.SrcColor),mr()(Jo,Jn.ONE_MINUS_SRC_COLOR,Wr.BlendFactor.OneMinusSrcColor),mr()(Jo,Jn.SRC_ALPHA,Wr.BlendFactor.SrcAlpha),mr()(Jo,Jn.ONE_MINUS_SRC_ALPHA,Wr.BlendFactor.OneMinusSrcAlpha),mr()(Jo,Jn.DST_COLOR,Wr.BlendFactor.DstColor),mr()(Jo,Jn.ONE_MINUS_DST_COLOR,Wr.BlendFactor.OneMinusDstColor),mr()(Jo,Jn.DST_ALPHA,Wr.BlendFactor.DstAlpha),mr()(Jo,Jn.ONE_MINUS_DST_ALPHA,Wr.BlendFactor.OneMinusDstAlpha),mr()(Jo,Jn.CONSTANT_COLOR,Wr.BlendFactor.BlendColor),mr()(Jo,Jn.ONE_MINUS_CONSTANT_COLOR,Wr.BlendFactor.OneMinusBlendColor),mr()(Jo,Jn.SRC_ALPHA_SATURATE,Wr.BlendFactor.SrcAlphaSaturated),Jo),rd=(As={},mr()(As,Jn.ALPHA,"r8unorm"),mr()(As,Jn.RGBA,"rgba8unorm"),mr()(As,Jn.DEPTH_COMPONENT,"depth32float"),mr()(As,Jn.DEPTH_STENCIL,"depth24plus-stencil8"),As),Mf=(zu={},mr()(zu,Jn.NEAREST,"nearest"),mr()(zu,Jn.LINEAR,"linear"),zu),ru=(eu={},mr()(eu,Jn.REPEAT,"repeat"),mr()(eu,Jn.CLAMP_TO_EDGE,"clamp-to-edge"),mr()(eu,Jn.MIRRORED_REPEAT,"mirror-repeat"),eu);function id(Q){var U=Q.cull;return U&&U.enable?U.face?U.face===Jn.FRONT?Wr.CullMode.Front:Wr.CullMode.Back:void 0:Wr.CullMode.None}function od(Q){var U=Q.depth,w=(Q.stencil,{compare:Wr.CompareFunction.Always,depthFailOp:Wr.StencilOperation.Keep,failOp:Wr.StencilOperation.Keep,passOp:Wr.StencilOperation.Keep});return{depthWriteEnabled:U&&U.enable,depthCompare:nd[(U==null?void 0:U.func)||Jn.ALWAYS],format:Wr.TextureFormat.Depth24PlusStencil8,stencilFront:w,stencilBack:w,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function iu(Q,U){var w=Q.blend;return[{format:U,alphaBlend:{srcFactor:Wu[w&&w.func&&w.func.srcAlpha||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstAlpha||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.alpha||Jn.FUNC_ADD]},colorBlend:{srcFactor:Wu[w&&w.func&&w.func.srcRGB||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstRGB||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.rgb||Jn.FUNC_ADD]},writeMask:Wr.ColorWrite.All}]}function Ts(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Qa(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Ts(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Ts(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function Af(Q){for(var U=0,w=arguments.length,L=new Array(w>1?w-1:0),J=1;J<w;J++)L[J-1]=arguments[J];for(var jt=0,Rt=L;jt<Rt.length;jt++){var K=Rt[jt];U+=K.length}for(var Pt=new Q(U),Qt=0,qt=0,xe=L;qt<xe.length;qt++){var Ie=xe[qt];Pt.set(Ie,Qt),Qt+=Ie.length}return Pt}var Za,Ea,Tf,Xu,Cf,jf,If,Pf,ou,Ec,Df,kf,ad=function(){function Q(L,J){xi()(this,Q),this.engine=L,this.options=J,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var U,w;return Ri()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,jt,Rt,K,Pt,Qt,qt,xe,Ie,Xe,Re,Ye,Je,Ge,qe,yn,Pn=this;return ui.a.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return J=this.options,jt=J.vs,Rt=J.fs,K=J.attributes,Pt=J.uniforms,Qt=J.primitive,J.count,qt=J.elements,xe=J.depth,Ie=J.blend,Xe=J.stencil,Re=J.cull,J.instances,En.next=3,this.compilePipelineStageDescriptor(jt,Rt,null);case 3:Ye=En.sent,Je=Ye.vertexStage,Ge=Ye.fragmentStage,Pt&&this.buildUniformBindGroup(Pt),qt&&(this.indexBuffer=qt.get(),this.indexCount=qt.indexCount),qe={vertexBuffers:Object.keys(K).map(function(Ln,Zn){var Qn=K[Ln],qn=Qn.get(),fr=qn.arrayStride,br=qn.stepMode,gr=qn.attributes;return Pn.attributeCache[Ln]=Qn,{arrayStride:fr,stepMode:br,attributes:gr}})},yn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ed[Qt||Jn.TRIANGLES],rasterizationState:Qa(Qa({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:id({cull:Re})}),depthStencilState:od({depth:xe,stencil:Xe}),colorStates:iu({blend:Ie},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Je,fragmentStage:Ge,vertexState:qe},this.renderPipeline=this.engine.device.createRenderPipeline(yn);case 11:case"end":return En.stop()}},L,this)})),function(){return w.apply(this,arguments)})},{key:"addUniforms",value:function(J){this.uniforms=Qa(Qa({},this.uniforms),tu(J))}},{key:"draw",value:function(J){var jt=this,Rt=this.engine.getCurrentRenderPass(),K=Qa(Qa({},this.uniforms),tu(J.uniforms||{})),Pt=[];Object.keys(K).forEach(function(Qt){var qt=Xh()(K[Qt]);if(qt==="boolean"||qt==="number"||Array.isArray(K[Qt])||K[Qt].BYTES_PER_ELEMENT){var xe,Ie=(xe=jt.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||xe===void 0?void 0:xe.offset;nu()(Ie)||jt.uniformBuffer.subData({data:K[Qt],offset:Ie})}else{var Xe,Re=(Xe=jt.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||Xe===void 0?void 0:Xe.offset;if(!nu()(Re)){var Ye=K[Qt].get(),Je=Ye.color||Ye,Ge=Je.texture,qe=Je.sampler;qe&&(Pt.push({binding:Re,resource:qe}),Re++),Pt.push({binding:Re,resource:Ge.createView()})}}}),this.uniformBuffer&&(Pt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Pt}),this.renderPipeline&&Rt.setPipeline(this.renderPipeline),Rt.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Rt.setIndexBuffer(this.indexBuffer.get(),Wr.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(Qt,qt){Rt.setVertexBuffer(0+qt,jt.attributeCache[Qt].get().buffer,0)}),this.indexBuffer?Rt.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Rt.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function L(J,jt,Rt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(K=`#version 450
`,Pt=J,Qt=jt,this.engine.options.useWGSL){qt.next=10;break}return qt.next=6,this.compileShaderToSpirV(J,"vertex",K);case 6:return Pt=qt.sent,qt.next=9,this.compileShaderToSpirV(jt,"fragment",K);case 9:Qt=qt.sent;case 10:return qt.abrupt("return",this.createPipelineStageDescriptor(Pt,Qt));case 11:case"end":return qt.stop()}},L,this)})),function(L,J,jt){return U.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(J,jt,Rt){return this.compileRawShaderToSpirV(Rt+J,jt)}},{key:"compileRawShaderToSpirV",value:function(J,jt){return this.engine.glslang.compileGLSL(J,jt)}},{key:"createPipelineStageDescriptor",value:function(J,jt){return{vertexStage:{module:this.engine.device.createShaderModule({code:J,isWHLSL:$o}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:jt,isWHLSL:$o}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Wr.FrontFace.CCW,cullMode:Wr.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(J){var jt=this,Rt=0,K=Af.apply(void 0,[Float32Array].concat(No()(Object.keys(J).map(function(qt){return J[qt]?(jt.uniformGPUBufferLayout.push({name:qt,offset:Rt}),Rt+=4*(J[qt].length||1),J[qt]):[]})))),Pt=[],Qt=!1;K.length&&(Qt=!0,Pt.push({binding:0,visibility:Wr.ShaderStage.Fragment|Wr.ShaderStage.Vertex,type:Wr.BindingType.UniformBuffer})),Object.keys(J).filter(function(qt){return J[qt]===null}).forEach(function(qt,xe){jt.uniformGPUBufferLayout.push({name:qt,offset:2*xe+(Qt?1:0)}),Pt.push({binding:2*xe+(Qt?1:0),visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.Sampler},{binding:2*xe+(Qt?1:0)+1,visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Pt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),Qt&&(this.uniformBuffer=new us(this.engine,{data:K instanceof Array?new Float32Array(K):K,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}))}}]),Q}(),sd=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Ri()(Q,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(w){var L=w.width,J=w.height;L===this.width&&J===this.height||(this.destroy(),this.createTexture()),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var w=this.options,L=(w.data,w.type),J=(L===void 0&&Jn.UNSIGNED_BYTE,w.width),jt=w.height,Rt=(w.flipY,w.format),K=Rt===void 0?Jn.RGBA:Rt,Pt=(w.mipmap,w.wrapS),Qt=Pt===void 0?Jn.CLAMP_TO_EDGE:Pt,qt=w.wrapT,xe=qt===void 0?Jn.CLAMP_TO_EDGE:qt,Ie=w.aniso,Xe=Ie===void 0?0:Ie,Re=(w.alignment,w.premultiplyAlpha,w.mag),Ye=Re===void 0?Jn.NEAREST:Re,Je=w.min,Ge=Je===void 0?Jn.NEAREST:Je,qe=w.colorSpace,yn=(qe===void 0&&Jn.BROWSER_DEFAULT_WEBGL,w.usage);this.width=J,this.height=jt,this.texture=this.engine.device.createTexture({size:[J,jt,1],mipLevelCount:1,sampleCount:1,dimension:Wr.TextureDimension.E2d,format:rd[K],usage:yn||Wr.TextureUsage.Sampled|Wr.TextureUsage.CopyDst}),(!yn||yn&Wr.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ru[Qt],addressModeV:ru[xe],addressModeW:ru[Qt],magFilter:Mf[Ye],minFilter:Mf[Ge],maxAnisotropy:Xe}))}}]),Q}(),ud=Object(Ur.injectable)()(Za=function(){function Q(){var L=this;xi()(this,Q),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(J){J.framebuffer;var jt=J.color,Rt=J.depth,K=J.stencil;L.options.supportCompute&&L.startComputePass(),L.currentRenderTarget?(L.currentRenderPass&&L.endRenderTargetRenderPass(),L.startRenderTargetRenderPass(L.currentRenderTarget,jt||null,!!Rt,!!K)):(L.mainColorAttachments[0].loadValue=jt||Wr.LoadOp.Load,L.mainDepthAttachment.depthLoadValue=Rt||Wr.LoadOp.Load,L.mainDepthAttachment.stencilLoadValue=K?L.clearStencilValue:Wr.LoadOp.Load,L.mainRenderPass&&L.endMainRenderPass(),L.startMainRenderPass())},this.createModel=function(){var J=eo()(ui.a.mark(function jt(Rt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new ad(L,Rt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},jt)}));return function(jt){return J.apply(this,arguments)}}(),this.createAttribute=function(J){return new wc(L,J)},this.createBuffer=function(J){return new us(L,J)},this.createElements=function(J){return new qh(L,J)},this.createTexture2D=function(J){return new sd(L,J)},this.createFramebuffer=function(J){return new td(L,J)},this.useFramebuffer=function(J,jt){L.currentRenderTarget&&L.unbindFramebuffer(L.currentRenderTarget),L.currentRenderTarget=J,L.currentRenderTargetViewDescriptor={dimension:Wr.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Wr.TextureAspect.All},L.currentRenderPass=null,jt()},this.createComputeModel=function(){var J=eo()(ui.a.mark(function jt(Rt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new $h(L,Rt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},jt)}));return function(jt){return J.apply(this,arguments)}}(),this.getCanvas=function(){return L.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(J){var jt=J.x,Rt=J.y,K=J.width,Pt=J.height;L.currentRenderPass?L.transientViewport.x!==1/0?L.getCurrentRenderPass().setViewport(L.transientViewport.x,L.transientViewport.y,L.transientViewport.width,L.transientViewport.height,0,1):(jt!==L.cachedViewport.x||Rt!==L.cachedViewport.y||K!==L.cachedViewport.width||Pt!==L.cachedViewport.height)&&(L.cachedViewport={x:jt,y:Rt,width:K,height:Pt},L.getCurrentRenderPass().setViewport(jt,Rt,K,Pt,0,1)):L.transientViewport={x:jt,y:Rt,width:K,height:Pt}},this.readPixels=function(J){throw new Error("Method not implemented.")}}var U,w;return Ri()(Q,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return this.canvas=J.canvas,this.options=J,this.useWGSL=!!J.useWGSL,this.mainPassSampleCount=J.antialiasing?this.defaultSampleCount:1,jt.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return jt.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(J){return J.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),$o?this.device.getQueue().submit(this.commandBuffers.filter(function(J){return J})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(J){return J}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(U=eo()(ui.a.mark(function L(){var J,jt;return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,Qh();case 2:return this.glslang=Rt.sent,Rt.next=5,(J=navigator)===null||J===void 0||(jt=J.gpu)===null||jt===void 0?void 0:jt.requestAdapter();case 5:return this.adapter=Rt.sent,Rt.next=8,this.adapter.requestDevice();case 8:this.device=Rt.sent;case 9:case"end":return Rt.stop()}},L,this)})),function(){return U.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext($o?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Wr.TextureUsage.OutputAttachment|Wr.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var J={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:Wr.TextureFormat.BGRA8Unorm,usage:Wr.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(J),this.mainColorAttachments=[{attachment:$o?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}];var jt={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:$o?"depth32float-stencil8":Wr.TextureFormat.Depth24PlusStencil8,usage:Wr.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(jt),this.mainDepthAttachment={attachment:$o?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Wr.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(J,jt,Rt){var K,Pt,Qt,qt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xe=(K=J.get().color)===null||K===void 0?void 0:K.texture;xe&&(Qt=xe.createView(this.currentRenderTargetViewDescriptor));var Ie,Xe=(Pt=J.get().depth)===null||Pt===void 0?void 0:Pt.texture;Xe&&(Ie=Xe.createView());var Re=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Qt,loadValue:jt!==null?jt:Wr.LoadOp.Load,storeOp:Wr.StoreOp.Store}],depthStencilAttachment:Xe&&Ie?{attachment:Ie,depthLoadValue:Rt?this.clearDepthValue:Wr.LoadOp.Load,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:qt?this.clearStencilValue:Wr.LoadOp.Load,stencilStoreOp:Wr.StoreOp.Store}:void 0});this.currentRenderPass=Re,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(J){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),Q}())||Za;function cd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ld=(Ea=Object(Ur.injectable)(),Tf=Object(Ur.inject)(yr.Systems),Xu=Object(Ur.named)(yr.MaterialSystem),Cf=Object(Ur.inject)(yr.Systems),jf=Object(Ur.named)(yr.GeometrySystem),If=Object(Ur.inject)(yr.ShaderModuleService),Ea((ou=function(Q){Qo()(w,Q);var U=cd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,jt=new Array(J),Rt=0;Rt<J;Rt++)jt[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(jt)),di()(L,"materialSystem",Ec,Eo()(L)),di()(L,"geometrySystem",Df,Eo()(L)),di()(L,"shaderModuleService",kf,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var jt=J.name,Rt=J.data,K=this.getMeshComponent();K&&K.material&&(jt==="gridColor"?(K.material.setUniform("u_GridColor",Rt),K.material.setUniform("u_GridColor2",Rt)):jt==="gridSize"&&(K.material.setUniform("u_GridSize",Rt),K.material.setUniform("u_GridSize2",Rt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var J=this.shaderModuleService.getModule("grid"),jt=J.vs,Rt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:jt,fragmentShader:Rt});this.setMaterial(Pt);var Qt=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Qt),Pt.setCull({enable:!1,face:Jn.BACK}).setDepth({enable:!0,func:Jn.LESS}),Pt.setUniform(K),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Qt.setIndex([0,3,2,2,1,0]),Qt.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),w}(Ha),Ec=Mi()(ou.prototype,"materialSystem",[Tf,Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=Mi()(ou.prototype,"geometrySystem",[Cf,jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kf=Mi()(ou.prototype,"shaderModuleService",[If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pf=ou))||Pf),Yu=e(94),cs=e(63);function ls(Q,U,w,L,J){au(U,L,-J),au(U,L,J),Q.push(w),Q.push(w)}function au(Q,U,w){Q.push([[U[0],U[1]],w])}var Rf,Mc,Ac,Nf,Cs,$a,Lf,fs,Bf,Ff,Gf;function fd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Uf,Hu,_f,zf,Vf,Tc,Cc,su,jc,Wf,Ic,hd=(Rf=Object(Ur.injectable)(),Mc=Object(Ur.inject)(yr.Systems),Ac=Object(Ur.named)(yr.MaterialSystem),Nf=Object(Ur.inject)(yr.Systems),Cs=Object(Ur.named)(yr.GeometrySystem),$a=Object(Ur.inject)(yr.ShaderModuleService),Rf((fs=function(Q){Qo()(w,Q);var U=fd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,jt=new Array(J),Rt=0;Rt<J;Rt++)jt[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(jt)),di()(L,"materialSystem",Bf,Eo()(L)),di()(L,"geometrySystem",Ff,Eo()(L)),di()(L,"shaderModuleService",Gf,Eo()(L)),L.vertexCount=void 0,L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var jt=J.name,Rt=J.data,K=this.getMeshComponent();if(K&&K.material)switch(jt){case"dashArray":K.material.setUniform("u_dash_array",Rt);break;case"dashOffset":K.material.setUniform("u_dash_offset",Rt);break;case"dashRatio":K.material.setUniform("u_dash_ratio",Rt);break;case"thickness":K.material.setUniform("u_thickness",Rt);break;case"color":var Pt=new Array(this.vertexCount).fill(void 0).map(function(){return Rt}).reduce(function(Qt,qt){return[].concat(No()(Qt),No()(qt))},[]);K.geometry.setAttribute("a_color",Float32Array.from(Pt),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var J=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var jt=this.shaderModuleService.getModule("line"),Rt=jt.vs,K=jt.fs,Pt=jt.uniforms,Qt=this.materialSystem.createShaderMaterial({vertexShader:Rt,fragmentShader:K}),qt=function(Pn,En,Ln){var Zn=[0,0],Qn=[0,0],qn=[0,0],fr=[0,0],br=-1,gr=!1,hr=null,Tr=Object(Yu.create)(),dr=Ln||0,Jr=[],qr=[],wi=[],Cr=[0,0];En&&(Pn=Pn.slice()).push(Pn[0]);for(var pi=Pn.length,Ei=1;Ei<pi;Ei++){var ji=dr,Ao=Pn[Ei-1],go=Pn[Ei],Ii=Ei<Pn.length-1?Pn[Ei+1]:null;if(Cr.push(Ei/pi,Ei/pi),Object(cs.direction)(Zn,go,Ao),hr||(hr=[0,0],Object(cs.normal)(hr,Zn)),gr||(gr=!0,ls(qr,Jr,Ao,hr,1)),wi.push([ji+0,ji+1,ji+2]),Ii){Object(cs.direction)(Qn,Ii,go);var Gi=Object(cs.computeMiter)(qn,fr,Zn,Qn,1),Po=Object(Yu.dot)(qn,hr)<0?-1:1,Fo=Gi>3;if(!isFinite(Gi)){Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2,br=Po;continue}Fo?(Gi=3,Cr.push(Ei/pi),au(Jr,hr,-Po),qr.push(go),au(Jr,fr,Gi*Po),qr.push(go),wi.push(br!==-Po?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),wi.push([ji+2,ji+3,ji+4]),Object(cs.normal)(Tr,Qn),Object(Yu.copy)(hr,Tr),au(Jr,hr,-Po),qr.push(go),dr+=3):(ls(qr,Jr,go,fr,Gi),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),Po=-1,Object(Yu.copy)(hr,fr),dr+=2),br=Po}else Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2}return{normals:Jr,attrIndex:wi,attrPos:qr,attrCounters:Cr}}(this.config.points,!1),xe=qt.normals,Ie=qt.attrIndex,Xe=qt.attrPos,Re=qt.attrCounters,Ye=Xe.length;this.vertexCount=Ye;var Je=this.geometrySystem.createBufferGeometry({vertexCount:Ye});this.setMaterial(Qt),this.setGeometry(Je),Qt.setCull({enable:!1,face:Jn.BACK}).setUniform(Pt),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var Ge=[],qe=[];xe.forEach(function(Pn){var En=Pn[0],Ln=Pn[1];Ge.push([En[0],En[1]]),qe.push(Ln)}),Je.setIndex(Ie.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),Je.setAttribute("a_pos",Float32Array.from(Xe.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var yn=new Array(Ye).fill(void 0).map(function(){return No()(J.config.color)}).reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[]);Je.setAttribute("a_color",Float32Array.from(yn),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Je.setAttribute("a_line_miter",Float32Array.from(qe),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Je.setAttribute("a_line_normal",Float32Array.from(Ge.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Je.setAttribute("a_counters",Float32Array.from(Re),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),w}(Ha),Bf=Mi()(fs.prototype,"materialSystem",[Mc,Ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff=Mi()(fs.prototype,"geometrySystem",[Nf,Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gf=Mi()(fs.prototype,"shaderModuleService",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=fs))||Lf);function Xf(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function dd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Co()(Q);if(U){var J=Co()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vd=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Yf,Hf,Pc,Kf,uu,cu,Ku,Jf,Qf,pd=(Uf=Object(Ur.injectable)(),Hu=Object(Ur.inject)(yr.Systems),_f=Object(Ur.named)(yr.MaterialSystem),zf=Object(Ur.inject)(yr.Systems),Vf=Object(Ur.named)(yr.GeometrySystem),Tc=Object(Ur.inject)(yr.ShaderModuleService),Uf((su=function(Q){Qo()(w,Q);var U=dd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,jt=new Array(J),Rt=0;Rt<J;Rt++)jt[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(jt)),di()(L,"materialSystem",jc,Eo()(L)),di()(L,"geometrySystem",Wf,Eo()(L)),di()(L,"shaderModuleService",Ic,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(J){var jt=J.name,Rt=J.data,K=this.getMeshComponent();K&&K.material&&(jt==="strokeWidth"?K.material.setUniform("u_stroke_width",Rt):jt==="strokeColor"?K.material.setUniform("u_stroke_color",Rt):jt==="strokeOpacity"?K.material.setUniform("u_stroke_opacity",Rt):jt==="opacity"?K.material.setUniform("u_opacity",Rt):jt==="blur"&&K.material.setUniform("u_blur",Rt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var J=this.shaderModuleService.getModule("grid"),jt=J.vs,Rt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:jt,fragmentShader:Rt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Jn.SRC_ALPHA,dstRGB:Jn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});Pt.setUniform(function(xe){for(var Ie=1;Ie<arguments.length;Ie++){var Xe=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?Xf(Object(Xe),!0).forEach(function(Re){mr()(xe,Re,Xe[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(Xe)):Xf(Object(Xe)).forEach(function(Re){Object.defineProperty(xe,Re,Object.getOwnPropertyDescriptor(Xe,Re))})}return xe}({u_device_pixel_ratio:window.devicePixelRatio},K));var Qt=this.buildAttributes(),qt=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Qt.instancedOffsets.length/2,vertexCount:6});qt.setIndex([0,2,1,0,3,2]),qt.setAttribute("position",Float32Array.from(Qt.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),qt.setAttribute("offset",Float32Array.from(Qt.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),qt.setAttribute("color",Float32Array.from(Qt.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),qt.setAttribute("size",Float32Array.from(Qt.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),qt.setAttribute("shape",Float32Array.from(Qt.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),qt.setAttribute("a_PickingColor",Float32Array.from(Qt.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(Pt),this.setGeometry(qt)}},{key:"buildAttribute",value:function(J,jt,Rt){var K,Pt,Qt,qt,xe;(K=jt.instancedPickingColors).push.apply(K,No()([(xe=J.id||Rt)+1&255,xe+1>>8&255,xe+1>>8>>8&255])),jt.instancedShapes.push(vd.indexOf(J.shape||"circle")),(Pt=jt.instancedColors).push.apply(Pt,No()(J.color||[1,0,0,1])),(Qt=jt.instancedOffsets).push.apply(Qt,No()(J.position||[0,0])),(qt=jt.instancedSizes).push.apply(qt,No()(J.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var J=this,jt={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Rt,K){J.buildAttribute(Rt,jt,K)}):this.buildAttribute(this.config,jt,0),jt}}]),w}(Ha),jc=Mi()(su.prototype,"materialSystem",[Hu,_f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=Mi()(su.prototype,"geometrySystem",[zf,Vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Mi()(su.prototype,"shaderModuleService",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=su))||Cc);function Dc(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Zf(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Zf(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,Rt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,jt=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw jt}}}}function Zf(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var $f,qf,th,eh,nh,kc,rh,ih,oh,Rc,Ju,ah,Nc=(Yf=Object(Ur.injectable)(),Hf=Object(Ur.inject)(yr.RenderEngine),Pc=Object(Ur.inject)(yr.ShaderModuleService),Kf=Object(Ur.inject)(yr.ConfigService),Yf((cu=function(){function Q(){xi()(this,Q),di()(this,"engine",Ku,this),di()(this,"shaderModule",Jf,this),di()(this,"configService",Qf,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var U,w;return Ri()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,jt,Rt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(this.shaderModule.registerBuiltinModules(),J=this.container.getAll(yr.Systems),!(jt=this.configService.get()).canvas){Qt.next=25;break}return Qt.next=6,this.engine.init({canvas:jt.canvas,swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:Rt=Dc(J),Qt.prev=7,Rt.s();case 9:if((K=Rt.n()).done){Qt.next=16;break}if(!(Pt=K.value).initialize){Qt.next=14;break}return Qt.next=14,Pt.initialize();case 14:Qt.next=9;break;case 16:Qt.next=21;break;case 18:Qt.prev=18,Qt.t0=Qt.catch(7),Rt.e(Qt.t0);case 21:return Qt.prev=21,Rt.f(),Qt.finish(21);case 24:this.inited=!0;case 25:case"end":return Qt.stop()}},L,this,[[7,18,21,24]])})),function(){return w.apply(this,arguments)})},{key:"render",value:(U=eo()(ui.a.mark(function L(){var J,jt,Rt,K,Pt,Qt,qt,xe=arguments;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.inited&&!this.rendering){Ie.next=2;break}return Ie.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Xe){Xe()}),this.rendering=!0,this.engine.beginFrame(),J=this.container.getAll(yr.Systems),jt=xe.length,Rt=new Array(jt),K=0;K<jt;K++)Rt[K]=xe[K];Pt=Dc(J),Ie.prev=8,Pt.s();case 10:if((Qt=Pt.n()).done){Ie.next=17;break}if(!(qt=Qt.value).execute){Ie.next=15;break}return Ie.next=15,qt.execute(Rt);case 15:Ie.next=10;break;case 17:Ie.next=22;break;case 19:Ie.prev=19,Ie.t0=Ie.catch(8),Pt.e(Ie.t0);case 22:return Ie.prev=22,Pt.f(),Ie.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Ie.stop()}},L,this,[[8,19,22,25]])})),function(){return U.apply(this,arguments)})},{key:"clear",value:function(J){var jt=this;return this.inited?this.engine.clear(J):this.pendings.unshift(function(){jt.engine.clear(J),jt.pendings.shift()}),this}},{key:"setSize",value:function(J){var jt=J.width,Rt=J.height,K=this.engine.getCanvas();return this.size={width:jt,height:Rt},K.width=jt,K.height=Rt,this}},{key:"getSize",value:function(){return this.size}}]),Q}(),Ku=Mi()(cu.prototype,"engine",[Hf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jf=Mi()(cu.prototype,"shaderModule",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qf=Mi()(cu.prototype,"configService",[Kf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=cu))||uu),sh=Object(Ur.injectable)()($f=function(){function Q(){xi()(this,Q),this.entities=[]}return Ri()(Q,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(w){return this.entities.indexOf(w)===-1&&this.entities.push(w),this}},{key:"removeEntity",value:function(w){var L=this.entities.indexOf(w);return this.entities.splice(L,1),this}}]),Q}())||$f,uh=(qf=Object(Ur.injectable)(),th=Object(Ur.inject)(yr.Systems),eh=Object(Ur.named)(yr.RendererSystem),qf((kc=function(){function Q(){xi()(this,Q),di()(this,"rendererSystem",rh,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Ri()(Q,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(w){return this.camera=w,this}},{key:"setScene",value:function(w){return this.scene=w,this}},{key:"setViewport",value:function(w){return this.viewport=w,this}},{key:"setClearColor",value:function(w){return this.clearColor=w,this}},{key:"pick",value:function(w){return this.rendererSystem.pick(w,this)}}]),Q}(),rh=Mi()(kc.prototype,"rendererSystem",[th,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=kc))||nh);function ch(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function gd(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ch(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ch(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var va=(ih=Object(Ur.injectable)(),oh=Object(Ur.inject)(yr.ConfigService),ih((Ju=function(){function Q(){xi()(this,Q),di()(this,"configService",ah,this),this.container=void 0}var U;return Ri()(Q,[{key:"getEngine",value:(U=eo()(ui.a.mark(function w(){var L,J,jt,Rt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return L=this.container.get(yr.RenderEngine),J=this.configService.get(),jt=J.canvas,Rt=J.engineOptions,K.next=4,L.init(gd({canvas:jt||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},Rt));case 4:return K.abrupt("return",L);case 5:case"end":return K.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"getTransformComponent",value:function(L){return this.container.get(yr.TransformComponentManager).getComponentByEntity(L)}},{key:"getMeshComponent",value:function(L){return this.container.get(yr.MeshComponentManager).getComponentByEntity(L)}},{key:"setConfig",value:function(L){this.configService.set(L)}},{key:"setContainer",value:function(L){this.container=L}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return na()}},{key:"createScene",value:function(){return this.container.get(sh)}},{key:"createCamera",value:function(){return this.container.get(Hl)}},{key:"createView",value:function(){return this.container.get(uh)}},{key:"createRenderable",value:function(L,J,jt){var Rt=J?this.container.getNamed(yr.Renderable,J):this.container.get(Ha);return Rt.setConfig(jt||{}),Rt.setEntity(L),Rt}},{key:"createBoxGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBox(L)}},{key:"createBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBufferGeometry(L)}},{key:"createInstancedBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createInstancedBufferGeometry(L)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(L){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createShaderMaterial(L)}},{key:"createKernel",value:function(L){var J=this.container.get(cf);return typeof L=="string"?J.setBundle(JSON.parse(L)):J.setBundle(L),J.init(),J}},{key:"createRenderer",value:function(){var L=this.container.get(Nc);return L.container=this.container,L.init(),L}},{key:"destroy",value:function(){this.container.getAll(yr.Systems).forEach(function(L){L.tearDown&&L.tearDown()}),this.container.get(yr.RenderEngine).destroy(),this.container.get(yr.InteractorService).destroy()}}],[{key:"create",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=Nh(),jt=navigator.gpu?ud:Hh;J.isBound(yr.RenderEngine)||J.bind(yr.RenderEngine).to(jt).inSingletonScope(),J.bind(Nc).toSelf(),J.bind(cf).toSelf(),J.bind(Ha).toSelf(),J.bind(uh).toSelf(),J.bind(Hl).toSelf(),J.bind(sh).toSelf(),J.bind(Q).toSelf(),J.bind(yr.Renderable).to(pd).whenTargetNamed(Ha.POINT),J.bind(yr.Renderable).to(hd).whenTargetNamed(Ha.LINE),J.bind(yr.Renderable).to(ld).whenTargetNamed(Ha.GRID);var Rt=J.get(Q);return Rt.setContainer(J),Rt.setConfig(L),Rt}}]),Q}(),ah=Mi()(Ju.prototype,"configService",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ju))||Rc),hs=function(U,w){return U?M(U)?function(){return U}:U:function(){return w||1}},c=function(U,w){var L=[],J=[],jt={},Rt=0;for(Rt=0;Rt<U.length;Rt++){var K=U[Rt];jt[K.id]=Rt,L.push(K.x),L.push(K.y),L.push(0),L.push(0),J.push([])}for(Rt=0;Rt<w.length;Rt++){var Pt=w[Rt];J[jt[Pt.source]].push(jt[Pt.target]),J[jt[Pt.target]].push(jt[Pt.source])}var Qt=0;for(Rt=0;Rt<U.length;Rt++){var qt=L.length,xe=J[Rt],Ie=xe.length;L[4*Rt+2]=qt,L[4*Rt+3]=xe.length,Qt=Math.max(Qt,xe.length);for(var Xe=0;Xe<Ie;++Xe){var Re=xe[Xe];L.push(+Re)}}for(;L.length%4!=0;)L.push(0);return{maxEdgePerVetex:Qt,array:new Float32Array(L)}},o=function(U,w,L,J){var jt=[],Rt=[],K={},Pt=0;for(Pt=0;Pt<U.length;Pt++){var Qt=U[Pt];K[Qt.id]=Pt,jt.push(Qt.x),jt.push(Qt.y),jt.push(0),jt.push(0),Rt.push([])}for(Pt=0;Pt<w.length;Pt++){var qt=w[Pt];Rt[K[qt.source]].push(K[qt.target]),Rt[K[qt.source]].push(L(qt)),Rt[K[qt.source]].push(J(qt)),Rt[K[qt.source]].push(0),Rt[K[qt.target]].push(K[qt.source]),Rt[K[qt.target]].push(L(qt)),Rt[K[qt.target]].push(J(qt)),Rt[K[qt.target]].push(0)}var xe=0;for(Pt=0;Pt<U.length;Pt++){var Ie=jt.length,Xe=Rt[Pt],Re=Xe.length;jt[4*Pt+2]=Ie+1048576*Re/4,jt[4*Pt+3]=0,xe=Math.max(xe,Re/4);for(var Ye=0;Ye<Re;++Ye){var Je=Xe[Ye];jt.push(+Je)}}for(;jt.length%4!=0;)jt.push(0);return{maxEdgePerVetex:xe,array:new Float32Array(jt)}},t=function(U,w){var L=[],J=U.length,jt={};return w.forEach(function(Rt){U.forEach(function(K,Pt){if(jt[Rt[K]]===void 0&&(jt[Rt[K]]=Object.keys(jt).length),L.push(jt[Rt[K]]),Pt===J-1)for(;L.length%4!=0;)L.push(0)})}),{array:new Float32Array(L),count:Object.keys(jt).length}},r=function(U){for(var w=[],L=U.length,J=U[0].length,jt=function(Pt){U.forEach(function(Qt,qt){if(w.push(Qt[Pt]),qt===L-1)for(;w.length%4!=0;)w.push(0)})},Rt=0;Rt<J;Rt++)jt(Rt);return new Float32Array(w)};function b(Q){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function D(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function et(Q,U){return(et=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Et(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=ne(Q);if(U){var J=ne(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Lt(this,w)}}function Lt(Q,U){return!U||b(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function ne(Q){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ge=function(U,w,L,J){return new(L||(L=Promise))(function(jt,Rt){function K(qt){try{Qt(J.next(qt))}catch(xe){Rt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Rt(xe)}}function Qt(qt){var xe;qt.done?jt(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(U,w||[])).next())})},be=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&et(Rt,K)})(jt,Q);var U,w,L,J=Et(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterField="cluster",K.clusterGravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ge(this,void 0,void 0,at.mark(function K(){var Pt,Qt,qt,xe,Ie,Xe=this;return at.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Re.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Re.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Re.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Re.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Ye,Je){M(Ye.x)||(Ye.x=Math.random()*Xe.width),M(Ye.y)||(Ye.y=Math.random()*Xe.height),xe[Ye.id]=Ye,Ie[Ye.id]=Je}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Re.next=21,Pt.run();case 21:case"end":return Re.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Xe,Re,Ye=this;return at.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(xe=(qt=this).nodes,Ie=qt.center,xe&&xe.length!==0){Je.next=5;break}return Je.abrupt("return");case 5:if(xe.length!==1){Je.next=9;break}return xe[0].x=Ie[0],xe[0].y=Ie[1],Je.abrupt("return");case 9:return Xe={},Re={},xe.forEach(function(Ge,qe){M(Ge.x)||(Ge.x=Math.random()*Ye.width),M(Ge.y)||(Ge.y=Math.random()*Ye.height),Xe[Ge.id]=Ge,Re[Ge.id]=qe}),qt.nodeMap=Xe,qt.nodeIdxMap=Re,Je.next=16,qt.run(K,Pt);case 16:case"end":return Je.stop()}},Qt,this)}))}},{key:"run",value:function(K,Pt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Xe,Re,Ye,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Tr,dr,Jr,qr,wi,Cr,pi=this;return at.wrap(function(Ei){for(;;)switch(Ei.prev=Ei.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Xe=qt.maxIteration,Re=qt.center,Ye=qt.height*qt.width,Je=Math.sqrt(Ye)/10,Ge=Ye/(xe.length+1),qe=Math.sqrt(Ge),yn=qt.speed,Pn=qt.clustering,En=t([qt.clusterField],xe),Ln=En.array,Zn=En.count,Qn=xe.length,qn=c(xe,Ie),fr=qn.maxEdgePerVetex,br=qn.array,gr=qt.workerEnabled,hr=gr?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),Tr=qt.onLayoutEnd,dr=[],Jr=0;Jr<Zn;Jr++)dr.push(0,0,0,0);return qr=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Qn,1,1]).setBinding({u_Data:br,u_K:qe,u_K2:Ge,u_Gravity:qt.gravity,u_ClusterGravity:qt.clusterGravity||qt.gravity||1,u_Speed:yn,u_MaxDisplace:Je,u_Clustering:Pn?1:0,u_Center:Re,u_AttributeArray:Ln,u_ClusterCenters:dr,MAX_EDGE_PER_VERTEX:fr,VERTEX_COUNT:Qn}),Pn&&(wi=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Zn,1,1]).setBinding({u_Data:br,u_NodeAttributes:Ln,u_ClusterCenters:dr,VERTEX_COUNT:Qn,CLUSTER_COUNT:Zn})),Cr=function(){return ge(pi,void 0,void 0,at.mark(function Ao(){var go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:go=0;case 1:if(!(go<Xe)){Gi.next=13;break}return Gi.next=4,qr.execute();case 4:if(!Pn){Gi.next=9;break}return wi.setBinding({u_Data:qr}),Gi.next=8,wi.execute();case 8:qr.setBinding({u_ClusterCenters:wi});case 9:qr.setBinding({u_MaxDisplace:Je*=.99});case 10:go++,Gi.next=1;break;case 13:return Gi.next=15,qr.getOutput();case 15:Ii=Gi.sent,K?Pt.postMessage({type:Xr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),Tr&&Tr();case 18:case"end":return Gi.stop()}},Ao)}))},Ei.next=24,Cr();case 24:case"end":return Ei.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&D(U.prototype,w),L&&D(U,L),jt}(x);function Ae(Q){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function We(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function an(Q,U){return(an=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function gn(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Hn(Q);if(U){var J=Hn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Xn(this,w)}}function Xn(Q,U){return!U||Ae(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Hn(Q){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ir=function(U,w,L,J){return new(L||(L=Promise))(function(jt,Rt){function K(qt){try{Qt(J.next(qt))}catch(xe){Rt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Rt(xe)}}function Qt(qt){var xe;qt.done?jt(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(U,w||[])).next())})},cr=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&an(Rt,K)})(jt,Q);var U,w,L,J=gn(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=1,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ir(this,void 0,void 0,at.mark(function K(){var Pt,Qt,qt,xe,Ie;return at.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Xe.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Xe.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Xe.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Xe.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Re,Ye){M(Re.x)||(Re.x=Math.random()*Pt.width),M(Re.y)||(Re.y=Math.random()*Pt.height),xe[Re.id]=Re,Ie[Re.id]=Ye}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Pt.nodeStrength=hs(Pt.nodeStrength,1),Pt.edgeStrength=hs(Pt.edgeStrength,1),Xe.next=23,Pt.run();case 23:case"end":return Xe.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.center;if(qt&&qt.length!==0){if(qt.length===1)return qt[0].x=xe[0],void(qt[0].y=xe[1]);var Ie={},Xe={};qt.forEach(function(Re,Ye){M(Re.x)||(Re.x=Math.random()*Qt.width),M(Re.y)||(Re.y=Math.random()*Qt.height),Ie[Re.id]=Re,Xe[Re.id]=Ye}),Qt.nodeMap=Ie,Qt.nodeIdxMap=Xe,Qt.nodeStrength=hs(Qt.nodeStrength,1),Qt.edgeStrength=hs(Qt.edgeStrength,1),Qt.run(K,Pt)}}},{key:"run",value:function(K,Pt){return ir(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Xe,Re,Ye,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Tr,dr,Jr,qr,wi,Cr=this;return at.wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Xe=qt.maxIteration,qt.width||typeof window=="undefined"||(qt.width=window.innerWidth),qt.height||typeof window=="undefined"||(qt.height=window.innerHeight),Re=xe.length,qt.linkDistance=hs(qt.linkDistance),qt.edgeStrength=hs(qt.edgeStrength),Ye=o(xe,Ie,qt.linkDistance,qt.edgeStrength),Je=Ye.maxEdgePerVetex,Ge=Ye.array,qt.degrees=y(xe.length,qt.nodeIdxMap,Ie),qe=[],yn=[],Pn=[],En=[],Ln=[],qt.getMass||(qt.getMass=function(Ei){return qt.degrees[qt.nodeIdxMap[Ei.id]]||1}),Zn=qt.gravity,Qn=qt.center,xe.forEach(function(Ei,ji){qe.push(qt.getMass(Ei)),yn.push(qt.nodeStrength(Ei)),qt.degrees[ji]||(qt.degrees[ji]=0);var Ao=[Qn[0],Qn[1],Zn];if(qt.getCenter){var go=qt.getCenter(Ei,qt.degrees[ji]);go&&M(go[0])&&M(go[1])&&M(go[2])&&(Ao=go)}Pn.push(Ao[0]),En.push(Ao[1]),Ln.push(Ao[2])}),qn=r([qe,qt.degrees,yn]),fr=r([Pn,En,Ln]),br=qt.workerEnabled,gr=br?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),hr=qt.onLayoutEnd,Tr=[],Ge.forEach(function(Ei){Tr.push(Ei)}),dr=0;dr<4;dr++)Tr.push(0);return Jr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.w;\\nvar ay : f32 = vy * attributes2.w;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Re,1,1]).setBinding({u_Data:Ge,u_damping:qt.damping,u_maxSpeed:qt.maxSpeed,u_minMovement:qt.minMovement,u_coulombDisScale:qt.coulombDisScale,u_factor:qt.factor,u_NodeAttributeArray1:qn,u_NodeAttributeArray2:fr,MAX_EDGE_PER_VERTEX:Je,VERTEX_COUNT:Re,u_AveMovement:Tr,u_interval:qt.interval}),qr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:Ge,VERTEX_COUNT:Re,u_AveMovement:[0,0,0,0]}),wi=function(){return ir(Cr,void 0,void 0,at.mark(function ji(){var Ao,go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:Ao=0;case 1:if(!(Ao<Xe)){Gi.next=12;break}return Gi.next=4,Jr.execute();case 4:return qr.setBinding({u_Data:Jr}),Gi.next=7,qr.execute();case 7:go=Math.max(.02,qt.interval-.002*Ao),Jr.setBinding({u_interval:go,u_AveMovement:qr});case 9:Ao++,Gi.next=1;break;case 12:return Gi.next=14,Jr.getOutput();case 14:Ii=Gi.sent,K?Pt.postMessage({type:Xr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),hr&&hr();case 17:case"end":return Gi.stop()}},ji)}))},pi.next=33,wi();case 33:case"end":return pi.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&We(U.prototype,w),L&&We(U,L),jt}(x);function Rr(Q){return(Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function zr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function _r(Q,U){return(_r=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function ki(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=mi(Q);if(U){var J=mi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ai(this,w)}}function Ai(Q,U){return!U||Rr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function mi(Q){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Ki=function(Q){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&_r(Rt,K)})(jt,Q);var U,w,L,J=ki(jt);function jt(Rt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),(K=J.call(this)).center=[0,0],K.maxIteration=100,K.gravity=10,K.comboGravity=10,K.linkDistance=10,K.alpha=1,K.alphaMin=.001,K.alphaDecay=1-Math.pow(K.alphaMin,1/300),K.alphaTarget=0,K.velocityDecay=.6,K.edgeStrength=.6,K.nodeStrength=30,K.preventOverlap=!1,K.preventNodeOverlap=!1,K.preventComboOverlap=!1,K.collideStrength=void 0,K.nodeCollideStrength=.5,K.comboCollideStrength=.5,K.comboSpacing=20,K.comboPadding=10,K.optimizeRangeFactor=1,K.onTick=function(){},K.onLayoutEnd=function(){},K.depthAttractiveForceScale=1,K.depthRepulsiveForceScale=2,K.nodes=[],K.edges=[],K.combos=[],K.comboTrees=[],K.width=300,K.height=300,K.bias=[],K.nodeMap={},K.oriComboMap={},K.indexMap={},K.comboMap={},K.previousLayouted=!1,K.updateCfg(Rt),K}return U=jt,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},K&&K.length!==0){if(K.length===1)return K[0].x=Pt[0],K[0].y=Pt[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.previousLayouted?K.maxIteration/5:K.maxIteration;K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var qt=K.center,xe=K.velocityDecay,Ie=K.comboMap;K.previousLayouted||K.initPos(Ie);for(var Xe=function(qe){var yn=[];Pt.forEach(function(Pn,En){yn[En]={x:0,y:0}}),K.applyCalculate(yn),K.applyComboCenterForce(yn),Pt.forEach(function(Pn,En){M(Pn.x)&&M(Pn.y)&&(Pn.x+=yn[En].x*xe,Pn.y+=yn[En].y*xe)}),K.alpha+=(K.alphaTarget-K.alpha)*K.alphaDecay,K.onTick()},Re=0;Re<Qt;Re++)Xe();var Ye=[0,0];Pt.forEach(function(Ge){M(Ge.x)&&M(Ge.y)&&(Ye[0]+=Ge.x,Ye[1]+=Ge.y)}),Ye[0]/=Pt.length,Ye[1]/=Pt.length;var Je=[qt[0]-Ye[0],qt[1]-Ye[1]];Pt.forEach(function(Ge,qe){M(Ge.x)&&M(Ge.y)&&(Ge.x+=Je[0],Ge.y+=Je[1])}),K.combos.forEach(function(Ge){var qe=Ie[Ge.id];qe&&qe.empty&&(Ge.x=qe.cx||Ge.x,Ge.y=qe.cy||Ge.y)}),K.previousLayouted=!0}},{key:"initVals",value:function(){var K=this.edges,Pt=this.nodes,Qt=this.combos,qt={},xe={},Ie={};Pt.forEach(function(Cr,pi){xe[Cr.id]=Cr,Ie[Cr.id]=pi}),this.nodeMap=xe,this.indexMap=Ie;var Xe={};Qt.forEach(function(Cr){Xe[Cr.id]=Cr}),this.oriComboMap=Xe,this.comboMap=this.getComboMap();var Re=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||Re,this.preventNodeOverlap=this.preventNodeOverlap||Re;var Ye=this.collideStrength;Ye&&(this.comboCollideStrength=Ye,this.nodeCollideStrength=Ye),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var Je=0;Je<K.length;++Je)qt[K[Je].source]?qt[K[Je].source]++:qt[K[Je].source]=1,qt[K[Je].target]?qt[K[Je].target]++:qt[K[Je].target]=1;for(var Ge=[],qe=0;qe<K.length;++qe)Ge[qe]=qt[K[qe].source]/(qt[K[qe].source]+qt[K[qe].target]);this.bias=Ge;var yn,Pn,En=this.nodeSize,Ln=this.nodeSpacing;if(Pn=M(Ln)?function(){return Ln}:C(Ln)?Ln:function(){return 0},this.nodeSpacing=Pn,En)if(C(En))yn=function(pi){return En(pi)};else if(l(En)){var Zn=(En[0]>En[1]?En[0]:En[1])/2;yn=function(pi){return Zn}}else{var Qn=En/2;yn=function(pi){return Qn}}else yn=function(pi){return pi.size?l(pi.size)?(pi.size[0]>pi.size[1]?pi.size[0]:pi.size[1])/2:pi.size/2:10};this.nodeSize=yn;var qn,fr=this.comboSpacing;qn=M(fr)?function(){return fr}:C(fr)?fr:function(){return 0},this.comboSpacing=qn;var br,gr=this.comboPadding;br=M(gr)?function(){return gr}:l(gr)?function(){return Math.max.apply(null,gr)}:C(gr)?gr:function(){return 0},this.comboPadding=br;var hr,Tr=this.linkDistance;Tr||(Tr=10),hr=M(Tr)?function(Cr){return Tr}:Tr,this.linkDistance=hr;var dr,Jr=this.edgeStrength;Jr||(Jr=1),dr=M(Jr)?function(Cr){return Jr}:Jr,this.edgeStrength=dr;var qr,wi=this.nodeStrength;wi||(wi=30),qr=M(wi)?function(Cr){return wi}:wi,this.nodeStrength=qr}},{key:"initPos",value:function(K){this.nodes.forEach(function(Pt,Qt){var qt=Pt.comboId,xe=K[qt];qt&&xe?(Pt.x=xe.cx+100/(Qt+1),Pt.y=xe.cy+100/(Qt+1)):(Pt.x=100/(Qt+1),Pt.y=100/(Qt+1))})}},{key:"getComboMap",value:function(){var K=this,Pt=K.nodeMap,Qt=K.indexMap,qt=K.comboTrees,xe=K.oriComboMap,Ie={};return(qt||[]).forEach(function(Xe){var Re=[];d(Xe,function(Ye){if(Ye.itemType==="node"||!xe[Ye.id])return!0;if(Ie[Ye.id]===void 0){var Je={id:Ye.id,name:Ye.id,cx:0,cy:0,count:0,depth:K.oriComboMap[Ye.id].depth,children:[]};Ie[Ye.id]=Je}var Ge=Ye.children;Ge&&Ge.forEach(function(Zn){if(!Ie[Zn.id]&&!Pt[Zn.id])return!0;Re.push(Zn)});var qe=Ie[Ye.id];if(qe.cx=0,qe.cy=0,Re.length===0){qe.empty=!0;var yn=xe[Ye.id],Pn=Object.keys(Pt).length,En="".concat(Ye.id,"-visual-child-").concat(Pn),Ln={id:En,x:yn.x,y:yn.y,depth:qe.depth+1,itemType:"node"};K.nodes.push(Ln),Pt[En]=Ln,Qt[En]=Pn,qe.cx=yn.x,qe.cy=yn.y,Re.push(Ln)}return Re.forEach(function(Zn){if(qe.count++,Zn.itemType!=="node"){var Qn=Ie[Zn.id];return M(Qn.cx)&&(qe.cx+=Qn.cx),void(M(Qn.cy)&&(qe.cy+=Qn.cy))}var qn=Pt[Zn.id];qn&&(M(qn.x)&&(qe.cx+=qn.x),M(qn.y)&&(qe.cy+=qn.y))}),qe.cx/=qe.count,qe.cy/=qe.count,qe.children=Re,!0})}),Ie}},{key:"applyComboCenterForce",value:function(K){var Pt=this.gravity,Qt=this.comboGravity||Pt,qt=this.alpha,xe=this.comboTrees,Ie=this.indexMap,Xe=this.nodeMap,Re=this.comboMap;(xe||[]).forEach(function(Ye){d(Ye,function(Je){if(Je.itemType==="node"||!Re[Je.id])return!0;var Ge=Re[Je.id],qe=(Ge.depth+1)/10*.5,yn=Ge.cx,Pn=Ge.cy;return Ge.cx=0,Ge.cy=0,Ge.children.forEach(function(En){if(En.itemType!=="node"){var Ln=Re[En.id];return Ln&&M(Ln.cx)&&(Ge.cx+=Ln.cx),void(Ln&&M(Ln.cy)&&(Ge.cy+=Ln.cy))}var Zn=Xe[En.id],Qn=Zn.x-yn||.005,qn=Zn.y-Pn||.005,fr=Math.sqrt(Qn*Qn+qn*qn),br=Ie[Zn.id],gr=Qt*qt/fr*qe;K[br].x-=Qn*gr,K[br].y-=qn*gr,M(Zn.x)&&(Ge.cx+=Zn.x),M(Zn.y)&&(Ge.cy+=Zn.y)}),Ge.cx/=Ge.count,Ge.cy/=Ge.count,!0})})}},{key:"applyCalculate",value:function(K){var Pt=this.comboMap,Qt=this.nodes,qt={};Qt.forEach(function(xe,Ie){Qt.forEach(function(Xe,Re){if(!(Ie<Re)){var Ye=xe.x-Xe.x||.005,Je=xe.y-Xe.y||.005,Ge=Ye*Ye+Je*Je,qe=Math.sqrt(Ge);Ge<1&&(Ge=qe),qt["".concat(xe.id,"-").concat(Xe.id)]={vx:Ye,vy:Je,vl2:Ge,vl:qe},qt["".concat(Xe.id,"-").concat(xe.id)]={vl2:Ge,vl:qe,vx:-Ye,vy:-Je}}})}),this.updateComboSizes(Pt),this.calRepulsive(K,qt),this.calAttractive(K,qt),this.preventComboOverlap&&this.comboNonOverlapping(K,Pt)}},{key:"updateComboSizes",value:function(K){var Pt=this,Qt=Pt.comboTrees,qt=Pt.nodeMap,xe=Pt.nodeSize,Ie=Pt.comboSpacing,Xe=Pt.comboPadding;(Qt||[]).forEach(function(Re){var Ye=[];d(Re,function(Je){if(Je.itemType==="node")return!0;var Ge=K[Je.id];if(!Ge)return!1;var qe=Je.children;qe&&qe.forEach(function(En){(K[En.id]||qt[En.id])&&Ye.push(En)}),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0,Ye.forEach(function(En){if(En.itemType!=="node")return!0;var Ln=qt[En.id];if(!Ln)return!0;var Zn=xe(Ln),Qn=Ln.x-Zn,qn=Ln.y-Zn,fr=Ln.x+Zn,br=Ln.y+Zn;Ge.minX>Qn&&(Ge.minX=Qn),Ge.minY>qn&&(Ge.minY=qn),Ge.maxX<fr&&(Ge.maxX=fr),Ge.maxY<br&&(Ge.maxY=br)});var yn=Pt.oriComboMap[Je.id].size||10;l(yn)&&(yn=yn[0]);var Pn=Math.max(Ge.maxX-Ge.minX,Ge.maxY-Ge.minY,yn);return Ge.r=Pn/2+Ie(Ge)/2+Xe(Ge),!0})})}},{key:"comboNonOverlapping",value:function(K,Pt){var Qt=this.comboTree,qt=this.comboCollideStrength,xe=this.indexMap,Ie=this.nodeMap;d(Qt,function(Xe){if(!Pt[Xe.id]&&!Ie[Xe.id]&&Xe.id!=="comboTreeRoot")return!1;var Re=Xe.children;return Re&&Re.length>1&&Re.forEach(function(Ye,Je){if(Ye.itemType==="node")return!1;var Ge=Pt[Ye.id];Ge&&Re.forEach(function(qe,yn){if(Je<=yn||qe.itemType==="node")return!1;var Pn=Pt[qe.id];if(!Pn)return!1;var En=Ge.cx-Pn.cx||.005,Ln=Ge.cy-Pn.cy||.005,Zn=En*En+Ln*Ln,Qn=Ge.r,qn=Pn.r,fr=Qn+qn,br=qn*qn,gr=Qn*Qn;if(Zn<fr*fr){var hr=Ye.children;if(!hr||hr.length===0)return!1;var Tr=qe.children;if(!Tr||Tr.length===0)return!1;var dr=Math.sqrt(Zn),Jr=(fr-dr)/dr*qt,qr=En*Jr,wi=Ln*Jr,Cr=br/(gr+br),pi=1-Cr;hr.forEach(function(Ei){if(Ei.itemType!=="node")return!1;if(Ie[Ei.id]){var ji=xe[Ei.id];Tr.forEach(function(Ao){if(Ao.itemType!=="node"||!Ie[Ao.id])return!1;var go=xe[Ao.id];K[ji].x+=qr*Cr,K[ji].y+=wi*Cr,K[go].x-=qr*pi,K[go].y-=wi*pi})}})}})}),!0})}},{key:"calRepulsive",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.width*Qt.optimizeRangeFactor,Ie=Qt.nodeStrength,Xe=Qt.alpha,Re=Qt.nodeCollideStrength,Ye=Qt.preventNodeOverlap,Je=Qt.nodeSize,Ge=Qt.nodeSpacing,qe=Qt.depthRepulsiveForceScale,yn=Qt.center;qt.forEach(function(Pn,En){if(Pn.x&&Pn.y){if(yn){var Ln=Qt.gravity,Zn=Pn.x-yn[0]||.005,Qn=Pn.y-yn[1]||.005,qn=Math.sqrt(Zn*Zn+Qn*Qn);K[En].x-=Zn*Ln*Xe/qn,K[En].y-=Qn*Ln*Xe/qn}qt.forEach(function(fr,br){if(En!==br&&fr.x&&fr.y){var gr=Pt["".concat(Pn.id,"-").concat(fr.id)],hr=gr.vl2,Tr=gr.vl;if(!(Tr>xe)){var dr=Pt["".concat(Pn.id,"-").concat(fr.id)],Jr=dr.vx,qr=dr.vy,wi=Math.log(Math.abs(fr.depth-Pn.depth)/10)+1||1;wi=wi<1?1:wi,fr.comboId!==Pn.comboId&&(wi+=1);var Cr=wi?Math.pow(qe,wi):1,pi=Ie(fr)*Xe/hr*Cr;if(K[En].x+=Jr*pi,K[En].y+=qr*pi,En<br&&Ye){var Ei=Je(Pn)+Ge(Pn),ji=Je(fr)+Ge(fr),Ao=Ei+ji;if(hr<Ao*Ao){var go=(Ao-Tr)/Tr*Re,Ii=ji*ji,Gi=Ii/(Ei*Ei+Ii),Po=Jr*go,Fo=qr*go;K[En].x+=Po*Gi,K[En].y+=Fo*Gi,Gi=1-Gi,K[br].x-=Po*Gi,K[br].y-=Fo*Gi}}}}})}})}},{key:"calAttractive",value:function(K,Pt){var Qt=this,qt=Qt.edges,xe=Qt.linkDistance,Ie=Qt.alpha,Xe=Qt.edgeStrength,Re=Qt.bias,Ye=Qt.depthAttractiveForceScale;qt.forEach(function(Je,Ge){if(Je.source&&Je.target&&Je.source!==Je.target){var qe=Qt.indexMap[Je.source],yn=Qt.indexMap[Je.target],Pn=Qt.nodeMap[Je.source],En=Qt.nodeMap[Je.target];if(Pn&&En){var Ln=Math.log(Math.abs(Pn.depth-En.depth)/10);Pn.comboId===En.comboId&&(Ln/=2);var Zn=Ln?Math.pow(Ye,Ln):1;if(Pn.comboId!==En.comboId&&Zn===1?Zn=Ye/2:Pn.comboId===En.comboId&&(Zn=2),M(En.x)&&M(Pn.x)&&M(En.y)&&M(Pn.y)){var Qn=Pt["".concat(Je.target,"-").concat(Je.source)],qn=Qn.vl,fr=Qn.vx,br=Qn.vy,gr=(qn-xe(Je))/qn*Ie*Xe(Je)*Zn,hr=fr*gr,Tr=br*gr,dr=Re[Ge];K[yn].x-=hr*dr,K[yn].y-=Tr*dr,K[qe].x+=hr*(1-dr),K[qe].y+=Tr*(1-dr)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&zr(U.prototype,w),L&&zr(U,L),jt}(x),vo,po=new Proxy({},{get:function(U,w){return Wn(w)},set:function(U,w,L){return mn(w,L),!0}});vo||(vo={}),mn("grid",ft),mn("random",wt),mn("force",$r),mn("circular",Pi),mn("dagre",Oe),mn("radial",Pe),mn("concentric",oi),mn("mds",_o),mn("fruchterman",Yo),mn("fruchterman-gpu",be),mn("gForce",rt),mn("gForce-gpu",cr),mn("comboForce",Ki);var yo=self;yo.onmessage=function(Q){(function(U){var w=U.data.type;return w===Vi||w===pr})(Q)&&function(U){switch(U.data.type){case Vi:var w=U.data,L=w.nodes,J=w.edges,jt=w.layoutCfg,Rt=jt===void 0?{}:jt,K=Rt.type,Pt=Wn(K);if(!Pt){yo.postMessage({type:jr,message:"layout ".concat(K," not found")});break}var Qt=new Pt(Rt);Qt.init({nodes:L,edges:J}),Qt.execute(),yo.postMessage({nodes:L,type:ro}),Qt.destroy();break;case pr:var qt=U.data,xe=qt.nodes,Ie=qt.edges,Xe=qt.layoutCfg,Re=Xe===void 0?{}:Xe,Ye=qt.canvas,Je=Re.type,Ge=Wn(Je);if(!Ge){yo.postMessage({type:jr,message:"layout ".concat(Je," not found")});break}if(Je.split("-")[1]!=="gpu"){yo.postMessage({type:jr,message:"layout ".concat(Je," does not support GPU")});break}var qe=new Ge(Re);qe.init({nodes:xe,edges:Ie}),qe.executeWithWorker(Ye,yo)}}(Q)};var wo=function(U,w){w.isCustomLayout=!0,mn(U,w)}},function(a,A,e){"use strict";e.d(A,"a",function(){return m}),e.d(A,"b",function(){return S});var i=e(36),p=e(22);function m(l,M){M.forEach(function(j){j.draw(l)})}function S(l,M){var j=l.get("canvas");if(j&&j.get("autoDraw")){var y=j.get("context"),n=l.getParent(),s=n?n.getChildren():[j],d=l.get("el");if(M==="remove")if(l.get("isClipShape")){var E=d&&d.parentNode,O=E&&E.parentNode;E&&O&&O.removeChild(E)}else d&&d.parentNode&&d.parentNode.removeChild(d);else if(M==="show")d.setAttribute("visibility","visible");else if(M==="hide")d.setAttribute("visibility","hidden");else if(M==="zIndex")Object(p.c)(d,s.indexOf(l));else if(M==="sort"){var C=l.get("children");C&&C.length&&Object(p.d)(l,function(v,x){return C.indexOf(v)-C.indexOf(x)?1:0})}else M==="clear"?d&&(d.innerHTML=""):M==="matrix"?Object(i.c)(l):M==="clip"?Object(i.a)(l,y):M==="attr"||M==="add"&&l.draw(y)}}},function(a,A){a.exports=function(e,i){return e===i||e!=e&&i!=i}},function(a,A,e){var i=e(47).Symbol;a.exports=i},function(a,A,e){(function(i){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var m=e(47),S=e(304),l=p(A)=="object"&&A&&!A.nodeType&&A,M=l&&p(i)=="object"&&i&&!i.nodeType&&i,j=M&&M.exports===l?m.Buffer:void 0,y=(j?j.isBuffer:void 0)||S;i.exports=y}).call(this,e(86)(a))},function(a,A,e){var i=e(313),p=e(125),m=e(314),S=e(176),l=e(315),M=e(57),j=e(165),y=j(i),n=j(p),s=j(m),d=j(S),E=j(l),O=M;(i&&O(new i(new ArrayBuffer(1)))!="[object DataView]"||p&&O(new p)!="[object Map]"||m&&O(m.resolve())!="[object Promise]"||S&&O(new S)!="[object Set]"||l&&O(new l)!="[object WeakMap]")&&(O=function(v){var x=M(v),T=x=="[object Object]"?v.constructor:void 0,N=T?j(T):"";if(N)switch(N){case y:return"[object DataView]";case n:return"[object Map]";case s:return"[object Promise]";case d:return"[object Set]";case E:return"[object WeakMap]"}return x}),a.exports=O},function(a,A,e){function i(S){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var p=e(57),m=e(48);a.exports=function(S){return i(S)=="symbol"||m(S)&&p(S)=="[object Symbol]"}},function(a,A,e){"use strict";var i=e(1),p=e(18),m=e(56),S=e(29),l=e(0),M=e(17),j=function(y){function n(){return y!==null&&y.apply(this,arguments)||this}return Object(i.b)(n,y),n.prototype.onCanvasChange=function(s){Object(S.h)(this,s)},n.prototype.getShapeBase=function(){return m},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(s,d){d&&(s.save(),Object(S.a)(s,d),d.createPath(s),s.restore(),s.clip(),d._afterDraw())},n.prototype.cacheCanvasBBox=function(){var s=this.cfg.children,d=[],E=[];Object(l.f)(s,function(tt){var nt=tt.cfg.cacheCanvasBBox;nt&&tt.cfg.isInView&&(d.push(nt.minX,nt.maxX),E.push(nt.minY,nt.maxY))});var O=null;if(d.length){var C=Math.min.apply(null,d),v=Math.max.apply(null,d),x=Math.min.apply(null,E),T=Math.max.apply(null,E);O={minX:C,minY:x,x:C,y:x,maxX:v,maxY:T,width:v-C,height:T-x};var N=this.cfg.canvas;if(N){var X=N.getViewRange();this.set("isInView",Object(M.f)(O,X))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",O)},n.prototype.draw=function(s,d){var E=this.cfg.children,O=!d||this.cfg.refresh;E.length&&O&&(s.save(),Object(S.a)(s,this),this._applyClip(s,this.getClip()),Object(S.d)(s,E,d),s.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(p.AbstractGroup);A.a=j},function(a,A,e){"use strict";var i=e(1),p=e(18),m=e(0),S=e(78),l=e(70),M=e(36),j=e(16),y=e(22),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(i.b)(d,s),d.prototype.isEntityGroup=function(){return!0},d.prototype.createDom=function(){var E=Object(y.b)("g");this.set("el",E);var O=this.getParent();if(O){var C=O.get("el");C||(C=O.createDom(),O.set("el",C)),C.appendChild(E)}return E},d.prototype.afterAttrsChange=function(E){s.prototype.afterAttrsChange.call(this,E);var O=this.get("canvas");if(O&&O.get("autoDraw")){var C=O.get("context");this.createPath(C,E)}},d.prototype.onCanvasChange=function(E){Object(l.b)(this,E)},d.prototype.getShapeBase=function(){return S},d.prototype.getGroupBase=function(){return d},d.prototype.draw=function(E){var O=this.getChildren(),C=this.get("el");this.get("destroyed")?C&&C.parentNode.removeChild(C):(C||this.createDom(),Object(M.a)(this,E),this.createPath(E),O.length&&Object(l.a)(E,O))},d.prototype.createPath=function(E,O){var C=this.attr(),v=this.get("el");Object(m.f)(O||C,function(x,T){j.b[T]&&v.setAttribute(j.b[T],x)}),Object(M.c)(this)},d}(p.AbstractGroup);A.a=n},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return n}),e.d(A,"Circle",function(){return d}),e.d(A,"Dom",function(){return E}),e.d(A,"Ellipse",function(){return O}),e.d(A,"Image",function(){return C}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return X}),e.d(A,"Path",function(){return tt}),e.d(A,"Polygon",function(){return nt}),e.d(A,"Polyline",function(){return vt}),e.d(A,"Rect",function(){return ft}),e.d(A,"Text",function(){return zt});var i={};e.r(i),e.d(i,"Base",function(){return n}),e.d(i,"Circle",function(){return d}),e.d(i,"Dom",function(){return E}),e.d(i,"Ellipse",function(){return O}),e.d(i,"Image",function(){return C}),e.d(i,"Line",function(){return x}),e.d(i,"Marker",function(){return X}),e.d(i,"Path",function(){return tt}),e.d(i,"Polygon",function(){return nt}),e.d(i,"Polyline",function(){return vt}),e.d(i,"Rect",function(){return ft}),e.d(i,"Text",function(){return zt});var p=e(1),m=e(18),S=e(36),l=e(22),M=e(70),j=e(16),y=e(77),n=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="svg",H.canFill=!1,H.canStroke=!1,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},wt.prototype.afterAttrsChange=function(H){Nt.prototype.afterAttrsChange.call(this,H);var ht=this.get("canvas");if(ht&&ht.get("autoDraw")){var dt=ht.get("context");this.draw(dt,H)}},wt.prototype.getShapeBase=function(){return i},wt.prototype.getGroupBase=function(){return y.a},wt.prototype.onCanvasChange=function(H){Object(M.b)(this,H)},wt.prototype.calculateBBox=function(){var H=this.get("el"),ht=null;if(H)ht=H.getBBox();else{var dt=Object(m.getBBoxMethod)(this.get("type"));dt&&(ht=dt(this))}if(ht){var yt=ht.x,Mt=ht.y,$=ht.width,lt=ht.height,rt=this.getHitLineWidth(),z=rt/2,P=yt-z,Y=Mt-z;return{x:P,y:Y,minX:P,minY:Y,maxX:yt+$+z,maxY:Mt+lt+z,width:$+rt,height:lt+rt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},wt.prototype.isFill=function(){var H=this.attr(),ht=H.fill,dt=H.fillStyle;return(ht||dt||this.isClipShape())&&this.canFill},wt.prototype.isStroke=function(){var H=this.attr(),ht=H.stroke,dt=H.strokeStyle;return(ht||dt)&&this.canStroke},wt.prototype.draw=function(H,ht){var dt=this.get("el");this.get("destroyed")?dt&&dt.parentNode.removeChild(dt):(dt||Object(l.a)(this),Object(S.a)(this,H),this.createPath(H,ht),this.shadow(H,ht),this.strokeAndFill(H,ht),this.transform(ht))},wt.prototype.createPath=function(H,ht){},wt.prototype.strokeAndFill=function(H,ht){var dt=ht||this.attr(),yt=dt.fill,Mt=dt.fillStyle,$=dt.stroke,lt=dt.strokeStyle,rt=dt.fillOpacity,z=dt.strokeOpacity,P=dt.lineWidth,Y=this.get("el");this.canFill&&(ht?"fill"in dt?this._setColor(H,"fill",yt):"fillStyle"in dt&&this._setColor(H,"fill",Mt):this._setColor(H,"fill",yt||Mt),rt&&Y.setAttribute(j.b.fillOpacity,rt)),this.canStroke&&P>0&&(ht?"stroke"in dt?this._setColor(H,"stroke",$):"strokeStyle"in dt&&this._setColor(H,"stroke",lt):this._setColor(H,"stroke",$||lt),z&&Y.setAttribute(j.b.strokeOpacity,z),P&&Y.setAttribute(j.b.lineWidth,P))},wt.prototype._setColor=function(H,ht,dt){var yt=this.get("el");if(dt)if(dt=dt.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(dt))(Mt=H.find("gradient",dt))||(Mt=H.addGradient(dt)),yt.setAttribute(j.b[ht],"url(#"+Mt+")");else if(/^[p,P]{1}[\s]*\(/.test(dt)){var Mt;(Mt=H.find("pattern",dt))||(Mt=H.addPattern(dt)),yt.setAttribute(j.b[ht],"url(#"+Mt+")")}else yt.setAttribute(j.b[ht],dt);else yt.setAttribute(j.b[ht],"none")},wt.prototype.shadow=function(H,ht){var dt=this.attr(),yt=ht||dt,Mt=yt.shadowOffsetX,$=yt.shadowOffsetY,lt=yt.shadowBlur,rt=yt.shadowColor;(Mt||$||lt||rt)&&Object(S.b)(this,H)},wt.prototype.transform=function(H){var ht=this.attr();(H||ht).matrix&&Object(S.c)(this)},wt.prototype.isInShape=function(H,ht){return this.isPointInPath(H,ht)},wt.prototype.isPointInPath=function(H,ht){var dt=this.get("el"),yt=this.get("canvas").get("el").getBoundingClientRect(),Mt=H+yt.left,$=ht+yt.top,lt=document.elementFromPoint(Mt,$);return!(!lt||!lt.isEqualNode(dt))},wt.prototype.getHitLineWidth=function(){var H=this.attrs,ht=H.lineWidth,dt=H.lineAppendWidth;return this.isStroke()?ht+dt:0},wt}(m.AbstractShape),s=e(0),d=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="circle",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x:0,y:0,r:0})},wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");Object(s.f)(ht||dt,function(Mt,$){$==="x"||$==="y"?yt.setAttribute("c"+$,Mt):j.b[$]&&yt.setAttribute(j.b[$],Mt)})},wt}(n),E=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="dom",H.canFill=!1,H.canStroke=!1,H}return Object(p.b)(wt,Nt),wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");if(Object(s.f)(ht||dt,function(rt,z){j.b[z]&&yt.setAttribute(j.b[z],rt)}),typeof dt.html=="function"){var Mt=dt.html.call(this,dt);if(Mt instanceof Element||Mt instanceof HTMLDocument){for(var $=yt.childNodes,lt=$.length-1;lt>=0;lt--)yt.removeChild($[lt]);yt.appendChild(Mt)}else yt.innerHTML=Mt}else yt.innerHTML=dt.html},wt}(n),O=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="ellipse",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x:0,y:0,rx:0,ry:0})},wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");Object(s.f)(ht||dt,function(Mt,$){$==="x"||$==="y"?yt.setAttribute("c"+$,Mt):j.b[$]&&yt.setAttribute(j.b[$],Mt)})},wt}(n),C=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="image",H.canFill=!1,H.canStroke=!1,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x:0,y:0,width:0,height:0})},wt.prototype.createPath=function(H,ht){var dt=this,yt=this.attr(),Mt=this.get("el");Object(s.f)(ht||yt,function($,lt){lt==="img"?dt._setImage(yt.img):j.b[lt]&&Mt.setAttribute(j.b[lt],$)})},wt.prototype.setAttr=function(H,ht){this.attrs[H]=ht,H==="img"&&this._setImage(ht)},wt.prototype._setImage=function(H){var ht=this.attr(),dt=this.get("el");if(Object(s.x)(H))dt.setAttribute("href",H);else if(H instanceof window.Image)ht.width||(dt.setAttribute("width",H.width),this.attr("width",H.width)),ht.height||(dt.setAttribute("height",H.height),this.attr("height",H.height)),dt.setAttribute("href",H.src);else if(H instanceof HTMLElement&&Object(s.x)(H.nodeName)&&H.nodeName.toUpperCase()==="CANVAS")dt.setAttribute("href",H.toDataURL());else if(H instanceof ImageData){var yt=document.createElement("canvas");yt.setAttribute("width",""+H.width),yt.setAttribute("height",""+H.height),yt.getContext("2d").putImageData(H,0,0),ht.width||(dt.setAttribute("width",""+H.width),this.attr("width",H.width)),ht.height||(dt.setAttribute("height",""+H.height),this.attr("height",H.height)),dt.setAttribute("href",yt.toDataURL())}},wt}(n),v=e(20),x=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="line",H.canFill=!1,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");Object(s.f)(ht||dt,function(Mt,$){if($==="startArrow"||$==="endArrow")if(Mt){var lt=Object(s.v)(Mt)?H.addArrow(dt,j.b[$]):H.getDefaultArrow(dt,j.b[$]);yt.setAttribute(j.b[$],"url(#"+lt+")")}else yt.removeAttribute(j.b[$]);else j.b[$]&&yt.setAttribute(j.b[$],Mt)})},wt.prototype.getTotalLength=function(){var H=this.attr(),ht=H.x1,dt=H.y1,yt=H.x2,Mt=H.y2;return v.c.length(ht,dt,yt,Mt)},wt.prototype.getPoint=function(H){var ht=this.attr(),dt=ht.x1,yt=ht.y1,Mt=ht.x2,$=ht.y2;return v.c.pointAt(dt,yt,Mt,$,H)},wt}(n),T={circle:function(wt,H,ht){return[["M",wt,H],["m",-ht,0],["a",ht,ht,0,1,0,2*ht,0],["a",ht,ht,0,1,0,2*-ht,0]]},square:function(wt,H,ht){return[["M",wt-ht,H-ht],["L",wt+ht,H-ht],["L",wt+ht,H+ht],["L",wt-ht,H+ht],["Z"]]},diamond:function(wt,H,ht){return[["M",wt-ht,H],["L",wt,H-ht],["L",wt+ht,H],["L",wt,H+ht],["Z"]]},triangle:function(wt,H,ht){var dt=ht*Math.sin(1/3*Math.PI);return[["M",wt-ht,H+dt],["L",wt,H-dt],["L",wt+ht,H+dt],["z"]]},triangleDown:function(wt,H,ht){var dt=ht*Math.sin(1/3*Math.PI);return[["M",wt-ht,H-dt],["L",wt+ht,H-dt],["L",wt,H+dt],["Z"]]}},N={get:function(wt){return T[wt]},register:function(wt,H){T[wt]=H},remove:function(wt){delete T[wt]},getAll:function(){return T}},X=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="marker",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.createPath=function(H){this.get("el").setAttribute("d",this._assembleMarker())},wt.prototype._assembleMarker=function(){var H=this._getPath();return Object(s.m)(H)?H.map(function(ht){return ht.join(" ")}).join(""):H},wt.prototype._getPath=function(){var H,ht=this.attr(),dt=ht.x,yt=ht.y,Mt=ht.r||ht.radius,$=ht.symbol||"circle";return(H=Object(s.r)($)?$:N.get($))?H(dt,yt,Mt):(console.warn(H+" symbol is not exist."),null)},wt.symbolsFactory=N,wt}(n),tt=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="path",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{startArrow:!1,endArrow:!1})},wt.prototype.createPath=function(H,ht){var dt=this,yt=this.attr(),Mt=this.get("el");Object(s.f)(ht||yt,function($,lt){if(lt==="path"&&Object(s.m)($))Mt.setAttribute("d",dt._formatPath($));else if(lt==="startArrow"||lt==="endArrow")if($){var rt=Object(s.v)($)?H.addArrow(yt,j.b[lt]):H.getDefaultArrow(yt,j.b[lt]);Mt.setAttribute(j.b[lt],"url(#"+rt+")")}else Mt.removeAttribute(j.b[lt]);else j.b[lt]&&Mt.setAttribute(j.b[lt],$)})},wt.prototype._formatPath=function(H){var ht=H.map(function(dt){return dt.join(" ")}).join("");return~ht.indexOf("NaN")?"":ht},wt.prototype.getTotalLength=function(){var H=this.get("el");return H?H.getTotalLength():null},wt.prototype.getPoint=function(H){var ht=this.get("el"),dt=this.getTotalLength();if(dt===0)return null;var yt=ht?ht.getPointAtLength(H*dt):null;return yt?{x:yt.x,y:yt.y}:null},wt}(n),nt=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="polygon",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");Object(s.f)(ht||dt,function(Mt,$){$==="points"&&Object(s.m)(Mt)&&Mt.length>=2?yt.setAttribute("points",Mt.map(function(lt){return lt[0]+","+lt[1]}).join(" ")):j.b[$]&&yt.setAttribute(j.b[$],Mt)})},wt}(n),vt=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="polyline",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{startArrow:!1,endArrow:!1})},wt.prototype.onAttrChange=function(H,ht,dt){Nt.prototype.onAttrChange.call(this,H,ht,dt),["points"].indexOf(H)!==-1&&this._resetCache()},wt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},wt.prototype.createPath=function(H,ht){var dt=this.attr(),yt=this.get("el");Object(s.f)(ht||dt,function(Mt,$){$==="points"&&Object(s.m)(Mt)&&Mt.length>=2?yt.setAttribute("points",Mt.map(function(lt){return lt[0]+","+lt[1]}).join(" ")):j.b[$]&&yt.setAttribute(j.b[$],Mt)})},wt.prototype.getTotalLength=function(){var H=this.attr().points,ht=this.get("totalLength");return Object(s.s)(ht)?(this.set("totalLength",v.d.length(H)),this.get("totalLength")):ht},wt.prototype.getPoint=function(H){var ht,dt,yt=this.attr().points,Mt=this.get("tCache");return Mt||(this._setTcache(),Mt=this.get("tCache")),Object(s.f)(Mt,function($,lt){H>=$[0]&&H<=$[1]&&(ht=(H-$[0])/($[1]-$[0]),dt=lt)}),v.c.pointAt(yt[dt][0],yt[dt][1],yt[dt+1][0],yt[dt+1][1],ht)},wt.prototype._setTcache=function(){var H=this.attr().points;if(H&&H.length!==0){var ht=this.getTotalLength();if(!(ht<=0)){var dt,yt,Mt=0,$=[];Object(s.f)(H,function(lt,rt){H[rt+1]&&((dt=[])[0]=Mt/ht,yt=v.c.length(lt[0],lt[1],H[rt+1][0],H[rt+1][1]),Mt+=yt,dt[1]=Mt/ht,$.push(dt))}),this.set("tCache",$)}}},wt.prototype.getStartTangent=function(){var H=this.attr().points,ht=[];return ht.push([H[1][0],H[1][1]]),ht.push([H[0][0],H[0][1]]),ht},wt.prototype.getEndTangent=function(){var H=this.attr().points,ht=H.length-1,dt=[];return dt.push([H[ht-1][0],H[ht-1][1]]),dt.push([H[ht][0],H[ht][1]]),dt},wt}(n),ft=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="rect",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x:0,y:0,width:0,height:0,radius:0})},wt.prototype.createPath=function(H,ht){var dt=this,yt=this.attr(),Mt=this.get("el"),$=!1,lt=["x","y","width","height","radius"];Object(s.f)(ht||yt,function(rt,z){lt.indexOf(z)===-1||$?lt.indexOf(z)===-1&&j.b[z]&&Mt.setAttribute(j.b[z],rt):(Mt.setAttribute("d",dt._assembleRect(yt)),$=!0)})},wt.prototype._assembleRect=function(H){var ht=H.x,dt=H.y,yt=H.width,Mt=H.height,$=H.radius;if(!$)return"M "+ht+","+dt+" l "+yt+",0 l 0,"+Mt+" l"+-yt+" 0 z";var lt=function(rt){var z=0,P=0,Y=0,k=0;return Object(s.m)(rt)?rt.length===1?z=P=Y=k=rt[0]:rt.length===2?(z=Y=rt[0],P=k=rt[1]):rt.length===3?(z=rt[0],P=k=rt[1],Y=rt[2]):(z=rt[0],P=rt[1],Y=rt[2],k=rt[3]):z=P=Y=k=rt,{r1:z,r2:P,r3:Y,r4:k}}($);return Object(s.m)($)?$.length===1?lt.r1=lt.r2=lt.r3=lt.r4=$[0]:$.length===2?(lt.r1=lt.r3=$[0],lt.r2=lt.r4=$[1]):$.length===3?(lt.r1=$[0],lt.r2=lt.r4=$[1],lt.r3=$[2]):(lt.r1=$[0],lt.r2=$[1],lt.r3=$[2],lt.r4=$[3]):lt.r1=lt.r2=lt.r3=lt.r4=$,[["M "+(ht+lt.r1)+","+dt],["l "+(yt-lt.r1-lt.r2)+",0"],["a "+lt.r2+","+lt.r2+",0,0,1,"+lt.r2+","+lt.r2],["l 0,"+(Mt-lt.r2-lt.r3)],["a "+lt.r3+","+lt.r3+",0,0,1,"+-lt.r3+","+lt.r3],["l "+(lt.r3+lt.r4-yt)+",0"],["a "+lt.r4+","+lt.r4+",0,0,1,"+-lt.r4+","+-lt.r4],["l 0,"+(lt.r4+lt.r1-Mt)],["a "+lt.r1+","+lt.r1+",0,0,1,"+lt.r1+","+-lt.r1],["z"]].join(" ")},wt}(n),bt=e(119),St={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},pt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ct={left:"left",start:"left",center:"middle",right:"end",end:"end"},zt=function(Nt){function wt(){var H=Nt!==null&&Nt.apply(this,arguments)||this;return H.type="text",H.canFill=!0,H.canStroke=!0,H}return Object(p.b)(wt,Nt),wt.prototype.getDefaultAttrs=function(){var H=Nt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},H),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},wt.prototype.createPath=function(H,ht){var dt=this,yt=this.attr(),Mt=this.get("el");this._setFont(),Object(s.f)(ht||yt,function($,lt){lt==="text"?dt._setText(""+$):lt==="matrix"&&$?Object(S.c)(dt):j.b[lt]&&Mt.setAttribute(j.b[lt],$)}),Mt.setAttribute("paint-order","stroke"),Mt.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},wt.prototype._setFont=function(){var H=this.get("el"),ht=this.attr(),dt=ht.textBaseline,yt=ht.textAlign,Mt=Object(bt.a)();Mt&&Mt.name==="firefox"?H.setAttribute("dominant-baseline",pt[dt]||"alphabetic"):H.setAttribute("alignment-baseline",St[dt]||"baseline"),H.setAttribute("text-anchor",ct[yt]||"left")},wt.prototype._setText=function(H){var ht=this.get("el"),dt=this.attr(),yt=dt.x,Mt=dt.textBaseline,$=Mt===void 0?"bottom":Mt;if(H)if(~H.indexOf(`
`)){var lt=H.split(`
`),rt=lt.length-1,z="";Object(s.f)(lt,function(P,Y){Y===0?$==="alphabetic"?z+='<tspan x="'+yt+'" dy="'+-rt+'em">'+P+"</tspan>":$==="top"?z+='<tspan x="'+yt+'" dy="0.9em">'+P+"</tspan>":$==="middle"?z+='<tspan x="'+yt+'" dy="'+-(rt-1)/2+'em">'+P+"</tspan>":$==="bottom"?z+='<tspan x="'+yt+'" dy="-'+(rt+.3)+'em">'+P+"</tspan>":$==="hanging"&&(z+='<tspan x="'+yt+'" dy="'+(-(rt-1)-.3)+'em">'+P+"</tspan>"):z+='<tspan x="'+yt+'" dy="1em">'+P+"</tspan>"}),ht.innerHTML=z}else ht.innerHTML=H;else ht.innerHTML=""},wt}(n)},function(a,A,e){"use strict";var i=function(){function p(){this._events={}}return p.prototype.on=function(m,S,l){return this._events[m]||(this._events[m]=[]),this._events[m].push({callback:S,once:!!l}),this},p.prototype.once=function(m,S){return this.on(m,S,!0),this},p.prototype.emit=function(m){for(var S=this,l=[],M=1;M<arguments.length;M++)l[M-1]=arguments[M];var j=this._events[m]||[],y=this._events["*"]||[],n=function(d){for(var E=d.length,O=0;O<E;O++)if(d[O]){var C=d[O],v=C.callback;C.once&&(d.splice(O,1),d.length===0&&delete S._events[m],E--,O--),v.apply(S,l)}};n(j),n(y)},p.prototype.off=function(m,S){if(m)if(S){for(var l=this._events[m]||[],M=l.length,j=0;j<M;j++)l[j].callback===S&&(l.splice(j,1),M--,j--);l.length===0&&delete this._events[m]}else delete this._events[m];else this._events={};return this},p.prototype.getEvents=function(){return this._events},p}();A.a=i},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return p}),e.d(A,"clone",function(){return m}),e.d(A,"fromValues",function(){return S}),e.d(A,"copy",function(){return l}),e.d(A,"set",function(){return M}),e.d(A,"add",function(){return j}),e.d(A,"subtract",function(){return y}),e.d(A,"multiply",function(){return n}),e.d(A,"divide",function(){return s}),e.d(A,"ceil",function(){return d}),e.d(A,"floor",function(){return E}),e.d(A,"min",function(){return O}),e.d(A,"max",function(){return C}),e.d(A,"round",function(){return v}),e.d(A,"scale",function(){return x}),e.d(A,"scaleAndAdd",function(){return T}),e.d(A,"distance",function(){return N}),e.d(A,"squaredDistance",function(){return X}),e.d(A,"length",function(){return tt}),e.d(A,"squaredLength",function(){return nt}),e.d(A,"negate",function(){return vt}),e.d(A,"inverse",function(){return ft}),e.d(A,"normalize",function(){return bt}),e.d(A,"dot",function(){return St}),e.d(A,"cross",function(){return pt}),e.d(A,"lerp",function(){return ct}),e.d(A,"random",function(){return zt}),e.d(A,"transformMat2",function(){return Nt}),e.d(A,"transformMat2d",function(){return wt}),e.d(A,"transformMat3",function(){return H}),e.d(A,"transformMat4",function(){return ht}),e.d(A,"rotate",function(){return dt}),e.d(A,"angle",function(){return yt}),e.d(A,"zero",function(){return Mt}),e.d(A,"str",function(){return $}),e.d(A,"exactEquals",function(){return lt}),e.d(A,"equals",function(){return rt}),e.d(A,"len",function(){return P}),e.d(A,"sub",function(){return Y}),e.d(A,"mul",function(){return k}),e.d(A,"div",function(){return h}),e.d(A,"dist",function(){return g}),e.d(A,"sqrDist",function(){return B}),e.d(A,"sqrLen",function(){return V}),e.d(A,"forEach",function(){return q});var i=e(11);function p(){var it=new i.a(2);return i.a!=Float32Array&&(it[0]=0,it[1]=0),it}function m(it){var ot=new i.a(2);return ot[0]=it[0],ot[1]=it[1],ot}function S(it,ot){var At=new i.a(2);return At[0]=it,At[1]=ot,At}function l(it,ot){return it[0]=ot[0],it[1]=ot[1],it}function M(it,ot,At){return it[0]=ot,it[1]=At,it}function j(it,ot,At){return it[0]=ot[0]+At[0],it[1]=ot[1]+At[1],it}function y(it,ot,At){return it[0]=ot[0]-At[0],it[1]=ot[1]-At[1],it}function n(it,ot,At){return it[0]=ot[0]*At[0],it[1]=ot[1]*At[1],it}function s(it,ot,At){return it[0]=ot[0]/At[0],it[1]=ot[1]/At[1],it}function d(it,ot){return it[0]=Math.ceil(ot[0]),it[1]=Math.ceil(ot[1]),it}function E(it,ot){return it[0]=Math.floor(ot[0]),it[1]=Math.floor(ot[1]),it}function O(it,ot,At){return it[0]=Math.min(ot[0],At[0]),it[1]=Math.min(ot[1],At[1]),it}function C(it,ot,At){return it[0]=Math.max(ot[0],At[0]),it[1]=Math.max(ot[1],At[1]),it}function v(it,ot){return it[0]=Math.round(ot[0]),it[1]=Math.round(ot[1]),it}function x(it,ot,At){return it[0]=ot[0]*At,it[1]=ot[1]*At,it}function T(it,ot,At,gt){return it[0]=ot[0]+At[0]*gt,it[1]=ot[1]+At[1]*gt,it}function N(it,ot){var At=ot[0]-it[0],gt=ot[1]-it[1];return Math.hypot(At,gt)}function X(it,ot){var At=ot[0]-it[0],gt=ot[1]-it[1];return At*At+gt*gt}function tt(it){var ot=it[0],At=it[1];return Math.hypot(ot,At)}function nt(it){var ot=it[0],At=it[1];return ot*ot+At*At}function vt(it,ot){return it[0]=-ot[0],it[1]=-ot[1],it}function ft(it,ot){return it[0]=1/ot[0],it[1]=1/ot[1],it}function bt(it,ot){var At=ot[0],gt=ot[1],mt=At*At+gt*gt;return mt>0&&(mt=1/Math.sqrt(mt)),it[0]=ot[0]*mt,it[1]=ot[1]*mt,it}function St(it,ot){return it[0]*ot[0]+it[1]*ot[1]}function pt(it,ot,At){var gt=ot[0]*At[1]-ot[1]*At[0];return it[0]=it[1]=0,it[2]=gt,it}function ct(it,ot,At,gt){var mt=ot[0],Ot=ot[1];return it[0]=mt+gt*(At[0]-mt),it[1]=Ot+gt*(At[1]-Ot),it}function zt(it,ot){ot=ot||1;var At=2*i.c()*Math.PI;return it[0]=Math.cos(At)*ot,it[1]=Math.sin(At)*ot,it}function Nt(it,ot,At){var gt=ot[0],mt=ot[1];return it[0]=At[0]*gt+At[2]*mt,it[1]=At[1]*gt+At[3]*mt,it}function wt(it,ot,At){var gt=ot[0],mt=ot[1];return it[0]=At[0]*gt+At[2]*mt+At[4],it[1]=At[1]*gt+At[3]*mt+At[5],it}function H(it,ot,At){var gt=ot[0],mt=ot[1];return it[0]=At[0]*gt+At[3]*mt+At[6],it[1]=At[1]*gt+At[4]*mt+At[7],it}function ht(it,ot,At){var gt=ot[0],mt=ot[1];return it[0]=At[0]*gt+At[4]*mt+At[12],it[1]=At[1]*gt+At[5]*mt+At[13],it}function dt(it,ot,At,gt){var mt=ot[0]-At[0],Ot=ot[1]-At[1],It=Math.sin(gt),Dt=Math.cos(gt);return it[0]=mt*Dt-Ot*It+At[0],it[1]=mt*It+Ot*Dt+At[1],it}function yt(it,ot){var At=it[0],gt=it[1],mt=ot[0],Ot=ot[1],It=Math.sqrt(At*At+gt*gt)*Math.sqrt(mt*mt+Ot*Ot),Dt=It&&(At*mt+gt*Ot)/It;return Math.acos(Math.min(Math.max(Dt,-1),1))}function Mt(it){return it[0]=0,it[1]=0,it}function $(it){return"vec2("+it[0]+", "+it[1]+")"}function lt(it,ot){return it[0]===ot[0]&&it[1]===ot[1]}function rt(it,ot){var At=it[0],gt=it[1],mt=ot[0],Ot=ot[1];return Math.abs(At-mt)<=i.b*Math.max(1,Math.abs(At),Math.abs(mt))&&Math.abs(gt-Ot)<=i.b*Math.max(1,Math.abs(gt),Math.abs(Ot))}var z,P=tt,Y=y,k=n,h=s,g=N,B=X,V=nt,q=(z=p(),function(it,ot,At,gt,mt,Ot){var It,Dt;for(ot||(ot=2),At||(At=0),Dt=gt?Math.min(gt*ot+At,it.length):it.length,It=At;It<Dt;It+=ot)z[0]=it[It],z[1]=it[It+1],mt(z,z,Ot),it[It]=z[0],it[It+1]=z[1];return it})},function(a,A){var e=[],i=[];function p(m,S){if(S=S||{},m===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var l,M=S.prepend===!0?"prepend":"append",j=S.container!==void 0?S.container:document.querySelector("head"),y=e.indexOf(j);return y===-1&&(y=e.push(j)-1,i[y]={}),i[y]!==void 0&&i[y][M]!==void 0?l=i[y][M]:(l=i[y][M]=function(){var n=document.createElement("style");return n.setAttribute("type","text/css"),n}(),M==="prepend"?j.insertBefore(l,j.childNodes[0]):j.appendChild(l)),m.charCodeAt(0)===65279&&(m=m.substr(1,m.length)),l.styleSheet?l.styleSheet.cssText+=m:l.textContent+=m,l}a.exports=p,a.exports.insertCss=p},function(a,A,e){"use strict";function i(O){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(O)}var p=e(263),m=e(267),S=[].slice,l=["keyword","gray","hex"],M={};Object.keys(m).forEach(function(O){M[S.call(m[O].labels).sort().join("")]=O});var j={};function y(O,C){if(!(this instanceof y))return new y(O,C);if(C&&C in l&&(C=null),C&&!(C in m))throw new Error("Unknown model: "+C);var v,x;if(O==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(O instanceof y)this.model=O.model,this.color=O.color.slice(),this.valpha=O.valpha;else if(typeof O=="string"){var T=p.get(O);if(T===null)throw new Error("Unable to parse color from string: "+O);this.model=T.model,x=m[this.model].channels,this.color=T.value.slice(0,x),this.valpha=typeof T.value[x]=="number"?T.value[x]:1}else if(O.length){this.model=C||"rgb",x=m[this.model].channels;var N=S.call(O,0,x);this.color=E(N,x),this.valpha=typeof O[x]=="number"?O[x]:1}else if(typeof O=="number")O&=16777215,this.model="rgb",this.color=[O>>16&255,O>>8&255,255&O],this.valpha=1;else{this.valpha=1;var X=Object.keys(O);"alpha"in O&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof O.alpha=="number"?O.alpha:0);var tt=X.sort().join("");if(!(tt in M))throw new Error("Unable to parse color from object: "+JSON.stringify(O));this.model=M[tt];var nt=m[this.model].labels,vt=[];for(v=0;v<nt.length;v++)vt.push(O[nt[v]]);this.color=E(vt)}if(j[this.model])for(x=m[this.model].channels,v=0;v<x;v++){var ft=j[this.model][v];ft&&(this.color[v]=ft(this.color[v]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(O,C,v){return(O=Array.isArray(O)?O:[O]).forEach(function(x){(j[x]||(j[x]=[]))[C]=v}),O=O[0],function(x){var T;return arguments.length?(v&&(x=v(x)),(T=this[O]()).color[C]=x,T):(T=this[O]().color[C],v&&(T=v(T)),T)}}function s(O){return function(C){return Math.max(0,Math.min(O,C))}}function d(O){return Array.isArray(O)?O:[O]}function E(O,C){for(var v=0;v<C;v++)typeof O[v]!="number"&&(O[v]=0);return O}y.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(C){var v=this.model in p.to?this:this.rgb(),x=(v=v.round(typeof C=="number"?C:1)).valpha===1?v.color:v.color.concat(this.valpha);return p.to[v.model](x)},percentString:function(C){var v=this.rgb().round(typeof C=="number"?C:1),x=v.valpha===1?v.color:v.color.concat(this.valpha);return p.to.rgb.percent(x)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var C={},v=m[this.model].channels,x=m[this.model].labels,T=0;T<v;T++)C[x[T]]=this.color[T];return this.valpha!==1&&(C.alpha=this.valpha),C},unitArray:function(){var C=this.rgb().color;return C[0]/=255,C[1]/=255,C[2]/=255,this.valpha!==1&&C.push(this.valpha),C},unitObject:function(){var C=this.rgb().object();return C.r/=255,C.g/=255,C.b/=255,this.valpha!==1&&(C.alpha=this.valpha),C},round:function(C){return C=Math.max(C||0,0),new y(this.color.map(function(v){return function(x){return function(T,N){return Number(T.toFixed(N))}(x,v)}}(C)).concat(this.valpha),this.model)},alpha:function(C){return arguments.length?new y(this.color.concat(Math.max(0,Math.min(1,C))),this.model):this.valpha},red:n("rgb",0,s(255)),green:n("rgb",1,s(255)),blue:n("rgb",2,s(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(O){return(O%360+360)%360}),saturationl:n("hsl",1,s(100)),lightness:n("hsl",2,s(100)),saturationv:n("hsv",1,s(100)),value:n("hsv",2,s(100)),chroma:n("hcg",1,s(100)),gray:n("hcg",2,s(100)),white:n("hwb",1,s(100)),wblack:n("hwb",2,s(100)),cyan:n("cmyk",0,s(100)),magenta:n("cmyk",1,s(100)),yellow:n("cmyk",2,s(100)),black:n("cmyk",3,s(100)),x:n("xyz",0,s(100)),y:n("xyz",1,s(100)),z:n("xyz",2,s(100)),l:n("lab",0,s(100)),a:n("lab",1),b:n("lab",2),keyword:function(C){return arguments.length?new y(C):m[this.model].keyword(this.color)},hex:function(C){return arguments.length?new y(C):p.to.hex(this.rgb().round().color)},rgbNumber:function(){var C=this.rgb().color;return(255&C[0])<<16|(255&C[1])<<8|255&C[2]},luminosity:function(){for(var C=this.rgb().color,v=[],x=0;x<C.length;x++){var T=C[x]/255;v[x]=T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4)}return .2126*v[0]+.7152*v[1]+.0722*v[2]},contrast:function(C){var v=this.luminosity(),x=C.luminosity();return v>x?(v+.05)/(x+.05):(x+.05)/(v+.05)},level:function(C){var v=this.contrast(C);return v>=7.1?"AAA":v>=4.5?"AA":""},isDark:function(){var C=this.rgb().color;return(299*C[0]+587*C[1]+114*C[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var C=this.rgb(),v=0;v<3;v++)C.color[v]=255-C.color[v];return C},lighten:function(C){var v=this.hsl();return v.color[2]+=v.color[2]*C,v},darken:function(C){var v=this.hsl();return v.color[2]-=v.color[2]*C,v},saturate:function(C){var v=this.hsl();return v.color[1]+=v.color[1]*C,v},desaturate:function(C){var v=this.hsl();return v.color[1]-=v.color[1]*C,v},whiten:function(C){var v=this.hwb();return v.color[1]+=v.color[1]*C,v},blacken:function(C){var v=this.hwb();return v.color[2]+=v.color[2]*C,v},grayscale:function(){var C=this.rgb().color,v=.3*C[0]+.59*C[1]+.11*C[2];return y.rgb(v,v,v)},fade:function(C){return this.alpha(this.valpha-this.valpha*C)},opaquer:function(C){return this.alpha(this.valpha+this.valpha*C)},rotate:function(C){var v=this.hsl(),x=v.color[0];return x=(x=(x+C)%360)<0?360+x:x,v.color[0]=x,v},mix:function(C,v){if(!C||!C.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+i(C));var x=C.rgb(),T=this.rgb(),N=v===void 0?.5:v,X=2*N-1,tt=x.alpha()-T.alpha(),nt=((X*tt==-1?X:(X+tt)/(1+X*tt))+1)/2,vt=1-nt;return y.rgb(nt*x.red()+vt*T.red(),nt*x.green()+vt*T.green(),nt*x.blue()+vt*T.blue(),x.alpha()*N+T.alpha()*(1-N))}},Object.keys(m).forEach(function(O){if(l.indexOf(O)===-1){var C=m[O].channels;y.prototype[O]=function(){if(this.model===O)return new y(this);if(arguments.length)return new y(arguments,O);var v=typeof arguments[C]=="number"?C:this.valpha;return new y(d(m[this.model][O].raw(this.color)).concat(v),O)},y[O]=function(v){return typeof v=="number"&&(v=E(S.call(arguments),C)),new y(v,O)}}}),a.exports=y},function(a,A,e){var i=e(57),p=e(43);a.exports=function(m){if(!p(m))return!1;var S=i(m);return S=="[object Function]"||S=="[object GeneratorFunction]"||S=="[object AsyncFunction]"||S=="[object Proxy]"}},function(a,A,e){var i=e(100),p=e(101);a.exports=function(m,S,l,M){var j=!l;l||(l={});for(var y=-1,n=S.length;++y<n;){var s=S[y],d=M?M(l[s],m[s],s,l,m):void 0;d===void 0&&(d=m[s]),j?p(l,s,d):i(l,s,d)}return l}},function(a,A,e){var i=e(303),p=e(48),m=Object.prototype,S=m.hasOwnProperty,l=m.propertyIsEnumerable,M=i(function(){return arguments}())?i:function(j){return p(j)&&S.call(j,"callee")&&!l.call(j,"callee")};a.exports=M},function(a,A){a.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(a,A,e){var i=e(75);a.exports=function(p){if(typeof p=="string"||i(p))return p;var m=p+"";return m=="0"&&1/p==-1/0?"-0":m}},function(a,A,e){"use strict";function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}Object.defineProperty(A,"__esModule",{value:!0}),A.circularDependencyToException=A.listMetadataForTarget=A.listRegisteredBindingsForServiceIdentifier=A.getServiceIdentifierAsString=A.getFunctionName=void 0;var p=e(41);function m(l){return typeof l=="function"?l.name:i(l)==="symbol"?l.toString():l}function S(l){if(l.name)return l.name;var M=l.toString(),j=M.match(/^function\s*([^\s(]+)/);return j?j[1]:"Anonymous function: "+M}A.getServiceIdentifierAsString=m,A.listRegisteredBindingsForServiceIdentifier=function(l,M,j){var y="",n=j(l,M);return n.length!==0&&(y=`
Registered bindings:`,n.forEach(function(s){var d="Object";s.implementationType!==null&&(d=S(s.implementationType)),y=y+`
 `+d,s.constraint.metaData&&(y=y+" - "+s.constraint.metaData)})),y},A.circularDependencyToException=function l(M){M.childRequests.forEach(function(j){if(function n(s,d){return s.parentRequest!==null&&(s.parentRequest.serviceIdentifier===d||n(s.parentRequest,d))}(j,j.serviceIdentifier)){var y=function(n){return function s(d,E){E===void 0&&(E=[]);var O=m(d.serviceIdentifier);return E.push(O),d.parentRequest!==null?s(d.parentRequest,E):E}(n).reverse().join(" --> ")}(j);throw new Error(p.CIRCULAR_DEPENDENCY+" "+y)}l(j)})},A.listMetadataForTarget=function(l,M){if(M.isTagged()||M.isNamed()){var j="",y=M.getNamedTag(),n=M.getCustomTags();return y!==null&&(j+=y.toString()+`
`),n!==null&&n.forEach(function(s){j+=s.toString()+`
`})," "+l+`
 `+l+" - "+j}return" "+l},A.getFunctionName=S},function(a,A,e){"use strict";e.d(A,"a",function(){return l});var i=e(17);function p(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function m(M,j){return p(M)*p(j)?(M[0]*j[0]+M[1]*j[1])/(p(M)*p(j)):1}function S(M,j){return(M[0]*j[1]<M[1]*j[0]?-1:1)*Math.acos(m(M,j))}function l(M,j){var y=j[1],n=j[2],s=Object(i.m)(Object(i.o)(j[3]),2*Math.PI),d=j[4],E=j[5],O=M[0],C=M[1],v=j[6],x=j[7],T=Math.cos(s)*(O-v)/2+Math.sin(s)*(C-x)/2,N=-1*Math.sin(s)*(O-v)/2+Math.cos(s)*(C-x)/2,X=T*T/(y*y)+N*N/(n*n);X>1&&(y*=Math.sqrt(X),n*=Math.sqrt(X));var tt=y*y*(N*N)+n*n*(T*T),nt=tt?Math.sqrt((y*y*(n*n)-tt)/tt):1;d===E&&(nt*=-1),isNaN(nt)&&(nt=0);var vt=n?nt*y*N/n:0,ft=y?nt*-n*T/y:0,bt=(O+v)/2+Math.cos(s)*vt-Math.sin(s)*ft,St=(C+x)/2+Math.sin(s)*vt+Math.cos(s)*ft,pt=[(T-vt)/y,(N-ft)/n],ct=[(-1*T-vt)/y,(-1*N-ft)/n],zt=S([1,0],pt),Nt=S(pt,ct);return m(pt,ct)<=-1&&(Nt=Math.PI),m(pt,ct)>=1&&(Nt=0),E===0&&Nt>0&&(Nt-=2*Math.PI),E===1&&Nt<0&&(Nt+=2*Math.PI),{cx:bt,cy:St,rx:Object(i.j)(M,[v,x])?0:y,ry:Object(i.j)(M,[v,x])?0:n,startAngle:zt,endAngle:zt+Nt,xRotation:s,arcFlag:d,sweepFlag:E}}},function(a,A){function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a.exports=e=function(m){return typeof m}:a.exports=e=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},e(i)}a.exports=e},function(a,A,e){"use strict";var i=e(1),p=e(52),m=e(62),S=e(122),l=e(0),M=e(5),j=e(45),y=e(14),n=M.n.cloneEvent,s=M.n.isViewportChanged,d=function(ht){function dt(yt){var Mt=ht.call(this,yt)||this;return Mt.extendEvents=[],Mt.dragging=!1,Mt.preItem=null,Mt.graph=yt,Mt.destroyed=!1,Mt.initEvents(),Mt}return Object(i.b)(dt,ht),dt.prototype.initEvents=function(){var yt=this.graph,Mt=this.extendEvents,$=Mt===void 0?[]:Mt,lt=yt.get("canvas"),rt=lt.get("el"),z=Object(l.J)(this,"onCanvasEvents"),P=Object(l.J)(this,"onExtendEvents"),Y=Object(l.J)(this,"onWheelEvent");lt.off("*").on("*",z),this.canvasHandler=z,$.push(Object(y.a)(rt,"DOMMouseScroll",Y)),$.push(Object(y.a)(rt,"mousewheel",Y)),typeof window!="undefined"&&($.push(Object(y.a)(window,"keydown",P)),$.push(Object(y.a)(window,"keyup",P)),$.push(Object(y.a)(window,"focus",P)))},dt.getItemRoot=function(yt){for(;yt&&!yt.get("item");)yt=yt.get("parent");return yt},dt.prototype.onCanvasEvents=function(yt){var Mt=this.graph,$=Mt.get("canvas"),lt=yt.target,rt=yt.type;yt.canvasX=yt.x,yt.canvasY=yt.y;var z={x:yt.canvasX,y:yt.canvasY},P=Mt.get("group").getMatrix();if(P||(P=[1,0,0,0,1,0,0,0,1]),s(P)&&(z=Mt.getPointByClient(yt.clientX,yt.clientY)),yt.x=z.x,yt.y=z.y,yt.currentTarget=Mt,lt===$)return rt==="mousemove"&&this.handleMouseMove(yt,"canvas"),yt.target=$,yt.item=null,Mt.emit(rt,yt),void Mt.emit("canvas:"+rt,yt);var Y=dt.getItemRoot(lt);if(Y){var k=Y.get("item");if(!k.destroyed){var h=k.getType();if(yt.target=lt,yt.item=k,yt.canvasX===yt.x&&yt.canvasY===yt.y){var g=Mt.getCanvasByPoint(yt.x,yt.y);yt.canvasX=g.x,yt.canvasY=g.y}Mt.emit(rt,yt),yt.name&&!yt.name.includes(":")?Mt.emit(h+":"+rt,yt):Mt.emit(yt.name,yt),rt==="dragstart"&&(this.dragging=!0),rt==="dragend"&&(this.dragging=!1),rt==="mousemove"&&this.handleMouseMove(yt,h)}}else Mt.emit(rt,yt)},dt.prototype.onExtendEvents=function(yt){this.graph.emit(yt.type,yt)},dt.prototype.onWheelEvent=function(yt){Object(l.s)(yt.wheelDelta)&&(yt.wheelDelta=-yt.detail),this.graph.emit("wheel",yt)},dt.prototype.handleMouseMove=function(yt,Mt){var $=this.graph,lt=this.preItem,rt=$.get("canvas"),z=yt.target===rt?null:yt.item;yt=n(yt),lt&&lt!==z&&!lt.destroyed&&(yt.item=lt,this.emitCustomEvent(lt.getType(),"mouseleave",yt),this.dragging&&this.emitCustomEvent(lt.getType(),"dragleave",yt)),z&&lt!==z&&(yt.item=z,this.emitCustomEvent(Mt,"mouseenter",yt),this.dragging&&this.emitCustomEvent(Mt,"dragenter",yt)),this.preItem=z},dt.prototype.emitCustomEvent=function(yt,Mt,$){$.type=Mt,this.graph.emit(yt+":"+Mt,$)},dt.prototype.destroy=function(){var yt=this.graph,Mt=this.canvasHandler,$=this.extendEvents;yt.get("canvas").off("*",Mt),Object(l.f)($,function(lt){lt.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},dt}(M.a),E=e(69),O=e(254),C=e.n(O);function v(){return C()(`!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=436)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var r=n(17);e.METADATA_KEY=r;var o=n(374);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.Container}});var i=n(30);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(390);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var u=n(391);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return u.injectable}});var s=n(392);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var c=n(393);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var f=n(164);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(394);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var h=n(395);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(396);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(397);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(398);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(162);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(40);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return y.id}});var g=n(33);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return g.decorate}});var b=n(167);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(50);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n(399);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TextureCompressionBC="texture-compression-bc"}(e.ExtensionName||(e.ExtensionName={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.AddressMode||(e.AddressMode={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.BindingType||(e.BindingType={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.BlendFactor||(e.BlendFactor={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.BlendOperation||(e.BlendOperation={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.CompareFunction||(e.CompareFunction={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.CullMode||(e.CullMode={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.FilterMode||(e.FilterMode={})),function(t){t.CCW="ccw",t.CW="cw"}(e.FrontFace||(e.FrontFace={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.IndexFormat||(e.IndexFormat={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.InputStepMode||(e.InputStepMode={})),function(t){t.Load="load"}(e.LoadOp||(e.LoadOp={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.PrimitiveTopology||(e.PrimitiveTopology={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.StencilOperation||(e.StencilOperation={})),function(t){t.Store="store",t.Clear="clear"}(e.StoreOp||(e.StoreOp={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.TextureDimension||(e.TextureDimension={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.TextureFormat||(e.TextureFormat={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.TextureComponentType||(e.TextureComponentType={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.TextureViewDimension||(e.TextureViewDimension={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.VertexFormat||(e.VertexFormat={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.TextureAspect||(e.TextureAspect={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.CompilationMessageType||(e.CompilationMessageType={})),function(t){t.Occlusion="occlusion"}(e.QueryType||(e.QueryType={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.BufferUsage||(e.BufferUsage={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.ColorWrite||(e.ColorWrite={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.ShaderStage||(e.ShaderStage={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.TextureUsage||(e.TextureUsage={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.MapMode||(e.MapMode={}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(370)},function(t,e){t.exports=function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(402),o=n(403),i=n(160),a=n(404);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r;try{r={cloneDeep:n(310),constant:n(84),defaults:n(311),each:n(123),filter:n(126),find:n(312),flatten:n(154),forEach:n(124),forIn:n(317),has:n(137),isUndefined:n(138),last:n(318),map:n(139),mapValues:n(319),max:n(320),merge:n(322),min:n(327),minBy:n(328),now:n(329),pick:n(330),range:n(335),reduce:n(141),sortBy:n(338),uniqueId:n(343),values:n(147),zipObject:n(344)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(400);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(51),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){var r;try{r={clone:n(199),constant:n(84),each:n(123),filter:n(126),has:n(137),isArray:n(13),isEmpty:n(275),isFunction:n(46),isUndefined:n(138),keys:n(32),map:n(139),reduce:n(141),size:n(278),transform:n(284),union:n(285),values:n(147)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(232),o=n(63),i=n(79),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r;try{r=n(197)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(17),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},function(t,e){},function(t,e,n){var r=n(46),o=n(78);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(255),i=n(265),a=n(39),u=n(13),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){var r=n(42),o=n(211),i=n(212),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(109),o=n(80),i=n(28);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(19),o=n(17);function i(t,e,n,o,i){var a={},u="number"==typeof i,s=void 0!==i&&u?i.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[s];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var h=l[f];if(h.key===o.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(o),a[s]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,r){e(n,r,t)}}e.tagParameter=function(t,e,n,r){i(o.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){i(o.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([u(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){var r=n(371),o=n(372),i=n(160),a=n(373);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(178),o=n(177),i=n(185),a=n(100),u=n(186),s=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(s,-n[1],n[0]),c/u(e,s)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e,n){var r=n(210),o=n(215);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(109),o=n(235),i=n(28);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;e.id=function(){return r++}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i=n(231),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(61)(t))},function(t,e,n){var r=n(240),o=n(75),i=n(241),a=n(118),u=n(242),s=n(31),c=n(107),f=c(r),l=c(o),h=c(i),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(31),i=n(25);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,n){var r=n(31),o=n(21);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(59),o=n(60);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(230),o=n(25),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(19);function i(t){return"function"==typeof t?t.name:"symbol"===r(t)?t.toString():t}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\\s*([^\\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\\n"}))," "+t+"\\n "+t+" - "+n}return" "+t},e.getFunctionName=a},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){t.exports={EPSILON:n(175),create:n(176),clone:n(405),fromValues:n(406),copy:n(407),set:n(177),equals:n(408),exactEquals:n(409),add:n(178),subtract:n(100),sub:n(410),multiply:n(179),mul:n(411),divide:n(180),div:n(412),inverse:n(413),min:n(414),max:n(415),rotate:n(416),floor:n(417),ceil:n(418),round:n(419),scale:n(420),scaleAndAdd:n(421),distance:n(181),dist:n(422),squaredDistance:n(182),sqrDist:n(423),length:n(183),len:n(424),squaredLength:n(184),sqrLen:n(425),negate:n(426),normalize:n(185),dot:n(186),cross:n(427),lerp:n(428),random:n(429),transformMat2:n(430),transformMat2d:n(431),transformMat3:n(432),transformMat4:n(433),forEach:n(434),limit:n(435)}},function(t,e,n){var r=n(55),o=n(205),i=n(206),a=n(207),u=n(208),s=n(209);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(200),o=n(201),i=n(202),a=n(203),u=n(204);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(41);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(37)(Object,"create");t.exports=r},function(t,e,n){var r=n(224);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60),o=n(41),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(108);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(110)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(85),o=n(253)(r);t.exports=o},function(t,e,n){var r=n(68),o=n(49);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(13),o=n(88),i=n(267),a=n(133);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(39),o=n(142),i=n(143);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(41),i=n(28),a=n(62),u=n(21);t.exports=function(t,e,n){if(!u(n))return!1;var s=r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(11);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e){},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(r)?"\\0":r)}function c(t,e,n,r){var o=""+e,i=""+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var n=arguments,r=this;return o.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var n=e+="";!o.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;o.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=n.parent(o);return void 0===i||e.hasNode(i)?(r[o]=i,i):i in r?r[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,r=arguments;return o.reduce(t,(function(t,o){return r.length>1?n.setEdge(t,o,e):n.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,n,i,u=!1,f=arguments[0];"object"===r(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,n=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(n)||(n=""+n);var l=s(this._isDirected,t,e,n);if(o.has(this._edgeLabels,l))return u&&(this._edgeLabels[l]=i),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=u?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.v===e})):r}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.w===e})):r}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(37)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(216),o=n(223),i=n(225),a=n(226),u=n(227);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,n(61)(t))},function(t,e,n){var r=n(64),o=n(233),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113),o=n(114),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(119);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(86),o=n(32);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(252)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(13),i=n(45),a=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(82),o=n(286);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(92),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(91),o=n(167),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e,n){var r=n(31),o=n(65),i=n(25),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){t.exports={graphlib:n(23),layout:n(309),debug:n(367),util:{time:n(18).time,notime:n(18).notime},version:n(368)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],u]:t._events[s].push(u):(t._events[s]=u,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var u=o?o+t:t;if(!this._events[u])return!1;var s,c,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,a),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];f.fn.apply(f.context,s)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(l-1);h<l;h++)s[h-1]=arguments[h];f[c].fn.apply(f[c].context,s)}}return!0},c.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(54),o=n(77),i=n(59),a=n(228),u=n(234),s=n(111),c=n(112),f=n(237),l=n(238),h=n(116),d=n(239),p=n(44),v=n(243),m=n(244),y=n(121),g=n(13),b=n(43),_=n(248),x=n(21),w=n(250),E=n(32),S=n(38),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,A,I,k,O){var D,R=1&n,M=2&n,C=4&n;if(A&&(D=k?A(e,I,k,O):A(e)),void 0!==D)return D;if(!x(e))return e;var N=g(e);if(N){if(D=v(e),!R)return c(e,D)}else{var P=p(e),G="[object Function]"==P||"[object GeneratorFunction]"==P;if(b(e))return s(e,R);if("[object Object]"==P||"[object Arguments]"==P||G&&!k){if(D=M||G?{}:y(e),!R)return M?l(e,u(D,e)):f(e,a(D,e))}else{if(!T[P])return k?e:{};D=m(e,P,R)}}O||(O=new r);var j=O.get(e);if(j)return j;O.set(e,D),w(e)?e.forEach((function(r){D.add(t(r,n,A,r,e,O))})):_(e)&&e.forEach((function(r,o){D.set(o,t(r,n,A,o,e,O))}));var L=N?void 0:(C?M?d:h:M?S:E)(e);return o(L||e,(function(r,o){L&&(r=e[o=r]),i(D,o,t(r,n,A,o,e,O))})),D}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(106))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(37),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(229),o=n(48),i=n(13),a=n(43),u=n(62),s=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&s(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(61)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(82),o=n(65),i=n(81),a=n(114),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(117),o=n(81),i=n(32);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(82),o=n(13);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(37)(n(24),"Set");t.exports=r},function(t,e,n){var r=n(24).Uint8Array;t.exports=r},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(122),o=n(65),i=n(64);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=n(77),o=n(66),i=n(125),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(39);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(113),o=n(254),i=n(29),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(257),o=n(25);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(129),o=n(260),i=n(130);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=-1,v=!0,m=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,(function(t,e){if(!i(m,e)&&(y===t||u(y,t,n,a,s)))return m.push(e)}))){v=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(76),o=n(258),i=n(259);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(270);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(271),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(68),o=n(48),i=n(13),a=n(62),u=n(78),s=n(49);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(274),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(69),o=n(29),i=n(140),a=n(13);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(276),o=n(66),i=n(29),a=n(277),u=n(13);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(287),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(288),o=n(289)(r);t.exports=o},function(t,e,n){var r=n(129),o=n(290),i=n(294),a=n(130),u=n(295),s=n(87);t.exports=function(t,e,n){var c=-1,f=o,l=t.length,h=!0,d=[],p=d;if(n)h=!1,f=i;else if(l>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,p=new r}else p=e?[]:d;t:for(;++c<l;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue t;e&&p.push(y),d.push(m)}else f(p,y,n)||(p!==d&&p.push(y),d.push(m))}return d}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(28),o=n(25);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(297),o=n(32);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(20),o=n(149);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(20);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(20);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(20);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(20);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,"post"===n,a,o,i)})),i}},function(t,e,n){var r=n(316);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(89);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(60),o=n(41);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(72).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r;!function(r){!function(o){var i="object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof self?"undefined":n(self))?self:"object"===n(this)?this:Function("return this;")(),a=u(r);function u(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=r:a=u(i.Reflect,a),function(e){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!u&&!s,f={create:u?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:c?function(t,e){return r.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return r.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"===(void 0===t?"undefined":n(t))&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[a]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,i)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[a]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function i(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[a]=function(){return this.keys()},t}():Set,v=new(h||"function"!=typeof WeakMap?function(){var t=f.create(),e=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&f.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?f.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+a()}while(f.has(t,e));return t[e]=!0,e}function o(t,n){if(!r.call(t,e)){if(!n)return;Object.defineProperty(t,e,{value:f.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=v.get(t);if(w(r)){if(!n)return;r=new d,v.set(t,r)}var o=r.get(e);if(w(o)){if(!n)return;o=new d,r.set(e,o)}return o}function y(t,e,n){var r=m(e,n,!1);return!w(r)&&!!r.has(t)}function g(t,e,n){var r=m(e,n,!1);if(!w(r))return r.get(t)}function b(t,e,n,r){m(n,r,!0).set(t,e)}function _(t,e){var n=[],r=m(t,e,!1);if(w(r))return n;for(var o=function(t){var e=D(t,a);if(!k(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var u=R(o);if(!u)return n.length=i,n;var s=u.value;try{n[i]=s}catch(t){try{M(o)}finally{throw t}}i++}}function x(t){if(null===t)return 1;switch(n(t)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function E(t){return null===t}function S(t){return"object"===n(t)?null!==t:"function"==typeof t}function T(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(k(n))if(!S(o=n.call(t)))return o;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o}else{var r;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o;var o,i=t.toString;if(k(i))if(!S(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){var e=T(t,3);return"symbol"===n(e)?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function k(t){return"function"==typeof t}function O(t){return"function"==typeof t}function D(t,e){var n=t[e];if(null!=n){if(!k(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function N(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(w(n)){if(!I(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!w(r)&&!E(r)){if(!O(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!w(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!w(i)&&!E(i)){if(!S(i))throw new TypeError;r=i}}return r}(t,e,n=A(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!w(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return w(r)||(r=A(r)),b(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return!0;var o=C(n);return!E(o)&&t(e,o,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var o=C(n);return E(o)?void 0:t(e,o,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),g(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),function t(e,n){var r=_(e,n),o=C(e);if(null===o)return r;var i=t(o,n);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new p,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=i;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),_(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;w(n)||(n=A(n));var r=m(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||v.delete(e),!0}))}(a)}()}(r||(r={}))}).call(this,n(369),n(106))},function(t,e,n){var r=n(161);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(17),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(19);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(19),o=n(17),i=n(26),a=n(33),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(o.INJECT_TAG,t);"number"==typeof u?a.tagParameter(e,n,u,s):a.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(17),o=n(40),i=n(26),a=n(381),u=function(){function t(t,e,n,u){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof u?s=new i.Metadata(r.NAMED_TAG,u):u instanceof i.Metadata&&(s=u),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(91),o=n(92),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(17),o=n(26);e.traverseAncerstors=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};var i=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=i;var a=i(r.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(401);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:r.makePropertyInjectDecorator(t,e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},function(t,e,n){var r=n(144);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(t,e){this.number=t,this.line=e,this.errors=[]}function h(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(e);return r?r[1]:"unknown"}function v(t,e){var n,r=t.split("\\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new l(0,""));for(var u=0;u<r.length;++u){var s=r[u],c=/^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(s);if(c)switch(c[1]){case"line":var h=/(\\d+)(\\s+\\d+)?/.exec(c[2]);h&&(o=0|h[1],h[2]&&((i=0|h[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\\s+(.*)$/.exec(c[2]);p&&(a[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[i].lines.push(new l(o++,s))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function m(t){t._commandRef=d()}function y(t,e){var r=p();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){i(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+a(t),r||d())}var b={};function _(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:b[t]*e}function x(t){return!(t&t-1||!t)}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=e(r,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){i(t,e)||n("invalid parameter type"+o(r)+". expected "+e+", got "+a(t))},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var s=v(n,i),f=function(t){var e=[];return t.split("\\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(t);n?e.push(new h(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new h("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(s,f),Object.keys(s).forEach((function(t){var e=s[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+"\\n","font-weight:bold"),o(c("| ",6)),o(r+"\\n","font-weight:bold")})),o(c("| ",6)+"\\n")}else o(c(t.number,4)+"|  "),o(t.line+"\\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+s[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=v(n,i),s='Error linking program with vertex shader, "'+v(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\\n"+a),r.raise(s)}},callSite:p,saveCommandRef:m,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}m(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var u=t._attributeSet={};i(u,n.static),i(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){var o,i=e.width,a=e.height,u=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(x(i)&&x(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(x(i)&&x(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(o=0;o<16;++o)if(s[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=s[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(_(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,u=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=i>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(_(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),E=0;function S(t,e){this.id=E++,this.type=t,this.data=e}function T(t){return t.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,'\\\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+T(e.substr(1,e.length-2))+'"'];var o=/\\[(false|true|null|\\d+|'[^']*'|"[^"]*")\\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+T(e)+'"'];for(var a=[],u=0;u<i.length;++u)a=a.concat(t(i[u]));return a}(t).join("][")+"]"}var I={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function t(e,n){return"function"==typeof e?new S(0,e):"number"==typeof e||"boolean"==typeof e?new S(5,e):Array.isArray(e)?new S(6,e.map((function(e,r){return t(e,n+"["+r+"]")}))):e instanceof S?e:void w(!1,"invalid option type in uniform "+n)},accessor:A},k={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(t){return"string"==typeof t?t.split():(w(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function M(t){var n,r,o,i,u,s=t||{},c={},f=[],l=[],h="undefined"==typeof window?1:window.devicePixelRatio,d=!1,p=function(t){t&&w.raise(t)},v=function(){};if("string"==typeof s?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),w(n,"invalid query string for element")):"object"===a(s)?"string"==typeof(u=s).nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(w.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(c=s.attributes,w.type(c,"object","invalid context attributes")),"extensions"in s&&(f=D(s.extensions)),"optionalExtensions"in s&&(l=D(s.optionalExtensions)),"onDone"in s&&(w.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(h=+s.pixelRatio,w(h>0,"invalid pixel ratio"))):w.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o,i=document.createElement("canvas");function a(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,e(i.style,{width:n+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(r||document.body,0,h);if(!m)return null;o=m.canvas,v=m.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0),i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,c)}return i?{gl:i,canvas:o,container:r,extensions:f,optionalExtensions:l,pixelRatio:h,profile:d,onDone:p,onDestroy:v}:(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function C(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function N(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function P(){var t=C(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[N(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[N(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var G=P();function j(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}G.zero=P();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},U={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||G.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],u=0;u<n;++u)r[o++]=a[u]}(t,e[0],e[1],a);break;case 3:B(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)B(e[u],c,f,l,o,i),i+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function B(t,e,n,r,o,i){for(var a=i,u=0;u<e;++u)for(var s=t[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},V={dynamic:35048,stream:35040,static:35044},W=U.flatten,X=U.shape,H=[];function q(t){return 0|F[Object.prototype.toString.call(t)]}function Y(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function K(t,e,n,r,o,i,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)t[u++]=e[o*s+i*c+a]}H[5120]=1,H[5122]=2,H[5124]=4,H[5121]=1,H[5123]=2,H[5125]=4,H[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),J=new Uint32Array(Q.buffer);function $(t){for(var e=G.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=J[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var u=-14-i;e[n]=o+(a+1024>>u)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function tt(e){return Array.isArray(e)||t(e)}var et=function(t){return!(t&t-1||!t)},nt=[9984,9986,9985,9987],rt=[0,6409,6410,6407,6408],ot={};function it(t){return"[object "+t+"]"}ot[6409]=ot[6406]=ot[6402]=1,ot[34041]=ot[6410]=2,ot[6407]=ot[35904]=3,ot[6408]=ot[35906]=4;var at=it("HTMLCanvasElement"),ut=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ct=it("ImageBitmap"),ft=it("HTMLImageElement"),lt=it("HTMLVideoElement"),ht=Object.keys(F).concat([at,ut,st,ct,ft,lt]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var pt=[];function vt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function mt(t){return!!Array.isArray(t)&&!(0===t.length||!tt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function gt(t){return yt(t)===at}function bt(t){return yt(t)===ut}function _t(t){if(!t)return!1;var e=yt(t);return ht.indexOf(e)>=0||vt(t)||mt(t)||j(t)}function xt(t){return 0|F[Object.prototype.toString.call(t)]}function wt(t,e){return G.allocType(36193===t.type?5126:t.type,e)}function Et(t,e){36193===t.type?(t.data=$(e),G.freeType(e)):t.data=e}function St(t,e,n,r,o,i){var a;if(a=void 0!==pt[t]?pt[t]:ot[t]*dt[e],i&&(a*=6),o){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function Tt(n,r,o,i,u,s,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},l={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},d=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),p={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(v.float32=v.float=5126),r.oes_texture_half_float&&(v.float16=v["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach((function(t){var e=y[t];g.indexOf(e)>=0&&(m[t]=e)}));var b=Object.keys(m);o.textureFormats=b;var _=[];Object.keys(m).forEach((function(t){var e=m[t];_[e]=t}));var x=[];Object.keys(v).forEach((function(t){var e=v[t];x[e]=t}));var E=[];Object.keys(h).forEach((function(t){E[h[t]]=t}));var S=[];Object.keys(d).forEach((function(t){var e=d[t];S[e]=t}));var T=[];Object.keys(l).forEach((function(t){T[l[t]]=t}));var A=b.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function I(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(w.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(w.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(w.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(w.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;w(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),w(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(n,v,"invalid texture type"),t.type=v[n]}var i=t.width,u=t.height,s=t.channels,c=!1;"shape"in e?(w(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],u=e.shape[1],3===e.shape.length&&(s=e.shape[2],w(s>0&&s<=4,"invalid number of channels"),c=!0),w(i>=0&&i<=o.maxTextureSize,"invalid width"),w(u>=0&&u<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=u=e.radius,w(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,w(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(u=e.height,w(u>=0&&u<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,w(s>0&&s<=4,"invalid number of channels"),c=!0)),t.width=0|i,t.height=0|u,t.channels=0|s;var f=!1;if("format"in e){var l=e.format;w(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(l,m,"invalid texture format");var h=t.internalformat=m[l];t.format=A[h],l in v&&("type"in e||(t.type=v[l])),l in y&&(t.compressed=!0),f=!0}!c&&f?t.channels=ot[t.format]:c&&!f?t.channels!==rt[t.format]&&(t.format=t.internalformat=rt[t.channels]):f&&c&&w(t.channels===ot[t.format],"number of channels inconsistent with specified format")}}function D(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function R(){I.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(_t(n)?r=n:n&&(w.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),_t(n.data)&&(r=n.data)),w(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){w(!r,"can not specify copy and data field for the same texture");var i=u.viewportWidth,a=u.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,w(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=xt(r));else if(vt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=G.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=$(e);break;default:w.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(j(r)){var s=r.data;Array.isArray(s)||5121!==e.type||(e.type=xt(s));var c,f,l,h,d,p,v=r.shape,m=r.stride;3===v.length?(l=v[2],p=m[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=v[0],f=v[1],h=m[0],d=m[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=rt[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,u=t.height,s=t.channels,c=wt(t,a*u*s),f=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)c[f++]=e[n*h+r*l+o*d+i];Et(t,c)}(e,s,h,d,p,r.offset)}else if(gt(r)||bt(r)||yt(r)===st)gt(r)||bt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return yt(t)===ct}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return yt(t)===ft}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return yt(t)===lt}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(mt(r)){var y=e.width||r[0].length,g=e.height||r.length,b=e.channels;b=tt(r[0][0])?b||r[0][0].length:b||1;for(var _=U.shape(r),x=1,E=0;E<_.length;++E)x*=_[E];var S=wt(e,x);U.flatten(r,_,"",S),Et(e,S),e.alignment=1,e.width=y,e.height=g,e.channels=b,e.format=e.internalformat=rt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(t,e,r){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,l=t.height;D(t),o?n.texImage2D(e,r,s,s,c,o):t.compressed?n.compressedTexImage2D(e,r,u,f,l,0,a):t.needsCopy?(i(),n.copyTexImage2D(e,r,s,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,s,f,l,0,s,c,a||null)}function N(t,e,r,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;D(t),u?n.texSubImage2D(e,a,r,o,f,l,u):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,d,s):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,o,h,d,f,l,s)}var P=[];function B(){return P.pop()||new R}function F(t){t.needsFree&&G.freeType(t.data),R.call(t),P.push(t)}function z(){I.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function V(t,e,n){var r=t.images[0]=B();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function W(t,e){var n=null;if(_t(e))k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,M(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||w(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;C(n[r],e,r)}}var H=[];function q(){var t=H.pop()||new z;I.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;H.push(t)}function K(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Z(t,e){if("min"in e){var n=e.min;w.parameter(n,d),t.minFilter=d[n],nt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;w.parameter(r,h),t.magFilter=h[r]}var i=t.wrapS,u=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(w.parameter(s,l),i=u=l[s]):Array.isArray(s)&&(w.parameter(s[0],l),w.parameter(s[1],l),i=l[s[0]],u=l[s[1]])}else{if("wrapS"in e){var c=e.wrapS;w.parameter(c,l),i=l[c]}if("wrapT"in e){var p=e.wrapT;w.parameter(p,l),u=l[p]}}if(t.wrapS=i,t.wrapT=u,"anisotropic"in e){var v=e.anisotropic;w("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(a(e.mipmap)){case"string":w.parameter(e.mipmap,f,"invalid mipmap hint"),t.mipmapHint=f[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":w(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:w.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var J=0,it={},at=o.maxTextureUnits,ut=Array(at).map((function(){return null}));function ht(t){I.call(this),this.mipmask=0,this.internalformat=6408,this.id=J++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,c.profile&&(this.stats={size:0})}function dt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function pt(){var t=ut[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Tt(t){var e=t.texture;w(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ut[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(ht.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<at;++e){var r=ut[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ut[e]=this,t=e;break}t>=at&&w.raise("insufficient number of texture units"),c.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Tt(this)}}),c.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new ht(3553);function i(t,e){var n=r.texInfo;K.call(n);var a=q();return"number"==typeof t?V(a,0|t,"number"==typeof e?0|e:0|t):t?(w.type(t,"object","invalid arguments to regl.texture"),Z(n,t),W(a,t)):V(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),w.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,dt(r),X(a,3553),Q(n,3553),pt(),Y(a),c.profile&&(r.stats.size=St(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=_[r.internalformat],i.type=x[r.type],i.mag=E[n.magFilter],i.min=S[n.minFilter],i.wrapS=T[n.wrapS],i.wrapT=T[n.wrapT],i}return it[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){w(!!t,"must specify image data");var a=0|e,u=0|n,s=0|o,c=B();return k(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,w(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),w(r.mipmask&1<<s,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),dt(r),N(c,3553,a,u,s),pt(),F(c),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===r.width&&a===r.height)return i;i.width=r.width=o,i.height=r.height=a,dt(r);for(var u=0;r.mipmask>>u;++u){var s=o>>u,f=a>>u;if(!s||!f)break;n.texImage2D(3553,u,r.format,s,f,0,r.format,r.type,null)}return pt(),c.profile&&(r.stats.size=St(r.internalformat,r.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=r,c.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,u,f){var l=new ht(34067);it[l.id]=l,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,i,u){var s,f=l.texInfo;for(K.call(f),s=0;s<6;++s)h[s]=q();if("number"!=typeof t&&t)if("object"===a(t))if(e)W(h[0],t),W(h[1],e),W(h[2],n),W(h[3],r),W(h[4],i),W(h[5],u);else if(Z(f,t),O(l,t),"faces"in t){var p=t.faces;for(w(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)w("object"===a(p[s])&&!!p[s],"invalid input for cube map face"),k(h[s],l),W(h[s],p[s])}else for(s=0;s<6;++s)W(h[s],t);else w.raise("invalid arguments to cube map");else{var v=0|t||1;for(s=0;s<6;++s)V(h[s],v,v)}for(k(l,h[0]),o.npotTextureCube||w(et(l.width)&&et(l.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,w.textureCube(l,f,h,o),l.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,dt(l),s=0;s<6;++s)X(h[s],34069+s);for(Q(f,34067),pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,f.genMipmaps,!0)),d.format=_[l.internalformat],d.type=x[l.type],d.mag=E[f.magFilter],d.min=S[f.minFilter],d.wrapS=T[f.wrapS],d.wrapT=T[f.wrapT],s=0;s<6;++s)Y(h[s]);return d}return d(t,e,r,i,u,f),d.subimage=function(t,e,n,r,o){w(!!e,"must specify image data"),w("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,u=0|o,s=B();return k(s,l),s.width=0,s.height=0,M(s,e),s.width=s.width||(l.width>>u)-i,s.height=s.height||(l.height>>u)-a,w(l.type===s.type&&l.format===s.format&&l.internalformat===s.internalformat,"incompatible format for texture.subimage"),w(i>=0&&a>=0&&i+s.width<=l.width&&a+s.height<=l.height,"texture.subimage write out of bounds"),w(l.mipmask&1<<u,"missing mipmap data"),w(s.data||s.element||s.needsCopy,"missing image data"),dt(l),N(s,34069+t,i,a,u),pt(),F(s),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,dt(l);for(var r=0;r<6;++r)for(var o=0;l.mipmask>>o;++o)n.texImage2D(34069+r,o,l.format,e>>o,e>>o,0,l.format,l.type,null);return pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,c.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<at;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ut[t]=null;L(it).forEach(Tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var At=[];function It(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var kt=[6407,6408],Ot=[];Ot[6408]=4,Ot[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Rt=[32854,32855,36194,35907,34842,34843,34836],Mt={};function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Nt(e,n,r,o,i,a,u){function s(s){var c;null===n.next?(w(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(w(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(w(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,d=o.framebufferHeight,p=null;t(s)?p=s:s&&(w.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,w(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),w(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||o.framebufferWidth-f),d=0|(s.height||o.framebufferHeight-l),p=s.data||null),p&&(5121===c?w(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&w(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),w(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var v=h*d*4;return p||(5121===c?p=new Uint8Array(v):5126===c&&(p=p||new Float32Array(v))),w.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),w(p.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}(t):s(t)}}function Pt(t){return Array.prototype.slice.call(t)}function Gt(t){return Pt(t).join("")}Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var jt="xyzw".split(""),Lt="profile",Ut="framebuffer",Bt="vert",Ft="frag",zt="elements",Vt="primitive",Wt="count",Xt="offset",Ht="instances",qt="vao",Yt=Ut+"Width",Kt=Ut+"Height",Zt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ee={frag:35632,vert:35633},ne={cw:2304,ccw:2305};function re(e){return Array.isArray(e)||t(e)||j(e)}function oe(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ae(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ue(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new ie(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new ie(!1,!1,!1,e);if(6===n){for(var i=!1,a=!1,u=!1,s=0;s<t.data.length;++s){var c=t.data[s];if(1===c.type)u=!0;else if(2===c.type)a=!0;else if(3===c.type)i=!0;else if(0===c.type){i=!0;var f=c.data;f>=1&&(a=!0),f>=2&&(u=!0)}else 4===c.type&&(i=i||c.data.thisDep,a=a||c.data.contextDep,u=u||c.data.propDep)}return new ie(i,a,u,e)}return new ie(3===n,2===n,1===n,e)}var ce=new ie(!1,!1,!1,(function(){}));function fe(t,n,r,o,i,u,s,c,f,l,h,d,p,v,m){var y=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,_=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},E={},S=[],T={},A={};function k(t){return t.replace(".","_")}function O(t,e,n){var r=k(t);S.push(t),E[r]=x[r]=!!n,T[r]=e}function D(t,e,n){var r=k(t);S.push(t),Array.isArray(n)?(x[r]=n.slice(),E[r]=n.slice()):x[r]=E[r]=n,A[r]=e}O("dither",3024),O("blend.enable",3042),D("blend.color","blendColor",[0,0,0,0]),D("blend.equation","blendEquationSeparate",[32774,32774]),D("blend.func","blendFuncSeparate",[1,0,1,0]),O("depth.enable",2929,!0),D("depth.func","depthFunc",513),D("depth.range","depthRange",[0,1]),D("depth.mask","depthMask",!0),D("colorMask","colorMask",[!0,!0,!0,!0]),O("cull.enable",2884),D("cull.face","cullFace",1029),D("frontFace","frontFace",2305),D("lineWidth","lineWidth",1),O("polygonOffset.enable",32823),D("polygonOffset.offset","polygonOffset",[0,0]),O("sample.alpha",32926),O("sample.enable",32928),D("sample.coverage","sampleCoverage",[1,!1]),O("stencil.enable",2960),D("stencil.mask","stencilMask",-1),D("stencil.func","stencilFunc",[519,0,-1]),D("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),D("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),O("scissor.enable",3089),D("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:p,strings:n,next:E,current:x,draw:d,elements:u,buffer:i,shader:h,attributes:l.state,vao:l,uniforms:f,framebuffer:c,extensions:r,timer:v,isBufferArgs:re},M={primTypes:Z,compareFuncs:$t,blendFuncs:Qt,blendEquations:g,stencilOps:te,glTypes:z,orientationType:ne};w.optional((function(){R.isArrayLike=tt})),_&&(M.backBuffer=[1029],M.drawBuffer=C(o.maxDrawbuffers,(function(t){return 0===t?[0]:C(t,(function(t){return 36064+t}))})));var N=0;function P(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Pt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Pt(arguments)),n.push(";")),e},toString:function(){return Gt([r.length>0?"var "+r.join(",")+";":"",Gt(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Pt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),u={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var s=i(),c=s.toString;return u[t]=e(s,{arg:o,toString:function(){return Gt(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=Gt(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Pt(arguments)),this},else:function(){return r.apply(r,Pt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),Gt(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Gt(t).replace(/;/g,";\\n").replace(/}/g,"}\\n").replace(/{/g,"{\\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=N++,t.batchId="0";var i=r(R),a=t.shared={props:"a0"};Object.keys(R).forEach((function(t){a[t]=o.def(i,".",t)})),w.optional((function(){t.CHECK=r(w),t.commandStr=w.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Jt}));var u=t.next={},s=t.current={};Object.keys(A).forEach((function(t){Array.isArray(x[t])&&(u[t]=o.def(a.next,".",t),s[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(M).forEach((function(t){c[t]=o.def(JSON.stringify(M[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var o=l.scope[e];return o||(o=l.scope[e]=new y),f[e]=r(o)},t}function G(t,e,s,f,d){var p=t.static,v=t.dynamic;w.optional((function(){var t=[Ut,Bt,Ft,zt,Vt,Xt,Wt,Ht,Lt,qt].concat(S);function e(e){Object.keys(e).forEach((function(e){w.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(p),e(v)}));var m=function(t,e){var n=t.static;if("string"==typeof n[Ft]&&"string"==typeof n[Bt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var i=[],a=0;a<o.length;++a)w("number"==typeof r[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[o[a]],o[a]]);return i}}return null}(t,e),_=function(t,e){var n=t.static,r=t.dynamic;if(Ut in n){var o=n[Ut];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),ue((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Yt,n+".width"),e.set(i,"."+Kt,n+".height"),n}))):ue((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Yt,r+".drawingBufferWidth"),e.set(r,"."+Kt,r+".drawingBufferHeight"),"null"}))}if(Ut in r){var i=r[Ut];return se(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");w.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var u=r.context;return e.set(u,"."+Yt,a+"?"+a+".width:"+u+".drawingBufferWidth"),e.set(u,"."+Kt,a+"?"+a+".height:"+u+".drawingBufferHeight"),a}))}return null}(t),x=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];w.commandType(i,"object","invalid "+t,n.commandStr);var a,u,s=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,w.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in i?(u=0|i.height,w.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new ie(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Yt,"-",c));var o=u;return"height"in i||(o=e.def(n,".",Kt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=se(l,(function(e,n){var r=e.invoke(n,l);w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Yt,"-",i,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Kt,"-",a,")");return w.optional((function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)})),[i,a,u,s]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Yt),e.def(n,".",Kt)]})):null}var a=i("viewport");if(a){var u=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,_,d),E=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(zt in n){var t=n[zt];re(t)?t=u.getElements(u.create(t,!0)):t&&(t=u.getElements(t),w.command(t,"invalid elements",e.commandStr));var o=ue((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(zt in r){var i=r[zt];return se(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),u=e.def("null"),s=e.def(r,"(",a,")"),c=t.cond(s).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return w.optional((function(){t.assert(c.else,"!"+a+"||"+u,"invalid elements")})),e.entry(c),e.exit(t.cond(s).then(o,".destroyStream(",u,");")),t.ELEMENTS=u,u}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return w.command(!i||a>=0,"invalid "+t,e.commandStr),ue((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var u=r[t];return se(u,(function(e,n){var r=e.invoke(n,u);return i&&(e.OFFSET=r,w.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ue((function(t,e){return t.OFFSET="0",0})):null}var a=i(Xt,!0);return{elements:o,primitive:function(){if(Vt in n){var t=n[Vt];return w.commandParameter(t,Z,"invalid primitve",e.commandStr),ue((function(e,n){return Z[t]}))}if(Vt in r){var i=r[Vt];return se(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return w.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Z))})),e.def(n,"[",r,"]")}))}return o?ae(o)?o.value?ue((function(t,e){return e.def(t.ELEMENTS,".primType")})):ue((function(){return 4})):new ie(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(Wt in n){var t=0|n[Wt];return w.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ue((function(){return t}))}if(Wt in r){var i=r[Wt];return se(i,(function(t,e){var n=t.invoke(e,i);return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ae(o)){if(o)return a?new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return w.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ue((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var u=ue((function(){return-1}));return w.optional((function(){u.MISSING=!0})),u}var s=new ie(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return w.optional((function(){s.DYNAMIC=!0})),s}return null}(),instances:i(Ht,!1),offset:a}}(t,d),T=function(t,e){var n=t.static,r=t.dynamic,i={};return S.forEach((function(t){var u=k(t);function s(e,o){if(t in n){var a=e(n[t]);i[u]=ue((function(){return a}))}else if(t in r){var s=r[t];i[u]=se(s,(function(t,e){return o(t,e,t.invoke(e,s))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return w.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return w.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return w.commandParameter(n,$t,"invalid "+t,e.commandStr),$t[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return w.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys($t))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return w.command(tt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){w.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return w.commandParameter(n,Qt,u+".srcRGB",e.commandStr),w.commandParameter(r,Qt,u+".srcAlpha",e.commandStr),w.commandParameter(o,Qt,u+".dstRGB",e.commandStr),w.commandParameter(i,Qt,u+".dstAlpha",e.commandStr),w.command(-1===Jt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Qt[n],Qt[o],Qt[r],Qt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return w.optional((function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qt))})),u}w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),u=i("dst","RGB");w.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(w.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===a(n)?(w.commandParameter(n.rgb,g,t+".rgb",e.commandStr),w.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void w.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return w.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")})),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]}));case"blend.color":return s((function(t){return w.command(tt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),C(4,(function(e){return+t[e]}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),C(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return w.commandType(t,"number",u,e.commandStr),0|t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return w.commandParameter(r,$t,t+".cmp",e.commandStr),w.commandType(o,"number",t+".ref",e.commandStr),w.commandType(i,"number",t+".mask",e.commandStr),[$t[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return w.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return w.commandParameter(r,te,t+".fail",e.commandStr),w.commandParameter(o,te,t+".zfail",e.commandStr),w.commandParameter(i,te,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,te[r],te[o],te[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return w.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(te))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){w.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return w.commandType(n,"number",u+".factor",e.commandStr),w.commandType(r,"number",u+".units",e.commandStr),[n,r]}),(function(e,n,r){return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),w.command(!!n,u,e.commandStr),n}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return w.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return w.commandParameter(t,ne,u,e.commandStr),ne[t]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return w.command(tt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),C(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){w.command("object"===a(t)&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return w.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,d),A=function(t,e,r){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=n.id(o[t]);w.optional((function(){h.shader(ee[t],e,w.guessCommand())}));var r=ue((function(){return e}));return r.id=e,r}if(t in i){var a=i[t];return se(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return w.optional((function(){n(e.shared.shader,".shader(",ee[t],",",o,",",e.command,");")})),o}))}return null}var u,s=a(Ft),c=a(Bt),f=null;return ae(s)&&ae(c)?(f=h.program(c.id,s.id,null,r),u=ue((function(t,e){return t.link(f)}))):u=new ie(s&&s.thisDep||c&&c.thisDep,s&&s.contextDep||c&&c.contextDep,s&&s.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=s?s.append(t,e):e.def(r,".",Ft);var o=r+".program("+(c?c.append(t,e):e.def(r,".",Bt))+","+n;return w.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:s,vert:c,progVar:u,program:f}}(t,0,m);function I(t){var e=x[t];e&&(T[t]=e)}I("viewport"),I(k("scissor.box"));var O=Object.keys(T).length>0,D={framebuffer:_,draw:E,shader:A,state:T,dirty:O,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(D.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ue((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=se(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),D.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ue((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ue((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ue((function(t){return t.link(i.color[0])}))):w.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else tt(i)?r=ue((function(e){return e.global.def("[",C(i.length,(function(n){return w.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):w.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),o}(s,d),D.drawVAO=D.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(qt in n){var o=n[qt];return null!==o&&null===l.getVAO(o)&&(o=l.createVAO(o)),ue((function(t){return t.link(l.getVAO(o))}))}if(qt in r){var i=r[qt];return se(i,(function(t,e){var n=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!D.drawVAO&&A.program&&!m&&r.angle_instanced_arrays){var R=!0,M=A.program.attributes.map((function(t){var n=e.static[t];return R=R&&!!n,n}));if(R&&M.length>0){var N=l.getVAO(l.createVAO(M));D.drawVAO=new ie(null,null,null,(function(t,e){return t.link(N)})),D.useVAO=!0}}return m?D.useVAO=!0:D.attributes=function(t,e){var r=t.static,o=t.dynamic,u={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),c=new y;if(re(o))c.state=1,c.buffer=i.getBuffer(i.create(o,34962,!1,!0)),c.type=0;else{var f=i.getBuffer(o);if(f)c.state=1,c.buffer=f,c.type=0;else if(w.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var l=o.constant;c.buffer="null",c.state=2,"number"==typeof l?c.x=l:(w.command(tt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),jt.forEach((function(t,e){e<l.length&&(c[t]=l[e])})))}else{f=re(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),w.command(!!f,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;w.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|o.stride;w.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;w.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var v=!!o.normalized,m=0;"type"in o&&(w.commandParameter(o.type,z,"invalid type for attribute "+t,e.commandStr),m=z[o.type]);var g=0|o.divisor;"divisor"in o&&(w.command(0===g||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),w.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),w.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){w.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),c.buffer=f,c.state=1,c.size=p,c.normalized=v,c.type=m||f.dtype,c.offset=h,c.stride=d,c.divisor=g}}u[t]=ue((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(c).forEach((function(t){r[t]=c[t]})),c.buffer&&(r.buffer=t.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];u[t]=se(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,u=i.isBufferArgs,s=i.buffer;w.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new y;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",u,"(",o,")){",c.isStream,"=true;",l,"=",s,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[jt[0]],"=",o,".constant;",jt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",jt.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",34962,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",s,".destroyStream(",l,");","}"),c}))})),u}(e,d),D.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ue((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(f),D}function j(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i].append(t,e);Array.isArray(a)?o(r,".",i,"=[",a.join(),"];"):o(r,".",i,"=",a,";")})),e(o)}function L(t,e,n,r){var o,i=t.shared,a=i.gl,u=i.framebuffer;_&&(o=e.def(i.extensions,".webgl_draw_buffers"));var s,c=t.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",36160,",",s,".framebuffer);"),_&&e(o,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),_&&e(o,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function U(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,u=r.current,s=r.next,c=t.cond(u,".dirty");S.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=C(x[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(s,".",l);var d=t.cond(r,"!==",u,".",l);c(d),l in T?d(t.cond(r).then(o,".enable(",T[l],");").else(o,".disable(",T[l],");"),u,".",l,"=",r,";"):d(o,".",A[l],"(",r,");",u,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),e(c)}function B(t,e,n,r){var o=t.shared,i=t.current,a=o.current,u=o.gl;oe(Object.keys(n)).forEach((function(o){var s=n[o];if(!r||r(s)){var c=s.append(t,e);if(T[o]){var f=T[o];ae(s)?e(u,c?".enable(":".disable(",f,");"):e(t.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(tt(c)){var l=i[o];e(u,".",A[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(u,".",A[o],"(",c,");",a,".",o,"=",c,";")}}))}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function V(t,e,n,r,o){var i,a,u,s=t.shared,c=t.stats,f=s.current,l=s.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(t){t(i=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",i,";"),v&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function y(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ae(h))return void(h.enable?(p(e),m(e.exit),y("true")):y("false"));y(u=h.append(t,e))}else u=e.def(f,".profile");var g=t.block();p(g),e("if(",u,"){",g,"}");var b=t.block();m(b),e.exit("if(",u,"){",b,"}")}function W(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!o(s))return;a=s.append(t,e)}else{if(!o(ce))return;var c=t.scopeAttrib(u);w.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),a={},Object.keys(new y).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,u=e.def(n,".location"),s=e.def(i.attributes,"[",u,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",s,".type!==",i,"||",s,".size!==",n,"||",h.map((function(t){return s+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",h.map((function(t){return s+"."+t+"="+o[t]+";"})).join(""),"}"),b){var c=o.divisor;e("if(",s,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){e("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");",s,".buffer=null;","}if(",jt.map((function(t,e){return s+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",jt.map((function(t,e){return s+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function X(t,e,r,o,i){for(var a,u=t.shared,s=u.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,d=l.info.type,p=r.uniforms[h],v=t.link(l)+".location";if(p){if(!i(p))continue;if(ae(p)){var m=p.value;if(w.command(null!=m,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){w.command("function"==typeof m&&(35678===d&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||35680===d&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);e(s,".uniform1i(",v,",",y+".bind());"),e.exit(y,".unbind();")}else if(35674===d||35675===d||35676===d){w.optional((function(){w.command(tt(m),"invalid matrix for uniform "+h,t.commandStr),w.command(35674===d&&4===m.length||35675===d&&9===m.length||35676===d&&16===m.length,"invalid length for matrix uniform "+h,t.commandStr)}));var g=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(s,".uniformMatrix",b,"fv(",v,",false,",g,");")}else{switch(d){case 5126:w.commandType(m,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:w.commandType(m,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:w.commandType(m,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4i"}e(s,".uniform",a,"(",v,",",tt(m)?Array.prototype.slice.call(m):m,");")}continue}f=p.append(t,e)}else{if(!i(ce))continue;f=e.def(u.uniforms,"[",n.id(h),"]")}35678===d?(w(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(w(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),w.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){w(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){Array.isArray(f)?w(f.length===e,"must have length "+e):n(u.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){w(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var _=1;switch(d){case 35678:case 35680:var x=e.def(f,"._texture");e(s,".uniform1i(",v,",",x,".bind());"),e.exit(x,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(s,".uniform",a,"(",v,","),"M"===a.charAt(0)){var E=Math.pow(d-35674+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(f)?e("false,(",C(E,(function(t){return S+"["+t+"]="+f[t]})),",",S,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",C(E,(function(t){return S+"["+t+"]="+f+"["+t+"]"})),",",S,")")}else _>1?e(C(_,(function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"}))):(w(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function H(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,u=r.draw,s=function(){var o,s=u.elements,c=e;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),o=s.append(t,c)):o=c.def(a,".",zt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=u[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Vt),d=c(Xt),p=function(){var o,i=u.count,s=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(s=n),o=i.append(t,s),w.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(s,o+">=0","missing vertex count")}))):(o=s.def(a,".",Wt),w.optional((function(){t.assert(s,o+">=0","missing vertex count")}))),o}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(f=c(Ht),l=t.instancing);var v=s+".type",m=u.elements&&ae(u.elements);function y(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,v,d+"<<(("+v+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}function g(){function t(){n(i+".drawElements("+[h,p,v,d+"<<(("+v+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,d,p]+");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}b&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),y(),n("}else if(",f,"<0){"),g(),n("}")):y():g()}function q(t,e,n,r,o){var i=P(),a=i.proc("body",o);return w.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){F(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),W(t,e,n,r.attributes,(function(){return!0}))),X(t,e,n,r.uniforms,(function(){return!0})),H(t,e,e,n)}function K(t,e,n,r){function o(){return!0}t.batchId="a1",F(t,e),W(t,e,n,r.attributes,o),X(t,e,n,r.uniforms,o),H(t,e,e,n)}function Q(t,e,n,r){F(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var u=t.scope(),s=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(u.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",s,"}",u.exit),n.needsContext&&j(t,s,n.context),n.needsFramebuffer&&L(t,s,n.framebuffer),B(t,s,n.state,c),n.profile&&c(n.profile)&&V(t,s,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),W(t,u,n,r.attributes,f),W(t,s,n,r.attributes,c)),X(t,u,n,r.uniforms,f),X(t,s,n,r.uniforms,c),H(t,u,s,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,s),d=s.def(h,".id"),p=s.def(l,"[",d,"]");s(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return q(K,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",i,"],",i,");")}}function J(t,e,n){var r=e.static[n];if(r&&function(t){if("object"===a(t)&&!tt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(I.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),u=!1,s=!1,c=!1,f=t.global.def("{}");i.forEach((function(e){var n=r[e];if(I.isDynamic(n)){"function"==typeof n&&(n=r[e]=I.unbox(n));var i=se(n,null);u=u||i.thisDep,c=c||i.propDep,s=s||i.contextDep}else{switch(o(f,".",e,"="),a(n)){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new I.DynamicVariable(4,{thisDep:u,contextDep:s,propDep:c,ref:f,append:function(t,e){i.forEach((function(n){var o=r[n];if(I.isDynamic(o)){var i=t.invoke(e,o);e(f,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:E,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,u=t.shared,s=u.gl,c=u.next,f=u.current;i(f,".dirty=false;"),L(t,e),L(t,n,null,!0),b&&(a=t.link(b)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var h=n.def(u.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(s,".enableVertexAttribArray(",l,");",s,".bindBuffer(",34962,",",h,".buffer.buffer);",s,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",l,");",s,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),b&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(T).forEach((function(r){var o=T[r],a=i.def(c,".",r),u=t.block();u("if(",a,"){",s,".enable(",o,")}else{",s,".disable(",o,")}",f,".",r,"=",a,";"),n(u),e("if(",a,"!==",f,".",r,"){",u,"}")})),Object.keys(A).forEach((function(r){var o,a,u=A[r],l=x[r],h=t.block();if(h(s,".",u,"("),tt(l)){var d=l.length;o=t.global.def(c,".",r),a=t.global.def(f,".",r),h(C(d,(function(t){return o+"["+t+"]"})),");",C(d,(function(t){return a+"["+t+"]="+o+"["+t+"];"})).join("")),e("if(",C(d,(function(t){return o+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else o=i.def(c,".",r),a=i.def(f,".",r),h(o,");",f,".",r,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,r,o,i,a){var u=P();u.stats=u.link(a),Object.keys(r.static).forEach((function(t){J(u,r,t)})),Zt.forEach((function(e){J(u,t,e)}));var s=G(t,r,o,i,u);return function(t,e){var n=t.proc("draw",1);F(t,n),j(t,n,e.context),L(t,n,e.framebuffer),U(t,n,e),B(t,n,e.state),V(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return q(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}j(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),oe(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);tt(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),V(t,r,e,!0,!0),[zt,Xt,Wt,Ht,Vt].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){var a=e.uniforms[i].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(o.uniforms,"["+n.id(i)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new y).forEach((function(t){r.set(i,"."+t,o[t])}))})),e.scopeVAO&&r.set(o.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Bt),a(Ft),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(u,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",F(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(j(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function u(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||L(t,n,i)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),U(t,n,e),B(t,n,e.state,(function(t){return!u(t)})),e.profile&&u(e.profile)||V(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var s=e.shader.progVar;if(s.contextDep&&r||s.propDep)Q(t,n,e,null);else{var c=s.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return q(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),e(u.compile(),{destroy:function(){s.shader.program.destroy()}})}}}var le=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function u(t){a.push(t)}var s=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<s.length;++n){var h=s[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var v=l[d],m=l[p];m===v?(h.stats.gpuTime+=h.sum/1e6,u(h)):(h.startQueryIndex=v,h.endQueryIndex=m,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function he(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=M(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),u=o.isContextLost(),s=function(t,e){var n={};function r(e){w.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var c,f,l=(c={"":0},f=[""],{id:function(t){var e=c[t];return e||(e=c[t]=f.length,f.push(t),e)},str:function(t){return f[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,p=le(0,d),v=O(),m=o.drawingBufferWidth,y=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:r.pixelRatio},b=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=t.createFramebuffer();if(t.bindFramebuffer(36160,u),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=G.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?i=!1:(t.deleteFramebuffer(u),t.deleteTexture(a),i=1===s[0]),G.freeType(s)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=G.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),G.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,d),_=function(e,n,r,o){var i=0,a={};function u(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var u,s;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){u=X(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];e.dimension=f,c(e,s=W(n,u,e.dtype),r),a?e.persistentData=s:G.freeType(s)}else if("number"==typeof n[0]){e.dimension=i;var h=G.allocType(e.dtype,n.length);Y(h,n),c(e,h,r),a?e.persistentData=h:G.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||q(n[0])||5126,c(e,s=W(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=s:G.freeType(s)):w.raise("invalid buffer data")}else if(t(n))e.dtype=o||q(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(j(n)){u=n.shape;var d=n.stride,p=n.offset,v=0,m=0,y=0,g=0;1===u.length?(v=u[0],m=1,y=d[0],g=0):2===u.length?(v=u[0],m=u[1],y=d[0],g=d[1]):w.raise("invalid shape"),e.dtype=o||q(n.data)||5126,e.dimension=m;var b=G.allocType(e.dtype,v*m);K(b,n.data,v,m,y,g,p),c(e,b,r),a?e.persistentData=b:G.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):w.raise("invalid buffer data")}function l(t){n.bufferCount--,o(t);var r=t.buffer;w(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,s,c){n.bufferCount++;var h=new u(i);function d(n){var o=35044,i=null,a=0,u=0,s=1;return Array.isArray(n)||t(n)||j(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(w.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(w(null===i||Array.isArray(i)||t(i)||j(i),"invalid data for buffer"),i=n.data),"usage"in n&&(w.parameter(n.usage,V,"invalid buffer usage"),o=V[n.usage]),"type"in n&&(w.parameter(n.type,z,"invalid buffer type"),u=z[n.type]),"dimension"in n&&(w.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(w.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,u,s,c):(a&&e.bufferData(h.type,a,o),h.dtype=u||5121,h.usage=o,h.dimension=s,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*H[h.dtype]),d}function p(t,n){w(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,s||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=G.allocType(h.dtype,e.length);Y(i,e),p(i,o),G.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=X(e);var a=W(e,r,h.dtype);p(a,o),G.freeType(a)}else w.raise("invalid buffer data")}else if(j(e)){r=e.shape;var u=e.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):w.raise("invalid shape");var v=Array.isArray(e.data)?h.dtype:q(e.data),m=G.allocType(v,s*c);K(m,e.data,s,c,f,l,e.offset),p(m,o),G.freeType(m)}else w.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=s.pop();return n||(n=new u(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){s.push(t)},clear:function(){L(a).forEach(l),s.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof u?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,h,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,o,i){for(var a=r.maxAttributes,u=new Array(a),s=0;s<a;++s)u[s]=new Ct;var c=0,f={},l={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function u(e){w(Array.isArray(e),"arguments to vertex array constructor must be an array"),w(e.length<a,"too many attributes"),w(e.length>0,"must specify at least one attribute");var o={},s=r.attributes;s.length=e.length;for(var c=0;c<e.length;++c){var f,l=e[c],h=s[c]=new Ct,d=l.data||l;Array.isArray(d)||t(d)||j(d)?(r.buffers[c]&&(f=r.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),r.buffers[c]=null)),r.buffers[c]||(f=r.buffers[c]=i.create(l,34962,!1,!0)),h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):i.getBuffer(l)?(h.buffer=i.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(l.buffer)?(h.buffer=i.getBuffer(l.buffer),h.size=0|(+l.size||h.buffer.dimension),h.normalized=!!l.normalized||!1,"type"in l?(w.parameter(l.type,z,"invalid buffer type"),h.type=z[l.type]):h.type=h.buffer.dtype,h.offset=0|(l.offset||0),h.stride=0|(l.stride||0),h.divisor=0|(l.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in l?(w(c>0,"first attribute must not be a constant"),h.x=+l.x||0,h.y=+l.y||0,h.z=+l.z||0,h.w=+l.w||0,h.state=2):w(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!o[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),u}return o.vaoCount+=1,u.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},u._vao=r,u._reglType="vao",u(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<u.length;++r){var o=u[r];o.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var i=n.length;i<a;++i)e.disableVertexAttribArray(i)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},l}(o,d,b,h,_),E=function(e,n,r,o){var i={},a=0,u={uint8:5121,uint16:5123};function s(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=5125),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,u,s,c,f){var l;if(o.buffer.bind(),i){var h=f;f||t(i)&&(!j(i)||t(i.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(34963,c,a),o.buffer.dtype=l||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:w.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,w(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=s;d<0&&(d=o.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),o.vertCount=d;var p=u;if(u<0){p=4;var v=o.buffer.dimension;1===v&&(p=0),2===v&&(p=1),3===v&&(p=4)}o.primType=p}function l(t){o.elementsCount--,w(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new s(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,s=-1,l=0,h=0;Array.isArray(e)||t(e)||j(e)?n=e:(w.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,w(Array.isArray(n)||t(n)||j(n),"invalid data for element buffer")),"usage"in e&&(w.parameter(e.usage,V,"invalid element buffer usage"),r=V[e.usage]),"primitive"in e&&(w.parameter(e.primitive,Z,"invalid element buffer primitive"),o=Z[e.primitive]),"count"in e&&(w("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(w.parameter(e.type,u,"invalid buffer type"),h=u[e.type]),"length"in e?l=0|e.length:(l=s,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,s,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new s(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){L(i).forEach(l)}}}(o,d,_,h),S=function(t,n,r,o){var i={},a={};function u(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,o){var u=35632===e?i:a,s=u[r];if(!s){var c=n.str(r);s=t.createShader(e),t.shaderSource(s,c),t.compileShader(s),w.shaderError(t,s,c,e,o),u[r]=s}return s}var f={},l=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,i){var a,f,l=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),i)for(a=0;a<i.length;++a){var p=i[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),w.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(f=t.getActiveUniform(d,a))if(f.size>1)for(var y=0;y<f.size;++y){var g=f.name.replace("[0]","["+y+"]");s(m,new u(g,n.id(g),t.getUniformLocation(d,g),f))}else s(m,new u(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(f=t.getActiveAttrib(d,a))&&s(_,new u(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var t=0;return l.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return l.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(a).forEach(e),a={},l.forEach((function(e){t.deleteProgram(e.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,u,s){w.command(n>=0,"missing vertex shader",u),w.command(o>=0,"missing fragment shader",u);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!s))return h;var v=new d(o,n);return r.shaderCount++,p(v,u,s),h||(c[n]=v),l.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=l.indexOf(v);l.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete f[v.fragId][v.vertId]),Object.keys(f[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete f[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<l.length;++t)p(l[t],null,l[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(o,l,h,r),T=Tt(o,d,b,(function(){R.procs.poll()}),g,h,r),A=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var u=[];Object.keys(i).forEach((function(t){var e=i[t];u[e]=t}));var s=0,c={};function f(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;w(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}return f.prototype.decRef=function(){--this.refCount<=0&&l(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach((function(e){t+=c[e].stats.size})),t}),{create:function(e,s){var l=new f(t.createRenderbuffer());function h(e,r){var s=0,c=0,f=32854;if("object"===a(e)&&e){var d=e;if("shape"in d){var p=d.shape;w(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],c=0|p[1]}else"radius"in d&&(s=c=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(c=0|d.height);"format"in d&&(w.parameter(d.format,i,"invalid renderbuffer format"),f=i[d.format])}else"number"==typeof e?(s=0|e,c="number"==typeof r?0|r:s):e?w.raise("invalid arguments to renderbuffer constructor"):s=c=1;if(w(s>0&&c>0&&s<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||c!==l.height||f!==l.format)return h.width=l.width=s,h.height=l.height=c,l.format=f,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,f,s,c),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height)),h.format=u[l.format],h}return c[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=function(e,r){var i=0|e,a=0|r||i;return i===l.width&&a===l.height||(w(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=i,h.height=l.height=a,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,i,a),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height))),h},h._reglType="renderbuffer",h._renderbuffer=l,o.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){L(c).forEach(l)},restore:function(){L(c).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,d,b,h,r),D=function(t,n,r,o,i,u){var s={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);w(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;w(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),w.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,w(3553===e)):"textureCube"===i?(n=o,w(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):w.raise("invalid regl object for attachment"),new h(e,n,r)}function y(t,e,n,r,a){if(n){var u=o.create2D({width:t,height:e,format:r,type:a});return u._texture.refCount=0,new h(3553,u,null)}var s=i.create({width:t,height:e,format:r});return s._renderbuffer.refCount=0,new h(36161,null,s)}function g(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var _=0,x={};function E(){this.id=_++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function T(e){var n=e.framebuffer;w(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,u.framebufferCount--,delete x[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||w.raise("framebuffer configuration not supported, status = "+Mt[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function I(t,o){var i=new E;function a(t,e){var o;w(s.next!==i,"can not update framebuffer which is currently in use");var u=0,h=0,d=!0,v=!0,b=null,_=!0,x="rgba",E="uint8",T=1,I=null,k=null,O=null,D=!1;if("number"==typeof t)u=0|t,h=0|e||u;else if(t){w.type(t,"object","invalid arguments for framebuffer");var R=t;if("shape"in R){var M=R.shape;w(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),u=M[0],h=M[1]}else"radius"in R&&(u=h=R.radius),"width"in R&&(u=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&w(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(T=0|R.colorCount,w(T>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(w(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(w(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(w(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),w.oneOf(E,l,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,c.indexOf(x)>=0?_=!0:f.indexOf(x)>=0?_=!1:_?w.oneOf(R.colorFormat,c,"invalid color format for texture"):w.oneOf(R.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in R||"depthStencilTexture"in R)&&(D=!(!R.depthTexture&&!R.depthStencilTexture),w(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(I=R.depth,v=!1)),"stencil"in R&&("boolean"==typeof R.stencil?v=R.stencil:(k=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=v=R.depthStencil:(O=R.depthStencil,d=!1,v=!1))}else u=h=1;var C=null,N=null,P=null,G=null;if(Array.isArray(b))C=b.map(m);else if(b)C=[m(b)];else for(C=new Array(T),o=0;o<T;++o)C[o]=y(u,h,_,x,E);w(n.webgl_draw_buffers||C.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(C.length<=r.maxColorAttachments,"too many color attachments, not supported"),u=u||C[0].width,h=h||C[0].height,I?N=m(I):d&&!v&&(N=y(u,h,D,"depth","uint32")),k?P=m(k):v&&!d&&(P=y(u,h,!1,"stencil","uint8")),O?G=m(O):!I&&!k&&v&&d&&(G=y(u,h,D,"depth stencil","depth stencil")),w(!!I+!!k+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(o=0;o<C.length;++o)if(p(C[o],u,h),w(!C[o]||C[o].texture&&kt.indexOf(C[o].texture._texture.format)>=0||C[o].renderbuffer&&Rt.indexOf(C[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),C[o]&&C[o].texture){var L=Ot[C[o].texture._texture.format]*Dt[C[o].texture._texture.type];null===j?j=L:w(j===L,"all color attachments much have the same number of bits per pixel.")}return p(N,u,h),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(P,u,h),w(!P||P.renderbuffer&&36168===P.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(G,u,h),w(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=u,i.height=h,i.colorAttachments=C,i.depthAttachment=N,i.stencilAttachment=P,i.depthStencilAttachment=G,a.color=C.map(g),a.depth=g(N),a.stencil=g(P),a.depthStencil=g(G),a.width=i.width,a.height=i.height,A(i),a}return u.framebufferCount++,a(t,o),e(a,{resize:function(t,e){w(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return a;for(var o=i.colorAttachments,u=0;u<o.length;++u)b(o[u],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=a.width=n,i.height=a.height=r,A(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){T(i),S(i)},use:function(t){s.setFBO({framebuffer:a},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof E)return e}return null},create:I,createCube:function(t){var i=Array(6);function a(t){var r;w(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},h=0,d=null,p="rgba",v="uint8",m=1;if("number"==typeof t)h=0|t;else if(t){w.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var g=y.shape;w(Array.isArray(g)&&g.length>=2,"invalid shape for framebuffer"),w(g[0]===g[1],"cube framebuffer must be square"),h=g[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&w(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&w(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(m=0|y.colorCount,w(m>0,"invalid color buffer count")),"colorType"in y&&(w.oneOf(y.colorType,l,"invalid color type"),v=y.colorType),"colorFormat"in y&&(p=y.colorFormat,w.oneOf(y.colorFormat,c,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(u=[],r=0;r<d.length;++r)u[r]=d[r];else u=[d];else{u=Array(m);var b={radius:h,format:p,type:v};for(r=0;r<m;++r)u[r]=o.createCube(b)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];w("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,w(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:34069,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)f.color[x].target=34069+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=I(f)}return e(a,{width:h,height:h,color:u})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(w(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){L(x).forEach(T)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(o,d,b,T,A,h),R=fe(o,l,d,b,_,E,0,D,{},x,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,p,r),C=Nt(o,D,R.procs.poll,g,i,d,b),N=R.next,P=o.canvas,U=[],B=[],F=[],Q=[r.onDestroy],J=null;function $(){if(0===U.length)return p&&p.update(),void(J=null);J=k.next($),ct();for(var t=U.length-1;t>=0;--t){var e=U[t];e&&e(g,null,0)}o.flush(),p&&p.update()}function tt(){!J&&U.length>0&&(J=k.next($))}function et(){J&&(k.cancel($),J=null)}function nt(t){t.preventDefault(),u=!0,et(),B.forEach((function(t){t()}))}function rt(t){o.getError(),u=!1,s.restore(),S.restore(),_.restore(),T.restore(),A.restore(),D.restore(),x.restore(),p&&p.restore(),R.procs.refresh(),tt(),F.forEach((function(t){t()}))}function ot(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(o){var i=t[o];if(I.isDynamic(i))r[o]=I.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(I.isDynamic(i[a]))return void(r[o]=I.unbox(i,o));n[o]=i}})),{dynamic:r,static:n}}w(!!t,"invalid args to regl({...})"),w.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),o=n(t.uniforms||{},!0),i=n(t.attributes||{},!1),a=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=R.compile(a,i,o,r,s),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(u&&w.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:s,destroy:function(){c.destroy()}})}P&&(P.addEventListener("webglcontextlost",nt,!1),P.addEventListener("webglcontextrestored",rt,!1));var it=D.setFBO=ot({framebuffer:I.define.call(null,1,"framebuffer")});function at(t,e){var n=0;R.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),w(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ut(t){return w.type(t,"function","regl.frame() callback must be a function"),U.push(t),tt(),{cancel:function(){var e=he(U,t);w(e>=0,"cannot cancel a frame twice"),U[e]=function t(){var e=he(U,t);U[e]=U[U.length-1],U.length-=1,U.length<=0&&et()}}}}function st(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ct(){g.tick+=1,g.time=lt(),st(),R.procs.poll()}function ft(){T.refresh(),st(),R.procs.refresh(),p&&p.update()}function lt(){return(O()-v)/1e3}ft();var ht=e(ot,{clear:function(t){if(w("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),at);else it(t,at);else at(0,t)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:ot({}),buffer:function(t){return _.create(t,34962,!1,!1)},elements:function(t){return E.create(t,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:A.create,framebuffer:D.create,framebufferCube:D.createCube,vao:x.createVAO,attributes:i,frame:ut,on:function(t,e){var n;switch(w.type(e,"function","listener callback must be a function"),t){case"frame":return ut(e);case"lost":n=B;break;case"restore":n=F;break;case"destroy":n=Q;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){U.length=0,et(),P&&(P.removeEventListener("webglcontextlost",nt),P.removeEventListener("webglcontextrestored",rt)),S.clear(),D.clear(),A.clear(),T.clear(),E.clear(),_.clear(),x.clear(),p&&p.clear(),Q.forEach((function(t){t()}))},_gl:o,_refresh:ft,poll:function(){ct(),p&&p.update()},now:lt,stats:h});return r.onDone(null,ht),ht}},"object"===a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},,,,,,,,function(t,e,n){var r=n(198);t.exports={Graph:r.Graph,json:n(299),alg:n(300),version:r.version}},function(t,e,n){t.exports={Graph:n(74),version:n(298)}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(56),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(56);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(55);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(55),o=n(75),i=n(76);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(46),o=n(213),i=n(21),a=n(107),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(42),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(214),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(217),o=n(55),i=n(75);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(218),o=n(219),i=n(220),a=n(221),u=n(222);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(57);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(58);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(47),o=n(32);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(31),o=n(78),i=n(25),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(110)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(64),i=n(236),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(47),o=n(81);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(47),o=n(115);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(117),o=n(115),i=n(38);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(37)(n(24),"DataView");t.exports=r},function(t,e,n){var r=n(37)(n(24),"Promise");t.exports=r},function(t,e,n){var r=n(37)(n(24),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(83),o=n(245),i=n(246),a=n(247),u=n(120);t.exports=function(t,e,n){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(42),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(249),o=n(63),i=n(79),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(251),o=n(63),i=n(79),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(28);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(256),o=n(264),i=n(132);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(54),o=n(127);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],l=t[f],h=c[1];if(s&&c[2]){if(void 0===l&&!(f in t))return!1}else{var d=new r;if(i)var p=i(l,h,f,t,e,d);if(!(void 0===p?o(h,l,3,i,d):p))return!1}}return!0}},function(t,e,n){var r=n(54),o=n(128),i=n(261),a=n(263),u=n(44),s=n(13),c=n(43),f=n(22),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,v){var m=s(t),y=s(e),g=m?"[object Array]":u(t),b=y?"[object Array]":u(e),_=(g="[object Arguments]"==g?l:g)==l,x=(b="[object Arguments]"==b?l:b)==l,w=g==b;if(w&&c(t)){if(!c(e))return!1;m=!0,_=!1}if(w&&!_)return v||(v=new r),m||f(t)?o(t,e,n,d,p,v):i(t,e,g,n,d,p,v);if(!(1&n)){var E=_&&h.call(t,"__wrapped__"),S=x&&h.call(e,"__wrapped__");if(E||S){var T=E?t.value():t,A=S?e.value():e;return v||(v=new r),p(T,A,n,d,v)}}return!!w&&(v||(v=new r),a(t,e,n,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(42),o=n(119),i=n(41),a=n(128),u=n(262),s=n(87),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var m=a(d(t),d(e),r,c,l,h);return h.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(116),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var l=f;l--;){var h=c[l];if(!(s?h in e:o.call(e,h)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var m=s;++l<f;){var y=t[h=c[l]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(131),o=n(32);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(127),o=n(266),i=n(134),a=n(88),u=n(131),s=n(132),c=n(49);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(268),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(269);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(76);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(42),o=n(69),i=n(13),a=n(45),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(136),o=n(273),i=n(88),a=n(49);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(80),o=n(44),i=n(48),a=n(13),u=n(28),s=n(43),c=n(64),f=n(22),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(80),o=n(44),i=n(28),a=n(279),u=n(280);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},function(t,e,n){var r=n(31),o=n(13),i=n(25);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(281),o=n(282),i=n(283);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(136)("length");t.exports=r},function(t,e){var n=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\\\ud800-\\\\udfff]",r="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+r+"?",r,a,u,n].join("|")+")",l=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},function(t,e,n){var r=n(77),o=n(122),i=n(85),a=n(29),u=n(65),s=n(13),c=n(43),f=n(46),l=n(21),h=n(22);t.exports=function(t,e,n){var d=s(t),p=d||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=p?d?new v:[]:l(t)&&f(v)?o(u(t)):{}}return(p?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(89),o=n(70),i=n(144),a=n(146),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(42),o=n(48),i=n(13),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(84),o=n(108),i=n(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(291);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(145),o=n(292),i=n(293);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(118),o=n(296),i=n(87),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,n){var r=n(20),o=n(74);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(301),dijkstra:n(148),dijkstraAll:n(302),findCycles:n(303),floydWarshall:n(304),isAcyclic:n(305),postorder:n(306),preorder:n(307),prim:n(308),tarjan:n(150),topsort:n(151)}},function(t,e,n){var r=n(20);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(148),o=n(20);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(20),o=n(150);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(151);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(20),o=n(74),i=n(149);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(346),i=n(349),a=n(350),u=n(18).normalizeRanks,s=n(352),c=n(18).removeEmptyRanks,f=n(353),l=n(354),h=n(355),d=n(356),p=n(365),v=n(18),m=n(23).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=A(t.graph());return e.setGraph(r.merge({},g,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var o=A(t.node(n));e.setNode(n,r.defaults(T(o,_),x)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=A(t.edge(n));e.setEdge(n,r.merge({},E,T(o,w),r.pick(o,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){h.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){h.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function A(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(70),o=n(41),i=n(71),a=n(38),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],l=a(f),h=-1,d=l.length;++h<d;){var p=l[h],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,n){var r=n(313)(n(314));t.exports=r},function(t,e,n){var r=n(29),o=n(28),i=n(32);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(145),o=n(29),i=n(315),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(153);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(21),o=n(45),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(86),o=n(125),i=n(38);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(60),o=n(85),i=n(29);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(90),o=n(321),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(323),o=n(326)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(54),o=n(155),i=n(86),a=n(324),u=n(21),s=n(38),c=n(156);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,l,h);else{var d=l?l(c(e,s),i,s+"",e,n,h):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,n){var r=n(155),o=n(111),i=n(120),a=n(112),u=n(121),s=n(48),c=n(13),f=n(146),l=n(43),h=n(46),d=n(21),p=n(101),v=n(22),m=n(156),y=n(325);t.exports=function(t,e,n,g,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var T=_?_(w,E,n+"",t,e,x):void 0,A=void 0===T;if(A){var I=c(E),k=!I&&l(E),O=!I&&!k&&v(E);T=E,I||k||O?c(w)?T=w:f(w)?T=a(w):k?(A=!1,T=o(E,!0)):O?(A=!1,T=i(E,!0)):T=[]:p(E)||s(E)?(T=w,s(w)?T=y(w):d(w)&&!h(w)||(T=u(E))):A=!1}A&&(x.set(E,T),b(T,E,g,_,x),x.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(70),o=n(71);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(90),o=n(157),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(90),o=n(29),i=n(157);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(24);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(331),o=n(334)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(332),o=n(134);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(67),o=n(333),i=n(68);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(59),o=n(68),i=n(62),a=n(21),u=n(49);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,l=f-1,h=t;null!=h&&++c<f;){var d=u(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=l){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(154),o=n(142),i=n(143);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(336)();t.exports=r},function(t,e,n){var r=n(337),o=n(71),i=n(153);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(89),o=n(339),i=n(70),a=n(71),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(69),o=n(67),i=n(29),a=n(140),u=n(340),s=n(63),c=n(341),f=n(39),l=n(13);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var h=-1;e=r(e,s(i));var d=a(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++h,value:t}}));return u(d,(function(t,e){return c(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(342);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),u=void 0!==e,s=null===e,c=e==e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(133),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(59),o=n(345);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(347);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(11),o=n(23).Graph,i=n(348);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(11),o=n(18);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,l=t.edge(e),h=l.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:u},n=o.addDummyNode(t,"edge",r,"_d"),u===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(a,n,{weight:l.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:l.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){"use strict";var r=n(72).longestPath,o=n(158),i=n(351);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){r(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){"use strict";var r=n(11),o=n(158),i=n(72).slack,a=n(72).longestPath,u=n(23).alg.preorder,s=n(23).alg.postorder,c=n(18).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(d(n),l(n,t);e=v(n);)y(n,t,e,m(n,t,e))}function l(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var l=c===i,h=e.edge(r).weight;if(u+=l?h:-h,a=n,s=f,t.hasEdge(a,s)){var d=t.edge(n,f).cutvalue;u+=l?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=p(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function m(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var l=r.filter(e.edges(),(function(e){return f===g(t,t.node(e.v),c)&&f!==g(t,t.node(e.w),c)}));return r.minBy(l,(function(t){return i(e,t)}))}function y(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=l,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=m,f.exchangeEdges=y},function(t,e,n){var r=n(11);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(11),o=n(18);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var l=o.addBorderNode(e,"_bt"),h=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(l,c),d.borderTop=l,e.setParent(h,c),d.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,d=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(l,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,l,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",n,a,u),i(t,"borderRight","_br",n,a,u)}}))}},function(t,e,n){"use strict";var r=n(11);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(t),o(t))}}},function(t,e,n){"use strict";var r=n(11),o=n(357),i=n(358),a=n(359),u=n(363),s=n(364),c=n(23).Graph,f=n(18);function l(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),a=l(t,r.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=f.buildLayerMatrix(t);var m=i(t,u);m<c&&(v=0,s=r.cloneDeep(u),c=m)}d(t,s)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){"use strict";var r=n(11);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(11),o=n(360),i=n(361),a=n(362);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),l=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,d={};l&&(c=r.filter(c,(function(t){return t!==l&&t!==h})));var p=o(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);d[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var m=a(v,s);if(l&&(m.vs=r.flatten([l,m.vs,h],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),g=e.node(e.predecessors(h)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+g.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,"barycenter")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,l=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),l=i(s,u,l),r.forEach(a,(function(t){l+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,l=i(s,u,l)}));var h;var d={vs:r.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,n){var r=n(11),o=n(23).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){"use strict";var r=n(11),o=n(18),i=n(366).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(18);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=l?t.node(l).order:u;(l||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,l=Math.floor(f),h=Math.ceil(f);l<=h;++l){var d=s[l];a[t]===t&&e<u[d]&&!c(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function l(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function d(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u="l"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach(["u","d"],(function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(t,e,n){var r=n(11),o=n(18),i=n(23).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o="layer"+e;n.setNode(o,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},function(t,e){t.exports="0.8.5"},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function p(){}var v={};v[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==n&&r.call(y,i)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var o;this._invoke=function(i,a){function u(){return new n((function(o,u){!function o(i,a,u,s){var c=f(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===e(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,u,s)}),(function(t){o("throw",t,u,s)})):n.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,s)}))}s(c.arg)}(i,a,o,u)}))}return o=o?o.then(u,u):u()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,d.displayName=s(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,u,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(61)(t))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(375),u=n(19),s=n(30),c=n(17),f=n(162),l=n(376),h=n(383),d=n(385),p=n(40),v=n(50),m=n(388),y=n(389),g=function(){function t(t){var e=t||{};if("object"!==r(e))throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new f.MetadataReader}return t.merge=function(e,n){var r=new t,o=l.getBindingDictionary(r),i=l.getBindingDictionary(e),a=l.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(i,o),u(a,o),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind.bind(t)(r);return e(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=t.bind.bind(t)(n);return e(r,o),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var o}},t.prototype._get=function(t,e,n,r,o,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(30),o=n(40),i=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(377),o=n(19),i=n(30),a=n(17),u=n(163),s=n(50),c=n(378),f=n(26),l=n(379),h=n(380),d=n(382),p=n(165);function v(t){return t._bindingDictionary}function m(t,e,n,i,a){var u=y(n.container,a.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=y(n.container,a.serviceIdentifier)),c=e?u:u.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),u=o.NOT_REGISTERED;throw u+=s.listMetadataForTarget(a,n),u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),u=o.AMBIGUOUS_MATCH+" "+a;throw u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u)}}(a.serviceIdentifier,c,a,n.container),c}function y(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=v,e.plan=function(t,e,n,r,v,y,g,b){void 0===b&&(b=!1);var _=new c.Context(e),x=function(t,e,n,r,o,i){var u=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new f.Metadata(u,n),c=new p.Target(e,r,n,s);if(void 0!==o){var l=new f.Metadata(o,i);c.metadata.push(l)}return c}(n,r,v,"",y,g);try{return function t(e,n,r,a,u,s){var c,f;if(null===u){c=m(e,n,a,null,s),f=new d.Request(r,a,null,c,s);var p=new l.Plan(a,f);a.addPlan(p)}else c=m(e,n,a,u,s),f=u.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(n){var r=null;if(s.isArray())r=f.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=f}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var u=h.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,n.implementationType);if(u.length<c){var l=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(l)}}u.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,v,_,null,x),_}catch(t){throw u.isStackOverflowExeption(t)&&_.plan&&s.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var o=new p.Target(i.TargetTypeEnum.Variable,"",e,new f.Metadata(n,r)),a=new c.Context(t);return new d.Request(e,a,null,[],o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(40),o=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var o=n(164),i=n(19),a=n(30),u=n(17),s=n(50);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var c=n(165);function f(t,e,n,o){var u=t.getConstructorMetadata(n),s=u.compilerGeneratedMetadata;if(void 0===s){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(f)}var d=u.userGeneratedMetadata,p=Object.keys(d),v=function(t,e,n,r,o){for(var i=[],a=0;a<o;a++){var u=l(a,t,e,n,r);null!==u&&i.push(u)}return i}(o,e,s,d,0===n.length&&p.length>0?p.length:n.length),m=function t(e,n){for(var o=e.getPropertiesMetadata(n),i=[],u=Object.keys(o),s=0,f=u;s<f.length;s++){var l=f[s],d=o[l],p=h(o[l]),v=p.targetName||l,m=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,v,m);y.metadata=d,i.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var b=t(e,g);i=r(i,b)}return i}(t,n);return r(v,m)}function l(t,e,n,r,u){var s=u[t.toString()]||[],f=h(s),l=!0!==f.unmanaged,d=r[t],p=f.inject||f.multiInject;if((d=p||d)instanceof o.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!e&&(d===Object||d===Function||void 0===d)){var v=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(v)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return m.metadata=s,m}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return f(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=f(e,s.getFunctionName(r),r,!0),i=o.map((function(t){return t.metadata.filter((function(t){return t.key===u.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=o.length-a;return c>0?c:t(e,r)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(40),o=function(){function t(t,e,n,o,i){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();e.Request=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(19),o=n(30),i=n(163),a=n(50),u=n(384),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}};e.resolve=function(t){return function t(e){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return t(e)(n)}));var h=null;if(!n.target.isOptional()||0!==i.length){var d=i[0],p=d.scope===o.BindingScopeEnum.Singleton,v=d.scope===o.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(v&&null!==e&&e.has(d.id))return e.get(d.id);if(d.type===o.BindingTypeEnum.ConstantValue)h=d.cache;else if(d.type===o.BindingTypeEnum.Function)h=d.cache;else if(d.type===o.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===o.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=s("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Factory&&null!==d.factory)h=s("toFactory",d.serviceIdentifier,(function(){return d.factory(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Provider&&null!==d.provider)h=s("toProvider",d.serviceIdentifier,(function(){return d.provider(n.parentContext)}));else{if(d.type!==o.BindingTypeEnum.Instance||null===d.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(d.implementationType,c,t(e))}return"function"==typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),v&&null!==e&&!e.has(d.id)&&e.set(d.id,h),h}}}(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var o=n(19),i=n(30),a=n(17);e.resolveInstance=function(t,e,n){var u,s,c=null;if(e.length>0){var f=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=f,c=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i})),t}(c=new((u=t).bind.apply(u,r([void 0],s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(19),o=n(30),i=n(386),a=n(166),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(387),o=n(91),i=n(92),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(30),o=n(166),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(19),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var o=n.filter((function(e){return!t(e)}));o.length>0?e._map.set(r,o):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(40),o=function(t){this.id=r.id(),this.registry=t};e.ContainerModule=o;var i=function(t){this.id=r.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(19),o=n(17);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(26),o=n(33);e.tagged=function(t,e){return function(n,i,a){var u=new r.Metadata(t,e);"number"==typeof a?o.tagParameter(n,i,a,u):o.tagProperty(n,i,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(17),o=n(26),i=n(33);e.named=function(t){return function(e,n,a){var u=new o.Metadata(r.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(17),o=n(26),i=n(33);e.optional=function(){return function(t,e,n){var a=new o.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(17),o=n(26),i=n(33);e.unmanaged=function(){return function(t,e,n){var a=new o.Metadata(r.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(17),o=n(26),i=n(33);e.multiInject=function(t){return function(e,n,a){var u=new o.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(17),o=n(26),i=n(33);e.targetName=function(t){return function(e,n,a){var u=new o.Metadata(r.NAME_TAG,t);i.tagParameter(e,n,a,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(19),o=n(17),i=n(26);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function o(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()},set:function(t){Reflect.defineMetadata(r,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(i,a){o(i,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,i){return function(a,u){o(a,u,(function(){return t.getTagged(n,r,i)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.getAll(n)}),e)}}}},function(t,e,n){var r=n(161);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},function(t,e){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r*Math.max(1,Math.abs(o),Math.abs(a))};var r=n(175)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){t.exports=n(100)},function(t,e,n){t.exports=n(179)},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){var r=Math.cos(n),o=Math.sin(n),i=e[0],a=e[1];return t[0]=i*r-a*o,t[1]=i*o+a*r,t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},function(t,e,n){t.exports=n(181)},function(t,e,n){t.exports=n(182)},function(t,e,n){t.exports=n(183)},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var u,s;e||(e=2);n||(n=0);s=o?Math.min(o*e+n,t.length):t.length;for(u=n;u<s;u+=e)r[0]=t[u],r[1]=t[u+1],i(r,r,a),t[u]=r[0],t[u+1]=r[1];return t};var r=n(176)()},function(t,e){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var o=Math.sqrt(r);t[0]=e[0]/o*n,t[1]=e[1]/o*n}else t[0]=e[0],t[1]=e[1];return t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return go})),n.d(r,"fromMat4",(function(){return bo})),n.d(r,"clone",(function(){return _o})),n.d(r,"copy",(function(){return xo})),n.d(r,"fromValues",(function(){return wo})),n.d(r,"set",(function(){return Eo})),n.d(r,"identity",(function(){return So})),n.d(r,"transpose",(function(){return To})),n.d(r,"invert",(function(){return Ao})),n.d(r,"adjoint",(function(){return Io})),n.d(r,"determinant",(function(){return ko})),n.d(r,"multiply",(function(){return Oo})),n.d(r,"translate",(function(){return Do})),n.d(r,"rotate",(function(){return Ro})),n.d(r,"scale",(function(){return Mo})),n.d(r,"fromTranslation",(function(){return Co})),n.d(r,"fromRotation",(function(){return No})),n.d(r,"fromScaling",(function(){return Po})),n.d(r,"fromMat2d",(function(){return Go})),n.d(r,"fromQuat",(function(){return jo})),n.d(r,"normalFromMat4",(function(){return Lo})),n.d(r,"projection",(function(){return Uo})),n.d(r,"str",(function(){return Bo})),n.d(r,"frob",(function(){return Fo})),n.d(r,"add",(function(){return zo})),n.d(r,"subtract",(function(){return Vo})),n.d(r,"multiplyScalar",(function(){return Wo})),n.d(r,"multiplyScalarAndAdd",(function(){return Xo})),n.d(r,"exactEquals",(function(){return Ho})),n.d(r,"equals",(function(){return qo})),n.d(r,"mul",(function(){return Yo})),n.d(r,"sub",(function(){return Ko}));var o={};n.r(o),n.d(o,"create",(function(){return Zo})),n.d(o,"clone",(function(){return Qo})),n.d(o,"copy",(function(){return Jo})),n.d(o,"fromValues",(function(){return $o})),n.d(o,"set",(function(){return ti})),n.d(o,"identity",(function(){return ei})),n.d(o,"transpose",(function(){return ni})),n.d(o,"invert",(function(){return ri})),n.d(o,"adjoint",(function(){return oi})),n.d(o,"determinant",(function(){return ii})),n.d(o,"multiply",(function(){return ai})),n.d(o,"translate",(function(){return ui})),n.d(o,"scale",(function(){return si})),n.d(o,"rotate",(function(){return ci})),n.d(o,"rotateX",(function(){return fi})),n.d(o,"rotateY",(function(){return li})),n.d(o,"rotateZ",(function(){return hi})),n.d(o,"fromTranslation",(function(){return di})),n.d(o,"fromScaling",(function(){return pi})),n.d(o,"fromRotation",(function(){return vi})),n.d(o,"fromXRotation",(function(){return mi})),n.d(o,"fromYRotation",(function(){return yi})),n.d(o,"fromZRotation",(function(){return gi})),n.d(o,"fromRotationTranslation",(function(){return bi})),n.d(o,"fromQuat2",(function(){return _i})),n.d(o,"getTranslation",(function(){return xi})),n.d(o,"getScaling",(function(){return wi})),n.d(o,"getRotation",(function(){return Ei})),n.d(o,"fromRotationTranslationScale",(function(){return Si})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ti})),n.d(o,"fromQuat",(function(){return Ai})),n.d(o,"frustum",(function(){return Ii})),n.d(o,"perspective",(function(){return ki})),n.d(o,"perspectiveFromFieldOfView",(function(){return Oi})),n.d(o,"ortho",(function(){return Di})),n.d(o,"lookAt",(function(){return Ri})),n.d(o,"targetTo",(function(){return Mi})),n.d(o,"str",(function(){return Ci})),n.d(o,"frob",(function(){return Ni})),n.d(o,"add",(function(){return Pi})),n.d(o,"subtract",(function(){return Gi})),n.d(o,"multiplyScalar",(function(){return ji})),n.d(o,"multiplyScalarAndAdd",(function(){return Li})),n.d(o,"exactEquals",(function(){return Ui})),n.d(o,"equals",(function(){return Bi})),n.d(o,"mul",(function(){return Fi})),n.d(o,"sub",(function(){return zi}));var i={};n.r(i),n.d(i,"create",(function(){return Vi})),n.d(i,"clone",(function(){return Wi})),n.d(i,"length",(function(){return Xi})),n.d(i,"fromValues",(function(){return Hi})),n.d(i,"copy",(function(){return qi})),n.d(i,"set",(function(){return Yi})),n.d(i,"add",(function(){return Ki})),n.d(i,"subtract",(function(){return Zi})),n.d(i,"multiply",(function(){return Qi})),n.d(i,"divide",(function(){return Ji})),n.d(i,"ceil",(function(){return $i})),n.d(i,"floor",(function(){return ta})),n.d(i,"min",(function(){return ea})),n.d(i,"max",(function(){return na})),n.d(i,"round",(function(){return ra})),n.d(i,"scale",(function(){return oa})),n.d(i,"scaleAndAdd",(function(){return ia})),n.d(i,"distance",(function(){return aa})),n.d(i,"squaredDistance",(function(){return ua})),n.d(i,"squaredLength",(function(){return sa})),n.d(i,"negate",(function(){return ca})),n.d(i,"inverse",(function(){return fa})),n.d(i,"normalize",(function(){return la})),n.d(i,"dot",(function(){return ha})),n.d(i,"cross",(function(){return da})),n.d(i,"lerp",(function(){return pa})),n.d(i,"hermite",(function(){return va})),n.d(i,"bezier",(function(){return ma})),n.d(i,"random",(function(){return ya})),n.d(i,"transformMat4",(function(){return ga})),n.d(i,"transformMat3",(function(){return ba})),n.d(i,"transformQuat",(function(){return _a})),n.d(i,"rotateX",(function(){return xa})),n.d(i,"rotateY",(function(){return wa})),n.d(i,"rotateZ",(function(){return Ea})),n.d(i,"angle",(function(){return Sa})),n.d(i,"zero",(function(){return Ta})),n.d(i,"str",(function(){return Aa})),n.d(i,"exactEquals",(function(){return Ia})),n.d(i,"equals",(function(){return ka})),n.d(i,"sub",(function(){return Da})),n.d(i,"mul",(function(){return Ra})),n.d(i,"div",(function(){return Ma})),n.d(i,"dist",(function(){return Ca})),n.d(i,"sqrDist",(function(){return Na})),n.d(i,"len",(function(){return Pa})),n.d(i,"sqrLen",(function(){return Ga})),n.d(i,"forEach",(function(){return ja}));var a={};n.r(a),n.d(a,"create",(function(){return La})),n.d(a,"clone",(function(){return Ua})),n.d(a,"fromValues",(function(){return Ba})),n.d(a,"copy",(function(){return Fa})),n.d(a,"set",(function(){return za})),n.d(a,"add",(function(){return Va})),n.d(a,"subtract",(function(){return Wa})),n.d(a,"multiply",(function(){return Xa})),n.d(a,"divide",(function(){return Ha})),n.d(a,"ceil",(function(){return qa})),n.d(a,"floor",(function(){return Ya})),n.d(a,"min",(function(){return Ka})),n.d(a,"max",(function(){return Za})),n.d(a,"round",(function(){return Qa})),n.d(a,"scale",(function(){return Ja})),n.d(a,"scaleAndAdd",(function(){return $a})),n.d(a,"distance",(function(){return tu})),n.d(a,"squaredDistance",(function(){return eu})),n.d(a,"length",(function(){return nu})),n.d(a,"squaredLength",(function(){return ru})),n.d(a,"negate",(function(){return ou})),n.d(a,"inverse",(function(){return iu})),n.d(a,"normalize",(function(){return au})),n.d(a,"dot",(function(){return uu})),n.d(a,"cross",(function(){return su})),n.d(a,"lerp",(function(){return cu})),n.d(a,"random",(function(){return fu})),n.d(a,"transformMat4",(function(){return lu})),n.d(a,"transformQuat",(function(){return hu})),n.d(a,"zero",(function(){return du})),n.d(a,"str",(function(){return pu})),n.d(a,"exactEquals",(function(){return vu})),n.d(a,"equals",(function(){return mu})),n.d(a,"sub",(function(){return yu})),n.d(a,"mul",(function(){return gu})),n.d(a,"div",(function(){return bu})),n.d(a,"dist",(function(){return _u})),n.d(a,"sqrDist",(function(){return xu})),n.d(a,"len",(function(){return wu})),n.d(a,"sqrLen",(function(){return Eu})),n.d(a,"forEach",(function(){return Su}));var u={};n.r(u),n.d(u,"create",(function(){return Tu})),n.d(u,"identity",(function(){return Au})),n.d(u,"setAxisAngle",(function(){return Iu})),n.d(u,"getAxisAngle",(function(){return ku})),n.d(u,"getAngle",(function(){return Ou})),n.d(u,"multiply",(function(){return Du})),n.d(u,"rotateX",(function(){return Ru})),n.d(u,"rotateY",(function(){return Mu})),n.d(u,"rotateZ",(function(){return Cu})),n.d(u,"calculateW",(function(){return Nu})),n.d(u,"exp",(function(){return Pu})),n.d(u,"ln",(function(){return Gu})),n.d(u,"pow",(function(){return ju})),n.d(u,"slerp",(function(){return Lu})),n.d(u,"random",(function(){return Uu})),n.d(u,"invert",(function(){return Bu})),n.d(u,"conjugate",(function(){return Fu})),n.d(u,"fromMat3",(function(){return zu})),n.d(u,"fromEuler",(function(){return Vu})),n.d(u,"str",(function(){return Wu})),n.d(u,"clone",(function(){return as})),n.d(u,"fromValues",(function(){return us})),n.d(u,"copy",(function(){return ss})),n.d(u,"set",(function(){return cs})),n.d(u,"add",(function(){return fs})),n.d(u,"mul",(function(){return ls})),n.d(u,"scale",(function(){return hs})),n.d(u,"dot",(function(){return ds})),n.d(u,"lerp",(function(){return ps})),n.d(u,"length",(function(){return vs})),n.d(u,"len",(function(){return ms})),n.d(u,"squaredLength",(function(){return ys})),n.d(u,"sqrLen",(function(){return gs})),n.d(u,"normalize",(function(){return bs})),n.d(u,"exactEquals",(function(){return _s})),n.d(u,"equals",(function(){return xs})),n.d(u,"rotationTo",(function(){return ws})),n.d(u,"sqlerp",(function(){return Es})),n.d(u,"setAxes",(function(){return Ss}));var s,c,f="LAYOUT_RUN",l="LAYOUT_END",h="LAYOUT_ERROR",d="GPU_LAYOUT_RUN",p=function(t){return"string"==typeof t},v=/-(\\w)/g,m=(s=function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))},c=Object.create(null),Array.isArray),y=function(t){return"number"==typeof t},g=function(t){return Number.isNaN(Number(t))},b=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n?(n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r):r},_=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)for(var u=0;u<n;u+=1)e[a][u]>e[a][i]+e[i][u]&&(e[a][u]=e[a][i]+e[i][u]);return e},x=function(t,e){var n=t.nodes,r=t.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){i[t.id]=e;o.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=i[n],u=i[r];o[a][u]=1,e||(o[u][a]=1)})),o},w=function(t,e){"function"==typeof e&&function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!!n(e)}(t,e)};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((function(t){n.push(t)})),n.map((function(e){return t(e)}))}if("object"===E(e)&&e!=={}){var r=Object.assign({},e);return Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r}return e},T=function(t){return"function"==typeof t};function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var e,n,r;return e=t,(n=[{key:"layout",value:function(t){return this.init(t),this.execute(!0)}},{key:"init",value:function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}},{key:"execute",value:function(t){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(t){t&&Object.assign(this,t)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&A(e.prototype,n),r&&A(e,r),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=e.length,r=t.begin;if(0!==n){if(1===n)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!p(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",g(e[0].degree))){var u=b(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=n,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var f=t.small(),l=t.large();(f-1)*l>=t.cells?t.small(f-1):(l-1)*f>=t.cells&&t.large(l-1)}else for(;t.cols*t.rows<t.cells;){var h=t.small(),d=t.large();(d+1)*h>=t.cells?t.large(d+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var n,r;e.x&&e.y||(e.x=0,e.y=0),m(e.size)?(n=e.size[0],r=e.size[1]):y(e.size)&&(n=e.size,r=e.size),void 0!==n&&void 0!==r||(m(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):y(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));var o=t.preventOverlapPadding,i=n+o,a=r+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var v=0;v<i.length;v++){var _=i[v],x=void 0;if(t.position&&(x=t.position(_)),x&&(void 0!==x.row||void 0!==x.col)){var w={row:x.row,col:x.col};if(void 0===w.col)for(w.col=0;t.used(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;t.used(w.row,w.col);)w.row++;t.id2manPos[_.id]=w,t.use(w.row,w.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:o,nodes:i}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"small",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"large",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"used",value:function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1}},{key:"use",value:function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0}},{key:"moveToNextCell",value:function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)}},{key:"getPos",value:function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n}},{key:"getType",value:function(){return"grid"}}])&&O(e.prototype,n),r&&O(e,r),i}(I);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(i,t);var e,n,r,o=L(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&G(e.prototype,n),r&&G(e,r),i}(I);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t,e){return t?y(t)?function(e){return t}:t:function(t){return e||1}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,t);var e,n,r,o=X(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var r={},o={};e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=o,t.linkDistance=Y(t.linkDistance,1),t.nodeStrength=Y(t.nodeStrength,1),t.edgeStrength=Y(t.edgeStrength,1);var i,a=t.nodeSize;if(t.preventOverlap){var u,s=t.nodeSpacing;u=y(s)?function(){return s}:T(s)?s:function(){return 0},i=a?m(a)?function(t){return(a[0]>a[1]?a[0]:a[1])+u(t)}:function(t){return a+u(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+u(t):t.size+u(t):10+u(t)}}t.nodeSize=i;var c=t.edges;t.degrees=b(e.length,t.nodeIdxMap,c),t.getMass||(t.getMass=function(e){return t.degrees[t.nodeIdxMap[e.id]]}),t.run()}else t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"!=typeof window){var o=0;this.timeInterval=window.setInterval((function(){var i=[],a=[];if(e){e.forEach((function(t,e){i[2*e]=0,i[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(i,e),n&&t.calAttractive(i,n),t.calGravity(i,e);var u=Math.max(.02,t.interval-.002*o);t.updateVelocity(i,a,u,e);var s=[];e.forEach((function(t){s.push({x:t.x,y:t.y})})),t.updatePosition(a,u,e),t.tick&&t.tick();var c=0;e.forEach((function(t,e){var n=t.x-s[e].x,r=t.y-s[e].y;c+=Math.sqrt(n*n+r*r)})),(c/=e.length)<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),++o>r&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd())}}),0)}}},{key:"calRepulsive",value:function(t,e){var n=this.getMass,r=this.nodeStrength,o=this.factor,i=this.coulombDisScale,a=this.preventOverlap,u=this.nodeSize;e.forEach((function(s,c){var f=n?n(s):1;e.forEach((function(e,l){if(!(c>=l)){var h=s.x-e.x,d=s.y-e.y,p=Math.sqrt(h*h+d*d)+.01,v=(p+.1)*i,m=h/p,y=d/p,g=(r(s)+r(e))/2*o/(v*v),b=n?n(e):1;if(t[2*c]+=m*g/f,t[2*c+1]+=y*g/f,t[2*l]-=m*g/b,t[2*l+1]-=y*g/b,a&&p<(u(s)+u(e))/2){var _=(r(s)+r(e))/2/(p*p);t[2*c]+=m*_/f,t[2*c+1]+=y*_/f,t[2*l]-=m*_/b,t[2*l+1]-=y*_/b}}}))}))}},{key:"calAttractive",value:function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,a=this.getMass;e.forEach((function(e,u){var s=n[e.source],c=n[e.target],f=c.x-s.x,l=c.y-s.y,h=Math.sqrt(f*f+l*l)+.01,d=f/h,p=l/h,v=((o(e)||1)-h)*i(e),m=r[e.source],y=r[e.target],g=a?a(s):1,b=a?a(c):1;t[2*m]-=d*v/g,t[2*m+1]-=p*v/g,t[2*y]+=d*v/b,t[2*y+1]+=p*v/b}))}},{key:"calGravity",value:function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var u=e[a],s=u.x-n[0],c=u.y-n[1],f=r;if(this.getCenter){var l=this.getCenter(u,o[a]);l&&y(l[0])&&y(l[1])&&y(l[2])&&(s=u.x-l[0],c=u.y-l[1],f=l[2])}f&&(t[2*a]-=f*s,t[2*a+1]-=f*c)}}},{key:"updateVelocity",value:function(t,e,n,r){var o=this,i=n*o.damping;r.forEach((function(n,r){var a=t[2*r]*i||.01,u=t[2*r+1]*i||.01,s=Math.sqrt(a*a+u*u);if(s>o.maxSpeed){var c=o.maxSpeed/s;a*=c,u*=c}e[2*r]=a,e[2*r+1]=u}))}},{key:"updatePosition",value:function(t,e,n){n.forEach((function(n,r){var o=t[2*r]*e,i=t[2*r+1]*e;n.x+=o,n.y+=i}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&V(e.prototype,n),r&&V(e,r),i}(I);function Z(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,c,f,l,h,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a,o=d,!(d=d[l=f<<1|c]))return o[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[l]=p:t._root=p,t;do{o=o?o[l]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a}while((l=f<<1|c)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[l]=p,t}var Q=function(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o};function J(t){return t[0]}function $(t){return t[1]}function tt(t,e,n){var r=new et(null==e?J:e,null==n?$:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function et(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rt=tt.prototype=et.prototype;rt.copy=function(){var t,e,n=new et(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=nt(e));return n},rt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Z(this.cover(e,n),e,n,t)},rt.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>f&&(f=r),o<c&&(c=o),o>l&&(l=o));if(s>f||c>l)return this;for(this.cover(s,c).cover(f,l),n=0;n<i;++n)Z(this,a[n],u[n],t[n]);return this},rt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n||1,c=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},rt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rt.find=function(t,e,n){var r,o,i,a,u,s,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Q(v,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<l))if(v.length){var m=(o+a)/2,y=(i+u)/2;p.push(new Q(v[3],m,y,a,u),new Q(v[2],o,y,m,u),new Q(v[1],m,i,a,y),new Q(v[0],o,i,m,y)),(c=(e>=y)<<1|t>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=g*g+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=v.data}}return r},rt.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,c,f,l,h,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},rt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rt.root=function(){return this._root},rt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rt.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new Q(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(r+i)/2,f=(o+a)/2;(n=s[3])&&u.push(new Q(n,c,f,i,a)),(n=s[2])&&u.push(new Q(n,r,f,c,a)),(n=s[1])&&u.push(new Q(n,c,o,i,f)),(n=s[0])&&u.push(new Q(n,r,o,c,f))}return this},rt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,l=(u+c)/2;(i=o[0])&&n.push(new Q(i,a,u,f,l)),(i=o[1])&&n.push(new Q(i,f,u,s,l)),(i=o[2])&&n.push(new Q(i,a,l,f,c)),(i=o[3])&&n.push(new Q(i,f,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rt.x=function(t){return arguments.length?(this._x=t,this):this._x},rt.y=function(t){return arguments.length?(this._y=t,this):this._y};var ot=function(t){return function(){return t}},it=function(t){return 1e-6*(t()-.5)},at={value:function(){}};function ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ct(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ut.prototype={constructor:st,on:function(t,e){var n,r=this._,o=ct(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var ht=ut;function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pt,vt,mt=0,yt=0,gt=0,bt=0,_t=0,xt=0,wt="object"===("undefined"==typeof performance?"undefined":dt(performance))&&performance.now?performance:Date,Et="object"===("undefined"==typeof window?"undefined":dt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return _t||(Et(Tt),_t=wt.now()+xt)}function Tt(){_t=0}function At(){this._call=this._time=this._next=null}function It(t,e,n){var r=new At;return r.restart(t,e,n),r}function kt(){_t=(bt=wt.now())+xt,mt=yt=0;try{!function(){St(),++mt;for(var t,e=pt;e;)(t=_t-e._time)>=0&&e._call.call(null,t),e=e._next;--mt}()}finally{mt=0,function(){var t,e,n=pt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pt=e);vt=t,Dt(r)}(),_t=0}}function Ot(){var t=wt.now(),e=t-bt;e>1e3&&(xt-=e,bt=t)}function Dt(t){mt||(yt&&(yt=clearTimeout(yt)),t-_t>24?(t<1/0&&(yt=setTimeout(kt,t-wt.now()-xt)),gt&&(gt=clearInterval(gt))):(gt||(bt=wt.now(),gt=setInterval(Ot,1e3)),mt=1,Et(kt)))}At.prototype=It.prototype={constructor:At,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||vt===this||(vt?vt._next=this:pt=this,vt=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};function Rt(t){return t.x}function Mt(t){return t.y}var Ct=Math.PI*(3-Math.sqrt(5)),Nt=function(t){var e,n,r=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=It(h),f=ht("tick","end"),l=(n=1,function(){return(n=(1664525*n+1013904223)%4294967296)/4294967296});function h(){d(),f.call("tick",e),r<o&&(c.stop(),f.call("end",e))}function d(n){var o,c,f=t.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(r+=(a-r)*i,s.forEach((function(t){t(r)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+n),i=n*Ct;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(l=t,s.forEach(v),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,v(n)),e):s.get(t)},find:function(e,n,r){var o,i,a,u,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=n-u.y)*i)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(f.on(t,n),e):f.on(t)}}},Pt=function(){var t,e,n,r,o,i=ot(-30),a=1,u=1/0,s=.81;function c(n){var o,i=t.length,a=tt(t,Rt,Mt).visitAfter(l);for(r=n,o=0;o<i;++o)e=t[o],a.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function l(t){var e,n,r,i,a,u=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function h(t,i,c,f){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=f-i,p=l*l+h*h;if(d*d/s<p)return p<u&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=l*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*r/p,e.vx+=l*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:ot(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function Lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var Ut=function(t){var e,n,r,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=ot(30),f=1;function l(r){for(var o=0,u=t.length;o<f;++o)for(var s,c,l,h,d,p,v,m=0;m<u;++m)c=(s=t[m]).source,h=(l=s.target).x+l.vx-c.x-c.vx||it(a),d=l.y+l.vy-c.y-c.vy||it(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*r*e[m],d*=p,l.vx-=h*(v=i[m]),l.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var a,s,c=r.length,f=t.length,l=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Gt(s.source)&&(s.source=Lt(l,s.source)),"object"!==Gt(s.target)&&(s.target=Lt(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,e){r=t,a=e,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:ot(+t),d(),l):s},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:ot(+t),p(),l):c},l};function Bt(t){return t.x+t.vx}function Ft(t){return t.y+t.vy}var zt=function(t){var e,n,r,o=1,i=1;function a(){for(var t,a,s,c,f,l,h,d=e.length,p=0;p<i;++p)for(a=tt(e,Bt,Ft).visitAfter(u),t=0;t<d;++t)s=e[t],l=n[s.index],h=l*l,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,n,i,a){var u=t.data,d=t.r,p=l+d;if(!u)return e>c+p||i<c-p||n>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,m=f-u.y-u.vy,y=v*v+m*m;y<p*p&&(0===v&&(y+=(v=it(r))*v),0===m&&(y+=(m=it(r))*m),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(h+d)),s.vy+=(m*=y)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=ot(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),s(),a):t},a};function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],l=100,h=100,d={none:{x:0,y:0}},p=[],v="force",m=!0,y=.1;function g(t){if(!m)return g;e.tick(),_();for(var r,o=0,i=s.length,a=t*y;o<i;++o)(r=s[o]).vx+=(d[n(r)].x-r.x)*a,r.vy+=(d[n(r)].y-r.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===n(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],v=[],m={},y=[],u=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=n(t),i=r(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=n(c[t.source]),r=n(c[t.target]);return e<=r?"".concat(e,"~").concat(r):"".concat(r,"~").concat(e)}(t),o=0;void 0!==e[r]&&(o=e[r]),o+=1,e[r]=o})),Object.entries(e).forEach((function(t){var e=Vt(t,2),n=e[0],o=e[1],i=n.split("~")[0],a=n.split("~")[1];void 0!==i&&void 0!==a&&r.push({source:i,target:a,count:o})})),r}(f),Object.keys(u).forEach((function(t,e){var n=u[t];d.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),m[t]=e})),y.forEach((function(t){var e=m[t.source],n=m[t.target];void 0!==e&&void 0!==n&&v.push({source:e,target:n,count:t.count})})),{nodes:d,links:v});var u,d,v,m,y;e=Nt(t.nodes).force("x",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(l).strength(.1)).force("y",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(h).strength(.1)).force("collide",zt((function(t){return t.r})).iterations(4)).force("charge",Pt().strength(o)).force("links",Ut(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),_()}()}function _(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return g.initialize=function(t){s=t,b()},g.template=function(t){return arguments.length?(v=t,b(),g):v},g.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},g):(n=t,g):n},g.enableGrouping=function(t){return arguments.length?(m=t,g):m},g.strength=function(t){return arguments.length?(y=t,g):y},g.centerX=function(t){return arguments.length?(l=t,g):l},g.centerY=function(t){return arguments.length?(h=t,g):h},g.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],g):s},g.links=function(t){return arguments.length?(f=t||[],b(),g):f},g.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),g):r},g.nodeSize=g.forceNodeSize,g.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),g):o},g.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),g):i},g.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),g):a},g.offset=function(t){return arguments.length?(u=t,g):u},g.getFocis=_,g}var Ht="LAYOUT_RUN",qt="LAYOUT_END",Yt="LAYOUT_ERROR",Kt="LAYOUT_TICK",Zt="GPU_LAYOUT_RUN",Qt="GPU_LAYOUT_END";function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),this.ticking=!1}},{key:"execute",value:function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),o.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){var s=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&s.strength(e.edgeStrength),e.linkDistance&&s.distance(e.linkDistance),e.edgeForce=s,o.force("link",s)}e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Pt();if(e.nodeStrength&&c.strength(e.nodeStrength),o=Nt().nodes(n),e.clustering){var f=Xt();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",function(t,e){var n,r=1;function o(){var o,i,a=n.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=n[o]).x,s+=i.y;for(u=(u/a-t)*r,s=(s/a-e)*r,o=0;o<a;++o)(i=n[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}(e.center[0],e.center[1])).force("charge",c).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),r){var l=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&l.strength(e.edgeStrength),e.linkDistance&&l.distance(e.linkDistance),e.edgeForce=l,o.force("link",l)}if(e.workerEnabled&&!ie()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),o=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:Kt},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}}},{key:"overlapProcess",value:function(t){var e,n,r=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(n=y(o)?function(){return o}:T(o)?o:function(){return 0},r)if(T(r))e=function(t){return r(t)+n(t)};else if(m(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(t){return a+n(t)}}else if(y(r)){var u=r/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",zt(e).strength(i))}},{key:"updateCfg",value:function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$t(e.prototype,n),r&&$t(e,r),i}(I);function ie(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].parent;i.push(t[o].id),a.push(t[r].id)})):e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].children;i.push(t[o].id),a.push(t[r].id)}))}function de(t,e,n){for(var r=n.length,o=0;o<r;o++)if(t.id===n[o].source&&e.id===n[o].target||e.id===n[o].source&&t.id===n[o].target)return!0;return!1}function pe(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/n,l={};t.forEach((function(t,e){l[t.id]=e})),this.nodeMap=l;var h=b(t.length,l,e);this.degrees=h,o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio,p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var m=this.clockwise,y=Math.ceil(n/u),g=0;g<n;++g){var _=o;_||null===i||null===a||(_=i+g*(a-i)/(n-1)),_||(_=10+100*g/(n-1));var x=s+g%y*d+2*Math.PI/u*Math.floor(g/y);m||(x=c-g%y*d-2*Math.PI/u*Math.floor(g/y)),v[g].x=r[0]+Math.cos(x)*_,v[g].y=r[1]+Math.sin(x)*_,v[g].weight=h[g]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:v,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=e.degrees,r=e.edges,o=e.nodes,i=S(o),a=e.nodeMap,u=[i[0]],s=[o[0]],c=[],f=o.length;c[0]=!0,he(i,r,a,t);var l=0;return i.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e]===n[e+1]&&!de(u[l],t,r)||c[e]){for(var h=u[l].children,d=!1,p=0;p<h.length;p++){var v=a[h[p]];if(n[v]===n[e]&&!c[v]){u.push(i[v]),s.push(o[a[i[v].id]]),c[v]=!0,d=!0;break}}for(var m=0;!d&&(c[m]||(u.push(i[m]),s.push(o[a[i[m].id]]),c[m]=!0,d=!0),++m!==f););}else u.push(t),s.push(o[a[t.id]]),c[e]=!0,l++})),s}},{key:"degreeOrdering",value:function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r],e.push(t)})),e.sort(pe),e}},{key:"getType",value:function(){return"circular"}}])&&ue(e.prototype,n),r&&ue(e,r),i}(I),me=n(102),ye=n.n(me);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.nodeSize,r=t.rankdir;if(e){var o,i=t.edges||[],a=new ye.a.graphlib.Graph;o=n?m(n)?function(){return n}:function(){return[n,n]}:function(t){return t.size?m(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=Te(t.nodesepFunc,t.nodesep,50),c=Te(t.ranksepFunc,t.ranksep,50);return"LR"!==r&&"RL"!==r||(s=Te(t.ranksepFunc,t.ranksep,50),c=Te(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),n=c(t),r=s(t),i=e[0]+2*r,u=e[1]+2*n;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),ye.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var n=e.findIndex((function(e){return e.id===t}));e[n].x=u.x,e[n].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var n=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[n].type&&(i[n].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId"),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:i}}}},{key:"sortLevel",value:function(t){var e=this,n=e.nodes,r={};n.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(n){var o=r[n].nodes,i=o.length,a={};if(o.forEach((function(t){var e=t.comboId;a[e]||(a[e]={x:0,y:0,count:0}),a[e].x+=t.x,a[e].y+=t.y,a[e].count++})),Object.keys(a).forEach((function(t){a[t].x/=a[t].count,a[t].y/=a[t].count})),1!==i){var u=o.sort((function(t,e){return t.x-e.x})),s=u[0].x,c=(u[i-1].x-s)/(i-1);o.sort((function(e,n){var r=e[t]||"undefined",o=n[t]||"undefined";return r<o?-1:r>o?1:0})).forEach((function(t,e){t.x=s+e*c}))}else e.onLayoutEnd&&e.onLayoutEnd()}))}},{key:"getType",value:function(){return"dagre"}}])&&be(e.prototype,n),r&&be(e,r),i}(I);function Te(t,e,n){return t||(y(e)?function(){return e}:function(){return n})}var Ae=Object.prototype.toString;function Ie(t){return Ae.call(t).endsWith("Array]")}var ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var De=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ie(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=Oe(t),o=ke(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,u=n.max,s=void 0===u?n.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*c+a;return e},Re=" ".repeat(2),Me=" ".repeat(4);function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(Re,"[\\n").concat(Me).concat(Ne(t,r,i,u),"\\n").concat(Re,"]\\n").concat(Re,"rows: ").concat(t.rows,"\\n").concat(Re,"columns: ").concat(t.columns,"\\n}")}function Ne(t,e,n,r){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,n),s=[],c=0;c<a;c++){for(var f=[],l=0;l<u;l++)f.push(Pe(t.get(c,l),r));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(Me))}function Pe(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");var r=t.toPrecision(e-2);if(r.length<=e)return r;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Le(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Ue(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Fe(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ze(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ve(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xe("startRow",e),Xe("endRow",n),Xe("startColumn",r),Xe("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function Xe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function He(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function qe(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<r;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-n[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function Ye(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<r;f++)u+=c=t.get(f,a)-n[a],s+=c*c;e?i.push((s-u*u/r)/(r-1)):i.push((s-u*u/r)/r)}return i}function Ke(t,e,n){for(var r=t.rows,o=t.columns,i=r*o,a=0,u=0,s=0,c=0;c<r;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-n,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function Ze(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function Qe(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Je(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function $e(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,o=0;o<t.columns;o++)r+=Math.pow(t.get(n,o),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function tn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function en(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function nn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rn(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/e;return Math.sqrt(n)}function on(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&hn(t.prototype,e),n&&hn(t,n),t}var pn=function(){function t(){ln(this,t)}return dn(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(r,n)&&(r=o);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var o=0,i=!1;o<n&&!1===i;)1===t.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(r,s);t.set(a,s,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,o=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new gn(this.rows*n,this.columns*o),a=0;a<n;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){je(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return gn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){je(this,t),e=Ue(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){je(this,t),je(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){Le(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return gn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Le(this,t),e=Be(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Le(this,t),Le(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){je(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Le(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r}},{key:"mmul",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,o=new gn(e,r),i=new Float64Array(n),a=0;a<r;a++){for(var u=0;u<n;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<n;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=gn.checkMatrix(t);var e=new gn(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(n+s)*(r+c),l=(a+s)*r,h=n*(i-c),d=s*(u-r),p=(n+o)*c,v=f+d-p+(o-s)*(u+c),m=h+p,y=l+d,g=f-l+h+(a-n)*(r+i);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,y),e.set(1,1,g),e}},{key:"strassen3x3",value:function(t){t=gn.checkMatrix(t);var e=new gn(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),l=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),m=t.get(1,2),y=t.get(2,0),g=t.get(2,1),b=t.get(2,2),_=(n-i)*(-h+v),x=(-n+i+a)*(l-h+v),w=(i+a)*(-l+h),E=n*l,S=(-n+s+c)*(l-d+m),T=(-n+s)*(d-m),A=(s+c)*(-l+d),I=(-o+c+f)*(v+y-g),k=(o-f)*(v-g),O=o*y,D=(c+f)*(-y+g),R=(-o+a+u)*(m+y-b),M=(o-u)*(m-b),C=(a+u)*(-y+b),N=E+O+r*p,P=(n+r+o-i-a-c-f)*v+x+w+E+I+O+D,G=E+S+A+(n+r+o-a-u-s-c)*m+O+R+C,j=_+a*(-l+h+p-v-m-y+b)+x+E+O+R+M,L=_+x+w+E+u*g,U=O+R+M+C+i*d,B=E+S+T+c*(-l+d+p-v-m-y+g)+I+k+O,F=I+k+O+D+s*h,z=E+S+T+A+f*b;return e.set(0,0,N),e.set(0,1,P),e.set(0,2,G),e.set(1,0,j),e.set(1,1,L),e.set(1,2,U),e.set(2,0,B),e.set(2,1,F),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=gn.checkMatrix(e);var n=this.clone(),r=n.rows,o=n.columns,i=e.rows,a=e.columns;function u(e,n,r){var o=e.rows,i=e.columns;if(o===n&&i===r)return e;var a=t.zeros(n,r);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(r," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(r,i),c=Math.max(o,a);return function e(n,r,o,i){if(o<=512||i<=512)return n.mmul(r);o%2==1&&i%2==1?(n=u(n,o+1,i+1),r=u(r,o+1,i+1)):o%2==1?(n=u(n,o+1,i),r=u(r,o+1,i)):i%2==1&&(n=u(n,o,i+1),r=u(r,o,i+1));var a=parseInt(n.rows/2,10),s=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,s-1),f=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),d=n.subMatrix(a,n.rows-1,0,s-1),p=r.subMatrix(a,r.rows-1,0,s-1),v=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),y=e(t.add(c,v),t.add(f,m),a,s),g=e(t.add(d,v),f,a,s),b=e(c,t.sub(h,m),a,s),_=e(v,t.sub(p,f),a,s),x=e(t.add(c,l),m,a,s),w=e(t.sub(d,c),t.add(f,h),a,s),E=e(t.sub(l,v),t.add(p,m),a,s),S=t.add(y,_);S.sub(x),S.add(E);var T=t.add(b,x),A=t.add(g,_),I=t.sub(y,g);I.add(b),I.add(w);var k=t.zeros(2*S.rows,2*S.columns);return(k=(k=(k=(k=k.setSubMatrix(S,0,0)).setSubMatrix(T,S.rows,0)).setSubMatrix(A,0,S.columns)).setSubMatrix(I,S.rows,S.columns)).subMatrix(0,o-1,0,i-1)}(n=u(n,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);u.length>0&&De(u,{min:n,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);u.length&&De(u,{min:n,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,o=t.columns,i=new gn(e*r,n*o),a=0;a<e;a++)for(var u=0;u<n;u++)for(var s=0;s<r;s++)for(var c=0;c<o;c++)i.set(r*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new gn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){Ve(this,t,e,n,r);for(var o=new gn(e-t+1,r-n+1),i=t;i<=e;i++)for(var a=n;a<=r;a++)o.set(i-t,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new gn(t.length,n-e+1),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));r.set(o,i-e,this.get(t[o],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new gn(n-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));r.set(i-e,o,this.get(i,t[o]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=gn.checkMatrix(t)).isEmpty())return this;Ve(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++)this.set(e+r,n+o,t.get(r,o));return this}},{key:"selection",value:function(t,e){for(var n=function(t,e,n){return{row:Fe(t,e),column:ze(t,n)}}(this,t,e),r=new gn(t.length,e.length),o=0;o<n.row.length;o++)for(var i=n.row[o],a=0;a<n.column.length;a++){var u=n.column[a];r.set(o,a,this.get(i,u))}return r}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new gn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.unbiased,o=void 0===r||r,i=n.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return qe(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Ye(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return Ke(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===fn(t)&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.center,o=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return Ze(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return Qe(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return Je(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=$e(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return tn(this,n),this;case"column":if(void 0===n)n=en(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return nn(this,n),this;case void 0:if(void 0===n)n=rn(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return on(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Ce(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new gn(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)r.set(o,i,n[o*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new gn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new gn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new gn(t,e)}},{key:"ones",value:function(t,e){return new gn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");for(var r=n.random,o=void 0===r?Math.random:r,i=new gn(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,i=n.max,a=void 0===i?1e3:i,u=n.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new gn(t,e),l=0;l<t;l++)for(var h=0;h<e;h++){var d=o+Math.round(s()*c);f.set(l,h,d)}return f}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),o=this.zeros(t,e),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var o=Math.min(r,e,n),i=this.zeros(e,n),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new gn(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new gn(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function vn(t,e){return t-e}pn.prototype.klass="Matrix","undefined"!=typeof Symbol&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ce(this)}),pn.random=pn.rand,pn.randomInt=pn.randInt,pn.diagonal=pn.diag,pn.prototype.diagonal=pn.prototype.diag,pn.identity=pn.eye,pn.prototype.negate=pn.prototype.neg,pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;var mn,yn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r){var o;if(ln(this,n),o=e.call(this),n.isMatrix(t))return sn(o,t.clone());if(Number.isInteger(t)&&t>=0){if(o.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!=typeof(r=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==r)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=r,o}return dn(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return je(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),je(this,t,!0),e=Float64Array.from(Ue(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){Le(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var o=t+1;o<this.columns;o++)n[o-1]=this.data[e][o];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),Le(this,t,!0),e=Be(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<t;o++)r[o]=this.data[n][o];for(r[o++]=e[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]),n}(pn);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yn=gn,(mn=pn).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},mn.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},mn.prototype.addM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},mn.add=function(t,e){return new yn(t).add(e)},mn.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},mn.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},mn.prototype.subM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},mn.sub=function(t,e){return new yn(t).sub(e)},mn.prototype.subtract=mn.prototype.sub,mn.prototype.subtractS=mn.prototype.subS,mn.prototype.subtractM=mn.prototype.subM,mn.subtract=mn.sub,mn.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},mn.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},mn.prototype.mulM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},mn.mul=function(t,e){return new yn(t).mul(e)},mn.prototype.multiply=mn.prototype.mul,mn.prototype.multiplyS=mn.prototype.mulS,mn.prototype.multiplyM=mn.prototype.mulM,mn.multiply=mn.mul,mn.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},mn.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},mn.prototype.divM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},mn.div=function(t,e){return new yn(t).div(e)},mn.prototype.divide=mn.prototype.div,mn.prototype.divideS=mn.prototype.divS,mn.prototype.divideM=mn.prototype.divM,mn.divide=mn.div,mn.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},mn.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},mn.prototype.modM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},mn.mod=function(t,e){return new yn(t).mod(e)},mn.prototype.modulus=mn.prototype.mod,mn.prototype.modulusS=mn.prototype.modS,mn.prototype.modulusM=mn.prototype.modM,mn.modulus=mn.mod,mn.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},mn.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},mn.prototype.andM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},mn.and=function(t,e){return new yn(t).and(e)},mn.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},mn.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},mn.prototype.orM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},mn.or=function(t,e){return new yn(t).or(e)},mn.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},mn.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},mn.prototype.xorM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},mn.xor=function(t,e){return new yn(t).xor(e)},mn.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},mn.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},mn.prototype.leftShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},mn.leftShift=function(t,e){return new yn(t).leftShift(e)},mn.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},mn.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},mn.prototype.signPropagatingRightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},mn.signPropagatingRightShift=function(t,e){return new yn(t).signPropagatingRightShift(e)},mn.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},mn.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},mn.prototype.rightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},mn.rightShift=function(t,e){return new yn(t).rightShift(e)},mn.prototype.zeroFillRightShift=mn.prototype.rightShift,mn.prototype.zeroFillRightShiftS=mn.prototype.rightShiftS,mn.prototype.zeroFillRightShiftM=mn.prototype.rightShiftM,mn.zeroFillRightShift=mn.rightShift,mn.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},mn.not=function(t){return new yn(t).not()},mn.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},mn.abs=function(t){return new yn(t).abs()},mn.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},mn.acos=function(t){return new yn(t).acos()},mn.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},mn.acosh=function(t){return new yn(t).acosh()},mn.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},mn.asin=function(t){return new yn(t).asin()},mn.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},mn.asinh=function(t){return new yn(t).asinh()},mn.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},mn.atan=function(t){return new yn(t).atan()},mn.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},mn.atanh=function(t){return new yn(t).atanh()},mn.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},mn.cbrt=function(t){return new yn(t).cbrt()},mn.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},mn.ceil=function(t){return new yn(t).ceil()},mn.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},mn.clz32=function(t){return new yn(t).clz32()},mn.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},mn.cos=function(t){return new yn(t).cos()},mn.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},mn.cosh=function(t){return new yn(t).cosh()},mn.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},mn.exp=function(t){return new yn(t).exp()},mn.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},mn.expm1=function(t){return new yn(t).expm1()},mn.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},mn.floor=function(t){return new yn(t).floor()},mn.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},mn.fround=function(t){return new yn(t).fround()},mn.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},mn.log=function(t){return new yn(t).log()},mn.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},mn.log1p=function(t){return new yn(t).log1p()},mn.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},mn.log10=function(t){return new yn(t).log10()},mn.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},mn.log2=function(t){return new yn(t).log2()},mn.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},mn.round=function(t){return new yn(t).round()},mn.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},mn.sign=function(t){return new yn(t).sign()},mn.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},mn.sin=function(t){return new yn(t).sin()},mn.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},mn.sinh=function(t){return new yn(t).sinh()},mn.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},mn.sqrt=function(t){return new yn(t).sqrt()},mn.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},mn.tan=function(t){return new yn(t).tan()},mn.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},mn.tanh=function(t){return new yn(t).tanh()},mn.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},mn.trunc=function(t){return new yn(t).trunc()},mn.pow=function(t,e){return new yn(t).pow(e)},mn.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},mn.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},mn.prototype.powM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};var Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(n=[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&_n(e.prototype,n),r&&_n(e,r),i}(pn);function An(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var On=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(In(this,t),(e=Tn.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,o=e.rows,i=e.columns,a=n.computeLeftSingularVectors,u=void 0===a||a,s=n.computeRightSingularVectors,c=void 0===s||s,f=n.autoTranspose,l=void 0!==f&&f,h=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(l){o=(r=e.transpose()).rows,i=r.columns,p=!0;var v=h;h=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var m=Math.min(o,i),y=Math.min(o+1,i),g=new Float64Array(y),b=new gn(o,m),_=new gn(i,i),x=new Float64Array(i),w=new Float64Array(o),E=new Float64Array(y),S=0;S<y;S++)E[S]=S;for(var T=Math.min(o-1,i),A=Math.max(0,Math.min(i-2,o)),I=Math.max(T,A),k=0;k<I;k++){if(k<T){g[k]=0;for(var O=k;O<o;O++)g[k]=An(g[k],r.get(O,k));if(0!==g[k]){r.get(k,k)<0&&(g[k]=-g[k]);for(var D=k;D<o;D++)r.set(D,k,r.get(D,k)/g[k]);r.set(k,k,r.get(k,k)+1)}g[k]=-g[k]}for(var R=k+1;R<i;R++){if(k<T&&0!==g[k]){for(var M=0,C=k;C<o;C++)M+=r.get(C,k)*r.get(C,R);M=-M/r.get(k,k);for(var N=k;N<o;N++)r.set(N,R,r.get(N,R)+M*r.get(N,k))}x[R]=r.get(k,R)}if(h&&k<T)for(var P=k;P<o;P++)b.set(P,k,r.get(P,k));if(k<A){x[k]=0;for(var G=k+1;G<i;G++)x[k]=An(x[k],x[G]);if(0!==x[k]){x[k+1]<0&&(x[k]=0-x[k]);for(var j=k+1;j<i;j++)x[j]/=x[k];x[k+1]+=1}if(x[k]=-x[k],k+1<o&&0!==x[k]){for(var L=k+1;L<o;L++)w[L]=0;for(var U=k+1;U<o;U++)for(var B=k+1;B<i;B++)w[U]+=x[B]*r.get(U,B);for(var F=k+1;F<i;F++)for(var z=-x[F]/x[k+1],V=k+1;V<o;V++)r.set(V,F,r.get(V,F)+z*w[V])}if(d)for(var W=k+1;W<i;W++)_.set(W,k,x[W])}}var X=Math.min(i,o+1);if(T<i&&(g[T]=r.get(T,T)),o<X&&(g[X-1]=0),A+1<X&&(x[A]=r.get(A,X-1)),x[X-1]=0,h){for(var H=T;H<m;H++){for(var q=0;q<o;q++)b.set(q,H,0);b.set(H,H,1)}for(var Y=T-1;Y>=0;Y--)if(0!==g[Y]){for(var K=Y+1;K<m;K++){for(var Z=0,Q=Y;Q<o;Q++)Z+=b.get(Q,Y)*b.get(Q,K);Z=-Z/b.get(Y,Y);for(var J=Y;J<o;J++)b.set(J,K,b.get(J,K)+Z*b.get(J,Y))}for(var $=Y;$<o;$++)b.set($,Y,-b.get($,Y));b.set(Y,Y,1+b.get(Y,Y));for(var tt=0;tt<Y-1;tt++)b.set(tt,Y,0)}else{for(var et=0;et<o;et++)b.set(et,Y,0);b.set(Y,Y,1)}}if(d)for(var nt=i-1;nt>=0;nt--){if(nt<A&&0!==x[nt])for(var rt=nt+1;rt<i;rt++){for(var ot=0,it=nt+1;it<i;it++)ot+=_.get(it,nt)*_.get(it,rt);ot=-ot/_.get(nt+1,nt);for(var at=nt+1;at<i;at++)_.set(at,rt,_.get(at,rt)+ot*_.get(at,nt))}for(var ut=0;ut<i;ut++)_.set(ut,nt,0);_.set(nt,nt,1)}for(var st=X-1,ct=Number.EPSILON;X>0;){var ft=void 0,lt=void 0;for(ft=X-2;ft>=-1&&-1!==ft;ft--){var ht=Number.MIN_VALUE+ct*Math.abs(g[ft]+Math.abs(g[ft+1]));if(Math.abs(x[ft])<=ht||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===X-2)lt=4;else{var dt=void 0;for(dt=X-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==X?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(g[dt])<=ct*pt){g[dt]=0;break}}dt===ft?lt=3:dt===X-1?lt=1:(lt=2,ft=dt)}switch(ft++,lt){case 1:var vt=x[X-2];x[X-2]=0;for(var mt=X-2;mt>=ft;mt--){var yt=An(g[mt],vt),gt=g[mt]/yt,bt=vt/yt;if(g[mt]=yt,mt!==ft&&(vt=-bt*x[mt-1],x[mt-1]=gt*x[mt-1]),d)for(var _t=0;_t<i;_t++)yt=gt*_.get(_t,mt)+bt*_.get(_t,X-1),_.set(_t,X-1,-bt*_.get(_t,mt)+gt*_.get(_t,X-1)),_.set(_t,mt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var wt=ft;wt<X;wt++){var Et=An(g[wt],xt),St=g[wt]/Et,Tt=xt/Et;if(g[wt]=Et,xt=-Tt*x[wt],x[wt]=St*x[wt],h)for(var At=0;At<o;At++)Et=St*b.get(At,wt)+Tt*b.get(At,ft-1),b.set(At,ft-1,-Tt*b.get(At,wt)+St*b.get(At,ft-1)),b.set(At,wt,Et)}break;case 3:var It=Math.max(Math.abs(g[X-1]),Math.abs(g[X-2]),Math.abs(x[X-2]),Math.abs(g[ft]),Math.abs(x[ft])),kt=g[X-1]/It,Ot=g[X-2]/It,Dt=x[X-2]/It,Rt=g[ft]/It,Mt=x[ft]/It,Ct=((Ot+kt)*(Ot-kt)+Dt*Dt)/2,Nt=kt*Dt*(kt*Dt),Pt=0;0===Ct&&0===Nt||(Pt=Nt/(Ct+(Pt=Ct<0?0-Math.sqrt(Ct*Ct+Nt):Math.sqrt(Ct*Ct+Nt))));for(var Gt=(Rt+kt)*(Rt-kt)+Pt,jt=Rt*Mt,Lt=ft;Lt<X-1;Lt++){var Ut=An(Gt,jt);0===Ut&&(Ut=Number.MIN_VALUE);var Bt=Gt/Ut,Ft=jt/Ut;if(Lt!==ft&&(x[Lt-1]=Ut),Gt=Bt*g[Lt]+Ft*x[Lt],x[Lt]=Bt*x[Lt]-Ft*g[Lt],jt=Ft*g[Lt+1],g[Lt+1]=Bt*g[Lt+1],d)for(var zt=0;zt<i;zt++)Ut=Bt*_.get(zt,Lt)+Ft*_.get(zt,Lt+1),_.set(zt,Lt+1,-Ft*_.get(zt,Lt)+Bt*_.get(zt,Lt+1)),_.set(zt,Lt,Ut);if(0===(Ut=An(Gt,jt))&&(Ut=Number.MIN_VALUE),Bt=Gt/Ut,Ft=jt/Ut,g[Lt]=Ut,Gt=Bt*x[Lt]+Ft*g[Lt+1],g[Lt+1]=-Ft*x[Lt]+Bt*g[Lt+1],jt=Ft*x[Lt+1],x[Lt+1]=Bt*x[Lt+1],h&&Lt<o-1)for(var Vt=0;Vt<o;Vt++)Ut=Bt*b.get(Vt,Lt)+Ft*b.get(Vt,Lt+1),b.set(Vt,Lt+1,-Ft*b.get(Vt,Lt)+Bt*b.get(Vt,Lt+1)),b.set(Vt,Lt,Ut)}x[X-2]=Gt,1;break;case 4:if(g[ft]<=0&&(g[ft]=g[ft]<0?-g[ft]:0,d))for(var Wt=0;Wt<=st;Wt++)_.set(Wt,ft,-_.get(Wt,ft));for(;ft<st&&!(g[ft]>=g[ft+1]);){var Xt=g[ft];if(g[ft]=g[ft+1],g[ft+1]=Xt,d&&ft<i-1)for(var Ht=0;Ht<i;Ht++)Xt=_.get(Ht,ft+1),_.set(Ht,ft+1,_.get(Ht,ft)),_.set(Ht,ft,Xt);if(h&&ft<o-1)for(var qt=0;qt<o;qt++)Xt=b.get(qt,ft+1),b.set(qt,ft+1,b.get(qt,ft)),b.set(qt,ft,Xt);ft++}0,X--}}if(p){var Yt=_;_=b,b=Yt}this.m=o,this.n=i,this.s=g,this.U=b,this.V=_}var e,n,r;return e=t,(n=[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,o=gn.zeros(r,r),i=0;i<r;i++)Math.abs(this.s[i])<=n?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,l=gn.zeros(c,f),h=0;h<c;h++)for(var d=0;d<f;d++){for(var p=0,v=0;v<r;v++)p+=s.get(h,v)*a.get(d,v);l.set(h,d,p)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(gn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,o=new gn(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new gn(n,s),l=0;l<n;l++)for(var h=0;h<s;h++){for(var d=0,p=0;p<c;p++)d+=o.get(l,p)*u.get(h,p);f.set(l,h,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return gn.diag(this.s)}}])&&kn(e.prototype,n),r&&kn(e,r),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=gn.mul(gn.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean();r.add(a).subRowVector(o).subColumnVector(i);var u=new On(r),s=gn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return gn.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var l=Math.random()*n,h=Math.random()*n;c.push([l,h])}return c}}}])&&Dn(e.prototype,n),r&&Dn(e,r),t}();function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var o=0;o<n;o++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t}},{key:"getRepulsion",value:function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){r[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],l=Math.sqrt(c*c+f*f);if(0===l){l=1;var h=u>s?1:-1;c=.01*h,f=.01*h}if(l<t.nodeSizeFunc(n[u])/2+t.nodeSizeFunc(n[s])/2){var d=o*o/l;r[u].x+=c/l*d,r[u].y+=f/l*d}}}))}))}},{key:"updatePositions",value:function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;r&&e.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),u=i/a,s=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var l=Math.cos(f)*c;e.x=u*l,e.y=s*l}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(n/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,r){var l=u[0]-t[o][0],h=u[1]-t[o][1],d=Math.sqrt(l*l+h*h);l=l/d*a[s],h=h/d*a[s],u[0]=t[o][0]+l,u[1]=t[o][1]+h}}}}))}}])&&Mn(e.prototype,n),r&&Mn(e,r),t}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t){return function(t){if(Array.isArray(t))return Gn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Un(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if(p(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,l=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=l;var h=x({nodes:e,edges:n},!1),d=_(h),v=t.maxToFocus(d,l);t.handleInfinity(d,l,v+1),t.distances=d;var b=d[l],w=t.width||500,E=t.height||500,S=w-r[0]>r[0]?r[0]:w-r[0],A=E-r[1]>r[1]?r[1]:E-r[1];0===S&&(S=w/2),0===A&&(A=E/2);var I=A>S?S:A,k=Math.max.apply(Math,Pn(b)),O=[];b.forEach((function(e,n){t.unitRadius||(t.unitRadius=I/k),O[n]=e*t.unitRadius})),t.radii=O;var D=t.eIdealDisMatrix();t.eIdealDistances=D;var R=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(D);t.weights=R;var M=new Rn({linkDistance:o,distances:D}).layout();M.forEach((function(t){g(t[0])&&(t[0]=Math.random()*o),g(t[1])&&(t[1]=Math.random()*o)})),t.positions=M,M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[l][0],t[1]-=M[l][1]})),t.run();var C,N=t.preventOverlap,P=t.nodeSize,G=t.strictRadial;if(N){var j,L=t.nodeSpacing;j=y(L)?function(){return L}:T(L)?L:function(){return 0},C=P?m(P)?function(t){return(P[0]>P[1]?P[0]:P[1])+j(t)}:function(t){return P+j(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+j(t):t.size+j(t):10+j(t)};var U={nodes:e,nodeSizeFunc:C,adjMatrix:h,positions:M,radii:O,height:E,width:w,strictRadial:G,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new Cn(U);M=B.layout()}return M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,r,n)}}},{key:"oneIteration",value:function(t,e,n,r,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=zn(u,[0,0]),f=0===c?0:1/c;if(s!==a){var l=0,h=0,d=0;e.forEach((function(t,e){if(s!==e){var n=zn(u,t),i=0===n?0:1/n,a=r[e][s];d+=o[s][e],l+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),h+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===n[s]?0:1/n[s];d*=i,d+=t*p*p,l*=i,l+=t*p*u[0]*f,u[0]=l/d,h*=i,h+=t*p*u[1]*f,u[1]=h/d}}))}},{key:"eIdealDisMatrix",value:function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return n&&n.forEach((function(n,u){var s=[];n.forEach((function(n,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(n*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;p(c)&&(c=c.charCodeAt(0)),p(f)&&(f=f.charCodeAt(0)),s.push(n*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(n*r/(o[u]/i));else{var l=(r+i)/2;s.push(n*l)}})),a.push(s)})),a}},{key:"handleInfinity",value:function(t,e,n){for(var r=t.length,o=0;o<r;o++)if(t[e][o]===1/0){t[e][o]=n,t[o][e]=n;for(var i=0;i<r;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=n+t[o][i],t[i][e]=n+t[o][i])}for(var a=0;a<r;a++)if(a!==e)for(var u=0;u<r;u++)if(t[a][u]===1/0){var s=Math.abs(t[e][a]-t[e][u]);s=0===s?1:s,t[a][u]=s}}},{key:"maxToFocus",value:function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}},{key:"getType",value:function(){return"radial"}}])&&jn(e.prototype,n),r&&jn(e,r),i}(I);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Yn(t):e}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=new Map,Qn=function(t,e){if(Zn.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),null!==(r=e)&&"object"===E(r)){var n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(r,t);var n=Hn(r);function r(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=Yn(o=n.call(this)),a={},u=i.getDefaultCfg();return Object.assign(a,u,e,t),Object.keys(a).forEach((function(t){var e=a[t];i[t]=e})),o}return r}(I);Zn.set(t,n)}else Zn.set(t,e);var r},Jn=function(t){return Zn.has(t)?Zn.get(t):null};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var o=or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===r)return e[0].x=o[0],e[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i,a=[];i=m(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;m(t.size)?e=Math.max(t.size[0],t.size[1]):y(t.size)&&(e=t.size),i=Math.max(i,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&p(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",y(e[0].degree)))){var c=b(e.length,s,n);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],l=f[0];a.forEach((function(e){if(l.length>0){var n=Math.abs(l[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(l=[],f.push(l))}l.push(e)}));var h=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,v=(Math.min(t.width,t.height)/2-h)/(f.length+(d?1:0));h=Math.min(h,v)}var g=0;if(f.forEach((function(e){var n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(r)-Math.cos(0),i=Math.sin(r)-Math.sin(0),a=Math.sqrt(h*h/(o*o+i*i));g=Math.max(a,g)}e.r=g,g+=h})),t.equidistant){for(var _=0,x=0,w=0;w<f.length;w++){var E=f[w].r-x;_=Math.max(_,E)}x=0,f.forEach((function(t,e){0===e&&(x=t.r),t.r=x,x+=_}))}return f.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*n*i;e.x=o[0]+r*Math.cos(a),e.y=o[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&tr(e.prototype,n),r&&tr(e,r),i}(I);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e,n,r,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=void 0===e?[]:e,r=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=x({nodes:t,edges:n},!1),a=_(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();return this.positions=f,f.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:n}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var t=this.scaledDistances,e=gn.mul(gn.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),o=e.mean();e.add(o).subRowVector(n).subColumnVector(r);var i=new On(e),a=gn.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return gn.mul([t],[a]).toJSON()[0].splice(0,2)}))}},{key:"handleInfinity",value:function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,o){n===1/0&&(t[r][o]=e)}))}))}},{key:"getType",value:function(){return"mds"}}])&&ur(e.prototype,n),r&&ur(e,r),i}(I);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r,o=mr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var t=this,e=this.nodes;if(e&&0!==e.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var n=this.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var r={},o={};return e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),this.nodeMap=r,this.nodeIdxMap=o,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration,o=t.center,i=t.height*t.width,a=Math.sqrt(i)/10,u=i/(e.length+1),s=Math.sqrt(u),c=t.gravity,f=t.speed,l=t.clustering,h={};if(l)for(var d in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var n=h[t.cluster];y(t.x)&&(n.cx+=t.x),y(t.y)&&(n.cy+=t.y),n.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count;for(var p=function(r){var i=[];if(e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,n,i,s,u),l){var d=t.clusterGravity||c;for(var p in e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=h[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),o=s*d;i[e].x-=o*(t.x-n.cx)/r,i[e].y-=o*(t.y-n.cy)/r}})),h)h[p].cx=0,h[p].cy=0,h[p].count=0;for(var v in e.forEach((function(t){var e=h[t.cluster];y(t.x)&&(e.cx+=t.x),y(t.y)&&(e.cy+=t.y),e.count++})),h)h[v].cx/=h[v].count,h[v].cy/=h[v].count}e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=.01*s*c;i[e].x-=n*(t.x-o[0]),i[e].y-=n*(t.y-o[1])}})),e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=Math.sqrt(i[e].x*i[e].x+i[e].y*i[e].y);if(n>0){var r=Math.min(a*(f/800),n);t.x+=i[e].x/n*r,t.y+=i[e].y/n*r}}}))},v=0;v<r;v++)p();return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},{key:"applyCalculate",value:function(t,e,n,r,o){this.calRepulsive(t,n,o),this.calAttractive(e,n,r)}},{key:"calRepulsive",value:function(t,e,n){t.forEach((function(r,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&y(r.x)&&y(t.x)&&y(r.y)&&y(t.y)){var a=r.x-t.x,u=r.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=n/s;e[o].x+=a*f,e[o].y+=u*f}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.forEach((function(t){if(t.source&&t.target){var o=r.nodeIdxMap[t.source],i=r.nodeIdxMap[t.target];if(o!==i){var a=r.nodeMap[t.source],u=r.nodeMap[t.target];if(y(u.x)&&y(a.x)&&y(u.y)&&y(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),l=f*f/n;e[i].x-=s/f*l,e[i].y-=c/f*l,e[o].x+=s/f*l,e[o].y+=c/f*l}}}}))}},{key:"getType",value:function(){return"fruchterman"}}])&&pr(e.prototype,n),r&&pr(e,r),i}(I),_r=n(6),xr=n.n(_r),wr=n(2),Er=n.n(wr),Sr=n(4),Tr=n.n(Sr),Ar=n(7),Ir=n.n(Ar),kr=(n(16),n(159),n(5)),Or=n.n(kr),Dr=n(8),Rr=n.n(Dr),Mr=1;function Cr(){return Mr++}var Nr=function t(e){Er()(this,t)},Pr=function(){function t(e){Er()(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return Tr()(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var o=e+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],o=t<e?1:-1,i=t;i!==e;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r);if(this.lookup[o]===t)return o}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r),i=this.lookup[o];t(o,this.getComponent(i))}}},{key:"forEachAsync",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return o=r[n],i=Number(o),a=this.lookup[i],t.next=7,e(i,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],i=Number(o),a=this.lookup[i];e.push(t(i,this.getComponent(a)))}return e}}]),t}(),Gr=n(34),jr=n.n(Gr),Lr=n(1),Ur={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Br=function t(){Er()(this,t),this.index=void 0},Fr=function t(){Er()(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zr=function(){function t(){Er()(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Tr()(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}(),Vr=n(14),Wr=n.n(Vr),Xr=n(15),Hr=n.n(Xr),qr=n(9),Yr=n.n(qr);function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Zr,Qr,Jr,$r,to,eo=function(t){Wr()(n,t);var e=Kr(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return Tr()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){Er()(this,t),this.first=void 0,this.last=void 0})),no=function t(){Er()(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var io=(Zr=Object(Lr.injectable)(),Qr=Object(Lr.inject)(Ur.RenderEngine),Zr(($r=function(){function t(){Er()(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],xr()(this,"engine",to,this)}var e,n;return Tr()(t,[{key:"execute",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var o=new Fr;o.execute=n,r&&(o.tearDown=r),o.name=t;var i=new zr;return i.name=t,this.passNodes.push(i),this.frameGraphPasses.push(o),e(this,i,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=ro(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var o,i=[],a=ro(this.resourceNodes);try{for(a.s();!(o=a.n()).done;){var u=o.value;0===u.readerCount&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}for(;i.length;){var s=i.pop(),c=s&&s.writer;if(c&&0==--c.refCount){var f,l=ro(c.reads);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=this.resourceNodes[h.index];0==--d.readerCount&&i.push(d)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,v=ro(this.passNodes);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.refCount){var y,g=ro(m.reads);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:m,_.last=m}}catch(t){g.e(t)}finally{g.f()}var x,w=ro(m.writes);try{for(w.s();!(x=w.n()).done;){var E=x.value,S=this.resourceNodes[E.index].resource;S.first=S.first?S.first:m,S.last=m}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){v.e(t)}finally{v.f()}for(var T=0;T<2;T++){var A,I=ro(this.resourceNodes);try{for(I.s();!(A=I.n()).done;){var k=A.value.resource;if(k.priority===T&&k.refs){var O=k.first,D=k.last;O&&D&&(O.devirtualize.push(k),D.destroy.push(k))}}}catch(t){I.e(t)}finally{I.f()}}}},{key:"executePassNodes",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c,f,l,h,d,p;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ro(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(o=jr()(r.value,2),i=o[0],!(a=o[1]).refCount){t.next=16;break}u=ro(a.devirtualize);try{for(u.s();!(s=u.n()).done;)s.value.preExecuteDevirtualize(this.engine)}catch(t){u.e(t)}finally{u.f()}c=ro(a.destroy);try{for(c.s();!(f=c.n()).done;)f.value.preExecuteDestroy(this.engine)}catch(t){c.e(t)}finally{c.f()}return t.next=12,this.frameGraphPasses[i].execute(this,this.frameGraphPasses[i],e);case 12:l=ro(a.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}d=ro(a.destroy);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){d.e(t)}finally{d.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new no;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Br;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),to=Ir()($r.prototype,"engine",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),ao=n(0),uo=n.n(ao),so=n(12),co=n.n(so);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var po=function(t){Wr()(n,t);var e=ho(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=void 0,r.maxInstancedCount=void 0,r.aabb=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setAttribute",value:function(t,e,n,r){var o=this.attributes.find((function(e){return e.name===t}));return o?(o.data=e,o.dirty=!0):this.attributes.push(lo(lo({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}}]),n}(Nr),vo=(n(168),1e-6),mo="undefined"!=typeof Float32Array?Float32Array:Array,yo=Math.random;Math.PI;function go(){var t=new mo(9);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _o(t){var e=new mo(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wo(t,e,n,r,o,i,a,u,s){var c=new mo(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c[8]=s,c}function Eo(t,e,n,r,o,i,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function So(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function To(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ao(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*i+u*s,d=c*i-a*s,p=n*l+r*h+o*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+o*c)*p,t[2]=(u*r-o*a)*p,t[3]=h*p,t[4]=(f*n-o*s)*p,t[5]=(-u*n+o*i)*p,t[6]=d*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}function Io(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-r*f,t[2]=r*u-o*a,t[3]=u*s-i*f,t[4]=n*f-o*s,t[5]=o*i-n*u,t[6]=i*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*i,t}function ko(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*o+d*u+p*f,t[2]=h*i+d*s+p*l,t[3]=v*r+m*a+y*c,t[4]=v*o+m*u+y*f,t[5]=v*i+m*s+y*l,t[6]=g*r+b*a+_*c,t[7]=g*o+b*u+_*f,t[8]=g*i+b*s+_*l,t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+c,t[7]=h*o+d*u+f,t[8]=h*i+d*s+l,t}function Ro(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*u,t[2]=d*i+h*s,t[3]=d*a-h*r,t[4]=d*u-h*o,t[5]=d*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Mo(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function No(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Po(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[3]=f-y,t[6]=h+m,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t}function Lo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(s*A-a*O-c*T)*D,t[2]=(a*k-u*A+c*S)*D,t[3]=(o*k-r*O-i*I)*D,t[4]=(n*O-o*A+i*T)*D,t[5]=(r*A-n*k-i*S)*D,t[6]=(v*E-m*w+y*x)*D,t[7]=(m*_-p*E-y*b)*D,t[8]=(p*w-v*_+y*g)*D,t):null}function Uo(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bo(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Fo(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Wo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Xo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],p=e[3],v=e[4],m=e[5],y=e[6],g=e[7],b=e[8];return Math.abs(n-l)<=vo*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=vo*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=vo*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=vo*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=vo*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=vo*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=vo*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=vo*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=vo*Math.max(1,Math.abs(f),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Yo=Oo,Ko=Vo;function Zo(){var t=new mo(16);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qo(t){var e=new mo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $o(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v){var m=new mo(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=v,m}function ti(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=m,t}function ei(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ni(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ri(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(o*k-r*O-i*I)*D,t[2]=(v*E-m*w+y*x)*D,t[3]=(h*w-l*E-d*x)*D,t[4]=(s*A-a*O-c*T)*D,t[5]=(n*O-o*A+i*T)*D,t[6]=(m*_-p*E-y*b)*D,t[7]=(f*E-h*_+d*b)*D,t[8]=(a*k-u*A+c*S)*D,t[9]=(r*A-n*k-i*S)*D,t[10]=(p*w-v*_+y*g)*D,t[11]=(l*_-f*w-d*g)*D,t[12]=(u*T-a*I-s*S)*D,t[13]=(n*I-r*T+o*S)*D,t[14]=(v*b-p*x-m*g)*D,t[15]=(f*x-l*b+h*g)*D,t):null}function oi(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15];return t[0]=u*(h*y-d*m)-l*(s*y-c*m)+v*(s*d-c*h),t[1]=-(r*(h*y-d*m)-l*(o*y-i*m)+v*(o*d-i*h)),t[2]=r*(s*y-c*m)-u*(o*y-i*m)+v*(o*c-i*s),t[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+l*(o*c-i*s)),t[4]=-(a*(h*y-d*m)-f*(s*y-c*m)+p*(s*d-c*h)),t[5]=n*(h*y-d*m)-f*(o*y-i*m)+p*(o*d-i*h),t[6]=-(n*(s*y-c*m)-a*(o*y-i*m)+p*(o*c-i*s)),t[7]=n*(s*d-c*h)-a*(o*d-i*h)+f*(o*c-i*s),t[8]=a*(l*y-d*v)-f*(u*y-c*v)+p*(u*d-c*l),t[9]=-(n*(l*y-d*v)-f*(r*y-i*v)+p*(r*d-i*l)),t[10]=n*(u*y-c*v)-a*(r*y-i*v)+p*(r*c-i*u),t[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+f*(r*c-i*u)),t[12]=-(a*(l*m-h*v)-f*(u*m-s*v)+p*(u*h-s*l)),t[13]=n*(l*m-h*v)-f*(r*m-o*v)+p*(r*h-o*l),t[14]=-(n*(u*m-s*v)-a*(r*m-o*v)+p*(r*s-o*u)),t[15]=n*(u*h-s*l)-a*(r*h-o*l)+f*(r*s-o*u),t}function ii(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15];return(e*a-n*i)*(l*m-h*v)-(e*u-r*i)*(f*m-h*p)+(e*s-o*i)*(f*v-l*p)+(n*u-r*a)*(c*m-h*d)-(n*s-o*a)*(c*v-l*d)+(r*s-o*u)*(c*p-f*d)}function ai(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*l+w*v,t[1]=b*o+_*s+x*h+w*m,t[2]=b*i+_*c+x*d+w*y,t[3]=b*a+_*f+x*p+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*l+w*v,t[5]=b*o+_*s+x*h+w*m,t[6]=b*i+_*c+x*d+w*y,t[7]=b*a+_*f+x*p+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*l+w*v,t[9]=b*o+_*s+x*h+w*m,t[10]=b*i+_*c+x*d+w*y,t[11]=b*a+_*f+x*p+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*l+w*v,t[13]=b*o+_*s+x*h+w*m,t[14]=b*i+_*c+x*d+w*y,t[15]=b*a+_*f+x*p+w*g,t}function ui(t,e,n){var r,o,i,a,u,s,c,f,l,h,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+u*m+l*y+e[12],t[13]=o*v+s*m+h*y+e[13],t[14]=i*v+c*m+d*y+e[14],t[15]=a*v+f*m+p*y+e[15]),t}function si(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ci(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k=r[0],O=r[1],D=r[2],R=Math.hypot(k,O,D);return R<vo?null:(k*=R=1/R,O*=R,D*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],v=e[8],m=e[9],y=e[10],g=e[11],b=k*k*a+i,_=O*k*a+D*o,x=D*k*a-O*o,w=k*O*a-D*o,E=O*O*a+i,S=D*O*a+k*o,T=k*D*a+O*o,A=O*D*a-k*o,I=D*D*a+i,t[0]=u*b+l*_+v*x,t[1]=s*b+h*_+m*x,t[2]=c*b+d*_+y*x,t[3]=f*b+p*_+g*x,t[4]=u*w+l*E+v*S,t[5]=s*w+h*E+m*S,t[6]=c*w+d*E+y*S,t[7]=f*w+p*E+g*S,t[8]=u*T+l*A+v*I,t[9]=s*T+h*A+m*I,t[10]=c*T+d*A+y*I,t[11]=f*T+p*A+g*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function fi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=s*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-s*r,t}function li(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=s*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=s*r+h*o,t}function hi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=s*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-s*r,t}function di(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vi(t,e,n){var r,o,i,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<vo?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+s*r,t[2]=s*a*i-u*r,t[3]=0,t[4]=a*u*i-s*r,t[5]=u*u*i+o,t[6]=s*u*i+a*r,t[7]=0,t[8]=a*s*i+u*r,t[9]=u*s*i-a*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,s=o+o,c=i+i,f=r*u,l=r*s,h=r*c,d=o*s,p=o*c,v=i*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-y,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _i(t,e){var n=new mo(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+s*i-c*o)/l,n[1]=2*(s*a+f*o+c*r-u*i)/l,n[2]=2*(c*a+f*i+u*o-s*r)/l):(n[0]=2*(u*a+f*r+s*i-c*o),n[1]=2*(s*a+f*o+c*r-u*i),n[2]=2*(c*a+f*i+u*o-s*r)),bi(t,e,n),t}function xi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function wi(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(s,c,f),t}function Ei(t,e){var n=new mo(3);wi(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,s=e[2]*i,c=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,d=e[9]*o,p=e[10]*i,v=a+f+p,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(l-d)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>p?(m=2*Math.sqrt(1+a-f-p),t[3]=(l-d)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>p?(m=2*Math.sqrt(1+f-a-p),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+d)/m):(m=2*Math.sqrt(1+p-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+d)/m,t[2]=.25*m),t}function Si(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=o+o,c=i+i,f=a+a,l=o*s,h=o*c,d=o*f,p=i*c,v=i*f,m=a*f,y=u*s,g=u*c,b=u*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(h+b)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(l+m))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(d+g)*w,t[9]=(v-y)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ti(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],s=e[3],c=i+i,f=a+a,l=u+u,h=i*c,d=i*f,p=i*l,v=a*f,m=a*l,y=u*l,g=s*c,b=s*f,_=s*l,x=r[0],w=r[1],E=r[2],S=o[0],T=o[1],A=o[2],I=(1-(v+y))*x,k=(d+_)*x,O=(p-b)*x,D=(d-_)*w,R=(1-(h+y))*w,M=(m+g)*w,C=(p+b)*E,N=(m-g)*E,P=(1-(h+v))*E;return t[0]=I,t[1]=k,t[2]=O,t[3]=0,t[4]=D,t[5]=R,t[6]=M,t[7]=0,t[8]=C,t[9]=N,t[10]=P,t[11]=0,t[12]=n[0]+S-(I*S+D*T+C*A),t[13]=n[1]+T-(k*S+R*T+N*A),t[14]=n[2]+A-(O*S+M*T+P*A),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ii(t,e,n,r,o,i,a){var u=1/(n-e),s=1/(o-r),c=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ki(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Oi(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Di(t,e,n,r,o,i,a){var u=1/(e-n),s=1/(r-o),c=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(a+i)*c,t[15]=1,t}function Ri(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p=e[0],v=e[1],m=e[2],y=r[0],g=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<vo&&Math.abs(v-x)<vo&&Math.abs(m-w)<vo?ei(t):(f=p-_,l=v-x,h=m-w,o=g*(h*=d=1/Math.hypot(f,l,h))-b*(l*=d),i=b*(f*=d)-y*h,a=y*l-g*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,s=h*o-f*a,c=f*i-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*v+a*m),t[13]=-(u*p+s*v+c*m),t[14]=-(f*p+l*v+h*m),t[15]=1,t)}function Mi(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,v=c*f-u*h,m=u*l-s*f;return(d=p*p+v*v+m*m)>0&&(p*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=p,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-h*v,t[5]=h*p-f*m,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ci(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ni(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Gi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ji(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Li(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ui(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bi(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=e[0],b=e[1],_=e[2],x=e[3],w=e[4],E=e[5],S=e[6],T=e[7],A=e[8],I=e[9],k=e[10],O=e[11],D=e[12],R=e[13],M=e[14],C=e[15];return Math.abs(n-g)<=vo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=vo*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=vo*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-E)<=vo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-S)<=vo*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-T)<=vo*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-A)<=vo*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-I)<=vo*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-k)<=vo*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=vo*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=vo*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-R)<=vo*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-M)<=vo*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-C)<=vo*Math.max(1,Math.abs(y),Math.abs(C))}var Fi=ai,zi=Gi;function Vi(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Wi(t){var e=new mo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xi(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Hi(t,e,n){var r=new mo(3);return r[0]=t,r[1]=e,r[2]=n,r}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ki(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Zi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ji(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $i(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ta(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ea(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function na(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ra(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ia(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function aa(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function ua(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function sa(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ca(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function la(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2];return t[0]=o*s-i*u,t[1]=i*a-r*s,t[2]=r*u-o*a,t}function pa(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function va(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*f,t}function ma(t,e,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,l=3*s*a,h=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function ya(t,e){e=e||1;var n=2*yo()*Math.PI,r=2*yo()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function ga(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function ba(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _a(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,l=i*u-r*c,h=r*s-o*u,d=o*h-i*l,p=i*f-r*h,v=r*l-o*f,m=2*a;return f*=m,l*=m,h*=m,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+l+p,t[2]=c+h+v,t}function xa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ea(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sa(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),c=s&&ha(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ta(t){return t[0]=0,t[1]=0,t[2]=0,t}function Aa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ka(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=vo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=vo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=vo*Math.max(1,Math.abs(o),Math.abs(u))}var Oa,Da=Zi,Ra=Qi,Ma=Ji,Ca=aa,Na=ua,Pa=Xi,Ga=sa,ja=(Oa=Vi(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Oa[0]=t[a],Oa[1]=t[a+1],Oa[2]=t[a+2],o(Oa,Oa,i),t[a]=Oa[0],t[a+1]=Oa[1],t[a+2]=Oa[2];return t});function La(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ua(t){var e=new mo(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ba(t,e,n,r){var o=new mo(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function za(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ha(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ya(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ka(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Za(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $a(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nu(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function ru(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ou(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function iu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function au(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function uu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function su(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],d=e[3];return t[0]=l*c-h*s+d*u,t[1]=-f*c+h*a-d*i,t[2]=f*s-l*a+d*o,t[3]=-f*u+l*i-h*o,t}function cu(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fu(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*yo()-1)*n+(r=2*yo()-1)*r}while(a>=1);do{u=(o=2*yo()-1)*o+(i=2*yo()-1)*i}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*i*s,t}function lu(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hu(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*i-s*o,l=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return t[0]=f*c+d*-a+l*-s-h*-u,t[1]=l*c+d*-u+h*-a-f*-s,t[2]=h*c+d*-s+f*-u-l*-a,t[3]=e[3],t}function du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pu(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mu(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=vo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=vo*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=vo*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=vo*Math.max(1,Math.abs(i),Math.abs(c))}var yu=Wa,gu=Xa,bu=Ha,_u=tu,xu=eu,wu=nu,Eu=ru,Su=function(){var t=La();return function(e,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Tu(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Au(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Iu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ku(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>vo?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ou(t,e){var n=ds(t,e);return Math.acos(2*n*n-1)}function Du(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+o*c-i*s,t[1]=o*f+a*s+i*u-r*c,t[2]=i*f+a*c+r*s-o*u,t[3]=a*f-r*u-o*s-i*c,t}function Ru(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=i*s-o*u,t[3]=a*s-r*u,t}function Mu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*u,t[1]=o*s+a*u,t[2]=i*s+r*u,t[3]=a*s-o*u,t}function Cu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=o*s-r*u,t[2]=i*s+a*u,t[3]=a*s-i*u,t}function Nu(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Pu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=u*Math.cos(a),t}function Gu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function ju(t,e,n){return Gu(t,e),hs(t,t,n),Pu(t,t),t}function Lu(t,e,n,r){var o,i,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return(i=c*d+f*p+l*v+h*m)<0&&(i=-i,d=-d,p=-p,v=-v,m=-m),1-i>vo?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*l+s*v,t[3]=u*h+s*m,t}function Uu(t){var e=yo(),n=yo(),r=yo(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Bu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function Fu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zu(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Vu(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-a*u*c,t[1]=a*u*f+i*s*c,t[2]=a*s*c-i*u*f,t[3]=a*s*f+i*u*c,t}function Wu(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xu,Hu,qu,Yu,Ku,Zu,Qu,Ju,$u,ts,es,ns,rs,os,is,as=Ua,us=Ba,ss=Fa,cs=za,fs=Va,ls=Du,hs=Ja,ds=uu,ps=cu,vs=nu,ms=vs,ys=ru,gs=ys,bs=au,_s=vu,xs=mu,ws=(Xu=Vi(),Hu=Hi(1,0,0),qu=Hi(0,1,0),function(t,e,n){var r=ha(e,n);return r<-.999999?(da(Xu,Hu,e),Pa(Xu)<1e-6&&da(Xu,qu,e),la(Xu,Xu),Iu(t,Xu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(da(Xu,e,n),t[0]=Xu[0],t[1]=Xu[1],t[2]=Xu[2],t[3]=1+r,bs(t,t))}),Es=(Yu=Tu(),Ku=Tu(),function(t,e,n,r,o,i){return Lu(Yu,e,o,i),Lu(Ku,n,r,i),Lu(t,Yu,Ku,2*i*(1-i)),t}),Ss=(Zu=go(),function(t,e,n,r){return Zu[0]=n[0],Zu[3]=n[1],Zu[6]=n[2],Zu[1]=r[0],Zu[4]=r[1],Zu[7]=r[2],Zu[2]=-e[0],Zu[5]=-e[1],Zu[8]=-e[2],bs(t,zu(t,Zu))}),Ts=function(){function t(e,n){Er()(this,t),this.center=void 0,this.halfExtents=void 0,this.min=i.create(),this.max=i.create(),this.update(e,n)}return Tr()(t,[{key:"update",value:function(t,e){this.center=t||i.create(),this.halfExtents=e||i.fromValues(.5,.5,.5),this.min=i.sub(this.min,this.center,this.halfExtents),this.max=i.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){i.add(this.center,e,t),i.scale(this.center,this.center,.5),i.sub(this.halfExtents,e,t),i.scale(this.halfExtents,this.halfExtents,.5),i.copy(this.min,t),i.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],o=e[2],i=this.halfExtents,a=i[0],u=i[1],s=i[2],c=n-a,f=n+a,l=r-u,h=r+u,d=o-s,p=o+s,v=t.center,m=v[0],y=v[1],g=v[2],b=t.halfExtents,_=b[0],x=b[1],w=b[2],E=m-_,S=m+_,T=y-x,A=y+x,I=g-w,k=g+w;E<c&&(c=E),S>f&&(f=S),T<l&&(l=T),A>h&&(h=A),I<d&&(d=I),k>p&&(p=k),e[0]=.5*(c+f),e[1]=.5*(l+h),e[2]=.5*(d+p),i[0]=.5*(f-c),i[1]=.5*(h-l),i[2]=.5*(p-d),this.min[0]=c,this.min[1]=l,this.min[2]=d,this.max[0]=f,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),o=t.getMin();return n[0]<=r[0]&&e[0]>=o[0]&&n[1]<=r[1]&&e[1]>=o[1]&&n[2]<=r[2]&&e[2]>=o[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.min):272===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):i.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.max):272===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):i.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function As(t){for(var e=new Ts,n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(t[0],t[1],t[2]),o=3;o<t.length;){var a=t[o++],u=t[o++],s=t[o++];a<n[0]&&(n[0]=a),u<n[1]&&(n[1]=u),s<n[2]&&(n[2]=s),a>r[0]&&(r[0]=a),u>r[1]&&(r[1]=u),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(Ju=Qu||(Qu={}))[Ju.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Ju[Ju.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Ju[Ju.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Ju[Ju.POINTS=0]="POINTS",Ju[Ju.LINES=1]="LINES",Ju[Ju.LINE_LOOP=2]="LINE_LOOP",Ju[Ju.LINE_STRIP=3]="LINE_STRIP",Ju[Ju.TRIANGLES=4]="TRIANGLES",Ju[Ju.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ju[Ju.TRIANGLE_FAN=6]="TRIANGLE_FAN",Ju[Ju.ZERO=0]="ZERO",Ju[Ju.ONE=1]="ONE",Ju[Ju.SRC_COLOR=768]="SRC_COLOR",Ju[Ju.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Ju[Ju.SRC_ALPHA=770]="SRC_ALPHA",Ju[Ju.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Ju[Ju.DST_ALPHA=772]="DST_ALPHA",Ju[Ju.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Ju[Ju.DST_COLOR=774]="DST_COLOR",Ju[Ju.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Ju[Ju.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Ju[Ju.FUNC_ADD=32774]="FUNC_ADD",Ju[Ju.BLEND_EQUATION=32777]="BLEND_EQUATION",Ju[Ju.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Ju[Ju.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Ju[Ju.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Ju[Ju.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Ju[Ju.MAX_EXT=32776]="MAX_EXT",Ju[Ju.MIN_EXT=32775]="MIN_EXT",Ju[Ju.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Ju[Ju.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Ju[Ju.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Ju[Ju.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Ju[Ju.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Ju[Ju.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Ju[Ju.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Ju[Ju.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Ju[Ju.BLEND_COLOR=32773]="BLEND_COLOR",Ju[Ju.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Ju[Ju.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Ju[Ju.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Ju[Ju.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Ju[Ju.STREAM_DRAW=35040]="STREAM_DRAW",Ju[Ju.STATIC_DRAW=35044]="STATIC_DRAW",Ju[Ju.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Ju[Ju.BUFFER_SIZE=34660]="BUFFER_SIZE",Ju[Ju.BUFFER_USAGE=34661]="BUFFER_USAGE",Ju[Ju.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Ju[Ju.FRONT=1028]="FRONT",Ju[Ju.BACK=1029]="BACK",Ju[Ju.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Ju[Ju.CULL_FACE=2884]="CULL_FACE",Ju[Ju.BLEND=3042]="BLEND",Ju[Ju.DITHER=3024]="DITHER",Ju[Ju.STENCIL_TEST=2960]="STENCIL_TEST",Ju[Ju.DEPTH_TEST=2929]="DEPTH_TEST",Ju[Ju.SCISSOR_TEST=3089]="SCISSOR_TEST",Ju[Ju.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Ju[Ju.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Ju[Ju.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Ju[Ju.NO_ERROR=0]="NO_ERROR",Ju[Ju.INVALID_ENUM=1280]="INVALID_ENUM",Ju[Ju.INVALID_VALUE=1281]="INVALID_VALUE",Ju[Ju.INVALID_OPERATION=1282]="INVALID_OPERATION",Ju[Ju.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Ju[Ju.CW=2304]="CW",Ju[Ju.CCW=2305]="CCW",Ju[Ju.LINE_WIDTH=2849]="LINE_WIDTH",Ju[Ju.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Ju[Ju.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Ju[Ju.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Ju[Ju.FRONT_FACE=2886]="FRONT_FACE",Ju[Ju.DEPTH_RANGE=2928]="DEPTH_RANGE",Ju[Ju.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Ju[Ju.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Ju[Ju.DEPTH_FUNC=2932]="DEPTH_FUNC",Ju[Ju.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Ju[Ju.STENCIL_FUNC=2962]="STENCIL_FUNC",Ju[Ju.STENCIL_FAIL=2964]="STENCIL_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Ju[Ju.STENCIL_REF=2967]="STENCIL_REF",Ju[Ju.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Ju[Ju.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Ju[Ju.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Ju[Ju.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Ju[Ju.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Ju[Ju.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Ju[Ju.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Ju[Ju.VIEWPORT=2978]="VIEWPORT",Ju[Ju.SCISSOR_BOX=3088]="SCISSOR_BOX",Ju[Ju.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Ju[Ju.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Ju[Ju.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Ju[Ju.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Ju[Ju.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Ju[Ju.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Ju[Ju.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Ju[Ju.RED_BITS=3410]="RED_BITS",Ju[Ju.GREEN_BITS=3411]="GREEN_BITS",Ju[Ju.BLUE_BITS=3412]="BLUE_BITS",Ju[Ju.ALPHA_BITS=3413]="ALPHA_BITS",Ju[Ju.DEPTH_BITS=3414]="DEPTH_BITS",Ju[Ju.STENCIL_BITS=3415]="STENCIL_BITS",Ju[Ju.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Ju[Ju.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Ju[Ju.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Ju[Ju.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Ju[Ju.SAMPLES=32937]="SAMPLES",Ju[Ju.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Ju[Ju.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Ju[Ju.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Ju[Ju.DONT_CARE=4352]="DONT_CARE",Ju[Ju.FASTEST=4353]="FASTEST",Ju[Ju.NICEST=4354]="NICEST",Ju[Ju.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Ju[Ju.BYTE=5120]="BYTE",Ju[Ju.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Ju[Ju.SHORT=5122]="SHORT",Ju[Ju.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Ju[Ju.INT=5124]="INT",Ju[Ju.UNSIGNED_INT=5125]="UNSIGNED_INT",Ju[Ju.FLOAT=5126]="FLOAT",Ju[Ju.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Ju[Ju.ALPHA=6406]="ALPHA",Ju[Ju.RGB=6407]="RGB",Ju[Ju.RGBA=6408]="RGBA",Ju[Ju.LUMINANCE=6409]="LUMINANCE",Ju[Ju.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Ju[Ju.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Ju[Ju.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Ju[Ju.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Ju[Ju.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Ju[Ju.VERTEX_SHADER=35633]="VERTEX_SHADER",Ju[Ju.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Ju[Ju.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Ju[Ju.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Ju[Ju.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Ju[Ju.SHADER_TYPE=35663]="SHADER_TYPE",Ju[Ju.DELETE_STATUS=35712]="DELETE_STATUS",Ju[Ju.LINK_STATUS=35714]="LINK_STATUS",Ju[Ju.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Ju[Ju.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Ju[Ju.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Ju[Ju.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Ju[Ju.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Ju[Ju.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Ju[Ju.NEVER=512]="NEVER",Ju[Ju.LESS=513]="LESS",Ju[Ju.EQUAL=514]="EQUAL",Ju[Ju.LEQUAL=515]="LEQUAL",Ju[Ju.GREATER=516]="GREATER",Ju[Ju.NOTEQUAL=517]="NOTEQUAL",Ju[Ju.GEQUAL=518]="GEQUAL",Ju[Ju.ALWAYS=519]="ALWAYS",Ju[Ju.KEEP=7680]="KEEP",Ju[Ju.REPLACE=7681]="REPLACE",Ju[Ju.INCR=7682]="INCR",Ju[Ju.DECR=7683]="DECR",Ju[Ju.INVERT=5386]="INVERT",Ju[Ju.INCR_WRAP=34055]="INCR_WRAP",Ju[Ju.DECR_WRAP=34056]="DECR_WRAP",Ju[Ju.VENDOR=7936]="VENDOR",Ju[Ju.RENDERER=7937]="RENDERER",Ju[Ju.VERSION=7938]="VERSION",Ju[Ju.NEAREST=9728]="NEAREST",Ju[Ju.LINEAR=9729]="LINEAR",Ju[Ju.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Ju[Ju.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Ju[Ju.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Ju[Ju.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Ju[Ju.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Ju[Ju.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Ju[Ju.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Ju[Ju.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Ju[Ju.TEXTURE_2D=3553]="TEXTURE_2D",Ju[Ju.TEXTURE=5890]="TEXTURE",Ju[Ju.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Ju[Ju.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Ju[Ju.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Ju[Ju.TEXTURE0=33984]="TEXTURE0",Ju[Ju.TEXTURE1=33985]="TEXTURE1",Ju[Ju.TEXTURE2=33986]="TEXTURE2",Ju[Ju.TEXTURE3=33987]="TEXTURE3",Ju[Ju.TEXTURE4=33988]="TEXTURE4",Ju[Ju.TEXTURE5=33989]="TEXTURE5",Ju[Ju.TEXTURE6=33990]="TEXTURE6",Ju[Ju.TEXTURE7=33991]="TEXTURE7",Ju[Ju.TEXTURE8=33992]="TEXTURE8",Ju[Ju.TEXTURE9=33993]="TEXTURE9",Ju[Ju.TEXTURE10=33994]="TEXTURE10",Ju[Ju.TEXTURE11=33995]="TEXTURE11",Ju[Ju.TEXTURE12=33996]="TEXTURE12",Ju[Ju.TEXTURE13=33997]="TEXTURE13",Ju[Ju.TEXTURE14=33998]="TEXTURE14",Ju[Ju.TEXTURE15=33999]="TEXTURE15",Ju[Ju.TEXTURE16=34e3]="TEXTURE16",Ju[Ju.TEXTURE17=34001]="TEXTURE17",Ju[Ju.TEXTURE18=34002]="TEXTURE18",Ju[Ju.TEXTURE19=34003]="TEXTURE19",Ju[Ju.TEXTURE20=34004]="TEXTURE20",Ju[Ju.TEXTURE21=34005]="TEXTURE21",Ju[Ju.TEXTURE22=34006]="TEXTURE22",Ju[Ju.TEXTURE23=34007]="TEXTURE23",Ju[Ju.TEXTURE24=34008]="TEXTURE24",Ju[Ju.TEXTURE25=34009]="TEXTURE25",Ju[Ju.TEXTURE26=34010]="TEXTURE26",Ju[Ju.TEXTURE27=34011]="TEXTURE27",Ju[Ju.TEXTURE28=34012]="TEXTURE28",Ju[Ju.TEXTURE29=34013]="TEXTURE29",Ju[Ju.TEXTURE30=34014]="TEXTURE30",Ju[Ju.TEXTURE31=34015]="TEXTURE31",Ju[Ju.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Ju[Ju.REPEAT=10497]="REPEAT",Ju[Ju.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Ju[Ju.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ju[Ju.FLOAT_VEC2=35664]="FLOAT_VEC2",Ju[Ju.FLOAT_VEC3=35665]="FLOAT_VEC3",Ju[Ju.FLOAT_VEC4=35666]="FLOAT_VEC4",Ju[Ju.INT_VEC2=35667]="INT_VEC2",Ju[Ju.INT_VEC3=35668]="INT_VEC3",Ju[Ju.INT_VEC4=35669]="INT_VEC4",Ju[Ju.BOOL=35670]="BOOL",Ju[Ju.BOOL_VEC2=35671]="BOOL_VEC2",Ju[Ju.BOOL_VEC3=35672]="BOOL_VEC3",Ju[Ju.BOOL_VEC4=35673]="BOOL_VEC4",Ju[Ju.FLOAT_MAT2=35674]="FLOAT_MAT2",Ju[Ju.FLOAT_MAT3=35675]="FLOAT_MAT3",Ju[Ju.FLOAT_MAT4=35676]="FLOAT_MAT4",Ju[Ju.SAMPLER_2D=35678]="SAMPLER_2D",Ju[Ju.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Ju[Ju.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Ju[Ju.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Ju[Ju.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Ju[Ju.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Ju[Ju.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Ju[Ju.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Ju[Ju.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Ju[Ju.COMPILE_STATUS=35713]="COMPILE_STATUS",Ju[Ju.LOW_FLOAT=36336]="LOW_FLOAT",Ju[Ju.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Ju[Ju.HIGH_FLOAT=36338]="HIGH_FLOAT",Ju[Ju.LOW_INT=36339]="LOW_INT",Ju[Ju.MEDIUM_INT=36340]="MEDIUM_INT",Ju[Ju.HIGH_INT=36341]="HIGH_INT",Ju[Ju.FRAMEBUFFER=36160]="FRAMEBUFFER",Ju[Ju.RENDERBUFFER=36161]="RENDERBUFFER",Ju[Ju.RGBA4=32854]="RGBA4",Ju[Ju.RGB5_A1=32855]="RGB5_A1",Ju[Ju.RGB565=36194]="RGB565",Ju[Ju.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Ju[Ju.STENCIL_INDEX=6401]="STENCIL_INDEX",Ju[Ju.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Ju[Ju.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Ju[Ju.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Ju[Ju.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Ju[Ju.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Ju[Ju.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Ju[Ju.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Ju[Ju.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Ju[Ju.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Ju[Ju.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Ju[Ju.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Ju[Ju.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Ju[Ju.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Ju[Ju.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Ju[Ju.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Ju[Ju.NONE=0]="NONE",Ju[Ju.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Ju[Ju.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Ju[Ju.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Ju[Ju.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Ju[Ju.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Ju[Ju.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Ju[Ju.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Ju[Ju.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Ju[Ju.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Ju[Ju.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Ju[Ju.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Ju[Ju.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Ju[Ju.COPY_SRC=1]="COPY_SRC",Ju[Ju.COPY_DST=2]="COPY_DST",Ju[Ju.SAMPLED=4]="SAMPLED",Ju[Ju.STORAGE=8]="STORAGE",Ju[Ju.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Is=($u=Object(Lr.injectable)(),ts=Object(Lr.inject)(Ur.GeometryComponentManager),es=Object(Lr.inject)(Ur.RenderEngine),$u((rs=function(){function t(){Er()(this,t),xr()(this,"geometry",os,this),xr()(this,"engine",is,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){var e=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Qu.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Qu.UNSIGNED_INT,usage:Qu.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=Cr();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=Cr();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}},{key:"createBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.widthSegments||1,n=t.heightSegments||1,r=t.depthSegments||1,o=t.halfExtents||i.fromValues(.5,.5,.5),a=jr()(o,3),u=a[0],s=a[1],c=a[2],f=[i.fromValues(-u,-s,c),i.fromValues(u,-s,c),i.fromValues(u,s,c),i.fromValues(-u,s,c),i.fromValues(u,-s,-c),i.fromValues(-u,-s,-c),i.fromValues(-u,s,-c),i.fromValues(u,s,-c)],l=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],h=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],d={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},p=[],v=[],m=[],y=[],g=[],b=0,_=function(t,e,n){var r,o,a,u;for(a=0;a<=e;a++)for(u=0;u<=n;u++){var s=i.create(),c=i.create(),d=i.create(),_=i.create();i.lerp(s,f[l[t][0]],f[l[t][1]],a/e),i.lerp(c,f[l[t][0]],f[l[t][2]],u/n),i.sub(d,c,f[l[t][0]]),i.add(_,s,d),r=a/e,o=u/n,p.push(_[0],_[1],_[2]),v.push(h[t][0],h[t][1],h[t][2]),m.push(r,o),r=.875*(r/=3)+4/64,o=.875*(o/=3)+4/64,r+=t%3/3,o+=Math.floor(t/3)/3,y.push(r,o),a<e&&u<n&&(g.push(b+n+1,b+1,b),g.push(b+n+1,b+n+2,b+1)),b++}};_(d.FRONT,e,n),_(d.BACK,e,n),_(d.TOP,e,r),_(d.BOTTOM,e,r),_(d.RIGHT,r,n),_(d.LEFT,r,n);var x=As(p),w=Cr();return this.geometry.create(w,{indices:Uint32Array.from(g),aabb:x,attributes:[{dirty:!0,name:"position",data:Float32Array.from(p),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),t}(),os=Ir()(rs.prototype,"geometry",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=Ir()(rs.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=rs))||ns);n(169);function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Os,Ds,Rs,Ms,Cs,Ns,Ps,Gs,js,Ls=function(t){Wr()(n,t);var e=ks(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Qu.BACK},r.depth={enable:!0},r.blend=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(Nr);function Us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fs,zs=(Os=Object(Lr.injectable)(),Ds=Object(Lr.inject)(Ur.MaterialComponentManager),Rs=Object(Lr.inject)(Ur.RenderEngine),Ms=Object(Lr.inject)(Ur.ShaderModuleService),Os((Ns=function(){function t(){Er()(this,t),xr()(this,"material",Ps,this),xr()(this,"engine",Gs,this),xr()(this,"shaderModule",js,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.material.map(function(){var t=Rr()(Or.a.mark((function t(e,n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var t=Cr();return this.material.create(t,{vertexShaderGLSL:this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\\n  vec4 color;\\n  mat4 projectionMatrix;\\n  mat4 modelViewMatrix;\\n} uniforms;\\n\\nlayout(location = 0) in vec3 position;\\n// layout(location = 1) in vec3 barycentric;\\n\\nlayout(location = 0) out vec4 fragColor;\\n// layout(location = 1) out vec3 v_Barycentric;\\n\\nvoid main() {\\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\\n  fragColor = uniforms.color;\\n  // v_Barycentric = barycentric;\\n}":"attribute vec3 position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec4 color;\\n\\nvarying vec4 fragColor;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n  fragColor = color;\\n}",fragmentShaderGLSL:this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\\n//   float lineWidth;\\n//   vec4 lineColor;\\n// } wireframe;\\n\\nlayout(location = 0) in vec4 fragColor;\\n// layout(location = 1) in vec3 v_Barycentric;\\n\\nlayout(location = 0) out vec4 outColor;\\n\\n// wireframe\\n// float edgeFactor() {\\n//   vec3 d = fwidth(v_Barycentric);\\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\\n//   return min(min(a3.x, a3.y), a3.z);\\n// }\\n\\nvoid main() {\\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\\n  outColor = fragColor;\\n}":"varying vec4 fragColor;\\n\\nvoid main() {\\n  gl_FragColor = fragColor;\\n}"})}},{key:"createShaderMaterial",value:function(t){var e=Cr(),n=t.vertexShader,r=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var i="material-".concat(e);this.shaderModule.registerModule(i,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(i);n=a.vs,r=a.fs,a.uniforms&&(o=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Bs(Bs({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:o}))}}]),t}(),Ps=Ir()(Ns.prototype,"material",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=Ir()(Ns.prototype,"engine",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=Ir()(Ns.prototype,"shaderModule",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=Ns))||Cs);function Vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Fs||(Fs={}));var Ws=function(t){Wr()(n,t);var e=Vs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).strategy=Fs.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(co()(r),t),r}return n}(Nr);n(170);function Xs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Hs,qs=function(t){Wr()(n,t);var e=Xs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new Ts,r.aabbDirty=!0,r.model=void 0,r.visible=!0,Object.assign(co()(r),t),r}return n}(Nr),Ys=function(){function t(e,n){Er()(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||i.fromValues(0,1,0),this.updatePNVertexFlag()}return Tr()(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return i.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/i.len(this.normal);i.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),o=r/(r-this.distanceToPoint(e)),a=o>=0&&o<=1;return a&&n&&i.lerp(n,t,e,o),a}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Hs||(Hs={}));var Ks,Zs,Qs,Js,$s,tc,ec,nc,rc,oc,ic,ac,uc,sc=function(){function t(e){if(Er()(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Ys)}return Tr()(t,[{key:"extractFromVPMatrix",value:function(t){var e=jr()(t,16),n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15];i.set(this.planes[0].normal,a-n,f-u,p-l),this.planes[0].distance=-(g-v),i.set(this.planes[1].normal,a+n,f+u,p+l),this.planes[1].distance=-(g+v),i.set(this.planes[2].normal,a+r,f+s,p+h),this.planes[2].distance=-(g+m),i.set(this.planes[3].normal,a-r,f-s,p-h),this.planes[3].distance=-(g-m),i.set(this.planes[4].normal,a-o,f-c,p-d),this.planes[4].distance=-(g-y),i.set(this.planes[5].normal,a+o,f+c,p+d),this.planes[5].distance=-(g+y),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}(),cc=n(35),fc=n.n(cc);function lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dc,pc,vc,mc,yc,gc,bc,_c,xc,wc,Ec,Sc,Tc,Ac,Ic,kc,Oc,Dc,Rc,Mc,Cc,Nc,Pc,Gc,jc=(Ks=Object(Lr.injectable)(),Zs=Object(Lr.inject)(Ur.MeshComponentManager),Qs=Object(Lr.inject)(Ur.CullableComponentManager),Js=Object(Lr.inject)(Ur.GeometryComponentManager),$s=Object(Lr.inject)(Ur.HierarchyComponentManager),tc=Object(Lr.inject)(Ur.TransformComponentManager),Ks((nc=function(){function t(){Er()(this,t),xr()(this,"mesh",rc,this),xr()(this,"cullable",oc,this),xr()(this,"geometry",ic,this),xr()(this,"hierarchy",ac,this),xr()(this,"transform",uc,this),this.planes=void 0}var e;return Tr()(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,o,a,u=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=lc(e);try{for(a=function(){var t=o.value,e=(t.getScene(),t.getCamera());u.mesh.forEach((function(t,n){var o,a,s=u.hierarchy.getComponentByEntity(t),c=u.cullable.getComponentByEntity(t),f=n.geometry,l=u.transform.getComponentByEntity(t);if(f&&f.aabb&&l&&n.aabbDirty){var h=l.worldTransform,d=f.aabb,p=d.center,v=d.halfExtents,m=i.transformMat4(i.create(),p,h),y=(o=h,(a=r.create())[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a),g=i.transformMat3(i.create(),v,y);n.aabb.update(m,g),n.aabbDirty=!1}if(c&&f){var b=u.cullable.getComponentByEntity((null==s?void 0:s.parentID)||-1);c.visibilityPlaneMask=u.computeVisibilityWithPlaneMask(n.aabb,(null==b?void 0:b.visibilityPlaneMask)||Hs.INDETERMINATE,u.planes||e.getFrustum().planes),c.visible=c.visibilityPlaneMask!==Hs.OUTSIDE}}))},n.s();!(o=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Hs.OUTSIDE||e===Hs.INSIDE)return e;for(var r=Hs.INSIDE,o=0,a=n.length;o<a;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(e&u))){var s=n[o],c=s.normal,f=s.distance;if(i.dot(c,t.getNegativeFarPoint(n[o]))+f>0)return Hs.OUTSIDE;i.dot(c,t.getPositiveFarPoint(n[o]))+f>0&&(r|=u)}}return r}}]),t}(),rc=Ir()(nc.prototype,"mesh",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=Ir()(nc.prototype,"cullable",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=Ir()(nc.prototype,"geometry",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=Ir()(nc.prototype,"hierarchy",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=Ir()(nc.prototype,"transform",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=nc))||ec);function Lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bc,Fc,zc,Vc,Wc,Xc,Hc,qc,Yc,Kc,Zc,Qc,Jc,$c,tf,ef,nf,rf,of,af,uf,sf,cf=(dc=Object(Lr.injectable)(),pc=Object(Lr.inject)(Ur.MeshComponentManager),vc=Object(Lr.inject)(Ur.GeometryComponentManager),mc=Object(Lr.inject)(Ur.MaterialComponentManager),yc=Object(Lr.inject)(Ur.CullableComponentManager),gc=Object(Lr.inject)(Ur.TransformComponentManager),bc=Object(Lr.inject)(Ur.HierarchyComponentManager),_c=Object(Lr.inject)(Ur.Systems),xc=Object(Lr.named)(Ur.FrameGraphSystem),wc=Object(Lr.inject)(Ur.RenderEngine),Ec=Object(Lr.inject)(Ur.ResourcePool),dc((Gc=Pc=function(){function t(){var e=this;Er()(this,t),xr()(this,"mesh",Ac,this),xr()(this,"geometry",Ic,this),xr()(this,"material",kc,this),xr()(this,"cullable",Oc,this),xr()(this,"transform",Dc,this),xr()(this,"hierarchy",Rc,this),xr()(this,"frameGraphSystem",Mc,this),xr()(this,"engine",Cc,this),xr()(this,"resourcePool",Nc,this),this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Qu.RENDER_ATTACHMENT|Qu.SAMPLED|Qu.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(i.resource),u=Lc(o),t.prev=3,u.s();case 5:if((s=u.n()).done){t.next=11;break}return c=s.value,t.next=9,e.initView(c);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),u.e(t.t0);case 16:return t.prev=16,u.f(),t.finish(16);case 19:f=e.engine.getCanvas(),a.resize({width:f.width,height:f.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Lc(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return Tr()(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=o.multiply(o.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var a=t.getViewport(),u=a.x,s=a.y,c=a.width,f=a.height;this.engine.viewport({x:u,y:s,width:c,height:f});var l,h=Lc(e.getEntities());try{for(h.s();!(l=h.n()).done;){var d=l.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:r})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=this,r=e.camera,i=e.view,a=e.viewMatrix,u=this.mesh.getComponentByEntity(t);if(u.visible){this.hierarchy.forEach((function(e,o){o.parentID===t&&n.renderMesh(e,{camera:r,view:i,viewMatrix:a})}));var s=u.material,c=u.geometry;if(c&&!c.dirty&&s){var f=this.transform.getComponentByEntity(t),l=o.multiply(o.create(),a,f.worldTransform),h=i.getViewport(),d=h.width,p=h.height;s.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:l,modelMatrix:f.worldTransform,viewMatrix:a,cameraPosition:r.getPosition(),u_viewport:[d,p]}),u.model&&(u.model.draw({uniforms:s.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),s.uniforms.forEach((function(t){t.dirty=!1})),s.dirty=!1)}}}},{key:"initMesh",value:(n=Rr()(Or.a.mark((function t(e,n){var r,o,i,a,u,s,c,f=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:return o=r.material,i=r.geometry,t.next=7,this.hierarchy.forEachAsync(function(){var t=Rr()(Or.a.mark((function t(r,o){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.parentID!==e){t.next=4;break}return t.next=4,f.initMesh(r,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:if(i&&!i.dirty&&o){t.next=9;break}return t.abrupt("return");case 9:if(r.model){t.next=21;break}return o.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),a=this.engine,u=a.createModel,s=a.createAttribute,c={vs:o.vertexShaderGLSL,fs:o.fragmentShaderGLSL,attributes:i.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=s({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:o.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},o.cull&&(c.cull=o.cull),o.depth&&(c.depth=o.depth),o.blend&&(c.blend=o.blend),i.indicesBuffer&&(c.elements=i.indicesBuffer),i.maxInstancedCount&&(c.instances=i.maxInstancedCount,c.count=i.vertexCount||3),t.next=20,u(c);case 20:r.model=t.sent;case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=Lc(n.getEntities()),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,this.initMesh(i,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Pc.IDENTIFIER="Render Pass",Tc=Gc,Ac=Ir()(Tc.prototype,"mesh",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Ir()(Tc.prototype,"geometry",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ir()(Tc.prototype,"material",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=Ir()(Tc.prototype,"cullable",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Ir()(Tc.prototype,"transform",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ir()(Tc.prototype,"hierarchy",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mc=Ir()(Tc.prototype,"frameGraphSystem",[_c,xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=Ir()(Tc.prototype,"engine",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=Ir()(Tc.prototype,"resourcePool",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=Tc))||Sc),ff=(Bc=Object(Lr.injectable)(),Fc=Object(Lr.inject)(Ur.RenderEngine),zc=Object(Lr.inject)(Ur.ResourcePool),Bc((Yc=qc=function t(){var e=this;Er()(this,t),xr()(this,"engine",Xc,this),xr()(this,"resourcePool",Hc,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(cf.IDENTIFIER);if(r){var o=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,o)}}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r){var o,i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.engine,i=o.createModel,a=o.createAttribute,u=o.createBuffer,e.model){t.next=6;break}return t.next=4,i({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\\nlayout(location = 0) out vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}":"attribute vec2 a_Position;\\n\\nvarying vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\\n\\nlayout(location = 0) in vec2 v_UV;\\nlayout(location = 0) out vec4 outColor;\\n\\nvoid main() {\\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\\n}":"varying vec2 v_UV;\\n\\nuniform sampler2D u_Texture;\\n\\nvoid main() {\\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\\n}",attributes:{a_Position:a({buffer:u({data:[-4,-4,4,-4,0,4],type:Qu.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:s=t.sent,e.model=s;case 6:c=n.getResourceNode(r.data.input),f=e.resourcePool.getOrCreateResource(c.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:f}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},qc.IDENTIFIER="Copy Pass",Wc=Yc,Xc=Ir()(Wc.prototype,"engine",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Ir()(Wc.prototype,"resourcePool",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Wc))||Vc);function lf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var df,pf,vf,mf,yf,gf,bf,_f,xf,wf,Ef,Sf,Tf=1,Af=2,If=(Kc=Object(Lr.injectable)(),Zc=Object(Lr.inject)(Ur.RenderEngine),Qc=Object(Lr.inject)(Ur.ResourcePool),Jc=Object(Lr.inject)(Ur.RenderPassFactory),$c=Object(Lr.inject)(Ur.MeshComponentManager),Kc((sf=uf=function(){function t(){var e=this;Er()(this,t),xr()(this,"engine",nf,this),xr()(this,"resourcePool",rf,this),xr()(this,"renderPassFactory",of,this),xr()(this,"mesh",af,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=o,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:i=lf(o);try{for(u=function(){var t=a.value,o=t.getViewport(),i=o.width,u=o.height;e.alreadyInRendering=!0;var s=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:i,height:u}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(cf.IDENTIFIER),o=[],i=lf(t.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var a=n.value,u=e.mesh.getComponentByEntity(a);u.material.setUniform("u_PickingStage",Tf),o.push(u)}}catch(t){i.e(t)}finally{i.f()}r.renderView(t),o.forEach((function(t){t.material.setUniform("u_PickingStage",Af)})),e.alreadyInRendering=!1}))},i.s();!(a=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,o,i=t.x,a=t.y,u=e.engine,s=u.readPixels,c=u.useFramebuffer,f=n.getViewport(),l=f.width,h=f.height,d=i*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>l||d<0||p>h||p<0))return c(e.pickingFBO,(function(){var t,i;0===(r=s({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=r,i=jr()(t,3),o=i[0]+256*i[1]+65536*i[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),o}}return Tr()(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=lf(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.mesh.getComponentByEntity(o).material;i.setUniform("u_PickingStage",Af),i.setUniform("u_PickingColor",[t[0],t[1],t[2]]),i.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),uf.IDENTIFIER="PixelPicking Pass",ef=sf,nf=Ir()(ef.prototype,"engine",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Ir()(ef.prototype,"resourcePool",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ir()(ef.prototype,"renderPassFactory",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Ir()(ef.prototype,"mesh",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=ef))||tf),kf=(df=Object(Lr.injectable)(),pf=Object(Lr.inject)(Ur.Systems),vf=Object(Lr.named)(Ur.FrameGraphSystem),mf=Object(Lr.inject)(Ur.RenderPassFactory),yf=Object(Lr.inject)(Ur.ConfigService),gf=Object(Lr.inject)(Ur.ResourcePool),df((_f=function(){function t(){Er()(this,t),xr()(this,"frameGraphSystem",xf,this),xr()(this,"renderPassFactory",wf,this),xr()(this,"configService",Ef,this),xr()(this,"resourcePool",Sf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(cf.IDENTIFIER),r=n.setup,o=n.execute,this.frameGraphSystem.addPass(cf.IDENTIFIER,r,o),i=this.renderPassFactory(ff.IDENTIFIER),a=i.setup,u=i.execute,s=i.tearDown,c=this.frameGraphSystem.addPass(ff.IDENTIFIER,a,u,s),this.frameGraphSystem.present(c.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(If.IDENTIFIER).pick(t,e)}}]),t}(),xf=Ir()(_f.prototype,"frameGraphSystem",[pf,vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Ir()(_f.prototype,"renderPassFactory",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ef=Ir()(_f.prototype,"configService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sf=Ir()(_f.prototype,"resourcePool",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=_f))||bf);function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Df,Rf,Mf,Cf,Nf,Pf,Gf,jf,Lf,Uf=function(t){Wr()(n,t);var e=Of(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(co()(r),t),r}return n}(Nr),Bf=(Df=Object(Lr.injectable)(),Rf=Object(Lr.inject)(Ur.HierarchyComponentManager),Mf=Object(Lr.inject)(Ur.TransformComponentManager),Cf=Object(Lr.inject)(Ur.MeshComponentManager),Df((Pf=function(){function t(){Er()(this,t),xr()(this,"hierarchy",Gf,this),xr()(this,"transform",jf,this),xr()(this,"mesh",Lf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){n.isDirty()&&(t.setMeshAABBDirty(e),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),o=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==o&&r.updateTransformWithParent(o)}))}},{key:"attach",value:function(t,e,n){if(this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e}),this.setMeshAABBDirty(e),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var i=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===i){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e));var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t),u=this.transform.getComponentByEntity(e)),!n&&u&&(s.matrixTransform(o.invert(o.create(),u.worldTransform)),s.updateTransform()),u&&s.updateTransformWithParent(u)}},{key:"detach",value:function(t){if(null!==this.hierarchy.getComponentByEntity(t)){var e=this.transform.getComponentByEntity(t);null!==e&&e.applyTransform(),this.hierarchy.removeKeepSorted(t),this.setMeshAABBDirty(t)}}},{key:"detachChildren",value:function(t){for(var e=0;e<this.hierarchy.getCount();){var n;if((null===(n=this.hierarchy.getComponent(e))||void 0===n?void 0:n.parentID)===t){var r=this.hierarchy.getEntity(e);this.detach(r)}else++e}}},{key:"setMeshAABBDirty",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.aabbDirty=!0)}}]),t}(),Gf=Ir()(Pf.prototype,"hierarchy",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=Ir()(Pf.prototype,"transform",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=Ir()(Pf.prototype,"mesh",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Pf))||Nf);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var zf=function(t){Wr()(n,t);var e=Ff(n);function n(t){var r,a,s,c,f,l,h,d,p,v,m,y,g,b,_;return Er()(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localTranslation=i.fromValues(0,0,0),r.localRotation=u.fromValues(0,0,0,1),r.localScale=i.fromValues(1,1,1),r.localTransform=o.create(),r.worldTransform=o.create(),r.getRotation=(a=u.create(),function(){return o.getRotation(a,r.worldTransform),a}),r.getScale=(s=i.create(),function(){return o.getScaling(s,r.worldTransform),s}),r.getPosition=(c=i.create(),function(){return o.getTranslation(c,r.worldTransform),c}),r.getLocalMatrix=(f=o.create(),function(){return o.fromRotationTranslationScale(f,r.localRotation,r.localTranslation,r.localScale),f}),r.matrixTransform=(l=o.create(),function(t){o.multiply(l,r.getLocalMatrix(),t),o.getScaling(r.localScale,l),o.getTranslation(r.localTranslation,l),o.getRotation(r.localRotation,l)}),r.rotateRollPitchYaw=(h=u.create(),d=u.create(),p=u.create(),function(t,e,n){r.setDirty(),u.fromEuler(h,t,0,0),u.fromEuler(d,0,e,0),u.fromEuler(p,0,0,n),u.multiply(r.localRotation,h,r.localRotation),u.multiply(r.localRotation,r.localRotation,d),u.multiply(r.localRotation,p,r.localRotation),u.normalize(r.localRotation,r.localRotation)}),r.lerp=(v=i.create(),m=u.create(),y=i.create(),g=i.create(),b=u.create(),_=i.create(),function(t,e,n){r.setDirty(),o.getScaling(v,t.worldTransform),o.getTranslation(y,t.worldTransform),o.getRotation(m,t.worldTransform),o.getScaling(g,e.worldTransform),o.getTranslation(_,e.worldTransform),o.getRotation(b,e.worldTransform),i.lerp(r.localScale,v,g,n),u.slerp(r.localRotation,m,b,n),i.lerp(r.localTranslation,y,_,n)}),r}return Tr()(n,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),o.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(t){o.multiply(this.worldTransform,this.getLocalMatrix(),t.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),o.getScaling(this.localScale,this.worldTransform),o.getTranslation(this.localTranslation,this.worldTransform),o.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=i.fromValues(0,0,0),this.localRotation=u.fromValues(0,0,0,1),this.localScale=i.fromValues(1,1,1)}},{key:"translate",value:function(t){return this.setDirty(),i.add(this.localTranslation,this.localTranslation,t),this}},{key:"scale",value:function(t){return this.setDirty(),i.multiply(this.localScale,this.localScale,t),this}},{key:"rotate",value:function(t){return this.setDirty(),u.multiply(this.localRotation,this.localRotation,t),u.normalize(this.localRotation,this.localRotation),this}}]),n}(Nr);zf.DIRTY=1;n(93),n(94),n(171),n(95),n(96),n(73),n(97),n(27),n(98),n(172);var Vf,Wf,Xf,Hf,qf,Yf=n(103),Kf=n(187),Zf=n.n(Kf),Qf=(Vf=Object(Lr.injectable)(),Wf=Object(Lr.inject)(Ur.RenderEngine),Vf((Hf=function(){function t(){Er()(this,t),xr()(this,"engine",qf,this),this.resourcePool={}}return Tr()(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,o=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:Qu.CLAMP_TO_EDGE,wrapT:Qu.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),qf=Ir()(Hf.prototype,"engine",[Wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf=Hf))||Xf);function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var $f,tl,el=function(t){Wr()(n,t);var e=Jf(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(Nr),nl=Object(Lr.injectable)()($f=function(){function t(){Er()(this,t),this.config=void 0}return Tr()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||$f,rl=Object(Lr.injectable)()(tl=function(){function t(){Er()(this,t)}return Tr()(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||tl,ol=n(188),il=n.n(ol);var al,ul=/uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;function sl(t){var e={};return{content:t=t.replace(ul,(function(t,n,r){var o=r.split(":"),i=o[0].trim(),a="";switch(o.length>1&&(a=o[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=a,"uniform ".concat(n," ").concat(i,";\\n")})),uniforms:e}}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ll=/precision\\s+(high|low|medium)p\\s+float/,hl=/#pragma include (["^+"]?["\\ "[a-zA-Z_0-9](.*)"]*?)/g,dl=Object(Lr.injectable)()(al=function(){function t(){Er()(this,t),this.moduleCache={},this.rawContentCache={}}return Tr()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\\nvarying vec4 v_PickingResult;\\n\\nuniform vec3 u_PickingColor : [0, 0, 0];\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\nuniform float u_PickingThreshold : 1.0;\\nuniform float u_PickingBuffer: 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\\n}\\n\\nvoid setPickingColor(vec3 pickingColor) {\\n  // compares only in highlight stage\\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\\n\\n  // Stores the picking color so that the fragment shader can render it during picking\\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\\n}\\n\\nfloat setPickingSize(float x) {\\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\\n}",fs:"varying vec4 v_PickingResult;\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\n/*\\n * Returns highlight color if this item is selected.\\n */\\nvec4 filterHighlightColor(vec4 color) {\\n  bool selected = bool(v_PickingResult.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\\n\\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(resultRGB, color.a);\\n  } else {\\n    return color;\\n  }\\n}\\n\\n/*\\n * Returns picking color if picking enabled else unmodified argument.\\n */\\nvec4 filterPickingColor(vec4 color) {\\n  vec3 pickingColor = v_PickingResult.rgb;\\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\\n}\\n\\n/*\\n * Returns picking color if picking is enabled if not\\n * highlight color if this item is selected, otherwise unmodified argument.\\n */\\nvec4 filterColor(vec4 color) {\\n  return filterPickingColor(filterHighlightColor(color));\\n}\\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\\n * 2D signed distance field functions\\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\\n */\\n\\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\\n\\nfloat sdCircle(vec2 p, float r) {\\n  return length(p) - r;\\n}\\n\\nfloat sdEquilateralTriangle(vec2 p) {\\n  float k = sqrt(3.0);\\n  p.x = abs(p.x) - 1.0;\\n  p.y = p.y + 1.0/k;\\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\\n  p.x -= clamp( p.x, -2.0, 0.0 );\\n  return -length(p)*sign(p.y);\\n}\\n\\nfloat sdBox(vec2 p, vec2 b) {\\n  vec2 d = abs(p)-b;\\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\\n}\\n\\nfloat sdPentagon(vec2 p, float r) {\\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\\n  p.x = abs(p.x);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagon(vec2 p, float r) {\\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdOctogon(vec2 p, float r) {\\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\\n  p = abs(p);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagram(vec2 p, float r) {\\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdRhombus(vec2 p, vec2 b) {\\n  vec2 q = abs(p);\\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\\n}\\n\\nfloat sdVesica(vec2 p, float r, float d) {\\n  p = abs(p);\\n  float b = sqrt(r*r-d*d); // can delay this sqrt\\n  return ((p.y-b)*d>p.x*b)\\n          ? length(p-vec2(0.0,b))\\n          : length(p-vec2(-d,0.0))-r;\\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,o=e.uniforms,i=sl(n),a=i.content,u=i.uniforms,s=sl(r),c=s.content,f=s.uniforms;this.rawContentCache[t]={fs:c,uniforms:fl(fl(fl({},u),f),o),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),i=o.content,a=o.includeList,u=this.processModule(r,[],"fs"),s=u.content,c=u.includeList,f=s,l=il()(a.concat(c).concat(t)).reduce((function(t,n){return fl(fl({},t),e.rawContentCache[n].uniforms)}),{});return ll.test(s)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\\n precision highp float;\\n #else\\n precision mediump float;\\n#endif\\n"+s),this.moduleCache[t]={fs:f.trim(),uniforms:l,vs:i.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(hl,(function(t,o){var i=o.split(" ")[0].replace(/"/g,"");if(e.indexOf(i)>-1)return"";var a=r.rawContentCache[i][n];return e.push(i),r.processModule(a,e,n).content})),includeList:e}}}]),t}())||al,pl=new Lr.Container;Object(Lr.decorate)(Object(Lr.injectable)(),Yf.EventEmitter),pl.bind(Ur.IEventEmitter).to(Yf.EventEmitter);Zf()(pl,!1);function vl(){var t=new Lr.Container;return t.parent=pl,t.bind(Ur.Systems).to(Bf).inSingletonScope().whenTargetNamed(Ur.SceneGraphSystem),t.bind(Ur.Systems).to(io).inSingletonScope().whenTargetNamed(Ur.FrameGraphSystem),t.bind(Ur.Systems).to(jc).inSingletonScope().whenTargetNamed(Ur.MeshSystem),t.bind(Ur.Systems).to(Is).inSingletonScope().whenTargetNamed(Ur.GeometrySystem),t.bind(Ur.Systems).to(zs).inSingletonScope().whenTargetNamed(Ur.MaterialSystem),t.bind(Ur.Systems).to(kf).inSingletonScope().whenTargetNamed(Ur.RendererSystem),t.bind(Ur.ResourcePool).to(Qf).inSingletonScope(),t.bind(Ur.ConfigService).to(nl).inSingletonScope(),t.bind(Ur.InteractorService).to(rl).inSingletonScope(),t.bind(Ur.RenderPass).to(cf).inSingletonScope().whenTargetNamed(cf.IDENTIFIER),t.bind(Ur.RenderPass).to(ff).inSingletonScope().whenTargetNamed(ff.IDENTIFIER),t.bind(Ur.RenderPass).to(If).inSingletonScope().whenTargetNamed(If.IDENTIFIER),t.bind(Ur.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(Ur.RenderPass,e)}})),t}pl.bind(Ur.ShaderModuleService).to(dl).inSingletonScope(),pl.bind(Ur.NameComponentManager).toConstantValue(new Pr(el)),pl.bind(Ur.HierarchyComponentManager).toConstantValue(new Pr(Uf)),pl.bind(Ur.TransformComponentManager).toConstantValue(new Pr(zf)),pl.bind(Ur.MeshComponentManager).toConstantValue(new Pr(qs)),pl.bind(Ur.CullableComponentManager).toConstantValue(new Pr(Ws)),pl.bind(Ur.GeometryComponentManager).toConstantValue(new Pr(po)),pl.bind(Ur.MaterialComponentManager).toConstantValue(new Pr(Ls));var ml;n(173),n(99);!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(ml||(ml={}));n(174);var yl,gl,bl,_l,xl="undefined"!=typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(yl||(yl={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(gl||(gl={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(bl||(bl={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(_l||(_l={}));function wl(t){return void 0===t?0:t>360||t<-360?t%360:t}function El(t,e,n){return fc()(t)?i.fromValues(t,e,n):3===t.length?i.clone(t):i.fromValues(t[0],t[1],t[2])}var Sl,Tl,Al,Il,kl,Ol,Dl,Rl,Ml=function(){function t(e,n){Er()(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=o.clone(n.matrix),this.right=i.clone(n.right),this.up=i.clone(n.up),this.forward=i.clone(n.forward),this.position=i.clone(n.position),this.focalPoint=i.clone(n.focalPoint),this.distanceVector=i.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Tr()(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=o.copy(t.matrix,this.matrix),t.right=i.copy(t.right,this.right),t.up=i.copy(t.up,this.up),t.forward=i.copy(t.forward,this.forward),t.position=i.copy(t.position,this.position),t.focalPoint=i.copy(t.focalPoint,this.focalPoint),t.distanceVector=i.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ol||(Ol={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Dl||(Dl={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Rl||(Rl={}));var Cl,Nl,Pl,Gl,jl,Ll,Ul,Bl=Math.PI/180,Fl=180/Math.PI,zl=(Sl=Object(Lr.injectable)(),Tl=Object(Lr.inject)(Ur.InteractorService),Sl((Il=function(){function t(){Er()(this,t),this.matrix=o.create(),this.right=i.fromValues(1,0,0),this.up=i.fromValues(0,1,0),this.forward=i.fromValues(0,0,1),this.position=i.fromValues(0,0,1),this.focalPoint=i.fromValues(0,0,0),this.distanceVector=i.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,xr()(this,"interactor",kl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=o.create(),this.view=void 0,this.following=void 0,this.type=Ol.EXPLORING,this.trackingMode=Dl.DEFAULT,this.projectionMode=Rl.PERSPECTIVE,this.frustum=new sc,this.landmarks=[],this.landmarkAnimationID=void 0}return Tr()(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ol.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return o.invert(o.create(),this.matrix)}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,o,i){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=i,this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Rl.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,o.perspective(this.perspective,this.fov*Bl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){this.projectionMode=Rl.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,l=c-u,h=c+u,d=f+s,p=f-s;if(void 0!==this.view&&this.view.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(l+=v*this.view.offsetX)+v*this.view.width,p=(d-=m*this.view.offsetY)-m*this.view.height}return o.ortho(this.perspective,l,h,d,p,i,a),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r=i.fromValues(0,1,0);if(this.focalPoint=El(t,e,n),this.trackingMode===Dl.CINEMATIC){var a=i.subtract(i.create(),this.focalPoint,this.position);t=a[0],e=a[1],n=a[2];var u=i.length(a),s=Math.asin(e/u)*Fl,c=90+Math.atan2(n,t)*Fl,f=o.create();o.rotateY(f,f,c*Bl),o.rotateX(f,f,s*Bl),r=i.transformMat4(i.create(),[0,1,0],f)}return o.invert(this.matrix,o.lookAt(o.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=i.create();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ol.EXPLORING){t=wl(t),e=wl(e),n=wl(n);var r=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Bl),i=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Bl),a=u.setAxisAngle(u.create(),[0,0,1],n*Bl),s=u.multiply(u.create(),i,r);s=u.multiply(u.create(),s,a);var c=o.fromQuat(o.create(),s);o.translate(this.matrix,this.matrix,[0,0,-this.distance]),o.multiply(this.matrix,this.matrix,c),o.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=wl(e),this.relAzimuth=wl(t),this.relRoll=wl(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=El(t,e,0),r=i.clone(this.position);return i.add(r,r,i.scale(i.create(),this.right,n[0])),i.add(r,r,i.scale(i.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=i.clone(this.position),r=t*this.dollyingStep;return n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getDistance():this.type===Ol.TRACKING&&i.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new Ml(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new Ml(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o,a=r.getPosition(),u=r.getFocalPoint(),s=r.getRoll(),c=function t(r){void 0===o&&(o=r);var c,f=r-o,l=(1-Math.cos(f/n*Math.PI))/2,h=i.create(),d=i.create();if(i.lerp(h,e.focalPoint,u,l),i.lerp(d,e.position,a,l),c=e.roll*(1-l)+s*l,e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),!(i.dist(h,u)+i.dist(d,a)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),void e.interactor.connect();f<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=u.setAxisAngle(u.create(),[0,0,1],this.roll*Bl);o.identity(this.matrix),t=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.elevation*Bl),e=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.azimuth*Bl);var r=u.multiply(u.create(),e,t);r=u.multiply(u.create(),r,n);var i=o.fromQuat(o.create(),r);this.type===Ol.ORBITING||this.type===Ol.EXPLORING?(o.translate(this.matrix,this.matrix,this.focalPoint),o.multiply(this.matrix,this.matrix,i),o.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ol.TRACKING&&(o.translate(this.matrix,this.matrix,this.position),o.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=El(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){i.copy(this.right,El(a.transformMat4(a.create(),[1,0,0,0],this.matrix))),i.copy(this.up,El(a.transformMat4(a.create(),[0,1,0,0],this.matrix))),i.copy(this.forward,El(a.transformMat4(a.create(),[0,0,1,0],this.matrix))),i.normalize(this.right,this.right),i.normalize(this.up,this.up),i.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=i.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ol.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fl,this.azimuth=Math.atan2(-t,-n)*Fl):(this.elevation=-Math.asin(e/r)*Fl,this.azimuth=-Math.atan2(-t,-n)*Fl)}},{key:"_getPosition",value:function(){i.copy(this.position,El(a.transformMat4(a.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){i.transformMat3(this.distanceVector,[0,0,-this.distance],r.fromMat4(r.create(),this.matrix)),i.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=i.subtract(i.create(),this.focalPoint,this.position),this.distance=i.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),kl=Ir()(Il.prototype,"interactor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Il))||Al),Vl=n(22),Wl=n.n(Vl),Xl=n(13),Hl=n.n(Xl),ql=n(3);function Yl(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ql,Jl,$l,th,eh,nh,rh,oh,ih,ah,uh,sh,ch,fh,lh,hh,dh,ph,vh,mh,yh,gh,bh,_h,xh,wh,Eh,Sh,Th=(Cl=Object(Lr.injectable)(),Nl=Object(Lr.inject)(Ur.RenderEngine),Pl=Object(Lr.inject)(Ur.ConfigService),Cl((jl=function(){function t(){Er()(this,t),xr()(this,"engine",Ll,this),xr()(this,"configService",Ul,this),this.entity=Cr(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return Tr()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Zl({canvas:e||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=fc()(e)||Wl()(e)||Hl()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===bl.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=Rr()(Or.a.mark((function t(){var e,n,r=this,o=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=Rr()(Or.a.mark((function t(){var e,n,r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Zl({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?_l.WGSL:_l.GLSL450:_l.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===bl.StorageBuffer){var n=1;t.type===yl.FloatArray?n=1:t.type===yl.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Ll=Ir()(jl.prototype,"engine",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=Ir()(jl.prototype,"configService",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=jl))||Gl),Ah=(Ql=Object(Lr.injectable)(),Jl=Object(Lr.inject)(Ur.MeshComponentManager),$l=Object(Lr.inject)(Ur.CullableComponentManager),th=Object(Lr.inject)(Ur.TransformComponentManager),eh=Object(Lr.inject)(Ur.Systems),nh=Object(Lr.named)(Ur.SceneGraphSystem),Ql((fh=ch=function(){function t(){Er()(this,t),this.attributes={},this.config=void 0,xr()(this,"mesh",ih,this),xr()(this,"cullable",ah,this),xr()(this,"transform",uh,this),xr()(this,"sceneGraphSystem",sh,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Tr()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){return this.meshComponent.visible=t,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ch.POINT="point",ch.LINE="line",ch.GRID="grid",oh=fh,ih=Ir()(oh.prototype,"mesh",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=Ir()(oh.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=Ir()(oh.prototype,"transform",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Ir()(oh.prototype,"sceneGraphSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=oh))||rh),Ih=n(189),kh=n.n(Ih),Oh=function(){function t(e,n){Er()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,u=n.size,s=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:s||0},u&&(this.attribute.size=u)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Dh=(lh={},uo()(lh,Qu.POINTS,"points"),uo()(lh,Qu.LINES,"lines"),uo()(lh,Qu.LINE_LOOP,"line loop"),uo()(lh,Qu.LINE_STRIP,"line strip"),uo()(lh,Qu.TRIANGLES,"triangles"),uo()(lh,Qu.TRIANGLE_FAN,"triangle fan"),uo()(lh,Qu.TRIANGLE_STRIP,"triangle strip"),lh),Rh=(hh={},uo()(hh,Qu.STATIC_DRAW,"static"),uo()(hh,Qu.DYNAMIC_DRAW,"dynamic"),uo()(hh,Qu.STREAM_DRAW,"stream"),hh),Mh=(dh={},uo()(dh,Qu.BYTE,"int8"),uo()(dh,Qu.UNSIGNED_INT,"int16"),uo()(dh,Qu.INT,"int32"),uo()(dh,Qu.UNSIGNED_BYTE,"uint8"),uo()(dh,Qu.UNSIGNED_SHORT,"uint16"),uo()(dh,Qu.UNSIGNED_INT,"uint32"),uo()(dh,Qu.FLOAT,"float"),dh),Ch=(ph={},uo()(ph,Qu.ALPHA,"alpha"),uo()(ph,Qu.LUMINANCE,"luminance"),uo()(ph,Qu.LUMINANCE_ALPHA,"luminance alpha"),uo()(ph,Qu.RGB,"rgb"),uo()(ph,Qu.RGBA,"rgba"),uo()(ph,Qu.RGBA4,"rgba4"),uo()(ph,Qu.RGB5_A1,"rgb5 a1"),uo()(ph,Qu.RGB565,"rgb565"),uo()(ph,Qu.DEPTH_COMPONENT,"depth"),uo()(ph,Qu.DEPTH_STENCIL,"depth stencil"),ph),Nh=(vh={},uo()(vh,Qu.DONT_CARE,"dont care"),uo()(vh,Qu.NICEST,"nice"),uo()(vh,Qu.FASTEST,"fast"),vh),Ph=(mh={},uo()(mh,Qu.NEAREST,"nearest"),uo()(mh,Qu.LINEAR,"linear"),uo()(mh,Qu.LINEAR_MIPMAP_LINEAR,"mipmap"),uo()(mh,Qu.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),uo()(mh,Qu.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),uo()(mh,Qu.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),Gh=(yh={},uo()(yh,Qu.REPEAT,"repeat"),uo()(yh,Qu.CLAMP_TO_EDGE,"clamp"),uo()(yh,Qu.MIRRORED_REPEAT,"mirror"),yh),jh=(gh={},uo()(gh,Qu.NONE,"none"),uo()(gh,Qu.BROWSER_DEFAULT_WEBGL,"browser"),gh),Lh=(bh={},uo()(bh,Qu.NEVER,"never"),uo()(bh,Qu.ALWAYS,"always"),uo()(bh,Qu.LESS,"less"),uo()(bh,Qu.LEQUAL,"lequal"),uo()(bh,Qu.GREATER,"greater"),uo()(bh,Qu.GEQUAL,"gequal"),uo()(bh,Qu.EQUAL,"equal"),uo()(bh,Qu.NOTEQUAL,"notequal"),bh),Uh=(_h={},uo()(_h,Qu.FUNC_ADD,"add"),uo()(_h,Qu.MIN_EXT,"min"),uo()(_h,Qu.MAX_EXT,"max"),uo()(_h,Qu.FUNC_SUBTRACT,"subtract"),uo()(_h,Qu.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_h),Bh=(xh={},uo()(xh,Qu.ZERO,"zero"),uo()(xh,Qu.ONE,"one"),uo()(xh,Qu.SRC_COLOR,"src color"),uo()(xh,Qu.ONE_MINUS_SRC_COLOR,"one minus src color"),uo()(xh,Qu.SRC_ALPHA,"src alpha"),uo()(xh,Qu.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),uo()(xh,Qu.DST_COLOR,"dst color"),uo()(xh,Qu.ONE_MINUS_DST_COLOR,"one minus dst color"),uo()(xh,Qu.DST_ALPHA,"dst alpha"),uo()(xh,Qu.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),uo()(xh,Qu.CONSTANT_COLOR,"constant color"),uo()(xh,Qu.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),uo()(xh,Qu.CONSTANT_ALPHA,"constant alpha"),uo()(xh,Qu.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),uo()(xh,Qu.SRC_ALPHA_SATURATE,"src alpha saturate"),xh),Fh=(wh={},uo()(wh,Qu.NEVER,"never"),uo()(wh,Qu.ALWAYS,"always"),uo()(wh,Qu.LESS,"less"),uo()(wh,Qu.LEQUAL,"lequal"),uo()(wh,Qu.GREATER,"greater"),uo()(wh,Qu.GEQUAL,"gequal"),uo()(wh,Qu.EQUAL,"equal"),uo()(wh,Qu.NOTEQUAL,"notequal"),wh),zh=(Eh={},uo()(Eh,Qu.ZERO,"zero"),uo()(Eh,Qu.KEEP,"keep"),uo()(Eh,Qu.REPLACE,"replace"),uo()(Eh,Qu.INVERT,"invert"),uo()(Eh,Qu.INCR,"increment"),uo()(Eh,Qu.DECR,"decrement"),uo()(Eh,Qu.INCR_WRAP,"increment wrap"),uo()(Eh,Qu.DECR_WRAP,"decrement wrap"),Eh),Vh=(Sh={},uo()(Sh,Qu.FRONT,"front"),uo()(Sh,Qu.BACK,"back"),Sh),Wh=function(){function t(e,n){Er()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=e.buffer({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE]})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Xh=n(10),Hh=n.n(Xh);function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kh=0,Zh=function(){function t(e,n){var r=this;Er()(this,t),this.reGl=e,this.context=n,this.entity=Cr(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,i=t.data,a=t.isReferer,u=t.storageClass;if(u===bl.StorageBuffer){if(a)r.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,i);var s=r.textureCache[e],c=s.textureWidth,f=s.isOutput;o["".concat(e,"Size")]=[c,c],f&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,i)))}o[e]=function(){return r.textureCache[e].texture}}else if(u===bl.Uniform){if(i&&(Array.isArray(i)||Wl()(i))&&i.length>16)throw new Error("invalid data type ".concat(n));o[e]=function(){return t.data}}}));var i=this.getOuputDataTexture(),a=i.textureWidth,u=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=u,this.context.output.textureSize=[a,a];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\\nattribute vec2 a_TexCoord;\\n\\nvarying vec2 v_TexCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 1.0);\\n  v_TexCoord = a_TexCoord;\\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}var e;return Tr()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,o=n.elementsPerTexel,i=n.typedArrayConstructor,a=void 0===i?Float32Array:i,u=[],4!==o)for(s=0;s<e.length;s+=4)1===o?u.push(e[s]):2===o?u.push(e[s],e[s+1]):u.push(e[s],e[s+1],e[s+2]);else u=e;return t.abrupt("return",new a(u.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),o=r.texture,i=r.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Yh(Yh({},t),{},{id:Kh++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===yl.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var a=n.length,u=Math.ceil(a/r),s=Math.ceil(Math.sqrt(u)),c=s*s;u<c&&o.push.apply(o,Hh()(new Array(4*(c-u)).fill(0)));var f=this.reGl.texture({width:s,height:s,data:o,type:"float"});return{id:Kh++,data:o,originalDataLength:a,typedArrayConstructor:Wl()(n)?n.constructor:void 0,textureWidth:s,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Qh=function(){function t(e,n){Er()(this,t),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=e.elements({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE],count:a})}return Tr()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Jh=function(){function t(e,n){Er()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(a)&&(u.colors=a.map((function(t){return t.get()}))),i&&"boolean"!=typeof i&&(u.color=i.get()),this.framebuffer=e.framebuffer(u)}return Tr()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),$h=n(51),td=n.n($h),ed=n(101),nd=n.n(ed);function rd(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,o){if(null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Wl()(n)||""===n||"resize"in n)return void(r["".concat(o&&o+".").concat(e)]=n);nd()(n)&&Object.keys(n).forEach((function(i){t(i,n[i],r,"".concat(o&&o+".").concat(e))}));Array.isArray(n)&&n.forEach((function(n,i){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))}))}))}(n,t[n],e,"")})),e}function od(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?od(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ad,ud,sd=function(){function t(e,n){Er()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,i=n.attributes,a=n.uniforms,u=n.primitive,s=n.count,c=n.elements,f=n.depth,l=n.blend,h=n.stencil,d=n.cull,p=n.instances,v=n.scissor,m=n.viewport,y={};a&&(this.uniforms=rd(a),Object.keys(a).forEach((function(t){y[t]=e.prop(t)})));var g={};Object.keys(i).forEach((function(t){g[t]=i[t].get()}));var b={attributes:g,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(o),uniforms:y,vert:r,primitive:Dh[void 0===u?Qu.TRIANGLES:u]};p&&(b.instances=p),s&&(b.count=s),c&&(b.elements=c.get()),v&&(b.scissor=v),m&&(b.viewport=m),this.initDepthDrawParams({depth:f},b),this.initBlendDrawParams({blend:l},b),this.initStencilDrawParams({stencil:h},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return Tr()(t,[{key:"addUniforms",value:function(t){this.uniforms=id(id({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=id(id({},this.uniforms),rd(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=td()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Lh[n.func||Qu.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,i=n.equation,a=n.color,u=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:Bh[o&&o.srcRGB||Qu.SRC_ALPHA],srcAlpha:Bh[o&&o.srcAlpha||Qu.SRC_ALPHA],dstRGB:Bh[o&&o.dstRGB||Qu.ONE_MINUS_SRC_ALPHA],dstAlpha:Bh[o&&o.dstAlpha||Qu.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Uh[i&&i.rgb||Qu.FUNC_ADD],alpha:Uh[i&&i.alpha||Qu.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,i=void 0===o?-1:o,a=n.func,u=void 0===a?{cmp:Qu.ALWAYS,ref:0,mask:-1}:a,s=n.opFront,c=void 0===s?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:s,f=n.opBack,l=void 0===f?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:f;e.stencil={enable:!!r,mask:i,func:id(id({},u),{},{cmp:Fh[u.cmp]}),opFront:{fail:zh[c.fail],zfail:zh[c.zfail],zpass:zh[c.zpass]},opBack:{fail:zh[l.fail],zfail:zh[l.zfail],zpass:zh[l.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,i=void 0===o?Qu.BACK:o;e.cull={enable:!!r,face:Vh[i]}}}}]),t}(),cd=function(){function t(e,n){Er()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=void 0===o?Qu.UNSIGNED_BYTE:o,a=n.width,u=n.height,s=n.flipY,c=void 0!==s&&s,f=n.format,l=void 0===f?Qu.RGBA:f,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,v=void 0===p?Qu.CLAMP_TO_EDGE:p,m=n.wrapT,y=void 0===m?Qu.CLAMP_TO_EDGE:m,g=n.aniso,b=void 0===g?0:g,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,T=void 0===S?Qu.NEAREST:S,A=n.min,I=void 0===A?Qu.NEAREST:A,k=n.colorSpace,O=void 0===k?Qu.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=u;var D={width:a,height:u,type:Mh[i],format:Ch[l],wrapS:Gh[v],wrapT:Gh[y],mag:Ph[T],min:Ph[I],alignment:x,flipY:c,colorSpace:jh[O],premultiplyAlpha:E,aniso:b};r&&(D.data=r),"number"==typeof d?D.mipmap=Nh[d]:"boolean"==typeof d&&(D.mipmap=d),this.texture=e.texture(D)}return Tr()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),fd=Object(Lr.injectable)()(ad=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new sd(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Oh(e.gl,t)},this.createBuffer=function(t){return new Wh(e.gl,t)},this.createElements=function(t){return new Qh(e.gl,t)},this.createTexture2D=function(t){return new cd(e.gl,t)},this.createFramebuffer=function(t){return new Jh(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Zh(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,u={color:n,depth:r,stencil:o};u.framebuffer=null===a?a:a.get(),e.gl.clear(u)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qu.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qu.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,o,i),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return Tr()(t,[{key:"init",value:(e=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){kh()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||ad;function ld(t,e,n,r){if("undefined"!=typeof window){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),r&&(i.id=r),i.onload=function(){e&&e()},i.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},o.appendChild(i)}}function hd(t,e){return new Promise((function(e,n){ld(t,(function(){e()}),(function(t,e){n(e)}))}))}var dd=function(){return pd.apply(this,arguments)};function pd(){return(pd=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ud){t.next=2;break}return t.abrupt("return",ud);case 2:return t.next=4,hd("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ud=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",ud);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var vd,md,yd,gd,bd,_d,xd,wd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,o=r.buffer,i=r.offset,a=r.stride,u=r.normalized,s=r.size,c=r.divisor,f=r.arrayStride,l=r.attributes,h=r.stepMode;this.buffer=o,this.attribute={buffer:o.get(),offset:i||0,stride:a||0,normalized:u||!1,divisor:c||0,arrayStride:f||0,attributes:l,stepMode:h||"vertex"},s&&(this.attribute.size=s)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ed=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,o=r.data,i=r.usage;r.type;this.buffer=this.createBuffer(o instanceof Array?new Float32Array(o):o,i||ql.BufferUsage.Vertex|ql.BufferUsage.CopyDst)}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},o=this.engine.device.createBuffer(r);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,e,n){(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Sd=n(52),Td=n.n(Sd),Ad=function(){function t(e,n){Er()(this,t),this.engine=e,this.context=n,this.entity=Cr(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return Tr()(t,[{key:"init",value:(r=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===bl.StorageBuffer})),o=this.context.uniforms.filter((function(t){return t.storageClass===bl.Uniform})),i=o.length?1:0,this.bindGroupEntries=[],i&&(a=0,u=[],o.forEach((function(t){if(fc()(t.data))s.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,u.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var o=4-r;if(n>1&&n<=o)2===n&&(3===o&&(a+=4,u.push(0)),u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var i=0;i<o;i++)a+=4,u.push(0);u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Ed(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;Td()(t.data)||t.type!==yl.Vector4FloatArray&&t.type!==yl.FloatArray||(t.name===s.context.output.name?(e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(o=e.gpuBuffer)){t.next=16;break}return i=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=this.engine.device.createCommandEncoder()).copyBufferToBuffer(o,0,a,0,i),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([u.finish()]),t.next=12,a.mapAsync(ql.MapMode.Read);case 12:return s=a.getMappedRange(),c=new r(s.slice(0)),a.unmap(),t.abrupt("return",c);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Hh()(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var o=this.engine.device.createCommandEncoder(),i=t.context.output,a=i.length*i.typedArrayConstructor.BYTES_PER_ELEMENT;o.copyBufferToBuffer(r.get(),0,n.get(),0,a),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e){var n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:xl}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Id=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,o=r.data,i=(r.usage,r.type,r.count);this.indexCount=i||0,this.buffer=new Ed(e,{data:o instanceof Array?new Uint16Array(o):o,usage:ql.BufferUsage.Index|ql.BufferUsage.CopyDst})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,o=(r.width,r.height,r.color),i=(r.colors,r.depth);r.stencil;o&&(this.colorTexture=o),i&&(this.depthTexture=i)}return Tr()(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,o=t.height;r===this.width&&o===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:o}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:o}));this.width=r,this.height=o}}]),t}(),Od=(vd={},uo()(vd,Qu.POINTS,ql.PrimitiveTopology.PointList),uo()(vd,Qu.LINES,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_LOOP,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_STRIP,ql.PrimitiveTopology.LineStrip),uo()(vd,Qu.TRIANGLES,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_FAN,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_STRIP,ql.PrimitiveTopology.TriangleStrip),vd),Dd=(md={},uo()(md,Qu.NEVER,ql.CompareFunction.Never),uo()(md,Qu.ALWAYS,ql.CompareFunction.Always),uo()(md,Qu.LESS,ql.CompareFunction.Less),uo()(md,Qu.LEQUAL,ql.CompareFunction.LessEqual),uo()(md,Qu.GREATER,ql.CompareFunction.Greater),uo()(md,Qu.GEQUAL,ql.CompareFunction.GreaterEqual),uo()(md,Qu.EQUAL,ql.CompareFunction.Equal),uo()(md,Qu.NOTEQUAL,ql.CompareFunction.NotEqual),md),Rd=(yd={},uo()(yd,Qu.FUNC_ADD,ql.BlendOperation.Add),uo()(yd,Qu.MIN_EXT,ql.BlendOperation.Min),uo()(yd,Qu.MAX_EXT,ql.BlendOperation.Max),uo()(yd,Qu.FUNC_SUBTRACT,ql.BlendOperation.Subtract),uo()(yd,Qu.FUNC_REVERSE_SUBTRACT,ql.BlendOperation.ReverseSubtract),yd),Md=(gd={},uo()(gd,Qu.ZERO,ql.BlendFactor.Zero),uo()(gd,Qu.ONE,ql.BlendFactor.One),uo()(gd,Qu.SRC_COLOR,ql.BlendFactor.SrcColor),uo()(gd,Qu.ONE_MINUS_SRC_COLOR,ql.BlendFactor.OneMinusSrcColor),uo()(gd,Qu.SRC_ALPHA,ql.BlendFactor.SrcAlpha),uo()(gd,Qu.ONE_MINUS_SRC_ALPHA,ql.BlendFactor.OneMinusSrcAlpha),uo()(gd,Qu.DST_COLOR,ql.BlendFactor.DstColor),uo()(gd,Qu.ONE_MINUS_DST_COLOR,ql.BlendFactor.OneMinusDstColor),uo()(gd,Qu.DST_ALPHA,ql.BlendFactor.DstAlpha),uo()(gd,Qu.ONE_MINUS_DST_ALPHA,ql.BlendFactor.OneMinusDstAlpha),uo()(gd,Qu.CONSTANT_COLOR,ql.BlendFactor.BlendColor),uo()(gd,Qu.ONE_MINUS_CONSTANT_COLOR,ql.BlendFactor.OneMinusBlendColor),uo()(gd,Qu.SRC_ALPHA_SATURATE,ql.BlendFactor.SrcAlphaSaturated),gd),Cd=(bd={},uo()(bd,Qu.ALPHA,"r8unorm"),uo()(bd,Qu.RGBA,"rgba8unorm"),uo()(bd,Qu.DEPTH_COMPONENT,"depth32float"),uo()(bd,Qu.DEPTH_STENCIL,"depth24plus-stencil8"),bd),Nd=(_d={},uo()(_d,Qu.NEAREST,"nearest"),uo()(_d,Qu.LINEAR,"linear"),_d),Pd=(xd={},uo()(xd,Qu.REPEAT,"repeat"),uo()(xd,Qu.CLAMP_TO_EDGE,"clamp-to-edge"),uo()(xd,Qu.MIRRORED_REPEAT,"mirror-repeat"),xd);function Gd(t){var e=t.cull;return e&&e.enable?e.face?e.face===Qu.FRONT?ql.CullMode.Front:ql.CullMode.Back:void 0:ql.CullMode.None}function jd(t){var e=t.depth,n=(t.stencil,{compare:ql.CompareFunction.Always,depthFailOp:ql.StencilOperation.Keep,failOp:ql.StencilOperation.Keep,passOp:ql.StencilOperation.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:Dd[(null==e?void 0:e.func)||Qu.ALWAYS],format:ql.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ld(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Md[n&&n.func&&n.func.srcAlpha||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstAlpha||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.alpha||Qu.FUNC_ADD]},colorBlend:{srcFactor:Md[n&&n.func&&n.func.srcRGB||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstRGB||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.rgb||Qu.FUNC_ADD]},writeMask:ql.ColorWrite.All}]}function Ud(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ud(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fd(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];e+=u.length}for(var s=new t(e),c=0,f=0,l=r;f<l.length;f++){var h=l[f];s.set(h,c),c+=h.length}return s}var zd,Vd,Wd,Xd,Hd,qd,Yd,Kd,Zd,Qd,Jd,$d,tp=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m,y=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,o=e.attributes,i=e.uniforms,a=e.primitive,e.count,u=e.elements,s=e.depth,c=e.blend,f=e.stencil,l=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,d=h.vertexStage,p=h.fragmentStage,i&&this.buildUniformBindGroup(i),u&&(this.indexBuffer=u.get(),this.indexCount=u.indexCount),v={vertexBuffers:Object.keys(o).map((function(t,e){var n=o[t],r=n.get(),i=r.arrayStride,a=r.stepMode,u=r.attributes;return y.attributeCache[t]=n,{arrayStride:i,stepMode:a,attributes:u}}))},m={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Od[a||Qu.TRIANGLES],rasterizationState:Bd(Bd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Gd({cull:l})}),depthStencilState:jd({depth:s,stencil:f}),colorStates:Ld({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:v},this.renderPipeline=this.engine.device.createRenderPipeline(m);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=Bd(Bd({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=Bd(Bd({},this.uniforms),rd(t.uniforms||{})),o=[];Object.keys(r).forEach((function(t){var n=td()(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var i,a=null===(i=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===i?void 0:i.offset;Td()(a)||e.uniformBuffer.subData({data:r[t],offset:a})}else{var u,s=null===(u=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===u?void 0:u.offset;if(!Td()(s)){var c=r[t].get(),f=c.color||c,l=f.texture,h=f.sampler;h&&(o.push({binding:s,resource:h}),s++),o.push({binding:s,resource:l.createView()})}}})),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ql.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e,n,r){var o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="#version 450\\n",i=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",o);case 6:return i=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",o);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(i,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:xl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:xl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ql.FrontFace.CCW,cullMode:ql.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=Fd.apply(void 0,[Float32Array].concat(Hh()(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),o=[],i=!1;r.length&&(i=!0,o.push({binding:0,visibility:ql.ShaderStage.Fragment|ql.ShaderStage.Vertex,type:ql.BindingType.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(i?1:0)}),o.push({binding:2*n+(i?1:0),visibility:ql.ShaderStage.Fragment,type:ql.BindingType.Sampler},{binding:2*n+(i?1:0)+1,visibility:ql.ShaderStage.Fragment,type:ql.BindingType.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),i&&(this.uniformBuffer=new Ed(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}))}}]),t}(),ep=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Tr()(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&Qu.UNSIGNED_BYTE,t.width),r=t.height,o=(t.flipY,t.format),i=void 0===o?Qu.RGBA:o,a=(t.mipmap,t.wrapS),u=void 0===a?Qu.CLAMP_TO_EDGE:a,s=t.wrapT,c=void 0===s?Qu.CLAMP_TO_EDGE:s,f=t.aniso,l=void 0===f?0:f,h=(t.alignment,t.premultiplyAlpha,t.mag),d=void 0===h?Qu.NEAREST:h,p=t.min,v=void 0===p?Qu.NEAREST:p,m=t.colorSpace,y=(void 0===m&&Qu.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ql.TextureDimension.E2d,format:Cd[i],usage:y||ql.TextureUsage.Sampled|ql.TextureUsage.CopyDst}),(!y||y&ql.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Pd[u],addressModeV:Pd[c],addressModeW:Pd[u],magFilter:Nd[d],minFilter:Nd[v],maxAnisotropy:l}))}}]),t}(),np=Object(Lr.injectable)()(zd=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!o)):(e.mainColorAttachments[0].loadValue=n||ql.LoadOp.Load,e.mainDepthAttachment.depthLoadValue=r||ql.LoadOp.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:ql.LoadOp.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new tp(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new wd(e,t)},this.createBuffer=function(t){return new Ed(e,t)},this.createElements=function(t){return new Id(e,t)},this.createTexture2D=function(t){return new ep(e,t)},this.createFramebuffer=function(t){return new kd(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:ql.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ql.TextureAspect.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Ad(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||o!==e.cachedViewport.width||i!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:o,height:i},e.getCurrentRenderPass().setViewport(n,r,o,i,0,1)}}else e.transientViewport={x:n,y:r,width:o,height:i}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return Tr()(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),xl?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=Rr()(Or.a.mark((function t(){var e,n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dd();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(xl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ql.TextureUsage.OutputAttachment|ql.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:ql.TextureFormat.BGRA8Unorm,usage:ql.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:xl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:xl?"depth32float-stencil8":ql.TextureFormat.Depth24PlusStencil8,usage:ql.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:xl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ql.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=null===(r=t.get().color)||void 0===r?void 0:r.texture;u&&(i=u.createView(this.currentRenderTargetViewDescriptor));var s,c=null===(o=t.get().depth)||void 0===o?void 0:o.texture;c&&(s=c.createView());var f=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:i,loadValue:null!==e?e:ql.LoadOp.Load,storeOp:ql.StoreOp.Store}],depthStencilAttachment:c&&s?{attachment:s,depthLoadValue:n?this.clearDepthValue:ql.LoadOp.Load,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ql.LoadOp.Load,stencilStoreOp:ql.StoreOp.Store}:void 0});this.currentRenderPass=f,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||zd;function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var op=(Vd=Object(Lr.injectable)(),Wd=Object(Lr.inject)(Ur.Systems),Xd=Object(Lr.named)(Ur.MaterialSystem),Hd=Object(Lr.inject)(Ur.Systems),qd=Object(Lr.named)(Ur.GeometrySystem),Yd=Object(Lr.inject)(Ur.ShaderModuleService),Vd((Zd=function(t){Wr()(n,t);var e=rp(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Qd,co()(t)),xr()(t,"geometrySystem",Jd,co()(t)),xr()(t,"shaderModuleService",$d,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\\n\\nvarying vec3 v_Position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nvoid main() {\\n  v_Position = a_Position;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\\n}",fs:"// generate grid, borrow from clay.gl viewer\\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\\n#extension GL_OES_standard_derivatives : enable\\n\\nvarying vec3 v_Position;\\n// varying vec3 v_Normal;\\n\\nuniform float u_GridSize : 5;\\nuniform float u_GridSize2 : .5;\\nuniform vec4 u_GridColor : [0, 0, 0, 1];\\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\\nuniform bool u_GridEnabled : true;\\n\\n// uniform vec3 u_LightDirection;\\n// uniform vec3 u_LightColor;\\n// uniform vec3 u_Camera;\\n\\nvoid main() {\\n  // vec3 n = v_Normal;\\n  // vec3 l = normalize(u_LightDirection);\\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n\\n  gl_FragColor = vec4(1.);\\n\\n  if (u_GridEnabled) {\\n    float wx = v_Position.x;\\n    float wz = v_Position.z;\\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\\n\\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\\n\\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\\n    // if (v0 > 0.1) {\\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\\n    // }\\n    // else {\\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\\n    // }\\n  }\\n\\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\\n\\n  // gl_FragColor.rgb *= diffuseColor;\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(o);var i=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(i),o.setCull({enable:!1,face:Qu.BACK}).setDepth({enable:!0,func:Qu.LESS}),o.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),i.setIndex([0,3,2,2,1,0]),i.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(Ah),Qd=Ir()(Zd.prototype,"materialSystem",[Wd,Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Ir()(Zd.prototype,"geometrySystem",[Hd,qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=Ir()(Zd.prototype,"shaderModuleService",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=Zd))||Kd),ip=n(53),ap=n(36);function up(t,e,n,r,o){sp(e,r,-o),sp(e,r,o),t.push(n),t.push(n)}function sp(t,e,n){t.push([[e[0],e[1]],n])}var cp,fp,lp,hp,dp,pp,vp,mp,yp,gp,bp;function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var xp,wp,Ep,Sp,Tp,Ap,Ip,kp,Op,Dp,Rp,Mp=(cp=Object(Lr.injectable)(),fp=Object(Lr.inject)(Ur.Systems),lp=Object(Lr.named)(Ur.MaterialSystem),hp=Object(Lr.inject)(Ur.Systems),dp=Object(Lr.named)(Ur.GeometrySystem),pp=Object(Lr.inject)(Ur.ShaderModuleService),cp((mp=function(t){Wr()(n,t);var e=_p(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",yp,co()(t)),xr()(t,"geometrySystem",gp,co()(t)),xr()(t,"shaderModuleService",bp,co()(t)),t.vertexCount=void 0,t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var o=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(o),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\\nattribute vec4 a_color;\\nattribute float a_line_miter;\\nattribute vec2 a_line_normal;\\nattribute float a_counters;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform float u_thickness : 0.02;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n  v_color = a_color;\\n  v_counters = a_counters;\\n\\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\\n\\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\\n\\n  v_normal = vec2(normal * sign(a_line_miter));\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\\n}\\n",fs:"uniform float u_dash_array : 0.02;\\nuniform float u_dash_offset : 0;\\nuniform float u_dash_ratio : 0;\\nuniform float u_thickness : 0.02;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\\n\\n    gl_FragColor = v_color;\\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,o=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],o=[0,0],i=[0,0],a=[0,0],u=-1,s=!1,c=null,f=Object(ip.create)(),l=n||0,h=[],d=[],p=[],v=[0,0];e&&(t=t.slice()).push(t[0]);for(var m=t.length,y=1;y<m;y++){var g=l,b=t[y-1],_=t[y],x=y<t.length-1?t[y+1]:null;if(v.push(y/m,y/m),Object(ap.direction)(r,_,b),c||(c=[0,0],Object(ap.normal)(c,r)),s||(s=!0,up(d,h,b,c,1)),p.push([g+0,g+1,g+2]),x){Object(ap.direction)(o,x,_);var w=Object(ap.computeMiter)(i,a,r,o,1),E=Object(ip.dot)(i,c)<0?-1:1,S=w>3;if(!isFinite(w)){Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2,u=E;continue}S?(w=3,v.push(y/m),sp(h,c,-E),d.push(_),sp(h,a,w*E),d.push(_),p.push(u!==-E?[g,g+2,g+3]:[g+2,g+1,g+3]),p.push([g+2,g+3,g+4]),Object(ap.normal)(f,o),Object(ip.copy)(c,f),sp(h,c,-E),d.push(_),l+=3):(up(d,h,_,a,w),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),E=-1,Object(ip.copy)(c,a),l+=2),u=E}else Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:v}}(this.config.points,!1),u=a.normals,s=a.attrIndex,c=a.attrPos,f=a.attrCounters,l=c.length;this.vertexCount=l;var h=this.geometrySystem.createBufferGeometry({vertexCount:l});this.setMaterial(i),this.setGeometry(h),i.setCull({enable:!1,face:Qu.BACK}).setUniform(o),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];u.forEach((function(t){var e=t[0],n=t[1];d.push([e[0],e[1]]),p.push(n)})),h.setIndex(s.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),h.setAttribute("a_pos",Float32Array.from(c.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var v=new Array(l).fill(void 0).map((function(){return Hh()(t.config.color)})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);h.setAttribute("a_color",Float32Array.from(v),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(f),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(Ah),yp=Ir()(mp.prototype,"materialSystem",[fp,lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=Ir()(mp.prototype,"geometrySystem",[hp,dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Ir()(mp.prototype,"shaderModuleService",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=mp))||vp);function Cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Pp=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Gp,jp,Lp,Up,Bp,Fp,zp,Vp,Wp,Xp=(xp=Object(Lr.injectable)(),wp=Object(Lr.inject)(Ur.Systems),Ep=Object(Lr.named)(Ur.MaterialSystem),Sp=Object(Lr.inject)(Ur.Systems),Tp=Object(Lr.named)(Ur.GeometrySystem),Ap=Object(Lr.inject)(Ur.ShaderModuleService),xp((kp=function(t){Wr()(n,t);var e=Np(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Op,co()(t)),xr()(t,"geometrySystem",Dp,co()(t)),xr()(t,"shaderModuleService",Rp,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\\nattribute vec4 color;\\nattribute float shape;\\nattribute vec2 offset;\\nattribute float size;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nuniform float u_stroke_width : 0.01;\\nuniform float u_device_pixel_ratio;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include "picking"\\n\\nvoid main() {\\n  v_color = color;\\n  v_radius = size;\\n\\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\\n\\n  // construct point coords\\n  v_data = vec4(position, antialiasblur, shape);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix\\n    * vec4(position * size + offset, 0.0, 1.0);\\n\\n  setPickingColor(a_PickingColor);\\n}',fs:"uniform float u_blur : 0.05;\\nuniform float u_opacity : 0.7;\\nuniform float u_stroke_width : 0.01;\\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\\nuniform float u_stroke_opacity : 1;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include \\"sdf2d\\"\\n#pragma include \\"picking\\"\\n\\nvoid main() {\\n  int shape = int(floor(v_data.w + 0.5));\\n\\n  float antialiasblur = v_data.z;\\n  float antialiased_blur = -max(u_blur, antialiasblur);\\n  float r = v_radius / (v_radius + u_stroke_width);\\n\\n  float outer_df;\\n  float inner_df;\\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\\n  // if (shape == 0) {\\n    outer_df = sdCircle(v_data.xy, 1.0);\\n    inner_df = sdCircle(v_data.xy, r);\\n  // } else if (shape == 1) {\\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\\n  // } else if (shape == 2) {\\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\\n  //   inner_df = sdBox(v_data.xy, vec2(r));\\n  // } else if (shape == 3) {\\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 4) {\\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 5) {\\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\\n  //   inner_df = sdOctogon(v_data.xy, r);\\n  // } else if (shape == 6) {\\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\\n  // } else if (shape == 7) {\\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\\n  // } else if (shape == 8) {\\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\\n  // }\\n\\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\\n\\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\\n    antialiased_blur,\\n    0.0,\\n    inner_df\\n  );\\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\\n\\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\\n\\n  gl_FragColor = filterColor(gl_FragColor);\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Qu.SRC_ALPHA,dstRGB:Qu.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});o.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cp(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var i=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:i.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(i.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(i.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(i.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(i.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(i.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(i.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(o),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,o,i,a,u;(r=e.instancedPickingColors).push.apply(r,Hh()([(u=t.id||n)+1&255,u+1>>8&255,u+1>>8>>8&255])),e.instancedShapes.push(Pp.indexOf(t.shape||"circle")),(o=e.instancedColors).push.apply(o,Hh()(t.color||[1,0,0,1])),(i=e.instancedOffsets).push.apply(i,Hh()(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Hh()(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}(Ah),Op=Ir()(kp.prototype,"materialSystem",[wp,Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Ir()(kp.prototype,"geometrySystem",[Sp,Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=Ir()(kp.prototype,"shaderModuleService",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=kp))||Ip);function Hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yp,Kp,Zp,Qp,Jp,$p,tv,ev,nv,rv,ov,iv,av=(Gp=Object(Lr.injectable)(),jp=Object(Lr.inject)(Ur.RenderEngine),Lp=Object(Lr.inject)(Ur.ShaderModuleService),Up=Object(Lr.inject)(Ur.ConfigService),Gp((Fp=function(){function t(){Er()(this,t),xr()(this,"engine",zp,this),xr()(this,"shaderModule",Vp,this),xr()(this,"configService",Wp,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),e=this.container.getAll(Ur.Systems),!(n=this.configService.get()).canvas){t.next=25;break}return t.next=6,this.engine.init({canvas:n.canvas,swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:r=Hp(e),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=16;break}if(!(i=o.value).initialize){t.next=14;break}return t.next=14,i.initialize();case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:this.inited=!0;case 25:case"end":return t.stop()}}),t,this,[[7,18,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(Ur.Systems),n=s.length,r=new Array(n),o=0;o<n;o++)r[o]=s[o];i=Hp(e),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=17;break}if(!(u=a.value).execute){t.next=15;break}return t.next=15,u.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),zp=Ir()(Fp.prototype,"engine",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=Ir()(Fp.prototype,"shaderModule",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Ir()(Fp.prototype,"configService",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=Fp))||Bp),uv=Object(Lr.injectable)()(Yp=function(){function t(){Er()(this,t),this.entities=[]}return Tr()(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||Yp,sv=(Kp=Object(Lr.injectable)(),Zp=Object(Lr.inject)(Ur.Systems),Qp=Object(Lr.named)(Ur.RendererSystem),Kp(($p=function(){function t(){Er()(this,t),xr()(this,"rendererSystem",tv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Tr()(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),tv=Ir()($p.prototype,"rendererSystem",[Zp,Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=$p))||Jp);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lv=(ev=Object(Lr.injectable)(),nv=Object(Lr.inject)(Ur.ConfigService),ev((ov=function(){function t(){Er()(this,t),xr()(this,"configService",iv,this),this.container=void 0}var e;return Tr()(t,[{key:"getEngine",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(Ur.RenderEngine),n=this.configService.get(),r=n.canvas,o=n.engineOptions,t.next=4,e.init(fv({canvas:r||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},o));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(Ur.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(Ur.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Cr()}},{key:"createScene",value:function(){return this.container.get(uv)}},{key:"createCamera",value:function(){return this.container.get(zl)}},{key:"createView",value:function(){return this.container.get(sv)}},{key:"createRenderable",value:function(t,e,n){var r=e?this.container.getNamed(Ur.Renderable,e):this.container.get(Ah);return r.setConfig(n||{}),r.setEntity(t),r}},{key:"createBoxGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBox(t)}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(Th);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(av);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(Ur.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(Ur.RenderEngine).destroy(),this.container.get(Ur.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vl(),r=navigator.gpu?np:fd;n.isBound(Ur.RenderEngine)||n.bind(Ur.RenderEngine).to(r).inSingletonScope(),n.bind(av).toSelf(),n.bind(Th).toSelf(),n.bind(Ah).toSelf(),n.bind(sv).toSelf(),n.bind(zl).toSelf(),n.bind(uv).toSelf(),n.bind(t).toSelf(),n.bind(Ur.Renderable).to(Xp).whenTargetNamed(Ah.POINT),n.bind(Ur.Renderable).to(Mp).whenTargetNamed(Ah.LINE),n.bind(Ur.Renderable).to(op).whenTargetNamed(Ah.GRID);var o=n.get(t);return o.setContainer(n),o.setConfig(e),o}}]),t}(),iv=Ir()(ov.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rv=ov))||rv),hv=function(t,e){return t?y(t)?function(){return t}:t:function(){return e||1}},dv=function(t,e){var n=[],r=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var u=e[i];r[o[u.source]].push(o[u.target]),r[o[u.target]].push(o[u.source])}var s=0;for(i=0;i<t.length;i++){var c=n.length,f=r[i],l=f.length;n[4*i+2]=c,n[4*i+3]=f.length,s=Math.max(s,f.length);for(var h=0;h<l;++h){var d=f[h];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:s,array:new Float32Array(n)}},pv=function(t,e,n,r){var o=[],i=[],a={},u=0;for(u=0;u<t.length;u++){var s=t[u];a[s.id]=u,o.push(s.x),o.push(s.y),o.push(0),o.push(0),i.push([])}for(u=0;u<e.length;u++){var c=e[u];i[a[c.source]].push(a[c.target]),i[a[c.source]].push(n(c)),i[a[c.source]].push(r(c)),i[a[c.source]].push(0),i[a[c.target]].push(a[c.source]),i[a[c.target]].push(n(c)),i[a[c.target]].push(r(c)),i[a[c.target]].push(0)}var f=0;for(u=0;u<t.length;u++){var l=o.length,h=i[u],d=h.length;o[4*u+2]=l+1048576*d/4,o[4*u+3]=0,f=Math.max(f,d/4);for(var p=0;p<d;++p){var v=h[p];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}},vv=function(t,e){var n=[],r=t.length,o={};return e.forEach((function(e){t.forEach((function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),n.push(o[e[t]]),i===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(o).length}},mv=function(t){for(var e=[],n=t.length,r=t[0].length,o=function(r){t.forEach((function(t,o){if(e.push(t[r]),o===n-1)for(;e.length%4!=0;)e.push(0)}))},i=0;i<r;i++)o(i);return new Float32Array(e)};function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bv(t,e){return(bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var o=wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xv(this,n)}}function xv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ev=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bv(t,e)}(i,t);var e,n,r,o=_v(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,e){y(t.x)||(t.x=Math.random()*a.width),y(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e})),e.nodeMap=o,e.nodeIdxMap=i,t.next=21,e.run();case 21:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=this).nodes,i=r.center,o&&0!==o.length){n.next=5;break}return n.abrupt("return");case 5:if(1!==o.length){n.next=9;break}return o[0].x=i[0],o[0].y=i[1],n.abrupt("return");case 9:return a={},u={},o.forEach((function(t,e){y(t.x)||(t.x=Math.random()*s.width),y(t.y)||(t.y=Math.random()*s.height),a[t.id]=t,u[t.id]=e})),r.nodeMap=a,r.nodeIdxMap=u,n.next=16,r.run(t,e);case 16:case"end":return n.stop()}}),n,this)})))}},{key:"run",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k,O=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,u=r.center,s=r.height*r.width,c=Math.sqrt(s)/10,f=s/(o.length+1),l=Math.sqrt(f),h=r.speed,d=r.clustering,p=vv([r.clusterField],o),v=p.array,m=p.count,y=o.length,g=dv(o,i),b=g.maxEdgePerVetex,_=g.array,x=r.workerEnabled,w=x?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),E=r.onLayoutEnd,S=[],T=0;T<m;T++)S.push(0,0,0,0);return A=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_K : f32;\\\\n  [[offset 4]] u_K2 : f32;\\\\n  [[offset 8]] u_Center : vec2<f32>;\\\\n  [[offset 16]] u_Gravity : f32;\\\\n  [[offset 20]] u_ClusterGravity : f32;\\\\n  [[offset 24]] u_Speed : f32;\\\\n  [[offset 28]] u_MaxDisplace : f32;\\\\n  [[offset 32]] u_Clustering : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx = dx + param * xDist;\\\\ndy = dy + param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\\\ndx = dx + param * std::sign;\\\\ndy = dy + param * std::sign;}}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nvar cvx : f32 = currentNode.x - center.x;\\\\nvar cvy : f32 = currentNode.y - center.y;\\\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx = dx + parma * cvx;\\\\ndy = dy + parma * cvy;}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + i32(p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\\\ndy = dy - yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\\\ndx = dx - std::sign * attractiveF;\\\\ndy = dy - std::sign * attractiveF;}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\ndx = dx + repulsive.x;\\\\ndy = dy + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\\\ndx = dx + attractive.x;\\\\ndy = dy + attractive.y;\\\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\\\ndx = dx - gravity.x;\\\\ndy = dy - gravity.y;\\\\ndx = dx * gWebGPUUniformParams.u_Speed;\\\\ndy = dy * gWebGPUUniformParams.u_Speed;\\\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_K;\\\\n  float u_K2;\\\\n  vec2 u_Center;\\\\n  float u_Gravity;\\\\n  float u_ClusterGravity;\\\\n  float u_Speed;\\\\n  float u_MaxDisplace;\\\\n  float u_Clustering;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AttributeArray[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= gWebGPUUniformParams.u_Speed;\\\\ndy *= gWebGPUUniformParams.u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_K;\\\\nuniform float u_K2;\\\\nuniform vec2 u_Center;\\\\nuniform float u_Gravity;\\\\nuniform float u_ClusterGravity;\\\\nuniform float u_Speed;\\\\nuniform float u_MaxDisplace;\\\\nuniform float u_Clustering;\\\\nuniform sampler2D u_AttributeArray;\\\\nuniform vec2 u_AttributeArraySize;\\\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AttributeArray(float address1D) {\\\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\\\n}\\\\nvec4 getDatau_AttributeArray(int address1D) {\\\\n  return getDatau_AttributeArray(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - u_Center.x;\\\\nfloat vy = currentNode.y - u_Center.y;\\\\nfloat gf = (0.01 * u_K) * u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= u_Speed;\\\\ndy *= u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([y,1,1]).setBinding({u_Data:_,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:c,u_Clustering:d?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),d&&(I=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\n\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nvar sumx : f32 = 0.0;\\\\nvar sumy : f32 = 0.0;\\\\nvar count : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nvar clusterIdx : i32 = i32(attributes.x);\\\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\\\nsumy = sumy + vertex.y;\\\\ncount = count + 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\n\\\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_NodeAttributes[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributes;\\\\nuniform vec2 u_NodeAttributesSize;\\\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributes(float address1D) {\\\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\\\n}\\\\nvec4 getDatau_NodeAttributes(int address1D) {\\\\n  return getDatau_NodeAttributes(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 center = getDatau_ClusterCenters(i);\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = getDatau_Data(j);\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:_,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Ev(O,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<a)){n.next=13;break}return n.next=4,A.execute();case 4:if(!d){n.next=9;break}return I.setBinding({u_Data:A}),n.next=8,I.execute();case 8:A.setBinding({u_ClusterCenters:I});case 9:A.setBinding({u_MaxDisplace:c*=.99});case 10:r++,n.next=1;break;case 13:return n.next=15,A.getOutput();case 15:i=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:i}):o.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),E&&E();case 18:case"end":return n.stop()}}),n)})))},n.next=24,k();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&gv(e.prototype,n),r&&gv(e,r),i}(I);function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var o=Dv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ov(this,n)}}function Ov(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rv=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(i,t);var e,n,r,o=kv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=1,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,n){y(t.x)||(t.x=Math.random()*e.width),y(t.y)||(t.y=Math.random()*e.height),o[t.id]=t,i[t.id]=n})),e.nodeMap=o,e.nodeIdxMap=i,e.nodeStrength=hv(e.nodeStrength,1),e.edgeStrength=hv(e.edgeStrength,1),t.next=23,e.run();case 23:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){var n=this,r=n.nodes,o=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=o[0],void(r[0].y=o[1]);var i={},a={};r.forEach((function(t,e){y(t.x)||(t.x=Math.random()*n.width),y(t.y)||(t.y=Math.random()*n.height),i[t.id]=t,a[t.id]=e})),n.nodeMap=i,n.nodeIdxMap=a,n.nodeStrength=hv(n.nodeStrength,1),n.edgeStrength=hv(n.edgeStrength,1),n.run(t,e)}}},{key:"run",value:function(t,e){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,g,_,x,w,E,S,T,A,I,k,O,D=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),u=o.length,r.linkDistance=hv(r.linkDistance),r.edgeStrength=hv(r.edgeStrength),s=pv(o,i,r.linkDistance,r.edgeStrength),c=s.maxEdgePerVetex,f=s.array,r.degrees=b(o.length,r.nodeIdxMap,i),l=[],h=[],d=[],p=[],v=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),m=r.gravity,g=r.center,o.forEach((function(t,e){l.push(r.getMass(t)),h.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[g[0],g[1],m];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&y(o[0])&&y(o[1])&&y(o[2])&&(n=o)}d.push(n[0]),p.push(n[1]),v.push(n[2])})),_=mv([l,r.degrees,h]),x=mv([d,p,v]),w=r.workerEnabled,E=w?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),S=r.onLayoutEnd,T=[],f.forEach((function(t){T.push(t)})),A=0;A<4;A++)T.push(0);return I=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_damping : f32;\\\\n  [[offset 4]] u_maxSpeed : f32;\\\\n  [[offset 8]] u_minMovement : f32;\\\\n  \\\\n  [[offset 12]] u_coulombDisScale : f32;\\\\n  [[offset 16]] u_factor : f32;\\\\n  \\\\n  \\\\n  [[offset 20]] u_interval : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\ntype GWebGPUBuffer3 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\\\nvar v0 : i32 = packedIntValue / 1048576;\\\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar vx : f32 = currentNode.x - nextNode.x;\\\\nvar vy : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nvar massi : f32 = attributesi.x;\\\\nvar nodeStrengthi : f32 = attributesi.z;\\\\nvar nodeStrengthj : f32 = attributesj.z;\\\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax = ax + direx * param;\\\\nay = ay + direy * param;}}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\\\nvar vy : f32 = currentNode.y - attributes2.y;\\\\nvar ax : f32 = vx * attributes2.w;\\\\nvar ay : f32 = vy * attributes2.w;\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\\\nvar length : i32 = compressed.x;\\\\nvar arr_offset : i32 = compressed.y;\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + (4 * p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = node_buffer.x;\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar vx : f32 = nextNode.x - currentNode.x;\\\\nvar vy : f32 = nextNode.y - currentNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar edgeLength : f32 = node_buffer.y;\\\\nvar edgeStrength : f32 = node_buffer.z;\\\\nvar diff : f32 = edgeLength - dist;\\\\nvar param : f32 = (diff * edgeStrength) / mass;\\\\nax = ax - direx * param;\\\\nay = ay - direy * param;}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\nax = ax + repulsive.x;\\\\nay = ay + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax = ax + attractive.x;\\\\nay = ay + attractive.y;\\\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\\\nax = ax - gravity.x;\\\\nay = ay - gravity.y;\\\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nvar vx : f32 = ax * param;\\\\nvar vy : f32 = ay * param;\\\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_damping;\\\\n  float u_maxSpeed;\\\\n  float u_minMovement;\\\\n  \\\\n  float u_coulombDisScale;\\\\n  float u_factor;\\\\n  \\\\n  \\\\n  float u_interval;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_NodeAttributeArray1[];\\\\n} gWebGPUBuffer2;\\\\n\\\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\\\n  vec4 u_NodeAttributeArray2[];\\\\n} gWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_damping;\\\\nuniform float u_maxSpeed;\\\\nuniform float u_minMovement;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nuniform float u_coulombDisScale;\\\\nuniform float u_factor;\\\\nuniform sampler2D u_NodeAttributeArray1;\\\\nuniform vec2 u_NodeAttributeArray1Size;\\\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\\\n  return getDatau_NodeAttributeArray1(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributeArray2;\\\\nuniform vec2 u_NodeAttributeArray2Size;\\\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\\\n  return getDatau_NodeAttributeArray2(float(address1D));\\\\n}\\\\nuniform float u_interval;\\\\nivec2 unpack_float(float packedValue) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nvec4 movement = getDatau_AveMovement(0.0);\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = u_interval * u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * u_interval;\\\\nfloat disty = vy * u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([u,1,1]).setBinding({u_Data:f,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:_,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:u,u_AveMovement:T,u_interval:r.interval}),k=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_iter : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var movement : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nmovement = movement + vertex.w;}\\\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_iter;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {float movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_iter;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),O=function(){return Rv(D,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<a)){n.next=12;break}return n.next=4,I.execute();case 4:return k.setBinding({u_Data:I}),n.next=7,k.execute();case 7:u=Math.max(.02,r.interval-.002*i),I.setBinding({u_interval:u,u_AveMovement:k});case 9:i++,n.next=1;break;case 12:return n.next=14,I.getOutput();case 14:s=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:s}):o.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),S&&S();case 17:case"end":return n.stop()}}),n)})))},n.next=33,O();case 33:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Av(e.prototype,n),r&&Av(e,r),i}(I);function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv(t);if(e){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv(this,n)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(i,t);var e,n,r,o=Gv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=r[e].x*o,t.y+=r[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)a();var s=[0,0];e.forEach((function(t){y(t.x)&&y(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[r[0]-s[0],r[1]-s[1]];e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}},{key:"initVals",value:function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.indexMap=i;var a={};n.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c)r[t[c].source]?r[t[c].source]++:r[t[c].source]=1,r[t[c].target]?r[t[c].target]++:r[t[c].target]=1;for(var f=[],l=0;l<t.length;++l)f[l]=r[t[l].source]/(r[t[l].source]+r[t[l].target]);this.bias=f;var h,d,p=this.nodeSize,v=this.nodeSpacing;if(d=y(v)?function(){return v}:T(v)?v:function(){return 0},this.nodeSpacing=d,p)if(T(p))h=function(t){return p(t)};else if(m(p)){var g=(p[0]>p[1]?p[0]:p[1])/2;h=function(t){return g}}else{var b=p/2;h=function(t){return b}}else h=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var _,x=this.comboSpacing;_=y(x)?function(){return x}:T(x)?x:function(){return 0},this.comboSpacing=_;var w,E=this.comboPadding;w=y(E)?function(){return E}:m(E)?function(){return Math.max.apply(null,E)}:T(E)?E:function(){return 0},this.comboPadding=w;var S,A=this.linkDistance;A||(A=10),S=y(A)?function(t){return A}:A,this.linkDistance=S;var I,k=this.edgeStrength;k||(k=1),I=y(k)?function(t){return k}:k,this.edgeStrength=I;var O,D=this.nodeStrength;D||(D=30),O=y(D)?function(t){return D}:D,this.nodeStrength=O}},{key:"initPos",value:function(t){this.nodes.forEach((function(e,n){var r=e.comboId,o=t[r];r&&o?(e.x=o.cx+100/(n+1),e.y=o.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}},{key:"getComboMap",value:function(){var t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach((function(r){var a=[];w(r,(function(r){if("node"===r.itemType)return!0;if(!o[r.id])return!0;if(void 0===i[r.id]){var u={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth,children:[]};i[r.id]=u}var s=r.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[r.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[r.id],l=Object.keys(e).length,h="".concat(r.id,"-visual-child-").concat(l),d={id:h,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[h]=d,n[h]=l,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return y(n.cx)&&(c.cx+=n.cx),void(y(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&(y(r.x)&&(c.cx+=r.x),y(r.y)&&(c.cy+=r.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i}},{key:"applyComboCenterForce",value:function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,o=this.comboTrees,i=this.indexMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){w(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var l=u[e.id];return l&&y(l.cx)&&(o.cx+=l.cx),void(l&&y(l.cy)&&(o.cy+=l.cy))}var h=a[e.id],d=h.x-c||.005,p=h.y-f||.005,v=Math.sqrt(d*d+p*p),m=i[h.id],g=n*r/v*s;t[m].x-=d*g,t[m].y-=p*g,y(h.x)&&(o.cx+=h.x),y(h.y)&&(o.cy+=h.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))}},{key:"applyCalculate",value:function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,o){if(!(e<o)){var i=t.x-n.x||.005,a=t.y-n.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:a,vl2:u,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:u,vl:s,vx:-i,vy:-a}}}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)}},{key:"updateComboSizes",value:function(t){var e=this,n=e.comboTrees,r=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];w(n,(function(n){if("node"===n.itemType)return!0;var s=t[n.id];if(!s)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=o(e),i=e.x-n,a=e.y-n,u=e.x+n,c=e.y+n;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[n.id].size||10;m(f)&&(f=f[0]);var l=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=l/2+i(s)/2+a(s),!0}))}))}},{key:"comboNonOverlapping",value:function(t,e){var n=this.comboTree,r=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;w(n,(function(n){if(!e[n.id]&&!i[n.id]&&"comboTreeRoot"!==n.id)return!1;var a=n.children;return a&&a.length>1&&a.forEach((function(n,u){if("node"===n.itemType)return!1;var s=e[n.id];s&&a.forEach((function(a,c){if(u<=c)return!1;if("node"===a.itemType)return!1;var f=e[a.id];if(!f)return!1;var l=s.cx-f.cx||.005,h=s.cy-f.cy||.005,d=l*l+h*h,p=s.r,v=f.r,m=p+v,y=v*v,g=p*p;if(d<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=a.children;if(!_||0===_.length)return!1;var x=Math.sqrt(d),w=(m-x)/x*r,E=l*w,S=h*w,T=y/(g+y),A=1-T;b.forEach((function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var n=o[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var r=o[e.id];t[n].x+=E*T,t[n].y+=S*T,t[r].x-=E*A,t[r].y-=S*A}))}}))}}))})),!0}))}},{key:"calRepulsive",value:function(t,e){var n=this,r=n.nodes,o=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,u=n.nodeCollideStrength,s=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,l=n.depthRepulsiveForceScale,h=n.center;r.forEach((function(d,p){if(d.x&&d.y){if(h){var v=n.gravity,m=d.x-h[0]||.005,y=d.y-h[1]||.005,g=Math.sqrt(m*m+y*y);t[p].x-=m*v*a/g,t[p].y-=y*v*a/g}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var h=e["".concat(d.id,"-").concat(n.id)],v=h.vl2,m=h.vl;if(!(m>o)){var y=e["".concat(d.id,"-").concat(n.id)],g=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-d.depth)/10)+1||1;_=_<1?1:_,n.comboId!==d.comboId&&(_+=1);var x=_?Math.pow(l,_):1,w=i(n)*a/v*x;if(t[p].x+=g*w,t[p].y+=b*w,p<r&&s){var E=c(d)+f(d),S=c(n)+f(n),T=E+S;if(v<T*T){var A=(T-m)/m*u,I=S*S,k=I/(E*E+I),O=g*A,D=b*A;t[p].x+=O*k,t[p].y+=D*k,k=1-k,t[r].x-=O*k,t[r].y-=D*k}}}}}))}}))}},{key:"calAttractive",value:function(t,e){var n=this,r=n.edges,o=n.linkDistance,i=n.alpha,a=n.edgeStrength,u=n.bias,s=n.depthAttractiveForceScale;r.forEach((function(r,c){if(r.source&&r.target&&r.source!==r.target){var f=n.indexMap[r.source],l=n.indexMap[r.target],h=n.nodeMap[r.source],d=n.nodeMap[r.target];if(h&&d){var p=Math.log(Math.abs(h.depth-d.depth)/10);h.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(h.comboId!==d.comboId&&1===v?v=s/2:h.comboId===d.comboId&&(v=2),y(d.x)&&y(h.x)&&y(d.y)&&y(h.y)){var m=e["".concat(r.target,"-").concat(r.source)],g=m.vl,b=m.vx,_=m.vy,x=(g-o(r))/g*i*a(r)*v,w=b*x,E=_*x,S=u[c];t[l].x-=w*S,t[l].y-=E*S,t[f].x+=w*(1-S),t[f].y+=E*(1-S)}}}}))}},{key:"getType",value:function(){return"comboForce"}}])&&Nv(e.prototype,n),r&&Nv(e,r),i}(I);var Bv;new Proxy({},{get:function(t,e){return Jn(e)},set:function(t,e,n){return Qn(e,n),!0}});Bv||(Bv={}),Qn("grid",N),Qn("random",F),Qn("force",oe),Qn("circular",ve),Qn("dagre",Se),Qn("radial",Vn),Qn("concentric",ir),Qn("mds",hr),Qn("fruchterman",br),Qn("fruchterman-gpu",Sv),Qn("gForce",K),Qn("gForce-gpu",Mv),Qn("comboForce",Uv);var Fv=self;Fv.onmessage=function(t){(function(t){var e=t.data.type;return e===Ht||e===Zt})(t)&&function(t){switch(t.data.type){case Ht:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=Jn(a);if(!u){Fv.postMessage({type:Yt,message:"layout ".concat(a," not found")});break}var s=new u(i);s.init({nodes:n,edges:r}),s.execute(),Fv.postMessage({nodes:n,type:qt}),s.destroy();break;case Zt:var c=t.data,f=c.nodes,l=c.edges,h=c.layoutCfg,d=void 0===h?{}:h,p=c.canvas,v=d.type,m=Jn(v);if(!m){Fv.postMessage({type:Yt,message:"layout ".concat(v," not found")});break}if("gpu"!==v.split("-")[1]){Fv.postMessage({type:Yt,message:"layout ".concat(v," does not support GPU")});break}var y=new m(d);y.init({nodes:f,edges:l}),y.executeWithWorker(p,Fv)}}(t)};var zv=self;zv.onmessage=function(t){(function(t){var e=t.data.type;return e===f||e===d})(t)&&function(t){switch(t.data.type){case f:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=(p=void 0===o?{}:o).type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}(u=new a(p)).init({nodes:n,edges:r}),u.execute(),zv.postMessage({type:l,nodes:n}),u.destroy();break;case d:var a,u,s=t.data,c=(n=s.nodes,r=s.edges,s.layoutCfg),p=void 0===c?{}:c,v=s.canvas;i=p.type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}if("gpu"!==i.split("-")[1]){zv.postMessage({type:h,message:"layout "+i+" does not support GPU"});break}(u=new a(p)).init({nodes:n,edges:r}),u.executeWithWorker(v,zv)}}(t)};e.default=null}]);
//# sourceMappingURL=g6Layout.worker.js.map`,"Worker",void 0,e.p+"g6Layout.worker.js")}var x="LAYOUT_RUN",T="LAYOUT_END",N="LAYOUT_ERROR",X="LAYOUT_TICK",tt="GPU_LAYOUT_RUN",nt="GPU_LAYOUT_END",vt=e(121),ft=function(dt){return setTimeout(dt,16)},bt=function(dt){return clearTimeout(dt)},St=function(dt){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||ft)(dt)},pt=function(dt){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||bt)(dt)},ct=["fruchterman","gForce"],zt=function(ht){function dt(yt){var Mt=ht.call(this,yt)||this;return Mt.graph=yt,Mt.layoutCfg=yt.get("layout")||{},Mt.layoutType=Mt.layoutCfg.type,Mt.worker=null,Mt.workerData={},Mt.initLayout(),Mt}return Object(i.b)(dt,ht),dt.prototype.initLayout=function(){},dt.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new v),this.worker},dt.prototype.stopWorker=function(){var yt=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,yt.requestId&&(pt(yt.requestId),yt.requestId=null),yt.requestId2&&(pt(yt.requestId2),yt.requestId2=null))},dt.prototype.layout=function(yt){var Mt=this,$=this.graph;this.data=this.setDataFromGraph();var lt=this.data.nodes;if(!lt)return!1;var rt=$.get("width"),z=$.get("height"),P={};Object.assign(P,{width:rt,height:z,center:[rt/2,z/2]},this.layoutCfg),this.layoutCfg=P;var Y=!!this.layoutType,k=this.layoutMethod;k&&k.destroy(),$.emit("beforelayout"),this.initPositions(P.center,lt);var h=this.layoutType,g=!1;if(h&&h.split("-")[1]==="gpu"&&(h=h.split("-")[0],P.gpuEnabled=!0),h&&P.gpuEnabled){var B=!0;Object(vt.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),B=!1),this.hasGPUVersion(h)||(console.warn("The '"+h+"' layout does not support GPU calculation for now, it will run in CPU."),B=!1),B&&(h+="-gpu",g=!0)}if(this.isGPU=g,this.stopWorker(),P.workerEnabled&&this.layoutWithWorker(this.data,yt))return!0;var V=P.onLayoutEnd;if(P.layoutEndFormatted||(P.layoutEndFormatted=!0,P.onLayoutEnd=function(){V&&V(),$.emit("afterlayout"),Mt.refreshLayout(),yt&&yt()}),h==="force"||h==="g6force"||h==="gForce"){var q=P.onTick,it=function(){q&&q(),$.refreshPositions()};P.tick=it}else this.layoutType==="comboForce"&&(P.comboTrees=$.get("comboTrees"));if(h!==void 0){try{k=new E.a[h](P)}catch(At){return console.warn("The layout method: '"+h+"' does not exist! Please specify it first."),!1}if(k.enableTick){var ot=P.onTick;it=function(){ot&&ot(),$.refreshPositions()},k.tick=it}k.init(this.data),Y&&($.emit("beginlayout"),k.execute(),k.isCustomLayout&&P.onLayoutEnd&&P.onLayoutEnd()),this.layoutMethod=k}else P.onLayoutEnd&&P.onLayoutEnd();return!1},dt.prototype.layoutWithWorker=function(yt,Mt){var $=this,lt=yt.nodes,rt=yt.edges,z=this.layoutCfg,P=this.graph,Y=this.isGPU,k=this.getWorker(),h=this.workerData;if(!k)return!1;h.requestId=null,h.requestId2=null,h.currentTick=null,h.currentTickData=null,P.emit("beforelayout");var g=document.createElement("canvas"),B=Y&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in g,V=function(it,ot){var At={};return it&&typeof it=="object"?(Object.keys(it).forEach(function(gt){it.hasOwnProperty(gt)&&ot(it[gt])&&(At[gt]=it[gt])}),At):it}(z,function(it){return typeof it!="function"});if(B){var q=g.transferControlToOffscreen();V.type=V.type+"-gpu",k.postMessage({type:tt,nodes:lt,edges:rt,layoutCfg:V,canvas:q},[q])}else k.postMessage({type:x,nodes:lt,edges:rt,layoutCfg:V});return k.onmessage=function(it){$.handleWorkerMessage(it,yt,Mt)},!0},dt.prototype.handleWorkerMessage=function(yt,Mt,$){var lt=this.graph,rt=this.workerData,z=this.layoutCfg,P=yt.data,Y=P.type,k=function(){z.onTick&&z.onTick()},h=function(){z.onLayoutEnd&&z.onLayoutEnd(),lt.emit("afterlayout")};switch(Y){case X:rt.currentTick=P.currentTick,rt.currentTickData=P,rt.requestId||(rt.requestId=St(function(){Nt(Mt,P),lt.refreshPositions(),k(),P.currentTick===1&&$&&$(),P.currentTick===P.totalTicks?h():rt.currentTick===P.totalTicks&&(rt.requestId2=St(function(){Nt(Mt,rt.currentTickData),lt.refreshPositions(),rt.requestId2=null,k(),h()})),rt.requestId=null}));break;case T:rt.currentTick==null&&(Nt(Mt,P),this.refreshLayout(),$&&$(),lt.emit("afterlayout"));break;case nt:rt.currentTick==null&&(function(g,B){for(var V=g.nodes,q=B.vertexEdgeData,it=V.length,ot=0;ot<it;ot++){var At=V[ot],gt=q[4*ot],mt=q[4*ot+1];At.x=gt,At.y=mt}}(Mt,P),this.refreshLayout(),$&&$(),lt.emit("afterlayout"));break;case N:console.warn("Web-Worker layout error!",P.message)}},dt.prototype.updateLayoutCfg=function(yt){var Mt=this.graph,$=this.layoutMethod,lt=(this.layoutType,this.layoutCfg);if(this.layoutType=yt.type,!$||$.destroyed)return this.layoutCfg=Object(l.A)({},lt,yt),void this.layout();this.data=this.setDataFromGraph(),this.stopWorker(),yt.workerEnabled&&this.layoutWithWorker(this.data,null)||($.init(this.data),$.updateCfg(yt),Mt.emit("beforelayout"),$.execute(),$.isCustomLayout&&lt.onLayoutEnd&&lt.onLayoutEnd())},dt.prototype.hasGPUVersion=function(yt){for(var Mt=ct.length,$=0;$<Mt;$++)if(ct[$]===yt)return!0;return!1},dt.prototype.destroy=function(){var yt=this.layoutMethod;yt&&(yt.destroy(),yt.destroyed=!0);var Mt=this.worker;Mt&&(Mt.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0,this.graph=null},dt}(M.c);function Nt(ht,dt){for(var yt=ht.nodes,Mt=dt.nodes,$=yt.length,lt=0;lt<$;lt++){var rt=yt[lt];rt.x=Mt[lt].x,rt.y=Mt[lt].y}}var wt=S.a.transform,H=function(ht){function dt(yt){var Mt=ht.call(this,yt)||this,$=Mt.get("defaultNode");return $||Mt.set("defaultNode",{type:"circle"}),$.type||($.type="circle",Mt.set("defaultNode",$)),Mt.destroyed=!1,Mt}return Object(i.b)(dt,ht),dt.prototype.initLayoutController=function(){var yt=new zt(this);this.set({layoutController:yt})},dt.prototype.initEventController=function(){var yt=new d(this);this.set({eventController:yt})},dt.prototype.initCanvas=function(){var yt=this.get("container");if(typeof yt=="string"&&(yt=document.getElementById(yt),this.set("container",yt)),!yt)throw new Error("invalid container");var Mt,$=this.get("width"),lt=this.get("height");if(this.get("renderer")==="svg")Mt=new m.Canvas({container:yt,width:$,height:lt});else{var rt={container:yt,width:$,height:lt},z=this.get("pixelRatio");z&&(rt.pixelRatio=z),Mt=new p.Canvas(rt)}this.set("canvas",Mt)},dt.prototype.initPlugins=function(){var yt=this;Object(l.f)(yt.get("plugins"),function(Mt){!Mt.destroyed&&Mt.initPlugin&&Mt.initPlugin(yt)})},dt.prototype.toDataURL=function(yt,Mt){var $=this.get("canvas"),lt=$.getRenderer(),rt=$.get("el");yt||(yt="image/png");var z="";if(lt==="svg"){var P=rt.cloneNode(!0),Y=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Y);k.replaceChild(P,k.documentElement);var h=new XMLSerializer().serializeToString(k);z="data:image/svg+xml;charset=utf8,"+encodeURIComponent(h)}else{var g=void 0,B=rt.getContext("2d"),V=this.get("width"),q=this.get("height"),it=void 0;if(Mt){var ot=typeof window!="undefined"?window.devicePixelRatio:1;g=B.getImageData(0,0,V*ot,q*ot),it=B.globalCompositeOperation,B.globalCompositeOperation="destination-over",B.fillStyle=Mt,B.fillRect(0,0,V,q)}z=rt.toDataURL(yt),Mt&&(B.clearRect(0,0,V,q),B.putImageData(g,0,0),B.globalCompositeOperation=it)}return z},dt.prototype.toFullDataURL=function(yt,Mt,$){var lt=this.get("group").getCanvasBBox(),rt=lt.height,z=lt.width,P=this.get("renderer"),Y=Object(y.b)('<id="virtual-image"></div>'),k=$?$.backgroundColor:void 0,h=$?$.padding:void 0;h?Object(l.t)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var g=rt+h[0]+h[2],B=z+h[1]+h[3],V={container:Y,height:g,width:B,quickHit:!0},q=P==="svg"?new m.Canvas(V):new p.Canvas(V),it=this.get("group").clone(),ot=Object(l.c)(it.getMatrix());ot||(ot=[1,0,0,0,1,0,0,0,1]);var At=(lt.maxX+lt.minX)/2,gt=(lt.maxY+lt.minY)/2;ot=wt(ot,[["t",-At,-gt],["t",z/2+h[3],rt/2+h[0]]]),it.resetMatrix(),it.setMatrix(ot),q.add(it);var mt=q.get("el"),Ot="";Mt||(Mt="image/png"),setTimeout(function(){if(P==="svg"){var It=mt.cloneNode(!0),Dt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ut=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Dt);Ut.replaceChild(It,Ut.documentElement);var Ct=new XMLSerializer().serializeToString(Ut);Ot="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Ct)}else{var Vt=void 0,Ht=mt.getContext("2d"),re=void 0;if(k){var pe=typeof window!="undefined"?window.devicePixelRatio:1;Vt=Ht.getImageData(0,0,B*pe,g*pe),re=Ht.globalCompositeOperation,Ht.globalCompositeOperation="destination-over",Ht.fillStyle=k,Ht.fillRect(0,0,B,g)}Ot=mt.toDataURL(Mt),k&&(Ht.clearRect(0,0,B,g),Ht.putImageData(Vt,0,0),Ht.globalCompositeOperation=re)}yt&&yt(Ot)},16)},dt.prototype.downloadFullImage=function(yt,Mt,$){var lt=this,rt=this.get("group").getCanvasBBox(),z=rt.height,P=rt.width,Y=this.get("renderer"),k=Object(y.b)('<id="virtual-image"></div>'),h=$?$.backgroundColor:void 0,g=$?$.padding:void 0;g?Object(l.t)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var B=z+g[0]+g[2],V=P+g[1]+g[3],q={container:k,height:B,width:V},it=Y==="svg"?new m.Canvas(q):new p.Canvas(q),ot=this.get("group").clone(),At=Object(l.c)(ot.getMatrix());At||(At=[1,0,0,0,1,0,0,0,1]);var gt=(rt.maxX+rt.minX)/2,mt=(rt.maxY+rt.minY)/2;At=wt(At,[["t",-gt,-mt],["t",P/2+g[3],z/2+g[0]]]),ot.resetMatrix(),ot.setMatrix(At),it.add(ot);var Ot=it.get("el");Mt||(Mt="image/png"),setTimeout(function(){var It="";if(Y==="svg"){var Dt=Ot.cloneNode(!0),Ut=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ct=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ut);Ct.replaceChild(Dt,Ct.documentElement);var Vt=new XMLSerializer().serializeToString(Ct);It="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Vt)}else{var Ht=void 0,re=Ot.getContext("2d"),pe=void 0;if(h){var ye=typeof window!="undefined"?window.devicePixelRatio:1;Ht=re.getImageData(0,0,V*ye,B*ye),pe=re.globalCompositeOperation,re.globalCompositeOperation="destination-over",re.fillStyle=h,re.fillRect(0,0,V,B)}It=Ot.toDataURL(Mt),h&&(re.clearRect(0,0,V,B),re.putImageData(Ht,0,0),re.globalCompositeOperation=pe)}var we=document.createElement("a"),Ne=(yt||"graph")+(Y==="svg"?".svg":"."+Mt.split("/")[1]);lt.dataURLToImage(It,Y,we,Ne);var Ke=document.createEvent("MouseEvents");Ke.initEvent("click",!1,!1),we.dispatchEvent(Ke)},16)},dt.prototype.downloadImage=function(yt,Mt,$){var lt=this,rt=this;rt.isAnimating()&&rt.stopAnimate();var z=rt.get("canvas").getRenderer();Mt||(Mt="image/png");var P=(yt||"graph")+(z==="svg"?".svg":Mt.split("/")[1]),Y=document.createElement("a");setTimeout(function(){var k=rt.toDataURL(Mt,$);lt.dataURLToImage(k,z,Y,P);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),Y.dispatchEvent(h)},16)},dt.prototype.dataURLToImage=function(yt,Mt,$,lt){if(typeof window!="undefined")if(window.Blob&&window.URL&&Mt!=="svg"){var rt=yt.split(","),z="";if(rt&&rt.length>0){var P=rt[0].match(/:(.*?);/);P&&P.length>=2&&(z=P[1])}for(var Y=atob(rt[1]),k=Y.length,h=new Uint8Array(k);k--;)h[k]=Y.charCodeAt(k);var g=new Blob([h],{type:z});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,lt):$.addEventListener("click",function(){$.download=lt,$.href=window.URL.createObjectURL(g)})}else $.addEventListener("click",function(){$.download=lt,$.href=yt})},dt.prototype.addPlugin=function(yt){yt.destroyed||(this.get("plugins").push(yt),yt.initPlugin(this))},dt.prototype.removePlugin=function(yt){var Mt=this.get("plugins"),$=Mt.indexOf(yt);$>=0&&(yt.destroyPlugin(),Mt.splice($,1))},dt.prototype.setImageWaterMarker=function(yt,Mt){yt===void 0&&(yt=j.a.waterMarkerImage);var $=this.get("container");Object(l.x)($)&&($=document.getElementById($)),$.style.position||($.style.position="relative");var lt=this.get("graphWaterMarker"),rt=Object(l.e)({},j.a.imageWaterMarkerConfig,Mt),z=rt.width,P=rt.height,Y=rt.compatible,k=rt.image;if(!lt){var h={container:$,width:z,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),lt=new p.Canvas(h),this.set("graphWaterMarker",lt)}lt.get("el").style.display="none";var B=lt.get("context"),V=k.rotate,q=k.x,it=k.y;B.rotate(-V*Math.PI/180);var ot=new Image;ot.crossOrigin="anonymous",ot.src=yt,ot.onload=function(){if(B.drawImage(ot,q,it,k.width,k.height),B.rotate(V*Math.PI/180),Y)$.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var At=document.querySelector(".g6-graph-watermarker");At||((At=document.createElement("div")).className="g6-graph-watermarker"),At.className="g6-graph-watermarker",lt.destroyed||(At.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",$.appendChild(At))}}},dt.prototype.setTextWaterMarker=function(yt,Mt){var $=this.get("container");Object(l.x)($)&&($=document.getElementById($)),$.style.position||($.style.position="relative");var lt=this.get("graphWaterMarker"),rt=Object(l.e)({},j.a.textWaterMarkerConfig,Mt),z=rt.width,P=rt.height,Y=rt.compatible,k=rt.text;if(!lt){var h={container:$,width:z,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),lt=new p.Canvas(h),this.set("graphWaterMarker",lt)}lt.get("el").style.display="none";var B=lt.get("context"),V=k.rotate,q=k.fill,it=k.fontFamily,ot=k.fontSize,At=k.baseline,gt=k.x,mt=k.y,Ot=k.lineHeight;B.rotate(-V*Math.PI/180),B.font=ot+"px "+it,B.fillStyle=q,B.textBaseline=At;for(var It=yt.length-1;It>=0;It--)B.fillText(yt[It],gt,mt+It*Ot);if(B.rotate(V*Math.PI/180),Y)$.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Dt=document.querySelector(".g6-graph-watermarker");Dt||((Dt=document.createElement("div")).className="g6-graph-watermarker"),Dt.style.cssText="background-image: url("+lt.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",$.appendChild(Dt)}},dt.prototype.destroy=function(){Object(l.f)(this.get("plugins"),function(rt){rt.destroyPlugin()});var yt=this.get("tooltips");if(yt)for(var Mt=0;Mt<yt.length;Mt++){var $=yt[Mt];if($){var lt=$.parentElement;lt&&lt.removeChild($)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),ht.prototype.destroy.call(this)},dt}(M.b);A.a=H},function(a,A){a.exports=function(e){return e==null}},function(a,A,e){var i;function p(m){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(m)}(function(m){var S=/^\s+/,l=/\s+$/,M=0,j=m.round,y=m.min,n=m.max,s=m.random;function d(g,B){if(B=B||{},(g=g||"")instanceof d)return g;if(!(this instanceof d))return new d(g,B);var V=function(q){var it={r:0,g:0,b:0},ot=1,At=null,gt=null,mt=null,Ot=!1,It=!1;typeof q=="string"&&(q=function(Vt){Vt=Vt.replace(S,"").replace(l,"").toLowerCase();var Ht,re=!1;if(Nt[Vt])Vt=Nt[Vt],re=!0;else if(Vt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ht=k.rgb.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3]}:(Ht=k.rgba.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3],a:Ht[4]}:(Ht=k.hsl.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3]}:(Ht=k.hsla.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3],a:Ht[4]}:(Ht=k.hsv.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3]}:(Ht=k.hsva.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3],a:Ht[4]}:(Ht=k.hex8.exec(Vt))?{r:yt(Ht[1]),g:yt(Ht[2]),b:yt(Ht[3]),a:rt(Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex6.exec(Vt))?{r:yt(Ht[1]),g:yt(Ht[2]),b:yt(Ht[3]),format:re?"name":"hex"}:(Ht=k.hex4.exec(Vt))?{r:yt(Ht[1]+""+Ht[1]),g:yt(Ht[2]+""+Ht[2]),b:yt(Ht[3]+""+Ht[3]),a:rt(Ht[4]+""+Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex3.exec(Vt))?{r:yt(Ht[1]+""+Ht[1]),g:yt(Ht[2]+""+Ht[2]),b:yt(Ht[3]+""+Ht[3]),format:re?"name":"hex"}:!1}(q)),p(q)=="object"&&(h(q.r)&&h(q.g)&&h(q.b)?(Dt=q.r,Ut=q.g,Ct=q.b,it={r:255*ht(Dt,255),g:255*ht(Ut,255),b:255*ht(Ct,255)},Ot=!0,It=String(q.r).substr(-1)==="%"?"prgb":"rgb"):h(q.h)&&h(q.s)&&h(q.v)?(At=$(q.s),gt=$(q.v),it=function(Vt,Ht,re){Vt=6*ht(Vt,360),Ht=ht(Ht,100),re=ht(re,100);var pe=m.floor(Vt),ye=Vt-pe,we=re*(1-Ht),Ne=re*(1-ye*Ht),Ke=re*(1-(1-ye)*Ht),pn=pe%6;return{r:255*[re,Ne,we,we,Ke,re][pn],g:255*[Ke,re,re,Ne,we,we][pn],b:255*[we,we,Ke,re,re,Ne][pn]}}(q.h,At,gt),Ot=!0,It="hsv"):h(q.h)&&h(q.s)&&h(q.l)&&(At=$(q.s),mt=$(q.l),it=function(Vt,Ht,re){var pe,ye,we;function Ne(hn,kn,Tn){return Tn<0&&(Tn+=1),Tn>1&&(Tn-=1),Tn<1/6?hn+6*(kn-hn)*Tn:Tn<.5?kn:Tn<2/3?hn+(kn-hn)*(2/3-Tn)*6:hn}if(Vt=ht(Vt,360),Ht=ht(Ht,100),re=ht(re,100),Ht===0)pe=ye=we=re;else{var Ke=re<.5?re*(1+Ht):re+Ht-re*Ht,pn=2*re-Ke;pe=Ne(pn,Ke,Vt+1/3),ye=Ne(pn,Ke,Vt),we=Ne(pn,Ke,Vt-1/3)}return{r:255*pe,g:255*ye,b:255*we}}(q.h,At,mt),Ot=!0,It="hsl"),q.hasOwnProperty("a")&&(ot=q.a));var Dt,Ut,Ct;return ot=H(ot),{ok:Ot,format:q.format||It,r:y(255,n(it.r,0)),g:y(255,n(it.g,0)),b:y(255,n(it.b,0)),a:ot}}(g);this._originalInput=g,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=j(100*this._a)/100,this._format=B.format||V.format,this._gradientType=B.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=V.ok,this._tc_id=M++}function E(g,B,V){g=ht(g,255),B=ht(B,255),V=ht(V,255);var q,it,ot=n(g,B,V),At=y(g,B,V),gt=(ot+At)/2;if(ot==At)q=it=0;else{var mt=ot-At;switch(it=gt>.5?mt/(2-ot-At):mt/(ot+At),ot){case g:q=(B-V)/mt+(B<V?6:0);break;case B:q=(V-g)/mt+2;break;case V:q=(g-B)/mt+4}q/=6}return{h:q,s:it,l:gt}}function O(g,B,V){g=ht(g,255),B=ht(B,255),V=ht(V,255);var q,it,ot=n(g,B,V),At=y(g,B,V),gt=ot,mt=ot-At;if(it=ot===0?0:mt/ot,ot==At)q=0;else{switch(ot){case g:q=(B-V)/mt+(B<V?6:0);break;case B:q=(V-g)/mt+2;break;case V:q=(g-B)/mt+4}q/=6}return{h:q,s:it,v:gt}}function C(g,B,V,q){var it=[Mt(j(g).toString(16)),Mt(j(B).toString(16)),Mt(j(V).toString(16))];return q&&it[0].charAt(0)==it[0].charAt(1)&&it[1].charAt(0)==it[1].charAt(1)&&it[2].charAt(0)==it[2].charAt(1)?it[0].charAt(0)+it[1].charAt(0)+it[2].charAt(0):it.join("")}function v(g,B,V,q){return[Mt(lt(q)),Mt(j(g).toString(16)),Mt(j(B).toString(16)),Mt(j(V).toString(16))].join("")}function x(g,B){B=B===0?0:B||10;var V=d(g).toHsl();return V.s-=B/100,V.s=dt(V.s),d(V)}function T(g,B){B=B===0?0:B||10;var V=d(g).toHsl();return V.s+=B/100,V.s=dt(V.s),d(V)}function N(g){return d(g).desaturate(100)}function X(g,B){B=B===0?0:B||10;var V=d(g).toHsl();return V.l+=B/100,V.l=dt(V.l),d(V)}function tt(g,B){B=B===0?0:B||10;var V=d(g).toRgb();return V.r=n(0,y(255,V.r-j(-B/100*255))),V.g=n(0,y(255,V.g-j(-B/100*255))),V.b=n(0,y(255,V.b-j(-B/100*255))),d(V)}function nt(g,B){B=B===0?0:B||10;var V=d(g).toHsl();return V.l-=B/100,V.l=dt(V.l),d(V)}function vt(g,B){var V=d(g).toHsl(),q=(V.h+B)%360;return V.h=q<0?360+q:q,d(V)}function ft(g){var B=d(g).toHsl();return B.h=(B.h+180)%360,d(B)}function bt(g){var B=d(g).toHsl(),V=B.h;return[d(g),d({h:(V+120)%360,s:B.s,l:B.l}),d({h:(V+240)%360,s:B.s,l:B.l})]}function St(g){var B=d(g).toHsl(),V=B.h;return[d(g),d({h:(V+90)%360,s:B.s,l:B.l}),d({h:(V+180)%360,s:B.s,l:B.l}),d({h:(V+270)%360,s:B.s,l:B.l})]}function pt(g){var B=d(g).toHsl(),V=B.h;return[d(g),d({h:(V+72)%360,s:B.s,l:B.l}),d({h:(V+216)%360,s:B.s,l:B.l})]}function ct(g,B,V){B=B||6,V=V||30;var q=d(g).toHsl(),it=360/V,ot=[d(g)];for(q.h=(q.h-(it*B>>1)+720)%360;--B;)q.h=(q.h+it)%360,ot.push(d(q));return ot}function zt(g,B){B=B||6;for(var V=d(g).toHsv(),q=V.h,it=V.s,ot=V.v,At=[],gt=1/B;B--;)At.push(d({h:q,s:it,v:ot})),ot=(ot+gt)%1;return At}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var B=this.toRgb();return(299*B.r+587*B.g+114*B.b)/1e3},getLuminance:function(){var B,V,q,it=this.toRgb();return B=it.r/255,V=it.g/255,q=it.b/255,.2126*(B<=.03928?B/12.92:m.pow((B+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:m.pow((V+.055)/1.055,2.4))+.0722*(q<=.03928?q/12.92:m.pow((q+.055)/1.055,2.4))},setAlpha:function(B){return this._a=H(B),this._roundA=j(100*this._a)/100,this},toHsv:function(){var B=O(this._r,this._g,this._b);return{h:360*B.h,s:B.s,v:B.v,a:this._a}},toHsvString:function(){var B=O(this._r,this._g,this._b),V=j(360*B.h),q=j(100*B.s),it=j(100*B.v);return this._a==1?"hsv("+V+", "+q+"%, "+it+"%)":"hsva("+V+", "+q+"%, "+it+"%, "+this._roundA+")"},toHsl:function(){var B=E(this._r,this._g,this._b);return{h:360*B.h,s:B.s,l:B.l,a:this._a}},toHslString:function(){var B=E(this._r,this._g,this._b),V=j(360*B.h),q=j(100*B.s),it=j(100*B.l);return this._a==1?"hsl("+V+", "+q+"%, "+it+"%)":"hsla("+V+", "+q+"%, "+it+"%, "+this._roundA+")"},toHex:function(B){return C(this._r,this._g,this._b,B)},toHexString:function(B){return"#"+this.toHex(B)},toHex8:function(B){return function(V,q,it,ot,At){var gt=[Mt(j(V).toString(16)),Mt(j(q).toString(16)),Mt(j(it).toString(16)),Mt(lt(ot))];return At&&gt[0].charAt(0)==gt[0].charAt(1)&&gt[1].charAt(0)==gt[1].charAt(1)&&gt[2].charAt(0)==gt[2].charAt(1)&&gt[3].charAt(0)==gt[3].charAt(1)?gt[0].charAt(0)+gt[1].charAt(0)+gt[2].charAt(0)+gt[3].charAt(0):gt.join("")}(this._r,this._g,this._b,this._a,B)},toHex8String:function(B){return"#"+this.toHex8(B)},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*ht(this._r,255))+"%",g:j(100*ht(this._g,255))+"%",b:j(100*ht(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+j(100*ht(this._r,255))+"%, "+j(100*ht(this._g,255))+"%, "+j(100*ht(this._b,255))+"%)":"rgba("+j(100*ht(this._r,255))+"%, "+j(100*ht(this._g,255))+"%, "+j(100*ht(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(wt[C(this._r,this._g,this._b,!0)]||!1)},toFilter:function(B){var V="#"+v(this._r,this._g,this._b,this._a),q=V,it=this._gradientType?"GradientType = 1, ":"";if(B){var ot=d(B);q="#"+v(ot._r,ot._g,ot._b,ot._a)}return"progid:DXImageTransform.Microsoft.gradient("+it+"startColorstr="+V+",endColorstr="+q+")"},toString:function(B){var V=!!B;B=B||this._format;var q=!1,it=this._a<1&&this._a>=0;return V||!it||B!=="hex"&&B!=="hex6"&&B!=="hex3"&&B!=="hex4"&&B!=="hex8"&&B!=="name"?(B==="rgb"&&(q=this.toRgbString()),B==="prgb"&&(q=this.toPercentageRgbString()),B!=="hex"&&B!=="hex6"||(q=this.toHexString()),B==="hex3"&&(q=this.toHexString(!0)),B==="hex4"&&(q=this.toHex8String(!0)),B==="hex8"&&(q=this.toHex8String()),B==="name"&&(q=this.toName()),B==="hsl"&&(q=this.toHslString()),B==="hsv"&&(q=this.toHsvString()),q||this.toHexString()):B==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(B,V){var q=B.apply(null,[this].concat([].slice.call(V)));return this._r=q._r,this._g=q._g,this._b=q._b,this.setAlpha(q._a),this},lighten:function(){return this._applyModification(X,arguments)},brighten:function(){return this._applyModification(tt,arguments)},darken:function(){return this._applyModification(nt,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(N,arguments)},spin:function(){return this._applyModification(vt,arguments)},_applyCombination:function(B,V){return B.apply(null,[this].concat([].slice.call(V)))},analogous:function(){return this._applyCombination(ct,arguments)},complement:function(){return this._applyCombination(ft,arguments)},monochromatic:function(){return this._applyCombination(zt,arguments)},splitcomplement:function(){return this._applyCombination(pt,arguments)},triad:function(){return this._applyCombination(bt,arguments)},tetrad:function(){return this._applyCombination(St,arguments)}},d.fromRatio=function(g,B){if(p(g)=="object"){var V={};for(var q in g)g.hasOwnProperty(q)&&(V[q]=q==="a"?g[q]:$(g[q]));g=V}return d(g,B)},d.equals=function(g,B){return!(!g||!B)&&d(g).toRgbString()==d(B).toRgbString()},d.random=function(){return d.fromRatio({r:s(),g:s(),b:s()})},d.mix=function(g,B,V){V=V===0?0:V||50;var q=d(g).toRgb(),it=d(B).toRgb(),ot=V/100;return d({r:(it.r-q.r)*ot+q.r,g:(it.g-q.g)*ot+q.g,b:(it.b-q.b)*ot+q.b,a:(it.a-q.a)*ot+q.a})},d.readability=function(g,B){var V=d(g),q=d(B);return(m.max(V.getLuminance(),q.getLuminance())+.05)/(m.min(V.getLuminance(),q.getLuminance())+.05)},d.isReadable=function(g,B,V){var q,it,ot=d.readability(g,B);switch(it=!1,(q=function(At){var gt,mt;return gt=((At=At||{level:"AA",size:"small"}).level||"AA").toUpperCase(),mt=(At.size||"small").toLowerCase(),gt!=="AA"&&gt!=="AAA"&&(gt="AA"),mt!=="small"&&mt!=="large"&&(mt="small"),{level:gt,size:mt}}(V)).level+q.size){case"AAsmall":case"AAAlarge":it=ot>=4.5;break;case"AAlarge":it=ot>=3;break;case"AAAsmall":it=ot>=7}return it},d.mostReadable=function(g,B,V){var q,it,ot,At,gt=null,mt=0;it=(V=V||{}).includeFallbackColors,ot=V.level,At=V.size;for(var Ot=0;Ot<B.length;Ot++)(q=d.readability(g,B[Ot]))>mt&&(mt=q,gt=d(B[Ot]));return d.isReadable(g,gt,{level:ot,size:At})||!it?gt:(V.includeFallbackColors=!1,d.mostReadable(g,["#fff","#000"],V))};var Nt=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},wt=d.hexNames=function(g){var B={};for(var V in g)g.hasOwnProperty(V)&&(B[g[V]]=V);return B}(Nt);function H(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function ht(g,B){(function(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1})(g)&&(g="100%");var V=function(q){return typeof q=="string"&&q.indexOf("%")!=-1}(g);return g=y(B,n(0,parseFloat(g))),V&&(g=parseInt(g*B,10)/100),m.abs(g-B)<1e-6?1:g%B/parseFloat(B)}function dt(g){return y(1,n(0,g))}function yt(g){return parseInt(g,16)}function Mt(g){return g.length==1?"0"+g:""+g}function $(g){return g<=1&&(g=100*g+"%"),g}function lt(g){return m.round(255*parseFloat(g)).toString(16)}function rt(g){return yt(g)/255}var z,P,Y,k=(P="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",Y="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function h(g){return!!k.CSS_UNIT.exec(g)}a.exports?a.exports=d:(i=function(){return d}.call(A,e,A,a))===void 0||(a.exports=i)})(Math)},function(a,A,e){a.exports={EPSILON:e(233),create:e(234),clone:e(477),fromValues:e(478),copy:e(479),set:e(235),equals:e(480),exactEquals:e(481),add:e(236),subtract:e(150),sub:e(482),multiply:e(237),mul:e(483),divide:e(238),div:e(484),inverse:e(485),min:e(486),max:e(487),rotate:e(488),floor:e(489),ceil:e(490),round:e(491),scale:e(492),scaleAndAdd:e(493),distance:e(239),dist:e(494),squaredDistance:e(240),sqrDist:e(495),length:e(241),len:e(496),squaredLength:e(242),sqrLen:e(497),negate:e(498),normalize:e(243),dot:e(244),cross:e(499),lerp:e(500),random:e(501),transformMat2:e(502),transformMat2d:e(503),transformMat3:e(504),transformMat4:e(505),forEach:e(506),limit:e(507)}},function(a,A,e){var i=e(96),p=e(278),m=e(279),S=e(280),l=e(281),M=e(282);function j(y){var n=this.__data__=new i(y);this.size=n.size}j.prototype.clear=p,j.prototype.delete=m,j.prototype.get=S,j.prototype.has=l,j.prototype.set=M,a.exports=j},function(a,A,e){var i=e(273),p=e(274),m=e(275),S=e(276),l=e(277);function M(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=p,M.prototype.get=m,M.prototype.has=S,M.prototype.set=l,a.exports=M},function(a,A,e){var i=e(71);a.exports=function(p,m){for(var S=p.length;S--;)if(i(p[S][0],m))return S;return-1}},function(a,A,e){var i=e(64)(Object,"create");a.exports=i},function(a,A,e){var i=e(297);a.exports=function(p,m){var S=p.__data__;return i(m)?S[typeof m=="string"?"string":"hash"]:S.map}},function(a,A,e){var i=e(101),p=e(71),m=Object.prototype.hasOwnProperty;a.exports=function(S,l,M){var j=S[l];m.call(S,l)&&p(j,M)&&(M!==void 0||l in S)||i(S,l,M)}},function(a,A,e){var i=e(166);a.exports=function(p,m,S){m=="__proto__"&&i?i(p,m,{configurable:!0,enumerable:!0,value:S,writable:!0}):p[m]=S}},function(a,A){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}var i=/^(?:0|[1-9]\d*)$/;a.exports=function(p,m){var S=e(p);return!!(m=m==null?9007199254740991:m)&&(S=="number"||S!="symbol"&&i.test(p))&&p>-1&&p%1==0&&p<m}},function(a,A){a.exports=function(e){return function(i){return e(i)}}},function(a,A){var e=Object.prototype;a.exports=function(i){var p=i&&i.constructor;return i===(typeof p=="function"&&p.prototype||e)}},function(a,A,e){var i=e(168)(Object.getPrototypeOf,Object);a.exports=i},function(a,A,e){var i=e(135),p=e(326)(i);a.exports=p},function(a,A,e){var i=e(108),p=e(87);a.exports=function(m,S){for(var l=0,M=(S=i(S,m)).length;m!=null&&l<M;)m=m[p(S[l++])];return l&&l==M?m:void 0}},function(a,A,e){var i=e(26),p=e(138),m=e(340),S=e(191);a.exports=function(l,M){return i(l)?l:p(l,M)?[l]:m(S(l))}},function(a,A){a.exports=function(e,i){for(var p=-1,m=e==null?0:e.length,S=Array(m);++p<m;)S[p]=i(e[p],p,e);return S}},function(a,A,e){var i=e(66),p=e(200),m=e(201);a.exports=function(S,l){return m(p(S,l,i),S+"")}},function(a,A,e){function i(M){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(M)}var p=e(71),m=e(53),S=e(102),l=e(43);a.exports=function(M,j,y){if(!l(y))return!1;var n=i(j);return!!(n=="number"?m(y)&&S(j,y.length):n=="string"&&j in y)&&p(y[j],M)}},function(a,A,e){"use strict";var i=e(24);a.exports={longestPath:function(m){var S={};i.forEach(m.sources(),function l(M){var j=m.node(M);if(i.has(S,M))return j.rank;S[M]=!0;var y=i.min(i.map(m.outEdges(M),function(n){return l(n.w)-m.edge(n).minlen}));return y!==Number.POSITIVE_INFINITY&&y!=null||(y=0),j.rank=y})},slack:function(m,S){return m.node(S.w).rank-m.node(S.v).rank-m.edge(S).minlen}}},function(a,A){},function(a,A,e){"use strict";var i=function(){function p(m,S){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=m,this.name=m,this.originalEvent=S,this.timeStamp=S.timeStamp}return p.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},p.prototype.stopPropagation=function(){this.propagationStopped=!0},p.prototype.toString=function(){return"[Event (type="+this.type+")]"},p.prototype.save=function(){},p.prototype.restore=function(){},p}();A.a=i},function(a,A,e){"use strict";var i=e(1),p=e(79),m=e(19),S=function(l){function M(j){var y=l.call(this)||this;y.destroyed=!1;var n=y.getDefaultCfg();return y.cfg=Object(m.i)(n,j),y}return Object(i.b)(M,l),M.prototype.getDefaultCfg=function(){return{}},M.prototype.get=function(j){return this.cfg[j]},M.prototype.set=function(j,y){this.cfg[j]=y},M.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},M}(p.a);A.a=S},function(a,A,e){"use strict";e.d(A,"a",function(){return p});var i=null;function p(){if(!i){var m=document.createElement("canvas");m.width=1,m.height=1,i=m.getContext("2d")}return i}},function(a,A,e){"use strict";var i=e(1),p=e(118),m=e(19),S={},l=function(M){function j(){return M!==null&&M.apply(this,arguments)||this}return Object(i.b)(j,M),j.prototype.isCanvas=function(){return!1},j.prototype.getBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,E=[],O=[],C=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return C.length>0?(Object(m.a)(C,function(v){var x=v.getBBox();E.push(x.minX,x.maxX),O.push(x.minY,x.maxY)}),y=Math.min.apply(null,E),n=Math.max.apply(null,E),s=Math.min.apply(null,O),d=Math.max.apply(null,O)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},j.prototype.getCanvasBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,E=[],O=[],C=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return C.length>0?(Object(m.a)(C,function(v){var x=v.getCanvasBBox();E.push(x.minX,x.maxX),O.push(x.minY,x.maxY)}),y=Math.min.apply(null,E),n=Math.max.apply(null,E),s=Math.min.apply(null,O),d=Math.max.apply(null,O)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},j.prototype.getDefaultCfg=function(){var y=M.prototype.getDefaultCfg.call(this);return y.children=[],y},j.prototype.onAttrChange=function(y,n,s){if(M.prototype.onAttrChange.call(this,y,n,s),y==="matrix"){var d=this.getTotalMatrix();this._applyChildrenMarix(d)}},j.prototype.applyMatrix=function(y){var n=this.getTotalMatrix();M.prototype.applyMatrix.call(this,y);var s=this.getTotalMatrix();s!==n&&this._applyChildrenMarix(s)},j.prototype._applyChildrenMarix=function(y){var n=this.getChildren();Object(m.a)(n,function(s){s.applyMatrix(y)})},j.prototype.addShape=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s=y[0],d=y[1];Object(m.f)(s)?d=s:d.type=s;var E=S[d.type];E||(E=Object(m.k)(d.type),S[d.type]=E);var O=this.getShapeBase(),C=new O[E](d);return this.add(C),C},j.prototype.addGroup=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s,d=y[0],E=y[1];if(Object(m.d)(d))s=new d(E||{parent:this});else{var O=d||{},C=this.getGroupBase();s=new C(O)}return this.add(s),s},j.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},j.prototype.getShape=function(y,n,s){if(!Object(m.b)(this))return null;var d,E=this.getChildren();if(this.isCanvas())d=this._findShape(E,y,n,s);else{var O=[y,n,1];O=this.invertFromMatrix(O),this.isClipped(O[0],O[1])||(d=this._findShape(E,O[0],O[1],s))}return d},j.prototype._findShape=function(y,n,s,d){for(var E=null,O=y.length-1;O>=0;O--){var C=y[O];if(Object(m.b)(C)&&(C.isGroup()?E=C.getShape(n,s,d):C.isHit(n,s)&&(E=C)),E)break}return E},j.prototype.add=function(y){var n=this.getCanvas(),s=this.getChildren(),d=this.get("timeline"),E=y.getParent();E&&function(O,C,v){v===void 0&&(v=!0),v?C.destroy():(C.set("parent",null),C.set("canvas",null)),Object(m.j)(O.getChildren(),C)}(E,y,!1),y.set("parent",this),n&&function O(C,v){if(C.set("canvas",v),C.isGroup()){var x=C.get("children");x.length&&x.forEach(function(T){O(T,v)})}}(y,n),d&&function O(C,v){if(C.set("timeline",v),C.isGroup()){var x=C.get("children");x.length&&x.forEach(function(T){O(T,v)})}}(y,d),s.push(y),y.onCanvasChange("add"),this._applyElementMatrix(y)},j.prototype._applyElementMatrix=function(y){var n=this.getTotalMatrix();n&&y.applyMatrix(n)},j.prototype.getChildren=function(){return this.get("children")},j.prototype.sort=function(){var y,n=this.getChildren();Object(m.a)(n,function(s,d){return s._INDEX=d,s}),n.sort((y=function(d,E){return d.get("zIndex")-E.get("zIndex")},function(s,d){var E=y(s,d);return E===0?s._INDEX-d._INDEX:E})),this.onCanvasChange("sort")},j.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var y=this.getChildren(),n=y.length-1;n>=0;n--)y[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},j.prototype.destroy=function(){this.get("destroyed")||(this.clear(),M.prototype.destroy.call(this))},j.prototype.getFirst=function(){return this.getChildByIndex(0)},j.prototype.getLast=function(){var y=this.getChildren();return this.getChildByIndex(y.length-1)},j.prototype.getChildByIndex=function(y){return this.getChildren()[y]},j.prototype.getCount=function(){return this.getChildren().length},j.prototype.contain=function(y){return this.getChildren().indexOf(y)>-1},j.prototype.removeChild=function(y,n){n===void 0&&(n=!0),this.contain(y)&&y.remove(n)},j.prototype.findAll=function(y){var n=[],s=this.getChildren();return Object(m.a)(s,function(d){y(d)&&n.push(d),d.isGroup()&&(n=n.concat(d.findAll(y)))}),n},j.prototype.find=function(y){var n=null,s=this.getChildren();return Object(m.a)(s,function(d){if(y(d)?n=d:d.isGroup()&&(n=d.find(y)),n)return!1}),n},j.prototype.findById=function(y){return this.find(function(n){return n.get("id")===y})},j.prototype.findByClassName=function(y){return this.find(function(n){return n.get("className")===y})},j.prototype.findAllByName=function(y){return this.findAll(function(n){return n.get("name")===y})},j}(p.a);A.a=l},function(a,A,e){"use strict";var i=e(1),p=e(0),m=e(10),S=e(19),l=e(39),M=e(115),j=m.a.transform,y=["zIndex","capture","visible","type"],n=["repeat"];function s(C,v){var x={},T=v.attrs;for(var N in C)x[N]=T[N];return x}function d(C,v){var x={},T=v.attr();return Object(p.f)(C,function(N,X){n.indexOf(X)!==-1||Object(p.q)(T[X],N)||(x[X]=N)}),x}function E(C,v){if(v.onFrame)return C;var x=v.startTime,T=v.delay,N=v.duration,X=Object.prototype.hasOwnProperty;return Object(p.f)(C,function(tt){x+T<tt.startTime+tt.delay+tt.duration&&N>tt.delay&&Object(p.f)(v.toAttrs,function(nt,vt){X.call(tt.toAttrs,vt)&&(delete tt.toAttrs[vt],delete tt.fromAttrs[vt])})}),C}var O=function(C){function v(x){var T=C.call(this,x)||this;T.attrs={};var N=T.getDefaultAttrs();return Object(p.A)(N,x.attrs),T.attrs=N,T.initAttrs(N),T.initAnimate(),T}return Object(i.b)(v,C),v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(x){},v.prototype.initAttrs=function(x){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var x,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var X=T[0],tt=T[1];if(!X)return this.attrs;if(Object(p.v)(X)){for(var nt in X)this.setAttr(nt,X[nt]);return this.afterAttrsChange(X),this}return T.length===2?(this.setAttr(X,tt),this.afterAttrsChange(((x={})[X]=tt,x)),this):this.attrs[X]},v.prototype.isClipped=function(x,T){var N=this.getClip();return N&&!N.isHit(x,T)},v.prototype.setAttr=function(x,T){var N=this.attrs[x];N!==T&&(this.attrs[x]=T,this.onAttrChange(x,T,N))},v.prototype.onAttrChange=function(x,T,N){x==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var T=this.cfg.applyTo;T&&T.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(x){this.set("zIndex",x);var T=this.getParent();return T&&T.sort(),this},v.prototype.toFront=function(){var x=this.getParent();if(x){var T=x.getChildren(),N=(this.get("el"),T.indexOf(this));T.splice(N,1),T.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var x=this.getParent();if(x){var T=x.getChildren(),N=(this.get("el"),T.indexOf(this));T.splice(N,1),T.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(x){x===void 0&&(x=!0);var T=this.getParent();T?(Object(S.j)(T.getChildren(),this),T.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},v.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr("matrix")},v.prototype.setMatrix=function(x){this.attr("matrix",x),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var T=this.attr("matrix"),N=this.cfg.parentMatrix;x=N&&T?Object(l.b)(N,T):T||N,this.set("totalMatrix",x)}return x},v.prototype.applyMatrix=function(x){var T=this.attr("matrix"),N=null;N=x&&T?Object(l.b)(x,T):T||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(x){var T=this.attr("matrix");return T?Object(l.c)(T,x):x},v.prototype.invertFromMatrix=function(x){var T=this.attr("matrix");if(T){var N=Object(l.a)(T);if(N)return Object(l.c)(N,x)}return x},v.prototype.setClip=function(x){var T=this.getCanvas(),N=null;if(x){var X=this.getShapeBase()[Object(p.I)(x.type)];X&&(N=new X({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:T}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},v.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},v.prototype.clone=function(){var x=this,T=this.attrs,N={};Object(p.f)(T,function(tt,nt){Object(p.m)(T[nt])?N[nt]=function(vt){for(var ft=[],bt=0;bt<vt.length;bt++)Object(p.m)(vt[bt])?ft.push([].concat(vt[bt])):ft.push(vt[bt]);return ft}(T[nt]):N[nt]=T[nt]});var X=new this.constructor({attrs:N});return Object(p.f)(y,function(tt){X.set(tt,x.get(tt))}),X},v.prototype.destroy=function(){this.destroyed||(this.attrs={},C.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=this.isCanvas&&this.isCanvas();if(N||this.get("canvas")){this.set("animating",!0);var X=this.get("timeline");X||(X=this.get("canvas").get("timeline"),this.set("timeline",X));var tt=this.get("animations")||[];X.timer||X.initTimer();var nt,vt,ft,bt,St,pt=x[0],ct=x[1],zt=x[2],Nt=zt===void 0?"easeLinear":zt,wt=x[3],H=wt===void 0?p.C:wt,ht=x[4],dt=ht===void 0?0:ht;Object(p.r)(pt)?(nt=pt,pt={}):Object(p.v)(pt)&&pt.onFrame&&(nt=pt.onFrame,vt=pt.repeat),Object(p.v)(ct)?(ct=(St=ct).duration,Nt=St.easing||"easeLinear",dt=St.delay||0,vt=St.repeat||vt||!1,H=St.callback||p.C,ft=St.pauseCallback||p.C,bt=St.resumeCallback||p.C):(Object(p.t)(H)&&(dt=H,H=null),Object(p.r)(Nt)?(H=Nt,Nt="easeLinear"):Nt=Nt||"easeLinear");var yt=d(pt,this),Mt={fromAttrs:s(yt,this),toAttrs:yt,duration:ct,easing:Nt,repeat:vt,callback:H,pauseCallback:ft,resumeCallback:bt,delay:dt,startTime:X.getTime(),id:Object(p.H)(),onFrame:nt,pathFormatted:!1};tt.length>0?tt=E(tt,Mt):X.addAnimator(this),tt.push(Mt),this.set("animations",tt),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(x){var T=this;x===void 0&&(x=!0);var N=this.get("animations");Object(p.f)(N,function(X){x&&(X.onFrame?T.attr(X.onFrame(1)):T.attr(X.toAttrs)),X.callback&&X.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var x=this.get("timeline"),T=this.get("animations"),N=x.getTime();return Object(p.f)(T,function(X){X._paused=!0,X._pauseTime=N,X.pauseCallback&&X.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},v.prototype.resumeAnimate=function(){var x=this.get("timeline").getTime(),T=this.get("animations"),N=this.get("_pause").pauseTime;return Object(p.f)(T,function(X){X.startTime=X.startTime+(x-N),X._paused=!1,X._pauseTime=null,X.resumeCallback&&X.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",T),this},v.prototype.emitDelegation=function(x,T){var N,X=this,tt=T.propagationPath;this.getEvents(),x==="mouseenter"?N=T.fromShape:x==="mouseleave"&&(N=T.toShape);for(var nt=function(St){var pt=tt[St],ct=pt.get("name");if(ct){if((pt.isGroup()||pt.isCanvas&&pt.isCanvas())&&N&&Object(S.g)(pt,N))return"break";Object(p.m)(ct)?Object(p.f)(ct,function(zt){X.emitDelegateEvent(pt,zt,T)}):vt.emitDelegateEvent(pt,ct,T)}},vt=this,ft=0;ft<tt.length&&nt(ft)!=="break";ft++);},v.prototype.emitDelegateEvent=function(x,T,N){var X=this.getEvents(),tt=T+":"+N.type;(X[tt]||X["*"])&&(N.name=tt,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(tt,N))},v.prototype.translate=function(x,T){x===void 0&&(x=0),T===void 0&&(T=0);var N=this.getMatrix(),X=j(N,[["t",x,T]]);return this.setMatrix(X),this},v.prototype.move=function(x,T){var N=this.attr("x")||0,X=this.attr("y")||0;return this.translate(x-N,T-X),this},v.prototype.moveTo=function(x,T){return this.move(x,T)},v.prototype.scale=function(x,T){var N=this.getMatrix(),X=j(N,[["s",x,T||x]]);return this.setMatrix(X),this},v.prototype.rotate=function(x){var T=this.getMatrix(),N=j(T,[["r",x]]);return this.setMatrix(N),this},v.prototype.rotateAtStart=function(x){var T=this.attr(),N=T.x,X=T.y,tt=this.getMatrix(),nt=j(tt,[["t",-N,-X],["r",x],["t",N,X]]);return this.setMatrix(nt),this},v.prototype.rotateAtPoint=function(x,T,N){var X=this.getMatrix(),tt=j(X,[["t",-x,-T],["r",N],["t",x,T]]);return this.setMatrix(tt),this},v}(M.a);A.a=O},function(a,A,e){"use strict";(function(i){e.d(A,"a",function(){return d});var p=function(){for(var v=0,x=0,T=arguments.length;x<T;x++)v+=arguments[x].length;var N=Array(v),X=0;for(x=0;x<T;x++)for(var tt=arguments[x],nt=0,vt=tt.length;nt<vt;nt++,X++)N[X]=tt[nt];return N},m=function(v,x,T){this.name=v,this.version=x,this.os=T,this.type="browser"},S=function(v){this.version=v,this.type="node",this.name="node",this.os=i.platform},l=function(v,x,T,N){this.name=v,this.version=x,this.os=T,this.bot=N,this.type="bot-device"},M=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},j=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},y=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],s=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(C){return C?O(C):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new j:typeof navigator!="undefined"?O(navigator.userAgent):i!==void 0&&i.version?new S(i.version.slice(1)):null}function E(C){return C!==""&&n.reduce(function(v,x){var T=x[0],N=x[1];if(v)return v;var X=N.exec(C);return!!X&&[T,X]},!1)}function O(C){var v=E(C);if(!v)return null;var x=v[0],T=v[1];if(x==="searchbot")return new M;var N=T[1]&&T[1].split(/[._]/).slice(0,3);N?N.length<3&&(N=p(N,function(vt){for(var ft=[],bt=0;bt<vt;bt++)ft.push("0");return ft}(3-N.length))):N=[];var X=N.join("."),tt=function(vt){for(var ft=0,bt=s.length;ft<bt;ft++){var St=s[ft],pt=St[0];if(St[1].exec(vt))return pt}return null}(C),nt=y.exec(C);return nt&&nt[1]?new l(x,X,tt,nt[1]):new m(x,X,tt)}}).call(this,e(158))},function(a,A,e){"use strict";e.d(A,"b",function(){return j}),e.d(A,"a",function(){return y});var i=e(17),p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,m=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,S=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,l=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function M(n,s){var d=n.match(l);Object(i.c)(d,function(E){var O=E.split(":");s.addColorStop(O[0],O[1])})}function j(n,s,d){if(Object(i.k)(d)){if(d[1]==="("||d[2]==="("){if(d[0]==="l")return function(E,O,C){var v,x,T=p.exec(C),N=parseFloat(T[1])%360*(Math.PI/180),X=T[2],tt=O.getBBox();N>=0&&N<.5*Math.PI?(v={x:tt.minX,y:tt.minY},x={x:tt.maxX,y:tt.maxY}):.5*Math.PI<=N&&N<Math.PI?(v={x:tt.maxX,y:tt.minY},x={x:tt.minX,y:tt.maxY}):Math.PI<=N&&N<1.5*Math.PI?(v={x:tt.maxX,y:tt.maxY},x={x:tt.minX,y:tt.minY}):(v={x:tt.minX,y:tt.maxY},x={x:tt.maxX,y:tt.minY});var nt=Math.tan(N),vt=nt*nt,ft=(x.x-v.x+nt*(x.y-v.y))/(vt+1)+v.x,bt=nt*(x.x-v.x+nt*(x.y-v.y))/(vt+1)+v.y,St=E.createLinearGradient(v.x,v.y,ft,bt);return M(X,St),St}(n,s,d);if(d[0]==="r")return function(E,O,C){var v=m.exec(C),x=parseFloat(v[1]),T=parseFloat(v[2]),N=parseFloat(v[3]),X=v[4];if(N===0){var tt=X.match(l);return tt[tt.length-1].split(":")[1]}var nt=O.getBBox(),vt=nt.maxX-nt.minX,ft=nt.maxY-nt.minY,bt=Math.sqrt(vt*vt+ft*ft)/2,St=E.createRadialGradient(nt.minX+vt*x,nt.minY+ft*T,0,nt.minX+vt/2,nt.minY+ft/2,N*bt);return M(X,St),St}(n,s,d);if(d[0]==="p")return function(E,O,C){if(O.get("patternSource")&&O.get("patternSource")===C)return O.get("pattern");var v,x,T=S.exec(C),N=T[1],X=T[2];function tt(){v=E.createPattern(x,N),O.set("pattern",v),O.set("patternSource",C)}switch(N){case"a":N="repeat";break;case"x":N="repeat-x";break;case"y":N="repeat-y";break;case"n":N="no-repeat";break;default:N="no-repeat"}return x=new Image,X.match(/^data:/i)||(x.crossOrigin="Anonymous"),x.src=X,x.complete?tt():(x.onload=tt,x.src=x.src),v}(n,s,d)}return d}}function y(n){var s=0,d=0,E=0,O=0;return Object(i.g)(n)?n.length===1?s=d=E=O=n[0]:n.length===2?(s=E=n[0],d=O=n[1]):n.length===3?(s=n[0],d=O=n[1],E=n[2]):(s=n[0],d=n[1],E=n[2],O=n[3]):s=d=E=O=n,[s,d,E,O]}},function(a,A,e){"use strict";e.r(A),e.d(A,"gpuDetector",function(){return i});var i=function p(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var m=document.createElement("canvas");return!(!window.WebGLRenderingContext||!m.getContext("webgl")&&!m.getContext("experimental-webgl"))}catch(S){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var S=document.createElement("div");return S.id="webgl-error-message",S.style.fontFamily="monospace",S.style.fontSize="13px",S.style.fontWeight="normal",S.style.textAlign="center",S.style.background="#fff",S.style.color="#000",S.style.padding="1.5em",S.style.width="400px",S.style.margin="5em auto 0",this.webgl||(S.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),S},addGetWebGLMessage:function(S){var l=(S=S||{}).parent!==void 0?S.parent:document.body,M=S.id!==void 0?S.id:"oldie",j=p().getWebGLErrorMessage();j.id=M,l.appendChild(j)}}}},function(a,A,e){"use strict";e.d(A,"a",function(){return i});var i={};e.r(i),e.d(i,"leftTranslate",function(){return m}),e.d(i,"leftRotate",function(){return S}),e.d(i,"leftScale",function(){return l}),e.d(i,"transform",function(){return M}),e.d(i,"direction",function(){return j}),e.d(i,"angleTo",function(){return y}),e.d(i,"vertical",function(){return n});var p=e(2);function m(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(O,E),p.a.multiply(s,O,d)}function S(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(O,E),p.a.multiply(s,O,d)}function l(s,d,E){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(O,E),p.a.multiply(s,O,d)}function M(s,d){for(var E,O,C,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,T=d.length;x<T;x++){var N=d[x];switch(N[0]){case"t":m(v,v,[N[1],N[2]]);break;case"s":l(v,v,[N[1],N[2]]);break;case"r":S(v,v,N[1]);break;case"m":E=v,O=v,C=N[1],p.a.multiply(E,C,O)}}return v}function j(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,E){var O=p.d.angle(s,d),C=j(s,d)>=0;return E?C?2*Math.PI-O:O:C?O:2*Math.PI-O}function n(s,d,E){return E?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.r(A),e.d(A,"mixColor",function(){return O}),e.d(A,"getColorsWithSubjectColor",function(){return C}),e.d(A,"getColorSetsBySubjectColors",function(){return v});var i=e(82),p=e.n(i),m=e(93),S=e.n(m),l=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function M(x,T,N){var X;return(X=Math.round(x.h)>=60&&Math.round(x.h)<=240?N?Math.round(x.h)-2*T:Math.round(x.h)+2*T:N?Math.round(x.h)+2*T:Math.round(x.h)-2*T)<0?X+=360:X>=360&&(X-=360),X}function j(x,T,N){return x.h===0&&x.s===0?x.s:((X=N?x.s-.16*T:T===4?x.s+.16:x.s+.05*T)>1&&(X=1),N&&T===5&&X>.1&&(X=.1),X<.06&&(X=.06),Number(X.toFixed(2)));var X}function y(x,T,N){var X;return(X=N?x.v+.05*T:x.v-.15*T)>1&&(X=1),Number(X.toFixed(2))}function n(x){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=[],X=S()(x),tt=5;tt>0;tt-=1){var nt=X.toHsv(),vt=S()({h:M(nt,tt,!0),s:j(nt,tt,!0),v:y(nt,tt,!0)}).toHexString();N.push(vt)}N.push(X.toHexString());for(var ft=1;ft<=4;ft+=1){var bt=X.toHsv(),St=S()({h:M(bt,ft),s:j(bt,ft),v:y(bt,ft)}).toHexString();N.push(St)}return T.theme==="dark"?l.map(function(pt){var ct=pt.index,zt=pt.opacity;return S.a.mix(T.backgroundColor||"#141414",N[ct],100*zt).toHexString()}):N}var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},d={},E={};Object.keys(s).forEach(function(x){d[x]=n(s[x]),d[x].primary=d[x][5],E[x]=n(s[x],{theme:"dark",backgroundColor:"#141414"}),E[x].primary=E[x][5]}),d.red,d.volcano,d.gold,d.orange,d.yellow,d.lime,d.green,d.cyan,d.blue,d.geekblue,d.purple,d.magenta,d.grey;var O=function(T,N,X){var tt=p()(T),nt=p()(N);return p()([(1-X)*tt.red()+X*nt.red(),(1-X)*tt.green()+X*nt.green(),(1-X)*tt.blue()+X*nt.blue()]).rgb()},C=function(T,N,X,tt){return N===void 0&&(N="#fff"),X===void 0&&(X="default"),tt===void 0&&(tt="rgb(150, 150, 150)"),X==="default"?function(nt,vt,ft){vt===void 0&&(vt="#fff"),ft===void 0&&(ft="rgb(150, 150, 150)");var bt=O(vt,nt,.05).rgb().toString(),St=O(vt,nt,.1).rgb().toString(),pt=O(vt,nt,.2).rgb().toString(),ct=O(vt,nt,.4).rgb().toString(),zt=O(vt,ft,.02).rgb().toString(),Nt=O(vt,ft,.05).rgb().toString(),wt=O(vt,ft,.1).rgb().toString(),H=O(vt,ft,.2).rgb().toString(),ht=O(vt,ft,.3).rgb().toString(),dt=n(nt,{theme:"default",backgroundColor:vt}),yt=p()(nt).hex().toLowerCase(),Mt=dt.indexOf(yt),$=nt;return Mt!==-1&&($=dt[Mt+1]),{mainStroke:nt,mainFill:St,activeStroke:nt,activeFill:bt,inactiveStroke:ct,inactiveFill:bt,selectedStroke:nt,selectedFill:vt,highlightStroke:$,highlightFill:pt,disableStroke:ht,disableFill:Nt,edgeMainStroke:ht,edgeActiveStroke:nt,edgeInactiveStroke:H,edgeSelectedStroke:nt,edgeHighlightStroke:nt,edgeDisableStroke:wt,comboMainStroke:ht,comboMainFill:zt,comboActiveStroke:nt,comboActiveFill:bt,comboInactiveStroke:ht,comboInactiveFill:zt,comboSelectedStroke:nt,comboSelectedFill:zt,comboHighlightStroke:$,comboHighlightFill:zt,comboDisableStroke:H,comboDisableFill:Nt}}(T,N,"rgb(150, 150, 150)"):function(nt,vt,ft){vt===void 0&&(vt="#fff"),ft===void 0&&(ft="#777");var bt=O(vt,nt,.2).rgb().toString(),St=O(vt,nt,.3).rgb().toString(),pt=O(vt,nt,.6).rgb().toString(),ct=O(vt,nt,.8).rgb().toString(),zt=O(vt,ft,.2).rgb().toString(),Nt=O(vt,ft,.25).rgb().toString(),wt=O(vt,ft,.3).rgb().toString(),H=O(vt,ft,.4).rgb().toString(),ht=O(vt,ft,.5).rgb().toString(),dt=n(nt,{theme:"dark",backgroundColor:vt}),yt=p()(nt).hex().toLowerCase(),Mt=dt.indexOf(yt),$=nt;return Mt!==-1&&($=dt[Mt+1]),{mainStroke:ct,mainFill:bt,activeStroke:nt,activeFill:St,inactiveStroke:ct,inactiveFill:bt,selectedStroke:nt,selectedFill:bt,highlightStroke:nt,highlightFill:pt,disableStroke:ht,disableFill:Nt,edgeMainStroke:ft,edgeActiveStroke:nt,edgeInactiveStroke:ft,edgeSelectedStroke:nt,edgeHighlightStroke:nt,edgeDisableStroke:wt,comboMainStroke:H,comboMainFill:Nt,comboActiveStroke:nt,comboActiveFill:zt,comboInactiveStroke:H,comboInactiveFill:Nt,comboSelectedStroke:nt,comboSelectedFill:zt,comboHighlightStroke:$,comboHighlightFill:Nt,comboDisableStroke:H,comboDisableFill:zt}}(T,N,"#777")},v=function(T,N,X,tt){N===void 0&&(N="#fff"),X===void 0&&(X="default"),tt===void 0&&(tt="rgb(150, 150, 150)");var nt=[];return T.forEach(function(vt){nt.push(C(vt,N,X,tt))}),nt}},function(a,A,e){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var p=e(42);a.exports=m;function m(n){this._isDirected=!p.has(n,"directed")||n.directed,this._isMultigraph=!!p.has(n,"multigraph")&&n.multigraph,this._isCompound=!!p.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function S(n,s){n[s]?n[s]++:n[s]=1}function l(n,s){--n[s]||delete n[s]}function M(n,s,d,E){var O=""+s,C=""+d;if(!n&&O>C){var v=O;O=C,C=v}return O+""+C+""+(p.isUndefined(E)?"\0":E)}function j(n,s,d,E){var O=""+s,C=""+d;if(!n&&O>C){var v=O;O=C,C=v}var x={v:O,w:C};return E&&(x.name=E),x}function y(n,s){return M(n,s.v,s.w,s.name)}m.prototype._nodeCount=0,m.prototype._edgeCount=0,m.prototype.isDirected=function(){return this._isDirected},m.prototype.isMultigraph=function(){return this._isMultigraph},m.prototype.isCompound=function(){return this._isCompound},m.prototype.setGraph=function(n){return this._label=n,this},m.prototype.graph=function(){return this._label},m.prototype.setDefaultNodeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultNodeLabelFn=n,this},m.prototype.nodeCount=function(){return this._nodeCount},m.prototype.nodes=function(){return p.keys(this._nodes)},m.prototype.sources=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._in[s])})},m.prototype.sinks=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._out[s])})},m.prototype.setNodes=function(n,s){var d=arguments,E=this;return p.each(n,function(O){d.length>1?E.setNode(O,s):E.setNode(O)}),this},m.prototype.setNode=function(n,s){return p.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=s),this):(this._nodes[n]=arguments.length>1?s:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},m.prototype.node=function(n){return this._nodes[n]},m.prototype.hasNode=function(n){return p.has(this._nodes,n)},m.prototype.removeNode=function(n){var s=this;if(p.has(this._nodes,n)){var d=function(O){s.removeEdge(s._edgeObjs[O])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],p.each(this.children(n),function(E){s.setParent(E)}),delete this._children[n]),p.each(p.keys(this._in[n]),d),delete this._in[n],delete this._preds[n],p.each(p.keys(this._out[n]),d),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},m.prototype.setParent=function(n,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(s))s="\0";else{for(var d=s+="";!p.isUndefined(d);d=this.parent(d))if(d===n)throw new Error("Setting "+s+" as parent of "+n+" would create a cycle");this.setNode(s)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=s,this._children[s][n]=!0,this},m.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},m.prototype.parent=function(n){if(this._isCompound){var s=this._parent[n];if(s!=="\0")return s}},m.prototype.children=function(n){if(p.isUndefined(n)&&(n="\0"),this._isCompound){var s=this._children[n];if(s)return p.keys(s)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},m.prototype.predecessors=function(n){var s=this._preds[n];if(s)return p.keys(s)},m.prototype.successors=function(n){var s=this._sucs[n];if(s)return p.keys(s)},m.prototype.neighbors=function(n){var s=this.predecessors(n);if(s)return p.union(s,this.successors(n))},m.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},m.prototype.filterNodes=function(n){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph());var d=this;p.each(this._nodes,function(O,C){n(C)&&s.setNode(C,O)}),p.each(this._edgeObjs,function(O){s.hasNode(O.v)&&s.hasNode(O.w)&&s.setEdge(O,d.edge(O))});var E={};return this._isCompound&&p.each(s.nodes(),function(O){s.setParent(O,function C(v){var x=d.parent(v);return x===void 0||s.hasNode(x)?(E[v]=x,x):x in E?E[x]:C(x)}(O))}),s},m.prototype.setDefaultEdgeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultEdgeLabelFn=n,this},m.prototype.edgeCount=function(){return this._edgeCount},m.prototype.edges=function(){return p.values(this._edgeObjs)},m.prototype.setPath=function(n,s){var d=this,E=arguments;return p.reduce(n,function(O,C){return E.length>1?d.setEdge(O,C,s):d.setEdge(O,C),C}),this},m.prototype.setEdge=function(){var n,s,d,E,O=!1,C=arguments[0];i(C)==="object"&&C!==null&&"v"in C?(n=C.v,s=C.w,d=C.name,arguments.length===2&&(E=arguments[1],O=!0)):(n=C,s=arguments[1],d=arguments[3],arguments.length>2&&(E=arguments[2],O=!0)),n=""+n,s=""+s,p.isUndefined(d)||(d=""+d);var v=M(this._isDirected,n,s,d);if(p.has(this._edgeLabels,v))return O&&(this._edgeLabels[v]=E),this;if(!p.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(s),this._edgeLabels[v]=O?E:this._defaultEdgeLabelFn(n,s,d);var x=j(this._isDirected,n,s,d);return n=x.v,s=x.w,Object.freeze(x),this._edgeObjs[v]=x,S(this._preds[s],n),S(this._sucs[n],s),this._in[s][v]=x,this._out[n][v]=x,this._edgeCount++,this},m.prototype.edge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d);return this._edgeLabels[E]},m.prototype.hasEdge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d);return p.has(this._edgeLabels,E)},m.prototype.removeEdge=function(n,s,d){var E=arguments.length===1?y(this._isDirected,arguments[0]):M(this._isDirected,n,s,d),O=this._edgeObjs[E];return O&&(n=O.v,s=O.w,delete this._edgeLabels[E],delete this._edgeObjs[E],l(this._preds[s],n),l(this._sucs[n],s),delete this._in[s][E],delete this._out[n][E],this._edgeCount--),this},m.prototype.inEdges=function(n,s){var d=this._in[n];if(d){var E=p.values(d);return s?p.filter(E,function(O){return O.v===s}):E}},m.prototype.outEdges=function(n,s){var d=this._out[n];if(d){var E=p.values(d);return s?p.filter(E,function(O){return O.w===s}):E}},m.prototype.nodeEdges=function(n,s){var d=this.inEdges(n,s);if(d)return d.concat(this.outEdges(n,s))}},function(a,A,e){var i=e(64)(e(47),"Map");a.exports=i},function(a,A,e){var i=e(289),p=e(296),m=e(298),S=e(299),l=e(300);function M(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=p,M.prototype.get=m,M.prototype.has=S,M.prototype.set=l,a.exports=M},function(a,A){a.exports=function(e,i){for(var p=-1,m=e==null?0:e.length;++p<m&&i(e[p],p,e)!==!1;);return e}},function(a,A){a.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(a,A,e){(function(i){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var m=e(163),S=p(A)=="object"&&A&&!A.nodeType&&A,l=S&&p(i)=="object"&&i&&!i.nodeType&&i,M=l&&l.exports===S&&m.process,j=function(){try{var y=l&&l.require&&l.require("util").types;return y||M&&M.binding&&M.binding("util")}catch(n){}}();i.exports=j}).call(this,e(86)(a))},function(a,A,e){var i=e(104),p=e(306),m=Object.prototype.hasOwnProperty;a.exports=function(S){if(!i(S))return p(S);var l=[];for(var M in Object(S))m.call(S,M)&&M!="constructor"&&l.push(M);return l}},function(a,A,e){var i=e(171),p=e(172),m=Object.prototype.propertyIsEnumerable,S=Object.getOwnPropertySymbols,l=S?function(M){return M==null?[]:(M=Object(M),i(S(M),function(j){return m.call(M,j)}))}:p;a.exports=l},function(a,A){a.exports=function(e,i){for(var p=-1,m=i.length,S=e.length;++p<m;)e[S+p]=i[p];return e}},function(a,A,e){var i=e(177);a.exports=function(p){var m=new p.constructor(p.byteLength);return new i(m).set(new i(p)),m}},function(a,A){a.exports=function(e){return function(){return e}}},function(a,A,e){var i=e(136),p=e(58);a.exports=function(m,S){return m&&i(m,S,p)}},function(a,A,e){var i=e(325)();a.exports=i},function(a,A){a.exports=function(e){var i=-1,p=Array(e.size);return e.forEach(function(m){p[++i]=m}),p}},function(a,A,e){function i(M){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(M)}var p=e(26),m=e(75),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;a.exports=function(M,j){if(p(M))return!1;var y=i(M);return!(y!="number"&&y!="symbol"&&y!="boolean"&&M!=null&&!m(M))||l.test(M)||!S.test(M)||j!=null&&M in Object(j)}},function(a,A,e){var i=e(132),p=e(359);a.exports=function m(S,l,M,j,y){var n=-1,s=S.length;for(M||(M=p),y||(y=[]);++n<s;){var d=S[n];l>0&&M(d)?l>1?m(d,l-1,M,j,y):i(y,d):j||(y[y.length]=d)}return y}},function(a,A,e){var i=e(75);a.exports=function(p,m,S){for(var l=-1,M=p.length;++l<M;){var j=p[l],y=m(j);if(y!=null&&(n===void 0?y==y&&!i(y):S(y,n)))var n=y,s=j}return s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingOnSyntax=void 0;var i=e(142),p=function(){function m(S){this._binding=S}return m.prototype.onActivation=function(S){return this._binding.onActivation=S,new i.BindingWhenSyntax(this._binding)},m}();A.BindingOnSyntax=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenSyntax=void 0;var i=e(141),p=e(225),m=function(){function S(l){this._binding=l}return S.prototype.when=function(l){return this._binding.constraint=l,new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetNamed=function(l){return this._binding.constraint=p.namedConstraint(l),new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(l){return l.target!==null&&!l.target.isNamed()&&!l.target.isTagged()},new i.BindingOnSyntax(this._binding)},S.prototype.whenTargetTagged=function(l,M){return this._binding.constraint=p.taggedConstraint(l)(M),new i.BindingOnSyntax(this._binding)},S.prototype.whenInjectedInto=function(l){return this._binding.constraint=function(M){return p.typeConstraint(l)(M.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenParentNamed=function(l){return this._binding.constraint=function(M){return p.namedConstraint(l)(M.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenParentTagged=function(l,M){return this._binding.constraint=function(j){return p.taggedConstraint(l)(M)(j.parentRequest)},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorIs=function(l){return this._binding.constraint=function(M){return p.traverseAncerstors(M,p.typeConstraint(l))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorIs=function(l){return this._binding.constraint=function(M){return!p.traverseAncerstors(M,p.typeConstraint(l))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorNamed=function(l){return this._binding.constraint=function(M){return p.traverseAncerstors(M,p.namedConstraint(l))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorNamed=function(l){return this._binding.constraint=function(M){return!p.traverseAncerstors(M,p.namedConstraint(l))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorTagged=function(l,M){return this._binding.constraint=function(j){return p.traverseAncerstors(j,p.taggedConstraint(l)(M))},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorTagged=function(l,M){return this._binding.constraint=function(j){return!p.traverseAncerstors(j,p.taggedConstraint(l)(M))},new i.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorMatches=function(l){return this._binding.constraint=function(M){return p.traverseAncerstors(M,l)},new i.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorMatches=function(l){return this._binding.constraint=function(M){return!p.traverseAncerstors(M,l)},new i.BindingOnSyntax(this._binding)},S}();A.BindingWhenSyntax=m},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=function(e,i,p){return e[0]=i[0]-p[0],e[1]=i[1]-p[1],e}},function(a,A,e){var i=e(57),p=e(105),m=e(48),S=Function.prototype,l=Object.prototype,M=S.toString,j=l.hasOwnProperty,y=M.call(Object);a.exports=function(n){if(!m(n)||i(n)!="[object Object]")return!1;var s=p(n);if(s===null)return!0;var d=j.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&M.call(d)==y}},function(a,A,e){"use strict";var i=e(1),p=e(155),m=e.n(p),S=e(0),l=e(38),M=e(91),j=l.a.radialLayout,y=l.a.traverseTree,n=function(s){function d(E){var O=s.call(this,E)||this;return O.layoutAnimating=!1,O.set("removeList",[]),O.set("layoutMethod",O.getLayout()),O}return Object(i.b)(d,s),d.prototype.getLayout=function(){var E=this.get("layout");return E?typeof E=="function"?E:(E.type||(E.type="dendrogram"),E.direction||(E.direction="TB"),E.radial?function(O){var C=m.a[E.type](O,E);return j(C),C}:function(O){return m.a[E.type](O,E)}):null},d.indexOfChild=function(E,O){var C=-1;return Object(S.f)(E,function(v,x){if(O===v.id)return C=x,!1}),C},d.prototype.getDefaultCfg=function(){var E=s.prototype.getDefaultCfg.call(this);return E.animate=!0,E},d.prototype.innerAddChild=function(E,O,C){var v=this,x=E.data;x&&(x.x=E.x,x.y=E.y,x.depth=E.depth);var T=v.addItem("node",x,!1);if(O){if(T.set("parent",O),C){var N=O.get("originAttrs");if(N)T.set("originAttrs",N);else{var X=O.getModel();T.set("originAttrs",{x:X.x,y:X.y})}}var tt=O.get("children");tt?tt.push(T):O.set("children",[T]),v.addItem("edge",{source:O,target:T,id:O.get("id")+":"+T.get("id")},!1)}return Object(S.f)(E.children||[],function(nt){v.innerAddChild(nt,T,C)}),v.emit("afteraddchild",{item:T,parent:O}),T},d.prototype.innerUpdateChild=function(E,O,C){var v=this,x=v.findById(E.id);if(x){Object(S.f)(E.children||[],function(ft){v.innerUpdateChild(ft,x,C)});var T,N,X=x.get("children");if(X&&X.length>0)for(var tt=X.length-1;tt>=0;tt--){var nt=X[tt].getModel();d.indexOfChild(E.children||[],nt.id)===-1&&(v.innerRemoveChild(nt.id,{x:E.x,y:E.y},C),X.splice(tt,1))}x.get("originAttrs")&&(T=x.get("originAttrs").x,N=x.get("originAttrs").y);var vt=x.getModel();C&&x.set("originAttrs",{x:vt.x,y:vt.y}),x.set("model",E.data),T===E.x&&N===E.y||x.updatePosition({x:E.x,y:E.y})}else v.innerAddChild(E,O,C)},d.prototype.innerRemoveChild=function(E,O,C){var v=this,x=v.findById(E);if(x)if(Object(S.f)(x.get("children"),function(N){v.innerRemoveChild(N.getModel().id,O,C)}),C){var T=x.getModel();x.set("to",O),x.set("originAttrs",{x:T.x,y:T.y}),v.get("removeList").push(x)}else v.removeItem(x)},d.prototype.changeData=function(E){var O=this;this.getNodes().map(function(C){return O.clearItemStates(C)}),this.getEdges().map(function(C){return O.clearItemStates(C)}),E?(O.data(E),O.render()):O.layout(this.get("fitView"))},d.prototype.changeLayout=function(E){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(E)},d.prototype.updateLayout=function(E){E?(this.set("layout",E),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},d.prototype.refreshLayout=function(E){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(E)},d.prototype.layout=function(E){var O=this.get("data"),C=this.get("layoutMethod")(O,this.get("layout")),v=this.get("animate");this.emit("beforerefreshlayout",{data:O,layoutData:C}),this.emit("beforelayout"),this.innerUpdateChild(C,void 0,v),E&&this.get("viewController").fitView(),v?this.layoutAnimate(C):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:O,layoutData:C}),this.emit("afterlayout")},d.prototype.addChild=function(E,O){this.emit("beforeaddchild",{model:E,parent:O}),Object(S.x)(O)||(O=O.get("id"));var C=this.findDataById(O);C&&(C.children||(C.children=[]),C.children.push(E),this.changeData())},d.prototype.updateChildren=function(E,O){O&&this.findById(O)?(this.findDataById(O).children=E,this.changeData()):console.warn("Update children failed! There is no node with id '"+O+"'")},d.prototype.updateChild=function(E,O){if(O&&this.findById(O)){var C=this.findDataById(O),v=this.findById(E.id);if(C.children||(C.children=[]),v){var x=d.indexOfChild(C.children,E.id);C.children[x]=E}else C.children.push(E);this.changeData()}else this.changeData(E)},d.prototype.removeChild=function(E){var O=this.findById(E);if(O){var C=O.get("parent");if(C&&!C.destroyed){var v=this.findDataById(C.get("id")),x=v&&v.children||[],T=O.getModel(),N=d.indexOfChild(x,T.id);x.splice(N,1)}this.changeData()}},d.prototype.findDataById=function(E,O){var C=this;if(O||(O=C.get("data")),E===O.id)return O;var v=null;return Object(S.f)(O.children||[],function(x){return x.id===E?(v=x,!1):!(v=C.findDataById(E,x))&&void 0}),v},d.prototype.layoutAnimate=function(E,O){var C=this,v=this.get("animateCfg");C.emit("beforeanimate",{data:E}),C.getEdges().forEach(function(x){var T=x.get("model");T.sourceAnchor||(T.sourceAnchor=x.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(x){y(E,function(T){var N=C.findById(T.id);if(N){var X=N.get("originAttrs"),tt=N.get("model");if(X||(X={x:tt.x,y:tt.y},N.set("originAttrs",X)),O){var nt=O(N,x,X,E);N.set("model",Object.assign(tt,nt))}else tt.x=X.x+(T.x-X.x)*x,tt.y=X.y+(T.y-X.y)*x}return!0}),Object(S.f)(C.get("removeList"),function(T){var N=T.getModel(),X=T.get("originAttrs"),tt=T.get("to");N.x=X.x+(tt.x-X.x)*x,N.y=X.y+(tt.y-X.y)*x}),C.refreshPositions()},{duration:v.duration,easing:v.ease,callback:function(){Object(S.f)(C.getNodes(),function(T){T.set("originAttrs",null)}),Object(S.f)(C.get("removeList"),function(T){C.removeItem(T)}),C.set("removeList",[]),v.callback&&v.callback(),C.emit("afteranimate",{data:E})},delay:v.delay})},d.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},d.prototype.isLayoutAnimating=function(){return this.layoutAnimating},d.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},d.prototype.save=function(){return this.get("data")},d}(M.a);A.a=n},function(a,A,e){a.exports={graphlib:e(46),layout:e(382),debug:e(440),util:{time:e(37).time,notime:e(37).notime},version:e(441)}},function(a,A,e){"use strict";var i=Object.prototype.hasOwnProperty,p="~";function m(){}function S(y,n,s){this.fn=y,this.context=n,this.once=s||!1}function l(y,n,s,d,E){if(typeof s!="function")throw new TypeError("The listener must be a function");var O=new S(s,d||y,E),C=p?p+n:n;return y._events[C]?y._events[C].fn?y._events[C]=[y._events[C],O]:y._events[C].push(O):(y._events[C]=O,y._eventsCount++),y}function M(y,n){--y._eventsCount==0?y._events=new m:delete y._events[n]}function j(){this._events=new m,this._eventsCount=0}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(p=!1)),j.prototype.eventNames=function(){var y,n,s=[];if(this._eventsCount===0)return s;for(n in y=this._events)i.call(y,n)&&s.push(p?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(y)):s},j.prototype.listeners=function(y){var n=p?p+y:y,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var d=0,E=s.length,O=new Array(E);d<E;d++)O[d]=s[d].fn;return O},j.prototype.listenerCount=function(y){var n=p?p+y:y,s=this._events[n];return s?s.fn?1:s.length:0},j.prototype.emit=function(y,n,s,d,E,O){var C=p?p+y:y;if(!this._events[C])return!1;var v,x,T=this._events[C],N=arguments.length;if(T.fn){switch(T.once&&this.removeListener(y,T.fn,void 0,!0),N){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,n),!0;case 3:return T.fn.call(T.context,n,s),!0;case 4:return T.fn.call(T.context,n,s,d),!0;case 5:return T.fn.call(T.context,n,s,d,E),!0;case 6:return T.fn.call(T.context,n,s,d,E,O),!0}for(x=1,v=new Array(N-1);x<N;x++)v[x-1]=arguments[x];T.fn.apply(T.context,v)}else{var X,tt=T.length;for(x=0;x<tt;x++)switch(T[x].once&&this.removeListener(y,T[x].fn,void 0,!0),N){case 1:T[x].fn.call(T[x].context);break;case 2:T[x].fn.call(T[x].context,n);break;case 3:T[x].fn.call(T[x].context,n,s);break;case 4:T[x].fn.call(T[x].context,n,s,d);break;default:if(!v)for(X=1,v=new Array(N-1);X<N;X++)v[X-1]=arguments[X];T[x].fn.apply(T[x].context,v)}}return!0},j.prototype.on=function(y,n,s){return l(this,y,n,s,!1)},j.prototype.once=function(y,n,s){return l(this,y,n,s,!0)},j.prototype.removeListener=function(y,n,s,d){var E=p?p+y:y;if(!this._events[E])return this;if(!n)return M(this,E),this;var O=this._events[E];if(O.fn)O.fn!==n||d&&!O.once||s&&O.context!==s||M(this,E);else{for(var C=0,v=[],x=O.length;C<x;C++)(O[C].fn!==n||d&&!O[C].once||s&&O[C].context!==s)&&v.push(O[C]);v.length?this._events[E]=v.length===1?v[0]:v:M(this,E)}return this},j.prototype.removeAllListeners=function(y){var n;return y?(n=p?p+y:y,this._events[n]&&M(this,n)):(this._events=new m,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=p,j.EventEmitter=j,a.exports=j},function(a,A,e){(function(i){var p,m,S,l;function M(j){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}typeof self!="undefined"&&self,l=function(){return function(y){var n={};function s(d){if(n[d])return n[d].exports;var E=n[d]={i:d,l:!1,exports:{}};return y[d].call(E.exports,E,E.exports,s),E.l=!0,E.exports}return s.m=y,s.c=n,s.d=function(d,E,O){s.o(d,E)||Object.defineProperty(d,E,{configurable:!1,enumerable:!0,get:O})},s.n=function(d){var E=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(E,"a",E),E},s.o=function(d,E){return Object.prototype.hasOwnProperty.call(d,E)},s.p="",s(s.s=31)}([function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Array.isArray?Array.isArray(E):Object(d.a)(E,"Array")}},function(y,n,s){"use strict";n.a=function(d){return d!==null&&typeof d!="function"&&isFinite(d.length)}},function(y,n,s){"use strict";var d=s(0),E=s(13);n.a=function(O,C){if(O){if(Object(d.a)(O))for(var v=0,x=O.length;v<x&&C(O[v],v)!==!1;v++);else if(Object(E.a)(O)){for(var T in O)if(O.hasOwnProperty(T)&&C(O[T],T)===!1)break}}}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Function")}},function(y,n,s){"use strict";var d={}.toString;n.a=function(E,O){return d.call(E)==="[object "+O+"]"}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Number")}},function(y,n,s){"use strict";n.a=function(d){return d==null}},function(y,n,s){var d=s(33).mix;y.exports={assign:d}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"String")}},function(y,n,s){"use strict";var d=s(15),E=s(4);n.a=function(O){if(!Object(d.a)(O)||!Object(E.a)(O,"Object"))return!1;if(Object.getPrototypeOf(O)===null)return!0;for(var C=O;Object.getPrototypeOf(C)!==null;)C=Object.getPrototypeOf(C);return Object.getPrototypeOf(O)===C}},function(y,n,s){"use strict";var d=s(6);n.a=function(E){return Object(d.a)(E)?"":E.toString()}},function(y,n,s){var d=s(18),E=function(){function O(C,v){v===void 0&&(v={}),this.options=v,this.rootNode=d(C,v)}return O.prototype.execute=function(){throw new Error("please override this method")},O}();y.exports=E},function(y,n,s){"use strict";var d=s(1);n.a=function(E,O){return!!Object(d.a)(E)&&E.indexOf(O)>-1}},function(y,n,s){"use strict";n.a=function(d){var E=M(d);return d!==null&&E==="object"||E==="function"}},function(y,n,s){"use strict";var d=s(2),E=s(1);n.a=function(O,C){if(!Object(E.a)(O))return O;var v=[];return Object(d.a)(O,function(x,T){C(x,T)&&v.push(x)}),v}},function(y,n,s){"use strict";n.a=function(d){return M(d)==="object"&&d!==null}},function(y,n,s){"use strict";function d(E,O){for(var C in O)O.hasOwnProperty(C)&&C!=="constructor"&&O[C]!==void 0&&(E[C]=O[C])}n.a=function(E,O,C,v){return O&&d(E,O),C&&d(E,C),v&&d(E,v),E}},function(y,n,s){var d=s(30),E=["LR","RL","TB","BT","H","V"],O=["LR","RL","H"],C=E[0];y.exports=function(v,x,T){var N=x.direction||C;if(x.isHorizontal=function(bt){return O.indexOf(bt)>-1}(N),N&&E.indexOf(N)===-1)throw new TypeError("Invalid direction: "+N);if(N===E[0])T(v,x);else if(N===E[1])T(v,x),v.right2left();else if(N===E[2])T(v,x);else if(N===E[3])T(v,x),v.bottom2top();else if(N===E[4]||N===E[5]){var X=d(v,x),tt=X.left,nt=X.right;T(tt,x),T(nt,x),x.isHorizontal?tt.right2left():tt.bottom2top(),nt.translate(tt.x-nt.x,tt.y-nt.y),v.x=tt.x,v.y=nt.y;var vt=v.getBoundingBox();x.isHorizontal?vt.top<0&&v.translate(0,-vt.top):vt.left<0&&v.translate(-vt.left,0)}var ft=x.fixedRoot;return ft===void 0&&(ft=!0),ft&&v.translate(-(v.x+v.width/2+v.hgap),-(v.y+v.height/2+v.vgap)),v}},function(y,n,s){var d=s(7),E={getId:function(v){return v.id||v.name},getHGap:function(v){return v.hgap||18},getVGap:function(v){return v.vgap||18},getChildren:function(v){return v.children},getHeight:function(v){return v.height||36},getWidth:function(v){var x=v.label||" ";return v.width||18*x.split("").length}};function O(C,v){var x=this;if(x.vgap=x.hgap=0,C instanceof O)return C;x.data=C;var T=v.getHGap(C),N=v.getVGap(C);return x.width=v.getWidth(C),x.height=v.getHeight(C),x.id=v.getId(C),x.x=x.y=0,x.depth=0,x.children||(x.children=[]),x.addGap(T,N),x}d.assign(O.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(v,x){this.hgap+=v,this.vgap+=x,this.width+=2*v,this.height+=2*x},eachNode:function(v){for(var x,T=[this];x=T.shift();)v(x),T=x.children.concat(T)},DFTraverse:function(v){this.eachNode(v)},BFTraverse:function(v){for(var x,T=[this];x=T.shift();)v(x),T=T.concat(x.children)},getBoundingBox:function(){var v={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(x){v.left=Math.min(v.left,x.x),v.top=Math.min(v.top,x.y),v.width=Math.max(v.width,x.x+x.width),v.height=Math.max(v.height,x.y+x.height)}),v},translate:function(v,x){v===void 0&&(v=0),x===void 0&&(x=0),this.eachNode(function(T){T.x+=v,T.y+=x})},right2left:function(){var v=this.getBoundingBox();this.eachNode(function(x){x.x=x.x-2*(x.x-v.left)-x.width}),this.translate(v.width,0)},bottom2top:function(){var v=this.getBoundingBox();this.eachNode(function(x){x.y=x.y-2*(x.y-v.top)-x.height}),this.translate(0,v.height)}}),y.exports=function(C,v,x){v===void 0&&(v={});var T,N=new O(C,v=d.assign({},E,v)),X=[N];if(!x&&!C.collapsed){for(;T=X.shift();)if(!T.data.collapsed){var tt=v.getChildren(T.data),nt=tt?tt.length:0;if(T.children=new Array(nt),tt&&nt)for(var vt=0;vt<nt;vt++){var ft=new O(tt[vt],v);T.children[vt]=ft,X.push(ft),ft.parent=T,ft.depth=T.depth+1}}}return N}},function(y,n,s){"use strict";var d=s(6),E=s(20);n.a=function(O,C){var v=Object(E.a)(C),x=v.length;if(Object(d.a)(O))return!x;for(var T=0;T<x;T+=1){var N=v[T];if(C[N]!==O[N]||!(N in O))return!1}return!0}},function(y,n,s){"use strict";var d=s(2),E=s(3),O=Object.keys?function(C){return Object.keys(C)}:function(C){var v=[];return Object(d.a)(C,function(x,T){Object(E.a)(C)&&T==="prototype"||v.push(T)}),v};n.a=O},function(y,n,s){"use strict";var d=s(1),E=Array.prototype.splice;n.a=function(O,C){if(!Object(d.a)(O))return[];for(var v=O?C.length:0,x=v-1;v--;){var T=void 0,N=C[v];v!==x&&N===T||(T=N,E.call(O,N,1))}return O}},function(y,n,s){"use strict";var d=s(12),E=s(2);n.a=function(O){var C=[];return Object(E.a)(O,function(v){Object(d.a)(C,v)||C.push(v)}),C}},function(y,n,s){"use strict";var d=s(0),E=s(3),O=s(24);n.a=function(C,v){if(!v)return{0:C};if(!Object(E.a)(v)){var x=Object(d.a)(v)?v:v.replace(/\s+/g,"").split("*");v=function(N){for(var X="_",tt=0,nt=x.length;tt<nt;tt++)X+=N[x[tt]]&&N[x[tt]].toString();return X}}return Object(O.a)(C,v)}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3),C=Object.prototype.hasOwnProperty;n.a=function(v,x){if(!x||!Object(E.a)(v))return{};var T,N={},X=Object(O.a)(x)?x:function(tt){return tt[x]};return Object(d.a)(v,function(tt){T=X(tt),C.call(N,T)?N[T].push(tt):N[T]=[tt]}),N}},function(y,n,s){"use strict";n.a=function(d,E){return d.hasOwnProperty(E)}},function(y,n,s){"use strict";var d=s(2),E=s(3),O=Object.values?function(C){return Object.values(C)}:function(C){var v=[];return Object(d.a)(C,function(x,T){Object(E.a)(C)&&T==="prototype"||v.push(x)}),v};n.a=O},function(y,n,s){"use strict";var d={}.toString;n.a=function(E){return d.call(E).replace(/^\[object /,"").replace(/]$/,"")}},function(y,n,s){"use strict";var d=Object.prototype;n.a=function(E){var O=E&&E.constructor;return E===(typeof O=="function"&&O.prototype||d)}},function(y,n,s){"use strict";var d=s(15),E=s(1),O=s(8);n.a=function C(v,x){if(v===x)return!0;if(!v||!x||Object(O.a)(v)||Object(O.a)(x))return!1;if(Object(E.a)(v)||Object(E.a)(x)){if(v.length!==x.length)return!1;for(var T=!0,N=0;N<v.length&&(T=C(v[N],x[N]));N++);return T}if(Object(d.a)(v)||Object(d.a)(x)){var X=Object.keys(v),tt=Object.keys(x);if(X.length!==tt.length)return!1;for(T=!0,N=0;N<X.length&&(T=C(v[X[N]],x[X[N]]));N++);return T}return!1}},function(y,n,s){var d=s(18);y.exports=function(E,O){for(var C=d(E.data,O,!0),v=d(E.data,O,!0),x=E.children.length,T=Math.round(x/2),N=O.getSide||function(nt,vt){return vt<T?"right":"left"},X=0;X<x;X++){var tt=E.children[X];N(tt,X)==="right"?v.children.push(tt):C.children.push(tt)}return C.eachNode(function(nt){nt.isRoot()||(nt.side="left")}),v.eachNode(function(nt){nt.isRoot()||(nt.side="right")}),{left:C,right:v}}},function(y,n,s){var d={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};y.exports=d},function(y,n,s){var d=s(11),E=s(113),O=s(17),C=s(7),v=function(T){var N,X;function tt(){return T.apply(this,arguments)||this}return X=T,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return O(this.rootNode,this.options,E)},tt}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new v(T,N).execute()}},function(y,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=s(12);s.d(n,"contains",function(){return d.a}),s.d(n,"includes",function(){return d.a});var E=s(34);s.d(n,"difference",function(){return E.a});var O=s(35);s.d(n,"find",function(){return O.a});var C=s(36);s.d(n,"findIndex",function(){return C.a});var v=s(37);s.d(n,"firstValue",function(){return v.a});var x=s(38);s.d(n,"flatten",function(){return x.a});var T=s(39);s.d(n,"flattenDeep",function(){return T.a});var N=s(40);s.d(n,"getRange",function(){return N.a});var X=s(41);s.d(n,"pull",function(){return X.a});var tt=s(21);s.d(n,"pullAt",function(){return tt.a});var nt=s(42);s.d(n,"reduce",function(){return nt.a});var vt=s(43);s.d(n,"remove",function(){return vt.a});var ft=s(44);s.d(n,"sortBy",function(){return ft.a});var bt=s(45);s.d(n,"union",function(){return bt.a});var St=s(22);s.d(n,"uniq",function(){return St.a});var pt=s(46);s.d(n,"valuesOfKey",function(){return pt.a});var ct=s(47);s.d(n,"head",function(){return ct.a});var zt=s(48);s.d(n,"last",function(){return zt.a});var Nt=s(49);s.d(n,"startsWith",function(){return Nt.a});var wt=s(50);s.d(n,"endsWith",function(){return wt.a});var H=s(14);s.d(n,"filter",function(){return H.a});var ht=s(51);s.d(n,"every",function(){return ht.a});var dt=s(52);s.d(n,"some",function(){return dt.a});var yt=s(53);s.d(n,"group",function(){return yt.a});var Mt=s(24);s.d(n,"groupBy",function(){return Mt.a});var $=s(23);s.d(n,"groupToMap",function(){return $.a});var lt=s(54);s.d(n,"getWrapBehavior",function(){return lt.a});var rt=s(55);s.d(n,"wrapBehavior",function(){return rt.a});var z=s(56);s.d(n,"number2color",function(){return z.a});var P=s(57);s.d(n,"parseRadius",function(){return P.a});var Y=s(58);s.d(n,"clamp",function(){return Y.a});var k=s(59);s.d(n,"fixedBase",function(){return k.a});var h=s(60);s.d(n,"isDecimal",function(){return h.a});var g=s(61);s.d(n,"isEven",function(){return g.a});var B=s(62);s.d(n,"isInteger",function(){return B.a});var V=s(63);s.d(n,"isNegative",function(){return V.a});var q=s(64);s.d(n,"isNumberEqual",function(){return q.a});var it=s(65);s.d(n,"isOdd",function(){return it.a});var ot=s(66);s.d(n,"isPositive",function(){return ot.a});var At=s(67);s.d(n,"maxBy",function(){return At.a});var gt=s(68);s.d(n,"minBy",function(){return gt.a});var mt=s(69);s.d(n,"mod",function(){return mt.a});var Ot=s(70);s.d(n,"toDegree",function(){return Ot.a});var It=s(71);s.d(n,"toInteger",function(){return It.a});var Dt=s(72);s.d(n,"toRadian",function(){return Dt.a});var Ut=s(73);s.d(n,"forIn",function(){return Ut.a});var Ct=s(25);s.d(n,"has",function(){return Ct.a});var Vt=s(74);s.d(n,"hasKey",function(){return Vt.a});var Ht=s(75);s.d(n,"hasValue",function(){return Ht.a});var re=s(20);s.d(n,"keys",function(){return re.a});var pe=s(19);s.d(n,"isMatch",function(){return pe.a});var ye=s(26);s.d(n,"values",function(){return ye.a});var we=s(76);s.d(n,"lowerCase",function(){return we.a});var Ne=s(77);s.d(n,"lowerFirst",function(){return Ne.a});var Ke=s(78);s.d(n,"substitute",function(){return Ke.a});var pn=s(79);s.d(n,"upperCase",function(){return pn.a});var hn=s(80);s.d(n,"upperFirst",function(){return hn.a});var kn=s(27);s.d(n,"getType",function(){return kn.a});var Tn=s(81);s.d(n,"isArguments",function(){return Tn.a});var Rn=s(0);s.d(n,"isArray",function(){return Rn.a});var Mn=s(1);s.d(n,"isArrayLike",function(){return Mn.a});var Cn=s(82);s.d(n,"isBoolean",function(){return Cn.a});var _n=s(83);s.d(n,"isDate",function(){return _n.a});var Kn=s(84);s.d(n,"isError",function(){return Kn.a});var tr=s(3);s.d(n,"isFunction",function(){return tr.a});var or=s(85);s.d(n,"isFinite",function(){return or.a});var nr=s(6);s.d(n,"isNil",function(){return nr.a});var er=s(86);s.d(n,"isNull",function(){return er.a});var Sr=s(5);s.d(n,"isNumber",function(){return Sr.a});var Vr=s(13);s.d(n,"isObject",function(){return Vr.a});var ti=s(15);s.d(n,"isObjectLike",function(){return ti.a});var hi=s(9);s.d(n,"isPlainObject",function(){return hi.a});var Fi=s(28);s.d(n,"isPrototype",function(){return Fi.a});var to=s(87);s.d(n,"isRegExp",function(){return to.a});var si=s(8);s.d(n,"isString",function(){return si.a});var Ci=s(4);s.d(n,"isType",function(){return Ci.a});var Ui=s(88);s.d(n,"isUndefined",function(){return Ui.a});var Li=s(89);s.d(n,"isElement",function(){return Li.a});var Vi=s(90);s.d(n,"requestAnimationFrame",function(){return Vi.a});var ro=s(91);s.d(n,"clearAnimationFrame",function(){return ro.a});var jr=s(92);s.d(n,"augment",function(){return jr.a});var Ji=s(93);s.d(n,"clone",function(){return Ji.a});var pr=s(94);s.d(n,"debounce",function(){return pr.a});var Xr=s(95);s.d(n,"memoize",function(){return Xr.a});var Br=s(96);s.d(n,"deepMix",function(){return Br.a});var Nr=s(2);s.d(n,"each",function(){return Nr.a});var Yr=s(97);s.d(n,"extend",function(){return Yr.a});var Kr=s(98);s.d(n,"indexOf",function(){return Kr.a});var ni=s(99);s.d(n,"isEmpty",function(){return ni.a});var fi=s(29);s.d(n,"isEqual",function(){return fi.a});var $r=s(100);s.d(n,"isEqualWith",function(){return $r.a});var ci=s(101);s.d(n,"map",function(){return ci.a});var Qr=s(102);s.d(n,"mapValues",function(){return Qr.a});var gi=s(16);s.d(n,"mix",function(){return gi.a}),s.d(n,"assign",function(){return gi.a});var Oi=s(103);s.d(n,"get",function(){return Oi.a});var bi=s(104);s.d(n,"set",function(){return bi.a});var zi=s(105);s.d(n,"pick",function(){return zi.a});var Qi=s(106);s.d(n,"throttle",function(){return Qi.a});var io=s(107);s.d(n,"toArray",function(){return io.a});var Wi=s(10);s.d(n,"toString",function(){return Wi.a});var Zi=s(108);s.d(n,"uniqueId",function(){return Zi.a});var Pi=s(109);s.d(n,"noop",function(){return Pi.a});var no=s(110);s.d(n,"identity",function(){return no.a});var Mo=s(111);s.d(n,"size",function(){return Mo.a});var ao=s(112);s.d(n,"Cache",function(){return ao.a})},function(y,n,s){"use strict";var d=s(14),E=s(12);n.a=function(O,C){return C===void 0&&(C=[]),Object(d.a)(O,function(v){return!Object(E.a)(C,v)})}},function(y,n,s){"use strict";var d=s(3),E=s(19),O=s(0),C=s(9);n.a=function(v,x){if(!Object(O.a)(v))return null;var T;if(Object(d.a)(x)&&(T=x),Object(C.a)(x)&&(T=function(tt){return Object(E.a)(tt,x)}),T){for(var N=0;N<v.length;N+=1)if(T(v[N]))return v[N]}return null}},function(y,n,s){"use strict";n.a=function(d,E,O){O===void 0&&(O=0);for(var C=O;C<d.length;C++)if(E(d[C],C))return C;return-1}},function(y,n,s){"use strict";var d=s(6),E=s(0);n.a=function(O,C){for(var v=null,x=0;x<O.length;x++){var T=O[x][C];if(!Object(d.a)(T)){v=Object(E.a)(T)?T[0]:T;break}}return v}},function(y,n,s){"use strict";var d=s(0);n.a=function(E){if(!Object(d.a)(E))return[];for(var O=[],C=0;C<E.length;C++)O=O.concat(E[C]);return O}},function(y,n,s){"use strict";var d=s(0);n.a=function E(O,C){if(C===void 0&&(C=[]),Object(d.a)(O))for(var v=0;v<O.length;v+=1)E(O[v],C);else C.push(O);return C}},function(y,n,s){"use strict";var d=s(0),E=s(14);n.a=function(O){if(!(O=Object(E.a)(O,function(T){return!isNaN(T)})).length)return{min:0,max:0};if(Object(d.a)(O[0])){for(var C=[],v=0;v<O.length;v++)C=C.concat(O[v]);O=C}var x=Math.max.apply(null,O);return{min:Math.min.apply(null,O),max:x}}},function(y,n,s){"use strict";var d=Array.prototype,E=d.splice,O=d.indexOf;n.a=function(C){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];for(var T=0;T<v.length;T++)for(var N=v[T],X=-1;(X=O.call(C,N))>-1;)E.call(C,X,1);return C}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(9);n.a=function(C,v,x){if(!Object(E.a)(C)&&!Object(O.a)(C))return C;var T=x;return Object(d.a)(C,function(N,X){T=v(T,N,X)}),T}},function(y,n,s){"use strict";var d=s(1),E=s(21);n.a=function(O,C){var v=[];if(!Object(d.a)(O))return v;for(var x=-1,T=[],N=O.length;++x<N;){var X=O[x];C(X,x,O)&&(v.push(X),T.push(x))}return Object(E.a)(O,T),v}},function(y,n,s){"use strict";var d=s(0),E=s(8),O=s(3);n.a=function(C,v){var x;if(Object(O.a)(v))x=function(X,tt){return v(X)-v(tt)};else{var T=[];Object(E.a)(v)?T.push(v):Object(d.a)(v)&&(T=v),x=function(X,tt){for(var nt=0;nt<T.length;nt+=1){var vt=T[nt];if(X[vt]>tt[vt])return 1;if(X[vt]<tt[vt])return-1}return 0}}return C.sort(x),C}},function(y,n,s){"use strict";var d=s(22);n.a=function(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];return Object(d.a)([].concat.apply([],E))}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(6);n.a=function(C,v){var x=[],T={};return C.forEach(function(N){var X=N[v];Object(O.a)(X)||(Object(E.a)(X)||(X=[X]),Object(d.a)(X,function(tt){T[tt]||(x.push(tt),T[tt]=!0)}))}),x}},function(y,n,s){"use strict";n.a=function(E){if(Object(d.a)(E))return E[0]};var d=s(1)},function(y,n,s){"use strict";n.a=function(E){if(Object(d.a)(E))return E[E.length-1]};var d=s(1)},function(y,n,s){"use strict";var d=s(0),E=s(8);n.a=function(O,C){return!(!Object(d.a)(O)&&!Object(E.a)(O))&&O[0]===C}},function(y,n,s){"use strict";var d=s(0),E=s(8);n.a=function(O,C){return!(!Object(d.a)(O)&&!Object(E.a)(O))&&O[O.length-1]===C}},function(y,n,s){"use strict";n.a=function(d,E){for(var O=0;O<d.length;O++)if(!E(d[O],O))return!1;return!0}},function(y,n,s){"use strict";n.a=function(d,E){for(var O=0;O<d.length;O++)if(E(d[O],O))return!0;return!1}},function(y,n,s){"use strict";var d=s(23);n.a=function(E,O){if(!O)return[E];var C=Object(d.a)(E,O),v=[];for(var x in C)v.push(C[x]);return v}},function(y,n,s){"use strict";n.a=function(d,E){return d["_wrap_"+E]}},function(y,n,s){"use strict";n.a=function(d,E){if(d["_wrap_"+E])return d["_wrap_"+E];var O=function(v){d[E](v)};return d["_wrap_"+E]=O,O}},function(y,n,s){"use strict";var d={};n.a=function(E){var O=d[E];if(!O){for(var C=E.toString(16),v=C.length;v<6;v++)C="0"+C;O="#"+C,d[E]=O}return O}},function(y,n,s){"use strict";var d=s(0);n.a=function(E){var O=0,C=0,v=0,x=0;return Object(d.a)(E)?E.length===1?O=C=v=x=E[0]:E.length===2?(O=v=E[0],C=x=E[1]):E.length===3?(O=E[0],C=x=E[1],v=E[2]):(O=E[0],C=E[1],v=E[2],x=E[3]):O=C=v=x=E,{r1:O,r2:C,r3:v,r4:x}}},function(y,n,s){"use strict";n.a=function(d,E,O){return d<E?E:d>O?O:d}},function(y,n,s){"use strict";n.a=function(d,E){var O=E.toString(),C=O.indexOf(".");if(C===-1)return Math.round(d);var v=O.substr(C+1).length;return v>20&&(v=20),parseFloat(d.toFixed(v))}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%1!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%2==0}},function(y,n,s){"use strict";var d=s(5),E=Number.isInteger?Number.isInteger:function(O){return Object(d.a)(O)&&O%1==0};n.a=E},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E<0}},function(y,n,s){"use strict";n.a=function(d,E,O){return O===void 0&&(O=1e-5),Math.abs(d-E)<O}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E%2!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&E>0}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3);n.a=function(C,v){if(Object(E.a)(C)){var x,T,N=C[0];return x=Object(O.a)(v)?v(C[0]):C[0][v],Object(d.a)(C,function(X){(T=Object(O.a)(v)?v(X):X[v])>x&&(N=X,x=T)}),N}}},function(y,n,s){"use strict";var d=s(2),E=s(0),O=s(3);n.a=function(C,v){if(Object(E.a)(C)){var x,T,N=C[0];return x=Object(O.a)(v)?v(C[0]):C[0][v],Object(d.a)(C,function(X){(T=Object(O.a)(v)?v(X):X[v])<x&&(N=X,x=T)}),N}}},function(y,n,s){"use strict";n.a=function(d,E){return(d%E+E)%E}},function(y,n,s){"use strict";var d=180/Math.PI;n.a=function(E){return d*E}},function(y,n,s){"use strict";n.a=parseInt},function(y,n,s){"use strict";var d=Math.PI/180;n.a=function(E){return d*E}},function(y,n,s){"use strict";var d=s(2);n.a=d.a},function(y,n,s){"use strict";var d=s(25);n.a=d.a},function(y,n,s){"use strict";var d=s(12),E=s(26);n.a=function(O,C){return Object(d.a)(Object(E.a)(O),C)}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){return Object(d.a)(E).toLowerCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){var O=Object(d.a)(E);return O.charAt(0).toLowerCase()+O.substring(1)}},function(y,n,s){"use strict";n.a=function(d,E){return d&&E?d.replace(/\\?\{([^{}]+)\}/g,function(O,C){return O.charAt(0)==="\\"?O.slice(1):E[C]===void 0?"":E[C]}):d}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){return Object(d.a)(E).toUpperCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(E){var O=Object(d.a)(E);return O.charAt(0).toUpperCase()+O.substring(1)}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Arguments")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Boolean")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Date")}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"Error")}},function(y,n,s){"use strict";var d=s(5);n.a=function(E){return Object(d.a)(E)&&isFinite(E)}},function(y,n,s){"use strict";n.a=function(d){return d===null}},function(y,n,s){"use strict";var d=s(4);n.a=function(E){return Object(d.a)(E,"RegExp")}},function(y,n,s){"use strict";n.a=function(d){return d===void 0}},function(y,n,s){"use strict";n.a=function(d){return d instanceof Element||d instanceof HTMLDocument}},function(y,n,s){"use strict";n.a=function(d){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)})(d)}},function(y,n,s){"use strict";n.a=function(d){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(d)}},function(y,n,s){"use strict";var d=s(16),E=s(3);n.a=function(){for(var O=[],C=0;C<arguments.length;C++)O[C]=arguments[C];for(var v=O[0],x=1;x<O.length;x++){var T=O[x];Object(E.a)(T)&&(T=T.prototype),Object(d.a)(v.prototype,T)}}},function(y,n,s){"use strict";var d=s(0);n.a=function E(O){if(M(O)!=="object"||O===null)return O;var C;if(Object(d.a)(O)){C=[];for(var v=0,x=O.length;v<x;v++)M(O[v])==="object"&&O[v]!=null?C[v]=E(O[v]):C[v]=O[v]}else for(var T in C={},O)M(O[T])==="object"&&O[T]!=null?C[T]=E(O[T]):C[T]=O[T];return C}},function(y,n,s){"use strict";n.a=function(d,E,O){var C;return function(){var v=this,x=arguments,T=function(){C=null,O||d.apply(v,x)},N=O&&!C;clearTimeout(C),C=setTimeout(T,E),N&&d.apply(v,x)}}},function(y,n,s){"use strict";var d=s(3);n.a=function(E,O){if(!Object(d.a)(E))throw new TypeError("Expected a function");var C=function v(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=O?O.apply(this,x):x[0],X=v.cache;if(X.has(N))return X.get(N);var tt=E.apply(this,x);return X.set(N,tt),tt};return C.cache=new Map,C}},function(y,n,s){"use strict";var d=s(0),E=s(9);function O(C,v,x,T){for(var N in x=x||0,T=T||5,v)if(v.hasOwnProperty(N)){var X=v[N];X!==null&&Object(E.a)(X)?(Object(E.a)(C[N])||(C[N]={}),x<T?O(C[N],X,x+1,T):C[N]=v[N]):Object(d.a)(X)?(C[N]=[],C[N]=C[N].concat(X)):X!==void 0&&(C[N]=X)}}n.a=function(C){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];for(var T=0;T<v.length;T+=1)O(C,v[T]);return C}},function(y,n,s){"use strict";var d=s(16),E=s(3);n.a=function(O,C,v,x){Object(E.a)(C)||(v=C,C=O,O=function(){});var T=Object.create?function(X,tt){return Object.create(X,{constructor:{value:tt}})}:function(X,tt){function nt(){}nt.prototype=X;var vt=new nt;return vt.constructor=tt,vt},N=T(C.prototype,O);return O.prototype=Object(d.a)(N,O.prototype),O.superclass=T(C.prototype,C),Object(d.a)(N,v),Object(d.a)(O,x),O}},function(y,n,s){"use strict";var d=s(1);n.a=function(E,O){if(!Object(d.a)(E))return-1;var C=Array.prototype.indexOf;if(C)return C.call(E,O);for(var v=-1,x=0;x<E.length;x++)if(E[x]===O){v=x;break}return v}},function(y,n,s){"use strict";var d=s(6),E=s(1),O=s(27),C=s(28),v=Object.prototype.hasOwnProperty;n.a=function(x){if(Object(d.a)(x))return!0;if(Object(E.a)(x))return!x.length;var T=Object(O.a)(x);if(T==="Map"||T==="Set")return!x.size;if(Object(C.a)(x))return!Object.keys(x).length;for(var N in x)if(v.call(x,N))return!1;return!0}},function(y,n,s){"use strict";var d=s(3),E=s(29);n.a=function(O,C,v){return Object(d.a)(v)?!!v(O,C):Object(E.a)(O,C)}},function(y,n,s){"use strict";var d=s(2),E=s(1);n.a=function(O,C){if(!Object(E.a)(O))return O;var v=[];return Object(d.a)(O,function(x,T){v.push(C(x,T))}),v}},function(y,n,s){"use strict";var d=s(6),E=s(13),O=function(v){return v};n.a=function(C,v){v===void 0&&(v=O);var x={};return Object(E.a)(C)&&!Object(d.a)(C)&&Object.keys(C).forEach(function(T){x[T]=v(C[T],T)}),x}},function(y,n,s){"use strict";var d=s(8);n.a=function(E,O,C){for(var v=0,x=Object(d.a)(O)?O.split("."):O;E&&v<x.length;)E=E[x[v++]];return E===void 0||v<x.length?C:E}},function(y,n,s){"use strict";var d=s(13),E=s(8),O=s(5);n.a=function(C,v,x){var T=C,N=Object(E.a)(v)?v.split("."):v;return N.forEach(function(X,tt){tt<N.length-1?(Object(d.a)(T[X])||(T[X]=Object(O.a)(N[tt+1])?[]:{}),T=T[X]):T[X]=x}),C}},function(y,n,s){"use strict";var d=s(2),E=s(9),O=Object.prototype.hasOwnProperty;n.a=function(C,v){if(C===null||!Object(E.a)(C))return{};var x={};return Object(d.a)(v,function(T){O.call(C,T)&&(x[T]=C[T])}),x}},function(y,n,s){"use strict";n.a=function(d,E,O){var C,v,x,T,N=0;O||(O={});var X=function(){N=O.leading===!1?0:Date.now(),C=null,T=d.apply(v,x),C||(v=x=null)},tt=function(){var vt=Date.now();N||O.leading!==!1||(N=vt);var ft=E-(vt-N);return v=this,x=arguments,ft<=0||ft>E?(C&&(clearTimeout(C),C=null),N=vt,T=d.apply(v,x),C||(v=x=null)):C||O.trailing===!1||(C=setTimeout(X,ft)),T};return tt.cancel=function(){clearTimeout(C),N=0,C=v=x=null},tt}},function(y,n,s){"use strict";var d=s(1);n.a=function(E){return Object(d.a)(E)?Array.prototype.slice.call(E):[]}},function(y,n,s){"use strict";var d={};n.a=function(E){return d[E=E||"g"]?d[E]+=1:d[E]=1,E+d[E]}},function(y,n,s){"use strict";n.a=function(){}},function(y,n,s){"use strict";n.a=function(d){return d}},function(y,n,s){"use strict";n.a=function(O){return Object(d.a)(O)?0:Object(E.a)(O)?O.length:Object.keys(O).length};var d=s(6),E=s(1)},function(y,n,s){"use strict";var d=function(){function E(){this.map={}}return E.prototype.has=function(O){return this.map[O]!==void 0},E.prototype.get=function(O,C){var v=this.map[O];return v===void 0?C:v},E.prototype.set=function(O,C){this.map[O]=C},E.prototype.clear=function(){this.map={}},E.prototype.delete=function(O){delete this.map[O]},E.prototype.size=function(){return Object.keys(this.map).length},E}();n.a=d},function(y,n){function s(E,O,C,v){v===void 0&&(v=[]);var x=this;x.w=E||0,x.h=O||0,x.y=C||0,x.x=0,x.c=v||[],x.cs=v.length,x.prelim=0,x.mod=0,x.shift=0,x.change=0,x.tl=null,x.tr=null,x.el=null,x.er=null,x.msel=0,x.mser=0}function d(E,O){var C=function v(x,T){var N=T?x.y:x.x;return x.children.forEach(function(X){N=Math.min(v(X,T),N)}),N}(E,O);(function v(x,T,N){N?x.y+=T:x.x+=T,x.children.forEach(function(X){v(X,T,N)})})(E,-C,O)}s.fromNode=function(E,O){if(!E)return null;var C=[];return E.children.forEach(function(v){C.push(s.fromNode(v,O))}),O?new s(E.height,E.width,E.x,C):new s(E.width,E.height,E.y,C)},y.exports=function(E,O){O===void 0&&(O={});var C=O.isHorizontal;function v(ft){ft.cs===0?(ft.el=ft,ft.er=ft,ft.msel=ft.mser=0):(ft.el=ft.c[0].el,ft.msel=ft.c[0].msel,ft.er=ft.c[ft.cs-1].er,ft.mser=ft.c[ft.cs-1].mser)}function x(ft,bt,St){for(var pt=ft.c[bt-1],ct=pt.mod,zt=ft.c[bt],Nt=zt.mod;pt!==null&&zt!==null;){tt(pt)>St.low&&(St=St.nxt);var wt=ct+pt.prelim+pt.w-(Nt+zt.prelim);wt>0&&(Nt+=wt,T(ft,bt,St.index,wt));var H=tt(pt),ht=tt(zt);H<=ht&&(pt=X(pt))!==null&&(ct+=pt.mod),H>=ht&&(zt=N(zt))!==null&&(Nt+=zt.mod)}!pt&&zt?function(dt,yt,Mt,$){var lt=dt.c[0].el;lt.tl=Mt;var rt=$-Mt.mod-dt.c[0].msel;lt.mod+=rt,lt.prelim-=rt,dt.c[0].el=dt.c[yt].el,dt.c[0].msel=dt.c[yt].msel}(ft,bt,zt,Nt):pt&&!zt&&function(dt,yt,Mt,$){var lt=dt.c[yt].er;lt.tr=Mt;var rt=$-Mt.mod-dt.c[yt].mser;lt.mod+=rt,lt.prelim-=rt,dt.c[yt].er=dt.c[yt-1].er,dt.c[yt].mser=dt.c[yt-1].mser}(ft,bt,pt,ct)}function T(ft,bt,St,pt){ft.c[bt].mod+=pt,ft.c[bt].msel+=pt,ft.c[bt].mser+=pt,function(ct,zt,Nt,wt){if(Nt!==zt-1){var H=zt-Nt;ct.c[Nt+1].shift+=wt/H,ct.c[zt].shift-=wt/H,ct.c[zt].change-=wt-wt/H}}(ft,bt,St,pt)}function N(ft){return ft.cs===0?ft.tl:ft.c[0]}function X(ft){return ft.cs===0?ft.tr:ft.c[ft.cs-1]}function tt(ft){return ft.y+ft.h}function nt(ft,bt,St){for(;St!==null&&ft>=St.low;)St=St.nxt;return{low:ft,index:bt,nxt:St}}(function ft(bt,St,pt){pt===void 0&&(pt=0),St?(bt.x=pt,pt+=bt.width):(bt.y=pt,pt+=bt.height),bt.children.forEach(function(ct){ft(ct,St,pt)})})(E,C);var vt=s.fromNode(E,C);return function ft(bt){if(bt.cs!==0){ft(bt.c[0]);for(var St=nt(tt(bt.c[0].el),0,null),pt=1;pt<bt.cs;++pt){ft(bt.c[pt]);var ct=tt(bt.c[pt].er);x(bt,pt,St),St=nt(ct,pt,St)}(function(zt){zt.prelim=(zt.c[0].prelim+zt.c[0].mod+zt.c[zt.cs-1].mod+zt.c[zt.cs-1].prelim+zt.c[zt.cs-1].w)/2-zt.w/2})(bt),v(bt)}else v(bt)}(vt),function ft(bt,St){St+=bt.mod,bt.x=bt.prelim+St,function(ct){for(var zt=0,Nt=0,wt=0;wt<ct.cs;wt++)zt+=ct.c[wt].shift,Nt+=zt+ct.c[wt].change,ct.c[wt].mod+=Nt}(bt);for(var pt=0;pt<bt.cs;pt++)ft(bt.c[pt],St)}(vt,0),function ft(bt,St,pt){pt?St.y=bt.x:St.x=bt.x,bt.c.forEach(function(ct,zt){ft(ct,St.children[zt],pt)})}(vt,E,C),d(E,C),E}},function(y,n,s){var d=s(11),E=s(115),O=s(17),C=s(7),v=function(T){var N,X;function tt(){return T.apply(this,arguments)||this}return X=T,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return this.rootNode.width=0,O(this.rootNode,this.options,E)},tt}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new v(T,N).execute()}},function(y,n,s){var d=s(7);function E(C,v){C===void 0&&(C=0),v===void 0&&(v=[]);var x=this;x.x=x.y=0,x.leftChild=x.rightChild=null,x.height=0,x.children=v}var O={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};y.exports=function(C,v){v===void 0&&(v={}),v=d.assign({},O,v);var x,T=0,N=function X(tt){if(!tt)return null;tt.width=0,tt.depth&&tt.depth>T&&(T=tt.depth);var nt=tt.children,vt=nt.length,ft=new E(tt.height,[]);return nt.forEach(function(bt,St){var pt=X(bt);ft.children.push(pt),St===0&&(ft.leftChild=pt),St===vt-1&&(ft.rightChild=pt)}),ft.originNode=tt,ft.isLeaf=tt.isLeaf(),ft}(C);return function X(tt){if(tt.isLeaf||tt.children.length===0)tt.drawingDepth=T;else{var nt=tt.children.map(function(ft){return X(ft)}),vt=Math.min.apply(null,nt);tt.drawingDepth=vt-1}return tt.drawingDepth}(N),function X(tt){tt.x=tt.drawingDepth*v.rankSep,tt.isLeaf?(tt.y=0,x&&(tt.y=x.y+x.height+v.nodeSep,tt.originNode.parent!==x.originNode.parent&&(tt.y+=v.subTreeSep)),x=tt):(tt.children.forEach(function(nt){X(nt)}),tt.y=(tt.leftChild.y+tt.rightChild.y)/2)}(N),function X(tt,nt,vt){vt?(nt.x=tt.x,nt.y=tt.y):(nt.x=tt.y,nt.y=tt.x),tt.children.forEach(function(ft,bt){X(ft,nt.children[bt],vt)})}(N,C,v.isHorizontal),C}},function(y,n,s){var d=s(11),E=s(117),O=s(30),C=s(7),v=["LR","RL","H"],x=v[0],T=function(X){var tt,nt;function vt(){return X.apply(this,arguments)||this}return nt=X,(tt=vt).prototype=Object.create(nt.prototype),tt.prototype.constructor=tt,tt.__proto__=nt,vt.prototype.execute=function(){var ft=this.options,bt=this.rootNode;ft.isHorizontal=!0;var St=ft.indent,pt=St===void 0?20:St,ct=ft.dropCap,zt=ct===void 0||ct,Nt=ft.direction||x;if(Nt&&v.indexOf(Nt)===-1)throw new TypeError("Invalid direction: "+Nt);if(Nt===v[0])E(bt,pt,zt);else if(Nt===v[1])E(bt,pt,zt),bt.right2left();else if(Nt===v[2]){var wt=O(bt,ft),H=wt.left,ht=wt.right;E(H,pt,zt),H.right2left(),E(ht,pt,zt);var dt=H.getBoundingBox();ht.translate(dt.width,0),bt.x=ht.x-bt.width/2}return bt},vt}(d),N={};y.exports=function(X,tt){return tt=C.assign({},N,tt),new T(X,tt).execute()}},function(y,n){y.exports=function(s,d,E){var O=null;s.eachNode(function(C){(function(v,x,T,N){if(!N)try{if(v.id===v.parent.children[0].id)return v.x+=T*v.depth,void(v.y=x?x.y:0)}catch(X){}v.x+=T*v.depth,v.y=x?x.y+x.height:0})(C,O,d,E),O=C})}},function(y,n,s){var d=s(11),E=s(119),O=s(17),C=s(7),v=function(T){var N,X;function tt(){return T.apply(this,arguments)||this}return X=T,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return O(this.rootNode,this.options,E)},tt}(d),x={};y.exports=function(T,N){return N=C.assign({},x,N),new v(T,N).execute()}},function(y,n,s){var d=s(7),E={getSubTreeSep:function(){return 0}};y.exports=function(O,C){C===void 0&&(C={}),C=d.assign({},E,C),O.parent={x:0,width:0,height:0,y:0},O.BFTraverse(function(v){v.x=v.parent.x+v.parent.width}),O.parent=null,function v(x,T){var N=0;return x.children.length?x.children.forEach(function(X){N+=v(X,T)}):N=x.height,x._subTreeSep=T.getSubTreeSep(x.data),x.totalHeight=Math.max(x.height,N)+2*x._subTreeSep,x.totalHeight}(O,C),O.startY=0,O.y=O.totalHeight/2-O.height/2,O.eachNode(function(v){var x=v.children,T=x.length;if(T){var N=x[0];if(N.startY=v.startY+v._subTreeSep,T===1)N.y=v.y+v.height/2-N.height/2;else{N.y=N.startY+N.totalHeight/2-N.height/2;for(var X=1;X<T;X++){var tt=x[X];tt.startY=x[X-1].startY+x[X-1].totalHeight,tt.y=tt.startY+tt.totalHeight/2-tt.height/2}}}}),function v(x){var T=x.children,N=T.length;if(N){T.forEach(function(bt){v(bt)});var X=T[0],tt=T[N-1],nt=tt.y-X.y+tt.height,vt=0;if(T.forEach(function(bt){vt+=bt.totalHeight}),nt>x.height)x.y=X.y+nt/2-x.height/2;else if(T.length!==1||x.height>vt){var ft=x.y+(x.height-nt)/2-X.y;T.forEach(function(bt){bt.translate(0,ft)})}else x.y=(X.y+X.height/2+tt.y+tt.height/2)/2-x.height/2}}(O)}}])},M(A)==="object"&&M(i)==="object"?i.exports=l():(m=[],(S=typeof(p=l)=="function"?p.apply(A,m):p)===void 0||(i.exports=S))}).call(this,e(86)(a))},function(a,A){},function(a,A){},function(a,A){var e,i,p=a.exports={};function m(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}function l(C){if(e===setTimeout)return setTimeout(C,0);if((e===m||!e)&&setTimeout)return e=setTimeout,setTimeout(C,0);try{return e(C,0)}catch(v){try{return e.call(null,C,0)}catch(x){return e.call(this,C,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:m}catch(C){e=m}try{i=typeof clearTimeout=="function"?clearTimeout:S}catch(C){i=S}})();var M,j=[],y=!1,n=-1;function s(){y&&M&&(y=!1,M.length?j=M.concat(j):n=-1,j.length&&d())}function d(){if(!y){var C=l(s);y=!0;for(var v=j.length;v;){for(M=j,j=[];++n<v;)M&&M[n].run();n=-1,v=j.length}M=null,y=!1,function(x){if(i===clearTimeout)return clearTimeout(x);if((i===S||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(x);try{i(x)}catch(T){try{return i.call(null,x)}catch(N){return i.call(this,x)}}}(C)}}function E(C,v){this.fun=C,this.array=v}function O(){}p.nextTick=function(C){var v=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)v[x-1]=arguments[x];j.push(new E(C,v)),j.length!==1||y||l(d)},E.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=O,p.addListener=O,p.once=O,p.off=O,p.removeListener=O,p.removeAllListeners=O,p.emit=O,p.prependListener=O,p.prependOnceListener=O,p.listeners=function(C){return[]},p.binding=function(C){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(C){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(a,A,e){"use strict";var i=e(1),p=function(m){function S(){return m!==null&&m.apply(this,arguments)||this}return Object(i.b)(S,m),S.prototype.isGroup=function(){return!0},S.prototype.isEntityGroup=function(){return!1},S.prototype.clone=function(){for(var l=m.prototype.clone.call(this),M=this.getChildren(),j=0;j<M.length;j++){var y=M[j];l.add(y.clone())}return l},S}(e(117).a);A.a=p},function(a,A,e){"use strict";var i=e(1),p=e(118),m=e(39),S=function(l){function M(j){return l.call(this,j)||this}return Object(i.b)(M,l),M.prototype._isInBBox=function(j,y){var n=this.getBBox();return n.minX<=j&&n.maxX>=j&&n.minY<=y&&n.maxY>=y},M.prototype.afterAttrsChange=function(j){l.prototype.afterAttrsChange.call(this,j),this.clearCacheBBox()},M.prototype.getBBox=function(){var j=this.cfg.bbox;return j||(j=this.calculateBBox(),this.set("bbox",j)),j},M.prototype.getCanvasBBox=function(){var j=this.cfg.canvasBBox;return j||(j=this.calculateCanvasBBox(),this.set("canvasBBox",j)),j},M.prototype.applyMatrix=function(j){l.prototype.applyMatrix.call(this,j),this.set("canvasBBox",null)},M.prototype.calculateCanvasBBox=function(){var j=this.getBBox(),y=this.getTotalMatrix(),n=j.minX,s=j.minY,d=j.maxX,E=j.maxY;if(y){var O=Object(m.c)(y,[j.minX,j.minY]),C=Object(m.c)(y,[j.maxX,j.minY]),v=Object(m.c)(y,[j.minX,j.maxY]),x=Object(m.c)(y,[j.maxX,j.maxY]);n=Math.min(O[0],C[0],v[0],x[0]),d=Math.max(O[0],C[0],v[0],x[0]),s=Math.min(O[1],C[1],v[1],x[1]),E=Math.max(O[1],C[1],v[1],x[1])}var T=this.attrs;if(T.shadowColor){var N=T.shadowBlur,X=N===void 0?0:N,tt=T.shadowOffsetX,nt=tt===void 0?0:tt,vt=T.shadowOffsetY,ft=vt===void 0?0:vt,bt=n-X+nt,St=d+X+nt,pt=s-X+ft,ct=E+X+ft;n=Math.min(n,bt),d=Math.max(d,St),s=Math.min(s,pt),E=Math.max(E,ct)}return{x:n,y:s,minX:n,minY:s,maxX:d,maxY:E,width:d-n,height:E-s}},M.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},M.prototype.isClipShape=function(){return this.get("isClipShape")},M.prototype.isInShape=function(j,y){return!1},M.prototype.isOnlyHitBox=function(){return!1},M.prototype.isHit=function(j,y){var n=this.get("startArrowShape"),s=this.get("endArrowShape"),d=[j,y,1],E=(d=this.invertFromMatrix(d))[0],O=d[1],C=this._isInBBox(E,O);return this.isOnlyHitBox()?C:!!(C&&!this.isClipped(E,O)&&(this.isInShape(E,O)||n&&n.isHit(E,O)||s&&s.isHit(E,O)))},M}(p.a);A.a=S},function(a,A,e){var i=e(268),p={};for(var m in i)i.hasOwnProperty(m)&&(p[i[m]]=m);var S=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in S)if(S.hasOwnProperty(l)){if(!("channels"in S[l]))throw new Error("missing channels property: "+l);if(!("labels"in S[l]))throw new Error("missing channel labels property: "+l);if(S[l].labels.length!==S[l].channels)throw new Error("channel and label counts mismatch: "+l);var M=S[l].channels,j=S[l].labels;delete S[l].channels,delete S[l].labels,Object.defineProperty(S[l],"channels",{value:M}),Object.defineProperty(S[l],"labels",{value:j})}S.rgb.hsl=function(y){var n,s,d=y[0]/255,E=y[1]/255,O=y[2]/255,C=Math.min(d,E,O),v=Math.max(d,E,O),x=v-C;return v===C?n=0:d===v?n=(E-O)/x:E===v?n=2+(O-d)/x:O===v&&(n=4+(d-E)/x),(n=Math.min(60*n,360))<0&&(n+=360),s=(C+v)/2,[n,100*(v===C?0:s<=.5?x/(v+C):x/(2-v-C)),100*s]},S.rgb.hsv=function(y){var n,s,d,E,O,C=y[0]/255,v=y[1]/255,x=y[2]/255,T=Math.max(C,v,x),N=T-Math.min(C,v,x),X=function(nt){return(T-nt)/6/N+.5};return N===0?E=O=0:(O=N/T,n=X(C),s=X(v),d=X(x),C===T?E=d-s:v===T?E=1/3+n-d:x===T&&(E=2/3+s-n),E<0?E+=1:E>1&&(E-=1)),[360*E,100*O,100*T]},S.rgb.hwb=function(y){var n=y[0],s=y[1],d=y[2];return[S.rgb.hsl(y)[0],100*(1/255*Math.min(n,Math.min(s,d))),100*(d=1-1/255*Math.max(n,Math.max(s,d)))]},S.rgb.cmyk=function(y){var n,s=y[0]/255,d=y[1]/255,E=y[2]/255;return[100*((1-s-(n=Math.min(1-s,1-d,1-E)))/(1-n)||0),100*((1-d-n)/(1-n)||0),100*((1-E-n)/(1-n)||0),100*n]},S.rgb.keyword=function(y){var n=p[y];if(n)return n;var s,d,E,O=1/0;for(var C in i)if(i.hasOwnProperty(C)){var v=i[C],x=(d=y,E=v,Math.pow(d[0]-E[0],2)+Math.pow(d[1]-E[1],2)+Math.pow(d[2]-E[2],2));x<O&&(O=x,s=C)}return s},S.keyword.rgb=function(y){return i[y]},S.rgb.xyz=function(y){var n=y[0]/255,s=y[1]/255,d=y[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)),100*(.2126*n+.7152*s+.0722*d),100*(.0193*n+.1192*s+.9505*d)]},S.rgb.lab=function(y){var n=S.rgb.xyz(y),s=n[0],d=n[1],E=n[2];return d/=100,E/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116)-16,500*(s-d),200*(d-(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116))]},S.hsl.rgb=function(y){var n,s,d,E,O,C=y[0]/360,v=y[1]/100,x=y[2]/100;if(v===0)return[O=255*x,O,O];n=2*x-(s=x<.5?x*(1+v):x+v-x*v),E=[0,0,0];for(var T=0;T<3;T++)(d=C+1/3*-(T-1))<0&&d++,d>1&&d--,O=6*d<1?n+6*(s-n)*d:2*d<1?s:3*d<2?n+(s-n)*(2/3-d)*6:n,E[T]=255*O;return E},S.hsl.hsv=function(y){var n=y[0],s=y[1]/100,d=y[2]/100,E=s,O=Math.max(d,.01);return s*=(d*=2)<=1?d:2-d,E*=O<=1?O:2-O,[n,100*(d===0?2*E/(O+E):2*s/(d+s)),100*((d+s)/2)]},S.hsv.rgb=function(y){var n=y[0]/60,s=y[1]/100,d=y[2]/100,E=Math.floor(n)%6,O=n-Math.floor(n),C=255*d*(1-s),v=255*d*(1-s*O),x=255*d*(1-s*(1-O));switch(d*=255,E){case 0:return[d,x,C];case 1:return[v,d,C];case 2:return[C,d,x];case 3:return[C,v,d];case 4:return[x,C,d];case 5:return[d,C,v]}},S.hsv.hsl=function(y){var n,s,d,E=y[0],O=y[1]/100,C=y[2]/100,v=Math.max(C,.01);return d=(2-O)*C,s=O*v,[E,100*(s=(s/=(n=(2-O)*v)<=1?n:2-n)||0),100*(d/=2)]},S.hwb.rgb=function(y){var n,s,d,E,O,C,v,x=y[0]/360,T=y[1]/100,N=y[2]/100,X=T+N;switch(X>1&&(T/=X,N/=X),d=6*x-(n=Math.floor(6*x)),(1&n)!=0&&(d=1-d),E=T+d*((s=1-N)-T),n){default:case 6:case 0:O=s,C=E,v=T;break;case 1:O=E,C=s,v=T;break;case 2:O=T,C=s,v=E;break;case 3:O=T,C=E,v=s;break;case 4:O=E,C=T,v=s;break;case 5:O=s,C=T,v=E}return[255*O,255*C,255*v]},S.cmyk.rgb=function(y){var n=y[0]/100,s=y[1]/100,d=y[2]/100,E=y[3]/100;return[255*(1-Math.min(1,n*(1-E)+E)),255*(1-Math.min(1,s*(1-E)+E)),255*(1-Math.min(1,d*(1-E)+E))]},S.xyz.rgb=function(y){var n,s,d,E=y[0]/100,O=y[1]/100,C=y[2]/100;return s=-.9689*E+1.8758*O+.0415*C,d=.0557*E+-.204*O+1.057*C,n=(n=3.2406*E+-1.5372*O+-.4986*C)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,[255*(n=Math.min(Math.max(0,n),1)),255*(s=Math.min(Math.max(0,s),1)),255*(d=Math.min(Math.max(0,d),1))]},S.xyz.lab=function(y){var n=y[0],s=y[1],d=y[2];return s/=100,d/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(n-s),200*(s-(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116))]},S.lab.xyz=function(y){var n,s,d,E=y[0];n=y[1]/500+(s=(E+16)/116),d=s-y[2]/200;var O=Math.pow(s,3),C=Math.pow(n,3),v=Math.pow(d,3);return s=O>.008856?O:(s-16/116)/7.787,n=C>.008856?C:(n-16/116)/7.787,d=v>.008856?v:(d-16/116)/7.787,[n*=95.047,s*=100,d*=108.883]},S.lab.lch=function(y){var n,s=y[0],d=y[1],E=y[2];return(n=360*Math.atan2(E,d)/2/Math.PI)<0&&(n+=360),[s,Math.sqrt(d*d+E*E),n]},S.lch.lab=function(y){var n,s=y[0],d=y[1];return n=y[2]/360*2*Math.PI,[s,d*Math.cos(n),d*Math.sin(n)]},S.rgb.ansi16=function(y){var n=y[0],s=y[1],d=y[2],E=1 in arguments?arguments[1]:S.rgb.hsv(y)[2];if((E=Math.round(E/50))===0)return 30;var O=30+(Math.round(d/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return E===2&&(O+=60),O},S.hsv.ansi16=function(y){return S.rgb.ansi16(S.hsv.rgb(y),y[2])},S.rgb.ansi256=function(y){var n=y[0],s=y[1],d=y[2];return n===s&&s===d?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(d/255*5)},S.ansi16.rgb=function(y){var n=y%10;if(n===0||n===7)return y>50&&(n+=3.5),[n=n/10.5*255,n,n];var s=.5*(1+~~(y>50));return[(1&n)*s*255,(n>>1&1)*s*255,(n>>2&1)*s*255]},S.ansi256.rgb=function(y){if(y>=232){var n=10*(y-232)+8;return[n,n,n]}var s;return y-=16,[Math.floor(y/36)/5*255,Math.floor((s=y%36)/6)/5*255,s%6/5*255]},S.rgb.hex=function(y){var n=(((255&Math.round(y[0]))<<16)+((255&Math.round(y[1]))<<8)+(255&Math.round(y[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},S.hex.rgb=function(y){var n=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var s=n[0];n[0].length===3&&(s=s.split("").map(function(E){return E+E}).join(""));var d=parseInt(s,16);return[d>>16&255,d>>8&255,255&d]},S.rgb.hcg=function(y){var n,s=y[0]/255,d=y[1]/255,E=y[2]/255,O=Math.max(Math.max(s,d),E),C=Math.min(Math.min(s,d),E),v=O-C;return n=v<=0?0:O===s?(d-E)/v%6:O===d?2+(E-s)/v:4+(s-d)/v+4,n/=6,[360*(n%=1),100*v,100*(v<1?C/(1-v):0)]},S.hsl.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=1,E=0;return(d=s<.5?2*n*s:2*n*(1-s))<1&&(E=(s-.5*d)/(1-d)),[y[0],100*d,100*E]},S.hsv.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=n*s,E=0;return d<1&&(E=(s-d)/(1-d)),[y[0],100*d,100*E]},S.hcg.rgb=function(y){var n=y[0]/360,s=y[1]/100,d=y[2]/100;if(s===0)return[255*d,255*d,255*d];var E,O=[0,0,0],C=n%1*6,v=C%1,x=1-v;switch(Math.floor(C)){case 0:O[0]=1,O[1]=v,O[2]=0;break;case 1:O[0]=x,O[1]=1,O[2]=0;break;case 2:O[0]=0,O[1]=1,O[2]=v;break;case 3:O[0]=0,O[1]=x,O[2]=1;break;case 4:O[0]=v,O[1]=0,O[2]=1;break;default:O[0]=1,O[1]=0,O[2]=x}return E=(1-s)*d,[255*(s*O[0]+E),255*(s*O[1]+E),255*(s*O[2]+E)]},S.hcg.hsv=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n),d=0;return s>0&&(d=n/s),[y[0],100*d,100*s]},S.hcg.hsl=function(y){var n=y[1]/100,s=y[2]/100*(1-n)+.5*n,d=0;return s>0&&s<.5?d=n/(2*s):s>=.5&&s<1&&(d=n/(2*(1-s))),[y[0],100*d,100*s]},S.hcg.hwb=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n);return[y[0],100*(s-n),100*(1-s)]},S.hwb.hcg=function(y){var n=y[1]/100,s=1-y[2]/100,d=s-n,E=0;return d<1&&(E=(s-d)/(1-d)),[y[0],100*d,100*E]},S.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},S.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},S.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},S.gray.hsl=S.gray.hsv=function(y){return[0,0,y[0]]},S.gray.hwb=function(y){return[0,100,y[0]]},S.gray.cmyk=function(y){return[0,0,0,y[0]]},S.gray.lab=function(y){return[y[0],0,0]},S.gray.hex=function(y){var n=255&Math.round(y[0]/100*255),s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s},S.rgb.gray=function(y){return[(y[0]+y[1]+y[2])/3/255*100]}},function(a,A,e){var i=e(95),p=e(127),m=e(100),S=e(301),l=e(307),M=e(169),j=e(170),y=e(310),n=e(311),s=e(174),d=e(312),E=e(74),O=e(316),C=e(317),v=e(179),x=e(26),T=e(73),N=e(321),X=e(43),tt=e(323),nt=e(58),vt=e(65),ft={};ft["[object Arguments]"]=ft["[object Array]"]=ft["[object ArrayBuffer]"]=ft["[object DataView]"]=ft["[object Boolean]"]=ft["[object Date]"]=ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Map]"]=ft["[object Number]"]=ft["[object Object]"]=ft["[object RegExp]"]=ft["[object Set]"]=ft["[object String]"]=ft["[object Symbol]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft["[object Error]"]=ft["[object Function]"]=ft["[object WeakMap]"]=!1,a.exports=function bt(St,pt,ct,zt,Nt,wt){var H,ht=1&pt,dt=2&pt,yt=4&pt;if(ct&&(H=Nt?ct(St,zt,Nt,wt):ct(St)),H!==void 0)return H;if(!X(St))return St;var Mt=x(St);if(Mt){if(H=O(St),!ht)return j(St,H)}else{var $=E(St),lt=$=="[object Function]"||$=="[object GeneratorFunction]";if(T(St))return M(St,ht);if($=="[object Object]"||$=="[object Arguments]"||lt&&!Nt){if(H=dt||lt?{}:v(St),!ht)return dt?n(St,l(H,St)):y(St,S(H,St))}else{if(!ft[$])return Nt?St:{};H=C(St,$,ht)}}wt||(wt=new i);var rt=wt.get(St);if(rt)return rt;wt.set(St,H),tt(St)?St.forEach(function(P){H.add(bt(P,pt,ct,P,St,wt))}):N(St)&&St.forEach(function(P,Y){H.set(Y,bt(P,pt,ct,Y,St,wt))});var z=Mt?void 0:(yt?dt?d:s:dt?vt:nt)(St);return p(z||St,function(P,Y){z&&(P=St[Y=P]),m(H,Y,bt(P,pt,ct,Y,St,wt))}),H}},function(a,A,e){(function(i){function p(S){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var m=(i===void 0?"undefined":p(i))=="object"&&i&&i.Object===Object&&i;a.exports=m}).call(this,e(164))},function(a,A){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(p){(typeof window=="undefined"?"undefined":e(window))==="object"&&(i=window)}a.exports=i},function(a,A){var e=Function.prototype.toString;a.exports=function(i){if(i!=null){try{return e.call(i)}catch(p){}try{return i+""}catch(p){}}return""}},function(a,A,e){var i=e(64),p=function(){try{var m=i(Object,"defineProperty");return m({},"",{}),m}catch(S){}}();a.exports=p},function(a,A,e){var i=e(302),p=e(85),m=e(26),S=e(73),l=e(102),M=e(44),j=Object.prototype.hasOwnProperty;a.exports=function(y,n){var s=m(y),d=!s&&p(y),E=!s&&!d&&S(y),O=!s&&!d&&!E&&M(y),C=s||d||E||O,v=C?i(y.length,String):[],x=v.length;for(var T in y)!n&&!j.call(y,T)||C&&(T=="length"||E&&(T=="offset"||T=="parent")||O&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||l(T,x))||v.push(T);return v}},function(a,A){a.exports=function(e,i){return function(p){return e(i(p))}}},function(a,A,e){(function(i){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var m=e(47),S=p(A)=="object"&&A&&!A.nodeType&&A,l=S&&p(i)=="object"&&i&&!i.nodeType&&i,M=l&&l.exports===S?m.Buffer:void 0,j=M?M.allocUnsafe:void 0;i.exports=function(y,n){if(n)return y.slice();var s=y.length,d=j?j(s):new y.constructor(s);return y.copy(d),d}}).call(this,e(86)(a))},function(a,A){a.exports=function(e,i){var p=-1,m=e.length;for(i||(i=Array(m));++p<m;)i[p]=e[p];return i}},function(a,A){a.exports=function(e,i){for(var p=-1,m=e==null?0:e.length,S=0,l=[];++p<m;){var M=e[p];i(M,p,e)&&(l[S++]=M)}return l}},function(a,A){a.exports=function(){return[]}},function(a,A,e){var i=e(132),p=e(105),m=e(131),S=e(172),l=Object.getOwnPropertySymbols?function(M){for(var j=[];M;)i(j,m(M)),M=p(M);return j}:S;a.exports=l},function(a,A,e){var i=e(175),p=e(131),m=e(58);a.exports=function(S){return i(S,m,p)}},function(a,A,e){var i=e(132),p=e(26);a.exports=function(m,S,l){var M=S(m);return p(m)?M:i(M,l(m))}},function(a,A,e){var i=e(64)(e(47),"Set");a.exports=i},function(a,A,e){var i=e(47).Uint8Array;a.exports=i},function(a,A,e){var i=e(133);a.exports=function(p,m){var S=m?i(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.length)}},function(a,A,e){var i=e(180),p=e(105),m=e(104);a.exports=function(S){return typeof S.constructor!="function"||m(S)?{}:i(p(S))}},function(a,A,e){var i=e(43),p=Object.create,m=function(){function S(){}return function(l){if(!i(l))return{};if(p)return p(l);S.prototype=l;var M=new S;return S.prototype=void 0,M}}();a.exports=m},function(a,A,e){a.exports=e(182)},function(a,A,e){var i=e(127),p=e(106),m=e(183),S=e(26);a.exports=function(l,M){return(S(l)?i:p)(l,m(M))}},function(a,A,e){var i=e(66);a.exports=function(p){return typeof p=="function"?p:i}},function(a,A,e){var i=e(171),p=e(327),m=e(54),S=e(26);a.exports=function(l,M){return(S(l)?i:p)(l,m(M,3))}},function(a,A,e){var i=e(330),p=e(48);a.exports=function m(S,l,M,j,y){return S===l||(S==null||l==null||!p(S)&&!p(l)?S!=S&&l!=l:i(S,l,M,j,m,y))}},function(a,A,e){var i=e(187),p=e(333),m=e(188);a.exports=function(S,l,M,j,y,n){var s=1&M,d=S.length,E=l.length;if(d!=E&&!(s&&E>d))return!1;var O=n.get(S),C=n.get(l);if(O&&C)return O==l&&C==S;var v=-1,x=!0,T=2&M?new i:void 0;for(n.set(S,l),n.set(l,S);++v<d;){var N=S[v],X=l[v];if(j)var tt=s?j(X,N,v,l,S,n):j(N,X,v,S,l,n);if(tt!==void 0){if(tt)continue;x=!1;break}if(T){if(!p(l,function(nt,vt){if(!m(T,vt)&&(N===nt||y(N,nt,M,j,n)))return T.push(vt)})){x=!1;break}}else if(N!==X&&!y(N,X,M,j,n)){x=!1;break}}return n.delete(S),n.delete(l),x}},function(a,A,e){var i=e(126),p=e(331),m=e(332);function S(l){var M=-1,j=l==null?0:l.length;for(this.__data__=new i;++M<j;)this.add(l[M])}S.prototype.add=S.prototype.push=p,S.prototype.has=m,a.exports=S},function(a,A){a.exports=function(e,i){return e.has(i)}},function(a,A,e){var i=e(43);a.exports=function(p){return p==p&&!i(p)}},function(a,A){a.exports=function(e,i){return function(p){return p!=null&&p[e]===i&&(i!==void 0||e in Object(p))}}},function(a,A,e){var i=e(343);a.exports=function(p){return p==null?"":i(p)}},function(a,A,e){var i=e(344),p=e(193);a.exports=function(m,S){return m!=null&&p(m,S,i)}},function(a,A,e){var i=e(108),p=e(85),m=e(26),S=e(102),l=e(128),M=e(87);a.exports=function(j,y,n){for(var s=-1,d=(y=i(y,j)).length,E=!1;++s<d;){var O=M(y[s]);if(!(E=j!=null&&n(j,O)))break;j=j[O]}return E||++s!=d?E:!!(d=j==null?0:j.length)&&l(d)&&S(O,d)&&(m(j)||p(j))}},function(a,A){a.exports=function(e){return function(i){return i==null?void 0:i[e]}}},function(a,A,e){var i=e(347),p=e(193);a.exports=function(m,S){return m!=null&&p(m,S,i)}},function(a,A){a.exports=function(e){return e===void 0}},function(a,A,e){var i=e(109),p=e(54),m=e(198),S=e(26);a.exports=function(l,M){return(S(l)?i:m)(l,p(M,3))}},function(a,A,e){var i=e(106),p=e(53);a.exports=function(m,S){var l=-1,M=p(m)?Array(m.length):[];return i(m,function(j,y,n){M[++l]=S(j,y,n)}),M}},function(a,A,e){var i=e(349),p=e(106),m=e(54),S=e(350),l=e(26);a.exports=function(M,j,y){var n=l(M)?i:S,s=arguments.length<3;return n(M,m(j,4),y,s,p)}},function(a,A,e){var i=e(360),p=Math.max;a.exports=function(m,S,l){return S=p(S===void 0?m.length-1:S,0),function(){for(var M=arguments,j=-1,y=p(M.length-S,0),n=Array(y);++j<y;)n[j]=M[S+j];j=-1;for(var s=Array(S+1);++j<S;)s[j]=M[j];return s[S]=l(n),i(m,this,s)}}},function(a,A,e){var i=e(361),p=e(362)(i);a.exports=p},function(a,A,e){var i=e(187),p=e(363),m=e(367),S=e(188),l=e(368),M=e(137);a.exports=function(j,y,n){var s=-1,d=p,E=j.length,O=!0,C=[],v=C;if(n)O=!1,d=m;else if(E>=200){var x=y?null:l(j);if(x)return M(x);O=!1,d=S,v=new i}else v=y?[]:C;t:for(;++s<E;){var T=j[s],N=y?y(T):T;if(T=n||T!==0?T:0,O&&N==N){for(var X=v.length;X--;)if(v[X]===N)continue t;y&&v.push(N),C.push(T)}else d(v,N,n)||(v!==C&&v.push(N),C.push(T))}return C}},function(a,A){a.exports=function(e,i,p,m){for(var S=e.length,l=p+(m?1:-1);m?l--:++l<S;)if(i(e[l],l,e))return l;return-1}},function(a,A,e){var i=e(53),p=e(48);a.exports=function(m){return p(m)&&i(m)}},function(a,A,e){var i=e(370),p=e(58);a.exports=function(m){return m==null?[]:i(m,p(m))}},function(a,A,e){var i=e(42),p=e(207);a.exports=function(S,l,M,j){return function(y,n,s,d){var E,O,C={},v=new p,x=function(N){var X=N.v!==E?N.v:N.w,tt=C[X],nt=s(N),vt=O.distance+nt;if(nt<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+N+" Weight: "+nt);vt<tt.distance&&(tt.distance=vt,tt.predecessor=E,v.decrease(X,vt))};for(y.nodes().forEach(function(T){var N=T===n?0:Number.POSITIVE_INFINITY;C[T]={distance:N},v.add(T,N)});v.size()>0&&(E=v.removeMin(),(O=C[E]).distance!==Number.POSITIVE_INFINITY);)d(E).forEach(x);return C}(S,String(l),M||m,j||function(y){return S.outEdges(y)})};var m=i.constant(1)},function(a,A,e){var i=e(42);function p(){this._arr=[],this._keyIndices={}}a.exports=p,p.prototype.size=function(){return this._arr.length},p.prototype.keys=function(){return this._arr.map(function(m){return m.key})},p.prototype.has=function(m){return i.has(this._keyIndices,m)},p.prototype.priority=function(m){var S=this._keyIndices[m];if(S!==void 0)return this._arr[S].priority},p.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},p.prototype.add=function(m,S){var l=this._keyIndices;if(m=String(m),!i.has(l,m)){var M=this._arr,j=M.length;return l[m]=j,M.push({key:m,priority:S}),this._decrease(j),!0}return!1},p.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var m=this._arr.pop();return delete this._keyIndices[m.key],this._heapify(0),m.key},p.prototype.decrease=function(m,S){var l=this._keyIndices[m];if(S>this._arr[l].priority)throw new Error("New priority is greater than current priority. Key: "+m+" Old: "+this._arr[l].priority+" New: "+S);this._arr[l].priority=S,this._decrease(l)},p.prototype._heapify=function(m){var S=this._arr,l=2*m,M=l+1,j=m;l<S.length&&(j=S[l].priority<S[j].priority?l:j,M<S.length&&(j=S[M].priority<S[j].priority?M:j),j!==m&&(this._swap(m,j),this._heapify(j)))},p.prototype._decrease=function(m){for(var S,l=this._arr,M=l[m].priority;m!==0&&!(l[S=m>>1].priority<M);)this._swap(m,S),m=S},p.prototype._swap=function(m,S){var l=this._arr,M=this._keyIndices,j=l[m],y=l[S];l[m]=y,l[S]=j,M[y.key]=m,M[j.key]=S}},function(a,A,e){var i=e(42);a.exports=function(p){var m=0,S=[],l={},M=[];return p.nodes().forEach(function(j){i.has(l,j)||function y(n){var s=l[n]={onStack:!0,lowlink:m,index:m++};if(S.push(n),p.successors(n).forEach(function(O){i.has(l,O)?l[O].onStack&&(s.lowlink=Math.min(s.lowlink,l[O].index)):(y(O),s.lowlink=Math.min(s.lowlink,l[O].lowlink))}),s.lowlink===s.index){var d,E=[];do d=S.pop(),l[d].onStack=!1,E.push(d);while(n!==d);M.push(E)}}(j)}),M}},function(a,A,e){var i=e(42);function p(S){var l={},M={},j=[];if(i.each(S.sinks(),function y(n){if(i.has(M,n))throw new m;i.has(l,n)||(M[n]=!0,l[n]=!0,i.each(S.predecessors(n),y),delete M[n],j.push(n))}),i.size(l)!==S.nodeCount())throw new m;return j}function m(){}a.exports=p,p.CycleException=m,m.prototype=new Error},function(a,A,e){var i=e(42);a.exports=function(p,m,S){i.isArray(m)||(m=[m]);var l=(p.isDirected()?p.successors:p.neighbors).bind(p),M=[],j={};return i.each(m,function(y){if(!p.hasNode(y))throw new Error("Graph does not have node: "+y);(function n(s,d,E,O,C,v){i.has(O,d)||(O[d]=!0,E||v.push(d),i.each(C(d),function(x){n(s,x,E,O,C,v)}),E&&v.push(d))})(p,y,S==="post",j,l,M)}),M}},function(a,A,e){var i=e(389);a.exports=function(p){return p?(p=i(p))===1/0||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}},function(a,A,e){var i=e(139);a.exports=function(p){return(p==null?0:p.length)?i(p,1):[]}},function(a,A,e){var i=e(101),p=e(71);a.exports=function(m,S,l){(l!==void 0&&!p(m[S],l)||l===void 0&&!(S in m))&&i(m,S,l)}},function(a,A){a.exports=function(e,i){if((i!=="constructor"||typeof e[i]!="function")&&i!="__proto__")return e[i]}},function(a,A){a.exports=function(e,i){return e<i}},function(a,A,e){"use strict";var i=e(24),p=e(46).Graph,m=e(112).slack;function S(j,y){return i.forEach(j.nodes(),function n(s){i.forEach(y.nodeEdges(s),function(d){var E=d.v,O=s===E?d.w:E;j.hasNode(O)||m(y,d)||(j.setNode(O,{}),j.setEdge(s,O,{}),n(O))})}),j.nodeCount()}function l(j,y){return i.minBy(y.edges(),function(n){if(j.hasNode(n.v)!==j.hasNode(n.w))return m(y,n)})}function M(j,y,n){i.forEach(j.nodes(),function(s){y.node(s).rank+=n})}a.exports=function(j){var y,n,s=new p({directed:!1}),d=j.nodes()[0],E=j.nodeCount();for(s.setNode(d,{});S(s,j)<E;)y=l(s,j),n=s.hasNode(y.v)?m(j,y):-m(j,y),M(s,j,n);return s}},function(a,A,e){(function(i,p){function m(l){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var S;(function(l){(function(M){var j=(p===void 0?"undefined":m(p))==="object"?p:(typeof self=="undefined"?"undefined":m(self))==="object"?self:m(this)==="object"?this:Function("return this;")(),y=n(l);function n(s,d){return function(E,O){typeof s[E]!="function"&&Object.defineProperty(s,E,{configurable:!0,writable:!0,value:O}),d&&d(E,O)}}j.Reflect===void 0?j.Reflect=l:y=n(j.Reflect,y),function(s){var d=Object.prototype.hasOwnProperty,E=typeof Symbol=="function",O=E&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",C=E&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",x={__proto__:[]}instanceof Array,T=!v&&!x,N={create:v?function(){return k(Object.create(null))}:x?function(){return k({__proto__:null})}:function(){return k({})},has:T?function(h,g){return d.call(h,g)}:function(h,g){return g in h},get:T?function(h,g){return d.call(h,g)?h[g]:void 0}:function(h,g){return h[g]}},X=Object.getPrototypeOf(Function),tt=(i===void 0?"undefined":m(i))==="object"&&i.env&&i.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",nt=tt||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var h={},g=[],B=function(){function ot(At,gt,mt){this._index=0,this._keys=At,this._values=gt,this._selector=mt}return ot.prototype["@@iterator"]=function(){return this},ot.prototype[C]=function(){return this},ot.prototype.next=function(){var At=this._index;if(At>=0&&At<this._keys.length){var gt=this._selector(this._keys[At],this._values[At]);return At+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:gt,done:!1}}return{value:void 0,done:!0}},ot.prototype.throw=function(At){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),At},ot.prototype.return=function(At){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:At,done:!0}},ot}();return function(){function ot(){this._keys=[],this._values=[],this._cacheKey=h,this._cacheIndex=-2}return Object.defineProperty(ot.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ot.prototype.has=function(At){return this._find(At,!1)>=0},ot.prototype.get=function(At){var gt=this._find(At,!1);return gt>=0?this._values[gt]:void 0},ot.prototype.set=function(At,gt){var mt=this._find(At,!0);return this._values[mt]=gt,this},ot.prototype.delete=function(At){var gt=this._find(At,!1);if(gt>=0){for(var mt=this._keys.length,Ot=gt+1;Ot<mt;Ot++)this._keys[Ot-1]=this._keys[Ot],this._values[Ot-1]=this._values[Ot];return this._keys.length--,this._values.length--,At===this._cacheKey&&(this._cacheKey=h,this._cacheIndex=-2),!0}return!1},ot.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=h,this._cacheIndex=-2},ot.prototype.keys=function(){return new B(this._keys,this._values,V)},ot.prototype.values=function(){return new B(this._keys,this._values,q)},ot.prototype.entries=function(){return new B(this._keys,this._values,it)},ot.prototype["@@iterator"]=function(){return this.entries()},ot.prototype[C]=function(){return this.entries()},ot.prototype._find=function(At,gt){return this._cacheKey!==At&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=At)),this._cacheIndex<0&&gt&&(this._cacheIndex=this._keys.length,this._keys.push(At),this._values.push(void 0)),this._cacheIndex},ot}();function V(ot,At){return ot}function q(ot,At){return At}function it(ot,At){return[ot,At]}}():Map,vt=tt||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function h(){this._map=new nt}return Object.defineProperty(h.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),h.prototype.has=function(g){return this._map.has(g)},h.prototype.add=function(g){return this._map.set(g,g),this},h.prototype.delete=function(g){return this._map.delete(g)},h.prototype.clear=function(){this._map.clear()},h.prototype.keys=function(){return this._map.keys()},h.prototype.values=function(){return this._map.values()},h.prototype.entries=function(){return this._map.entries()},h.prototype["@@iterator"]=function(){return this.keys()},h.prototype[C]=function(){return this.keys()},h}():Set,ft=new(tt||typeof WeakMap!="function"?function(){var h=N.create(),g=B();return function(){function ot(){this._key=B()}return ot.prototype.has=function(At){var gt=V(At,!1);return gt!==void 0&&N.has(gt,this._key)},ot.prototype.get=function(At){var gt=V(At,!1);return gt!==void 0?N.get(gt,this._key):void 0},ot.prototype.set=function(At,gt){return V(At,!0)[this._key]=gt,this},ot.prototype.delete=function(At){var gt=V(At,!1);return gt!==void 0&&delete gt[this._key]},ot.prototype.clear=function(){this._key=B()},ot}();function B(){var ot;do ot="@@WeakMap@@"+it();while(N.has(h,ot));return h[ot]=!0,ot}function V(ot,At){if(!d.call(ot,g)){if(!At)return;Object.defineProperty(ot,g,{value:N.create()})}return ot[g]}function q(ot,At){for(var gt=0;gt<At;++gt)ot[gt]=255*Math.random()|0;return ot}function it(){var ot,At=(ot=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(ot)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(ot)):q(new Uint8Array(ot),ot):q(new Array(ot),ot));At[6]=79&At[6]|64,At[8]=191&At[8]|128;for(var gt="",mt=0;mt<16;++mt){var Ot=At[mt];mt!==4&&mt!==6&&mt!==8||(gt+="-"),Ot<16&&(gt+="0"),gt+=Ot.toString(16).toLowerCase()}return gt}}():WeakMap);function bt(h,g,B){var V=ft.get(h);if(wt(V)){if(!B)return;V=new nt,ft.set(h,V)}var q=V.get(g);if(wt(q)){if(!B)return;q=new nt,V.set(g,q)}return q}function St(h,g,B){var V=bt(g,B,!1);return!wt(V)&&!!V.has(h)}function pt(h,g,B){var V=bt(g,B,!1);if(!wt(V))return V.get(h)}function ct(h,g,B,V){bt(B,V,!0).set(h,g)}function zt(h,g){var B=[],V=bt(h,g,!1);if(wt(V))return B;for(var q=function(gt){var mt=rt(gt,C);if(!$(mt))throw new TypeError;var Ot=mt.call(gt);if(!ht(Ot))throw new TypeError;return Ot}(V.keys()),it=0;;){var ot=z(q);if(!ot)return B.length=it,B;var At=ot.value;try{B[it]=At}catch(gt){try{P(q)}finally{throw gt}}it++}}function Nt(h){if(h===null)return 1;switch(m(h)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return h===null?1:6;default:return 6}}function wt(h){return h===void 0}function H(h){return h===null}function ht(h){return m(h)==="object"?h!==null:typeof h=="function"}function dt(h,g){switch(Nt(h)){case 0:case 1:case 2:case 3:case 4:case 5:return h}var B=g===3?"string":g===5?"number":"default",V=rt(h,O);if(V!==void 0){var q=V.call(h,B);if(ht(q))throw new TypeError;return q}return function(it,ot){if(ot==="string"){var At=it.toString;if($(At)&&!ht(mt=At.call(it))||$(gt=it.valueOf)&&!ht(mt=gt.call(it)))return mt}else{var gt;if($(gt=it.valueOf)&&!ht(mt=gt.call(it)))return mt;var mt,Ot=it.toString;if($(Ot)&&!ht(mt=Ot.call(it)))return mt}throw new TypeError}(h,B==="default"?"number":B)}function yt(h){var g=dt(h,3);return m(g)==="symbol"?g:function(B){return""+B}(g)}function Mt(h){return Array.isArray?Array.isArray(h):h instanceof Object?h instanceof Array:Object.prototype.toString.call(h)==="[object Array]"}function $(h){return typeof h=="function"}function lt(h){return typeof h=="function"}function rt(h,g){var B=h[g];if(B!=null){if(!$(B))throw new TypeError;return B}}function z(h){var g=h.next();return!g.done&&g}function P(h){var g=h.return;g&&g.call(h)}function Y(h){var g=Object.getPrototypeOf(h);if(typeof h!="function"||h===X||g!==X)return g;var B=h.prototype,V=B&&Object.getPrototypeOf(B);if(V==null||V===Object.prototype)return g;var q=V.constructor;return typeof q!="function"||q===h?g:q}function k(h){return h.__=void 0,delete h.__,h}s("decorate",function(h,g,B,V){if(wt(B)){if(!Mt(h))throw new TypeError;if(!lt(g))throw new TypeError;return function(q,it){for(var ot=q.length-1;ot>=0;--ot){var At=(0,q[ot])(it);if(!wt(At)&&!H(At)){if(!lt(At))throw new TypeError;it=At}}return it}(h,g)}if(!Mt(h))throw new TypeError;if(!ht(g))throw new TypeError;if(!ht(V)&&!wt(V)&&!H(V))throw new TypeError;return H(V)&&(V=void 0),function(q,it,ot,At){for(var gt=q.length-1;gt>=0;--gt){var mt=(0,q[gt])(it,ot,At);if(!wt(mt)&&!H(mt)){if(!ht(mt))throw new TypeError;At=mt}}return At}(h,g,B=yt(B),V)}),s("metadata",function(h,g){return function(B,V){if(!ht(B))throw new TypeError;if(!wt(V)&&!function(q){switch(Nt(q)){case 3:case 4:return!0;default:return!1}}(V))throw new TypeError;ct(h,g,B,V)}}),s("defineMetadata",function(h,g,B,V){if(!ht(B))throw new TypeError;return wt(V)||(V=yt(V)),ct(h,g,B,V)}),s("hasMetadata",function(h,g,B){if(!ht(g))throw new TypeError;return wt(B)||(B=yt(B)),function V(q,it,ot){if(St(q,it,ot))return!0;var At=Y(it);return!H(At)&&V(q,At,ot)}(h,g,B)}),s("hasOwnMetadata",function(h,g,B){if(!ht(g))throw new TypeError;return wt(B)||(B=yt(B)),St(h,g,B)}),s("getMetadata",function(h,g,B){if(!ht(g))throw new TypeError;return wt(B)||(B=yt(B)),function V(q,it,ot){if(St(q,it,ot))return pt(q,it,ot);var At=Y(it);return H(At)?void 0:V(q,At,ot)}(h,g,B)}),s("getOwnMetadata",function(h,g,B){if(!ht(g))throw new TypeError;return wt(B)||(B=yt(B)),pt(h,g,B)}),s("getMetadataKeys",function(h,g){if(!ht(h))throw new TypeError;return wt(g)||(g=yt(g)),function B(V,q){var it=zt(V,q),ot=Y(V);if(ot===null)return it;var At=B(ot,q);if(At.length<=0)return it;if(it.length<=0)return At;for(var gt=new vt,mt=[],Ot=0,It=it;Ot<It.length;Ot++){var Dt=It[Ot];gt.has(Dt)||(gt.add(Dt),mt.push(Dt))}for(var Ut=0,Ct=At;Ut<Ct.length;Ut++)Dt=Ct[Ut],gt.has(Dt)||(gt.add(Dt),mt.push(Dt));return mt}(h,g)}),s("getOwnMetadataKeys",function(h,g){if(!ht(h))throw new TypeError;return wt(g)||(g=yt(g)),zt(h,g)}),s("deleteMetadata",function(h,g,B){if(!ht(g))throw new TypeError;wt(B)||(B=yt(B));var V=bt(g,B,!1);if(wt(V)||!V.delete(h))return!1;if(V.size>0)return!0;var q=ft.get(g);return q.delete(B),q.size>0||ft.delete(g),!0})}(y)})()})(S||(S={}))}).call(this,e(158),e(164))},function(a,A,e){var i=e(219);a.exports=function(p,m){if(p){if(typeof p=="string")return i(p,m);var S=Object.prototype.toString.call(p).slice(8,-1);return S==="Object"&&p.constructor&&(S=p.constructor.name),S==="Map"||S==="Set"?Array.from(p):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?i(p,m):void 0}}},function(a,A){a.exports=function(e,i){(i==null||i>e.length)&&(i=e.length);for(var p=0,m=new Array(i);p<i;p++)m[p]=e[p];return m}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.MetadataReader=void 0;var i=e(32),p=function(){function m(){}return m.prototype.getConstructorMetadata=function(S){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,S),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,S)||{}}},m.prototype.getPropertiesMetadata=function(S){return Reflect.getMetadata(i.TAGGED_PROP,S)||[]},m}();A.MetadataReader=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.isStackOverflowExeption=void 0;var i=e(41);A.isStackOverflowExeption=function(p){return p instanceof RangeError||p.message===i.STACK_OVERFLOW}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.inject=A.LazyServiceIdentifer=void 0;var i=e(41),p=e(32),m=e(49),S=e(59),l=function(){function M(j){this._cb=j}return M.prototype.unwrap=function(){return this._cb()},M}();A.LazyServiceIdentifer=l,A.inject=function(M){return function(j,y,n){if(M===void 0)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(j.name));var s=new m.Metadata(p.INJECT_TAG,M);typeof n=="number"?S.tagParameter(j,y,n,s):S.tagProperty(j,y,s)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Target=void 0;var i=e(32),p=e(67),m=e(49),S=e(453),l=function(){function M(j,y,n,s){this.id=p.id(),this.type=j,this.serviceIdentifier=n,this.name=new S.QueryableString(y||""),this.metadata=new Array;var d=null;typeof s=="string"?d=new m.Metadata(i.NAMED_TAG,s):s instanceof m.Metadata&&(d=s),d!==null&&this.metadata.push(d)}return M.prototype.hasTag=function(j){for(var y=0,n=this.metadata;y<n.length;y++)if(n[y].key===j)return!0;return!1},M.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},M.prototype.matchesArray=function(j){return this.matchesTag(i.MULTI_INJECT_TAG)(j)},M.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},M.prototype.isTagged=function(){return this.metadata.some(function(j){return j.key!==i.INJECT_TAG&&j.key!==i.MULTI_INJECT_TAG&&j.key!==i.NAME_TAG&&j.key!==i.UNMANAGED_TAG&&j.key!==i.NAMED_TAG})},M.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},M.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(j){return j.key===i.NAMED_TAG})[0]:null},M.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(j){return j.key!==i.INJECT_TAG&&j.key!==i.MULTI_INJECT_TAG&&j.key!==i.NAME_TAG&&j.key!==i.UNMANAGED_TAG&&j.key!==i.NAMED_TAG}):null},M.prototype.matchesNamedTag=function(j){return this.matchesTag(i.NAMED_TAG)(j)},M.prototype.matchesTag=function(j){var y=this;return function(n){for(var s=0,d=y.metadata;s<d.length;s++){var E=d[s];if(E.key===j&&E.value===n)return!0}return!1}},M}();A.Target=l},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenOnSyntax=void 0;var i=e(141),p=e(142),m=function(){function S(l){this._binding=l,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return S.prototype.when=function(l){return this._bindingWhenSyntax.when(l)},S.prototype.whenTargetNamed=function(l){return this._bindingWhenSyntax.whenTargetNamed(l)},S.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},S.prototype.whenTargetTagged=function(l,M){return this._bindingWhenSyntax.whenTargetTagged(l,M)},S.prototype.whenInjectedInto=function(l){return this._bindingWhenSyntax.whenInjectedInto(l)},S.prototype.whenParentNamed=function(l){return this._bindingWhenSyntax.whenParentNamed(l)},S.prototype.whenParentTagged=function(l,M){return this._bindingWhenSyntax.whenParentTagged(l,M)},S.prototype.whenAnyAncestorIs=function(l){return this._bindingWhenSyntax.whenAnyAncestorIs(l)},S.prototype.whenNoAncestorIs=function(l){return this._bindingWhenSyntax.whenNoAncestorIs(l)},S.prototype.whenAnyAncestorNamed=function(l){return this._bindingWhenSyntax.whenAnyAncestorNamed(l)},S.prototype.whenAnyAncestorTagged=function(l,M){return this._bindingWhenSyntax.whenAnyAncestorTagged(l,M)},S.prototype.whenNoAncestorNamed=function(l){return this._bindingWhenSyntax.whenNoAncestorNamed(l)},S.prototype.whenNoAncestorTagged=function(l,M){return this._bindingWhenSyntax.whenNoAncestorTagged(l,M)},S.prototype.whenAnyAncestorMatches=function(l){return this._bindingWhenSyntax.whenAnyAncestorMatches(l)},S.prototype.whenNoAncestorMatches=function(l){return this._bindingWhenSyntax.whenNoAncestorMatches(l)},S.prototype.onActivation=function(l){return this._bindingOnSyntax.onActivation(l)},S}();A.BindingWhenOnSyntax=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.typeConstraint=A.namedConstraint=A.taggedConstraint=A.traverseAncerstors=void 0;var i=e(32),p=e(49);A.traverseAncerstors=function l(M,j){var y=M.parentRequest;return y!==null&&(!!j(y)||l(y,j))};var m=function(M){return function(j){var y=function(s){return s!==null&&s.target!==null&&s.target.matchesTag(M)(j)};return y.metaData=new p.Metadata(M,j),y}};A.taggedConstraint=m;var S=m(i.NAMED_TAG);A.namedConstraint=S,A.typeConstraint=function(l){return function(M){var j=null;if(M!==null){if(j=M.bindings[0],typeof l=="string")return j.serviceIdentifier===l;var y=M.bindings[0].implementationType;return l===y}return!1}}},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=1e-6},function(a,A){a.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},function(a,A){a.exports=function(e,i,p){return e[0]=i,e[1]=p,e}},function(a,A){a.exports=function(e,i,p){return e[0]=i[0]+p[0],e[1]=i[1]+p[1],e}},function(a,A){a.exports=function(e,i,p){return e[0]=i[0]*p[0],e[1]=i[1]*p[1],e}},function(a,A){a.exports=function(e,i,p){return e[0]=i[0]/p[0],e[1]=i[1]/p[1],e}},function(a,A){a.exports=function(e,i){var p=i[0]-e[0],m=i[1]-e[1];return Math.sqrt(p*p+m*m)}},function(a,A){a.exports=function(e,i){var p=i[0]-e[0],m=i[1]-e[1];return p*p+m*m}},function(a,A){a.exports=function(e){var i=e[0],p=e[1];return Math.sqrt(i*i+p*p)}},function(a,A){a.exports=function(e){var i=e[0],p=e[1];return i*i+p*p}},function(a,A){a.exports=function(e,i){var p=i[0],m=i[1],S=p*p+m*m;return S>0&&(S=1/Math.sqrt(S),e[0]=i[0]*S,e[1]=i[1]*S),e}},function(a,A){a.exports=function(e,i){return e[0]*i[0]+e[1]*i[1]}},function(a,A){},function(a,A){},function(a,A,e){"use strict";var i={};e.r(i),e.d(i,"easeLinear",function(){return St}),e.d(i,"easeQuad",function(){return zt}),e.d(i,"easeQuadIn",function(){return pt}),e.d(i,"easeQuadOut",function(){return ct}),e.d(i,"easeQuadInOut",function(){return zt}),e.d(i,"easeCubic",function(){return H}),e.d(i,"easeCubicIn",function(){return Nt}),e.d(i,"easeCubicOut",function(){return wt}),e.d(i,"easeCubicInOut",function(){return H}),e.d(i,"easePoly",function(){return yt}),e.d(i,"easePolyIn",function(){return ht}),e.d(i,"easePolyOut",function(){return dt}),e.d(i,"easePolyInOut",function(){return yt}),e.d(i,"easeSin",function(){return z}),e.d(i,"easeSinIn",function(){return lt}),e.d(i,"easeSinOut",function(){return rt}),e.d(i,"easeSinInOut",function(){return z}),e.d(i,"easeExp",function(){return h}),e.d(i,"easeExpIn",function(){return Y}),e.d(i,"easeExpOut",function(){return k}),e.d(i,"easeExpInOut",function(){return h}),e.d(i,"easeCircle",function(){return V}),e.d(i,"easeCircleIn",function(){return g}),e.d(i,"easeCircleOut",function(){return B}),e.d(i,"easeCircleInOut",function(){return V}),e.d(i,"easeBounce",function(){return ot}),e.d(i,"easeBounceIn",function(){return it}),e.d(i,"easeBounceOut",function(){return ot}),e.d(i,"easeBounceInOut",function(){return At}),e.d(i,"easeBack",function(){return Ot}),e.d(i,"easeBackIn",function(){return gt}),e.d(i,"easeBackOut",function(){return mt}),e.d(i,"easeBackInOut",function(){return Ot}),e.d(i,"easeElastic",function(){return Ut}),e.d(i,"easeElasticIn",function(){return Dt}),e.d(i,"easeElasticOut",function(){return Ut}),e.d(i,"easeElasticInOut",function(){return Ct});var p=e(1),m=e(119),S=e(117),l=e(19),M=e(0);function j(oe){return(j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var y,n,s=0,d=0,E=0,O=0,C=0,v=0,x=(typeof performance=="undefined"?"undefined":j(performance))==="object"&&performance.now?performance:Date,T=(typeof window=="undefined"?"undefined":j(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(oe){setTimeout(oe,17)};function N(){return C||(T(X),C=x.now()+v)}function X(){C=0}function tt(){this._call=this._time=this._next=null}function nt(oe,Kt,te){var Oe=new tt;return Oe.restart(oe,Kt,te),Oe}function vt(){C=(O=x.now())+v,s=d=0;try{(function(){N(),++s;for(var oe,Kt=y;Kt;)(oe=C-Kt._time)>=0&&Kt._call.call(null,oe),Kt=Kt._next;--s})()}finally{s=0,function(){for(var oe,Kt,te=y,Oe=1/0;te;)te._call?(Oe>te._time&&(Oe=te._time),oe=te,te=te._next):(Kt=te._next,te._next=null,te=oe?oe._next=Kt:y=Kt);n=oe,bt(Oe)}(),C=0}}function ft(){var oe=x.now(),Kt=oe-O;Kt>1e3&&(v-=Kt,O=oe)}function bt(oe){s||(d&&(d=clearTimeout(d)),oe-C>24?(oe<1/0&&(d=setTimeout(vt,oe-x.now()-v)),E&&(E=clearInterval(E))):(E||(O=x.now(),E=setInterval(ft,1e3)),s=1,T(vt)))}function St(oe){return+oe}function pt(oe){return oe*oe}function ct(oe){return oe*(2-oe)}function zt(oe){return((oe*=2)<=1?oe*oe:--oe*(2-oe)+1)/2}function Nt(oe){return oe*oe*oe}function wt(oe){return--oe*oe*oe+1}function H(oe){return((oe*=2)<=1?oe*oe*oe:(oe-=2)*oe*oe+2)/2}tt.prototype=nt.prototype={constructor:tt,restart:function(Kt,te,Oe){if(typeof Kt!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?N():+Oe)+(te==null?0:+te),this._next||n===this||(n?n._next=this:y=this,n=this),this._call=Kt,this._time=Oe,bt()},stop:function(){this._call&&(this._call=null,this._time=1/0,bt())}};var ht=function oe(Kt){function te(Oe){return Math.pow(Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),dt=function oe(Kt){function te(Oe){return 1-Math.pow(1-Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),yt=function oe(Kt){function te(Oe){return((Oe*=2)<=1?Math.pow(Oe,Kt):2-Math.pow(2-Oe,Kt))/2}return Kt=+Kt,te.exponent=oe,te}(3),Mt=Math.PI,$=Mt/2;function lt(oe){return+oe==1?1:1-Math.cos(oe*$)}function rt(oe){return Math.sin(oe*$)}function z(oe){return(1-Math.cos(Mt*oe))/2}function P(oe){return 1.0009775171065494*(Math.pow(2,-10*oe)-.0009765625)}function Y(oe){return P(1-+oe)}function k(oe){return 1-P(oe)}function h(oe){return((oe*=2)<=1?P(1-oe):2-P(oe-1))/2}function g(oe){return 1-Math.sqrt(1-oe*oe)}function B(oe){return Math.sqrt(1- --oe*oe)}function V(oe){return((oe*=2)<=1?1-Math.sqrt(1-oe*oe):Math.sqrt(1-(oe-=2)*oe)+1)/2}var q=7.5625;function it(oe){return 1-ot(1-oe)}function ot(oe){return(oe=+oe)<4/11?q*oe*oe:oe<8/11?q*(oe-=6/11)*oe+3/4:oe<10/11?q*(oe-=9/11)*oe+15/16:q*(oe-=21/22)*oe+63/64}function At(oe){return((oe*=2)<=1?1-ot(1-oe):ot(oe-1)+1)/2}var gt=function oe(Kt){function te(Oe){return(Oe=+Oe)*Oe*(Kt*(Oe-1)+Oe)}return Kt=+Kt,te.overshoot=oe,te}(1.70158),mt=function oe(Kt){function te(Oe){return--Oe*Oe*((Oe+1)*Kt+Oe)+1}return Kt=+Kt,te.overshoot=oe,te}(1.70158),Ot=function oe(Kt){function te(Oe){return((Oe*=2)<1?Oe*Oe*((Kt+1)*Oe-Kt):(Oe-=2)*Oe*((Kt+1)*Oe+Kt)+2)/2}return Kt=+Kt,te.overshoot=oe,te}(1.70158),It=2*Math.PI,Dt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=It);function Qe(On){return Kt*P(- --On)*Math.sin((Oe-On)/te)}return Qe.amplitude=function(On){return oe(On,te*It)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ut=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=It);function Qe(On){return 1-Kt*P(On=+On)*Math.sin((On+Oe)/te)}return Qe.amplitude=function(On){return oe(On,te*It)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ct=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=It);function Qe(On){return((On=2*On-1)<0?Kt*P(-On)*Math.sin((Oe-On)/te):2-Kt*P(On)*Math.sin((Oe+On)/te))/2}return Qe.amplitude=function(On){return oe(On,te*It)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Vt=function(Kt,te,Oe){Kt.prototype=te.prototype=Oe,Oe.constructor=Kt};function Ht(oe,Kt){var te=Object.create(oe.prototype);for(var Oe in Kt)te[Oe]=Kt[Oe];return te}function re(){}var pe="\\s*([+-]?\\d+)\\s*",ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ne=/^#([0-9a-f]{3,8})$/,Ke=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),pn=new RegExp("^rgb\\("+[we,we,we]+"\\)$"),hn=new RegExp("^rgba\\("+[pe,pe,pe,ye]+"\\)$"),kn=new RegExp("^rgba\\("+[we,we,we,ye]+"\\)$"),Tn=new RegExp("^hsl\\("+[ye,we,we]+"\\)$"),Rn=new RegExp("^hsla\\("+[ye,we,we,ye]+"\\)$"),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function _n(){return this.rgb().formatRgb()}function Kn(oe){var Kt,te;return oe=(oe+"").trim().toLowerCase(),(Kt=Ne.exec(oe))?(te=Kt[1].length,Kt=parseInt(Kt[1],16),te===6?tr(Kt):te===3?new Sr(Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,(15&Kt)<<4|15&Kt,1):te===8?or(Kt>>24&255,Kt>>16&255,Kt>>8&255,(255&Kt)/255):te===4?or(Kt>>12&15|Kt>>8&240,Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,((15&Kt)<<4|15&Kt)/255):null):(Kt=Ke.exec(oe))?new Sr(Kt[1],Kt[2],Kt[3],1):(Kt=pn.exec(oe))?new Sr(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,1):(Kt=hn.exec(oe))?or(Kt[1],Kt[2],Kt[3],Kt[4]):(Kt=kn.exec(oe))?or(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,Kt[4]):(Kt=Tn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,1):(Kt=Rn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,Kt[4]):Mn.hasOwnProperty(oe)?tr(Mn[oe]):oe==="transparent"?new Sr(NaN,NaN,NaN,0):null}function tr(oe){return new Sr(oe>>16&255,oe>>8&255,255&oe,1)}function or(oe,Kt,te,Oe){return Oe<=0&&(oe=Kt=te=NaN),new Sr(oe,Kt,te,Oe)}function nr(oe){return oe instanceof re||(oe=Kn(oe)),oe?new Sr((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new Sr}function er(oe,Kt,te,Oe){return arguments.length===1?nr(oe):new Sr(oe,Kt,te,Oe==null?1:Oe)}function Sr(oe,Kt,te,Oe){this.r=+oe,this.g=+Kt,this.b=+te,this.opacity=+Oe}function Vr(){return"#"+hi(this.r)+hi(this.g)+hi(this.b)}function ti(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(oe===1?")":", "+oe+")")}function hi(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function Fi(oe,Kt,te,Oe){return Oe<=0?oe=Kt=te=NaN:te<=0||te>=1?oe=Kt=NaN:Kt<=0&&(oe=NaN),new si(oe,Kt,te,Oe)}function to(oe){if(oe instanceof si)return new si(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof re||(oe=Kn(oe)),!oe)return new si;if(oe instanceof si)return oe;var Kt=(oe=oe.rgb()).r/255,te=oe.g/255,Oe=oe.b/255,Qe=Math.min(Kt,te,Oe),On=Math.max(Kt,te,Oe),Vn=NaN,Yn=On-Qe,$e=(On+Qe)/2;return Yn?(Vn=Kt===On?(te-Oe)/Yn+6*(te<Oe):te===On?(Oe-Kt)/Yn+2:(Kt-te)/Yn+4,Yn/=$e<.5?On+Qe:2-On-Qe,Vn*=60):Yn=$e>0&&$e<1?0:Vn,new si(Vn,Yn,$e,oe.opacity)}function si(oe,Kt,te,Oe){this.h=+oe,this.s=+Kt,this.l=+te,this.opacity=+Oe}function Ci(oe,Kt,te){return 255*(oe<60?Kt+(te-Kt)*oe/60:oe<180?te:oe<240?Kt+(te-Kt)*(240-oe)/60:Kt)}function Ui(oe,Kt,te,Oe,Qe){var On=oe*oe,Vn=On*oe;return((1-3*oe+3*On-Vn)*Kt+(4-6*On+3*Vn)*te+(1+3*oe+3*On-3*Vn)*Oe+Vn*Qe)/6}Vt(re,Kn,{copy:function(Kt){return Object.assign(new this.constructor,this,Kt)},displayable:function(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHsl:function(){return to(this).formatHsl()},formatRgb:_n,toString:_n}),Vt(Sr,er,Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vr,formatHex:Vr,formatRgb:ti,toString:ti})),Vt(si,function(oe,Kt,te,Oe){return arguments.length===1?to(oe):new si(oe,Kt,te,Oe==null?1:Oe)},Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},rgb:function(){var Kt=this.h%360+360*(this.h<0),te=isNaN(Kt)||isNaN(this.s)?0:this.s,Oe=this.l,Qe=Oe+(Oe<.5?Oe:1-Oe)*te,On=2*Oe-Qe;return new Sr(Ci(Kt>=240?Kt-240:Kt+120,On,Qe),Ci(Kt,On,Qe),Ci(Kt<120?Kt+240:Kt-120,On,Qe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Kt=this.opacity;return((Kt=isNaN(Kt)?1:Math.max(0,Math.min(1,Kt)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(Kt===1?")":", "+Kt+")")}}));var Li=function(Kt){return function(){return Kt}};function Vi(oe,Kt){return function(te){return oe+te*Kt}}function ro(oe){return(oe=+oe)==1?jr:function(Kt,te){return te-Kt?function(Oe,Qe,On){return Oe=Math.pow(Oe,On),Qe=Math.pow(Qe,On)-Oe,On=1/On,function(Vn){return Math.pow(Oe+Vn*Qe,On)}}(Kt,te,oe):Li(isNaN(Kt)?te:Kt)}}function jr(oe,Kt){var te=Kt-oe;return te?Vi(oe,te):Li(isNaN(oe)?Kt:oe)}var Ji=function oe(Kt){var te=ro(Kt);function Oe(Qe,On){var Vn=te((Qe=er(Qe)).r,(On=er(On)).r),Yn=te(Qe.g,On.g),$e=te(Qe.b,On.b),rn=jr(Qe.opacity,On.opacity);return function(on){return Qe.r=Vn(on),Qe.g=Yn(on),Qe.b=$e(on),Qe.opacity=rn(on),Qe+""}}return Oe.gamma=oe,Oe}(1);function pr(oe){return function(Kt){var te,Oe,Qe=Kt.length,On=new Array(Qe),Vn=new Array(Qe),Yn=new Array(Qe);for(te=0;te<Qe;++te)Oe=er(Kt[te]),On[te]=Oe.r||0,Vn[te]=Oe.g||0,Yn[te]=Oe.b||0;return On=oe(On),Vn=oe(Vn),Yn=oe(Yn),Oe.opacity=1,function($e){return Oe.r=On($e),Oe.g=Vn($e),Oe.b=Yn($e),Oe+""}}}pr(function(oe){var Kt=oe.length-1;return function(te){var Oe=te<=0?te=0:te>=1?(te=1,Kt-1):Math.floor(te*Kt),Qe=oe[Oe],On=oe[Oe+1],Vn=Oe>0?oe[Oe-1]:2*Qe-On,Yn=Oe<Kt-1?oe[Oe+2]:2*On-Qe;return Ui((te-Oe/Kt)*Kt,Vn,Qe,On,Yn)}}),pr(function(oe){var Kt=oe.length;return function(te){var Oe=Math.floor(((te%=1)<0?++te:te)*Kt),Qe=oe[(Oe+Kt-1)%Kt],On=oe[Oe%Kt],Vn=oe[(Oe+1)%Kt],Yn=oe[(Oe+2)%Kt];return Ui((te-Oe/Kt)*Kt,Qe,On,Vn,Yn)}});var Xr=function(Kt,te){te||(te=[]);var Oe,Qe=Kt?Math.min(te.length,Kt.length):0,On=te.slice();return function(Vn){for(Oe=0;Oe<Qe;++Oe)On[Oe]=Kt[Oe]*(1-Vn)+te[Oe]*Vn;return On}};function Br(oe){return ArrayBuffer.isView(oe)&&!(oe instanceof DataView)}function Nr(oe,Kt){var te,Oe=Kt?Kt.length:0,Qe=oe?Math.min(Oe,oe.length):0,On=new Array(Qe),Vn=new Array(Oe);for(te=0;te<Qe;++te)On[te]=Oi(oe[te],Kt[te]);for(;te<Oe;++te)Vn[te]=Kt[te];return function(Yn){for(te=0;te<Qe;++te)Vn[te]=On[te](Yn);return Vn}}var Yr=function(Kt,te){var Oe=new Date;return Kt=+Kt,te=+te,function(Qe){return Oe.setTime(Kt*(1-Qe)+te*Qe),Oe}},Kr=function(Kt,te){return Kt=+Kt,te=+te,function(Oe){return Kt*(1-Oe)+te*Oe}};function ni(oe){return(ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var fi=function(Kt,te){var Oe,Qe={},On={};for(Oe in Kt!==null&&ni(Kt)==="object"||(Kt={}),te!==null&&ni(te)==="object"||(te={}),te)Oe in Kt?Qe[Oe]=Oi(Kt[Oe],te[Oe]):On[Oe]=te[Oe];return function(Vn){for(Oe in Qe)On[Oe]=Qe[Oe](Vn);return On}},$r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp($r.source,"g"),Qr=function(Kt,te){var Oe,Qe,On,Vn=$r.lastIndex=ci.lastIndex=0,Yn=-1,$e=[],rn=[];for(Kt+="",te+="";(Oe=$r.exec(Kt))&&(Qe=ci.exec(te));)(On=Qe.index)>Vn&&(On=te.slice(Vn,On),$e[Yn]?$e[Yn]+=On:$e[++Yn]=On),(Oe=Oe[0])===(Qe=Qe[0])?$e[Yn]?$e[Yn]+=Qe:$e[++Yn]=Qe:($e[++Yn]=null,rn.push({i:Yn,x:Kr(Oe,Qe)})),Vn=ci.lastIndex;return Vn<te.length&&(On=te.slice(Vn),$e[Yn]?$e[Yn]+=On:$e[++Yn]=On),$e.length<2?rn[0]?function(on){return function($n){return on($n)+""}}(rn[0].x):function(on){return function(){return on}}(te):(te=rn.length,function(on){for(var $n,vr=0;vr<te;++vr)$e[($n=rn[vr]).i]=$n.x(on);return $e.join("")})};function gi(oe){return(gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var Oi=function(Kt,te){var Oe,Qe=gi(te);return te==null||Qe==="boolean"?Li(te):(Qe==="number"?Kr:Qe==="string"?(Oe=Kn(te))?(te=Oe,Ji):Qr:te instanceof Kn?Ji:te instanceof Date?Yr:Br(te)?Xr:Array.isArray(te)?Nr:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?fi:Kr)(Kt,te)},bi=e(51),zi=[1,0,0,0,1,0,0,0,1];function Qi(oe,Kt,te){var Oe,Qe=Kt.startTime;if(te<Qe+Kt.delay||Kt._paused)return!1;var On=Kt.duration,Vn=Kt.easing;if(te=te-Qe-Kt.delay,Kt.repeat)Oe=te%On/On,Oe=i[Vn](Oe);else{if(!((Oe=te/On)<1))return Kt.onFrame?oe.attr(Kt.onFrame(1)):oe.attr(Kt.toAttrs),!0;Oe=i[Vn](Oe)}if(Kt.onFrame){var Yn=Kt.onFrame(Oe);oe.attr(Yn)}else(function($e,rn,on){var $n={},vr=rn.fromAttrs,ar=rn.toAttrs;if(!$e.destroyed){var rr,Fr,Ar,wr;for(var xr in ar)if(!Object(M.q)(vr[xr],ar[xr]))if(xr==="path"){var Er=ar[xr],Ir=vr[xr];Er.length>Ir.length?(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.fillPathByDiff(Ir,Er),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er):rn.pathFormatted||(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er,rn.pathFormatted=!0),$n[xr]=[];for(var Lr=0;Lr<Er.length;Lr++){for(var Pr=Er[Lr],Dr=Ir[Lr],ri=[],vi=0;vi<Pr.length;vi++)Object(M.t)(Pr[vi])&&Dr&&Object(M.t)(Dr[vi])?(rr=Oi(Dr[vi],Pr[vi]),ri.push(rr(on))):ri.push(Pr[vi]);$n[xr].push(ri)}}else if(xr==="matrix"){var ii=(Ar=vr[xr]||zi,(Br(wr=ar[xr]||zi)?Xr:Nr)(Ar,wr))(on);$n[xr]=ii}else["fill","stroke","fillStyle","strokeStyle"].includes(xr)&&(Fr=ar[xr],/^[r,R,L,l]{1}[\s]*\(/.test(Fr))?$n[xr]=ar[xr]:Object(M.r)(ar[xr])||(rr=Oi(vr[xr],ar[xr]),$n[xr]=rr(on));$e.attr($n)}})(oe,Kt,Oe);return!1}var io=function(){function oe(Kt){this.animators=[],this.current=0,this.timer=null,this.canvas=Kt}return oe.prototype.initTimer=function(){var Kt,te,Oe,Qe=this;this.timer=nt(function(On){if(Qe.current=On,Qe.animators.length>0){for(var Vn=Qe.animators.length-1;Vn>=0;Vn--)if((Kt=Qe.animators[Vn]).destroyed)Qe.removeAnimator(Vn);else{if(!Kt.isAnimatePaused())for(var Yn=(te=Kt.get("animations")).length-1;Yn>=0;Yn--)Oe=te[Yn],Qi(Kt,Oe,On)&&(te.splice(Yn,1),Oe.callback&&Oe.callback());te.length===0&&Qe.removeAnimator(Vn)}Qe.canvas.get("autoDraw")||Qe.canvas.draw()}})},oe.prototype.addAnimator=function(Kt){this.animators.push(Kt)},oe.prototype.removeAnimator=function(Kt){this.animators.splice(Kt,1)},oe.prototype.isAnimating=function(){return!!this.animators.length},oe.prototype.stop=function(){this.timer&&this.timer.stop()},oe.prototype.stopAllAnimations=function(Kt){Kt===void 0&&(Kt=!0),this.animators.forEach(function(te){te.stopAnimate(Kt)}),this.animators=[],this.canvas.draw()},oe.prototype.getTime=function(){return this.current},oe}(),Wi=e(114),Zi=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Pi(oe,Kt,te){te.name=Kt,te.target=oe,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}function no(oe,Kt,te){if(te.bubbles){var Oe=void 0,Qe=!1;if(Kt==="mouseenter"?(Oe=te.fromShape,Qe=!0):Kt==="mouseleave"&&(Qe=!0,Oe=te.toShape),oe.isCanvas()&&Qe)return;if(Oe&&Object(l.g)(oe,Oe))return void(te.bubbles=!1);te.name=Kt,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}}var Mo=function(){function oe(Kt){var te=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Oe){var Qe=Oe.type;te._triggerEvent(Qe,Oe)},this._onDocumentMove=function(Oe){if(te.canvas.get("el")!==Oe.target&&(te.dragging||te.currentShape)){var Qe=te._getPointInfo(Oe);te.dragging&&te._emitEvent("drag",Oe,Qe,te.draggingShape)}},this._onDocumentMouseUp=function(Oe){if(te.canvas.get("el")!==Oe.target&&te.dragging){var Qe=te._getPointInfo(Oe);te.draggingShape&&te._emitEvent("drop",Oe,Qe,null),te._emitEvent("dragend",Oe,Qe,te.draggingShape),te._afterDrag(te.draggingShape,Qe,Oe)}},this.canvas=Kt.canvas}return oe.prototype.init=function(){this._bindEvents()},oe.prototype._bindEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.addEventListener(Oe,Kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._clearEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.removeEventListener(Oe,Kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._getEventObj=function(Kt,te,Oe,Qe,On,Vn){var Yn=new Wi.a(Kt,te);return Yn.fromShape=On,Yn.toShape=Vn,Yn.x=Oe.x,Yn.y=Oe.y,Yn.clientX=Oe.clientX,Yn.clientY=Oe.clientY,Yn.propagationPath.push(Qe),Yn},oe.prototype._getShape=function(Kt,te){return this.canvas.getShape(Kt.x,Kt.y,te)},oe.prototype._getPointInfo=function(Kt){var te=this.canvas,Oe=te.getClientByEvent(Kt),Qe=te.getPointByEvent(Kt);return{x:Qe.x,y:Qe.y,clientX:Oe.x,clientY:Oe.y}},oe.prototype._triggerEvent=function(Kt,te){var Oe=this._getPointInfo(te),Qe=this._getShape(Oe,te),On=this["_on"+Kt],Vn=!1;if(On)On.call(this,Oe,Qe,te);else{var Yn=this.currentShape;Kt==="mouseenter"||Kt==="dragenter"||Kt==="mouseover"?(this._emitEvent(Kt,te,Oe,null,null,Qe),Qe&&this._emitEvent(Kt,te,Oe,Qe,null,Qe),Kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",te,Oe,null)):Kt==="mouseleave"||Kt==="dragleave"||Kt==="mouseout"?(Vn=!0,Yn&&this._emitEvent(Kt,te,Oe,Yn,Yn,null),this._emitEvent(Kt,te,Oe,null,Yn,null),Kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",te,Oe,null)):this._emitEvent(Kt,te,Oe,Qe,null,null)}if(Vn||(this.currentShape=Qe),Qe&&!Qe.get("destroyed")){var $e=this.canvas;$e.get("el").style.cursor=Qe.attr("cursor")||$e.get("cursor")}},oe.prototype._onmousedown=function(Kt,te,Oe){Oe.button===0&&(this.mousedownShape=te,this.mousedownPoint=Kt,this.mousedownTimeStamp=Oe.timeStamp),this._emitEvent("mousedown",Oe,Kt,te,null,null)},oe.prototype._emitMouseoverEvents=function(Kt,te,Oe,Qe){var On=this.canvas.get("el");Oe!==Qe&&(Oe&&(this._emitEvent("mouseout",Kt,te,Oe,Oe,Qe),this._emitEvent("mouseleave",Kt,te,Oe,Oe,Qe),Qe&&!Qe.get("destroyed")||(On.style.cursor=this.canvas.get("cursor"))),Qe&&(this._emitEvent("mouseover",Kt,te,Qe,Oe,Qe),this._emitEvent("mouseenter",Kt,te,Qe,Oe,Qe)))},oe.prototype._emitDragoverEvents=function(Kt,te,Oe,Qe,On){Qe?(Qe!==Oe&&(Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),this._emitEvent("dragenter",Kt,te,Qe,Oe,Qe)),On||this._emitEvent("dragover",Kt,te,Qe)):Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),On&&this._emitEvent("dragover",Kt,te,Qe)},oe.prototype._afterDrag=function(Kt,te,Oe){Kt&&(Kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Qe=this._getShape(te,Oe);Qe!==Kt&&this._emitMouseoverEvents(Oe,te,Kt,Qe),this.currentShape=Qe},oe.prototype._onmouseup=function(Kt,te,Oe){if(Oe.button===0){var Qe=this.draggingShape;this.dragging?(Qe&&this._emitEvent("drop",Oe,Kt,te),this._emitEvent("dragend",Oe,Kt,Qe),this._afterDrag(Qe,Kt,Oe)):(this._emitEvent("mouseup",Oe,Kt,te),te===this.mousedownShape&&this._emitEvent("click",Oe,Kt,te),this.mousedownShape=null,this.mousedownPoint=null)}},oe.prototype._ondragover=function(Kt,te,Oe){Oe.preventDefault();var Qe=this.currentShape;this._emitDragoverEvents(Oe,Kt,Qe,te,!0)},oe.prototype._onmousemove=function(Kt,te,Oe){var Qe=this.canvas,On=this.currentShape,Vn=this.draggingShape;if(this.dragging)Vn&&this._emitDragoverEvents(Oe,Kt,On,te,!1),this._emitEvent("drag",Oe,Kt,Vn);else{var Yn=this.mousedownPoint;if(Yn){var $e=this.mousedownShape,rn=Oe.timeStamp-this.mousedownTimeStamp,on=Yn.clientX-Kt.clientX,$n=Yn.clientY-Kt.clientY;rn>120||on*on+$n*$n>40?$e&&$e.get("draggable")?((Vn=this.mousedownShape).set("capture",!1),this.draggingShape=Vn,this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,Vn),this.mousedownShape=null,this.mousedownPoint=null):!$e&&Qe.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te))}else this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)}},oe.prototype._emitEvent=function(Kt,te,Oe,Qe,On,Vn){var Yn=this._getEventObj(Kt,te,Oe,Qe,On,Vn);if(Qe){Yn.shape=Qe,Pi(Qe,Kt,Yn);for(var $e=Qe.getParent();$e;)$e.emitDelegation(Kt,Yn),Yn.propagationStopped||no($e,Kt,Yn),Yn.propagationPath.push($e),$e=$e.getParent()}else Pi(this.canvas,Kt,Yn)},oe.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},oe}(),ao=Object(m.a)(),uo=ao&&ao.name==="firefox",xo=function(oe){function Kt(te){var Oe=oe.call(this,te)||this;return Oe.initContainer(),Oe.initDom(),Oe.initEvents(),Oe.initTimeline(),Oe}return Object(p.b)(Kt,oe),Kt.prototype.getDefaultCfg=function(){var te=oe.prototype.getDefaultCfg.call(this);return te.cursor="default",te.supportCSSTransform=!1,te},Kt.prototype.initContainer=function(){var te=this.get("container");Object(l.h)(te)&&(te=document.getElementById(te),this.set("container",te))},Kt.prototype.initDom=function(){var te=this.createDom();this.set("el",te),this.get("container").appendChild(te),this.setDOMSize(this.get("width"),this.get("height"))},Kt.prototype.initEvents=function(){var te=new Mo({canvas:this});te.init(),this.set("eventController",te)},Kt.prototype.initTimeline=function(){var te=new io(this);this.set("timeline",te)},Kt.prototype.setDOMSize=function(te,Oe){var Qe=this.get("el");l.c&&(Qe.style.width=te+"px",Qe.style.height=Oe+"px")},Kt.prototype.changeSize=function(te,Oe){this.setDOMSize(te,Oe),this.set("width",te),this.set("height",Oe),this.onCanvasChange("changeSize")},Kt.prototype.getRenderer=function(){return this.get("renderer")},Kt.prototype.getCursor=function(){return this.get("cursor")},Kt.prototype.setCursor=function(te){this.set("cursor",te);var Oe=this.get("el");l.c&&Oe&&(Oe.style.cursor=te)},Kt.prototype.getPointByEvent=function(te){if(this.get("supportCSSTransform")){if(uo&&!Object(l.e)(te.layerX)&&te.layerX!==te.offsetX)return{x:te.layerX,y:te.layerY};if(!Object(l.e)(te.offsetX))return{x:te.offsetX,y:te.offsetY}}var Oe=this.getClientByEvent(te),Qe=Oe.x,On=Oe.y;return this.getPointByClient(Qe,On)},Kt.prototype.getClientByEvent=function(te){var Oe=te;return te.touches&&(Oe=te.type==="touchend"?te.changedTouches[0]:te.touches[0]),{x:Oe.clientX,y:Oe.clientY}},Kt.prototype.getPointByClient=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te-Qe.left,y:Oe-Qe.top}},Kt.prototype.getClientByPoint=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te+Qe.left,y:Oe+Qe.top}},Kt.prototype.draw=function(){},Kt.prototype.removeDom=function(){var te=this.get("el");te.parentNode.removeChild(te)},Kt.prototype.clearEvents=function(){this.get("eventController").destroy()},Kt.prototype.isCanvas=function(){return!0},Kt.prototype.getParent=function(){return null},Kt.prototype.destroy=function(){var te=this.get("timeline");this.get("destroyed")||(this.clear(),te&&te.stop(),this.clearEvents(),this.removeDom(),oe.prototype.destroy.call(this))},Kt}(S.a);A.a=xo},function(a,A,e){"use strict";e.d(A,"a",function(){return m});var i=new Map;function p(O,C){i.set(O,C)}function m(O){return i.get(O)}var S=function(C){var v=C.attr();return{x:v.x,y:v.y,width:v.width,height:v.height}},l=function(C){var v=C.attr(),x=v.x,T=v.y,N=v.r;return{x:x-N,y:T-N,width:2*N,height:2*N}},M=e(20);function j(O,C){return O&&C?{minX:Math.min(O.minX,C.minX),minY:Math.min(O.minY,C.minY),maxX:Math.max(O.maxX,C.maxX),maxY:Math.max(O.maxY,C.maxY)}:O||C}function y(O,C){var v=O.get("startArrowShape"),x=O.get("endArrowShape");return v&&(C=j(C,v.getCanvasBBox())),x&&(C=j(C,x.getCanvasBBox())),C}var n=e(68),s=e(31),d=e(0);function E(O,C){var v=O.prePoint,x=O.currentPoint,T=O.nextPoint,N=Math.pow(x[0]-v[0],2)+Math.pow(x[1]-v[1],2),X=Math.pow(x[0]-T[0],2)+Math.pow(x[1]-T[1],2),tt=Math.pow(v[0]-T[0],2)+Math.pow(v[1]-T[1],2),nt=Math.acos((N+X-tt)/(2*Math.sqrt(N)*Math.sqrt(X)));if(!nt||Math.sin(nt)===0||Object(d.u)(nt,0))return{xExtra:0,yExtra:0};var vt=Math.abs(Math.atan2(T[1]-x[1],T[0]-x[0])),ft=Math.abs(Math.atan2(T[0]-x[0],T[1]-x[1]));return vt=vt>Math.PI/2?Math.PI-vt:vt,ft=ft>Math.PI/2?Math.PI-ft:ft,{xExtra:Math.cos(nt/2-vt)*(C/2*(1/Math.sin(nt/2)))-C/2||0,yExtra:Math.cos(ft-nt/2)*(C/2*(1/Math.sin(nt/2)))-C/2||0}}p("rect",S),p("image",S),p("circle",l),p("marker",l),p("polyline",function(O){for(var C=O.attr().points,v=[],x=[],T=0;T<C.length;T++){var N=C[T];v.push(N[0]),x.push(N[1])}var X=M.f.getBBoxByArray(v,x),tt=X.x,nt=X.y,vt={minX:tt,minY:nt,maxX:tt+X.width,maxY:nt+X.height};return{x:(vt=y(O,vt)).minX,y:vt.minY,width:vt.maxX-vt.minX,height:vt.maxY-vt.minY}}),p("polygon",function(O){for(var C=O.attr().points,v=[],x=[],T=0;T<C.length;T++){var N=C[T];v.push(N[0]),x.push(N[1])}return M.f.getBBoxByArray(v,x)}),p("text",function(O){var C=O.attr(),v=C.x,x=C.y,T=C.text,N=C.fontSize,X=C.lineHeight,tt=C.font;tt||(tt=Object(n.a)(C));var nt,vt=Object(n.c)(T,tt);if(vt){var ft=C.textAlign,bt=C.textBaseline,St=Object(n.b)(T,N,X),pt={x:v,y:x-St};ft&&(ft==="end"||ft==="right"?pt.x-=vt:ft==="center"&&(pt.x-=vt/2)),bt&&(bt==="top"?pt.y+=St:bt==="middle"&&(pt.y+=St/2)),nt={x:pt.x,y:pt.y,width:vt,height:St}}else nt={x:v,y:x,width:0,height:0};return nt}),p("path",function(O){var C=O.attr(),v=C.path,x=C.stroke?C.lineWidth:0,T=function(nt,vt){for(var ft=[],bt=[],St=[],pt=0;pt<nt.length;pt++){var ct=($=nt[pt]).currentPoint,zt=$.params,Nt=$.prePoint,wt=void 0;switch($.command){case"Q":wt=M.e.box(Nt[0],Nt[1],zt[1],zt[2],zt[3],zt[4]);break;case"C":wt=M.b.box(Nt[0],Nt[1],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6]);break;case"A":var H=$.arcParams;wt=M.a.box(H.cx,H.cy,H.rx,H.ry,H.xRotation,H.startAngle,H.endAngle);break;default:ft.push(ct[0]),bt.push(ct[1])}wt&&($.box=wt,ft.push(wt.x,wt.x+wt.width),bt.push(wt.y,wt.y+wt.height)),vt&&($.command==="L"||$.command==="M")&&$.prePoint&&$.nextPoint&&St.push($)}ft=ft.filter(function(lt){return!Number.isNaN(lt)}),bt=bt.filter(function(lt){return!Number.isNaN(lt)});var ht=Math.min.apply(null,ft),dt=Math.min.apply(null,bt),yt=Math.max.apply(null,ft),Mt=Math.max.apply(null,bt);if(St.length===0)return{x:ht,y:dt,width:yt-ht,height:Mt-dt};for(pt=0;pt<St.length;pt++){var $;(ct=($=St[pt]).currentPoint)[0]===ht?ht-=E($,vt).xExtra:ct[0]===yt&&(yt+=E($,vt).xExtra),ct[1]===dt?dt-=E($,vt).yExtra:ct[1]===Mt&&(Mt+=E($,vt).yExtra)}return{x:ht,y:dt,width:yt-ht,height:Mt-dt}}(O.get("segments")||Object(s.d)(v),x),N=T.x,X=T.y,tt={minX:N,minY:X,maxX:N+T.width,maxY:X+T.height};return{x:(tt=y(O,tt)).minX,y:tt.minY,width:tt.maxX-tt.minX,height:tt.maxY-tt.minY}}),p("line",function(O){var C=O.attr(),v=C.x1,x=C.y1,T=C.x2,N=C.y2,X={minX:Math.min(v,T),maxX:Math.max(v,T),minY:Math.min(x,N),maxY:Math.max(x,N)};return{x:(X=y(O,X)).minX,y:X.minY,width:X.maxX-X.minX,height:X.maxY-X.minY}}),p("ellipse",function(O){var C=O.attr(),v=C.x,x=C.y,T=C.rx,N=C.ry;return{x:v-T,y:x-N,width:2*T,height:2*N}})},function(a,A,e){"use strict";var i=e(1),p=e(18),m=e(16),S=e(70),l=e(36),M=e(22),j=e(78),y=e(77),n=e(0),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function O(bt){var St=bt.match(E);if(!St)return"";var pt="";return St.sort(function(ct,zt){return ct=ct.split(":"),zt=zt.split(":"),Number(ct[0])-Number(zt[0])}),Object(n.f)(St,function(ct){ct=ct.split(":"),pt+='<stop offset="'+ct[0]+'" stop-color="'+ct[1]+'"></stop>'}),pt}var C=function(){function bt(St){this.cfg={};var pt=null,ct=Object(n.H)("gradient_");return St.toLowerCase()[0]==="l"?function(zt,Nt){var wt,H,ht=s.exec(zt),dt=Object(n.B)(Object(n.G)(parseFloat(ht[1])),2*Math.PI),yt=ht[2];dt>=0&&dt<.5*Math.PI?(wt={x:0,y:0},H={x:1,y:1}):.5*Math.PI<=dt&&dt<Math.PI?(wt={x:1,y:0},H={x:0,y:1}):Math.PI<=dt&&dt<1.5*Math.PI?(wt={x:1,y:1},H={x:0,y:0}):(wt={x:0,y:1},H={x:1,y:0});var Mt=Math.tan(dt),$=Mt*Mt,lt=(H.x-wt.x+Mt*(H.y-wt.y))/($+1)+wt.x,rt=Mt*(H.x-wt.x+Mt*(H.y-wt.y))/($+1)+wt.y;Nt.setAttribute("x1",wt.x),Nt.setAttribute("y1",wt.y),Nt.setAttribute("x2",lt),Nt.setAttribute("y2",rt),Nt.innerHTML=O(yt)}(St,pt=Object(M.b)("linearGradient")):function(zt,Nt){var wt=d.exec(zt),H=parseFloat(wt[1]),ht=parseFloat(wt[2]),dt=parseFloat(wt[3]),yt=wt[4];Nt.setAttribute("cx",H),Nt.setAttribute("cy",ht),Nt.setAttribute("r",dt),Nt.innerHTML=O(yt)}(St,pt=Object(M.b)("radialGradient")),pt.setAttribute("id",ct),this.el=pt,this.id=ct,this.cfg=St,this}return bt.prototype.match=function(St,pt){return this.cfg===pt},bt}(),v={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},x={x:"-40%",y:"-40%",width:"200%",height:"200%"},T=function(){function bt(St){this.type="filter",this.cfg={},this.type="filter";var pt=Object(M.b)("filter");return Object(n.f)(x,function(ct,zt){pt.setAttribute(zt,ct)}),this.el=pt,this.id=Object(n.H)("filter_"),this.el.id=this.id,this.cfg=St,this._parseShadow(St,pt),this}return bt.prototype.match=function(St,pt){if(this.type!==St)return!1;var ct=!0,zt=this.cfg;return Object(n.f)(Object.keys(zt),function(Nt){if(zt[Nt]!==pt[Nt])return ct=!1,!1}),ct},bt.prototype.update=function(St,pt){var ct=this.cfg;return ct[v[St]]=pt,this._parseShadow(ct,this.el),this},bt.prototype._parseShadow=function(St,pt){var ct=`<feDropShadow
      dx="`+(St.dx||0)+`"
      dy="`+(St.dy||0)+`"
      stdDeviation="`+(St.blur?St.blur/10:0)+`"
      flood-color="`+(St.color?St.color:"#000")+`"
      flood-opacity="`+(St.opacity?St.opacity:1)+`"
      />`;pt.innerHTML=ct},bt}(),N=function(){function bt(St,pt){this.cfg={};var ct=Object(M.b)("marker"),zt=Object(n.H)("marker_");ct.setAttribute("id",zt);var Nt=Object(M.b)("path");Nt.setAttribute("stroke",St.stroke||"none"),Nt.setAttribute("fill",St.fill||"none"),ct.appendChild(Nt),ct.setAttribute("overflow","visible"),ct.setAttribute("orient","auto-start-reverse"),this.el=ct,this.child=Nt,this.id=zt;var wt=St[pt==="marker-start"?"startArrow":"endArrow"];return this.stroke=St.stroke||"#000",wt===!0?this._setDefaultPath(pt,Nt):(this.cfg=wt,this._setMarker(St.lineWidth,Nt)),this}return bt.prototype.match=function(){return!1},bt.prototype._setDefaultPath=function(St,pt){var ct=this.el;pt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ct.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ct.setAttribute("refY","5")},bt.prototype._setMarker=function(St,pt){var ct=this.el,zt=this.cfg.path,Nt=this.cfg.d;Object(n.m)(zt)&&(zt=zt.map(function(wt){return wt.join(" ")}).join("")),pt.setAttribute("d",zt),ct.appendChild(pt),Nt&&ct.setAttribute("refX",""+Nt/St)},bt.prototype.update=function(St){var pt=this.child;pt.attr?pt.attr("fill",St):pt.setAttribute("fill",St)},bt}(),X=function(){function bt(St){this.type="clip",this.cfg={};var pt=Object(M.b)("clipPath");this.el=pt,this.id=Object(n.H)("clip_"),pt.id=this.id;var ct=St.cfg.el;return pt.appendChild(ct),this.cfg=St,this}return bt.prototype.match=function(){return!1},bt.prototype.remove=function(){var St=this.el;St.parentNode.removeChild(St)},bt}(),tt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nt=function(){function bt(St){this.cfg={};var pt=Object(M.b)("pattern");pt.setAttribute("patternUnits","userSpaceOnUse");var ct=Object(M.b)("image");pt.appendChild(ct);var zt=Object(n.H)("pattern_");pt.id=zt,this.el=pt,this.id=zt,this.cfg=St;var Nt=tt.exec(St)[2];ct.setAttribute("href",Nt);var wt=new Image;function H(){pt.setAttribute("width",""+wt.width),pt.setAttribute("height",""+wt.height)}return Nt.match(/^data:/i)||(wt.crossOrigin="Anonymous"),wt.src=Nt,wt.complete?H():(wt.onload=H,wt.src=wt.src),this}return bt.prototype.match=function(St,pt){return this.cfg===pt},bt}(),vt=function(){function bt(St){var pt=Object(M.b)("defs"),ct=Object(n.H)("defs_");pt.id=ct,St.appendChild(pt),this.children=[],this.defaultArrow={},this.el=pt,this.canvas=St}return bt.prototype.find=function(St,pt){for(var ct=this.children,zt=null,Nt=0;Nt<ct.length;Nt++)if(ct[Nt].match(St,pt)){zt=ct[Nt].id;break}return zt},bt.prototype.findById=function(St){for(var pt=this.children,ct=null,zt=0;zt<pt.length;zt++)if(pt[zt].id===St){ct=pt[zt];break}return ct},bt.prototype.add=function(St){this.children.push(St),St.canvas=this.canvas,St.parent=this},bt.prototype.getDefaultArrow=function(St,pt){var ct=St.stroke||St.strokeStyle;if(this.defaultArrow[ct])return this.defaultArrow[ct].id;var zt=new N(St,pt);return this.defaultArrow[ct]=zt,this.el.appendChild(zt.el),this.add(zt),zt.id},bt.prototype.addGradient=function(St){var pt=new C(St);return this.el.appendChild(pt.el),this.add(pt),pt.id},bt.prototype.addArrow=function(St,pt){var ct=new N(St,pt);return this.el.appendChild(ct.el),this.add(ct),ct.id},bt.prototype.addShadow=function(St){var pt=new T(St);return this.el.appendChild(pt.el),this.add(pt),pt.id},bt.prototype.addPattern=function(St){var pt=new nt(St);return this.el.appendChild(pt.el),this.add(pt),pt.id},bt.prototype.addClip=function(St){var pt=new X(St);return this.el.appendChild(pt.el),this.add(pt),pt.id},bt}(),ft=function(bt){function St(pt){return bt.call(this,Object(i.a)(Object(i.a)({},pt),{autoDraw:!0,renderer:"svg"}))||this}return Object(i.b)(St,bt),St.prototype.getShapeBase=function(){return j},St.prototype.getGroupBase=function(){return y.a},St.prototype.getShape=function(pt,ct,zt){var Nt=zt.target||zt.srcElement;if(!m.a[Nt.tagName]){for(var wt=Nt.parentNode;wt&&!m.a[wt.tagName];)wt=wt.parentNode;Nt=wt}return this.find(function(H){return H.get("el")===Nt})},St.prototype.createDom=function(){var pt=Object(M.b)("svg"),ct=new vt(pt);return pt.setAttribute("width",""+this.get("width")),pt.setAttribute("height",""+this.get("height")),this.set("context",ct),pt},St.prototype.onCanvasChange=function(pt){var ct=this.get("context"),zt=this.get("el");if(pt==="sort"){var Nt=this.get("children");Nt&&Nt.length&&Object(M.d)(this,function(H,ht){return Nt.indexOf(H)-Nt.indexOf(ht)?1:0})}else if(pt==="clear"){if(zt){zt.innerHTML="";var wt=ct.el;wt.innerHTML="",zt.appendChild(wt)}}else pt==="matrix"?Object(l.c)(this):pt==="clip"?Object(l.a)(this,ct):pt==="changeSize"&&(zt.setAttribute("width",""+this.get("width")),zt.setAttribute("height",""+this.get("height")))},St.prototype.draw=function(){var pt=this.get("context"),ct=this.getChildren();Object(l.a)(this,pt),ct.length&&Object(S.a)(pt,ct)},St}(p.AbstractCanvas);A.a=ft},function(a,A,e){"use strict";var i=e(1),p=e(18);function m(s,d,E){var O=s.getTotalMatrix();if(O){var C=function(v,x){if(x){var T=Object(p.invert)(x);return Object(p.multiplyVec2)(T,v)}return v}([d,E,1],O);return[C[0],C[1]]}return[d,E]}function S(s,d,E){if(s.isCanvas&&s.isCanvas())return!0;if(!Object(p.isAllowCapture)(s)||s.cfg.isInView===!1)return!1;if(s.cfg.clipShape){var O=m(s,d,E),C=O[0],v=O[1];if(s.isClipped(C,v))return!1}var x=s.cfg.cacheCanvasBBox||s.getCanvasBBox();return d>=x.minX&&d<=x.maxX&&E>=x.minY&&E<=x.maxY}var l=e(56),M=e(76),j=e(17),y=e(29),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(i.b)(d,s),d.prototype.getDefaultCfg=function(){var E=s.prototype.getDefaultCfg.call(this);return E.renderer="canvas",E.autoDraw=!0,E.localRefresh=!0,E.refreshElements=[],E.clipView=!0,E.quickHit=!1,E},d.prototype.onCanvasChange=function(E){E!=="attr"&&E!=="sort"&&E!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},d.prototype.getShapeBase=function(){return l},d.prototype.getGroupBase=function(){return M.a},d.prototype.getPixelRatio=function(){var E=this.get("pixelRatio")||Object(j.d)();return E>=1?Math.ceil(E):1},d.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},d.prototype.createDom=function(){var E=document.createElement("canvas"),O=E.getContext("2d");return this.set("context",O),E},d.prototype.setDOMSize=function(E,O){s.prototype.setDOMSize.call(this,E,O);var C=this.get("context"),v=this.get("el"),x=this.getPixelRatio();v.width=x*E,v.height=x*O,x>1&&C.scale(x,x)},d.prototype.clear=function(){s.prototype.clear.call(this),this._clearFrame();var E=this.get("context"),O=this.get("el");E.clearRect(0,0,O.width,O.height)},d.prototype.getShape=function(E,O){return this.get("quickHit")?function C(v,x,T){if(!S(v,x,T))return null;for(var N=null,X=v.getChildren(),tt=X.length-1;tt>=0;tt--){var nt=X[tt];if(nt.isGroup())N=C(nt,x,T);else if(S(nt,x,T)){var vt=nt,ft=m(nt,x,T),bt=ft[0],St=ft[1];vt.isInShape(bt,St)&&(N=nt)}if(N)break}return N}(this,E,O):s.prototype.getShape.call(this,E,O,null)},d.prototype._getRefreshRegion=function(){var E,O=this.get("refreshElements"),C=this.getViewRange();return O.length&&O[0]===this?E=C:(E=Object(y.f)(O))&&(E.minX=Math.floor(E.minX),E.minY=Math.floor(E.minY),E.maxX=Math.ceil(E.maxX),E.maxY=Math.ceil(E.maxY),E.maxY+=1,this.get("clipView")&&(E=Object(y.g)(E,C))),E},d.prototype.refreshElement=function(E){this.get("refreshElements").push(E)},d.prototype._clearFrame=function(){var E=this.get("drawFrame");E&&(Object(j.a)(E),this.set("drawFrame",null),this.set("refreshElements",[]))},d.prototype.draw=function(){var E=this.get("drawFrame");this.get("autoDraw")&&E||this._startDraw()},d.prototype._drawAll=function(){var E=this.get("context"),O=this.get("el"),C=this.getChildren();E.clearRect(0,0,O.width,O.height),Object(y.a)(E,this),Object(y.d)(E,C),this.set("refreshElements",[])},d.prototype._drawRegion=function(){var E=this.get("context"),O=this.get("refreshElements"),C=this.getChildren(),v=this._getRefreshRegion();v?(E.clearRect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),E.save(),E.beginPath(),E.rect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),E.clip(),Object(y.a)(E,this),Object(y.b)(this,C,v),Object(y.d)(E,C,v),E.restore()):O.length&&Object(y.c)(O),Object(j.c)(O,function(x){x.get("hasChanged")&&x.set("hasChanged",!1)}),this.set("refreshElements",[])},d.prototype._startDraw=function(){var E=this,O=this.get("drawFrame");O||(O=Object(j.n)(function(){E.get("localRefresh")?E._drawRegion():E._drawAll(),E.set("drawFrame",null)}),this.set("drawFrame",O))},d.prototype.skipDraw=function(){},d}(p.AbstractCanvas);A.a=n},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var i=e(473);A.default=function(p,m){return m===void 0&&(m=!0),{lazyInject:i.makePropertyInjectDecorator(p,m),lazyInjectNamed:i.makePropertyInjectNamedDecorator(p,m),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(p,m),lazyMultiInject:i.makePropertyMultiInjectDecorator(p,m)}}},function(a,A,e){var i=e(202);a.exports=function(p){return p&&p.length?i(p):[]}},function(a,A,e){var i,p,m;function S(l){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}m=function(){"use strict";var M=function(rn){return rn instanceof Uint8Array||rn instanceof Uint16Array||rn instanceof Uint32Array||rn instanceof Int8Array||rn instanceof Int16Array||rn instanceof Int32Array||rn instanceof Float32Array||rn instanceof Float64Array||rn instanceof Uint8ClampedArray},j=function(rn,on){for(var $n=Object.keys(on),vr=0;vr<$n.length;++vr)rn[$n[vr]]=on[$n[vr]];return rn};function y($e){var rn=new Error("(regl) "+$e);throw console.error(rn),rn}function n($e,rn){$e||y(rn)}function s($e){return $e?": "+$e:""}function d($e,rn){switch(rn){case"number":return typeof $e=="number";case"object":return S($e)==="object";case"string":return typeof $e=="string";case"boolean":return typeof $e=="boolean";case"function":return typeof $e=="function";case"undefined":return $e===void 0;case"symbol":return S($e)==="symbol"}}function E($e,rn,on){rn.indexOf($e)<0&&y("invalid value"+s(on)+". must be one of: "+rn)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function C($e,rn){for($e+="";$e.length<rn;)$e=" "+$e;return $e}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function x($e,rn){this.number=$e,this.line=rn,this.errors=[]}function T($e,rn,on){this.file=$e,this.line=rn,this.message=on}function N(){var $e=new Error,rn=($e.stack||$e).toString(),on=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(rn);return $n?$n[1]:"unknown"}function X(){var $e=new Error,rn=($e.stack||$e).toString(),on=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(rn);return $n?$n[1]:"unknown"}function tt($e,rn){var on,$n=$e.split(`
`),vr=1,ar=0,rr={unknown:new v,0:new v};rr.unknown.name=rr[0].name=rn||N(),rr.unknown.lines.push(new x(0,""));for(var Fr=0;Fr<$n.length;++Fr){var Ar=$n[Fr],wr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ar);if(wr)switch(wr[1]){case"line":var xr=/(\d+)(\s+\d+)?/.exec(wr[2]);xr&&(vr=0|xr[1],xr[2]&&((ar=0|xr[2])in rr||(rr[ar]=new v)));break;case"define":var Er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wr[2]);Er&&(rr[ar].name=Er[1]?(on=Er[2],typeof atob!="undefined"?atob(on):"base64:"+on):Er[2])}rr[ar].lines.push(new x(vr++,Ar))}return Object.keys(rr).forEach(function(Ir){var Lr=rr[Ir];Lr.lines.forEach(function(Pr){Lr.index[Pr.number]=Pr})}),rr}function nt($e){$e._commandRef=N()}function vt($e,rn){var on=X();y($e+" in command "+(rn||N())+(on==="unknown"?"":" called from "+on))}function ft($e,rn,on,$n){d($e,rn)||vt("invalid parameter type"+s(on)+". expected "+rn+", got "+S($e),$n||N())}var bt={};function St($e,rn){return $e===32820||$e===32819||$e===33635?2:$e===34042?4:bt[$e]*rn}function pt($e){return!($e&$e-1||!$e)}bt[5120]=bt[5121]=1,bt[5122]=bt[5123]=bt[36193]=bt[33635]=bt[32819]=bt[32820]=2,bt[5124]=bt[5125]=bt[5126]=bt[34042]=4;var ct=j(n,{optional:function(rn){rn()},raise:y,commandRaise:vt,command:function(rn,on,$n){rn||vt(on,$n||N())},parameter:function(rn,on,$n){rn in on||y("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join())},commandParameter:function(rn,on,$n,vr){rn in on||vt("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join(),vr||N())},constructor:function(rn){Object.keys(rn).forEach(function(on){O.indexOf(on)<0&&y('invalid regl constructor argument "'+on+'". must be one of '+O)})},type:function(rn,on,$n){d(rn,on)||y("invalid parameter type"+s($n)+". expected "+on+", got "+S(rn))},commandType:ft,isTypedArray:function(rn,on){M(rn)||y("invalid parameter type"+s(on)+". must be a typed array")},nni:function(rn,on){rn>=0&&(0|rn)===rn||y("invalid parameter type, ("+rn+")"+s(on)+". must be a nonnegative integer")},oneOf:E,shaderError:function(rn,on,$n,vr,ar){if(!rn.getShaderParameter(on,rn.COMPILE_STATUS)){var rr=rn.getShaderInfoLog(on),Fr=vr===rn.FRAGMENT_SHADER?"fragment":"vertex";ft($n,"string",Fr+" shader source must be a string",ar);var Ar=tt($n,ar),wr=function(xr){var Er=[];return xr.split(`
`).forEach(function(Ir){if(!(Ir.length<5)){var Lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ir);Lr?Er.push(new T(0|Lr[1],0|Lr[2],Lr[3].trim())):Ir.length>0&&Er.push(new T("unknown",0,Ir))}}),Er}(rr);(function(xr,Er){Er.forEach(function(Ir){var Lr=xr[Ir.file];if(Lr){var Pr=Lr.index[Ir.line];if(Pr)return Pr.errors.push(Ir),void(Lr.hasErrors=!0)}xr.unknown.hasErrors=!0,xr.unknown.lines[0].errors.push(Ir)})})(Ar,wr),Object.keys(Ar).forEach(function(xr){var Er=Ar[xr];if(Er.hasErrors){var Ir=[""],Lr=[""];Pr("file number "+xr+": "+Er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Er.lines.forEach(function(Dr){if(Dr.errors.length>0){Pr(C(Dr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pr(Dr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var ri=0;Dr.errors.forEach(function(vi){var ii=vi.message,Si=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ii);if(Si){var _i=Si[1];switch(ii=Si[2],_i){case"assign":_i="="}ri=Math.max(Dr.line.indexOf(_i,ri),0)}else ri=0;Pr(C("| ",6)),Pr(C("^^^",ri+3)+`
`,"font-weight:bold"),Pr(C("| ",6)),Pr(ii+`
`,"font-weight:bold")}),Pr(C("| ",6)+`
`)}else Pr(C(Dr.number,4)+"|  "),Pr(Dr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Ir.join("")):(Lr[0]=Ir.join("%c"),console.log.apply(console,Lr))}function Pr(Dr,ri){Ir.push(Dr),Lr.push(ri||"")}}),n.raise("Error compiling "+Fr+" shader, "+Ar[0].name)}},linkError:function(rn,on,$n,vr,ar){if(!rn.getProgramParameter(on,rn.LINK_STATUS)){var rr=rn.getProgramInfoLog(on),Fr=tt($n,ar),Ar='Error linking program with vertex shader, "'+tt(vr,ar)[0].name+'", and fragment shader "'+Fr[0].name+'"';typeof document!="undefined"?console.log("%c"+Ar+`
%c`+rr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ar+`
`+rr),n.raise(Ar)}},callSite:X,saveCommandRef:nt,saveDrawInfo:function(rn,on,$n,vr){function ar(wr){return wr?vr.id(wr):0}function rr(wr,xr){Object.keys(xr).forEach(function(Er){wr[vr.id(Er)]=!0})}nt(rn),rn._fragId=ar(rn.static.frag),rn._vertId=ar(rn.static.vert);var Fr=rn._uniformSet={};rr(Fr,on.static),rr(Fr,on.dynamic);var Ar=rn._attributeSet={};rr(Ar,$n.static),rr(Ar,$n.dynamic),rn._hasCount="count"in rn.static||"count"in rn.dynamic||"elements"in rn.static||"elements"in rn.dynamic},framebufferFormat:function(rn,on,$n){rn.texture?E(rn.texture._texture.internalformat,on,"unsupported texture format for attachment"):E(rn.renderbuffer._renderbuffer.format,$n,"unsupported renderbuffer format for attachment")},guessCommand:N,texture2D:function(rn,on,$n){var vr,ar=on.width,rr=on.height,Fr=on.channels;n(ar>0&&ar<=$n.maxTextureSize&&rr>0&&rr<=$n.maxTextureSize,"invalid texture shape"),rn.wrapS===33071&&rn.wrapT===33071||n(pt(ar)&&pt(rr),"incompatible wrap mode for texture, both width and height must be power of 2"),on.mipmask===1?ar!==1&&rr!==1&&n(rn.minFilter!==9984&&rn.minFilter!==9986&&rn.minFilter!==9985&&rn.minFilter!==9987,"min filter requires mipmap"):(n(pt(ar)&&pt(rr),"texture must be a square power of 2 to support mipmapping"),n(on.mipmask===(ar<<1)-1,"missing or incomplete mipmap data")),on.type===5126&&($n.extensions.indexOf("oes_texture_float_linear")<0&&n(rn.minFilter===9728&&rn.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),n(!rn.genMipmaps,"mipmap generation not supported with float textures"));var Ar=on.images;for(vr=0;vr<16;++vr)if(Ar[vr]){var wr=ar>>vr,xr=rr>>vr;n(on.mipmask&1<<vr,"missing mipmap data");var Er=Ar[vr];if(n(Er.width===wr&&Er.height===xr,"invalid shape for mip images"),n(Er.format===on.format&&Er.internalformat===on.internalformat&&Er.type===on.type,"incompatible type for mip image"),!Er.compressed)if(Er.data){var Ir=Math.ceil(St(Er.type,Fr)*wr/Er.unpackAlignment)*Er.unpackAlignment;n(Er.data.byteLength===Ir*xr,"invalid data for image, buffer size is inconsistent with image format")}else Er.element||Er.copy}else rn.genMipmaps||n((on.mipmask&1<<vr)==0,"extra mipmap data");on.compressed&&n(!rn.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(rn,on,$n,vr){var ar=rn.width,rr=rn.height,Fr=rn.channels;n(ar>0&&ar<=vr.maxTextureSize&&rr>0&&rr<=vr.maxTextureSize,"invalid texture shape"),n(ar===rr,"cube map must be square"),n(on.wrapS===33071&&on.wrapT===33071,"wrap mode not supported by cube map");for(var Ar=0;Ar<$n.length;++Ar){var wr=$n[Ar];n(wr.width===ar&&wr.height===rr,"inconsistent cube map face shape"),on.genMipmaps&&(n(!wr.compressed,"can not generate mipmap for compressed textures"),n(wr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xr=wr.images,Er=0;Er<16;++Er){var Ir=xr[Er];if(Ir){var Lr=ar>>Er,Pr=rr>>Er;n(wr.mipmask&1<<Er,"missing mipmap data"),n(Ir.width===Lr&&Ir.height===Pr,"invalid shape for mip images"),n(Ir.format===rn.format&&Ir.internalformat===rn.internalformat&&Ir.type===rn.type,"incompatible type for mip image"),Ir.compressed||(Ir.data?n(Ir.data.byteLength===Lr*Pr*Math.max(St(Ir.type,Fr),Ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ir.element||Ir.copy)}}}}}),zt=0;function Nt($e,rn){this.id=zt++,this.type=$e,this.data=rn}function wt($e){return $e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function H($e){return"["+function rn(on){if(on.length===0)return[];var $n=on.charAt(0),vr=on.charAt(on.length-1);if(on.length>1&&$n===vr&&($n==='"'||$n==="'"))return['"'+wt(on.substr(1,on.length-2))+'"'];var ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(on);if(ar)return rn(on.substr(0,ar.index)).concat(rn(ar[1])).concat(rn(on.substr(ar.index+ar[0].length)));var rr=on.split(".");if(rr.length===1)return['"'+wt(on)+'"'];for(var Fr=[],Ar=0;Ar<rr.length;++Ar)Fr=Fr.concat(rn(rr[Ar]));return Fr}($e).join("][")+"]"}var ht={DynamicVariable:Nt,define:function(rn,on){return new Nt(rn,H(on+""))},isDynamic:function(rn){return typeof rn=="function"&&!rn._reglType||rn instanceof Nt},unbox:function $e(rn,on){return typeof rn=="function"?new Nt(0,rn):typeof rn=="number"||typeof rn=="boolean"?new Nt(5,rn):Array.isArray(rn)?new Nt(6,rn.map(function($n,vr){return $e($n,on+"["+vr+"]")})):rn instanceof Nt?rn:void ct(!1,"invalid option type in uniform "+on)},accessor:H},dt={next:typeof requestAnimationFrame=="function"?function($e){return requestAnimationFrame($e)}:function($e){return setTimeout($e,16)},cancel:typeof cancelAnimationFrame=="function"?function($e){return cancelAnimationFrame($e)}:clearTimeout},yt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Mt($e){return typeof $e=="string"?$e.split():(ct(Array.isArray($e),"invalid extension array"),$e)}function $($e){return typeof $e=="string"?(ct(typeof document!="undefined","not supported outside of DOM"),document.querySelector($e)):$e}function lt($e){var rn,on,$n,vr,ar,rr=$e||{},Fr={},Ar=[],wr=[],xr=typeof window=="undefined"?1:window.devicePixelRatio,Er=!1,Ir=function(ri){ri&&ct.raise(ri)},Lr=function(){};if(typeof rr=="string"?(ct(typeof document!="undefined","selector queries only supported in DOM enviroments"),rn=document.querySelector(rr),ct(rn,"invalid query string for element")):S(rr)==="object"?typeof(ar=rr).nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rn=rr:function(Dr){return typeof Dr.drawArrays=="function"||typeof Dr.drawElements=="function"}(rr)?$n=(vr=rr).canvas:(ct.constructor(rr),"gl"in rr?vr=rr.gl:"canvas"in rr?$n=$(rr.canvas):"container"in rr&&(on=$(rr.container)),"attributes"in rr&&(Fr=rr.attributes,ct.type(Fr,"object","invalid context attributes")),"extensions"in rr&&(Ar=Mt(rr.extensions)),"optionalExtensions"in rr&&(wr=Mt(rr.optionalExtensions)),"onDone"in rr&&(ct.type(rr.onDone,"function","invalid or missing onDone callback"),Ir=rr.onDone),"profile"in rr&&(Er=!!rr.profile),"pixelRatio"in rr&&(xr=+rr.pixelRatio,ct(xr>0,"invalid pixel ratio"))):ct.raise("invalid arguments to regl"),rn&&(rn.nodeName.toLowerCase()==="canvas"?$n=rn:on=rn),!vr){if(!$n){ct(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Pr=function(Dr,ri,vi){var ii,Si=document.createElement("canvas");function _i(){var Xi=window.innerWidth,Bi=window.innerHeight;if(Dr!==document.body){var Di=Dr.getBoundingClientRect();Xi=Di.right-Di.left,Bi=Di.bottom-Di.top}Si.width=vi*Xi,Si.height=vi*Bi,j(Si.style,{width:Xi+"px",height:Bi+"px"})}return j(Si.style,{border:0,margin:0,padding:0,top:0,left:0}),Dr.appendChild(Si),Dr===document.body&&(Si.style.position="absolute",j(Dr.style,{margin:0,padding:0})),Dr!==document.body&&typeof ResizeObserver=="function"?(ii=new ResizeObserver(function(){setTimeout(_i)})).observe(Dr):window.addEventListener("resize",_i,!1),_i(),{canvas:Si,onDestroy:function(){ii?ii.disconnect():window.removeEventListener("resize",_i),Dr.removeChild(Si)}}}(on||document.body,0,xr);if(!Pr)return null;$n=Pr.canvas,Lr=Pr.onDestroy}Fr.premultipliedAlpha===void 0&&(Fr.premultipliedAlpha=!0),vr=function(Dr,ri){function vi(ii){try{return Dr.getContext(ii,ri)}catch(Si){return null}}return vi("webgl")||vi("experimental-webgl")||vi("webgl-experimental")}($n,Fr)}return vr?{gl:vr,canvas:$n,container:on,extensions:Ar,optionalExtensions:wr,pixelRatio:xr,profile:Er,onDone:Ir,onDestroy:Lr}:(Lr(),Ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function rt($e,rn){for(var on=Array($e),$n=0;$n<$e;++$n)on[$n]=rn($n);return on}function z($e){var rn,on;return rn=($e>65535)<<4,rn|=on=(($e>>>=rn)>255)<<3,rn|=on=(($e>>>=on)>15)<<2,(rn|=on=(($e>>>=on)>3)<<1)|($e>>>=on)>>1}function P(){var $e=rt(8,function(){return[]});function rn($n){var vr=function(rr){for(var Fr=16;Fr<=1<<28;Fr*=16)if(rr<=Fr)return Fr;return 0}($n),ar=$e[z(vr)>>2];return ar.length>0?ar.pop():new ArrayBuffer(vr)}function on($n){$e[z($n.byteLength)>>2].push($n)}return{alloc:rn,free:on,allocType:function(vr,ar){var rr=null;switch(vr){case 5120:rr=new Int8Array(rn(ar),0,ar);break;case 5121:rr=new Uint8Array(rn(ar),0,ar);break;case 5122:rr=new Int16Array(rn(2*ar),0,ar);break;case 5123:rr=new Uint16Array(rn(2*ar),0,ar);break;case 5124:rr=new Int32Array(rn(4*ar),0,ar);break;case 5125:rr=new Uint32Array(rn(4*ar),0,ar);break;case 5126:rr=new Float32Array(rn(4*ar),0,ar);break;default:return null}return rr.length!==ar?rr.subarray(0,ar):rr},freeType:function(vr){on(vr.buffer)}}}var Y=P();function k($e){return!!$e&&S($e)==="object"&&Array.isArray($e.shape)&&Array.isArray($e.stride)&&typeof $e.offset=="number"&&$e.shape.length===$e.stride.length&&(Array.isArray($e.data)||M($e.data))}Y.zero=P();var h=function(rn){return Object.keys(rn).map(function(on){return rn[on]})},g={shape:function(rn){for(var on=[],$n=rn;$n.length;$n=$n[0])on.push($n.length);return on},flatten:function(rn,on,$n,vr){var ar=1;if(on.length)for(var rr=0;rr<on.length;++rr)ar*=on[rr];else ar=0;var Fr=vr||Y.allocType($n,ar);switch(on.length){case 0:break;case 1:(function(Ar,wr,xr){for(var Er=0;Er<wr;++Er)xr[Er]=Ar[Er]})(rn,on[0],Fr);break;case 2:(function(Ar,wr,xr,Er){for(var Ir=0,Lr=0;Lr<wr;++Lr)for(var Pr=Ar[Lr],Dr=0;Dr<xr;++Dr)Er[Ir++]=Pr[Dr]})(rn,on[0],on[1],Fr);break;case 3:B(rn,on[0],on[1],on[2],Fr,0);break;default:(function Ar(wr,xr,Er,Ir,Lr){for(var Pr=1,Dr=Er+1;Dr<xr.length;++Dr)Pr*=xr[Dr];var ri=xr[Er];if(xr.length-Er==4){var vi=xr[Er+1],ii=xr[Er+2],Si=xr[Er+3];for(Dr=0;Dr<ri;++Dr)B(wr[Dr],vi,ii,Si,Ir,Lr),Lr+=Pr}else for(Dr=0;Dr<ri;++Dr)Ar(wr[Dr],xr,Er+1,Ir,Lr),Lr+=Pr})(rn,on,0,Fr,0)}return Fr}};function B($e,rn,on,$n,vr,ar){for(var rr=ar,Fr=0;Fr<rn;++Fr)for(var Ar=$e[Fr],wr=0;wr<on;++wr)for(var xr=Ar[wr],Er=0;Er<$n;++Er)vr[rr++]=xr[Er]}var V={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},it={dynamic:35048,stream:35040,static:35044},ot=g.flatten,At=g.shape,gt=[];function mt($e){return 0|V[Object.prototype.toString.call($e)]}function Ot($e,rn){for(var on=0;on<rn.length;++on)$e[on]=rn[on]}function It($e,rn,on,$n,vr,ar,rr){for(var Fr=0,Ar=0;Ar<on;++Ar)for(var wr=0;wr<$n;++wr)$e[Fr++]=rn[vr*Ar+ar*wr+rr]}gt[5120]=1,gt[5122]=2,gt[5124]=4,gt[5121]=1,gt[5123]=2,gt[5125]=4,gt[5126]=4;var Dt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ut=new Float32Array(1),Ct=new Uint32Array(Ut.buffer);function Vt($e){for(var rn=Y.allocType(5123,$e.length),on=0;on<$e.length;++on)if(isNaN($e[on]))rn[on]=65535;else if($e[on]===1/0)rn[on]=31744;else if($e[on]===-1/0)rn[on]=64512;else{Ut[0]=$e[on];var $n=Ct[0],vr=$n>>>31<<15,ar=($n<<1>>>24)-127,rr=$n>>13&1023;if(ar<-24)rn[on]=vr;else if(ar<-14){var Fr=-14-ar;rn[on]=vr+(rr+1024>>Fr)}else rn[on]=ar>15?vr+31744:vr+(ar+15<<10)+rr}return rn}function Ht($e){return Array.isArray($e)||M($e)}var re=function(rn){return!(rn&rn-1||!rn)},pe=[9984,9986,9985,9987],ye=[0,6409,6410,6407,6408],we={};function Ne($e){return"[object "+$e+"]"}we[6409]=we[6406]=we[6402]=1,we[34041]=we[6410]=2,we[6407]=we[35904]=3,we[6408]=we[35906]=4;var Ke=Ne("HTMLCanvasElement"),pn=Ne("OffscreenCanvas"),hn=Ne("CanvasRenderingContext2D"),kn=Ne("ImageBitmap"),Tn=Ne("HTMLImageElement"),Rn=Ne("HTMLVideoElement"),Mn=Object.keys(V).concat([Ke,pn,hn,kn,Tn,Rn]),Cn=[];Cn[5121]=1,Cn[5126]=4,Cn[36193]=2,Cn[5123]=2,Cn[5125]=4;var _n=[];function Kn($e){return Array.isArray($e)&&($e.length===0||typeof $e[0]=="number")}function tr($e){return!!Array.isArray($e)&&!($e.length===0||!Ht($e[0]))}function or($e){return Object.prototype.toString.call($e)}function nr($e){return or($e)===Ke}function er($e){return or($e)===pn}function Sr($e){if(!$e)return!1;var rn=or($e);return Mn.indexOf(rn)>=0||Kn($e)||tr($e)||k($e)}function Vr($e){return 0|V[Object.prototype.toString.call($e)]}function ti($e,rn){return Y.allocType($e.type===36193?5126:$e.type,rn)}function hi($e,rn){$e.type===36193?($e.data=Vt(rn),Y.freeType(rn)):$e.data=rn}function Fi($e,rn,on,$n,vr,ar){var rr;if(rr=_n[$e]!==void 0?_n[$e]:we[$e]*Cn[rn],ar&&(rr*=6),vr){for(var Fr=0,Ar=on;Ar>=1;)Fr+=rr*Ar*Ar,Ar/=2;return Fr}return rr*on*$n}function to($e,rn,on,$n,vr,ar,rr){var Fr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ar={repeat:10497,clamp:33071,mirror:33648},wr={nearest:9728,linear:9729},xr=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wr),Er={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Lr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};rn.ext_srgb&&(Lr.srgb=35904,Lr.srgba=35906),rn.oes_texture_float&&(Ir.float32=Ir.float=5126),rn.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),rn.webgl_depth_texture&&(j(Lr,{depth:6402,"depth stencil":34041}),j(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),rn.webgl_compressed_texture_s3tc&&j(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rn.webgl_compressed_texture_atc&&j(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rn.webgl_compressed_texture_pvrtc&&j(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rn.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var Dr=Array.prototype.slice.call($e.getParameter(34467));Object.keys(Pr).forEach(function(Zt){var de=Pr[Zt];Dr.indexOf(de)>=0&&(Lr[Zt]=de)});var ri=Object.keys(Lr);on.textureFormats=ri;var vi=[];Object.keys(Lr).forEach(function(Zt){var de=Lr[Zt];vi[de]=Zt});var ii=[];Object.keys(Ir).forEach(function(Zt){var de=Ir[Zt];ii[de]=Zt});var Si=[];Object.keys(wr).forEach(function(Zt){Si[wr[Zt]]=Zt});var _i=[];Object.keys(xr).forEach(function(Zt){var de=xr[Zt];_i[de]=Zt});var Xi=[];Object.keys(Ar).forEach(function(Zt){Xi[Ar[Zt]]=Zt});var Bi=ri.reduce(function(Zt,de){var he=Lr[de];return he===6409||he===6406||he===6409||he===6410||he===6402||he===34041||rn.ext_srgb&&(he===35904||he===35906)?Zt[he]=he:he===32855||de.indexOf("rgba")>=0?Zt[he]=6408:Zt[he]=6407,Zt},{});function Di(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function ve(Zt,de){Zt.internalformat=de.internalformat,Zt.format=de.format,Zt.type=de.type,Zt.compressed=de.compressed,Zt.premultiplyAlpha=de.premultiplyAlpha,Zt.flipY=de.flipY,Zt.unpackAlignment=de.unpackAlignment,Zt.colorSpace=de.colorSpace,Zt.width=de.width,Zt.height=de.height,Zt.channels=de.channels}function G(Zt,de){if(S(de)==="object"&&de){if("premultiplyAlpha"in de&&(ct.type(de.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Zt.premultiplyAlpha=de.premultiplyAlpha),"flipY"in de&&(ct.type(de.flipY,"boolean","invalid texture flip"),Zt.flipY=de.flipY),"alignment"in de&&(ct.oneOf(de.alignment,[1,2,4,8],"invalid texture unpack alignment"),Zt.unpackAlignment=de.alignment),"colorSpace"in de&&(ct.parameter(de.colorSpace,Er,"invalid colorSpace"),Zt.colorSpace=Er[de.colorSpace]),"type"in de){var he=de.type;ct(rn.oes_texture_float||!(he==="float"||he==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ct(rn.oes_texture_half_float||!(he==="half float"||he==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ct(rn.webgl_depth_texture||!(he==="uint16"||he==="uint32"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ct.parameter(he,Ir,"invalid texture type"),Zt.type=Ir[he]}var ce=Zt.width,Me=Zt.height,ze=Zt.channels,Ve=!1;"shape"in de?(ct(Array.isArray(de.shape)&&de.shape.length>=2,"shape must be an array"),ce=de.shape[0],Me=de.shape[1],de.shape.length===3&&(ze=de.shape[2],ct(ze>0&&ze<=4,"invalid number of channels"),Ve=!0),ct(ce>=0&&ce<=on.maxTextureSize,"invalid width"),ct(Me>=0&&Me<=on.maxTextureSize,"invalid height")):("radius"in de&&(ce=Me=de.radius,ct(ce>=0&&ce<=on.maxTextureSize,"invalid radius")),"width"in de&&(ce=de.width,ct(ce>=0&&ce<=on.maxTextureSize,"invalid width")),"height"in de&&(Me=de.height,ct(Me>=0&&Me<=on.maxTextureSize,"invalid height")),"channels"in de&&(ze=de.channels,ct(ze>0&&ze<=4,"invalid number of channels"),Ve=!0)),Zt.width=0|ce,Zt.height=0|Me,Zt.channels=0|ze;var ke=!1;if("format"in de){var tn=de.format;ct(rn.webgl_depth_texture||!(tn==="depth"||tn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ct.parameter(tn,Lr,"invalid texture format");var De=Zt.internalformat=Lr[tn];Zt.format=Bi[De],tn in Ir&&("type"in de||(Zt.type=Ir[tn])),tn in Pr&&(Zt.compressed=!0),ke=!0}!Ve&&ke?Zt.channels=we[Zt.format]:Ve&&!ke?Zt.channels!==ye[Zt.format]&&(Zt.format=Zt.internalformat=ye[Zt.channels]):ke&&Ve&&ct(Zt.channels===we[Zt.format],"number of channels inconsistent with specified format")}}function F(Zt){$e.pixelStorei(37440,Zt.flipY),$e.pixelStorei(37441,Zt.premultiplyAlpha),$e.pixelStorei(37443,Zt.colorSpace),$e.pixelStorei(3317,Zt.unpackAlignment)}function Z(){Di.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ut(Zt,de){var he=null;if(Sr(de)?he=de:de&&(ct.type(de,"object","invalid pixel data type"),G(Zt,de),"x"in de&&(Zt.xOffset=0|de.x),"y"in de&&(Zt.yOffset=0|de.y),Sr(de.data)&&(he=de.data)),ct(!Zt.compressed||he instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),de.copy){ct(!he,"can not specify copy and data field for the same texture");var ce=vr.viewportWidth,Me=vr.viewportHeight;Zt.width=Zt.width||ce-Zt.xOffset,Zt.height=Zt.height||Me-Zt.yOffset,Zt.needsCopy=!0,ct(Zt.xOffset>=0&&Zt.xOffset<ce&&Zt.yOffset>=0&&Zt.yOffset<Me&&Zt.width>0&&Zt.width<=ce&&Zt.height>0&&Zt.height<=Me,"copy texture read out of bounds")}else if(he){if(M(he))Zt.channels=Zt.channels||4,Zt.data=he,"type"in de||Zt.type!==5121||(Zt.type=Vr(he));else if(Kn(he))Zt.channels=Zt.channels||4,function(_e,ln){var mn=ln.length;switch(_e.type){case 5121:case 5123:case 5125:case 5126:var Wn=Y.allocType(_e.type,mn);Wn.set(ln),_e.data=Wn;break;case 36193:_e.data=Vt(ln);break;default:ct.raise("unsupported texture type, must specify a typed array")}}(Zt,he),Zt.alignment=1,Zt.needsFree=!0;else if(k(he)){var ze=he.data;Array.isArray(ze)||Zt.type!==5121||(Zt.type=Vr(ze));var Ve,ke,tn,De,cn,fn,nn=he.shape,dn=he.stride;nn.length===3?(tn=nn[2],fn=dn[2]):(ct(nn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),tn=1,fn=1),Ve=nn[0],ke=nn[1],De=dn[0],cn=dn[1],Zt.alignment=1,Zt.width=Ve,Zt.height=ke,Zt.channels=tn,Zt.format=Zt.internalformat=ye[tn],Zt.needsFree=!0,function(_e,ln,mn,Wn,An,In){for(var lr=_e.width,Hr=_e.height,Gr=_e.channels,Mr=ti(_e,lr*Hr*Gr),oi=0,ai=0;ai<Hr;++ai)for(var Zr=0;Zr<lr;++Zr)for(var Yi=0;Yi<Gr;++Yi)Mr[oi++]=ln[mn*Zr+Wn*ai+An*Yi+In];hi(_e,Mr)}(Zt,ze,De,cn,fn,he.offset)}else if(nr(he)||er(he)||or(he)===hn)nr(he)||er(he)?Zt.element=he:Zt.element=he.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(function(_e){return or(_e)===kn}(he))Zt.element=he,Zt.width=he.width,Zt.height=he.height,Zt.channels=4;else if(function(_e){return or(_e)===Tn}(he))Zt.element=he,Zt.width=he.naturalWidth,Zt.height=he.naturalHeight,Zt.channels=4;else if(function(_e){return or(_e)===Rn}(he))Zt.element=he,Zt.width=he.videoWidth,Zt.height=he.videoHeight,Zt.channels=4;else if(tr(he)){var Sn=Zt.width||he[0].length,Pe=Zt.height||he.length,le=Zt.channels;le=Ht(he[0][0])?le||he[0][0].length:le||1;for(var Le=g.shape(he),Be=1,en=0;en<Le.length;++en)Be*=Le[en];var sn=ti(Zt,Be);g.flatten(he,Le,"",sn),hi(Zt,sn),Zt.alignment=1,Zt.width=Sn,Zt.height=Pe,Zt.channels=le,Zt.format=Zt.internalformat=ye[le],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4;Zt.type===5126?ct(on.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Zt.type===36193&&ct(on.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Bt(Zt,de,he){var ce=Zt.element,Me=Zt.data,ze=Zt.internalformat,Ve=Zt.format,ke=Zt.type,tn=Zt.width,De=Zt.height;F(Zt),ce?$e.texImage2D(de,he,Ve,Ve,ke,ce):Zt.compressed?$e.compressedTexImage2D(de,he,ze,tn,De,0,Me):Zt.needsCopy?($n(),$e.copyTexImage2D(de,he,Ve,Zt.xOffset,Zt.yOffset,tn,De,0)):$e.texImage2D(de,he,Ve,tn,De,0,Ve,ke,Me||null)}function Jt(Zt,de,he,ce,Me){var ze=Zt.element,Ve=Zt.data,ke=Zt.internalformat,tn=Zt.format,De=Zt.type,cn=Zt.width,fn=Zt.height;F(Zt),ze?$e.texSubImage2D(de,Me,he,ce,tn,De,ze):Zt.compressed?$e.compressedTexSubImage2D(de,Me,he,ce,ke,cn,fn,Ve):Zt.needsCopy?($n(),$e.copyTexSubImage2D(de,Me,he,ce,Zt.xOffset,Zt.yOffset,cn,fn)):$e.texSubImage2D(de,Me,he,ce,cn,fn,tn,De,Ve)}var ie=[];function se(){return ie.pop()||new Z}function Te(Zt){Zt.needsFree&&Y.freeType(Zt.data),Z.call(Zt),ie.push(Zt)}function Ee(){Di.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function un(Zt,de,he){var ce=Zt.images[0]=se();Zt.mipmask=1,ce.width=Zt.width=de,ce.height=Zt.height=he,ce.channels=Zt.channels=4}function xn(Zt,de){var he=null;if(Sr(de))ve(he=Zt.images[0]=se(),Zt),ut(he,de),Zt.mipmask=1;else if(G(Zt,de),Array.isArray(de.mipmap))for(var ce=de.mipmap,Me=0;Me<ce.length;++Me)ve(he=Zt.images[Me]=se(),Zt),he.width>>=Me,he.height>>=Me,ut(he,ce[Me]),Zt.mipmask|=1<<Me;else ve(he=Zt.images[0]=se(),Zt),ut(he,de),Zt.mipmask=1;ve(Zt,Zt.images[0]),!Zt.compressed||Zt.internalformat!==33776&&Zt.internalformat!==33777&&Zt.internalformat!==33778&&Zt.internalformat!==33779||ct(Zt.width%4==0&&Zt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function _t(Zt,de){for(var he=Zt.images,ce=0;ce<he.length;++ce){if(!he[ce])return;Bt(he[ce],de,ce)}}var Xt=[];function Se(){var Zt=Xt.pop()||new Ee;Di.call(Zt),Zt.mipmask=0;for(var de=0;de<16;++de)Zt.images[de]=null;return Zt}function Wt(Zt){for(var de=Zt.images,he=0;he<de.length;++he)de[he]&&Te(de[he]),de[he]=null;Xt.push(Zt)}function ue(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function vn(Zt,de){if("min"in de){var he=de.min;ct.parameter(he,xr),Zt.minFilter=xr[he],pe.indexOf(Zt.minFilter)>=0&&!("faces"in de)&&(Zt.genMipmaps=!0)}if("mag"in de){var ce=de.mag;ct.parameter(ce,wr),Zt.magFilter=wr[ce]}var Me=Zt.wrapS,ze=Zt.wrapT;if("wrap"in de){var Ve=de.wrap;typeof Ve=="string"?(ct.parameter(Ve,Ar),Me=ze=Ar[Ve]):Array.isArray(Ve)&&(ct.parameter(Ve[0],Ar),ct.parameter(Ve[1],Ar),Me=Ar[Ve[0]],ze=Ar[Ve[1]])}else{if("wrapS"in de){var ke=de.wrapS;ct.parameter(ke,Ar),Me=Ar[ke]}if("wrapT"in de){var tn=de.wrapT;ct.parameter(tn,Ar),ze=Ar[tn]}}if(Zt.wrapS=Me,Zt.wrapT=ze,"anisotropic"in de){var De=de.anisotropic;ct(typeof De=="number"&&De>=1&&De<=on.maxAnisotropic,"aniso samples must be between 1 and "),Zt.anisotropic=de.anisotropic}if("mipmap"in de){var cn=!1;switch(S(de.mipmap)){case"string":ct.parameter(de.mipmap,Fr,"invalid mipmap hint"),Zt.mipmapHint=Fr[de.mipmap],Zt.genMipmaps=!0,cn=!0;break;case"boolean":cn=Zt.genMipmaps=de.mipmap;break;case"object":ct(Array.isArray(de.mipmap),"invalid mipmap type"),Zt.genMipmaps=!1,cn=!0;break;default:ct.raise("invalid mipmap type")}cn&&!("min"in de)&&(Zt.minFilter=9984)}}function Dn(Zt,de){$e.texParameteri(de,10241,Zt.minFilter),$e.texParameteri(de,10240,Zt.magFilter),$e.texParameteri(de,10242,Zt.wrapS),$e.texParameteri(de,10243,Zt.wrapT),rn.ext_texture_filter_anisotropic&&$e.texParameteri(de,34046,Zt.anisotropic),Zt.genMipmaps&&($e.hint(33170,Zt.mipmapHint),$e.generateMipmap(de))}var zn=0,Un={},Ze=on.maxTextureUnits,Ce=Array(Ze).map(function(){return null});function R(Zt){Di.call(this),this.mipmask=0,this.internalformat=6408,this.id=zn++,this.refCount=1,this.target=Zt,this.texture=$e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ue,rr.profile&&(this.stats={size:0})}function xt(Zt){$e.activeTexture(33984),$e.bindTexture(Zt.target,Zt.texture)}function $t(){var Zt=Ce[0];Zt?$e.bindTexture(Zt.target,Zt.texture):$e.bindTexture(3553,null)}function me(Zt){var de=Zt.texture;ct(de,"must not double destroy texture");var he=Zt.unit,ce=Zt.target;he>=0&&($e.activeTexture(33984+he),$e.bindTexture(ce,null),Ce[he]=null),$e.deleteTexture(de),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Un[Zt.id],ar.textureCount--}return j(R.prototype,{bind:function(){this.bindCount+=1;var de=this.unit;if(de<0){for(var he=0;he<Ze;++he){var ce=Ce[he];if(ce){if(ce.bindCount>0)continue;ce.unit=-1}Ce[he]=this,de=he;break}de>=Ze&&ct.raise("insufficient number of texture units"),rr.profile&&ar.maxTextureUnits<de+1&&(ar.maxTextureUnits=de+1),this.unit=de,$e.activeTexture(33984+de),$e.bindTexture(this.target,this.texture)}return de},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&me(this)}}),rr.profile&&(ar.getTotalTextureSize=function(){var Zt=0;return Object.keys(Un).forEach(function(de){Zt+=Un[de].stats.size}),Zt}),{create2D:function(de,he){var ce=new R(3553);function Me(ze,Ve){var ke=ce.texInfo;ue.call(ke);var tn=Se();return typeof ze=="number"?un(tn,0|ze,typeof Ve=="number"?0|Ve:0|ze):ze?(ct.type(ze,"object","invalid arguments to regl.texture"),vn(ke,ze),xn(tn,ze)):un(tn,1,1),ke.genMipmaps&&(tn.mipmask=(tn.width<<1)-1),ce.mipmask=tn.mipmask,ve(ce,tn),ct.texture2D(ke,tn,on),ce.internalformat=tn.internalformat,Me.width=tn.width,Me.height=tn.height,xt(ce),_t(tn,3553),Dn(ke,3553),$t(),Wt(tn),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,tn.width,tn.height,ke.genMipmaps,!1)),Me.format=vi[ce.internalformat],Me.type=ii[ce.type],Me.mag=Si[ke.magFilter],Me.min=_i[ke.minFilter],Me.wrapS=Xi[ke.wrapS],Me.wrapT=Xi[ke.wrapT],Me}return Un[ce.id]=ce,ar.textureCount++,Me(de,he),Me.subimage=function(ze,Ve,ke,tn){ct(!!ze,"must specify image data");var De=0|Ve,cn=0|ke,fn=0|tn,nn=se();return ve(nn,ce),nn.width=0,nn.height=0,ut(nn,ze),nn.width=nn.width||(ce.width>>fn)-De,nn.height=nn.height||(ce.height>>fn)-cn,ct(ce.type===nn.type&&ce.format===nn.format&&ce.internalformat===nn.internalformat,"incompatible format for texture.subimage"),ct(De>=0&&cn>=0&&De+nn.width<=ce.width&&cn+nn.height<=ce.height,"texture.subimage write out of bounds"),ct(ce.mipmask&1<<fn,"missing mipmap data"),ct(nn.data||nn.element||nn.needsCopy,"missing image data"),xt(ce),Jt(nn,3553,De,cn,fn),$t(),Te(nn),Me},Me.resize=function(ze,Ve){var ke=0|ze,tn=0|Ve||ke;if(ke===ce.width&&tn===ce.height)return Me;Me.width=ce.width=ke,Me.height=ce.height=tn,xt(ce);for(var De=0;ce.mipmask>>De;++De){var cn=ke>>De,fn=tn>>De;if(!cn||!fn)break;$e.texImage2D(3553,De,ce.format,cn,fn,0,ce.format,ce.type,null)}return $t(),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,ke,tn,!1,!1)),Me},Me._reglType="texture2d",Me._texture=ce,rr.profile&&(Me.stats=ce.stats),Me.destroy=function(){ce.decRef()},Me},createCube:function(de,he,ce,Me,ze,Ve){var ke=new R(34067);Un[ke.id]=ke,ar.cubeCount++;var tn=new Array(6);function De(cn,fn,nn,dn,Sn,Pe){var le,Le=ke.texInfo;for(ue.call(Le),le=0;le<6;++le)tn[le]=Se();if(typeof cn!="number"&&cn)if(S(cn)==="object")if(fn)xn(tn[0],cn),xn(tn[1],fn),xn(tn[2],nn),xn(tn[3],dn),xn(tn[4],Sn),xn(tn[5],Pe);else if(vn(Le,cn),G(ke,cn),"faces"in cn){var Be=cn.faces;for(ct(Array.isArray(Be)&&Be.length===6,"cube faces must be a length 6 array"),le=0;le<6;++le)ct(S(Be[le])==="object"&&!!Be[le],"invalid input for cube map face"),ve(tn[le],ke),xn(tn[le],Be[le])}else for(le=0;le<6;++le)xn(tn[le],cn);else ct.raise("invalid arguments to cube map");else{var en=0|cn||1;for(le=0;le<6;++le)un(tn[le],en,en)}for(ve(ke,tn[0]),on.npotTextureCube||ct(re(ke.width)&&re(ke.height),"your browser does not support non power or two texture dimensions"),Le.genMipmaps?ke.mipmask=(tn[0].width<<1)-1:ke.mipmask=tn[0].mipmask,ct.textureCube(ke,Le,tn,on),ke.internalformat=tn[0].internalformat,De.width=tn[0].width,De.height=tn[0].height,xt(ke),le=0;le<6;++le)_t(tn[le],34069+le);for(Dn(Le,34067),$t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,Le.genMipmaps,!0)),De.format=vi[ke.internalformat],De.type=ii[ke.type],De.mag=Si[Le.magFilter],De.min=_i[Le.minFilter],De.wrapS=Xi[Le.wrapS],De.wrapT=Xi[Le.wrapT],le=0;le<6;++le)Wt(tn[le]);return De}return De(de,he,ce,Me,ze,Ve),De.subimage=function(cn,fn,nn,dn,Sn){ct(!!fn,"must specify image data"),ct(typeof cn=="number"&&cn===(0|cn)&&cn>=0&&cn<6,"invalid face");var Pe=0|nn,le=0|dn,Le=0|Sn,Be=se();return ve(Be,ke),Be.width=0,Be.height=0,ut(Be,fn),Be.width=Be.width||(ke.width>>Le)-Pe,Be.height=Be.height||(ke.height>>Le)-le,ct(ke.type===Be.type&&ke.format===Be.format&&ke.internalformat===Be.internalformat,"incompatible format for texture.subimage"),ct(Pe>=0&&le>=0&&Pe+Be.width<=ke.width&&le+Be.height<=ke.height,"texture.subimage write out of bounds"),ct(ke.mipmask&1<<Le,"missing mipmap data"),ct(Be.data||Be.element||Be.needsCopy,"missing image data"),xt(ke),Jt(Be,34069+cn,Pe,le,Le),$t(),Te(Be),De},De.resize=function(cn){var fn=0|cn;if(fn!==ke.width){De.width=ke.width=fn,De.height=ke.height=fn,xt(ke);for(var nn=0;nn<6;++nn)for(var dn=0;ke.mipmask>>dn;++dn)$e.texImage2D(34069+nn,dn,ke.format,fn>>dn,fn>>dn,0,ke.format,ke.type,null);return $t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,!1,!0)),De}},De._reglType="textureCube",De._texture=ke,rr.profile&&(De.stats=ke.stats),De.destroy=function(){ke.decRef()},De},clear:function(){for(var de=0;de<Ze;++de)$e.activeTexture(33984+de),$e.bindTexture(3553,null),Ce[de]=null;h(Un).forEach(me),ar.cubeCount=0,ar.textureCount=0},getTexture:function(de){return null},restore:function(){for(var de=0;de<Ze;++de){var he=Ce[de];he&&(he.bindCount=0,he.unit=-1,Ce[de]=null)}h(Un).forEach(function(ce){ce.texture=$e.createTexture(),$e.bindTexture(ce.target,ce.texture);for(var Me=0;Me<32;++Me)if((ce.mipmask&1<<Me)!=0)if(ce.target===3553)$e.texImage2D(3553,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);else for(var ze=0;ze<6;++ze)$e.texImage2D(34069+ze,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);Dn(ce.texInfo,ce.target)})},refresh:function(){for(var de=0;de<Ze;++de){var he=Ce[de];he&&(he.bindCount=0,he.unit=-1,Ce[de]=null),$e.activeTexture(33984+de),$e.bindTexture(3553,null),$e.bindTexture(34067,null)}}}}_n[32854]=2,_n[32855]=2,_n[36194]=2,_n[34041]=4,_n[33776]=.5,_n[33777]=.5,_n[33778]=1,_n[33779]=1,_n[35986]=.5,_n[35987]=1,_n[34798]=1,_n[35840]=.5,_n[35841]=.25,_n[35842]=.5,_n[35843]=.25,_n[36196]=.5;var si=[];function Ci($e,rn,on){return si[$e]*rn*on}si[32854]=2,si[32855]=2,si[36194]=2,si[33189]=2,si[36168]=1,si[34041]=4,si[35907]=4,si[34836]=16,si[34842]=8,si[34843]=6;var Ui=[6407,6408],Li=[];Li[6408]=4,Li[6407]=3;var Vi=[];Vi[5121]=1,Vi[5126]=4,Vi[36193]=2;var ro=[32854,32855,36194,35907,34842,34843,34836],jr={};function Ji(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function pr($e,rn,on,$n,vr,ar,rr){function Fr(Ar){var wr;rn.next===null?(ct(vr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wr=5121):(ct(rn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wr=rn.next.colorAttachments[0].texture._texture.type,ar.oes_texture_float?(ct(wr===5121||wr===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wr===5126&&ct(rr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ct(wr===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xr=0,Er=0,Ir=$n.framebufferWidth,Lr=$n.framebufferHeight,Pr=null;M(Ar)?Pr=Ar:Ar&&(ct.type(Ar,"object","invalid arguments to regl.read()"),xr=0|Ar.x,Er=0|Ar.y,ct(xr>=0&&xr<$n.framebufferWidth,"invalid x offset for regl.read"),ct(Er>=0&&Er<$n.framebufferHeight,"invalid y offset for regl.read"),Ir=0|(Ar.width||$n.framebufferWidth-xr),Lr=0|(Ar.height||$n.framebufferHeight-Er),Pr=Ar.data||null),Pr&&(wr===5121?ct(Pr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wr===5126&&ct(Pr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ct(Ir>0&&Ir+xr<=$n.framebufferWidth,"invalid width for read pixels"),ct(Lr>0&&Lr+Er<=$n.framebufferHeight,"invalid height for read pixels"),on();var Dr=Ir*Lr*4;return Pr||(wr===5121?Pr=new Uint8Array(Dr):wr===5126&&(Pr=Pr||new Float32Array(Dr))),ct.isTypedArray(Pr,"data buffer for regl.read() must be a typedarray"),ct(Pr.byteLength>=Dr,"data buffer for regl.read() too small"),$e.pixelStorei(3333,4),$e.readPixels(xr,Er,Ir,Lr,6408,wr,Pr),Pr}return function(Ar){return Ar&&"framebuffer"in Ar?function(wr){var xr;return rn.setFBO({framebuffer:wr.framebuffer},function(){xr=Fr(wr)}),xr}(Ar):Fr(Ar)}}function Xr($e){return Array.prototype.slice.call($e)}function Br($e){return Xr($e).join("")}jr[36053]="complete",jr[36054]="incomplete attachment",jr[36057]="incomplete dimensions",jr[36055]="incomplete, missing attachment",jr[36061]="unsupported";var Nr="xyzw".split(""),Yr="profile",Kr="framebuffer",ni="vert",fi="frag",$r="elements",ci="primitive",Qr="count",gi="offset",Oi="instances",bi="vao",zi=Kr+"Width",Qi=Kr+"Height",io=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Wi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Pi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},no={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mo={frag:35632,vert:35633},ao={cw:2304,ccw:2305};function uo($e){return Array.isArray($e)||M($e)||k($e)}function xo($e){return $e.sort(function(rn,on){return rn==="viewport"?-1:on==="viewport"?1:rn<on?-1:1})}function oe($e,rn,on,$n){this.thisDep=$e,this.contextDep=rn,this.propDep=on,this.append=$n}function Kt($e){return $e&&!($e.thisDep||$e.contextDep||$e.propDep)}function te($e){return new oe(!1,!1,!1,$e)}function Oe($e,rn){var on=$e.type;if(on===0){var $n=$e.data.length;return new oe(!0,$n>=1,$n>=2,rn)}if(on===4){var vr=$e.data;return new oe(vr.thisDep,vr.contextDep,vr.propDep,rn)}if(on===5)return new oe(!1,!1,!1,rn);if(on===6){for(var ar=!1,rr=!1,Fr=!1,Ar=0;Ar<$e.data.length;++Ar){var wr=$e.data[Ar];if(wr.type===1)Fr=!0;else if(wr.type===2)rr=!0;else if(wr.type===3)ar=!0;else if(wr.type===0){ar=!0;var xr=wr.data;xr>=1&&(rr=!0),xr>=2&&(Fr=!0)}else wr.type===4&&(ar=ar||wr.data.thisDep,rr=rr||wr.data.contextDep,Fr=Fr||wr.data.propDep)}return new oe(ar,rr,Fr,rn)}return new oe(on===3,on===2,on===1,rn)}var Qe=new oe(!1,!1,!1,function(){});function On($e,rn,on,$n,vr,ar,rr,Fr,Ar,wr,xr,Er,Ir,Lr,Pr){var Dr=wr.Record,ri={add:32774,subtract:32778,"reverse subtract":32779};on.ext_blend_minmax&&(ri.min=32775,ri.max=32776);var vi=on.angle_instanced_arrays,ii=on.webgl_draw_buffers,Si={dirty:!0,profile:Pr.profile},_i={},Xi=[],Bi={},Di={};function ve(Ze){return Ze.replace(".","_")}function G(Ze,Ce,R){var xt=ve(Ze);Xi.push(Ze),_i[xt]=Si[xt]=!!R,Bi[xt]=Ce}function F(Ze,Ce,R){var xt=ve(Ze);Xi.push(Ze),Array.isArray(R)?(Si[xt]=R.slice(),_i[xt]=R.slice()):Si[xt]=_i[xt]=R,Di[xt]=Ce}G("dither",3024),G("blend.enable",3042),F("blend.color","blendColor",[0,0,0,0]),F("blend.equation","blendEquationSeparate",[32774,32774]),F("blend.func","blendFuncSeparate",[1,0,1,0]),G("depth.enable",2929,!0),F("depth.func","depthFunc",513),F("depth.range","depthRange",[0,1]),F("depth.mask","depthMask",!0),F("colorMask","colorMask",[!0,!0,!0,!0]),G("cull.enable",2884),F("cull.face","cullFace",1029),F("frontFace","frontFace",2305),F("lineWidth","lineWidth",1),G("polygonOffset.enable",32823),F("polygonOffset.offset","polygonOffset",[0,0]),G("sample.alpha",32926),G("sample.enable",32928),F("sample.coverage","sampleCoverage",[1,!1]),G("stencil.enable",2960),F("stencil.mask","stencilMask",-1),F("stencil.func","stencilFunc",[519,0,-1]),F("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),F("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),G("scissor.enable",3089),F("scissor.box","scissor",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]),F("viewport","viewport",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]);var Z={gl:$e,context:Ir,strings:rn,next:_i,current:Si,draw:Er,elements:ar,buffer:vr,shader:xr,attributes:wr.state,vao:wr,uniforms:Ar,framebuffer:Fr,extensions:on,timer:Lr,isBufferArgs:uo},ut={primTypes:Dt,compareFuncs:Pi,blendFuncs:Wi,blendEquations:ri,stencilOps:no,glTypes:q,orientationType:ao};ct.optional(function(){Z.isArrayLike=Ht}),ii&&(ut.backBuffer=[1029],ut.drawBuffer=rt($n.maxDrawbuffers,function(Ze){return Ze===0?[0]:rt(Ze,function(Ce){return 36064+Ce})}));var Bt=0;function Jt(){var Ze=function(){var ce=0,Me=[],ze=[];function Ve(){var cn=[],fn=[];return j(function(){cn.push.apply(cn,Xr(arguments))},{def:function(){var dn="v"+ce++;return fn.push(dn),arguments.length>0&&(cn.push(dn,"="),cn.push.apply(cn,Xr(arguments)),cn.push(";")),dn},toString:function(){return Br([fn.length>0?"var "+fn.join(",")+";":"",Br(cn)])}})}function ke(){var cn=Ve(),fn=Ve(),nn=cn.toString,dn=fn.toString;function Sn(Pe,le){fn(Pe,le,"=",cn.def(Pe,le),";")}return j(function(){cn.apply(cn,Xr(arguments))},{def:cn.def,entry:cn,exit:fn,save:Sn,set:function(le,Le,Be){Sn(le,Le),cn(le,Le,"=",Be,";")},toString:function(){return nn()+dn()}})}var tn=Ve(),De={};return{global:tn,link:function(fn){for(var nn=0;nn<ze.length;++nn)if(ze[nn]===fn)return Me[nn];var dn="g"+ce++;return Me.push(dn),ze.push(fn),dn},block:Ve,proc:function(fn,nn){var dn=[];function Sn(){var Be="a"+dn.length;return dn.push(Be),Be}nn=nn||0;for(var Pe=0;Pe<nn;++Pe)Sn();var le=ke(),Le=le.toString;return De[fn]=j(le,{arg:Sn,toString:function(){return Br(["function(",dn.join(),"){",Le(),"}"])}})},scope:ke,cond:function(){var fn=Br(arguments),nn=ke(),dn=ke(),Sn=nn.toString,Pe=dn.toString;return j(nn,{then:function(){return nn.apply(nn,Xr(arguments)),this},else:function(){return dn.apply(dn,Xr(arguments)),this},toString:function(){var Le=Pe();return Le&&(Le="else{"+Le+"}"),Br(["if(",fn,"){",Sn(),"}",Le])}})},compile:function(){var fn=['"use strict";',tn,"return {"];Object.keys(De).forEach(function(dn){fn.push('"',dn,'":',De[dn].toString(),",")}),fn.push("}");var nn=Br(fn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Me.concat(nn)).apply(null,ze)}}}(),Ce=Ze.link,R=Ze.global;Ze.id=Bt++,Ze.batchId="0";var xt=Ce(Z),$t=Ze.shared={props:"a0"};Object.keys(Z).forEach(function(ce){$t[ce]=R.def(xt,".",ce)}),ct.optional(function(){Ze.CHECK=Ce(ct),Ze.commandStr=ct.guessCommand(),Ze.command=Ce(Ze.commandStr),Ze.assert=function(ce,Me,ze){ce("if(!(",Me,"))",this.CHECK,".commandRaise(",Ce(ze),",",this.command,");")},ut.invalidBlendCombinations=Zi});var me=Ze.next={},Zt=Ze.current={};Object.keys(Di).forEach(function(ce){Array.isArray(Si[ce])&&(me[ce]=R.def($t.next,".",ce),Zt[ce]=R.def($t.current,".",ce))});var de=Ze.constants={};Object.keys(ut).forEach(function(ce){de[ce]=R.def(JSON.stringify(ut[ce]))}),Ze.invoke=function(ce,Me){switch(Me.type){case 0:var ze=["this",$t.context,$t.props,Ze.batchId];return ce.def(Ce(Me.data),".call(",ze.slice(0,Math.max(Me.data.length+1,4)),")");case 1:return ce.def($t.props,Me.data);case 2:return ce.def($t.context,Me.data);case 3:return ce.def("this",Me.data);case 4:return Me.data.append(Ze,ce),Me.data.ref;case 5:return Me.data.toString();case 6:return Me.data.map(function(Ve){return Ze.invoke(ce,Ve)})}},Ze.attribCache={};var he={};return Ze.scopeAttrib=function(ce){var Me=rn.id(ce);if(Me in he)return he[Me];var ze=wr.scope[Me];return ze||(ze=wr.scope[Me]=new Dr),he[Me]=Ce(ze)},Ze}function ie(Ze,Ce,R,xt,$t){var me=Ze.static,Zt=Ze.dynamic;ct.optional(function(){var dn=[Kr,ni,fi,$r,ci,gi,Qr,Oi,Yr,bi].concat(Xi);function Sn(Pe){Object.keys(Pe).forEach(function(le){ct.command(dn.indexOf(le)>=0,'unknown parameter "'+le+'"',$t.commandStr)})}Sn(me),Sn(Zt)});var de=function(dn,Sn){var Pe=dn.static;if(typeof Pe[fi]=="string"&&typeof Pe[ni]=="string"){if(Object.keys(Sn.dynamic).length>0)return null;var le=Sn.static,Le=Object.keys(le);if(Le.length>0&&typeof le[Le[0]]=="number"){for(var Be=[],en=0;en<Le.length;++en)ct(typeof le[Le[en]]=="number","must specify all vertex attribute locations when using vaos"),Be.push([0|le[Le[en]],Le[en]]);return Be}}return null}(Ze,Ce),he=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(Kr in Pe){var Le=Pe[Kr];return Le?(Le=Fr.getFramebuffer(Le),ct.command(Le,"invalid framebuffer object"),te(function(en,sn){var _e=en.link(Le),ln=en.shared;sn.set(ln.framebuffer,".next",_e);var mn=ln.context;return sn.set(mn,"."+zi,_e+".width"),sn.set(mn,"."+Qi,_e+".height"),_e})):te(function(en,sn){var _e=en.shared;sn.set(_e.framebuffer,".next","null");var ln=_e.context;return sn.set(ln,"."+zi,ln+".drawingBufferWidth"),sn.set(ln,"."+Qi,ln+".drawingBufferHeight"),"null"})}if(Kr in le){var Be=le[Kr];return Oe(Be,function(en,sn){var _e=en.invoke(sn,Be),ln=en.shared,mn=ln.framebuffer,Wn=sn.def(mn,".getFramebuffer(",_e,")");ct.optional(function(){en.assert(sn,"!"+_e+"||"+Wn,"invalid framebuffer object")}),sn.set(mn,".next",Wn);var An=ln.context;return sn.set(An,"."+zi,Wn+"?"+Wn+".width:"+An+".drawingBufferWidth"),sn.set(An,"."+Qi,Wn+"?"+Wn+".height:"+An+".drawingBufferHeight"),Wn})}return null}(Ze),ce=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(_e){if(_e in le){var ln=le[_e];ct.commandType(ln,"object","invalid "+_e,Pe.commandStr);var mn,Wn,An=!0,In=0|ln.x,lr=0|ln.y;return"width"in ln?(mn=0|ln.width,ct.command(mn>=0,"invalid "+_e,Pe.commandStr)):An=!1,"height"in ln?(Wn=0|ln.height,ct.command(Wn>=0,"invalid "+_e,Pe.commandStr)):An=!1,new oe(!An&&Sn&&Sn.thisDep,!An&&Sn&&Sn.contextDep,!An&&Sn&&Sn.propDep,function(Mr,oi){var ai=Mr.shared.context,Zr=mn;"width"in ln||(Zr=oi.def(ai,".",zi,"-",In));var Yi=Wn;return"height"in ln||(Yi=oi.def(ai,".",Qi,"-",lr)),[In,lr,Zr,Yi]})}if(_e in Le){var Hr=Le[_e],Gr=Oe(Hr,function(Mr,oi){var ai=Mr.invoke(oi,Hr);ct.optional(function(){Mr.assert(oi,ai+"&&typeof "+ai+'==="object"',"invalid "+_e)});var Zr=Mr.shared.context,Yi=oi.def(ai,".x|0"),$i=oi.def(ai,".y|0"),Go=oi.def('"width" in ',ai,"?",ai,".width|0:","(",Zr,".",zi,"-",Yi,")"),Uo=oi.def('"height" in ',ai,"?",ai,".height|0:","(",Zr,".",Qi,"-",$i,")");return ct.optional(function(){Mr.assert(oi,Go+">=0&&"+Uo+">=0","invalid "+_e)}),[Yi,$i,Go,Uo]});return Sn&&(Gr.thisDep=Gr.thisDep||Sn.thisDep,Gr.contextDep=Gr.contextDep||Sn.contextDep,Gr.propDep=Gr.propDep||Sn.propDep),Gr}return Sn?new oe(Sn.thisDep,Sn.contextDep,Sn.propDep,function(Mr,oi){var ai=Mr.shared.context;return[0,0,oi.def(ai,".",zi),oi.def(ai,".",Qi)]}):null}var en=Be("viewport");if(en){var sn=en;en=new oe(en.thisDep,en.contextDep,en.propDep,function(_e,ln){var mn=sn.append(_e,ln),Wn=_e.shared.context;return ln.set(Wn,".viewportWidth",mn[2]),ln.set(Wn,".viewportHeight",mn[3]),mn})}return{viewport:en,scissor_box:Be("scissor.box")}}(Ze,he,$t),Me=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le=function(){if($r in Pe){var sn=Pe[$r];uo(sn)?sn=ar.getElements(ar.create(sn,!0)):sn&&(sn=ar.getElements(sn),ct.command(sn,"invalid elements",Sn.commandStr));var _e=te(function(mn,Wn){if(sn){var An=mn.link(sn);return mn.ELEMENTS=An,An}return mn.ELEMENTS=null,null});return _e.value=sn,_e}if($r in le){var ln=le[$r];return Oe(ln,function(mn,Wn){var An=mn.shared,In=An.isBufferArgs,lr=An.elements,Hr=mn.invoke(Wn,ln),Gr=Wn.def("null"),Mr=Wn.def(In,"(",Hr,")"),oi=mn.cond(Mr).then(Gr,"=",lr,".createStream(",Hr,");").else(Gr,"=",lr,".getElements(",Hr,");");return ct.optional(function(){mn.assert(oi.else,"!"+Hr+"||"+Gr,"invalid elements")}),Wn.entry(oi),Wn.exit(mn.cond(Mr).then(lr,".destroyStream(",Gr,");")),mn.ELEMENTS=Gr,Gr})}return null}();function Be(sn,_e){if(sn in Pe){var ln=0|Pe[sn];return ct.command(!_e||ln>=0,"invalid "+sn,Sn.commandStr),te(function(Wn,An){return _e&&(Wn.OFFSET=ln),ln})}if(sn in le){var mn=le[sn];return Oe(mn,function(Wn,An){var In=Wn.invoke(An,mn);return _e&&(Wn.OFFSET=In,ct.optional(function(){Wn.assert(An,In+">=0","invalid "+sn)})),In})}return _e&&Le?te(function(Wn,An){return Wn.OFFSET="0",0}):null}var en=Be(gi,!0);return{elements:Le,primitive:function(){if(ci in Pe){var sn=Pe[ci];return ct.commandParameter(sn,Dt,"invalid primitve",Sn.commandStr),te(function(ln,mn){return Dt[sn]})}if(ci in le){var _e=le[ci];return Oe(_e,function(ln,mn){var Wn=ln.constants.primTypes,An=ln.invoke(mn,_e);return ct.optional(function(){ln.assert(mn,An+" in "+Wn,"invalid primitive, must be one of "+Object.keys(Dt))}),mn.def(Wn,"[",An,"]")})}return Le?Kt(Le)?Le.value?te(function(ln,mn){return mn.def(ln.ELEMENTS,".primType")}):te(function(){return 4}):new oe(Le.thisDep,Le.contextDep,Le.propDep,function(ln,mn){var Wn=ln.ELEMENTS;return mn.def(Wn,"?",Wn,".primType:",4)}):null}(),count:function(){if(Qr in Pe){var sn=0|Pe[Qr];return ct.command(typeof sn=="number"&&sn>=0,"invalid vertex count",Sn.commandStr),te(function(){return sn})}if(Qr in le){var _e=le[Qr];return Oe(_e,function(Wn,An){var In=Wn.invoke(An,_e);return ct.optional(function(){Wn.assert(An,"typeof "+In+'==="number"&&'+In+">=0&&"+In+"===("+In+"|0)","invalid vertex count")}),In})}if(Le){if(Kt(Le)){if(Le)return en?new oe(en.thisDep,en.contextDep,en.propDep,function(Wn,An){var In=An.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET);return ct.optional(function(){Wn.assert(An,In+">=0","invalid vertex offset/element buffer too small")}),In}):te(function(Wn,An){return An.def(Wn.ELEMENTS,".vertCount")});var ln=te(function(){return-1});return ct.optional(function(){ln.MISSING=!0}),ln}var mn=new oe(Le.thisDep||en.thisDep,Le.contextDep||en.contextDep,Le.propDep||en.propDep,function(Wn,An){var In=Wn.ELEMENTS;return Wn.OFFSET?An.def(In,"?",In,".vertCount-",Wn.OFFSET,":-1"):An.def(In,"?",In,".vertCount:-1")});return ct.optional(function(){mn.DYNAMIC=!0}),mn}return null}(),instances:Be(Oi,!1),offset:en}}(Ze,$t),ze=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Xi.forEach(function(Be){var en=ve(Be);function sn(_e,ln){if(Be in Pe){var mn=_e(Pe[Be]);Le[en]=te(function(){return mn})}else if(Be in le){var Wn=le[Be];Le[en]=Oe(Wn,function(An,In){return ln(An,In,An.invoke(In,Wn))})}}switch(Be){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return sn(function(_e){return ct.commandType(_e,"boolean",Be,Sn.commandStr),_e},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,"typeof "+mn+'==="boolean"',"invalid flag "+Be,_e.commandStr)}),mn});case"depth.func":return sn(function(_e){return ct.commandParameter(_e,Pi,"invalid "+Be,Sn.commandStr),Pi[_e]},function(_e,ln,mn){var Wn=_e.constants.compareFuncs;return ct.optional(function(){_e.assert(ln,mn+" in "+Wn,"invalid "+Be+", must be one of "+Object.keys(Pi))}),ln.def(Wn,"[",mn,"]")});case"depth.range":return sn(function(_e){return ct.command(Ht(_e)&&_e.length===2&&typeof _e[0]=="number"&&typeof _e[1]=="number"&&_e[0]<=_e[1],"depth range is 2d array",Sn.commandStr),_e},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,_e.shared.isArrayLike+"("+mn+")&&"+mn+".length===2&&typeof "+mn+'[0]==="number"&&typeof '+mn+'[1]==="number"&&'+mn+"[0]<="+mn+"[1]","depth range must be a 2d array")}),[ln.def("+",mn,"[0]"),ln.def("+",mn,"[1]")]});case"blend.func":return sn(function(_e){ct.commandType(_e,"object","blend.func",Sn.commandStr);var ln="srcRGB"in _e?_e.srcRGB:_e.src,mn="srcAlpha"in _e?_e.srcAlpha:_e.src,Wn="dstRGB"in _e?_e.dstRGB:_e.dst,An="dstAlpha"in _e?_e.dstAlpha:_e.dst;return ct.commandParameter(ln,Wi,en+".srcRGB",Sn.commandStr),ct.commandParameter(mn,Wi,en+".srcAlpha",Sn.commandStr),ct.commandParameter(Wn,Wi,en+".dstRGB",Sn.commandStr),ct.commandParameter(An,Wi,en+".dstAlpha",Sn.commandStr),ct.command(Zi.indexOf(ln+", "+Wn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ln+", "+Wn+")",Sn.commandStr),[Wi[ln],Wi[Wn],Wi[mn],Wi[An]]},function(_e,ln,mn){var Wn=_e.constants.blendFuncs;function An(Mr,oi){var ai=ln.def('"',Mr,oi,'" in ',mn,"?",mn,".",Mr,oi,":",mn,".",Mr);return ct.optional(function(){_e.assert(ln,ai+" in "+Wn,"invalid "+Be+"."+Mr+oi+", must be one of "+Object.keys(Wi))}),ai}ct.optional(function(){_e.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid blend func, must be an object")});var In=An("src","RGB"),lr=An("dst","RGB");ct.optional(function(){var Mr=_e.constants.invalidBlendCombinations;_e.assert(ln,Mr+".indexOf("+In+'+", "+'+lr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=ln.def(Wn,"[",In,"]"),Gr=ln.def(Wn,"[",An("src","Alpha"),"]");return[Hr,ln.def(Wn,"[",lr,"]"),Gr,ln.def(Wn,"[",An("dst","Alpha"),"]")]});case"blend.equation":return sn(function(_e){return typeof _e=="string"?(ct.commandParameter(_e,ri,"invalid "+Be,Sn.commandStr),[ri[_e],ri[_e]]):S(_e)==="object"?(ct.commandParameter(_e.rgb,ri,Be+".rgb",Sn.commandStr),ct.commandParameter(_e.alpha,ri,Be+".alpha",Sn.commandStr),[ri[_e.rgb],ri[_e.alpha]]):void ct.commandRaise("invalid blend.equation",Sn.commandStr)},function(_e,ln,mn){var Wn=_e.constants.blendEquations,An=ln.def(),In=ln.def(),lr=_e.cond("typeof ",mn,'==="string"');return ct.optional(function(){function Hr(Gr,Mr,oi){_e.assert(Gr,oi+" in "+Wn,"invalid "+Mr+", must be one of "+Object.keys(ri))}Hr(lr.then,Be,mn),_e.assert(lr.else,mn+"&&typeof "+mn+'==="object"',"invalid "+Be),Hr(lr.else,Be+".rgb",mn+".rgb"),Hr(lr.else,Be+".alpha",mn+".alpha")}),lr.then(An,"=",In,"=",Wn,"[",mn,"];"),lr.else(An,"=",Wn,"[",mn,".rgb];",In,"=",Wn,"[",mn,".alpha];"),ln(lr),[An,In]});case"blend.color":return sn(function(_e){return ct.command(Ht(_e)&&_e.length===4,"blend.color must be a 4d array",Sn.commandStr),rt(4,function(ln){return+_e[ln]})},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,_e.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","blend.color must be a 4d array")}),rt(4,function(Wn){return ln.def("+",mn,"[",Wn,"]")})});case"stencil.mask":return sn(function(_e){return ct.commandType(_e,"number",en,Sn.commandStr),0|_e},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,"typeof "+mn+'==="number"',"invalid stencil.mask")}),ln.def(mn,"|0")});case"stencil.func":return sn(function(_e){ct.commandType(_e,"object",en,Sn.commandStr);var ln=_e.cmp||"keep",mn=_e.ref||0,Wn="mask"in _e?_e.mask:-1;return ct.commandParameter(ln,Pi,Be+".cmp",Sn.commandStr),ct.commandType(mn,"number",Be+".ref",Sn.commandStr),ct.commandType(Wn,"number",Be+".mask",Sn.commandStr),[Pi[ln],mn,Wn]},function(_e,ln,mn){var Wn=_e.constants.compareFuncs;return ct.optional(function(){function An(){_e.assert(ln,Array.prototype.join.call(arguments,""),"invalid stencil.func")}An(mn+"&&typeof ",mn,'==="object"'),An('!("cmp" in ',mn,")||(",mn,".cmp in ",Wn,")")}),[ln.def('"cmp" in ',mn,"?",Wn,"[",mn,".cmp]",":",7680),ln.def(mn,".ref|0"),ln.def('"mask" in ',mn,"?",mn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return sn(function(_e){ct.commandType(_e,"object",en,Sn.commandStr);var ln=_e.fail||"keep",mn=_e.zfail||"keep",Wn=_e.zpass||"keep";return ct.commandParameter(ln,no,Be+".fail",Sn.commandStr),ct.commandParameter(mn,no,Be+".zfail",Sn.commandStr),ct.commandParameter(Wn,no,Be+".zpass",Sn.commandStr),[Be==="stencil.opBack"?1029:1028,no[ln],no[mn],no[Wn]]},function(_e,ln,mn){var Wn=_e.constants.stencilOps;function An(In){return ct.optional(function(){_e.assert(ln,'!("'+In+'" in '+mn+")||("+mn+"."+In+" in "+Wn+")","invalid "+Be+"."+In+", must be one of "+Object.keys(no))}),ln.def('"',In,'" in ',mn,"?",Wn,"[",mn,".",In,"]:",7680)}return ct.optional(function(){_e.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[Be==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return sn(function(_e){ct.commandType(_e,"object",en,Sn.commandStr);var ln=0|_e.factor,mn=0|_e.units;return ct.commandType(ln,"number",en+".factor",Sn.commandStr),ct.commandType(mn,"number",en+".units",Sn.commandStr),[ln,mn]},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[ln.def(mn,".factor|0"),ln.def(mn,".units|0")]});case"cull.face":return sn(function(_e){var ln=0;return _e==="front"?ln=1028:_e==="back"&&(ln=1029),ct.command(!!ln,en,Sn.commandStr),ln},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,mn+'==="front"||'+mn+'==="back"',"invalid cull.face")}),ln.def(mn,'==="front"?',1028,":",1029)});case"lineWidth":return sn(function(_e){return ct.command(typeof _e=="number"&&_e>=$n.lineWidthDims[0]&&_e<=$n.lineWidthDims[1],"invalid line width, must be a positive number between "+$n.lineWidthDims[0]+" and "+$n.lineWidthDims[1],Sn.commandStr),_e},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,"typeof "+mn+'==="number"&&'+mn+">="+$n.lineWidthDims[0]+"&&"+mn+"<="+$n.lineWidthDims[1],"invalid line width")}),mn});case"frontFace":return sn(function(_e){return ct.commandParameter(_e,ao,en,Sn.commandStr),ao[_e]},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,mn+'==="cw"||'+mn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ln.def(mn+'==="cw"?2304:2305')});case"colorMask":return sn(function(_e){return ct.command(Ht(_e)&&_e.length===4,"color.mask must be length 4 array",Sn.commandStr),_e.map(function(ln){return!!ln})},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,_e.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","invalid color.mask")}),rt(4,function(Wn){return"!!"+mn+"["+Wn+"]"})});case"sample.coverage":return sn(function(_e){ct.command(S(_e)==="object"&&_e,en,Sn.commandStr);var ln="value"in _e?_e.value:1,mn=!!_e.invert;return ct.command(typeof ln=="number"&&ln>=0&&ln<=1,"sample.coverage.value must be a number between 0 and 1",Sn.commandStr),[ln,mn]},function(_e,ln,mn){return ct.optional(function(){_e.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid sample.coverage")}),[ln.def('"value" in ',mn,"?+",mn,".value:1"),ln.def("!!",mn,".invert")]})}}),Le}(Ze,$t),Ve=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(mn){if(mn in le){var Wn=rn.id(le[mn]);ct.optional(function(){xr.shader(Mo[mn],Wn,ct.guessCommand())});var An=te(function(){return Wn});return An.id=Wn,An}if(mn in Le){var In=Le[mn];return Oe(In,function(lr,Hr){var Gr=lr.invoke(Hr,In),Mr=Hr.def(lr.shared.strings,".id(",Gr,")");return ct.optional(function(){Hr(lr.shared.shader,".shader(",Mo[mn],",",Mr,",",lr.command,");")}),Mr})}return null}var en,sn=Be(fi),_e=Be(ni),ln=null;return Kt(sn)&&Kt(_e)?(ln=xr.program(_e.id,sn.id,null,Pe),en=te(function(mn,Wn){return mn.link(ln)})):en=new oe(sn&&sn.thisDep||_e&&_e.thisDep,sn&&sn.contextDep||_e&&_e.contextDep,sn&&sn.propDep||_e&&_e.propDep,function(mn,Wn){var An,In=mn.shared.shader;An=sn?sn.append(mn,Wn):Wn.def(In,".",fi);var lr=In+".program("+(_e?_e.append(mn,Wn):Wn.def(In,".",ni))+","+An;return ct.optional(function(){lr+=","+mn.command}),Wn.def(lr+")")}),{frag:sn,vert:_e,progVar:en,program:ln}}(Ze,0,de);function ke(dn){var Sn=ce[dn];Sn&&(ze[dn]=Sn)}ke("viewport"),ke(ve("scissor.box"));var tn=Object.keys(ze).length>0,De={framebuffer:he,draw:Me,shader:Ve,state:ze,dirty:tn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(De.profile=function(dn){var Sn,Pe=dn.static,le=dn.dynamic;if(Yr in Pe){var Le=!!Pe[Yr];(Sn=te(function(en,sn){return Le})).enable=Le}else if(Yr in le){var Be=le[Yr];Sn=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}return Sn}(Ze),De.uniforms=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en,sn=Pe[Be];if(typeof sn=="number"||typeof sn=="boolean")en=te(function(){return sn});else if(typeof sn=="function"){var _e=sn._reglType;_e==="texture2d"||_e==="textureCube"?en=te(function(ln){return ln.link(sn)}):_e==="framebuffer"||_e==="framebufferCube"?(ct.command(sn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Be+'"',Sn.commandStr),en=te(function(ln){return ln.link(sn.color[0])})):ct.commandRaise('invalid data for uniform "'+Be+'"',Sn.commandStr)}else Ht(sn)?en=te(function(ln){return ln.global.def("[",rt(sn.length,function(mn){return ct.command(typeof sn[mn]=="number"||typeof sn[mn]=="boolean","invalid uniform "+Be,ln.commandStr),sn[mn]}),"]")}):ct.commandRaise('invalid or missing data for uniform "'+Be+'"',Sn.commandStr);en.value=sn,Le[Be]=en}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,_e){return sn.invoke(_e,en)})}),Le}(R,$t),De.drawVAO=De.scopeVAO=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(bi in Pe){var Le=Pe[bi];return Le!==null&&wr.getVAO(Le)===null&&(Le=wr.createVAO(Le)),te(function(en){return en.link(wr.getVAO(Le))})}if(bi in le){var Be=le[bi];return Oe(Be,function(en,sn){var _e=en.invoke(sn,Be);return sn.def(en.shared.vao+".getVAO("+_e+")")})}return null}(Ze),!De.drawVAO&&Ve.program&&!de&&on.angle_instanced_arrays){var cn=!0,fn=Ve.program.attributes.map(function(dn){var Sn=Ce.static[dn];return cn=cn&&!!Sn,Sn});if(cn&&fn.length>0){var nn=wr.getVAO(wr.createVAO(fn));De.drawVAO=new oe(null,null,null,function(dn,Sn){return dn.link(nn)}),De.useVAO=!0}}return de?De.useVAO=!0:De.attributes=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en=Pe[Be],sn=rn.id(Be),_e=new Dr;if(uo(en))_e.state=1,_e.buffer=vr.getBuffer(vr.create(en,34962,!1,!0)),_e.type=0;else{var ln=vr.getBuffer(en);if(ln)_e.state=1,_e.buffer=ln,_e.type=0;else if(ct.command(S(en)==="object"&&en,"invalid data for attribute "+Be,Sn.commandStr),"constant"in en){var mn=en.constant;_e.buffer="null",_e.state=2,typeof mn=="number"?_e.x=mn:(ct.command(Ht(mn)&&mn.length>0&&mn.length<=4,"invalid constant for attribute "+Be,Sn.commandStr),Nr.forEach(function(Mr,oi){oi<mn.length&&(_e[Mr]=mn[oi])}))}else{ln=uo(en.buffer)?vr.getBuffer(vr.create(en.buffer,34962,!1,!0)):vr.getBuffer(en.buffer),ct.command(!!ln,'missing buffer for attribute "'+Be+'"',Sn.commandStr);var Wn=0|en.offset;ct.command(Wn>=0,'invalid offset for attribute "'+Be+'"',Sn.commandStr);var An=0|en.stride;ct.command(An>=0&&An<256,'invalid stride for attribute "'+Be+'", must be integer betweeen [0, 255]',Sn.commandStr);var In=0|en.size;ct.command(!("size"in en)||In>0&&In<=4,'invalid size for attribute "'+Be+'", must be 1,2,3,4',Sn.commandStr);var lr=!!en.normalized,Hr=0;"type"in en&&(ct.commandParameter(en.type,q,"invalid type for attribute "+Be,Sn.commandStr),Hr=q[en.type]);var Gr=0|en.divisor;"divisor"in en&&(ct.command(Gr===0||vi,'cannot specify divisor for attribute "'+Be+'", instancing not supported',Sn.commandStr),ct.command(Gr>=0,'invalid divisor for attribute "'+Be+'"',Sn.commandStr)),ct.optional(function(){var Mr=Sn.commandStr,oi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(en).forEach(function(ai){ct.command(oi.indexOf(ai)>=0,'unknown parameter "'+ai+'" for attribute pointer "'+Be+'" (valid parameters are '+oi+")",Mr)})}),_e.buffer=ln,_e.state=1,_e.size=In,_e.normalized=lr,_e.type=Hr||ln.dtype,_e.offset=Wn,_e.stride=An,_e.divisor=Gr}}Le[Be]=te(function(Mr,oi){var ai=Mr.attribCache;if(sn in ai)return ai[sn];var Zr={isStream:!1};return Object.keys(_e).forEach(function(Yi){Zr[Yi]=_e[Yi]}),_e.buffer&&(Zr.buffer=Mr.link(_e.buffer),Zr.type=Zr.type||Zr.buffer+".dtype"),ai[sn]=Zr,Zr})}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,_e){var ln=sn.invoke(_e,en),mn=sn.shared,Wn=sn.constants,An=mn.isBufferArgs,In=mn.buffer;ct.optional(function(){sn.assert(_e,ln+"&&(typeof "+ln+'==="object"||typeof '+ln+'==="function")&&('+An+"("+ln+")||"+In+".getBuffer("+ln+")||"+In+".getBuffer("+ln+".buffer)||"+An+"("+ln+'.buffer)||("constant" in '+ln+"&&(typeof "+ln+'.constant==="number"||'+mn.isArrayLike+"("+ln+".constant))))",'invalid dynamic attribute "'+Be+'"')});var lr={isStream:_e.def(!1)},Hr=new Dr;Hr.state=1,Object.keys(Hr).forEach(function(ai){lr[ai]=_e.def(""+Hr[ai])});var Gr=lr.buffer,Mr=lr.type;function oi(ai){_e(lr[ai],"=",ln,".",ai,"|0;")}return _e("if(",An,"(",ln,")){",lr.isStream,"=true;",Gr,"=",In,".createStream(",34962,",",ln,");",Mr,"=",Gr,".dtype;","}else{",Gr,"=",In,".getBuffer(",ln,");","if(",Gr,"){",Mr,"=",Gr,".dtype;",'}else if("constant" in ',ln,"){",lr.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',lr[Nr[0]],"=",ln,".constant;",Nr.slice(1).map(function(ai){return lr[ai]}).join("="),"=0;","}else{",Nr.map(function(ai,Zr){return lr[ai]+"="+ln+".constant.length>"+Zr+"?"+ln+".constant["+Zr+"]:0;"}).join(""),"}}else{","if(",An,"(",ln,".buffer)){",Gr,"=",In,".createStream(",34962,",",ln,".buffer);","}else{",Gr,"=",In,".getBuffer(",ln,".buffer);","}",Mr,'="type" in ',ln,"?",Wn.glTypes,"[",ln,".type]:",Gr,".dtype;",lr.normalized,"=!!",ln,".normalized;"),oi("size"),oi("offset"),oi("stride"),oi("divisor"),_e("}}"),_e.exit("if(",lr.isStream,"){",In,".destroyStream(",Gr,");","}"),lr})}),Le}(Ce,$t),De.context=function(dn){var Sn=dn.static,Pe=dn.dynamic,le={};return Object.keys(Sn).forEach(function(Le){var Be=Sn[Le];le[Le]=te(function(en,sn){return typeof Be=="number"||typeof Be=="boolean"?""+Be:en.link(Be)})}),Object.keys(Pe).forEach(function(Le){var Be=Pe[Le];le[Le]=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}),le}(xt),De}function se(Ze,Ce,R){var xt=Ze.shared.context,$t=Ze.scope();Object.keys(R).forEach(function(me){Ce.save(xt,"."+me);var Zt=R[me].append(Ze,Ce);Array.isArray(Zt)?$t(xt,".",me,"=[",Zt.join(),"];"):$t(xt,".",me,"=",Zt,";")}),Ce($t)}function Te(Ze,Ce,R,xt){var $t,me=Ze.shared,Zt=me.gl,de=me.framebuffer;ii&&($t=Ce.def(me.extensions,".webgl_draw_buffers"));var he,ce=Ze.constants,Me=ce.drawBuffer,ze=ce.backBuffer;he=R?R.append(Ze,Ce):Ce.def(de,".next"),xt||Ce("if(",he,"!==",de,".cur){"),Ce("if(",he,"){",Zt,".bindFramebuffer(",36160,",",he,".framebuffer);"),ii&&Ce($t,".drawBuffersWEBGL(",Me,"[",he,".colorAttachments.length]);"),Ce("}else{",Zt,".bindFramebuffer(",36160,",null);"),ii&&Ce($t,".drawBuffersWEBGL(",ze,");"),Ce("}",de,".cur=",he,";"),xt||Ce("}")}function Ee(Ze,Ce,R){var xt=Ze.shared,$t=xt.gl,me=Ze.current,Zt=Ze.next,de=xt.current,he=xt.next,ce=Ze.cond(de,".dirty");Xi.forEach(function(Me){var ze,Ve,ke=ve(Me);if(!(ke in R.state))if(ke in Zt){ze=Zt[ke],Ve=me[ke];var tn=rt(Si[ke].length,function(cn){return ce.def(ze,"[",cn,"]")});ce(Ze.cond(tn.map(function(cn,fn){return cn+"!=="+Ve+"["+fn+"]"}).join("||")).then($t,".",Di[ke],"(",tn,");",tn.map(function(cn,fn){return Ve+"["+fn+"]="+cn}).join(";"),";"))}else{ze=ce.def(he,".",ke);var De=Ze.cond(ze,"!==",de,".",ke);ce(De),ke in Bi?De(Ze.cond(ze).then($t,".enable(",Bi[ke],");").else($t,".disable(",Bi[ke],");"),de,".",ke,"=",ze,";"):De($t,".",Di[ke],"(",ze,");",de,".",ke,"=",ze,";")}}),Object.keys(R.state).length===0&&ce(de,".dirty=false;"),Ce(ce)}function un(Ze,Ce,R,xt){var $t=Ze.shared,me=Ze.current,Zt=$t.current,de=$t.gl;xo(Object.keys(R)).forEach(function(he){var ce=R[he];if(!xt||xt(ce)){var Me=ce.append(Ze,Ce);if(Bi[he]){var ze=Bi[he];Kt(ce)?Ce(de,Me?".enable(":".disable(",ze,");"):Ce(Ze.cond(Me).then(de,".enable(",ze,");").else(de,".disable(",ze,");")),Ce(Zt,".",he,"=",Me,";")}else if(Ht(Me)){var Ve=me[he];Ce(de,".",Di[he],"(",Me,");",Me.map(function(ke,tn){return Ve+"["+tn+"]="+ke}).join(";"),";")}else Ce(de,".",Di[he],"(",Me,");",Zt,".",he,"=",Me,";")}})}function xn(Ze,Ce){vi&&(Ze.instancing=Ce.def(Ze.shared.extensions,".angle_instanced_arrays"))}function _t(Ze,Ce,R,xt,$t){var me,Zt,de,he=Ze.shared,ce=Ze.stats,Me=he.current,ze=he.timer,Ve=R.profile;function ke(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function tn(dn){dn(me=Ce.def(),"=",ke(),";"),typeof $t=="string"?dn(ce,".count+=",$t,";"):dn(ce,".count++;"),Lr&&(xt?dn(Zt=Ce.def(),"=",ze,".getNumPendingQueries();"):dn(ze,".beginQuery(",ce,");"))}function De(dn){dn(ce,".cpuTime+=",ke(),"-",me,";"),Lr&&(xt?dn(ze,".pushScopeStats(",Zt,",",ze,".getNumPendingQueries(),",ce,");"):dn(ze,".endQuery();"))}function cn(dn){var Sn=Ce.def(Me,".profile");Ce(Me,".profile=",dn,";"),Ce.exit(Me,".profile=",Sn,";")}if(Ve){if(Kt(Ve))return void(Ve.enable?(tn(Ce),De(Ce.exit),cn("true")):cn("false"));cn(de=Ve.append(Ze,Ce))}else de=Ce.def(Me,".profile");var fn=Ze.block();tn(fn),Ce("if(",de,"){",fn,"}");var nn=Ze.block();De(nn),Ce.exit("if(",de,"){",nn,"}")}function Xt(Ze,Ce,R,xt,$t){var me=Ze.shared;xt.forEach(function(Zt){var de,he=Zt.name,ce=R.attributes[he];if(ce){if(!$t(ce))return;de=ce.append(Ze,Ce)}else{if(!$t(Qe))return;var Me=Ze.scopeAttrib(he);ct.optional(function(){Ze.assert(Ce,Me+".state","missing attribute "+he)}),de={},Object.keys(new Dr).forEach(function(ze){de[ze]=Ce.def(Me,".",ze)})}(function(ze,Ve,ke){var tn=me.gl,De=Ce.def(ze,".location"),cn=Ce.def(me.attributes,"[",De,"]"),fn=ke.state,nn=ke.buffer,dn=[ke.x,ke.y,ke.z,ke.w],Sn=["buffer","normalized","offset","stride"];function Pe(){Ce("if(!",cn,".buffer){",tn,".enableVertexAttribArray(",De,");}");var Le,Be=ke.type;if(Le=ke.size?Ce.def(ke.size,"||",Ve):Ve,Ce("if(",cn,".type!==",Be,"||",cn,".size!==",Le,"||",Sn.map(function(sn){return cn+"."+sn+"!=="+ke[sn]}).join("||"),"){",tn,".bindBuffer(",34962,",",nn,".buffer);",tn,".vertexAttribPointer(",[De,Le,Be,ke.normalized,ke.stride,ke.offset],");",cn,".type=",Be,";",cn,".size=",Le,";",Sn.map(function(sn){return cn+"."+sn+"="+ke[sn]+";"}).join(""),"}"),vi){var en=ke.divisor;Ce("if(",cn,".divisor!==",en,"){",Ze.instancing,".vertexAttribDivisorANGLE(",[De,en],");",cn,".divisor=",en,";}")}}function le(){Ce("if(",cn,".buffer){",tn,".disableVertexAttribArray(",De,");",cn,".buffer=null;","}if(",Nr.map(function(Le,Be){return cn+"."+Le+"!=="+dn[Be]}).join("||"),"){",tn,".vertexAttrib4f(",De,",",dn,");",Nr.map(function(Le,Be){return cn+"."+Le+"="+dn[Be]+";"}).join(""),"}")}fn===1?Pe():fn===2?le():(Ce("if(",fn,"===",1,"){"),Pe(),Ce("}else{"),le(),Ce("}"))})(Ze.link(Zt),function(ze){switch(ze){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Zt.info.type),de)})}function Se(Ze,Ce,R,xt,$t){for(var me,Zt=Ze.shared,de=Zt.gl,he=0;he<xt.length;++he){var ce,Me=xt[he],ze=Me.name,Ve=Me.info.type,ke=R.uniforms[ze],tn=Ze.link(Me)+".location";if(ke){if(!$t(ke))continue;if(Kt(ke)){var De=ke.value;if(ct.command(De!=null,'missing uniform "'+ze+'"',Ze.commandStr),Ve===35678||Ve===35680){ct.command(typeof De=="function"&&(Ve===35678&&(De._reglType==="texture2d"||De._reglType==="framebuffer")||Ve===35680&&(De._reglType==="textureCube"||De._reglType==="framebufferCube")),"invalid texture for uniform "+ze,Ze.commandStr);var cn=Ze.link(De._texture||De.color[0]._texture);Ce(de,".uniform1i(",tn,",",cn+".bind());"),Ce.exit(cn,".unbind();")}else if(Ve===35674||Ve===35675||Ve===35676){ct.optional(function(){ct.command(Ht(De),"invalid matrix for uniform "+ze,Ze.commandStr),ct.command(Ve===35674&&De.length===4||Ve===35675&&De.length===9||Ve===35676&&De.length===16,"invalid length for matrix uniform "+ze,Ze.commandStr)});var fn=Ze.global.def("new Float32Array(["+Array.prototype.slice.call(De)+"])"),nn=2;Ve===35675?nn=3:Ve===35676&&(nn=4),Ce(de,".uniformMatrix",nn,"fv(",tn,",false,",fn,");")}else{switch(Ve){case 5126:ct.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1f";break;case 35664:ct.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2f";break;case 35665:ct.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3f";break;case 35666:ct.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4f";break;case 35670:ct.commandType(De,"boolean","uniform "+ze,Ze.commandStr),me="1i";break;case 5124:ct.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1i";break;case 35671:case 35667:ct.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2i";break;case 35672:case 35668:ct.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3i";break;case 35673:case 35669:ct.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4i"}Ce(de,".uniform",me,"(",tn,",",Ht(De)?Array.prototype.slice.call(De):De,");")}continue}ce=ke.append(Ze,Ce)}else{if(!$t(Qe))continue;ce=Ce.def(Zt.uniforms,"[",rn.id(ze),"]")}Ve===35678?(ct(!Array.isArray(ce),"must specify a scalar prop for textures"),Ce("if(",ce,"&&",ce,'._reglType==="framebuffer"){',ce,"=",ce,".color[0];","}")):Ve===35680&&(ct(!Array.isArray(ce),"must specify a scalar prop for cube maps"),Ce("if(",ce,"&&",ce,'._reglType==="framebufferCube"){',ce,"=",ce,".color[0];","}")),ct.optional(function(){function Le(_e,ln){Ze.assert(Ce,_e,'bad data or missing for uniform "'+ze+'".  '+ln)}function Be(_e){ct(!Array.isArray(ce),"must not specify an array type for uniform"),Le("typeof "+ce+'==="'+_e+'"',"invalid type, expected "+_e)}function en(_e,ln){Array.isArray(ce)?ct(ce.length===_e,"must have length "+_e):Le(Zt.isArrayLike+"("+ce+")&&"+ce+".length==="+_e,"invalid vector, should have length "+_e,Ze.commandStr)}function sn(_e){ct(!Array.isArray(ce),"must not specify a value type"),Le("typeof "+ce+'==="function"&&'+ce+'._reglType==="texture'+(_e===3553?"2d":"Cube")+'"',"invalid texture type",Ze.commandStr)}switch(Ve){case 5124:Be("number");break;case 35667:en(2);break;case 35668:en(3);break;case 35669:en(4);break;case 5126:Be("number");break;case 35664:en(2);break;case 35665:en(3);break;case 35666:en(4);break;case 35670:Be("boolean");break;case 35671:en(2);break;case 35672:en(3);break;case 35673:case 35674:en(4);break;case 35675:en(9);break;case 35676:en(16);break;case 35678:sn(3553);break;case 35680:sn(34067)}});var dn=1;switch(Ve){case 35678:case 35680:var Sn=Ce.def(ce,"._texture");Ce(de,".uniform1i(",tn,",",Sn,".bind());"),Ce.exit(Sn,".unbind();");continue;case 5124:case 35670:me="1i";break;case 35667:case 35671:me="2i",dn=2;break;case 35668:case 35672:me="3i",dn=3;break;case 35669:case 35673:me="4i",dn=4;break;case 5126:me="1f";break;case 35664:me="2f",dn=2;break;case 35665:me="3f",dn=3;break;case 35666:me="4f",dn=4;break;case 35674:me="Matrix2fv";break;case 35675:me="Matrix3fv";break;case 35676:me="Matrix4fv"}if(Ce(de,".uniform",me,"(",tn,","),me.charAt(0)==="M"){var Pe=Math.pow(Ve-35674+2,2),le=Ze.global.def("new Float32Array(",Pe,")");Array.isArray(ce)?Ce("false,(",rt(Pe,function(Le){return le+"["+Le+"]="+ce[Le]}),",",le,")"):Ce("false,(Array.isArray(",ce,")||",ce," instanceof Float32Array)?",ce,":(",rt(Pe,function(Le){return le+"["+Le+"]="+ce+"["+Le+"]"}),",",le,")")}else dn>1?Ce(rt(dn,function(Le){return Array.isArray(ce)?ce[Le]:ce+"["+Le+"]"})):(ct(!Array.isArray(ce),"uniform value must not be an array"),Ce(ce));Ce(");")}}function Wt(Ze,Ce,R,xt){var $t=Ze.shared,me=$t.gl,Zt=$t.draw,de=xt.draw,he=function(){var dn,Sn=de.elements,Pe=Ce;return Sn?((Sn.contextDep&&xt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe)):dn=Pe.def(Zt,".",$r),dn&&Pe("if("+dn+")"+me+".bindBuffer(34963,"+dn+".buffer.buffer);"),dn}();function ce(dn){var Sn=de[dn];return Sn?Sn.contextDep&&xt.contextDynamic||Sn.propDep?Sn.append(Ze,R):Sn.append(Ze,Ce):Ce.def(Zt,".",dn)}var Me,ze,Ve=ce(ci),ke=ce(gi),tn=function(){var dn,Sn=de.count,Pe=Ce;return Sn?((Sn.contextDep&&xt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe),ct.optional(function(){Sn.MISSING&&Ze.assert(Ce,"false","missing vertex count"),Sn.DYNAMIC&&Ze.assert(Pe,dn+">=0","missing vertex count")})):(dn=Pe.def(Zt,".",Qr),ct.optional(function(){Ze.assert(Pe,dn+">=0","missing vertex count")})),dn}();if(typeof tn=="number"){if(tn===0)return}else R("if(",tn,"){"),R.exit("}");vi&&(Me=ce(Oi),ze=Ze.instancing);var De=he+".type",cn=de.elements&&Kt(de.elements);function fn(){function dn(){R(ze,".drawElementsInstancedANGLE(",[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)",Me],");")}function Sn(){R(ze,".drawArraysInstancedANGLE(",[Ve,ke,tn,Me],");")}he?cn?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}function nn(){function dn(){R(me+".drawElements("+[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)"]+");")}function Sn(){R(me+".drawArrays("+[Ve,ke,tn]+");")}he?cn?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}vi&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(R("if(",Me,">0){"),fn(),R("}else if(",Me,"<0){"),nn(),R("}")):fn():nn()}function ue(Ze,Ce,R,xt,$t){var me=Jt(),Zt=me.proc("body",$t);return ct.optional(function(){me.commandStr=Ce.commandStr,me.command=me.link(Ce.commandStr)}),vi&&(me.instancing=Zt.def(me.shared.extensions,".angle_instanced_arrays")),Ze(me,Zt,R,xt),me.compile().body}function vn(Ze,Ce,R,xt){xn(Ze,Ce),R.useVAO?R.drawVAO?Ce(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,Ce),");"):Ce(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Ce(Ze.shared.vao,".setVAO(null);"),Xt(Ze,Ce,R,xt.attributes,function(){return!0})),Se(Ze,Ce,R,xt.uniforms,function(){return!0}),Wt(Ze,Ce,Ce,R)}function Dn(Ze,Ce,R,xt){function $t(){return!0}Ze.batchId="a1",xn(Ze,Ce),Xt(Ze,Ce,R,xt.attributes,$t),Se(Ze,Ce,R,xt.uniforms,$t),Wt(Ze,Ce,Ce,R)}function zn(Ze,Ce,R,xt){xn(Ze,Ce);var $t=R.contextDep,me=Ce.def(),Zt=Ce.def();Ze.shared.props=Zt,Ze.batchId=me;var de=Ze.scope(),he=Ze.scope();function ce(De){return De.contextDep&&$t||De.propDep}function Me(De){return!ce(De)}if(Ce(de.entry,"for(",me,"=0;",me,"<","a1",";++",me,"){",Zt,"=","a0","[",me,"];",he,"}",de.exit),R.needsContext&&se(Ze,he,R.context),R.needsFramebuffer&&Te(Ze,he,R.framebuffer),un(Ze,he,R.state,ce),R.profile&&ce(R.profile)&&_t(Ze,he,R,!1,!0),xt)R.useVAO?R.drawVAO?ce(R.drawVAO)?he(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,he),");"):de(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,de),");"):de(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(de(Ze.shared.vao,".setVAO(null);"),Xt(Ze,de,R,xt.attributes,Me),Xt(Ze,he,R,xt.attributes,ce)),Se(Ze,de,R,xt.uniforms,Me),Se(Ze,he,R,xt.uniforms,ce),Wt(Ze,de,he,R);else{var ze=Ze.global.def("{}"),Ve=R.shader.progVar.append(Ze,he),ke=he.def(Ve,".id"),tn=he.def(ze,"[",ke,"]");he(Ze.shared.gl,".useProgram(",Ve,".program);","if(!",tn,"){",tn,"=",ze,"[",ke,"]=",Ze.link(function(De){return ue(Dn,Ze,R,De,2)}),"(",Ve,");}",tn,".call(this,a0[",me,"],",me,");")}}function Un(Ze,Ce,R){var xt=Ce.static[R];if(xt&&function(Me){if(S(Me)==="object"&&!Ht(Me)){for(var ze=Object.keys(Me),Ve=0;Ve<ze.length;++Ve)if(ht.isDynamic(Me[ze[Ve]]))return!0;return!1}}(xt)){var $t=Ze.global,me=Object.keys(xt),Zt=!1,de=!1,he=!1,ce=Ze.global.def("{}");me.forEach(function(Me){var ze=xt[Me];if(ht.isDynamic(ze)){typeof ze=="function"&&(ze=xt[Me]=ht.unbox(ze));var Ve=Oe(ze,null);Zt=Zt||Ve.thisDep,he=he||Ve.propDep,de=de||Ve.contextDep}else{switch($t(ce,".",Me,"="),S(ze)){case"number":$t(ze);break;case"string":$t('"',ze,'"');break;case"object":Array.isArray(ze)&&$t("[",ze.join(),"]");break;default:$t(Ze.link(ze))}$t(";")}}),Ce.dynamic[R]=new ht.DynamicVariable(4,{thisDep:Zt,contextDep:de,propDep:he,ref:ce,append:function(ze,Ve){me.forEach(function(ke){var tn=xt[ke];if(ht.isDynamic(tn)){var De=ze.invoke(Ve,tn);Ve(ce,".",ke,"=",De,";")}})}}),delete Ce.static[R]}}return{next:_i,current:Si,procs:function(){var Ze=Jt(),Ce=Ze.proc("poll"),R=Ze.proc("refresh"),xt=Ze.block();Ce(xt),R(xt);var $t,me=Ze.shared,Zt=me.gl,de=me.next,he=me.current;xt(he,".dirty=false;"),Te(Ze,Ce),Te(Ze,R,null,!0),vi&&($t=Ze.link(vi)),on.oes_vertex_array_object&&R(Ze.link(on.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ce=0;ce<$n.maxAttributes;++ce){var Me=R.def(me.attributes,"[",ce,"]"),ze=Ze.cond(Me,".buffer");ze.then(Zt,".enableVertexAttribArray(",ce,");",Zt,".bindBuffer(",34962,",",Me,".buffer.buffer);",Zt,".vertexAttribPointer(",ce,",",Me,".size,",Me,".type,",Me,".normalized,",Me,".stride,",Me,".offset);").else(Zt,".disableVertexAttribArray(",ce,");",Zt,".vertexAttrib4f(",ce,",",Me,".x,",Me,".y,",Me,".z,",Me,".w);",Me,".buffer=null;"),R(ze),vi&&R($t,".vertexAttribDivisorANGLE(",ce,",",Me,".divisor);")}return R(Ze.shared.vao,".currentVAO=null;",Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"),Object.keys(Bi).forEach(function(Ve){var ke=Bi[Ve],tn=xt.def(de,".",Ve),De=Ze.block();De("if(",tn,"){",Zt,".enable(",ke,")}else{",Zt,".disable(",ke,")}",he,".",Ve,"=",tn,";"),R(De),Ce("if(",tn,"!==",he,".",Ve,"){",De,"}")}),Object.keys(Di).forEach(function(Ve){var ke,tn,De=Di[Ve],cn=Si[Ve],fn=Ze.block();if(fn(Zt,".",De,"("),Ht(cn)){var nn=cn.length;ke=Ze.global.def(de,".",Ve),tn=Ze.global.def(he,".",Ve),fn(rt(nn,function(dn){return ke+"["+dn+"]"}),");",rt(nn,function(dn){return tn+"["+dn+"]="+ke+"["+dn+"];"}).join("")),Ce("if(",rt(nn,function(dn){return ke+"["+dn+"]!=="+tn+"["+dn+"]"}).join("||"),"){",fn,"}")}else ke=xt.def(de,".",Ve),tn=xt.def(he,".",Ve),fn(ke,");",he,".",Ve,"=",ke,";"),Ce("if(",ke,"!==",tn,"){",fn,"}");R(fn)}),Ze.compile()}(),compile:function(Ce,R,xt,$t,me){var Zt=Jt();Zt.stats=Zt.link(me),Object.keys(R.static).forEach(function(he){Un(Zt,R,he)}),io.forEach(function(he){Un(Zt,Ce,he)});var de=ie(Ce,R,xt,$t,Zt);return function(he,ce){var Me=he.proc("draw",1);xn(he,Me),se(he,Me,ce.context),Te(he,Me,ce.framebuffer),Ee(he,Me,ce),un(he,Me,ce.state),_t(he,Me,ce,!1,!0);var ze=ce.shader.progVar.append(he,Me);if(Me(he.shared.gl,".useProgram(",ze,".program);"),ce.shader.program)vn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var Ve=he.global.def("{}"),ke=Me.def(ze,".id"),tn=Me.def(Ve,"[",ke,"]");Me(he.cond(tn).then(tn,".call(this,a0);").else(tn,"=",Ve,"[",ke,"]=",he.link(function(De){return ue(vn,he,ce,De,1)}),"(",ze,");",tn,".call(this,a0);"))}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),function(he,ce){var Me=he.proc("scope",3);he.batchId="a2";var ze=he.shared,Ve=ze.current;function ke(tn){var De=ce.shader[tn];De&&Me.set(ze.shader,"."+tn,De.append(he,Me))}se(he,Me,ce.context),ce.framebuffer&&ce.framebuffer.append(he,Me),xo(Object.keys(ce.state)).forEach(function(tn){var De=ce.state[tn].append(he,Me);Ht(De)?De.forEach(function(cn,fn){Me.set(he.next[tn],"["+fn+"]",cn)}):Me.set(ze.next,"."+tn,De)}),_t(he,Me,ce,!0,!0),[$r,gi,Qr,Oi,ci].forEach(function(tn){var De=ce.draw[tn];De&&Me.set(ze.draw,"."+tn,""+De.append(he,Me))}),Object.keys(ce.uniforms).forEach(function(tn){var De=ce.uniforms[tn].append(he,Me);Array.isArray(De)&&(De="["+De.join()+"]"),Me.set(ze.uniforms,"["+rn.id(tn)+"]",De)}),Object.keys(ce.attributes).forEach(function(tn){var De=ce.attributes[tn].append(he,Me),cn=he.scopeAttrib(tn);Object.keys(new Dr).forEach(function(fn){Me.set(cn,"."+fn,De[fn])})}),ce.scopeVAO&&Me.set(ze.vao,".targetVAO",ce.scopeVAO.append(he,Me)),ke(ni),ke(fi),Object.keys(ce.state).length>0&&(Me(Ve,".dirty=true;"),Me.exit(Ve,".dirty=true;")),Me("a1(",he.shared.context,",a0,",he.batchId,");")}(Zt,de),function(he,ce){var Me=he.proc("batch",2);he.batchId="0",xn(he,Me);var ze=!1,Ve=!0;Object.keys(ce.context).forEach(function(Pe){ze=ze||ce.context[Pe].propDep}),ze||(se(he,Me,ce.context),Ve=!1);var ke=ce.framebuffer,tn=!1;function De(Pe){return Pe.contextDep&&ze||Pe.propDep}ke?(ke.propDep?ze=tn=!0:ke.contextDep&&ze&&(tn=!0),tn||Te(he,Me,ke)):Te(he,Me,null),ce.state.viewport&&ce.state.viewport.propDep&&(ze=!0),Ee(he,Me,ce),un(he,Me,ce.state,function(Pe){return!De(Pe)}),ce.profile&&De(ce.profile)||_t(he,Me,ce,!1,"a1"),ce.contextDep=ze,ce.needsContext=Ve,ce.needsFramebuffer=tn;var cn=ce.shader.progVar;if(cn.contextDep&&ze||cn.propDep)zn(he,Me,ce,null);else{var fn=cn.append(he,Me);if(Me(he.shared.gl,".useProgram(",fn,".program);"),ce.shader.program)zn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var nn=he.global.def("{}"),dn=Me.def(fn,".id"),Sn=Me.def(nn,"[",dn,"]");Me(he.cond(Sn).then(Sn,".call(this,a0,a1);").else(Sn,"=",nn,"[",dn,"]=",he.link(function(Pe){return ue(zn,he,ce,Pe,2)}),"(",fn,");",Sn,".call(this,a0,a1);"))}}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),j(Zt.compile(),{destroy:function(){de.shader.program.destroy()}})}}}var Vn=function(rn,on){if(!on.ext_disjoint_timer_query)return null;var $n=[];function vr(Lr){$n.push(Lr)}var ar=[];function rr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fr=[];function Ar(Lr){Fr.push(Lr)}var wr=[];function xr(Lr,Pr,Dr){var ri=Fr.pop()||new rr;ri.startQueryIndex=Lr,ri.endQueryIndex=Pr,ri.sum=0,ri.stats=Dr,wr.push(ri)}var Er=[],Ir=[];return{beginQuery:function(Pr){var Dr=$n.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Dr),ar.push(Dr),xr(ar.length-1,ar.length,Pr)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xr,update:function(){var Pr,Dr,ri=ar.length;if(ri!==0){Ir.length=Math.max(Ir.length,ri+1),Er.length=Math.max(Er.length,ri+1),Er[0]=0,Ir[0]=0;var vi=0;for(Pr=0,Dr=0;Dr<ar.length;++Dr){var ii=ar[Dr];on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34919)?(vi+=on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34918),vr(ii)):ar[Pr++]=ii,Er[Dr+1]=vi,Ir[Dr+1]=Pr}for(ar.length=Pr,Pr=0,Dr=0;Dr<wr.length;++Dr){var Si=wr[Dr],_i=Si.startQueryIndex,Xi=Si.endQueryIndex;Si.sum+=Er[Xi]-Er[_i];var Bi=Ir[_i],Di=Ir[Xi];Di===Bi?(Si.stats.gpuTime+=Si.sum/1e6,Ar(Si)):(Si.startQueryIndex=Bi,Si.endQueryIndex=Di,wr[Pr++]=Si)}wr.length=Pr}},getNumPendingQueries:function(){return ar.length},clear:function(){$n.push.apply($n,ar);for(var Pr=0;Pr<$n.length;Pr++)on.ext_disjoint_timer_query.deleteQueryEXT($n[Pr]);ar.length=0,$n.length=0},restore:function(){ar.length=0,$n.length=0}}};function Yn($e,rn){for(var on=0;on<$e.length;++on)if($e[on]===rn)return on;return-1}return function($e){var rn=lt($e);if(!rn)return null;var on=rn.gl,$n=on.getContextAttributes(),vr=on.isContextLost(),ar=function(Ce,R){var xt={};function $t(de){ct.type(de,"string","extension name must be string");var he,ce=de.toLowerCase();try{he=xt[ce]=Ce.getExtension(ce)}catch(Me){}return!!he}for(var me=0;me<R.extensions.length;++me){var Zt=R.extensions[me];if(!$t(Zt))return R.onDestroy(),R.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return R.optionalExtensions.forEach($t),{extensions:xt,restore:function(){Object.keys(xt).forEach(function(he){if(xt[he]&&!$t(he))throw new Error("(regl): error restoring extension "+he)})}}}(on,rn);if(!ar)return null;var rr,Fr,Ar=(rr={"":0},Fr=[""],{id:function(R){var xt=rr[R];return xt||(xt=rr[R]=Fr.length,Fr.push(R),xt)},str:function(R){return Fr[R]}}),wr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xr=ar.extensions,Er=Vn(0,xr),Ir=yt(),Lr=on.drawingBufferWidth,Pr=on.drawingBufferHeight,Dr={tick:0,time:0,viewportWidth:Lr,viewportHeight:Pr,framebufferWidth:Lr,framebufferHeight:Pr,drawingBufferWidth:Lr,drawingBufferHeight:Pr,pixelRatio:rn.pixelRatio},ri=function(Ce,R){var xt=1;R.ext_texture_filter_anisotropic&&(xt=Ce.getParameter(34047));var $t=1,me=1;R.webgl_draw_buffers&&($t=Ce.getParameter(34852),me=Ce.getParameter(36063));var Zt=!!R.oes_texture_float;if(Zt){var de=Ce.createTexture();Ce.bindTexture(3553,de),Ce.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var he=Ce.createFramebuffer();if(Ce.bindFramebuffer(36160,he),Ce.framebufferTexture2D(36160,36064,3553,de,0),Ce.bindTexture(3553,null),Ce.checkFramebufferStatus(36160)!==36053)Zt=!1;else{Ce.viewport(0,0,1,1),Ce.clearColor(1,0,0,1),Ce.clear(16384);var ce=Y.allocType(5126,4);Ce.readPixels(0,0,1,1,6408,5126,ce),Ce.getError()?Zt=!1:(Ce.deleteFramebuffer(he),Ce.deleteTexture(de),Zt=ce[0]===1),Y.freeType(ce)}}var Me=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var ze=Ce.createTexture(),Ve=Y.allocType(5121,36);Ce.activeTexture(33984),Ce.bindTexture(34067,ze),Ce.texImage2D(34069,0,6408,3,3,0,6408,5121,Ve),Y.freeType(Ve),Ce.bindTexture(34067,null),Ce.deleteTexture(ze),Me=!Ce.getError()}return{colorBits:[Ce.getParameter(3410),Ce.getParameter(3411),Ce.getParameter(3412),Ce.getParameter(3413)],depthBits:Ce.getParameter(3414),stencilBits:Ce.getParameter(3415),subpixelBits:Ce.getParameter(3408),extensions:Object.keys(R).filter(function(ke){return!!R[ke]}),maxAnisotropic:xt,maxDrawbuffers:$t,maxColorAttachments:me,pointSizeDims:Ce.getParameter(33901),lineWidthDims:Ce.getParameter(33902),maxViewportDims:Ce.getParameter(3386),maxCombinedTextureUnits:Ce.getParameter(35661),maxCubeMapSize:Ce.getParameter(34076),maxRenderbufferSize:Ce.getParameter(34024),maxTextureUnits:Ce.getParameter(34930),maxTextureSize:Ce.getParameter(3379),maxAttributes:Ce.getParameter(34921),maxVertexUniforms:Ce.getParameter(36347),maxVertexTextureUnits:Ce.getParameter(35660),maxVaryingVectors:Ce.getParameter(36348),maxFragmentUniforms:Ce.getParameter(36349),glsl:Ce.getParameter(35724),renderer:Ce.getParameter(7937),vendor:Ce.getParameter(7936),version:Ce.getParameter(7938),readFloat:Zt,npotTextureCube:Me}}(on,xr),vi=function(Ce,R,xt,$t){var me=0,Zt={};function de(Ve){this.id=me++,this.buffer=Ce.createBuffer(),this.type=Ve,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,xt.profile&&(this.stats={size:0})}de.prototype.bind=function(){Ce.bindBuffer(this.type,this.buffer)},de.prototype.destroy=function(){ze(this)};var he=[];function ce(Ve,ke,tn){Ve.byteLength=ke.byteLength,Ce.bufferData(Ve.type,ke,tn)}function Me(Ve,ke,tn,De,cn,fn){var nn,dn;if(Ve.usage=tn,Array.isArray(ke)){if(Ve.dtype=De||5126,ke.length>0)if(Array.isArray(ke[0])){nn=At(ke);for(var Sn=1,Pe=1;Pe<nn.length;++Pe)Sn*=nn[Pe];Ve.dimension=Sn,ce(Ve,dn=ot(ke,nn,Ve.dtype),tn),fn?Ve.persistentData=dn:Y.freeType(dn)}else if(typeof ke[0]=="number"){Ve.dimension=cn;var le=Y.allocType(Ve.dtype,ke.length);Ot(le,ke),ce(Ve,le,tn),fn?Ve.persistentData=le:Y.freeType(le)}else M(ke[0])?(Ve.dimension=ke[0].length,Ve.dtype=De||mt(ke[0])||5126,ce(Ve,dn=ot(ke,[ke.length,ke[0].length],Ve.dtype),tn),fn?Ve.persistentData=dn:Y.freeType(dn)):ct.raise("invalid buffer data")}else if(M(ke))Ve.dtype=De||mt(ke),Ve.dimension=cn,ce(Ve,ke,tn),fn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(k(ke)){nn=ke.shape;var Le=ke.stride,Be=ke.offset,en=0,sn=0,_e=0,ln=0;nn.length===1?(en=nn[0],sn=1,_e=Le[0],ln=0):nn.length===2?(en=nn[0],sn=nn[1],_e=Le[0],ln=Le[1]):ct.raise("invalid shape"),Ve.dtype=De||mt(ke.data)||5126,Ve.dimension=sn;var mn=Y.allocType(Ve.dtype,en*sn);It(mn,ke.data,en,sn,_e,ln,Be),ce(Ve,mn,tn),fn?Ve.persistentData=mn:Y.freeType(mn)}else ke instanceof ArrayBuffer?(Ve.dtype=5121,Ve.dimension=cn,ce(Ve,ke,tn),fn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke)))):ct.raise("invalid buffer data")}function ze(Ve){R.bufferCount--,$t(Ve);var ke=Ve.buffer;ct(ke,"buffer must not be deleted already"),Ce.deleteBuffer(ke),Ve.buffer=null,delete Zt[Ve.id]}return xt.profile&&(R.getTotalBufferSize=function(){var Ve=0;return Object.keys(Zt).forEach(function(ke){Ve+=Zt[ke].stats.size}),Ve}),{create:function(ke,tn,De,cn){R.bufferCount++;var fn=new de(tn);function nn(Sn){var Pe=35044,le=null,Le=0,Be=0,en=1;return Array.isArray(Sn)||M(Sn)||k(Sn)||Sn instanceof ArrayBuffer?le=Sn:typeof Sn=="number"?Le=0|Sn:Sn&&(ct.type(Sn,"object","buffer arguments must be an object, a number or an array"),"data"in Sn&&(ct(le===null||Array.isArray(le)||M(le)||k(le),"invalid data for buffer"),le=Sn.data),"usage"in Sn&&(ct.parameter(Sn.usage,it,"invalid buffer usage"),Pe=it[Sn.usage]),"type"in Sn&&(ct.parameter(Sn.type,q,"invalid buffer type"),Be=q[Sn.type]),"dimension"in Sn&&(ct.type(Sn.dimension,"number","invalid dimension"),en=0|Sn.dimension),"length"in Sn&&(ct.nni(Le,"buffer length must be a nonnegative integer"),Le=0|Sn.length)),fn.bind(),le?Me(fn,le,Pe,Be,en,cn):(Le&&Ce.bufferData(fn.type,Le,Pe),fn.dtype=Be||5121,fn.usage=Pe,fn.dimension=en,fn.byteLength=Le),xt.profile&&(fn.stats.size=fn.byteLength*gt[fn.dtype]),nn}function dn(Sn,Pe){ct(Pe+Sn.byteLength<=fn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Sn.byteLength+" starting from offset "+Pe+" to a buffer of size "+fn.byteLength),Ce.bufferSubData(fn.type,Pe,Sn)}return Zt[fn.id]=fn,De||nn(ke),nn._reglType="buffer",nn._buffer=fn,nn.subdata=function(Sn,Pe){var le,Le=0|(Pe||0);if(fn.bind(),M(Sn)||Sn instanceof ArrayBuffer)dn(Sn,Le);else if(Array.isArray(Sn)){if(Sn.length>0)if(typeof Sn[0]=="number"){var Be=Y.allocType(fn.dtype,Sn.length);Ot(Be,Sn),dn(Be,Le),Y.freeType(Be)}else if(Array.isArray(Sn[0])||M(Sn[0])){le=At(Sn);var en=ot(Sn,le,fn.dtype);dn(en,Le),Y.freeType(en)}else ct.raise("invalid buffer data")}else if(k(Sn)){le=Sn.shape;var sn=Sn.stride,_e=0,ln=0,mn=0,Wn=0;le.length===1?(_e=le[0],ln=1,mn=sn[0],Wn=0):le.length===2?(_e=le[0],ln=le[1],mn=sn[0],Wn=sn[1]):ct.raise("invalid shape");var An=Array.isArray(Sn.data)?fn.dtype:mt(Sn.data),In=Y.allocType(An,_e*ln);It(In,Sn.data,_e,ln,mn,Wn,Sn.offset),dn(In,Le),Y.freeType(In)}else ct.raise("invalid data for buffer subdata");return nn},xt.profile&&(nn.stats=fn.stats),nn.destroy=function(){ze(fn)},nn},createStream:function(ke,tn){var De=he.pop();return De||(De=new de(ke)),De.bind(),Me(De,tn,35040,0,1,!1),De},destroyStream:function(ke){he.push(ke)},clear:function(){h(Zt).forEach(ze),he.forEach(ze)},getBuffer:function(ke){return ke&&ke._buffer instanceof de?ke._buffer:null},restore:function(){h(Zt).forEach(function(ke){ke.buffer=Ce.createBuffer(),Ce.bindBuffer(ke.type,ke.buffer),Ce.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:Me}}(on,wr,rn,function(Ce){return ii.destroyBuffer(Ce)}),ii=function(Ce,R,xt,$t,me){for(var Zt=xt.maxAttributes,de=new Array(Zt),he=0;he<Zt;++he)de[he]=new Ji;var ce=0,Me={},ze={Record:Ji,scope:{},state:de,currentVAO:null,targetVAO:null,restore:Ve()?function(){Ve()&&h(Me).forEach(function(De){De.refresh()})}:function(){},createVAO:function(cn){var fn=new tn;function nn(dn){ct(Array.isArray(dn),"arguments to vertex array constructor must be an array"),ct(dn.length<Zt,"too many attributes"),ct(dn.length>0,"must specify at least one attribute");var Sn={},Pe=fn.attributes;Pe.length=dn.length;for(var le=0;le<dn.length;++le){var Le,Be=dn[le],en=Pe[le]=new Ji,sn=Be.data||Be;Array.isArray(sn)||M(sn)||k(sn)?(fn.buffers[le]&&(Le=fn.buffers[le],M(sn)&&Le._buffer.byteLength>=sn.byteLength?Le.subdata(sn):(Le.destroy(),fn.buffers[le]=null)),fn.buffers[le]||(Le=fn.buffers[le]=me.create(Be,34962,!1,!0)),en.buffer=me.getBuffer(Le),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Sn[le]=1):me.getBuffer(Be)?(en.buffer=me.getBuffer(Be),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):me.getBuffer(Be.buffer)?(en.buffer=me.getBuffer(Be.buffer),en.size=0|(+Be.size||en.buffer.dimension),en.normalized=!!Be.normalized||!1,"type"in Be?(ct.parameter(Be.type,q,"invalid buffer type"),en.type=q[Be.type]):en.type=en.buffer.dtype,en.offset=0|(Be.offset||0),en.stride=0|(Be.stride||0),en.divisor=0|(Be.divisor||0),en.state=1,ct(en.size>=1&&en.size<=4,"size must be between 1 and 4"),ct(en.offset>=0,"invalid offset"),ct(en.stride>=0&&en.stride<=255,"stride must be between 0 and 255"),ct(en.divisor>=0,"divisor must be positive"),ct(!en.divisor||!!R.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Be?(ct(le>0,"first attribute must not be a constant"),en.x=+Be.x||0,en.y=+Be.y||0,en.z=+Be.z||0,en.w=+Be.w||0,en.state=2):ct(!1,"invalid attribute spec for location "+le)}for(var _e=0;_e<fn.buffers.length;++_e)!Sn[_e]&&fn.buffers[_e]&&(fn.buffers[_e].destroy(),fn.buffers[_e]=null);return fn.refresh(),nn}return $t.vaoCount+=1,nn.destroy=function(){for(var dn=0;dn<fn.buffers.length;++dn)fn.buffers[dn]&&fn.buffers[dn].destroy();fn.buffers.length=0,fn.destroy()},nn._vao=fn,nn._reglType="vao",nn(cn)},getVAO:function(cn){return typeof cn=="function"&&cn._vao?cn._vao:null},destroyBuffer:function(cn){for(var fn=0;fn<de.length;++fn){var nn=de[fn];nn.buffer===cn&&(Ce.disableVertexAttribArray(fn),nn.buffer=null)}},setVAO:Ve()?function(De){if(De!==ze.currentVAO){var cn=Ve();De?cn.bindVertexArrayOES(De.vao):cn.bindVertexArrayOES(null),ze.currentVAO=De}}:function(De){if(De!==ze.currentVAO){if(De)De.bindAttrs();else for(var cn=ke(),fn=0;fn<de.length;++fn){var nn=de[fn];nn.buffer?(Ce.enableVertexAttribArray(fn),Ce.vertexAttribPointer(fn,nn.size,nn.type,nn.normalized,nn.stride,nn.offfset),cn&&nn.divisor&&cn.vertexAttribDivisorANGLE(fn,nn.divisor)):(Ce.disableVertexAttribArray(fn),Ce.vertexAttrib4f(fn,nn.x,nn.y,nn.z,nn.w))}ze.currentVAO=De}},clear:Ve()?function(){h(Me).forEach(function(De){De.destroy()})}:function(){}};function Ve(){return R.oes_vertex_array_object}function ke(){return R.angle_instanced_arrays}function tn(){this.id=++ce,this.attributes=[];var De=Ve();this.vao=De?De.createVertexArrayOES():null,Me[this.id]=this,this.buffers=[]}return tn.prototype.bindAttrs=function(){for(var De=ke(),cn=this.attributes,fn=0;fn<cn.length;++fn){var nn=cn[fn];nn.buffer?(Ce.enableVertexAttribArray(fn),Ce.bindBuffer(34962,nn.buffer.buffer),Ce.vertexAttribPointer(fn,nn.size,nn.type,nn.normalized,nn.stride,nn.offset),De&&nn.divisor&&De.vertexAttribDivisorANGLE(fn,nn.divisor)):(Ce.disableVertexAttribArray(fn),Ce.vertexAttrib4f(fn,nn.x,nn.y,nn.z,nn.w))}for(var dn=cn.length;dn<Zt;++dn)Ce.disableVertexAttribArray(dn)},tn.prototype.refresh=function(){var De=Ve();De&&(De.bindVertexArrayOES(this.vao),this.bindAttrs(),ze.currentVAO=this)},tn.prototype.destroy=function(){if(this.vao){var De=Ve();this===ze.currentVAO&&(ze.currentVAO=null,De.bindVertexArrayOES(null)),De.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],$t.vaoCount-=1)},ze}(on,xr,ri,wr,vi),Si=function(Ce,R,xt,$t){var me={},Zt=0,de={uint8:5121,uint16:5123};function he(Ve){this.id=Zt++,me[this.id]=this,this.buffer=Ve,this.primType=4,this.vertCount=0,this.type=0}R.oes_element_index_uint&&(de.uint32=5125),he.prototype.bind=function(){this.buffer.bind()};var ce=[];function Me(Ve,ke,tn,De,cn,fn,nn){var dn;if(Ve.buffer.bind(),ke){var Sn=nn;nn||M(ke)&&(!k(ke)||M(ke.data))||(Sn=R.oes_element_index_uint?5125:5123),xt._initBuffer(Ve.buffer,ke,tn,Sn,3)}else Ce.bufferData(34963,fn,tn),Ve.buffer.dtype=dn||5121,Ve.buffer.usage=tn,Ve.buffer.dimension=3,Ve.buffer.byteLength=fn;if(dn=nn,!nn){switch(Ve.buffer.dtype){case 5121:case 5120:dn=5121;break;case 5123:case 5122:dn=5123;break;case 5125:case 5124:dn=5125;break;default:ct.raise("unsupported type for element array")}Ve.buffer.dtype=dn}Ve.type=dn,ct(dn!==5125||!!R.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pe=cn;Pe<0&&(Pe=Ve.buffer.byteLength,dn===5123?Pe>>=1:dn===5125&&(Pe>>=2)),Ve.vertCount=Pe;var le=De;if(De<0){le=4;var Le=Ve.buffer.dimension;Le===1&&(le=0),Le===2&&(le=1),Le===3&&(le=4)}Ve.primType=le}function ze(Ve){$t.elementsCount--,ct(Ve.buffer!==null,"must not double destroy elements"),delete me[Ve.id],Ve.buffer.destroy(),Ve.buffer=null}return{create:function(ke,tn){var De=xt.create(null,34963,!0),cn=new he(De._buffer);function fn(nn){if(nn)if(typeof nn=="number")De(nn),cn.primType=4,cn.vertCount=0|nn,cn.type=5121;else{var dn=null,Sn=35044,Pe=-1,le=-1,Le=0,Be=0;Array.isArray(nn)||M(nn)||k(nn)?dn=nn:(ct.type(nn,"object","invalid arguments for elements"),"data"in nn&&(dn=nn.data,ct(Array.isArray(dn)||M(dn)||k(dn),"invalid data for element buffer")),"usage"in nn&&(ct.parameter(nn.usage,it,"invalid element buffer usage"),Sn=it[nn.usage]),"primitive"in nn&&(ct.parameter(nn.primitive,Dt,"invalid element buffer primitive"),Pe=Dt[nn.primitive]),"count"in nn&&(ct(typeof nn.count=="number"&&nn.count>=0,"invalid vertex count for elements"),le=0|nn.count),"type"in nn&&(ct.parameter(nn.type,de,"invalid buffer type"),Be=de[nn.type]),"length"in nn?Le=0|nn.length:(Le=le,Be===5123||Be===5122?Le*=2:Be!==5125&&Be!==5124||(Le*=4))),Me(cn,dn,Sn,Pe,le,Le,Be)}else De(),cn.primType=4,cn.vertCount=0,cn.type=5121;return fn}return $t.elementsCount++,fn(ke),fn._reglType="elements",fn._elements=cn,fn.subdata=function(nn,dn){return De.subdata(nn,dn),fn},fn.destroy=function(){ze(cn)},fn},createStream:function(ke){var tn=ce.pop();return tn||(tn=new he(xt.create(null,34963,!0,!1)._buffer)),Me(tn,ke,35040,-1,-1,0,0),tn},destroyStream:function(ke){ce.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof he?ke._elements:null},clear:function(){h(me).forEach(ze)}}}(on,xr,vi,wr),_i=function(Ce,R,xt,$t){var me={},Zt={};function de(De,cn,fn,nn){this.name=De,this.id=cn,this.location=fn,this.info=nn}function he(De,cn){for(var fn=0;fn<De.length;++fn)if(De[fn].id===cn.id)return void(De[fn].location=cn.location);De.push(cn)}function ce(De,cn,fn){var nn=De===35632?me:Zt,dn=nn[cn];if(!dn){var Sn=R.str(cn);dn=Ce.createShader(De),Ce.shaderSource(dn,Sn),Ce.compileShader(dn),ct.shaderError(Ce,dn,Sn,De,fn),nn[cn]=dn}return dn}var Me={},ze=[],Ve=0;function ke(De,cn){this.id=Ve++,this.fragId=De,this.vertId=cn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function tn(De,cn,fn){var nn,dn,Sn=ce(35632,De.fragId),Pe=ce(35633,De.vertId),le=De.program=Ce.createProgram();if(Ce.attachShader(le,Sn),Ce.attachShader(le,Pe),fn)for(nn=0;nn<fn.length;++nn){var Le=fn[nn];Ce.bindAttribLocation(le,Le[0],Le[1])}Ce.linkProgram(le),ct.linkError(Ce,le,R.str(De.fragId),R.str(De.vertId),cn);var Be=Ce.getProgramParameter(le,35718);$t.profile&&(De.stats.uniformsCount=Be);var en=De.uniforms;for(nn=0;nn<Be;++nn)if(dn=Ce.getActiveUniform(le,nn))if(dn.size>1)for(var sn=0;sn<dn.size;++sn){var _e=dn.name.replace("[0]","["+sn+"]");he(en,new de(_e,R.id(_e),Ce.getUniformLocation(le,_e),dn))}else he(en,new de(dn.name,R.id(dn.name),Ce.getUniformLocation(le,dn.name),dn));var ln=Ce.getProgramParameter(le,35721);$t.profile&&(De.stats.attributesCount=ln);var mn=De.attributes;for(nn=0;nn<ln;++nn)(dn=Ce.getActiveAttrib(le,nn))&&he(mn,new de(dn.name,R.id(dn.name),Ce.getAttribLocation(le,dn.name),dn))}return $t.profile&&(xt.getMaxUniformsCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.uniformsCount>De&&(De=cn.stats.uniformsCount)}),De},xt.getMaxAttributesCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.attributesCount>De&&(De=cn.stats.attributesCount)}),De}),{clear:function(){var cn=Ce.deleteShader.bind(Ce);h(me).forEach(cn),me={},h(Zt).forEach(cn),Zt={},ze.forEach(function(fn){Ce.deleteProgram(fn.program)}),ze.length=0,Me={},xt.shaderCount=0},program:function(cn,fn,nn,dn){ct.command(cn>=0,"missing vertex shader",nn),ct.command(fn>=0,"missing fragment shader",nn);var Sn=Me[fn];Sn||(Sn=Me[fn]={});var Pe=Sn[cn];if(Pe&&(Pe.refCount++,!dn))return Pe;var le=new ke(fn,cn);return xt.shaderCount++,tn(le,nn,dn),Pe||(Sn[cn]=le),ze.push(le),j(le,{destroy:function(){if(le.refCount--,le.refCount<=0){Ce.deleteProgram(le.program);var Be=ze.indexOf(le);ze.splice(Be,1),xt.shaderCount--}Sn[le.vertId].refCount<=0&&(Ce.deleteShader(Zt[le.vertId]),delete Zt[le.vertId],delete Me[le.fragId][le.vertId]),Object.keys(Me[le.fragId]).length||(Ce.deleteShader(me[le.fragId]),delete me[le.fragId],delete Me[le.fragId])}})},restore:function(){me={},Zt={};for(var cn=0;cn<ze.length;++cn)tn(ze[cn],null,ze[cn].attributes.map(function(fn){return[fn.location,fn.name]}))},shader:ce,frag:-1,vert:-1}}(on,Ar,wr,rn),Xi=to(on,xr,ri,function(){ve.procs.poll()},Dr,wr,rn),Bi=function(Ce,R,xt,$t,me){var Zt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};R.ext_srgb&&(Zt.srgba=35907),R.ext_color_buffer_half_float&&(Zt.rgba16f=34842,Zt.rgb16f=34843),R.webgl_color_buffer_float&&(Zt.rgba32f=34836);var de=[];Object.keys(Zt).forEach(function(Ve){var ke=Zt[Ve];de[ke]=Ve});var he=0,ce={};function Me(Ve){this.id=he++,this.refCount=1,this.renderbuffer=Ve,this.format=32854,this.width=0,this.height=0,me.profile&&(this.stats={size:0})}function ze(Ve){var ke=Ve.renderbuffer;ct(ke,"must not double destroy renderbuffer"),Ce.bindRenderbuffer(36161,null),Ce.deleteRenderbuffer(ke),Ve.renderbuffer=null,Ve.refCount=0,delete ce[Ve.id],$t.renderbufferCount--}return Me.prototype.decRef=function(){--this.refCount<=0&&ze(this)},me.profile&&($t.getTotalRenderbufferSize=function(){var Ve=0;return Object.keys(ce).forEach(function(ke){Ve+=ce[ke].stats.size}),Ve}),{create:function(ke,tn){var De=new Me(Ce.createRenderbuffer());function cn(fn,nn){var dn=0,Sn=0,Pe=32854;if(S(fn)==="object"&&fn){var le=fn;if("shape"in le){var Le=le.shape;ct(Array.isArray(Le)&&Le.length>=2,"invalid renderbuffer shape"),dn=0|Le[0],Sn=0|Le[1]}else"radius"in le&&(dn=Sn=0|le.radius),"width"in le&&(dn=0|le.width),"height"in le&&(Sn=0|le.height);"format"in le&&(ct.parameter(le.format,Zt,"invalid renderbuffer format"),Pe=Zt[le.format])}else typeof fn=="number"?(dn=0|fn,Sn=typeof nn=="number"?0|nn:dn):fn?ct.raise("invalid arguments to renderbuffer constructor"):dn=Sn=1;if(ct(dn>0&&Sn>0&&dn<=xt.maxRenderbufferSize&&Sn<=xt.maxRenderbufferSize,"invalid renderbuffer size"),dn!==De.width||Sn!==De.height||Pe!==De.format)return cn.width=De.width=dn,cn.height=De.height=Sn,De.format=Pe,Ce.bindRenderbuffer(36161,De.renderbuffer),Ce.renderbufferStorage(36161,Pe,dn,Sn),ct(Ce.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ci(De.format,De.width,De.height)),cn.format=de[De.format],cn}return ce[De.id]=De,$t.renderbufferCount++,cn(ke,tn),cn.resize=function(fn,nn){var dn=0|fn,Sn=0|nn||dn;return dn===De.width&&Sn===De.height||(ct(dn>0&&Sn>0&&dn<=xt.maxRenderbufferSize&&Sn<=xt.maxRenderbufferSize,"invalid renderbuffer size"),cn.width=De.width=dn,cn.height=De.height=Sn,Ce.bindRenderbuffer(36161,De.renderbuffer),Ce.renderbufferStorage(36161,De.format,dn,Sn),ct(Ce.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ci(De.format,De.width,De.height))),cn},cn._reglType="renderbuffer",cn._renderbuffer=De,me.profile&&(cn.stats=De.stats),cn.destroy=function(){De.decRef()},cn},clear:function(){h(ce).forEach(ze)},restore:function(){h(ce).forEach(function(ke){ke.renderbuffer=Ce.createRenderbuffer(),Ce.bindRenderbuffer(36161,ke.renderbuffer),Ce.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),Ce.bindRenderbuffer(36161,null)}}}(on,xr,ri,wr,rn),Di=function(Ce,R,xt,$t,me,Zt){var de={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];R.ext_srgb&&ce.push("srgba"),R.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),R.webgl_color_buffer_float&&ce.push("rgba32f");var Me=["uint8"];function ze(sn,_e,ln){this.target=sn,this.texture=_e,this.renderbuffer=ln;var mn=0,Wn=0;_e?(mn=_e.width,Wn=_e.height):ln&&(mn=ln.width,Wn=ln.height),this.width=mn,this.height=Wn}function Ve(sn){sn&&(sn.texture&&sn.texture._texture.decRef(),sn.renderbuffer&&sn.renderbuffer._renderbuffer.decRef())}function ke(sn,_e,ln){if(sn)if(sn.texture){var mn=sn.texture._texture,Wn=Math.max(1,mn.width),An=Math.max(1,mn.height);ct(Wn===_e&&An===ln,"inconsistent width/height for supplied texture"),mn.refCount+=1}else{var In=sn.renderbuffer._renderbuffer;ct(In.width===_e&&In.height===ln,"inconsistent width/height for renderbuffer"),In.refCount+=1}}function tn(sn,_e){_e&&(_e.texture?Ce.framebufferTexture2D(36160,sn,_e.target,_e.texture._texture.texture,0):Ce.framebufferRenderbuffer(36160,sn,36161,_e.renderbuffer._renderbuffer.renderbuffer))}function De(sn){var _e=3553,ln=null,mn=null,Wn=sn;S(sn)==="object"&&(Wn=sn.data,"target"in sn&&(_e=0|sn.target)),ct.type(Wn,"function","invalid attachment data");var An=Wn._reglType;return An==="texture2d"?(ln=Wn,ct(_e===3553)):An==="textureCube"?(ln=Wn,ct(_e>=34069&&_e<34075,"invalid cube map target")):An==="renderbuffer"?(mn=Wn,_e=36161):ct.raise("invalid regl object for attachment"),new ze(_e,ln,mn)}function cn(sn,_e,ln,mn,Wn){if(ln){var An=$t.create2D({width:sn,height:_e,format:mn,type:Wn});return An._texture.refCount=0,new ze(3553,An,null)}var In=me.create({width:sn,height:_e,format:mn});return In._renderbuffer.refCount=0,new ze(36161,null,In)}function fn(sn){return sn&&(sn.texture||sn.renderbuffer)}function nn(sn,_e,ln){sn&&(sn.texture?sn.texture.resize(_e,ln):sn.renderbuffer&&sn.renderbuffer.resize(_e,ln),sn.width=_e,sn.height=ln)}R.oes_texture_half_float&&Me.push("half float","float16"),R.oes_texture_float&&Me.push("float","float32");var dn=0,Sn={};function Pe(){this.id=dn++,Sn[this.id]=this,this.framebuffer=Ce.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function le(sn){sn.colorAttachments.forEach(Ve),Ve(sn.depthAttachment),Ve(sn.stencilAttachment),Ve(sn.depthStencilAttachment)}function Le(sn){var _e=sn.framebuffer;ct(_e,"must not double destroy framebuffer"),Ce.deleteFramebuffer(_e),sn.framebuffer=null,Zt.framebufferCount--,delete Sn[sn.id]}function Be(sn){var _e;Ce.bindFramebuffer(36160,sn.framebuffer);var ln=sn.colorAttachments;for(_e=0;_e<ln.length;++_e)tn(36064+_e,ln[_e]);for(_e=ln.length;_e<xt.maxColorAttachments;++_e)Ce.framebufferTexture2D(36160,36064+_e,3553,null,0);Ce.framebufferTexture2D(36160,33306,3553,null,0),Ce.framebufferTexture2D(36160,36096,3553,null,0),Ce.framebufferTexture2D(36160,36128,3553,null,0),tn(36096,sn.depthAttachment),tn(36128,sn.stencilAttachment),tn(33306,sn.depthStencilAttachment);var mn=Ce.checkFramebufferStatus(36160);Ce.isContextLost()||mn===36053||ct.raise("framebuffer configuration not supported, status = "+jr[mn]),Ce.bindFramebuffer(36160,de.next?de.next.framebuffer:null),de.cur=de.next,Ce.getError()}function en(sn,_e){var ln=new Pe;function mn(Wn,An){var In;ct(de.next!==ln,"can not update framebuffer which is currently in use");var lr=0,Hr=0,Gr=!0,Mr=!0,oi=null,ai=!0,Zr="rgba",Yi="uint8",$i=1,Go=null,Uo=null,_o=null,ta=!1;if(typeof Wn=="number")lr=0|Wn,Hr=0|An||lr;else if(Wn){ct.type(Wn,"object","invalid arguments for framebuffer");var li=Wn;if("shape"in li){var Oo=li.shape;ct(Array.isArray(Oo)&&Oo.length>=2,"invalid shape for framebuffer"),lr=Oo[0],Hr=Oo[1]}else"radius"in li&&(lr=Hr=li.radius),"width"in li&&(lr=li.width),"height"in li&&(Hr=li.height);("color"in li||"colors"in li)&&(oi=li.color||li.colors,Array.isArray(oi)&&ct(oi.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in li&&($i=0|li.colorCount,ct($i>0,"invalid color buffer count")),"colorTexture"in li&&(ai=!!li.colorTexture,Zr="rgba4"),"colorType"in li&&(Yi=li.colorType,ai?(ct(R.oes_texture_float||!(Yi==="float"||Yi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ct(R.oes_texture_half_float||!(Yi==="half float"||Yi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yi==="half float"||Yi==="float16"?(ct(R.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zr="rgba16f"):Yi!=="float"&&Yi!=="float32"||(ct(R.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zr="rgba32f"),ct.oneOf(Yi,Me,"invalid color type")),"colorFormat"in li&&(Zr=li.colorFormat,he.indexOf(Zr)>=0?ai=!0:ce.indexOf(Zr)>=0?ai=!1:ai?ct.oneOf(li.colorFormat,he,"invalid color format for texture"):ct.oneOf(li.colorFormat,ce,"invalid color format for renderbuffer"))),("depthTexture"in li||"depthStencilTexture"in li)&&(ta=!(!li.depthTexture&&!li.depthStencilTexture),ct(!ta||R.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in li&&(typeof li.depth=="boolean"?Gr=li.depth:(Go=li.depth,Mr=!1)),"stencil"in li&&(typeof li.stencil=="boolean"?Mr=li.stencil:(Uo=li.stencil,Gr=!1)),"depthStencil"in li&&(typeof li.depthStencil=="boolean"?Gr=Mr=li.depthStencil:(_o=li.depthStencil,Gr=!1,Mr=!1))}else lr=Hr=1;var qi=null,zo=null,Xo=null,Yo=null;if(Array.isArray(oi))qi=oi.map(De);else if(oi)qi=[De(oi)];else for(qi=new Array($i),In=0;In<$i;++In)qi[In]=cn(lr,Hr,ai,Zr,Yi);ct(R.webgl_draw_buffers||qi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ct(qi.length<=xt.maxColorAttachments,"too many color attachments, not supported"),lr=lr||qi[0].width,Hr=Hr||qi[0].height,Go?zo=De(Go):Gr&&!Mr&&(zo=cn(lr,Hr,ta,"depth","uint32")),Uo?Xo=De(Uo):Mr&&!Gr&&(Xo=cn(lr,Hr,!1,"stencil","uint8")),_o?Yo=De(_o):!Go&&!Uo&&Mr&&Gr&&(Yo=cn(lr,Hr,ta,"depth stencil","depth stencil")),ct(!!Go+!!Uo+!!_o<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ua=null;for(In=0;In<qi.length;++In)if(ke(qi[In],lr,Hr),ct(!qi[In]||qi[In].texture&&Ui.indexOf(qi[In].texture._texture.format)>=0||qi[In].renderbuffer&&ro.indexOf(qi[In].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+In+" is invalid"),qi[In]&&qi[In].texture){var di=Li[qi[In].texture._texture.format]*Vi[qi[In].texture._texture.type];ua===null?ua=di:ct(ua===di,"all color attachments much have the same number of bits per pixel.")}return ke(zo,lr,Hr),ct(!zo||zo.texture&&zo.texture._texture.format===6402||zo.renderbuffer&&zo.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),ke(Xo,lr,Hr),ct(!Xo||Xo.renderbuffer&&Xo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),ke(Yo,lr,Hr),ct(!Yo||Yo.texture&&Yo.texture._texture.format===34041||Yo.renderbuffer&&Yo.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),le(ln),ln.width=lr,ln.height=Hr,ln.colorAttachments=qi,ln.depthAttachment=zo,ln.stencilAttachment=Xo,ln.depthStencilAttachment=Yo,mn.color=qi.map(fn),mn.depth=fn(zo),mn.stencil=fn(Xo),mn.depthStencil=fn(Yo),mn.width=ln.width,mn.height=ln.height,Be(ln),mn}return Zt.framebufferCount++,mn(sn,_e),j(mn,{resize:function(An,In){ct(de.next!==ln,"can not resize a framebuffer which is currently in use");var lr=Math.max(0|An,1),Hr=Math.max(0|In||lr,1);if(lr===ln.width&&Hr===ln.height)return mn;for(var Gr=ln.colorAttachments,Mr=0;Mr<Gr.length;++Mr)nn(Gr[Mr],lr,Hr);return nn(ln.depthAttachment,lr,Hr),nn(ln.stencilAttachment,lr,Hr),nn(ln.depthStencilAttachment,lr,Hr),ln.width=mn.width=lr,ln.height=mn.height=Hr,Be(ln),mn},_reglType:"framebuffer",_framebuffer:ln,destroy:function(){Le(ln),le(ln)},use:function(An){de.setFBO({framebuffer:mn},An)}})}return j(de,{getFramebuffer:function(_e){if(typeof _e=="function"&&_e._reglType==="framebuffer"){var ln=_e._framebuffer;if(ln instanceof Pe)return ln}return null},create:en,createCube:function(_e){var ln=Array(6);function mn(Wn){var An;ct(ln.indexOf(de.next)<0,"can not update framebuffer which is currently in use");var In,lr={color:null},Hr=0,Gr=null,Mr="rgba",oi="uint8",ai=1;if(typeof Wn=="number")Hr=0|Wn;else if(Wn){ct.type(Wn,"object","invalid arguments for framebuffer");var Zr=Wn;if("shape"in Zr){var Yi=Zr.shape;ct(Array.isArray(Yi)&&Yi.length>=2,"invalid shape for framebuffer"),ct(Yi[0]===Yi[1],"cube framebuffer must be square"),Hr=Yi[0]}else"radius"in Zr&&(Hr=0|Zr.radius),"width"in Zr?(Hr=0|Zr.width,"height"in Zr&&ct(Zr.height===Hr,"must be square")):"height"in Zr&&(Hr=0|Zr.height);("color"in Zr||"colors"in Zr)&&(Gr=Zr.color||Zr.colors,Array.isArray(Gr)&&ct(Gr.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),Gr||("colorCount"in Zr&&(ai=0|Zr.colorCount,ct(ai>0,"invalid color buffer count")),"colorType"in Zr&&(ct.oneOf(Zr.colorType,Me,"invalid color type"),oi=Zr.colorType),"colorFormat"in Zr&&(Mr=Zr.colorFormat,ct.oneOf(Zr.colorFormat,he,"invalid color format for texture"))),"depth"in Zr&&(lr.depth=Zr.depth),"stencil"in Zr&&(lr.stencil=Zr.stencil),"depthStencil"in Zr&&(lr.depthStencil=Zr.depthStencil)}else Hr=1;if(Gr)if(Array.isArray(Gr))for(In=[],An=0;An<Gr.length;++An)In[An]=Gr[An];else In=[Gr];else{In=Array(ai);var $i={radius:Hr,format:Mr,type:oi};for(An=0;An<ai;++An)In[An]=$t.createCube($i)}for(lr.color=Array(In.length),An=0;An<In.length;++An){var Go=In[An];ct(typeof Go=="function"&&Go._reglType==="textureCube","invalid cube map"),Hr=Hr||Go.width,ct(Go.width===Hr&&Go.height===Hr,"invalid cube map shape"),lr.color[An]={target:34069,data:In[An]}}for(An=0;An<6;++An){for(var Uo=0;Uo<In.length;++Uo)lr.color[Uo].target=34069+An;An>0&&(lr.depth=ln[0].depth,lr.stencil=ln[0].stencil,lr.depthStencil=ln[0].depthStencil),ln[An]?ln[An](lr):ln[An]=en(lr)}return j(mn,{width:Hr,height:Hr,color:In})}return mn(_e),j(mn,{faces:ln,resize:function(An){var In,lr=0|An;if(ct(lr>0&&lr<=xt.maxCubeMapSize,"invalid radius for cube fbo"),lr===mn.width)return mn;var Hr=mn.color;for(In=0;In<Hr.length;++In)Hr[In].resize(lr);for(In=0;In<6;++In)ln[In].resize(lr);return mn.width=mn.height=lr,mn},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(An){An.destroy()})}})},clear:function(){h(Sn).forEach(Le)},restore:function(){de.cur=null,de.next=null,de.dirty=!0,h(Sn).forEach(function(_e){_e.framebuffer=Ce.createFramebuffer(),Be(_e)})}})}(on,xr,ri,Xi,Bi,wr),ve=On(on,Ar,xr,ri,vi,Si,0,Di,{},ii,_i,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Dr,Er,rn),G=pr(on,Di,ve.procs.poll,Dr,$n,xr,ri),F=ve.next,Z=on.canvas,ut=[],Bt=[],Jt=[],ie=[rn.onDestroy],se=null;function Te(){if(ut.length===0)return Er&&Er.update(),void(se=null);se=dt.next(Te),Dn();for(var Ce=ut.length-1;Ce>=0;--Ce){var R=ut[Ce];R&&R(Dr,null,0)}on.flush(),Er&&Er.update()}function Ee(){!se&&ut.length>0&&(se=dt.next(Te))}function un(){se&&(dt.cancel(Te),se=null)}function xn(Ce){Ce.preventDefault(),vr=!0,un(),Bt.forEach(function(R){R()})}function _t(Ce){on.getError(),vr=!1,ar.restore(),_i.restore(),vi.restore(),Xi.restore(),Bi.restore(),Di.restore(),ii.restore(),Er&&Er.restore(),ve.procs.refresh(),Ee(),Jt.forEach(function(R){R()})}function Xt(Ce){function R(ke,tn){var De={},cn={};return Object.keys(ke).forEach(function(fn){var nn=ke[fn];if(ht.isDynamic(nn))cn[fn]=ht.unbox(nn,fn);else{if(tn&&Array.isArray(nn)){for(var dn=0;dn<nn.length;++dn)if(ht.isDynamic(nn[dn]))return void(cn[fn]=ht.unbox(nn,fn))}De[fn]=nn}}),{dynamic:cn,static:De}}ct(!!Ce,"invalid args to regl({...})"),ct.type(Ce,"object","invalid args to regl({...})");var xt=R(Ce.context||{},!0),$t=R(Ce.uniforms||{},!0),me=R(Ce.attributes||{},!1),Zt=R(function(ke){var tn=j({},ke);function De(cn){if(cn in tn){var fn=tn[cn];delete tn[cn],Object.keys(fn).forEach(function(nn){tn[cn+"."+nn]=fn[nn]})}}return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),De("blend"),De("depth"),De("cull"),De("stencil"),De("polygonOffset"),De("scissor"),De("sample"),"vao"in ke&&(tn.vao=ke.vao),tn}(Ce),!1),de={gpuTime:0,cpuTime:0,count:0},he=ve.compile(Zt,me,$t,xt,de),ce=he.draw,Me=he.batch,ze=he.scope,Ve=[];return j(function(ke,tn){var De;if(vr&&ct.raise("context lost"),typeof ke=="function")return ze.call(this,null,ke,0);if(typeof tn=="function")if(typeof ke=="number")for(De=0;De<ke;++De)ze.call(this,null,tn,De);else{if(!Array.isArray(ke))return ze.call(this,ke,tn,0);for(De=0;De<ke.length;++De)ze.call(this,ke[De],tn,De)}else if(typeof ke=="number"){if(ke>0)return Me.call(this,function(cn){for(;Ve.length<cn;)Ve.push(null);return Ve}(0|ke),0|ke)}else{if(!Array.isArray(ke))return ce.call(this,ke);if(ke.length)return Me.call(this,ke,ke.length)}},{stats:de,destroy:function(){he.destroy()}})}Z&&(Z.addEventListener("webglcontextlost",xn,!1),Z.addEventListener("webglcontextrestored",_t,!1));var Se=Di.setFBO=Xt({framebuffer:ht.define.call(null,1,"framebuffer")});function Wt(Ce,R){var xt=0;ve.procs.poll();var $t=R.color;$t&&(on.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),xt|=16384),"depth"in R&&(on.clearDepth(+R.depth),xt|=256),"stencil"in R&&(on.clearStencil(0|R.stencil),xt|=1024),ct(!!xt,"called regl.clear with no buffer specified"),on.clear(xt)}function ue(Ce){return ct.type(Ce,"function","regl.frame() callback must be a function"),ut.push(Ce),Ee(),{cancel:function(){var xt=Yn(ut,Ce);ct(xt>=0,"cannot cancel a frame twice"),ut[xt]=function $t(){var me=Yn(ut,$t);ut[me]=ut[ut.length-1],ut.length-=1,ut.length<=0&&un()}}}}function vn(){var Ce=F.viewport,R=F.scissor_box;Ce[0]=Ce[1]=R[0]=R[1]=0,Dr.viewportWidth=Dr.framebufferWidth=Dr.drawingBufferWidth=Ce[2]=R[2]=on.drawingBufferWidth,Dr.viewportHeight=Dr.framebufferHeight=Dr.drawingBufferHeight=Ce[3]=R[3]=on.drawingBufferHeight}function Dn(){Dr.tick+=1,Dr.time=Un(),vn(),ve.procs.poll()}function zn(){Xi.refresh(),vn(),ve.procs.refresh(),Er&&Er.update()}function Un(){return(yt()-Ir)/1e3}zn();var Ze=j(Xt,{clear:function(R){if(ct(S(R)==="object"&&R,"regl.clear() takes an object as input"),"framebuffer"in R)if(R.framebuffer&&R.framebuffer_reglType==="framebufferCube")for(var xt=0;xt<6;++xt)Se(j({framebuffer:R.framebuffer.faces[xt]},R),Wt);else Se(R,Wt);else Wt(0,R)},prop:ht.define.bind(null,1),context:ht.define.bind(null,2),this:ht.define.bind(null,3),draw:Xt({}),buffer:function(R){return vi.create(R,34962,!1,!1)},elements:function(R){return Si.create(R,!1)},texture:Xi.create2D,cube:Xi.createCube,renderbuffer:Bi.create,framebuffer:Di.create,framebufferCube:Di.createCube,vao:ii.createVAO,attributes:$n,frame:ue,on:function(R,xt){var $t;switch(ct.type(xt,"function","listener callback must be a function"),R){case"frame":return ue(xt);case"lost":$t=Bt;break;case"restore":$t=Jt;break;case"destroy":$t=ie;break;default:ct.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(xt),{cancel:function(){for(var Zt=0;Zt<$t.length;++Zt)if($t[Zt]===xt)return $t[Zt]=$t[$t.length-1],void $t.pop()}}},limits:ri,hasExtension:function(R){return ri.extensions.indexOf(R.toLowerCase())>=0},read:G,destroy:function(){ut.length=0,un(),Z&&(Z.removeEventListener("webglcontextlost",xn),Z.removeEventListener("webglcontextrestored",_t)),_i.clear(),Di.clear(),Bi.clear(),Xi.clear(),Si.clear(),vi.clear(),ii.clear(),Er&&Er.clear(),ie.forEach(function(R){R()})},_gl:on,_refresh:zn,poll:function(){Dn(),Er&&Er.update()},now:Un,stats:wr});return rn.onDone(null,Ze),Ze}},S(A)==="object"&&a!==void 0?a.exports=m():(p=typeof(i=m)=="function"?i.call(A,e,A,a):i)===void 0||(a.exports=p)},function(a,A,e){"use strict";a.exports=function(i,p,m,S){try{try{var l;try{l=new window.Blob([i])}catch(n){(l=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(i),l=l.getBlob()}var M=window.URL||window.webkitURL,j=M.createObjectURL(l),y=new window[p](j,m);return M.revokeObjectURL(j),y}catch(n){return new window[p]("data:application/javascript,".concat(encodeURIComponent(i)),m)}}catch(n){if(!S)throw Error("Inline worker is not supported");return new window[p](S,m)}}},,,,,,,,function(a,A,e){"use strict";e.r(A),e.d(A,"Minimap",function(){return O}),e.d(A,"Grid",function(){return C}),e.d(A,"Bundling",function(){return v}),e.d(A,"Menu",function(){return x}),e.d(A,"Fisheye",function(){return T}),e.d(A,"ToolBar",function(){return N}),e.d(A,"Tooltip",function(){return X}),e.d(A,"TimeBar",function(){return tt}),e.d(A,"ImageMinimap",function(){return nt}),e.d(A,"EdgeFilterLens",function(){return vt});var i=e(5);e.d(A,"Arrow",function(){return i.d}),e.d(A,"Marker",function(){return i.k}),e.d(A,"Shape",function(){return i.m});var p=e(18);e.d(A,"ICanvas",function(){return p.ICanvas}),e.d(A,"IGroup",function(){return p.IGroup}),e.d(A,"IShape",function(){return p.IShape});var m=e(33);e.d(A,"Algorithm",function(){return m});var S=e(91);e.d(A,"Graph",function(){return S.a});var l=e(152);e.d(A,"TreeGraph",function(){return l.a});var M=e(69);e.d(A,"Layout",function(){return M.a}),e.d(A,"registerLayout",function(){return M.b});var j=e(45);e.d(A,"Global",function(){return j.a});var y=e(38);e.d(A,"Util",function(){return y.a});var n=e(35);e(509),e(508),e.d(A,"G6GraphEvent",function(){return i.i}),e.d(A,"G6Event",function(){return i.h}),e.d(A,"Node",function(){return i.l}),e.d(A,"Edge",function(){return i.g}),e.d(A,"Combo",function(){return i.f}),e.d(A,"Hull",function(){return i.j}),e.d(A,"registerNode",function(){return i.r}),e.d(A,"registerCombo",function(){return i.p}),e.d(A,"AbstractGraph",function(){return i.b}),e.d(A,"registerEdge",function(){return i.q}),e.d(A,"registerBehavior",function(){return i.o}),e.d(A,"AbstractLayout",function(){return i.c}),e.d(A,"AbstractEvent",function(){return i.a}),e.d(A,"BaseGlobal",function(){return i.e});var s=e(245);for(var d in s)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(ft){e.d(A,ft,function(){return s[ft]})}(d);var E=e(246);for(var d in E)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(bt){e.d(A,bt,function(){return E[bt]})}(d);var O=n.a.Minimap,C=n.a.Grid,v=n.a.Bundling,x=n.a.Menu,T=n.a.Fisheye,N=n.a.ToolBar,X=n.a.Tooltip,tt=n.a.TimeBar,nt=n.a.ImageMinimap,vt=n.a.EdgeFilterLens;A.default={version:j.a.version,Graph:S.a,TreeGraph:l.a,Util:y.a,Layout:M.a,registerLayout:M.b,Global:j.a,registerBehavior:i.o,registerCombo:i.p,registerEdge:i.q,registerNode:i.r,Minimap:n.a.Minimap,Grid:n.a.Grid,Bundling:n.a.Bundling,Menu:n.a.Menu,ToolBar:n.a.ToolBar,Tooltip:n.a.Tooltip,TimeBar:tt,Fisheye:T,ImageMinimap:nt,EdgeFilterLens:vt,Algorithm:m,Arrow:i.d,Marker:i.k,Shape:i.m}},function(a,A,e){var i=e(264),p=e(265),m={};for(var S in i)i.hasOwnProperty(S)&&(m[i[S]]=S);var l=a.exports={to:{},get:{}};function M(y,n,s){return Math.min(Math.max(n,y),s)}function j(y){var n=y.toString(16).toUpperCase();return n.length<2?"0"+n:n}l.get=function(y){var n,s;switch(y.substring(0,3).toLowerCase()){case"hsl":n=l.get.hsl(y),s="hsl";break;case"hwb":n=l.get.hwb(y),s="hwb";break;default:n=l.get.rgb(y),s="rgb"}return n?{model:s,value:n}:null},l.get.rgb=function(y){if(!y)return null;var n,s,d,E=[0,0,0,1];if(n=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(d=n[2],n=n[1],s=0;s<3;s++){var O=2*s;E[s]=parseInt(n.slice(O,O+2),16)}d&&(E[3]=parseInt(d,16)/255)}else if(n=y.match(/^#([a-f0-9]{3,4})$/i)){for(d=(n=n[1])[3],s=0;s<3;s++)E[s]=parseInt(n[s]+n[s],16);d&&(E[3]=parseInt(d+d,16)/255)}else if(n=y.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)E[s]=parseInt(n[s+1],0);n[4]&&(E[3]=parseFloat(n[4]))}else{if(!(n=y.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(n=y.match(/(\D+)/))?n[1]==="transparent"?[0,0,0,0]:(E=i[n[1]])?(E[3]=1,E):null:null;for(s=0;s<3;s++)E[s]=Math.round(2.55*parseFloat(n[s+1]));n[4]&&(E[3]=parseFloat(n[4]))}for(s=0;s<3;s++)E[s]=M(E[s],0,255);return E[3]=M(E[3],0,1),E},l.get.hsl=function(y){if(!y)return null;var n=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,M(parseFloat(n[2]),0,100),M(parseFloat(n[3]),0,100),M(isNaN(s)?1:s,0,1)]}return null},l.get.hwb=function(y){if(!y)return null;var n=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,M(parseFloat(n[2]),0,100),M(parseFloat(n[3]),0,100),M(isNaN(s)?1:s,0,1)]}return null},l.to.hex=function(){var y=p(arguments);return"#"+j(y[0])+j(y[1])+j(y[2])+(y[3]<1?j(Math.round(255*y[3])):"")},l.to.rgb=function(){var y=p(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},l.to.rgb.percent=function(){var y=p(arguments),n=Math.round(y[0]/255*100),s=Math.round(y[1]/255*100),d=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+n+"%, "+s+"%, "+d+"%)":"rgba("+n+"%, "+s+"%, "+d+"%, "+y[3]+")"},l.to.hsl=function(){var y=p(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},l.to.hwb=function(){var y=p(arguments),n="";return y.length>=4&&y[3]!==1&&(n=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+n+")"},l.to.keyword=function(y){return m[y.slice(0,3)]}},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){"use strict";var i=e(266),p=Array.prototype.concat,m=Array.prototype.slice,S=a.exports=function(l){for(var M=[],j=0,y=l.length;j<y;j++){var n=l[j];i(n)?M=p.call(M,m.call(n)):M.push(n)}return M};S.wrap=function(l){return function(){return l(S(arguments))}}},function(a,A){a.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},function(a,A,e){function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(l)}var p=e(161),m=e(269),S={};Object.keys(p).forEach(function(l){S[l]={},Object.defineProperty(S[l],"channels",{value:p[l].channels}),Object.defineProperty(S[l],"labels",{value:p[l].labels});var M=m(l);Object.keys(M).forEach(function(j){var y=M[j];S[l][j]=function(n){var s=function(E){if(E==null)return E;arguments.length>1&&(E=Array.prototype.slice.call(arguments));var O=n(E);if(i(O)==="object")for(var C=O.length,v=0;v<C;v++)O[v]=Math.round(O[v]);return O};return"conversion"in n&&(s.conversion=n.conversion),s}(y),S[l][j].raw=function(n){var s=function(E){return E==null?E:(arguments.length>1&&(E=Array.prototype.slice.call(arguments)),n(E))};return"conversion"in n&&(s.conversion=n.conversion),s}(y)})}),a.exports=S},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){var i=e(161);function p(l){var M=function(){for(var C={},v=Object.keys(i),x=v.length,T=0;T<x;T++)C[v[T]]={distance:-1,parent:null};return C}(),j=[l];for(M[l].distance=0;j.length;)for(var y=j.pop(),n=Object.keys(i[y]),s=n.length,d=0;d<s;d++){var E=n[d],O=M[E];O.distance===-1&&(O.distance=M[y].distance+1,O.parent=y,j.unshift(E))}return M}function m(l,M){return function(j){return M(l(j))}}function S(l,M){for(var j=[M[l].parent,l],y=i[M[l].parent][l],n=M[l].parent;M[n].parent;)j.unshift(M[n].parent),y=m(i[M[n].parent][n],y),n=M[n].parent;return y.conversion=j,y}a.exports=function(l){for(var M=p(l),j={},y=Object.keys(M),n=y.length,s=0;s<n;s++){var d=y[s];M[d].parent!==null&&(j[d]=S(d,M))}return j}},function(a,A,e){var i=e(271);a.exports={Graph:i.Graph,json:e(372),alg:e(373),version:i.version}},function(a,A,e){a.exports={Graph:e(124),version:e(371)}},function(a,A,e){var i=e(162);a.exports=function(p){return i(p,4)}},function(a,A){a.exports=function(){this.__data__=[],this.size=0}},function(a,A,e){var i=e(97),p=Array.prototype.splice;a.exports=function(m){var S=this.__data__,l=i(S,m);return!(l<0)&&(l==S.length-1?S.pop():p.call(S,l,1),--this.size,!0)}},function(a,A,e){var i=e(97);a.exports=function(p){var m=this.__data__,S=i(m,p);return S<0?void 0:m[S][1]}},function(a,A,e){var i=e(97);a.exports=function(p){return i(this.__data__,p)>-1}},function(a,A,e){var i=e(97);a.exports=function(p,m){var S=this.__data__,l=i(S,p);return l<0?(++this.size,S.push([p,m])):S[l][1]=m,this}},function(a,A,e){var i=e(96);a.exports=function(){this.__data__=new i,this.size=0}},function(a,A){a.exports=function(e){var i=this.__data__,p=i.delete(e);return this.size=i.size,p}},function(a,A){a.exports=function(e){return this.__data__.get(e)}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A,e){var i=e(96),p=e(125),m=e(126);a.exports=function(S,l){var M=this.__data__;if(M instanceof i){var j=M.__data__;if(!p||j.length<199)return j.push([S,l]),this.size=++M.size,this;M=this.__data__=new m(j)}return M.set(S,l),this.size=M.size,this}},function(a,A,e){var i=e(83),p=e(286),m=e(43),S=e(165),l=/^\[object .+?Constructor\]$/,M=Function.prototype,j=Object.prototype,y=M.toString,n=j.hasOwnProperty,s=RegExp("^"+y.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(d){return!(!m(d)||p(d))&&(i(d)?s:l).test(S(d))}},function(a,A,e){var i=e(72),p=Object.prototype,m=p.hasOwnProperty,S=p.toString,l=i?i.toStringTag:void 0;a.exports=function(M){var j=m.call(M,l),y=M[l];try{M[l]=void 0;var n=!0}catch(d){}var s=S.call(M);return n&&(j?M[l]=y:delete M[l]),s}},function(a,A){var e=Object.prototype.toString;a.exports=function(i){return e.call(i)}},function(a,A,e){var i,p=e(287),m=(i=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";a.exports=function(S){return!!m&&m in S}},function(a,A,e){var i=e(47)["__core-js_shared__"];a.exports=i},function(a,A){a.exports=function(e,i){return e==null?void 0:e[i]}},function(a,A,e){var i=e(290),p=e(96),m=e(125);a.exports=function(){this.size=0,this.__data__={hash:new i,map:new(m||p),string:new i}}},function(a,A,e){var i=e(291),p=e(292),m=e(293),S=e(294),l=e(295);function M(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}M.prototype.clear=i,M.prototype.delete=p,M.prototype.get=m,M.prototype.has=S,M.prototype.set=l,a.exports=M},function(a,A,e){var i=e(98);a.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(a,A){a.exports=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}},function(a,A,e){var i=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(m){var S=this.__data__;if(i){var l=S[m];return l==="__lodash_hash_undefined__"?void 0:l}return p.call(S,m)?S[m]:void 0}},function(a,A,e){var i=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(m){var S=this.__data__;return i?S[m]!==void 0:p.call(S,m)}},function(a,A,e){var i=e(98);a.exports=function(p,m){var S=this.__data__;return this.size+=this.has(p)?0:1,S[p]=i&&m===void 0?"__lodash_hash_undefined__":m,this}},function(a,A,e){var i=e(99);a.exports=function(p){var m=i(this,p).delete(p);return this.size-=m?1:0,m}},function(a,A){function e(i){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(i)}a.exports=function(i){var p=e(i);return p=="string"||p=="number"||p=="symbol"||p=="boolean"?i!=="__proto__":i===null}},function(a,A,e){var i=e(99);a.exports=function(p){return i(this,p).get(p)}},function(a,A,e){var i=e(99);a.exports=function(p){return i(this,p).has(p)}},function(a,A,e){var i=e(99);a.exports=function(p,m){var S=i(this,p),l=S.size;return S.set(p,m),this.size+=S.size==l?0:1,this}},function(a,A,e){var i=e(84),p=e(58);a.exports=function(m,S){return m&&i(S,p(S),m)}},function(a,A){a.exports=function(e,i){for(var p=-1,m=Array(e);++p<e;)m[p]=i(p);return m}},function(a,A,e){var i=e(57),p=e(48);a.exports=function(m){return p(m)&&i(m)=="[object Arguments]"}},function(a,A){a.exports=function(){return!1}},function(a,A,e){var i=e(57),p=e(128),m=e(48),S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S["[object Function]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object WeakMap]"]=!1,a.exports=function(l){return m(l)&&p(l.length)&&!!S[i(l)]}},function(a,A,e){var i=e(168)(Object.keys,Object);a.exports=i},function(a,A,e){var i=e(84),p=e(65);a.exports=function(m,S){return m&&i(S,p(S),m)}},function(a,A,e){var i=e(43),p=e(104),m=e(309),S=Object.prototype.hasOwnProperty;a.exports=function(l){if(!i(l))return m(l);var M=p(l),j=[];for(var y in l)(y!="constructor"||!M&&S.call(l,y))&&j.push(y);return j}},function(a,A){a.exports=function(e){var i=[];if(e!=null)for(var p in Object(e))i.push(p);return i}},function(a,A,e){var i=e(84),p=e(131);a.exports=function(m,S){return i(m,p(m),S)}},function(a,A,e){var i=e(84),p=e(173);a.exports=function(m,S){return i(m,p(m),S)}},function(a,A,e){var i=e(175),p=e(173),m=e(65);a.exports=function(S){return i(S,m,p)}},function(a,A,e){var i=e(64)(e(47),"DataView");a.exports=i},function(a,A,e){var i=e(64)(e(47),"Promise");a.exports=i},function(a,A,e){var i=e(64)(e(47),"WeakMap");a.exports=i},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(i){var p=i.length,m=new i.constructor(p);return p&&typeof i[0]=="string"&&e.call(i,"index")&&(m.index=i.index,m.input=i.input),m}},function(a,A,e){var i=e(133),p=e(318),m=e(319),S=e(320),l=e(178);a.exports=function(M,j,y){var n=M.constructor;switch(j){case"[object ArrayBuffer]":return i(M);case"[object Boolean]":case"[object Date]":return new n(+M);case"[object DataView]":return p(M,y);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(M,y);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(M);case"[object RegExp]":return m(M);case"[object Set]":return new n;case"[object Symbol]":return S(M)}}},function(a,A,e){var i=e(133);a.exports=function(p,m){var S=m?i(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.byteLength)}},function(a,A){var e=/\w*$/;a.exports=function(i){var p=new i.constructor(i.source,e.exec(i));return p.lastIndex=i.lastIndex,p}},function(a,A,e){var i=e(72),p=i?i.prototype:void 0,m=p?p.valueOf:void 0;a.exports=function(S){return m?Object(m.call(S)):{}}},function(a,A,e){var i=e(322),p=e(103),m=e(129),S=m&&m.isMap,l=S?p(S):i;a.exports=l},function(a,A,e){var i=e(74),p=e(48);a.exports=function(m){return p(m)&&i(m)=="[object Map]"}},function(a,A,e){var i=e(324),p=e(103),m=e(129),S=m&&m.isSet,l=S?p(S):i;a.exports=l},function(a,A,e){var i=e(74),p=e(48);a.exports=function(m){return p(m)&&i(m)=="[object Set]"}},function(a,A){a.exports=function(e){return function(i,p,m){for(var S=-1,l=Object(i),M=m(i),j=M.length;j--;){var y=M[e?j:++S];if(p(l[y],y,l)===!1)break}return i}}},function(a,A,e){var i=e(53);a.exports=function(p,m){return function(S,l){if(S==null)return S;if(!i(S))return p(S,l);for(var M=S.length,j=m?M:-1,y=Object(S);(m?j--:++j<M)&&l(y[j],j,y)!==!1;);return S}}},function(a,A,e){var i=e(106);a.exports=function(p,m){var S=[];return i(p,function(l,M,j){m(l,M,j)&&S.push(l)}),S}},function(a,A,e){var i=e(329),p=e(337),m=e(190);a.exports=function(S){var l=p(S);return l.length==1&&l[0][2]?m(l[0][0],l[0][1]):function(M){return M===S||i(M,S,l)}}},function(a,A,e){var i=e(95),p=e(185);a.exports=function(m,S,l,M){var j=l.length,y=j,n=!M;if(m==null)return!y;for(m=Object(m);j--;){var s=l[j];if(n&&s[2]?s[1]!==m[s[0]]:!(s[0]in m))return!1}for(;++j<y;){var d=(s=l[j])[0],E=m[d],O=s[1];if(n&&s[2]){if(E===void 0&&!(d in m))return!1}else{var C=new i;if(M)var v=M(E,O,d,m,S,C);if(!(v===void 0?p(O,E,3,M,C):v))return!1}}return!0}},function(a,A,e){var i=e(95),p=e(186),m=e(334),S=e(336),l=e(74),M=e(26),j=e(73),y=e(44),n="[object Object]",s=Object.prototype.hasOwnProperty;a.exports=function(d,E,O,C,v,x){var T=M(d),N=M(E),X=T?"[object Array]":l(d),tt=N?"[object Array]":l(E),nt=(X=X=="[object Arguments]"?n:X)==n,vt=(tt=tt=="[object Arguments]"?n:tt)==n,ft=X==tt;if(ft&&j(d)){if(!j(E))return!1;T=!0,nt=!1}if(ft&&!nt)return x||(x=new i),T||y(d)?p(d,E,O,C,v,x):m(d,E,X,O,C,v,x);if(!(1&O)){var bt=nt&&s.call(d,"__wrapped__"),St=vt&&s.call(E,"__wrapped__");if(bt||St){var pt=bt?d.value():d,ct=St?E.value():E;return x||(x=new i),v(pt,ct,O,C,x)}}return!!ft&&(x||(x=new i),S(d,E,O,C,v,x))}},function(a,A){a.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A){a.exports=function(e,i){for(var p=-1,m=e==null?0:e.length;++p<m;)if(i(e[p],p,e))return!0;return!1}},function(a,A,e){var i=e(72),p=e(177),m=e(71),S=e(186),l=e(335),M=e(137),j=i?i.prototype:void 0,y=j?j.valueOf:void 0;a.exports=function(n,s,d,E,O,C,v){switch(d){case"[object DataView]":if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=s.byteLength||!C(new p(n),new p(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+n,+s);case"[object Error]":return n.name==s.name&&n.message==s.message;case"[object RegExp]":case"[object String]":return n==s+"";case"[object Map]":var x=l;case"[object Set]":var T=1&E;if(x||(x=M),n.size!=s.size&&!T)return!1;var N=v.get(n);if(N)return N==s;E|=2,v.set(n,s);var X=S(x(n),x(s),E,O,C,v);return v.delete(n),X;case"[object Symbol]":if(y)return y.call(n)==y.call(s)}return!1}},function(a,A){a.exports=function(e){var i=-1,p=Array(e.size);return e.forEach(function(m,S){p[++i]=[S,m]}),p}},function(a,A,e){var i=e(174),p=Object.prototype.hasOwnProperty;a.exports=function(m,S,l,M,j,y){var n=1&l,s=i(m),d=s.length;if(d!=i(S).length&&!n)return!1;for(var E=d;E--;){var O=s[E];if(!(n?O in S:p.call(S,O)))return!1}var C=y.get(m),v=y.get(S);if(C&&v)return C==S&&v==m;var x=!0;y.set(m,S),y.set(S,m);for(var T=n;++E<d;){var N=m[O=s[E]],X=S[O];if(M)var tt=n?M(X,N,O,S,m,y):M(N,X,O,m,S,y);if(!(tt===void 0?N===X||j(N,X,l,M,y):tt)){x=!1;break}T||(T=O=="constructor")}if(x&&!T){var nt=m.constructor,vt=S.constructor;nt==vt||!("constructor"in m)||!("constructor"in S)||typeof nt=="function"&&nt instanceof nt&&typeof vt=="function"&&vt instanceof vt||(x=!1)}return y.delete(m),y.delete(S),x}},function(a,A,e){var i=e(189),p=e(58);a.exports=function(m){for(var S=p(m),l=S.length;l--;){var M=S[l],j=m[M];S[l]=[M,j,i(j)]}return S}},function(a,A,e){var i=e(185),p=e(339),m=e(192),S=e(138),l=e(189),M=e(190),j=e(87);a.exports=function(y,n){return S(y)&&l(n)?M(j(y),n):function(s){var d=p(s,y);return d===void 0&&d===n?m(s,y):i(n,d,3)}}},function(a,A,e){var i=e(107);a.exports=function(p,m,S){var l=p==null?void 0:i(p,m);return l===void 0?S:l}},function(a,A,e){var i=e(341),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,S=i(function(l){var M=[];return l.charCodeAt(0)===46&&M.push(""),l.replace(p,function(j,y,n,s){M.push(n?s.replace(m,"$1"):y||j)}),M});a.exports=S},function(a,A,e){var i=e(342);a.exports=function(p){var m=i(p,function(l){return S.size===500&&S.clear(),l}),S=m.cache;return m}},function(a,A,e){var i=e(126);function p(m,S){if(typeof m!="function"||S!=null&&typeof S!="function")throw new TypeError("Expected a function");var l=function M(){var j=arguments,y=S?S.apply(this,j):j[0],n=M.cache;if(n.has(y))return n.get(y);var s=m.apply(this,j);return M.cache=n.set(y,s)||n,s};return l.cache=new(p.Cache||i),l}p.Cache=i,a.exports=p},function(a,A,e){var i=e(72),p=e(109),m=e(26),S=e(75),l=i?i.prototype:void 0,M=l?l.toString:void 0;a.exports=function j(y){if(typeof y=="string")return y;if(m(y))return p(y,j)+"";if(S(y))return M?M.call(y):"";var n=y+"";return n=="0"&&1/y==-1/0?"-0":n}},function(a,A){a.exports=function(e,i){return e!=null&&i in Object(e)}},function(a,A,e){var i=e(194),p=e(346),m=e(138),S=e(87);a.exports=function(l){return m(l)?i(S(l)):p(l)}},function(a,A,e){var i=e(107);a.exports=function(p){return function(m){return i(m,p)}}},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(i,p){return i!=null&&e.call(i,p)}},function(a,A,e){var i=e(130),p=e(74),m=e(85),S=e(26),l=e(53),M=e(73),j=e(104),y=e(44),n=Object.prototype.hasOwnProperty;a.exports=function(s){if(s==null)return!0;if(l(s)&&(S(s)||typeof s=="string"||typeof s.splice=="function"||M(s)||y(s)||m(s)))return!s.length;var d=p(s);if(d=="[object Map]"||d=="[object Set]")return!s.size;if(j(s))return!i(s).length;for(var E in s)if(n.call(s,E))return!1;return!0}},function(a,A){a.exports=function(e,i,p,m){var S=-1,l=e==null?0:e.length;for(m&&l&&(p=e[++S]);++S<l;)p=i(p,e[S],S,e);return p}},function(a,A){a.exports=function(e,i,p,m,S){return S(e,function(l,M,j){p=m?(m=!1,l):i(p,l,M,j)}),p}},function(a,A,e){var i=e(130),p=e(74),m=e(53),S=e(352),l=e(353);a.exports=function(M){if(M==null)return 0;if(m(M))return S(M)?l(M):M.length;var j=p(M);return j=="[object Map]"||j=="[object Set]"?M.size:i(M).length}},function(a,A,e){var i=e(57),p=e(26),m=e(48);a.exports=function(S){return typeof S=="string"||!p(S)&&m(S)&&i(S)=="[object String]"}},function(a,A,e){var i=e(354),p=e(355),m=e(356);a.exports=function(S){return p(S)?m(S):i(S)}},function(a,A,e){var i=e(194)("length");a.exports=i},function(a,A){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");a.exports=function(i){return e.test(i)}},function(a,A){var e="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",p="\\ud83c[\\udffb-\\udfff]",m="[^\\ud800-\\udfff]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",M="(?:"+i+"|"+p+")?",j="[\\ufe0e\\ufe0f]?"+M+("(?:\\u200d(?:"+[m,S,l].join("|")+")[\\ufe0e\\ufe0f]?"+M+")*"),y="(?:"+[m+i+"?",i,S,l,e].join("|")+")",n=RegExp(p+"(?="+p+")|"+y+j,"g");a.exports=function(s){for(var d=n.lastIndex=0;n.test(s);)++d;return d}},function(a,A,e){var i=e(127),p=e(180),m=e(135),S=e(54),l=e(105),M=e(26),j=e(73),y=e(83),n=e(43),s=e(44);a.exports=function(d,E,O){var C=M(d),v=C||j(d)||s(d);if(E=S(E,4),O==null){var x=d&&d.constructor;O=v?C?new x:[]:n(d)&&y(x)?p(l(d)):{}}return(v?i:m)(d,function(T,N,X){return E(O,T,N,X)}),O}},function(a,A,e){var i=e(139),p=e(110),m=e(202),S=e(204),l=p(function(M){return m(i(M,1,S,!0))});a.exports=l},function(a,A,e){var i=e(72),p=e(85),m=e(26),S=i?i.isConcatSpreadable:void 0;a.exports=function(l){return m(l)||p(l)||!!(S&&l&&l[S])}},function(a,A){a.exports=function(e,i,p){switch(p.length){case 0:return e.call(i);case 1:return e.call(i,p[0]);case 2:return e.call(i,p[0],p[1]);case 3:return e.call(i,p[0],p[1],p[2])}return e.apply(i,p)}},function(a,A,e){var i=e(134),p=e(166),m=e(66),S=p?function(l,M){return p(l,"toString",{configurable:!0,enumerable:!1,value:i(M),writable:!0})}:m;a.exports=S},function(a,A){var e=Date.now;a.exports=function(i){var p=0,m=0;return function(){var S=e(),l=16-(S-m);if(m=S,l>0){if(++p>=800)return arguments[0]}else p=0;return i.apply(void 0,arguments)}}},function(a,A,e){var i=e(364);a.exports=function(p,m){return!!(p==null?0:p.length)&&i(p,m,0)>-1}},function(a,A,e){var i=e(203),p=e(365),m=e(366);a.exports=function(S,l,M){return l==l?m(S,l,M):i(S,p,M)}},function(a,A){a.exports=function(e){return e!=e}},function(a,A){a.exports=function(e,i,p){for(var m=p-1,S=e.length;++m<S;)if(e[m]===i)return m;return-1}},function(a,A){a.exports=function(e,i,p){for(var m=-1,S=e==null?0:e.length;++m<S;)if(p(i,e[m]))return!0;return!1}},function(a,A,e){var i=e(176),p=e(369),m=e(137),S=i&&1/m(new i([,-0]))[1]==1/0?function(l){return new i(l)}:p;a.exports=S},function(a,A){a.exports=function(){}},function(a,A,e){var i=e(109);a.exports=function(p,m){return i(m,function(S){return p[S]})}},function(a,A){a.exports="2.1.8"},function(a,A,e){var i=e(42),p=e(124);function m(l){return i.map(l.nodes(),function(M){var j=l.node(M),y=l.parent(M),n={v:M};return i.isUndefined(j)||(n.value=j),i.isUndefined(y)||(n.parent=y),n})}function S(l){return i.map(l.edges(),function(M){var j=l.edge(M),y={v:M.v,w:M.w};return i.isUndefined(M.name)||(y.name=M.name),i.isUndefined(j)||(y.value=j),y})}a.exports={write:function(M){var j={options:{directed:M.isDirected(),multigraph:M.isMultigraph(),compound:M.isCompound()},nodes:m(M),edges:S(M)};return i.isUndefined(M.graph())||(j.value=i.clone(M.graph())),j},read:function(M){var j=new p(M.options).setGraph(M.value);return i.each(M.nodes,function(y){j.setNode(y.v,y.value),y.parent&&j.setParent(y.v,y.parent)}),i.each(M.edges,function(y){j.setEdge({v:y.v,w:y.w,name:y.name},y.value)}),j}}},function(a,A,e){a.exports={components:e(374),dijkstra:e(206),dijkstraAll:e(375),findCycles:e(376),floydWarshall:e(377),isAcyclic:e(378),postorder:e(379),preorder:e(380),prim:e(381),tarjan:e(208),topsort:e(209)}},function(a,A,e){var i=e(42);a.exports=function(p){var m,S={},l=[];function M(j){i.has(S,j)||(S[j]=!0,m.push(j),i.each(p.successors(j),M),i.each(p.predecessors(j),M))}return i.each(p.nodes(),function(j){m=[],M(j),m.length&&l.push(m)}),l}},function(a,A,e){var i=e(206),p=e(42);a.exports=function(m,S,l){return p.transform(m.nodes(),function(M,j){M[j]=i(m,j,S,l)},{})}},function(a,A,e){var i=e(42),p=e(208);a.exports=function(m){return i.filter(p(m),function(S){return S.length>1||S.length===1&&m.hasEdge(S[0],S[0])})}},function(a,A,e){var i=e(42);a.exports=function(m,S,l){return function(M,j,y){var n={},s=M.nodes();return s.forEach(function(d){n[d]={},n[d][d]={distance:0},s.forEach(function(E){d!==E&&(n[d][E]={distance:Number.POSITIVE_INFINITY})}),y(d).forEach(function(E){var O=E.v===d?E.w:E.v,C=j(E);n[d][O]={distance:C,predecessor:d}})}),s.forEach(function(d){var E=n[d];s.forEach(function(O){var C=n[O];s.forEach(function(v){var x=C[d],T=E[v],N=C[v],X=x.distance+T.distance;X<N.distance&&(N.distance=X,N.predecessor=T.predecessor)})})}),n}(m,S||p,l||function(M){return m.outEdges(M)})};var p=i.constant(1)},function(a,A,e){var i=e(209);a.exports=function(p){try{i(p)}catch(m){if(m instanceof i.CycleException)return!1;throw m}return!0}},function(a,A,e){var i=e(210);a.exports=function(p,m){return i(p,m,"post")}},function(a,A,e){var i=e(210);a.exports=function(p,m){return i(p,m,"pre")}},function(a,A,e){var i=e(42),p=e(124),m=e(207);a.exports=function(S,l){var M,j=new p,y={},n=new m;function s(E){var O=E.v===M?E.w:E.v,C=n.priority(O);if(C!==void 0){var v=l(E);v<C&&(y[O]=M,n.decrease(O,v))}}if(S.nodeCount()===0)return j;i.each(S.nodes(),function(E){n.add(E,Number.POSITIVE_INFINITY),j.setNode(E)}),n.decrease(S.nodes()[0],0);for(var d=!1;n.size()>0;){if(M=n.removeMin(),i.has(y,M))j.setEdge(M,y[M]);else{if(d)throw new Error("Input graph is not connected: "+S);d=!0}S.nodeEdges(M).forEach(s)}return j}},function(a,A,e){"use strict";var i=e(24),p=e(419),m=e(422),S=e(423),l=e(37).normalizeRanks,M=e(425),j=e(37).removeEmptyRanks,y=e(426),n=e(427),s=e(428),d=e(429),E=e(438),O=e(37),C=e(46).Graph;a.exports=function(St,pt){var ct=pt&&pt.debugTiming?O.time:O.notime;ct("layout",function(){var zt=ct("  buildLayoutGraph",function(){return function(Nt){var wt=new C({multigraph:!0,compound:!0}),H=bt(Nt.graph());return wt.setGraph(i.merge({},x,ft(H,v),i.pick(H,T))),i.forEach(Nt.nodes(),function(ht){var dt=bt(Nt.node(ht));wt.setNode(ht,i.defaults(ft(dt,N),X)),wt.setParent(ht,Nt.parent(ht))}),i.forEach(Nt.edges(),function(ht){var dt=bt(Nt.edge(ht));wt.setEdge(ht,i.merge({},nt,ft(dt,tt),i.pick(dt,vt)))}),wt}(St)});ct("  runLayout",function(){(function(Nt,wt){wt("    makeSpaceForEdgeLabels",function(){(function(H){var ht=H.graph();ht.ranksep/=2,i.forEach(H.edges(),function(dt){var yt=H.edge(dt);yt.minlen*=2,yt.labelpos.toLowerCase()!=="c"&&(ht.rankdir==="TB"||ht.rankdir==="BT"?yt.width+=yt.labeloffset:yt.height+=yt.labeloffset)})})(Nt)}),wt("    removeSelfEdges",function(){(function(H){i.forEach(H.edges(),function(ht){if(ht.v===ht.w){var dt=H.node(ht.v);dt.selfEdges||(dt.selfEdges=[]),dt.selfEdges.push({e:ht,label:H.edge(ht)}),H.removeEdge(ht)}})})(Nt)}),wt("    acyclic",function(){p.run(Nt)}),wt("    nestingGraph.run",function(){y.run(Nt)}),wt("    rank",function(){S(O.asNonCompoundGraph(Nt))}),wt("    injectEdgeLabelProxies",function(){(function(H){i.forEach(H.edges(),function(ht){var dt=H.edge(ht);if(dt.width&&dt.height){var yt=H.node(ht.v),Mt={rank:(H.node(ht.w).rank-yt.rank)/2+yt.rank,e:ht};O.addDummyNode(H,"edge-proxy",Mt,"_ep")}})})(Nt)}),wt("    removeEmptyRanks",function(){j(Nt)}),wt("    nestingGraph.cleanup",function(){y.cleanup(Nt)}),wt("    normalizeRanks",function(){l(Nt)}),wt("    assignRankMinMax",function(){(function(H){var ht=0;i.forEach(H.nodes(),function(dt){var yt=H.node(dt);yt.borderTop&&(yt.minRank=H.node(yt.borderTop).rank,yt.maxRank=H.node(yt.borderBottom).rank,ht=i.max(ht,yt.maxRank))}),H.graph().maxRank=ht})(Nt)}),wt("    removeEdgeLabelProxies",function(){(function(H){i.forEach(H.nodes(),function(ht){var dt=H.node(ht);dt.dummy==="edge-proxy"&&(H.edge(dt.e).labelRank=dt.rank,H.removeNode(ht))})})(Nt)}),wt("    normalize.run",function(){m.run(Nt)}),wt("    parentDummyChains",function(){M(Nt)}),wt("    addBorderSegments",function(){n(Nt)}),wt("    order",function(){d(Nt)}),wt("    insertSelfEdges",function(){(function(H){var ht=O.buildLayerMatrix(H);i.forEach(ht,function(dt){var yt=0;i.forEach(dt,function(Mt,$){var lt=H.node(Mt);lt.order=$+yt,i.forEach(lt.selfEdges,function(rt){O.addDummyNode(H,"selfedge",{width:rt.label.width,height:rt.label.height,rank:lt.rank,order:$+ ++yt,e:rt.e,label:rt.label},"_se")}),delete lt.selfEdges})})})(Nt)}),wt("    adjustCoordinateSystem",function(){s.adjust(Nt)}),wt("    position",function(){E(Nt)}),wt("    positionSelfEdges",function(){(function(H){i.forEach(H.nodes(),function(ht){var dt=H.node(ht);if(dt.dummy==="selfedge"){var yt=H.node(dt.e.v),Mt=yt.x+yt.width/2,$=yt.y,lt=dt.x-Mt,rt=yt.height/2;H.setEdge(dt.e,dt.label),H.removeNode(ht),dt.label.points=[{x:Mt+2*lt/3,y:$-rt},{x:Mt+5*lt/6,y:$-rt},{x:Mt+lt,y:$},{x:Mt+5*lt/6,y:$+rt},{x:Mt+2*lt/3,y:$+rt}],dt.label.x=dt.x,dt.label.y=dt.y}})})(Nt)}),wt("    removeBorderNodes",function(){(function(H){i.forEach(H.nodes(),function(ht){if(H.children(ht).length){var dt=H.node(ht),yt=H.node(dt.borderTop),Mt=H.node(dt.borderBottom),$=H.node(i.last(dt.borderLeft)),lt=H.node(i.last(dt.borderRight));dt.width=Math.abs(lt.x-$.x),dt.height=Math.abs(Mt.y-yt.y),dt.x=$.x+dt.width/2,dt.y=yt.y+dt.height/2}}),i.forEach(H.nodes(),function(ht){H.node(ht).dummy==="border"&&H.removeNode(ht)})})(Nt)}),wt("    normalize.undo",function(){m.undo(Nt)}),wt("    fixupEdgeLabelCoords",function(){(function(H){i.forEach(H.edges(),function(ht){var dt=H.edge(ht);if(i.has(dt,"x"))switch(dt.labelpos!=="l"&&dt.labelpos!=="r"||(dt.width-=dt.labeloffset),dt.labelpos){case"l":dt.x-=dt.width/2+dt.labeloffset;break;case"r":dt.x+=dt.width/2+dt.labeloffset}})})(Nt)}),wt("    undoCoordinateSystem",function(){s.undo(Nt)}),wt("    translateGraph",function(){(function(H){var ht=Number.POSITIVE_INFINITY,dt=0,yt=Number.POSITIVE_INFINITY,Mt=0,$=H.graph(),lt=$.marginx||0,rt=$.marginy||0;function z(P){var Y=P.x,k=P.y,h=P.width,g=P.height;ht=Math.min(ht,Y-h/2),dt=Math.max(dt,Y+h/2),yt=Math.min(yt,k-g/2),Mt=Math.max(Mt,k+g/2)}i.forEach(H.nodes(),function(P){z(H.node(P))}),i.forEach(H.edges(),function(P){var Y=H.edge(P);i.has(Y,"x")&&z(Y)}),ht-=lt,yt-=rt,i.forEach(H.nodes(),function(P){var Y=H.node(P);Y.x-=ht,Y.y-=yt}),i.forEach(H.edges(),function(P){var Y=H.edge(P);i.forEach(Y.points,function(k){k.x-=ht,k.y-=yt}),i.has(Y,"x")&&(Y.x-=ht),i.has(Y,"y")&&(Y.y-=yt)}),$.width=dt-ht+lt,$.height=Mt-yt+rt})(Nt)}),wt("    assignNodeIntersects",function(){(function(H){i.forEach(H.edges(),function(ht){var dt,yt,Mt=H.edge(ht),$=H.node(ht.v),lt=H.node(ht.w);Mt.points?(dt=Mt.points[0],yt=Mt.points[Mt.points.length-1]):(Mt.points=[],dt=lt,yt=$),Mt.points.unshift(O.intersectRect($,dt)),Mt.points.push(O.intersectRect(lt,yt))})})(Nt)}),wt("    reversePoints",function(){(function(H){i.forEach(H.edges(),function(ht){var dt=H.edge(ht);dt.reversed&&dt.points.reverse()})})(Nt)}),wt("    acyclic.undo",function(){p.undo(Nt)})})(zt,ct)}),ct("  updateInputGraph",function(){(function(Nt,wt){i.forEach(Nt.nodes(),function(H){var ht=Nt.node(H),dt=wt.node(H);ht&&(ht.x=dt.x,ht.y=dt.y,wt.children(H).length&&(ht.width=dt.width,ht.height=dt.height))}),i.forEach(Nt.edges(),function(H){var ht=Nt.edge(H),dt=wt.edge(H);ht.points=dt.points,i.has(dt,"x")&&(ht.x=dt.x,ht.y=dt.y)}),Nt.graph().width=wt.graph().width,Nt.graph().height=wt.graph().height})(St,zt)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],N=["width","height"],X={width:0,height:0},tt=["minlen","weight","width","height","labeloffset"],nt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},vt=["labelpos"];function ft(St,pt){return i.mapValues(i.pick(St,pt),Number)}function bt(St){var pt={};return i.forEach(St,function(ct,zt){pt[zt.toLowerCase()]=ct}),pt}},function(a,A,e){var i=e(162);a.exports=function(p){return i(p,5)}},function(a,A,e){var i=e(110),p=e(71),m=e(111),S=e(65),l=Object.prototype,M=l.hasOwnProperty,j=i(function(y,n){y=Object(y);var s=-1,d=n.length,E=d>2?n[2]:void 0;for(E&&m(n[0],n[1],E)&&(d=1);++s<d;)for(var O=n[s],C=S(O),v=-1,x=C.length;++v<x;){var T=C[v],N=y[T];(N===void 0||p(N,l[T])&&!M.call(y,T))&&(y[T]=O[T])}return y});a.exports=j},function(a,A,e){var i=e(386)(e(387));a.exports=i},function(a,A,e){var i=e(54),p=e(53),m=e(58);a.exports=function(S){return function(l,M,j){var y=Object(l);if(!p(l)){var n=i(M,3);l=m(l),M=function(E){return n(y[E],E,y)}}var s=S(l,M,j);return s>-1?y[n?l[s]:s]:void 0}}},function(a,A,e){var i=e(203),p=e(54),m=e(388),S=Math.max;a.exports=function(l,M,j){var y=l==null?0:l.length;if(!y)return-1;var n=j==null?0:m(j);return n<0&&(n=S(y+n,0)),i(l,p(M,3),n)}},function(a,A,e){var i=e(211);a.exports=function(p){var m=i(p),S=m%1;return m==m?S?m-S:m:0}},function(a,A,e){var i=e(43),p=e(75),m=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,M=/^0o[0-7]+$/i,j=parseInt;a.exports=function(y){if(typeof y=="number")return y;if(p(y))return NaN;if(i(y)){var n=typeof y.valueOf=="function"?y.valueOf():y;y=i(n)?n+"":n}if(typeof y!="string")return y===0?y:+y;y=y.replace(m,"");var s=l.test(y);return s||M.test(y)?j(y.slice(2),s?2:8):S.test(y)?NaN:+y}},function(a,A,e){var i=e(136),p=e(183),m=e(65);a.exports=function(S,l){return S==null?S:i(S,p(l),m)}},function(a,A){a.exports=function(e){var i=e==null?0:e.length;return i?e[i-1]:void 0}},function(a,A,e){var i=e(101),p=e(135),m=e(54);a.exports=function(S,l){var M={};return l=m(l,3),p(S,function(j,y,n){i(M,y,l(j,y,n))}),M}},function(a,A,e){var i=e(140),p=e(394),m=e(66);a.exports=function(S){return S&&S.length?i(S,m,p):void 0}},function(a,A){a.exports=function(e,i){return e>i}},function(a,A,e){var i=e(396),p=e(399)(function(m,S,l){i(m,S,l)});a.exports=p},function(a,A,e){var i=e(95),p=e(213),m=e(136),S=e(397),l=e(43),M=e(65),j=e(214);a.exports=function y(n,s,d,E,O){n!==s&&m(s,function(C,v){if(O||(O=new i),l(C))S(n,s,v,d,y,E,O);else{var x=E?E(j(n,v),C,v+"",n,s,O):void 0;x===void 0&&(x=C),p(n,v,x)}},M)}},function(a,A,e){var i=e(213),p=e(169),m=e(178),S=e(170),l=e(179),M=e(85),j=e(26),y=e(204),n=e(73),s=e(83),d=e(43),E=e(151),O=e(44),C=e(214),v=e(398);a.exports=function(x,T,N,X,tt,nt,vt){var ft=C(x,N),bt=C(T,N),St=vt.get(bt);if(St)i(x,N,St);else{var pt=nt?nt(ft,bt,N+"",x,T,vt):void 0,ct=pt===void 0;if(ct){var zt=j(bt),Nt=!zt&&n(bt),wt=!zt&&!Nt&&O(bt);pt=bt,zt||Nt||wt?j(ft)?pt=ft:y(ft)?pt=S(ft):Nt?(ct=!1,pt=p(bt,!0)):wt?(ct=!1,pt=m(bt,!0)):pt=[]:E(bt)||M(bt)?(pt=ft,M(ft)?pt=v(ft):d(ft)&&!s(ft)||(pt=l(bt))):ct=!1}ct&&(vt.set(bt,pt),tt(pt,bt,X,nt,vt),vt.delete(bt)),i(x,N,pt)}}},function(a,A,e){var i=e(84),p=e(65);a.exports=function(m){return i(m,p(m))}},function(a,A,e){var i=e(110),p=e(111);a.exports=function(m){return i(function(S,l){var M=-1,j=l.length,y=j>1?l[j-1]:void 0,n=j>2?l[2]:void 0;for(y=m.length>3&&typeof y=="function"?(j--,y):void 0,n&&p(l[0],l[1],n)&&(y=j<3?void 0:y,j=1),S=Object(S);++M<j;){var s=l[M];s&&m(S,s,M,y)}return S})}},function(a,A,e){var i=e(140),p=e(215),m=e(66);a.exports=function(S){return S&&S.length?i(S,m,p):void 0}},function(a,A,e){var i=e(140),p=e(54),m=e(215);a.exports=function(S,l){return S&&S.length?i(S,p(l,2),m):void 0}},function(a,A,e){var i=e(47);a.exports=function(){return i.Date.now()}},function(a,A,e){var i=e(404),p=e(407)(function(m,S){return m==null?{}:i(m,S)});a.exports=p},function(a,A,e){var i=e(405),p=e(192);a.exports=function(m,S){return i(m,S,function(l,M){return p(m,M)})}},function(a,A,e){var i=e(107),p=e(406),m=e(108);a.exports=function(S,l,M){for(var j=-1,y=l.length,n={};++j<y;){var s=l[j],d=i(S,s);M(d,s)&&p(n,m(s,S),d)}return n}},function(a,A,e){var i=e(100),p=e(108),m=e(102),S=e(43),l=e(87);a.exports=function(M,j,y,n){if(!S(M))return M;for(var s=-1,d=(j=p(j,M)).length,E=d-1,O=M;O!=null&&++s<d;){var C=l(j[s]),v=y;if(C==="__proto__"||C==="constructor"||C==="prototype")return M;if(s!=E){var x=O[C];(v=n?n(x,C,O):void 0)===void 0&&(v=S(x)?x:m(j[s+1])?[]:{})}i(O,C,v),O=O[C]}return M}},function(a,A,e){var i=e(212),p=e(200),m=e(201);a.exports=function(S){return m(p(S,void 0,i),S+"")}},function(a,A,e){var i=e(409)();a.exports=i},function(a,A,e){var i=e(410),p=e(111),m=e(211);a.exports=function(S){return function(l,M,j){return j&&typeof j!="number"&&p(l,M,j)&&(M=j=void 0),l=m(l),M===void 0?(M=l,l=0):M=m(M),j=j===void 0?l<M?1:-1:m(j),i(l,M,j,S)}}},function(a,A){var e=Math.ceil,i=Math.max;a.exports=function(p,m,S,l){for(var M=-1,j=i(e((m-p)/(S||1)),0),y=Array(j);j--;)y[l?j:++M]=p,p+=S;return y}},function(a,A,e){var i=e(139),p=e(412),m=e(110),S=e(111),l=m(function(M,j){if(M==null)return[];var y=j.length;return y>1&&S(M,j[0],j[1])?j=[]:y>2&&S(j[0],j[1],j[2])&&(j=[j[0]]),p(M,i(j,1),[])});a.exports=l},function(a,A,e){var i=e(109),p=e(107),m=e(54),S=e(198),l=e(413),M=e(103),j=e(414),y=e(66),n=e(26);a.exports=function(s,d,E){d=d.length?i(d,function(v){return n(v)?function(x){return p(x,v.length===1?v[0]:v)}:v}):[y];var O=-1;d=i(d,M(m));var C=S(s,function(v,x,T){return{criteria:i(d,function(N){return N(v)}),index:++O,value:v}});return l(C,function(v,x){return j(v,x,E)})}},function(a,A){a.exports=function(e,i){var p=e.length;for(e.sort(i);p--;)e[p]=e[p].value;return e}},function(a,A,e){var i=e(415);a.exports=function(p,m,S){for(var l=-1,M=p.criteria,j=m.criteria,y=M.length,n=S.length;++l<y;){var s=i(M[l],j[l]);if(s)return l>=n?s:s*(S[l]=="desc"?-1:1)}return p.index-m.index}},function(a,A,e){var i=e(75);a.exports=function(p,m){if(p!==m){var S=p!==void 0,l=p===null,M=p==p,j=i(p),y=m!==void 0,n=m===null,s=m==m,d=i(m);if(!n&&!d&&!j&&p>m||j&&y&&s&&!n&&!d||l&&y&&s||!S&&s||!M)return 1;if(!l&&!j&&!d&&p<m||d&&S&&M&&!l&&!j||n&&S&&M||!y&&M||!s)return-1}return 0}},function(a,A,e){var i=e(191),p=0;a.exports=function(m){var S=++p;return i(m)+S}},function(a,A,e){var i=e(100),p=e(418);a.exports=function(m,S){return p(m||[],S||[],i)}},function(a,A){a.exports=function(e,i,p){for(var m=-1,S=e.length,l=i.length,M={};++m<S;){var j=m<l?i[m]:void 0;p(M,e[m],j)}return M}},function(a,A,e){"use strict";var i=e(24),p=e(420);a.exports={run:function(S){var l=S.graph().acyclicer==="greedy"?p(S,function(M){return function(j){return M.edge(j).weight}}(S)):function(M){var j=[],y={},n={};function s(d){i.has(n,d)||(n[d]=!0,y[d]=!0,i.forEach(M.outEdges(d),function(E){i.has(y,E.w)?j.push(E):s(E.w)}),delete y[d])}return i.forEach(M.nodes(),s),j}(S);i.forEach(l,function(M){var j=S.edge(M);S.removeEdge(M),j.forwardName=M.name,j.reversed=!0,S.setEdge(M.w,M.v,j,i.uniqueId("rev"))})},undo:function(S){i.forEach(S.edges(),function(l){var M=S.edge(l);if(M.reversed){S.removeEdge(l);var j=M.forwardName;delete M.reversed,delete M.forwardName,S.setEdge(l.w,l.v,M,j)}})}}},function(a,A,e){var i=e(24),p=e(46).Graph,m=e(421);a.exports=function(j,y){if(j.nodeCount()<=1)return[];var n=function(d,E){var O=new p,C=0,v=0;i.forEach(d.nodes(),function(N){O.setNode(N,{v:N,in:0,out:0})}),i.forEach(d.edges(),function(N){var X=O.edge(N.v,N.w)||0,tt=E(N),nt=X+tt;O.setEdge(N.v,N.w,nt),v=Math.max(v,O.node(N.v).out+=tt),C=Math.max(C,O.node(N.w).in+=tt)});var x=i.range(v+C+3).map(function(){return new m}),T=C+1;return i.forEach(O.nodes(),function(N){M(x,T,O.node(N))}),{graph:O,buckets:x,zeroIdx:T}}(j,y||S),s=function(d,E,O){for(var C,v=[],x=E[E.length-1],T=E[0];d.nodeCount();){for(;C=T.dequeue();)l(d,E,O,C);for(;C=x.dequeue();)l(d,E,O,C);if(d.nodeCount()){for(var N=E.length-2;N>0;--N)if(C=E[N].dequeue()){v=v.concat(l(d,E,O,C,!0));break}}}return v}(n.graph,n.buckets,n.zeroIdx);return i.flatten(i.map(s,function(d){return j.outEdges(d.v,d.w)}),!0)};var S=i.constant(1);function l(j,y,n,s,d){var E=d?[]:void 0;return i.forEach(j.inEdges(s.v),function(O){var C=j.edge(O),v=j.node(O.v);d&&E.push({v:O.v,w:O.w}),v.out-=C,M(y,n,v)}),i.forEach(j.outEdges(s.v),function(O){var C=j.edge(O),v=O.w,x=j.node(v);x.in-=C,M(y,n,x)}),j.removeNode(s.v),E}function M(j,y,n){n.out?n.in?j[n.out-n.in+y].enqueue(n):j[j.length-1].enqueue(n):j[0].enqueue(n)}},function(a,A){function e(){var m={};m._next=m._prev=m,this._sentinel=m}function i(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function p(m,S){if(m!=="_next"&&m!=="_prev")return S}a.exports=e,e.prototype.dequeue=function(){var m=this._sentinel,S=m._prev;if(S!==m)return i(S),S},e.prototype.enqueue=function(m){var S=this._sentinel;m._prev&&m._next&&i(m),m._next=S._next,S._next._prev=m,S._next=m,m._prev=S},e.prototype.toString=function(){for(var m=[],S=this._sentinel,l=S._prev;l!==S;)m.push(JSON.stringify(l,p)),l=l._prev;return"["+m.join(", ")+"]"}},function(a,A,e){"use strict";var i=e(24),p=e(37);a.exports={run:function(S){S.graph().dummyChains=[],i.forEach(S.edges(),function(l){(function(M,j){var y,n,s,d=j.v,E=M.node(d).rank,O=j.w,C=M.node(O).rank,v=j.name,x=M.edge(j),T=x.labelRank;if(C!==E+1){for(M.removeEdge(j),s=0,++E;E<C;++s,++E)x.points=[],n={width:0,height:0,edgeLabel:x,edgeObj:j,rank:E},y=p.addDummyNode(M,"edge",n,"_d"),E===T&&(n.width=x.width,n.height=x.height,n.dummy="edge-label",n.labelpos=x.labelpos),M.setEdge(d,y,{weight:x.weight},v),s===0&&M.graph().dummyChains.push(y),d=y;M.setEdge(d,O,{weight:x.weight},v)}})(S,l)})},undo:function(S){i.forEach(S.graph().dummyChains,function(l){var M,j=S.node(l),y=j.edgeLabel;for(S.setEdge(j.edgeObj,y);j.dummy;)M=S.successors(l)[0],S.removeNode(l),y.points.push({x:j.x,y:j.y}),j.dummy==="edge-label"&&(y.x=j.x,y.y=j.y,y.width=j.width,y.height=j.height),l=M,j=S.node(l)})}}},function(a,A,e){"use strict";var i=e(112).longestPath,p=e(216),m=e(424);a.exports=function(M){switch(M.graph().ranker){case"network-simplex":l(M);break;case"tight-tree":(function(j){i(j),p(j)})(M);break;case"longest-path":S(M);break;default:l(M)}};var S=i;function l(M){m(M)}},function(a,A,e){"use strict";var i=e(24),p=e(216),m=e(112).slack,S=e(112).longestPath,l=e(46).alg.preorder,M=e(46).alg.postorder,j=e(37).simplify;function y(T){T=j(T),S(T);var N,X=p(T);for(d(X),n(X,T);N=O(X);)v(X,T,N,C(X,T,N))}function n(T,N){var X=M(T,T.nodes());X=X.slice(0,X.length-1),i.forEach(X,function(tt){(function(nt,vt,ft){var bt=nt.node(ft).parent;nt.edge(ft,bt).cutvalue=s(nt,vt,ft)})(T,N,tt)})}function s(T,N,X){var tt=T.node(X).parent,nt=!0,vt=N.edge(X,tt),ft=0;return vt||(nt=!1,vt=N.edge(tt,X)),ft=vt.weight,i.forEach(N.nodeEdges(X),function(bt){var St,pt,ct=bt.v===X,zt=ct?bt.w:bt.v;if(zt!==tt){var Nt=ct===nt,wt=N.edge(bt).weight;if(ft+=Nt?wt:-wt,St=X,pt=zt,T.hasEdge(St,pt)){var H=T.edge(X,zt).cutvalue;ft+=Nt?-H:H}}}),ft}function d(T,N){arguments.length<2&&(N=T.nodes()[0]),E(T,{},1,N)}function E(T,N,X,tt,nt){var vt=X,ft=T.node(tt);return N[tt]=!0,i.forEach(T.neighbors(tt),function(bt){i.has(N,bt)||(X=E(T,N,X,bt,tt))}),ft.low=vt,ft.lim=X++,nt?ft.parent=nt:delete ft.parent,X}function O(T){return i.find(T.edges(),function(N){return T.edge(N).cutvalue<0})}function C(T,N,X){var tt=X.v,nt=X.w;N.hasEdge(tt,nt)||(tt=X.w,nt=X.v);var vt=T.node(tt),ft=T.node(nt),bt=vt,St=!1;vt.lim>ft.lim&&(bt=ft,St=!0);var pt=i.filter(N.edges(),function(ct){return St===x(T,T.node(ct.v),bt)&&St!==x(T,T.node(ct.w),bt)});return i.minBy(pt,function(ct){return m(N,ct)})}function v(T,N,X,tt){var nt=X.v,vt=X.w;T.removeEdge(nt,vt),T.setEdge(tt.v,tt.w,{}),d(T),n(T,N),function(ft,bt){var St=i.find(ft.nodes(),function(ct){return!bt.node(ct).parent}),pt=l(ft,St);pt=pt.slice(1),i.forEach(pt,function(ct){var zt=ft.node(ct).parent,Nt=bt.edge(ct,zt),wt=!1;Nt||(Nt=bt.edge(zt,ct),wt=!0),bt.node(ct).rank=bt.node(zt).rank+(wt?Nt.minlen:-Nt.minlen)})}(T,N)}function x(T,N,X){return X.low<=N.lim&&N.lim<=X.lim}a.exports=y,y.initLowLimValues=d,y.initCutValues=n,y.calcCutValue=s,y.leaveEdge=O,y.enterEdge=C,y.exchangeEdges=v},function(a,A,e){var i=e(24);a.exports=function(p){var m=function(S){var l={},M=0;function j(y){var n=M;i.forEach(S.children(y),j),l[y]={low:n,lim:M++}}return i.forEach(S.children(),j),l}(p);i.forEach(p.graph().dummyChains,function(S){for(var l=p.node(S),M=l.edgeObj,j=function(O,C,v,x){var T,N,X=[],tt=[],nt=Math.min(C[v].low,C[x].low),vt=Math.max(C[v].lim,C[x].lim);T=v;do T=O.parent(T),X.push(T);while(T&&(C[T].low>nt||vt>C[T].lim));for(N=T,T=x;(T=O.parent(T))!==N;)tt.push(T);return{path:X.concat(tt.reverse()),lca:N}}(p,m,M.v,M.w),y=j.path,n=j.lca,s=0,d=y[s],E=!0;S!==M.w;){if(l=p.node(S),E){for(;(d=y[s])!==n&&p.node(d).maxRank<l.rank;)s++;d===n&&(E=!1)}if(!E){for(;s<y.length-1&&p.node(d=y[s+1]).minRank<=l.rank;)s++;d=y[s]}p.setParent(S,d),S=p.successors(S)[0]}})}},function(a,A,e){var i=e(24),p=e(37);a.exports={run:function(S){var l=p.addDummyNode(S,"root",{},"_root"),M=function(s){var d={};return i.forEach(s.children(),function(E){(function O(C,v){var x=s.children(C);x&&x.length&&i.forEach(x,function(T){O(T,v+1)}),d[C]=v})(E,1)}),d}(S),j=i.max(i.values(M))-1,y=2*j+1;S.graph().nestingRoot=l,i.forEach(S.edges(),function(s){S.edge(s).minlen*=y});var n=function(s){return i.reduce(s.edges(),function(d,E){return d+s.edge(E).weight},0)}(S)+1;i.forEach(S.children(),function(s){(function d(E,O,C,v,x,T,N){var X=E.children(N);if(!X.length)return void(N!==O&&E.setEdge(O,N,{weight:0,minlen:C}));var tt=p.addBorderNode(E,"_bt"),nt=p.addBorderNode(E,"_bb"),vt=E.node(N);E.setParent(tt,N),vt.borderTop=tt,E.setParent(nt,N),vt.borderBottom=nt,i.forEach(X,function(ft){d(E,O,C,v,x,T,ft);var bt=E.node(ft),St=bt.borderTop?bt.borderTop:ft,pt=bt.borderBottom?bt.borderBottom:ft,ct=bt.borderTop?v:2*v,zt=St!==pt?1:x-T[N]+1;E.setEdge(tt,St,{weight:ct,minlen:zt,nestingEdge:!0}),E.setEdge(pt,nt,{weight:ct,minlen:zt,nestingEdge:!0})}),E.parent(N)||E.setEdge(O,tt,{weight:0,minlen:x+T[N]})})(S,l,y,n,j,M,s)}),S.graph().nodeRankFactor=y},cleanup:function(S){var l=S.graph();S.removeNode(l.nestingRoot),delete l.nestingRoot,i.forEach(S.edges(),function(M){S.edge(M).nestingEdge&&S.removeEdge(M)})}}},function(a,A,e){var i=e(24),p=e(37);function m(S,l,M,j,y,n){var s={width:0,height:0,rank:n,borderType:l},d=y[l][n-1],E=p.addDummyNode(S,"border",s,M);y[l][n]=E,S.setParent(E,j),d&&S.setEdge(d,E,{weight:1})}a.exports=function(S){i.forEach(S.children(),function l(M){var j=S.children(M),y=S.node(M);if(j.length&&i.forEach(j,l),i.has(y,"minRank")){y.borderLeft=[],y.borderRight=[];for(var n=y.minRank,s=y.maxRank+1;n<s;++n)m(S,"borderLeft","_bl",M,y,n),m(S,"borderRight","_br",M,y,n)}})}},function(a,A,e){"use strict";var i=e(24);function p(M){i.forEach(M.nodes(),function(j){m(M.node(j))}),i.forEach(M.edges(),function(j){m(M.edge(j))})}function m(M){var j=M.width;M.width=M.height,M.height=j}function S(M){M.y=-M.y}function l(M){var j=M.x;M.x=M.y,M.y=j}a.exports={adjust:function(j){var y=j.graph().rankdir.toLowerCase();y!=="lr"&&y!=="rl"||p(j)},undo:function(j){var y=j.graph().rankdir.toLowerCase();y!=="bt"&&y!=="rl"||function(n){i.forEach(n.nodes(),function(s){S(n.node(s))}),i.forEach(n.edges(),function(s){var d=n.edge(s);i.forEach(d.points,S),i.has(d,"y")&&S(d)})}(j),y!=="lr"&&y!=="rl"||(function(n){i.forEach(n.nodes(),function(s){l(n.node(s))}),i.forEach(n.edges(),function(s){var d=n.edge(s);i.forEach(d.points,l),i.has(d,"x")&&l(d)})}(j),p(j))}}},function(a,A,e){"use strict";var i=e(24),p=e(430),m=e(431),S=e(432),l=e(436),M=e(437),j=e(46).Graph,y=e(37);function n(E,O,C){return i.map(O,function(v){return l(E,v,C)})}function s(E,O){var C=new j;i.forEach(E,function(v){var x=v.graph().root,T=S(v,x,C,O);i.forEach(T.vs,function(N,X){v.node(N).order=X}),M(v,C,T.vs)})}function d(E,O){i.forEach(O,function(C){i.forEach(C,function(v,x){E.node(v).order=x})})}a.exports=function(E){var O=y.maxRank(E),C=n(E,i.range(1,O+1),"inEdges"),v=n(E,i.range(O-1,-1,-1),"outEdges"),x=p(E);d(E,x);for(var T,N=Number.POSITIVE_INFINITY,X=0,tt=0;tt<4;++X,++tt){s(X%2?C:v,X%4>=2),x=y.buildLayerMatrix(E);var nt=m(E,x);nt<N&&(tt=0,T=i.cloneDeep(x),N=nt)}d(E,T)}},function(a,A,e){"use strict";var i=e(24);a.exports=function(p){var m={},S=i.filter(p.nodes(),function(y){return!p.children(y).length}),l=i.max(i.map(S,function(y){return p.node(y).rank})),M=i.map(i.range(l+1),function(){return[]}),j=i.sortBy(S,function(y){return p.node(y).rank});return i.forEach(j,function y(n){if(!i.has(m,n)){m[n]=!0;var s=p.node(n);M[s.rank].push(n),i.forEach(p.successors(n),y)}}),M}},function(a,A,e){"use strict";var i=e(24);function p(m,S,l){for(var M=i.zipObject(l,i.map(l,function(E,O){return O})),j=i.flatten(i.map(S,function(E){return i.sortBy(i.map(m.outEdges(E),function(O){return{pos:M[O.w],weight:m.edge(O).weight}}),"pos")}),!0),y=1;y<l.length;)y<<=1;var n=2*y-1;y-=1;var s=i.map(new Array(n),function(){return 0}),d=0;return i.forEach(j.forEach(function(E){var O=E.pos+y;s[O]+=E.weight;for(var C=0;O>0;)O%2&&(C+=s[O+1]),s[O=O-1>>1]+=E.weight;d+=E.weight*C})),d}a.exports=function(m,S){for(var l=0,M=1;M<S.length;++M)l+=p(m,S[M-1],S[M]);return l}},function(a,A,e){var i=e(24),p=e(433),m=e(434),S=e(435);a.exports=function l(M,j,y,n){var s=M.children(j),d=M.node(j),E=d?d.borderLeft:void 0,O=d?d.borderRight:void 0,C={};E&&(s=i.filter(s,function(tt){return tt!==E&&tt!==O}));var v=p(M,s);i.forEach(v,function(tt){if(M.children(tt.v).length){var nt=l(M,tt.v,y,n);C[tt.v]=nt,i.has(nt,"barycenter")&&(vt=tt,ft=nt,i.isUndefined(vt.barycenter)?(vt.barycenter=ft.barycenter,vt.weight=ft.weight):(vt.barycenter=(vt.barycenter*vt.weight+ft.barycenter*ft.weight)/(vt.weight+ft.weight),vt.weight+=ft.weight))}var vt,ft});var x=m(v,y);(function(tt,nt){i.forEach(tt,function(vt){vt.vs=i.flatten(vt.vs.map(function(ft){return nt[ft]?nt[ft].vs:ft}),!0)})})(x,C);var T=S(x,n);if(E&&(T.vs=i.flatten([E,T.vs,O],!0),M.predecessors(E).length)){var N=M.node(M.predecessors(E)[0]),X=M.node(M.predecessors(O)[0]);i.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+N.order+X.order)/(T.weight+2),T.weight+=2}return T}},function(a,A,e){var i=e(24);a.exports=function(p,m){return i.map(m,function(S){var l=p.inEdges(S);if(l.length){var M=i.reduce(l,function(j,y){var n=p.edge(y),s=p.node(y.v);return{sum:j.sum+n.weight*s.order,weight:j.weight+n.weight}},{sum:0,weight:0});return{v:S,barycenter:M.sum/M.weight,weight:M.weight}}return{v:S}})}},function(a,A,e){"use strict";var i=e(24);a.exports=function(p,m){var S={};return i.forEach(p,function(l,M){var j=S[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:M};i.isUndefined(l.barycenter)||(j.barycenter=l.barycenter,j.weight=l.weight)}),i.forEach(m.edges(),function(l){var M=S[l.v],j=S[l.w];i.isUndefined(M)||i.isUndefined(j)||(j.indegree++,M.out.push(S[l.w]))}),function(l){var M=[];function j(s){return function(d){d.merged||(i.isUndefined(d.barycenter)||i.isUndefined(s.barycenter)||d.barycenter>=s.barycenter)&&function(E,O){var C=0,v=0;E.weight&&(C+=E.barycenter*E.weight,v+=E.weight),O.weight&&(C+=O.barycenter*O.weight,v+=O.weight),E.vs=O.vs.concat(E.vs),E.barycenter=C/v,E.weight=v,E.i=Math.min(O.i,E.i),O.merged=!0}(s,d)}}function y(s){return function(d){d.in.push(s),--d.indegree==0&&l.push(d)}}for(;l.length;){var n=l.pop();M.push(n),i.forEach(n.in.reverse(),j(n)),i.forEach(n.out,y(n))}return i.map(i.filter(M,function(s){return!s.merged}),function(s){return i.pick(s,["vs","i","barycenter","weight"])})}(i.filter(S,function(l){return!l.indegree}))}},function(a,A,e){var i=e(24),p=e(37);function m(S,l,M){for(var j;l.length&&(j=i.last(l)).i<=M;)l.pop(),S.push(j.vs),M++;return M}a.exports=function(S,l){var M=p.partition(S,function(v){return i.has(v,"barycenter")}),j=M.lhs,y=i.sortBy(M.rhs,function(v){return-v.i}),n=[],s=0,d=0,E=0;j.sort((O=!!l,function(v,x){return v.barycenter<x.barycenter?-1:v.barycenter>x.barycenter?1:O?x.i-v.i:v.i-x.i})),E=m(n,y,E),i.forEach(j,function(v){E+=v.vs.length,n.push(v.vs),s+=v.barycenter*v.weight,d+=v.weight,E=m(n,y,E)});var O,C={vs:i.flatten(n,!0)};return d&&(C.barycenter=s/d,C.weight=d),C}},function(a,A,e){var i=e(24),p=e(46).Graph;a.exports=function(m,S,l){var M=function(y){for(var n;y.hasNode(n=i.uniqueId("_root")););return n}(m),j=new p({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(y){return m.node(y)});return i.forEach(m.nodes(),function(y){var n=m.node(y),s=m.parent(y);(n.rank===S||n.minRank<=S&&S<=n.maxRank)&&(j.setNode(y),j.setParent(y,s||M),i.forEach(m[l](y),function(d){var E=d.v===y?d.w:d.v,O=j.edge(E,y),C=i.isUndefined(O)?0:O.weight;j.setEdge(E,y,{weight:m.edge(d).weight+C})}),i.has(n,"minRank")&&j.setNode(y,{borderLeft:n.borderLeft[S],borderRight:n.borderRight[S]}))}),j}},function(a,A,e){var i=e(24);a.exports=function(p,m,S){var l,M={};i.forEach(S,function(j){for(var y,n,s=p.parent(j);s;){if((y=p.parent(s))?(n=M[y],M[y]=s):(n=l,l=s),n&&n!==s)return void m.setEdge(n,s);s=y}})}},function(a,A,e){"use strict";var i=e(24),p=e(37),m=e(439).positionX;a.exports=function(S){(function(l){var M=p.buildLayerMatrix(l),j=l.graph().ranksep,y=0;i.forEach(M,function(n){var s=i.max(i.map(n,function(d){return l.node(d).height}));i.forEach(n,function(d){l.node(d).y=y+s/2}),y+=s+j})})(S=p.asNonCompoundGraph(S)),i.forEach(m(S),function(l,M){S.node(M).x=l})}},function(a,A,e){"use strict";var i=e(24),p=e(46).Graph,m=e(37);function S(O,C){var v={};return i.reduce(C,function(x,T){var N=0,X=0,tt=x.length,nt=i.last(T);return i.forEach(T,function(vt,ft){var bt=function(pt,ct){if(pt.node(ct).dummy)return i.find(pt.predecessors(ct),function(zt){return pt.node(zt).dummy})}(O,vt),St=bt?O.node(bt).order:tt;(bt||vt===nt)&&(i.forEach(T.slice(X,ft+1),function(pt){i.forEach(O.predecessors(pt),function(ct){var zt=O.node(ct),Nt=zt.order;!(Nt<N||St<Nt)||zt.dummy&&O.node(pt).dummy||M(v,ct,pt)})}),X=ft+1,N=St)}),T}),v}function l(O,C){var v={};function x(T,N,X,tt,nt){var vt;i.forEach(i.range(N,X),function(ft){vt=T[ft],O.node(vt).dummy&&i.forEach(O.predecessors(vt),function(bt){var St=O.node(bt);St.dummy&&(St.order<tt||St.order>nt)&&M(v,bt,vt)})})}return i.reduce(C,function(T,N){var X,tt=-1,nt=0;return i.forEach(N,function(vt,ft){if(O.node(vt).dummy==="border"){var bt=O.predecessors(vt);bt.length&&(X=O.node(bt[0]).order,x(N,nt,ft,tt,X),nt=ft,tt=X)}x(N,nt,N.length,X,T.length)}),N}),v}function M(O,C,v){if(C>v){var x=C;C=v,v=x}var T=O[C];T||(O[C]=T={}),T[v]=!0}function j(O,C,v){if(C>v){var x=C;C=v,v=x}return i.has(O[C],v)}function y(O,C,v,x){var T={},N={},X={};return i.forEach(C,function(tt){i.forEach(tt,function(nt,vt){T[nt]=nt,N[nt]=nt,X[nt]=vt})}),i.forEach(C,function(tt){var nt=-1;i.forEach(tt,function(vt){var ft=x(vt);if(ft.length)for(var bt=((ft=i.sortBy(ft,function(zt){return X[zt]})).length-1)/2,St=Math.floor(bt),pt=Math.ceil(bt);St<=pt;++St){var ct=ft[St];N[vt]===vt&&nt<X[ct]&&!j(v,vt,ct)&&(N[ct]=vt,N[vt]=T[vt]=T[ct],nt=X[ct])}})}),{root:T,align:N}}function n(O,C,v,x,T){var N={},X=function(vt,ft,bt,St){var pt=new p,ct=vt.graph(),zt=function(Nt,wt,H){return function(ht,dt,yt){var Mt,$=ht.node(dt),lt=ht.node(yt),rt=0;if(rt+=$.width/2,i.has($,"labelpos"))switch($.labelpos.toLowerCase()){case"l":Mt=-$.width/2;break;case"r":Mt=$.width/2}if(Mt&&(rt+=H?Mt:-Mt),Mt=0,rt+=($.dummy?wt:Nt)/2,rt+=(lt.dummy?wt:Nt)/2,rt+=lt.width/2,i.has(lt,"labelpos"))switch(lt.labelpos.toLowerCase()){case"l":Mt=lt.width/2;break;case"r":Mt=-lt.width/2}return Mt&&(rt+=H?Mt:-Mt),Mt=0,rt}}(ct.nodesep,ct.edgesep,St);return i.forEach(ft,function(Nt){var wt;i.forEach(Nt,function(H){var ht=bt[H];if(pt.setNode(ht),wt){var dt=bt[wt],yt=pt.edge(dt,ht);pt.setEdge(dt,ht,Math.max(zt(vt,H,wt),yt||0))}wt=H})}),pt}(O,C,v,T),tt=T?"borderLeft":"borderRight";function nt(vt,ft){for(var bt=X.nodes(),St=bt.pop(),pt={};St;)pt[St]?vt(St):(pt[St]=!0,bt.push(St),bt=bt.concat(ft(St))),St=bt.pop()}return nt(function(vt){N[vt]=X.inEdges(vt).reduce(function(ft,bt){return Math.max(ft,N[bt.v]+X.edge(bt))},0)},X.predecessors.bind(X)),nt(function(vt){var ft=X.outEdges(vt).reduce(function(St,pt){return Math.min(St,N[pt.w]-X.edge(pt))},Number.POSITIVE_INFINITY),bt=O.node(vt);ft!==Number.POSITIVE_INFINITY&&bt.borderType!==tt&&(N[vt]=Math.max(N[vt],ft))},X.successors.bind(X)),i.forEach(x,function(vt){N[vt]=N[v[vt]]}),N}function s(O,C){return i.minBy(i.values(C),function(v){var x=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;return i.forIn(v,function(N,X){var tt=function(nt,vt){return nt.node(vt).width}(O,X)/2;x=Math.max(N+tt,x),T=Math.min(N-tt,T)}),x-T})}function d(O,C){var v=i.values(C),x=i.min(v),T=i.max(v);i.forEach(["u","d"],function(N){i.forEach(["l","r"],function(X){var tt,nt=N+X,vt=O[nt];if(vt!==C){var ft=i.values(vt);(tt=X==="l"?x-i.min(ft):T-i.max(ft))&&(O[nt]=i.mapValues(vt,function(bt){return bt+tt}))}})})}function E(O,C){return i.mapValues(O.ul,function(v,x){if(C)return O[C.toLowerCase()][x];var T=i.sortBy(i.map(O,x));return(T[1]+T[2])/2})}a.exports={positionX:function(C){var v,x=m.buildLayerMatrix(C),T=i.merge(S(C,x),l(C,x)),N={};i.forEach(["u","d"],function(tt){v=tt==="u"?x:i.values(x).reverse(),i.forEach(["l","r"],function(nt){nt==="r"&&(v=i.map(v,function(St){return i.values(St).reverse()}));var vt=(tt==="u"?C.predecessors:C.successors).bind(C),ft=y(C,v,T,vt),bt=n(C,v,ft.root,ft.align,nt==="r");nt==="r"&&(bt=i.mapValues(bt,function(St){return-St})),N[tt+nt]=bt})});var X=s(C,N);return d(N,X),E(N,C.graph().align)},findType1Conflicts:S,findType2Conflicts:l,addConflict:M,hasConflict:j,verticalAlignment:y,horizontalCompaction:n,alignCoordinates:d,findSmallestWidthAlignment:s,balance:E}},function(a,A,e){var i=e(24),p=e(37),m=e(46).Graph;a.exports={debugOrdering:function(l){var M=p.buildLayerMatrix(l),j=new m({compound:!0,multigraph:!0}).setGraph({});return i.forEach(l.nodes(),function(y){j.setNode(y,{label:y}),j.setParent(y,"layer"+l.node(y).rank)}),i.forEach(l.edges(),function(y){j.setEdge(y.v,y.w,{},y.name)}),i.forEach(M,function(y,n){var s="layer"+n;j.setNode(s,{rank:"same"}),i.reduce(y,function(d,E){return j.setEdge(d,E,{style:"invis"}),E})}),j}}},function(a,A){a.exports="0.8.5"},function(a,A,e){(function(i){function p(S){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var m=function(S){"use strict";var l=Object.prototype,M=l.hasOwnProperty,j=typeof Symbol=="function"?Symbol:{},y=j.iterator||"@@iterator",n=j.asyncIterator||"@@asyncIterator",s=j.toStringTag||"@@toStringTag";function d(wt,H,ht){return Object.defineProperty(wt,H,{value:ht,enumerable:!0,configurable:!0,writable:!0}),wt[H]}try{d({},"")}catch(wt){d=function(ht,dt,yt){return ht[dt]=yt}}function E(wt,H,ht,dt){var yt=H&&H.prototype instanceof v?H:v,Mt=Object.create(yt.prototype),$=new ct(dt||[]);return Mt._invoke=function(lt,rt,z){var P="suspendedStart";return function(Y,k){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(Y==="throw")throw k;return Nt()}for(z.method=Y,z.arg=k;;){var h=z.delegate;if(h){var g=bt(h,z);if(g){if(g===C)continue;return g}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(P==="suspendedStart")throw P="completed",z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);P="executing";var B=O(lt,rt,z);if(B.type==="normal"){if(P=z.done?"completed":"suspendedYield",B.arg===C)continue;return{value:B.arg,done:z.done}}B.type==="throw"&&(P="completed",z.method="throw",z.arg=B.arg)}}}(wt,ht,$),Mt}function O(wt,H,ht){try{return{type:"normal",arg:wt.call(H,ht)}}catch(dt){return{type:"throw",arg:dt}}}S.wrap=E;var C={};function v(){}function x(){}function T(){}var N={};N[y]=function(){return this};var X=Object.getPrototypeOf,tt=X&&X(X(zt([])));tt&&tt!==l&&M.call(tt,y)&&(N=tt);var nt=T.prototype=v.prototype=Object.create(N);function vt(wt){["next","throw","return"].forEach(function(H){d(wt,H,function(ht){return this._invoke(H,ht)})})}function ft(wt,H){var ht;this._invoke=function(dt,yt){function Mt(){return new H(function($,lt){(function rt(z,P,Y,k){var h=O(wt[z],wt,P);if(h.type!=="throw"){var g=h.arg,B=g.value;return B&&p(B)==="object"&&M.call(B,"__await")?H.resolve(B.__await).then(function(V){rt("next",V,Y,k)},function(V){rt("throw",V,Y,k)}):H.resolve(B).then(function(V){g.value=V,Y(g)},function(V){return rt("throw",V,Y,k)})}k(h.arg)})(dt,yt,$,lt)})}return ht=ht?ht.then(Mt,Mt):Mt()}}function bt(wt,H){var ht=wt.iterator[H.method];if(ht===void 0){if(H.delegate=null,H.method==="throw"){if(wt.iterator.return&&(H.method="return",H.arg=void 0,bt(wt,H),H.method==="throw"))return C;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var dt=O(ht,wt.iterator,H.arg);if(dt.type==="throw")return H.method="throw",H.arg=dt.arg,H.delegate=null,C;var yt=dt.arg;return yt?yt.done?(H[wt.resultName]=yt.value,H.next=wt.nextLoc,H.method!=="return"&&(H.method="next",H.arg=void 0),H.delegate=null,C):yt:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,C)}function St(wt){var H={tryLoc:wt[0]};1 in wt&&(H.catchLoc=wt[1]),2 in wt&&(H.finallyLoc=wt[2],H.afterLoc=wt[3]),this.tryEntries.push(H)}function pt(wt){var H=wt.completion||{};H.type="normal",delete H.arg,wt.completion=H}function ct(wt){this.tryEntries=[{tryLoc:"root"}],wt.forEach(St,this),this.reset(!0)}function zt(wt){if(wt){var H=wt[y];if(H)return H.call(wt);if(typeof wt.next=="function")return wt;if(!isNaN(wt.length)){var ht=-1,dt=function yt(){for(;++ht<wt.length;)if(M.call(wt,ht))return yt.value=wt[ht],yt.done=!1,yt;return yt.value=void 0,yt.done=!0,yt};return dt.next=dt}}return{next:Nt}}function Nt(){return{value:void 0,done:!0}}return x.prototype=nt.constructor=T,T.constructor=x,x.displayName=d(T,s,"GeneratorFunction"),S.isGeneratorFunction=function(wt){var H=typeof wt=="function"&&wt.constructor;return!!H&&(H===x||(H.displayName||H.name)==="GeneratorFunction")},S.mark=function(wt){return Object.setPrototypeOf?Object.setPrototypeOf(wt,T):(wt.__proto__=T,d(wt,s,"GeneratorFunction")),wt.prototype=Object.create(nt),wt},S.awrap=function(wt){return{__await:wt}},vt(ft.prototype),ft.prototype[n]=function(){return this},S.AsyncIterator=ft,S.async=function(wt,H,ht,dt,yt){yt===void 0&&(yt=Promise);var Mt=new ft(E(wt,H,ht,dt),yt);return S.isGeneratorFunction(H)?Mt:Mt.next().then(function($){return $.done?$.value:Mt.next()})},vt(nt),d(nt,s,"Generator"),nt[y]=function(){return this},nt.toString=function(){return"[object Generator]"},S.keys=function(wt){var H=[];for(var ht in wt)H.push(ht);return H.reverse(),function dt(){for(;H.length;){var yt=H.pop();if(yt in wt)return dt.value=yt,dt.done=!1,dt}return dt.done=!0,dt}},S.values=zt,ct.prototype={constructor:ct,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(pt),!H)for(var ht in this)ht.charAt(0)==="t"&&M.call(this,ht)&&!isNaN(+ht.slice(1))&&(this[ht]=void 0)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var ht=this;function dt(z,P){return $.type="throw",$.arg=H,ht.next=z,P&&(ht.method="next",ht.arg=void 0),!!P}for(var yt=this.tryEntries.length-1;yt>=0;--yt){var Mt=this.tryEntries[yt],$=Mt.completion;if(Mt.tryLoc==="root")return dt("end");if(Mt.tryLoc<=this.prev){var lt=M.call(Mt,"catchLoc"),rt=M.call(Mt,"finallyLoc");if(lt&&rt){if(this.prev<Mt.catchLoc)return dt(Mt.catchLoc,!0);if(this.prev<Mt.finallyLoc)return dt(Mt.finallyLoc)}else if(lt){if(this.prev<Mt.catchLoc)return dt(Mt.catchLoc,!0)}else{if(!rt)throw new Error("try statement without catch or finally");if(this.prev<Mt.finallyLoc)return dt(Mt.finallyLoc)}}}},abrupt:function(H,ht){for(var dt=this.tryEntries.length-1;dt>=0;--dt){var yt=this.tryEntries[dt];if(yt.tryLoc<=this.prev&&M.call(yt,"finallyLoc")&&this.prev<yt.finallyLoc){var Mt=yt;break}}Mt&&(H==="break"||H==="continue")&&Mt.tryLoc<=ht&&ht<=Mt.finallyLoc&&(Mt=null);var $=Mt?Mt.completion:{};return $.type=H,$.arg=ht,Mt?(this.method="next",this.next=Mt.finallyLoc,C):this.complete($)},complete:function(H,ht){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&ht&&(this.next=ht),C},finish:function(H){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var dt=this.tryEntries[ht];if(dt.finallyLoc===H)return this.complete(dt.completion,dt.afterLoc),pt(dt),C}},catch:function(H){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var dt=this.tryEntries[ht];if(dt.tryLoc===H){var yt=dt.completion;if(yt.type==="throw"){var Mt=yt.arg;pt(dt)}return Mt}}throw new Error("illegal catch attempt")},delegateYield:function(H,ht,dt){return this.delegate={iterator:zt(H),resultName:ht,nextLoc:dt},this.method==="next"&&(this.arg=void 0),C}},S}(p(i)==="object"?i.exports:{});try{regeneratorRuntime=m}catch(S){Function("r","regeneratorRuntime = r")(m)}}).call(this,e(86)(a))},function(a,A){a.exports=function(e){if(Array.isArray(e))return e}},function(a,A){a.exports=function(e,i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e)){var p=[],m=!0,S=!1,l=void 0;try{for(var M,j=e[Symbol.iterator]();!(m=(M=j.next()).done)&&(p.push(M.value),!i||p.length!==i);m=!0);}catch(y){S=!0,l=y}finally{try{m||j.return==null||j.return()}finally{if(S)throw l}}return p}}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A,e){"use strict";function i(T){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(T)}var p=this&&this.__awaiter||function(T,N,X,tt){return new(X||(X=Promise))(function(nt,vt){function ft(pt){try{St(tt.next(pt))}catch(ct){vt(ct)}}function bt(pt){try{St(tt.throw(pt))}catch(ct){vt(ct)}}function St(pt){var ct;pt.done?nt(pt.value):(ct=pt.value,ct instanceof X?ct:new X(function(zt){zt(ct)})).then(ft,bt)}St((tt=tt.apply(T,N||[])).next())})},m=this&&this.__generator||function(T,N){var X,tt,nt,vt,ft={label:0,sent:function(){if(1&nt[0])throw nt[1];return nt[1]},trys:[],ops:[]};return vt={next:bt(0),throw:bt(1),return:bt(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function bt(St){return function(pt){return function(ct){if(X)throw new TypeError("Generator is already executing.");for(;ft;)try{if(X=1,tt&&(nt=2&ct[0]?tt.return:ct[0]?tt.throw||((nt=tt.return)&&nt.call(tt),0):tt.next)&&!(nt=nt.call(tt,ct[1])).done)return nt;switch(tt=0,nt&&(ct=[2&ct[0],nt.value]),ct[0]){case 0:case 1:nt=ct;break;case 4:return ft.label++,{value:ct[1],done:!1};case 5:ft.label++,tt=ct[1],ct=[0];continue;case 7:ct=ft.ops.pop(),ft.trys.pop();continue;default:if(nt=ft.trys,!((nt=nt.length>0&&nt[nt.length-1])||ct[0]!==6&&ct[0]!==2)){ft=0;continue}if(ct[0]===3&&(!nt||ct[1]>nt[0]&&ct[1]<nt[3])){ft.label=ct[1];break}if(ct[0]===6&&ft.label<nt[1]){ft.label=nt[1],nt=ct;break}if(nt&&ft.label<nt[2]){ft.label=nt[2],ft.ops.push(ct);break}nt[2]&&ft.ops.pop(),ft.trys.pop();continue}ct=N.call(T,ft)}catch(zt){ct=[6,zt],tt=0}finally{X=nt=0}if(5&ct[0])throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}([St,pt])}}};Object.defineProperty(A,"__esModule",{value:!0}),A.Container=void 0;var S=e(447),l=e(41),M=e(55),j=e(32),y=e(220),n=e(448),s=e(455),d=e(457),E=e(67),O=e(88),C=e(460),v=e(461),x=function(){function T(N){var X=N||{};if(i(X)!=="object")throw new Error(""+l.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(X.defaultScope===void 0)X.defaultScope=M.BindingScopeEnum.Transient;else if(X.defaultScope!==M.BindingScopeEnum.Singleton&&X.defaultScope!==M.BindingScopeEnum.Transient&&X.defaultScope!==M.BindingScopeEnum.Request)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(X.autoBindInjectable===void 0)X.autoBindInjectable=!1;else if(typeof X.autoBindInjectable!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(X.skipBaseClassChecks===void 0)X.skipBaseClassChecks=!1;else if(typeof X.skipBaseClassChecks!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:X.autoBindInjectable,defaultScope:X.defaultScope,skipBaseClassChecks:X.skipBaseClassChecks},this.id=E.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return T.merge=function(N,X){var tt=new T,nt=n.getBindingDictionary(tt),vt=n.getBindingDictionary(N),ft=n.getBindingDictionary(X);function bt(St,pt){St.traverse(function(ct,zt){zt.forEach(function(Nt){pt.add(Nt.serviceIdentifier,Nt.clone())})})}return bt(vt,nt),bt(ft,nt),tt},T.prototype.load=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];for(var tt=this._getContainerModuleHelpersFactory(),nt=0,vt=N;nt<vt.length;nt++){var ft=vt[nt],bt=tt(ft.id);ft.registry(bt.bindFunction,bt.unbindFunction,bt.isboundFunction,bt.rebindFunction)}},T.prototype.loadAsync=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];return p(this,void 0,void 0,function(){var tt,nt,vt,ft,bt;return m(this,function(St){switch(St.label){case 0:tt=this._getContainerModuleHelpersFactory(),nt=0,vt=N,St.label=1;case 1:return nt<vt.length?(ft=vt[nt],bt=tt(ft.id),[4,ft.registry(bt.bindFunction,bt.unbindFunction,bt.isboundFunction,bt.rebindFunction)]):[3,4];case 2:St.sent(),St.label=3;case 3:return nt++,[3,1];case 4:return[2]}})})},T.prototype.unload=function(){for(var N=this,X=[],tt=0;tt<arguments.length;tt++)X[tt]=arguments[tt];var nt=function(ft){return function(bt){return bt.moduleId===ft}};X.forEach(function(vt){var ft=nt(vt.id);N._bindingDictionary.removeByCondition(ft)})},T.prototype.bind=function(N){var X=this.options.defaultScope||M.BindingScopeEnum.Transient,tt=new S.Binding(N,X);return this._bindingDictionary.add(N,tt),new d.BindingToSyntax(tt)},T.prototype.rebind=function(N){return this.unbind(N),this.bind(N)},T.prototype.unbind=function(N){try{this._bindingDictionary.remove(N)}catch(X){throw new Error(l.CANNOT_UNBIND+" "+O.getServiceIdentifierAsString(N))}},T.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},T.prototype.isBound=function(N){var X=this._bindingDictionary.hasKey(N);return!X&&this.parent&&(X=this.parent.isBound(N)),X},T.prototype.isBoundNamed=function(N,X){return this.isBoundTagged(N,j.NAMED_TAG,X)},T.prototype.isBoundTagged=function(N,X,tt){var nt=!1;if(this._bindingDictionary.hasKey(N)){var vt=this._bindingDictionary.get(N),ft=n.createMockRequest(this,N,X,tt);nt=vt.some(function(bt){return bt.constraint(ft)})}return!nt&&this.parent&&(nt=this.parent.isBoundTagged(N,X,tt)),nt},T.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},T.prototype.restore=function(){var N=this._snapshots.pop();if(N===void 0)throw new Error(l.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=N.bindings,this._middleware=N.middleware},T.prototype.createChild=function(N){var X=new T(N||this.options);return X.parent=this,X},T.prototype.applyMiddleware=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];var tt=this._middleware?this._middleware:this._planAndResolve();this._middleware=N.reduce(function(nt,vt){return vt(nt)},tt)},T.prototype.applyCustomMetadataReader=function(N){this._metadataReader=N},T.prototype.get=function(N){return this._get(!1,!1,M.TargetTypeEnum.Variable,N)},T.prototype.getTagged=function(N,X,tt){return this._get(!1,!1,M.TargetTypeEnum.Variable,N,X,tt)},T.prototype.getNamed=function(N,X){return this.getTagged(N,j.NAMED_TAG,X)},T.prototype.getAll=function(N){return this._get(!0,!0,M.TargetTypeEnum.Variable,N)},T.prototype.getAllTagged=function(N,X,tt){return this._get(!1,!0,M.TargetTypeEnum.Variable,N,X,tt)},T.prototype.getAllNamed=function(N,X){return this.getAllTagged(N,j.NAMED_TAG,X)},T.prototype.resolve=function(N){var X=this.createChild();return X.bind(N).toSelf(),X.get(N)},T.prototype._getContainerModuleHelpersFactory=function(){var N=this,X=function(vt,ft){vt._binding.moduleId=ft},tt=function(vt){return function(ft){var bt=N.rebind.bind(N)(ft);return X(bt,vt),bt}};return function(nt){return{bindFunction:(vt=nt,function(ft){var bt=N.bind.bind(N)(ft);return X(bt,vt),bt}),isboundFunction:function(bt){return N.isBound.bind(N)(bt)},rebindFunction:tt(nt),unbindFunction:function(bt){N.unbind.bind(N)(bt)}};var vt}},T.prototype._get=function(N,X,tt,nt,vt,ft){var bt=null,St={avoidConstraints:N,contextInterceptor:function(ct){return ct},isMultiInject:X,key:vt,serviceIdentifier:nt,targetType:tt,value:ft};if(this._middleware){if((bt=this._middleware(St))==null)throw new Error(l.INVALID_MIDDLEWARE_RETURN)}else bt=this._planAndResolve()(St);return bt},T.prototype._planAndResolve=function(){var N=this;return function(X){var tt=n.plan(N._metadataReader,N,X.isMultiInject,X.targetType,X.serviceIdentifier,X.key,X.value,X.avoidConstraints);return tt=X.contextInterceptor(tt),s.resolve(tt)}},T}();A.Container=x},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Binding=void 0;var i=e(55),p=e(67),m=function(){function S(l,M){this.id=p.id(),this.activated=!1,this.serviceIdentifier=l,this.scope=M,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(j){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return S.prototype.clone=function(){var l=new S(this.serviceIdentifier,this.scope);return l.activated=!1,l.implementationType=this.implementationType,l.dynamicValue=this.dynamicValue,l.scope=this.scope,l.type=this.type,l.factory=this.factory,l.provider=this.provider,l.constraint=this.constraint,l.onActivation=this.onActivation,l.cache=this.cache,l},S}();A.Binding=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getBindingDictionary=A.createMockRequest=A.plan=void 0;var i=e(449),p=e(41),m=e(55),S=e(32),l=e(221),M=e(88),j=e(450),y=e(49),n=e(451),s=e(452),d=e(454),E=e(223);function O(x){return x._bindingDictionary}function C(x,T,N,X,tt){var nt=v(N.container,tt.serviceIdentifier),vt=[];return nt.length===i.BindingCount.NoBindingsAvailable&&N.container.options.autoBindInjectable&&typeof tt.serviceIdentifier=="function"&&x.getConstructorMetadata(tt.serviceIdentifier).compilerGeneratedMetadata&&(N.container.bind(tt.serviceIdentifier).toSelf(),nt=v(N.container,tt.serviceIdentifier)),vt=T?nt:nt.filter(function(ft){var bt=new d.Request(ft.serviceIdentifier,N,X,ft,tt);return ft.constraint(bt)}),function(ft,bt,St,pt){switch(bt.length){case i.BindingCount.NoBindingsAvailable:if(St.isOptional())return bt;var ct=M.getServiceIdentifierAsString(ft),zt=p.NOT_REGISTERED;throw zt+=M.listMetadataForTarget(ct,St),zt+=M.listRegisteredBindingsForServiceIdentifier(pt,ct,v),new Error(zt);case i.BindingCount.OnlyOneBindingAvailable:if(!St.isArray())return bt;case i.BindingCount.MultipleBindingsAvailable:default:if(St.isArray())return bt;throw ct=M.getServiceIdentifierAsString(ft),zt=p.AMBIGUOUS_MATCH+" "+ct,zt+=M.listRegisteredBindingsForServiceIdentifier(pt,ct,v),new Error(zt)}}(tt.serviceIdentifier,vt,tt,N.container),vt}function v(x,T){var N=[],X=O(x);return X.hasKey(T)?N=X.get(T):x.parent!==null&&(N=v(x.parent,T)),N}A.getBindingDictionary=O,A.plan=function(x,T,N,X,tt,nt,vt,ft){ft===void 0&&(ft=!1);var bt=new j.Context(T),St=function(pt,ct,zt,Nt,wt,H){var ht=pt?S.MULTI_INJECT_TAG:S.INJECT_TAG,dt=new y.Metadata(ht,zt),yt=new E.Target(ct,Nt,zt,dt);if(wt!==void 0){var Mt=new y.Metadata(wt,H);yt.metadata.push(Mt)}return yt}(N,X,tt,"",nt,vt);try{return function pt(ct,zt,Nt,wt,H,ht){var dt,yt;if(H===null){dt=C(ct,zt,wt,null,ht),yt=new d.Request(Nt,wt,null,dt,ht);var Mt=new n.Plan(wt,yt);wt.addPlan(Mt)}else dt=C(ct,zt,wt,H,ht),yt=H.addChildRequest(ht.serviceIdentifier,dt,ht);dt.forEach(function($){var lt=null;if(ht.isArray())lt=yt.addChildRequest($.serviceIdentifier,$,ht);else{if($.cache)return;lt=yt}if($.type===m.BindingTypeEnum.Instance&&$.implementationType!==null){var rt=s.getDependencies(ct,$.implementationType);if(!wt.container.options.skipBaseClassChecks){var z=s.getBaseClassDependencyCount(ct,$.implementationType);if(rt.length<z){var P=p.ARGUMENTS_LENGTH_MISMATCH(s.getFunctionName($.implementationType));throw new Error(P)}}rt.forEach(function(Y){pt(ct,!1,Y.serviceIdentifier,wt,lt,Y)})}})}(x,ft,tt,bt,null,St),bt}catch(pt){throw l.isStackOverflowExeption(pt)&&bt.plan&&M.circularDependencyToException(bt.plan.rootRequest),pt}},A.createMockRequest=function(x,T,N,X){var tt=new E.Target(m.TargetTypeEnum.Variable,"",T,new y.Metadata(N,X)),nt=new j.Context(x);return new d.Request(T,nt,null,[],tt)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingCount=void 0,A.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Context=void 0;var i=e(67),p=function(){function m(S){this.id=i.id(),this.container=S}return m.prototype.addPlan=function(S){this.plan=S},m.prototype.setCurrentRequest=function(S){this.currentRequest=S},m}();A.Context=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Plan=void 0;var i=function(m,S){this.parentContext=m,this.rootRequest=S};A.Plan=i},function(a,A,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var d=0,E=0,O=arguments.length;E<O;E++)d+=arguments[E].length;var C=Array(d),v=0;for(E=0;E<O;E++)for(var x=arguments[E],T=0,N=x.length;T<N;T++,v++)C[v]=x[T];return C};Object.defineProperty(A,"__esModule",{value:!0}),A.getFunctionName=A.getBaseClassDependencyCount=A.getDependencies=void 0;var p=e(222),m=e(41),S=e(55),l=e(32),M=e(88);Object.defineProperty(A,"getFunctionName",{enumerable:!0,get:function(){return M.getFunctionName}});var j=e(223);function y(d,E,O,C){var v=d.getConstructorMetadata(O),x=v.compilerGeneratedMetadata;if(x===void 0){var T=m.MISSING_INJECTABLE_ANNOTATION+" "+E+".";throw new Error(T)}var N=v.userGeneratedMetadata,X=Object.keys(N),tt=function(vt,ft,bt,St,pt){for(var ct=[],zt=0;zt<pt;zt++){var Nt=n(zt,vt,ft,bt,St);Nt!==null&&ct.push(Nt)}return ct}(C,E,x,N,O.length===0&&X.length>0?X.length:O.length),nt=function vt(ft,bt){for(var St=ft.getPropertiesMetadata(bt),pt=[],ct=Object.keys(St),zt=0,Nt=ct;zt<Nt.length;zt++){var wt=Nt[zt],H=St[wt],ht=s(St[wt]),dt=ht.targetName||wt,yt=ht.inject||ht.multiInject,Mt=new j.Target(S.TargetTypeEnum.ClassProperty,dt,yt);Mt.metadata=H,pt.push(Mt)}var $=Object.getPrototypeOf(bt.prototype).constructor;if($!==Object){var lt=vt(ft,$);pt=i(pt,lt)}return pt}(d,O);return i(tt,nt)}function n(d,E,O,C,v){var x=v[d.toString()]||[],T=s(x),N=T.unmanaged!==!0,X=C[d],tt=T.inject||T.multiInject;if((X=tt||X)instanceof p.LazyServiceIdentifer&&(X=X.unwrap()),N){if(!E&&(X===Object||X===Function||X===void 0)){var nt=m.MISSING_INJECT_ANNOTATION+" argument "+d+" in class "+O+".";throw new Error(nt)}var vt=new j.Target(S.TargetTypeEnum.ConstructorArgument,T.targetName,X);return vt.metadata=x,vt}return null}function s(d){var E={};return d.forEach(function(O){E[O.key.toString()]=O.value}),{inject:E[l.INJECT_TAG],multiInject:E[l.MULTI_INJECT_TAG],targetName:E[l.NAME_TAG],unmanaged:E[l.UNMANAGED_TAG]}}A.getDependencies=function(d,E){return y(d,M.getFunctionName(E),E,!1)},A.getBaseClassDependencyCount=function d(E,O){var C=Object.getPrototypeOf(O.prototype).constructor;if(C!==Object){var v=y(E,M.getFunctionName(C),C,!0),x=v.map(function(X){return X.metadata.filter(function(tt){return tt.key===l.UNMANAGED_TAG})}),T=[].concat.apply([],x).length,N=v.length-T;return N>0?N:d(E,C)}return 0}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.QueryableString=void 0;var i=function(){function p(m){this.str=m}return p.prototype.startsWith=function(m){return this.str.indexOf(m)===0},p.prototype.endsWith=function(m){var S,l=m.split("").reverse().join("");return S=this.str.split("").reverse().join(""),this.startsWith.call({str:S},l)},p.prototype.contains=function(m){return this.str.indexOf(m)!==-1},p.prototype.equals=function(m){return this.str===m},p.prototype.value=function(){return this.str},p}();A.QueryableString=i},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Request=void 0;var i=e(67),p=function(){function m(S,l,M,j,y){this.id=i.id(),this.serviceIdentifier=S,this.parentContext=l,this.parentRequest=M,this.target=y,this.childRequests=[],this.bindings=Array.isArray(j)?j:[j],this.requestScope=M===null?new Map:null}return m.prototype.addChildRequest=function(S,l,M){var j=new m(S,this.parentContext,this,l,M);return this.childRequests.push(j),j},m}();A.Request=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.resolve=void 0;var i=e(41),p=e(55),m=e(221),S=e(88),l=e(456),M=function(y,n,s){try{return s()}catch(d){throw m.isStackOverflowExeption(d)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(y,n.toString())):d}};A.resolve=function(j){return function y(n){return function(s){s.parentContext.setCurrentRequest(s);var d=s.bindings,E=s.childRequests,O=s.target&&s.target.isArray(),C=!(s.parentRequest&&s.parentRequest.target&&s.target&&s.parentRequest.target.matchesArray(s.target.serviceIdentifier));if(O&&C)return E.map(function(tt){return y(n)(tt)});var v=null;if(!s.target.isOptional()||d.length!==0){var x=d[0],T=x.scope===p.BindingScopeEnum.Singleton,N=x.scope===p.BindingScopeEnum.Request;if(T&&x.activated)return x.cache;if(N&&n!==null&&n.has(x.id))return n.get(x.id);if(x.type===p.BindingTypeEnum.ConstantValue)v=x.cache;else if(x.type===p.BindingTypeEnum.Function)v=x.cache;else if(x.type===p.BindingTypeEnum.Constructor)v=x.implementationType;else if(x.type===p.BindingTypeEnum.DynamicValue&&x.dynamicValue!==null)v=M("toDynamicValue",x.serviceIdentifier,function(){return x.dynamicValue(s.parentContext)});else if(x.type===p.BindingTypeEnum.Factory&&x.factory!==null)v=M("toFactory",x.serviceIdentifier,function(){return x.factory(s.parentContext)});else if(x.type===p.BindingTypeEnum.Provider&&x.provider!==null)v=M("toProvider",x.serviceIdentifier,function(){return x.provider(s.parentContext)});else{if(x.type!==p.BindingTypeEnum.Instance||x.implementationType===null){var X=S.getServiceIdentifierAsString(s.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+X)}v=l.resolveInstance(x.implementationType,E,y(n))}return typeof x.onActivation=="function"&&(v=x.onActivation(s.parentContext,v)),T&&(x.cache=v,x.activated=!0),N&&n!==null&&!n.has(x.id)&&n.set(x.id,v),v}}}(j.plan.rootRequest.requestScope)(j.plan.rootRequest)}},function(a,A,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var l=0,M=0,j=arguments.length;M<j;M++)l+=arguments[M].length;var y=Array(l),n=0;for(M=0;M<j;M++)for(var s=arguments[M],d=0,E=s.length;d<E;d++,n++)y[n]=s[d];return y};Object.defineProperty(A,"__esModule",{value:!0}),A.resolveInstance=void 0;var p=e(41),m=e(55),S=e(32);A.resolveInstance=function(l,M,j){var y,n,s=null;if(M.length>0){var d=M.filter(function(E){return E.target!==null&&E.target.type===m.TargetTypeEnum.ConstructorArgument}).map(j);n=d,s=function(E,O,C){var v=O.filter(function(T){return T.target!==null&&T.target.type===m.TargetTypeEnum.ClassProperty}),x=v.map(C);return v.forEach(function(T,N){var X;X=T.target.name.value();var tt=x[N];E[X]=tt}),E}(s=new((y=l).bind.apply(y,i([void 0],n))),M,j)}else s=new l;return function(E,O){if(Reflect.hasMetadata(S.POST_CONSTRUCT,E)){var C=Reflect.getMetadata(S.POST_CONSTRUCT,E);try{O[C.value]()}catch(v){throw new Error(p.POST_CONSTRUCT_ERROR(E.name,v.message))}}}(l,s),s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingToSyntax=void 0;var i=e(41),p=e(55),m=e(458),S=e(224),l=function(){function M(j){this._binding=j}return M.prototype.to=function(j){return this._binding.type=p.BindingTypeEnum.Instance,this._binding.implementationType=j,new m.BindingInWhenOnSyntax(this._binding)},M.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+i.INVALID_TO_SELF_VALUE);var j=this._binding.serviceIdentifier;return this.to(j)},M.prototype.toConstantValue=function(j){return this._binding.type=p.BindingTypeEnum.ConstantValue,this._binding.cache=j,this._binding.dynamicValue=null,this._binding.implementationType=null,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toDynamicValue=function(j){return this._binding.type=p.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=j,this._binding.implementationType=null,new m.BindingInWhenOnSyntax(this._binding)},M.prototype.toConstructor=function(j){return this._binding.type=p.BindingTypeEnum.Constructor,this._binding.implementationType=j,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=j,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toFunction=function(j){if(typeof j!="function")throw new Error(i.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(j);return this._binding.type=p.BindingTypeEnum.Function,y},M.prototype.toAutoFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=function(y){return function(){return y.container.get(j)}},new S.BindingWhenOnSyntax(this._binding)},M.prototype.toProvider=function(j){return this._binding.type=p.BindingTypeEnum.Provider,this._binding.provider=j,new S.BindingWhenOnSyntax(this._binding)},M.prototype.toService=function(j){this.toDynamicValue(function(y){return y.container.get(j)})},M}();A.BindingToSyntax=l},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInWhenOnSyntax=void 0;var i=e(459),p=e(141),m=e(142),S=function(){function l(M){this._binding=M,this._bindingWhenSyntax=new m.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(M)}return l.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},l.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},l.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},l.prototype.when=function(M){return this._bindingWhenSyntax.when(M)},l.prototype.whenTargetNamed=function(M){return this._bindingWhenSyntax.whenTargetNamed(M)},l.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},l.prototype.whenTargetTagged=function(M,j){return this._bindingWhenSyntax.whenTargetTagged(M,j)},l.prototype.whenInjectedInto=function(M){return this._bindingWhenSyntax.whenInjectedInto(M)},l.prototype.whenParentNamed=function(M){return this._bindingWhenSyntax.whenParentNamed(M)},l.prototype.whenParentTagged=function(M,j){return this._bindingWhenSyntax.whenParentTagged(M,j)},l.prototype.whenAnyAncestorIs=function(M){return this._bindingWhenSyntax.whenAnyAncestorIs(M)},l.prototype.whenNoAncestorIs=function(M){return this._bindingWhenSyntax.whenNoAncestorIs(M)},l.prototype.whenAnyAncestorNamed=function(M){return this._bindingWhenSyntax.whenAnyAncestorNamed(M)},l.prototype.whenAnyAncestorTagged=function(M,j){return this._bindingWhenSyntax.whenAnyAncestorTagged(M,j)},l.prototype.whenNoAncestorNamed=function(M){return this._bindingWhenSyntax.whenNoAncestorNamed(M)},l.prototype.whenNoAncestorTagged=function(M,j){return this._bindingWhenSyntax.whenNoAncestorTagged(M,j)},l.prototype.whenAnyAncestorMatches=function(M){return this._bindingWhenSyntax.whenAnyAncestorMatches(M)},l.prototype.whenNoAncestorMatches=function(M){return this._bindingWhenSyntax.whenNoAncestorMatches(M)},l.prototype.onActivation=function(M){return this._bindingOnSyntax.onActivation(M)},l}();A.BindingInWhenOnSyntax=S},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInSyntax=void 0;var i=e(55),p=e(224),m=function(){function S(l){this._binding=l}return S.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new p.BindingWhenOnSyntax(this._binding)},S.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new p.BindingWhenOnSyntax(this._binding)},S.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new p.BindingWhenOnSyntax(this._binding)},S}();A.BindingInSyntax=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ContainerSnapshot=void 0;var i=function(){function p(){}return p.of=function(m,S){var l=new p;return l.bindings=m,l.middleware=S,l},p}();A.ContainerSnapshot=i},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Lookup=void 0;var i=e(41),p=function(){function m(){this._map=new Map}return m.prototype.getMap=function(){return this._map},m.prototype.add=function(S,l){if(S==null)throw new Error(i.NULL_ARGUMENT);if(l==null)throw new Error(i.NULL_ARGUMENT);var M=this._map.get(S);M!==void 0?(M.push(l),this._map.set(S,M)):this._map.set(S,[l])},m.prototype.get=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);var l=this._map.get(S);if(l!==void 0)return l;throw new Error(i.KEY_NOT_FOUND)},m.prototype.remove=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(S))throw new Error(i.KEY_NOT_FOUND)},m.prototype.removeByCondition=function(S){var l=this;this._map.forEach(function(M,j){var y=M.filter(function(n){return!S(n)});y.length>0?l._map.set(j,y):l._map.delete(j)})},m.prototype.hasKey=function(S){if(S==null)throw new Error(i.NULL_ARGUMENT);return this._map.has(S)},m.prototype.clone=function(){var S=new m;return this._map.forEach(function(l,M){l.forEach(function(j){return S.add(M,j.clone())})}),S},m.prototype.traverse=function(S){this._map.forEach(function(l,M){S(M,l)})},m}();A.Lookup=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.AsyncContainerModule=A.ContainerModule=void 0;var i=e(67),p=function(l){this.id=i.id(),this.registry=l};A.ContainerModule=p;var m=function(l){this.id=i.id(),this.registry=l};A.AsyncContainerModule=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.injectable=void 0;var i=e(41),p=e(32);A.injectable=function(){return function(m){if(Reflect.hasOwnMetadata(p.PARAM_TYPES,m))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var S=Reflect.getMetadata(p.DESIGN_PARAM_TYPES,m)||[];return Reflect.defineMetadata(p.PARAM_TYPES,S,m),m}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagged=void 0;var i=e(49),p=e(59);A.tagged=function(m,S){return function(l,M,j){var y=new i.Metadata(m,S);typeof j=="number"?p.tagParameter(l,M,j,y):p.tagProperty(l,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.named=void 0;var i=e(32),p=e(49),m=e(59);A.named=function(S){return function(l,M,j){var y=new p.Metadata(i.NAMED_TAG,S);typeof j=="number"?m.tagParameter(l,M,j,y):m.tagProperty(l,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.optional=void 0;var i=e(32),p=e(49),m=e(59);A.optional=function(){return function(S,l,M){var j=new p.Metadata(i.OPTIONAL_TAG,!0);typeof M=="number"?m.tagParameter(S,l,M,j):m.tagProperty(S,l,j)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.unmanaged=void 0;var i=e(32),p=e(49),m=e(59);A.unmanaged=function(){return function(S,l,M){var j=new p.Metadata(i.UNMANAGED_TAG,!0);m.tagParameter(S,l,M,j)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiInject=void 0;var i=e(32),p=e(49),m=e(59);A.multiInject=function(S){return function(l,M,j){var y=new p.Metadata(i.MULTI_INJECT_TAG,S);typeof j=="number"?m.tagParameter(l,M,j,y):m.tagProperty(l,M,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.targetName=void 0;var i=e(32),p=e(49),m=e(59);A.targetName=function(S){return function(l,M,j){var y=new p.Metadata(i.NAME_TAG,S);m.tagParameter(l,M,j,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.postConstruct=void 0;var i=e(41),p=e(32),m=e(49);A.postConstruct=function(){return function(S,l,M){var j=new m.Metadata(p.POST_CONSTRUCT,l);if(Reflect.hasOwnMetadata(p.POST_CONSTRUCT,S.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(p.POST_CONSTRUCT,j,S.constructor)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiBindToService=void 0,A.multiBindToService=function(i){return function(p){return function(){for(var m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];return m.forEach(function(l){return i.bind(l).toService(p)})}}}},function(a,A){function e(i,p){return a.exports=e=Object.setPrototypeOf||function(m,S){return m.__proto__=S,m},e(i,p)}a.exports=e},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var i=Symbol.for("INJECTION");function p(m,S,l,M){Object.defineProperty(m,S,{configurable:!0,enumerable:!0,get:function(){return M&&!Reflect.hasMetadata(i,this,S)&&Reflect.defineMetadata(i,l(),this,S),Reflect.hasMetadata(i,this,S)?Reflect.getMetadata(i,this,S):l()},set:function(y){Reflect.defineMetadata(i,y,this,S)}})}A.makePropertyInjectDecorator=function(m,S){return function(l){return function(M,j){p(M,j,function(){return m.get(l)},S)}}},A.makePropertyInjectNamedDecorator=function(m,S){return function(l,M){return function(j,y){p(j,y,function(){return m.getNamed(l,M)},S)}}},A.makePropertyInjectTaggedDecorator=function(m,S){return function(l,M,j){return function(y,n){p(y,n,function(){return m.getTagged(l,M,j)},S)}}},A.makePropertyMultiInjectDecorator=function(m,S){return function(l){return function(M,j){p(M,j,function(){return m.getAll(l)},S)}}}},function(a,A,e){var i=e(219);a.exports=function(p){if(Array.isArray(p))return i(p)}},function(a,A){a.exports=function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A){a.exports=function(e){var i=new Float32Array(2);return i[0]=e[0],i[1]=e[1],i}},function(a,A){a.exports=function(e,i){var p=new Float32Array(2);return p[0]=e,p[1]=i,p}},function(a,A){a.exports=function(e,i){return e[0]=i[0],e[1]=i[1],e}},function(a,A,e){a.exports=function(p,m){var S=p[0],l=p[1],M=m[0],j=m[1];return Math.abs(S-M)<=i*Math.max(1,Math.abs(S),Math.abs(M))&&Math.abs(l-j)<=i*Math.max(1,Math.abs(l),Math.abs(j))};var i=e(233)},function(a,A){a.exports=function(e,i){return e[0]===i[0]&&e[1]===i[1]}},function(a,A,e){a.exports=e(150)},function(a,A,e){a.exports=e(237)},function(a,A,e){a.exports=e(238)},function(a,A){a.exports=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e}},function(a,A){a.exports=function(e,i,p){return e[0]=Math.min(i[0],p[0]),e[1]=Math.min(i[1],p[1]),e}},function(a,A){a.exports=function(e,i,p){return e[0]=Math.max(i[0],p[0]),e[1]=Math.max(i[1],p[1]),e}},function(a,A){a.exports=function(e,i,p){var m=Math.cos(p),S=Math.sin(p),l=i[0],M=i[1];return e[0]=l*m-M*S,e[1]=l*S+M*m,e}},function(a,A){a.exports=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e}},function(a,A){a.exports=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e}},function(a,A){a.exports=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e}},function(a,A){a.exports=function(e,i,p){return e[0]=i[0]*p,e[1]=i[1]*p,e}},function(a,A){a.exports=function(e,i,p,m){return e[0]=i[0]+p[0]*m,e[1]=i[1]+p[1]*m,e}},function(a,A,e){a.exports=e(239)},function(a,A,e){a.exports=e(240)},function(a,A,e){a.exports=e(241)},function(a,A,e){a.exports=e(242)},function(a,A){a.exports=function(e,i){return e[0]=-i[0],e[1]=-i[1],e}},function(a,A){a.exports=function(e,i,p){var m=i[0]*p[1]-i[1]*p[0];return e[0]=e[1]=0,e[2]=m,e}},function(a,A){a.exports=function(e,i,p,m){var S=i[0],l=i[1];return e[0]=S+m*(p[0]-S),e[1]=l+m*(p[1]-l),e}},function(a,A){a.exports=function(e,i){i=i||1;var p=2*Math.random()*Math.PI;return e[0]=Math.cos(p)*i,e[1]=Math.sin(p)*i,e}},function(a,A){a.exports=function(e,i,p){var m=i[0],S=i[1];return e[0]=p[0]*m+p[2]*S,e[1]=p[1]*m+p[3]*S,e}},function(a,A){a.exports=function(e,i,p){var m=i[0],S=i[1];return e[0]=p[0]*m+p[2]*S+p[4],e[1]=p[1]*m+p[3]*S+p[5],e}},function(a,A){a.exports=function(e,i,p){var m=i[0],S=i[1];return e[0]=p[0]*m+p[3]*S+p[6],e[1]=p[1]*m+p[4]*S+p[7],e}},function(a,A){a.exports=function(e,i,p){var m=i[0],S=i[1];return e[0]=p[0]*m+p[4]*S+p[12],e[1]=p[1]*m+p[5]*S+p[13],e}},function(a,A,e){a.exports=function(p,m,S,l,M,j){var y,n;for(m||(m=2),S||(S=0),n=l?Math.min(l*m+S,p.length):p.length,y=S;y<n;y+=m)i[0]=p[y],i[1]=p[y+1],M(i,i,j),p[y]=i[0],p[y+1]=i[1];return p};var i=e(234)()},function(a,A){a.exports=function(e,i,p){var m=i[0]*i[0]+i[1]*i[1];if(m>p*p){var S=Math.sqrt(m);e[0]=i[0]/S*p,e[1]=i[1]/S*p}else e[0]=i[0],e[1]=i[1];return e}},function(a,A,e){"use strict";var i=e(0),p=e(5),m=e(38),S=m.a.cloneEvent,l=m.a.isNaN,M=Math.abs,j=["shift","ctrl","alt","control"],y={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(P){var Y=this.origin,k=+P.clientX,h=+P.clientY;if(!l(k)&&!l(h)){var g=k-Y.x,B=h-Y.y;this.get("direction")==="x"?B=0:this.get("direction")==="y"&&(g=0),this.origin={x:k,y:h};var V=this.graph.get("width"),q=this.graph.get("height"),it=this.graph.get("canvas").getCanvasBBox();(it.minX<=V+this.scalableRange&&it.minX+g>V+this.scalableRange||it.maxX+this.scalableRange>=0&&it.maxX+this.scalableRange+g<0)&&(g=0),(it.minY<=q+this.scalableRange&&it.minY+B>q+this.scalableRange||it.maxY+this.scalableRange>=0&&it.maxY+this.scalableRange+B<0)&&(B=0),this.graph.translate(g,B)}},onMouseDown:function(P){var Y=P.originalEvent;if((!Y||P.name===p.h.TOUCHSTART||Y.button===0)&&(P.name===p.h.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,P)&&!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(this.origin={x:P.clientX,y:P.clientY},this.dragging=!1,this.enableOptimize)){for(var k=this.graph,h=k.getEdges(),g=0,B=h.length;g<B;g++){var V=h[g].get("group").get("children");V&&V.forEach(function(Ot){Ot.set("ori-visibility",Ot.get("ori-visibility")||Ot.get("visible")),Ot.hide()})}for(var q=k.getNodes(),it=0,ot=q.length;it<ot;it++)for(var At=0,gt=q[it].getContainer().get("children");At<gt.length;At++){var mt=gt[At];mt.get("isKeyShape")||(mt.set("ori-visibility",mt.get("ori-visibility")||mt.get("visible")),mt.hide())}}},onMouseMove:function(P){var Y=this.graph;if(!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(P=S(P),this.origin)){if(this.dragging)P.type="drag",Y.emit("canvas:drag",P);else{if(M(this.origin.x-P.clientX)+M(this.origin.y-P.clientY)<10)return;this.shouldBegin.call(this,P)&&(P.type="dragstart",Y.emit("canvas:dragstart",P),this.dragging=!0)}this.shouldUpdate.call(this,P)&&this.updateViewport(P)}},onMouseUp:function(P){var Y=this.graph;if(!this.keydown){if(this.enableOptimize){for(var k=Y.getEdges(),h=0,g=k.length;h<g;h++){var B=k[h].get("group").get("children");B&&B.forEach(function(mt){mt.get("ori-visibility")&&mt.show()})}for(var V=Y.getNodes(),q=0,it=V.length;q<it;q++)for(var ot=0,At=V[q].getContainer().get("children");ot<At.length;ot++){var gt=At[ot];gt.get("isKeyShape")||gt.get("ori-visibility")&&gt.show()}}this.dragging?(P=S(P),this.shouldEnd.call(this,P)&&this.updateViewport(P),P.type="dragend",Y.emit("canvas:dragend",P),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(P){var Y=P.key;Y&&(j.indexOf(Y.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},n=e(1),s=e(45),d={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(P){return!(!this.origin||!P||P.destroyed)&&P.getType()==="combo"},onDragStart:function(P){var Y=this;if(this.shouldBegin.call(this,P)){var k=P.item;if(k&&!k.destroyed&&!k.hasLocked()){k.getContainer().set("capture",!1);var h=P.target;if(h&&h.get("isAnchorPoint"))return;var g=this.graph;this.targets=[],this.targetCombo=null;var B=g.findAllByState("node",this.selectedState),V=k.get("id");B.filter(function(it){var ot=it.get("id");return V===ot}).length===0?this.targets.push(k):B.length>1?B.forEach(function(it){it.hasLocked()||Y.targets.push(it)}):this.targets.push(k);var q=[];this.targets.forEach(function(it){q.push(Object(i.c)(it.getModel()))}),this.set("beforeDragNodes",q),this.origin={x:P.x,y:P.y},this.point={},this.originPoint={}}}},onDrag:function(P){var Y=this;this.origin&&this.shouldUpdate(this,P)&&(this.get("enableDelegate")?this.updateDelegate(P):this.targets.map(function(k){Y.update(k,P)}))},onDragEnd:function(P){if(this.origin&&this.shouldEnd.call(this,P)){var Y=P.item;Y&&Y.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(P);var k=this.graph;if(k.get("enabledStack")){var h={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(g){h.after.nodes.push(g.getModel())}),k.pushStack("update",Object(i.c)(h))}k.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(P){var Y=P.item;if(this.validationCombo(Y)){this.updatePositions(P);var k=this.graph;if(this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!1),this.targetCombo=Y,this.onlyChangeComboSize)k.updateCombos();else{var h=Y.getModel();this.targets.map(function(g){g.getModel().comboId!==h.id&&k.updateComboTree(g,h.id)}),k.updateCombo(Y)}k.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(P){var Y=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(P),this.onlyChangeComboSize?Y.updateCombos():this.targets.map(function(k){k.getModel().comboId&&Y.updateComboTree(k)}))},onDropNode:function(P){if(this.targets&&this.targets.length!==0){var Y=P.item;this.updatePositions(P);var k=this.graph,h=Y.getModel().comboId;if(h){var g=k.findById(h);this.comboActiveState&&k.setItemState(g,this.comboActiveState,!1),this.targets.map(function(B){var V=B.getModel();h!==V.comboId&&k.updateComboTree(B,h)}),k.updateCombo(g)}else this.targets.map(function(B){B.getModel().comboId&&k.updateComboTree(B)});k.emit("dragnodeend",{items:this.targets,targetItem:Y})}},onDragEnter:function(P){var Y=P.item;if(this.validationCombo(Y)){var k=this.graph;this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!0)}},onDragLeave:function(P){var Y=P.item;if(this.validationCombo(Y)){var k=this.graph;this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!1)}},updatePositions:function(P){var Y=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&this.targets.map(function(k){return Y.update(k,P)})},update:function(P,Y){var k=this.origin,h=P.get("model"),g=P.get("id");this.point[g]||(this.point[g]={x:h.x||0,y:h.y||0});var B={x:Y.x-k.x+this.point[g].x,y:Y.y-k.y+this.point[g].y};this.get("updateEdge")?this.graph.updateItem(P,B,!1):P.updatePosition(B)},updateDelegate:function(P){if(this.graph,this.delegateRect){var Y=P.x-this.origin.x+this.originPoint.minX,k=P.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:Y,y:k})}else{var h=this.graph.get("group"),g=Object(i.e)({},s.a.delegateStyle,this.delegateStyle),B=this.calculationGroupPosition(P),V=B.x,q=B.y,it=B.width,ot=B.height,At=B.minX,gt=B.minY;this.originPoint={x:V,y:q,width:it,height:ot,minX:At,minY:gt},this.delegateRect=h.addShape("rect",{attrs:Object(n.a)({width:it,height:ot,x:V,y:q},g),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(P){var Y=this.graph.findAllByState("node",this.selectedState);Y.length===0&&Y.push(P.item);for(var k=1/0,h=-1/0,g=1/0,B=-1/0,V=0;V<Y.length;V++){var q=Y[V].getBBox(),it=q.minX,ot=q.minY,At=q.maxX,gt=q.maxY;it<k&&(k=it),ot<g&&(g=ot),At>h&&(h=At),gt>B&&(B=gt)}return{x:Math.floor(k),y:Math.floor(g),width:Math.ceil(h)-Math.floor(k),height:Math.ceil(B)-Math.floor(g),minX:k,minY:g}}},E=Math.min,O=Math.max,C=Math.abs,v=["drag","shift","ctrl","alt","control"],x={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return v.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(P){var Y=P.item,k=this.brush;Y||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),k||(k=this.createBrush()),this.originPoint={x:P.canvasX,y:P.canvasY},k.attr({width:0,height:0}),k.show(),this.dragging=!0)},onMouseMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(P)},onMouseUp:function(P){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(P),this.dragging=!1)},clearStates:function(){var P=this.graph,Y=this.selectedState,k=P.findAllByState("node",Y),h=P.findAllByState("edge",Y);k.forEach(function(g){return P.setItemState(g,Y,!1)}),h.forEach(function(g){return P.setItemState(g,Y,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(P){var Y=this,k=this.graph,h=this.originPoint,g=this.shouldUpdate,B=this.selectedState,V={x:P.x,y:P.y},q=k.getPointByCanvas(h.x,h.y),it=E(V.x,q.x),ot=O(V.x,q.x),At=E(V.y,q.y),gt=O(V.y,q.y),mt=[],Ot=[];k.getNodes().forEach(function(Dt){var Ut=Dt.getBBox();if(Ut.centerX>=it&&Ut.centerX<=ot&&Ut.centerY>=At&&Ut.centerY<=gt&&g(Dt,"select")){mt.push(Dt);var Ct=Dt.getModel();Ot.push(Ct.id),k.setItemState(Dt,B,!0)}});var It=[];this.includeEdges&&mt.forEach(function(Dt){Dt.getOutEdges().forEach(function(Ut){var Ct=Ut.getModel(),Vt=Ct.source,Ht=Ct.target;Ot.includes(Vt)&&Ot.includes(Ht)&&g(Ut,"select")&&(It.push(Ut),k.setItemState(Ut,Y.selectedState,!0))})}),this.selectedEdges=It,this.selectedNodes=mt,this.onSelect&&this.onSelect(mt,It),k.emit("nodeselectchange",{selectedItems:{nodes:mt,edges:It},select:!0})},createBrush:function(){var P=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=P,this.delegate=P,P},updateBrush:function(P){var Y=this.originPoint;this.brush.attr({width:C(P.canvasX-Y.x),height:C(P.canvasY-Y.y),x:E(P.canvasX,Y.x),y:E(P.canvasY,Y.y)})},onKeyDown:function(P){var Y=P.key;if(Y){var k=this.trigger.toLowerCase(),h=Y.toLowerCase();this.keydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},T=["shift","ctrl","alt","control"],N={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return T.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(P){var Y=this,k=P.item;if(k&&!k.destroyed){var h=k.getType(),g=Y.graph,B=Y.keydown,V=Y.multiple,q=Y.shouldUpdate;if(Y.shouldBegin.call(Y,P)){if(!B||!V){var it=g.findAllByState(h,Y.selectedState);Object(i.f)(it,function(gt){gt!==k&&g.setItemState(gt,Y.selectedState,!1)})}if(k.hasState(Y.selectedState)){q.call(Y,P)&&g.setItemState(k,Y.selectedState,!1);var ot=g.findAllByState("node",Y.selectedState),At=g.findAllByState("combo",Y.selectedState);g.emit("nodeselectchange",{target:k,selectedItems:{nodes:ot,combos:At},select:!1})}else q.call(Y,P)&&g.setItemState(k,Y.selectedState,!0),ot=g.findAllByState("node",Y.selectedState),At=g.findAllByState("combo",Y.selectedState),g.emit("nodeselectchange",{target:k,selectedItems:{nodes:ot,combos:At},select:!0})}}},onCanvasClick:function(){var P=this,Y=this.graph,k=Y.findAllByState("node",this.selectedState);Object(i.f)(k,function(g){Y.setItemState(g,P.selectedState,!1)});var h=Y.findAllByState("combo",this.selectedState);Object(i.f)(h,function(g){Y.setItemState(g,P.selectedState,!1)}),Y.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.trigger.toLowerCase()||Y.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},X=e(122).a.transform,tt={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var P=this.fixSelectedItems;return P.fixState||(P.fixState="selected"),P.fixAll&&(P.fixLineWidth=!0,P.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(P){var Y=P.originalEvent.touches,k=Y[0],h=Y[1];P.preventDefault(),h&&(this.startPoint={pageX:k.pageX,pageY:k.pageY},this.moveable=!0,h&&(this.endPoint={pageX:h.pageX,pageY:h.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(P){if(this.moveable){P.preventDefault();var Y=P.originalEvent.touches,k=Y[0],h=Y[1];if(h){this.endPoint||(this.endPoint={pageX:h.pageX,pageY:h.pageY});var g=function(At,gt){return Math.hypot(gt.x-At.x,gt.y-At.y)},B=g({x:k.pageX,y:k.pageY},{x:h.pageX,y:h.pageY})/g({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),V=this.originScale*B;this.currentScale=V;var q=this.get("minZoom")||this.graph.get("minZoom");if(!(V>(this.get("maxZoom")||this.graph.get("maxZoom"))||V<q)){var it=this.graph.get("canvas").getPointByClient(P.clientX,P.clientY);this.graph.zoomTo(V,{x:it.x,y:it.y}),this.graph.emit("wheelzoom",P)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(P){var Y=this,k=this.graph,h=this.fixSelectedItems;if(this.shouldUpdate.call(this,P)){P.preventDefault();var g,B=k.get("canvas").getPointByClient(P.clientX,P.clientY),V=this.get("sensitivity"),q=k.getZoom();g=q*(P.wheelDelta<0?1-.05*V:1/(1-.05*V));var it=this.get("minZoom")||k.get("minZoom");if(!(g>(this.get("maxZoom")||k.get("maxZoom"))||g<it)){if(this.get("enableOptimize")){var ot=this.get("optimizeZoom"),At=this.get("optimized"),gt=k.getNodes(),mt=k.getEdges(),Ot=gt.length,It=mt.length;if(!At){for(var Dt=0;Dt<Ot;Dt++)if(!(Ke=gt[Dt]).destroyed)for(var Ut=(Ui=Ke.get("group").get("children")).length,Ct=0;Ct<Ut;Ct++)(tr=Ui[Ct]).destoryed||tr.get("isKeyShape")||(tr.set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide());for(var Vt=0;Vt<It;Vt++)for(Ut=(Ui=(Ci=mt[Vt]).get("group").get("children")).length,Ct=0;Ct<Ut;Ct++)(tr=Ui[Ct]).set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ht=setTimeout(function(){var Li=k.getZoom();if(Y.get("optimized")){Y.set("optimized",!1);for(var Vi=0;Vi<Ot;Vi++){var ro=gt[Vi],jr=(Br=ro.get("group").get("children")).length;if(Li<ot)(pr=(Nr=ro.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(var Ji=0;Ji<jr;Ji++){var pr=(Kr=Br[Ji]).get("ori-visibility");!Kr.get("visible")&&pr&&pr&&Kr.show()}}for(var Xr=0;Xr<It;Xr++){var Br,Nr,Yr=mt[Xr];if(jr=(Br=Yr.get("group").get("children")).length,Li<ot)(pr=(Nr=Yr.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(Ji=0;Ji<jr;Ji++){var Kr;(Kr=Br[Ji]).get("visible")||(pr=Kr.get("ori-visibility"))&&Kr.show()}}}},100);this.set("timeout",Ht)}if(q<=1){var re=void 0,pe=void 0;if(h.fixAll||h.fixLineWidth||h.fixLabel){re=k.findAllByState("node",h.fixState),pe=k.findAllByState("edge",h.fixState);for(var ye=q/g,we=re.length,Ne=0;Ne<we;Ne++){var Ke,pn=(Ke=re[Ne]).getContainer(),hn=Ke.getModel(),kn=Ke.getOriginStyle(),Tn=Ke.getStateStyle(h.fixState),Rn=Ke.get("shapeFactory").getShape(hn.type).getStateStyle(h.fixState,Ke)[h.fixState];if(h.fixAll){if(g<=1){var Mn=Object(i.c)(pn.getMatrix());Mn||(Mn=[1,0,0,0,1,0,0,0,1]);var Cn=Ke.getModel(),_n=Cn.x,Kn=Cn.y;Mn=X(Mn,[["t",-_n,-Kn],["s",ye,ye],["t",_n,Kn]]),pn.setMatrix(Mn)}}else for(Ut=(Ui=pn.get("children")).length,Ct=0;Ct<Ut;Ct++){var tr=Ui[Ct],or=void 0,nr=void 0;if(h.fixLabel&&tr.get("type")==="text"){or=tr.attr("fontSize")||12;var er=Tn[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12;if(g<=1&&tr.attr("fontSize",hi/g),nr)break}if(h.fixLineWidth&&tr.get("isKeyShape")){nr=tr.attr("lineWidth")||0;var Fi=Tn.lineWidth||Rn.lineWidth||kn.lineWidth||0;if(g<=1&&tr.attr("lineWidth",Fi/g),or)break}}}for(var to=pe.length,si=0;si<to;si++){var Ci,Ui=(pn=(Ci=pe[si]).getContainer()).get("children");for(hn=Ci.getModel(),Tn=Ci.getStateStyle(h.fixState),Rn=Ci.get("shapeFactory").getShape(hn.type).getStateStyle(h.fixState,Ci)[h.fixState],Ut=Ui.length,Ct=0;Ct<Ut&&(tr=Ui[Ct],or=void 0,nr=void 0,!((h.fixLabel||h.fixAll)&&tr.get("type")==="text"&&(or=tr.attr("fontSize")||12,er=Tn[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12,g<=1&&tr.attr("fontSize",hi/g),nr)||(h.fixLineWidth||h.fixAll)&&tr.get("isKeyShape")&&(nr=tr.attr("lineWidth")||0,Fi=Tn.lineWidth||Rn.lineWidth||1,g<=1&&tr.attr("lineWidth",Fi/g),or)));Ct++);}}}k.zoomTo(g,{x:B.x,y:B.y}),k.emit("wheelzoom",P)}}}},nt=e(14),vt={onMouseEnter:function(P){var Y=P.item;this.currentTarget=Y,this.showTooltip(P),this.graph.emit("tooltipchange",{item:P.item,action:"show"})},onMouseMove:function(P){this.shouldUpdate(P)?this.currentTarget&&P.item===this.currentTarget&&this.updatePosition(P):this.hideTooltip()},onMouseLeave:function(P){this.shouldEnd(P)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(P){var Y=this.container;if(P.item&&!P.item.destroyed){Y||(Y=this.createTooltip(this.graph.get("canvas")),this.container=Y);var k=this.formatText(P.item.get("model"),P);Y.innerHTML=k,Object(nt.c)(this.container,{visibility:"visible"}),this.updatePosition(P)}},hideTooltip:function(){Object(nt.c)(this.container,{visibility:"hidden"})},updatePosition:function(P){var Y=this.get("shouldBegin"),k=this.width,h=this.height,g=this.container,B=this.graph;if(Y(P)){var V=B.getPointByClient(P.clientX,P.clientY),q=B.getCanvasByPoint(V.x,V.y),it=q.x,ot=q.y,At=g.getBoundingClientRect();it>k/2?it-=At.width:it+=this.offset,ot>h/2?ot-=At.height:ot+=this.offset;var gt=it+"px",mt=ot+"px";Object(nt.c)(this.container,{left:gt,top:mt,visibility:"visible"})}else Object(nt.c)(g,{visibility:"hidden"})},createTooltip:function(P){var Y=P.get("el");Y.style.position="relative";var k=Object(nt.b)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return Y.parentNode.appendChild(k),Object(nt.c)(k,{position:"absolute",visibility:"visible"}),this.width=P.get("width"),this.height=P.get("height"),this.container=k,this.graph.get("tooltips").push(k),k}},ft=Object(n.a)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(Y){return Y.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vt),bt=Object(n.a)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(Y){return"source: "+Y.source+" target: "+Y.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vt),St=["click","dblclick"],pt={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var P,Y;return St.includes(this.trigger)?Y=this.trigger:(Y="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["node:"+Y]="onNodeClick",P.touchstart="onNodeClick",P},onNodeClick:function(P){var Y=P.item,k=this.graph.findDataById(Y.get("id"));if(k){var h=k.children;if(h&&h.length!==0){var g=!k.collapsed;this.shouldBegin(P,g)&&(k.collapsed=g,Y.getModel().collapsed=g,this.graph.emit("itemcollapsed",{item:P.item,collapsed:g}),this.shouldUpdate(P,g)&&(this.onChange(Y,g),this.graph.layout()))}}}},ct=m.a.calculationItemsBBox,zt=function z(P,Y){if(Y(P)!==!1&&P){var k=P.get("combos");if(k.length===0)return!1;Object(i.f)(k,function(h){z(h,Y)})}},Nt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(P){var Y=P.item;return!(!Y||Y.destroyed)&&!!this.shouldUpdate(this,P)&&Y.getType()==="combo"},onDragStart:function(P){var Y=this,k=this.graph,h=P.item;if(this.validationCombo(P)){this.targets=[];var g=k.findAllByState("combo",this.selectedState),B=h.get("id");g.filter(function(V){var q=V.get("id");return B===q}).length===0?this.targets.push(h):this.targets=g,this.activeState&&this.targets.map(function(V){var q=V.getModel();if(q.parentId){var it=k.findById(q.parentId);it&&k.setItemState(it,Y.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:P.x,y:P.y},this.currentItemChildCombos=[],zt(h,function(V){if(V.destroyed)return!1;var q=V.getModel();return Y.currentItemChildCombos.push(q.id),!0})}},onDrag:function(P){var Y=this;if(this.origin&&this.validationCombo(P))if(this.enableDelegate)this.updateDelegate(P);else{if(this.activeState){var k=this.graph,h=P.item,g=h.getModel(),B=k.getCombos(),V=h.getBBox(),q=V.centerX,it=V.centerY,ot=V.width;B.filter(function(At){var gt=At.getModel();return g.parentId,gt.id!==g.id&&!Y.currentItemChildCombos.includes(gt.id)}).map(function(At){var gt=At.getBBox(),mt=gt.centerX,Ot=gt.centerY,It=gt.width,Dt=q-mt,Ut=it-Ot,Ct=2*Math.sqrt(Dt*Dt+Ut*Ut);ot+It-Ct>.8*ot?k.setItemState(At,Y.activeState,!0):k.setItemState(At,Y.activeState,!1)})}Object(i.f)(this.targets,function(At){Y.updateCombo(At,P)})}},updatePositions:function(P){var Y=this;this.enableDelegate&&Object(i.f)(this.targets,function(k){Y.updateCombo(k,P)})},onDrop:function(P){var Y=this,k=P.item;if(k&&this.targets&&!k.destroyed){this.updatePositions(P);var h=this.graph,g=k.getModel();this.targets.map(function(B){B.getModel().parentId!==g.id?(Y.activeState&&h.setItemState(k,Y.activeState,!1),Y.onlyChangeComboSize?h.updateCombo(B):h.updateComboTree(B,g.id)):h.updateCombo(k)}),this.end(k,P),this.endComparison=!0}},onNodeDrop:function(P){var Y=this;if(this.targets&&this.targets.length!==0){this.updatePositions(P);var k,h=this.graph,g=P.item.getModel().comboId;if(g){if(this.activeState){var B=h.findById(g);h.setItemState(B,this.activeState,!1)}this.targets.map(function(V){Y.onlyChangeComboSize?h.updateCombo(V):g!==V.getID()&&(k=h.findById(g),g!==V.getModel().parentId&&h.updateComboTree(V,g))})}else this.targets.map(function(V){Y.onlyChangeComboSize?h.updateCombo(V):V.getModel().comboId&&h.updateComboTree(V)});this.endComparison=!0,this.end(k,P)}},onDragEnter:function(P){if(this.origin&&this.validationCombo(P)){var Y=P.item,k=this.graph;this.activeState&&k.setItemState(Y,this.activeState,!0)}},onDragLeave:function(P){if(this.origin&&this.validationCombo(P)){var Y=P.item,k=this.graph;this.activeState&&k.setItemState(Y,this.activeState,!1)}},onDragEnd:function(P){if(this.targets&&this.targets.length!==0){var Y=P.item;this.updatePositions(P);var k=this.getParentCombo(Y.getModel().parentId),h=this.graph;k&&this.activeState&&h.setItemState(k,this.activeState,!1),this.end(void 0,P)}},end:function(P,Y){var k=this;if(this.origin){var h=this.graph;this.delegateShape&&(h.get("delegateGroup").clear(),this.delegateShape=null),P&&this.activeState&&h.setItemState(P,this.activeState,!1),P||this.targets.map(function(g){k.onlyChangeComboSize?h.updateCombo(g):h.updateComboTree(g)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(P,Y){var k=this;if(Y(P)!==!1&&P){var h=P.get("combos");Object(i.f)(h,function(B){k.traverse(B,Y)});var g=P.get("nodes");Object(i.f)(g,function(B){k.traverse(B,Y)})}},updateCombo:function(P,Y){var k=this;this.traverse(P,function(h){return!h.destroyed&&(k.updateSignleItem(h,Y),!0)})},updateSignleItem:function(P,Y){var k=this.origin,h=this.graph,g=P.getModel(),B=P.get("id");this.point[B]||(this.point[B]={x:g.x,y:g.y});var V=Y.x-k.x+this.point[B].x,q=Y.y-k.y+this.point[B].y;h.updateItem(P,{x:V,y:q})},getParentCombo:function(P){var Y=this.graph;if(P){var k=Y.findById(P);if(k)return k}},updateDelegate:function(P){var Y=this.graph;if(this.delegateShape){var k=P.x-this.origin.x+this.originPoint.minX,h=P.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:h})}else{var g=Y.get("delegateGroup"),B=null,V=(B=this.targets.length>1?ct(this.targets):this.targets[0].getBBox()).x,q=B.y,it=B.width,ot=B.height,At=B.minX,gt=B.minY;this.originPoint={x:V,y:q,width:it,height:ot,minX:At,minY:gt};var mt=Object(n.a)(Object(n.a)({},s.a.delegateStyle),this.delegateStyle);this.delegateShape=g.addShape("rect",{attrs:Object(n.a)({width:B.width,height:B.height,x:B.x,y:B.y},mt),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},wt=["click","dblclick"],H={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var P,Y;return wt.includes(this.trigger)?Y=this.trigger:(Y="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["combo:"+Y]="onComboClick",P},onComboClick:function(P){var Y=P.item,k=this.graph,h=this.relayout;if(Y&&!Y.destroyed&&Y.getType()==="combo"){var g=Y.getModel().id;g&&(k.collapseExpandCombo(g),h&&k.get("layout")?k.layout():k.refreshPositions())}}},ht=m.a.isPolygonsIntersect,dt=m.a.pathToPoints,yt=["drag","shift","ctrl","alt","control"],Mt=["click","drag"],$=["shift","ctrl","control","alt","meta",void 0],lt=["shift","ctrl","alt","control"],rt={"drag-canvas":y,"zoom-canvas":tt,"drag-node":d,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(P){var Y=P.item,k=this.graph;if(this.item=Y,this.shouldUpdate(P.item,{event:P,action:"activate"})){for(var h=this.activeState,g=this.inactiveState,B=k.getNodes(),V=k.getEdges(),q=B.length,it=V.length,ot=0;ot<q;ot++){var At=B[ot],gt=At.hasState("selected");this.resetSelected&&gt&&k.setItemState(At,"selected",!1),k.setItemState(At,h,!1),g&&k.setItemState(At,g,!0)}for(ot=0;ot<it;ot++){var mt=V[ot];k.setItemState(mt,h,!1),g&&k.setItemState(mt,g,!0)}g&&k.setItemState(Y,g,!1),k.setItemState(Y,h,!0);var Ot=Y.getEdges(),It=Ot.length;for(ot=0;ot<It;ot++){var Dt=void 0;Dt=(mt=Ot[ot]).getSource()===Y?mt.getTarget():mt.getSource(),g&&k.setItemState(Dt,g,!1),k.setItemState(Dt,h,!0),k.setItemState(mt,g,!1),k.setItemState(mt,h,!0),mt.toFront()}k.emit("afteractivaterelations",{item:P.item,action:"activate"})}},clearActiveState:function(P){var Y=this.get("graph");if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){var k=this.activeState,h=this.inactiveState,g=Y.get("autoPaint");Y.setAutoPaint(!1);for(var B=Y.getNodes(),V=Y.getEdges(),q=B.length,it=V.length,ot=0;ot<q;ot++){var At=B[ot];Y.clearItemStates(At,[k,h])}for(ot=0;ot<it;ot++){var gt=V[ot];Y.clearItemStates(gt,[k,h,"deactivate"])}Y.paint(),Y.setAutoPaint(g),Y.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(P){var Y=this.graph;if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){for(var k=this.activeState,h=this.inactiveState,g=Y.getNodes(),B=Y.getEdges(),V=g.length,q=B.length,it=0;it<V;it++){var ot=g[it];Y.clearItemStates(ot,[k,h])}for(it=0;it<q;it++){var At=B[it];Y.clearItemStates(At,[k,h,"deactivate"])}Y.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}}},"brush-select":x,"click-select":N,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return yt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(P){var Y=this.lasso;P.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),Y||(Y=this.createLasso()),this.dragging=!0,this.originPoint={x:P.x,y:P.y},this.points.push(this.originPoint),Y.show())},onDragMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:P.x,y:P.y}),this.updateLasso(P))},onDragEnd:function(P){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var P=this.points,Y=[];return P.length&&(P.forEach(function(k,h){h===0?Y.push(["M",k.x,k.y]):Y.push(["L",k.x,k.y])}),Y.push(["L",P[0].x,P[0].y])),Y},clearStates:function(){var P=this.graph,Y=this.selectedState,k=P.findAllByState("node",Y),h=P.findAllByState("edge",Y);k.forEach(function(g){return P.setItemState(g,Y,!1)}),h.forEach(function(g){return P.setItemState(g,Y,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var P=this,Y=this.graph,k=this.shouldUpdate,h=this.points.map(function(it){return[Y.getCanvasByPoint(it.x,it.y).x,Y.getCanvasByPoint(it.x,it.y).y]}),g=this.selectedState,B=[],V=[];Y.getNodes().forEach(function(it){if(function(At,gt){var mt,Ot=At.getKeyShape();if(At.get("type")==="path")mt=dt(Ot.attr("path"));else{var It=Ot.getCanvasBBox();mt=[[It.minX,It.minY],[It.maxX,It.minY],[It.maxX,It.maxY],[It.minX,It.maxY]]}return ht(gt,mt)}(it,h)&&k(it,"select")){B.push(it);var ot=it.getModel();V.push(ot.id),Y.setItemState(it,g,!0)}});var q=[];this.includeEdges&&B.forEach(function(it){it.getOutEdges().forEach(function(ot){var At=ot.getModel(),gt=At.source,mt=At.target;V.includes(gt)&&V.includes(mt)&&k(ot,"select")&&(q.push(ot),Y.setItemState(ot,P.selectedState,!0))})}),this.selectedEdges=q,this.selectedNodes=B,this.onSelect&&this.onSelect(B,q),Y.emit("nodeselectchange",{selectedItems:{nodes:B,edges:q},select:!0})},createLasso:function(){var P=this.graph.get("delegateGroup").addShape("path",{attrs:Object(n.a)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=P,this.delegate=P,this.points=[],P},updateLasso:function(P){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:ft,"edge-tooltip":bt,"collapse-expand":pt,"drag-combo":Nt,"collapse-expand-combo":H,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var P;return Mt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&$.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?P={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(P={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(P.keydown="onKeyDown",P.keyup="onKeyUp"),P},onDragEnd:function(P){if(!this.key||this.keydown){var Y=P.item;Y&&Y.getID()!==this.source&&Y.getType()==="node"||this.cancelCreating({item:this.edge,x:P.x,y:P.y})}},onClick:function(P){if(!this.key||this.keydown){var Y=P.item,k=this.graph,h=Y.getModel(),g=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,P))return;var B=void 0;B=g&&Object(i.r)(g)?g({source:this.source,target:h.id}):this.edgeConfig;var V=Object(n.a)({target:h.id},B);this.source===h.id&&(V.type="loop"),k.emit("beforecreateedge",{}),k.updateItem(this.edge,V),k.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,P))return;B=void 0,B=g&&Object(i.r)(g)?g({source:h.id,target:h.id}):this.edgeConfig,this.edge=k.addItem("edge",Object(n.a)({source:h.id,target:h.id},B),!1),this.source=h.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(P){if(!this.key||this.keydown){var Y={x:P.x,y:P.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:Y},!1):this.addingEdge=!1}},cancelCreating:function(P){if(!this.key||this.keydown){var Y=this.graph,k=P.item;if(this.addingEdge&&P.target&&P.target.isCanvas&&P.target.isCanvas())return Y.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===k&&(Y.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return lt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(P){var Y=P.key;if(Y){var k=this.trigger.toLowerCase(),h=Y.toLowerCase();this.triggerKeydown||(this.triggerKeydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control");var g=this.graph;if(!g[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var B=this.combinedKey.toLowerCase();this.triggerKeydown&&(h===B||h==="control"&&B==="ctrl"||h==="ctrl"&&B==="control")&&(this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]())}else this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};Object(i.f)(rt,function(z,P){Object(p.o)(P,z)})},function(a,A,e){"use strict";var i=e(1),p=e(5),m=e(0);function S(wt){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(wt)}Object(p.r)("circle",{options:{size:p.e.defaultNode.size,style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(H,ht){var dt=this.getOptions(H).icon,yt=dt===void 0?{}:dt,Mt=this.getShapeStyle(H),$=Object(m.e)({},yt,H.icon),lt=ht.addShape("circle",{attrs:Mt,className:this.type+"-keyShape",draggable:!0}),rt=$.width,z=$.height;return $.show&&ht.addShape("image",{attrs:Object(i.a)({x:-rt/2,y:-z/2},$),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(H,ht),lt},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.bottom,z=yt.size,P=yt.r,Y=Object(i.c)(yt,["top","left","right","bottom","size","r"]),k=this.getSize(H)[0]/2;$&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:-k,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:k,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:-k,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),rt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:k,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.e)({},ht,dt),Mt=this.getSize(H)[0]/2;return Object(i.a)({x:0,y:0,r:Mt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getSize(H),Mt={stroke:H.color,r:yt[0]/2},$=ht.get("keyShape"),lt=Object(m.e)({},$.attr(),Mt,H.style);this.updateShape(H,ht,lt,!0),this.updateLinkPoints(H,dt)}},"single-node"),Object(p.r)("rect",{options:{size:[100,30],style:{radius:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(H,ht){var dt=this.getShapeStyle(H),yt=ht.addShape("rect",{attrs:dt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(H,ht),yt},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.bottom,z=yt.size,P=yt.r,Y=Object(i.c)(yt,["top","left","right","bottom","size","r"]),k=this.getSize(H),h=k[0],g=k[1];$&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:-h/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:h/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),rt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getSize(H),$=yt.width||Mt[0],lt=yt.height||Mt[1];return Object(i.a)({x:-$/2,y:-lt/2,width:$,height:lt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getOptions({}).style,Mt=this.getSize(H),$=ht.get("keyShape");H.size||(Mt[0]=$.attr("width")||yt.width,Mt[1]=$.attr("height")||yt.height);var lt={stroke:H.color,x:-Mt[0]/2,y:-Mt[1]/2,width:Mt[0],height:Mt[1]},rt=Object(m.A)({},yt,$.attr(),lt);rt=Object(m.A)(rt,H.style),this.updateShape(H,ht,rt,!1),this.updateLinkPoints(H,dt)}},"single-node"),Object(p.r)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(H,ht){var dt=this.getOptions(H).icon,yt=dt===void 0?{}:dt,Mt=this.getShapeStyle(H),$=ht.addShape("ellipse",{attrs:Mt,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),lt=yt.width,rt=yt.height;return yt.show&&ht.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-rt/2},yt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(H,ht),$},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.bottom,z=yt.size,P=yt.r,Y=Object(i.c)(yt,["top","left","right","bottom","size","r"]),k=this.getSize(H),h=k[0]/2,g=k[1]/2;$&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:-h,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:h,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:-g,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),rt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:g,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getSize(H),$=Mt[0]/2,lt=Mt[1]/2;return Object(i.a)({x:0,y:0,rx:$,ry:lt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getOptions({}).style,Mt=this.getSize(H),$={stroke:H.color,rx:Mt[0]/2,ry:Mt[1]/2},lt=ht.get("keyShape"),rt=Object(m.A)({},yt,lt.attr(),$);rt=Object(m.A)(rt,H.style),this.updateShape(H,ht,rt,!0),this.updateLinkPoints(H,dt)}},"single-node"),Object(p.r)("diamond",{options:{size:[80,80],style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(H,ht){var dt=this.getOptions(H).icon,yt=dt===void 0?{}:dt,Mt=this.getShapeStyle(H),$=ht.addShape("path",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),lt=yt.width,rt=yt.height;return yt.show&&ht.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-rt/2},yt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(H,ht),$},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.bottom,z=yt.size,P=yt.r,Y=Object(i.c)(yt,["top","left","right","bottom","size","r"]),k=this.getSize(H),h=k[0],g=k[1];$&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:-h/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:h/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),rt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(H){var ht=this.getSize(H),dt=ht[0],yt=ht[1];return[["M",0,-yt/2],["L",dt/2,0],["L",0,yt/2],["L",-dt/2,0],["Z"]]},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getPath(H);return Object(i.a)({path:Mt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getOptions({}).style,Mt=this.getPath(H),$={stroke:H.color,path:Mt},lt=ht.get("keyShape"),rt=Object(m.A)({},yt,lt.attr(),$);rt=Object(m.A)(rt,H.style),this.updateShape(H,ht,rt,!0),this.updateLinkPoints(H,dt)}},"single-node"),Object(p.r)("triangle",{options:{size:40,direction:"up",style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(H,ht){var dt=this.getOptions(H),yt=dt.icon,Mt=yt===void 0?{}:yt,$=dt.direction,lt=this.getShapeStyle(H),rt=H.direction||$,z=ht.addShape("path",{attrs:lt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=Mt.width,Y=Mt.height,k=Mt.show,h=Mt.offset;if(k){var g=-P/2,B=-Y/2;rt!=="up"&&rt!=="down"||(B+=h),rt!=="left"&&rt!=="right"||(g+=h),ht.addShape("image",{attrs:Object(i.a)({x:g,y:B},Mt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(H,ht),z},drawLinkPoints:function(H,ht){var dt=this.getOptions(H),yt=dt.linkPoints,Mt=yt===void 0?{}:yt,$=dt.direction,lt=H.direction||$,rt=Mt.top,z=Mt.left,P=Mt.right,Y=Mt.bottom,k=Mt.size,h=Mt.r,g=Object(i.c)(Mt,["top","left","right","bottom","size","r"]),B=this.getSize(H)[0];if(z){var V=null,q=B*Math.sin(1/3*Math.PI),it=B*Math.sin(1/3*Math.PI);lt==="up"?V=[-it,q]:lt==="down"?V=[-it,-q]:lt==="left"&&(V=[-it,it-q]),V&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:V[0],y:V[1],r:k/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(P){var ot=null;q=B*Math.sin(1/3*Math.PI),it=B*Math.sin(1/3*Math.PI),lt==="up"?ot=[it,q]:lt==="down"?ot=[it,-q]:lt==="right"&&(ot=[it,it-q]),ot&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:ot[0],y:ot[1],r:k/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(rt){var At=null;q=B*Math.sin(1/3*Math.PI),it=B*Math.sin(1/3*Math.PI),lt==="up"?At=[it-q,-q]:lt==="left"?At=[it,-q]:lt==="right"&&(At=[-it,-q]),At&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:At[0],y:At[1],r:k/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(Y){var gt=null;q=B*Math.sin(1/3*Math.PI),it=B*Math.sin(1/3*Math.PI),lt==="down"?gt=[-it+q,q]:lt==="left"?gt=[it,q]:lt==="right"&&(gt=[-it,q]),gt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},g),{x:gt[0],y:gt[1],r:k/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(H){var ht=this.getOptions(H).direction,dt=H.direction||ht,yt=this.getSize(H)[0],Mt=yt*Math.sin(1/3*Math.PI),$=yt*Math.sin(1/3*Math.PI),lt=[["M",-$,Mt],["L",0,-Mt],["L",$,Mt],["Z"]];return dt==="down"?lt=[["M",-$,-Mt],["L",$,-Mt],["L",0,Mt],["Z"]]:dt==="left"?lt=[["M",-$,$-Mt],["L",$,-$],["L",$,$],["Z"]]:dt==="right"&&(lt=[["M",$,$-Mt],["L",-$,$],["L",-$,-$],["Z"]]),lt},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getPath(H);return Object(i.a)({path:Mt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getOptions({}).style,Mt=this.getPath(H),$={stroke:H.color,path:Mt},lt=ht.get("keyShape"),rt=Object(m.A)({},yt,lt.attr(),$);rt=Object(m.A)(rt,H.style),this.updateShape(H,ht,rt,!0),this.updateLinkPoints(H,dt)},updateLinkPoints:function(H,ht){var dt=this.getOptions({}),yt=dt.linkPoints,Mt=dt.direction,$=H.direction||Mt,lt=ht.find(function(pe){return pe.get("className")==="link-point-left"}),rt=ht.find(function(pe){return pe.get("className")==="link-point-right"}),z=ht.find(function(pe){return pe.get("className")==="link-point-top"}),P=ht.find(function(pe){return pe.get("className")==="link-point-bottom"}),Y=yt,k=lt||rt||z||P;k&&(Y=k.attr());var h=Object(m.A)({},Y,H.linkPoints),g=h.fill,B=h.stroke,V=h.lineWidth,q=h.size/2;q||(q=h.r);var it=H.linkPoints?H.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ot=it.left,At=it.right,gt=it.top,mt=it.bottom,Ot=this.getSize(H)[0],It={r:q,fill:g,stroke:B,lineWidth:V},Dt=null,Ut=Ot*Math.sin(1/3*Math.PI),Ct=Ot*Math.sin(1/3*Math.PI);$==="up"?Dt=[-Ct,Ut]:$==="down"?Dt=[-Ct,-Ut]:$==="left"&&(Dt=[-Ct,Ct-Ut]),Dt&&(lt?ot||ot===void 0?lt.attr(Object(i.a)(Object(i.a)({},It),{x:Dt[0],y:Dt[1]})):lt.remove():ot&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},It),{x:Dt[0],y:Dt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Vt=null;$==="up"?Vt=[Ct,Ut]:$==="down"?Vt=[Ct,-Ut]:$==="right"&&(Vt=[Ct,Ct-Ut]),Vt&&(rt?At||At===void 0?rt.attr(Object(i.a)(Object(i.a)({},It),{x:Vt[0],y:Vt[1]})):rt.remove():At&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},It),{x:Vt[0],y:Vt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Ht=null;$==="up"?Ht=[Ct-Ut,-Ut]:$==="left"?Ht=[Ct,-Ut]:$==="right"&&(Ht=[-Ct,-Ut]),Ht&&(z?gt||gt===void 0?z.attr(Object(i.a)(Object(i.a)({},It),{x:Ht[0],y:Ht[1]})):z.remove():gt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},It),{x:Ht[0],y:Ht[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var re=null;$==="down"?re=[-Ct+Ut,Ut]:$==="left"?re=[Ct,Ut]:$==="right"&&(re=[-Ct,Ut]),re&&(P?mt||mt===void 0?P.attr(Object(i.a)(Object(i.a)({},It),{x:re[0],y:re[1]})):P.remove():mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},It),{x:re[0],y:re[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Object(p.r)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:p.e.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(H,ht){var dt=this.getOptions(H).preRect,yt=dt===void 0?{}:dt,Mt=this.getShapeStyle(H),$=this.getSize(H),lt=$[0],rt=$[1],z=ht.addShape("rect",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=yt.show,Y=Object(i.c)(yt,["show"]);return P&&ht.addShape("rect",{attrs:Object(i.a)({x:-lt/2,y:-rt/2,height:rt},Y),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(H,ht),this.drawStateIcon(H,ht),this.drawLinkPoints(H,ht),z},drawLogoIcon:function(H,ht){var dt=this.getOptions(H).logoIcon,yt=dt===void 0?{}:dt,Mt=this.getSize(H)[0];if(yt.show){var $=yt.width,lt=yt.height,rt=yt.x,z=yt.y,P=yt.offset,Y=Object(i.c)(yt,["width","height","x","y","offset"]);ht.addShape("image",{attrs:Object(i.a)(Object(i.a)({},Y),{x:rt||-Mt/2+$+P,y:z||-lt/2,width:$,height:lt}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(H,ht){var dt=this.getOptions(H).stateIcon,yt=dt===void 0?{}:dt,Mt=this.getSize(H)[0];if(yt.show){var $=yt.width,lt=yt.height,rt=yt.x,z=yt.y,P=yt.offset,Y=Object(i.c)(yt,["width","height","x","y","offset"]);ht.addShape("image",{attrs:Object(i.a)(Object(i.a)({},Y),{x:rt||Mt/2-$+P,y:z||-lt/2,width:$,height:lt}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.bottom,z=yt.size,P=yt.r,Y=Object(i.c)(yt,["top","left","right","bottom","size","r"]),k=this.getSize(H),h=k[0],g=k[1];$&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:-h/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),lt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:h/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Mt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),rt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Y),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(H,ht){var dt=this.getOptions(H),yt=dt.labelCfg,Mt=yt===void 0?{}:yt,$=dt.logoIcon,lt=$===void 0?{}:$,rt=dt.descriptionCfg,z=rt===void 0?{}:rt,P=this.getSize(H)[0],Y=null,k=lt.show,h=lt.width,g=-P/2+Mt.offset;k&&(g=-P/2+h+Mt.offset);var B=Mt.style,V=z.style,q=z.paddingTop;return Object(m.x)(H.description)?(Y=ht.addShape("text",{attrs:Object(i.a)(Object(i.a)({},B),{x:g,y:-5,text:H.label}),className:"text-shape",name:"text-shape",draggable:!0}),ht.addShape("text",{attrs:Object(i.a)(Object(i.a)({},V),{x:g,y:17+(q||0),text:H.description}),className:"rect-description",name:"rect-description",draggable:!0})):Y=ht.addShape("text",{attrs:Object(i.a)(Object(i.a)({},B),{x:g,y:7,text:H.label}),className:"text-shape",name:"text-shape",draggable:!0}),Y},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getSize(H),$=yt.width||Mt[0],lt=yt.height||Mt[1];return Object(i.a)({x:-$/2,y:-lt/2,width:$,height:lt},yt)},update:function(H,ht){var dt=this.getOptions(H),yt=dt.style,Mt=yt===void 0?{}:yt,$=dt.labelCfg,lt=$===void 0?{}:$,rt=dt.descriptionCfg,z=rt===void 0?{}:rt,P=this.getSize(H),Y=P[0],k=P[1];ht.get("keyShape").attr(Object(i.a)(Object(i.a)({},Mt),{x:-Y/2,y:-k/2,width:Y,height:k}));var h=ht.getContainer(),g=h.find(function(Mn){return Mn.get("className")==="rect-logo-icon"}),B=g?g.attr():{},V=Object(m.A)({},B,H.logoIcon),q=V.width;q===void 0&&(q=this.options.logoIcon.width);var it=H.logoIcon?H.logoIcon.show:void 0,ot=lt.offset,At=-Y/2+q+ot;it||it===void 0||(At=-Y/2+ot);var gt=h.find(function(Mn){return Mn.get("className")==="node-label"}),mt=h.find(function(Mn){return Mn.get("className")==="rect-description"});if(H.label)if(gt){var Ot=H.labelCfg?H.labelCfg.style:{},It=Object(m.A)({},gt.attr(),Ot);H.label&&(It.text=H.label),It.x=At,Object(m.x)(H.description)&&(It.y=-5),mt&&(mt.resetMatrix(),mt.attr({x:At})),gt.resetMatrix(),gt.attr(It)}else h.addShape("text",{attrs:Object(i.a)(Object(i.a)({},lt.style),{x:At,y:H.description?-5:7,text:H.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(m.x)(H.description)){var Dt=z.paddingTop;if(mt){Ot=H.descriptionCfg?H.descriptionCfg.style:{};var Ut=Object(m.A)({},mt.attr(),Ot);Object(m.x)(H.description)&&(Ut.text=H.description),Ut.x=At,mt.resetMatrix(),mt.attr(Object(i.a)(Object(i.a)({},Ut),{y:17+(Dt||0)}))}else h.addShape("text",{attrs:Object(i.a)(Object(i.a)({},z.style),{x:At,y:17+(Dt||0),text:H.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Ct=h.find(function(Mn){return Mn.get("className")==="pre-rect"});if(Ct){var Vt=Object(m.A)({},Ct.attr(),H.preRect);Ct.attr(Object(i.a)(Object(i.a)({},Vt),{x:-Y/2,y:-k/2,height:k}))}if(g)if(it||it===void 0){var Ht=V.width,re=V.height,pe=V.x,ye=V.y,we=V.offset,Ne=Object(i.c)(V,["width","height","x","y","offset"]);g.attr(Object(i.a)(Object(i.a)({},Ne),{x:pe||-Y/2+Ht+we,y:ye||-re/2,width:Ht,height:re}))}else g.remove();else it&&this.drawLogoIcon(H,h);var Ke=h.find(function(Mn){return Mn.get("className")==="rect-state-icon"}),pn=Ke?Ke.attr():{},hn=Object(m.A)({},pn,H.stateIcon);if(Ke){hn.show||hn.show===void 0||Ke.remove();var kn=hn.width,Tn=(re=hn.height,pe=hn.x,ye=hn.y,hn.offset),Rn=Object(i.c)(hn,["width","height","x","y","offset"]);Ke.attr(Object(i.a)(Object(i.a)({},Rn),{x:pe||Y/2-kn+Tn,y:ye||-re/2,width:kn,height:re}))}else hn.show&&this.drawStateIcon(H,h);this.updateLinkPoints(H,h)}},"single-node"),Object(p.r)("star",{options:{size:60,style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(i.a)({},p.e.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(H,ht){var dt=this.getOptions(H).icon,yt=dt===void 0?{}:dt,Mt=this.getShapeStyle(H),$=ht.addShape("path",{attrs:Mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),lt=yt.width,rt=yt.height;return yt.show&&ht.addShape("image",{attrs:Object(i.a)({x:-lt/2,y:-rt/2},yt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(H,ht),$},drawLinkPoints:function(H,ht){var dt=this.getOptions(H).linkPoints,yt=dt===void 0?{}:dt,Mt=yt.top,$=yt.left,lt=yt.right,rt=yt.leftBottom,z=yt.rightBottom,P=yt.size,Y=yt.r,k=Object(i.c)(yt,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(H)[0];if(lt){var g=Math.cos(.1*Math.PI)*h,B=Math.sin(.1*Math.PI)*h;ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-B,r:P/2||Y||5}),className:"link-point-right",name:"link-point-right"})}Mt&&(g=Math.cos(.5*Math.PI)*h,B=Math.sin(.5*Math.PI)*h,ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-B,r:P/2||Y||5}),className:"link-point-top",name:"link-point-top"})),$&&(g=Math.cos(.9*Math.PI)*h,B=Math.sin(.9*Math.PI)*h,ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-B,r:P/2||Y||5}),className:"link-point-left",name:"link-point-left"})),rt&&(g=Math.cos(1.3*Math.PI)*h,B=Math.sin(1.3*Math.PI)*h,ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-B,r:P/2||Y||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),z&&(g=Math.cos(1.7*Math.PI)*h,B=Math.sin(1.7*Math.PI)*h,ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},k),{x:g,y:-B,r:P/2||Y||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(H){for(var ht=this.getSize(H)[0],dt=3*ht/8,yt=H.innerR||dt,Mt=[],$=0;$<5;$++){var lt=Math.cos((18+72*$)/180*Math.PI)*ht,rt=Math.sin((18+72*$)/180*Math.PI)*ht,z=Math.cos((54+72*$)/180*Math.PI)*yt,P=Math.sin((54+72*$)/180*Math.PI)*yt;$===0?Mt.push(["M",lt,-rt]):Mt.push(["L",lt,-rt]),Mt.push(["L",z,-P])}return Mt.push(["Z"]),Mt},getShapeStyle:function(H){var ht=this.getOptions(H).style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt),Mt=this.getPath(H);return Object(i.a)({path:Mt},yt)},update:function(H,ht){var dt=ht.getContainer(),yt=this.getOptions({}).style,Mt=this.getPath(H),$={stroke:H.color,path:Mt},lt=ht.get("keyShape"),rt=Object(m.A)({},yt,lt.attr(),$);rt=Object(m.A)(rt,H.style),this.updateShape(H,ht,rt,!0),this.updateLinkPoints(H,dt)},updateLinkPoints:function(H,ht){var dt=this.getOptions({}).linkPoints,yt=ht.find(function(Ut){return Ut.get("className")==="link-point-left"}),Mt=ht.find(function(Ut){return Ut.get("className")==="link-point-right"}),$=ht.find(function(Ut){return Ut.get("className")==="link-point-top"}),lt=ht.find(function(Ut){return Ut.get("className")==="link-point-left-bottom"}),rt=ht.find(function(Ut){return Ut.get("className")==="link-point-right-bottom"}),z=dt,P=yt||Mt||$||lt||rt;P&&(z=P.attr());var Y=Object(m.A)({},z,H.linkPoints),k=Y.fill,h=Y.stroke,g=Y.lineWidth,B=Y.size/2;B||(B=Y.r);var V=H.linkPoints?H.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},q=V.left,it=V.right,ot=V.top,At=V.leftBottom,gt=V.rightBottom,mt=this.getSize(H)[0],Ot={r:B,fill:k,stroke:h,lineWidth:g},It=Math.cos(.1*Math.PI)*mt,Dt=Math.sin(.1*Math.PI)*mt;Mt?it||it===void 0?Mt.attr(Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt})):Mt.remove():it&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),It=Math.cos(.5*Math.PI)*mt,Dt=Math.sin(.5*Math.PI)*mt,$?ot||ot===void 0?$.attr(Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt})):$.remove():ot&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),It=Math.cos(.9*Math.PI)*mt,Dt=Math.sin(.9*Math.PI)*mt,yt?q||q===void 0?yt.attr(Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt})):yt.remove():q&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),It=Math.cos(1.3*Math.PI)*mt,Dt=Math.sin(1.3*Math.PI)*mt,lt?At||At===void 0?lt.attr(Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt})):lt.remove():At&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),It=Math.cos(1.7*Math.PI)*mt,Dt=Math.sin(1.7*Math.PI)*mt,rt?gt||gt===void 0?rt.attr(Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt})):lt.remove():gt&&ht.addShape("circle",{attrs:Object(i.a)(Object(i.a)({},Ot),{x:It,y:-Dt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var l=function(H){var ht=H.x,dt=H.y;return{x:ht,y:dt,centerX:ht,centerY:dt,minX:ht,minY:dt,maxX:ht,maxY:dt,height:0,width:0}},M=function(H,ht){return 2*Math.abs(H.centerX-ht.centerX)<H.width+ht.width&&2*Math.abs(H.centerY-ht.centerY)<H.height+ht.height},j=function(H){for(var ht=[],dt={},yt=H.length,Mt=0;Mt<yt;Mt++){var $=H[Mt];$.id=$.x+"|||"+$.y,dt[$.id]=$,ht.push($)}return ht},y=function(H){return H=j(H)},n=function(H,ht){return[H,{x:H.x,y:ht.y},ht]},s=function(H,ht){return H.width===0&&H.height===0?H:{centerX:H.centerX,centerY:H.centerY,minX:H.minX-ht,minY:H.minY-ht,maxX:H.maxX+ht,maxY:H.maxY+ht,height:H.height+2*ht,width:H.width+2*ht}},d=function(H,ht,dt){var yt=function(lt,rt){var z=Math.abs(lt.x-rt.centerX),P=Math.abs(lt.y-rt.centerY);return z===0&&P===0?0:z/rt.width>P/rt.height}(ht,H);if(yt===0){var Mt=H.centerX,$=H.centerY;return dt.y<ht.y?$=H.minY:dt.x>ht.x?Mt=H.maxX:dt.x<ht.x?Mt=H.minX:dt.x===ht.x&&($=H.maxY),{x:Mt,y:$}}return yt?{x:ht.x>H.centerX?H.maxX:H.minX,y:ht.y}:{x:ht.x,y:ht.y>H.centerY?H.maxY:H.minY}},E=function(H,ht){var dt=Math.min(H.minX,ht.minX),yt=Math.min(H.minY,ht.minY),Mt=Math.max(H.maxX,ht.maxX),$=Math.max(H.maxY,ht.maxY);return{centerX:(dt+Mt)/2,centerY:(yt+$)/2,minX:dt,minY:yt,maxX:Mt,maxY:$,height:$-yt,width:Mt-dt}},O=function(H){var ht=H.minX,dt=H.minY,yt=H.maxX,Mt=H.maxY;return[{x:ht,y:dt},{x:yt,y:dt},{x:yt,y:Mt},{x:ht,y:Mt}]},C=function(H,ht){var dt=H.x,yt=H.y;return dt<ht.minX||dt>ht.maxX||yt<ht.minY||yt>ht.maxY},v=function(H,ht){return Math.abs(H.x-ht.x)+Math.abs(H.y-ht.y)},x=function(H,ht,dt,yt,Mt){return v(H,ht)+v(H,dt)+function($,lt){var rt=0;return lt.forEach(function(z){z&&($.x===z.x&&(rt+=-2),$.y===z.y&&(rt+=-2))}),rt}(H,[ht,dt,yt,Mt])},T=function(H,ht,dt,yt){var Mt=dt.x-H.x,$=dt.y-H.y,lt=yt.x-H.x,rt=yt.y-H.y,z=dt.x-ht.x,P=dt.y-ht.y,Y=yt.x-ht.x,k=yt.y-ht.y;return(Mt*rt-$*lt)*(z*k-P*Y)<=0&&(Mt*P-$*z)*(lt*k-rt*Y)<=0},N=function(H,ht,dt){if(dt.width===0&&dt.height===0)return!1;var yt=O(dt),Mt=yt[0],$=yt[1],lt=yt[2],rt=yt[3];return T(H,ht,Mt,$)||T(H,ht,Mt,rt)||T(H,ht,$,lt)||T(H,ht,lt,rt)},X=function(H,ht,dt,yt,Mt,$,lt){var rt=[],z=[ht],P={},Y={},k={};Y[ht.id]=0,k[ht.id]=x(ht,dt,ht);var h={};H.forEach(function(V){h[V.id]=V});for(var g=function(){var q,it,ot,At,gt=1/0;if(z.forEach(function(Ot){k[Ot.id]<gt&&(gt=k[Ot.id],q=Ot)}),q===dt){var mt=[];return function Ot(It,Dt,Ut,Ct,Vt){Vt===void 0&&(Vt=0),It.unshift(Dt[Ct]),Ut[Ct]&&Ut[Ct]!==Ct&&Vt<=100&&Ot(It,Dt,Ut,Ut[Ct],Vt+1)}(mt,h,P,dt.id),{value:mt}}ot=q,(At=(it=z).indexOf(ot))>-1&&it.splice(At,1),rt.push(q),function(Ot,It,Dt,Ut){var Ct=[];return Ot.forEach(function(Vt){Vt!==It&&(Vt.x!==It.x&&Vt.y!==It.y||N(Vt,It,Dt)||N(Vt,It,Ut)||Ct.push(Vt))}),j(Ct)}(H,q,yt,Mt).forEach(function(Ot){if(rt.indexOf(Ot)===-1){z.indexOf(Ot)===-1&&z.push(Ot);var It=k[q.id]+v(q,Ot);Y[Ot.id]&&It>=Y[Ot.id]||(P[Ot.id]=q.id,Y[Ot.id]=It,k[Ot.id]=Y[Ot.id]+x(Ot,dt,ht,$,lt))}})};z.length;){var B=g();if(S(B)==="object")return B.value}return[ht,dt]},tt=function(H,ht){var dt=[],yt=H[0];return dt.push("M"+yt.x+" "+yt.y),H.forEach(function(Mt,$){var lt=H[$+1],rt=H[$+2];if(lt&&rt)if(function(k,h,g){return!(k.x===h.x&&h.x===g.x||k.y===h.y&&h.y===g.y)}(Mt,lt,rt)){var z=function(k,h,g,B){var V=v(k,h),q=v(g,h);return V<B&&(B=V),q<B&&(B=q),[{x:h.x-B/V*(h.x-k.x),y:h.y-B/V*(h.y-k.y)},{x:h.x-B/q*(h.x-g.x),y:h.y-B/q*(h.y-g.y)}]}(Mt,lt,rt,ht),P=z[0],Y=z[1];dt.push("L"+P.x+" "+P.y),dt.push("Q"+lt.x+" "+lt.y+" "+Y.x+" "+Y.y),dt.push("L"+Y.x+" "+Y.y)}else dt.push("L"+lt.x+" "+lt.y);else lt&&dt.push("L"+lt.x+" "+lt.y)}),dt.join("")},nt=function(H,ht,dt,yt,Mt){var $,lt;if(dt&&dt.getType()?dt.getType()==="combo"?(($=dt.getKeyShape().getCanvasBBox()||l(H)).centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2):$=dt.getBBox():$=l(H),yt&&yt.getType()?yt.getType()==="combo"?((lt=yt.getKeyShape().getCanvasBBox()||l(ht)).centerX=(lt.minX+lt.maxX)/2,lt.centerY=(lt.minY+lt.maxY)/2):lt=yt&&yt.getBBox():lt=l(ht),M($,lt))return y(n(H,ht));var rt=s($,Mt),z=s(lt,Mt);if(M(rt,z))return y(n(H,ht));var P=d(rt,H,ht),Y=d(z,ht,H),k=function(it){it===void 0&&(it=[]);var ot=[],At=[];it.forEach(function(Dt){ot.push(Dt.x),At.push(Dt.y)});var gt=Math.min.apply(Math,ot),mt=Math.max.apply(Math,ot),Ot=Math.min.apply(Math,At),It=Math.max.apply(Math,At);return{centerX:(gt+mt)/2,centerY:(Ot+It)/2,maxX:mt,maxY:It,minX:gt,minY:Ot,height:It-Ot,width:mt-gt}}([P,Y]),h=E(rt,k),g=E(z,k),B=[];B=(B=B.concat(O(h))).concat(O(g));var V={x:(H.x+ht.x)/2,y:(H.y+ht.y)/2};[k,h,g].forEach(function(it){B=B.concat(function(ot,At){return function(gt,mt){return mt<gt.minX||mt>gt.maxX?[]:[{x:mt,y:gt.minY},{x:mt,y:gt.maxY}]}(ot,At.x).concat(function(gt,mt){return mt<gt.minY||mt>gt.maxY?[]:[{x:gt.minX,y:mt},{x:gt.maxX,y:mt}]}(ot,At.y))}(it,V).filter(function(ot){return C(ot,rt)&&C(ot,z)}))}),[{x:P.x,y:Y.y},{x:Y.x,y:P.y}].forEach(function(it){C(it,rt)&&C(it,z)&&B.push(it)}),B.unshift(P),B.push(Y),B=j(B);var q=X(B,P,Y,$,lt,H,ht);return q.unshift(H),q.push(ht),y(q)};function vt(wt){return(vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(wt)}var ft={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(H,ht){return Math.abs(H.x-ht.x)+Math.abs(H.y-ht.y)},fallbackRoute:function(H,ht,dt,yt,Mt){return y(nt(H,ht,dt,yt,Mt.offset))}},bt=function(H,ht){var dt=Math.floor(Math.abs(H/ht));return dt<0?0:(H<0?-1:1)*dt},St=function(H,ht){var dt=ht.x-H.x,yt=ht.y-H.y;return dt||yt?(360+180*Math.atan2(yt,dt)/Math.PI)%360:0},pt=function(H,ht){var dt=Math.abs(H-ht);return dt>180?360-dt:dt},ct=function(H,ht,dt){for(var yt=1/0,Mt=0,$=ht.length;Mt<$;Mt++){var lt=dt(H,ht[Mt]);lt<yt&&(yt=lt)}return yt},zt=function(H,ht,dt,yt,Mt){var $=[];if(!dt)return $;var lt=Mt.directions,rt=Mt.offset,z=dt.getBBox(),P=ht.x>z.minX&&ht.x<z.maxX&&ht.y>z.minY&&ht.y<z.maxY,Y=s(z,rt);for(var k in Y)Y[k]=bt(Y[k],Mt.gridSize);if(P)for(var h=0,g=lt;h<g.length;h++){var B=g[h],V=[[{x:Y.minX,y:Y.minY},{x:Y.maxX,y:Y.minY}],[{x:Y.minX,y:Y.minY},{x:Y.minX,y:Y.maxY}],[{x:Y.maxX,y:Y.minY},{x:Y.maxX,y:Y.maxY}],[{x:Y.minX,y:Y.maxY},{x:Y.maxX,y:Y.maxY}]];for(k=0;k<4;k++){var q,it=V[k];(q=p.n.getLineIntersect(H,{x:H.x+B.stepX*Y.width,y:H.y+B.stepY*Y.height},it[0],it[1]))&&!N(H,q,z)&&(q.id=q.x+"|||"+q.y,$.push(q))}}else(q=d(Y,H,yt)).id=q.x+"|||"+q.y,$.push(q);return $},Nt=function(H,ht,dt,yt,Mt){var $=Object(m.e)(ft,Mt);$.obstacles=$.obstacles||[];var lt=function(Ot,It,Dt){var Ut={};return Ot.forEach(function(Ct){if(Ct)for(var Vt=s(Ct.getBBox(),Dt),Ht=bt(Vt.minX,It);Ht<=bt(Vt.maxX,It);Ht+=1)for(var re=bt(Vt.minY,It);re<=bt(Vt.maxY,It);re+=1)Ut[Ht+"|||"+re]=!0}),Ut}($.obstacles.concat([dt,yt]),$.gridSize,$.offset),rt={x:bt(H.x,$.gridSize),y:bt(H.y,$.gridSize)},z={x:bt(ht.x,$.gridSize),y:bt(ht.y,$.gridSize)};H.id=rt.x+"|||"+rt.y,ht.id=z.x+"|||"+z.y;var P=zt(rt,H,dt,z,$),Y=zt(z,ht,yt,rt,$);P.forEach(function(Ot){delete lt[Ot.id]}),Y.forEach(function(Ot){delete lt[Ot.id]});for(var k={},h={},g={},B={},V={},q=0;q<P.length;q++){var it=P[q];k[it.id]=it,B[it.id]=0,V[it.id]=ct(it,Y,$.distFunc)}for(var ot=function(It,Dt){var Ut,Ct=St(It,Dt);if(g[It.id]){var Vt=St({x:parseFloat(g[It.id].split("|||")[0]),y:parseFloat(g[It.id].split("|||")[1])},It);Ut=pt(Vt,Ct)}else{var Ht=St(rt,It);Ut=pt(Ht,Ct)}return Ut},At=$.maximumLoops,gt=function(){var It,Dt=1/0;for(var Ut in k)V[Ut]<=Dt&&(Dt=V[Ut],It=k[Ut]);if(!It)return"break";if(Y.findIndex(function(we){return we.x===It.x&&we.y===It.y})>-1)return{value:function(we){var Ne=[ht],Ke={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we};for(ot(Ke,z)&&Ne.unshift({x:Ke.x===z.x?ht.x:Ke.x*$.gridSize,y:Ke.y===z.y?ht.y:Ke.y*$.gridSize});g[we]&&g[we]!==we;){var pn={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we},hn=g[we],kn={x:parseFloat(hn.split("|||")[0]),y:parseFloat(hn.split("|||")[1]),id:hn};ot(kn,pn)&&Ne.unshift({x:kn.x===pn.x?Ne[0].x:kn.x*$.gridSize,y:kn.y===pn.y?Ne[0].y:kn.y*$.gridSize}),we=hn}var Tn=parseFloat(we.split("|||")[0]),Rn=parseFloat(we.split("|||")[1]);return Ne[0].x=Tn===rt.x?H.x:Ne[0].x,Ne[0].y=Rn===rt.y?H.y:Ne[0].y,Ne.unshift(H),Ne}(It.id)};delete k[It.id],h[It.id]=!0;for(var Ct=0;Ct<$.directions.length;Ct++){var Vt=$.directions[Ct],Ht={x:It.x+Vt.stepX,y:It.y+Vt.stepY,id:It.x+Vt.stepX+"|||"+(It.y+Vt.stepY)};if(!h[Ht.id]){var re=ot(It,Ht);if(!(re>$.maxAllowedDirectionChange||lt[Ht.id])){k[Ht.id]||(k[Ht.id]=Ht);var pe=$.distFunc(It,Ht)+(isNaN($.penalties[re])?$.gridSize:$.penalties[re]),ye=B[It.id]+pe;B[Ht.id]&&ye>=B[Ht.id]||(g[Ht.id]=It.id,B[Ht.id]=ye,V[Ht.id]=ye+ct(Ht,Y,$.distFunc))}}}At-=1};Object.keys(k).length>0&&At>0;){var mt=gt();if(vt(mt)==="object")return mt.value;if(mt==="break")break}return $.fallbackRoute(H,ht,dt,yt,$)};Object(p.q)("polyline",{options:{color:p.e.defaultEdge.color,size:p.e.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:p.e.defaultEdge.style.stroke,lineAppendWidth:p.e.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:p.e.edgeLabel.style.fill,fontSize:p.e.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:500,gridSize:10},stateStyles:Object(i.a)({},p.e.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(H,ht){var dt=this.getShapeStyle(H);return dt.radius===0&&delete dt.radius,ht.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:dt})},getShapeStyle:function(H){var ht=this.options.style,dt={stroke:H.color},yt=Object(m.A)({},ht,dt,H.style);H=this.getPathPoints(H),this.radius=yt.radius,this.offset=yt.offset;var Mt=H.startPoint,$=H.endPoint,lt=this.getControlPoints(H),rt=[Mt];lt&&(rt=rt.concat(lt)),rt.push($);var z=H.sourceNode,P=H.targetNode,Y=yt.radius,k=this.options.routeCfg;k||(k={}),k.offset=yt.offset;var h=this.getPath(rt,z,P,Y,k);return(Object(m.m)(h)&&h.length<=1||Object(m.x)(h)&&h.indexOf("L")===-1)&&(h="M0 0, L0 0"),(isNaN(Mt.x)||isNaN(Mt.y)||isNaN($.x)||isNaN($.y))&&(h="M0 0, L0 0"),Object(m.A)({},p.e.defaultEdge.style,yt,{lineWidth:H.size,path:h})},updateShapeStyle:function(H,ht){var dt=ht.getContainer(),yt={stroke:H.color},Mt=dt.find(function(ot){return ot.get("className")==="edge-shape"})||ht.getKeyShape(),$=H.size,lt=(H=this.getPathPoints(H)).startPoint,rt=H.endPoint,z=this.getControlPoints(H),P=[lt];z&&(P=P.concat(z)),P.push(rt);var Y=Mt.attr(),k=Object(m.A)({},yt,Y,H.style),h=H.sourceNode,g=H.targetNode,B=k.radius,V=this.options.routeCfg;V||(V={}),V.offset=k.offset;var q=this.getPath(P,h,g,B,V);(Object(m.m)(q)&&q.length<=1||Object(m.x)(q)&&q.indexOf("L")===-1)&&(q="M0 0, L0 0"),(isNaN(lt.x)||isNaN(lt.y)||isNaN(rt.x)||isNaN(rt.y))&&(q="M0 0, L0 0"),Y.endArrow&&k.endArrow===!1&&(H.style.endArrow={path:""}),Y.startArrow&&k.startArrow===!1&&(H.style.startArrow={path:""});var it=Object(m.A)(yt,Mt.attr(),{lineWidth:$,path:q},H.style);Mt&&Mt.attr(it)},getPath:function(H,ht,dt,yt,Mt){var $;if(!Mt.offset||H.length>2){if(yt)return tt(H,yt);var lt=[];return Object(m.f)(H,function(rt,z){z===0?lt.push(["M",rt.x,rt.y]):lt.push(["L",rt.x,rt.y])}),lt}return yt?($=Nt(H[0],H[H.length-1],ht,dt,Mt),tt($,yt)):($=Nt(H[0],H[H.length-1],ht,dt,Mt),p.n.pointsToPolygon($))}},"single-edge")}]).default})},Sq3C:function(Gn,Gt,_){var at=_("sKgW"),a=_("zoYe"),A=_("wy8a"),e=_("quyA"),i=_("Z1HP"),p=_("Em2t"),m=Math.ceil;function S(l,M){M=M===void 0?" ":a(M);var j=M.length;if(j<2)return j?at(M,l):M;var y=at(M,m(l/i(M)));return e(M)?A(p(y),0,l).join(""):y.slice(0,l)}Gn.exports=S},Sxd8:function(Gn,Gt,_){var at=_("ZCgT");function a(A){var e=at(A),i=e%1;return e===e?i?e-i:e:0}Gn.exports=a},TEat:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return y});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("w02o"),i=_("tKoa");function p(n,s,d){var E=d.map(function(v){return v[s]}).filter(function(v){return v!==void 0}),O=E.length>0?Math.max.apply(Math,E):0,C=Math.abs(n)%360;return C?O*360/C:O}function m(n){var s=n.chart,d=n.options,E=d.data,O=d.barStyle,C=d.color,v=d.tooltip,x=d.colorField,T=d.type,N=d.xField,X=d.yField;s.data(E);var tt=Object(A.b)({},n,{options:{tooltip:v,seriesField:x,interval:{style:O,color:C,shape:T==="line"?"line":"intervel"},minColumnWidth:d.minBarWidth,maxColumnWidth:d.maxBarWidth,columnBackground:d.barBackground}});return Object(i.c)(tt),T==="line"&&Object(i.e)({chart:s,options:{xField:N,yField:X,seriesField:x,point:{shape:"circle",color:C}}}),n}function S(n){var s,d=n.options,E=d.yField,O=d.data,C=d.maxAngle;return Object(A.e)(Object(e.f)((s={},s[E]={min:0,max:p(C,E,O)},s)))(n)}function l(n){var s=n.chart,d=n.options,E=d.radius,O=d.innerRadius,C=d.startAngle,v=d.endAngle;return s.coordinate({type:"polar",cfg:{radius:E,innerRadius:O,startAngle:C,endAngle:v}}).transpose(),n}function M(n){var s=n.chart,d=n.options,E=d.xField,O=d.xAxis;return s.axis(E,O),n}function j(n){return Object(A.e)(m,S,M,l,e.c,e.a,e.j,e.k,e.d,Object(e.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="radial-bar",d}return s.prototype.changeData=function(d){this.updateOption({data:d}),S({chart:this.chart,options:this.options}),this.chart.changeData(d)},s.prototype.getDefaultOptions=function(){return Object(A.b)({},n.prototype.getDefaultOptions.call(this),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240})},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},U8jP:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return m});var at=_("R5nb");_.d(Gt,"Shape",function(){return at});var a=_("aFU3");for(var A in a)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(A)<0&&function(S){_.d(Gt,S,function(){return a[S]})}(A);var e=_("sYIZ");_.d(Gt,"Canvas",function(){return e.a});var i=_("wq2r");_.d(Gt,"Group",function(){return i.a});var p=_("nCnq");_.d(Gt,"getArcParams",function(){return p.a});var m="0.5.6"},Uo7R:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("zJSt"),A=_("w02o"),e=_("YuPD"),i=_("tKoa"),p=_("iTfj"),m={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(pt){return pt.id},source:function(pt){return pt.source},target:function(pt){return pt.target},sourceWeight:function(pt){return pt.value||1},targetWeight:function(pt){return pt.value||1},sortBy:null};function S(St,pt,ct){Object(p.forIn)(St,function(zt,Nt){zt.inEdges=pt.filter(function(wt){return""+ct.target(wt)==""+Nt}),zt.outEdges=pt.filter(function(wt){return""+ct.source(wt)==""+Nt}),zt.edges=zt.outEdges.concat(zt.inEdges),zt.frequency=zt.edges.length,zt.value=0,zt.inEdges.forEach(function(wt){zt.value+=ct.targetWeight(wt)}),zt.outEdges.forEach(function(wt){zt.value+=ct.sourceWeight(wt)})})}function l(St,pt){var ct={weight:function(wt,H){return H.value-wt.value},frequency:function(wt,H){return H.frequency-wt.frequency},id:function(wt,H){return(""+pt.id(wt)).localeCompare(""+pt.id(H))}},zt=ct[pt.sortBy];!zt&&Object(p.isFunction)(pt.sortBy)&&(zt=pt.sortBy),zt&&St.sort(zt)}function M(St,pt){var ct=St.length;if(!ct)throw new TypeError("Invalid nodes: it's empty!");if(pt.weight){var zt=pt.nodePaddingRatio;if(zt<0||zt>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var Nt=zt/(2*ct),wt=pt.nodeWidthRatio;if(wt<=0||wt>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var H=0;St.forEach(function(dt){H+=dt.value}),St.forEach(function(dt){dt.weight=dt.value/H,dt.width=dt.weight*(1-zt),dt.height=wt}),St.forEach(function(dt,yt){for(var Mt=0,$=yt-1;$>=0;$--)Mt+=St[$].width+2*Nt;var lt=dt.minX=Nt+Mt,rt=dt.maxX=dt.minX+dt.width,z=dt.minY=pt.y-wt/2,P=dt.maxY=z+wt;dt.x=[lt,rt,rt,lt],dt.y=[z,z,P,P]})}else{var ht=1/ct;St.forEach(function(dt,yt){dt.x=(yt+.5)*ht,dt.y=pt.y})}return St}function j(St,pt,ct){if(ct.weight){var zt={};Object(p.forIn)(St,function(Nt,wt){zt[wt]=Nt.value}),pt.forEach(function(Nt){var wt=ct.source(Nt),H=ct.target(Nt),ht=St[wt],dt=St[H];if(ht&&dt){var yt=zt[wt],Mt=ct.sourceWeight(Nt),$=ht.minX+(ht.value-yt)/ht.value*ht.width,lt=$+Mt/ht.value*ht.width;zt[wt]-=Mt;var rt=zt[H],z=ct.targetWeight(Nt),P=dt.minX+(dt.value-rt)/dt.value*dt.width,Y=P+z/dt.value*dt.width;zt[H]-=z;var k=ct.y;Nt.x=[$,lt,P,Y],Nt.y=[k,k,k,k],Nt.source=ht,Nt.target=dt}})}else pt.forEach(function(Nt){var wt=St[ct.source(Nt)],H=St[ct.target(Nt)];wt&&H&&(Nt.x=[wt.x,H.x],Nt.y=[wt.y,H.y],Nt.source=wt,Nt.target=H)});return pt}function y(St){return Object(p.assign)({},m,St)}function n(St,pt){var ct=y(St),zt={},Nt=pt.nodes,wt=pt.links;Nt.forEach(function(dt){var yt=ct.id(dt);zt[yt]=dt}),S(zt,wt,ct),l(Nt,ct);var H=M(Nt,ct),ht=j(zt,wt,ct);return{nodes:H,links:ht}}var s=_("DyAw"),d="x",E="y",O="name",C="source";function v(St){var pt=St.options,ct=pt.data,zt=pt.sourceField,Nt=pt.targetField,wt=pt.weightField,H=pt.nodePaddingRatio,ht=pt.nodeWidthRatio,dt=Object(s.b)(ct,zt,Nt,wt),yt=n({weight:!0,nodePaddingRatio:H,nodeWidthRatio:ht},dt),Mt=yt.nodes,$=yt.links,lt=Mt.map(function(z){return{id:z.id,x:z.x,y:z.y,name:z.name}}),rt=$.map(function(z){return{source:z.source.name,target:z.target.name,x:z.x,y:z.y,value:z.value}});return Object(at.a)(Object(at.a)({},St),{ext:Object(at.a)(Object(at.a)({},St.ext),{chordData:{nodesData:lt,edgesData:rt}})})}function x(St){var pt,ct=St.chart;return ct.scale((pt={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},pt[O]={sync:"color"},pt[C]={sync:"color"},pt)),St}function T(St){var pt=St.chart;return pt.axis(!1),St}function N(St){var pt=St.chart;return pt.legend(!1),St}function X(St){var pt=St.chart;return pt.tooltip({showTitle:!1,showMarkers:!1}),St}function tt(St){var pt=St.chart;return pt.coordinate("polar").reflect("y"),St}function nt(St){var pt=St.chart,ct=St.options,zt=St.ext.chordData.nodesData,Nt=ct.nodeStyle,wt=ct.label,H=pt.createView();return H.data(zt),Object(i.f)({chart:H,options:{xField:d,yField:E,seriesField:O,polygon:{style:Nt},label:wt,tooltip:!1}}),St}function vt(St){var pt=St.chart,ct=St.options,zt=St.ext.chordData.edgesData,Nt=ct.edgeStyle,wt=ct.tooltip,H=pt.createView();H.data(zt);var ht={xField:d,yField:E,seriesField:C,edge:{style:Nt,shape:"arc"},tooltip:wt};return Object(i.b)({chart:H,options:ht}),St}function ft(St){return Object(e.e)(v,tt,x,T,N,X,vt,nt,A.c,A.a,A.j)(St)}var bt=function(St){Object(at.b)(pt,St);function pt(){var ct=St!==null&&St.apply(this,arguments)||this;return ct.type="chord",ct}return pt.prototype.getDefaultOptions=function(){return{nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(zt,Nt){var wt=(zt[0]+zt[1])/2,H=wt>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:H,content:Nt}}},tooltip:{fields:["source","target","value"],formatter:function(zt){var Nt=zt.source,wt=zt.target,H=zt.value;return{name:Nt+" -> "+wt,value:H}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05}},pt.prototype.getSchemaAdaptor=function(){return ft},pt}(a.a)},VdJl:function(Gn,Gt,_){"use strict";_.r(Gt);var at=_("nKUr"),a=_("14J3"),A=_("BMrR"),e=_("jCWc"),i=_("kPKH"),p=_("q1tI"),m=_("tMyG"),S=_("hKUY"),l=_("IzEo"),M=_("bx4M"),j=_("bP8k"),y=_("gFTJ"),n=function(C){var v=C.data;return console.log(v),Object(at.jsx)(M.a,{title:v.name,children:Object(at.jsx)(y.b,{bordered:!0,column:1,size:"small",style:{minHeight:"400px"},children:v.data.map(function(x){return Object(at.jsx)(y.b.Item,{label:x.key,children:x.value},x.key)})})})},s=n,d=function(){var C=[{title:"\u8D44\u4EA7",value:76467,text:"\u5468\u540C\u6BD4",percent:6.66},{title:"\u4ED3\u4F4D",value:76467,text:"\u5468\u540C\u6BD4",percent:6.66},{title:"\u6760\u6746",value:76467,text:"\u5468\u540C\u6BD4",percent:6.66},{title:"\u56DE\u6D4B\u6760\u6746",value:76467,text:"\u5468\u540C\u6BD4",percent:6.66},{title:"\u56DE\u6D4B\u5E02\u503C",value:76467,text:"\u5468\u540C\u6BD4",percent:6.66},{title:"\u56DE\u6D4B\u4ED3\u4F4D",value:76467,text:"\u5468\u540C\u6BD4",percent:-6.66}],v=[{name:"Binance",data:[{key:"\u5E94\u6709\u4ED3\u4F4D",value:23635.66226565},{key:"\u603B\u4ED3\u4F4D",value:23600},{key:"\u6700\u5927\u4ED3\u4F4D",value:"\u7A7A\uFF1A ".concat(-121780," \u591A\uFF1A",73067)},{key:"\u7F8E\u5143\u4EF7\u503C",value:52056.04642897},{key:"\u5B9E\u9645\u6760\u6746",value:.45335751},{key:"\u94B1\u5305\u4F59\u989D(btc)",value:1.26327045},{key:"\u94B1\u5305\u4F59\u989D(usd)",value:0},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F",value:.02687466},{key:"\u4FDD\u8BC1\u91D1\u4F59\u989D",value:1.29014511},{key:"\u53EF\u7528\u4F59\u989D",value:0},{key:"\u4EA4\u6613\u5BF9",value:"BTCUSD_PERP"},{key:"\u6760\u6746",value:2},{key:"\u4ED3\u4F4D",value:23600},{key:"\u5408\u7EA6\u9762\u503C",value:0},{key:"\u6301\u4ED3\u5747\u4EF7",value:38644.5},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F1",value:.02688477}]},{name:"FTX",data:[{key:"\u5E94\u6709\u4ED3\u4F4D",value:23635.66226565},{key:"\u603B\u4ED3\u4F4D",value:23600},{key:"\u6700\u5927\u4ED3\u4F4D",value:"\u7A7A\uFF1A ".concat(-121780," \u591A\uFF1A",73067)},{key:"\u7F8E\u5143\u4EF7\u503C",value:52056.04642897},{key:"\u5B9E\u9645\u6760\u6746",value:.45335751},{key:"\u94B1\u5305\u4F59\u989D(btc)",value:1.26327045},{key:"\u94B1\u5305\u4F59\u989D(usd)",value:0},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F",value:.02687466},{key:"\u4FDD\u8BC1\u91D1\u4F59\u989D",value:1.29014511},{key:"\u53EF\u7528\u4F59\u989D",value:0},{key:"\u4EA4\u6613\u5BF9",value:"BTCUSD_PERP"},{key:"\u6760\u6746",value:2},{key:"\u4ED3\u4F4D",value:23600},{key:"\u5408\u7EA6\u9762\u503C",value:0},{key:"\u6301\u4ED3\u5747\u4EF7",value:38644.5},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F1",value:.02688477}]},{name:"Kraken",data:[{key:"\u5E94\u6709\u4ED3\u4F4D",value:23635.66226565},{key:"\u603B\u4ED3\u4F4D",value:23600},{key:"\u6700\u5927\u4ED3\u4F4D",value:"\u7A7A\uFF1A ".concat(-121780," \u591A\uFF1A",73067)},{key:"\u7F8E\u5143\u4EF7\u503C",value:52056.04642897},{key:"\u5B9E\u9645\u6760\u6746",value:.45335751},{key:"\u94B1\u5305\u4F59\u989D(btc)",value:1.26327045},{key:"\u94B1\u5305\u4F59\u989D(usd)",value:0},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F",value:.02687466},{key:"\u4FDD\u8BC1\u91D1\u4F59\u989D",value:1.29014511},{key:"\u53EF\u7528\u4F59\u989D",value:0},{key:"\u4EA4\u6613\u5BF9",value:"BTCUSD_PERP"},{key:"\u6760\u6746",value:2},{key:"\u4ED3\u4F4D",value:23600},{key:"\u5408\u7EA6\u9762\u503C",value:0},{key:"\u6301\u4ED3\u5747\u4EF7",value:38644.5},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F1",value:.02688477}]},{name:"Deribit",data:[{key:"\u5E94\u6709\u4ED3\u4F4D",value:23635.66226565},{key:"\u603B\u4ED3\u4F4D",value:23600},{key:"\u6700\u5927\u4ED3\u4F4D",value:"\u7A7A\uFF1A ".concat(-121780," \u591A\uFF1A",73067)},{key:"\u7F8E\u5143\u4EF7\u503C",value:52056.04642897},{key:"\u5B9E\u9645\u6760\u6746",value:.45335751},{key:"\u94B1\u5305\u4F59\u989D(btc)",value:1.26327045},{key:"\u94B1\u5305\u4F59\u989D(usd)",value:0},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F",value:.02687466},{key:"\u4FDD\u8BC1\u91D1\u4F59\u989D",value:1.29014511},{key:"\u53EF\u7528\u4F59\u989D",value:0},{key:"\u4EA4\u6613\u5BF9",value:"BTCUSD_PERP"},{key:"\u6760\u6746",value:2},{key:"\u4ED3\u4F4D",value:23600},{key:"\u5408\u7EA6\u9762\u503C",value:0},{key:"\u6301\u4ED3\u5747\u4EF7",value:38644.5},{key:"\u672A\u5B9E\u73B0\u76C8\u4E8F1",value:.02688477}]}],x=[{name:"BTCUSD",time:16122732e5,value:417363.7306933478},{name:"BTCUSD",time:16122735e5,value:277373.87041066086},{name:"\u672C\u7B56\u7565",time:16122732e5,value:217463.7306933478},{name:"\u672C\u7B56\u7565",time:16122735e5,value:117173.87041066086}],T={data:x,height:400,xField:"time",yField:"value",point:{size:5,shape:"diamond"},xAxis:{type:"time",tickCount:5,mask:`YY-MM-DD 
 HH:mm`},legend:{position:"top-right"},seriesField:"name"};return Object(at.jsxs)(m.a,{children:[Object(at.jsx)(A.a,{gutter:[16,16],children:Object(at.jsx)(i.a,{span:24,children:Object(at.jsx)(S.a,{title:"BTC \u8D8B\u52BF\u4E00\u53F7",updateTime:Date.now(),data:C,chartConfig:T})})}),Object(at.jsx)(A.a,{gutter:[16,16],children:v.map(function(N){return Object(at.jsx)(i.a,{sm:24/v.length,children:Object(at.jsx)(s,{data:N})},N.name)})})]})},E=Gt.default=d},WOQw:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var at=_("mrSG"),a=_("iTfj"),A=_("YuPD");function e(m,S){var l=m.xField,M=m.yField,j=m.colorField,y=m.shapeField,n=m.sizeField,s=m.styleField,d=m.rawFields,E=d===void 0?[]:d,O=[];if(S==="color")O=Object(at.d)([j||l],E);else if(S==="shape")O=Object(at.d)([y||l],E);else if(S==="size")O=Object(at.d)([n||l],E);else{O=Object(at.d)([l,M,j,y,n,s],E);var C=["x","y","color","shape","size","style"].indexOf(S),v=O[C];O.splice(C,1),O.unshift(v)}return Object(a.uniq)(O.filter(function(x){return!!x}))}function i(m,S){if(!!S)return function(){for(var l=[],M=0;M<arguments.length;M++)l[M]=arguments[M];var j={};return m.forEach(function(y,n){j[y]=l[n]}),delete j.undefined,S(j)}}function p(m){var S=m.chart,l=m.options,M=l.type,j=l.args,y=l.mapping,n=l.xField,s=l.yField,d=l.colorField,E=l.shapeField,O=l.sizeField,C=l.tooltipFields,v=l.label,x=l.state;if(!y)return m;var T=y.color,N=y.shape,X=y.size,tt=y.style,nt=y.tooltip,vt=S[M](j).position(n+"*"+s);if(Object(a.isString)(T))d?vt.color(d,T):vt.color(T);else if(Object(a.isFunction)(T)){var ft=e(l,"color");vt.color(ft.join("*"),i(ft,T))}else d&&vt.color(d,T);if(Object(a.isString)(N))E?vt.shape(E,[N]):vt.shape(N);else if(Object(a.isFunction)(N)){var ft=e(l,"shape");vt.shape(ft.join("*"),i(ft,N))}else E&&vt.shape(E,N);if(Object(a.isNumber)(X))O?vt.size(O,X):vt.size(X);else if(Object(a.isFunction)(X)){var ft=e(l,"size");vt.size(ft.join("*"),i(ft,X))}else O&&vt.size(O,X);if(Object(a.isFunction)(tt)){var ft=e(l,"style");vt.style(ft.join("*"),i(ft,tt))}else Object(a.isObject)(tt)&&vt.style(tt);if(C===!1?vt.tooltip(!1):Object(a.isEmpty)(C)||vt.tooltip(C.join("*"),i(C,nt)),v===!1)vt.label(!1);else if(v){var bt=v.callback,St=v.fields,pt=Object(at.c)(v,["callback","fields"]);vt.label({fields:St||[s],callback:bt,cfg:Object(A.o)(pt)})}return x&&vt.state(x),[n,s].filter(function(ct){return ct!==d}).forEach(function(ct){S.legend(ct,!1)}),Object(at.a)(Object(at.a)({},m),{ext:{geometry:vt}})}},WXeg:function(Gn,Gt){},WbAE:function(Gn,Gt){},XiRp:function(Gn,Gt){},XloR:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return S});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("hJqF"),i=_("kXyF"),p=_("iTfj"),m=function(l){Object(at.b)(M,l);function M(){return l!==null&&l.apply(this,arguments)||this}return M.prototype.active=function(){var j=this.getView(),y=this.context.event;if(y.data){var n=y.data.items,s=j.geometries.filter(function(d){return d.type==="point"});Object(p.each)(s,function(d){Object(p.each)(d.elements,function(E){var O=Object(p.findIndex)(n,function(C){return C.data===E.data})!==-1;E.setState("active",O)})})}},M.prototype.getView=function(){return this.context.view},M}(i.InteractionAction);Object(i.registerAction)("marker-active",m),Object(i.registerInteraction)("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var S=function(l){Object(at.b)(M,l);function M(){var j=l!==null&&l.apply(this,arguments)||this;return j.type="line",j}return M.prototype.changeData=function(j){this.updateOption({data:j}),this.chart.changeData(j)},M.prototype.getDefaultOptions=function(){return Object(A.b)({},l.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1})},M.prototype.getSchemaAdaptor=function(){return e.a},M}(a.a)},XpFM:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return v});var at=_("mrSG"),a=_("zJSt"),A=_("iTfj"),e=_("w02o"),i=_("n/J0"),p=_("YuPD"),m=_("5kt6");function S(x){return x.map(function(T,N){var X;return X={},X[m.f]=T-(x[N-1]||0),X[m.e]=""+N,X}).filter(function(T){return!!T[m.f]})}function l(x){var T;return[(T={},T[m.d]=Object(A.clamp)(x,0,1),T)]}function M(x,T){var N=Object(A.get)(T,["ticks"],[]),X=Object(A.size)(N)?N:[0,Object(A.clamp)(x,0,1),1];return S(X)}function j(x){var T=x.chart,N=x.options,X=N.percent,tt=N.range,nt=N.radius,vt=N.innerRadius,ft=N.startAngle,bt=N.endAngle,St=N.axis,pt=N.indicator,ct=tt.color;if(pt){var zt=l(X),Nt=T.createView({id:m.b});Nt.data(zt),Nt.point().position(m.d+"*1").shape("gauge-indicator").customInfo({defaultColor:T.getTheme().defaultColor,indicator:pt}),Nt.coordinate("polar",{startAngle:ft,endAngle:bt,radius:vt*nt}),Nt.axis(m.d,St),Nt.scale(m.d,Object(p.k)(St,i.a))}var wt=M(X,N.range),H=T.createView({id:m.g});H.data(wt);var ht=Object(A.isString)(ct)?[ct,m.a]:ct;return H.interval().position("1*"+m.f).color(m.e,ht).adjust("stack"),H.coordinate("polar",{innerRadius:vt,radius:nt,startAngle:ft,endAngle:bt}).transpose(),x}function y(x){var T,N=x.chart,X=x.options,tt=X.type,nt=X.meter;if(tt==="meter"){var vt=X.innerRadius,ft=X.radius,bt=X.startAngle,St=X.endAngle,pt=N.getTheme().background,ct=pt;(!ct||ct==="transparent")&&(ct="#fff");var zt=N.createView({id:m.c});zt.data([(T={},T[m.e]="1",T[m.f]=1,T)]),zt.interval().position("1*"+m.f).color(ct).adjust("stack").shape("meter-gauge").customInfo(nt||{}),zt.coordinate("polar",{innerRadius:vt,radius:ft,startAngle:bt,endAngle:St}).transpose()}return x}function n(x){var T;return Object(p.e)(Object(e.f)((T={range:{min:0,max:1,maxLimit:1,minLimit:0}},T[m.d]={},T)))(x)}function s(x,T){var N=x.chart,X=x.options,tt=X.statistic,nt=X.percent;if(N.getController("annotation").clear(!0),tt){var vt=tt.content,ft=void 0;vt&&(ft=Object(p.b)({},{formatter:function(St){var pt=St.percent;return(pt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},vt)),Object(p.l)(N,{statistic:Object(at.a)(Object(at.a)({},tt),{content:ft})},{percent:nt})}return T&&N.render(!0),x}function d(x){var T=x.chart;return T.legend(!1),T.tooltip(!1),x}function E(x){return Object(p.e)(e.a,j,n,s,e.c,e.j,y,d)(x)}var O=_("kXyF");Object(O.registerShape)("point","gauge-indicator",{draw:function(T,N){var X=T.customInfo,tt=X.indicator,nt=X.defaultColor,vt=tt,ft=vt.pointer,bt=vt.pin,St=N.addGroup(),pt=this.parsePoint({x:0,y:0});return ft&&St.addShape("line",{name:"pointer",attrs:Object(at.a)({x1:pt.x,y1:pt.y,x2:T.x,y2:T.y,stroke:nt},ft.style)}),bt&&St.addShape("circle",{name:"pin",attrs:Object(at.a)({x:pt.x,y:pt.y,stroke:nt},bt.style)}),St}});var C=_("+Oe8");Object(O.registerShape)("interval","meter-gauge",{draw:function(T,N){var X=T.customInfo,tt=X.steps,nt=tt===void 0?50:tt,vt=X.stepRatio,ft=vt===void 0?.5:vt,bt=this.coordinate.endAngle-this.coordinate.startAngle,St=bt/nt,pt=0;ft>0&&ft<=1&&(St=bt/((1-ft)/ft*(nt-1)+nt),pt=St*(1-ft)/ft);var ct=N.addGroup();if(pt>0)for(var zt=this.coordinate.getCenter(),Nt=this.coordinate.getRadius(),wt=O.Util.getAngle(T,this.coordinate),H=wt.startAngle,ht=wt.endAngle,dt=H,yt=0;dt<ht&&yt<2*nt-1;yt++){var Mt=yt%2;if(Mt){var $=Object(C.getSectorPath)(zt.x,zt.y,Nt,dt,Math.min(dt+pt,ht),Nt*this.coordinate.innerRadius);ct.addShape("path",{name:"meter-gauge-mask",attrs:{path:$,fill:T.color,stroke:T.color,lineWidth:.5},capture:!1})}dt+=Mt?pt:St}return ct}});var v=function(x){Object(at.b)(T,x);function T(){var N=x!==null&&x.apply(this,arguments)||this;return N.type="gauge",N}return T.prototype.getDefaultOptions=function(){var N;return{percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(N={},N[m.f]={sync:"v"},N[m.d]={sync:"v",tickCount:5,tickInterval:.2},N),animation:!1}},T.prototype.changeData=function(N){this.updateOption({percent:N});var X=this.chart.views.find(function(nt){return nt.id===m.b});X&&X.data(l(N));var tt=this.chart.views.find(function(nt){return nt.id===m.g});tt&&tt.data(M(N,this.options.range)),s({chart:this.chart,options:this.options},!0)},T.prototype.getSchemaAdaptor=function(){return E},T}(a.a)},"Y+LX":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return m});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("sqD9"),i=_("DMQx");function p(S){var l=S.chart,M=S.options,j=M.xField,y=M.yField,n=M.xAxis,s=M.yAxis,d=M.barStyle,E=M.barWidthRatio,O=M.label,C=M.data,v=M.seriesField,x=M.isStack,T=M.minBarWidth,N=M.maxBarWidth;O&&!O.position&&(O.position="left",O.layout||(O.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var X=M.legend;v?X!==!1&&(X=Object(at.a)({position:x?"top-left":"right-top",reversed:!x},X||{})):X=!1,S.options.legend=X;var tt=M.tooltip;return v&&tt!==!1&&(tt=Object(at.a)({reversed:!x},tt||{})),S.options.tooltip=tt,l.coordinate().transpose(),Object(i.a)({chart:l,options:Object(at.a)(Object(at.a)({},M),{label:O,xField:y,yField:j,xAxis:s,yAxis:n,columnStyle:d,columnWidthRatio:E,minColumnWidth:T,maxColumnWidth:N,columnBackground:M.barBackground,data:C&&C.slice().reverse()})},!0)}var m=function(S){Object(at.b)(l,S);function l(){var M=S!==null&&S.apply(this,arguments)||this;return M.type="bar",M}return l.prototype.changeData=function(M){this.updateOption({data:M});var j=this.options,y=j.xField,n=j.yField,s=j.isPercent;this.chart.changeData(Object(e.a)(M,y,n,y,s))},l.prototype.getDefaultOptions=function(){return Object(A.b)({},S.prototype.getDefaultOptions.call(this),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},l.prototype.getSchemaAdaptor=function(){return p},l}(a.a)},YP77:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return y});var at=_("mrSG"),a=_("zJSt"),A=_("B3DA"),e=_("iTfj"),i=_("YuPD"),p=_("w02o"),m=_("u9/z"),S=_("5kt6");function l(n){var s=n.chart,d=n.options,E=d.innerRadius,O=d.radius;return s.coordinate("theta",{innerRadius:E,radius:O}),n}function M(n,s){var d=n.chart,E=n.options,O=E.innerRadius,C=E.statistic,v=E.percent,x=E.meta;if(d.getController("annotation").clear(!0),O&&C){var T=C.content;T&&!T.formatter&&(T.formatter=function(N){var X=N.percent,tt=Object(e.get)(x,[S.d,"formatter"]);return tt?tt(X):X}),Object(i.m)(d,{statistic:Object(at.a)(Object(at.a)({},C),{content:T}),plotType:"ring-progress"},{percent:v})}return s&&d.render(!0),n}function j(n){return Object(i.e)(m.b,Object(p.f)({}),l,M,p.a,p.j,Object(p.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="ring-process",d}return s.prototype.getDefaultOptions=function(){return{percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"},formatter:function(E){var O=E.percent;return(O*100).toFixed(2)+"%"}}},animation:!0}},s.prototype.changeData=function(d){this.updateOption({percent:d}),this.chart.data(Object(A.a)(d)),M({chart:this.chart,options:this.options},!0)},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},YuPD:function(Gn,Gt,_){"use strict";_.d(Gt,"e",function(){return at}),_.d(Gt,"k",function(){return a}),_.d(Gt,"n",function(){return e}),_.d(Gt,"j",function(){return M}),_.d(Gt,"a",function(){return p}),_.d(Gt,"g",function(){return j}),_.d(Gt,"c",function(){return y}),_.d(Gt,"f",function(){return n}),_.d(Gt,"d",function(){return s.a}),_.d(Gt,"o",function(){return d}),_.d(Gt,"h",function(){return x}),_.d(Gt,"b",function(){return bt}),_.d(Gt,"i",function(){return St}),_.d(Gt,"m",function(){return pt.c}),_.d(Gt,"l",function(){return pt.b});function at(){for(var wt=[],H=0;H<arguments.length;H++)wt[H]=arguments[H];return function(ht){return wt.reduce(function(dt,yt){return yt(dt)},ht)}}function a(wt,H){var ht={};return wt!==null&&typeof wt=="object"&&H.forEach(function(dt){var yt=wt[dt];yt!==void 0&&(ht[dt]=yt)}),ht}var A=_("iTfj");function e(wt,H){return Object(A.reduce)(H,function(ht,dt,yt){return ht.replace(new RegExp("{\\s*"+yt+"\\s*}","g"),dt)},wt)}var i=_("mrSG"),p;(function(wt){wt.ERROR="error",wt.WARN="warn",wt.INFO="log"})(p||(p={}));var m="AntV/G2Plot";function S(wt){for(var H=[],ht=1;ht<arguments.length;ht++)H[ht-1]=arguments[ht];var dt=0;return m+": "+wt.replace(/%s/g,function(){return""+H[dt++]})}function l(wt,H){for(var ht=[],dt=2;dt<arguments.length;dt++)ht[dt-2]=arguments[dt];if(!wt){var yt=new Error(S.apply(void 0,Object(i.d)([H],ht)));throw yt.name=m,yt}}function M(wt,H,ht){for(var dt=[],yt=3;yt<arguments.length;yt++)dt[yt-3]=arguments[yt];H||console[wt](S.apply(void 0,Object(i.d)([ht],dt)))}function j(wt){if(!wt)return{width:0,height:0};var H=getComputedStyle(wt);return{width:(wt.clientWidth||parseInt(H.width,10))-parseInt(H.paddingLeft,10)-parseInt(H.paddingRight,10),height:(wt.clientHeight||parseInt(H.height,10))-parseInt(H.paddingTop,10)-parseInt(H.paddingBottom,10)}}function y(wt,H){return wt.geometries.find(function(ht){return ht.type===H})}function n(wt){return Object(A.reduce)(wt.geometries,function(H,ht){return H.concat(ht.elements)},[])}var s=_("4Olw");function d(wt){if(!Object(A.isType)(wt,"Object"))return wt;var H=Object(i.a)({},wt);return H.formatter&&!H.content&&(H.content=H.formatter),H}var E=_("6JdA");function O(wt,H){var ht=[];if(wt.length){ht.push(["M",wt[0].x,wt[0].y]);for(var dt=1,yt=wt.length;dt<yt;dt+=1){var Mt=wt[dt];ht.push(["L",Mt.x,Mt.y])}H&&ht.push(["Z"])}return ht}var C=function(H,ht,dt,yt){var Mt=[],$,lt,rt=!!yt,z,P;if(rt){z=[Infinity,Infinity],P=[-Infinity,-Infinity];for(var Y=0,k=H.length;Y<k;Y++){var h=H[Y];z=E.c.min([0,0],z,h),P=E.c.max([0,0],P,h)}z=E.c.min([0,0],z,yt[0]),P=E.c.max([0,0],P,yt[1])}for(var Y=0,g=H.length;Y<g;Y++){var h=H[Y];if(dt)$=H[Y?Y-1:g-1],lt=H[(Y+1)%g];else if(Y===0||Y===g-1){Mt.push(h);continue}else $=H[Y-1],lt=H[Y+1];var B=[0,0];B=E.c.sub(B,lt,$),B=E.c.scale(B,B,ht);var V=E.c.distance(h,$),q=E.c.distance(h,lt),it=V+q;it!==0&&(V/=it,q/=it);var ot=E.c.scale([0,0],B,-V),At=E.c.scale([0,0],B,q),gt=E.c.add([0,0],h,ot),mt=E.c.add([0,0],h,At);rt&&(gt=E.c.max([0,0],gt,z),gt=E.c.min([0,0],gt,P),mt=E.c.max([0,0],mt,z),mt=E.c.min([0,0],mt,P)),Mt.push(gt),Mt.push(mt)}return dt&&Mt.push(Mt.shift()),Mt};function v(wt,H,ht){for(var dt=!!H,yt=[],Mt=0,$=wt.length;Mt<$;Mt+=2)yt.push([wt[Mt],wt[Mt+1]]);for(var lt=C(yt,.4,dt,ht),rt=yt.length,z=[],P,Y,k,Mt=0;Mt<rt-1;Mt++)P=lt[Mt*2],Y=lt[Mt*2+1],k=yt[Mt+1],z.push(["C",P[0],P[1],Y[0],Y[1],k[0],k[1]]);return dt&&(P=lt[rt],Y=lt[rt+1],k=yt[0],z.push(["C",P[0],P[1],Y[0],Y[1],k[0],k[1]])),z}function x(wt,H,ht){var dt=[],yt=wt[0],Mt=null;if(wt.length<=2)return O(wt,H);for(var $=0,lt=wt.length;$<lt;$++){var rt=wt[$];(!Mt||!(Mt.x===rt.x&&Mt.y===rt.y))&&(dt.push(rt.x),dt.push(rt.y),Mt=rt)}var z=ht||[[0,0],[1,1]],P=v(dt,H,z);return P.unshift(["M",yt.x,yt.y]),P}var T=5,N={}.toString,X=function(H,ht){return N.call(H)==="[object "+ht+"]"},tt=function(H){return X(H,"Array")},nt=function(H){return typeof H=="object"&&H!==null},vt=function(H){if(!nt(H)||!X(H,"Object"))return!1;for(var ht=H;Object.getPrototypeOf(ht)!==null;)ht=Object.getPrototypeOf(ht);return Object.getPrototypeOf(H)===ht},ft=function wt(H,ht,dt,yt){dt=dt||0,yt=yt||T;for(var Mt in ht)if(Object.prototype.hasOwnProperty.call(ht,Mt)){var $=ht[Mt];$?vt($)?(vt(H[Mt])||(H[Mt]={}),dt<yt?wt(H[Mt],$,dt+1,yt):H[Mt]=ht[Mt]):tt($)?(H[Mt]=[],H[Mt]=H[Mt].concat($)):H[Mt]=$:H[Mt]=$}},bt=function(H){for(var ht=[],dt=1;dt<arguments.length;dt++)ht[dt-1]=arguments[dt];for(var yt=0;yt<ht.length;yt+=1)ft(H,ht[yt]);return H};function St(wt){if(!wt)return wt;var H=wt.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return H.map(function(ht){return ht.toLowerCase()}).join("-")}var pt=_("mj6g"),ct;function zt(){return ct||(ct=document.createElement("canvas").getContext("2d")),ct}var Nt=Object(A.memoize)(function(wt,H){H===void 0&&(H={});var ht=H.fontSize,dt=H.fontFamily,yt=dt===void 0?"sans-serif":dt,Mt=H.fontWeight,$=H.fontStyle,lt=H.fontVariant,rt=zt();rt.font=[$,Mt,lt,ht+"px",yt].join(" ");var z=rt.measureText(Object(A.isString)(wt)?wt:"");return z.width},function(wt,H){return H===void 0&&(H={}),Object(i.d)([wt],Object(A.values)(H)).join("")})},Z1HP:function(Gn,Gt,_){var at=_("ycre"),a=_("quyA"),A=_("q4HE");function e(i){return a(i)?A(i):at(i)}Gn.exports=e},ZCgT:function(Gn,Gt,_){var at=_("tLB3"),a=1/0,A=17976931348623157e292;function e(i){if(!i)return i===0?i:0;if(i=at(i),i===a||i===-a){var p=i<0?-1:1;return p*A}return i===i?i:0}Gn.exports=e},ZxFD:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"create",function(){return a}),_.d(Gt,"clone",function(){return A}),_.d(Gt,"fromValues",function(){return e}),_.d(Gt,"copy",function(){return i}),_.d(Gt,"set",function(){return p}),_.d(Gt,"add",function(){return m}),_.d(Gt,"subtract",function(){return S}),_.d(Gt,"multiply",function(){return l}),_.d(Gt,"divide",function(){return M}),_.d(Gt,"ceil",function(){return j}),_.d(Gt,"floor",function(){return y}),_.d(Gt,"min",function(){return n}),_.d(Gt,"max",function(){return s}),_.d(Gt,"round",function(){return d}),_.d(Gt,"scale",function(){return E}),_.d(Gt,"scaleAndAdd",function(){return O}),_.d(Gt,"distance",function(){return C}),_.d(Gt,"squaredDistance",function(){return v}),_.d(Gt,"length",function(){return x}),_.d(Gt,"squaredLength",function(){return T}),_.d(Gt,"negate",function(){return N}),_.d(Gt,"inverse",function(){return X}),_.d(Gt,"normalize",function(){return tt}),_.d(Gt,"dot",function(){return nt}),_.d(Gt,"cross",function(){return vt}),_.d(Gt,"lerp",function(){return ft}),_.d(Gt,"random",function(){return bt}),_.d(Gt,"transformMat2",function(){return St}),_.d(Gt,"transformMat2d",function(){return pt}),_.d(Gt,"transformMat3",function(){return ct}),_.d(Gt,"transformMat4",function(){return zt}),_.d(Gt,"rotate",function(){return Nt}),_.d(Gt,"angle",function(){return wt}),_.d(Gt,"zero",function(){return H}),_.d(Gt,"str",function(){return ht}),_.d(Gt,"exactEquals",function(){return dt}),_.d(Gt,"equals",function(){return yt}),_.d(Gt,"len",function(){return Mt}),_.d(Gt,"sub",function(){return $}),_.d(Gt,"mul",function(){return lt}),_.d(Gt,"div",function(){return rt}),_.d(Gt,"dist",function(){return z}),_.d(Gt,"sqrDist",function(){return P}),_.d(Gt,"sqrLen",function(){return Y}),_.d(Gt,"forEach",function(){return k});var at=_("yU0y");function a(){var h=new at.a(2);return at.a!=Float32Array&&(h[0]=0,h[1]=0),h}function A(h){var g=new at.a(2);return g[0]=h[0],g[1]=h[1],g}function e(h,g){var B=new at.a(2);return B[0]=h,B[1]=g,B}function i(h,g){return h[0]=g[0],h[1]=g[1],h}function p(h,g,B){return h[0]=g,h[1]=B,h}function m(h,g,B){return h[0]=g[0]+B[0],h[1]=g[1]+B[1],h}function S(h,g,B){return h[0]=g[0]-B[0],h[1]=g[1]-B[1],h}function l(h,g,B){return h[0]=g[0]*B[0],h[1]=g[1]*B[1],h}function M(h,g,B){return h[0]=g[0]/B[0],h[1]=g[1]/B[1],h}function j(h,g){return h[0]=Math.ceil(g[0]),h[1]=Math.ceil(g[1]),h}function y(h,g){return h[0]=Math.floor(g[0]),h[1]=Math.floor(g[1]),h}function n(h,g,B){return h[0]=Math.min(g[0],B[0]),h[1]=Math.min(g[1],B[1]),h}function s(h,g,B){return h[0]=Math.max(g[0],B[0]),h[1]=Math.max(g[1],B[1]),h}function d(h,g){return h[0]=Math.round(g[0]),h[1]=Math.round(g[1]),h}function E(h,g,B){return h[0]=g[0]*B,h[1]=g[1]*B,h}function O(h,g,B,V){return h[0]=g[0]+B[0]*V,h[1]=g[1]+B[1]*V,h}function C(h,g){var B=g[0]-h[0],V=g[1]-h[1];return Math.hypot(B,V)}function v(h,g){var B=g[0]-h[0],V=g[1]-h[1];return B*B+V*V}function x(h){var g=h[0],B=h[1];return Math.hypot(g,B)}function T(h){var g=h[0],B=h[1];return g*g+B*B}function N(h,g){return h[0]=-g[0],h[1]=-g[1],h}function X(h,g){return h[0]=1/g[0],h[1]=1/g[1],h}function tt(h,g){var B=g[0],V=g[1],q=B*B+V*V;return q>0&&(q=1/Math.sqrt(q)),h[0]=g[0]*q,h[1]=g[1]*q,h}function nt(h,g){return h[0]*g[0]+h[1]*g[1]}function vt(h,g,B){var V=g[0]*B[1]-g[1]*B[0];return h[0]=h[1]=0,h[2]=V,h}function ft(h,g,B,V){var q=g[0],it=g[1];return h[0]=q+V*(B[0]-q),h[1]=it+V*(B[1]-it),h}function bt(h,g){g=g||1;var B=at.c()*2*Math.PI;return h[0]=Math.cos(B)*g,h[1]=Math.sin(B)*g,h}function St(h,g,B){var V=g[0],q=g[1];return h[0]=B[0]*V+B[2]*q,h[1]=B[1]*V+B[3]*q,h}function pt(h,g,B){var V=g[0],q=g[1];return h[0]=B[0]*V+B[2]*q+B[4],h[1]=B[1]*V+B[3]*q+B[5],h}function ct(h,g,B){var V=g[0],q=g[1];return h[0]=B[0]*V+B[3]*q+B[6],h[1]=B[1]*V+B[4]*q+B[7],h}function zt(h,g,B){var V=g[0],q=g[1];return h[0]=B[0]*V+B[4]*q+B[12],h[1]=B[1]*V+B[5]*q+B[13],h}function Nt(h,g,B,V){var q=g[0]-B[0],it=g[1]-B[1],ot=Math.sin(V),At=Math.cos(V);return h[0]=q*At-it*ot+B[0],h[1]=q*ot+it*At+B[1],h}function wt(h,g){var B=h[0],V=h[1],q=g[0],it=g[1],ot=Math.sqrt(B*B+V*V)*Math.sqrt(q*q+it*it),At=ot&&(B*q+V*it)/ot;return Math.acos(Math.min(Math.max(At,-1),1))}function H(h){return h[0]=0,h[1]=0,h}function ht(h){return"vec2("+h[0]+", "+h[1]+")"}function dt(h,g){return h[0]===g[0]&&h[1]===g[1]}function yt(h,g){var B=h[0],V=h[1],q=g[0],it=g[1];return Math.abs(B-q)<=at.b*Math.max(1,Math.abs(B),Math.abs(q))&&Math.abs(V-it)<=at.b*Math.max(1,Math.abs(V),Math.abs(it))}var Mt=x,$=S,lt=l,rt=M,z=C,P=v,Y=T,k=function(){var h=a();return function(g,B,V,q,it,ot){var At,gt;for(B||(B=2),V||(V=0),q?gt=Math.min(q*B+V,g.length):gt=g.length,At=V;At<gt;At+=B)h[0]=g[At],h[1]=g[At+1],it(h,h,ot),g[At]=h[0],g[At+1]=h[1];return g}}()},a8tM:function(Gn,Gt,_){"use strict";_.d(Gt,"c",function(){return T}),_.d(Gt,"b",function(){return vt}),_.d(Gt,"a",function(){return ft});var at=_("rePB");function a(bt){var St=0,pt=bt.children,ct=pt&&pt.length;if(!ct)St=1;else for(;--ct>=0;)St+=pt[ct].value;bt.value=St}var A=function(){return this.eachAfter(a)},e=_("uFwe"),i=function(bt,St){var pt=-1,ct=Object(e.a)(this),zt;try{for(ct.s();!(zt=ct.n()).done;){var Nt=zt.value;bt.call(St,Nt,++pt,this)}}catch(wt){ct.e(wt)}finally{ct.f()}return this},p=function(bt,St){for(var pt=this,ct=[pt],zt,Nt,wt=-1;pt=ct.pop();)if(bt.call(St,pt,++wt,this),zt=pt.children)for(Nt=zt.length-1;Nt>=0;--Nt)ct.push(zt[Nt]);return this},m=function(bt,St){for(var pt=this,ct=[pt],zt=[],Nt,wt,H,ht=-1;pt=ct.pop();)if(zt.push(pt),Nt=pt.children)for(wt=0,H=Nt.length;wt<H;++wt)ct.push(Nt[wt]);for(;pt=zt.pop();)bt.call(St,pt,++ht,this);return this},S=function(bt,St){var pt=-1,ct=Object(e.a)(this),zt;try{for(ct.s();!(zt=ct.n()).done;){var Nt=zt.value;if(bt.call(St,Nt,++pt,this))return Nt}}catch(wt){ct.e(wt)}finally{ct.f()}},l=function(bt){return this.eachAfter(function(St){for(var pt=+bt(St.data)||0,ct=St.children,zt=ct&&ct.length;--zt>=0;)pt+=ct[zt].value;St.value=pt})},M=function(bt){return this.eachBefore(function(St){St.children&&St.children.sort(bt)})},j=function(bt){for(var St=this,pt=y(St,bt),ct=[St];St!==pt;)St=St.parent,ct.push(St);for(var zt=ct.length;bt!==pt;)ct.splice(zt,0,bt),bt=bt.parent;return ct};function y(bt,St){if(bt===St)return bt;var pt=bt.ancestors(),ct=St.ancestors(),zt=null;for(bt=pt.pop(),St=ct.pop();bt===St;)zt=bt,bt=pt.pop(),St=ct.pop();return zt}var n=function(){for(var bt=this,St=[bt];bt=bt.parent;)St.push(bt);return St},s=function(){return Array.from(this)},d=function(){var bt=[];return this.eachBefore(function(St){St.children||bt.push(St)}),bt},E=function(){var bt=this,St=[];return bt.each(function(pt){pt!==bt&&St.push({source:pt.parent,target:pt})}),St},O=_("o0o1"),C=_.n(O),v=C.a.mark(x);function x(){var bt,St,pt,ct,zt,Nt;return C.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:bt=this,pt=[bt];case 1:St=pt.reverse(),pt=[];case 2:if(!(bt=St.pop())){H.next=8;break}return H.next=5,bt;case 5:if(ct=bt.children)for(zt=0,Nt=ct.length;zt<Nt;++zt)pt.push(ct[zt]);H.next=2;break;case 8:if(pt.length){H.next=1;break}case 9:case"end":return H.stop()}},v,this)}function T(bt,St){bt instanceof Map?(bt=[void 0,bt],St===void 0&&(St=tt)):St===void 0&&(St=X);for(var pt=new ft(bt),ct,zt=[pt],Nt,wt,H,ht;ct=zt.pop();)if((wt=St(ct.data))&&(ht=(wt=Array.from(wt)).length))for(ct.children=wt,H=ht-1;H>=0;--H)zt.push(Nt=wt[H]=new ft(wt[H])),Nt.parent=ct,Nt.depth=ct.depth+1;return pt.eachBefore(vt)}function N(){return T(this).eachBefore(nt)}function X(bt){return bt.children}function tt(bt){return Array.isArray(bt)?bt[1]:null}function nt(bt){bt.data.value!==void 0&&(bt.value=bt.data.value),bt.data=bt.data.data}function vt(bt){var St=0;do bt.height=St;while((bt=bt.parent)&&bt.height<++St)}function ft(bt){this.data=bt,this.depth=this.height=0,this.parent=null}ft.prototype=T.prototype=Object(at.a)({constructor:ft,count:A,each:i,eachAfter:m,eachBefore:p,find:S,sum:l,sort:M,path:j,ancestors:n,descendants:s,leaves:d,links:E,copy:N},Symbol.iterator,x)},aFU3:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return O});var at=_("tvuL");_.d(Gt,"PathUtil",function(){return at});var a=_("4cbP"),A=_.n(a);for(var e in a)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(C){_.d(Gt,C,function(){return a[C]})}(e);var i=_("tdXX"),p=_.n(i);for(var e in i)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(v){_.d(Gt,v,function(){return i[v]})}(e);var m=_("5eLp");_.d(Gt,"Event",function(){return m.a});var S=_("LmB6");_.d(Gt,"Base",function(){return S.a});var l=_("EkMX");_.d(Gt,"AbstractCanvas",function(){return l.a});var M=_("+DwW");_.d(Gt,"AbstractGroup",function(){return M.a});var j=_("MaEA");_.d(Gt,"AbstractShape",function(){return j.a});var y=_("1MZV");_.d(Gt,"getBBoxMethod",function(){return y.a});var n=_("vIgC");_.d(Gt,"getTextHeight",function(){return n.b}),_.d(Gt,"assembleFont",function(){return n.a});var s=_("sstZ");_.d(Gt,"isAllowCapture",function(){return s.b});var d=_("aSjE");_.d(Gt,"multiplyVec2",function(){return d.c}),_.d(Gt,"invert",function(){return d.a});var E=_("lt7v");_.d(Gt,"getOffScreenContext",function(){return E.a});var O="0.5.4"},aLzy:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return $});var at=_("mrSG"),a=_("zJSt"),A=_("w02o"),e=_("YuPD"),i=_("5OoT"),p=_("iTfj"),m=_("5HRO"),S=_("WOQw"),l="$$percentage$$",M="$$mappingValue$$",j="$$conversion$$",y="$$totalPercentage$$",n="$$x$$",s="$$y$$";function d(lt,rt,z){var P=[],Y=z.yField,k=z.maxSize,h=z.minSize,g=Object(p.maxBy)(rt,Y)[Y],B=Object(p.isNumber)(k)?k:1,V=Object(p.isNumber)(h)?h:0;return P=Object(p.map)(lt,function(q,it){var ot=(q[Y]||0)/g;return q[l]=ot,q[M]=(B-V)*ot+V,q[j]=[Object(p.get)(lt,[it-1,Y]),q[Y]],q}),P}function E(lt){return function(rt){var z=rt.chart,P=rt.options,Y=P.conversionTag,k=z.getOptions().data;if(Y){var h=Y.formatter;k.forEach(function(g,B){if(!(B<=0)){var V=lt(g,B,k,{top:!0,text:{content:Object(p.isFunction)(h)?h(g,k):h,offsetX:Y.offsetX,offsetY:Y.offsetY,position:"end",autoRotate:!1,style:Object(at.a)({textAlign:"start",textBaseline:"middle"},Y.style)}});z.annotation().line(V)}})}return rt}}function O(lt){var rt=lt.chart,z=lt.options,P=z.data,Y=P===void 0?[]:P,k=z.yField,h=z.maxSize,g=z.minSize,B=d(Y,Y,{yField:k,maxSize:h,minSize:g});return rt.data(B),lt}function C(lt){var rt=lt.chart,z=lt.options,P=z.xField,Y=z.yField,k=z.color,h=z.tooltip,g=z.label,B=Object(m.a)(h,[P,Y]),V=B.fields,q=B.formatter;Object(S.a)({chart:rt,options:{type:"interval",xField:P,yField:M,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),mapping:{shape:"funnel",tooltip:q,color:k},label:g}});var it=Object(e.c)(lt.chart,"interval");return it.adjust("symmetric"),lt}function v(lt){var rt=lt.chart,z=lt.options,P=z.isTransposed;return rt.coordinate({type:"rect",actions:P?[]:[["transpose"],["scale",1,-1]]}),lt}function x(lt){var rt=lt.options,z=rt.maxSize,P=function(k,h,g,B){var V=z-(z-k[M])/2;return Object(at.a)(Object(at.a)({},B),{start:[h-.5,V],end:[h-.5,V+.05]})};return E(P)(lt),lt}function T(lt){return Object(e.e)(O,C,v,x)(lt)}function N(lt){var rt,z=lt.chart,P=lt.options,Y=P.data,k=Y===void 0?[]:Y,h=P.yField;return z.data(k),z.scale((rt={},rt[h]={sync:!0},rt)),lt}function X(lt){var rt=lt.chart,z=lt.options,P=z.data,Y=z.xField,k=z.yField,h=z.color,g=z.compareField,B=z.isTransposed,V=z.tooltip,q=z.maxSize,it=z.minSize,ot=z.label;return rt.facet("mirror",{fields:[g],transpose:!B,padding:B?0:[32,0,0,0],eachView:function(gt,mt){var Ot=B?mt.rowIndex:mt.columnIndex;B||gt.coordinate({type:"rect",actions:[["transpose"],["scale",Ot===0?-1:1,-1]]});var It=d(mt.data,P,{yField:k,maxSize:q,minSize:it});gt.data(It);var Dt=Object(m.a)(V,[Y,k,g]),Ut=Dt.fields,Ct=Dt.formatter,Vt=B?{offset:Ot===0?10:-23,position:Ot===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:Ot===0?"end":"start"}};Object(S.a)({chart:gt,options:{type:"interval",xField:Y,yField:M,colorField:Y,tooltipFields:Object(p.isArray)(Ut)&&Ut.concat([l,j]),mapping:{shape:"funnel",tooltip:Ct,color:h,style:{lineWidth:1,stroke:"#fff"}},label:ot===!1?!1:Object(e.b)({},Vt,ot)}})}}),lt}function tt(lt){var rt=lt.chart,z=lt.options,P=z.conversionTag,Y=z.isTransposed;return rt.once("beforepaint",function(){rt.views.forEach(function(k,h){var g=function(V,q,it,ot){var At=h===0?-1:1;return Object(e.b)({},ot,{start:[q-.5,V[M]],end:[q-.5,V[M]+.05],text:Y?{style:{textAlign:"start"}}:{offsetX:P!==!1?At*P.offsetX:0,style:{textAlign:h===0?"end":"start"}}})};E(g)(Object(e.b)({},{chart:k,options:z}))})}),lt}function nt(lt){return Object(e.e)(N,X,tt)(lt)}function vt(lt){var rt,z=lt.chart,P=lt.options,Y=P.data,k=Y===void 0?[]:Y,h=P.yField;return z.data(k),z.scale((rt={},rt[h]={sync:!0},rt)),lt}function ft(lt){var rt=lt.chart,z=lt.options,P=z.seriesField,Y=z.isTransposed;return rt.facet("rect",{fields:[P],padding:[Y?0:32,10,0,10],eachView:function(h,g){T(Object(e.b)({},lt,{chart:h,options:{data:g.data}}))}}),lt}function bt(lt){return Object(e.e)(vt,ft)(lt)}function St(lt){var rt=lt.chart,z=lt.options,P=z.data,Y=P===void 0?[]:P,k=z.yField,h=Object(p.reduce)(Y,function(V,q){return V+(q[k]||0)},0),g=Object(p.maxBy)(Y,k)[k],B=Object(p.map)(Y,function(V,q){var it=[],ot=[];if(V[y]=(V[k]||0)/h,q){var At=Y[q-1][n],gt=Y[q-1][s];it[0]=At[3],ot[0]=gt[3],it[1]=At[2],ot[1]=gt[2]}else it[0]=-.5,ot[0]=1,it[1]=.5,ot[1]=1;return ot[2]=ot[1]-V[y],it[2]=(ot[2]+1)/4,ot[3]=ot[2],it[3]=-it[2],V[n]=it,V[s]=ot,V[l]=(V[k]||0)/g,V[j]=[Object(p.get)(Y,[q-1,k]),V[k]],V});return rt.data(B),lt}function pt(lt){var rt=lt.chart,z=lt.options,P=z.xField,Y=z.yField,k=z.color,h=z.tooltip,g=z.label,B=Object(m.a)(h,[P,Y]),V=B.fields,q=B.formatter;return Object(S.a)({chart:rt,options:{type:"polygon",xField:n,yField:s,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),label:g,mapping:{tooltip:q,color:k}}}),lt}function ct(lt){var rt=lt.chart,z=lt.options,P=z.isTransposed;return rt.coordinate({type:"rect",actions:P?[["transpose"],["reflect","x"]]:[]}),lt}function zt(lt){var rt=function(P,Y,k,h){return Object(at.a)(Object(at.a)({},h),{start:[P[n][1],P[s][1]],end:[P[n][1]+.05,P[s][1]]})};return E(rt)(lt),lt}function Nt(lt){return Object(e.e)(St,pt,ct,zt)(lt)}function wt(lt){var rt,z=lt.options,P=z.compareField,Y=z.xField,k=z.yField,h={minSize:0,maxSize:1,meta:(rt={},rt[M]={min:0,max:1,nice:!1},rt),label:P?{fields:[Y,k,P,l,j],style:{fill:"#fff",fontSize:12},formatter:function(B){return""+B[k]}}:{fields:[Y,k,l,j],offset:0,position:"middle",style:{fill:"#fff",fontSize:12},formatter:function(B){return B[Y]+" "+B[k]}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,title:Y,formatter:function(B){return{name:B[Y],value:B[k]}}},conversionTag:{offsetX:10,offsetY:0,style:{},formatter:function(B){return"\u8F6C\u5316\u7387: "+i.a.apply(void 0,B[j])}}};return Object(e.b)({options:h},lt)}function H(lt){var rt=lt.options,z=rt.compareField,P=rt.dynamicHeight,Y=rt.seriesField;return Y?bt(lt):z?nt(lt):P?Nt(lt):T(lt)}function ht(lt){var rt,z=lt.options,P=z.xAxis,Y=z.yAxis,k=z.xField,h=z.yField;return Object(e.e)(Object(A.f)((rt={},rt[k]=P,rt[h]=Y,rt)))(lt)}function dt(lt){var rt=lt.chart;return rt.axis(!1),lt}function yt(lt){var rt=lt.chart,z=lt.options,P=z.legend;return P===!1?rt.legend(!1):rt.legend(P),lt}function Mt(lt){return Object(e.e)(wt,H,ht,dt,A.k,A.c,yt,A.a,A.j,Object(A.b)())(lt)}var $=function(lt){Object(at.b)(rt,lt);function rt(){var z=lt!==null&&lt.apply(this,arguments)||this;return z.type="funnel",z}return rt.prototype.getDefaultOptions=function(){return{appendPadding:[0,80]}},rt.prototype.getSchemaAdaptor=function(){return Mt},rt}(a.a)},aN7R:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return M}),_.d(Gt,"Circle",function(){return n}),_.d(Gt,"Dom",function(){return d}),_.d(Gt,"Ellipse",function(){return O}),_.d(Gt,"Image",function(){return v}),_.d(Gt,"Line",function(){return N}),_.d(Gt,"Marker",function(){return vt}),_.d(Gt,"Path",function(){return bt}),_.d(Gt,"Polygon",function(){return pt}),_.d(Gt,"Polyline",function(){return zt}),_.d(Gt,"Rect",function(){return yt}),_.d(Gt,"Text",function(){return Y});var at={};_.r(at),_.d(at,"Base",function(){return M}),_.d(at,"Circle",function(){return n}),_.d(at,"Dom",function(){return d}),_.d(at,"Ellipse",function(){return O}),_.d(at,"Image",function(){return v}),_.d(at,"Line",function(){return N}),_.d(at,"Marker",function(){return vt}),_.d(at,"Path",function(){return bt}),_.d(at,"Polygon",function(){return pt}),_.d(at,"Polyline",function(){return zt}),_.d(at,"Rect",function(){return yt}),_.d(at,"Text",function(){return Y});var a=_("mrSG"),A=_("aFU3"),e=_("APlK"),i=_("c+wO"),p=_("c0lT"),m=_("IvmH"),S=_("5z4m"),l=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="svg",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},h.prototype.afterAttrsChange=function(g){k.prototype.afterAttrsChange.call(this,g);var B=this.get("canvas");if(B&&B.get("autoDraw")){var V=B.get("context");this.draw(V,g)}},h.prototype.getShapeBase=function(){return at},h.prototype.getGroupBase=function(){return S.a},h.prototype.onCanvasChange=function(g){Object(p.b)(this,g)},h.prototype.calculateBBox=function(){var g=this.get("el"),B=null;if(g)B=g.getBBox();else{var V=Object(A.getBBoxMethod)(this.get("type"));V&&(B=V(this))}if(B){var q=B.x,it=B.y,ot=B.width,At=B.height,gt=this.getHitLineWidth(),mt=gt/2,Ot=q-mt,It=it-mt,Dt=q+ot+mt,Ut=it+At+mt;return{x:Ot,y:It,minX:Ot,minY:It,maxX:Dt,maxY:Ut,width:ot+gt,height:At+gt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},h.prototype.isFill=function(){var g=this.attr(),B=g.fill,V=g.fillStyle;return(B||V||this.isClipShape())&&this.canFill},h.prototype.isStroke=function(){var g=this.attr(),B=g.stroke,V=g.strokeStyle;return(B||V)&&this.canStroke},h.prototype.draw=function(g,B){var V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||Object(i.a)(this),Object(e.a)(this,g),this.createPath(g,B),this.shadow(g,B),this.strokeAndFill(g,B),this.transform(B))},h.prototype.createPath=function(g,B){},h.prototype.strokeAndFill=function(g,B){var V=B||this.attr(),q=V.fill,it=V.fillStyle,ot=V.stroke,At=V.strokeStyle,gt=V.fillOpacity,mt=V.strokeOpacity,Ot=V.lineWidth,It=this.get("el");this.canFill&&(B?"fill"in V?this._setColor(g,"fill",q):"fillStyle"in V&&this._setColor(g,"fill",it):this._setColor(g,"fill",q||it),gt&&It.setAttribute(m.b.fillOpacity,gt)),this.canStroke&&Ot>0&&(B?"stroke"in V?this._setColor(g,"stroke",ot):"strokeStyle"in V&&this._setColor(g,"stroke",At):this._setColor(g,"stroke",ot||At),mt&&It.setAttribute(m.b.strokeOpacity,mt),Ot&&It.setAttribute(m.b.lineWidth,Ot))},h.prototype._setColor=function(g,B,V){var q=this.get("el");if(!V){q.setAttribute(m.b[B],"none");return}if(V=V.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(V)){var it=g.find("gradient",V);it||(it=g.addGradient(V)),q.setAttribute(m.b[B],"url(#"+it+")")}else if(/^[p,P]{1}[\s]*\(/.test(V)){var it=g.find("pattern",V);it||(it=g.addPattern(V)),q.setAttribute(m.b[B],"url(#"+it+")")}else q.setAttribute(m.b[B],V)},h.prototype.shadow=function(g,B){var V=this.attr(),q=B||V,it=q.shadowOffsetX,ot=q.shadowOffsetY,At=q.shadowBlur,gt=q.shadowColor;(it||ot||At||gt)&&Object(e.b)(this,g)},h.prototype.transform=function(g){var B=this.attr(),V=(g||B).matrix;V&&Object(e.c)(this)},h.prototype.isInShape=function(g,B){return this.isPointInPath(g,B)},h.prototype.isPointInPath=function(g,B){var V=this.get("el"),q=this.get("canvas"),it=q.get("el").getBoundingClientRect(),ot=g+it.left,At=B+it.top,gt=document.elementFromPoint(ot,At);return!!(gt&&gt.isEqualNode(V))},h.prototype.getHitLineWidth=function(){var g=this.attrs,B=g.lineWidth,V=g.lineAppendWidth;return this.isStroke()?B+V:0},h}(A.AbstractShape),M=l,j=_("iTfj"),y=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="circle",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,r:0})},h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");Object(j.each)(B||V,function(it,ot){ot==="x"||ot==="y"?q.setAttribute("c"+ot,it):m.b[ot]&&q.setAttribute(m.b[ot],it)})},h}(M),n=y,s=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="dom",g.canFill=!1,g.canStroke=!1,g}return h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");if(Object(j.each)(B||V,function(gt,mt){m.b[mt]&&q.setAttribute(m.b[mt],gt)}),typeof V.html=="function"){var it=V.html.call(this,V);if(it instanceof Element||it instanceof HTMLDocument){for(var ot=q.childNodes,At=ot.length-1;At>=0;At--)q.removeChild(ot[At]);q.appendChild(it)}else q.innerHTML=it}else q.innerHTML=V.html},h}(M),d=s,E=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="ellipse",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,rx:0,ry:0})},h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");Object(j.each)(B||V,function(it,ot){ot==="x"||ot==="y"?q.setAttribute("c"+ot,it):m.b[ot]&&q.setAttribute(m.b[ot],it)})},h}(M),O=E,C=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="image",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0})},h.prototype.createPath=function(g,B){var V=this,q=this.attr(),it=this.get("el");Object(j.each)(B||q,function(ot,At){At==="img"?V._setImage(q.img):m.b[At]&&it.setAttribute(m.b[At],ot)})},h.prototype.setAttr=function(g,B){this.attrs[g]=B,g==="img"&&this._setImage(B)},h.prototype._setImage=function(g){var B=this.attr(),V=this.get("el");if(Object(j.isString)(g))V.setAttribute("href",g);else if(g instanceof window.Image)B.width||(V.setAttribute("width",g.width),this.attr("width",g.width)),B.height||(V.setAttribute("height",g.height),this.attr("height",g.height)),V.setAttribute("href",g.src);else if(g instanceof HTMLElement&&Object(j.isString)(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")V.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var q=document.createElement("canvas");q.setAttribute("width",""+g.width),q.setAttribute("height",""+g.height),q.getContext("2d").putImageData(g,0,0),B.width||(V.setAttribute("width",""+g.width),this.attr("width",g.width)),B.height||(V.setAttribute("height",""+g.height),this.attr("height",g.height)),V.setAttribute("href",q.toDataURL())}},h}(M),v=C,x=_("EYNi"),T=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="line",g.canFill=!1,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");Object(j.each)(B||V,function(it,ot){if(ot==="startArrow"||ot==="endArrow")if(it){var At=Object(j.isObject)(it)?g.addArrow(V,m.b[ot]):g.getDefaultArrow(V,m.b[ot]);q.setAttribute(m.b[ot],"url(#"+At+")")}else q.removeAttribute(m.b[ot]);else m.b[ot]&&q.setAttribute(m.b[ot],it)})},h.prototype.getTotalLength=function(){var g=this.attr(),B=g.x1,V=g.y1,q=g.x2,it=g.y2;return x.c.length(B,V,q,it)},h.prototype.getPoint=function(g){var B=this.attr(),V=B.x1,q=B.y1,it=B.x2,ot=B.y2;return x.c.pointAt(V,q,it,ot,g)},h}(M),N=T,X={circle:function(h,g,B){return[["M",h,g],["m",-B,0],["a",B,B,0,1,0,B*2,0],["a",B,B,0,1,0,-B*2,0]]},square:function(h,g,B){return[["M",h-B,g-B],["L",h+B,g-B],["L",h+B,g+B],["L",h-B,g+B],["Z"]]},diamond:function(h,g,B){return[["M",h-B,g],["L",h,g-B],["L",h+B,g],["L",h,g+B],["Z"]]},triangle:function(h,g,B){var V=B*Math.sin(1/3*Math.PI);return[["M",h-B,g+V],["L",h,g-V],["L",h+B,g+V],["z"]]},triangleDown:function(h,g,B){var V=B*Math.sin(1/3*Math.PI);return[["M",h-B,g-V],["L",h+B,g-V],["L",h,g+V],["Z"]]}},tt={get:function(h){return X[h]},register:function(h,g){X[h]=g},remove:function(h){delete X[h]},getAll:function(){return X}},nt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="marker",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g){var B=this.get("el");B.setAttribute("d",this._assembleMarker())},h.prototype._assembleMarker=function(){var g=this._getPath();return Object(j.isArray)(g)?g.map(function(B){return B.join(" ")}).join(""):g},h.prototype._getPath=function(){var g=this.attr(),B=g.x,V=g.y,q=g.r||g.radius,it=g.symbol||"circle",ot;return Object(j.isFunction)(it)?ot=it:ot=tt.get(it),ot?ot(B,V,q):(console.warn(ot+" symbol is not exist."),null)},h.symbolsFactory=tt,h}(M),vt=nt,ft=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="path",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,B){var V=this,q=this.attr(),it=this.get("el");Object(j.each)(B||q,function(ot,At){if(At==="path"&&Object(j.isArray)(ot))it.setAttribute("d",V._formatPath(ot));else if(At==="startArrow"||At==="endArrow")if(ot){var gt=Object(j.isObject)(ot)?g.addArrow(q,m.b[At]):g.getDefaultArrow(q,m.b[At]);it.setAttribute(m.b[At],"url(#"+gt+")")}else it.removeAttribute(m.b[At]);else m.b[At]&&it.setAttribute(m.b[At],ot)})},h.prototype._formatPath=function(g){var B=g.map(function(V){return V.join(" ")}).join("");return~B.indexOf("NaN")?"":B},h.prototype.getTotalLength=function(){var g=this.get("el");return g?g.getTotalLength():null},h.prototype.getPoint=function(g){var B=this.get("el"),V=this.getTotalLength();if(V===0)return null;var q=B?B.getPointAtLength(g*V):null;return q?{x:q.x,y:q.y}:null},h}(M),bt=ft,St=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polygon",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");Object(j.each)(B||V,function(it,ot){ot==="points"&&Object(j.isArray)(it)&&it.length>=2?q.setAttribute("points",it.map(function(At){return At[0]+","+At[1]}).join(" ")):m.b[ot]&&q.setAttribute(m.b[ot],it)})},h}(M),pt=St,ct=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polyline",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.onAttrChange=function(g,B,V){k.prototype.onAttrChange.call(this,g,B,V),["points"].indexOf(g)!==-1&&this._resetCache()},h.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},h.prototype.createPath=function(g,B){var V=this.attr(),q=this.get("el");Object(j.each)(B||V,function(it,ot){ot==="points"&&Object(j.isArray)(it)&&it.length>=2?q.setAttribute("points",it.map(function(At){return At[0]+","+At[1]}).join(" ")):m.b[ot]&&q.setAttribute(m.b[ot],it)})},h.prototype.getTotalLength=function(){var g=this.attr().points,B=this.get("totalLength");return Object(j.isNil)(B)?(this.set("totalLength",x.d.length(g)),this.get("totalLength")):B},h.prototype.getPoint=function(g){var B=this.attr().points,V=this.get("tCache");V||(this._setTcache(),V=this.get("tCache"));var q,it;return Object(j.each)(V,function(ot,At){g>=ot[0]&&g<=ot[1]&&(q=(g-ot[0])/(ot[1]-ot[0]),it=At)}),x.c.pointAt(B[it][0],B[it][1],B[it+1][0],B[it+1][1],q)},h.prototype._setTcache=function(){var g=this.attr().points;if(!(!g||g.length===0)){var B=this.getTotalLength();if(!(B<=0)){var V=0,q=[],it,ot;Object(j.each)(g,function(At,gt){g[gt+1]&&(it=[],it[0]=V/B,ot=x.c.length(At[0],At[1],g[gt+1][0],g[gt+1][1]),V+=ot,it[1]=V/B,q.push(it))}),this.set("tCache",q)}}},h.prototype.getStartTangent=function(){var g=this.attr().points,B=[];return B.push([g[1][0],g[1][1]]),B.push([g[0][0],g[0][1]]),B},h.prototype.getEndTangent=function(){var g=this.attr().points,B=g.length-1,V=[];return V.push([g[B-1][0],g[B-1][1]]),V.push([g[B][0],g[B][1]]),V},h}(M),zt=ct,Nt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,wt=/[^\s,]+/gi;function H(k){var h=0,g=0,B=0,V=0;return Object(j.isArray)(k)?k.length===1?h=g=B=V=k[0]:k.length===2?(h=B=k[0],g=V=k[1]):k.length===3?(h=k[0],g=V=k[1],B=k[2]):(h=k[0],g=k[1],B=k[2],V=k[3]):h=g=B=V=k,{r1:h,r2:g,r3:B,r4:V}}function ht(k){if(k=k||[],Object(j.isArray)(k))return k;if(Object(j.isString)(k))return k=k.match(Nt),Object(j.each)(k,function(h,g){if(h=h.match(wt),h[0].length>1){var B=h[0].charAt(0);h.splice(1,0,h[0].substr(1)),h[0]=B}Object(j.each)(h,function(V,q){isNaN(V)||(h[q]=+V)}),k[g]=h}),k}var dt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="rect",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0,radius:0})},h.prototype.createPath=function(g,B){var V=this,q=this.attr(),it=this.get("el"),ot=!1,At=["x","y","width","height","radius"];Object(j.each)(B||q,function(gt,mt){At.indexOf(mt)!==-1&&!ot?(it.setAttribute("d",V._assembleRect(q)),ot=!0):At.indexOf(mt)===-1&&m.b[mt]&&it.setAttribute(m.b[mt],gt)})},h.prototype._assembleRect=function(g){var B=g.x,V=g.y,q=g.width,it=g.height,ot=g.radius;if(!ot)return"M "+B+","+V+" l "+q+",0 l 0,"+it+" l"+-q+" 0 z";var At=H(ot);Object(j.isArray)(ot)?ot.length===1?At.r1=At.r2=At.r3=At.r4=ot[0]:ot.length===2?(At.r1=At.r3=ot[0],At.r2=At.r4=ot[1]):ot.length===3?(At.r1=ot[0],At.r2=At.r4=ot[1],At.r3=ot[2]):(At.r1=ot[0],At.r2=ot[1],At.r3=ot[2],At.r4=ot[3]):At.r1=At.r2=At.r3=At.r4=ot;var gt=[["M "+(B+At.r1)+","+V],["l "+(q-At.r1-At.r2)+",0"],["a "+At.r2+","+At.r2+",0,0,1,"+At.r2+","+At.r2],["l 0,"+(it-At.r2-At.r3)],["a "+At.r3+","+At.r3+",0,0,1,"+-At.r3+","+At.r3],["l "+(At.r3+At.r4-q)+",0"],["a "+At.r4+","+At.r4+",0,0,1,"+-At.r4+","+-At.r4],["l 0,"+(At.r4+At.r1-it)],["a "+At.r1+","+At.r1+",0,0,1,"+At.r1+","+-At.r1],["z"]];return gt.join(" ")},h}(M),yt=dt,Mt=_("e0ae"),$=.3,lt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},rt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},z={left:"left",start:"left",center:"middle",right:"end",end:"end"},P=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="text",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},h.prototype.createPath=function(g,B){var V=this,q=this.attr(),it=this.get("el");this._setFont(),Object(j.each)(B||q,function(ot,At){At==="text"?V._setText(""+ot):At==="matrix"&&ot?Object(e.c)(V):m.b[At]&&it.setAttribute(m.b[At],ot)}),it.setAttribute("paint-order","stroke"),it.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},h.prototype._setFont=function(){var g=this.get("el"),B=this.attr(),V=B.textBaseline,q=B.textAlign,it=Object(Mt.a)();it&&it.name==="firefox"?g.setAttribute("dominant-baseline",rt[V]||"alphabetic"):g.setAttribute("alignment-baseline",lt[V]||"baseline"),g.setAttribute("text-anchor",z[q]||"left")},h.prototype._setText=function(g){var B=this.get("el"),V=this.attr(),q=V.x,it=V.textBaseline,ot=it===void 0?"bottom":it;if(!g)B.innerHTML="";else if(~g.indexOf(`
`)){var At=g.split(`
`),gt=At.length-1,mt="";Object(j.each)(At,function(Ot,It){It===0?ot==="alphabetic"?mt+='<tspan x="'+q+'" dy="'+-gt+'em">'+Ot+"</tspan>":ot==="top"?mt+='<tspan x="'+q+'" dy="0.9em">'+Ot+"</tspan>":ot==="middle"?mt+='<tspan x="'+q+'" dy="'+-(gt-1)/2+'em">'+Ot+"</tspan>":ot==="bottom"?mt+='<tspan x="'+q+'" dy="-'+(gt+$)+'em">'+Ot+"</tspan>":ot==="hanging"&&(mt+='<tspan x="'+q+'" dy="'+(-(gt-1)-$)+'em">'+Ot+"</tspan>"):mt+='<tspan x="'+q+'" dy="1em">'+Ot+"</tspan>"}),B.innerHTML=mt}else B.innerHTML=g},h}(M),Y=P},aSjE:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return at}),_.d(Gt,"c",function(){return a}),_.d(Gt,"a",function(){return A});function at(e,i){var p=[],m=e[0],S=e[1],l=e[2],M=e[3],j=e[4],y=e[5],n=e[6],s=e[7],d=e[8],E=i[0],O=i[1],C=i[2],v=i[3],x=i[4],T=i[5],N=i[6],X=i[7],tt=i[8];return p[0]=E*m+O*M+C*n,p[1]=E*S+O*j+C*s,p[2]=E*l+O*y+C*d,p[3]=v*m+x*M+T*n,p[4]=v*S+x*j+T*s,p[5]=v*l+x*y+T*d,p[6]=N*m+X*M+tt*n,p[7]=N*S+X*j+tt*s,p[8]=N*l+X*y+tt*d,p}function a(e,i){var p=[],m=i[0],S=i[1];return p[0]=e[0]*m+e[3]*S+e[6],p[1]=e[1]*m+e[4]*S+e[7],p}function A(e){var i=[],p=e[0],m=e[1],S=e[2],l=e[3],M=e[4],j=e[5],y=e[6],n=e[7],s=e[8],d=s*M-j*n,E=-s*l+j*y,O=n*l-M*y,C=p*d+m*E+S*O;return C?(C=1/C,i[0]=d*C,i[1]=(-s*m+S*n)*C,i[2]=(j*m-S*M)*C,i[3]=E*C,i[4]=(s*p-S*y)*C,i[5]=(-j*p+S*l)*C,i[6]=O*C,i[7]=(-n*p+m*y)*C,i[8]=(M*p-m*l)*C,i):null}},bP8k:function(Gn,Gt,_){"use strict";var at=_("cIOH"),a=_.n(at),A=_("jhiw"),e=_.n(A)},bahg:function(Gn,Gt){function _(at){return at.split("")}Gn.exports=_},"c+wO":function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"a",function(){return e}),_.d(Gt,"d",function(){return i}),_.d(Gt,"c",function(){return p});var at=_("iTfj"),a=_("IvmH");function A(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function e(m){var S=a.a[m.type],l=m.getParent();if(!S)throw new Error("the type "+m.type+" is not supported by svg");var M=A(S);if(m.get("id")&&(M.id=m.get("id")),m.set("el",M),m.set("attrs",{}),l){var j=l.get("el");j||(j=l.createDom(),l.set("el",j)),j.appendChild(M)}return M}function i(m,S){var l=m.get("el"),M=Object(at.toArray)(l.children).sort(S),j=document.createDocumentFragment();M.forEach(function(y){j.appendChild(y)}),l.appendChild(j)}function p(m,S){var l=m.parentNode,M=Array.from(l.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),j=M[S],y=M.indexOf(m);if(j){if(y>S)l.insertBefore(m,j);else if(y<S){var n=M[S+1];n?l.insertBefore(m,n):l.appendChild(m)}}else l.appendChild(m)}},c0lT:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return A}),_.d(Gt,"b",function(){return e});var at=_("APlK"),a=_("c+wO");function A(i,p){p.forEach(function(m){m.draw(i)})}function e(i,p){var m=i.get("canvas");if(m&&m.get("autoDraw")){var S=m.get("context"),l=i.getParent(),M=l?l.getChildren():[m],j=i.get("el");if(p==="remove"){var y=i.get("isClipShape");if(y){var n=j&&j.parentNode,s=n&&n.parentNode;n&&s&&s.removeChild(n)}else j&&j.parentNode&&j.parentNode.removeChild(j)}else if(p==="show")j.setAttribute("visibility","visible");else if(p==="hide")j.setAttribute("visibility","hidden");else if(p==="zIndex")Object(a.c)(j,M.indexOf(i));else if(p==="sort"){var d=i.get("children");d&&d.length&&Object(a.d)(i,function(E,O){return d.indexOf(E)-d.indexOf(O)?1:0})}else p==="clear"?j&&(j.innerHTML=""):p==="matrix"?Object(at.c)(i):p==="clip"?Object(at.a)(i,S):p==="attr"||p==="add"&&i.draw(S)}}},cBFB:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return X});var at=_("mrSG"),a=_("YuPD"),A=_("zJSt"),e=_("tKoa"),i=_("w02o"),p=_("+Nd1"),m=_("a8tM"),S=_("iTfj"),l=_("I7nc"),M={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function j(tt,nt){nt=Object(S.assign)({},M,nt);var vt=nt.as;if(!Object(S.isArray)(vt)||vt.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var ft;try{ft=Object(l.b)(nt)}catch(zt){console.warn(zt)}var bt=function(Nt){return p.a().size(nt.size).round(nt.round).padding(nt.padding)(m.c(Nt).sum(function(wt){return wt[ft]}))},St=bt(tt),pt=vt[0],ct=vt[1];return St.each(function(zt){zt[pt]=[zt.x0,zt.x1,zt.x1,zt.x0],zt[ct]=[zt.y1,zt.y1,zt.y0,zt.y0],["x0","x1","y0","y1"].forEach(function(Nt){vt.indexOf(Nt)===-1&&delete zt[Nt]})}),Object(l.a)(St)}var y=_("NzZ7");function n(tt){var nt=tt.data,vt=tt.type,ft=tt.seriesField,bt=tt.colorField,St=tt.hierarchyConfig,pt={partition:j,treemap:y.a},ct=pt[vt](nt,Object(at.a)(Object(at.a)({},St),{type:"hierarchy."+vt,field:ft,as:["x","y"]})),zt=[];return ct.forEach(function(Nt){var wt,H,ht,dt,yt;if(Nt.depth===0)return null;var Mt=Object(at.a)((wt={},wt[ft]=Nt.data[ft]||((ht=(H=Nt.parent)===null||H===void 0?void 0:H.data)===null||ht===void 0?void 0:ht[ft]),wt[bt]=Nt.data[bt]||((yt=(dt=Nt.parent)===null||dt===void 0?void 0:dt.data)===null||yt===void 0?void 0:yt[bt]),wt),Nt);Mt.ext=St,zt.push(Mt)}),zt}function s(tt){var nt=tt.items,vt=tt.formatter,ft=tt.fields,bt=nt[0]||{},St=bt.color,pt=bt.mappingData,ct=bt.data,zt=document.createElement("ul");zt.className="g2-tooltip";var Nt="",wt=function(ht,dt){var yt;return vt?vt(Object(at.a)(Object(at.a)({},ht),{field:dt})):{name:dt,value:(ht==null?void 0:ht[dt])||((yt=ht==null?void 0:ht.data)===null||yt===void 0?void 0:yt[dt])}};return ft.forEach(function(H){var ht=wt(ct,H),dt=ht.name,yt=ht.value;Nt+=`<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;display:flex;align-items: center;">
        <span style="background-color:`+((pt==null?void 0:pt.color)||St)+`;" class="g2-tooltip-marker"></span>
        <span style="display:inline-flex;flex:1;justify-content:space-between">
        <span style="margin-right: 16px;">`+dt+`:</span>
        <span class="g2-tooltip-list-item-value">`+yt+`</span>
        </span>
    </li>`}),zt.innerHTML=Nt,zt}function d(tt){var nt=tt.chart,vt=tt.options,ft=vt.color,bt=vt.colorField,St=vt.sunburstStyle,pt=n(vt);return nt.data(pt),Object(e.f)(Object(a.b)({},tt,{options:{xField:"x",yField:"y",seriesField:bt,polygon:{color:ft,style:St}}})),tt}function E(tt){var nt=tt.chart;return nt.axis(!1),tt}function O(tt){var nt=tt.chart;return nt.legend(!1),tt}function C(tt){var nt=tt.chart,vt=tt.options,ft=vt.label,bt=vt.seriesField,St=Object(a.c)(nt,"polygon");if(!ft)St.label(!1);else{var pt=ft.callback,ct=Object(at.c)(ft,["callback"]);St.label({fields:[bt],callback:pt,cfg:Object(a.o)(ct)})}return tt}function v(tt){var nt=tt.chart,vt=tt.options,ft=vt.innerRadius,bt=vt.radius,St=vt.reflect,pt=nt.coordinate({type:"polar",cfg:{innerRadius:ft,radius:bt}});return St&&pt.reflect(St),tt}function x(tt){var nt=tt.chart,vt=tt.options,ft=vt.meta;return ft&&nt.scale(ft),tt}function T(tt){var nt=tt.chart,vt=tt.options,ft=vt.tooltip,bt=vt.seriesField,St=vt.colorField;return ft&&nt.tooltip(Object(at.a)(Object(at.a)({},ft),{customContent:ft&&ft.customContent?ft.customContent:function(pt,ct){return s({value:pt,items:ct,formatter:ft&&(ft==null?void 0:ft.formatter),fields:ft&&ft.fields||[bt,St]})}})),tt}function N(tt){return Object(a.e)(d,i.j,E,x,O,v,T,C,i.c,i.a,Object(i.b)())(tt)}var X=function(tt){Object(at.b)(nt,tt);function nt(){var vt=tt!==null&&tt.apply(this,arguments)||this;return vt.type="sunburst",vt}return nt.prototype.getDefaultOptions=function(){return Object(a.b)({},tt.prototype.getDefaultOptions.call(this),{type:"partition",innerRadius:0,seriesField:"value",tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1}})},nt.prototype.getSchemaAdaptor=function(){return N},nt}(A.a)},chpo:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var at=1,a=function(){return"".concat(at++)};Gt.default=a},cyZq:function(Gn,Gt,_){"use strict";_.d(Gt,"d",function(){return a}),_.d(Gt,"b",function(){return A}),_.d(Gt,"e",function(){return e}),_.d(Gt,"f",function(){return i}),_.d(Gt,"l",function(){return p}),_.d(Gt,"j",function(){return m});var at=_("iTfj");_.d(Gt,"i",function(){return at.isNil}),_.d(Gt,"k",function(){return at.isString}),_.d(Gt,"h",function(){return at.isFunction}),_.d(Gt,"g",function(){return at.isArray}),_.d(Gt,"c",function(){return at.each}),_.d(Gt,"o",function(){return at.toRadian}),_.d(Gt,"m",function(){return at.mod}),_.d(Gt,"n",function(){return at.requestAnimationFrame}),_.d(Gt,"a",function(){return at.clearAnimationFrame});function a(){return window?window.devicePixelRatio:1}function A(S,l,M,j){var y=S-M,n=l-j;return Math.sqrt(y*y+n*n)}function e(S,l,M,j,y,n){return y>=S&&y<=S+M&&n>=l&&n<=l+j}function i(S,l){return!(l.minX>S.maxX||l.maxX<S.minX||l.minY>S.maxY||l.maxY<S.minY)}function p(S,l){return!S||!l?S||l:{minX:Math.min(S.minX,l.minX),minY:Math.min(S.minY,l.minY),maxX:Math.max(S.maxX,l.maxX),maxY:Math.max(S.maxY,l.maxY)}}function m(S,l){return S[0]===l[0]&&S[1]===l[1]}},de35:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("fIp6"),A=_("iTfj"),e=_("5UbV"),i=_("NmWf"),p=function(m){Object(at.b)(S,m);function S(){return m!==null&&m.apply(this,arguments)||this}return S.prototype.getDefaultCfg=function(){var l=m.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},l),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},S.prototype.getContainer=function(){return this.get("container")},S.prototype.show=function(){var l=this.get("container");l.style.display="",this.set("visible",!0)},S.prototype.hide=function(){var l=this.get("container");l.style.display="none",this.set("visible",!1)},S.prototype.setCapture=function(l){var M=this.getContainer(),j=l?"auto":"none";M.style.pointerEvents=j,this.set("capture",l)},S.prototype.getBBox=function(){var l=this.getContainer(),M=parseFloat(l.style.left)||0,j=parseFloat(l.style.top)||0;return Object(e.b)(M,j,l.clientWidth,l.clientHeight)},S.prototype.clear=function(){var l=this.get("container");Object(e.a)(l)},S.prototype.destroy=function(){this.removeEvent(),this.removeDom(),m.prototype.destroy.call(this)},S.prototype.init=function(){m.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},S.prototype.initCapture=function(){this.setCapture(this.get("capture"))},S.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},S.prototype.initDom=function(){},S.prototype.initContainer=function(){var l=this.get("container");if(Object(A.isNil)(l)){l=this.createDom();var M=this.get("parent");Object(A.isString)(M)&&(M=document.getElementById(M),this.set("parent",M)),M.appendChild(l),this.set("container",l)}else Object(A.isString)(l)&&(l=document.getElementById(l),this.set("container",l));this.get("parent")||this.set("parent",l.parentNode)},S.prototype.resetStyles=function(){var l=this.get("domStyles"),M=this.get("defaultStyles");l?l=Object(A.deepMix)({},M,l):l=M,this.set("domStyles",l)},S.prototype.applyStyles=function(){var l=this.get("domStyles");if(!!l){var M=this.getContainer();this.applyChildrenStyles(M,l);var j=this.get("containerClassName");if(j&&Object(e.h)(M,j)){var y=l[j];Object(a.e)(M,y)}}},S.prototype.applyChildrenStyles=function(l,M){Object(A.each)(M,function(j,y){var n=l.getElementsByClassName(y);Object(A.each)(n,function(s){Object(a.e)(s,j)})})},S.prototype.applyStyle=function(l,M){var j=this.get("domStyles");Object(a.e)(M,j[l])},S.prototype.createDom=function(){var l=this.get("containerTpl");return Object(a.b)(l)},S.prototype.initEvent=function(){},S.prototype.removeDom=function(){var l=this.get("container");l&&l.parentNode&&l.parentNode.removeChild(l)},S.prototype.removeEvent=function(){},S.prototype.updateInner=function(l){Object(A.hasKey)(l,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},S.prototype.resetPosition=function(){},S}(i.a);Gt.a=p},dt0z:function(Gn,Gt,_){var at=_("zoYe");function a(A){return A==null?"":at(A)}Gn.exports=a},e0ae:function(Gn,Gt,_){"use strict";(function(at){_.d(Gt,"a",function(){return n});var a=function(){for(var x=0,T=0,N=arguments.length;T<N;T++)x+=arguments[T].length;for(var X=Array(x),tt=0,T=0;T<N;T++)for(var nt=arguments[T],vt=0,ft=nt.length;vt<ft;vt++,tt++)X[tt]=nt[vt];return X},A=function(){function x(T,N,X){this.name=T,this.version=N,this.os=X,this.type="browser"}return x}(),e=function(){function x(T){this.version=T,this.type="node",this.name="node",this.os=at.platform}return x}(),i=function(){function x(T,N,X,tt){this.name=T,this.version=N,this.os=X,this.bot=tt,this.type="bot-device"}return x}(),p=function(){function x(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return x}(),m=function(){function x(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return x}(),S=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,l=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,M=3,j=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",S]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n(x){return x?E(x):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new m:typeof navigator!="undefined"?E(navigator.userAgent):C()}function s(x){return x!==""&&j.reduce(function(T,N){var X=N[0],tt=N[1];if(T)return T;var nt=tt.exec(x);return!!nt&&[X,nt]},!1)}function d(x){var T=s(x);return T?T[0]:null}function E(x){var T=s(x);if(!T)return null;var N=T[0],X=T[1];if(N==="searchbot")return new p;var tt=X[1]&&X[1].split(/[._]/).slice(0,3);tt?tt.length<M&&(tt=a(tt,v(M-tt.length))):tt=[];var nt=tt.join("."),vt=O(x),ft=l.exec(x);return ft&&ft[1]?new i(N,nt,vt,ft[1]):new A(N,nt,vt)}function O(x){for(var T=0,N=y.length;T<N;T++){var X=y[T],tt=X[0],nt=X[1],vt=nt.exec(x);if(vt)return tt}return null}function C(){var x=typeof at!="undefined"&&at.version;return x?new e(at.version.slice(1)):null}function v(x){for(var T=[],N=0;N<x;N++)T.push("0");return T}}).call(this,_("Q2Ig"))},eHqw:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return T});var at=_("mrSG"),a=_("zJSt"),A=_("KMYG"),e=_("w02o"),i=_("YuPD"),p=_("iTfj"),m=_("NzZ7");function S(N){return Object(p.isArray)(N)?N.findIndex(function(X){return X.type==="treemap-drill-down"})>-1:!1}function l(N,X){var tt=S(N);return tt?N.map(function(nt){return nt.type==="treemap-drill-down"?Object(i.b)({},nt,{cfg:{hierarchyConfig:X}}):nt}):N}function M(N){var X=N.data,tt=N.colorField,nt=N.openDrillDown,vt=N.hierarchyConfig,ft=vt===void 0?{}:vt,bt=Object(m.a)(X,Object(at.a)(Object(at.a)({},ft),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),St=[];return bt.forEach(function(pt){if(pt.depth===0||nt&&pt.depth!==1||!nt&&pt.children)return null;var ct=Object.assign({},pt.data,{x:pt.x,y:pt.y,depth:pt.depth,value:pt.value});if(!pt.data[tt]&&pt.parent){var zt=pt.ancestors().find(function(Nt){return Nt.data[tt]});ct[tt]=zt==null?void 0:zt.data[tt]}else ct[tt]=pt.data[tt];St.push(ct)}),St}function j(N){var X=N.options,tt=X.colorField;return Object(i.b)({options:{colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapResquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1,fields:["name","value",tt],formatter:function(vt){return{name:vt.name,value:vt.value}}},interactions:[{type:"view-zoom"},{type:"treemap-element-zoom"}]}},N)}function y(N){var X=N.chart,tt=N.options,nt=tt.color,vt=tt.colorField,ft=tt.rectStyle,bt=M({data:tt.data,colorField:tt.colorField,openDrillDown:S(tt.interactions)});return X.data(bt),Object(A.a)(Object(i.b)({},N,{options:{xField:"x",yField:"y",seriesField:vt,rawFields:["value"],polygon:{color:nt,style:ft}}})),N}function n(N){var X=N.chart;return X.axis(!1),N}function s(N){var X=N.chart,tt=N.options,nt=tt.interactions,vt=tt.hierarchyConfig;return Object(e.c)({chart:X,options:{interactions:l(nt,vt)}}),N}function d(N){return Object(i.e)(j,y,n,e.j,e.d,e.k,s,e.a,Object(e.b)())(N)}var E=_("kXyF"),O=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.cacheDataStack=[],tt}return X.prototype.drill=function(tt){console.log(this.context);var nt=this.context.view,vt=nt.getData(),ft=nt.getGroupScales(),bt=Object(p.get)(nt,["interactions","treemap-drill-down","cfg","hierarchyConfig"],{}),St=M({data:tt,colorField:Object(p.get)(ft,[0,"field"]),openDrillDown:!0,hierarchyConfig:bt});nt.changeData(St),this.cacheDataStack.push(vt)},X.prototype.click=function(){var tt=Object(p.get)(this.context,["event","data","data"]);if(!tt)return!1;this.drill(tt)},X.prototype.reset=function(){var tt=this.context.view;if(!(!Object(p.isArray)(this.cacheDataStack)||this.cacheDataStack.length<=0)){var nt=this.cacheDataStack.splice(this.cacheDataStack.length-1,1);tt.changeData(nt[0])}},X}(E.Action);function C(N){var X=Object(p.get)(N,["event","data","data"],{});return Object(p.isArray)(X.children)&&X.children.length>0&&X.depth===1}function v(N){if(!N||!N.getAction)return!1;var X=N.getAction("treemap-drill-down-action");if(!X)return!1;var tt=X.cacheDataStack;return Object(p.isArray)(tt)&&tt.length>0}Object(E.registerAction)("treemap-drill-down-action",O),Object(E.registerInteraction)("treemap-drill-down",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:pointer"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:C,action:["treemap-drill-down-action:click","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["treemap-drill-down-action:reset"]},{trigger:"reset-button:click",action:["reset-button:hide"],isEnable:function(X){return!v(X)}}]});var x=_("hag6"),T=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.type="treemap",tt}return X.prototype.getSchemaAdaptor=function(){return d},X}(a.a)},eUgh:function(Gn,Gt){function _(at,a){for(var A=-1,e=at==null?0:at.length,i=Array(e);++A<e;)i[A]=a(at[A],A,at);return i}Gn.exports=_},f6Jy:function(Gn,Gt,_){"use strict";var at="*",a=function(){function A(){this._events={}}return A.prototype.on=function(e,i,p){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:i,once:!!p}),this},A.prototype.once=function(e,i){return this.on(e,i,!0),this},A.prototype.emit=function(e){for(var i=this,p=[],m=1;m<arguments.length;m++)p[m-1]=arguments[m];var S=this._events[e]||[],l=this._events[at]||[],M=function(y){for(var n=y.length,s=0;s<n;s++)if(!!y[s]){var d=y[s],E=d.callback,O=d.once;O&&(y.splice(s,1),y.length===0&&delete i._events[e],n--,s--),E.apply(i,p)}};M(S),M(l)},A.prototype.off=function(e,i){if(!e)this._events={};else if(!i)delete this._events[e];else{for(var p=this._events[e]||[],m=p.length,S=0;S<m;S++)p[S].callback===i&&(p.splice(S,1),m--,S--);p.length===0&&delete this._events[e]}return this},A.prototype.getEvents=function(){return this._events},A}();Gt.a=a},fD4D:function(Gn,Gt,_){"use strict";var at=_("ShmH"),a=_.n(at);a.a.version="4.1.7",Gt.default=a.a;var A="4.1.7"},fFDA:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return vt});var at=_("mrSG"),a=_("iTfj"),A=_("MeYt"),e={opacity:0},i={stroke:"#C5C5C5",strokeOpacity:.85},p={fill:"#CACED4",opacity:.85},m=_("LvGN"),S=_("8vsG");function l(bt){return Object(a.map)(bt,function(St,pt){var ct=pt===0?"M":"L",zt=St[0],Nt=St[1];return[ct,zt,Nt]})}function M(bt){return l(bt)}function j(bt){if(bt.length<=2)return M(bt);var St=[];Object(a.each)(bt,function(wt){Object(a.isEqual)(wt,St.slice(St.length-2))||St.push(wt[0],wt[1])});var pt=Object(m.a)(St,!1),ct=Object(a.head)(bt),zt=ct[0],Nt=ct[1];return pt.unshift(["M",zt,Nt]),pt}function y(bt,St,pt,ct){ct===void 0&&(ct=!0);var zt=new S.b({values:bt}),Nt=new S.a({values:Object(a.map)(bt,function(H,ht){return ht})}),wt=Object(a.map)(bt,function(H,ht){return[Nt.scale(ht)*St,pt-zt.scale(H)*pt]});return ct?j(wt):M(wt)}function n(bt,St){var pt=new S.b({values:bt}),ct=Math.max(0,pt.min);return St-pt.scale(ct)*St}function s(bt,St,pt,ct){var zt=Object(at.d)(bt),Nt=n(ct,pt);return zt.push(["L",St,Nt]),zt.push(["L",0,Nt]),zt.push(["Z"]),zt}var d=function(bt){Object(at.b)(St,bt);function St(){return bt!==null&&bt.apply(this,arguments)||this}return St.prototype.getDefaultCfg=function(){var pt=bt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},pt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:e,lineStyle:i,areaStyle:p})},St.prototype.renderInner=function(pt){var ct=this.cfg,zt=ct.width,Nt=ct.height,wt=ct.data,H=ct.smooth,ht=ct.isArea,dt=ct.backgroundStyle,yt=ct.lineStyle,Mt=ct.areaStyle;this.addShape(pt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:zt,height:Nt},dt)});var $=y(wt,zt,Nt,H);if(this.addShape(pt,{id:this.getElementId("line"),type:"path",attrs:Object(at.a)({path:$},yt)}),ht){var lt=s($,zt,Nt,wt);this.addShape(pt,{id:this.getElementId("area"),type:"path",attrs:Object(at.a)({path:lt},Mt)})}},St.prototype.applyOffset=function(){var pt=this.cfg,ct=pt.x,zt=pt.y;this.moveElementTo(this.get("group"),{x:ct,y:zt})},St}(A.a),E=d,O={fill:"#416180",opacity:.05},C={fill:"#5B8FF9",opacity:.15,cursor:"move"},v=10,x={width:v,height:24},T={textBaseline:"middle",fill:"#000",opacity:.45},N="sliderchange",X={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},tt=function(bt){Object(at.b)(St,bt);function St(){return bt!==null&&bt.apply(this,arguments)||this}return St.prototype.getDefaultCfg=function(){var pt=bt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},pt),{name:"handler",x:0,y:0,width:10,height:24,style:X})},St.prototype.renderInner=function(pt){var ct=this.cfg,zt=ct.width,Nt=ct.height,wt=ct.style,H=wt.fill,ht=wt.stroke,dt=wt.radius,yt=wt.opacity,Mt=wt.cursor;this.addShape(pt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:zt,height:Nt,fill:H,stroke:ht,radius:dt,opacity:yt,cursor:Mt}});var $=1/3*zt,lt=2/3*zt,rt=1/4*Nt,z=3/4*Nt;this.addShape(pt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:$,y1:rt,x2:$,y2:z,stroke:ht,cursor:Mt}}),this.addShape(pt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:lt,y1:rt,x2:lt,y2:z,stroke:ht,cursor:Mt}})},St.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},St.prototype.initEvent=function(){this.bindEvents()},St.prototype.bindEvents=function(){var pt=this;this.get("group").on("mouseenter",function(){var ct=pt.get("style").highLightFill;pt.getElementByLocalId("background").attr("fill",ct),pt.draw()}),this.get("group").on("mouseleave",function(){var ct=pt.get("style").fill;pt.getElementByLocalId("background").attr("fill",ct),pt.draw()})},St.prototype.draw=function(){var pt=this.get("container").get("canvas");pt&&pt.draw()},St}(A.a),nt=tt,vt=function(bt){Object(at.b)(St,bt);function St(){var pt=bt!==null&&bt.apply(this,arguments)||this;return pt.onMouseDown=function(ct){return function(zt){pt.currentTarget=ct;var Nt=zt.originalEvent;Nt.stopPropagation(),Nt.preventDefault(),pt.prevX=Object(a.get)(Nt,"touches.0.pageX",Nt.pageX),pt.prevY=Object(a.get)(Nt,"touches.0.pageY",Nt.pageY);var wt=pt.getContainerDOM();wt.addEventListener("mousemove",pt.onMouseMove),wt.addEventListener("mouseup",pt.onMouseUp),wt.addEventListener("mouseleave",pt.onMouseUp),wt.addEventListener("touchmove",pt.onMouseMove),wt.addEventListener("touchend",pt.onMouseUp),wt.addEventListener("touchcancel",pt.onMouseUp)}},pt.onMouseMove=function(ct){var zt=pt.cfg.width,Nt=[pt.get("start"),pt.get("end")];ct.stopPropagation(),ct.preventDefault();var wt=Object(a.get)(ct,"touches.0.pageX",ct.pageX),H=Object(a.get)(ct,"touches.0.pageY",ct.pageY),ht=wt-pt.prevX,dt=pt.adjustOffsetRange(ht/zt);pt.updateStartEnd(dt),pt.updateUI(pt.getElementByLocalId("foreground"),pt.getElementByLocalId("minText"),pt.getElementByLocalId("maxText")),pt.prevX=wt,pt.prevY=H,pt.draw(),pt.emit(N,[pt.get("start"),pt.get("end")].sort()),pt.delegateEmit("valuechanged",{originValue:Nt,value:[pt.get("start"),pt.get("end")]})},pt.onMouseUp=function(){pt.currentTarget&&(pt.currentTarget=void 0);var ct=pt.getContainerDOM();ct&&(ct.removeEventListener("mousemove",pt.onMouseMove),ct.removeEventListener("mouseup",pt.onMouseUp),ct.removeEventListener("mouseleave",pt.onMouseUp),ct.removeEventListener("touchmove",pt.onMouseMove),ct.removeEventListener("touchend",pt.onMouseUp),ct.removeEventListener("touchcancel",pt.onMouseUp))},pt}return St.prototype.setRange=function(pt,ct){this.set("minLimit",pt),this.set("maxLimit",ct);var zt=this.get("start"),Nt=this.get("end"),wt=Object(a.clamp)(zt,pt,ct),H=Object(a.clamp)(Nt,pt,ct);!this.get("isInit")&&(zt!==wt||Nt!==H)&&this.setValue([wt,H])},St.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},St.prototype.setValue=function(pt){var ct=this.getRange();if(Object(a.isArray)(pt)&&pt.length===2){var zt=[this.get("start"),this.get("end")];this.update({start:Object(a.clamp)(pt[0],ct.min,ct.max),end:Object(a.clamp)(pt[1],ct.min,ct.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:zt,value:pt})}},St.prototype.getValue=function(){return[this.get("start"),this.get("end")]},St.prototype.getDefaultCfg=function(){var pt=bt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},pt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:O,foregroundStyle:C,handlerStyle:x,textStyle:T}})},St.prototype.update=function(pt){var ct=pt.start,zt=pt.end,Nt=Object(at.a)({},pt);Object(a.isNil)(ct)||(Nt.start=Object(a.clamp)(ct,0,1)),Object(a.isNil)(zt)||(Nt.end=Object(a.clamp)(zt,0,1)),bt.prototype.update.call(this,Nt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},St.prototype.init=function(){this.set("start",Object(a.clamp)(this.get("start"),0,1)),this.set("end",Object(a.clamp)(this.get("end"),0,1)),bt.prototype.init.call(this)},St.prototype.render=function(){bt.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},St.prototype.renderInner=function(pt){var ct=this.cfg,zt=ct.start,Nt=ct.end,wt=ct.width,H=ct.height,ht=ct.trendCfg,dt=ht===void 0?{}:ht,yt=ct.minText,Mt=ct.maxText,$=ct.backgroundStyle,lt=$===void 0?{}:$,rt=ct.foregroundStyle,z=rt===void 0?{}:rt,P=ct.textStyle,Y=P===void 0?{}:P,k=ct.handlerStyle,h=k===void 0?{}:k,g=zt*wt,B=Nt*wt;Object(a.size)(Object(a.get)(dt,"data"))&&(this.trend=this.addComponent(pt,Object(at.a)({component:d,id:this.getElementId("trend"),x:0,y:0,width:wt,height:H},dt))),this.addShape(pt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:wt,height:H},lt)});var V=this.addShape(pt,{id:this.getElementId("minText"),type:"text",attrs:Object(at.a)({y:H/2,textAlign:"right",text:yt,silent:!1},Y)}),q=this.addShape(pt,{id:this.getElementId("maxText"),type:"text",attrs:Object(at.a)({y:H/2,textAlign:"left",text:Mt,silent:!1},Y)}),it=this.addShape(pt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Object(at.a)({y:0,height:H},z)}),ot=Object(a.get)(h,"height",24);this.minHandler=this.addComponent(pt,Object(at.a)({component:tt,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(H-ot)/2,width:wt,height:ot,cursor:"ew-resize"},h)),this.maxHandler=this.addComponent(pt,Object(at.a)({component:tt,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(H-ot)/2,width:wt,height:ot,cursor:"ew-resize"},h))},St.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},St.prototype.initEvent=function(){this.bindEvents()},St.prototype.updateUI=function(pt,ct,zt){var Nt=this.cfg,wt=Nt.start,H=Nt.end,ht=Nt.width,dt=Nt.minText,yt=Nt.maxText,Mt=Nt.handlerStyle,$=Nt.height,lt=wt*ht,rt=H*ht;this.trend&&(this.trend.update({width:ht,height:$}),this.get("updateAutoRender")||this.trend.render()),pt.attr("x",lt),pt.attr("width",rt-lt);var z=Object(a.get)(Mt,"width",v);ct.attr("text",dt),zt.attr("text",yt);var P=this._dodgeText([lt,rt],ct,zt),Y=P[0],k=P[1];this.minHandler&&(this.minHandler.update({x:lt-z/2}),this.get("updateAutoRender")||this.minHandler.render()),Object(a.each)(Y,function(h,g){return ct.attr(g,h)}),this.maxHandler&&(this.maxHandler.update({x:rt-z/2}),this.get("updateAutoRender")||this.maxHandler.render()),Object(a.each)(k,function(h,g){return zt.attr(g,h)})},St.prototype.bindEvents=function(){var pt=this.get("group");pt.on("handler-min:mousedown",this.onMouseDown("minHandler")),pt.on("handler-min:touchstart",this.onMouseDown("minHandler")),pt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),pt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var ct=pt.findById(this.getElementId("foreground"));ct.on("mousedown",this.onMouseDown("foreground")),ct.on("touchstart",this.onMouseDown("foreground"))},St.prototype.adjustOffsetRange=function(pt){var ct=this.cfg,zt=ct.start,Nt=ct.end;switch(this.currentTarget){case"minHandler":{var wt=0-zt,H=1-zt;return Math.min(H,Math.max(wt,pt))}case"maxHandler":{var wt=0-Nt,H=1-Nt;return Math.min(H,Math.max(wt,pt))}case"foreground":{var wt=0-zt,H=1-Nt;return Math.min(H,Math.max(wt,pt))}}},St.prototype.updateStartEnd=function(pt){var ct=this.cfg,zt=ct.start,Nt=ct.end;switch(this.currentTarget){case"minHandler":zt+=pt;break;case"maxHandler":Nt+=pt;break;case"foreground":zt+=pt,Nt+=pt;break}this.set("start",zt),this.set("end",Nt)},St.prototype._dodgeText=function(pt,ct,zt){var Nt,wt,H=this.cfg,ht=H.handlerStyle,dt=H.width,yt=2,Mt=Object(a.get)(ht,"width",v),$=pt[0],lt=pt[1],rt=!1;$>lt&&(Nt=[lt,$],$=Nt[0],lt=Nt[1],wt=[zt,ct],ct=wt[0],zt=wt[1],rt=!0);var z=ct.getBBox(),P=zt.getBBox(),Y=z.width>$-yt?{x:$+Mt/2+yt,textAlign:"left"}:{x:$-Mt/2-yt,textAlign:"right"},k=P.width>dt-lt-yt?{x:lt-Mt/2-yt,textAlign:"right"}:{x:lt+Mt/2+yt,textAlign:"left"};return rt?[k,Y]:[Y,k]},St.prototype.draw=function(){var pt=this.get("container"),ct=pt&&pt.get("canvas");ct&&ct.draw()},St.prototype.getContainerDOM=function(){var pt=this.get("container"),ct=pt&&pt.get("canvas");return ct&&ct.get("container")},St}(A.a),ft=vt},fIp6:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at}),_.d(Gt,"b",function(){return m}),_.d(Gt,"c",function(){return M}),_.d(Gt,"d",function(){return y}),_.d(Gt,"e",function(){return s});function at(d,E,O){if(d){if(typeof d.addEventListener=="function")return d.addEventListener(E,O,!1),{remove:function(){d.removeEventListener(E,O,!1)}};if(typeof d.attachEvent=="function")return d.attachEvent("on"+E,O),{remove:function(){d.detachEvent("on"+E,O)}}}}var a,A,e,i;function p(){a=document.createElement("table"),A=document.createElement("tr"),e=/^\s*<(\w+|!)[^>]*>/,i={tr:document.createElement("tbody"),tbody:a,thead:a,tfoot:a,td:A,th:A,"*":document.createElement("div")}}function m(d){a||p();var E=e.test(d)&&RegExp.$1;(!E||!(E in i))&&(E="*");var O=i[E];d=d.replace(/(^\s*)|(\s*$)/g,""),O.innerHTML=""+d;var C=O.childNodes[0];return O.removeChild(C),C}function S(d,E,O){var C;try{C=window.getComputedStyle?window.getComputedStyle(d,null)[E]:d.style[E]}catch(v){}finally{C=C===void 0?O:C}return C}function l(d,E){var O=S(d,"height",E);return O==="auto"&&(O=d.offsetHeight),parseFloat(O)}function M(d,E){var O=l(d,E),C=parseFloat(S(d,"borderTopWidth"))||0,v=parseFloat(S(d,"paddingTop"))||0,x=parseFloat(S(d,"paddingBottom"))||0,T=parseFloat(S(d,"borderBottomWidth"))||0,N=parseFloat(S(d,"marginTop"))||0,X=parseFloat(S(d,"marginBottom"))||0;return O+C+T+v+x+N+X}function j(d,E){var O=S(d,"width",E);return O==="auto"&&(O=d.offsetWidth),parseFloat(O)}function y(d,E){var O=j(d,E),C=parseFloat(S(d,"borderLeftWidth"))||0,v=parseFloat(S(d,"paddingLeft"))||0,x=parseFloat(S(d,"paddingRight"))||0,T=parseFloat(S(d,"borderRightWidth"))||0,N=parseFloat(S(d,"marginRight"))||0,X=parseFloat(S(d,"marginLeft"))||0;return O+C+T+v+x+X+N}function n(){return window.devicePixelRatio?window.devicePixelRatio:2}function s(d,E){if(d)for(var O in E)E.hasOwnProperty(O)&&(d.style[O]=E[O]);return d}},fP0w:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return yt}),_.d(Gt,"Circle",function(){return $}),_.d(Gt,"Base",function(){return n});var at={};_.r(at),_.d(at,"getDefault",function(){return E}),_.d(at,"ellipsisHead",function(){return O}),_.d(at,"ellipsisTail",function(){return C}),_.d(at,"ellipsisMiddle",function(){return v});var a={};_.r(a),_.d(a,"getDefault",function(){return vt}),_.d(a,"reserveFirst",function(){return ft}),_.d(a,"reserveLast",function(){return bt}),_.d(a,"reserveBoth",function(){return St}),_.d(a,"equidistance",function(){return pt}),_.d(a,"equidistanceWithReverseBoth",function(){return ct});var A={};_.r(A),_.d(A,"getDefault",function(){return wt}),_.d(A,"fixedAngle",function(){return H}),_.d(A,"unfixedAngle",function(){return ht});var e={};_.r(e),_.d(e,"autoHide",function(){return a}),_.d(e,"autoRotate",function(){return A}),_.d(e,"autoEllipsis",function(){return at});var i=_("mrSG"),p=_("6JdA"),m=_("iTfj"),S=_("MeYt"),l=_("jqgP"),M=_("l3hu"),j=_("L16w"),y=function(lt){Object(i.b)(rt,lt);function rt(){return lt!==null&&lt.apply(this,arguments)||this}return rt.prototype.getDefaultCfg=function(){var z=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},z),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:j.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:j.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:j.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:j.a.textColor,fontFamily:j.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:j.a.textColor,textBaseline:"middle",fontFamily:j.a.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:j.a.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},rt.prototype.renderInner=function(z){this.get("line")&&this.drawLine(z),this.drawTicks(z),this.get("title")&&this.drawTitle(z)},rt.prototype.isList=function(){return!0},rt.prototype.getItems=function(){return this.get("ticks")},rt.prototype.setItems=function(z){this.update({ticks:z})},rt.prototype.updateItem=function(z,P){Object(m.mix)(z,P),this.clear(),this.render()},rt.prototype.clearItems=function(){var z=this.getElementByLocalId("label-group");z&&z.clear()},rt.prototype.setItemState=function(z,P,Y){z[P]=Y,this.updateTickStates(z)},rt.prototype.hasState=function(z,P){return!!z[P]},rt.prototype.getItemStates=function(z){var P=this.get("tickStates"),Y=[];return Object(m.each)(P,function(k,h){z[h]&&Y.push(h)}),Y},rt.prototype.clearItemsState=function(z){var P=this,Y=this.getItemsByState(z);Object(m.each)(Y,function(k){P.setItemState(k,z,!1)})},rt.prototype.getItemsByState=function(z){var P=this,Y=this.getItems();return Object(m.filter)(Y,function(k){return P.hasState(k,z)})},rt.prototype.getSidePoint=function(z,P){var Y=this,k=Y.getSideVector(P,z);return{x:z.x+k[0],y:z.y+k[1]}},rt.prototype.getTextAnchor=function(z){var P;return Object(m.isNumberEqual)(z[0],0)?P="center":z[0]>0?P="start":z[0]<0&&(P="end"),P},rt.prototype.getTextBaseline=function(z){var P;return Object(m.isNumberEqual)(z[1],0)?P="middle":z[1]>0?P="top":z[1]<0&&(P="bottom"),P},rt.prototype.processOverlap=function(z){},rt.prototype.drawLine=function(z){var P=this.getLinePath(),Y=this.get("line");this.addShape(z,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Object(m.mix)({path:P},Y.style)})},rt.prototype.getTickLineItems=function(z){var P=this,Y=[],k=this.get("tickLine"),h=k.alignTick,g=k.length,B=1,V=z.length;return V>=2&&(B=z[1].value-z[0].value),Object(m.each)(z,function(q){var it=q.point;h||(it=P.getTickPoint(q.value-B/2));var ot=P.getSidePoint(it,g);Y.push({startPoint:it,tickValue:q.value,endPoint:ot,tickId:q.id,id:"tickline-"+q.id})}),Y},rt.prototype.getSubTickLineItems=function(z){var P=[],Y=this.get("subTickLine"),k=Y.count,h=z.length;if(h>=2)for(var g=0;g<h-1;g++)for(var B=z[g],V=z[g+1],q=0;q<k;q++){var it=(q+1)/(k+1),ot=(1-it)*B.tickValue+it*V.tickValue,At=this.getTickPoint(ot),gt=this.getSidePoint(At,Y.length);P.push({startPoint:At,endPoint:gt,tickValue:ot,id:"sub-"+B.id+"-"+q})}return P},rt.prototype.getTickLineAttrs=function(z,P,Y,k){var h=this.get(P).style,g={points:[z.startPoint,z.endPoint]},B=Object(m.get)(this.get("theme"),["tickLine","style"],{});h=Object(m.isFunction)(h)?Object(m.mix)({},B,h(g,Y,k)):h;var V=z.startPoint,q=z.endPoint;return Object(i.a)({x1:V.x,y1:V.y,x2:q.x,y2:q.y},h)},rt.prototype.drawTick=function(z,P,Y,k,h){this.addShape(P,{type:"line",id:this.getElementId(z.id),name:"axis-"+Y,attrs:this.getTickLineAttrs(z,Y,k,h)})},rt.prototype.drawTickLines=function(z){var P=this,Y=this.get("ticks"),k=this.get("subTickLine"),h=this.getTickLineItems(Y),g=this.addGroup(z,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),B=this.get("tickLine");if(Object(m.each)(h,function(q,it){if(B.displayWithLabel){var ot=P.getElementId("label-"+q.tickId);z.findById(ot)&&P.drawTick(q,g,"tickLine",it,h)}else P.drawTick(q,g,"tickLine",it,h)}),k){var V=this.getSubTickLineItems(h);Object(m.each)(V,function(q,it){P.drawTick(q,g,"subTickLine",it,V)})}},rt.prototype.processTicks=function(){var z=this,P=this.get("ticks");Object(m.each)(P,function(Y){Y.point=z.getTickPoint(Y.value),Object(m.isNil)(Y.id)&&(Y.id=Y.name)})},rt.prototype.drawTicks=function(z){var P=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(z),this.get("tickLine")&&this.drawTickLines(z);var Y=this.get("ticks");Object(m.each)(Y,function(k){P.applyTickStates(k,z)})},rt.prototype.optimizeTicks=function(){var z=this.get("optimize"),P=this.get("ticks");if(z&&z.enable&&z.threshold>0){var Y=Object(m.size)(P);if(Y>z.threshold){var k=Math.ceil(Y/z.threshold),h=P.filter(function(g,B){return B%k==0});this.set("ticks",h),this.set("originalTicks",P)}}},rt.prototype.getLabelAttrs=function(z,P,Y){var k=this.get("label"),h=k.offset,g=k.rotate,B=k.formatter,V=this.getSidePoint(z.point,h),q=this.getSideVector(h,V),it=B?B(z.name,z,P):z.name,ot=k.style;ot=Object(m.isFunction)(ot)?Object(m.get)(this.get("theme"),["label","style"],{}):ot;var At=Object(m.mix)({x:V.x,y:V.y,text:it,textAlign:this.getTextAnchor(q),textBaseline:this.getTextBaseline(q)},ot);return g&&(At.matrix=Object(l.e)(V,g)),At},rt.prototype.drawLabels=function(z){var P=this,Y=this.get("ticks"),k=this.addGroup(z,{name:"axis-label-group",id:this.getElementId("label-group")});Object(m.each)(Y,function(ot,At){P.addShape(k,{type:"text",name:"axis-label",id:P.getElementId("label-"+ot.id),attrs:P.getLabelAttrs(ot,At,Y),delegateObject:{tick:ot,item:ot,index:At}})}),this.processOverlap(k);var h=k.getChildren(),g=Object(m.get)(this.get("theme"),["label","style"],{}),B=this.get("label"),V=B.style,q=B.formatter;if(Object(m.isFunction)(V)){var it=h.map(function(ot){return Object(m.get)(ot.get("delegateObject"),"tick")});Object(m.each)(h,function(ot,At){var gt=ot.get("delegateObject").tick,mt=q?q(gt.name,gt,At):gt.name,Ot=Object(m.mix)({},g,V(mt,At,it));ot.attr(Ot)})}},rt.prototype.getTitleAttrs=function(){var z=this.get("title"),P=z.style,Y=z.position,k=z.offset,h=z.spacing,g=h===void 0?0:h,B=z.autoRotate,V=P.fontSize,q=.5;Y==="start"?q=0:Y==="end"&&(q=1);var it=this.getTickPoint(q),ot=this.getSidePoint(it,k||g+V/2),At=Object(m.mix)({x:ot.x,y:ot.y,text:z.text},P),gt=z.rotate,mt=gt;if(Object(m.isNil)(gt)&&B){var Ot=this.getAxisVector(it),It=[1,0];mt=p.a.angleTo(Ot,It,!0)}if(mt){var Dt=Object(l.e)(ot,mt);At.matrix=Dt}return At},rt.prototype.drawTitle=function(z){this.addShape(z,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},rt.prototype.applyTickStates=function(z,P){var Y=this.getItemStates(z);if(Y.length){var k=this.get("tickStates"),h=this.getElementId("label-"+z.id),g=P.findById(h);if(g){var B=Object(M.a)(z,"label",k);B&&g.attr(B)}var V=this.getElementId("tickline-"+z.id),q=P.findById(V);if(q){var it=Object(M.a)(z,"tickLine",k);it&&q.attr(it)}}},rt.prototype.updateTickStates=function(z){var P=this.getItemStates(z),Y=this.get("tickStates"),k=this.get("label"),h=this.getElementByLocalId("label-"+z.id),g=this.get("tickLine"),B=this.getElementByLocalId("tickline-"+z.id);if(P.length){if(h){var V=Object(M.a)(z,"label",Y);V&&h.attr(V)}if(B){var q=Object(M.a)(z,"tickLine",Y);q&&B.attr(q)}}else h&&h.attr(k.style),B&&B.attr(g.style)},rt}(S.a),n=y,s=_("BgvD");function d(lt,rt,z,P){var Y=rt.getChildren(),k=!1;return Object(m.each)(Y,function(h){var g=Object(s.a)(lt,h,z,P);k=k||g}),k}function E(){return C}function O(lt,rt,z){return d(lt,rt,z,"head")}function C(lt,rt,z){return d(lt,rt,z,"tail")}function v(lt,rt,z){return d(lt,rt,z,"middle")}var x=_("5UbV");function T(lt){var rt=lt.attr("matrix");return rt&&rt[0]!==1}function N(lt){var rt=T(lt)?Object(l.d)(lt.attr("matrix")):0;return rt%360}function X(lt,rt,z,P){var Y=!1,k=N(rt),h=Math.abs(lt?z.attr("y")-rt.attr("y"):z.attr("x")-rt.attr("x")),g=(lt?z.attr("y")>rt.attr("y"):z.attr("x")>rt.attr("x"))?rt.getBBox():z.getBBox();if(lt){var B=Math.abs(Math.cos(k));Object(x.i)(B,0,Math.PI/180)?Y=g.width+P>h:Y=g.height/B+P>h}else{var B=Math.abs(Math.sin(k));Object(x.i)(B,0,Math.PI/180)?Y=g.width+P>h:Y=g.height/B+P>h}return Y}function tt(lt,rt,z,P){var Y=(P==null?void 0:P.minGap)||0,k=rt.getChildren().slice().filter(function(gt){return gt.get("visible")});if(!k.length)return!1;var h=!1;z&&k.reverse();for(var g=k.length,B=k[0],V=B,q=1;q<g;q++){var it=k[q],ot=it.getBBox(),At=X(lt,V,it,Y);At?(it.hide(),h=!0):V=it}return h}function nt(lt,rt,z){var P=(z==null?void 0:z.minGap)||0,Y=rt.getChildren().slice();if(Y.length<2)return!1;var k=!1,h=Y[0],g=h.getBBox(),B=Y[1],V=Y.length,q=N(h),it=Math.abs(lt?B.attr("y")-h.attr("y"):B.attr("x")-h.attr("x")),ot=0;if(lt){var At=Math.abs(Math.cos(q));if(Object(x.i)(At,0,Math.PI/180)){var gt=Object(s.b)(Y);ot=(gt+P)/it}else ot=(g.height/At+P)/it}else{var At=Math.abs(Math.sin(q));if(Object(x.i)(At,0,Math.PI/180)){var gt=Object(s.b)(Y);ot=(gt+P)/it}else ot=(g.height/At+P)/it}if(ot>1){ot=Math.ceil(ot);for(var mt=0;mt<V;mt++)mt%ot!=0&&(Y[mt].hide(),k=!0)}return k}function vt(){return pt}function ft(lt,rt,z,P){return tt(lt,rt,!1,P)}function bt(lt,rt,z,P){return tt(lt,rt,!0,P)}function St(lt,rt,z,P){var Y=(P==null?void 0:P.minGap)||0,k=rt.getChildren().slice();if(k.length<=2)return!1;for(var h=!1,g=k.length,B=k[0],V=k[g-1],q=B,it=1;it<g-1;it++){var ot=k[it],At=ot.getBBox(),gt=X(lt,q,ot,Y);gt?(ot.hide(),h=!0):q=ot}var mt=X(lt,q,V,Y);return mt&&(q.hide(),h=!0),h}function pt(lt,rt,z,P){var Y=nt(lt,rt,P);return tt(lt,rt,!1)&&(Y=!0),Y}function ct(lt,rt,z,P){var Y=rt.getChildren().slice(),k=nt(lt,rt,P);if(Y.length>2){var h=Y[0],g=Y[Y.length-1];h.get("visible")||(h.show(),tt(lt,rt,!1,P)&&(k=!0)),g.get("visible")||(g.show(),tt(lt,rt,!0,P)&&(k=!0))}return k}function zt(lt,rt){Object(m.each)(lt,function(z){var P=z.attr("x"),Y=z.attr("y"),k=Object(l.e)({x:P,y:Y},rt);z.attr("matrix",k)})}function Nt(lt,rt,z,P){var Y=rt.getChildren();if(!Y.length||!lt&&Y.length<2)return!1;var k=Object(s.b)(Y),h=!1;if(lt)h=!!z&&k>z;else{var g=Math.abs(Y[1].attr("x")-Y[0].attr("x"));h=k>g}if(h){var B=P(z,k);zt(Y,B)}return h}function wt(){return H}function H(lt,rt,z,P){return Nt(lt,rt,z,function(){return Object(m.isNumber)(P)?P:lt?j.a.verticalAxisRotate:j.a.horizontalAxisRotate})}function ht(lt,rt,z){return Nt(lt,rt,z,function(P,Y){if(!P)return lt?j.a.verticalAxisRotate:j.a.horizontalAxisRotate;if(lt)return-Math.acos(P/Y);var k=0;return P>Y?k=Math.PI/4:(k=Math.asin(P/Y),k>Math.PI/4&&(k=Math.PI/4)),k})}var dt=function(lt){Object(i.b)(rt,lt);function rt(){return lt!==null&&lt.apply(this,arguments)||this}return rt.prototype.getDefaultCfg=function(){var z=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},z),{type:"line",locationType:"region",start:null,end:null})},rt.prototype.getLinePath=function(){var z=this.get("start"),P=this.get("end"),Y=[];return Y.push(["M",z.x,z.y]),Y.push(["L",P.x,P.y]),Y},rt.prototype.getInnerLayoutBBox=function(){var z=this.get("start"),P=this.get("end"),Y=lt.prototype.getInnerLayoutBBox.call(this),k=Math.min(z.x,P.x,Y.x),h=Math.min(z.y,P.y,Y.y),g=Math.max(z.x,P.x,Y.maxX),B=Math.max(z.y,P.y,Y.maxY);return{x:k,y:h,minX:k,minY:h,maxX:g,maxY:B,width:g-k,height:B-h}},rt.prototype.isVertical=function(){var z=this.get("start"),P=this.get("end");return Object(m.isNumberEqual)(z.x,P.x)},rt.prototype.isHorizontal=function(){var z=this.get("start"),P=this.get("end");return Object(m.isNumberEqual)(z.y,P.y)},rt.prototype.getTickPoint=function(z){var P=this,Y=P.get("start"),k=P.get("end"),h=k.x-Y.x,g=k.y-Y.y;return{x:Y.x+h*z,y:Y.y+g*z}},rt.prototype.getSideVector=function(z){var P=this.getAxisVector(),Y=p.c.normalize([0,0],P),k=this.get("verticalFactor"),h=[Y[1],Y[0]*-1];return p.c.scale([0,0],h,z*k)},rt.prototype.getAxisVector=function(){var z=this.get("start"),P=this.get("end");return[P.x-z.x,P.y-z.y]},rt.prototype.processOverlap=function(z){var P=this,Y=this.isVertical(),k=this.isHorizontal();if(!(!Y&&!k)){var h=this.get("label"),g=this.get("title"),B=this.get("verticalLimitLength"),V=h.offset,q=B,it=0,ot=0;g&&(it=g.style.fontSize,ot=g.spacing),q&&(q=q-V-ot-it);var At=this.get("overlapOrder");if(Object(m.each)(At,function(Ot){h[Ot]&&P.canProcessOverlap(Ot)&&P.autoProcessOverlap(Ot,h[Ot],z,q)}),g&&Object(m.isNil)(g.offset)){var gt=z.getCanvasBBox(),mt=Y?gt.width:gt.height;g.offset=V+mt+ot+it/2}}},rt.prototype.canProcessOverlap=function(z){var P=this.get("label");return z==="autoRotate"?Object(m.isNil)(P.rotate):!0},rt.prototype.autoProcessOverlap=function(z,P,Y,k){var h=this,g=this.isVertical(),B=!1,V=e[z];if(P===!0){var q=this.get("label");B=V.getDefault()(g,Y,k)}else if(Object(m.isFunction)(P))B=P(g,Y,k);else if(Object(m.isObject)(P)){var it=P;V[it.type]&&(B=V[it.type](g,Y,k,it.cfg))}else V[P]&&(B=V[P](g,Y,k));if(z==="autoRotate"){if(B){var ot=Y.getChildren(),At=this.get("verticalFactor");Object(m.each)(ot,function(mt){var Ot=mt.attr("textAlign");if(Ot==="center"){var It=At>0?"end":"start";mt.attr("textAlign",It)}})}}else if(z==="autoHide"){var gt=Y.getChildren().slice(0);Object(m.each)(gt,function(mt){mt.get("visible")||(h.get("isRegister")&&h.unregisterElement(mt),mt.remove())})}},rt}(n),yt=dt,Mt=function(lt){Object(i.b)(rt,lt);function rt(){return lt!==null&&lt.apply(this,arguments)||this}return rt.prototype.getDefaultCfg=function(){var z=lt.prototype.getDefaultCfg.call(this);return Object(i.a)(Object(i.a)({},z),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},rt.prototype.getLinePath=function(){var z=this.get("center"),P=z.x,Y=z.y,k=this.get("radius"),h=k,g=this.get("startAngle"),B=this.get("endAngle"),V=[];if(Math.abs(B-g)===Math.PI*2)V=[["M",P,Y-h],["A",k,h,0,1,1,P,Y+h],["A",k,h,0,1,1,P,Y-h],["Z"]];else{var q=this.getCirclePoint(g),it=this.getCirclePoint(B),ot=Math.abs(B-g)>Math.PI?1:0,At=g>B?0:1;V=[["M",P,Y],["L",q.x,q.y],["A",k,h,0,ot,At,it.x,it.y],["L",P,Y]]}return V},rt.prototype.getTickPoint=function(z){var P=this.get("startAngle"),Y=this.get("endAngle"),k=P+(Y-P)*z;return this.getCirclePoint(k)},rt.prototype.getSideVector=function(z,P){var Y=this.get("center"),k=[P.x-Y.x,P.y-Y.y],h=this.get("verticalFactor"),g=p.c.length(k);return p.c.scale(k,k,h*z/g),k},rt.prototype.getAxisVector=function(z){var P=this.get("center"),Y=[z.x-P.x,z.y-P.y];return[Y[1],-1*Y[0]]},rt.prototype.getCirclePoint=function(z,P){var Y=this.get("center");return P=P||this.get("radius"),{x:Y.x+Math.cos(z)*P,y:Y.y+Math.sin(z)*P}},rt}(n),$=Mt},gFTJ:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return T});var at=_("rePB"),a=_("ODXe"),A=_("U8pU"),e=_("q1tI"),i=_("TSYQ"),p=_.n(i),m=_("Zm9Q"),S=_("ACnJ"),l=_("uaoM"),M=_("H84U"),j=_("wx14");function y(bt){return bt!=null}var n=function(St){var pt=St.itemPrefixCls,ct=St.component,zt=St.span,Nt=St.className,wt=St.style,H=St.labelStyle,ht=St.contentStyle,dt=St.bordered,yt=St.label,Mt=St.content,$=St.colon,lt=ct;if(dt){var rt;return e.createElement(lt,{className:p()((rt={},Object(at.a)(rt,"".concat(pt,"-item-label"),y(yt)),Object(at.a)(rt,"".concat(pt,"-item-content"),y(Mt)),rt),Nt),style:wt,colSpan:zt},y(yt)?yt:Mt)}return e.createElement(lt,{className:p()("".concat(pt,"-item"),Nt),style:wt,colSpan:zt},e.createElement("div",{className:"".concat(pt,"-item-container")},yt&&e.createElement("span",{className:p()("".concat(pt,"-item-label"),Object(at.a)({},"".concat(pt,"-item-no-colon"),!$)),style:H},yt),Mt&&e.createElement("span",{className:p()("".concat(pt,"-item-content")),style:ht},Mt)))},s=n;function d(bt,St,pt){var ct=St.colon,zt=St.prefixCls,Nt=St.bordered,wt=pt.component,H=pt.type,ht=pt.showLabel,dt=pt.showContent,yt=pt.labelStyle,Mt=pt.contentStyle;return bt.map(function($,lt){var rt=$.props,z=rt.label,P=rt.children,Y=rt.prefixCls,k=Y===void 0?zt:Y,h=rt.className,g=rt.style,B=rt.labelStyle,V=rt.contentStyle,q=rt.span,it=q===void 0?1:q,ot=$.key;return typeof wt=="string"?e.createElement(s,{key:"".concat(H,"-").concat(ot||lt),className:h,style:g,labelStyle:Object(j.a)(Object(j.a)({},yt),B),contentStyle:Object(j.a)(Object(j.a)({},Mt),V),span:it,colon:ct,component:wt,itemPrefixCls:k,bordered:Nt,label:ht?z:null,content:dt?P:null}):[e.createElement(s,{key:"label-".concat(ot||lt),className:h,style:Object(j.a)(Object(j.a)(Object(j.a)({},yt),g),B),span:1,colon:ct,component:wt[0],itemPrefixCls:k,bordered:Nt,label:z}),e.createElement(s,{key:"content-".concat(ot||lt),className:h,style:Object(j.a)(Object(j.a)(Object(j.a)({},Mt),g),V),span:it*2-1,component:wt[1],itemPrefixCls:k,bordered:Nt,content:P})]})}var E=function(St){var pt=e.useContext(T),ct=St.prefixCls,zt=St.vertical,Nt=St.row,wt=St.index,H=St.bordered;return zt?e.createElement(e.Fragment,null,e.createElement("tr",{key:"label-".concat(wt),className:"".concat(ct,"-row")},d(Nt,St,Object(j.a)({component:"th",type:"label",showLabel:!0},pt))),e.createElement("tr",{key:"content-".concat(wt),className:"".concat(ct,"-row")},d(Nt,St,Object(j.a)({component:"td",type:"content",showContent:!0},pt)))):e.createElement("tr",{key:wt,className:"".concat(ct,"-row")},d(Nt,St,Object(j.a)({component:H?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},pt)))},O=E,C=function(St){var pt=St.children;return pt},v=C,x=_("0n0R"),T=e.createContext({}),N={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function X(bt,St){if(typeof bt=="number")return bt;if(Object(A.a)(bt)==="object")for(var pt=0;pt<S.b.length;pt++){var ct=S.b[pt];if(St[ct]&&bt[ct]!==void 0)return bt[ct]||N[ct]}return 3}function tt(bt,St,pt){var ct=bt;return(St===void 0||St>pt)&&(ct=Object(x.a)(bt,{span:pt}),Object(l.a)(St===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),ct}function nt(bt,St){var pt=Object(m.a)(bt).filter(function(wt){return wt}),ct=[],zt=[],Nt=St;return pt.forEach(function(wt,H){var ht,dt=(ht=wt.props)===null||ht===void 0?void 0:ht.span,yt=dt||1;if(H===pt.length-1){zt.push(tt(wt,dt,Nt)),ct.push(zt);return}yt<Nt?(Nt-=yt,zt.push(wt)):(zt.push(tt(wt,yt,Nt)),ct.push(zt),Nt=St,zt=[])}),ct}function vt(bt){var St,pt=bt.prefixCls,ct=bt.title,zt=bt.extra,Nt=bt.column,wt=Nt===void 0?N:Nt,H=bt.colon,ht=H===void 0?!0:H,dt=bt.bordered,yt=bt.layout,Mt=bt.children,$=bt.className,lt=bt.style,rt=bt.size,z=bt.labelStyle,P=bt.contentStyle,Y=e.useContext(M.b),k=Y.getPrefixCls,h=Y.direction,g=k("descriptions",pt),B=e.useState({}),V=Object(a.a)(B,2),q=V[0],it=V[1],ot=X(wt,q);e.useEffect(function(){var gt=S.a.subscribe(function(mt){Object(A.a)(wt)==="object"&&it(mt)});return function(){S.a.unsubscribe(gt)}},[]);var At=nt(Mt,ot);return e.createElement(T.Provider,{value:{labelStyle:z,contentStyle:P}},e.createElement("div",{className:p()(g,(St={},Object(at.a)(St,"".concat(g,"-").concat(rt),rt&&rt!=="default"),Object(at.a)(St,"".concat(g,"-bordered"),!!dt),Object(at.a)(St,"".concat(g,"-rtl"),h==="rtl"),St),$),style:lt},(ct||zt)&&e.createElement("div",{className:"".concat(g,"-header")},ct&&e.createElement("div",{className:"".concat(g,"-title")},ct),zt&&e.createElement("div",{className:"".concat(g,"-extra")},zt)),e.createElement("div",{className:"".concat(g,"-view")},e.createElement("table",null,e.createElement("tbody",null,At.map(function(gt,mt){return e.createElement(O,{key:mt,index:mt,colon:ht,prefixCls:g,vertical:yt==="vertical",bordered:dt,row:gt})}))))))}vt.Item=v;var ft=Gt.b=vt},"h4/5":function(Gn,Gt){},hJqF:function(Gn,Gt,_){"use strict";_.d(Gt,"d",function(){return S}),_.d(Gt,"b",function(){return l}),_.d(Gt,"c",function(){return M}),_.d(Gt,"a",function(){return n});var at=_("mrSG"),a=_("iTfj"),A=_("w02o"),e=_("YuPD"),i=_("tKoa"),p=_("DyAw");function m(s){var d=s.chart,E=s.options,O=E.data,C=E.color,v=E.lineStyle,x=E.lineShape,T=E.point,N=E.seriesField;d.data(O);var X=Object(e.b)({},s,{options:{shapeField:N,line:{color:C,style:v,shape:x},point:T&&Object(at.a)({color:C,shape:"circle"},T),label:void 0}}),tt=Object(e.b)({},X,{options:{tooltip:!1}});return Object(i.d)(X),Object(i.e)(tt),s}function S(s){var d,E,O=s.options,C=O.xAxis,v=O.yAxis,x=O.xField,T=O.yField,N=O.data;return Object(e.e)(Object(A.f)((d={},d[x]=C,d[T]=v,d),(E={},E[x]={type:"cat"},E[T]=Object(p.a)(N,T),E)))(s)}function l(s){var d=s.chart,E=s.options,O=E.xAxis,C=E.yAxis,v=E.xField,x=E.yField;return O===!1?d.axis(v,!1):d.axis(v,O),C===!1?d.axis(x,!1):d.axis(x,C),s}function M(s){var d=s.chart,E=s.options,O=E.legend,C=E.seriesField;return O&&C?d.legend(C,O):O===!1&&d.legend(!1),s}function j(s){var d=s.chart,E=s.options,O=E.label,C=E.yField,v=Object(e.c)(d,"line");if(!O)v.label(!1);else{var x=O.callback,T=Object(at.c)(O,["callback"]);v.label({fields:[C],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(e.o)(T))})}return s}function y(s){var d=s.chart,E=s.options,O=E.isStack;return O&&Object(a.each)(d.geometries,function(C){C.adjust("stack")}),s}function n(s){return Object(e.e)(m,S,y,A.j,l,M,A.k,j,A.h,A.c,A.a,Object(A.b)(),A.e)(s)}},hKUY:function(Gn,Gt,_){"use strict";var at=_("IzEo"),a=_("bx4M"),A=_("VTBJ"),e=_("14J3"),i=_("BMrR"),p=_("jCWc"),m=_("kPKH"),S=_("nKUr"),l=_.n(S),M=_("q1tI"),j=_.n(M),y=_("CmcY"),n=_("wd/R"),s=_.n(n),d=_("06Lf"),E=_("nMtQ"),O=_.n(E),C=function(x){var T=x.title,N=T===void 0?"":T,X=x.updateTime,tt=X===void 0?Date.now():X,nt=x.data,vt=nt===void 0?[]:nt,ft=x.chartConfig;return Object(S.jsxs)(a.a,{title:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:N}),Object(S.jsx)("span",{className:O.a.updateTime,children:s()(tt).format("YYYY-MM-DD HH:mm:ss")})]}),children:[Object(S.jsx)(i.a,{children:vt.map(function(bt){return Object(S.jsx)(m.a,{sm:24/vt.length,children:Object(S.jsx)(y.a,{title:bt.title,value:bt.value,text:bt.text,percent:bt.percent})},bt.title)})}),ft&&Object(S.jsx)(i.a,{children:Object(S.jsx)(m.a,{sm:24,children:Object(S.jsx)(d.b,Object(A.a)({},ft))})})]})};Gt.a=C},hag6:function(Gn,Gt,_){"use strict";var at=_("kXyF");Object(at.registerInteraction)("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]})},iTfj:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"contains",function(){return e}),_.d(Gt,"includes",function(){return e}),_.d(Gt,"difference",function(){return S}),_.d(Gt,"find",function(){return bt}),_.d(Gt,"findIndex",function(){return pt}),_.d(Gt,"firstValue",function(){return zt}),_.d(Gt,"flatten",function(){return wt}),_.d(Gt,"flattenDeep",function(){return ht}),_.d(Gt,"getRange",function(){return yt}),_.d(Gt,"pull",function(){return z}),_.d(Gt,"pullAt",function(){return k}),_.d(Gt,"reduce",function(){return g}),_.d(Gt,"remove",function(){return V}),_.d(Gt,"sortBy",function(){return ot}),_.d(Gt,"union",function(){return Ot}),_.d(Gt,"uniq",function(){return gt}),_.d(Gt,"valuesOfKey",function(){return It}),_.d(Gt,"head",function(){return Dt}),_.d(Gt,"last",function(){return Ut}),_.d(Gt,"startsWith",function(){return Vt}),_.d(Gt,"endsWith",function(){return re}),_.d(Gt,"filter",function(){return p}),_.d(Gt,"every",function(){return ye}),_.d(Gt,"some",function(){return Ne}),_.d(Gt,"group",function(){return Rn}),_.d(Gt,"groupBy",function(){return hn}),_.d(Gt,"groupToMap",function(){return Tn}),_.d(Gt,"getWrapBehavior",function(){return Cn}),_.d(Gt,"wrapBehavior",function(){return Kn}),_.d(Gt,"number2color",function(){return nr}),_.d(Gt,"parseRadius",function(){return Sr}),_.d(Gt,"clamp",function(){return ti}),_.d(Gt,"fixedBase",function(){return Fi}),_.d(Gt,"isDecimal",function(){return Ui}),_.d(Gt,"isEven",function(){return Vi}),_.d(Gt,"isInteger",function(){return jr}),_.d(Gt,"isNegative",function(){return pr}),_.d(Gt,"isNumberEqual",function(){return Br}),_.d(Gt,"isOdd",function(){return Yr}),_.d(Gt,"isPositive",function(){return ni}),_.d(Gt,"maxBy",function(){return fi}),_.d(Gt,"minBy",function(){return $r}),_.d(Gt,"mod",function(){return Qr}),_.d(Gt,"toDegree",function(){return bi}),_.d(Gt,"toInteger",function(){return zi}),_.d(Gt,"toRadian",function(){return Wi}),_.d(Gt,"forIn",function(){return Zi}),_.d(Gt,"has",function(){return Pi}),_.d(Gt,"hasKey",function(){return no}),_.d(Gt,"hasValue",function(){return uo}),_.d(Gt,"keys",function(){return x}),_.d(Gt,"isMatch",function(){return N}),_.d(Gt,"values",function(){return ao}),_.d(Gt,"lowerCase",function(){return Kt}),_.d(Gt,"lowerFirst",function(){return Oe}),_.d(Gt,"substitute",function(){return On}),_.d(Gt,"upperCase",function(){return Yn}),_.d(Gt,"upperFirst",function(){return rn}),_.d(Gt,"getType",function(){return vr}),_.d(Gt,"isArguments",function(){return rr}),_.d(Gt,"isArray",function(){return d}),_.d(Gt,"isArrayLike",function(){return a}),_.d(Gt,"isBoolean",function(){return Ar}),_.d(Gt,"isDate",function(){return xr}),_.d(Gt,"isError",function(){return Ir}),_.d(Gt,"isFunction",function(){return y}),_.d(Gt,"isFinite",function(){return Lr}),_.d(Gt,"isNil",function(){return s}),_.d(Gt,"isNull",function(){return Dr}),_.d(Gt,"isNumber",function(){return si}),_.d(Gt,"isObject",function(){return E}),_.d(Gt,"isObjectLike",function(){return tt}),_.d(Gt,"isPlainObject",function(){return vt}),_.d(Gt,"isPrototype",function(){return ii}),_.d(Gt,"isRegExp",function(){return _i}),_.d(Gt,"isString",function(){return q}),_.d(Gt,"isType",function(){return j}),_.d(Gt,"isUndefined",function(){return Bi}),_.d(Gt,"isElement",function(){return ve}),_.d(Gt,"requestAnimationFrame",function(){return G}),_.d(Gt,"clearAnimationFrame",function(){return F}),_.d(Gt,"augment",function(){return Jt}),_.d(Gt,"clone",function(){return se}),_.d(Gt,"debounce",function(){return Ee}),_.d(Gt,"memoize",function(){return un}),_.d(Gt,"deepMix",function(){return Se}),_.d(Gt,"each",function(){return C}),_.d(Gt,"extend",function(){return ue}),_.d(Gt,"indexOf",function(){return Dn}),_.d(Gt,"isEmpty",function(){return Ze}),_.d(Gt,"isEqual",function(){return R}),_.d(Gt,"isEqualWith",function(){return xt}),_.d(Gt,"map",function(){return me}),_.d(Gt,"mapValues",function(){return de}),_.d(Gt,"mix",function(){return ut}),_.d(Gt,"assign",function(){return ut}),_.d(Gt,"get",function(){return he}),_.d(Gt,"set",function(){return ce}),_.d(Gt,"pick",function(){return ze}),_.d(Gt,"throttle",function(){return Ve}),_.d(Gt,"toArray",function(){return ke}),_.d(Gt,"toString",function(){return xo}),_.d(Gt,"uniqueId",function(){return De}),_.d(Gt,"noop",function(){return cn}),_.d(Gt,"identity",function(){return fn}),_.d(Gt,"size",function(){return nn}),_.d(Gt,"Cache",function(){return Sn});var at=function(le){return le!==null&&typeof le!="function"&&isFinite(le.length)},a=at,A=function(le,Le){return a(le)?le.indexOf(Le)>-1:!1},e=A,i=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Le(sn,en)&&Be.push(sn)}return Be},p=i,m=function(le,Le){return Le===void 0&&(Le=[]),p(le,function(Be){return!e(Le,Be)})},S=m,l={}.toString,M=function(le,Le){return l.call(le)==="[object "+Le+"]"},j=M,y=function(Pe){return j(Pe,"Function")},n=function(le){return le==null},s=n,d=function(Pe){return Array.isArray?Array.isArray(Pe):j(Pe,"Array")},E=function(Pe){var le=typeof Pe;return Pe!==null&&le==="object"||le==="function"};function O(Pe,le){if(!!Pe){var Le;if(d(Pe))for(var Be=0,en=Pe.length;Be<en&&(Le=le(Pe[Be],Be),Le!==!1);Be++);else if(E(Pe)){for(var sn in Pe)if(Pe.hasOwnProperty(sn)&&(Le=le(Pe[sn],sn),Le===!1))break}}}var C=O,v=Object.keys?function(Pe){return Object.keys(Pe)}:function(Pe){var le=[];return C(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Be)}),le},x=v;function T(Pe,le){var Le=x(le),Be=Le.length;if(s(Pe))return!Be;for(var en=0;en<Be;en+=1){var sn=Le[en];if(le[sn]!==Pe[sn]||!(sn in Pe))return!1}return!0}var N=T,X=function(le){return typeof le=="object"&&le!==null},tt=X,nt=function(le){if(!tt(le)||!j(le,"Object"))return!1;if(Object.getPrototypeOf(le)===null)return!0;for(var Le=le;Object.getPrototypeOf(Le)!==null;)Le=Object.getPrototypeOf(Le);return Object.getPrototypeOf(le)===Le},vt=nt;function ft(Pe,le){if(!d(Pe))return null;var Le;if(y(le)&&(Le=le),vt(le)&&(Le=function(sn){return N(sn,le)}),Le){for(var Be=0;Be<Pe.length;Be+=1)if(Le(Pe[Be]))return Pe[Be]}return null}var bt=ft;function St(Pe,le,Le){Le===void 0&&(Le=0);for(var Be=Le;Be<Pe.length;Be++)if(le(Pe[Be],Be))return Be;return-1}var pt=St,ct=function(le,Le){for(var Be=null,en=0;en<le.length;en++){var sn=le[en],_e=sn[Le];if(!s(_e)){d(_e)?Be=_e[0]:Be=_e;break}}return Be},zt=ct,Nt=function(le){if(!d(le))return[];for(var Le=[],Be=0;Be<le.length;Be++)Le=Le.concat(le[Be]);return Le},wt=Nt,H=function Pe(le,Le){if(Le===void 0&&(Le=[]),!d(le))Le.push(le);else for(var Be=0;Be<le.length;Be+=1)Pe(le[Be],Le);return Le},ht=H,dt=function(le){var Le=le.filter(function(ln){return!isNaN(ln)});if(!Le.length)return{min:0,max:0};if(d(le[0])){for(var Be=[],en=0;en<le.length;en++)Be=Be.concat(le[en]);Le=Be}var sn=Math.max.apply(null,Le),_e=Math.min.apply(null,Le);return{min:_e,max:sn}},yt=dt,Mt=Array.prototype,$=Mt.splice,lt=Mt.indexOf,rt=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en++)for(var sn=Le[en],_e=-1;(_e=lt.call(le,sn))>-1;)$.call(le,_e,1);return le},z=rt,P=Array.prototype.splice,Y=function(le,Le){if(!a(le))return[];for(var Be=le?Le.length:0,en=Be-1;Be--;){var sn=void 0,_e=Le[Be];(Be===en||_e!==sn)&&(sn=_e,P.call(le,_e,1))}return le},k=Y,h=function(le,Le,Be){if(!d(le)&&!vt(le))return le;var en=Be;return C(le,function(sn,_e){en=Le(en,sn,_e)}),en},g=h,B=function(le,Le){var Be=[];if(!a(le))return Be;for(var en=-1,sn=[],_e=le.length;++en<_e;){var ln=le[en];Le(ln,en,le)&&(Be.push(ln),sn.push(en))}return k(le,sn),Be},V=B,q=function(Pe){return j(Pe,"String")};function it(Pe,le){var Le;if(y(le))Le=function(sn,_e){return le(sn)-le(_e)};else{var Be=[];q(le)?Be.push(le):d(le)&&(Be=le),Le=function(sn,_e){for(var ln=0;ln<Be.length;ln+=1){var mn=Be[ln];if(sn[mn]>_e[mn])return 1;if(sn[mn]<_e[mn])return-1}return 0}}return Pe.sort(Le),Pe}var ot=it,At=function(le){var Le=[];return C(le,function(Be){e(Le,Be)||Le.push(Be)}),Le},gt=At,mt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];return gt([].concat.apply([],le))},Ot=mt,It=function(Pe,le){for(var Le=[],Be={},en=0;en<Pe.length;en++){var sn=Pe[en],_e=sn[le];if(!s(_e)){d(_e)||(_e=[_e]);for(var ln=0;ln<_e.length;ln++){var mn=_e[ln];Be[mn]||(Le.push(mn),Be[mn]=!0)}}}return Le};function Dt(Pe){if(a(Pe))return Pe[0]}function Ut(Pe){if(a(Pe)){var le=Pe;return le[le.length-1]}}function Ct(Pe,le){return d(Pe)||q(Pe)?Pe[0]===le:!1}var Vt=Ct;function Ht(Pe,le){return d(Pe)||q(Pe)?Pe[Pe.length-1]===le:!1}var re=Ht,pe=function(le,Le){for(var Be=0;Be<le.length;Be++)if(!Le(le[Be],Be))return!1;return!0},ye=pe,we=function(le,Le){for(var Be=0;Be<le.length;Be++)if(Le(le[Be],Be))return!0;return!1},Ne=we,Ke=Object.prototype.hasOwnProperty;function pn(Pe,le){if(!le||!d(Pe))return{};for(var Le={},Be=y(le)?le:function(ln){return ln[le]},en,sn=0;sn<Pe.length;sn++){var _e=Pe[sn];en=Be(_e),Ke.call(Le,en)?Le[en].push(_e):Le[en]=[_e]}return Le}var hn=pn,kn=function(le,Le){if(!Le)return{0:le};if(!y(Le)){var Be=d(Le)?Le:Le.replace(/\s+/g,"").split("*");Le=function(_e){for(var ln="_",mn=0,Wn=Be.length;mn<Wn;mn++)ln+=_e[Be[mn]]&&_e[Be[mn]].toString();return ln}}var en=hn(le,Le);return en},Tn=kn,Rn=function(Pe,le){if(!le)return[Pe];var Le=Tn(Pe,le),Be=[];for(var en in Le)Be.push(Le[en]);return Be};function Mn(Pe,le){return Pe["_wrap_"+le]}var Cn=Mn;function _n(Pe,le){if(Pe["_wrap_"+le])return Pe["_wrap_"+le];var Le=function(en){Pe[le](en)};return Pe["_wrap_"+le]=Le,Le}var Kn=_n,tr={};function or(Pe){var le=tr[Pe];if(!le){for(var Le=Pe.toString(16),Be=Le.length;Be<6;Be++)Le="0"+Le;le="#"+Le,tr[Pe]=le}return le}var nr=or;function er(Pe){var le=0,Le=0,Be=0,en=0;return d(Pe)?Pe.length===1?le=Le=Be=en=Pe[0]:Pe.length===2?(le=Be=Pe[0],Le=en=Pe[1]):Pe.length===3?(le=Pe[0],Le=en=Pe[1],Be=Pe[2]):(le=Pe[0],Le=Pe[1],Be=Pe[2],en=Pe[3]):le=Le=Be=en=Pe,{r1:le,r2:Le,r3:Be,r4:en}}var Sr=er,Vr=function(le,Le,Be){return le<Le?Le:le>Be?Be:le},ti=Vr,hi=function(le,Le){var Be=Le.toString(),en=Be.indexOf(".");if(en===-1)return Math.round(le);var sn=Be.substr(en+1).length;return sn>20&&(sn=20),parseFloat(le.toFixed(sn))},Fi=hi,to=function(le){return j(le,"Number")},si=to,Ci=function(le){return si(le)&&le%1!=0},Ui=Ci,Li=function(le){return si(le)&&le%2==0},Vi=Li,ro=Number.isInteger?Number.isInteger:function(Pe){return si(Pe)&&Pe%1==0},jr=ro,Ji=function(le){return si(le)&&le<0},pr=Ji,Xr=1e-5;function Br(Pe,le,Le){return Le===void 0&&(Le=Xr),Math.abs(Pe-le)<Le}var Nr=function(le){return si(le)&&le%2!=0},Yr=Nr,Kr=function(le){return si(le)&&le>0},ni=Kr,fi=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return C(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en>Be&&(Le=sn,Be=en)}),Le}},$r=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return C(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en<Be&&(Le=sn,Be=en)}),Le}},ci=function(le,Le){return(le%Le+Le)%Le},Qr=ci,gi=180/Math.PI,Oi=function(le){return gi*le},bi=Oi,zi=parseInt,Qi=Math.PI/180,io=function(le){return Qi*le},Wi=io,Zi=C,Pi=function(Pe,le){return Pe.hasOwnProperty(le)},no=Pi,Mo=Object.values?function(Pe){return Object.values(Pe)}:function(Pe){var le=[];return C(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Le)}),le},ao=Mo,uo=function(Pe,le){return e(ao(Pe),le)},xo=function(Pe){return s(Pe)?"":Pe.toString()},oe=function(le){return xo(le).toLowerCase()},Kt=oe,te=function(le){var Le=xo(le);return Le.charAt(0).toLowerCase()+Le.substring(1)},Oe=te;function Qe(Pe,le){return!Pe||!le?Pe:Pe.replace(/\\?\{([^{}]+)\}/g,function(Le,Be){return Le.charAt(0)==="\\"?Le.slice(1):le[Be]===void 0?"":le[Be]})}var On=Qe,Vn=function(le){return xo(le).toUpperCase()},Yn=Vn,$e=function(le){var Le=xo(le);return Le.charAt(0).toUpperCase()+Le.substring(1)},rn=$e,on={}.toString,$n=function(le){return on.call(le).replace(/^\[object /,"").replace(/]$/,"")},vr=$n,ar=function(le){return j(le,"Arguments")},rr=ar,Fr=function(le){return j(le,"Boolean")},Ar=Fr,wr=function(le){return j(le,"Date")},xr=wr,Er=function(le){return j(le,"Error")},Ir=Er,Lr=function(Pe){return si(Pe)&&isFinite(Pe)},Pr=function(le){return le===null},Dr=Pr,ri=Object.prototype,vi=function(le){var Le=le&&le.constructor,Be=typeof Le=="function"&&Le.prototype||ri;return le===Be},ii=vi,Si=function(le){return j(le,"RegExp")},_i=Si,Xi=function(le){return le===void 0},Bi=Xi,Di=function(le){return le instanceof Element||le instanceof HTMLDocument},ve=Di;function G(Pe){var le=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Le){return setTimeout(Le,16)};return le(Pe)}function F(Pe){var le=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;le(Pe)}function Z(Pe,le){for(var Le in le)le.hasOwnProperty(Le)&&Le!=="constructor"&&le[Le]!==void 0&&(Pe[Le]=le[Le])}function ut(Pe,le,Le,Be){return le&&Z(Pe,le),Le&&Z(Pe,Le),Be&&Z(Pe,Be),Pe}var Bt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];for(var Be=le[0],en=1;en<le.length;en++){var sn=le[en];y(sn)&&(sn=sn.prototype),ut(Be.prototype,sn)}},Jt=Bt,ie=function Pe(le){if(typeof le!="object"||le===null)return le;var Le;if(d(le)){Le=[];for(var Be=0,en=le.length;Be<en;Be++)typeof le[Be]=="object"&&le[Be]!=null?Le[Be]=Pe(le[Be]):Le[Be]=le[Be]}else{Le={};for(var sn in le)typeof le[sn]=="object"&&le[sn]!=null?Le[sn]=Pe(le[sn]):Le[sn]=le[sn]}return Le},se=ie;function Te(Pe,le,Le){var Be;return function(){var en=this,sn=arguments,_e=function(){Be=null,Le||Pe.apply(en,sn)},ln=Le&&!Be;clearTimeout(Be),Be=setTimeout(_e,le),ln&&Pe.apply(en,sn)}}var Ee=Te,un=function(Pe,le){if(!y(Pe))throw new TypeError("Expected a function");var Le=function Be(){for(var en=[],sn=0;sn<arguments.length;sn++)en[sn]=arguments[sn];var _e=le?le.apply(this,en):en[0],ln=Be.cache;if(ln.has(_e))return ln.get(_e);var mn=Pe.apply(this,en);return ln.set(_e,mn),mn};return Le.cache=new Map,Le},xn=5;function _t(Pe,le,Le,Be){Le=Le||0,Be=Be||xn;for(var en in le)if(le.hasOwnProperty(en)){var sn=le[en];sn!==null&&vt(sn)?(vt(Pe[en])||(Pe[en]={}),Le<Be?_t(Pe[en],sn,Le+1,Be):Pe[en]=le[en]):d(sn)?(Pe[en]=[],Pe[en]=Pe[en].concat(sn)):sn!==void 0&&(Pe[en]=sn)}}var Xt=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en+=1)_t(le,Le[en]);return le},Se=Xt,Wt=function(le,Le,Be,en){y(Le)||(Be=Le,Le=le,le=function(){});var sn=Object.create?function(ln,mn){return Object.create(ln,{constructor:{value:mn}})}:function(ln,mn){function Wn(){}Wn.prototype=ln;var An=new Wn;return An.constructor=mn,An},_e=sn(Le.prototype,le);return le.prototype=ut(_e,le.prototype),le.superclass=sn(Le.prototype,Le),ut(_e,Be),ut(le,en),le},ue=Wt,vn=function(le,Le){if(!a(le))return-1;var Be=Array.prototype.indexOf;if(Be)return Be.call(le,Le);for(var en=-1,sn=0;sn<le.length;sn++)if(le[sn]===Le){en=sn;break}return en},Dn=vn,zn=Object.prototype.hasOwnProperty;function Un(Pe){if(s(Pe))return!0;if(a(Pe))return!Pe.length;var le=vr(Pe);if(le==="Map"||le==="Set")return!Pe.size;if(ii(Pe))return!Object.keys(Pe).length;for(var Le in Pe)if(zn.call(Pe,Le))return!1;return!0}var Ze=Un,Ce=function Pe(le,Le){if(le===Le)return!0;if(!le||!Le||q(le)||q(Le))return!1;if(a(le)||a(Le)){if(le.length!==Le.length)return!1;for(var Be=!0,en=0;en<le.length&&(Be=Pe(le[en],Le[en]),!!Be);en++);return Be}if(tt(le)||tt(Le)){var sn=Object.keys(le),_e=Object.keys(Le);if(sn.length!==_e.length)return!1;for(var Be=!0,en=0;en<sn.length&&(Be=Pe(le[sn[en]],Le[sn[en]]),!!Be);en++);return Be}return!1},R=Ce,xt=function(Pe,le,Le){return y(Le)?!!Le(Pe,le):R(Pe,le)},$t=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Be.push(Le(sn,en))}return Be},me=$t,Zt=function(le){return le},de=function(Pe,le){le===void 0&&(le=Zt);var Le={};return E(Pe)&&!s(Pe)&&Object.keys(Pe).forEach(function(Be){Le[Be]=le(Pe[Be],Be)}),Le},he=function(Pe,le,Le){for(var Be=0,en=q(le)?le.split("."):le;Pe&&Be<en.length;)Pe=Pe[en[Be++]];return Pe===void 0||Be<en.length?Le:Pe},ce=function(Pe,le,Le){var Be=Pe,en=q(le)?le.split("."):le;return en.forEach(function(sn,_e){_e<en.length-1?(E(Be[sn])||(Be[sn]=si(en[_e+1])?[]:{}),Be=Be[sn]):Be[sn]=Le}),Pe},Me=Object.prototype.hasOwnProperty,ze=function(Pe,le){if(Pe===null||!vt(Pe))return{};var Le={};return C(le,function(Be){Me.call(Pe,Be)&&(Le[Be]=Pe[Be])}),Le},Ve=function(Pe,le,Le){var Be,en,sn,_e,ln=0;Le||(Le={});var mn=function(){ln=Le.leading===!1?0:Date.now(),Be=null,_e=Pe.apply(en,sn),Be||(en=sn=null)},Wn=function(){var In=Date.now();!ln&&Le.leading===!1&&(ln=In);var lr=le-(In-ln);return en=this,sn=arguments,lr<=0||lr>le?(Be&&(clearTimeout(Be),Be=null),ln=In,_e=Pe.apply(en,sn),Be||(en=sn=null)):!Be&&Le.trailing!==!1&&(Be=setTimeout(mn,lr)),_e};return Wn.cancel=function(){clearTimeout(Be),ln=0,Be=en=sn=null},Wn},ke=function(Pe){return a(Pe)?Array.prototype.slice.call(Pe):[]},tn={},De=function(Pe){return Pe=Pe||"g",tn[Pe]?tn[Pe]+=1:tn[Pe]=1,Pe+tn[Pe]},cn=function(){},fn=function(Pe){return Pe};function nn(Pe){return s(Pe)?0:a(Pe)?Pe.length:Object.keys(Pe).length}var dn=function(){function Pe(){this.map={}}return Pe.prototype.has=function(le){return this.map[le]!==void 0},Pe.prototype.get=function(le,Le){var Be=this.map[le];return Be===void 0?Le:Be},Pe.prototype.set=function(le,Le){this.map[le]=Le},Pe.prototype.clear=function(){this.map={}},Pe.prototype.delete=function(le){delete this.map[le]},Pe.prototype.size=function(){return Object.keys(this.map).length},Pe}(),Sn=dn},j5sG:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var at=a(_("NohK"));function a(e){return e&&e.__esModule?e:{default:e}}var A=function(i){var p=void 0,m=[],S=(0,at.default)(function(){m.forEach(function(n){n(i)})}),l=function(){var s=new ResizeObserver(S);return s.observe(i),S(),s},M=function(s){p||(p=l()),m.indexOf(s)===-1&&m.push(s)},j=function(){p.disconnect(),m=[],p=void 0},y=function(s){var d=m.indexOf(s);d!==-1&&m.splice(d,1),m.length===0&&p&&j()};return{element:i,bind:M,destroy:j,unbind:y}};Gt.createSensor=A},jhiw:function(Gn,Gt,_){},jqgP:function(Gn,Gt,_){"use strict";_.d(Gt,"e",function(){return A}),_.d(Gt,"f",function(){return e}),_.d(Gt,"d",function(){return i}),_.d(Gt,"a",function(){return m}),_.d(Gt,"b",function(){return S}),_.d(Gt,"c",function(){return l});var at=_("6JdA"),a=[1,0,0,0,1,0,0,0,1];function A(M,j,y){if(y===void 0&&(y=a),!j)return null;var n=at.a.transform(y,[["t",-M.x,-M.y],["r",j],["t",M.x,M.y]]);return n}function e(M,j){return!M.x&&!M.y?null:at.a.transform(j||a,[["t",M.x,M.y]])}function i(M){var j=[1,0,0],y=[0,0,0];return at.d.transformMat3(y,j,M),Math.atan2(y[1],y[0])}function p(M,j){var y=[0,0];return at.c.transformMat3(y,j,M),y}function m(M,j){var y=p(M,[j.minX,j.minY]),n=p(M,[j.maxX,j.minY]),s=p(M,[j.minX,j.maxY]),d=p(M,[j.maxX,j.maxY]),E=Math.min(y[0],n[0],s[0],d[0]),O=Math.max(y[0],n[0],s[0],d[0]),C=Math.min(y[1],n[1],s[1],d[1]),v=Math.max(y[1],n[1],s[1],d[1]);return{x:E,y:C,minX:E,minY:C,maxX:O,maxY:v,width:O-E,height:v-C}}function S(M,j,y,n){if(j){var s=A({x:y,y:n},j,M.getMatrix());M.setMatrix(s)}}function l(M,j,y){var n=e({x:j,y});M.attr("matrix",n)}},kXyF:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"VERSION",function(){return Or}),_.d(Gt,"Chart",function(){return gu}),_.d(Gt,"View",function(){return es}),_.d(Gt,"Event",function(){return Vo}),_.d(Gt,"ComponentController",function(){return Do}),_.d(Gt,"TooltipController",function(){return Fs}),_.d(Gt,"Geometry",function(){return la}),_.d(Gt,"Element",function(){return ca}),_.d(Gt,"GeometryLabel",function(){return Fe}),_.d(Gt,"Interaction",function(){return lr}),_.d(Gt,"Action",function(){return ut}),_.d(Gt,"Facet",function(){return Di}),_.d(Gt,"InteractionAction",function(){return ut}),_.d(Gt,"registerComponentController",function(){return yr}),_.d(Gt,"registerGeometry",function(){return Ho}),_.d(Gt,"registerShape",function(){return fo}),_.d(Gt,"registerShapeFactory",function(){return oa}),_.d(Gt,"getShapeFactory",function(){return bs}),_.d(Gt,"registerGeometryLabel",function(){return jn}),_.d(Gt,"registerGeometryLabelLayout",function(){return Wo}),_.d(Gt,"getGeometryLabel",function(){return ys}),_.d(Gt,"getGeometryLabelLayout",function(){return _s}),_.d(Gt,"getInteraction",function(){return Yi}),_.d(Gt,"registerInteraction",function(){return $i}),_.d(Gt,"registerAction",function(){return Ee}),_.d(Gt,"getActionClass",function(){return Te}),_.d(Gt,"getFacet",function(){return G}),_.d(Gt,"registerFacet",function(){return F}),_.d(Gt,"getTheme",function(){return xi}),_.d(Gt,"registerTheme",function(){return ks}),_.d(Gt,"registerEngine",function(){return C}),_.d(Gt,"getEngine",function(){return O}),_.d(Gt,"registerAnimation",function(){return Eo}),_.d(Gt,"getAnimation",function(){return Gs}),_.d(Gt,"LAYER",function(){return A}),_.d(Gt,"DIRECTION",function(){return e}),_.d(Gt,"Types",function(){return Ue}),_.d(Gt,"Coordinate",function(){return pr}),_.d(Gt,"Scale",function(){return we.c}),_.d(Gt,"Util",function(){return ei});var at=_("mrSG"),a=_("iTfj"),A;(function(c){c.FORE="fore",c.MID="mid",c.BG="bg"})(A||(A={}));var e;(function(c){c.TOP="top",c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.RIGHT="right",c.RIGHT_TOP="right-top",c.RIGHT_BOTTOM="right-bottom",c.LEFT="left",c.LEFT_TOP="left-top",c.LEFT_BOTTOM="left-bottom",c.BOTTOM="bottom",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c.RADIUS="radius",c.CIRCLE="circle",c.NONE="none"})(e||(e={}));var i;(function(c){c.AXIS="axis",c.GRID="grid",c.LEGEND="legend",c.TOOLTIP="tooltip",c.ANNOTATION="annotation",c.SLIDER="slider",c.SCROLLBAR="scrollbar",c.OTHER="other"})(i||(i={}));var p={FORE:3,MID:2,BG:1},m;(function(c){c.BEFORE_RENDER="beforerender",c.AFTER_RENDER="afterrender",c.BEFORE_PAINT="beforepaint",c.AFTER_PAINT="afterpaint",c.BEFORE_CHANGE_DATA="beforechangedata",c.AFTER_CHANGE_DATA="afterchangedata",c.BEFORE_CLEAR="beforeclear",c.AFTER_CLEAR="afterclear",c.BEFORE_DESTROY="beforedestroy",c.BEFORE_CHANGE_SIZE="beforechangesize",c.AFTER_CHANGE_SIZE="afterchangesize"})(m||(m={}));var S;(function(c){c.BEFORE_DRAW_ANIMATE="beforeanimate",c.AFTER_DRAW_ANIMATE="afteranimate"})(S||(S={}));var l;(function(c){c.MOUSE_ENTER="plot:mouseenter",c.MOUSE_DOWN="plot:mousedown",c.MOUSE_MOVE="plot:mousemove",c.MOUSE_UP="plot:mouseup",c.MOUSE_LEAVE="plot:mouseleave",c.TOUCH_START="plot:touchstart",c.TOUCH_MOVE="plot:touchmove",c.TOUCH_END="plot:touchend",c.TOUCH_CANCEL="plot:touchcancel",c.CLICK="plot:click",c.DBLCLICK="plot:dblclick",c.CONTEXTMENU="plot:contextmenu",c.LEAVE="plot:leave",c.ENTER="plot:enter"})(l||(l={}));var M;(function(c){c.ACTIVE="active",c.INACTIVE="inactive",c.SELECTED="selected",c.DEFAULT="default"})(M||(M={}));var j=["color","shape","size"],y="_origin",n=1,s=1,d=.25,E={};function O(c){var o=E[c];if(!o)throw new Error("G engine '"+c+"' is not exist, please register it at first.");return o}function C(c,o){E[c]=o}var v=_("fIp6");function x(c){var o=getComputedStyle(c);return{width:(c.clientWidth||parseInt(o.width,10))-parseInt(o.paddingLeft,10)-parseInt(o.paddingRight,10),height:(c.clientHeight||parseInt(o.height,10))-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10)}}function T(c){return typeof c=="number"&&!isNaN(c)}function N(c,o,t,r){var b=t,D=r;if(o){var et=x(c);b=et.width?et.width:b,D=et.height?et.height:D}return{width:Math.max(T(b)?b:n,n),height:Math.max(T(D)?D:s,s)}}function X(c){var o=c.parentNode;o&&o.removeChild(c)}var tt=_("f6Jy"),nt=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this)||this;r.destroyed=!1;var b=t.visible,D=b===void 0?!0:b;return r.visible=D,r}return o.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},o.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},o.prototype.destroy=function(){this.off(),this.destroyed=!0},o.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},o}(tt.a),vt=nt,ft=_("aFU3"),bt=_("7s0d"),St=function(o,t){return Object(a.isString)(t)?t:o.invert(o.scale(t))},pt=function(){function c(o){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(o)}return c.prototype.mapping=function(){for(var o=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var b=t.map(function(D,et){return o._toOriginParam(D,o.scales[et])});return this.callback.apply(this,b)},c.prototype.getLinearValue=function(o){var t=this.values.length-1,r=Math.floor(t*o),b=t*o-r,D=this.values[r],et=r===t?D:this.values[r+1];return D+(et-D)*b},c.prototype.getNames=function(){for(var o=this.scales,t=this.names,r=Math.min(o.length,t.length),b=[],D=0;D<r;D+=1)b.push(t[D]);return b},c.prototype.getFields=function(){return this.scales.map(function(o){return o.field})},c.prototype.getScale=function(o){return this.scales[this.names.indexOf(o)]},c.prototype.defaultCallback=function(){for(var o=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===0?this.values:t.map(function(b,D){var et=o.scales[D];return et.type==="identity"?et.values[0]:o._getAttributeValue(et,b)})},c.prototype._parseCfg=function(o){var t=this,r=o.type,b=r===void 0?"base":r,D=o.names,et=D===void 0?[]:D,Et=o.scales,Lt=Et===void 0?[]:Et,ne=o.values,ge=ne===void 0?[]:ne,be=o.callback;this.type=b,this.scales=Lt,this.values=ge,this.names=et,this.callback=function(){for(var Ae=[],We=0;We<arguments.length;We++)Ae[We]=arguments[We];if(be){var an=be.apply(void 0,Ae);if(!Object(a.isNil)(an))return[an]}return t.defaultCallback.apply(t,Ae)}},c.prototype._getAttributeValue=function(o,t){if(o.isCategory&&!this.linear){var r=o.translate(t);return this.values[r%this.values.length]}var b=o.scale(t);return this.getLinearValue(b)},c.prototype._toOriginParam=function(o,t){return t.isLinear?o:Object(a.isArray)(o)?o.map(function(r){return St(t,r)}):St(t,o)},c}(),ct=pt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zt=function(o,t){return zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,b){r.__proto__=b}||function(r,b){for(var D in b)b.hasOwnProperty(D)&&(r[D]=b[D])},zt(o,t)};function Nt(c,o){zt(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var wt=function(){return wt=Object.assign||function(t){for(var r,b=1,D=arguments.length;b<D;b++){r=arguments[b];for(var et in r)Object.prototype.hasOwnProperty.call(r,et)&&(t[et]=r[et])}return t},wt.apply(this,arguments)};function H(c,o){var t={};for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&o.indexOf(r)<0&&(t[r]=c[r]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,r=Object.getOwnPropertySymbols(c);b<r.length;b++)o.indexOf(r[b])<0&&Object.prototype.propertyIsEnumerable.call(c,r[b])&&(t[r[b]]=c[r[b]]);return t}function ht(c,o,t,r){var b=arguments.length,D=b<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,r);else for(var Et=c.length-1;Et>=0;Et--)(et=c[Et])&&(D=(b<3?et(D):b>3?et(o,t,D):et(o,t))||D);return b>3&&D&&Object.defineProperty(o,t,D),D}function dt(c,o){return function(t,r){o(t,r,c)}}function yt(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Mt(c,o,t,r){function b(D){return D instanceof t?D:new t(function(et){et(D)})}return new(t||(t=Promise))(function(D,et){function Et(ge){try{ne(r.next(ge))}catch(be){et(be)}}function Lt(ge){try{ne(r.throw(ge))}catch(be){et(be)}}function ne(ge){ge.done?D(ge.value):b(ge.value).then(Et,Lt)}ne((r=r.apply(c,o||[])).next())})}function $(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},r,b,D,et;return et={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function Et(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,b&&(D=ne[0]&2?b.return:ne[0]?b.throw||((D=b.return)&&D.call(b),0):b.next)&&!(D=D.call(b,ne[1])).done)return D;switch(b=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,b=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],b=0}finally{r=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function lt(c,o,t,r){r===void 0&&(r=t),c[r]=o[t]}function rt(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function z(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],r=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var r=t.call(c),b,D=[],et;try{for(;(o===void 0||o-- >0)&&!(b=r.next()).done;)D.push(b.value)}catch(Et){et={error:Et}}finally{try{b&&!b.done&&(t=r.return)&&t.call(r)}finally{if(et)throw et.error}}return D}function Y(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(P(arguments[o]));return c}function k(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var r=Array(c),b=0,o=0;o<t;o++)for(var D=arguments[o],et=0,Et=D.length;et<Et;et++,b++)r[b]=D[et];return r}function h(c){return this instanceof h?(this.v=c,this):new h(c)}function g(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(c,o||[]),b,D=[];return b={},et("next"),et("throw"),et("return"),b[Symbol.asyncIterator]=function(){return this},b;function et(Ae){r[Ae]&&(b[Ae]=function(We){return new Promise(function(an,gn){D.push([Ae,We,an,gn])>1||Et(Ae,We)})})}function Et(Ae,We){try{Lt(r[Ae](We))}catch(an){be(D[0][3],an)}}function Lt(Ae){Ae.value instanceof h?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Et("next",Ae)}function ge(Ae){Et("throw",Ae)}function be(Ae,We){Ae(We),D.shift(),D.length&&Et(D[0][0],D[0][1])}}function B(c){var o,t;return o={},r("next"),r("throw",function(b){throw b}),r("return"),o[Symbol.iterator]=function(){return this},o;function r(b,D){o[b]=c[b]?function(et){return(t=!t)?{value:h(c[b](et)),done:b==="return"}:D?D(et):et}:D}}function V(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof z=="function"?z(c):c[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(D){t[D]=c[D]&&function(et){return new Promise(function(Et,Lt){et=c[D](et),b(Et,Lt,et.done,et.value)})}}function b(D,et,Et,Lt){Promise.resolve(Lt).then(function(ne){D({value:ne,done:Et})},et)}}function q(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function it(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function ot(c){return c&&c.__esModule?c:{default:c}}function At(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function gt(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var mt=_("6UX8"),Ot=function(c){Nt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="color",r.names=["color"],Object(a.isString)(r.values)&&(r.linear=!0),r.gradient=mt.a.gradient(r.values),r}return o.prototype.getLinearValue=function(t){return this.gradient(t)},o}(ct),It=Ot,Dt=function(c){Nt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="opacity",r.names=["opacity"],r}return o}(ct),Ut=Dt,Ct=function(c){Nt(o,c);function o(t){var r=c.call(this,t)||this;return r.names=["x","y"],r.type="position",r}return o.prototype.mapping=function(t,r){var b=this.scales,D=b[0],et=b[1];return Object(a.isNil)(t)||Object(a.isNil)(r)?[]:[Object(a.isArray)(t)?t.map(function(Et){return D.scale(Et)}):D.scale(t),Object(a.isArray)(r)?r.map(function(Et){return et.scale(Et)}):et.scale(r)]},o}(ct),Vt=Ct,Ht=function(c){Nt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="shape",r.names=["shape"],r}return o.prototype.getLinearValue=function(t){var r=Math.round((this.values.length-1)*t);return this.values[r]},o}(ct),re=Ht,pe=function(c){Nt(o,c);function o(t){var r=c.call(this,t)||this;return r.type="size",r.names=["size"],r}return o}(ct),ye=pe,we=_("8vsG"),Ne={},Ke=function(o){return Ne[o.toLowerCase()]},pn=function(o,t){if(Ke(o))throw new Error("Attribute type '"+o+"' existed.");Ne[o.toLowerCase()]=t};pn("Color",It),pn("Opacity",Ut),pn("Position",Vt),pn("Shape",re),pn("Size",ye);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hn=function(o,t){return hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,b){r.__proto__=b}||function(r,b){for(var D in b)b.hasOwnProperty(D)&&(r[D]=b[D])},hn(o,t)};function kn(c,o){hn(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Tn=function(){return Tn=Object.assign||function(t){for(var r,b=1,D=arguments.length;b<D;b++){r=arguments[b];for(var et in r)Object.prototype.hasOwnProperty.call(r,et)&&(t[et]=r[et])}return t},Tn.apply(this,arguments)};function Rn(c,o){var t={};for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&o.indexOf(r)<0&&(t[r]=c[r]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,r=Object.getOwnPropertySymbols(c);b<r.length;b++)o.indexOf(r[b])<0&&Object.prototype.propertyIsEnumerable.call(c,r[b])&&(t[r[b]]=c[r[b]]);return t}function Mn(c,o,t,r){var b=arguments.length,D=b<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,r);else for(var Et=c.length-1;Et>=0;Et--)(et=c[Et])&&(D=(b<3?et(D):b>3?et(o,t,D):et(o,t))||D);return b>3&&D&&Object.defineProperty(o,t,D),D}function Cn(c,o){return function(t,r){o(t,r,c)}}function _n(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Kn(c,o,t,r){function b(D){return D instanceof t?D:new t(function(et){et(D)})}return new(t||(t=Promise))(function(D,et){function Et(ge){try{ne(r.next(ge))}catch(be){et(be)}}function Lt(ge){try{ne(r.throw(ge))}catch(be){et(be)}}function ne(ge){ge.done?D(ge.value):b(ge.value).then(Et,Lt)}ne((r=r.apply(c,o||[])).next())})}function tr(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},r,b,D,et;return et={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function Et(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,b&&(D=ne[0]&2?b.return:ne[0]?b.throw||((D=b.return)&&D.call(b),0):b.next)&&!(D=D.call(b,ne[1])).done)return D;switch(b=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,b=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],b=0}finally{r=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function or(c,o,t,r){r===void 0&&(r=t),c[r]=o[t]}function nr(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function er(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],r=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var r=t.call(c),b,D=[],et;try{for(;(o===void 0||o-- >0)&&!(b=r.next()).done;)D.push(b.value)}catch(Et){et={error:Et}}finally{try{b&&!b.done&&(t=r.return)&&t.call(r)}finally{if(et)throw et.error}}return D}function Vr(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(Sr(arguments[o]));return c}function ti(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var r=Array(c),b=0,o=0;o<t;o++)for(var D=arguments[o],et=0,Et=D.length;et<Et;et++,b++)r[b]=D[et];return r}function hi(c){return this instanceof hi?(this.v=c,this):new hi(c)}function Fi(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(c,o||[]),b,D=[];return b={},et("next"),et("throw"),et("return"),b[Symbol.asyncIterator]=function(){return this},b;function et(Ae){r[Ae]&&(b[Ae]=function(We){return new Promise(function(an,gn){D.push([Ae,We,an,gn])>1||Et(Ae,We)})})}function Et(Ae,We){try{Lt(r[Ae](We))}catch(an){be(D[0][3],an)}}function Lt(Ae){Ae.value instanceof hi?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Et("next",Ae)}function ge(Ae){Et("throw",Ae)}function be(Ae,We){Ae(We),D.shift(),D.length&&Et(D[0][0],D[0][1])}}function to(c){var o,t;return o={},r("next"),r("throw",function(b){throw b}),r("return"),o[Symbol.iterator]=function(){return this},o;function r(b,D){o[b]=c[b]?function(et){return(t=!t)?{value:hi(c[b](et)),done:b==="return"}:D?D(et):et}:D}}function si(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof er=="function"?er(c):c[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(D){t[D]=c[D]&&function(et){return new Promise(function(Et,Lt){et=c[D](et),b(Et,Lt,et.done,et.value)})}}function b(D,et,Et,Lt){Promise.resolve(Lt).then(function(ne){D({value:ne,done:Et})},et)}}function Ci(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function Ui(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function Li(c){return c&&c.__esModule?c:{default:c}}function Vi(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function ro(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var jr=_("6JdA"),Ji=function(){function c(o){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=o.start,r=o.end,b=o.matrix,D=b===void 0?[1,0,0,0,1,0,0,0,1]:b,et=o.isTransposed,Et=et===void 0?!1:et;this.start=t,this.end=r,this.matrix=D,this.originalMatrix=ti(D),this.isTransposed=Et}return c.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},c.prototype.update=function(o){Object(a.assign)(this,o),this.initial()},c.prototype.convertDim=function(o,t){var r,b=this[t],D=b.start,et=b.end;return this.isReflect(t)&&(r=[et,D],D=r[0],et=r[1]),D+o*(et-D)},c.prototype.invertDim=function(o,t){var r,b=this[t],D=b.start,et=b.end;return this.isReflect(t)&&(r=[et,D],D=r[0],et=r[1]),(o-D)/(et-D)},c.prototype.applyMatrix=function(o,t,r){r===void 0&&(r=0);var b=this.matrix,D=[o,t,r];return jr.d.transformMat3(D,D,b),D},c.prototype.invertMatrix=function(o,t,r){r===void 0&&(r=0);var b=this.matrix,D=jr.b.invert([0,0,0,0,0,0,0,0,0],b),et=[o,t,r];return D&&jr.d.transformMat3(et,et,D),et},c.prototype.convert=function(o){var t=this.convertPoint(o),r=t.x,b=t.y,D=this.applyMatrix(r,b,1);return{x:D[0],y:D[1]}},c.prototype.invert=function(o){var t=this.invertMatrix(o.x,o.y,1);return this.invertPoint({x:t[0],y:t[1]})},c.prototype.rotate=function(o){var t=this.matrix,r=this.center;return jr.a.leftTranslate(t,t,[-r.x,-r.y]),jr.a.leftRotate(t,t,o),jr.a.leftTranslate(t,t,[r.x,r.y]),this},c.prototype.reflect=function(o){return o==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},c.prototype.scale=function(o,t){var r=this.matrix,b=this.center;return jr.a.leftTranslate(r,r,[-b.x,-b.y]),jr.a.leftScale(r,r,[o,t]),jr.a.leftTranslate(r,r,[b.x,b.y]),this},c.prototype.translate=function(o,t){var r=this.matrix;return jr.a.leftTranslate(r,r,[o,t]),this},c.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},c.prototype.getCenter=function(){return this.center},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getRadius=function(){return this.radius},c.prototype.isReflect=function(o){return o==="x"?this.isReflectX:this.isReflectY},c.prototype.resetMatrix=function(o){this.matrix=o||ti(this.originalMatrix)},c}(),pr=Ji,Xr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;return r.isRect=!0,r.type="cartesian",r.initial(),r}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=this.start,r=this.end;this.x={start:t.x,end:r.x},this.y={start:t.y,end:r.y}},o.prototype.convertPoint=function(t){var r,b=t.x,D=t.y;return this.isTransposed&&(r=[D,b],b=r[0],D=r[1]),{x:this.convertDim(b,"x"),y:this.convertDim(D,"y")}},o.prototype.invertPoint=function(t){var r,b=this.invertDim(t.x,"x"),D=this.invertDim(t.y,"y");return this.isTransposed&&(r=[D,b],b=r[0],D=r[1]),{x:b,y:D}},o}(pr),Br=Xr,Nr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;r.isHelix=!0,r.type="helix";var b=t.startAngle,D=b===void 0?1.25*Math.PI:b,et=t.endAngle,Et=et===void 0?7.25*Math.PI:et,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return r.startAngle=D,r.endAngle=Et,r.innerRadius=ne,r.radius=ge,r.initial(),r}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,r=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(r=r*this.radius),this.d=Math.floor(r*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*r,end:this.innerRadius*r+this.d*.99}},o.prototype.convertPoint=function(t){var r,b=t.x,D=t.y;this.isTransposed&&(r=[D,b],b=r[0],D=r[1]);var et=this.convertDim(b,"x"),Et=this.a*et,Lt=this.convertDim(D,"y");return{x:this.center.x+Math.cos(et)*(Et+Lt),y:this.center.y+Math.sin(et)*(Et+Lt)}},o.prototype.invertPoint=function(t){var r,b=this.d+this.y.start,D=jr.c.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),et=jr.a.angleTo(D,[1,0],!0),Et=et*this.a;jr.c.length(D)<Et&&(Et=jr.c.length(D));var Lt=Math.floor((jr.c.length(D)-Et)/b);et=2*Lt*Math.PI+et;var ne=this.a*et,ge=jr.c.length(D)-ne;ge=Object(a.isNumberEqual)(ge,0)?0:ge;var be=this.invertDim(et,"x"),Ae=this.invertDim(ge,"y");return be=Object(a.isNumberEqual)(be,0)?0:be,Ae=Object(a.isNumberEqual)(Ae,0)?0:Ae,this.isTransposed&&(r=[Ae,be],be=r[0],Ae=r[1]),{x:be,y:Ae}},o}(pr),Yr=Nr,Kr=function(c){kn(o,c);function o(t){var r=c.call(this,t)||this;r.isPolar=!0,r.type="polar";var b=t.startAngle,D=b===void 0?-Math.PI/2:b,et=t.endAngle,Et=et===void 0?Math.PI*3/2:et,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return r.startAngle=D,r.endAngle=Et,r.innerRadius=ne,r.radius=ge,r.initial(),r}return o.prototype.initial=function(){for(c.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),r=t.maxX-t.minX,b=t.maxY-t.minY,D=Math.abs(t.minX)/r,et=Math.abs(t.minY)/b,Et;this.height/b>this.width/r?(Et=this.width/r,this.circleCenter={x:this.center.x-(.5-D)*this.width,y:this.center.y-(.5-et)*Et*b}):(Et=this.height/b,this.circleCenter={x:this.center.x-(.5-D)*Et*r,y:this.center.y-(.5-et)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Et*this.radius:(this.radius<=0||this.radius>Et)&&(this.polarRadius=Et):this.polarRadius=Et,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},o.prototype.getRadius=function(){return this.polarRadius},o.prototype.convertPoint=function(t){var r,b=this.getCenter(),D=t.x,et=t.y;return this.isTransposed&&(r=[et,D],D=r[0],et=r[1]),D=this.convertDim(D,"x"),et=this.convertDim(et,"y"),{x:b.x+Math.cos(D)*et,y:b.y+Math.sin(D)*et}},o.prototype.invertPoint=function(t){var r=this.getCenter(),b=[t.x-r.x,t.y-r.y],D=[1,0,0,0,1,0,0,0,1];jr.a.leftRotate(D,D,this.startAngle);var et=[1,0,0];jr.d.transformMat3(et,et,D);var Et=[et[0],et[1]],Lt=jr.a.angleTo(Et,b,this.endAngle<this.startAngle);Object(a.isNumberEqual)(Lt,Math.PI*2)&&(Lt=0);var ne=jr.c.length(b),ge=Lt/(this.endAngle-this.startAngle);ge=this.endAngle-this.startAngle>0?ge:-ge;var be=this.invertDim(ne,"y"),Ae={x:0,y:0};return Ae.x=this.isTransposed?be:ge,Ae.y=this.isTransposed?ge:be,Ae},o.prototype.getCenter=function(){return this.circleCenter},o.prototype.getOneBox=function(){var t=this.startAngle,r=this.endAngle;if(Math.abs(r-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var b=[0,Math.cos(t),Math.cos(r)],D=[0,Math.sin(t),Math.sin(r)],et=Math.min(t,r);et<Math.max(t,r);et+=Math.PI/18)b.push(Math.cos(et)),D.push(Math.sin(et));return{minX:Math.min.apply(Math,b),maxX:Math.max.apply(Math,b),minY:Math.min.apply(Math,D),maxY:Math.max.apply(Math,D)}},o}(pr),ni=Kr,fi={},$r=function(o){return fi[o.toLowerCase()]},ci=function(o,t){fi[o.toLowerCase()]=t};ci("rect",Br),ci("cartesian",Br),ci("polar",ni),ci("helix",Yr);var Qr=_("17Tr"),gi=Qr.Axis.Line,Oi=Qr.Axis.Circle,bi=Qr.Grid.Line,zi=Qr.Grid.Circle,Qi=Qr.Legend.Category,io=Qr.Legend.Continuous,Wi=Qr.Tooltip.Html;function Zi(c){if(Object(a.isEmpty)(c))return null;var o=c[0].x,t=c[0].x,r=c[0].y,b=c[0].y;return Object(a.each)(c,function(D){o=o>D.x?D.x:o,t=t<D.x?D.x:t,r=r>D.y?D.y:r,b=b<D.y?D.y:b}),{minX:o,maxX:t,minY:r,maxY:b,centerX:(o+t)/2,centerY:(r+b)/2}}function Pi(c,o,t,r){return{x:c+t*Math.cos(r),y:o+t*Math.sin(r)}}function no(c,o,t,r,b,D){D===void 0&&(D=0);var et=Pi(c,o,t,r),Et=Pi(c,o,t,b),Lt=Pi(c,o,D,r),ne=Pi(c,o,D,b);if(b-r==Math.PI*2){var ge=Pi(c,o,t,r+Math.PI),be=Pi(c,o,D,r+Math.PI),Ae=[["M",et.x,et.y],["A",t,t,0,1,1,ge.x,ge.y],["A",t,t,0,1,1,Et.x,Et.y],["M",Lt.x,Lt.y]];return D&&(Ae.push(["A",D,D,0,1,0,be.x,be.y]),Ae.push(["A",D,D,0,1,0,ne.x,ne.y])),Ae.push(["M",et.x,et.y]),Ae.push(["Z"]),Ae}var We=b-r<=Math.PI?0:1,an=[["M",et.x,et.y],["A",t,t,0,We,1,Et.x,Et.y],["L",ne.x,ne.y]];return D&&an.push(["A",D,D,0,We,0,Lt.x,Lt.y]),an.push(["L",et.x,et.y]),an.push(["Z"]),an}function Mo(c,o,t,r,b){var D=Pi(c,o,t,r),et=Pi(c,o,t,b);if(Object(a.isNumberEqual)(b-r,Math.PI*2)){var Et=Pi(c,o,t,r+Math.PI);return[["M",D.x,D.y],["A",t,t,0,1,1,Et.x,Et.y],["A",t,t,0,1,1,D.x,D.y],["A",t,t,0,1,0,Et.x,Et.y],["A",t,t,0,1,0,D.x,D.y],["Z"]]}var Lt=b-r<=Math.PI?0:1;return[["M",D.x,D.y],["A",t,t,0,Lt,1,et.x,et.y]]}function ao(c,o){var t=c.points,r=Zi(t),b,D,et=o.startAngle,Et=o.endAngle,Lt=Et-et;return o.isTransposed?(b=r.maxY*Lt,D=r.minY*Lt):(b=r.maxX*Lt,D=r.minX*Lt),b+=et,D+=et,{startAngle:D,endAngle:b}}function uo(c,o){if(Object(a.isNumber)(c)&&Object(a.isNumber)(o))return[c,o];for(var t=-1,r=0,b=0,D,et=c.length-1,Et,Lt=0;++t<c.length;)D=et,et=t,Lt+=Et=c[D]*o[et]-c[et]*o[D],r+=(c[D]+c[et])*Et,b+=(o[D]+o[et])*Et;return Lt*=3,[r/Lt,b/Lt]}function xo(c,o){var t=c.attr(),r=o.attr();return Object(a.each)(t,function(b,D){r[D]===void 0&&(r[D]=void 0)}),r}function oe(c,o,t){var r=Math.min(o,t),b=Math.max(o,t);return c>=r&&c<=b}function Kt(c,o,t){if(Object(a.isString)(c))return c.padEnd(o,t);if(Object(a.isArray)(c)){var r=c.length;if(r<o)for(var b=o-r,D=0;D<b;D++)c.push(t)}return c}function te(c,o){return o.forEach(function(t){delete c[t]}),c}function Oe(c,o,t){o===void 0&&(o=[]),t===void 0&&(t={});for(var r=0,b=c;r<b.length;r++){var D=b[r];t[D]||(o.push(D),t[D]=!0)}return o}var Qe=function(){function c(o,t,r,b){o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),b===void 0&&(b=0),this.x=o,this.y=t,this.height=b,this.width=r}return c.fromRange=function(o,t,r,b){return new c(o,t,r-o,b-t)},c.fromObject=function(o){return new c(o.minX,o.minY,o.width,o.height)},Object.defineProperty(c.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(o){return this.x===o.x&&this.y===o.y&&this.width===o.width&&this.height===o.height},c.prototype.contains=function(o){return o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY},c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.add=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var r=this.clone();return Object(a.each)(o,function(b){r.x=Math.min(b.x,r.x),r.y=Math.min(b.y,r.y),r.width=Math.max(b.maxX,r.maxX)-r.x,r.height=Math.max(b.maxY,r.maxY)-r.y}),r},c.prototype.merge=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var r=this.clone();return Object(a.each)(o,function(b){r.x=Math.max(b.x,r.x),r.y=Math.max(b.y,r.y),r.width=Math.min(b.maxX,r.maxX)-r.x,r.height=Math.min(b.maxY,r.maxY)-r.y}),r},c.prototype.cut=function(o,t){var r=o.width,b=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:return c.fromRange(this.minX,this.minY+b,this.maxX,this.maxY);case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:return c.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:return c.fromRange(this.minX,this.minY,this.maxX,this.maxY-b);case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:return c.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},c.prototype.shrink=function(o){var t=o[0],r=o[1],b=o[2],D=o[3];return new c(this.x+D,this.y+t,this.width-D-r,this.height-t-b)},c.prototype.expand=function(o){var t=o[0],r=o[1],b=o[2],D=o[3];return new c(this.x-D,this.y-t,this.width+D+r,this.height+t+b)},c.prototype.exceed=function(o){return[Math.max(-this.minY+o.minY,0),Math.max(this.maxX-o.maxX,0),Math.max(this.maxY-o.maxY,0),Math.max(-this.minX+o.minX,0)]},c.prototype.collide=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},c.prototype.size=function(){return this.width*this.height},c.prototype.isPointIn=function(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY},c}(),On=function(o,t){var r=t.start,b=t.end;return new Qe(o.x+o.width*r.x,o.y+o.height*r.y,o.width*Math.abs(b.x-r.x),o.height*Math.abs(b.y-r.y))};function Vn(c){return[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,c.maxY],[c.minX,c.maxY]]}function Yn(c){if(c.isPolar&&!c.isTransposed)return(c.endAngle-c.startAngle)*c.getRadius();var o=c.convert({x:0,y:0}),t=c.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function $e(c){if(c.isPolar){var o=c.startAngle,t=c.endAngle;return t-o==Math.PI*2}return!1}function rn(c,o){var t=c.getCenter();return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}function on(c,o){var t=!1;if(c)if(c.type==="theta"){var r=c.start,b=c.end;t=oe(o.x,r.x,b.x)&&oe(o.y,r.y,b.y)}else{var D=c.invert(o);t=oe(D.x,0,1)&&oe(D.y,0,1)}return t}function $n(c,o){var t=c.getCenter();return Math.atan2(o.y-t.y,o.x-t.x)}function vr(c,o){o===void 0&&(o=0);var t=c.start,r=c.end,b=c.getWidth(),D=c.getHeight();if(c.isPolar){var et=c.startAngle,Et=c.endAngle,Lt=c.getCenter(),ne=c.getRadius();return{type:"path",startState:{path:no(Lt.x,Lt.y,ne+o,et,et)},endState:function(Ae){var We=(Et-et)*Ae+et,an=no(Lt.x,Lt.y,ne+o,et,We);return{path:an}},attrs:{path:no(Lt.x,Lt.y,ne+o,et,Et)}}}var ge;return c.isTransposed?ge={height:D+o*2}:ge={width:b+o*2},{type:"rect",startState:{x:t.x-o,y:r.y-o,width:c.isTransposed?b+o*2:0,height:c.isTransposed?0:D+o*2},endState:ge,attrs:{x:t.x-o,y:r.y-o,width:b+o*2,height:D+o*2}}}function ar(c,o){o===void 0&&(o=0);var t=c.start,r=c.end,b=c.getWidth(),D=c.getHeight(),et=Math.min(t.x,r.x),Et=Math.min(t.y,r.y);return Qe.fromRange(et-o,Et-o,et+b+o,Et+D+o)}var rr=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Fr(c){var o="linear";return rr.test(c)?o="timeCat":Object(a.isString)(c)&&(o="cat"),o}function Ar(c,o,t){var r=o||[];if(Object(a.isNumber)(c)||Object(a.isNil)(Object(a.firstValue)(r,c))&&Object(a.isEmpty)(t)){var b=Object(we.d)("identity");return new b({field:c.toString(),values:[c]})}var D=Object(a.valuesOfKey)(r,c),et=Object(a.get)(t,"type",Fr(D[0])),Et=Object(we.d)(et);return new Et(Object(at.a)({field:c,values:D},t))}function wr(c,o){if(c.type!=="identity"&&o.type!=="identity"){var t={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);c.change(t)}}function xr(c){return c.alias||c.field}function Er(c,o,t){var r=c.values,b=r.length,D;if(b===1)D=[.5,1];else{var et=1,Et=0;$e(o)?o.isTransposed?(et=Object(a.get)(t,"widthRatio.multiplePie",1/1.3),Et=1/b*et,D=[Et/2,1-Et/2]):D=[0,1-1/b]:(Et=1/b/2,D=[Et,1-Et])}return D}function Ir(c){var o,t;switch(c){case e.TOP:o={x:0,y:1},t={x:1,y:1};break;case e.RIGHT:o={x:1,y:0},t={x:1,y:1};break;case e.BOTTOM:o={x:0,y:0},t={x:1,y:0};break;case e.LEFT:o={x:0,y:0},t={x:0,y:1};break;default:o=t={x:0,y:0}}return{start:o,end:t}}function Lr(c){var o,t;return c.isTransposed?(o={x:0,y:0},t={x:1,y:0}):(o={x:0,y:0},t={x:0,y:1}),{start:o,end:t}}function Pr(c,o){var t={start:{x:0,y:0},end:{x:0,y:0}};c.isRect?t=Ir(o):c.isPolar&&(t=Lr(c));var r=t.start,b=t.end;return{start:c.convert(r),end:c.convert(b)}}function Dr(c,o){if(c.isRect)return c.isTransposed?[e.RIGHT,e.BOTTOM].includes(o)?1:-1:[e.BOTTOM,e.RIGHT].includes(o)?-1:1;if(c.isPolar){var t=c.x.start;return t<0?-1:1}return 1}function ri(c){var o=c.start,t=c.end;return o.x===t.x}function vi(c,o){var t=c.start,r=c.end,b=ri(c);return b?(t.y-r.y)*(o.x-t.x)>0?1:-1:(r.x-t.x)*(t.y-o.y)>0?-1:1}function ii(c,o){return Object(a.get)(c,["components","axis",o],{})}function Si(c){var o=c.x,t=c.y,r=c.circleCenter,b=t.start>t.end,D=c.isTransposed?c.convert({x:b?0:1,y:0}):c.convert({x:0,y:b?0:1}),et=[D.x-r.x,D.y-r.y],Et=[1,0],Lt=D.y>r.y?jr.c.angle(et,Et):jr.c.angle(et,Et)*-1,ne=Lt+(o.end-o.start),ge=Math.sqrt(Math.pow(D.x-r.x,2)+Math.pow(D.y-r.y,2));return{center:r,radius:ge,startAngle:Lt,endAngle:ne}}function _i(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o])}function Xi(c,o){return Object(a.get)(c,"position",o)}function Bi(c,o){return Object(a.get)(o,["title","text"],xr(c))}var Di=function(){function c(o,t){this.destroyed=!1,this.facets=[],this.view=o,this.cfg=Object(a.deepMix)({},this.getDefaultCfg(),t)}return c.prototype.init=function(){this.container||(this.container=this.createContainer());var o=this.view.getData();this.facets=this.generateFacets(o)},c.prototype.render=function(){this.renderViews()},c.prototype.update=function(){},c.prototype.clear=function(){this.clearFacetViews()},c.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},c.prototype.facetToView=function(o){var t=o.region,r=o.data,b=o.padding,D=b===void 0?this.cfg.padding:b,et=this.view.createView({region:t,padding:D});et.data(r||[]),o.view=et,this.beforeEachView(et,o);var Et=this.cfg.eachView;return Et&&Et(et,o),this.afterEachView(et,o),et},c.prototype.createContainer=function(){var o=this.view.getLayer(A.FORE);return o.addGroup()},c.prototype.renderViews=function(){this.createFacetViews()},c.prototype.createFacetViews=function(){var o=this;return this.facets.map(function(t){return o.facetToView(t)})},c.prototype.clearFacetViews=function(){var o=this;Object(a.each)(this.facets,function(t){t.view&&(o.view.removeView(t.view),t.view=void 0)})},c.prototype.getFieldValues=function(o,t){var r=[],b={};return Object(a.each)(o,function(D){var et=D[t];!Object(a.isNil)(et)&&!b[et]&&(r.push(et),b[et]=!0)}),r},c.prototype.getRegion=function(o,t,r,b){var D=1/(t===0?1:t),et=1/(o===0?1:o),Et={x:D*r,y:et*b},Lt={x:D*(r+1),y:et*(b+1)};return{start:Et,end:Lt}},c.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},c.prototype.getDefaultTitleCfg=function(){var o=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:o}}},c.prototype.processAxis=function(o,t){var r=o.getOptions(),b=r.coordinate,D=o.geometries,et=Object(a.get)(b,"type","rect");if(et==="rect"&&D.length){Object(a.isNil)(r.axes)&&(r.axes={});var Et=r.axes,Lt=D[0].getXYFields(),ne=Lt[0],ge=Lt[1],be=_i(Et,ne),Ae=_i(Et,ge);be!==!1&&(r.axes[ne]=this.getXAxisOption(ne,Et,be,t)),Ae!==!1&&(r.axes[ge]=this.getYAxisOption(ge,Et,Ae,t))}},c.prototype.getFacetDataFilter=function(o){return function(t){return Object(a.every)(o,function(r){var b=r.field,D=r.value;return!Object(a.isNil)(D)&&b?t[b]===D:!0})}},c}(),ve={},G=function(o){return ve[Object(a.lowerCase)(o)]},F=function(o,t){ve[Object(a.lowerCase)(o)]=t},Z=function(){function c(o,t){this.context=o,this.cfg=t,o.addAction(this)}return c.prototype.applyCfg=function(o){Object(a.assign)(this,o)},c.prototype.init=function(){this.applyCfg(this.cfg)},c.prototype.destroy=function(){this.context.removeAction(this),this.context=null},c}(),ut=Z,Bt=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.execute=function(){this.callback&&this.callback(this.context)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.callback=null},o}(ut),Jt=Bt,ie={};function se(c,o){var t=ie[c],r=null;if(t){var b=t.ActionClass,D=t.cfg;r=new b(o,D),r.name=c,r.init()}return r}function Te(c){var o=ie[c];return Object(a.get)(o,"ActionClass")}function Ee(c,o,t){ie[c]={ActionClass:o,cfg:t}}function un(c){delete ie[c]}function xn(c,o){var t=new Jt(o);return t.callback=c,t.name="callback",t}function _t(c,o){var t=[];if(c.length){t.push(["M",c[0].x,c[0].y]);for(var r=1,b=c.length;r<b;r+=1){var D=c[r];t.push(["L",D.x,D.y])}o&&t.push(["Z"])}return t}function Xt(c,o){for(var t=[c[0]],r=1,b=c.length;r<b;r=r+2){var D=o.convert({x:c[r],y:c[r+1]});t.push(D.x,D.y)}return t}function Se(c,o){var t=o.isTransposed,r=c[1],b=c[6],D=c[7],et=o.convert({x:b,y:D}),Et=t?0:1;return["A",r,r,0,0,Et,et.x,et.y]}function Wt(c,o,t){var r=t.isTransposed,b=t.startAngle,D=t.endAngle,et=c[0].toLowerCase()==="a"?{x:c[6],y:c[7]}:{x:c[1],y:c[2]},Et={x:o[1],y:o[2]},Lt=[],ne=r?"y":"x",ge=Math.abs(Et[ne]-et[ne])*(D-b),be=Et[ne]>=et[ne]?1:0,Ae=ge>Math.PI?1:0,We=t.convert(Et),an=rn(t,We);if(an>=.5)if(ge===Math.PI*2){var gn={x:(Et.x+et.x)/2,y:(Et.y+et.y)/2},Xn=t.convert(gn);Lt.push(["A",an,an,0,Ae,be,Xn.x,Xn.y]),Lt.push(["A",an,an,0,Ae,be,We.x,We.y])}else Lt.push(["A",an,an,0,Ae,be,We.x,We.y]);return Lt}function ue(c){Object(a.each)(c,function(o,t){var r=o;if(r[0].toLowerCase()==="a"){var b=c[t-1],D=c[t+1];D&&D[0].toLowerCase()==="a"?b&&b[0].toLowerCase()==="l"&&(b[0]="M"):b&&b[0].toLowerCase()==="a"&&D&&D[0].toLowerCase()==="l"&&(D[0]="M")}})}var vn=function(o,t,r,b){var D=[],et,Et,Lt=!!b,ne,ge;if(Lt){ne=[Infinity,Infinity],ge=[-Infinity,-Infinity];for(var be=0,Ae=o.length;be<Ae;be++){var We=o[be];ne=jr.c.min([0,0],ne,We),ge=jr.c.max([0,0],ge,We)}ne=jr.c.min([0,0],ne,b[0]),ge=jr.c.max([0,0],ge,b[1])}for(var be=0,an=o.length;be<an;be++){var We=o[be];if(r)et=o[be?be-1:an-1],Et=o[(be+1)%an];else if(be===0||be===an-1){D.push(We);continue}else et=o[be-1],Et=o[be+1];var gn=[0,0];gn=jr.c.sub(gn,Et,et),gn=jr.c.scale(gn,gn,t);var Xn=jr.c.distance(We,et),Hn=jr.c.distance(We,Et),ir=Xn+Hn;ir!==0&&(Xn/=ir,Hn/=ir);var cr=jr.c.scale([0,0],gn,-Xn),Rr=jr.c.scale([0,0],gn,Hn),zr=jr.c.add([0,0],We,cr),_r=jr.c.add([0,0],We,Rr);Lt&&(zr=jr.c.max([0,0],zr,ne),zr=jr.c.min([0,0],zr,ge),_r=jr.c.max([0,0],_r,ne),_r=jr.c.min([0,0],_r,ge)),D.push(zr),D.push(_r)}return r&&D.push(D.shift()),D};function Dn(c,o,t){for(var r=!!o,b=[],D=0,et=c.length;D<et;D+=2)b.push([c[D],c[D+1]]);for(var Et=vn(b,.4,r,t),Lt=b.length,ne=[],ge,be,Ae,D=0;D<Lt-1;D++)ge=Et[D*2],be=Et[D*2+1],Ae=b[D+1],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]]);return r&&(ge=Et[Lt],be=Et[Lt+1],Ae=b[0],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]])),ne}function zn(c,o){return _t(c,o)}function Un(c,o,t){var r=[],b=c[0],D=null;if(c.length<=2)return zn(c,o);for(var et=0,Et=c.length;et<Et;et++){var Lt=c[et];(!D||!(D.x===Lt.x&&D.y===Lt.y))&&(r.push(Lt.x),r.push(Lt.y),D=Lt)}var ne=t||[[0,0],[1,1]],ge=Dn(r,o,ne);return ge.unshift(["M",b.x,b.y]),ge}function Ze(c,o){var t=[];return Object(a.each)(o,function(r){var b=r[0];switch(b.toLowerCase()){case"m":case"l":case"c":t.push(Xt(r,c));break;case"a":t.push(Se(r,c));break;case"z":default:t.push(r);break}}),t}function Ce(c,o){var t=[],r,b,D,et;return Object(a.each)(o,function(Et,Lt){var ne=Et[0];switch(ne.toLowerCase()){case"m":case"c":case"q":t.push(Xt(Et,c));break;case"l":r=o[Lt-1],b=Et,D=c.isTransposed,et=D?r[r.length-2]===b[1]:r[r.length-1]===b[2],et?t=t.concat(Wt(r,b,c)):t.push(Xt(Et,c));break;case"a":t.push(Se(Et,c));break;case"z":default:t.push(Et);break}}),ue(t),t}var R=_("LvGN");function xt(c,o){var t=c.event,r=t.target,b=r.getCanvasBBox();return b.width>=o||b.height>=o?b:null}function $t(c,o){var t=c.event,r=t.target,b=r.getCanvasBBox();return b.width>=o||b.height>=o?r.attr("path"):null}function me(c){var o=c.event,t,r=o.target;return r&&(t=r.get("element")),t}function Zt(c){var o=c.event,t=o.target,r;return t&&(r=t.get("delegateObject")),r}function de(c){var o=c.event.gEvent;return!(o&&o.fromShape&&o.toShape&&o.fromShape.get("element")===o.toShape.get("element"))}function he(c){return c&&c.component&&c.component.isList()}function ce(c){return c&&c.component&&c.component.isSlider()}function Me(c){var o=c.event,t=o.target;return t&&t.get("name")==="mask"}function ze(c,o){var t=c.event.target;if(t.get("type")==="path"){var r=$t(c,o);return r?Sn(c.view,r):void 0}var b=xt(c,o);return b?nn(c.view,b):null}function Ve(c,o,t){var r=xt(c,t);if(!r)return null;var b=c.view,D=_e(b,o,{x:r.x,y:r.y}),et=_e(b,o,{x:r.maxX,y:r.maxY}),Et={minX:D.x,minY:D.y,maxX:et.x,maxY:et.y};return nn(o,Et)}function ke(c){var o=c.geometries,t=[];return Object(a.each)(o,function(r){var b=r.elements;t=t.concat(b)}),c.views&&c.views.length&&Object(a.each)(c.views,function(r){t=t.concat(ke(r))}),t}function tn(c,o,t){var r=ke(c);return r.filter(function(b){return cn(b,o)===t})}function De(c,o){var t=c.geometries,r=[];return Object(a.each)(t,function(b){var D=b.getElementsBy(function(et){return et.hasState(o)});r=r.concat(D)}),r}function cn(c,o){var t=c.getModel(),r=t.data,b;return Object(a.isArray)(r)?b=r[0][o]:b=r[o],b}function fn(c,o){return!(o.minX>c.maxX||o.maxX<c.minX||o.minY>c.maxY||o.maxY<c.minY)}function nn(c,o){var t=ke(c),r=[];return Object(a.each)(t,function(b){var D=b.shape,et=D.getCanvasBBox();fn(o,et)&&r.push(b)}),r}function dn(c){var o=[];return Object(a.each)(c,function(t){var r=t[0];if(r!=="A")for(var b=1;b<t.length;b=b+2)o.push([t[b],t[b+1]]);else{var D=t.length;o.push([t[D-2],t[D-1]])}}),o}function Sn(c,o){var t=ke(c),r=dn(o),b=t.filter(function(D){var et=D.shape,Et;if(et.get("type")==="path")Et=dn(et.attr("path"));else{var Lt=et.getCanvasBBox();Et=Vn(Lt)}return Object(R.b)(r,Et)});return b}function Pe(c){return c.getComponents().map(function(o){return o.component})}function le(c,o){var t=o.x-c.x,r=o.y-c.y;return Math.sqrt(t*t+r*r)}function Le(c,o){if(c.length<=2)return zn(c,!1);var t=c[0],r=[];Object(a.each)(c,function(D){r.push(D.x),r.push(D.y)});var b=Dn(r,o,null);return b.unshift(["M",t.x,t.y]),b}function Be(c,o){return c.x<=o.x&&c.maxX>=o.x&&c.y<=o.y&&c.maxY>o.y}function en(c){var o=c.parent,t=null;return o&&(t=o.views.filter(function(r){return r!==c})),t}function sn(c,o){var t=c.getCoordinate();return t.invert(o)}function _e(c,o,t){var r=sn(c,t);return o.getCoordinate().convert(r)}function ln(c,o,t,r){var b=!1;return Object(a.each)(c,function(D){if(D[t]===o[t]&&D[r]===o[r])return b=!0,!1}),b}function mn(c,o){var t=c.getScaleByField(o);return!t&&c.views&&Object(a.each)(c.views,function(r){if(t=mn(r,o),t)return!1}),t}var Wn=function(){function c(o){this.actions=[],this.event=null,this.cacheMap={},this.view=o}return c.prototype.cache=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(o.length===1)return this.cacheMap[o[0]];o.length===2&&(this.cacheMap[o[0]]=o[1])},c.prototype.getAction=function(o){return this.actions.find(function(t){return t.name===o})},c.prototype.addAction=function(o){this.actions.push(o)},c.prototype.removeAction=function(o){var t=this.actions,r=this.actions.indexOf(o);r>=0&&t.splice(r,1)},c.prototype.getCurrentPoint=function(){var o=this.event;if(o)if(o.target instanceof HTMLElement){var t=this.view.getCanvas(),r=t.getPointByClient(o.clientX,o.clientY);return r}else return{x:o.x,y:o.y};return null},c.prototype.getCurrentShape=function(){return Object(a.get)(this.event,["gEvent","shape"])},c.prototype.isInPlot=function(){var o=this.getCurrentPoint();return o?this.view.isPointInPlot(o):!1},c.prototype.isInShape=function(o){var t=this.getCurrentShape();return t?t.get("name")===o:!1},c.prototype.isInComponent=function(o){var t=Pe(this.view),r=this.getCurrentPoint();return r?!!t.find(function(b){var D=b.getBBox();return o?b.get("name")===o&&Be(D,r):Be(D,r)}):!1},c.prototype.destroy=function(){this.view=null,this.event=null,Object(a.each)(this.actions.slice(),function(o){o.destroy()}),this.actions=null,this.cacheMap=null},c}(),An=Wn,In=function(){function c(o,t){this.view=o,this.cfg=t}return c.prototype.init=function(){this.initEvents()},c.prototype.initEvents=function(){},c.prototype.clearEvents=function(){},c.prototype.destroy=function(){this.clearEvents()},c}(),lr=In;function Hr(c,o){var t=c.split(":"),r=t[0],b=o.getAction(r)||se(r,o);if(!b)throw new Error("There is no action named "+r);var D=t[1];return{action:b,methodName:D}}function Gr(c){var o=c.action,t=c.methodName;if(o[t])o[t]();else throw new Error("Action("+o.name+") doesn't have a method called "+t)}var Mr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},oi=function(c){Object(at.b)(o,c);function o(t,r){var b=c.call(this,t,r)||this;return b.callbackCaches={},b.emitCaches={},b.steps=r,b}return o.prototype.init=function(){this.initContext(),c.prototype.init.call(this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},o.prototype.initEvents=function(){var t=this;Object(a.each)(this.steps,function(r,b){Object(a.each)(r,function(D){var et=t.getActionCallback(b,D);et&&t.bindEvent(D.trigger,et)})})},o.prototype.clearEvents=function(){var t=this;Object(a.each)(this.steps,function(r,b){Object(a.each)(r,function(D){var et=t.getActionCallback(b,D);et&&t.offEvent(D.trigger,et)})})},o.prototype.initContext=function(){var t=this.view,r=new An(t);this.context=r;var b=this.steps;Object(a.each)(b,function(D){Object(a.each)(D,function(et){if(Object(a.isFunction)(et.action))et.actionObject={action:xn(et.action,r),methodName:"execute"};else if(Object(a.isString)(et.action))et.actionObject=Hr(et.action,r);else if(Object(a.isArray)(et.action)){var Et=et.action;et.actionObject=[],Object(a.each)(Et,function(Lt){et.actionObject.push(Hr(Lt,r))})}})})},o.prototype.isAllowStep=function(t){var r=this.currentStepName,b=this.steps;if(r===t||t===Mr.SHOW_ENABLE)return!0;if(t===Mr.PROCESSING)return r===Mr.START;if(t===Mr.START)return r!==Mr.PROCESSING;if(t===Mr.END)return r===Mr.PROCESSING||r===Mr.START;if(t===Mr.ROLLBACK){if(b[Mr.END])return r===Mr.END;if(r===Mr.START)return!0}return!1},o.prototype.isAllowExecute=function(t,r){if(this.isAllowStep(t)){var b=this.getKey(t,r);return r.once&&this.emitCaches[b]?!1:r.isEnable?r.isEnable(this.context):!0}return!1},o.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},o.prototype.afterExecute=function(t,r){t!==Mr.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var b=this.getKey(t,r);this.emitCaches[b]=!0},o.prototype.getKey=function(t,r){return t+r.trigger+r.action},o.prototype.getActionCallback=function(t,r){var b=this,D=this.context,et=this.callbackCaches,Et=r.actionObject;if(r.action&&Et){var Lt=this.getKey(t,r);if(!et[Lt]){var ne=function(be){D.event=be,b.isAllowExecute(t,r)?(Object(a.isArray)(Et)?Object(a.each)(Et,function(Ae){D.event=be,Gr(Ae)}):(D.event=be,Gr(Et)),b.afterExecute(t,r),r.callback&&(D.event=be,r.callback(D))):D.event=null};r.debounce?et[Lt]=Object(a.debounce)(ne,r.debounce.wait,r.debounce.immediate):r.throttle?et[Lt]=Object(a.throttle)(ne,r.throttle.wait,{leading:r.throttle.leading,trailing:r.throttle.trailing}):et[Lt]=ne}return et[Lt]}return null},o.prototype.bindEvent=function(t,r){var b=t.split(":");b[0]==="window"?window.addEventListener(b[1],r):b[0]==="document"?document.addEventListener(b[1],r):this.view.on(t,r)},o.prototype.offEvent=function(t,r){var b=t.split(":");b[0]==="window"?window.removeEventListener(b[1],r):b[0]==="document"?document.removeEventListener(b[1],r):this.view.off(t,r)},o}(lr),ai=oi,Zr={};function Yi(c){return Zr[Object(a.lowerCase)(c)]}function $i(c,o){Zr[Object(a.lowerCase)(c)]=o}function Go(c,o,t){var r=Yi(c);if(!r)return null;if(Object(a.isPlainObject)(r)){var b=Object(a.mix)(Object(a.clone)(r),t);return new ai(o,b)}else{var D=r;return new D(o,t)}}function Uo(c){return{title:{autoRotate:!0,position:"center",spacing:c.axisTitleSpacing,style:{fill:c.axisTitleTextFillColor,fontSize:c.axisTitleTextFontSize,lineHeight:c.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:c.axisLabelOffset,style:{fill:c.axisLabelFillColor,fontSize:c.axisLabelFontSize,lineHeight:c.axisLabelLineHeight,fontFamily:c.fontFamily}},line:{style:{lineWidth:c.axisLineBorder,stroke:c.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:c.axisGridBorderColor,lineWidth:c.axisGridBorder,lineDash:c.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:c.axisTickLineBorder,stroke:c.axisTickLineBorderColor},alignTick:!0,length:c.axisTickLineLength},subTickLine:null,animate:!0}}function _o(c){return{title:null,marker:{symbol:"circle",spacing:c.legendMarkerSpacing,style:{r:c.legendCircleMarkerSize,fill:c.legendMarkerColor}},itemName:{spacing:5,style:{fill:c.legendItemNameFillColor,fontFamily:c.fontFamily,fontSize:c.legendItemNameFontSize,lineHeight:c.legendItemNameLineHeight,fontWeight:c.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:200,itemSpacing:c.legendItemSpacing,itemMarginBottom:c.legendItemMarginBottom,padding:c.legendPadding}}function ta(c){var o,t={point:{default:{fill:c.pointFillColor,r:c.pointSize,stroke:c.pointBorderColor,lineWidth:c.pointBorder,fillOpacity:c.pointFillOpacity},active:{stroke:c.pointActiveBorderColor,lineWidth:c.pointActiveBorder},selected:{stroke:c.pointSelectedBorderColor,lineWidth:c.pointSelectedBorder},inactive:{fillOpacity:c.pointInactiveFillOpacity,strokeOpacity:c.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:c.hollowPointFillColor,lineWidth:c.hollowPointBorder,stroke:c.hollowPointBorderColor,strokeOpacity:c.hollowPointBorderOpacity,r:c.hollowPointSize},active:{stroke:c.hollowPointActiveBorderColor,strokeOpacity:c.hollowPointActiveBorderOpacity},selected:{lineWidth:c.hollowPointSelectedBorder,stroke:c.hollowPointSelectedBorderColor,strokeOpacity:c.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:c.hollowPointInactiveBorderOpacity}},area:{default:{fill:c.areaFillColor,fillOpacity:c.areaFillOpacity,stroke:null},active:{fillOpacity:c.areaActiveFillOpacity},selected:{fillOpacity:c.areaSelectedFillOpacity},inactive:{fillOpacity:c.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:c.hollowAreaBorderColor,lineWidth:c.hollowAreaBorder,strokeOpacity:c.hollowAreaBorderOpacity},active:{fill:null,lineWidth:c.hollowAreaActiveBorder},selected:{fill:null,lineWidth:c.hollowAreaSelectedBorder},inactive:{strokeOpacity:c.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:c.intervalFillColor,fillOpacity:c.intervalFillOpacity},active:{stroke:c.intervalActiveBorderColor,lineWidth:c.intervalActiveBorder},selected:{stroke:c.intervalSelectedBorderColor,lineWidth:c.intervalSelectedBorder},inactive:{fillOpacity:c.intervalInactiveFillOpacity,strokeOpacity:c.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:c.hollowIntervalFillColor,stroke:c.hollowIntervalBorderColor,lineWidth:c.hollowIntervalBorder,strokeOpacity:c.hollowIntervalBorderOpacity},active:{stroke:c.hollowIntervalActiveBorderColor,lineWidth:c.hollowIntervalActiveBorder,strokeOpacity:c.hollowIntervalActiveBorderOpacity},selected:{stroke:c.hollowIntervalSelectedBorderColor,lineWidth:c.hollowIntervalSelectedBorder,strokeOpacity:c.hollowIntervalSelectedBorderOpacity},inactive:{stroke:c.hollowIntervalInactiveBorderColor,lineWidth:c.hollowIntervalInactiveBorder,strokeOpacity:c.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:c.lineBorderColor,lineWidth:c.lineBorder,strokeOpacity:c.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:c.lineActiveBorder},selected:{lineWidth:c.lineSelectedBorder},inactive:{strokeOpacity:c.lineInactiveBorderOpacity}}},r=Uo(c),b=_o(c);return{background:c.backgroundColor,defaultColor:c.brandColor,padding:"auto",fontFamily:c.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:c.paletteQualitative10,colors20:c.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(et){var Et=et.geometry.coordinate;if(Et.isPolar&&Et.isTransposed){var Lt=ao(et.getModel(),Et),ne=Lt.startAngle,ge=Lt.endAngle,be=(ne+ge)/2,Ae=7.5,We=Ae*Math.cos(be),an=Ae*Math.sin(be);return{matrix:jr.a.transform(null,[["t",We,an]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{common:r,top:Object(a.deepMix)({},r,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:Object(a.deepMix)({},r,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:Object(a.deepMix)({},r,{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),right:Object(a.deepMix)({},r,{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),circle:Object(a.deepMix)({},r,{title:null,grid:Object(a.deepMix)({},r.grid,{line:{type:"line"}})}),radius:Object(a.deepMix)({},r,{title:null,grid:Object(a.deepMix)({},r.grid,{line:{type:"circle"}})})},legend:{common:b,right:Object(a.deepMix)({},b,{layout:"vertical",padding:c.legendVerticalPadding}),left:Object(a.deepMix)({},b,{layout:"vertical",padding:c.legendVerticalPadding}),top:Object(a.deepMix)({},b,{layout:"horizontal",padding:c.legendHorizontalPadding}),bottom:Object(a.deepMix)({},b,{layout:"horizontal",padding:c.legendHorizontalPadding}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:c.sliderRailHeight,defaultLength:c.sliderRailWidth,style:{fill:c.sliderRailFillColor,stroke:c.sliderRailBorderColor,lineWidth:c.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:c.sliderLabelTextFillColor,fontSize:c.sliderLabelTextFontSize,lineHeight:c.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},handler:{size:c.sliderHandlerWidth,style:{fill:c.sliderHandlerFillColor,stroke:c.sliderHandlerBorderColor}},slidable:!0,padding:b.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:c.tooltipCrosshairsBorderColor,lineWidth:c.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(o={},o[""+Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:c.tooltipContainerFillColor,opacity:c.tooltipContainerFillOpacity,boxShadow:c.tooltipContainerShadow,borderRadius:c.tooltipContainerBorderRadius+"px",color:c.tooltipTextFillColor,fontSize:c.tooltipTextFontSize+"px",fontFamily:c.fontFamily,lineHeight:c.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},o[""+Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},o[""+Qr.TOOLTIP_CSS_CONST.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},o[""+Qr.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},o[""+Qr.TOOLTIP_CSS_CONST.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},o[""+Qr.TOOLTIP_CSS_CONST.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},o)},annotation:{arc:{style:{stroke:c.annotationArcBorderColor,lineWidth:c.annotationArcBorder},animate:!0},line:{style:{stroke:c.annotationLineBorderColor,lineDash:c.annotationLineDash,lineWidth:c.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textAlign:"start",fontFamily:c.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:c.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:c.annotationRegionBorder,stroke:c.annotationRegionBorderColor,fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:c.brandColor,lineWidth:2}},line:{style:{stroke:c.annotationLineBorderColor,lineWidth:c.annotationLineBorder},length:c.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8]}},scrollbar:{common:{padding:[8,8,8,8]}}},labels:{offset:12,style:{fill:c.labelFillColor,fontSize:c.labelFontSize,fontFamily:c.fontFamily,stroke:c.labelBorderColor,lineWidth:c.labelBorder},fillColorDark:c.labelFillColorDark,fillColorLight:c.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:c.innerLabelFillColor,fontSize:c.innerLabelFontSize,fontFamily:c.fontFamily,stroke:c.innerLabelBorderColor,lineWidth:c.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:c.overflowLabelFillColor,fontSize:c.overflowLabelFontSize,fontFamily:c.fontFamily,stroke:c.overflowLabelBorderColor,lineWidth:c.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:c.labelLineBorder}},autoRotate:!0}}}var li={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Oo={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},qi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],zo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Xo=function(o){o===void 0&&(o={});var t=o.backgroundColor,r=t===void 0?"transparent":t,b=o.paletteQualitative10,D=b===void 0?qi:b,et=o.paletteQualitative20,Et=et===void 0?zo:et,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Xn=o.brandColor,Hn=Xn===void 0?D[0]:Xn;return{backgroundColor:r,brandColor:Hn,paletteQualitative10:D,paletteQualitative20:Et,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:li[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:li[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:li[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:li[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:li[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:li[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:li[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Hn,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:li[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:li[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:li[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:li[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:li[25],annotationArcBorderColor:li[15],annotationArcBorder:1,annotationLineBorderColor:li[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:li[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:li[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:li[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:li[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:li[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Oo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:li[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Oo[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:li[25],pointFillColor:Hn,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Oo[100],pointBorderOpacity:1,pointActiveBorderColor:li[100],pointSelectedBorder:2,pointSelectedBorderColor:li[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Hn,hollowPointBorderOpacity:.95,hollowPointFillColor:Oo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:li[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:li[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Hn,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Hn,areaFillOpacity:.25,areaActiveFillColor:Hn,areaActiveFillOpacity:.5,areaSelectedFillColor:Hn,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Hn,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:li[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:li[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Hn,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:li[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:li[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Hn,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Oo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:li[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:li[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Yo=Xo();function ua(c){var o=c.styleSheet,t=o===void 0?{}:o,r=Object(at.c)(c,["styleSheet"]),b=Xo(t);return Object(a.deepMix)({},ta(b),r)}var di=ua({}),ea={default:di};function xi(c){return Object(a.get)(ea,Object(a.lowerCase)(c),ea.default)}function ks(c,o){ea[Object(a.lowerCase)(c)]=ua(o)}function Ri(c,o,t){var r=t.translate(c),b=t.translate(o);return Object(a.isNumberEqual)(r,b)}function Rs(c,o){var t=o.coordinate,r=o.getXScale(),b=r.range,D=b[b.length-1],et=b[0],Et=t.invert(c),Lt=Et.x;return t.isPolar&&Lt>(1+D)/2&&(Lt=et),r.translate(r.invert(Lt))}function Mi(c,o,t){var r=t.coordinate,b=t.getYScale(),D=b.field,et=r.invert(o),Et=b.invert(et.y),Lt=Object(a.find)(c,function(ne){var ge=ne[y];return ge[D][0]<=Et&&ge[D][1]>=Et});return Lt||c[c.length-1]}var hu=Object(a.memoize)(function(c){if(c.isCategory)return 1;for(var o=c.values,t=o.length,r=c.translate(o[0]),b=r,D=0;D<t;D++){var et=o[D],Et=c.translate(et);Et<r&&(r=Et),Et>b&&(b=Et)}return(b-r)/(t-1)});function ui(c,o,t){var r=o.getAttribute("position"),b=r.getFields(),D=o.scales,et=Object(a.isFunction)(t)||!t?b[0]:t,Et=D[et],Lt=Et?Et.getText(c[et]):c[et]||et;return Object(a.isFunction)(t)?t(Lt,c):Lt}function du(c){var o=Object(a.values)(c.attributes);return Object(a.filter)(o,function(t){return Object(a.contains)(j,t.type)})}function eo(c){for(var o=du(c),t,r=0,b=o;r<b.length;r++){var D=b[r],et=D.getScale(D.type);if(et&&et.isLinear){t=et;break}}var Et=c.getXScale(),Lt=c.getYScale();return t||Lt||Et}function vu(c,o){var t=o.field,r=c[t];if(Object(a.isArray)(r)){var b=r.map(function(D){return o.getText(D)});return b.join("-")}return o.getText(r)}function na(c,o){var t,r=o.getGroupScales();if(r.length&&(t=r[0]),t){var b=t.field;return t.getText(c[b])}var D=eo(o);return xr(D)}function ra(c,o,t){if(o.length===0)return null;var r=t.type,b=t.getXScale(),D=t.getYScale(),et=b.field,Et=D.field,Lt=null;if(r==="heatmap"||r==="point"){for(var ne=t.coordinate,ge=ne.invert(c),be=b.invert(ge.x),Ae=D.invert(ge.y),We=Infinity,an=0;an<o.length;an++){var gn=o[an],Xn=gn[y],Hn=Math.pow(Xn[et]-be,2)+Math.pow(Xn[Et]-Ae,2);Hn<We&&(We=Hn,Lt=gn)}return Lt}var ir=o[0],cr=o[o.length-1],Rr=Rs(c,t),zr=ir[y][et],_r=ir[y][Et],ki=cr[y][et],Ai=D.isLinear&&Object(a.isArray)(_r);if(Object(a.isArray)(zr)){for(var an=0;an<o.length;an++){var mi=o[an],Xn=mi[y];if(b.translate(Xn[et][0])<=Rr&&b.translate(Xn[et][1])>=Rr)if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{var Ki=void 0;if(!b.isLinear&&b.type!=="timeCat"){for(var an=0;an<o.length;an++){var mi=o[an],Xn=mi[y];if(Ri(Xn[et],Rr,b))if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}else b.translate(Xn[et])<=Rr&&(cr=mi,Ki=o[an+1])}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{if((Rr>b.translate(ki)||Rr<b.translate(zr))&&(Rr>b.max||Rr<b.min))return null;for(var vo=0,po=o.length-1,yo=void 0;vo<=po;){yo=Math.floor((vo+po)/2);var wo=o[yo][y][et];if(Ri(wo,Rr,b))return o[yo];b.translate(wo)<=b.translate(Rr)?(vo=yo+1,cr=o[yo],Ki=o[yo+1]):(po===0&&(cr=o[0]),po=yo-1)}}cr&&Ki&&Math.abs(b.translate(cr[y][et])-Rr)>Math.abs(b.translate(Ki[y][et])-Rr)&&(cr=Ki)}var Q=hu(t.getXScale());return!Lt&&Math.abs(b.translate(cr[y][et])-Rr)<=Q/2&&(Lt=cr),Lt}function ia(c,o,t,r){t===void 0&&(t=""),r===void 0&&(r=!1);var b=c[y],D=ui(b,o,t),et=o.tooltipOption,Et=o.theme.defaultColor,Lt=[],ne,ge;function be(ki,Ai){if(r||!Object(a.isNil)(Ai)&&Ai!==""){var mi={title:D,data:b,mappingData:c,name:ki,value:Ai,color:c.color||Et,marker:!0};Lt.push(mi)}}if(Object(a.isObject)(et)){var Ae=et.fields,We=et.callback;if(We){var an=Ae.map(function(ki){return c[y][ki]}),gn=We.apply(void 0,an),Xn=Object(at.a)({data:c[y],mappingData:c,title:D,color:c.color||Et,marker:!0},gn);Lt.push(Xn)}else for(var Hn=o.scales,ir=0,cr=Ae;ir<cr.length;ir++){var Rr=cr[ir];if(!Object(a.isNil)(b[Rr])){var zr=Hn[Rr];ne=xr(zr),ge=zr.getText(b[Rr]),be(ne,ge)}}}else{var _r=eo(o);ge=vu(b,_r),ne=na(b,o),be(ne,ge)}return Lt}function tc(c){return!Object(a.isNumber)(c)&&!Object(a.isArray)(c)}function ya(c){c===void 0&&(c=0);var o=Object(a.isArray)(c)?c:[c];switch(o.length){case 0:o=[0,0,0,0];break;case 1:o=new Array(4).fill(o[0]);break;case 2:o=Object(at.d)(o,o);break;case 3:o=Object(at.d)(o,[o[1]]);break;default:o=o.slice(0,4);break}return o}var Ur={};function yr(c,o){Ur[c]=o}function Yc(c){delete Ur[c]}function pu(){return Object.keys(Ur)}function ds(c){return Ur[c]}var ec=function(){function c(o){this.option=this.wrapperOption(o)}return c.prototype.update=function(o){return this.option=this.wrapperOption(o),this},c.prototype.hasAction=function(o){var t=this.option.actions;return Object(a.some)(t,function(r){return r[0]===o})},c.prototype.create=function(o,t){var r=this.option,b=r.type,D=r.cfg,et=b==="theta",Et=Object(at.a)({start:o,end:t},D),Lt=$r(et?"polar":b);return this.coordinate=new Lt(Et),this.coordinate.type=b,et&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},c.prototype.adjust=function(o,t){return this.coordinate.update({start:o,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},c.prototype.rotate=function(o){return this.option.actions.push(["rotate",o]),this},c.prototype.reflect=function(o){return this.option.actions.push(["reflect",o]),this},c.prototype.scale=function(o,t){return this.option.actions.push(["scale",o,t]),this},c.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},c.prototype.getOption=function(){return this.option},c.prototype.getCoordinate=function(){return this.coordinate},c.prototype.wrapperOption=function(o){return Object(at.a)({type:"rect",actions:[],cfg:{}},o)},c.prototype.execActions=function(o){var t=this,r=this.option.actions;Object(a.each)(r,function(b){var D,et=b[0],Et=b.slice(1),Lt=Object(a.isNil)(o)?!0:o.includes(et);Lt&&(D=t.coordinate)[et].apply(D,Et)})},c}(),Qo=ec,nc=function(){function c(o,t,r){this.view=o,this.gEvent=t,this.data=r,this.type=t.type}return c.fromData=function(o,t,r){return new c(o,new ft.Event(t,{}),r)},Object.defineProperty(c.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.clone=function(){return new c(this.view,this.gEvent,this.data)},c}(),Vo=nc;function Aa(c){var o=c.getController("axis"),t=c.getController("legend"),r=c.getController("annotation"),b=c.getController("slider"),D=c.getController("scrollbar");[o,b,D,t,r].forEach(function(et){et&&et.layout()})}var Co=function(){function c(){this.scales=new Map,this.syncScales=new Map}return c.prototype.createScale=function(o,t,r,b){var D=r,et=this.getScaleMeta(b);if(t.length===0&&et){var Et=et.scale,Lt={type:Et.type};Et.isCategory&&(Lt.values=Et.values),D=Object(a.deepMix)(Lt,et.scaleDef,r)}var ne=Ar(o,t,D);return this.cacheScale(ne,r,b),ne},c.prototype.sync=function(o,t){var r=this;this.syncScales.forEach(function(b,D){var et=Number.MAX_SAFE_INTEGER,Et=Number.MIN_SAFE_INTEGER,Lt=[];Object(a.each)(b,function(ne){var ge=r.getScale(ne);Et=Object(a.isNumber)(ge.max)?Math.max(Et,ge.max):Et,et=Object(a.isNumber)(ge.min)?Math.min(et,ge.min):et,Object(a.each)(ge.values,function(be){Lt.includes(be)||Lt.push(be)})}),Object(a.each)(b,function(ne){var ge=r.getScale(ne);if(ge.isContinuous)ge.change({min:et,max:Et,values:Lt});else if(ge.isCategory){var be=ge.range,Ae=r.getScaleMeta(ne);Lt&&!Object(a.get)(Ae,["scaleDef","range"])&&(be=Er(Object(a.deepMix)({},ge,{values:Lt}),o,t)),ge.change({values:Lt,range:be})}})})},c.prototype.cacheScale=function(o,t,r){var b=this.getScaleMeta(r);b&&b.scale.type===o.type?(wr(b.scale,o),b.scaleDef=t):(b={key:r,scale:o,scaleDef:t},this.scales.set(r,b));var D=this.getSyncKey(b);if(b.syncKey=D,this.removeFromSyncScales(r),D){var et=this.syncScales.get(D);et||(et=[],this.syncScales.set(D,et)),et.push(r)}},c.prototype.getScale=function(o){var t=this.getScaleMeta(o);if(!t){var r=Object(a.last)(o.split("-")),b=this.syncScales.get(r);b&&b.length&&(t=this.getScaleMeta(b[0]))}return t&&t.scale},c.prototype.deleteScale=function(o){var t=this.getScaleMeta(o);if(t){var r=t.syncKey,b=this.syncScales.get(r);if(b&&b.length){var D=b.indexOf(o);D!==-1&&b.splice(D,1)}}this.scales.delete(o)},c.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},c.prototype.removeFromSyncScales=function(o){var t=this;this.syncScales.forEach(function(r,b){var D=r.indexOf(o);if(D!==-1)return r.splice(D,1),r.length===0&&t.syncScales.delete(b),!1})},c.prototype.getSyncKey=function(o){var t=o.scale,r=o.scaleDef,b=t.field,D=Object(a.get)(r,["sync"]);return D===!0?b:D===!1?void 0:D},c.prototype.getScaleMeta=function(o){return this.scales.get(o)},c}(),vs=function(){function c(o,t,r,b){o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),b===void 0&&(b=0),this.top=o,this.right=t,this.bottom=r,this.left=b}return c.instance=function(o,t,r,b){return o===void 0&&(o=0),t===void 0&&(t=0),r===void 0&&(r=0),b===void 0&&(b=0),new c(o,t,r,b)},c.prototype.max=function(o){var t=o[0],r=o[1],b=o[2],D=o[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,b),this.left=Math.max(this.left,D),this},c.prototype.shrink=function(o){var t=o[0],r=o[1],b=o[2],D=o[3];return this.top+=t,this.right+=r,this.bottom+=b,this.left+=D,this},c.prototype.inc=function(o,t){var r=o.width,b=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:this.top+=b;break;case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:this.right+=r;break;case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:this.bottom+=b;break;case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:this.left+=r;break;default:break}return this},c.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},c.prototype.clone=function(){return new(c.bind.apply(c,Object(at.d)([void 0],this.getPadding())))},c}();function Ns(c){var o=c.padding;if(!tc(o))return new(vs.bind.apply(vs,Object(at.d)([void 0],ya(o))));var t=c.viewBBox,r=new vs,b=[],D=[],et=[];return Object(a.each)(c.getComponents(),function(Et){var Lt=Et.type;Lt===i.AXIS?b.push(Et):[i.LEGEND,i.SLIDER,i.SCROLLBAR].includes(Lt)?D.push(Et):Lt!==i.GRID&&Lt!==i.TOOLTIP&&et.push(Et)}),Object(a.each)(b,function(Et){var Lt=Et.component,ne=Lt.getLayoutBBox(),ge=new Qe(ne.x,ne.y,ne.width,ne.height),be=ge.exceed(t);r.max(be)}),Object(a.each)(D,function(Et){var Lt=Et.component,ne=Et.direction,ge=Lt.getLayoutBBox(),be=Lt.get("padding"),Ae=new Qe(ge.x,ge.y,ge.width,ge.height).expand(be);r.inc(Ae,ne)}),Object(a.each)(et,function(Et){var Lt=Et.component,ne=Et.direction,ge=Lt.getLayoutBBox(),be=new Qe(ge.x,ge.y,ge.width,ge.height);r.inc(be,ne)}),r}function ts(c,o,t){var r=t.instance();o.forEach(function(b){b.autoPadding=r.max(b.autoPadding.getPadding())})}var Ls=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,{visible:t.visible})||this;r.views=[],r.geometries=[],r.controllers=[],r.interactions={},r.limitInPlot=!1,r.options={data:[],animate:!0},r.usedControllers=pu(),r.scalePool=new Co,r.layoutFunc=Aa,r.isPreMouseInPlot=!1,r.isDataChanged=!1,r.isCoordinateChanged=!1,r.createdScaleKeys=new Map,r.onCanvasEvent=function(cr){var Rr=cr.name;if(!Rr.includes(":")){var zr=r.createViewEvent(cr);r.doPlotEvent(zr),r.emit(Rr,zr)}},r.onDelegateEvents=function(cr){var Rr=cr.name;if(!!Rr.includes(":")){var zr=r.createViewEvent(cr);r.emit(Rr,zr)}};var b=t.id,D=b===void 0?Object(a.uniqueId)("view"):b,et=t.parent,Et=t.canvas,Lt=t.backgroundGroup,ne=t.middleGroup,ge=t.foregroundGroup,be=t.region,Ae=be===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:be,We=t.padding,an=t.appendPadding,gn=t.theme,Xn=t.options,Hn=t.limitInPlot,ir=t.syncViewPadding;return r.parent=et,r.canvas=Et,r.backgroundGroup=Lt,r.middleGroup=ne,r.foregroundGroup=ge,r.region=Ae,r.padding=We,r.appendPadding=an,r.options=Object(at.a)(Object(at.a)({},r.options),Xn),r.limitInPlot=Hn,r.id=D,r.syncViewPadding=ir,r.themeObject=Object(a.isObject)(gn)?Object(a.deepMix)({},xi("default"),ua(gn)):xi(gn),r.init(),r}return o.prototype.setLayout=function(t){this.layoutFunc=t},o.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},o.prototype.render=function(t){t===void 0&&(t=!1),this.emit(m.BEFORE_RENDER),this.paint(t),this.emit(m.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this;this.emit(m.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var r=this.geometries,b=0;b<r.length;b++)r[b].clear(),r[b].container.remove(!0);this.geometries=[];for(var D=this.controllers,b=0;b<D.length;b++)D[b].name==="annotation"?D[b].clear(!0):D[b].clear();this.createdScaleKeys.forEach(function(Et,Lt){t.getRootView().scalePool.deleteScale(Lt)}),this.createdScaleKeys.clear();for(var et=this.views,b=0;b<et.length;b++)et[b].clear();this.emit(m.AFTER_CLEAR)},o.prototype.destroy=function(){this.emit(m.BEFORE_DESTROY);var t=this.interactions;Object(a.each)(t,function(Et){Et&&Et.destroy()}),this.clear();for(var r=this.controllers,b=0,D=r.length;b<D;b++){var et=r[b];et.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var r=this.geometries,b=0,D=r.length;b<D;b++){var et=r[b];et.changeVisible(t)}for(var Et=this.controllers,b=0,D=Et.length;b<D;b++){var Lt=Et[b];Lt.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},o.prototype.data=function(t){return Object(a.set)(this.options,"data",t),this.isDataChanged=!0,this},o.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},o.prototype.filter=function(t,r){return Object(a.isFunction)(r)?(Object(a.set)(this.options,["filters",t],r),this):(!r&&Object(a.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},o.prototype.axis=function(t,r){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["axes"],t):Object(a.set)(this.options,["axes",t],r),this},o.prototype.legend=function(t,r){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["legends"],t):Object(a.isString)(t)?Object(a.set)(this.options,["legends",t],r):Object(a.set)(this.options,["legends"],t),this},o.prototype.scale=function(t,r){var b=this;return Object(a.isString)(t)?Object(a.set)(this.options,["scales",t],r):Object(a.isObject)(t)&&Object(a.each)(t,function(D,et){Object(a.set)(b.options,["scales",et],D)}),this},o.prototype.tooltip=function(t){return Object(a.set)(this.options,"tooltip",t),this},o.prototype.annotation=function(){return this.getController("annotation")},o.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},o.prototype.coordinate=function(t,r){return Object(a.isString)(t)?Object(a.set)(this.options,"coordinate",{type:t,cfg:r}):Object(a.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},o.prototype.coord=function(t,r){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,r)},o.prototype.facet=function(t,r){this.facetInstance&&this.facetInstance.destroy();var b=G(t);if(!b)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new b(this,Object(at.a)(Object(at.a)({},r),{type:t})),this},o.prototype.animate=function(t){return Object(a.set)(this.options,"animate",t),this},o.prototype.updateOptions=function(t){return this.clear(),Object(a.mix)(this.options,t),this.views.forEach(function(r){return r.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},o.prototype.option=function(t,r){if(o.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return Object(a.set)(this.options,t,r),this},o.prototype.theme=function(t){return this.themeObject=Object(a.isObject)(t)?Object(a.deepMix)({},this.themeObject,ua(t)):xi(t),this},o.prototype.interaction=function(t,r){var b=this.interactions[t];b&&b.destroy();var D=Go(t,this,r);return D&&(D.init(),this.interactions[t]=D),this},o.prototype.removeInteraction=function(t){var r=this.interactions[t];r&&(r.destroy(),this.interactions[t]=void 0)},o.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(m.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var r=this.views,b=0,D=r.length;b<D;b++){var et=r[b];et.changeData(t)}this.emit(m.AFTER_CHANGE_DATA)},o.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var r={data:this.options.data,scales:Object(a.clone)(this.options.scales),axes:Object(a.clone)(this.options.axes),coordinate:Object(a.clone)(this.coordinateController.getOption()),tooltip:Object(a.clone)(this.options.tooltip),legends:Object(a.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},b=new o(Object(at.a)(Object(at.a)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:p.BG}),middleGroup:this.middleGroup.addGroup({zIndex:p.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:p.FORE}),theme:this.themeObject,padding:this.padding},t),{options:Object(at.a)(Object(at.a)({},r),Object(a.get)(t,"options",{}))}));return this.views.push(b),b},o.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},o.prototype.removeView=function(t){var r=Object(a.remove)(this.views,function(b){return b===t})[0];return r&&r.destroy(),r},o.prototype.getCoordinate=function(){return this.coordinateInstance},o.prototype.getTheme=function(){return this.themeObject},o.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},o.prototype.getYScales=function(){var t={};return this.geometries.map(function(r){var b=r.getYScale(),D=b.field;if(!t[D])return t[D]=!0,b})},o.prototype.getScalesByDim=function(t){for(var r=this.geometries,b={},D=0,et=r.length;D<et;D++){var Et=r[D],Lt=t==="x"?Et.getXScale():Et.getYScale();Lt&&!b[Lt.field]&&(b[Lt.field]=Lt)}return b},o.prototype.getScaleByField=function(t,r){var b=r||this.getScaleKey(t);return this.getRootView().scalePool.getScale(b)},o.prototype.getOptions=function(){return this.options},o.prototype.getData=function(){return this.filteredData},o.prototype.getLayer=function(t){return t===A.BG?this.backgroundGroup:t===A.MID?this.middleGroup:t===A.FORE?this.foregroundGroup:this.foregroundGroup},o.prototype.isPointInPlot=function(t){return on(this.getCoordinate(),t)},o.prototype.getLegendAttributes=function(){return Object(a.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},o.prototype.getGroupScales=function(){var t=this.geometries.map(function(r){return r.getGroupScales()});return Oe(Object(a.flatten)(t))},o.prototype.getCanvas=function(){return this.getRootView().canvas},o.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},o.prototype.getXY=function(t){var r=this.getCoordinate(),b=this.getScalesByDim("x"),D=this.getScalesByDim("y"),et,Et;if(Object(a.each)(t,function(Lt,ne){b[ne]&&(et=b[ne].scale(Lt)),D[ne]&&(Et=D[ne].scale(Lt))}),!Object(a.isNil)(et)&&!Object(a.isNil)(Et))return r.convert({x:et,y:Et})},o.prototype.getController=function(t){return Object(a.find)(this.controllers,function(r){return r.name===t})},o.prototype.showTooltip=function(t){var r=this.getController("tooltip");return r&&r.showTooltip(t),this},o.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},o.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},o.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},o.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},o.prototype.getTooltipItems=function(t){var r=this.getController("tooltip");return r?r.getTooltipItems(t):[]},o.prototype.getSnapRecords=function(t){for(var r=this.geometries,b=[],D=0,et=r.length;D<et;D++){var Et=r[D],Lt=Et.dataArray;Et.sort(Lt);for(var ne=void 0,ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ra(t,Ae,Et),ne&&b.push(ne)}}for(var We=this.views,D=0,et=We.length;D<et;D++){var an=We[D],gn=an.getSnapRecords(t);b=b.concat(gn)}return b},o.prototype.getComponents=function(){for(var t=[],r=this.controllers,b=0,D=r.length;b<D;b++){var et=r[b];t=t.concat(et.getComponents())}return t},o.prototype.filterData=function(t){var r=this.options.filters;return Object(a.size)(r)===0?t:Object(a.filter)(t,function(b,D){var et=Object.keys(r);return et.every(function(Et){var Lt=r[Et];return Lt(b[Et],b,D)})})},o.prototype.filterFieldData=function(t,r){var b=this.options.filters,D=Object(a.get)(b,t);return Object(a.isUndefined)(D)?r:r.filter(function(et,Et){return D(et[t],et,Et)})},o.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),r=t.start,b=t.end,D=this.coordinateBBox.bl,et=this.coordinateBBox.tr;if(Object(a.isEqual)(r,D)&&Object(a.isEqual)(b,et)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(D,et)},o.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(m.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(m.AFTER_PAINT),this.isDataChanged=!1},o.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=Object(a.get)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var r=this.viewBBox,b=r.x,D=r.y,et=r.width,Et=r.height;this.backgroundStyleRectShape.attr({fill:t,x:b,y:D,width:et,height:Et})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},o.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Ns(this).shrink(ya(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var r=this.views,b=0,D=r.length;b<D;b++){var et=r[b];et.renderPaddingRecursive(t)}},o.prototype.renderLayoutRecursive=function(t){var r=this.syncViewPadding===!0?ts:Object(a.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;r&&(r(this,this.views,vs),this.views.forEach(function(Lt){Lt.coordinateBBox=Lt.viewBBox.shrink(Lt.autoPadding.getPadding()),Lt.adjustCoordinate()})),this.doLayout();for(var b=this.views,D=0,et=b.length;D<et;D++){var Et=b[D];Et.renderLayoutRecursive(t)}},o.prototype.renderPaintRecursive=function(t){var r=this.middleGroup;if(this.limitInPlot){var b=vr(this.coordinateInstance),D=b.type,et=b.attrs;r.setClip({type:D,attrs:et})}else r.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var Et=this.views,Lt=0,ne=Et.length;Lt<ne;Lt++){var ge=Et[Lt];ge.renderPaintRecursive(t)}},o.prototype.createScale=function(t,r,b,D){var et=Object(a.get)(this.options.scales,[t]),Et=Object(at.a)(Object(at.a)({},et),b);return this.parent?this.parent.createScale(t,r,Et,D):this.scalePool.createScale(t,r,Et,D)},o.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var r=this.views,b=0,D=r.length;b<D;b++){var et=r[b];et.renderDataRecursive(t)}},o.prototype.calculateViewBBox=function(){var t,r,b,D;if(this.parent){var et=this.parent.coordinateBBox;t=et.x,r=et.y,b=et.width,D=et.height}else t=0,r=0,b=this.canvas.get("width"),D=this.canvas.get("height");var Et=this.region,Lt=Et.start,ne=Et.end,ge=new Qe(t+b*Lt.x,r+D*Lt.y,b*(ne.x-Lt.x),D*(ne.y-Lt.y));(!this.viewBBox||!this.viewBBox.isEqual(ge))&&(this.viewBBox=new Qe(t+b*Lt.x,r+D*Lt.y,b*(ne.x-Lt.x),D*(ne.y-Lt.y))),this.coordinateBBox=this.viewBBox},o.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},o.prototype.initComponentController=function(){for(var t=this.usedControllers,r=0,b=t.length;r<b;r++){var D=t[r],et=ds(D);et&&this.controllers.push(new et(this))}},o.prototype.createViewEvent=function(t){var r=t.shape,b=t.name,D=r?r.get("origin"):null,et=new Vo(this,t,D);return et.type=b,et},o.prototype.doPlotEvent=function(t){var r=t.type,b=t.x,D=t.y,et={x:b,y:D},Et=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(Et.includes(r)){var Lt=this.isPointInPlot(et);if(Lt){var ne="plot:"+r;t.type=ne,this.emit(ne,t),(r==="mouseleave"||r==="touchend")&&(this.isPreMouseInPlot=!1)}r==="mousemove"||r==="touchmove"?(this.isPreMouseInPlot&&!Lt?(r==="mousemove"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t)):!this.isPreMouseInPlot&&Lt&&(r==="mousemove"&&(t.type=l.MOUSE_ENTER,this.emit(l.MOUSE_ENTER,t)),t.type=l.ENTER,this.emit(l.ENTER,t)),this.isPreMouseInPlot=Lt):(r==="mouseleave"||r==="touchend")&&this.isPreMouseInPlot&&(r==="mouseleave"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t),this.isPreMouseInPlot=!1)}},o.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},o.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var r=this.getCoordinate(),b=Object(a.get)(this.options,"scales",{}),D=this.geometries,et=0,Et=D.length;et<Et;et++){var Lt=D[et];Lt.scales=this.getGeometryScales();var ne={coordinate:r,scaleDefs:b,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?Lt.update(ne):Lt.init(ne)}this.adjustScales()},o.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),r=this.getGroupedFields(),b=this.getOptions(),D=b.data,et=b.scales,Et=et===void 0?{}:et,Lt=this.filteredData,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=Et[be],We=this.getScaleKey(be);this.createScale(be,r.includes(be)?D:Lt,Ae,We),this.createdScaleKeys.set(We,!0)}},o.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},o.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),r={},b=0;b<t.length;b++){var D=t[b];r[D]=this.getScaleByField(D)}return r},o.prototype.getScaleFields=function(){for(var t=[],r={},b=this.geometries,D=0;D<b.length;D++){var et=b[D],Et=et.getScaleFields();Oe(Et,t,r)}return t},o.prototype.getGroupedFields=function(){for(var t=[],r={},b=this.geometries,D=0;D<b.length;D++){var et=b[D],Et=et.getGroupFields();Oe(Et,t,r)}return t},o.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},o.prototype.adjustCategoryScaleRange=function(){var t=this,r=Object(at.d)([this.getXScale()],this.getYScales()).filter(function(et){return!!et}),b=this.getCoordinate(),D=this.options.scales;Object(a.each)(r,function(et){var Et=et.field,Lt=et.values,ne=et.isCategory,ge=et.isIdentity;(ne||ge)&&Lt&&!Object(a.get)(D,[Et,"range"])&&(et.range=Er(et,b,t.theme))})},o.prototype.initComponents=function(t){for(var r=this.controllers,b=0;b<r.length;b++){var D=r[b];t?D.update():(D.clear(),D.render())}},o.prototype.doLayout=function(){this.layoutFunc(this)},o.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,r=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,r)},o.prototype.paintGeometries=function(t){for(var r=this.options.animate,b=this.getCoordinate(),D={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},et=this.geometries,Et=0;Et<et.length;Et++){var Lt=et[Et];Lt.coordinate=b,Lt.canvasRegion=D,r||Lt.animate(!1),Lt.paint(t)}},o.prototype.renderComponents=function(t){for(var r=0;r<this.getComponents().length;r++){var b=this.getComponents()[r];b.component.render()}},o.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},o.prototype.initOptions=function(){var t=this,r=this.options,b=r.geometries,D=b===void 0?[]:b,et=r.interactions,Et=et===void 0?[]:et,Lt=r.views,ne=Lt===void 0?[]:Lt,ge=r.annotations,be=ge===void 0?[]:ge,Ae=r.coordinate,We=r.events,an=r.facets;this.coordinateController?Ae&&this.coordinateController.update(Ae):this.coordinateController=new Qo(Ae);for(var gn=0;gn<D.length;gn++){var Xn=D[gn];this.createGeometry(Xn)}for(var Hn=0;Hn<Et.length;Hn++){var ir=Et[Hn],cr=ir.type,Rr=ir.cfg;this.interaction(cr,Rr)}for(var zr=0;zr<ne.length;zr++){var _r=ne[zr];this.createView(_r)}for(var ki=this.getController("annotation"),Ai=0;Ai<be.length;Ai++){var mi=be[Ai];ki.annotation(mi)}We&&Object(a.each)(We,function(Ki,vo){t.on(vo,Ki)}),an&&Object(a.each)(an,function(Ki){var vo=Ki.type,po=Object(at.c)(Ki,["type"]);t.facet(vo,po)})},o.prototype.createGeometry=function(t){var r=t.type,b=t.cfg,D=b===void 0?{}:b;if(this[r]){var et=this[r](D);Object(a.each)(t,function(Et,Lt){Object(a.isFunction)(et[Lt])&&et[Lt](Et)})}},o.prototype.getScaleKey=function(t){return this.id+"-"+t},o}(vt);function Ho(c,o){Ls.prototype[c.toLowerCase()]=function(t){t===void 0&&(t={});var r=Object(at.a)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),b=new o(r);return this.geometries.push(b),b}}var es=Ls,Bs=function(c){Object(at.b)(o,c);function o(t){var r=this,b=t.container,D=t.width,et=t.height,Et=t.autoFit,Lt=Et===void 0?!1:Et,ne=t.padding,ge=t.appendPadding,be=t.renderer,Ae=be===void 0?"canvas":be,We=t.pixelRatio,an=t.localRefresh,gn=an===void 0?!0:an,Xn=t.visible,Hn=Xn===void 0?!0:Xn,ir=t.supportCSSTransform,cr=ir===void 0?!1:ir,Rr=t.defaultInteractions,zr=Rr===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:Rr,_r=t.options,ki=t.limitInPlot,Ai=t.theme,mi=t.syncViewPadding,Ki=Object(a.isString)(b)?document.getElementById(b):b,vo=Object(v.b)('<div style="position:relative;"></div>');Ki.appendChild(vo);var po=N(Ki,Lt,D,et),yo=O(Ae),wo=new yo.Canvas(Object(at.a)({container:vo,pixelRatio:We,localRefresh:gn,supportCSSTransform:cr},po));return r=c.call(this,{parent:null,canvas:wo,backgroundGroup:wo.addGroup({zIndex:p.BG}),middleGroup:wo.addGroup({zIndex:p.MID}),foregroundGroup:wo.addGroup({zIndex:p.FORE}),padding:ne,appendPadding:ge,visible:Hn,options:_r,limitInPlot:ki,theme:Ai,syncViewPadding:mi})||this,r.onResize=Object(a.debounce)(function(){r.forceFit()},300),r.ele=Ki,r.canvas=wo,r.width=po.width,r.height=po.height,r.autoFit=Lt,r.localRefresh=gn,r.renderer=Ae,r.wrapperElement=vo,r.updateCanvasStyle(),r.bindAutoFit(),r.initDefaultInteractions(zr),r}return o.prototype.initDefaultInteractions=function(t){var r=this;Object(a.each)(t,function(b){r.interaction(b)})},o.prototype.changeSize=function(t,r){return this.width===t&&this.height===r?this:(this.emit(m.BEFORE_CHANGE_SIZE),this.width=t,this.height=r,this.canvas.changeSize(t,r),this.render(!0),this.emit(m.AFTER_CHANGE_SIZE),this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),X(this.wrapperElement),this.wrapperElement=null},o.prototype.changeVisible=function(t){return c.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},o.prototype.forceFit=function(){if(!this.destroyed){var t=N(this.ele,!0,this.width,this.height),r=t.width,b=t.height;this.changeSize(r,b)}},o.prototype.updateCanvasStyle=function(){Object(v.e)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},o.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},o.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},o}(es),gu=Bs,Do=function(){function c(o){this.visible=!0,this.components=[],this.view=o}return c.prototype.clear=function(o){Object(a.each)(this.components,function(t){t.component.destroy()}),this.components=[]},c.prototype.destroy=function(){this.clear()},c.prototype.getComponents=function(){return this.components},c.prototype.changeVisible=function(o){this.visible!==o&&(this.components.forEach(function(t){o?t.component.show():t.component.hide()}),this.visible=o)},c}();function ps(c){for(var o=[],t=function(D){var et=c[D],Et=Object(a.find)(o,function(Lt){return Lt.color===et.color&&Lt.name===et.name&&Lt.value===et.value&&Lt.title===et.title});Et||o.push(et)},r=0;r<c.length;r++)t(r);return o}var yu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(o.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},o.prototype.render=function(){},o.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var r=this.view,b=this.getTooltipItems(t);if(!b.length){this.hideTooltip();return}var D=this.getTitle(b),et={x:b[0].x,y:b[0].y};r.emit("tooltip:show",Vo.fromData(r,"tooltip:show",Object(at.a)({items:b,title:D},t)));var Et=this.getTooltipCfg(),Lt=Et.follow,ne=Et.showMarkers,ge=Et.showCrosshairs,be=Et.showContent,Ae=Et.marker,We=this.items,an=this.title;if(!Object(a.isEqual)(an,D)||!Object(a.isEqual)(We,b)?(r.emit("tooltip:change",Vo.fromData(r,"tooltip:change",Object(at.a)({items:b,title:D},t))),be&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Object(a.mix)({},Et,{items:this.getItemsAfterProcess(b),title:D},Lt?t:{})),this.tooltip.show()),ne&&this.renderTooltipMarkers(b,Ae)):(this.tooltip&&Lt&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=b,this.title=D,ge){var gn=Object(a.get)(Et,["crosshairs","follow"],!1);this.renderCrosshairs(gn?t:et,Et)}}},o.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var r=this.tooltipMarkersGroup;r&&r.hide();var b=this.xCrosshair,D=this.yCrosshair;b&&b.hide(),D&&D.hide();var et=this.tooltip;et&&et.hide(),this.view.emit("tooltip:hide",Vo.fromData(this.view,"tooltip:hide",{})),this.point=null},o.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},o.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},o.prototype.isTooltipLocked=function(){return this.isLocked},o.prototype.clear=function(){var t=this,r=t.tooltip,b=t.xCrosshair,D=t.yCrosshair,et=t.tooltipMarkersGroup;r&&(r.hide(),r.clear()),b&&b.clear(),D&&D.clear(),et&&et.clear(),this.reset()},o.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},o.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},o.prototype.changeVisible=function(t){if(this.visible!==t){var r=this,b=r.tooltip,D=r.tooltipMarkersGroup,et=r.xCrosshair,Et=r.yCrosshair;t?(b&&b.show(),D&&D.show(),et&&et.show(),Et&&Et.show()):(b&&b.hide(),D&&D.hide(),et&&et.hide(),Et&&Et.hide()),this.visible=t}},o.prototype.getTooltipItems=function(t){var r=this.findItemsFromView(this.view,t);if(r.length){r=Object(a.flatten)(r);for(var b=0,D=r;b<D.length;b++)for(var et=D[b],Et=0,Lt=et;Et<Lt.length;Et++){var ne=Lt[Et],ge=ne.mappingData,be=ge.x,Ae=ge.y;ne.x=Object(a.isArray)(be)?be[be.length-1]:be,ne.y=Object(a.isArray)(Ae)?Ae[Ae.length-1]:Ae}var We=this.getTooltipCfg().shared;if(We===!1&&r.length>1){for(var an=r[0],gn=Math.abs(t.y-an[0].y),Xn=0,Hn=r;Xn<Hn.length;Xn++){var ir=Hn[Xn],cr=Math.abs(t.y-ir[0].y);cr<=gn&&(an=ir,gn=cr)}r=[an]}return ps(Object(a.flatten)(r))}return[]},o.prototype.layout=function(){},o.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},o.prototype.isCursorEntered=function(t){if(this.tooltip){var r=this.tooltip.getContainer(),b=this.tooltip.get("capture");if(r&&b){var D=r.getBoundingClientRect(),et=D.x,Et=D.y,Lt=D.width,ne=D.height;return new Qe(et,Et,Lt,ne).isPointIn(t)}}return!1},o.prototype.getTooltipCfg=function(){var t=this.view,r=t.getOptions().tooltip,b=this.processCustomContent(r),D=t.getTheme(),et=Object(a.get)(D,["components","tooltip"],{}),Et=Object(a.get)(b,"enterable",et.enterable);return Object(a.deepMix)({},et,b,{capture:!!(Et||this.isLocked)})},o.prototype.processCustomContent=function(t){if(Object(a.isBoolean)(t)||!Object(a.get)(t,"customContent"))return t;var r=t.customContent,b=function(et,Et){var Lt=r(et,Et)||"";return Object(a.isString)(Lt)?'<div class="g2-tooltip">'+Lt+"</div>":Lt};return Object(at.a)(Object(at.a)({},t),{customContent:b})},o.prototype.getTitle=function(t){var r=t[0].title||t[0].name;return this.title=r,r},o.prototype.renderTooltip=function(){var t=this.view.getCanvas(),r={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},b=this.getTooltipCfg(),D=new Wi(Object(at.a)(Object(at.a)({parent:t.get("el").parentNode,region:r},b),{visible:!1,crosshairs:null}));D.init(),this.tooltip=D},o.prototype.renderTooltipMarkers=function(t,r){for(var b=this.getTooltipMarkersGroup(),D=0,et=t;D<et.length;D++){var Et=et[D],Lt=Et.x,ne=Et.y,ge=Object(at.a)(Object(at.a)({fill:Et.color,symbol:"circle",shadowColor:Et.color},r),{x:Lt,y:ne});b.addShape("marker",{attrs:ge})}},o.prototype.renderCrosshairs=function(t,r){var b=Object(a.get)(r,["crosshairs","type"],"x");b==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,r)):b==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,r)):b==="xy"&&(this.renderXCrosshairs(t,r),this.renderYCrosshairs(t,r))},o.prototype.renderXCrosshairs=function(t,r){var b=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(b,t)){var D,et;if(b.isRect)b.isTransposed?(D={x:b.start.x,y:t.y},et={x:b.end.x,y:t.y}):(D={x:t.x,y:b.end.y},et={x:t.x,y:b.start.y});else{var Et=$n(b,t),Lt=b.getCenter(),ne=b.getRadius();et=Pi(Lt.x,Lt.y,ne,Et),D=Lt}var ge=Object(a.deepMix)({start:D,end:et,container:this.getTooltipCrosshairsGroup()},Object(a.get)(r,"crosshairs",{}),this.getCrosshairsText("x",t,r));delete ge.type;var be=this.xCrosshair;be?be.update(ge):(be=new Qr.Crosshair.Line(ge),be.init()),be.render(),be.show(),this.xCrosshair=be}},o.prototype.renderYCrosshairs=function(t,r){var b=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(b,t)){var D,et;if(b.isRect){var Et=void 0,Lt=void 0;b.isTransposed?(Et={x:t.x,y:b.end.y},Lt={x:t.x,y:b.start.y}):(Et={x:b.start.x,y:t.y},Lt={x:b.end.x,y:t.y}),D={start:Et,end:Lt},et="Line"}else D={center:b.getCenter(),radius:rn(b,t),startAngle:b.startAngle,endAngle:b.endAngle},et="Circle";D=Object(a.deepMix)({container:this.getTooltipCrosshairsGroup()},D,Object(a.get)(r,"crosshairs",{}),this.getCrosshairsText("y",t,r)),delete D.type;var ne=this.yCrosshair;ne?b.isRect&&ne.get("type")==="circle"||!b.isRect&&ne.get("type")==="line"?(ne=new Qr.Crosshair[et](D),ne.init()):ne.update(D):(ne=new Qr.Crosshair[et](D),ne.init()),ne.render(),ne.show(),this.yCrosshair=ne}},o.prototype.getCrosshairsText=function(t,r,b){var D=Object(a.get)(b,["crosshairs","text"]),et=Object(a.get)(b,["crosshairs","follow"]),Et=this.items;if(D){var Lt=this.getViewWithGeometry(this.view),ne=Et[0],ge=Lt.getXScale(),be=Lt.getYScales()[0],Ae=void 0,We=void 0;if(et){var an=this.view.getCoordinate().invert(r);Ae=ge.invert(an.x),We=be.invert(an.y)}else Ae=ne.data[ge.field],We=ne.data[be.field];var gn=t==="x"?Ae:We;return Object(a.isFunction)(D)?D=D(t,gn,Et,r):D.content=gn,{text:D}}},o.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},o.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},o.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},o.prototype.getTooltipItemsByHitShape=function(t,r,b){var D=this.getTooltipCfg().showNil,et=[],Et=t.container,Lt=Et.getShape(r.x,r.y);if(Lt&&Lt.get("visible")&&Lt.get("origin")){var ne=Lt.get("origin").mappingData,ge=ia(ne,t,b,D);ge.length&&et.push(ge)}return et},o.prototype.getTooltipItemsByFindData=function(t,r,b){var D=this.getTooltipCfg().showNil,et=[],Et=t.dataArray;if(!Object(a.isEmpty)(Et)){t.sort(Et);for(var Lt=0,ne=Et;Lt<ne.length;Lt++){var ge=ne[Lt],be=ra(r,ge,t);if(be){var Ae=t.getElementId(be),We=t.elementsMap[Ae];if(t.type==="heatmap"||We.visible){var an=ia(be,t,b,D);an.length&&et.push(an)}}}}return et},o.prototype.findItemsFromView=function(t,r){if(t.getOptions().tooltip===!1)return[];for(var b=[],D=t.geometries,et=this.getTooltipCfg(),Et=et.shared,Lt=et.title,ne=et.reversed,ge=0,be=D;ge<be.length;ge++){var Ae=be[ge];if(Ae.visible&&Ae.tooltipOption!==!1){var We=Ae.type,an=void 0;["point","edge","polygon"].includes(We)?an=this.getTooltipItemsByHitShape(Ae,r,Lt):["area","line","path","heatmap"].includes(We)?an=this.getTooltipItemsByFindData(Ae,r,Lt):Et!==!1?an=this.getTooltipItemsByFindData(Ae,r,Lt):an=this.getTooltipItemsByHitShape(Ae,r,Lt),an.length&&(ne&&an.reverse(),b.push(an))}}for(var gn=0,Xn=t.views;gn<Xn.length;gn++){var Hn=Xn[gn];b=b.concat(this.findItemsFromView(Hn,r))}return b},o.prototype.getViewWithGeometry=function(t){var r=this;return t.geometries.length?t:Object(a.find)(t.views,function(b){return r.getViewWithGeometry(b)})},o.prototype.getItemsAfterProcess=function(t){var r=this.getTooltipCfg().customItems,b=r||function(D){return D};return b(t)},o}(Do),Fs=yu,mr={};function Gs(c){return mr[c.toLowerCase()]}function Eo(c,o){mr[c.toLowerCase()]=o}var ma={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},mu={interval:function(o){return{enter:{animation:o.isRect?o.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:o.isPolar&&o.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},bu={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",o.isPolar&&o.isTransposed&&(t="wave-in")),{animation:t}},schema:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Jn(c,o){return{delay:Object(a.isFunction)(c.delay)?c.delay(o):c.delay,easing:Object(a.isFunction)(c.easing)?c.easing(o):c.easing,duration:Object(a.isFunction)(c.duration)?c.duration(o):c.duration,callback:c.callback}}function fe(c,o,t){var r=mu[c];return r&&(Object(a.isFunction)(r)&&(r=r(o)),r=Object(a.deepMix)({},ma,r),t)?r[t]:r}function Ta(c,o,t){var r=Object(a.get)(c.get("origin"),"data",y),b=o.animation,D=Jn(o,r);if(b){var et=Gs(b);et&&et(c,D,t)}else c.animate(t.toAttrs,D)}function Us(c,o,t,r,b){if(bu[t]){var D=bu[t](r),et=Gs(Object(a.get)(D,"animation",""));if(et){var Et=Object(at.a)(Object(at.a)(Object(at.a)({},ma.appear),D),o);c.stopAnimate(),et(c,Et,{coordinate:r,minYPoint:b,toAttrs:null})}}}var ns="element-background",ba=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.states=[];var b=t.shapeFactory,D=t.container,et=t.offscreenGroup,Et=t.visible,Lt=Et===void 0?!0:Et;return r.shapeFactory=b,r.container=D,r.offscreenGroup=et,r.visible=Lt,r}return o.prototype.draw=function(t,r){r===void 0&&(r=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,r),this.visible===!1&&this.changeVisible(!1)},o.prototype.update=function(t){var r=this,b=r.shapeFactory,D=r.shape;if(!!D){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(D,t);var et=this.getOffscreenGroup(),Et=b.drawShape(this.shapeType,t,et);Et.cfg.data=this.data,Et.cfg.origin=t,Et.cfg.element=this,this.syncShapeStyle(D,Et,this.getStates(),this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var t=this,r=t.shapeFactory,b=t.shape;if(b){var D=this.getAnimateCfg("leave");D?Ta(b,D,{coordinate:r.coordinate,toAttrs:Object(at.a)({},b.attr())}):b.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(r){r.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(r){r.hide()}))},o.prototype.setState=function(t,r){var b=this,D=b.states,et=b.shapeFactory,Et=b.model,Lt=b.shape,ne=b.shapeType,ge=D.indexOf(t);if(r){if(ge>-1)return;D.push(t),(t==="active"||t==="selected")&&Lt.toFront()}else{if(ge===-1)return;D.splice(ge,1),(t==="active"||t==="selected")&&Lt.toBack()}var be=et.drawShape(ne,Et,this.getOffscreenGroup());D.length?this.syncShapeStyle(Lt,be,D,null):this.syncShapeStyle(Lt,be,["reset"],null),be.remove(!0);var Ae={state:t,stateStatus:r,element:this,target:this.container};this.container.emit("statechange",Ae),Object(Qr.propagationDelegate)(this.shape,"statechange",Ae)},o.prototype.clearStates=function(){var t=this,r=this.states;Object(a.each)(r,function(b){t.setState(b,!1)}),this.states=[]},o.prototype.hasState=function(t){return this.states.includes(t)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var t=this,r=t.shape,b=t.labelShape,D={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return r&&(D=r.getCanvasBBox()),b&&b.forEach(function(et){var Et=et.getCanvasBBox();D.x=Math.min(Et.x,D.x),D.y=Math.min(Et.y,D.y),D.minX=Math.min(Et.minX,D.minX),D.minY=Math.min(Et.minY,D.minY),D.maxX=Math.max(Et.maxX,D.maxX),D.maxY=Math.max(Et.maxY,D.maxY)}),D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,r=t.shapeType,b=t.geometry,D=t.shapeFactory,et=b.stateOption,Et=D.defaultShapeType,Lt=D.theme[r]||D.theme[Et];this.statesStyle=Object(a.deepMix)({},Lt,et)}return this.statesStyle},o.prototype.getStateStyle=function(t,r){var b=this.getStatesStyle(),D=Object(a.get)(b,[t,"style"],{}),et=D[r]||D;return Object(a.isFunction)(et)?et(this):et},o.prototype.getAnimateCfg=function(t){var r=this,b=this.animate;if(b){var D=b[t];return D&&Object(at.a)(Object(at.a)({},D),{callback:function(){var Et;Object(a.isFunction)(D.callback)&&D.callback(),(Et=r.geometry)===null||Et===void 0||Et.emit(S.AFTER_DRAW_ANIMATE)}})}return null},o.prototype.drawShape=function(t,r){var b;r===void 0&&(r=!1);var D=this,et=D.shapeFactory,Et=D.container,Lt=D.shapeType;if(this.shape=et.drawShape(Lt,t,Et),this.shape){this.setShapeInfo(this.shape,t);var ne=this.shape.cfg.name;ne?Object(a.isString)(ne)&&(this.shape.cfg.name=["element",ne]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ge=r?"enter":"appear",be=this.getAnimateCfg(ge);be&&((b=this.geometry)===null||b===void 0||b.emit(S.BEFORE_DRAW_ANIMATE),Ta(this.shape,be,{coordinate:et.coordinate,toAttrs:Object(at.a)({},this.shape.attr())}))}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(t,r){var b=this;if(t.cfg.origin=r,t.cfg.element=this,t.isGroup()){var D=t.get("children");D.forEach(function(et){b.setShapeInfo(et,r)})}},o.prototype.syncShapeStyle=function(t,r,b,D,et){var Et=this,Lt;if(b===void 0&&(b=[]),et===void 0&&(et=0),!(!t||!r)){var ne=t.get("clipShape"),ge=r.get("clipShape");if(this.syncShapeStyle(ne,ge,b,D),t.isGroup())for(var be=t.get("children"),Ae=r.get("children"),We=0;We<be.length;We++)this.syncShapeStyle(be[We],Ae[We],b,D,et+We);else{if(!Object(a.isEmpty)(b)&&!Object(a.isEqual)(b,["reset"])){var an=t.get("name");Object(a.isArray)(an)&&(an=an[1]),Object(a.each)(b,function(Xn){if(r.get("name")!==ns){var Hn=Et.getStateStyle(Xn,an||et);r.attr(Hn)}})}var gn=xo(t,r);this.animate?D?((Lt=this.geometry)===null||Lt===void 0||Lt.emit(S.BEFORE_DRAW_ANIMATE),Ta(t,D,{coordinate:this.shapeFactory.coordinate,toAttrs:gn,shapeModel:this.model})):Object(a.isEmpty)(b)?(t.stopAnimate(),t.animate(gn,{duration:300})):t.attr(gn):t.attr(gn)}}},o.prototype.getShapeType=function(t){var r=Object(a.get)(t,"shape");return Object(a.isArray)(r)?r[0]:r},o}(vt),ca=ba,gs={},Fa={};function ys(c){return gs[c.toLowerCase()]}function jn(c,o){gs[c.toLowerCase()]=o}function _s(c){return Fa[c.toLowerCase()]}function Wo(c,o){Fa[c.toLowerCase()]=o}var rc={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(o,t){var r=this.getShape(o);return r.getPoints?r.getPoints(t):this.getDefaultPoints(t)},getShape:function(o){var t=this[o]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(o){return Object(a.get)(o,[this.defaultShapeType,"default","style"],{})},getMarker:function(o,t){var r=this.getShape(o);if(!r.getMarker){var b=this.defaultShapeType;r=this.getShape(b)}var D=this.theme,et=Object(a.get)(D,[o,"default"],{}),Et=r.getMarker(t);return Object(a.deepMix)({},et,Et)},drawShape:function(o,t,r){var b=this.getShape(o);return b.draw(t,r)}},ic={coordinate:null,parsePath:function(o){var t=this.coordinate,r=Object(R.c)(o);return t.isPolar?r=Ce(t,r):r=Ze(t,r),r},parsePoint:function(o){var t=this.coordinate;return t.convert(o)},parsePoints:function(o){var t=this.coordinate;return o.map(function(r){return t.convert(r)})},draw:function(o,t){}},ms={};function oa(c,o){var t=Object(a.upperFirst)(c),r=Object(at.a)(Object(at.a)(Object(at.a)({},rc),o),{geometryType:c});return ms[t]=r,r}function fo(c,o,t){var r=Object(a.upperFirst)(c),b=ms[r],D=Object(at.a)(Object(at.a)({},ic),t);return b[o]=D,D}function bs(c){var o=Object(a.upperFirst)(c);return ms[o]}function zs(c,o,t){if(t===void 0&&(t={}),!o)return[c];var r=Object(a.groupToMap)(c,o),b=[];if(o.length===1&&t[o[0]])for(var D=t[o[0]],et=0,Et=D;et<Et.length;et++){var Lt=Et[et],ne=r["_"+Lt];ne&&b.push(ne)}else for(var ge in r)if(r.hasOwnProperty(ge)){var be=r[ge];b.push(be)}return b}function Ga(c,o){return Object(a.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!Object(a.isEqual)(c[t],o[t])})}function Ua(c){return Object(a.isArray)(c)?c:c.split("*")}function xu(c,o){var t=[];return Object(a.each)(o,function(r,b){var D=b.split(" ")[0];D===c&&t.push(r)}),t}var Ou=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="base",r.attributes={},r.elements=[],r.elementsMap={},r.animateOption=!0,r.attributeOption={},r.lastElementsMap={},r.generatePoints=!1,r.beforeMappingData=null,r.adjusts={},r.idFields=[],r.hasSorted=!1,r.isCoordinateChanged=!1;var b=t.container,D=t.labelsContainer,et=t.coordinate,Et=t.data,Lt=t.sortable,ne=Lt===void 0?!1:Lt,ge=t.visible,be=ge===void 0?!0:ge,Ae=t.theme,We=t.scales,an=We===void 0?{}:We,gn=t.scaleDefs,Xn=gn===void 0?{}:gn,Hn=t.intervalPadding,ir=t.dodgePadding,cr=t.maxColumnWidth,Rr=t.minColumnWidth,zr=t.columnWidthRatio,_r=t.roseWidthRatio,ki=t.multiplePieWidthRatio,Ai=t.zIndexReversed;return r.container=b,r.labelsContainer=D,r.coordinate=et,r.data=Et,r.sortable=ne,r.visible=be,r.userTheme=Ae,r.scales=an,r.scaleDefs=Xn,r.intervalPadding=Hn,r.dodgePadding=ir,r.maxColumnWidth=cr,r.minColumnWidth=Rr,r.columnWidthRatio=zr,r.roseWidthRatio=_r,r.multiplePieWidthRatio=ki,r.zIndexReversed=Ai,r}return o.prototype.position=function(t){var r=t;Object(a.isPlainObject)(t)||(r={fields:Ua(t)});var b=Object(a.get)(r,"fields");return b.length===1&&(b.unshift("1"),Object(a.set)(r,"fields",b)),Object(a.set)(this.attributeOption,"position",r),this},o.prototype.color=function(t,r){return this.createAttrOption("color",t,r),this},o.prototype.shape=function(t,r){return this.createAttrOption("shape",t,r),this},o.prototype.size=function(t,r){return this.createAttrOption("size",t,r),this},o.prototype.adjust=function(t){var r=t;return(Object(a.isString)(t)||Object(a.isPlainObject)(t))&&(r=[t]),Object(a.each)(r,function(b,D){Object(a.isObject)(b)||(r[D]={type:b})}),this.adjustOption=r,this},o.prototype.style=function(t,r){if(Object(a.isString)(t)){var b=Ua(t);this.styleOption={fields:b,callback:r}}else{var D=t,b=D.fields,et=D.callback,Et=D.cfg;b||et||Et?this.styleOption=t:this.styleOption={cfg:t}}return this},o.prototype.tooltip=function(t,r){if(Object(a.isString)(t)){var b=Ua(t);this.tooltipOption={fields:b,callback:r}}else this.tooltipOption=t;return this},o.prototype.animate=function(t){return this.animateOption=t,this},o.prototype.label=function(t,r,b){if(Object(a.isString)(t)){var D={},et=Ua(t);D.fields=et,Object(a.isFunction)(r)?D.callback=r:Object(a.isPlainObject)(r)&&(D.cfg=r),b&&(D.cfg=b),this.labelOption=D}else this.labelOption=t;return this},o.prototype.state=function(t){return this.stateOption=t,this},o.prototype.customInfo=function(t){return this.customOption=t,this},o.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},o.prototype.update=function(t){t===void 0&&(t={});var r=t.data,b=t.isDataChanged,D=t.isCoordinateChanged,et=this,Et=et.attributeOption,Lt=et.lastAttributeOption;Object(a.isEqual)(Et,Lt)?r&&(b||!Object(a.isEqual)(r,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(r)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=D},o.prototype.paint=function(t){var r=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=Object(a.deepMix)({},fe(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var b=this.getOffscreenGroup();b.clear();for(var D=this.beforeMappingData,et=this.beforeMapping(D),Et=[],Lt=0,ne=et.length;Lt<ne;Lt++){var ge=et[Lt],be=this.mapping(ge);Et.push(be),this.createElements(be,Lt,t)}if(this.canDoGroupAnimation(t)){var Ae=this.container,We=this.type,an=this.coordinate,gn=Object(a.get)(this.animateOption,"appear"),Xn=this.getYScale(),Hn=an.convert({x:0,y:Xn.scale(this.getYMinValue())});Us(Ae,gn,We,an,Hn)}this.labelOption&&this.renderLabels(Object(a.flatten)(Et),t),this.dataArray=Et,Object(a.each)(this.lastElementsMap,function(ir){ir.animate=r.animateOption,ir.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Object(at.a)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this,r=t.container,b=t.geometryLabel,D=t.offscreenGroup;r&&r.clear(),b&&b.clear(),D&&D.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},o.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,c.prototype.destroy.call(this)},o.prototype.getGroupScales=function(){return this.groupScales},o.prototype.getAttribute=function(t){return this.attributes[t]},o.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},o.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},o.prototype.getGroupAttributes=function(){var t=[];return Object(a.each)(this.attributes,function(r){j.includes(r.type)&&t.push(r)}),t},o.prototype.getDefaultValue=function(t){var r,b=this.getAttribute(t);return b&&Object(a.isEmpty)(b.scales)&&(r=b.values[0]),r},o.prototype.getAttributeValues=function(t,r){for(var b=[],D=t.scales,et=0,Et=D.length;et<Et;et++){var Lt=D[et],ne=Lt.field;Lt.isIdentity?b.push(Lt.values):b.push(r[ne])}return t.mapping.apply(t,b)},o.prototype.getAdjust=function(t){return this.adjusts[t]},o.prototype.getShapeMarker=function(t,r){var b=this.getShapeFactory();return b.getMarker(t,r)},o.prototype.getElementsBy=function(t){return this.elements.filter(function(r){return t(r)})},o.prototype.getElementId=function(t){t=Object(a.isArray)(t)?t[0]:t;var r=t[y];if(this.idFields.length){for(var b=r[this.idFields[0]],D=1;D<this.idFields.length;D++)b+="-"+r[this.idFields[D]];return b}var et=this.type,Et=this.getXScale(),Lt=this.getYScale(),ne=Et.field||"x",ge=Lt.field||"y",be=r[ge],Ae;Et.type==="identity"?Ae=Et.values[0]:Ae=r[ne];var We;et==="interval"||et==="schema"?We=""+Ae:et==="line"||et==="area"||et==="path"?We=et:We=Ae+"-"+be;for(var an=this.groupScales,D=0,gn=an.length;D<gn;D++){var Xn=an[D],Hn=Xn.field;We=We+"-"+r[Hn]}var ir=this.getAdjust("dodge");if(ir){var cr=ir.dodgeBy;cr&&(We=We+"-"+r[cr])}return this.getAdjust("jitter")&&(We=We+"-"+t.x+"-"+t.y),We},o.prototype.getScaleFields=function(){var t=[],r={},b=this,D=b.attributeOption,et=b.labelOption,Et=b.tooltipOption;for(var Lt in D)if(D.hasOwnProperty(Lt)){var ne=D[Lt];ne.fields?Oe(ne.fields,t,r):ne.values&&Oe(ne.values,t,r)}return et&&et.fields&&Oe(et.fields,t,r),Object(a.isObject)(Et)&&Et.fields&&Oe(Et.fields,t,r),t},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var r=this.elements,b=0,D=r.length;b<D;b++){var et=r[b];et.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},o.prototype.getGroupFields=function(){for(var t=[],r={},b=0,D=j.length;b<D;b++){var et=j[b],Et=this.attributeOption[et];Et&&Et.fields&&Oe(Et.fields,t,r)}return t},o.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,r=t[0],b=t[1];return[r,b]},o.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.sort=function(t){if(!this.hasSorted)for(var r=this.getXScale(),b=r.field,D=0;D<t.length;D++){var et=t[D];et.sort(function(Et,Lt){return r.translate(Et[y][b])-r.translate(Lt[y][b])})}this.hasSorted=!0},o.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},o.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!bs(t))return this.shapeFactory||(this.shapeFactory=Object(a.clone)(bs(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},o.prototype.createShapePointsCfg=function(t){var r=this.getXScale(),b=this.getYScale(),D=this.normalizeValues(t[r.field],r),et;return b?et=this.normalizeValues(t[b.field],b):et=t.y?t.y:.1,{x:D,y:et,y0:b?b.scale(this.getYMinValue()):void 0}},o.prototype.createElement=function(t,r){r===void 0&&(r=!1);var b=this.container,D=this.getDrawCfg(t),et=this.getShapeFactory(),Et=new ca({shapeFactory:et,container:b,offscreenGroup:this.getOffscreenGroup()});return Et.animate=this.animateOption,Et.geometry=this,Et.draw(D,r),Et},o.prototype.getDrawCfg=function(t){var r=t[y],b={mappingData:t,data:r,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},D=t.shape;!D&&this.getShapeFactory()&&(D=this.getShapeFactory().defaultShapeType),b.shape=D;var et=this.theme.geometries[this.shapeType];b.defaultStyle=Object(a.get)(et,[D,"default"],{}).style,!b.defaultStyle&&this.getShapeFactory()&&(b.defaultStyle=this.getShapeFactory().getDefaultStyle(et));var Et=this.styleOption;return Et&&(b.style=this.getStyleCfg(Et,r)),this.generatePoints&&(b.points=t.points,b.nextPoints=t.nextPoints),b},o.prototype.createElements=function(t,r,b){b===void 0&&(b=!1);for(var D=this,et=D.lastElementsMap,Et=D.elementsMap,Lt=D.elements,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=this.getElementId(be);Et[Ae]&&(Ae=Ae+"-"+r+"-"+ne);var We=et[Ae];if(!We)We=this.createElement(be,b);else{var an=this.getDrawCfg(be),gn=We.getModel();(this.isCoordinateChanged||Ga(an,gn))&&(We.animate=this.animateOption,We.update(an)),delete et[Ae]}Lt.push(We),Et[Ae]=We}if(this.zIndexReversed){var Xn=Lt.length;Lt.forEach(function(Hn,ir){Hn.shape.setZIndex(Xn-ir)})}return Lt},o.prototype.getLabelType=function(){var t=this,r=t.labelOption,b=t.coordinate,D=t.type,et=b.type,Et=b.isTransposed,Lt=Object(a.get)(r,["cfg","type"]);return Lt||(et==="polar"?Lt=Et?"pie":"polar":et==="theta"?Lt="pie":D==="interval"||D==="polygon"?Lt="interval":Lt="base"),Lt},o.prototype.getYMinValue=function(){var t=this.getYScale(),r=t.min,b=t.max,D;return r>=0?D=r:b<=0?D=b:D=0,D},o.prototype.createAttrOption=function(t,r,b){if(Object(a.isNil)(r)||Object(a.isObject)(r))Object(a.isObject)(r)&&Object(a.isEqual)(Object.keys(r),["values"])?Object(a.set)(this.attributeOption,t,{fields:r.values}):Object(a.set)(this.attributeOption,t,r);else{var D={};Object(a.isNumber)(r)?D.values=[r]:D.fields=Ua(r),b&&(Object(a.isFunction)(b)?D.callback=b:D.values=b),Object(a.set)(this.attributeOption,t,D)}},o.prototype.initAttributes=function(){var t=this,r=this,b=r.attributes,D=r.attributeOption,et=r.theme,Et=r.shapeType;this.groupScales=[];var Lt={},ne=function(We){if(D.hasOwnProperty(We)){var an=D[We];if(!an)return{value:void 0};var gn=Object(at.a)({},an),Xn=gn.callback,Hn=gn.values,ir=gn.fields,cr=ir===void 0?[]:ir,Rr=cr.map(function(_r){var ki=t.scales[_r];return ki.isCategory&&!Lt[_r]&&j.includes(We)&&(t.groupScales.push(ki),Lt[_r]=!0),ki});gn.scales=Rr,We!=="position"&&Rr.length===1&&Rr[0].type==="identity"?gn.values=Rr[0].values:!Xn&&!Hn&&(We==="size"?gn.values=et.sizes:We==="shape"?gn.values=et.shapes[Et]||[]:We==="color"&&(Rr.length?gn.values=Rr[0].values.length<=10?et.colors10:et.colors20:gn.values=et.colors10));var zr=Ke(We);b[We]=new zr(gn)}};for(var ge in D){var be=ne(ge);if(typeof be=="object")return be.value}},o.prototype.processData=function(t){this.hasSorted=!1;for(var r=this.getAttribute("position").scales,b=r.filter(function(zr){return zr.isCategory}),D=this.groupData(t),et=[],Et=0,Lt=D.length;Et<Lt;Et++){for(var ne=D[Et],ge=[],be=0,Ae=ne.length;be<Ae;be++){var We=ne[be],an={};for(var gn in We)an[gn]=We[gn];an[y]=We;for(var Xn=0,Hn=b;Xn<Hn.length;Xn++){var ir=Hn[Xn],cr=ir.field;an[cr]=ir.translate(an[cr])}ge.push(an)}et.push(ge)}var Rr=this.adjustData(et);return this.beforeMappingData=Rr,Rr},o.prototype.adjustData=function(t){var r=this.adjustOption,b=this,D=b.intervalPadding,et=b.dodgePadding,Et=b.theme,Lt=this.maxColumnWidth||Et.maxColumnWidth,ne=this.minColumnWidth||Et.minColumnWidth,ge=this.columnWidthRatio||Et.columnWidthRatio,be=t;if(r){var Ae=this.getXScale(),We=this.getYScale(),an=Ae.field,gn=We?We.field:null,Xn=Yn(this.coordinate),Hn=Ae.values.length,ir=this.getAttribute("size"),cr=void 0;ir&&(cr=ir.values[0]);for(var Rr=0,zr=r.length;Rr<zr;Rr++){var _r=r[Rr],ki=Object(at.a)({xField:an,yField:gn,intervalPadding:D,dodgePadding:et,xDimensionLength:Xn,groupNum:Hn,defaultSize:cr,maxColumnWidth:Lt,minColumnWidth:ne,columnWidthRatio:ge},_r),Ai=_r.type;if(Ai==="dodge"){var mi=[];if(Ae.isCategory||Ae.type==="identity")mi.push("x");else if(!We)mi.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");ki.adjustNames=mi,ki.dodgeRatio=ge}else if(Ai==="stack"){var Ki=this.coordinate;if(!We){ki.height=Ki.getHeight();var vo=this.getDefaultValue("size")||3;ki.size=vo}!Ki.isTransposed&&Object(a.isNil)(ki.reverseOrder)&&(ki.reverseOrder=!0)}var po=Object(bt.getAdjust)(Ai),yo=new po(ki);be=yo.process(be),this.adjusts[Ai]=yo}}return be},o.prototype.groupData=function(t){for(var r=this.getGroupScales(),b=this.scaleDefs,D={},et=[],Et=0;Et<r.length;Et++){var Lt=r[Et],ne=Lt.field;et.push(ne),Object(a.get)(b,[ne,"values"])&&(D[ne]=b[ne].values)}return zs(t,et,D)},o.prototype.updateStackRange=function(t,r){for(var b=Object(a.flatten)(r),D=t.field,et=t.min,Et=t.max,Lt=0;Lt<b.length;Lt++){var ne=b[Lt],ge=Math.min.apply(null,ne[D]),be=Math.max.apply(null,ne[D]);ge<et&&(et=ge),be>Et&&(Et=be)}var Ae=this.scaleDefs,We={};et<t.min&&!Object(a.get)(Ae,[D,"min"])&&(We.min=et),Et>t.max&&!Object(a.get)(Ae,[D,"max"])&&(We.max=Et),t.change(We)},o.prototype.beforeMapping=function(t){var r=t;if(this.sortable&&this.sort(r),this.generatePoints)for(var b=0,D=r.length;b<D;b++){var et=r[b];this.generateShapePoints(et);var Et=r[b+1];Et&&(this.generateShapePoints(Et),et[0].nextPoints=Et[0].points)}return r},o.prototype.generateShapePoints=function(t){for(var r=this.getShapeFactory(),b=this.getAttribute("shape"),D=0;D<t.length;D++){var et=t[D],Et=this.createShapePointsCfg(et),Lt=b?this.getAttributeValues(b,et):null,ne=r.getShapePoints(Lt,Et);et.points=ne}},o.prototype.normalizeValues=function(t,r){var b=[];if(Object(a.isArray)(t))for(var D=0;D<t.length;D++){var et=t[D];b.push(r.scale(et))}else b=r.scale(t);return b},o.prototype.mapping=function(t){for(var r=this.attributes,b=[],D=0;D<t.length;D++){var et=t[D],Et={_origin:et[y],points:et.points,nextPoints:et.nextPoints};for(var Lt in r)if(r.hasOwnProperty(Lt)){var ne=r[Lt],ge=ne.names,be=this.getAttributeValues(ne,et);if(ge.length>1)for(var Ae=0;Ae<be.length;Ae+=1){var We=be[Ae],an=ge[Ae];Et[an]=Object(a.isArray)(We)&&We.length===1?We[0]:We}else Et[ge[0]]=be.length===1?be[0]:be}this.convertPoint(Et),b.push(Et)}return b},o.prototype.convertPoint=function(t){var r=t.x,b=t.y,D,et,Et,Lt=this.coordinate;if(Object(a.isArray)(r)&&Object(a.isArray)(b)){D=[],et=[];for(var ne=0,ge=0,be=r.length,Ae=b.length;ne<be&&ge<Ae;ne+=1,ge+=1)Et=Lt.convert({x:r[ne],y:b[ge]}),D.push(Et.x),et.push(Et.y)}else if(Object(a.isArray)(b)){et=[];for(var We=0;We<b.length;We++){var an=b[We];Et=Lt.convert({x:r,y:an}),D&&D!==Et.x?(Object(a.isArray)(D)||(D=[D]),D.push(Et.x)):D=Et.x,et.push(Et.y)}}else if(Object(a.isArray)(r)){D=[];for(var We=0;We<r.length;We++){var gn=r[We];Et=Lt.convert({x:gn,y:b}),et&&et!==Et.y?(Object(a.isArray)(et)||(et=[et]),et.push(Et.y)):et=Et.y,D.push(Et.x)}}else{var Xn=Lt.convert({x:r,y:b});D=Xn.x,et=Xn.y}t.x=D,t.y=et},o.prototype.getStyleCfg=function(t,r){var b=t.fields,D=b===void 0?[]:b,et=t.callback,Et=t.cfg;if(Et)return Et;var Lt=D.map(function(ne){return r[ne]});return et.apply(void 0,Lt)},o.prototype.setCfg=function(t){var r=this,b=t.coordinate,D=t.data,et=t.theme,Et=t.scaleDefs;b&&(this.coordinate=b),D&&(this.data=D),Et&&(this.scaleDefs=Et,this.idFields=[],Object(a.each)(Et,function(Lt,ne){Lt&&Lt.key&&r.idFields.push(ne)})),et&&(this.theme=this.userTheme?Object(a.deepMix)({},et,this.userTheme):et)},o.prototype.renderLabels=function(t,r){r===void 0&&(r=!1);var b=this.geometryLabel;if(!b){var D=this.getLabelType(),et=ys(D);b=new et(this),this.geometryLabel=b}b.render(t,r);var Et=b.labelsRenderer.shapesMap;Object(a.each)(this.elementsMap,function(Lt,ne){var ge=xu(ne,Et);if(ge.length){Lt.labelShape=ge;for(var be=0;be<ge.length;be++)for(var Ae=ge[be],We=Ae.getChildren(),an=0;an<We.length;an++){var gn=We[an];gn.cfg.name=["element","label"],gn.cfg.element=Lt}}})},o.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(Object(a.get)(this.animateOption,"appear")===void 0||Object(a.get)(this.animateOption,"appear")&&Object(a.get)(this.animateOption,["appear","animation"])===void 0)},o}(vt),la=Ou,rs=jr.a.transform;function Ca(c,o,t){var r=rs(c.getMatrix(),[["t",o,t]]);c.setMatrix(r)}function Vs(c,o){var t=c.attr(),r=t.x,b=t.y,D=rs(c.getMatrix(),[["t",-r,-b],["r",o],["t",r,b]]);return D}function kt(c,o){var t=Vs(c,o);c.setMatrix(t)}function f(){return[1,0,0,0,1,0,0,0,1]}function u(c,o){var t=c.getBBox(),r=(t.minX+t.maxX)/2,b=(t.minY+t.maxY)/2;c.applyToMatrix([r,b,1]);var D=rs(c.getMatrix(),[["t",-r,-b],["s",o,o],["t",r,b]]);c.setMatrix(D)}function I(c){return c.find(function(o){return o.get("type")==="text"})}function W(c,o,t){t===void 0&&(t=[0,0,0,0]);var r=c.getChildren()[0];if(r){var b=r.clone();(o==null?void 0:o.rotate)&&kt(b,-o.rotate);var D=b.getCanvasBBox(),et=D.x,Et=D.y,Lt=D.width,ne=D.height;b.destroy();var ge=t;return Object(a.isNil)(ge)?ge=[2,2,2,2]:Object(a.isNumber)(ge)&&(ge=new Array(4).fill(ge)),{x:et-ge[3],y:Et-ge[0],width:Lt+ge[1]+ge[3],height:ne+ge[0]+ge[2],rotation:(o==null?void 0:o.rotate)||0}}}function st(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*b}function Tt(c,o){var t=c.getBBox();return Object(a.some)(o,function(r){var b=r.getBBox();return st(t,b,2)>0})}function Ft(c,o,t){var r=t.data,b=t.origin,D=t.animateCfg,et=t.coordinate,Et=Object(a.get)(D,"update");c.set("data",r),c.set("origin",b),c.set("animateCfg",D),c.set("coordinate",et),c.set("visible",o.get("visible")),c.getChildren().forEach(function(Lt,ne){var ge=o.getChildByIndex(ne);if(!ge)c.removeChild(Lt),Lt.remove(!0);else{Lt.set("data",r),Lt.set("origin",b),Lt.set("animateCfg",D),Lt.set("coordinate",et);var be=xo(Lt,ge);Et?Ta(Lt,Et,{toAttrs:be,coordinate:et}):Lt.attr(be),ge.isGroup()&&Ft(Lt,ge,t)}}),Object(a.each)(o.getChildren(),function(Lt,ne){ne>=c.getCount()&&(Lt.destroyed||c.add(Lt))})}var Yt=function(){function c(o){this.shapesMap={},this.lastShapesMap={};var t=o.layout,r=o.container;this.layout=t,this.container=r}return c.prototype.render=function(o,t,r){var b=this;r===void 0&&(r=!1),this.shapesMap={};var D=this.container,et=this.createOffscreenGroup();if(o.length){for(var Et=0,Lt=o;Et<Lt.length;Et++){var ne=Lt[Et];ne&&this.renderLabel(ne,et)}this.doLayout(o,t),this.renderLabelLine(o),this.renderLabelBackground(o),this.adjustLabel(o)}var ge=this.lastShapesMap,be=this.shapesMap;Object(a.each)(be,function(Ae,We){if(Ae.destroyed)delete be[We];else{if(ge[We]){var an=Ae.get("data"),gn=Ae.get("origin"),Xn=Ae.get("coordinate"),Hn=Ae.get("animateCfg"),ir=ge[We];Ft(ir,be[We],{data:an,origin:gn,animateCfg:Hn,coordinate:Xn}),b.shapesMap[We]=ir}else{D.add(Ae);var cr=Object(a.get)(Ae.get("animateCfg"),r?"enter":"appear");cr&&Ta(Ae,cr,{toAttrs:Object(at.a)({},Ae.attr()),coordinate:Ae.get("coordinate")})}delete ge[We]}}),Object(a.each)(ge,function(Ae){var We=Object(a.get)(Ae.get("animateCfg"),"leave");We?Ta(Ae,We,{toAttrs:null,coordinate:Ae.get("coordinate")}):Ae.remove(!0)}),this.lastShapesMap=be,et.destroy()},c.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},c.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},c.prototype.renderLabel=function(o,t){var r=o.id,b=o.elementId,D=o.data,et=o.mappingData,Et=o.coordinate,Lt=o.animate,ne=o.content,ge={id:r,elementId:b,data:D,origin:Object(at.a)(Object(at.a)({},et),{data:et[y]}),coordinate:Et},be=t.addGroup(Object(at.a)({name:"label",animateCfg:this.animate===!1||Lt===null||Lt===!1?!1:Object(a.deepMix)({},this.animate,Lt)},ge)),Ae;if(ne.isGroup&&ne.isGroup()||ne.isShape&&ne.isShape()){var We=ne.getCanvasBBox(),an=We.width,gn=We.height,Xn=Object(a.get)(o,"textAlign","left"),Hn=o.x,ir=o.y-gn/2;Xn==="center"?Hn=Hn-an/2:(Xn==="right"||Xn==="end")&&(Hn=Hn-an),Ca(ne,Hn,ir),Ae=ne,be.add(ne)}else{var cr=Object(a.get)(o,["style","fill"]);Ae=be.addShape("text",Object(at.a)({attrs:Object(at.a)(Object(at.a)({x:o.x,y:o.y,textAlign:o.textAlign,textBaseline:Object(a.get)(o,"textBaseline","middle"),text:o.content},o.style),{fill:Object(a.isNull)(cr)?o.color:cr})},ge))}o.rotate&&kt(Ae,o.rotate),this.shapesMap[r]=be},c.prototype.doLayout=function(o,t){var r=this;if(this.layout){var b=Object(a.isArray)(this.layout)?this.layout:[this.layout];Object(a.each)(b,function(D){var et=_s(Object(a.get)(D,"type",""));if(et){var Et=[],Lt=[];Object(a.each)(r.shapesMap,function(ne,ge){Et.push(ne),Lt.push(t[ne.get("elementId")])}),et(o,Et,Lt,r.region,D.cfg)}})}},c.prototype.renderLabelLine=function(o){var t=this;Object(a.each)(o,function(r){var b=Object(a.get)(r,"coordinate");if(!(!r||!b)){var D=b.getCenter(),et=b.getRadius();if(!!r.labelLine){var Et=Object(a.get)(r,"labelLine",{}),Lt=r.id,ne=Et.path;if(!ne){var ge=Pi(D.x,D.y,et,r.angle);ne=[["M",ge.x,ge.y],["L",r.x,r.y]]}var be=t.shapesMap[Lt];be.destroyed||be.addShape("path",{capture:!1,attrs:Object(at.a)({path:ne,stroke:r.color?r.color:Object(a.get)(r,["style","fill"],"#000"),fill:null},Et.style),id:Lt,origin:r.mappingData,data:r.data,coordinate:r.coordinate})}}})},c.prototype.renderLabelBackground=function(o){var t=this;Object(a.each)(o,function(r){var b=Object(a.get)(r,"coordinate"),D=Object(a.get)(r,"background");if(!(!D||!b)){var et=r.id,Et=t.shapesMap[et];if(!Et.destroyed){var Lt=Et.getChildren()[0];if(Lt){var ne=W(Et,r,D.padding),ge=ne.rotation,be=Object(at.c)(ne,["rotation"]),Ae=Et.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},be),D.style||{}),id:et,origin:r.mappingData,data:r.data,coordinate:r.coordinate});if(Ae.setZIndex(-1),ge){var We=Lt.getMatrix();Ae.setMatrix(We)}}}}})},c.prototype.createOffscreenGroup=function(){var o=this.container,t=o.getGroupBase(),r=new t({});return r},c.prototype.adjustLabel=function(o){var t=this;Object(a.each)(o,function(r){if(r){var b=r.id,D=t.shapesMap[b];if(!D.destroyed){var et=D.findAll(function(Et){return Et.get("type")!=="path"});Object(a.each)(et,function(Et){Et&&(r.offsetX&&Et.attr("x",Et.attr("x")+r.offsetX),r.offsetY&&Et.attr("y",Et.attr("y")+r.offsetY))})}}})},c}(),ee=Yt;function ae(c){var o=0;return Object(a.each)(c,function(t){o+=t}),o/c.length}var je=function(){function c(o){this.geometry=o}return c.prototype.getLabelItems=function(o){var t=this,r=[],b=this.getLabelCfgs(o);return Object(a.each)(o,function(D,et){var Et=b[et];if(!Et||Object(a.isNil)(D.x)||Object(a.isNil)(D.y)){r.push(null);return}var Lt=Object(a.isArray)(Et.content)?Et.content:[Et.content];Et.content=Lt;var ne=Lt.length;Object(a.each)(Lt,function(ge,be){if(Object(a.isNil)(ge)||ge===""){r.push(null);return}var Ae=Object(at.a)(Object(at.a)({},Et),t.getLabelPoint(Et,D,be));Ae.textAlign||(Ae.textAlign=t.getLabelAlign(Ae,be,ne)),Ae.offset<=0&&(Ae.labelLine=null),r.push(Ae)})}),r},c.prototype.render=function(o,t){t===void 0&&(t=!1);var r=this.getLabelItems(o),b=this.getLabelsRenderer(),D=this.getGeometryShapes();b.render(r,D,t)},c.prototype.clear=function(){var o=this.labelsRenderer;o&&o.clear()},c.prototype.destroy=function(){var o=this.labelsRenderer;o&&o.destroy(),this.labelsRenderer=null},c.prototype.getCoordinate=function(){return this.geometry.coordinate},c.prototype.getDefaultLabelCfg=function(o,t){var r=this.geometry,b=r.type,D=r.theme;return b==="polygon"||b==="interval"&&t==="middle"||o<0&&!["line","point","path"].includes(b)?Object(a.get)(D,"innerLabels",{}):Object(a.get)(D,"labels",{})},c.prototype.getThemedLabelCfg=function(o){var t=this.geometry,r=this.getDefaultLabelCfg(),b=t.type,D=t.theme,et;return b==="polygon"||o.offset<0&&!["line","point","path"].includes(b)?et=Object(a.deepMix)({},r,D.innerLabels,o):et=Object(a.deepMix)({},r,D.labels,o),et},c.prototype.setLabelPosition=function(o,t,r,b){},c.prototype.getLabelOffset=function(o){var t=this.getCoordinate(),r=this.getOffsetVector(o);return t.isTransposed?r[0]:r[1]},c.prototype.getLabelOffsetPoint=function(o,t,r){var b=o.offset,D=this.getCoordinate(),et=D.isTransposed,Et=et?"x":"y",Lt=et?1:-1,ne={x:0,y:0};return t>0||r===1?ne[Et]=b*Lt:ne[Et]=b*Lt*-1,ne},c.prototype.getLabelPoint=function(o,t,r){var b=this.getCoordinate(),D=o.content.length;function et(Xn,Hn,ir){ir===void 0&&(ir=!1);var cr=Xn;return Object(a.isArray)(cr)&&(o.content.length===1?ir?cr=ae(cr):cr.length<=2?cr=cr[Xn.length-1]:cr=ae(cr):cr=cr[Hn]),cr}var Et={content:o.content[r],x:0,y:0,start:{x:0,y:0},color:"#fff"},Lt=Object(a.isArray)(t.shape)?t.shape[0]:t.shape,ne=Lt==="funnel"||Lt==="pyramid";if(this.geometry.type==="polygon"){var ge=uo(t.x,t.y);Et.x=ge[0],Et.y=ge[1]}else this.geometry.type==="interval"&&!ne?(Et.x=et(t.x,r,!0),Et.y=et(t.y,r)):(Et.x=et(t.x,r),Et.y=et(t.y,r));if(ne){var be=Object(a.get)(t,"nextPoints"),Ae=Object(a.get)(t,"points");if(be){var We=b.convert(Ae[1]),an=b.convert(be[1]);Et.x=(We.x+an.x)/2,Et.y=(We.y+an.y)/2}else if(Lt==="pyramid"){var We=b.convert(Ae[1]),an=b.convert(Ae[2]);Et.x=(We.x+an.x)/2,Et.y=(We.y+an.y)/2}}o.position&&this.setLabelPosition(Et,t,r,o.position);var gn=this.getLabelOffsetPoint(o,r,D);return Et.start={x:Et.x,y:Et.y},Et.x+=gn.x,Et.y+=gn.y,Et.color=t.color,Et},c.prototype.getLabelAlign=function(o,t,r){var b="center",D=this.getCoordinate();if(D.isTransposed){var et=o.offset;et<0?b="right":et===0?b="center":b="left",r>1&&t===0&&(b==="right"?b="left":b==="left"&&(b="right"))}return b},c.prototype.getLabelId=function(o){var t=this.geometry,r=t.type,b=t.getXScale(),D=t.getYScale(),et=o[y],Et=t.getElementId(o);return r==="line"||r==="area"?Et+=" "+et[b.field]:r==="path"&&(Et+=" "+et[b.field]+"-"+et[D.field]),Et},c.prototype.getLabelsRenderer=function(){var o=this.geometry,t=o.labelsContainer,r=o.labelOption,b=o.canvasRegion,D=o.animateOption,et=this.geometry.coordinate,Et=this.labelsRenderer;return Et||(Et=new ee({container:t,layout:Object(a.get)(r,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=Et),Et.region=b,Et.animate=D?fe("label",et):!1,Et},c.prototype.getLabelCfgs=function(o){var t=this,r=this.geometry,b=r.labelOption,D=r.scales,et=r.coordinate,Et=b,Lt=Et.fields,ne=Et.callback,ge=Et.cfg,be=Lt.map(function(We){return D[We]}),Ae=[];return Object(a.each)(o,function(We,an){var gn=We[y],Xn=t.getLabelText(gn,be),Hn;if(ne){var ir=Lt.map(function(ki){return gn[ki]});if(Hn=ne.apply(void 0,ir),Object(a.isNil)(Hn)){Ae.push(null);return}}var cr=Object(at.a)(Object(at.a)({id:t.getLabelId(We),elementId:t.geometry.getElementId(We),data:gn,mappingData:We,coordinate:et},ge),Hn);Object(a.isFunction)(cr.position)&&(cr.position=cr.position(gn,We,an));var Rr=t.getLabelOffset(cr.offset||0),zr=t.getDefaultLabelCfg(Rr,cr.position);cr=Object(a.deepMix)({},zr,cr),cr.offset=t.getLabelOffset(cr.offset||0);var _r=cr.content;Object(a.isFunction)(_r)?cr.content=_r(gn,We,an):Object(a.isUndefined)(_r)&&(cr.content=Xn[0]),Ae.push(cr)}),Ae},c.prototype.getLabelText=function(o,t){var r=[];return Object(a.each)(t,function(b){var D=o[b.field];Object(a.isArray)(D)?D=D.map(function(et){return b.getText(et)}):D=b.getText(D),Object(a.isNil)(D)||D===""?r.push(null):r.push(D)}),r},c.prototype.getOffsetVector=function(o){o===void 0&&(o=0);var t=this.getCoordinate(),r=0;return Object(a.isNumber)(o)&&(r=o),t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},c.prototype.getGeometryShapes=function(){var o=this.geometry,t={};return Object(a.each)(o.elementsMap,function(r,b){t[b]=r.shape}),Object(a.each)(o.getOffscreenGroup().getChildren(),function(r){var b=o.getElementId(r.get("origin").mappingData);t[b]=r}),t},c}(),Fe=je,Ue=_("WXeg");function He(c,o,t){if(!c)return t;var r;if(c.callback&&c.callback.length>1){var b=Array(c.callback.length-1).fill("");r=c.mapping.apply(c,Object(at.d)([o],b)).join("")}else r=c.mapping(o).join("");return r||t}var bn={hexagon:function(o,t,r){var b=r/2*Math.sqrt(3);return[["M",o,t-r],["L",o+b,t-r/2],["L",o+b,t+r/2],["L",o,t+r],["L",o-b,t+r/2],["L",o-b,t-r/2],["Z"]]},bowtie:function(o,t,r){var b=r-1.5;return[["M",o-r,t-b],["L",o+r,t+b],["L",o+r,t-b],["L",o-r,t+b],["Z"]]},cross:function(o,t,r){return[["M",o-r,t-r],["L",o+r,t+r],["M",o+r,t-r],["L",o-r,t+r]]},tick:function(o,t,r){return[["M",o-r/2,t-r],["L",o+r/2,t-r],["M",o,t-r],["L",o,t+r],["M",o-r/2,t+r],["L",o+r/2,t+r]]},plus:function(o,t,r){return[["M",o-r,t],["L",o+r,t],["M",o,t-r],["L",o,t+r]]},hyphen:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},line:function(o,t,r){return[["M",o,t-r],["L",o,t+r]]}},wn=["line","cross","tick","plus","hyphen"];function Nn(c,o){var t=c.symbol;Object(a.isString)(t)&&wn.indexOf(t)!==-1&&(c.style=Object(a.deepMix)({},c.style,{lineWidth:1,stroke:o,fill:null}))}function Bn(c){var o=c.symbol;Object(a.isString)(o)&&bn[o]&&(c.symbol=bn[o])}function Fn(c){return c.startsWith(e.LEFT)||c.startsWith(e.RIGHT)?"vertical":"horizontal"}function sr(c,o,t,r,b){var D=t.getScale(t.type);if(D.isCategory){var et=D.field,Et=o.getAttribute("color"),Lt=o.getAttribute("shape"),ne=c.getTheme().defaultColor,ge=o.coordinate.isPolar;return D.getTicks().map(function(be){var Ae,We=be.text,an=be.value,gn=We,Xn=D.invert(an),Hn=c.filterFieldData(et,[(Ae={},Ae[et]=Xn,Ae)]).length===0;Object(a.each)(c.views,function(zr){var _r;zr.filterFieldData(et,[(_r={},_r[et]=Xn,_r)]).length||(Hn=!0)});var ir=He(Et,Xn,ne),cr=He(Lt,Xn,"point"),Rr=o.getShapeMarker(cr,{color:ir,isInPolar:ge});return Rr=Object(a.deepMix)({},r,Rr,b),Nn(Rr,ir),Bn(Rr),{id:Xn,name:gn,value:Xn,marker:Rr,unchecked:Hn}})}return[]}function ur(c,o,t){return t.map(function(r){var b=Object(a.deepMix)({},c,o,r.marker);return Bn(b),r.marker=b,r})}var Or="4.1.9",ei={getLegendItems:sr,translate:Ca,rotate:kt,zoom:u,transform:rs,getAngle:ao,getSectorPath:no,polarToCartesian:Pi,getDelegationObject:Zt,getTooltipItems:ia},Ti={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},kr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},yi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],oo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],so=function(o){o===void 0&&(o={});var t=o.backgroundColor,r=t===void 0?"#141414":t,b=o.paletteQualitative10,D=b===void 0?yi:b,et=o.paletteQualitative20,Et=et===void 0?oo:et,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Xn=o.brandColor,Hn=Xn===void 0?D[0]:Xn;return{backgroundColor:r,brandColor:Hn,paletteQualitative10:D,paletteQualitative20:Et,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:kr[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:kr[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:kr[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:kr[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:kr[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:kr[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:kr[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:yi[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:kr[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:kr[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:kr[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ti[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ti[25],annotationArcBorderColor:kr[15],annotationArcBorder:1,annotationLineBorderColor:kr[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:kr[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:kr[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:kr[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:kr[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:kr[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ti[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:kr[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ti[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:kr[25],pointFillColor:yi[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ti[100],pointBorderOpacity:1,pointActiveBorderColor:kr[100],pointSelectedBorder:2,pointSelectedBorderColor:kr[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:yi[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ti[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:kr[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:kr[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:yi[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:yi[0],areaFillOpacity:.25,areaActiveFillColor:yi[0],areaActiveFillOpacity:.5,areaSelectedFillColor:yi[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:yi[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:kr[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:kr[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:yi[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:kr[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:kr[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:yi[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ti[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:kr[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:kr[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},co=so(),lo=_("U8jP"),Hi=_("v7Ed");function Io(c){return c?!1:c==null||isNaN(c)}function ko(c){if(Object(a.isArray)(c))return Io(c[1].y);var o=c.y;return Object(a.isArray)(o)?Io(o[0]):Io(o)}function Ro(c,o,t){if(o===void 0&&(o=!1),t===void 0&&(t=!0),!c.length||c.length===1&&!t)return[];if(o){for(var r=[],b=0,D=c.length;b<D;b++){var et=c[b];ko(et)||r.push(et)}return[r]}for(var Et=[],Lt=[],b=0,D=c.length;b<D;b++){var et=c[b];ko(et)?Lt.length&&(Lt.length===1&&!t||Et.push(Lt),Lt=[]):Lt.push(et)}return Lt.length&&Et.push(Lt),Et}function bo(c,o,t,r){r===void 0&&(r="");var b=c.style,D=b===void 0?{}:b,et=c.defaultStyle,Et=c.color,Lt=c.size,ne=Object(at.a)(Object(at.a)({},et),D);return Et&&(o&&(D.stroke||(ne.stroke=Et)),t&&(D.fill||(ne.fill=Et))),r&&Object(a.isNil)(D[r])&&!Object(a.isNil)(Lt)&&(ne[r]=Lt),ne}function jo(c){return Object(a.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},Object(a.get)(c,["background","style"]))}function ho(c){var o=c.x,t=Object(a.isArray)(c.y)?c.y:[c.y];return t.map(function(r,b){return{x:Object(a.isArray)(o)?o[b]:o,y:r}})}var fa={line:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},dot:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},dash:function(o,t,r){return[["M",o-r,t],["L",o+r,t]]},smooth:function(o,t,r){return[["M",o-r,t],["A",r/2,r/2,0,1,1,o,t],["A",r/2,r/2,0,1,0,o+r,t]]},hv:function(o,t,r){return[["M",o-r-1,t-2.5],["L",o,t-2.5],["L",o,t+2.5],["L",o+r+1,t+2.5]]},vh:function(o,t,r){return[["M",o-r-1,t+2.5],["L",o,t+2.5],["L",o,t-2.5],["L",o+r+1,t-2.5]]},hvh:function(o,t,r){return[["M",o-(r+1),t+2.5],["L",o-r/2,t+2.5],["L",o-r/2,t-2.5],["L",o+r/2,t-2.5],["L",o+r/2,t+2.5],["L",o+r+1,t+2.5]]},vhv:function(o,t){return[["M",o-5,t+2.5],["L",o-5,t],["L",o,t],["L",o,t-3],["L",o,t+3],["L",o+6.5,t+3]]}};function Zo(c,o){var t=c.color;return{symbol:fa[o],style:{lineWidth:2,r:6,stroke:t}}}function Hc(c,o,t){for(var r=c.isStack,b=c.connectNulls,D=c.isInCircle,et=c.showSinglePoint,Et=bo(c,!0,!1,"lineWidth"),Lt=Ro(c.points,b,et),ne=[],ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ne.concat(Jc(Ae,D,r,o,t,Et))}return Et.path=ne,Et}function Su(c,o,t,r,b){if(c.length===1)return[["M",c[0].x,c[0].y-b.lineWidth/2],["L",c[0].x,c[0].y],["L",c[0].x,c[0].y+b.lineWidth/2]];var D;return t?(o&&c.length&&c.push({x:c[0].x,y:c[0].y}),D=Un(c,!1,r)):(D=zn(c,!1),o&&D.push(["Z"])),D}function Kc(c,o,t,r,b,D){var et=[],Et=[];Object(a.each)(c,function(ge){var be=ho(ge);et.push(be[1]),Et.push(be[0])});var Lt=Su(et,o,r,b,D),ne=Su(Et,o,r,b,D);return t?Lt:Lt.concat(ne)}function Jc(c,o,t,r,b,D){if(c.length){var et=c[0];return Object(a.isArray)(et.y)?Kc(c,o,t,r,b,D):Su(c,o,r,b,D)}return[]}var Qc=oa("line",{defaultShapeType:"line"});Object(a.each)(["line","dot","dash","smooth"],function(c){fo("line",c,{draw:function(t,r){var b=c==="smooth",D;if(b){var et=this.coordinate,Et=et.start,Lt=et.end;D=[[Et.x,Lt.y],[Lt.x,Et.y]]}var ne=Hc(t,b,D),ge=r.addShape({type:"path",attrs:ne,name:"line",capture:!b});return ge},getMarker:function(t){return Zo(t,c)}})});var mh=Qc,Zc=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="path",r.shapeType="line";var b=t.connectNulls,D=b===void 0?!1:b,et=t.showSinglePoint,Et=et===void 0?!0:et;return r.connectNulls=D,r.showSinglePoint=Et,r}return o.prototype.createElements=function(t,r,b){b===void 0&&(b=!1);var D=this,et=D.lastElementsMap,Et=D.elementsMap,Lt=D.elements,ne=D.container,ge=this.getElementId(t),be=this.getShapeInfo(t),Ae=et[ge];if(Ae){var an=Ae.getModel();(this.isCoordinateChanged||Ga(an,be))&&(Ae.animate=this.animateOption,Ae.update(be)),delete et[ge]}else{var We=this.getShapeFactory();Ae=new ca({shapeFactory:We,container:ne,offscreenGroup:this.getOffscreenGroup()}),Ae.geometry=this,Ae.animate=this.animateOption,Ae.draw(be,b)}return Lt.push(Ae),Et[ge]=Ae,Lt},o.prototype.getPointsAndData=function(t){for(var r=[],b=[],D=0,et=t.length;D<et;D++){var Et=t[D];r.push({x:Et.x,y:Et.y}),b.push(Et[y])}return{points:r,data:b}},o.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]),b=this.getPointsAndData(t),D=b.points,et=b.data;return r.mappingData=t,r.data=et,r.isStack=!!this.getAdjust("stack"),r.points=D,r.connectNulls=this.connectNulls,r.showSinglePoint=this.showSinglePoint,r},o}(la),wu=Zc;function $c(c,o,t,r,b){var D=[];if(c.length){for(var et=[],Et=[],Lt=0,ne=c.length;Lt<ne;Lt++){var ge=c[Lt];et.push(ge[1]),Et.push(ge[0])}Et=Et.reverse(),Object(a.each)([et,Et],function(be,Ae){var We=[],an=r.parsePoints(be),gn=an[0];et.length===1&&Et.length===1?We=Ae===0?[["M",gn.x-.5,gn.y],["L",gn.x+.5,gn.y]]:[["L",gn.x+.5,gn.y],["L",gn.x-.5,gn.y]]:(o&&an.push({x:gn.x,y:gn.y}),t?We=Un(an,!1,b):We=zn(an,!1),Ae>0&&(We[0][0]="L")),D=D.concat(We)}),D.push(["Z"])}return D}function Eu(c,o,t,r,b){for(var D=bo(c,o,!o,"lineWidth"),et=c.connectNulls,Et=c.isInCircle,Lt=c.points,ne=c.showSinglePoint,ge=Ro(Lt,et,ne),be=[],Ae=0,We=ge.length;Ae<We;Ae++){var an=ge[Ae];be=be.concat($c(an,Et,t,r,b))}return D.path=be,D}function Ws(c){var o=c.start,t=c.end;return[[o.x,t.y],[t.x,o.y]]}var qc=oa("area",{defaultShapeType:"area",getDefaultPoints:function(o){var t=o.x,r=o.y0,b=Object(a.isArray)(o.y)?o.y:[r,o.y];return b.map(function(D){return{x:t,y:D}})}});fo("area","area",{draw:function(o,t){var r=Eu(o,!1,!1,this),b=t.addShape({type:"path",attrs:r,name:"area"});return b},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return et===void 0&&(et=5.5),[["M",b-et,D-4],["L",b+et,D-4],["L",b+et,D+4],["L",b-et,D+4],["Z"]]},style:{r:5,fill:t}}}});var bh=qc,tl=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="area",r.shapeType="area",r.generatePoints=!0,r.startOnZero=!0;var b=t.startOnZero,D=b===void 0?!0:b,et=t.sortable,Et=et===void 0?!1:et,Lt=t.showSinglePoint,ne=Lt===void 0?!1:Lt;return r.startOnZero=D,r.sortable=Et,r.showSinglePoint=ne,r}return o.prototype.getPointsAndData=function(t){for(var r=[],b=[],D=0,et=t.length;D<et;D++){var Et=t[D];r.push(Et.points),b.push(Et[y])}return{points:r,data:b}},o.prototype.getYMinValue=function(){if(this.startOnZero)return c.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},o}(wu),el=tl,nl=oa("edge",{defaultShapeType:"line",getDefaultPoints:function(o){return ho(o)}});fo("edge","line",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),b=zn(this.parsePoints(o.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var oc=nl,rl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return o}(la),il=rl,ol=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return o.prototype.createElements=function(t,r,b){b===void 0&&(b=!1);var D=this.prepareRange(t),et=this.prepareSize(),Et=Object(a.get)(this.styleOption,["style","shadowBlur"]);return Object(a.isNumber)(Et)||(Et=et/2),this.prepareGreyScaleBlurredCircle(et,Et),this.drawWithRange(t,D,et,Et),null},o.prototype.clear=function(){c.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},o.prototype.prepareRange=function(t){var r=this.getAttribute("color"),b=r.getFields()[0],D=Infinity,et=-Infinity;return t.forEach(function(Et){var Lt=Et[y][b];Lt>et&&(et=Lt),Lt<D&&(D=Lt)}),D===et&&(D=et-1),[D,et]},o.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return Object(a.isNumber)(t)||(t=this.getDefaultSize()),t},o.prototype.prepareGreyScaleBlurredCircle=function(t,r){var b=this.getGrayScaleBlurredCanvas(),D=t+r,et=b.getContext("2d");b.width=b.height=D*2,et.clearRect(0,0,b.width,b.height),et.shadowOffsetX=et.shadowOffsetY=D*2,et.shadowBlur=r,et.shadowColor="black",et.beginPath(),et.arc(-D,-D,t,0,Math.PI*2,!0),et.closePath(),et.fill()},o.prototype.drawWithRange=function(t,r,b,D){var et=this.coordinate,Et=et.start,Lt=et.end,ne=this.coordinate.getWidth(),ge=this.coordinate.getHeight(),be=this.getAttribute("color"),Ae=be.getFields()[0];this.clearShadowCanvasCtx();var We=this.getShadowCanvasCtx();r&&(t=t.filter(function(Ai){return Ai[y][Ae]<=r[1]&&Ai[y][Ae]>=r[0]}));for(var an=this.scales[Ae],gn=0,Xn=t;gn<Xn.length;gn++){var Hn=Xn[gn],ir=this.getDrawCfg(Hn),cr=ir.x,Rr=ir.y,zr=an.scale(Hn[y][Ae]);this.drawGrayScaleBlurredCircle(cr-Et.x,Rr-Lt.y,b+D,zr,We)}var _r=We.getImageData(0,0,ne,ge);this.clearShadowCanvasCtx(),this.colorize(_r),We.putImageData(_r,0,0);var ki=this.getImageShape();ki.attr("x",Et.x),ki.attr("y",Lt.y),ki.attr("width",ne),ki.attr("height",ge),ki.attr("img",We.canvas),ki.set("origin",this.getShapeInfo(t))},o.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),r=this.coordinate;return Math.min(r.getWidth()/(t.scales[0].ticks.length*4),r.getHeight()/(t.scales[1].ticks.length*4))},o.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},o.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},o.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},o.prototype.drawGrayScaleBlurredCircle=function(t,r,b,D,et){var Et=this.getGrayScaleBlurredCanvas();et.globalAlpha=D,et.drawImage(Et,t-b,r-b)},o.prototype.colorize=function(t){for(var r=this.getAttribute("color"),b=t.data,D=this.paletteCache,et=3;et<b.length;et+=4){var Et=b[et];if(Object(a.isNumber)(Et)){var Lt=D[Et]?D[Et]:mt.a.rgb2arr(r.gradient(Et/256));b[et-3]=Lt[0],b[et-2]=Lt[1],b[et-1]=Lt[2],b[et]=Et}}},o.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var r=this.container;return t=r.addShape({type:"image",attrs:{}}),this.imageShape=t,t},o.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]);return Object(at.a)(Object(at.a)({},r),{mappingData:t,data:this.getData(t)})},o.prototype.getData=function(t){return t.map(function(r){return r[y]})},o}(la),al=ol;function Mu(c,o){o===void 0&&(o=!1);var t=c.x,r=c.y,b=c.y0,D=c.size,et,Et;Object(a.isArray)(r)?(et=r[0],Et=r[1]):(et=b,Et=r);var Lt,ne;Object(a.isArray)(t)?(Lt=t[0],ne=t[1]):(Lt=t-D/2,ne=t+D/2);var ge=[{x:Lt,y:et},{x:Lt,y:Et}];return o?ge.push({x:ne,y:(Et+et)/2}):ge.push({x:ne,y:Et},{x:ne,y:et}),ge}function Au(c,o){o===void 0&&(o=!0);var t=[],r=c[0];t.push(["M",r.x,r.y]);for(var b=1,D=c.length;b<D;b++)t.push(["L",c[b].x,c[b].y]);return o&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}function xs(c,o){var t=0,r=0,b=0,D=0;return Object(a.isArray)(c)?c.length===1?t=r=b=D=c[0]:c.length===2?(t=b=c[0],r=D=c[1]):c.length===3?(t=c[0],r=D=c[1],b=c[2]):(t=c[0],r=c[1],b=c[2],D=c[3]):t=r=b=D=c,t+r>o&&(t=t?o/(1+r/t):0,r=o-t),b+D>o&&(b=b?o/(1+D/b):0,D=o-b),[t||0,r||0,b||0,D||0]}function ac(c,o,t){var r=[];if(t.isRect){var b=t.isTransposed?{x:t.start.x,y:o[0].y}:{x:o[0].x,y:t.start.y},D=t.isTransposed?{x:t.end.x,y:o[2].y}:{x:o[3].x,y:t.end.y},et=Object(a.get)(c,["background","style","radius"]);if(et){var Et=t.isTransposed?Math.abs(o[0].y-o[2].y):o[2].x-o[1].x,Lt=t.isTransposed?t.getWidth():t.getHeight(),ne=xs(et,Math.min(Et,Lt)),ge=ne[0],be=ne[1],Ae=ne[2],We=ne[3];r.push(["M",b.x,D.y+ge]),ge!==0&&r.push(["A",ge,ge,0,0,1,b.x+ge,D.y]),r.push(["L",D.x-be,D.y]),be!==0&&r.push(["A",be,be,0,0,1,D.x,D.y+be]),r.push(["L",D.x,b.y-Ae]),Ae!==0&&r.push(["A",Ae,Ae,0,0,1,D.x-Ae,b.y]),r.push(["L",b.x+We,b.y]),We!==0&&r.push(["A",We,We,0,0,1,b.x,b.y-We])}else r.push(["M",b.x,b.y]),r.push(["L",D.x,b.y]),r.push(["L",D.x,D.y]),r.push(["L",b.x,D.y]),r.push(["L",b.x,b.y]);r.push(["z"])}if(t.isPolar){var an=t.getCenter(),gn=ao(c,t),Xn=gn.startAngle,Hn=gn.endAngle;if(t.type!=="theta"&&!t.isTransposed)r=no(an.x,an.y,t.getRadius(),Xn,Hn);else{var ir=function(_r){return Math.pow(_r,2)},ge=Math.sqrt(ir(an.x-o[0].x)+ir(an.y-o[0].y)),be=Math.sqrt(ir(an.x-o[2].x)+ir(an.y-o[2].y));r=no(an.x,an.y,ge,t.startAngle,t.endAngle,be)}}return r}function sl(c,o,t){var r=t.getWidth(),b=t.getHeight(),D=t.type==="rect",et=[],Et=(c[2].x-c[1].x)/2,Lt=t.isTransposed?Et*b/r:Et*r/b;return o==="round"?(D?(et.push(["M",c[0].x,c[0].y+Lt]),et.push(["L",c[1].x,c[1].y-Lt]),et.push(["A",Et,Et,0,0,1,c[2].x,c[2].y-Lt]),et.push(["L",c[3].x,c[3].y+Lt]),et.push(["A",Et,Et,0,0,1,c[0].x,c[0].y+Lt])):(et.push(["M",c[0].x,c[0].y]),et.push(["L",c[1].x,c[1].y]),et.push(["A",Et,Et,0,0,1,c[2].x,c[2].y]),et.push(["L",c[3].x,c[3].y]),et.push(["A",Et,Et,0,0,1,c[0].x,c[0].y])),et.push(["z"])):et=Au(c),et}function sc(c,o,t){var r=[];return Object(a.isNil)(o)?t?r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[2].x,c[2].y],["Z"]):r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[3].x,c[3].y],["Z"]):r.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",o[1].x,o[1].y],["L",o[0].x,o[0].y],["Z"]),r}function Os(c,o,t){var r,b,D,et,Et=c[0],Lt=c[1],ne=c[2],ge=c[3],be=[0,0,0,0],Ae=be[0],We=be[1],an=be[2],gn=be[3];Et.y<Lt.y?(Lt=c[0],Et=c[1],ge=c[2],ne=c[3],r=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),gn=r[0],an=r[1],We=r[2],Ae=r[3]):(b=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),Ae=b[0],We=b[1],an=b[2],gn=b[3]),o.isTransposed&&(Et=c[0],ge=c[1],ne=c[2],Lt=c[3],c[0].x>c[1].x?(ge=c[0],Et=c[1],Lt=c[2],ne=c[3],D=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),Ae=D[0],gn=D[1],an=D[2],We=D[3]):(et=xs(t,Math.min(ge.x-Et.x,Et.y-Lt.y)),We=et[0],an=et[1],gn=et[2],Ae=et[3]));var Xn=[];return Xn.push(["M",Lt.x,Lt.y+Ae]),Ae!==0&&Xn.push(["A",Ae,Ae,0,0,1,Lt.x+Ae,Lt.y]),Xn.push(["L",ne.x-We,ne.y]),We!==0&&Xn.push(["A",We,We,0,0,1,ne.x,ne.y+We]),Xn.push(["L",ge.x,ge.y-an]),an!==0&&Xn.push(["A",an,an,0,0,1,ge.x-an,ge.y]),Xn.push(["L",Et.x+gn,Et.y]),gn!==0&&Xn.push(["A",gn,gn,0,0,1,Et.x,Et.y-gn]),Xn.push(["L",Lt.x,Lt.y+Ae]),Xn.push(["z"]),Xn}var ul=oa("interval",{defaultShapeType:"rect",getDefaultPoints:function(o){return Mu(o)}});fo("interval","rect",{draw:function(o,t){var r=bo(o,!1,!0),b=t,D=o==null?void 0:o.background;if(D){b=t.addGroup();var et=jo(o),Et=ac(o,this.parsePoints(o.points),this.coordinate);b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},et),{path:Et}),zIndex:-1,name:ns})}var Lt;r.radius&&this.coordinate.isRect?Lt=Os(this.parsePoints(o.points),this.coordinate,r.radius):Lt=this.parsePath(sl(o.points,r.lineCap,this.coordinate));var ne=b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:Lt}),name:"interval"});return D?b:ne},getMarker:function(o){var t=o.color,r=o.isInPolar;return r?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var xh=ul;function cl(c,o){var t=c.length,r=c;Object(a.isString)(r[0])&&(r=c.map(function(Et){return o.translate(Et)}));for(var b=r[1]-r[0],D=2;D<t;D++){var et=r[D]-r[D-1];b>et&&(b=et)}return b}function ll(c,o){if(o){var t=Object(a.flatten)(c),r=Object(a.valuesOfKey)(t,o);return r.length}return c.length}function uc(c){var o=c.theme,t=c.coordinate,r=c.getXScale(),b=r.values,D=c.beforeMappingData,et=b.length,Et=Yn(c.coordinate),Lt=c.intervalPadding,ne=c.dodgePadding,ge=c.maxColumnWidth||o.maxColumnWidth,be=c.minColumnWidth||o.minColumnWidth,Ae=c.columnWidthRatio||o.columnWidthRatio,We=c.multiplePieWidthRatio||o.multiplePieWidthRatio,an=c.roseWidthRatio||o.roseWidthRatio;if(r.isLinear&&b.length>1){b.sort();var gn=cl(b,r);et=(r.max-r.min)/gn,b.length>et&&(et=b.length)}var Xn=r.range,Hn=1/et,ir=1;if(t.isPolar?t.isTransposed&&et>1?ir=We:ir=an:(r.isLinear&&(Hn*=Xn[1]-Xn[0]),ir=Ae),!Object(a.isNil)(Lt)&&Lt>=0){var cr=Lt/Et;Hn=(1-(et-1)*cr)/et}else Hn*=ir;if(c.getAdjust("dodge")){var Rr=c.getAdjust("dodge"),zr=Rr.dodgeBy,_r=ll(D,zr);if(!Object(a.isNil)(ne)&&ne>=0){var ki=ne/Et;Hn=(Hn-ki*(_r-1))/_r}else!Object(a.isNil)(Lt)&&Lt>=0&&(Hn*=ir),Hn=Hn/_r;Hn=Hn>=0?Hn:0}if(!Object(a.isNil)(ge)&&ge>=0){var Ai=ge/Et;Hn>Ai&&(Hn=Ai)}if(!Object(a.isNil)(be)&&be>=0){var mi=be/Et;Hn<mi&&(Hn=mi)}return Hn}var fl=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="interval",r.shapeType="interval",r.generatePoints=!0;var b=t.background;return r.background=b,r}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),b,D=this.getAttribute("size");if(D){b=this.getAttributeValues(D,t)[0];var et=this.coordinate,Et=Yn(et);b=b/Et}else this.defaultSize||(this.defaultSize=uc(this)),b=this.defaultSize;return r.size=b,r},o.prototype.adjustScale=function(){c.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var r=this.scaleDefs,b=t.field,D=t.min,et=t.max,Et=t.type;Et!=="time"&&(D>0&&!Object(a.get)(r,[b,"min"])&&t.change({min:0}),et<=0&&!Object(a.get)(r,[b,"max"])&&t.change({max:0}))}},o.prototype.getDrawCfg=function(t){var r=c.prototype.getDrawCfg.call(this,t);return r.background=this.background,r},o}(la),Ss=fl,Tu=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;r.type="line";var b=t.sortable,D=b===void 0?!1:b;return r.sortable=D,r}return o}(wu),cc=Tu,lc=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],hl=["cross","tick","plus","hyphen","line"];function Cu(c,o,t,r,b){var D=bo(o,b,!b,"r"),et=c.parsePoints(o.points),Et=et[0];if(o.isStack)Et=et[1];else if(et.length>1){for(var Lt=t.addGroup(),ne=0,ge=et;ne<ge.length;ne++){var be=ge[ne];Lt.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[r]||r}),be)})}return Lt}return t.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[r]||r}),Et)})}var dl=oa("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(o){return ho(o)}});Object(a.each)(lc,function(c){fo("point","hollow-"+c,{draw:function(t,r){return Cu(this,t,r,c,!0)},getMarker:function(t){var r=t.color;return{symbol:bn[c]||c,style:{r:4.5,stroke:r,fill:null}}}})});var Oh=dl,vl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return o.prototype.getDrawCfg=function(t){var r=c.prototype.getDrawCfg.call(this,t);return Object(at.a)(Object(at.a)({},r),{isStack:!!this.getAdjust("stack")})},o}(la),pl=vl;function gl(c){for(var o=c[0],t=1,r=[["M",o.x,o.y]];t<c.length;){var b=c[t];(b.x!==c[t-1].x||b.y!==c[t-1].y)&&(r.push(["L",b.x,b.y]),b.x===o.x&&b.y===o.y&&t<c.length-1&&(o=c[t+1],r.push(["Z"]),r.push(["M",o.x,o.y]),t++)),t++}return Object(a.isEqual)(Object(a.last)(r),o)||r.push(["L",o.x,o.y]),r.push(["Z"]),r}var ws=oa("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var t=[];return Object(a.each)(o.x,function(r,b){var D=o.y[b];t.push({x:r,y:D})}),t}});fo("polygon","polygon",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var r=bo(o,!0,!0),b=this.parsePath(gl(o.points));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b}),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Sh=ws,yl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),b=r.x,D=r.y,et;if(!(Object(a.isArray)(b)&&Object(a.isArray)(D))){var Et=this.getXScale(),Lt=this.getYScale(),ne=Et.values.length,ge=Lt.values.length,be=.5*1/ne,Ae=.5*1/ge;Et.isCategory&&Lt.isCategory?(b=[b-be,b-be,b+be,b+be],D=[D-Ae,D+Ae,D+Ae,D-Ae]):Object(a.isArray)(b)?(et=b,b=[et[0],et[0],et[1],et[1]],D=[D-Ae/2,D+Ae/2,D+Ae/2,D-Ae/2]):Object(a.isArray)(D)&&(et=D,D=[et[0],et[1],et[1],et[0]],b=[b-be/2,b-be/2,b+be/2,b+be/2]),r.x=b,r.y=D}return r},o}(la),ml=yl,bl=oa("schema",{defaultShapeType:""}),jd=bl,xl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var r=c.prototype.createShapePointsCfg.call(this,t),b,D=this.getAttribute("size");if(D){b=this.getAttributeValues(D,t)[0];var et=this.coordinate,Et=Yn(et);b=b/Et}else this.defaultSize||(this.defaultSize=uc(this)),b=this.defaultSize;return r.size=b,r},o}(la),fc=xl;fo("area","line",{draw:function(o,t){var r=Eu(o,!0,!1,this),b=t.addShape({type:"path",attrs:r,name:"area"});return b},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return et===void 0&&(et=5.5),[["M",b-et,D-4],["L",b+et,D-4],["L",b+et,D+4],["L",b-et,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}}),fo("area","smooth",{draw:function(o,t){var r=this.coordinate,b=Eu(o,!1,!0,this,Ws(r)),D=t.addShape({type:"path",attrs:b,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return et===void 0&&(et=5.5),[["M",b-et,D-4],["L",b+et,D-4],["L",b+et,D+4],["L",b-et,D+4],["Z"]]},style:{r:5,fill:t}}}}),fo("area","smooth-line",{draw:function(o,t){var r=this.coordinate,b=Eu(o,!0,!0,this,Ws(r)),D=t.addShape({type:"path",attrs:b,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return et===void 0&&(et=5.5),[["M",b-et,D-4],["L",b+et,D-4],["L",b+et,D+4],["L",b-et,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function hc(c,o){return["C",c.x*1/2+o.x*1/2,c.y,c.x*1/2+o.x*1/2,o.y,o.x,o.y]}function dc(c,o){var t=[];t.push({x:o.x,y:o.y}),t.push(c);var r=["Q"];return Object(a.each)(t,function(b){r.push(b.x,b.y)}),r}function Ol(c,o,t){var r=dc(o,t),b=[["M",c.x,c.y]];return b.push(r),b}function Sl(c,o){var t=dc(c[1],o),r=dc(c[3],o),b=[["M",c[0].x,c[0].y]];return b.push(r),b.push(["L",c[3].x,c[3].y]),b.push(["L",c[2].x,c[2].y]),b.push(t),b.push(["L",c[1].x,c[1].y]),b.push(["L",c[0].x,c[0].y]),b.push(["Z"]),b}fo("edge","arc",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),b=o.points,D=b.length>2?"weight":"normal",et;if(o.isInCircle){var Et={x:0,y:1};return D==="normal"?et=Ol(b[0],b[1],Et):(r.fill=r.stroke,et=Sl(b,Et)),et=this.parsePath(et),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})})}else{if(D==="normal")return b=this.parsePoints(b),et=Mo((b[1].x+b[0].x)/2,b[0].y,Math.abs(b[1].x-b[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})});var Lt=hc(b[1],b[3]),ne=hc(b[2],b[0]);return et=[["M",b[0].x,b[0].y],["L",b[1].x,b[1].y],Lt,["L",b[3].x,b[3].y],["L",b[2].x,b[2].y],ne,["Z"]],et=this.parsePath(et),r.fill=r.stroke,t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:et})})}},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});function wl(c,o){var t=hc(c,o),r=[["M",c.x,c.y]];return r.push(t),r}fo("edge","smooth",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),b=o.points,D=this.parsePath(wl(b[0],b[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var Xs=1/3;function El(c,o){var t=[];t.push({x:c.x,y:c.y*(1-Xs)+o.y*Xs}),t.push({x:o.x,y:c.y*(1-Xs)+o.y*Xs}),t.push(o);var r=[["M",c.x,c.y]];return Object(a.each)(t,function(b){r.push(["L",b.x,b.y])}),r}fo("edge","vhv",{draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),b=o.points,D=this.parsePath(El(b[0],b[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}}),fo("interval","funnel",{getPoints:function(o){return o.size=o.size*2,Mu(o)},draw:function(o,t){var r=bo(o,!1,!0),b=this.parsePath(sc(o.points,o.nextPoints,!1)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}}),fo("interval","hollow-rect",{draw:function(o,t){var r=bo(o,!0,!1),b=t,D=o==null?void 0:o.background;if(D){b=t.addGroup();var et=jo(o),Et=ac(o,this.parsePoints(o.points),this.coordinate);b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},et),{path:Et}),zIndex:-1,name:ns})}var Lt=this.parsePath(Au(o.points)),ne=b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:Lt}),name:"interval"});return D?b:ne},getMarker:function(o){var t=o.color,r=o.isInPolar;return r?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function Ys(c){var o=c.x,t=c.y,r=c.y0;return Object(a.isArray)(t)?t.map(function(b,D){return{x:Object(a.isArray)(o)?o[D]:o,y:b}}):[{x:o,y:r},{x:o,y:t}]}fo("interval","line",{getPoints:function(o){return Ys(o)},draw:function(o,t){var r=bo(o,!0,!1,"lineWidth"),b=te(Object(at.a)({},r),["fill"]),D=this.parsePath(Au(o.points,!1)),et=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},b),{path:D}),name:"interval"});return et},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return[["M",b,D-et],["L",b,D+et]]},style:{r:5,stroke:t}}}}),fo("interval","pyramid",{getPoints:function(o){return o.size=o.size*2,Mu(o,!0)},draw:function(o,t){var r=bo(o,!1,!0),b=this.parsePath(sc(o.points,o.nextPoints,!0)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});function Ml(c){var o=c.x,t=c.y,r=c.y0,b=c.size,D,et;Object(a.isArray)(t)?(D=t[0],et=t[1]):(D=r,et=t);var Et=o+b/2,Lt=o-b/2;return[{x:o,y:D},{x:o,y:et},{x:Lt,y:D},{x:Et,y:D},{x:Lt,y:et},{x:Et,y:et}]}function Al(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y]]}fo("interval","tick",{getPoints:function(o){return Ml(o)},draw:function(o,t){var r=bo(o,!0,!1),b=this.parsePath(Al(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){return[["M",b-et/2,D-et],["L",b+et/2,D-et],["M",b,D-et],["L",b,D+et],["M",b-et/2,D+et],["L",b+et/2,D+et]]},style:{r:5,stroke:t}}}});var Tl=function(o,t,r){var b=o.x,D=o.y,et=t.x,Et=t.y,Lt;switch(r){case"hv":Lt=[{x:et,y:D}];break;case"vh":Lt=[{x:b,y:Et}];break;case"hvh":var ne=(et+b)/2;Lt=[{x:ne,y:D},{x:ne,y:Et}];break;case"vhv":var ge=(D+Et)/2;Lt=[{x:b,y:ge},{x:et,y:ge}];break;default:break}return Lt};function wh(c,o){var t=[];return Object(a.each)(c,function(r,b){var D=c[b+1];if(t.push(r),D){var et=Tl(r,D,o);t=t.concat(et)}}),t}function Eh(c){return c.map(function(o,t){return t===0?["M",o.x,o.y]:["L",o.x,o.y]})}function Mh(c,o){var t=Ro(c.points,c.connectNulls,c.showSinglePoint),r=[];return Object(a.each)(t,function(b){var D=wh(b,o);r=r.concat(Eh(D))}),Object(at.a)(Object(at.a)({},bo(c,!0,!1,"lineWidth")),{path:r})}Object(a.each)(["hv","vh","hvh","vhv"],function(c){fo("line",c,{draw:function(t,r){var b=Mh(t,c),D=r.addShape({type:"path",attrs:b,name:"line"});return D},getMarker:function(t){return Zo(t,c)}})}),Object(a.each)(hl,function(c){fo("point",c,{draw:function(t,r){return Cu(this,t,r,c,!0)},getMarker:function(t){var r=t.color;return{symbol:bn[c],style:{r:4.5,stroke:r,fill:null}}}})}),fo("point","image",{draw:function(o,t){var r=bo(o,!1,!1,"r").r,b=this.parsePoints(o.points),D=b[0];if(o.isStack)D=b[1];else if(b.length>1){for(var et=t.addGroup(),Et=0,Lt=b;Et<Lt.length;Et++){var ne=Lt[Et];et.addShape("image",{attrs:{x:ne.x-r/2,y:ne.y-r,width:r,height:r,img:o.shape[1]}})}return et}return t.addShape("image",{attrs:{x:D.x-r/2,y:D.y-r,width:r,height:r,img:o.shape[1]}})},getMarker:function(o){var t=o.color;return{symbol:"circle",style:{r:4.5,fill:t}}}}),Object(a.each)(lc,function(c){fo("point",c,{draw:function(t,r){return Cu(this,t,r,c,!1)},getMarker:function(t){var r=t.color;return{symbol:bn[c]||c,style:{r:4.5,fill:r}}}})});function vc(c){var o=Object(a.isArray)(c)?c:[c],t=o[0],r=o[o.length-1],b=o.length>1?o[1]:t,D=o.length>3?o[3]:r,et=o.length>2?o[2]:b;return{min:t,max:r,min1:b,max1:D,median:et}}function pc(c,o,t){var r=t/2,b;if(Object(a.isArray)(o)){var D=vc(o),et=D.min,Et=D.max,Lt=D.median,ne=D.min1,ge=D.max1,be=c-r,Ae=c+r;b=[[be,Et],[Ae,Et],[c,Et],[c,ge],[be,ne],[be,ge],[Ae,ge],[Ae,ne],[c,ne],[c,et],[be,et],[Ae,et],[be,Lt],[Ae,Lt]]}else{o=Object(a.isNil)(o)?.5:o;var We=vc(c),et=We.min,Et=We.max,Lt=We.median,ne=We.min1,ge=We.max1,an=o-r,gn=o+r;b=[[et,an],[et,gn],[et,o],[ne,o],[ne,an],[ne,gn],[ge,gn],[ge,an],[ge,o],[Et,o],[Et,an],[Et,gn],[Lt,an],[Lt,gn]]}return b.map(function(Xn){return{x:Xn[0],y:Xn[1]}})}function Cl(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y],["L",c[6].x,c[6].y],["L",c[7].x,c[7].y],["L",c[4].x,c[4].y],["Z"],["M",c[8].x,c[8].y],["L",c[9].x,c[9].y],["M",c[10].x,c[10].y],["L",c[11].x,c[11].y],["M",c[12].x,c[12].y],["L",c[13].x,c[13].y]]}fo("schema","box",{getPoints:function(o){var t=o.x,r=o.y,b=o.size;return pc(t,r,b)},draw:function(o,t){var r=bo(o,!0,!1),b=this.parsePath(Cl(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){var Et=[D-6,D-3,D,D+3,D+6],Lt=pc(b,Et,et);return[["M",Lt[0].x+1,Lt[0].y],["L",Lt[1].x-1,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["M",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["L",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y],["L",Lt[4].x,Lt[4].y],["Z"],["M",Lt[8].x,Lt[8].y],["L",Lt[9].x,Lt[9].y],["M",Lt[10].x+1,Lt[10].y],["L",Lt[11].x-1,Lt[11].y],["M",Lt[12].x,Lt[12].y],["L",Lt[13].x,Lt[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function jl(c){var o=Object(a.isArray)(c)?c:[c],t=o.sort(function(r,b){return b-r});return Kt(t,4,t[t.length-1])}function ju(c,o,t){var r=jl(o);return[{x:c,y:r[0]},{x:c,y:r[1]},{x:c-t/2,y:r[2]},{x:c-t/2,y:r[1]},{x:c+t/2,y:r[1]},{x:c+t/2,y:r[2]},{x:c,y:r[2]},{x:c,y:r[3]}]}function Il(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["L",c[4].x,c[4].y],["L",c[5].x,c[5].y],["Z"],["M",c[6].x,c[6].y],["L",c[7].x,c[7].y]]}fo("schema","candle",{getPoints:function(o){var t=o.x,r=o.y,b=o.size;return ju(t,r,b)},draw:function(o,t){var r=bo(o,!0,!0),b=this.parsePath(Il(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},r),{path:b,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,et){var Et=[D+7.5,D+3,D-3,D-7.5],Lt=ju(b,Et,et);return[["M",Lt[0].x,Lt[0].y],["L",Lt[1].x,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["L",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["Z"],["M",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function Pl(c,o){var t=Math.abs(c[0].x-c[2].x),r=Math.abs(c[0].y-c[2].y),b=Math.min(t,r);o&&(b=Object(a.clamp)(o,0,Math.min(t,r))),b=b/2;var D=(c[0].x+c[2].x)/2,et=(c[0].y+c[2].y)/2;return{x:D-b,y:et-b,width:b*2,height:b*2}}fo("polygon","square",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var r=bo(o,!0,!0),b=this.parsePoints(o.points);return t.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},r),Pl(b,o.size)),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Ah=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelValueDir=function(t){var r="y",b=t.points;return b[0][r]<=b[2][r]?1:-1},o.prototype.getLabelOffsetPoint=function(t,r,b){var D,et=c.prototype.getLabelOffsetPoint.call(this,t,r,b),Et=this.getCoordinate().isTransposed,Lt=Et?"x":"y",ne=this.getLabelValueDir(t.mappingData);return Object(at.a)(Object(at.a)({},et),(D={},D[Lt]=et[Lt]*ne,D))},o.prototype.getThemedLabelCfg=function(t){var r=this.geometry,b=this.getDefaultLabelCfg(),D=r.theme;return Object(a.deepMix)({},b,D.labels,t.position==="middle"?{offset:0}:{},t)},o.prototype.setLabelPosition=function(t,r,b,D){var et=this.getCoordinate(),Et=et.isTransposed,Lt=r.points,ne=et.convert(Lt[0]),ge=et.convert(Lt[2]),be=this.getLabelValueDir(r),Ae,We,an,gn,Xn=Object(a.isArray)(r.shape)?r.shape[0]:r.shape;if(Xn==="funnel"||Xn==="pyramid"){var Hn=Object(a.get)(r,"nextPoints"),ir=Object(a.get)(r,"points");if(Hn){var cr=et.convert(ir[0]),Rr=et.convert(ir[1]),zr=et.convert(Hn[0]),_r=et.convert(Hn[1]);Et?(Ae=Math.min(zr.y,cr.y),an=Math.max(zr.y,cr.y),We=(Rr.x+_r.x)/2,gn=(cr.x+zr.x)/2):(Ae=Math.min((Rr.y+_r.y)/2,(cr.y+zr.y)/2),an=Math.max((Rr.y+_r.y)/2,(cr.y+zr.y)/2),We=_r.x,gn=cr.x)}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x;switch(D){case"right":t.x=We,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"left":t.x=gn,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"bottom":Et&&(t.x=(We+gn)/2),t.y=an,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;case"middle":Et&&(t.x=(We+gn)/2),t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline","middle");break;case"top":Et&&(t.x=(We+gn)/2),t.y=Ae,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;default:break}},o}(Fe),Th=Ah,Iu=Math.PI/2,Ch=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelOffset=function(t){var r=this.getCoordinate(),b=0;if(Object(a.isNumber)(t))b=t;else if(Object(a.isString)(t)&&t.indexOf("%")!==-1){var D=r.getRadius();r.innerRadius>0&&(D=D*(1-r.innerRadius)),b=parseFloat(t)*.01*D}return b},o.prototype.getLabelItems=function(t){var r=c.prototype.getLabelItems.call(this,t),b=this.geometry.getYScale();return Object(a.map)(r,function(D){if(D&&b){var et=b.scale(Object(a.get)(D.data,b.field));return Object(at.a)(Object(at.a)({},D),{percent:et})}return D})},o.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),b;if(t.labelEmit)b=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!r.isTransposed)b="center";else{var D=r.getCenter(),et=t.offset;Math.abs(t.x-D.x)<1?b="center":t.angle>Math.PI||t.angle<=0?b=et>0?"left":"right":b=et>0?"right":"left"}return b},o.prototype.getLabelPoint=function(t,r,b){var D=1,et,Et=t.content[b];this.isToMiddle(r)?et=this.getMiddlePoint(r.points):(t.content.length===1&&b===0?b=1:b===0&&(D=-1),et=this.getArcPoint(r,b));var Lt=t.offset*D,ne=this.getPointAngle(et),ge=t.labelEmit,be=this.getCirclePoint(ne,Lt,et,ge);return be.r===0?be.content="":(be.content=Et,be.angle=ne,be.color=r.color),be.rotate=t.autoRotate?this.getLabelRotate(ne,Lt,ge):t.rotate,be.start={x:et.x,y:et.y},be},o.prototype.getArcPoint=function(t,r){return r===void 0&&(r=0),!Object(a.isArray)(t.x)&&!Object(a.isArray)(t.y)?{x:t.x,y:t.y}:{x:Object(a.isArray)(t.x)?t.x[r]:t.x,y:Object(a.isArray)(t.y)?t.y[r]:t.y}},o.prototype.getPointAngle=function(t){return $n(this.getCoordinate(),t)},o.prototype.getCirclePoint=function(t,r,b,D){var et=this.getCoordinate(),Et=et.getCenter(),Lt=rn(et,b);if(Lt===0)return Object(at.a)(Object(at.a)({},Et),{r:Lt});var ne=t;if(et.isTransposed&&Lt>r&&!D){var ge=Math.asin(r/(2*Lt));ne=t+ge*2}else Lt=Lt+r;return{x:Et.x+Lt*Math.cos(ne),y:Et.y+Lt*Math.sin(ne),r:Lt}},o.prototype.getLabelRotate=function(t,r,b){var D=t+Iu;return b&&(D-=Iu),D&&(D>Iu?D=D-Math.PI:D<-Iu&&(D=D+Math.PI)),D},o.prototype.getMiddlePoint=function(t){var r=this.getCoordinate(),b=t.length,D={x:0,y:0};return Object(a.each)(t,function(et){D.x+=et.x,D.y+=et.y}),D.x/=b,D.y/=b,D=r.convert(D),D},o.prototype.isToMiddle=function(t){return t.x.length>2},o}(Fe),gc=Ch,Dl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return o.prototype.getDefaultLabelCfg=function(t,r){var b=c.prototype.getDefaultLabelCfg.call(this,t,r);return Object(a.deepMix)({},b,Object(a.get)(this.geometry.theme,"pieLabels",{}))},o.prototype.getLabelOffset=function(t){return c.prototype.getLabelOffset.call(this,t)||0},o.prototype.getLabelRotate=function(t,r,b){var D;return r<0&&(D=t,D>Math.PI/2&&(D=D-Math.PI),D<-Math.PI/2&&(D=D+Math.PI)),D},o.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),b=r.getCenter(),D;return t.angle<=Math.PI/2&&t.x>=b.x?D="left":D="right",t.offset<=0&&(D==="right"?D="left":D="right"),D},o.prototype.getArcPoint=function(t){return t},o.prototype.getPointAngle=function(t){var r=this.getCoordinate(),b={x:Object(a.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},D={x:Object(a.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},et,Et=$n(r,b);if(t.points&&t.points[0].y===t.points[1].y)et=Et;else{var Lt=$n(r,D);Et>=Lt&&(Lt=Lt+Math.PI*2),et=Et+(Lt-Et)/2}return et},o.prototype.getCirclePoint=function(t,r){var b=this.getCoordinate(),D=b.getCenter(),et=b.getRadius()+r;return Object(at.a)(Object(at.a)({},Pi(D.x,D.y,et,t)),{angle:t,r:et})},o}(gc),jh=Dl,kl=4;function Ih(c,o,t,r,b,D){var et=!0,Et=r.start,Lt=r.end,ne=Math.min(Et.y,Lt.y),ge=Math.abs(Et.y-Lt.y),be,Ae=0,We=Number.MIN_VALUE,an=o.map(function(zr){return zr.y>Ae&&(Ae=zr.y),zr.y<We&&(We=zr.y),{size:t,targets:[zr.y-ne]}});for(We-=ne,Ae-ne>ge&&(ge=Ae-ne);et;)for(an.forEach(function(zr){var _r=(Math.min.apply(We,zr.targets)+Math.max.apply(We,zr.targets))/2;zr.pos=Math.min(Math.max(We,_r-zr.size/2),ge-zr.size)}),et=!1,be=an.length;be--;)if(be>0){var gn=an[be-1],Xn=an[be];gn.pos+gn.size>Xn.pos&&(gn.size+=Xn.size,gn.targets=gn.targets.concat(Xn.targets),gn.pos+gn.size>ge&&(gn.pos=ge-gn.size),an.splice(be,1),et=!0)}be=0,an.forEach(function(zr){var _r=ne+t/2;zr.targets.forEach(function(){o[be].y=zr.pos+_r,_r+=t,be++})});for(var Hn={},ir=0,cr=c;ir<cr.length;ir++){var Rr=cr[ir];Hn[Rr.get("id")]=Rr}o.forEach(function(zr){var _r=zr.r*zr.r,ki=Math.pow(Math.abs(zr.y-b.y),2);if(_r<ki)zr.x=b.x;else{var Ai=Math.sqrt(_r-ki);D?zr.x=b.x+Ai:zr.x=b.x-Ai}var mi=Hn[zr.id];mi.attr("x",zr.x),mi.attr("y",zr.y);var Ki=Object(a.find)(mi.getChildren(),function(vo){return vo.get("type")==="text"});Ki&&(Ki.attr("y",zr.y),Ki.attr("x",zr.x))})}function Ph(c,o,t,r){if(!(!c.length||!o.length)){var b=c[0]?c[0].offset:0,D=o[0].get("coordinate"),et=D.getRadius(),Et=D.getCenter();if(b>0){var Lt=14,ne=et+b,ge=ne*2+Lt*2,be={start:D.start,end:D.end},Ae=[[],[]];c.forEach(function(We){!We||(We.textAlign==="right"?Ae[0].push(We):Ae[1].push(We))}),Ae.forEach(function(We,an){var gn=ge/Lt;We.length>gn&&(We.sort(function(Xn,Hn){return Hn["..percent"]-Xn["..percent"]}),We.splice(gn,We.length-gn)),We.sort(function(Xn,Hn){return Xn.y-Hn.y}),Ih(o,We,Lt,be,Et,an)})}Object(a.each)(c,function(We){if(We&&We.labelLine){var an=We.offset,gn=We.angle,Xn=Pi(Et.x,Et.y,et,gn),Hn=Pi(Et.x,Et.y,et+an/2,gn),ir=We.x+Object(a.get)(We,"offsetX",0),cr=We.y+Object(a.get)(We,"offsetY",0),Rr={x:ir-Math.cos(gn)*kl,y:cr-Math.sin(gn)*kl};Object(a.isObject)(We.labelLine)||(We.labelLine={}),We.labelLine.path=["M "+Xn.x,Xn.y+" Q"+Hn.x,Hn.y+" "+Rr.x,Rr.y].join(",")}})}}function Rl(c,o,t){var r=c.filter(function(an){return!an.invisible});r.sort(function(an,gn){return an.y-gn.y});var b=!0,D=t.minY,et=t.maxY,Et=Math.abs(D-et),Lt,ne=0,ge=Number.MIN_VALUE,be=r.map(function(an){return an.y>ne&&(ne=an.y),an.y<ge&&(ge=an.y),{content:an.content,size:o,targets:[an.y-D],pos:null}});for(ge-=D,ne-D>Et&&(Et=ne-D);b;)for(be.forEach(function(an){var gn=(Math.min.apply(ge,an.targets)+Math.max.apply(ge,an.targets))/2;an.pos=Math.min(Math.max(ge,gn-an.size/2),Et-an.size),an.pos=Math.max(0,an.pos)}),b=!1,Lt=be.length;Lt--;)if(Lt>0){var Ae=be[Lt-1],We=be[Lt];Ae.pos+Ae.size>We.pos&&(Ae.size+=We.size,Ae.targets=Ae.targets.concat(We.targets),Ae.pos+Ae.size>Et&&(Ae.pos=Et-Ae.size),be.splice(Lt,1),b=!0)}Lt=0,be.forEach(function(an){var gn=D+o/2;an.targets.forEach(function(){r[Lt].y=an.pos+gn,gn+=o,Lt++})})}var yc=4;function Dh(c,o){var t=o.getCenter(),r=o.getRadius();if(c&&c.labelLine){var b=c.angle,D=c.offset,et=Pi(t.x,t.y,r,b),Et=c.x+Object(a.get)(c,"offsetX",0)*(Math.cos(b)>0?1:-1),Lt=c.y+Object(a.get)(c,"offsetY",0)*(Math.sin(b)>0?1:-1),ne={x:Et-Math.cos(b)*yc,y:Lt-Math.sin(b)*yc},ge=c.labelLine.smooth,be=[],Ae=ne.x-t.x,We=ne.y-t.y,an=Math.atan(We/Ae);if(Ae<0&&(an+=Math.PI),ge===!1){Object(a.isObject)(c.labelLine)||(c.labelLine={});var gn=0;(b<0&&b>-Math.PI/2||b>Math.PI*1.5)&&ne.y>et.y&&(gn=1),b>=0&&b<Math.PI/2&&ne.y>et.y&&(gn=1),b>=Math.PI/2&&b<Math.PI&&et.y>ne.y&&(gn=1),(b<-Math.PI/2||b>=Math.PI&&b<Math.PI*1.5)&&et.y>ne.y&&(gn=1);var Xn=D/2>4?4:Math.max(D/2-1,0),Hn=Pi(t.x,t.y,r+Xn,b),ir=Pi(t.x,t.y,r+D/2,an),cr=0;be.push("M "+et.x+" "+et.y),be.push("L "+Hn.x+" "+Hn.y),be.push("A "+t.x+" "+t.y+" 0 "+cr+" "+gn+" "+ir.x+" "+ir.y),be.push("L "+ne.x+" "+ne.y)}else{var Hn=Pi(t.x,t.y,r+(D/2>4?4:Math.max(D/2-1,0)),b),Rr=et.x<t.x?1:-1;be.push("M "+ne.x+" "+ne.y);var zr=(et.y-t.y)/(et.x-t.x),_r=(ne.y-t.y)/(ne.x-t.x);Math.abs(zr-_r)>Math.pow(Math.E,-16)&&be.push.apply(be,["C",ne.x+Rr*4,ne.y,2*Hn.x-et.x,2*Hn.y-et.y,et.x,et.y]),be.push("L "+et.x+" "+et.y)}c.labelLine.path=be.join(" ")}}function Nl(c,o,t,r){var b=Object(a.filter)(c,function(_r){return!Object(a.isNil)(_r)}),D=o[0]&&o[0].get("coordinate");if(!!D){for(var et=D.getCenter(),Et=D.getRadius(),Lt={},ne=0,ge=o;ne<ge.length;ne++){var be=ge[ne];Lt[be.get("id")]=be}var Ae=Object(a.get)(b[0],"labelHeight",14),We=Object(a.get)(b[0],"offset",0);if(!(We<=0)){var an="left",gn="right",Xn=Object(a.groupBy)(b,function(_r){return _r.x<et.x?an:gn}),Hn=D.start,ir=D.end,cr=Math.min((Et+We+Ae)*2,D.getHeight()),Rr=cr/2,zr={minX:Hn.x,maxX:ir.x,minY:et.y-Rr,maxY:et.y+Rr};Object(a.each)(Xn,function(_r,ki){var Ai=Math.floor(cr/Ae);_r.length>Ai&&(_r.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(_r,function(mi,Ki){Ki+1>Ai&&(Lt[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(_r,Ae,zr)}),Object(a.each)(Xn,function(_r,ki){Object(a.each)(_r,function(Ai){var mi=ki===gn,Ki=Lt[Ai.id],vo=Ki.getChildByIndex(0);if(vo){var po=Et+We,yo=Ai.y-et.y,wo=Math.pow(po,2),Q=Math.pow(yo,2),U=wo-Q>0?wo-Q:0,w=Math.sqrt(U),L=Math.abs(Math.cos(Ai.angle)*po);mi?Ai.x=et.x+Math.max(w,L):Ai.x=et.x-Math.max(w,L)}vo&&(vo.attr("y",Ai.y),vo.attr("x",Ai.x)),Dh(Ai,D)})})}}}var Pu=4,Hs=4,Ll=4;function kh(c,o,t){var r=o.getCenter(),b=o.getRadius(),D={x:c.x-(t?Ll:-Ll),y:c.y},et=Pi(r.x,r.y,b+Pu,c.angle),Et={x:D.x,y:D.y},Lt={x:et.x,y:et.y},ne=Pi(r.x,r.y,b,c.angle),ge="";if(D.y!==et.y){var be=t?4:-4;Et.y=D.y,c.angle<0&&c.angle>=-Math.PI/2&&(Et.x=Math.max(et.x,D.x-be),D.y<et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.max(Lt.x,Et.x-be))),c.angle>0&&c.angle<Math.PI/2&&(Et.x=Math.max(et.x,D.x-be),D.y>et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.max(Lt.x,Et.x-be))),c.angle>Math.PI/2&&(Et.x=Math.min(et.x,D.x-be),D.y>et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.min(Lt.x,Et.x-be))),c.angle<-Math.PI/2&&(Et.x=Math.min(et.x,D.x-be),D.y<et.y?Lt.y=Et.y:(Lt.y=et.y,Lt.x=Math.min(Lt.x,Et.x-be)))}ge=["M "+D.x+","+D.y,"L "+Et.x+","+Et.y,"L "+Lt.x+","+Lt.y,"L "+et.x+","+et.y,"L "+ne.x+","+ne.y].join(" "),c.labelLine=Object(a.deepMix)({},c.labelLine,{path:ge})}function Rh(c,o,t,r){var b=o[0]&&o[0].get("coordinate");if(!!b){for(var D=b.getCenter(),et=b.getRadius(),Et={},Lt=0,ne=o;Lt<ne.length;Lt++){var ge=ne[Lt];Et[ge.get("id")]=ge}var be=Object(a.get)(c[0],"labelHeight",14),Ae=Math.max(Object(a.get)(c[0],"offset",0),Pu);Object(a.each)(c,function(_r){var ki=Object(a.get)(Et,_r.id);if(!!ki){var Ai=_r.x>D.x||_r.x===D.x&&_r.y>D.y,mi=Object(a.isNil)(_r.offsetX)?Hs:_r.offsetX,Ki=Pi(D.x,D.y,et+Pu,_r.angle),vo=Ae+mi;_r.x=D.x+(Ai?1:-1)*(et+vo),_r.y=Ki.y}});var We=b.start,an=b.end,gn="left",Xn="right",Hn=Object(a.groupBy)(c,function(_r){return _r.x<D.x?gn:Xn}),ir=(et+Ae)*2+be;Object(a.each)(Hn,function(_r){var ki=_r.length*be;ki>ir&&(ir=Math.min(ki,Math.abs(We.y-an.y)))});var cr={minX:We.x,maxX:an.x,minY:D.y-ir/2,maxY:D.y+ir/2};Object(a.each)(Hn,function(_r,ki){var Ai=ir/be;_r.length>Ai&&(_r.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(_r,function(mi,Ki){Ki>Ai&&(Et[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(_r,be,cr)});var Rr=cr.minY,zr=cr.maxY;Object(a.each)(Hn,function(_r,ki){var Ai=ki===Xn;Object(a.each)(_r,function(mi){var Ki=Object(a.get)(Et,mi&&mi.id);if(!!Ki){if(mi.y<Rr||mi.y>zr){Ki.set("visible",!1);return}var vo=Ki.getChildByIndex(0),po=vo.getCanvasBBox(),yo={x:Ai?po.x:po.maxX,y:po.y+po.height/2};Ca(vo,mi.x-yo.x,mi.y-yo.y),mi.labelLine&&kh(mi,b,Ai)}})})}}function ha(c,o,t,r){Object(a.each)(o,function(b){var D=r.minX,et=r.minY,Et=r.maxX,Lt=r.maxY,ne=b.getCanvasBBox(),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY,an=ne.x,gn=ne.y,Xn=ne.width,Hn=ne.height,ir=an,cr=gn;(ge<D||Ae<D)&&(ir=D),(be<et||We<et)&&(cr=et),ge>Et?ir=Et-Xn:Ae>Et&&(ir=ir-(Ae-Et)),be>Lt?cr=Lt-Hn:We>Lt&&(cr=cr-(We-Lt)),(ir!==an||cr!==gn)&&Ca(b,ir-an,cr-gn)})}function Nh(c,o,t,r){Object(a.each)(o,function(b,D){var et=b.getCanvasBBox(),Et=t[D].getBBox();(et.minX<Et.minX||et.minY<Et.minY||et.maxX>Et.maxX||et.maxY>Et.maxY)&&b.remove(!0)})}var Bl=100,_a=function(){function c(o){o===void 0&&(o={}),this.bitmap={};var t=o.xGap,r=t===void 0?1:t,b=o.yGap,D=b===void 0?8:b;this.xGap=r,this.yGap=D}return c.prototype.hasGap=function(o){for(var t=!0,r=this.bitmap,b=Math.round(o.minX),D=Math.round(o.maxX),et=Math.round(o.minY),Et=Math.round(o.maxY),Lt=b;Lt<=D;Lt+=1){if(!r[Lt]){r[Lt]={};continue}if(Lt===b||Lt===D){for(var ne=et;ne<=Et;ne++)if(r[Lt][ne]){t=!1;break}}else if(r[Lt][et]||r[Lt][Et]){t=!1;break}}return t},c.prototype.fillGap=function(o){for(var t=this.bitmap,r=Math.round(o.minX),b=Math.round(o.maxX),D=Math.round(o.minY),et=Math.round(o.maxY),Et=r;Et<=b;Et+=1)t[Et]||(t[Et]={});for(var Et=r;Et<=b;Et+=this.xGap){for(var Lt=D;Lt<=et;Lt+=this.yGap)t[Et][Lt]=!0;t[Et][et]=!0}if(this.yGap!==1)for(var Et=D;Et<=et;Et+=1)t[r][Et]=!0,t[b][Et]=!0;if(this.xGap!==1)for(var Et=r;Et<=b;Et+=1)t[Et][D]=!0,t[Et][et]=!0},c.prototype.destroy=function(){this.bitmap={}},c}();function Fl(c,o,t){t===void 0&&(t=Bl);var r=-1,b=c.attr(),D=b.x,et=b.y,Et=c.getCanvasBBox(),Lt=Math.sqrt(Et.width*Et.width+Et.height*Et.height),ne,ge=-r,be=0,Ae=0,We=function(ir){var cr=ir*.1;return[cr*Math.cos(cr),cr*Math.sin(cr)]};if(o.hasGap(Et))return o.fillGap(Et),!0;for(var an=!1,gn=0,Xn={};Math.min(Math.abs(be),Math.abs(Ae))<Lt&&gn<t;)if(ne=We(ge+=r),be=~~ne[0],Ae=~~ne[1],!(!be&&!Ae||Xn[be+"-"+Ae])&&(c.attr({x:D+be,y:et+Ae}),be+Ae<0&&c.attr("textAlign","right"),gn++,o.hasGap(c.getCanvasBBox()))){o.fillGap(c.getCanvasBBox()),an=!0,Xn[be+"-"+Ae]=!0;break}return an}function za(c,o,t,r){var b=c.getCanvasBBox(),D=b.width,et=b.height,Et={x:o,y:t,textAlign:"center"};switch(r){case 0:Et.y-=et+1,Et.x+=1,Et.textAlign="left";break;case 1:Et.y-=et+1,Et.x-=1,Et.textAlign="right";break;case 2:Et.y+=et+1,Et.x-=1,Et.textAlign="right";break;case 3:Et.y+=et+1,Et.x+=1,Et.textAlign="left";break;case 5:Et.y-=et*2+2;break;case 6:Et.y+=et*2+2;break;case 7:Et.x+=D+1,Et.textAlign="left";break;case 8:Et.x-=D+1,Et.textAlign="right";break;default:break}return c.attr(Et),c.getCanvasBBox()}function Ks(c,o,t,r){var b=new _a;Object(a.each)(o,function(D){var et=D.find(function(Et){return Et.get("type")==="text"});Fl(et,b)||D.remove(!0)}),b.destroy()}function $o(c,o,t,r){var b=new _a;Object(a.each)(o,function(D){for(var et=D.find(function(We){return We.get("type")==="text"}),Et=et.attr(),Lt=Et.x,ne=Et.y,ge=!1,be=0;be<=8;be++){var Ae=za(et,Lt,ne,be);if(b.hasGap(Ae)){b.fillGap(Ae),ge=!0;break}}ge||D.remove(!0)}),b.destroy()}var ja=jr.c.dot;function Va(c){if(c.length>4)return[];var o=function(D,et){return[et.x-D.x,et.y-D.y]},t=o(c[0],c[1]),r=o(c[1],c[2]);return[t,r]}function Js(c,o,t){o===void 0&&(o=0),t===void 0&&(t={x:0,y:0});var r=c.x,b=c.y;return{x:(r-t.x)*Math.cos(-o)+(b-t.y)*Math.sin(-o)+t.x,y:(t.x-r)*Math.sin(-o)+(b-t.y)*Math.cos(-o)+t.y}}function mc(c){var o=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],t=c.rotation;return t?[Js(o[0],t,o[0]),Js(o[1],t,o[0]),Js(o[2],t,o[0]),Js(o[3],t,o[0])]:o}function bc(c,o){if(c.length>4)return{min:0,max:0};var t=[];return c.forEach(function(r){t.push(ja([r.x,r.y],o))}),{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}function xc(c,o){return c.max>o.min&&c.min<o.max}function Gl(c,o,t){return t===void 0&&(t=0),!(o.x>c.x+c.width+t||o.x+o.width<c.x-t||o.y>c.y+c.height+t||o.y+o.height<c.y-t)}function So(c,o){if(!c.rotation&&!o.rotation)return Gl(c,o);for(var t=mc(c),r=mc(o),b=Object(at.d)(Va(t),Va(r)),D=0;D<b.length;D++){var et=b[D],Et=bc(t,et),Lt=bc(r,et);if(!xc(Et,Lt))return!1}return!0}function Du(c,o,t,r){for(var b=0;b<o.length;b++){var D=o[b];if(o[b].get("visible"))for(var et=b+1;et<o.length;et++){var Et=o[et];if(D&&Et&&D!==Et&&Et.get("visible")){var Lt=W(D,c[b],Object(a.get)(c[b],"background.padding")),ne=W(Et,c[et],Object(a.get)(c[et],"background.padding"));So(Lt,ne)&&o[et].set("visible",!1)}}}}var Wa={"#5B8FF9":!0},Ul=function(o){var t=mt.a.toRGB(o).toUpperCase();if(Wa[t])return Wa[t];var r=mt.a.rgb2arr(t),b=r[0],D=r[1],et=r[2],Et=(b*299+D*587+et*114)/1e3<128;return Et};function _l(c,o,t){if(t.length!==0){var r=t[0].get("element"),b=r.geometry.theme,D=b.labels||{},et=D.fillColorLight,Et=D.fillColorDark;t.forEach(function(Lt,ne){var ge=o[ne],be=ge.find(function(Hn){return Hn.get("type")==="text"}),Ae=Qe.fromObject(Lt.getBBox()),We=Qe.fromObject(be.getCanvasBBox()),an=!Ae.contains(We),gn=Lt.attr("fill"),Xn=Ul(gn);an?be.attr(b.overflowLabels.style):Xn?et&&be.attr("fill",et):Et&&be.attr("fill",Et)})}}function zl(c,o,t){var r=c.coordinate,b=I(o),D=Qe.fromObject(b.getCanvasBBox()),et=Qe.fromObject(t.getBBox());return r.isTransposed?et.height>=D.height:et.width>=D.width}function Vl(c,o,t){var r=!!c.getAdjust("stack");return r||o.every(function(b,D){var et=t[D];return zl(c,b,et)})}function Wl(c,o,t){var r=c.coordinate,b=Qe.fromObject(t.getBBox()),D=I(o);r.isTransposed?D.attr({x:b.minX+b.width/2,textAlign:"center"}):D.attr({y:b.minY+b.height/2,textBaseline:"middle"})}function ku(c,o,t){var r;if(t.length!==0){var b=(r=t[0])===null||r===void 0?void 0:r.get("element"),D=b==null?void 0:b.geometry;if(!(!D||D.type!=="interval")){var et=Vl(D,o,t);et&&t.forEach(function(Et,Lt){var ne=o[Lt];Wl(D,ne,Et)})}}}function Xl(c){var o=500,t=[],r=Math.max(Math.floor(c.length/o),1);return Object(a.each)(c,function(b,D){D%r==0?t.push(b):b.set("visible",!1)}),t}function Yl(c,o,t){var r;if(t.length!==0){var b=(r=t[0])===null||r===void 0?void 0:r.get("element"),D=b==null?void 0:b.geometry;if(!(!D||D.type!=="interval")){var et=Xl(o),Et=D.getXYFields()[0],Lt=[],ne=[],ge=Object(a.groupBy)(et,function(gn){return gn.get("data")[Et]}),be=Object(a.uniq)(Object(a.map)(et,function(gn){return gn.get("data")[Et]})),Ae;et.forEach(function(gn){gn.set("visible",!0)});var We=function(Xn){Xn&&(Xn.length&&ne.push(Xn.pop()),ne.push.apply(ne,Xn))};for(Object(a.size)(be)>0&&(Ae=be.shift(),We(ge[Ae])),Object(a.size)(be)>0&&(Ae=be.pop(),We(ge[Ae])),Object(a.each)(be.reverse(),function(gn){We(ge[gn])});ne.length>0;){var an=ne.shift();an.get("visible")&&(Tt(an,Lt)?an.set("visible",!1):Lt.push(an))}}}}function Ia(c,o){var t=c.getXYFields()[1],r=[],b=o.sort(function(D,et){return D.get("data")[t]-D.get("data")[t]});return b.length>0&&r.push(b.shift()),b.length>0&&r.push(b.pop()),r.push.apply(r,b),r}function is(c,o,t){return c.some(function(r){return t(r,o)})}function Hl(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*b}function Kl(c,o){return is(c,o,function(t,r){var b=I(t),D=I(r);return Hl(b.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ru(c,o,t,r,b){var D,et;if(t.length!==0){var Et=(D=t[0])===null||D===void 0?void 0:D.get("element"),Lt=Et==null?void 0:Et.geometry;if(!(!Lt||Lt.type!=="point")){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=b&&b.offset||((et=c[0])===null||et===void 0?void 0:et.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Xn=Ia(Lt,Ae[gn]);Xn.length;){var Hn=Xn.shift(),ir=I(Hn);if(is(We,Hn,function(zr,_r){return zr.get("data")[ge]===_r.get("data")[ge]&&zr.get("data")[be]===_r.get("data")[be]})){ir.set("visible",!1);continue}var cr=Kl(We,Hn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Kl(We,Hn)),Rr){ir.set("visible",!1);continue}We.push(Hn)}})}}}function Lh(c,o){var t=c.getXYFields()[1],r=[],b=o.sort(function(D,et){return D.get("data")[t]-D.get("data")[t]});return b.length>0&&r.push(b.shift()),b.length>0&&r.push(b.pop()),r.push.apply(r,b),r}function Jl(c,o,t){return c.some(function(r){return t(r,o)})}function Wr(c,o,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return r*b}function Oc(c,o){return Jl(c,o,function(t,r){var b=I(t),D=I(r);return Wr(b.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ql(c,o,t,r,b){var D,et;if(t.length!==0){var Et=(D=t[0])===null||D===void 0?void 0:D.get("element"),Lt=Et==null?void 0:Et.geometry;if(!(!Lt||["path","line","area"].indexOf(Lt.type)<0)){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=b&&b.offset||((et=c[0])===null||et===void 0?void 0:et.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Xn=Lh(Lt,Ae[gn]);Xn.length;){var Hn=Xn.shift(),ir=I(Hn);if(Jl(We,Hn,function(zr,_r){return zr.get("data")[ge]===_r.get("data")[ge]&&zr.get("data")[be]===_r.get("data")[be]})){ir.set("visible",!1);continue}var cr=Oc(We,Hn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Oc(We,Hn)),Rr){ir.set("visible",!1);continue}We.push(Hn)}})}}}var Nu;function Zl(){return Nu||(Nu=document.createElement("canvas").getContext("2d")),Nu}var Qs=Object(a.memoize)(function(c,o){o===void 0&&(o={});var t=o.fontSize,r=o.fontFamily,b=o.fontWeight,D=o.fontStyle,et=o.fontVariant,Et=Zl();return Et.font=[D,et,b,t+"px",r].join(" "),Et.measureText(Object(a.isString)(c)?c:"").width},function(c,o){return o===void 0&&(o={}),Object(at.d)([c],Object(a.values)(o)).join("")}),$l=function(o,t,r){var b=16,D=Qs("...",r),et;Object(a.isString)(o)?et=o:et=Object(a.toString)(o);var Et=t,Lt=[],ne,ge;if(Qs(o,r)<=t)return o;for(;ne=et.substr(0,b),ge=Qs(ne,r),!(ge+D>Et&&ge>Et);)if(Lt.push(ne),Et-=ge,et=et.substr(b),!et)return Lt.join("");for(;ne=et.substr(0,1),ge=Qs(ne,r),!(ge+D>Et);)if(Lt.push(ne),Et-=ge,et=et.substr(1),!et)return Lt.join("");return Lt.join("")+"..."};function ql(c,o,t,r,b){if(!(o.length<=0)){var D=(b==null?void 0:b.direction)||["top","right","bottom","left"],et=(b==null?void 0:b.action)||"translate",Et=(b==null?void 0:b.margin)||0,Lt=o[0].get("coordinate");if(!!Lt){var ne=ar(Lt,Et),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY;Object(a.each)(o,function(an){var gn=an.getCanvasBBox(),Xn=gn.minX,Hn=gn.minY,ir=gn.maxX,cr=gn.maxY,Rr=gn.x,zr=gn.y,_r=gn.width,ki=gn.height,Ai=Rr,mi=zr;if(D.indexOf("left")>=0&&(Xn<ge||ir<ge)&&(Ai=ge),D.indexOf("top")>=0&&(Hn<be||cr<be)&&(mi=be),D.indexOf("right")>=0&&(Xn>Ae?Ai=Ae-_r:ir>Ae&&(Ai=Ai-(ir-Ae))),D.indexOf("bottom")>=0&&(Hn>We?mi=We-ki:cr>We&&(mi=mi-(cr-We))),Ai!==Rr||mi!==zr){var Ki=Ai-Rr;if(et==="translate")Ca(an,Ki,mi-zr);else if(et==="ellipsis"){var vo=an.findAll(function(po){return po.get("type")==="text"});vo.forEach(function(po){var yo=Object(a.pick)(po.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),wo=po.getCanvasBBox(),Q=$l(po.attr("text"),wo.width-Math.abs(Ki),yo);po.attr("text",Q)})}else an.hide()}})}}}function tf(c,o,t){var r={fillOpacity:Object(a.isNil)(c.attr("fillOpacity"))?1:c.attr("fillOpacity"),strokeOpacity:Object(a.isNil)(c.attr("strokeOpacity"))?1:c.attr("strokeOpacity"),opacity:Object(a.isNil)(c.attr("opacity"))?1:c.attr("opacity")};c.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),c.animate(r,o)}function ef(c,o,t){var r={fillOpacity:0,strokeOpacity:0,opacity:0},b=o.easing,D=o.duration,et=o.delay;c.animate(r,D,b,function(){c.remove(!0)},et)}function nf(c,o,t){var r,b=o[0],D=o[1];return c.applyToMatrix([b,D,1]),t==="x"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,1],["t",b,D]])),r=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,1],["t",b,D]])):t==="y"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",1,.01],["t",b,D]])),r=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",1,100],["t",b,D]])):t==="xy"&&(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]])),r=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,100],["t",b,D]])),r}function Xa(c,o,t,r,b){var D=t.start,et=t.end,Et=t.getWidth(),Lt=t.getHeight(),ne,ge;b==="y"?(ne=D.x+Et/2,ge=r.y<D.y?r.y:D.y):b==="x"?(ne=r.x>D.x?r.x:D.x,ge=D.y+Lt/2):b==="xy"&&(t.isPolar?(ne=t.getCenter().x,ge=t.getCenter().y):(ne=(D.x+et.x)/2,ge=(D.y+et.y)/2));var be=nf(c,[ne,ge],b);c.animate({matrix:be},o)}function rf(c,o,t){var r=t.coordinate,b=t.minYPoint;Xa(c,o,r,b,"x")}function of(c,o,t){var r=t.coordinate,b=t.minYPoint;Xa(c,o,r,b,"y")}function af(c,o,t){var r=t.coordinate,b=t.minYPoint;Xa(c,o,r,b,"xy")}function sf(c,o,t){var r=c.getTotalLength();c.attr("lineDash",[r]),c.animate(function(b){return{lineDashOffset:(1-b)*r}},o)}function Lu(c,o,t){var r=t.toAttrs,b=r.x,D=r.y;delete r.x,delete r.y,c.attr(r),c.animate({x:b,y:D},o)}function uf(c,o,t){var r=c.getBBox(),b=c.get("origin").mappingData,D=b.points,et=D[0].y-D[1].y>0?r.maxX:r.minX,Et=(r.minY+r.maxY)/2;c.applyToMatrix([et,Et,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-et,-Et],["s",.01,1],["t",et,Et]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-et,-Et],["s",100,1],["t",et,Et]])},o)}function Pa(c,o,t){var r=c.getBBox(),b=c.get("origin").mappingData,D=(r.minX+r.maxX)/2,et=b.points,Et=et[0].y-et[1].y<=0?r.maxY:r.minY;c.applyToMatrix([D,Et,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-D,-Et],["s",1,.01],["t",D,Et]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-D,-Et],["s",1,100],["t",D,Et]])},o)}function Es(c,o){var t,r=Object(lo.getArcParams)(c,o),b=r.startAngle,D=r.endAngle;return!Object(a.isNumberEqual)(b,-Math.PI*.5)&&b<-Math.PI*.5&&(b+=Math.PI*2),!Object(a.isNumberEqual)(D,-Math.PI*.5)&&D<-Math.PI*.5&&(D+=Math.PI*2),o[5]===0&&(t=[D,b],b=t[0],D=t[1]),Object(a.isNumberEqual)(b,Math.PI*1.5)&&(b=Math.PI*-.5),Object(a.isNumberEqual)(D,Math.PI*-.5)&&(D=Math.PI*1.5),{startAngle:b,endAngle:D}}function xa(c){var o;return c[0]==="M"||c[0]==="L"?o=[c[1],c[2]]:(c[0]==="a"||c[0]==="A")&&(o=[c[c.length-2],c[c.length-1]]),o}function qo(c){var o,t,r,b=c.filter(function(cr){return cr[0]==="A"||cr[0]==="a"}),D=b[0],et=b.length>1?b[1]:b[0],Et=c.indexOf(D),Lt=c.indexOf(et),ne=xa(c[Et-1]),ge=xa(c[Lt-1]),be=Es(ne,D),Ae=be.startAngle,We=be.endAngle,an=Es(ge,et),gn=an.startAngle,Xn=an.endAngle;Object(a.isNumberEqual)(Ae,gn)&&Object(a.isNumberEqual)(We,Xn)?(t=Ae,r=We):(t=Math.min(Ae,gn),r=Math.max(We,Xn));var Hn=D[1],ir=b[b.length-1][1];return Hn<ir?(o=[ir,Hn],Hn=o[0],ir=o[1]):Hn===ir&&(ir=0),{startAngle:t,endAngle:r,radius:Hn,innerRadius:ir}}function Zs(c,o,t){var r=t.toAttrs,b=t.coordinate,D=r.path||[],et=D.map(function(ir){return ir[0]});if(!(D.length<1)){var Et=qo(D),Lt=Et.startAngle,ne=Et.endAngle,ge=Et.radius,be=Et.innerRadius,Ae=qo(c.attr("path")),We=Ae.startAngle,an=Ae.endAngle,gn=b.getCenter(),Xn=Lt-We,Hn=ne-an;c.animate(function(ir){var cr=We+ir*Xn,Rr=an+ir*Hn;return Object(at.a)(Object(at.a)({},r),{path:Object(a.isEqual)(et,["M","A","A","Z"])?Mo(gn.x,gn.y,ge,cr,Rr):no(gn.x,gn.y,ge,cr,Rr,be)})},Object(at.a)(Object(at.a)({},o),{callback:function(){c.attr("path",D)}}))}}function Ya(c,o,t){var r=vr(t.coordinate,20),b=r.type,D=r.startState,et=r.endState,Et=c.setClip({type:b,attrs:D});Et.animate(et,Object(at.a)(Object(at.a)({},o),{callback:function(){c&&!c.get("destroyed")&&c.set("clipShape",null),Et.remove(!0)}}))}function os(c,o,t){if(c.isGroup())Object(a.each)(c.getChildren(),function(Et){os(Et,o,t)});else{var r=c.getBBox(),b=(r.minX+r.maxX)/2,D=(r.minY+r.maxY)/2;if(c.applyToMatrix([b,D,1]),t==="zoomIn"){var et=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]]);c.setMatrix(et),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,100],["t",b,D]])},o)}else c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]])},Object(at.a)(Object(at.a)({},o),{callback:function(){c.remove(!0)}}))}}function Bu(c,o,t){os(c,o,"zoomIn")}function Oa(c,o,t){os(c,o,"zoomOut")}function Ko(c){return[e.TOP,e.BOTTOM].includes(c)?{offsetX:0,offsetY:c===e.TOP?-8:8,style:{textAlign:"center",textBaseline:c===e.TOP?"bottom":"top"}}:[e.LEFT,e.RIGHT].includes(c)?{offsetX:c===e.LEFT?-8:8,offsetY:0,style:{textAlign:c===e.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Bo(c,o,t){return{x:c.x+o*Math.cos(t),y:c.y+o*Math.sin(t)}}var Sa=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(t,r){var b=1/2,D={x:.5,y:.5},et=Math.PI*2/t,Et=-1*Math.PI/2+et*r,Lt=b/(1+1/Math.sin(et/2)),ne=Bo(D,b-Lt,Et),ge=Math.PI*5/4,be=Math.PI*1/4;return{start:Bo(ne,Lt,ge),end:Bo(ne,Lt,be)}},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){var r=this,b=this.cfg,D=b.fields,et=b.type,Et=D[0];if(!Et)throw new Error("No `fields` specified!");var Lt=this.getFieldValues(t,Et),ne=Lt.length,ge=[];return Lt.forEach(function(be,Ae){var We=[{field:Et,value:be,values:Lt}],an=Object(a.filter)(t,r.getFacetDataFilter(We)),gn={type:et,data:an,region:r.getRegion(ne,Ae),columnValue:be,columnField:Et,columnIndex:Ae,columnValuesLength:ne,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};ge.push(gn)}),ge},o.prototype.getXAxisOption=function(t,r,b,D){return b},o.prototype.getYAxisOption=function(t,r,b,D){return b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var b=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o}(Di),wa=Sa,Fu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){var r=this,b=this.cfg.fields,D=this.cfg.cols,et=b[0];if(!et)throw new Error("No `fields` specified!");var Et=this.getFieldValues(t,et),Lt=Et.length;D=D||Lt;var ne=this.getPageCount(Lt,D),ge=[];return Et.forEach(function(be,Ae){var We=r.getRowCol(Ae,D),an=We.row,gn=We.col,Xn=[{field:et,value:be,values:Et}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Xn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(ne,D,gn,an),columnValue:be,rowValue:be,columnField:et,rowField:null,columnIndex:gn,rowIndex:an,columnValuesLength:D,rowValuesLength:ne,total:Lt};ge.push(ir)}),ge},o.prototype.getXAxisOption=function(t,r,b,D){return D.rowIndex!==D.rowValuesLength-1&&D.columnValuesLength*D.rowIndex+D.columnIndex+1+D.columnValuesLength<=D.total?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,r,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var b=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o.prototype.getPageCount=function(t,r){return Math.floor((t+r-1)/r)},o.prototype.getRowCol=function(t,r){var b=Math.floor(t/r),D=t%r;return{row:b,col:D}},o}(Di),cf=Fu,Ha=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.generateFacets=function(t){for(var r=this.cfg,b=r.fields,D=r.type,et=b.length,Et=et,Lt=[],ne=0;ne<Et;ne++)for(var ge=b[ne],be=0;be<et;be++){var Ae=b[be],We={type:D,data:t,region:this.getRegion(et,Et,ne,be),columnValue:ge,rowValue:Ae,columnField:ge,rowField:Ae,columnIndex:ne,rowIndex:be,columnValuesLength:Et,rowValuesLength:et};Lt.push(We)}return Lt},o.prototype.getXAxisOption=function(t,r,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,r,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,b){var D=r.columnIndex,et=r.rowIndex,Et=r.columnValuesLength,Lt=r.rowValuesLength,ne=r.columnValue,ge=r.rowValue,be=r.view;if(et===0){var Ae=Object(a.get)(t.cfg.columnTitle,"formatter"),We=Object(a.deepMix)({position:["50%","0%"],content:Ae?Ae(ne):ne},Ko(e.TOP),t.cfg.columnTitle);be.annotation().text(We)}if(D===Et-1){var Ae=Object(a.get)(t.cfg.rowTitle,"formatter"),We=Object(a.deepMix)({position:["100%","50%"],content:Ae?Ae(ge):ge},Ko(e.RIGHT),t.cfg.rowTitle);be.annotation().text(We)}})},o}(Di),Bh=Ha,Fh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this),transpose:!1})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.beforeEachView=function(t,r){this.cfg.transpose?r.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():r.rowIndex%2!=0&&t.coordinate().reflect("y")},o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.generateFacets=function(t){var r=this,b=this.cfg.fields[0],D=[],et=1,Et=1,Lt=[""],ne=[""],ge,be;return this.cfg.transpose?(ge=b,Lt=this.getFieldValues(t,ge).slice(0,2),et=Lt.length):(be=b,ne=this.getFieldValues(t,be).slice(0,2),Et=ne.length),Lt.forEach(function(Ae,We){ne.forEach(function(an,gn){var Xn=[{field:ge,value:Ae,values:Lt},{field:be,value:an,values:ne}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Xn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(Et,et,We,gn),columnValue:Ae,rowValue:an,columnField:ge,rowField:be,columnIndex:We,rowIndex:gn,columnValuesLength:et,rowValuesLength:Et};D.push(ir)})}),D},o.prototype.getXAxisOption=function(t,r,b,D){return D.columnIndex===1||D.rowIndex===1?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,r,b,D){return b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,b){var D=r.columnValue,et=r.rowValue,Et=r.view,Lt=Object(a.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var ne=Object(a.deepMix)({position:["50%","0%"],content:Lt?Lt(D):D},Ko(e.TOP),t.cfg.title);Et.annotation().text(ne)}else{var ne=Object(a.deepMix)({position:["100%","50%"],content:Lt?Lt(et):et},Ko(e.RIGHT),t.cfg.title);Et.annotation().text(ne)}})},o}(Di),Gh=Fh,Uh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(t){var r=this,b=this.cfg.fields,D=b[0],et=b[1],Et=[],Lt=1,ne=1,ge=[""],be=[""];return D&&(ge=this.getFieldValues(t,D),Lt=ge.length),et&&(be=this.getFieldValues(t,et),ne=be.length),ge.forEach(function(Ae,We){be.forEach(function(an,gn){var Xn=[{field:D,value:Ae,values:ge},{field:et,value:an,values:be}],Hn=Object(a.filter)(t,r.getFacetDataFilter(Xn)),ir={type:r.cfg.type,data:Hn,region:r.getRegion(ne,Lt,We,gn),columnValue:Ae,rowValue:an,columnField:D,rowField:et,columnIndex:We,rowIndex:gn,columnValuesLength:Lt,rowValuesLength:ne};Et.push(ir)})}),Et},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r,b){var D=r.columnIndex,et=r.rowIndex,Et=r.columnValuesLength,Lt=r.columnValue,ne=r.rowValue,ge=r.view;if(et===0){var be=Object(a.get)(t.cfg.columnTitle,"formatter"),Ae=Object(a.deepMix)({position:["50%","0%"],content:be?be(Lt):Lt},Ko(e.TOP),t.cfg.columnTitle);ge.annotation().text(Ae)}if(D===Et-1){var be=Object(a.get)(t.cfg.rowTitle,"formatter"),Ae=Object(a.deepMix)({position:["100%","50%"],content:be?be(ne):ne},Ko(e.RIGHT),t.cfg.rowTitle);ge.annotation().text(Ae)}})},o.prototype.getXAxisOption=function(t,r,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):D.columnIndex!==Math.floor((D.columnValuesLength-1)/2)?Object(at.a)(Object(at.a)({},b),{title:null}):b},o.prototype.getYAxisOption=function(t,r,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):D.rowIndex!==Math.floor((D.rowValuesLength-1)/2)?Object(at.a)(Object(at.a)({},b),{title:null}):b},o}(Di),lf=Uh,Sc=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return o.prototype.afterEachView=function(t,r){this.processAxis(t,r)},o.prototype.beforeEachView=function(t,r){},o.prototype.init=function(){c.prototype.init.call(this),this.view.on(m.AFTER_RENDER,this.afterChartRender)},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.generateFacets=function(t){var r=this.cfg.fields;if(!r.length)throw new Error("Please specify for the fields for rootFacet!");var b=[],D={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return b.push(D),D.children=this.getChildFacets(t,1,b),this.setRegion(b),b},o.prototype.setRegion=function(t){var r=this;this.forceColIndex(t),t.forEach(function(b){b.region=r.getRegion(b.rowValuesLength,b.columnValuesLength,b.columnIndex,b.rowIndex)})},o.prototype.getRegion=function(t,r,b,D){var et=1/r,Et=1/t,Lt={x:et*b,y:Et*D},ne={x:Lt.x+et,y:Lt.y+Et*2/3};return{start:Lt,end:ne}},o.prototype.forceColIndex=function(t){var r=this,b=[],D=0;t.forEach(function(Ae){r.isLeaf(Ae)&&(b.push(Ae),Ae.columnIndex=D,D++)}),b.forEach(function(Ae){Ae.columnValuesLength=b.length});for(var et=this.cfg.fields.length,Et=et-1;Et>=0;Et--)for(var Lt=this.getFacetsByLevel(t,Et),ne=0,ge=Lt;ne<ge.length;ne++){var be=ge[ne];this.isLeaf(be)||(be.originColIndex=be.columnIndex,be.columnIndex=this.getRegionIndex(be.children),be.columnValuesLength=b.length)}},o.prototype.getFacetsByLevel=function(t,r){var b=[];return t.forEach(function(D){D.rowIndex===r&&b.push(D)}),b},o.prototype.getRegionIndex=function(t){var r=t[0],b=t[t.length-1];return(b.columnIndex-r.columnIndex)/2+r.columnIndex},o.prototype.isLeaf=function(t){return!t.children||!t.children.length},o.prototype.getRows=function(){return this.cfg.fields.length+1},o.prototype.getChildFacets=function(t,r,b){var D=this,et=this.cfg.fields,Et=et.length;if(!(Et<r)){var Lt=[],ne=et[r-1],ge=this.getFieldValues(t,ne);return ge.forEach(function(be,Ae){var We=[{field:ne,value:be,values:ge}],an=t.filter(D.getFacetDataFilter(We));if(an.length){var gn={type:D.cfg.type,data:an,region:null,columnValue:be,rowValue:"",columnField:ne,rowField:"",columnIndex:Ae,rowValuesLength:D.getRows(),columnValuesLength:1,rowIndex:r,children:D.getChildFacets(an,r+1,b)};Lt.push(gn),b.push(gn)}}),Lt}},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(r){var b=r.columnValue,D=r.view,et=Object(a.get)(t.cfg.title,"formatter"),Et=Object(a.deepMix)({position:["50%","0%"],content:et?et(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Et)})},o.prototype.drawLines=function(t){var r=this;t.forEach(function(b){if(!r.isLeaf(b)){var D=b.children;r.addFacetLines(b,D)}})},o.prototype.addFacetLines=function(t,r){var b=this,D=t.view,et=D.coordinateBBox,Et={x:et.x+et.width/2,y:et.y+et.height};r.forEach(function(Lt){var ne=Lt.view.coordinateBBox,ge={x:ne.bl.x+(ne.tr.x-ne.bl.x)/2,y:ne.tr.y},be={x:Et.x,y:Et.y+(ge.y-Et.y)/2},Ae={x:ge.x,y:be.y};b.drawLine([Et,be,Ae,ge])})},o.prototype.getPath=function(t){var r=[],b=this.cfg.line.smooth;return b?(r.push(["M",t[0].x,t[0].y]),r.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(D,et){et===0?r.push(["M",D.x,D.y]):r.push(["L",D.x,D.y])}),r},o.prototype.drawLine=function(t){var r=this.getPath(t),b=this.cfg.line.style;this.container.addShape("path",{attrs:Object(a.assign)({path:r},b)})},o.prototype.getXAxisOption=function(t,r,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.getYAxisOption=function(t,r,b,D){return D.originColIndex!==0&&D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o}(Di),_h=Sc;function ff(c){var o=Object(at.d)(c);o.sort(function(r,b){return r-b});var t=o.length;return t===0?0:t%2==1?o[(t-1)/2]:(o[t/2]+o[t/2-1])/2}function hf(c){var o=Object(a.reduce)(c,function(t,r){return t+=isNaN(r)||!Object(a.isNumber)(r)?0:r},0);return c.length===0?0:o/c.length}function $s(c,o){var t;switch(c){case"start":return 0;case"end":return 1;case"median":{t=o.isCategory?ff(o.values.map(function(r,b){return b})):ff(o.values);break}case"mean":{t=o.isCategory?(o.values.length-1)/2:hf(o.values);break}case"min":t=o.isCategory?0:o[c];break;case"max":t=o.isCategory?o.values.length-1:o[c];break;default:t=c;break}return o.scale(t)}var Gu=["regionFilter","shape"],zh=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.cache=new Map,r.foregroundContainer=r.view.getLayer(A.FORE).addGroup(),r.backgroundContainer=r.view.getLayer(A.BG).addGroup(),r.option=[],r}return Object.defineProperty(o.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.layout=function(){this.update()},o.prototype.render=function(){},o.prototype.update=function(){var t=this;this.onAfterRender(function(){var b=new Map;Object(a.each)(t.option,function(D){if(Object(a.includes)(Gu,D.type)){var et=t.updateOrCreate(D);et&&b.set(t.getCacheKey(D),et)}}),t.cache=t.syncCache(b)});var r=new Map;Object(a.each)(this.option,function(b){if(!Object(a.includes)(Gu,b.type)){var D=t.updateOrCreate(b);D&&r.set(t.getCacheKey(b),D)}}),this.cache=this.syncCache(r)},o.prototype.clear=function(t){t===void 0&&(t=!1),c.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},o.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},o.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},o.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach(function(r){r.animateOption&&r.once(S.AFTER_DRAW_ANIMATE,function(){t()})}):this.view.getRootView().once(m.AFTER_RENDER,function(){t()})},o.prototype.createAnnotation=function(t){var r=t.type,b=Qr.Annotation[Object(a.upperFirst)(r)];if(b){var D=this.getAnnotationTheme(r),et=this.getAnnotationCfg(r,t,D),Et=new b(et);return{component:Et,layer:this.isTop(et)?A.FORE:A.BG,direction:e.NONE,type:i.ANNOTATION,extra:t}}},o.prototype.annotation=function(t){this.option.push(t)},o.prototype.arc=function(t){return this.annotation(Object(at.a)({type:"arc"},t)),this},o.prototype.image=function(t){return this.annotation(Object(at.a)({type:"image"},t)),this},o.prototype.line=function(t){return this.annotation(Object(at.a)({type:"line"},t)),this},o.prototype.region=function(t){return this.annotation(Object(at.a)({type:"region"},t)),this},o.prototype.text=function(t){return this.annotation(Object(at.a)({type:"text"},t)),this},o.prototype.dataMarker=function(t){return this.annotation(Object(at.a)({type:"dataMarker"},t)),this},o.prototype.dataRegion=function(t){this.annotation(Object(at.a)({type:"dataRegion"},t))},o.prototype.regionFilter=function(t){this.annotation(Object(at.a)({type:"regionFilter"},t))},o.prototype.shape=function(t){this.annotation(Object(at.a)({type:"shape"},t))},o.prototype.html=function(t){this.annotation(Object(at.a)({type:"html"},t))},o.prototype.parsePosition=function(t){var r=this.view.getXScale(),b=this.view.getScalesByDim("y"),D=Object(a.isFunction)(t)?t.call(null,r,b):t,et=0,Et=0;if(Object(a.isArray)(D)){var Lt=D[0],ne=D[1];if(Object(a.isString)(Lt)&&Lt.indexOf("%")!==-1&&!isNaN(Lt.slice(0,-1)))return this.parsePercentPosition(D);et=$s(Lt,r),Et=$s(ne,Object.values(b)[0])}else if(!Object(a.isNil)(D))for(var ge=0,be=Object(a.keys)(D);ge<be.length;ge++){var Ae=be[ge],We=D[Ae];Ae===r.field&&(et=$s(We,r)),b[Ae]&&(Et=$s(We,b[Ae]))}return this.view.getCoordinate().convert({x:et,y:Et})},o.prototype.getRegionPoints=function(t,r){var b=this,D=this.view.getXScale(),et=this.view.getScalesByDim("y"),Et=Object.values(et)[0],Lt=D.field,ne=this.view.getData(),ge=Object(a.isArray)(t)?t[0]:t[Lt],be=Object(a.isArray)(r)?r[0]:r[Lt],Ae=[],We;return Object(a.each)(ne,function(an,gn){if(an[Lt]===ge&&(We=gn),gn>=We){var Xn=b.parsePosition([an[Lt],an[Et.field]]);Xn&&Ae.push(Xn)}if(an[Lt]===be)return!1}),Ae},o.prototype.parsePercentPosition=function(t){var r=parseFloat(t[0])/100,b=parseFloat(t[1])/100,D=this.view.getCoordinate(),et=D.start,Et=D.end,Lt={x:Math.min(et.x,Et.x),y:Math.min(et.y,Et.y)},ne=D.getWidth()*r+Lt.x,ge=D.getHeight()*b+Lt.y;return{x:ne,y:ge}},o.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),r=t.start,b=t.end,D=t.getWidth(),et=t.getHeight(),Et={x:Math.min(r.x,b.x),y:Math.min(r.y,b.y)};return{x:Et.x,y:Et.y,minX:Et.x,minY:Et.y,maxX:Et.x+D,maxY:Et.y+et,width:D,height:et}},o.prototype.getAnnotationCfg=function(t,r,b){var D=this,et=this.view.getCoordinate(),Et=this.view.getCanvas(),Lt={};if(Object(a.isNil)(r))return null;if(t==="arc"){var ne=r,ge=ne.start,be=ne.end,Ae=this.parsePosition(ge),We=this.parsePosition(be),an=$n(et,Ae),gn=$n(et,We);an>gn&&(gn=Math.PI*2+gn),Lt={center:et.getCenter(),radius:rn(et,Ae),startAngle:an,endAngle:gn}}else if(t==="image"){var Xn=r,ge=Xn.start,be=Xn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),src:r.src}}else if(t==="line"){var Hn=r,ge=Hn.start,be=Hn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),text:Object(a.get)(r,"text",null)}}else if(t==="region"){var ir=r,ge=ir.start,be=ir.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="text"){var cr=this.view.getData(),Rr=r,zr=Rr.position,_r=Rr.content,ki=Object(at.c)(Rr,["position","content"]),Ai=_r;Object(a.isFunction)(_r)&&(Ai=_r(cr)),Lt=Object(at.a)(Object(at.a)(Object(at.a)({},this.parsePosition(zr)),ki),{content:Ai})}else if(t==="dataMarker"){var mi=r,zr=mi.position,Ki=mi.point,vo=mi.line,po=mi.text,yo=mi.autoAdjust,wo=mi.direction;Lt=Object(at.a)(Object(at.a)({},this.parsePosition(zr)),{coordinateBBox:this.getCoordinateBBox(),point:Ki,line:vo,text:po,autoAdjust:yo,direction:wo})}else if(t==="dataRegion"){var Q=r,ge=Q.start,be=Q.end,U=Q.region,po=Q.text,w=Q.lineLength;Lt={points:this.getRegionPoints(ge,be),region:U,text:po,lineLength:w}}else if(t==="regionFilter"){var L=r,ge=L.start,be=L.end,J=L.apply,jt=L.color,Rt=this.view.geometries,K=[],Pt=function yn(Pn){!Pn||(Pn.isGroup()?Pn.getChildren().forEach(function(En){return yn(En)}):K.push(Pn))};Object(a.each)(Rt,function(yn){J?Object(a.contains)(J,yn.type)&&Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)}):Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)})}),Lt={color:jt,shapes:K,start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="shape"){var Qt=r,qt=Qt.render,xe=Object(at.c)(Qt,["render"]),Ie=function(qe){if(Object(a.isFunction)(r.render))return qt(qe,D.view,{parsePosition:D.parsePosition.bind(D)})};Lt=Object(at.a)(Object(at.a)({},xe),{render:Ie})}else if(t==="html"){var Xe=r,Re=Xe.html,zr=Xe.position,xe=Object(at.c)(Xe,["html","position"]),Ye=function(Pn){return Object(a.isFunction)(Re)?Re(Pn,D.view):Re};Lt=Object(at.a)(Object(at.a)(Object(at.a)({},xe),this.parsePosition(zr)),{parent:Et.get("el").parentNode,html:Ye})}var Je=Object(a.deepMix)({},b,Object(at.a)(Object(at.a)({},Lt),{top:r.top,style:r.style,offsetX:r.offsetX,offsetY:r.offsetY}));return t!=="html"&&(Je.container=this.getComponentContainer(Je)),Je.animate=this.view.getOptions().animate&&Je.animate&&Object(a.get)(r,"animate",Je.animate),Je.animateOption=Object(a.deepMix)({},ma,Je.animateOption,r.animateOption),Je},o.prototype.isTop=function(t){return Object(a.get)(t,"top",!0)},o.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},o.prototype.getAnnotationTheme=function(t){return Object(a.get)(this.view.getTheme(),["components","annotation",t],{})},o.prototype.updateOrCreate=function(t){var r=this.cache.get(this.getCacheKey(t));if(r){var b=t.type,D=this.getAnnotationTheme(b),et=this.getAnnotationCfg(b,t,D);te(et,["container"]),r.component.update(et),Object(a.includes)(Gu,t.type)&&r.component.render()}else r=this.createAnnotation(t),r&&(r.component.init(),Object(a.includes)(Gu,t.type)&&r.component.render());return r},o.prototype.syncCache=function(t){var r=this,b=new Map(this.cache);return t.forEach(function(D,et){b.set(et,D)}),b.forEach(function(D,et){Object(a.find)(r.option,function(Et){return et===r.getCacheKey(Et)})||(D.component.destroy(),b.delete(et))}),b},o.prototype.getCacheKey=function(t){return t},o}(Do),df=zh;function qs(c,o){return Object(a.get)(c,["components","axis",o,"grid"],{})}function Uu(c,o,t,r){var b=[],D=o.getTicks();return c.isPolar&&D.push({value:1,text:"",tickValue:""}),D.reduce(function(et,Et,Lt){var ne=Et.value;if(r)b.push({points:[c.convert(t==="y"?{x:0,y:ne}:{x:ne,y:0}),c.convert(t==="y"?{x:1,y:ne}:{x:ne,y:1})]});else if(Lt){var ge=et.value,be=(ge+ne)/2;b.push({points:[c.convert(t==="y"?{x:0,y:be}:{x:be,y:0}),c.convert(t==="y"?{x:1,y:be}:{x:be,y:1})]})}return Et},D[0]),b}function Ka(c,o,t,r,b){var D=o.values.length,et=[],Et=t.getTicks();return Et.reduce(function(Lt,ne){var ge=Lt?Lt.value:ne.value,be=ne.value,Ae=(ge+be)/2;return b==="x"?et.push({points:[c.convert({x:r?be:Ae,y:0}),c.convert({x:r?be:Ae,y:1})]}):et.push({points:Object(a.map)(Array(D+1),function(We,an){return c.convert({x:an/D,y:r?be:Ae})})}),ne},Et[0]),et}function vf(c,o){var t=Object(a.get)(o,"grid");if(t===null)return!1;var r=Object(a.get)(c,"grid");return!(t===void 0&&r===null)}var Ja=["container"],pf=Object(at.a)(Object(at.a)({},ma),{appear:null}),No=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.cache=new Map,r.gridContainer=r.view.getLayer(A.BG).addGroup(),r.axisContainer=r.view.getLayer(A.BG).addGroup(),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this,r=this.view.getCoordinate();Object(a.each)(this.getComponents(),function(b){var D=b.component,et=b.direction,Et=b.type,Lt=b.extra,ne=Lt.dim,ge=Lt.scale,be=Lt.alignTick,Ae;if(Et===i.AXIS)r.isPolar?ne==="x"?Ae=r.isTransposed?Pr(r,et):Si(r):ne==="y"&&(Ae=r.isTransposed?Si(r):Pr(r,et)):Ae=Pr(r,et);else if(Et===i.GRID)if(r.isPolar){var We=void 0;r.isTransposed?We=ne==="x"?Ka(r,t.view.getYScales()[0],ge,be,ne):Uu(r,ge,ne,be):We=ne==="x"?Uu(r,ge,ne,be):Ka(r,t.view.getXScale(),ge,be,ne),Ae={items:We,center:t.view.getCoordinate().getCenter()}}else Ae={items:Uu(r,ge,ne,be)};D.update(Ae)})},o.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var r=new Map;this.cache.forEach(function(b,D){t.has(D)?r.set(D,b):b.component.destroy()}),this.cache=r},o.prototype.clear=function(){c.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},o.prototype.updateXAxes=function(t){var r=this.view.getXScale();if(!(!r||r.isIdentity)){var b=_i(this.option,r.field);if(b!==!1){var D=Xi(b,e.BOTTOM),et=A.BG,Et="x",Lt=this.view.getCoordinate(),ne=this.getId("axis",r.field),ge=this.getId("grid",r.field);if(Lt.isRect){var be=this.cache.get(ne);if(be){var Ae=this.getLineAxisCfg(r,b,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else be=this.createLineAxis(r,b,et,D,Et),this.cache.set(ne,be),t.set(ne,be);var We=this.cache.get(ge);if(We){var Ae=this.getLineGridCfg(r,b,D,Et);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else We=this.createLineGrid(r,b,et,D,Et),We&&(this.cache.set(ge,We),t.set(ge,We))}else if(Lt.isPolar){var be=this.cache.get(ne);if(be){var Ae=Lt.isTransposed?this.getLineAxisCfg(r,b,e.RADIUS):this.getCircleAxisCfg(r,b,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(b))return;be=this.createLineAxis(r,b,et,e.RADIUS,Et)}else be=this.createCircleAxis(r,b,et,D,Et);this.cache.set(ne,be),t.set(ne,be)}var We=this.cache.get(ge);if(We){var Ae=Lt.isTransposed?this.getCircleGridCfg(r,b,e.RADIUS,Et):this.getLineGridCfg(r,b,e.CIRCLE,Et);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(b))return;We=this.createCircleGrid(r,b,et,e.RADIUS,Et)}else We=this.createLineGrid(r,b,et,e.CIRCLE,Et);We&&(this.cache.set(ge,We),t.set(ge,We))}}}}},o.prototype.updateYAxes=function(t){var r=this,b=this.view.getYScales();Object(a.each)(b,function(D,et){if(!(!D||D.isIdentity)){var Et=D.field,Lt=_i(r.option,Et);if(Lt!==!1){var ne=A.BG,ge="y",be=r.getId("axis",Et),Ae=r.getId("grid",Et),We=r.view.getCoordinate();if(We.isRect){var an=Xi(Lt,et===0?e.LEFT:e.RIGHT),gn=r.cache.get(be);if(gn){var Xn=r.getLineAxisCfg(D,Lt,an);te(Xn,Ja),gn.component.update(Xn),t.set(be,gn)}else gn=r.createLineAxis(D,Lt,ne,an,ge),r.cache.set(be,gn),t.set(be,gn);var Hn=r.cache.get(Ae);if(Hn){var Xn=r.getLineGridCfg(D,Lt,an,ge);te(Xn,Ja),Hn.component.update(Xn),t.set(Ae,Hn)}else Hn=r.createLineGrid(D,Lt,ne,an,ge),Hn&&(r.cache.set(Ae,Hn),t.set(Ae,Hn))}else if(We.isPolar){var gn=r.cache.get(be);if(gn){var Xn=We.isTransposed?r.getCircleAxisCfg(D,Lt,e.CIRCLE):r.getLineAxisCfg(D,Lt,e.RADIUS);te(Xn,Ja),gn.component.update(Xn),t.set(be,gn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;gn=r.createCircleAxis(D,Lt,ne,e.CIRCLE,ge)}else gn=r.createLineAxis(D,Lt,ne,e.RADIUS,ge);r.cache.set(be,gn),t.set(be,gn)}var Hn=r.cache.get(Ae);if(Hn){var Xn=We.isTransposed?r.getLineGridCfg(D,Lt,e.CIRCLE,ge):r.getCircleGridCfg(D,Lt,e.RADIUS,ge);te(Xn,Ja),Hn.component.update(Xn),t.set(Ae,Hn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;Hn=r.createLineGrid(D,Lt,ne,e.CIRCLE,ge)}else Hn=r.createCircleGrid(D,Lt,ne,e.RADIUS,ge);Hn&&(r.cache.set(Ae,Hn),t.set(Ae,Hn))}}}}})},o.prototype.createLineAxis=function(t,r,b,D,et){var Et={component:new gi(this.getLineAxisCfg(t,r,D)),layer:b,direction:D===e.RADIUS?e.NONE:D,type:i.AXIS,extra:{dim:et,scale:t}};return Et.component.set("field",t.field),Et.component.init(),Et},o.prototype.createLineGrid=function(t,r,b,D,et){var Et=this.getLineGridCfg(t,r,D,et);if(Et){var Lt={component:new bi(Et),layer:b,direction:e.NONE,type:i.GRID,extra:{dim:et,scale:t,alignTick:Object(a.get)(Et,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.createCircleAxis=function(t,r,b,D,et){var Et={component:new Oi(this.getCircleAxisCfg(t,r,D)),layer:b,direction:D,type:i.AXIS,extra:{dim:et,scale:t}};return Et.component.set("field",t.field),Et.component.init(),Et},o.prototype.createCircleGrid=function(t,r,b,D,et){var Et=this.getCircleGridCfg(t,r,D,et);if(Et){var Lt={component:new zi(Et),layer:b,direction:e.NONE,type:i.GRID,extra:{dim:et,scale:t,alignTick:Object(a.get)(Et,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.getLineAxisCfg=function(t,r,b){var D=this.axisContainer,et=this.view.getCoordinate(),Et=Pr(et,b),Lt=Bi(t,r),ne=ii(this.view.getTheme(),b),ge=Object(a.get)(r,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},r):r,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Et),{ticks:t.getTicks().map(function(cr){return{id:""+cr.tickValue,name:cr.text,value:cr.value}}),verticalFactor:et.isPolar?vi(Et,et.getCenter())*-1:vi(Et,et.getCenter()),theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;be.animateOption=an,be.animate=We;var gn=ri(Et),Xn=Object(a.get)(be,"verticalLimitLength",gn?1/3:1/2);if(Xn<=1){var Hn=this.view.getCanvas().get("width"),ir=this.view.getCanvas().get("height");be.verticalLimitLength=Xn*(gn?Hn:ir)}return be},o.prototype.getLineGridCfg=function(t,r,b,D){if(!!vf(ii(this.view.getTheme(),b),r)){var et=qs(this.view.getTheme(),b),Et=Object(a.deepMix)({container:this.gridContainer},et,Object(a.get)(r,"grid"),this.getAnimateCfg(r));return Et.items=Uu(this.view.getCoordinate(),t,D,Object(a.get)(Et,"alignTick",!0)),Et}},o.prototype.getCircleAxisCfg=function(t,r,b){var D=this.axisContainer,et=this.view.getCoordinate(),Et=t.getTicks().map(function(gn){return{id:""+gn.tickValue,name:gn.text,value:gn.value}});!t.isCategory&&Math.abs(et.endAngle-et.startAngle)===Math.PI*2&&Et.pop();var Lt=Bi(t,r),ne=ii(this.view.getTheme(),e.CIRCLE),ge=Object(a.get)(r,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},r):r,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Si(this.view.getCoordinate())),{ticks:Et,verticalFactor:1,theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;return be.animate=We,be.animateOption=an,be},o.prototype.getCircleGridCfg=function(t,r,b,D){if(!!vf(ii(this.view.getTheme(),b),r)){var et=qs(this.view.getTheme(),e.RADIUS),Et=Object(a.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},et,Object(a.get)(r,"grid"),this.getAnimateCfg(r)),Lt=Object(a.get)(Et,"alignTick",!0),ne=D==="x"?this.view.getYScales()[0]:this.view.getXScale();return Et.items=Ka(this.view.getCoordinate(),ne,t,Lt,D),Et}},o.prototype.getId=function(t,r){var b=this.view.getCoordinate();return t+"-"+r+"-"+b.type},o.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&Object(a.get)(t,"animate"),animateOption:t&&t.animateOption?Object(a.deepMix)({},pf,t.animateOption):pf}},o}(Do),gf=No;function Da(c,o,t){return t===e.TOP?[c.minX+c.width/2-o.width/2,c.minY]:t===e.BOTTOM?[c.minX+c.width/2-o.width/2,c.maxY-o.height]:t===e.LEFT?[c.minX,c.minY+c.height/2-o.height/2]:t===e.RIGHT?[c.maxX-o.width,c.minY+c.height/2-o.height/2]:t===e.TOP_LEFT||t===e.LEFT_TOP?[c.tl.x,c.tl.y]:t===e.TOP_RIGHT||t===e.RIGHT_TOP?[c.tr.x-o.width,c.tr.y]:t===e.BOTTOM_LEFT||t===e.LEFT_BOTTOM?[c.bl.x,c.bl.y-o.height]:t===e.BOTTOM_RIGHT||t===e.RIGHT_BOTTOM?[c.br.x-o.width,c.br.y-o.height]:[0,0]}function yf(c,o){if(o.isTransposed)switch(c){case e.BOTTOM:return e.LEFT;case e.LEFT:return e.BOTTOM;case e.RIGHT:return e.TOP;case e.TOP:return e.RIGHT}return c}function mf(c){return c===e.LEFT?e.RIGHT:c===e.RIGHT?e.LEFT:c}function bf(c){return c===e.TOP?e.BOTTOM:c===e.BOTTOM?e.TOP:c}function Vh(c,o){var t=o.matrix[0],r=o.matrix[4],b=c;return t<0&&(b=mf(b)),r<0&&(b=bf(b)),b}function Wh(c,o){var t=c;return o.isReflect("x")&&(t=mf(t)),o.isReflect("y")&&(t=bf(t)),t}function Xh(c,o){var t=c;return t=yf(t,o),t=Vh(t,o),t=Wh(t,o),t}function xf(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o],c)}function _u(c){return Object(a.get)(c,"position",e.BOTTOM)}var tu=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.container=r.view.getLayer(A.FORE).addGroup(),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,Object(a.each)(this.components,function(r){var b=r.component,D=r.direction,et=Fn(D),Et=t.getCategoryLegendSizeCfg(et),Lt=b.get("maxWidth"),ne=b.get("maxHeight");b.update({maxWidth:Math.min(Et.maxWidth,Lt||0),maxHeight:Math.min(Et.maxHeight,ne||0)});var ge=b.get("padding"),be=b.getLayoutBBox(),Ae=new Qe(be.x,be.y,be.width,be.height).expand(ge),We=Da(t.view.viewBBox,Ae,D),an=We[0],gn=We[1],Xn=Da(t.layoutBBox,Ae,D),Hn=Xn[0],ir=Xn[1],cr=0,Rr=0;D.startsWith("top")||D.startsWith("bottom")?(cr=an,Rr=ir):(cr=Hn,Rr=gn),b.setLocation({x:cr+ge[3],y:Rr+ge[0]}),t.layoutBBox=t.layoutBBox.cut(Ae,D)})},o.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var r={},b=function(We,an,gn){var Xn=t.getId(gn.field),Hn=t.getComponentById(Xn);if(Hn){var ir=void 0,cr=xf(t.option,gn.field);cr!==!1&&(Object(a.get)(cr,"custom")?ir=t.getCategoryCfg(We,an,gn,cr,!0):gn.isLinear?ir=t.getContinuousCfg(We,an,gn,cr):gn.isCategory&&(ir=t.getCategoryCfg(We,an,gn,cr))),ir&&(te(ir,["container"]),Hn.direction=_u(cr),Hn.component.update(ir),r[Xn]=!0)}else{var Rr=t.createFieldLegend(We,an,gn);Rr&&(Rr.component.init(),t.components.push(Rr),r[Xn]=!0)}};if(Object(a.get)(this.option,"custom")){var D="global-custom",et=this.getComponentById(D);if(et){var Et=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);te(Et,["container"]),et.component.update(Et),r[D]=!0}else{var Lt=this.createCustomLegend(void 0,void 0,void 0,this.option);if(Lt){Lt.init();var ne=A.FORE,ge=_u(this.option);this.components.push({id:D,component:Lt,layer:ne,direction:ge,type:i.LEGEND,extra:void 0}),r[D]=!0}}}else this.loopLegends(b);var be=[];Object(a.each)(this.getComponents(),function(Ae){r[Ae.id]?be.push(Ae):Ae.component.destroy()}),this.components=be},o.prototype.clear=function(){c.prototype.clear.call(this),this.container.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.container.remove(!0)},o.prototype.getGeometries=function(t){var r=this,b=t.geometries;return Object(a.each)(t.views,function(D){b=b.concat(r.getGeometries(D))}),b},o.prototype.loopLegends=function(t){var r=this.view.getRootView()===this.view;if(!!r){var b=this.getGeometries(this.view),D={};Object(a.each)(b,function(et){var Et=et.getGroupAttributes();Object(a.each)(Et,function(Lt){var ne=Lt.getScale(Lt.type);!ne||ne.type==="identity"||D[ne.field]||(t(et,Lt,ne),D[ne.field]=!0)})})}},o.prototype.createFieldLegend=function(t,r,b){var D,et=xf(this.option,b.field),Et=A.FORE,Lt=_u(et);if(et!==!1&&(Object(a.get)(et,"custom")?D=this.createCustomLegend(t,r,b,et):b.isLinear?D=this.createContinuousLegend(t,r,b,et):b.isCategory&&(D=this.createCategoryLegend(t,r,b,et))),D)return D.set("field",b.field),{id:this.getId(b.field),component:D,layer:Et,direction:Lt,type:i.LEGEND,extra:{scale:b}}},o.prototype.createCustomLegend=function(t,r,b,D){var et=this.getCategoryCfg(t,r,b,D,!0);return new Qi(et)},o.prototype.createContinuousLegend=function(t,r,b,D){var et=this.getContinuousCfg(t,r,b,D);return new io(et)},o.prototype.createCategoryLegend=function(t,r,b,D){var et=this.getCategoryCfg(t,r,b,D);return new Qi(et)},o.prototype.getContinuousCfg=function(t,r,b,D){var et=b.getTicks(),Et=Object(a.find)(et,function(gn){return gn.value===0}),Lt=Object(a.find)(et,function(gn){return gn.value===1}),ne=et.map(function(gn){var Xn=gn.value,Hn=gn.tickValue,ir=r.mapping(b.invert(Xn)).join("");return{value:Hn,attrValue:ir,color:ir,scaleValue:Xn}});Et||ne.push({value:b.min,attrValue:r.mapping(b.invert(0)).join(""),color:r.mapping(b.invert(0)).join(""),scaleValue:0}),Lt||ne.push({value:b.max,attrValue:r.mapping(b.invert(1)).join(""),color:r.mapping(b.invert(1)).join(""),scaleValue:1}),ne.sort(function(gn,Xn){return gn.value-Xn.value});var ge={min:Object(a.head)(ne).value,max:Object(a.last)(ne).value,colors:[],rail:{type:r.type},track:{}};r.type==="size"&&(ge.track={style:{fill:r.type==="size"?this.view.getTheme().defaultColor:void 0}}),r.type==="color"&&(ge.colors=ne.map(function(gn){return gn.attrValue}));var be=this.container,Ae=_u(D),We=Fn(Ae),an=Object(a.get)(D,"title");return an&&(an=Object(a.deepMix)({text:xr(b)},an)),ge.container=be,ge.layout=We,ge.title=an,ge.animateOption=ma,this.mergeLegendCfg(ge,D,"continuous")},o.prototype.getCategoryCfg=function(t,r,b,D,et){var Et=this.container,Lt=Object(a.get)(D,"position",e.BOTTOM),ne=Object(a.get)(this.view.getTheme(),["components","legend",Lt,"marker"]),ge=Object(a.get)(D,"marker"),be=Fn(Lt),Ae=et?ur(ne,ge,D.items):sr(this.view,t,r,ne,ge),We=Object(a.get)(D,"title");We&&(We=Object(a.deepMix)({text:b?xr(b):""},We));var an=this.getCategoryLegendSizeCfg(be);an.container=Et,an.layout=be,an.items=Ae,an.title=We,an.animateOption=ma;var gn=this.mergeLegendCfg(an,D,Lt);gn.reversed&&gn.items.reverse();var Xn=Object(a.get)(gn,"maxItemWidth");return Xn&&Xn<=1&&(gn.maxItemWidth=this.view.viewBBox.width*Xn),gn},o.prototype.mergeLegendCfg=function(t,r,b){var D=b.split("-")[0],et=Object(a.get)(this.view.getTheme(),["components","legend",D],{});return Object(a.deepMix)({},et,t,r)},o.prototype.getId=function(t){return this.name+"-"+t},o.prototype.getComponentById=function(t){return Object(a.find)(this.components,function(r){return r.id===t})},o.prototype.getCategoryLegendSizeCfg=function(t){var r=this.view.viewBBox,b=r.width,D=r.height;return t==="vertical"?{maxWidth:b*d,maxHeight:D}:{maxWidth:b,maxHeight:D*d}},o}(Do),Of=tu,Ms=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.onChangeFn=a.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(b){var D=b[0],et=b[1];r.start=D,r.end=et,r.changeViewData(D,et)},r.container=r.view.getLayer(A.FORE).addGroup(),r.onChangeFn=Object(a.throttle)(r.onValueChange,20,{leading:!0}),r.width=0,r.view.on(m.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(m.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(m.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(m.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),r=t.start,b=t.end;Object(a.isNil)(this.start)&&(this.start=r,this.end=b);var D=this.view.getOptions().data;this.option&&!Object(a.isEmpty)(D)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var r=this.view.coordinateBBox.width,b=this.slider.component.get("padding"),D=b[0],et=b[1],Et=b[2],Lt=b[3],ne=this.slider.component.getLayoutBBox(),ge=new Qe(ne.x,ne.y,Math.min(ne.width,r),ne.height).expand(b),be=this.getMinMaxText(this.start,this.end),Ae=be.minText,We=be.maxText,an=Da(this.view.viewBBox,ge,e.BOTTOM),gn=an[0],Xn=an[1],Hn=Da(this.view.coordinateBBox,ge,e.BOTTOM),ir=Hn[0],cr=Hn[1];this.slider.component.update(Object(at.a)(Object(at.a)({},this.getSliderCfg()),{x:ir+Lt,y:Xn+D,width:this.width,start:this.start,end:this.end,minText:Ae,maxText:We})),this.view.viewBBox=this.view.viewBBox.cut(ge,e.BOTTOM)}},o.prototype.update=function(){this.render()},o.prototype.createSlider=function(){var t=this.getSliderCfg(),r=new Qr.Slider(Object(at.a)({container:this.container},t));return r.init(),{component:r,layer:A.FORE,direction:e.BOTTOM,type:i.SLIDER}},o.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var r=this.getMinMaxText(this.start,this.end),b=r.minText,D=r.maxText;t=Object(at.a)(Object(at.a)({},t),{width:this.width,start:this.start,end:this.end,minText:b,maxText:D})}return this.slider.component.update(t),this.slider},o.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},o.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Object(a.isObject)(this.option)){var r=Object(at.a)({data:this.getData()},Object(a.get)(this.option,"trendCfg",{}));t=Object(a.deepMix)({},t,this.getThemeOptions(),this.option),t=Object(at.a)(Object(at.a)({},t),{trendCfg:r})}return t.start=Object(a.clamp)(Math.min(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t.end=Object(a.clamp)(Math.max(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t},o.prototype.getData=function(){var t=this.view.getOptions().data,r=this.view.getYScales()[0],b=this.view.getGroupScales();if(b.length){var D=b[0],et=D.field,Et=D.ticks;return t.reduce(function(Lt,ne){return ne[et]===Et[0]&&Lt.push(ne[r.field]),Lt},[])}return t.map(function(Lt){return Lt[r.field]||0})},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.getMinMaxText=function(t,r){var b=this.view.getOptions().data,D=this.view.getXScale(),et=!0,Et=Object(a.valuesOfKey)(b,D.field),Lt=et?Et:Et.reverse(),ne=Object(a.size)(b);if(!D||!ne)return{};var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(r*(ge-1)),We=Object(a.get)(Lt,[be]),an=Object(a.get)(Lt,[Ae]),gn=this.getSliderCfg().formatter;return gn&&(We=gn(We,b[be],be),an=gn(an,b[Ae],Ae)),{minText:We,maxText:an}},o.prototype.changeViewData=function(t,r){var b=this.view.getOptions().data,D=this.view.getXScale(),et=!0,Et=Object(a.valuesOfKey)(b,D.field),Lt=et?Et:Et.reverse(),ne=Object(a.size)(b);if(!(!D||!ne)){var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(r*(ge-1));this.view.filter(D.field,function(We,an){var gn=Lt.indexOf(We);return gn>-1?oe(gn,be,Ae):!0}),this.view.render(!0)}},o.prototype.getComponents=function(){return this.slider?[this.slider]:[]},o.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},o}(Do),Sf=Ms,as=0,wf=8,Yh=32,Hh=20,Kh=function(c){Object(at.b)(o,c);function o(t){var r=c.call(this,t)||this;return r.onChangeFn=a.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(b){var D=b.ratio,et=r.getValidScrollbarCfg().animate;r.ratio=Object(a.clamp)(D,0,1);var Et=r.view.getOptions().animate;et||r.view.animate(!1),r.changeViewData(r.getScrollRange(),!0),r.view.animate(Et)},r.container=r.view.getLayer(A.FORE).addGroup(),r.onChangeFn=Object(a.throttle)(r.onValueChange,20,{leading:!0}),r.trackLen=0,r.thumbLen=0,r.ratio=0,r.view.on(m.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(m.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(o.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(m.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(m.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var r=this.view.coordinateBBox.width,b=this.scrollbar.component.get("padding"),D=this.scrollbar.component.getLayoutBBox(),et=new Qe(D.x,D.y,Math.min(D.width,r),D.height).expand(b),Et=this.getScrollbarComponentCfg(),Lt=void 0,ne=void 0;if(Et.isHorizontal){var ge=Da(this.view.viewBBox,et,e.BOTTOM),be=ge[0],Ae=ge[1],We=Da(this.view.coordinateBBox,et,e.BOTTOM),an=We[0],gn=We[1];Lt=an,ne=Ae}else{var Xn=Da(this.view.viewBBox,et,e.RIGHT),be=Xn[0],Ae=Xn[1],Hn=Da(this.view.viewBBox,et,e.RIGHT),an=Hn[0],gn=Hn[1];Lt=an,ne=Ae}Lt+=b[3],ne+=b[0],this.trackLen?this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Et),{x:Lt,y:ne,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Et),{x:Lt,y:ne})),this.view.viewBBox=this.view.viewBBox.cut(et,Et.isHorizontal?e.BOTTOM:e.RIGHT)}},o.prototype.update=function(){this.render()},o.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},o.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.measureScrollbar=function(){var t=this.view.getXScale(),r=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var b=this.getScrollbarComponentCfg(),D=b.trackLen,et=b.thumbLen;this.trackLen=D,this.thumbLen=et,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=r},o.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Object(a.clamp)(this.ratio,0,1)),r=Math.min(t+this.step-1,this.cnt-1);return[t,r]},o.prototype.changeViewData=function(t,r){var b=this,D=t[0],et=t[1],Et=this.getValidScrollbarCfg().type,Lt=Et!=="vertical",ne=Object(a.valuesOfKey)(this.data,this.xScaleCfg.field),ge=Lt?ne:ne.reverse();this.yScalesCfg.forEach(function(be){b.view.scale(be.field,{formatter:be.formatter,type:be.type,min:be.min,max:be.max})}),this.view.filter(this.xScaleCfg.field,function(be){var Ae=ge.indexOf(be);return Ae>-1?oe(Ae,D,et):!0}),this.view.render(!0)},o.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,r=t!=="vertical",b=new Qr.Scrollbar(Object(at.a)(Object(at.a)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return b.init(),{component:b,layer:A.FORE,direction:r?e.BOTTOM:e.RIGHT,type:i.SCROLLBAR}},o.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),r=this.trackLen?Object(at.a)(Object(at.a)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Object(at.a)({},t);return this.scrollbar.component.update(r),this.scrollbar},o.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,r=this.getValidScrollbarCfg(),b=r.type,D=r.categorySize,et=b!=="vertical";return Math.floor((et?t.width:t.height)/D)},o.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),r=this.view.getOptions().data,b=Object(a.valuesOfKey)(r,t.field);return Object(a.size)(b)},o.prototype.getScrollbarComponentCfg=function(){var t=this.view,r=t.coordinateBBox,b=t.viewBBox,D=this.view.getXScale(),et=this.getValidScrollbarCfg(),Et=et.type,Lt=et.padding,ne=et.width,ge=et.height,be=Et!=="vertical",Ae=Lt[0],We=Lt[1],an=Lt[2],gn=Lt[3],Xn=be?{x:r.minX+gn,y:b.maxY-ge-an}:{x:b.maxX-ne-We,y:r.minY+Ae},Hn=this.getStep(),ir=this.getCnt(),cr=be?r.width-gn-We:r.height-Ae-an,Rr=Math.max(cr*Object(a.clamp)(Hn/ir,0,1),Hh);return Object(at.a)(Object(at.a)({},this.getThemeOptions()),{x:Xn.x,y:Xn.y,size:be?ge:ne,isHorizontal:be,trackLen:cr,thumbLen:Rr,thumbOffset:0})},o.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:Yh,width:wf,height:wf,padding:[0,0,0,0],animate:!0};return Object(a.isObject)(this.option)&&(t=Object(at.a)(Object(at.a)({},t),this.option)),(!Object(a.isObject)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[as,0,as,0]:[0,as,0,as]),t},o}(Do),Jh=Kh,Qh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.show=function(){var t=this.context.view,r=this.context.event,b=t.getTooltipItems({x:r.x,y:r.y});if(!Object(a.isEqual)(b,this.items)&&(this.items=b,b.length)){var D=t.getXScale().field,et=b[0].data[D],Et=[],Lt=t.geometries;if(Object(a.each)(Lt,function(yo){if(yo.type==="interval"||yo.type==="schema"){var wo=yo.getElementsBy(function(Q){var U=Q.getData();return U[D]===et});Et=Et.concat(wo)}}),Et.length){var ne=t.getCoordinate(),ge=Et[0].shape.getCanvasBBox(),be=Et[0].shape.getCanvasBBox(),Ae=ge;Object(a.each)(Et,function(yo){var wo=yo.shape.getCanvasBBox();ne.isTransposed?(wo.minY<ge.minY&&(ge=wo),wo.maxY>be.maxY&&(be=wo)):(wo.minX<ge.minX&&(ge=wo),wo.maxX>be.maxX&&(be=wo)),Ae.x=Math.min(wo.minX,Ae.minX),Ae.y=Math.min(wo.minY,Ae.minY),Ae.width=Math.max(wo.maxX,Ae.maxX)-Ae.x,Ae.height=Math.max(wo.maxY,Ae.maxY)-Ae.y});var We=t.backgroundGroup,an=t.coordinateBBox,gn=void 0;if(ne.isRect){var Xn=t.getXScale(),Hn=Xn.isLinear?0:.25,ir=void 0,cr=void 0,Rr=void 0,zr=void 0;ne.isTransposed?(ir=an.minX,cr=Math.min(be.minY,ge.minY)-Hn*be.height,Rr=an.width,zr=Ae.height+Hn*2*be.height):(ir=Math.min(ge.minX,be.minX)-Hn*ge.width,cr=Math.min(an.minY,ge.minY),Rr=Ae.width+Hn*2*ge.width,zr=an.height),gn=[["M",ir,cr],["L",ir+Rr,cr],["L",ir+Rr,cr+zr],["L",ir,cr+zr],["Z"]]}else{var _r=Object(a.head)(Et),ki=Object(a.last)(Et),Ai=ao(_r.getModel(),ne).startAngle,mi=ao(ki.getModel(),ne).endAngle,Ki=ne.getCenter(),vo=ne.getRadius(),po=ne.innerRadius*vo;gn=no(Ki.x,Ki.y,vo,Ai,mi,po)}this.regionPath?(this.regionPath.attr("path",gn),this.regionPath.show()):this.regionPath=We.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:gn,fill:"#CCD6EC",opacity:.3}})}}},o.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},o.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),c.prototype.destroy.call(this)},o}(ut),Ef=Qh,ka=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.show=function(){var t=this.context,r=t.event,b=t.view,D=b.isTooltipLocked();if(!D){var et=this.timeStamp,Et=+new Date,Lt=Object(a.get)(t.view.getOptions(),"tooltip.showDelay",16);if(Et-et>Lt){var ne=this.location,ge={x:r.x,y:r.y};(!ne||!Object(a.isEqual)(ne,ge))&&this.showTooltip(b,ge),this.timeStamp=Et,this.location=ge}}},o.prototype.hide=function(){var t=this.context.view,r=t.getController("tooltip"),b=this.context.event,D=b.clientX,et=b.clientY;r.isCursorEntered({x:D,y:et})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},o.prototype.showTooltip=function(t,r){t.showTooltip(r)},o.prototype.hideTooltip=function(t){t.hideTooltip()},o}(ut),da=ka,ss=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.showTooltip=function(t,r){var b=en(t);Object(a.each)(b,function(D){var et=_e(t,D,r);D.showTooltip(et)})},o.prototype.hideTooltip=function(t){var r=en(t);Object(a.each)(r,function(b){b.hideTooltip()})},o}(da),Jo=ss,As=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.destroy=function(){c.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},o.prototype.show=function(){var t=this.context,r=t.event,b=this.timeStamp,D=+new Date;if(D-b>16){var et=this.location,Et={x:r.x,y:r.y};(!et||!Object(a.isEqual)(et,Et))&&this.showTooltip(Et),this.timeStamp=D,this.location=Et}},o.prototype.hide=function(){this.hideTooltip(),this.location=null},o.prototype.showTooltip=function(t){var r=this.context,b=r.event,D=b.target;if(D&&D.get("tip")){this.tooltip||this.renderTooltip();var et=D.get("tip");this.tooltip.update(Object(at.a)({title:et},t)),this.tooltip.show()}},o.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},o.prototype.renderTooltip=function(){var t,r=this.context.view,b=r.canvas,D={start:{x:0,y:0},end:{x:b.get("width"),y:b.get("height")}},et=r.getTheme(),Et=Object(a.get)(et,["components","tooltip","domStyles"],{}),Lt=new Wi({parent:b.get("el").parentNode,region:D,visible:!1,crosshairs:null,domStyles:Object(at.a)({},Object(a.deepMix)({},Et,(t={},t[Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={"max-width":"50%"},t[Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={"word-break":"break-all"},t)))});Lt.init(),Lt.setCapture(!1),this.tooltip=Lt},o}(ut),zu=As,eu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t}return o.prototype.hasState=function(t){return t.hasState(this.stateName)},o.prototype.setElementState=function(t,r){t.setState(this.stateName,r)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},o.prototype.clearViewState=function(t){var r=this,b=De(t,this.stateName);Object(a.each)(b,function(D){r.setElementState(D,!1)})},o}(ut),wc=eu;function us(c){return Object(a.get)(c.get("delegateObject"),"item")}var Zh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return o.prototype.isItemIgnore=function(t,r){var b=this.ignoreListItemStates,D=b.filter(function(et){return r.hasState(t,et)});return!!D.length},o.prototype.setStateByComponent=function(t,r,b){var D=this.context.view,et=t.get("field"),Et=ke(D);this.setElementsStateByItem(Et,et,r,b)},o.prototype.setStateByElement=function(t,r){this.setElementState(t,r)},o.prototype.isMathItem=function(t,r,b){var D=this.context.view,et=mn(D,r),Et=cn(t,r);return!Object(a.isNil)(Et)&&b.name===et.getText(Et)},o.prototype.setElementsStateByItem=function(t,r,b,D){var et=this;Object(a.each)(t,function(Et){et.isMathItem(Et,r,b)&&Et.setState(et.stateName,D)})},o.prototype.setStateEnable=function(t){var r=me(this.context);if(r)de(this.context)&&this.setStateByElement(r,t);else{var b=Zt(this.context);if(he(b)){var D=b.item,et=b.component;if(D&&et&&!this.isItemIgnore(D,et)){var Et=this.context.event.gEvent;if(Et&&Et.fromShape&&Et.toShape&&us(Et.fromShape)===us(Et.toShape))return;this.setStateByComponent(et,D,t)}}}},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=t.hasState(this.stateName);this.setElementState(t,!r)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),nu=Zh,$h=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(nu),qh=$h,td=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.cache={},t}return o.prototype.getColorScale=function(t,r){var b=r.geometry.getAttribute("color");if(!b)return null;var D=t.getScaleByField(b.getFields()[0]);return D},o.prototype.getLinkPath=function(t,r){var b=this.context.view,D=b.getCoordinate().isTransposed,et=t.shape.getCanvasBBox(),Et=r.shape.getCanvasBBox(),Lt=D?[["M",et.minX,et.minY],["L",Et.minX,Et.maxY],["L",Et.maxX,Et.maxY],["L",et.maxX,et.minY],["Z"]]:[["M",et.maxX,et.minY],["L",Et.minX,Et.minY],["L",Et.minX,Et.maxY],["L",et.maxX,et.maxY],["Z"]];return Lt},o.prototype.addLinkShape=function(t,r,b){t.addShape({type:"path",attrs:{opacity:.4,fill:r.shape.attr("fill"),path:this.getLinkPath(r,b)}})},o.prototype.linkByElement=function(t){var r=this,b=this.context.view,D=this.getColorScale(b,t);if(!!D){var et=cn(t,D.field);if(!this.cache[et]){var Et=tn(b,D.field,et),Lt=this.linkGroup,ne=Lt.addGroup();this.cache[et]=ne;var ge=Et.length;Object(a.each)(Et,function(be,Ae){if(Ae<ge-1){var We=Et[Ae+1];r.addLinkShape(ne,be,We)}})}}},o.prototype.removeLink=function(t){var r=this.getColorScale(this.context.view,t);if(!!r){var b=cn(t,r.field);this.cache[b]&&(this.cache[b].remove(),this.cache[b]=null)}},o.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var r=me(t);r&&this.linkByElement(r)},o.prototype.unlink=function(){var t=me(this.context);t&&this.removeLink(t)},o.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},o}(ut),ed=td,nd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},o.prototype.getIntersectElements=function(){var t=null;if(Me(this.context))t=ze(this.context,10);else{var r=this.startPoint,b=this.isStarted?this.getCurrentPoint():this.endPoint;if(!r||!b)return;var D={minX:Math.min(r.x,b.x),minY:Math.min(r.y,b.y),maxX:Math.max(r.x,b.x),maxY:Math.max(r.y,b.y)},et=this.context.view;t=nn(et,D)}return t},o.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var r=ke(this.context.view),b=this.getIntersectElements();b&&b.length?this.effectByRecord?this.setSiblingsStateByRecord(b,t):this.setElementsState(b,t,r):this.clear()}},o.prototype.setSiblingsStateByRecord=function(t,r){var b=this,D=this.context.view,et=en(D),Et=t.map(function(ge){return ge.getModel().data}),Lt=D.getXScale().field,ne=D.getYScales()[0].field;Object(a.each)(et,function(ge){var be=ke(ge),Ae=be.filter(function(We){var an=We.getModel().data;return ln(Et,an,Lt,ne)});b.setElementsState(Ae,r,be)})},o.prototype.setSiblingsState=function(t){var r=this,b=this.context.view,D=en(b);Me(this.context)&&Object(a.each)(D,function(et){var Et=ke(et),Lt=Ve(r.context,et,10);Lt&&Lt.length?r.setElementsState(Lt,t,Et):r.clearViewState(et)})},o.prototype.setElementsState=function(t,r,b){var D=this;Object(a.each)(b,function(et){t.includes(et)?D.setElementState(et,r):D.setElementState(et,!1)})},o.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},o.prototype.clear=function(){var t=this,r=this.context.view;if(this.effectSiblings){var b=en(r);Object(a.each)(b,function(D){t.clearViewState(D)})}else this.clearViewState(r)},o}(wc),Vu=nd,Wu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(Vu),rd=Wu,Mf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateEnable=function(t){var r=me(this.context);if(r){if(!de(this.context))return;t?(this.clear(),this.setElementState(r,!0)):this.hasState(r)&&this.setElementState(r,!1)}},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=this.hasState(t);r||this.clear(),this.setElementState(t,!r)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),ru=Mf,id=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ru),od=id,iu="inactive",Ts="active";function Qa(c){var o=ke(c);Object(a.each)(o,function(t){t.hasState(Ts)&&t.setState(Ts,!1),t.hasState(iu)&&t.setState(iu,!1)})}function Af(c,o,t){Object(a.each)(c,function(r){o(r)?(r.hasState(iu)&&r.setState(iu,!1),r.setState(Ts,t)):(r.hasState(Ts)&&r.setState(Ts,!1),r.setState(iu,t))})}var Za=M.INACTIVE,Ea=M.ACTIVE,Tf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=Ea,t}return o.prototype.setElementsStateByItem=function(t,r,b,D){var et=this,Et=function(ne){return et.isMathItem(ne,r,b)};this.setHighlightBy(t,Et,D)},o.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):t.hasState(Ea)||t.setState(Za,!0)},o.prototype.setHighlightBy=function(t,r,b){var D=this;if(b)Object(a.each)(t,function(Lt){D.setElementHighlight(Lt,r)});else{var et=De(this.context.view,Ea),Et=!0;Object(a.each)(et,function(Lt){if(!r(Lt))return Et=!1,!1}),Et?this.clear():Object(a.each)(t,function(Lt){r(Lt)&&(Lt.hasState(Ea)&&Lt.setState(Ea,!1),Lt.setState(Za,!0))})}},o.prototype.setElementState=function(t,r){var b=this.context.view,D=ke(b);this.setHighlightBy(D,function(et){return t===et},r)},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(nu),Xu=Tf,Cf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateByElement=function(t,r){var b=this.context.view,D=t.geometry.getAttribute("color");if(!!D){var et=b.getScaleByField(D.getFields()[0]),Et=cn(t,et.field),Lt=ke(b),ne=Lt.filter(function(ge){return cn(ge,et.field)===Et});this.setHighlightBy(Lt,function(ge){return ne.includes(ge)},r)}},o}(Xu),jf=Cf,If=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):(t.setState(Za,!0),t.hasState(Ea)&&t.setState(Ea,!1))},o.prototype.setStateByElement=function(t,r){var b=this.context.view,D=b.getXScale(),et=cn(t,D.field),Et=ke(b),Lt=Et.filter(function(ne){return cn(ne,D.field)===et});this.setHighlightBy(Et,function(ne){return Lt.includes(ne)},r)},o.prototype.toggle=function(){var t=me(this.context);if(t){var r=t.hasState(this.stateName);this.setStateByElement(t,!r)}},o}(Xu),Pf=If,ou=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.clearViewState=function(t){Qa(t)},o.prototype.highlight=function(){this.setState()},o.prototype.setElementsState=function(t,r,b){Af(b,function(D){return t.indexOf(D)>=0},r)},o}(Vu),Ec=ou,Df=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.highlight=function(){this.setState()},o.prototype.setElementState=function(t,r){var b=this.context.view,D=ke(b);Af(D,function(et){return t===et},r)},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(ru),kf=Df,ad=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(Vu),sd=ad,ud=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(nu),cd=ud,ld=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ru),Yu=ld,cs=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return o.prototype.getTriggerListInfo=function(){var t=Zt(this.context),r=null;return he(t)&&(r={item:t.item,list:t.component}),r},o.prototype.getAllowComponents=function(){var t=this,r=this.context.view,b=Pe(r),D=[];return Object(a.each)(b,function(et){et.isList()&&t.allowSetStateByElement(et)&&D.push(et)}),D},o.prototype.hasState=function(t,r){return t.hasState(r,this.stateName)},o.prototype.clearAllComponentsState=function(){var t=this,r=this.getAllowComponents();Object(a.each)(r,function(b){b.clearItemsState(t.stateName)})},o.prototype.allowSetStateByElement=function(t){var r=t.get("field");if(!r)return!1;if(this.cfg&&this.cfg.componentNames){var b=t.get("name");if(this.cfg.componentNames.indexOf(b)===-1)return!1}var D=this.context.view,et=mn(D,r);return et&&et.isCategory},o.prototype.allowSetStateByItem=function(t,r){var b=this.ignoreItemStates;if(b.length){var D=b.filter(function(et){return r.hasState(t,et)});return D.length===0}return!0},o.prototype.setStateByElement=function(t,r,b){var D=t.get("field"),et=this.context.view,Et=mn(et,D),Lt=cn(r,D),ne=Et.getText(Lt);this.setItemsState(t,ne,b)},o.prototype.setStateEnable=function(t){var r=this,b=me(this.context);if(b){var D=this.getAllowComponents();Object(a.each)(D,function(ne){r.setStateByElement(ne,b,t)})}else{var et=Zt(this.context);if(he(et)){var Et=et.item,Lt=et.component;this.allowSetStateByElement(Lt)&&this.allowSetStateByItem(Et,Lt)&&this.setItemState(Lt,Et,t)}}},o.prototype.setItemsState=function(t,r,b){var D=this,et=t.getItems();Object(a.each)(et,function(Et){Et.name===r&&D.setItemState(t,Et,b)})},o.prototype.setItemState=function(t,r,b){t.setItemState(r,this.stateName,b)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var r=t.list,b=t.item,D=this.hasState(r,b);this.setItemState(r,b,!D)}},o.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(ut),ls=cs,au=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ls),Rf=au,Mc="inactive",Ac="active";function Nf(c){var o=c.getItems();Object(a.each)(o,function(t){c.hasState(t,Ac)&&c.setItemState(t,Ac,!1),c.hasState(t,Mc)&&c.setItemState(t,Mc,!1)})}var Cs="inactive",$a="active",Lf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=$a,t.ignoreItemStates=["unchecked"],t}return o.prototype.setItemsState=function(t,r,b){this.setHighlightBy(t,function(D){return D.name===r},b)},o.prototype.setItemState=function(t,r,b){var D=t.getItems();this.setHighlightBy(t,function(et){return et===r},b)},o.prototype.setHighlightBy=function(t,r,b){var D=t.getItems();if(b)Object(a.each)(D,function(Lt){r(Lt)?(t.hasState(Lt,Cs)&&t.setItemState(Lt,Cs,!1),t.setItemState(Lt,$a,!0)):t.hasState(Lt,$a)||t.setItemState(Lt,Cs,!0)});else{var et=t.getItemsByState($a),Et=!0;Object(a.each)(et,function(Lt){if(!r(Lt))return Et=!1,!1}),Et?this.clear():Object(a.each)(D,function(Lt){r(Lt)&&(t.hasState(Lt,$a)&&t.setItemState(Lt,$a,!1),t.setItemState(Lt,Cs,!0))})}},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Nf(t.list);else{var r=this.getAllowComponents();Object(a.each)(r,function(b){b.clearItemsState($a),b.clearItemsState(Cs)})}},o}(ls),fs=Lf,Bf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ls),Ff=Bf,Gf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="unchecked",t}return o.prototype.unchecked=function(){this.setState()},o}(ls),fd=Gf,Uf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.emitEvent=function(t){var r="mask:"+t,b=this.context.view,D=this.context.event;b.emit(r,{target:this.maskShape,shape:this.maskShape,points:this.points,x:D.x,y:D.y})},o.prototype.createMask=function(){var t=this.context.view,r=this.getMaskAttrs(),b=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Object(at.a)({fill:"#C5D4EB",opacity:.3},r)});return b},o.prototype.getMaskPath=function(){return[]},o.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},o.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},o.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},o.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),r=this.preMovePoint,b=t.x-r.x,D=t.y-r.y,et=this.points;Object(a.each)(et,function(Et){Et.x+=b,Et.y+=D}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},o.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},o.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},o.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},o.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},o.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},o.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,c.prototype.destroy.call(this)},o}(ut),Hu=Uf,_f=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="circle",t}return o.prototype.getMaskAttrs=function(){var t=this.points,r=Object(a.last)(this.points),b=0,D=0,et=0;if(t.length){var Et=t[0];b=le(Et,r)/2,D=(r.x+Et.x)/2,et=(r.y+Et.y)/2}return{x:D,y:et,r:b}},o}(Hu),zf=_f,Vf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="rect",t}return o.prototype.getRegion=function(){var t=this.points;return{start:Object(a.head)(t),end:Object(a.last)(t)}},o.prototype.getMaskAttrs=function(){var t=this.getRegion(),r=t.start,b=t.end,D=Math.min(r.x,b.x),et=Math.min(r.y,b.y),Et=Math.abs(b.x-r.x),Lt=Math.abs(b.y-r.y);return{x:D,y:et,width:Et,height:Lt}},o}(Hu),Tc=Vf;function Cc(c){c.x=Object(a.clamp)(c.x,0,1),c.y=Object(a.clamp)(c.y,0,1)}var su=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return o.prototype.getRegion=function(){var t=null,r=null,b=this.points,D=this.dim,et=this.context.view.getCoordinate(),Et=et.invert(Object(a.head)(b)),Lt=et.invert(Object(a.last)(b));return this.inPlot&&(Cc(Et),Cc(Lt)),D==="x"?(t=et.convert({x:Et.x,y:0}),r=et.convert({x:Lt.x,y:1})):(t=et.convert({x:0,y:Et.y}),r=et.convert({x:1,y:Lt.y})),{start:t,end:r}},o}(Tc),jc=su,Wf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points,r=[];return t.length&&(Object(a.each)(t,function(b,D){D===0?r.push(["M",b.x,b.y]):r.push(["L",b.x,b.y])}),r.push(["L",t[0].x,t[0].y])),r},o.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},o.prototype.addPoint=function(){this.resize()},o}(Hu),Ic=Wf,hd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points;return Le(t,!0)},o}(Ic),Xf=hd,dd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setCursor=function(t){var r=this.context.view;r.getCanvas().setCursor(t)},o.prototype.default=function(){this.setCursor("default")},o.prototype.pointer=function(){this.setCursor("pointer")},o.prototype.move=function(){this.setCursor("move")},o.prototype.crosshair=function(){this.setCursor("crosshair")},o.prototype.wait=function(){this.setCursor("wait")},o.prototype.help=function(){this.setCursor("help")},o.prototype.text=function(){this.setCursor("text")},o.prototype.eResize=function(){this.setCursor("e-resize")},o.prototype.wResize=function(){this.setCursor("w-resize")},o.prototype.nResize=function(){this.setCursor("n-resize")},o.prototype.sResize=function(){this.setCursor("s-resize")},o.prototype.neResize=function(){this.setCursor("ne-resize")},o.prototype.nwResize=function(){this.setCursor("nw-resize")},o.prototype.seResize=function(){this.setCursor("se-resize")},o.prototype.swResize=function(){this.setCursor("sw-resize")},o.prototype.nsResize=function(){this.setCursor("ns-resize")},o.prototype.ewResize=function(){this.setCursor("ew-resize")},o}(ut),vd=dd,Yf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,r,b){var D=this;t.getScaleByField(r)&&t.filter(r,b),t.views&&t.views.length&&Object(a.each)(t.views,function(et){D.filterView(et,r,b)})},o.prototype.filter=function(){var t=Zt(this.context);if(t){var r=this.context.view,b=t.component,D=b.get("field");if(he(t)){if(D){var et=b.getItemsByState("unchecked"),Et=mn(r,D),Lt=et.map(function(Ae){return Ae.name});Lt.length?this.filterView(r,D,function(Ae){var We=Et.getText(Ae);return!Lt.includes(We)}):this.filterView(r,D,null),r.render(!0)}}else if(ce(t)){var ne=b.getValue(),ge=ne[0],be=ne[1];this.filterView(r,D,function(Ae){return Ae>=ge&&Ae<=be}),r.render(!0)}}},o}(ut),Hf=Yf;function Pc(c,o,t,r){var b=Math.min(t[o],r[o]),D=Math.max(t[o],r[o]),et=c.range,Et=et[0],Lt=et[1];if(b<Et&&(b=Et),D>Lt&&(D=Lt),b===Lt&&D===Lt)return null;var ne=c.invert(b),ge=c.invert(D);if(c.isCategory){var be=c.values.indexOf(ne),Ae=c.values.indexOf(ge),We=c.values.slice(be,Ae+1);return function(an){return We.includes(an)}}else return function(an){return an>=ne&&an<=ge}}var Kf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},o.prototype.filter=function(){var t,r;if(Me(this.context)){var b=this.context.event.target,D=b.getCanvasBBox();t={x:D.x,y:D.y},r={x:D.maxX,y:D.maxY}}else{if(!this.isStarted)return;t=this.startPoint,r=this.context.getCurrentPoint()}if(!(Math.abs(t.x-r.x)<5||Math.abs(t.x-r.y)<5)){var et=this.context.view,Et=et.getCoordinate(),Lt=Et.invert(r),ne=Et.invert(t);if(this.hasDim("x")){var ge=et.getXScale(),be=Pc(ge,"x",Lt,ne);this.filterView(et,ge.field,be)}if(this.hasDim("y")){var Ae=et.getYScales()[0],be=Pc(Ae,"y",Lt,ne);this.filterView(et,Ae.field,be)}this.reRender(et)}},o.prototype.end=function(){this.isStarted=!1},o.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var r=t.getXScale();this.filterView(t,r.field,null)}if(this.hasDim("y")){var b=t.getYScales()[0];this.filterView(t,b.field,null)}this.reRender(t)},o.prototype.filterView=function(t,r,b){t.filter(r,b)},o.prototype.reRender=function(t){t.render(!0)},o}(ut),uu=Kf,cu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,r,b){var D=en(t);Object(a.each)(D,function(et){et.filter(r,b)})},o.prototype.reRender=function(t){var r=en(t);Object(a.each)(r,function(b){b.render(!0)})},o}(uu),Ku=cu,Jf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filter=function(){var t=Zt(this.context),r=this.context.view,b=ke(r);if(Me(this.context)){var D=ze(this.context,10);D&&Object(a.each)(b,function(an){D.includes(an)?an.show():an.hide()})}else if(t){var et=t.component,Et=et.get("field");if(he(t)){if(Et){var Lt=et.getItemsByState("unchecked"),ne=mn(r,Et),ge=Lt.map(function(an){return an.name});Object(a.each)(b,function(an){var gn=cn(an,Et),Xn=ne.getText(gn);ge.indexOf(Xn)>=0?an.hide():an.show()})}}else if(ce(t)){var be=et.getValue(),Ae=be[0],We=be[1];Object(a.each)(b,function(an){var gn=cn(an,Et);gn>=Ae&&gn<=We?an.show():an.hide()})}}},o.prototype.clear=function(){var t=ke(this.context.view);Object(a.each)(t,function(r){r.show()})},o.prototype.reset=function(){this.clear()},o}(ut),Qf=Jf,pd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.byRecord=!1,t}return o.prototype.filter=function(){Me(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},o.prototype.filterByRecord=function(){var t=this.context.view,r=ze(this.context,10);if(!!r){var b=t.getXScale().field,D=t.getYScales()[0].field,et=r.map(function(Lt){return Lt.getModel().data}),Et=en(t);Object(a.each)(Et,function(Lt){var ne=ke(Lt);Object(a.each)(ne,function(ge){var be=ge.getModel().data;ln(et,be,b,D)?ge.show():ge.hide()})})}},o.prototype.filterByBBox=function(){var t=this,r=this.context.view,b=en(r);Object(a.each)(b,function(D){var et=Ve(t.context,D,10),Et=ke(D);et&&Object(a.each)(Et,function(Lt){et.includes(Lt)?Lt.show():Lt.hide()})})},o.prototype.reset=function(){var t=en(this.context.view);Object(a.each)(t,function(r){var b=ke(r);Object(a.each)(b,function(D){D.show()})})},o}(ut),Dc=pd,Zf=10,$f=5,qf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return o.prototype.getButtonCfg=function(){return Object(a.deepMix)(this.buttonCfg,this.cfg)},o.prototype.drawButton=function(){var t=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:t.name}),b=r.addShape({type:"text",name:"button-text",attrs:Object(at.a)({text:t.text},t.textStyle)}),D=b.getBBox(),et=ya(t.padding),Et=r.addShape({type:"rect",name:"button-rect",attrs:Object(at.a)({x:D.x-et[3],y:D.y-et[0],width:D.width+et[1]+et[3],height:D.height+et[0]+et[2]},t.style)});Et.toBack(),r.on("mouseenter",function(){Et.attr(t.activeStyle)}),r.on("mouseleave",function(){Et.attr(t.style)}),this.buttonGroup=r},o.prototype.resetPosition=function(){var t=this.context.view,r=t.getCoordinate(),b=r.convert({x:1,y:1}),D=this.buttonGroup,et=D.getBBox(),Et=jr.a.transform(null,[["t",b.x-et.width-Zf,b.y+et.height+$f]]);D.setMatrix(Et)},o.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},o.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},o.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),c.prototype.destroy.call(this)},o}(ut),th=qf,eh=4,nh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},o.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),r=this.context.view,b=this.context.event;this.dragStart?r.emit("drag",{target:b.target,x:b.x,y:b.y}):le(t,this.startPoint)>eh&&(r.emit("dragstart",{target:b.target,x:b.x,y:b.y}),this.dragStart=!0)}},o.prototype.end=function(){if(this.dragStart){var t=this.context.view,r=this.context.event;t.emit("dragend",{target:r.target,x:r.x,y:r.y})}this.starting=!1,this.dragStart=!1},o}(ut),kc=nh,rh=5,ih=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},o.prototype.move=function(){if(!!this.starting){var t=this.startPoint,r=this.context.getCurrentPoint(),b=le(t,r);if(b>rh&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var D=this.context.view,et=jr.a.transform(this.startMatrix,[["t",r.x-t.x,r.y-t.y]]);D.backgroundGroup.setMatrix(et),D.foregroundGroup.setMatrix(et),D.middleGroup.setMatrix(et)}}},o.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},o.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},o}(ut),oh=ih,Rc="x",Ju="y",ah=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=[Rc,Ju],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.getScale=function(t){var r=this.context.view;return t==="x"?r.getXScale():r.getYScales()[0]},o.prototype.resetDim=function(t){var r=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var b=this.getScale(t);r.scale(b.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},o.prototype.reset=function(){this.resetDim(Rc),this.resetDim(Ju);var t=this.context.view;t.render(!0)},o}(ut),Nc=ah,sh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return o.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var r=this.dims;Object(a.each)(r,function(b){var D=t.getScale(b),et=D.min,Et=D.max,Lt=D.values;t.startCache[b]={min:et,max:Et,values:Lt}})},o.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},o.prototype.translate=function(){var t=this;if(!!this.starting){var r=this.startPoint,b=this.context.view.getCoordinate(),D=this.context.getCurrentPoint(),et=b.invert(r),Et=b.invert(D),Lt=Et.x-et.x,ne=Et.y-et.y,ge=this.context.view,be=this.dims;Object(a.each)(be,function(Ae){t.translateDim(Ae,{x:Lt*-1,y:ne*-1})}),ge.render(!0)}},o.prototype.translateDim=function(t,r){if(this.hasDim(t)){var b=this.getScale(t);b.isLinear&&this.translateLinear(t,b,r)}},o.prototype.translateLinear=function(t,r,b){var D=this.context.view,et=this.startCache[t],Et=et.min,Lt=et.max,ne=Lt-Et,ge=b[t]*ne;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:Et,max:Lt}),D.scale(r.field,{nice:!1,min:Et+ge,max:Lt+ge})},o.prototype.reset=function(){c.prototype.reset.call(this),this.startPoint=null,this.starting=!1},o}(Nc),uh=sh,ch=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.zoomRatio=.05,t}return o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(t){var r=this,b=this.dims;Object(a.each)(b,function(D){r.zoomDim(D,t)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(t,r){if(this.hasDim(t)){var b=this.getScale(t);b.isLinear&&this.zoomLinear(t,b,r)}},o.prototype.zoomLinear=function(t,r,b){var D=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:r.min,max:r.max});var et=this.cacheScaleDefs[t],Et=et.max-et.min,Lt=r.min,ne=r.max,ge=b*Et,be=Lt-ge,Ae=ne+ge,We=Ae-be,an=We/Et;Ae>be&&an<100&&an>.01&&D.scale(r.field,{nice:!1,min:Lt-ge,max:ne+ge})},o}(Nc),gd=ch;ks("dark",ta(co)),C("canvas",lo),C("svg",Hi),Ho("Polygon",ml),Ho("Interval",Ss),Ho("Schema",fc),Ho("Path",wu),Ho("Point",pl),Ho("Line",cc),Ho("Area",el),Ho("Edge",il),Ho("Heatmap",al),jn("base",Fe),jn("interval",Th),jn("pie",jh),jn("polar",gc),Wo("overlap",$o),Wo("distribute",Ph),Wo("fixed-overlap",Ks),Wo("hide-overlap",Du),Wo("limit-in-shape",Nh),Wo("limit-in-canvas",ha),Wo("limit-in-plot",ql),Wo("pie-outer",Nl),Wo("adjust-color",_l),Wo("interval-adjust-position",ku),Wo("interval-hide-overlap",Yl),Wo("point-adjust-position",Ru),Wo("pie-spider",Rh),Wo("path-adjust-position",Ql),Eo("fade-in",tf),Eo("fade-out",ef),Eo("grow-in-x",rf),Eo("grow-in-xy",af),Eo("grow-in-y",of),Eo("scale-in-x",uf),Eo("scale-in-y",Pa),Eo("wave-in",Ya),Eo("zoom-in",Bu),Eo("zoom-out",Oa),Eo("position-update",Lu),Eo("sector-path-update",Zs),Eo("path-in",sf),F("rect",lf),F("mirror",Gh),F("list",cf),F("matrix",Bh),F("circle",wa),F("tree",_h),yr("axis",gf),yr("legend",Of),yr("tooltip",Fs),yr("annotation",df),yr("slider",Sf),yr("scrollbar",Jh),Ee("tooltip",da),Ee("sibling-tooltip",Jo),Ee("ellipsis-text",zu),Ee("element-active",qh),Ee("element-single-active",od),Ee("element-range-active",rd),Ee("element-highlight",Xu),Ee("element-highlight-by-x",Pf),Ee("element-highlight-by-color",jf),Ee("element-single-highlight",kf),Ee("element-range-highlight",Ec),Ee("element-sibling-highlight",Ec,{effectSiblings:!0,effectByRecord:!0}),Ee("element-selected",cd),Ee("element-single-selected",Yu),Ee("element-range-selected",sd),Ee("element-link-by-color",ed),Ee("active-region",Ef),Ee("list-active",Rf),Ee("list-selected",Ff),Ee("list-highlight",fs),Ee("list-unchecked",fd),Ee("legend-item-highlight",fs,{componentNames:["legend"]}),Ee("axis-label-highlight",fs,{componentNames:["axis"]}),Ee("rect-mask",Tc),Ee("x-rect-mask",jc,{dim:"x"}),Ee("y-rect-mask",jc,{dim:"y"}),Ee("circle-mask",zf),Ee("path-mask",Ic),Ee("smooth-path-mask",Xf),Ee("cursor",vd),Ee("data-filter",Hf),Ee("brush",uu),Ee("brush-x",uu,{dims:["x"]}),Ee("brush-y",uu,{dims:["y"]}),Ee("sibling-filter",Ku),Ee("sibling-x-filter",Ku),Ee("sibling-y-filter",Ku),Ee("element-filter",Qf),Ee("element-sibling-filter",Dc),Ee("element-sibling-filter-record",Dc,{byRecord:!0}),Ee("view-drag",kc),Ee("view-move",oh),Ee("scale-translate",uh),Ee("scale-zoom",gd),Ee("reset-button",th,{name:"reset-button",text:"reset"});function va(c){return c.isInPlot()}$i("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),$i("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),$i("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),$i("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),$i("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),$i("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),$i("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),$i("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),$i("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),$i("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),$i("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),$i("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(o){return!o.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(o){return!o.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),$i("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),$i("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),$i("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),$i("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:"path-mask:start"},{trigger:"mousedown",isEnable:va,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),$i("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),$i("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),$i("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),$i("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),$i("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),$i("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function hs(c){return c.gEvent.preventDefault(),c.gEvent.originalEvent.deltaY>0}$i("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(o){return hs(o.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(o){return!hs(o.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),$i("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]})},kwiP:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var at=_("mrSG"),a=_("zJSt"),A=_("u9/z"),e=_("SZbK"),i=_("B3DA"),p=function(m){Object(at.b)(S,m);function S(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="process",l}return S.prototype.getDefaultOptions=function(){return{percent:.2,color:e.a,animation:!0}},S.prototype.changeData=function(l){this.updateOption({percent:l}),this.chart.changeData(Object(i.a)(l))},S.prototype.getSchemaAdaptor=function(){return A.a},S}(a.a)},l3hu:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("iTfj");function a(A,e,i){var p=e+"Style",m=null;return Object(at.each)(i,function(S,l){A[l]&&S[p]&&(m||(m={}),Object(at.mix)(m,S[p]))}),m}},lFe4:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("iTfj");function a(A){return Object(at.map)(A||[],function(e,i){return{x:""+i,y:e}})}},lOPJ:function(Gn,Gt,_){"use strict";var at=_("AA7f"),a=_("iTfj"),A=_("0Xep"),e=_("Qci9"),i=function(p){Object(at.b)(m,p);function m(S){var l=p.call(this,S)||this;l.cacheMap={},l.adjustDataArray=[],l.mergeData=[];var M=S.marginRatio,j=M===void 0?A.d:M,y=S.dodgeRatio,n=y===void 0?A.b:y,s=S.dodgeBy,d=S.intervalPadding,E=S.dodgePadding,O=S.xDimensionLength,C=S.groupNum,v=S.defaultSize,x=S.maxColumnWidth,T=S.minColumnWidth,N=S.columnWidthRatio;return l.marginRatio=j,l.dodgeRatio=n,l.dodgeBy=s,l.intervalPadding=d,l.dodgePadding=E,l.xDimensionLegenth=O,l.groupNum=C,l.defaultSize=v,l.maxColumnWidth=x,l.minColumnWidth=T,l.columnWidthRatio=N,l}return m.prototype.process=function(S){var l=a.clone(S),M=a.flatten(l),j=this.dodgeBy,y=j?a.group(M,j):l;return this.cacheMap={},this.adjustDataArray=y,this.mergeData=M,this.adjustData(y,M),this.adjustDataArray=[],this.mergeData=[],l},m.prototype.adjustDim=function(S,l,M,j){var y=this,n=this.getDistribution(S),s=this.groupData(M,S);return a.each(s,function(d,E){var O;l.length===1?O={pre:l[0]-1,next:l[0]+1}:O=y.getAdjustRange(S,parseFloat(E),l),a.each(d,function(C){var v=C[S],x=n[v],T=x.indexOf(j);C[S]=y.getDodgeOffset(O,T,x.length)})}),[]},m.prototype.getDodgeOffset=function(S,l,M){var j=this,y=j.dodgeRatio,n=j.marginRatio,s=j.intervalPadding,d=j.dodgePadding,E=S.pre,O=S.next,C=O-E,v;if(!a.isNil(s)&&a.isNil(d)&&s>=0){var x=this.getIntervalOnlyOffset(M,l);v=E+x}else if(!a.isNil(d)&&a.isNil(s)&&d>=0){var x=this.getDodgeOnlyOffset(M,l);v=E+x}else if(!a.isNil(s)&&!a.isNil(d)&&s>=0&&d>=0){var x=this.getIntervalAndDodgeOffset(M,l);v=E+x}else{var T=C*y/M,N=n*T,x=1/2*(C-M*T-(M-1)*N)+((l+1)*T+l*N)-1/2*T-1/2*C;v=(E+O)/2+x}return v},m.prototype.getIntervalOnlyOffset=function(S,l){var M=this,j=M.defaultSize,y=M.intervalPadding,n=M.xDimensionLegenth,s=M.groupNum,d=M.dodgeRatio,E=M.maxColumnWidth,O=M.minColumnWidth,C=M.columnWidthRatio,v=y/n,x=(1-(s-1)*v)/s*d/(S-1),T=((1-v*(s-1))/s-x*(S-1))/S;if(T=a.isNil(C)?T:1/s/S*C,!a.isNil(E)){var N=E/n;T=Math.min(T,N)}if(!a.isNil(O)){var X=O/n;T=Math.max(T,X)}T=j?j/n:T,x=((1-(s-1)*v)/s-S*T)/(S-1);var tt=((1/2+l)*T+l*x+1/2*v)*s-v/2;return tt},m.prototype.getDodgeOnlyOffset=function(S,l){var M=this,j=M.defaultSize,y=M.dodgePadding,n=M.xDimensionLegenth,s=M.groupNum,d=M.marginRatio,E=M.maxColumnWidth,O=M.minColumnWidth,C=M.columnWidthRatio,v=y/n,x=1*d/(s-1),T=((1-x*(s-1))/s-v*(S-1))/S;if(T=C?1/s/S*C:T,!a.isNil(E)){var N=E/n;T=Math.min(T,N)}if(!a.isNil(O)){var X=O/n;T=Math.max(T,X)}T=j?j/n:T,x=(1-(T*S+v*(S-1))*s)/(s-1);var tt=((1/2+l)*T+l*v+1/2*x)*s-x/2;return tt},m.prototype.getIntervalAndDodgeOffset=function(S,l){var M=this,j=M.intervalPadding,y=M.dodgePadding,n=M.xDimensionLegenth,s=M.groupNum,d=j/n,E=y/n,O=((1-d*(s-1))/s-E*(S-1))/S,C=((1/2+l)*O+l*E+1/2*d)*s-d/2;return C},m.prototype.getDistribution=function(S){var l=this.adjustDataArray,M=this.cacheMap,j=M[S];return j||(j={},a.each(l,function(y,n){var s=a.valuesOfKey(y,S);s.length||s.push(0),a.each(s,function(d){j[d]||(j[d]=[]),j[d].push(n)})}),M[S]=j),j},m}(e.a);Gt.a=i},lr9b:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return C});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("w02o"),p=_("n/J0"),m="$$range$$",S="low-q1-median-q3-high",l="$$y_outliers$$";function M(v){var x=v.chart,T=v.options,N=T.xField,X=T.yField,tt=T.groupField,nt=T.color,vt=Array.isArray(X)?m:X,ft=x.schema().position(N+"*"+vt).shape("box");tt&&ft.color(tt,nt).adjust("dodge");var bt=T.data;if(Array.isArray(X)){var St=X[0],pt=X[1],ct=X[2],zt=X[3],Nt=X[4];bt=Object(e.map)(bt,function(wt){return wt[m]=[wt[St],wt[pt],wt[ct],wt[zt],wt[Nt]],wt})}return x.data(bt),v}function j(v){var x=v.chart,T=v.options,N=T.xField,X=T.data,tt=T.outliersField,nt=T.outliersStyle,vt=T.padding;if(!tt)return v;var ft=x.createView({padding:vt});ft.data(X),ft.axis(!1);var bt=ft.point().position(N+"*"+tt).shape("circle");return Object(e.isFunction)(nt)?bt.style(N+"*"+tt,function(St,pt){var ct;return nt((ct={},ct[N]=St,ct[tt]=pt,ct))}):Object(e.isObject)(nt)&&bt.style(nt),v}function y(v){var x,T,N=v.chart,X=v.options,tt=X.meta,nt=X.xAxis,vt=X.yAxis,ft=X.xField,bt=X.yField,St=X.outliersField,pt=Array.isArray(bt)?m:bt,ct={};if(St){var zt=l;ct=(x={},x[St]={sync:zt},x[pt]={sync:zt},x)}var Nt=Object(A.b)(ct,tt,(T={},T[ft]=Object(A.k)(nt,p.a),T[pt]=Object(A.k)(vt,p.a),T));return N.scale(Nt),v}function n(v){var x=v.chart,T=v.options,N=T.xAxis,X=T.yAxis,tt=T.xField,nt=T.yField,vt=Array.isArray(nt)?m:nt;return N===!1?x.axis(tt,!1):x.axis(tt,N),X===!1?x.axis(m,!1):x.axis(vt,X),v}function s(v){var x=v.chart,T=v.options,N=T.legend,X=T.groupField;return X?N?x.legend(X,N):x.legend(X,{position:"bottom"}):x.legend(!1),v}function d(v){var x=v.chart,T=v.options,N=T.xField,X=T.yField,tt=T.boxStyle,nt=Object(A.c)(x,"schema"),vt=Array.isArray(X)?m:X;return Object(e.isFunction)(tt)?nt.style(N+"*"+vt,function(ft,bt){var St;return tt((St={},St[N]=ft,St[vt]=bt,St))}):Object(e.isObject)(tt)&&nt.style(tt),v}function E(v){var x=v.chart,T=v.options,N=T.tooltip;return N!==void 0&&x.tooltip(N),v}function O(v){return Object(A.e)(M,j,y,n,d,s,E,i.c,i.a,i.j)(v)}var C=function(v){Object(at.b)(x,v);function x(){var T=v!==null&&v.apply(this,arguments)||this;return T.type="box",T}return x.prototype.getDefaultOptions=function(){var T;return Object(A.b)({},v.prototype.getDefaultOptions.call(this),{meta:(T={},T[m]={min:0,alias:S},T),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0}})},x.prototype.getSchemaAdaptor=function(){return O},x}(a.a)},lt7v:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=null;function a(){if(!at){var A=document.createElement("canvas");A.width=1,A.height=1,at=A.getContext("2d")}return at}},"ma/q":function(Gn,Gt,_){"use strict";var at=_("kXyF");_.d(Gt,"G2",function(){return at});var a=_("zJSt"),A=_("Djfg"),e=_("XloR");_.d(Gt,"Line",function(){return e.a});var i=_("uw/B");_.d(Gt,"Area",function(){return i.a});var p=_("u9VJ");_.d(Gt,"Column",function(){return p.a});var m=_("Y+LX");_.d(Gt,"Bar",function(){return m.a});var S=_("Cr25");_.d(Gt,"Pie",function(){return S.a});var l=_("z4Vf");_.d(Gt,"Rose",function(){return l.a});var M=_("Mj7Y");_.d(Gt,"WordCloud",function(){return M.a});var j=_("tE4n");_.d(Gt,"Scatter",function(){return j.a});var y=_("y753");_.d(Gt,"Radar",function(){return y.a});var n=_("yqCL");_.d(Gt,"DualAxes",function(){return n.a});var s=_("mttH");_.d(Gt,"TinyLine",function(){return s.a});var d=_("027J");_.d(Gt,"TinyColumn",function(){return d.a});var E=_("05BJ");_.d(Gt,"TinyArea",function(){return E.a});var O=_("BwSJ");_.d(Gt,"Histogram",function(){return O.a});var C=_("kwiP");_.d(Gt,"Progress",function(){return C.a});var v=_("YP77");_.d(Gt,"RingProgress",function(){return v.a});var x=_("+wVF");_.d(Gt,"Heatmap",function(){return x.a});var T=_("lr9b");_.d(Gt,"Box",function(){return T.a});var N=_("/+3i");_.d(Gt,"Stock",function(){return N.a});var X=_("aLzy");_.d(Gt,"Funnel",function(){return X.a});var tt=_("FAXy");_.d(Gt,"Liquid",function(){return tt.a});var nt=_("BYeR");_.d(Gt,"Bullet",function(){return nt.a});var vt=_("cBFB");_.d(Gt,"Sunburst",function(){return vt.a});var ft=_("XpFM");_.d(Gt,"Gauge",function(){return ft.a});var bt=_("FLLP");_.d(Gt,"Waterfall",function(){return bt.a});var St=_("TEat");_.d(Gt,"RadialBar",function(){return St.a});var pt=_("7ZbV");_.d(Gt,"BidirectionalBar",function(){return pt.a});var ct=_("eHqw");_.d(Gt,"Treemap",function(){return ct.a});var zt=_("rtSP");_.d(Gt,"Sankey",function(){return zt.a});var Nt=_("Uo7R"),wt=_("7+4w"),H=_("QG4C");_.d(Gt,"MultiView",function(){return H.a});var ht=_("YuPD"),dt=_("tKoa"),yt=_("w02o"),Mt=_("46lQ"),$="2.3.10",lt={scale:yt.f,legend:yt.d,tooltip:yt.k,annotation:yt.b,interaction:yt.c,theme:yt.j,animation:yt.a}},mj6g:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return e}),_.d(Gt,"d",function(){return i}),_.d(Gt,"c",function(){return p}),_.d(Gt,"b",function(){return m});var at=_("mrSG"),a=_("iTfj"),A=_("YuPD");function e(S){var l={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},M=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Object(a.get)(S,"fill")&&(l.color=S.fill);var j=Object(A.k)(S,M),y=j.shadowColor,n=j.shadowBlur,s=n===void 0?0:n,d=j.shadowOffsetX,E=d===void 0?0:d,O=j.shadowOffsetY,C=O===void 0?0:O;l["text-shadow"]=""+[y,E+"px",C+"px",s+"px"].join(" ");var v=Object(A.k)(S,M),x=v.stroke,T=v.lineWidth,N=T===void 0?0:T;return l["-webkit-text-stroke"]=""+[N+"px",x].join(" "),Object(a.each)(S,function(X,tt){["fontSize"].includes(tt)&&Object(a.isNumber)(X)?l[Object(A.i)(tt)]=X+"px":tt&&!M.includes(tt)&&(l[Object(A.i)(tt)]=""+X)}),l}function i(S,l){S.style["pointer-events"]="none",Object(a.each)(l,function(M,j){j&&M&&(S.style[j]=M)})}var p=function(l,M,j){var y=M.statistic,n=M.plotType,s=y.title,d=y.content;[s,d].forEach(function(E,O){if(!!E){var C="",v="";O===0?v=d?"translate(-50%, -100%)":"translate(-50%, -50%)":v=s?"translate(-50%, 0)":"translate(-50%, -50%)";var x=Object(a.isFunction)(E.style)?E.style(j):E.style;l.annotation().html(Object(at.a)({position:["50%","50%"],html:function(N,X){var tt=X.getCoordinate(),nt=0;if(n==="pie"||n==="ring-progress")nt=tt.getRadius()*tt.innerRadius*2;else if(n==="liquid"){var vt=Object(a.get)(X.geometries,[0,"elements",0,"shape"]);if(vt){var ft=vt.find(function(pt){return pt.get("type")==="circle"}),bt=ft.getCanvasBBox().width;nt=bt}}else nt||(nt=tt.getWidth());i(N,Object(at.a)({width:nt+"px",transform:v},e(x)));var St=X.getData();return E.customHtml?E.customHtml(N,X,j,St):(E.formatter&&(C=E.formatter(j,St)),C?Object(a.isString)(C)?C:""+C:"<div></div>")},key:(O===0?"top":"bottom")+"-statistic"},Object(A.k)(E,["offsetX","offsetY","rotate","style","formatter"])))}})},m=function(l,M,j){var y=M.statistic,n=y.title,s=y.content;[n,s].forEach(function(d){if(!!d){var E="",O=Object(a.isFunction)(d.style)?d.style(j):d.style;l.annotation().html(Object(at.a)({position:["50%","100%"],html:function(v,x){var T=x.getCoordinate(),N=x.views[0].getCoordinate(),X=N.getCenter(),tt=N.getRadius(),nt=Math.max(Math.sin(N.startAngle),Math.sin(N.endAngle))*tt,vt=X.y+nt-T.y.start-parseFloat(Object(a.get)(O,"fontSize",0)),ft=T.getRadius()*T.innerRadius*2;i(v,Object(at.a)({width:ft+"px",transform:"translate(-50%, "+vt+"px)"},e(O)));var bt=x.getData();return d.customHtml?d.customHtml(v,x,j,bt):(d.formatter&&(E=d.formatter(j,bt)),E?Object(a.isString)(E)?E:""+E:"<div></div>")}},Object(A.k)(d,["offsetX","offsetY","rotate","style","formatter"])))}})}},mrSG:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"a",function(){return A}),_.d(Gt,"c",function(){return e}),_.d(Gt,"d",function(){return d});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(bt,St){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,ct){pt.__proto__=ct}||function(pt,ct){for(var zt in ct)Object.prototype.hasOwnProperty.call(ct,zt)&&(pt[zt]=ct[zt])},at(bt,St)};function a(ft,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Class extends value "+String(bt)+" is not a constructor or null");at(ft,bt);function St(){this.constructor=ft}ft.prototype=bt===null?Object.create(bt):(St.prototype=bt.prototype,new St)}var A=function(){return A=Object.assign||function(St){for(var pt,ct=1,zt=arguments.length;ct<zt;ct++){pt=arguments[ct];for(var Nt in pt)Object.prototype.hasOwnProperty.call(pt,Nt)&&(St[Nt]=pt[Nt])}return St},A.apply(this,arguments)};function e(ft,bt){var St={};for(var pt in ft)Object.prototype.hasOwnProperty.call(ft,pt)&&bt.indexOf(pt)<0&&(St[pt]=ft[pt]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,pt=Object.getOwnPropertySymbols(ft);ct<pt.length;ct++)bt.indexOf(pt[ct])<0&&Object.prototype.propertyIsEnumerable.call(ft,pt[ct])&&(St[pt[ct]]=ft[pt[ct]]);return St}function i(ft,bt,St,pt){var ct=arguments.length,zt=ct<3?bt:pt===null?pt=Object.getOwnPropertyDescriptor(bt,St):pt,Nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")zt=Reflect.decorate(ft,bt,St,pt);else for(var wt=ft.length-1;wt>=0;wt--)(Nt=ft[wt])&&(zt=(ct<3?Nt(zt):ct>3?Nt(bt,St,zt):Nt(bt,St))||zt);return ct>3&&zt&&Object.defineProperty(bt,St,zt),zt}function p(ft,bt){return function(St,pt){bt(St,pt,ft)}}function m(ft,bt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ft,bt)}function S(ft,bt,St,pt){function ct(zt){return zt instanceof St?zt:new St(function(Nt){Nt(zt)})}return new(St||(St=Promise))(function(zt,Nt){function wt(dt){try{ht(pt.next(dt))}catch(yt){Nt(yt)}}function H(dt){try{ht(pt.throw(dt))}catch(yt){Nt(yt)}}function ht(dt){dt.done?zt(dt.value):ct(dt.value).then(wt,H)}ht((pt=pt.apply(ft,bt||[])).next())})}function l(ft,bt){var St={label:0,sent:function(){if(zt[0]&1)throw zt[1];return zt[1]},trys:[],ops:[]},pt,ct,zt,Nt;return Nt={next:wt(0),throw:wt(1),return:wt(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function wt(ht){return function(dt){return H([ht,dt])}}function H(ht){if(pt)throw new TypeError("Generator is already executing.");for(;St;)try{if(pt=1,ct&&(zt=ht[0]&2?ct.return:ht[0]?ct.throw||((zt=ct.return)&&zt.call(ct),0):ct.next)&&!(zt=zt.call(ct,ht[1])).done)return zt;switch(ct=0,zt&&(ht=[ht[0]&2,zt.value]),ht[0]){case 0:case 1:zt=ht;break;case 4:return St.label++,{value:ht[1],done:!1};case 5:St.label++,ct=ht[1],ht=[0];continue;case 7:ht=St.ops.pop(),St.trys.pop();continue;default:if(zt=St.trys,!(zt=zt.length>0&&zt[zt.length-1])&&(ht[0]===6||ht[0]===2)){St=0;continue}if(ht[0]===3&&(!zt||ht[1]>zt[0]&&ht[1]<zt[3])){St.label=ht[1];break}if(ht[0]===6&&St.label<zt[1]){St.label=zt[1],zt=ht;break}if(zt&&St.label<zt[2]){St.label=zt[2],St.ops.push(ht);break}zt[2]&&St.ops.pop(),St.trys.pop();continue}ht=bt.call(ft,St)}catch(dt){ht=[6,dt],ct=0}finally{pt=zt=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}var M=Object.create?function(ft,bt,St,pt){pt===void 0&&(pt=St),Object.defineProperty(ft,pt,{enumerable:!0,get:function(){return bt[St]}})}:function(ft,bt,St,pt){pt===void 0&&(pt=St),ft[pt]=bt[St]};function j(ft,bt){for(var St in ft)St!=="default"&&!Object.prototype.hasOwnProperty.call(bt,St)&&M(bt,ft,St)}function y(ft){var bt=typeof Symbol=="function"&&Symbol.iterator,St=bt&&ft[bt],pt=0;if(St)return St.call(ft);if(ft&&typeof ft.length=="number")return{next:function(){return ft&&pt>=ft.length&&(ft=void 0),{value:ft&&ft[pt++],done:!ft}}};throw new TypeError(bt?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(ft,bt){var St=typeof Symbol=="function"&&ft[Symbol.iterator];if(!St)return ft;var pt=St.call(ft),ct,zt=[],Nt;try{for(;(bt===void 0||bt-- >0)&&!(ct=pt.next()).done;)zt.push(ct.value)}catch(wt){Nt={error:wt}}finally{try{ct&&!ct.done&&(St=pt.return)&&St.call(pt)}finally{if(Nt)throw Nt.error}}return zt}function s(){for(var ft=[],bt=0;bt<arguments.length;bt++)ft=ft.concat(n(arguments[bt]));return ft}function d(){for(var ft=0,bt=0,St=arguments.length;bt<St;bt++)ft+=arguments[bt].length;for(var pt=Array(ft),ct=0,bt=0;bt<St;bt++)for(var zt=arguments[bt],Nt=0,wt=zt.length;Nt<wt;Nt++,ct++)pt[ct]=zt[Nt];return pt}function E(ft,bt){for(var St=0,pt=bt.length,ct=ft.length;St<pt;St++,ct++)ft[ct]=bt[St];return ft}function O(ft){return this instanceof O?(this.v=ft,this):new O(ft)}function C(ft,bt,St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt=St.apply(ft,bt||[]),ct,zt=[];return ct={},Nt("next"),Nt("throw"),Nt("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function Nt(Mt){pt[Mt]&&(ct[Mt]=function($){return new Promise(function(lt,rt){zt.push([Mt,$,lt,rt])>1||wt(Mt,$)})})}function wt(Mt,$){try{H(pt[Mt]($))}catch(lt){yt(zt[0][3],lt)}}function H(Mt){Mt.value instanceof O?Promise.resolve(Mt.value.v).then(ht,dt):yt(zt[0][2],Mt)}function ht(Mt){wt("next",Mt)}function dt(Mt){wt("throw",Mt)}function yt(Mt,$){Mt($),zt.shift(),zt.length&&wt(zt[0][0],zt[0][1])}}function v(ft){var bt,St;return bt={},pt("next"),pt("throw",function(ct){throw ct}),pt("return"),bt[Symbol.iterator]=function(){return this},bt;function pt(ct,zt){bt[ct]=ft[ct]?function(Nt){return(St=!St)?{value:O(ft[ct](Nt)),done:ct==="return"}:zt?zt(Nt):Nt}:zt}}function x(ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=ft[Symbol.asyncIterator],St;return bt?bt.call(ft):(ft=typeof y=="function"?y(ft):ft[Symbol.iterator](),St={},pt("next"),pt("throw"),pt("return"),St[Symbol.asyncIterator]=function(){return this},St);function pt(zt){St[zt]=ft[zt]&&function(Nt){return new Promise(function(wt,H){Nt=ft[zt](Nt),ct(wt,H,Nt.done,Nt.value)})}}function ct(zt,Nt,wt,H){Promise.resolve(H).then(function(ht){zt({value:ht,done:wt})},Nt)}}function T(ft,bt){return Object.defineProperty?Object.defineProperty(ft,"raw",{value:bt}):ft.raw=bt,ft}var N=Object.create?function(ft,bt){Object.defineProperty(ft,"default",{enumerable:!0,value:bt})}:function(ft,bt){ft.default=bt};function X(ft){if(ft&&ft.__esModule)return ft;var bt={};if(ft!=null)for(var St in ft)St!=="default"&&Object.prototype.hasOwnProperty.call(ft,St)&&M(bt,ft,St);return N(bt,ft),bt}function tt(ft){return ft&&ft.__esModule?ft:{default:ft}}function nt(ft,bt){if(!bt.has(ft))throw new TypeError("attempted to get private field on non-instance");return bt.get(ft)}function vt(ft,bt,St){if(!bt.has(ft))throw new TypeError("attempted to set private field on non-instance");return bt.set(ft,St),St}},mttH:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return j});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("w02o"),i=_("tKoa"),p=_("DyAw"),m=_("lFe4"),S=_("7cv3");function l(y){var n,s,d=y.chart,E=y.options,O=E.data,C=E.xAxis,v=E.yAxis,x=E.color,T=E.lineStyle,N=E.point,X=Object(m.a)(O);d.data(X);var tt=Object(A.b)({},y,{options:{xField:S.b,yField:S.c,line:{color:x,style:T},point:N}}),nt=Object(A.b)({},tt,{options:{tooltip:!1}});return Object(i.d)(tt),Object(i.e)(nt),d.axis(!1),d.legend(!1),Object(e.f)((n={},n[S.b]=C,n[S.c]=v,n),(s={},s[S.b]={type:"cat"},s[S.c]=Object(p.a)(X,S.c),s))(y),y}function M(y){return Object(A.e)(l,e.j,e.k,e.a,Object(e.b)())(y)}var j=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-line",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(m.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},S.a),animation:!0}},n.prototype.getSchemaAdaptor=function(){return M},n}(a.a)},"n+fv":function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"create",function(){return a}),_.d(Gt,"clone",function(){return A}),_.d(Gt,"length",function(){return e}),_.d(Gt,"fromValues",function(){return i}),_.d(Gt,"copy",function(){return p}),_.d(Gt,"set",function(){return m}),_.d(Gt,"add",function(){return S}),_.d(Gt,"subtract",function(){return l}),_.d(Gt,"multiply",function(){return M}),_.d(Gt,"divide",function(){return j}),_.d(Gt,"ceil",function(){return y}),_.d(Gt,"floor",function(){return n}),_.d(Gt,"min",function(){return s}),_.d(Gt,"max",function(){return d}),_.d(Gt,"round",function(){return E}),_.d(Gt,"scale",function(){return O}),_.d(Gt,"scaleAndAdd",function(){return C}),_.d(Gt,"distance",function(){return v}),_.d(Gt,"squaredDistance",function(){return x}),_.d(Gt,"squaredLength",function(){return T}),_.d(Gt,"negate",function(){return N}),_.d(Gt,"inverse",function(){return X}),_.d(Gt,"normalize",function(){return tt}),_.d(Gt,"dot",function(){return nt}),_.d(Gt,"cross",function(){return vt}),_.d(Gt,"lerp",function(){return ft}),_.d(Gt,"hermite",function(){return bt}),_.d(Gt,"bezier",function(){return St}),_.d(Gt,"random",function(){return pt}),_.d(Gt,"transformMat4",function(){return ct}),_.d(Gt,"transformMat3",function(){return zt}),_.d(Gt,"transformQuat",function(){return Nt}),_.d(Gt,"rotateX",function(){return wt}),_.d(Gt,"rotateY",function(){return H}),_.d(Gt,"rotateZ",function(){return ht}),_.d(Gt,"angle",function(){return dt}),_.d(Gt,"zero",function(){return yt}),_.d(Gt,"str",function(){return Mt}),_.d(Gt,"exactEquals",function(){return $}),_.d(Gt,"equals",function(){return lt}),_.d(Gt,"sub",function(){return rt}),_.d(Gt,"mul",function(){return z}),_.d(Gt,"div",function(){return P}),_.d(Gt,"dist",function(){return Y}),_.d(Gt,"sqrDist",function(){return k}),_.d(Gt,"len",function(){return h}),_.d(Gt,"sqrLen",function(){return g}),_.d(Gt,"forEach",function(){return B});var at=_("yU0y");function a(){var V=new at.a(3);return at.a!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function A(V){var q=new at.a(3);return q[0]=V[0],q[1]=V[1],q[2]=V[2],q}function e(V){var q=V[0],it=V[1],ot=V[2];return Math.hypot(q,it,ot)}function i(V,q,it){var ot=new at.a(3);return ot[0]=V,ot[1]=q,ot[2]=it,ot}function p(V,q){return V[0]=q[0],V[1]=q[1],V[2]=q[2],V}function m(V,q,it,ot){return V[0]=q,V[1]=it,V[2]=ot,V}function S(V,q,it){return V[0]=q[0]+it[0],V[1]=q[1]+it[1],V[2]=q[2]+it[2],V}function l(V,q,it){return V[0]=q[0]-it[0],V[1]=q[1]-it[1],V[2]=q[2]-it[2],V}function M(V,q,it){return V[0]=q[0]*it[0],V[1]=q[1]*it[1],V[2]=q[2]*it[2],V}function j(V,q,it){return V[0]=q[0]/it[0],V[1]=q[1]/it[1],V[2]=q[2]/it[2],V}function y(V,q){return V[0]=Math.ceil(q[0]),V[1]=Math.ceil(q[1]),V[2]=Math.ceil(q[2]),V}function n(V,q){return V[0]=Math.floor(q[0]),V[1]=Math.floor(q[1]),V[2]=Math.floor(q[2]),V}function s(V,q,it){return V[0]=Math.min(q[0],it[0]),V[1]=Math.min(q[1],it[1]),V[2]=Math.min(q[2],it[2]),V}function d(V,q,it){return V[0]=Math.max(q[0],it[0]),V[1]=Math.max(q[1],it[1]),V[2]=Math.max(q[2],it[2]),V}function E(V,q){return V[0]=Math.round(q[0]),V[1]=Math.round(q[1]),V[2]=Math.round(q[2]),V}function O(V,q,it){return V[0]=q[0]*it,V[1]=q[1]*it,V[2]=q[2]*it,V}function C(V,q,it,ot){return V[0]=q[0]+it[0]*ot,V[1]=q[1]+it[1]*ot,V[2]=q[2]+it[2]*ot,V}function v(V,q){var it=q[0]-V[0],ot=q[1]-V[1],At=q[2]-V[2];return Math.hypot(it,ot,At)}function x(V,q){var it=q[0]-V[0],ot=q[1]-V[1],At=q[2]-V[2];return it*it+ot*ot+At*At}function T(V){var q=V[0],it=V[1],ot=V[2];return q*q+it*it+ot*ot}function N(V,q){return V[0]=-q[0],V[1]=-q[1],V[2]=-q[2],V}function X(V,q){return V[0]=1/q[0],V[1]=1/q[1],V[2]=1/q[2],V}function tt(V,q){var it=q[0],ot=q[1],At=q[2],gt=it*it+ot*ot+At*At;return gt>0&&(gt=1/Math.sqrt(gt)),V[0]=q[0]*gt,V[1]=q[1]*gt,V[2]=q[2]*gt,V}function nt(V,q){return V[0]*q[0]+V[1]*q[1]+V[2]*q[2]}function vt(V,q,it){var ot=q[0],At=q[1],gt=q[2],mt=it[0],Ot=it[1],It=it[2];return V[0]=At*It-gt*Ot,V[1]=gt*mt-ot*It,V[2]=ot*Ot-At*mt,V}function ft(V,q,it,ot){var At=q[0],gt=q[1],mt=q[2];return V[0]=At+ot*(it[0]-At),V[1]=gt+ot*(it[1]-gt),V[2]=mt+ot*(it[2]-mt),V}function bt(V,q,it,ot,At,gt){var mt=gt*gt,Ot=mt*(2*gt-3)+1,It=mt*(gt-2)+gt,Dt=mt*(gt-1),Ut=mt*(3-2*gt);return V[0]=q[0]*Ot+it[0]*It+ot[0]*Dt+At[0]*Ut,V[1]=q[1]*Ot+it[1]*It+ot[1]*Dt+At[1]*Ut,V[2]=q[2]*Ot+it[2]*It+ot[2]*Dt+At[2]*Ut,V}function St(V,q,it,ot,At,gt){var mt=1-gt,Ot=mt*mt,It=gt*gt,Dt=Ot*mt,Ut=3*gt*Ot,Ct=3*It*mt,Vt=It*gt;return V[0]=q[0]*Dt+it[0]*Ut+ot[0]*Ct+At[0]*Vt,V[1]=q[1]*Dt+it[1]*Ut+ot[1]*Ct+At[1]*Vt,V[2]=q[2]*Dt+it[2]*Ut+ot[2]*Ct+At[2]*Vt,V}function pt(V,q){q=q||1;var it=at.c()*2*Math.PI,ot=at.c()*2-1,At=Math.sqrt(1-ot*ot)*q;return V[0]=Math.cos(it)*At,V[1]=Math.sin(it)*At,V[2]=ot*q,V}function ct(V,q,it){var ot=q[0],At=q[1],gt=q[2],mt=it[3]*ot+it[7]*At+it[11]*gt+it[15];return mt=mt||1,V[0]=(it[0]*ot+it[4]*At+it[8]*gt+it[12])/mt,V[1]=(it[1]*ot+it[5]*At+it[9]*gt+it[13])/mt,V[2]=(it[2]*ot+it[6]*At+it[10]*gt+it[14])/mt,V}function zt(V,q,it){var ot=q[0],At=q[1],gt=q[2];return V[0]=ot*it[0]+At*it[3]+gt*it[6],V[1]=ot*it[1]+At*it[4]+gt*it[7],V[2]=ot*it[2]+At*it[5]+gt*it[8],V}function Nt(V,q,it){var ot=it[0],At=it[1],gt=it[2],mt=it[3],Ot=q[0],It=q[1],Dt=q[2],Ut=At*Dt-gt*It,Ct=gt*Ot-ot*Dt,Vt=ot*It-At*Ot,Ht=At*Vt-gt*Ct,re=gt*Ut-ot*Vt,pe=ot*Ct-At*Ut,ye=mt*2;return Ut*=ye,Ct*=ye,Vt*=ye,Ht*=2,re*=2,pe*=2,V[0]=Ot+Ut+Ht,V[1]=It+Ct+re,V[2]=Dt+Vt+pe,V}function wt(V,q,it,ot){var At=[],gt=[];return At[0]=q[0]-it[0],At[1]=q[1]-it[1],At[2]=q[2]-it[2],gt[0]=At[0],gt[1]=At[1]*Math.cos(ot)-At[2]*Math.sin(ot),gt[2]=At[1]*Math.sin(ot)+At[2]*Math.cos(ot),V[0]=gt[0]+it[0],V[1]=gt[1]+it[1],V[2]=gt[2]+it[2],V}function H(V,q,it,ot){var At=[],gt=[];return At[0]=q[0]-it[0],At[1]=q[1]-it[1],At[2]=q[2]-it[2],gt[0]=At[2]*Math.sin(ot)+At[0]*Math.cos(ot),gt[1]=At[1],gt[2]=At[2]*Math.cos(ot)-At[0]*Math.sin(ot),V[0]=gt[0]+it[0],V[1]=gt[1]+it[1],V[2]=gt[2]+it[2],V}function ht(V,q,it,ot){var At=[],gt=[];return At[0]=q[0]-it[0],At[1]=q[1]-it[1],At[2]=q[2]-it[2],gt[0]=At[0]*Math.cos(ot)-At[1]*Math.sin(ot),gt[1]=At[0]*Math.sin(ot)+At[1]*Math.cos(ot),gt[2]=At[2],V[0]=gt[0]+it[0],V[1]=gt[1]+it[1],V[2]=gt[2]+it[2],V}function dt(V,q){var it=V[0],ot=V[1],At=V[2],gt=q[0],mt=q[1],Ot=q[2],It=Math.sqrt(it*it+ot*ot+At*At),Dt=Math.sqrt(gt*gt+mt*mt+Ot*Ot),Ut=It*Dt,Ct=Ut&&nt(V,q)/Ut;return Math.acos(Math.min(Math.max(Ct,-1),1))}function yt(V){return V[0]=0,V[1]=0,V[2]=0,V}function Mt(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function $(V,q){return V[0]===q[0]&&V[1]===q[1]&&V[2]===q[2]}function lt(V,q){var it=V[0],ot=V[1],At=V[2],gt=q[0],mt=q[1],Ot=q[2];return Math.abs(it-gt)<=at.b*Math.max(1,Math.abs(it),Math.abs(gt))&&Math.abs(ot-mt)<=at.b*Math.max(1,Math.abs(ot),Math.abs(mt))&&Math.abs(At-Ot)<=at.b*Math.max(1,Math.abs(At),Math.abs(Ot))}var rt=l,z=M,P=j,Y=v,k=x,h=e,g=T,B=function(){var V=a();return function(q,it,ot,At,gt,mt){var Ot,It;for(it||(it=3),ot||(ot=0),At?It=Math.min(At*it+ot,q.length):It=q.length,Ot=ot;Ot<It;Ot+=it)V[0]=q[Ot],V[1]=q[Ot+1],V[2]=q[Ot+2],gt(V,V,mt),q[Ot]=V[0],q[Ot+1]=V[1],q[Ot+2]=V[2];return q}}()},"n/J0":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return at}),_.d(Gt,"b",function(){return a});var at=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask"],a={GRADIENT:{CONTINUOUS:"#BAE7FF-#1890FF-#0050B3"}}},nCnq:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return i});var at=_("cyZq");function a(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function A(p,m){return a(p)*a(m)?(p[0]*m[0]+p[1]*m[1])/(a(p)*a(m)):1}function e(p,m){return(p[0]*m[1]<p[1]*m[0]?-1:1)*Math.acos(A(p,m))}function i(p,m){var S=m[1],l=m[2],M=Object(at.m)(Object(at.o)(m[3]),Math.PI*2),j=m[4],y=m[5],n=p[0],s=p[1],d=m[6],E=m[7],O=Math.cos(M)*(n-d)/2+Math.sin(M)*(s-E)/2,C=-1*Math.sin(M)*(n-d)/2+Math.cos(M)*(s-E)/2,v=O*O/(S*S)+C*C/(l*l);v>1&&(S*=Math.sqrt(v),l*=Math.sqrt(v));var x=S*S*(C*C)+l*l*(O*O),T=x?Math.sqrt((S*S*(l*l)-x)/x):1;j===y&&(T*=-1),isNaN(T)&&(T=0);var N=l?T*S*C/l:0,X=S?T*-l*O/S:0,tt=(n+d)/2+Math.cos(M)*N-Math.sin(M)*X,nt=(s+E)/2+Math.sin(M)*N+Math.cos(M)*X,vt=[(O-N)/S,(C-X)/l],ft=[(-1*O-N)/S,(-1*C-X)/l],bt=e([1,0],vt),St=e(vt,ft);return A(vt,ft)<=-1&&(St=Math.PI),A(vt,ft)>=1&&(St=0),y===0&&St>0&&(St=St-2*Math.PI),y===1&&St<0&&(St=St+2*Math.PI),{cx:tt,cy:nt,rx:Object(at.j)(p,[d,E])?0:S,ry:Object(at.j)(p,[d,E])?0:l,startAngle:bt,endAngle:bt+St,xRotation:M,arcFlag:j,sweepFlag:y}}},nMtQ:function(Gn,Gt,_){Gn.exports={updateTime:"updateTime___3zyv9"}},nycV:function(Gn,Gt,_){"use strict";_.d(Gt,"c",function(){return l}),_.d(Gt,"b",function(){return M}),_.d(Gt,"a",function(){return j});var at=_("mrSG"),a=_("R5nb"),A=Math.sin,e=Math.cos,i=Math.atan2,p=Math.PI;function m(y,n,s,d,E,O,C){var v=n.stroke,x=n.lineWidth,T=s-E,N=d-O,X=i(N,T),tt=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*e(p/6)+","+10*A(p/6)+" L0,0 L"+10*e(p/6)+",-"+10*A(p/6),stroke:v,lineWidth:x}});tt.translate(E,O),tt.rotateAtPoint(E,O,X),y.set(C?"startArrowShape":"endArrowShape",tt)}function S(y,n,s,d,E,O,C){var v=n.startArrow,x=n.endArrow,T=n.stroke,N=n.lineWidth,X=C?v:x,tt=X.d,nt=X.fill,vt=X.stroke,ft=X.lineWidth,bt=Object(at.c)(X,["d","fill","stroke","lineWidth"]),St=s-E,pt=d-O,ct=i(pt,St);tt&&(E=E-e(ct)*tt,O=O-A(ct)*tt);var zt=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:Object(at.a)(Object(at.a)({},bt),{stroke:vt||T,lineWidth:ft||N,fill:nt})});zt.translate(E,O),zt.rotateAtPoint(E,O,ct),y.set(C?"startArrowShape":"endArrowShape",zt)}function l(y,n,s,d,E){var O=i(d-n,s-y);return{dx:e(O)*E,dy:A(O)*E}}function M(y,n,s,d,E,O){typeof n.startArrow=="object"?S(y,n,s,d,E,O,!0):n.startArrow?m(y,n,s,d,E,O,!0):y.set("startArrowShape",null)}function j(y,n,s,d,E,O){typeof n.endArrow=="object"?S(y,n,s,d,E,O,!1):n.endArrow?m(y,n,s,d,E,O,!1):y.set("startArrowShape",null)}},q4HE:function(Gn,Gt){var _="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",p="["+_+"]",m="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",l="(?:"+m+"|"+S+")",M="[^"+_+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",d="["+i+"]?",E="(?:"+n+"(?:"+[M,j,y].join("|")+")"+d+s+")*",O=d+s+E,C="(?:"+[M+m+"?",m,j,y,p].join("|")+")",v=RegExp(S+"(?="+S+")|"+C+O,"g");function x(T){for(var N=v.lastIndex=0;v.test(T);)++N;return N}Gn.exports=x},qaDU:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return e});var at=_("mrSG"),a=_("kXyF"),A=[1,0,0,0,1,0,0,0,1];function e(i,p){var m=p?Object(at.d)(p):Object(at.d)(A);return a.Util.transform(m,i)}},quyA:function(Gn,Gt){var _="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,i="\\ufe0e\\ufe0f",p="\\u200d",m=RegExp("["+p+_+e+i+"]");function S(l){return m.test(l)}Gn.exports=S},r0DC:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return M}),_.d(Gt,"a",function(){return j});var at=_("cyZq"),a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,A=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function p(y,n){var s=y.match(i);Object(at.c)(s,function(d){var E=d.split(":");n.addColorStop(E[0],E[1])})}function m(y,n,s){var d=a.exec(s),E=parseFloat(d[1])%360*(Math.PI/180),O=d[2],C=n.getBBox(),v,x;E>=0&&E<1/2*Math.PI?(v={x:C.minX,y:C.minY},x={x:C.maxX,y:C.maxY}):1/2*Math.PI<=E&&E<Math.PI?(v={x:C.maxX,y:C.minY},x={x:C.minX,y:C.maxY}):Math.PI<=E&&E<3/2*Math.PI?(v={x:C.maxX,y:C.maxY},x={x:C.minX,y:C.minY}):(v={x:C.minX,y:C.maxY},x={x:C.maxX,y:C.minY});var T=Math.tan(E),N=T*T,X=(x.x-v.x+T*(x.y-v.y))/(N+1)+v.x,tt=T*(x.x-v.x+T*(x.y-v.y))/(N+1)+v.y,nt=y.createLinearGradient(v.x,v.y,X,tt);return p(O,nt),nt}function S(y,n,s){var d=A.exec(s),E=parseFloat(d[1]),O=parseFloat(d[2]),C=parseFloat(d[3]),v=d[4];if(C===0){var x=v.match(i);return x[x.length-1].split(":")[1]}var T=n.getBBox(),N=T.maxX-T.minX,X=T.maxY-T.minY,tt=Math.sqrt(N*N+X*X)/2,nt=y.createRadialGradient(T.minX+N*E,T.minY+X*O,0,T.minX+N/2,T.minY+X/2,C*tt);return p(v,nt),nt}function l(y,n,s){if(n.get("patternSource")&&n.get("patternSource")===s)return n.get("pattern");var d,E,O=e.exec(s),C=O[1],v=O[2];function x(){d=y.createPattern(E,C),n.set("pattern",d),n.set("patternSource",s)}switch(C){case"a":C="repeat";break;case"x":C="repeat-x";break;case"y":C="repeat-y";break;case"n":C="no-repeat";break;default:C="no-repeat"}return E=new Image,v.match(/^data:/i)||(E.crossOrigin="Anonymous"),E.src=v,E.complete?x():(E.onload=x,E.src=E.src),d}function M(y,n,s){if(Object(at.k)(s)){if(s[1]==="("||s[2]==="("){if(s[0]==="l")return m(y,n,s);if(s[0]==="r")return S(y,n,s);if(s[0]==="p")return l(y,n,s)}return s}}function j(y){var n=0,s=0,d=0,E=0;return Object(at.g)(y)?y.length===1?n=s=d=E=y[0]:y.length===2?(n=d=y[0],s=E=y[1]):y.length===3?(n=y[0],s=E=y[1],d=y[2]):(n=y[0],s=y[1],d=y[2],E=y[3]):n=s=d=E=y,[n,s,d,E]}},rtSP:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return pe});var at=_("mrSG"),a=_("zJSt"),A=_("w02o"),e=_("YuPD"),i=_("iTfj"),p=_("ODXe"),m=_("uFwe");function S(ye,we){var Ne=0;if(we===void 0){var Ke=Object(m.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;(hn=+hn)&&(Ne+=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(m.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=+we(Mn,++kn,ye))&&(Ne+=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function l(ye,we){var Ne;if(we===void 0){var Ke=Object(m.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;hn!=null&&(Ne<hn||Ne===void 0&&hn>=hn)&&(Ne=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(m.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++kn,ye))!=null&&(Ne<Mn||Ne===void 0&&Mn>=Mn)&&(Ne=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function M(ye,we){var Ne;if(we===void 0){var Ke=Object(m.a)(ye),pn;try{for(Ke.s();!(pn=Ke.n()).done;){var hn=pn.value;hn!=null&&(Ne>hn||Ne===void 0&&hn>=hn)&&(Ne=hn)}}catch(Cn){Ke.e(Cn)}finally{Ke.f()}}else{var kn=-1,Tn=Object(m.a)(ye),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++kn,ye))!=null&&(Ne>Mn||Ne===void 0&&Mn>=Mn)&&(Ne=Mn)}}catch(Cn){Tn.e(Cn)}finally{Tn.f()}}return Ne}function j(ye){return ye.target.depth}function y(ye){return ye.depth}function n(ye,we){return we-1-ye.height}function s(ye,we){return ye.sourceLinks.length?ye.depth:we-1}function d(ye){return ye.targetLinks.length?ye.depth:ye.sourceLinks.length?M(ye.sourceLinks,j)-1:0}function E(ye){return function(){return ye}}function O(ye,we){return v(ye.source,we.source)||ye.index-we.index}function C(ye,we){return v(ye.target,we.target)||ye.index-we.index}function v(ye,we){return ye.y0-we.y0}function x(ye){return ye.value}function T(ye){return ye.index}function N(ye){return ye.nodes}function X(ye){return ye.links}function tt(ye,we){var Ne=ye.get(we);if(!Ne)throw new Error("missing: "+we);return Ne}function nt(ye){var we=ye.nodes,Ne=Object(m.a)(we),Ke;try{for(Ne.s();!(Ke=Ne.n()).done;){var pn=Ke.value,hn=pn.y0,kn=hn,Tn=Object(m.a)(pn.sourceLinks),Rn;try{for(Tn.s();!(Rn=Tn.n()).done;){var Mn=Rn.value;Mn.y0=hn+Mn.width/2,hn+=Mn.width}}catch(tr){Tn.e(tr)}finally{Tn.f()}var Cn=Object(m.a)(pn.targetLinks),_n;try{for(Cn.s();!(_n=Cn.n()).done;){var Kn=_n.value;Kn.y1=kn+Kn.width/2,kn+=Kn.width}}catch(tr){Cn.e(tr)}finally{Cn.f()}}}catch(tr){Ne.e(tr)}finally{Ne.f()}}function vt(){var ye=0,we=0,Ne=1,Ke=1,pn=24,hn=8,kn,Tn=T,Rn=s,Mn,Cn,_n=N,Kn=X,tr=6;function or(){var pr={nodes:_n.apply(null,arguments),links:Kn.apply(null,arguments)};return nr(pr),er(pr),Sr(pr),Vr(pr),Fi(pr),nt(pr),pr}or.update=function(pr){return nt(pr),pr},or.nodeId=function(pr){return arguments.length?(Tn=typeof pr=="function"?pr:E(pr),or):Tn},or.nodeAlign=function(pr){return arguments.length?(Rn=typeof pr=="function"?pr:E(pr),or):Rn},or.nodeSort=function(pr){return arguments.length?(Mn=pr,or):Mn},or.nodeWidth=function(pr){return arguments.length?(pn=+pr,or):pn},or.nodePadding=function(pr){return arguments.length?(hn=kn=+pr,or):hn},or.nodes=function(pr){return arguments.length?(_n=typeof pr=="function"?pr:E(pr),or):_n},or.links=function(pr){return arguments.length?(Kn=typeof pr=="function"?pr:E(pr),or):Kn},or.linkSort=function(pr){return arguments.length?(Cn=pr,or):Cn},or.size=function(pr){return arguments.length?(ye=we=0,Ne=+pr[0],Ke=+pr[1],or):[Ne-ye,Ke-we]},or.extent=function(pr){return arguments.length?(ye=+pr[0][0],Ne=+pr[1][0],we=+pr[0][1],Ke=+pr[1][1],or):[[ye,we],[Ne,Ke]]},or.iterations=function(pr){return arguments.length?(tr=+pr,or):tr};function nr(pr){var Xr=pr.nodes,Br=pr.links,Nr=Object(m.a)(Xr.entries()),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Object(p.a)(Kr,2),fi=ni[0],$r=ni[1];$r.index=fi,$r.sourceLinks=[],$r.targetLinks=[]}}catch(uo){Nr.e(uo)}finally{Nr.f()}var ci=new Map(Xr.map(function(uo,xo){return[Tn(uo,xo,Xr),uo]})),Qr=Object(m.a)(Br.entries()),gi;try{for(Qr.s();!(gi=Qr.n()).done;){var Oi=gi.value,bi=Object(p.a)(Oi,2),zi=bi[0],Qi=bi[1];Qi.index=zi;var io=Qi.source,Wi=Qi.target;typeof io!="object"&&(io=Qi.source=tt(ci,io)),typeof Wi!="object"&&(Wi=Qi.target=tt(ci,Wi)),io.sourceLinks.push(Qi),Wi.targetLinks.push(Qi)}}catch(uo){Qr.e(uo)}finally{Qr.f()}if(Cn!=null){var Zi=Object(m.a)(Xr),Pi;try{for(Zi.s();!(Pi=Zi.n()).done;){var no=Pi.value,Mo=no.sourceLinks,ao=no.targetLinks;Mo.sort(Cn),ao.sort(Cn)}}catch(uo){Zi.e(uo)}finally{Zi.f()}}}function er(pr){var Xr=pr.nodes,Br=Object(m.a)(Xr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Yr=Nr.value;Yr.value=Yr.fixedValue===void 0?Math.max(S(Yr.sourceLinks,x),S(Yr.targetLinks,x)):Yr.fixedValue}}catch(Kr){Br.e(Kr)}finally{Br.f()}}function Sr(pr){for(var Xr=pr.nodes,Br=Xr.length,Nr=new Set(Xr),Yr=new Set,Kr=0;Nr.size;){var ni=Object(m.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.depth=Kr;var ci=Object(m.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.target;Yr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Yr,Yr=new Set}}function Vr(pr){for(var Xr=pr.nodes,Br=Xr.length,Nr=new Set(Xr),Yr=new Set,Kr=0;Nr.size;){var ni=Object(m.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.height=Kr;var ci=Object(m.a)($r.targetLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.source;Yr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Yr,Yr=new Set}}function ti(pr){var Xr=pr.nodes,Br=l(Xr,function(Oi){return Oi.depth})+1,Nr=(Ne-ye-pn)/(Br-1),Yr=new Array(Br),Kr=Object(m.a)(Xr),ni;try{for(Kr.s();!(ni=Kr.n()).done;){var fi=ni.value,$r=Math.max(0,Math.min(Br-1,Math.floor(Rn.call(null,fi,Br))));fi.layer=$r,fi.x0=ye+$r*Nr,fi.x1=fi.x0+pn,Yr[$r]?Yr[$r].push(fi):Yr[$r]=[fi]}}catch(Oi){Kr.e(Oi)}finally{Kr.f()}if(Mn){var ci=Object(m.a)(Yr),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.sort(Mn)}}catch(Oi){ci.e(Oi)}finally{ci.f()}}return Yr}function hi(pr){var Xr=M(pr,function(zi){return(Ke-we-(zi.length-1)*kn)/S(zi,x)}),Br=Object(m.a)(pr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Yr=Nr.value,Kr=we,ni=Object(m.a)(Yr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.y0=Kr,$r.y1=Kr+$r.value*Xr,Kr=$r.y1+kn;var ci=Object(m.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.width=gi.value*Xr}}catch(zi){ci.e(zi)}finally{ci.f()}}}catch(zi){ni.e(zi)}finally{ni.f()}Kr=(Ke-Kr+kn)/(Yr.length+1);for(var Oi=0;Oi<Yr.length;++Oi){var bi=Yr[Oi];bi.y0+=Kr*(Oi+1),bi.y1+=Kr*(Oi+1)}ro(Yr)}}catch(zi){Br.e(zi)}finally{Br.f()}}function Fi(pr){var Xr=ti(pr);kn=Math.min(hn,(Ke-we)/(l(Xr,function(Kr){return Kr.length})-1)),hi(Xr);for(var Br=0;Br<tr;++Br){var Nr=Math.pow(.99,Br),Yr=Math.max(1-Nr,(Br+1)/tr);si(Xr,Nr,Yr),to(Xr,Nr,Yr)}}function to(pr,Xr,Br){for(var Nr=1,Yr=pr.length;Nr<Yr;++Nr){var Kr=pr[Nr],ni=Object(m.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(m.a)($r.targetLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.source,Qi=bi.value,io=Qi*($r.layer-zi.layer);ci+=jr(zi,$r)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Xr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ci(Kr,Br)}}function si(pr,Xr,Br){for(var Nr=pr.length,Yr=Nr-2;Yr>=0;--Yr){var Kr=pr[Yr],ni=Object(m.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(m.a)($r.sourceLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.target,Qi=bi.value,io=Qi*(zi.layer-$r.layer);ci+=Ji($r,zi)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Xr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ci(Kr,Br)}}function Ci(pr,Xr){var Br=pr.length>>1,Nr=pr[Br];Li(pr,Nr.y0-kn,Br-1,Xr),Ui(pr,Nr.y1+kn,Br+1,Xr),Li(pr,Ke,pr.length-1,Xr),Ui(pr,we,0,Xr)}function Ui(pr,Xr,Br,Nr){for(;Br<pr.length;++Br){var Yr=pr[Br],Kr=(Xr-Yr.y0)*Nr;Kr>1e-6&&(Yr.y0+=Kr,Yr.y1+=Kr),Xr=Yr.y1+kn}}function Li(pr,Xr,Br,Nr){for(;Br>=0;--Br){var Yr=pr[Br],Kr=(Yr.y1-Xr)*Nr;Kr>1e-6&&(Yr.y0-=Kr,Yr.y1-=Kr),Xr=Yr.y0-kn}}function Vi(pr){var Xr=pr.sourceLinks,Br=pr.targetLinks;if(Cn===void 0){var Nr=Object(m.a)(Br),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.source.sourceLinks;ni.sort(C)}}catch(gi){Nr.e(gi)}finally{Nr.f()}var fi=Object(m.a)(Xr),$r;try{for(fi.s();!($r=fi.n()).done;){var ci=$r.value,Qr=ci.target.targetLinks;Qr.sort(O)}}catch(gi){fi.e(gi)}finally{fi.f()}}}function ro(pr){if(Cn===void 0){var Xr=Object(m.a)(pr),Br;try{for(Xr.s();!(Br=Xr.n()).done;){var Nr=Br.value,Yr=Nr.sourceLinks,Kr=Nr.targetLinks;Yr.sort(C),Kr.sort(O)}}catch(ni){Xr.e(ni)}finally{Xr.f()}}}function jr(pr,Xr){var Br=pr.y0-(pr.sourceLinks.length-1)*kn/2,Nr=Object(m.a)(pr.sourceLinks),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.target,fi=Kr.width;if(ni===Xr)break;Br+=fi+kn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(m.a)(Xr.targetLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.source,Oi=Qr.width;if(gi===pr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}function Ji(pr,Xr){var Br=Xr.y0-(Xr.targetLinks.length-1)*kn/2,Nr=Object(m.a)(Xr.targetLinks),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.source,fi=Kr.width;if(ni===pr)break;Br+=fi+kn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(m.a)(pr.sourceLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.target,Oi=Qr.width;if(gi===Xr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}return or}var ft=Math.PI,bt=2*ft,St=1e-6,pt=bt-St;function ct(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zt(){return new ct}ct.prototype=zt.prototype={constructor:ct,moveTo:function(we,Ne){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Ne)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(we,Ne){this._+="L"+(this._x1=+we)+","+(this._y1=+Ne)},quadraticCurveTo:function(we,Ne,Ke,pn){this._+="Q"+ +we+","+ +Ne+","+(this._x1=+Ke)+","+(this._y1=+pn)},bezierCurveTo:function(we,Ne,Ke,pn,hn,kn){this._+="C"+ +we+","+ +Ne+","+ +Ke+","+ +pn+","+(this._x1=+hn)+","+(this._y1=+kn)},arcTo:function(we,Ne,Ke,pn,hn){we=+we,Ne=+Ne,Ke=+Ke,pn=+pn,hn=+hn;var kn=this._x1,Tn=this._y1,Rn=Ke-we,Mn=pn-Ne,Cn=kn-we,_n=Tn-Ne,Kn=Cn*Cn+_n*_n;if(hn<0)throw new Error("negative radius: "+hn);if(this._x1===null)this._+="M"+(this._x1=we)+","+(this._y1=Ne);else if(Kn>St)if(!(Math.abs(_n*Rn-Mn*Cn)>St)||!hn)this._+="L"+(this._x1=we)+","+(this._y1=Ne);else{var tr=Ke-kn,or=pn-Tn,nr=Rn*Rn+Mn*Mn,er=tr*tr+or*or,Sr=Math.sqrt(nr),Vr=Math.sqrt(Kn),ti=hn*Math.tan((ft-Math.acos((nr+Kn-er)/(2*Sr*Vr)))/2),hi=ti/Vr,Fi=ti/Sr;Math.abs(hi-1)>St&&(this._+="L"+(we+hi*Cn)+","+(Ne+hi*_n)),this._+="A"+hn+","+hn+",0,0,"+ +(_n*tr>Cn*or)+","+(this._x1=we+Fi*Rn)+","+(this._y1=Ne+Fi*Mn)}},arc:function(we,Ne,Ke,pn,hn,kn){we=+we,Ne=+Ne,Ke=+Ke,kn=!!kn;var Tn=Ke*Math.cos(pn),Rn=Ke*Math.sin(pn),Mn=we+Tn,Cn=Ne+Rn,_n=1^kn,Kn=kn?pn-hn:hn-pn;if(Ke<0)throw new Error("negative radius: "+Ke);this._x1===null?this._+="M"+Mn+","+Cn:(Math.abs(this._x1-Mn)>St||Math.abs(this._y1-Cn)>St)&&(this._+="L"+Mn+","+Cn),!!Ke&&(Kn<0&&(Kn=Kn%bt+bt),Kn>pt?this._+="A"+Ke+","+Ke+",0,1,"+_n+","+(we-Tn)+","+(Ne-Rn)+"A"+Ke+","+Ke+",0,1,"+_n+","+(this._x1=Mn)+","+(this._y1=Cn):Kn>St&&(this._+="A"+Ke+","+Ke+",0,"+ +(Kn>=ft)+","+_n+","+(this._x1=we+Ke*Math.cos(hn))+","+(this._y1=Ne+Ke*Math.sin(hn))))},rect:function(we,Ne,Ke,pn){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Ne)+"h"+ +Ke+"v"+ +pn+"h"+-Ke+"Z"},toString:function(){return this._}};var Nt=zt,wt=Array.prototype.slice,H=function(ye){return function(){return ye}};function ht(ye){return ye[0]}function dt(ye){return ye[1]}var yt=function(ye,we){return[(we=+we)*Math.cos(ye-=Math.PI/2),we*Math.sin(ye)]};function Mt(ye){return ye.source}function $(ye){return ye.target}function lt(ye){var we=Mt,Ne=$,Ke=ht,pn=dt,hn=null;function kn(){var Tn,Rn=wt.call(arguments),Mn=we.apply(this,Rn),Cn=Ne.apply(this,Rn);if(hn||(hn=Tn=Nt()),ye(hn,+Ke.apply(this,(Rn[0]=Mn,Rn)),+pn.apply(this,Rn),+Ke.apply(this,(Rn[0]=Cn,Rn)),+pn.apply(this,Rn)),Tn)return hn=null,Tn+""||null}return kn.source=function(Tn){return arguments.length?(we=Tn,kn):we},kn.target=function(Tn){return arguments.length?(Ne=Tn,kn):Ne},kn.x=function(Tn){return arguments.length?(Ke=typeof Tn=="function"?Tn:H(+Tn),kn):Ke},kn.y=function(Tn){return arguments.length?(pn=typeof Tn=="function"?Tn:H(+Tn),kn):pn},kn.context=function(Tn){return arguments.length?(hn=Tn==null?null:Tn,kn):hn},kn}function rt(ye,we,Ne,Ke,pn){ye.moveTo(we,Ne),ye.bezierCurveTo(we=(we+Ke)/2,Ne,we,pn,Ke,pn)}function z(ye,we,Ne,Ke,pn){ye.moveTo(we,Ne),ye.bezierCurveTo(we,Ne=(Ne+pn)/2,Ke,Ne,Ke,pn)}function P(ye,we,Ne,Ke,pn){var hn=yt(we,Ne),kn=yt(we,Ne=(Ne+pn)/2),Tn=yt(Ke,Ne),Rn=yt(Ke,pn);ye.moveTo(hn[0],hn[1]),ye.bezierCurveTo(kn[0],kn[1],Tn[0],Tn[1],Rn[0],Rn[1])}function Y(){return lt(rt)}function k(){return lt(z)}function h(){var ye=lt(P);return ye.angle=ye.x,delete ye.x,ye.radius=ye.y,delete ye.y,ye}function g(ye){return[ye.source.x1,ye.y0]}function B(ye){return[ye.target.x0,ye.y1]}var V=function(){return Y().source(g).target(B)},q={left:y,right:n,center:d,justify:s},it={nodeId:function(we){return we.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function ot(ye){var we=Object(i.isString)(ye)?q[ye]:Object(i.isFunction)(ye)?ye:null;return we||s}function At(ye){return Object(i.assign)({},it,ye)}function gt(ye,we){var Ne=At(ye),Ke=Ne.nodeId,pn=Ne.nodeSort,hn=Ne.nodeAlign,kn=Ne.nodeWidth,Tn=Ne.nodePadding,Rn=vt().nodeSort(pn).links(function(Cn){return Cn.links}).nodeWidth(kn).nodePadding(Tn).nodeAlign(ot(hn)).extent([[0,0],[1,1]]).nodeId(Ke),Mn=Rn(we);return Mn.nodes.forEach(function(Cn){var _n=Cn.x0,Kn=Cn.x1,tr=Cn.y0,or=Cn.y1;Cn.x=[_n,Kn,Kn,_n],Cn.y=[tr,tr,or,or]}),Mn.links.forEach(function(Cn){var _n=Cn.source,Kn=Cn.target,tr=_n.x1,or=Kn.x0;Cn.x=[tr,tr,or,or];var nr=Cn.width/2;Cn.y=[Cn.y0+nr,Cn.y0-nr,Cn.y1+nr,Cn.y1-nr]}),Mn}var mt=_("tKoa"),Ot=_("DyAw"),It="x",Dt="y",Ut="name";function Ct(ye,we,Ne){return Object(i.size)(we)===0?!1:we.includes(Ne)?!0:we.some(function(Ke){return Ct(ye,ye.get(Ke),Ne)})}function Vt(ye,we,Ne){var Ke=[],pn=[],hn=new Map;return Object(i.each)(ye,function(kn){var Tn=kn[we],Rn=kn[Ne];Ct(hn,[Tn],Rn)?pn.push(kn):(Ke.push(kn),hn.has(Rn)||hn.set(Rn,[]),hn.get(Rn).push(Tn))}),pn.length!==0&&console.warn("sankey data contains circle, "+pn.length+" records removed.",pn),Ke}function Ht(ye){var we=ye.chart,Ne=ye.options,Ke=Ne.data,pn=Ne.sourceField,hn=Ne.targetField,kn=Ne.weightField,Tn=Ne.color,Rn=Ne.nodeStyle,Mn=Ne.edgeStyle,Cn=Ne.label,_n=Ne.tooltip,Kn=Ne.nodeAlign,tr=Ne.nodePaddingRatio,or=Ne.nodeWidthRatio,nr=Ne.nodeSort;we.legend(!1),we.tooltip(_n),we.axis(!1);var er=Object(Ot.b)(Vt(Ke,pn,hn),pn,hn,kn),Sr=gt({nodeAlign:Kn,nodePadding:tr,nodeWidth:or,nodeSort:nr},er),Vr=Sr.nodes,ti=Sr.links,hi=Vr.map(function(Ci){return{x:Ci.x,y:Ci.y,name:Ci.name}}),Fi=ti.map(function(Ci){return{source:Ci.source.name,target:Ci.target.name,name:Ci.source.name||Ci.target.name,x:Ci.x,y:Ci.y,value:Ci.value}}),to=we.createView();to.data(hi),Object(mt.f)({chart:to,options:{xField:It,yField:Dt,seriesField:Ut,polygon:{color:Tn,style:Rn},label:Cn,tooltip:!1}});var si=we.createView();return si.data(Fi),Object(mt.b)({chart:si,options:{xField:It,yField:Dt,seriesField:Ut,edge:{color:Tn,style:Mn,shape:"arc"},tooltip:_n,state:{active:{style:{opacity:.8,lineWidth:0}}}}}),we.interaction("element-active"),we.scale({x:{sync:!0,nice:!0},y:{sync:!0,nice:!0},name:{sync:"color"}}),ye}function re(ye){return Object(e.e)(Ht,A.c,A.a,A.j)(ye)}var pe=function(ye){Object(at.b)(we,ye);function we(){var Ne=ye!==null&&ye.apply(this,arguments)||this;return Ne.type="sankey",Ne}return we.prototype.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(Ke,pn){var hn=Ke[1]===1;return{style:{fill:"#545454",textAlign:hn?"end":"start"},offsetX:hn?-8:8,content:pn}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value"],formatter:function(Ke){var pn=Ke.source,hn=Ke.target,kn=Ke.value;return{name:pn+" -> "+hn,value:kn}}},nodeWidthRatio:.008,nodePaddingRatio:.01}},we.prototype.getSchemaAdaptor=function(){return re},we}(a.a)},sKgW:function(Gn,Gt){var _=9007199254740991,at=Math.floor;function a(A,e){var i="";if(!A||e<1||e>_)return i;do e%2&&(i+=A),e=at(e/2),e&&(A+=A);while(e);return i}Gn.exports=a},sYIZ:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("aFU3");function A(n,s){if(s){var d=Object(a.invert)(s);return Object(a.multiplyVec2)(d,n)}return n}function e(n,s,d){var E=n.getTotalMatrix();if(E){var O=A([s,d,1],E),C=O[0],v=O[1];return[C,v]}return[s,d]}function i(n,s,d){if(n.isCanvas&&n.isCanvas())return!0;if(!Object(a.isAllowCapture)(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var E=e(n,s,d),O=E[0],C=E[1];if(n.isClipped(O,C))return!1}var v=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return s>=v.minX&&s<=v.maxX&&d>=v.minY&&d<=v.maxY}function p(n,s,d){if(!i(n,s,d))return null;for(var E=null,O=n.getChildren(),C=O.length,v=C-1;v>=0;v--){var x=O[v];if(x.isGroup())E=p(x,s,d);else if(i(x,s,d)){var T=x,N=e(x,s,d),X=N[0],tt=N[1];T.isInShape(X,tt)&&(E=x)}if(E)break}return E}var m=_("R5nb"),S=_("wq2r"),l=_("cyZq"),M=_("9eUa"),j=function(n){Object(at.b)(s,n);function s(){return n!==null&&n.apply(this,arguments)||this}return s.prototype.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.renderer="canvas",d.autoDraw=!0,d.localRefresh=!0,d.refreshElements=[],d.clipView=!0,d.quickHit=!1,d},s.prototype.onCanvasChange=function(d){(d==="attr"||d==="sort"||d==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return m},s.prototype.getGroupBase=function(){return S.a},s.prototype.getPixelRatio=function(){var d=this.get("pixelRatio")||Object(l.d)();return d>=1?Math.ceil(d):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},s.prototype.createDom=function(){var d=document.createElement("canvas"),E=d.getContext("2d");return this.set("context",E),d},s.prototype.setDOMSize=function(d,E){n.prototype.setDOMSize.call(this,d,E);var O=this.get("context"),C=this.get("el"),v=this.getPixelRatio();C.width=v*d,C.height=v*E,v>1&&O.scale(v,v)},s.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var d=this.get("context"),E=this.get("el");d.clearRect(0,0,E.width,E.height)},s.prototype.getShape=function(d,E){var O;return this.get("quickHit")?O=p(this,d,E):O=n.prototype.getShape.call(this,d,E,null),O},s.prototype._getRefreshRegion=function(){var d=this.get("refreshElements"),E=this.getViewRange(),O;if(d.length&&d[0]===this)O=E;else if(O=Object(M.f)(d),O){O.minX=Math.floor(O.minX),O.minY=Math.floor(O.minY),O.maxX=Math.ceil(O.maxX),O.maxY=Math.ceil(O.maxY),O.maxY+=1;var C=this.get("clipView");C&&(O=Object(M.g)(O,E))}return O},s.prototype.refreshElement=function(d){var E=this.get("refreshElements");E.push(d)},s.prototype._clearFrame=function(){var d=this.get("drawFrame");d&&(Object(l.a)(d),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var d=this.get("drawFrame");this.get("autoDraw")&&d||this._startDraw()},s.prototype._drawAll=function(){var d=this.get("context"),E=this.get("el"),O=this.getChildren();d.clearRect(0,0,E.width,E.height),Object(M.a)(d,this),Object(M.d)(d,O),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var d=this.get("context"),E=this.get("refreshElements"),O=this.getChildren(),C=this._getRefreshRegion();C?(d.clearRect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),d.save(),d.beginPath(),d.rect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),d.clip(),Object(M.a)(d,this),Object(M.b)(this,O,C),Object(M.d)(d,O,C),d.restore()):E.length&&Object(M.c)(E),Object(l.c)(E,function(v){v.get("hasChanged")&&v.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var d=this,E=this.get("drawFrame");E||(E=Object(l.n)(function(){d.get("localRefresh")?d._drawRegion():d._drawAll(),d.set("drawFrame",null)}),this.set("drawFrame",E))},s.prototype.skipDraw=function(){},s}(a.AbstractCanvas),y=Gt.a=j},sqD9:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return e}),_.d(Gt,"a",function(){return i});var at=_("mrSG"),a=_("iTfj"),A=_("F/eT");function e(p,m,S,l){var M=Object(a.reduce)(p,function(j,y){var n=y[S],s=j.has(n)?j.get(n):0,d=y[m];return s=Object(A.a)(d)?s+d:s,j.set(n,s),j},new Map);return Object(a.map)(p,function(j){var y,n=j[m],s=j[S],d=Object(A.a)(n)?n/M.get(s):0;return Object(at.a)(Object(at.a)({},j),(y={},y[l]=d,y))})}function i(p,m,S,l,M){return M?e(p,m,S,l):p}},sstZ:function(Gn,Gt,_){"use strict";_.d(Gt,"j",function(){return a}),_.d(Gt,"c",function(){return A}),_.d(Gt,"g",function(){return e}),_.d(Gt,"b",function(){return i});var at=_("iTfj");_.d(Gt,"e",function(){return at.isNil}),_.d(Gt,"d",function(){return at.isFunction}),_.d(Gt,"h",function(){return at.isString}),_.d(Gt,"f",function(){return at.isObject}),_.d(Gt,"i",function(){return at.mix}),_.d(Gt,"a",function(){return at.each}),_.d(Gt,"k",function(){return at.upperFirst});function a(p,m){var S=p.indexOf(m);S!==-1&&p.splice(S,1)}var A=typeof window!="undefined"&&typeof window.document!="undefined";function e(p,m){if(p.isCanvas())return!0;for(var S=m.getParent(),l=!1;S;){if(S===p){l=!0;break}S=S.getParent()}return l}function i(p){return p.cfg.visible&&p.cfg.capture}},tE4n:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return k});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("tKoa"),p=_("w02o"),m=_("ODXe");function S(h,g,B,V){h=h.filter(function(Ct){var Vt=g(Ct),Ht=B(Ct);return Vt!=null&&isFinite(Vt)&&Ht!=null&&isFinite(Ht)}),V&&h.sort(function(Ct,Vt){return g(Ct)-g(Vt)});for(var q=h.length,it=new Float64Array(q),ot=new Float64Array(q),At=0,gt=0,mt,Ot,It,Dt=0;Dt<q;)It=h[Dt],it[Dt]=mt=+g(It),ot[Dt]=Ot=+B(It),++Dt,At+=(mt-At)/Dt,gt+=(Ot-gt)/Dt;for(var Ut=0;Ut<q;++Ut)it[Ut]-=At,ot[Ut]-=gt;return[it,ot,At,gt]}function l(h,g,B,V){for(var q=0,it=0,ot=h.length;it<ot;it++){var At=h[it],gt=+g(At),mt=+B(At);gt!=null&&isFinite(gt)&&mt!=null&&isFinite(mt)&&V(gt,mt,q++)}}function M(h,g,B,V,q){var it=0,ot=0;return l(h,g,B,function(At,gt){var mt=gt-q(At),Ot=gt-V;it+=mt*mt,ot+=Ot*Ot}),1-it/ot}function j(h){return Math.atan2(h[1][1]-h[0][1],h[1][0]-h[0][0])*180/Math.PI}function y(h){return[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]}function n(h,g,B){for(var V=Math.log(g-h)*Math.LOG10E+1|0,q=1*Math.pow(10,-V/2-1),it=1e4,ot=[gt(h),gt(g)],At=0;mt(ot)&&At<it;);return ot;function gt(Ot){return[Ot,B(Ot)]}function mt(Ot){At++;for(var It=Ot.length,Dt=!1,Ut=0;Ut<It-1;Ut++){var Ct=Ot[Ut],Vt=Ot[Ut+1],Ht=y([Ct,Vt]),re=gt(Ht[0]),pe=j([Ct,Ht]),ye=j([Ct,re]),we=Math.abs(pe-ye);we>q&&(Ot.splice(Ut+1,0,re),Dt=!0)}return Dt}}function s(h,g,B,V){var q=V-h*h,it=Math.abs(q)<1e-24?0:(B-h*g)/q,ot=g-it*h;return[ot,it]}var d=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B;function V(q){var it=0,ot=0,At=0,gt=0,mt=0,Ot=0,It=B?+B[0]:Infinity,Dt=B?+B[1]:-Infinity;l(q,h,g,function(ye,we){var Ne=Math.log(we),Ke=ye*we;++it,ot+=(we-ot)/it,gt+=(Ke-gt)/it,Ot+=(ye*Ke-Ot)/it,At+=(we*Ne-At)/it,mt+=(Ke*Ne-mt)/it,B||(ye<It&&(It=ye),ye>Dt&&(Dt=ye))});var Ut=s(gt/ot,At/ot,mt/ot,Ot/ot),Ct=Object(m.a)(Ut,2),Vt=Ct[0],Ht=Ct[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.exp(Ht*we)},pe=n(It,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=M(q,h,g,ot,re),pe}return V.domain=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V},E=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B;function V(q){var it=0,ot=0,At=0,gt=0,mt=0,Ot=B?+B[0]:Infinity,It=B?+B[1]:-Infinity;l(q,h,g,function(pe,ye){++it,ot+=(pe-ot)/it,At+=(ye-At)/it,gt+=(pe*ye-gt)/it,mt+=(pe*pe-mt)/it,B||(pe<Ot&&(Ot=pe),pe>It&&(It=pe))});var Dt=s(ot,At,gt,mt),Ut=Object(m.a)(Dt,2),Ct=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*ye+Ct},re=[[Ot,Ht(Ot)],[It,Ht(It)]];return re.a=Vt,re.b=Ct,re.predict=Ht,re.rSquared=M(q,h,g,At,Ht),re}return V.domain=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V};function O(h){h.sort(function(B,V){return B-V});var g=h.length/2;return g%1==0?(h[g-1]+h[g])/2:h[Math.floor(g)]}var C=2,v=1e-12,x=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B=.3;function V(q){for(var it=S(q,h,g,!0),ot=Object(m.a)(it,4),At=ot[0],gt=ot[1],mt=ot[2],Ot=ot[3],It=At.length,Dt=Math.max(2,~~(B*It)),Ut=new Float64Array(It),Ct=new Float64Array(It),Vt=new Float64Array(It).fill(1),Ht=-1;++Ht<=C;){for(var re=[0,Dt-1],pe=0;pe<It;++pe){for(var ye=At[pe],we=re[0],Ne=re[1],Ke=ye-At[we]>At[Ne]-ye?we:Ne,pn=0,hn=0,kn=0,Tn=0,Rn=0,Mn=1/Math.abs(At[Ke]-ye||1),Cn=we;Cn<=Ne;++Cn){var _n=At[Cn],Kn=gt[Cn],tr=T(Math.abs(ye-_n)*Mn)*Vt[Cn],or=_n*tr;pn+=tr,hn+=or,kn+=Kn*tr,Tn+=Kn*or,Rn+=_n*or}var nr=s(hn/pn,kn/pn,Tn/pn,Rn/pn),er=Object(m.a)(nr,2),Sr=er[0],Vr=er[1];Ut[pe]=Sr+Vr*ye,Ct[pe]=Math.abs(gt[pe]-Ut[pe]),N(At,pe+1,re)}if(Ht===C)break;var ti=O(Ct);if(Math.abs(ti)<v)break;for(var hi=0,Fi,to;hi<It;++hi)Fi=Ct[hi]/(6*ti),Vt[hi]=Fi>=1?v:(to=1-Fi*Fi)*to}return X(At,Ut,mt,Ot)}return V.bandwidth=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V};function T(h){return(h=1-h*h*h)*h*h}function N(h,g,B){var V=h[g],q=B[0],it=B[1]+1;if(!(it>=h.length))for(;g>q&&h[it]-V<=V-h[q];)B[0]=++q,B[1]=it,++it}function X(h,g,B,V){for(var q=h.length,it=[],ot=0,At=0,gt=[],mt;ot<q;++ot)mt=h[ot]+B,gt[0]===mt?gt[1]+=(g[ot]-gt[1])/++At:(At=0,gt[1]+=V,gt=[mt,g[ot]],it.push(gt));return gt[1]+=V,it}var tt=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B;function V(q){var it=0,ot=0,At=0,gt=0,mt=0,Ot=B?+B[0]:Infinity,It=B?+B[1]:-Infinity;l(q,h,g,function(pe,ye){var we=Math.log(pe);++it,ot+=(we-ot)/it,At+=(ye-At)/it,gt+=(we*ye-gt)/it,mt+=(we*we-mt)/it,B||(pe<Ot&&(Ot=pe),pe>It&&(It=pe))});var Dt=s(ot,At,gt,mt),Ut=Object(m.a)(Dt,2),Ct=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*Math.log(ye)+Ct},re=n(Ot,It,Ht);return re.a=Vt,re.b=Ct,re.predict=Ht,re.rSquared=M(q,h,g,At,Ht),re}return V.domain=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V},nt=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B;function V(q){var it=S(q,h,g),ot=Object(m.a)(it,4),At=ot[0],gt=ot[1],mt=ot[2],Ot=ot[3],It=At.length,Dt=0,Ut=0,Ct=0,Vt=0,Ht=0,re,pe,ye,we;for(re=0;re<It;)pe=At[re],ye=gt[re++],we=pe*pe,Dt+=(we-Dt)/re,Ut+=(we*pe-Ut)/re,Ct+=(we*we-Ct)/re,Vt+=(pe*ye-Vt)/re,Ht+=(we*ye-Ht)/re;var Ne=0,Ke=0,pn=B?+B[0]:Infinity,hn=B?+B[1]:-Infinity;l(q,h,g,function(tr,or){Ke++,Ne+=(or-Ne)/Ke,B||(tr<pn&&(pn=tr),tr>hn&&(hn=tr))});var kn=Ct-Dt*Dt,Tn=Dt*kn-Ut*Ut,Rn=(Ht*Dt-Vt*Ut)/Tn,Mn=(Vt*kn-Ht*Ut)/Tn,Cn=-Rn*Dt,_n=function(or){return or=or-mt,Rn*or*or+Mn*or+Cn+Ot},Kn=n(pn,hn,_n);return Kn.a=Rn,Kn.b=Mn-2*Rn*mt,Kn.c=Cn-Mn*mt+Rn*mt*mt+Ot,Kn.predict=_n,Kn.rSquared=M(q,h,g,Ne,_n),Kn}return V.domain=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V},vt=function(){var h=function(ot){return ot[0]},g=function(ot){return ot[1]},B=3,V;function q(it){if(B===1){var ot=E().x(h).y(g).domain(V)(it);return ot.coefficients=[ot.b,ot.a],delete ot.a,delete ot.b,ot}if(B===2){var At=nt().x(h).y(g).domain(V)(it);return At.coefficients=[At.c,At.b,At.a],delete At.a,delete At.b,delete At.c,At}var gt=S(it,h,g),mt=Object(m.a)(gt,4),Ot=mt[0],It=mt[1],Dt=mt[2],Ut=mt[3],Ct=Ot.length,Vt=[],Ht=[],re=B+1,pe=0,ye=0,we=V?+V[0]:Infinity,Ne=V?+V[1]:-Infinity;l(it,h,g,function(_n,Kn){++ye,pe+=(Kn-pe)/ye,V||(_n<we&&(we=_n),_n>Ne&&(Ne=_n))});var Ke,pn,hn,kn,Tn;for(Ke=0;Ke<re;++Ke){for(hn=0,kn=0;hn<Ct;++hn)kn+=Math.pow(Ot[hn],Ke)*It[hn];for(Vt.push(kn),Tn=new Float64Array(re),pn=0;pn<re;++pn){for(hn=0,kn=0;hn<Ct;++hn)kn+=Math.pow(Ot[hn],Ke+pn);Tn[pn]=kn}Ht.push(Tn)}Ht.push(Vt);var Rn=bt(Ht),Mn=function(Kn){Kn-=Dt;var tr=Ut+Rn[0]+Rn[1]*Kn+Rn[2]*Kn*Kn;for(Ke=3;Ke<re;++Ke)tr+=Rn[Ke]*Math.pow(Kn,Ke);return tr},Cn=n(we,Ne,Mn);return Cn.coefficients=ft(re,Rn,-Dt,Ut),Cn.predict=Mn,Cn.rSquared=M(it,h,g,pe,Mn),Cn}return q.domain=function(it){return arguments.length?(V=it,q):V},q.x=function(it){return arguments.length?(h=it,q):h},q.y=function(it){return arguments.length?(g=it,q):g},q.order=function(it){return arguments.length?(B=it,q):B},q};function ft(h,g,B,V){var q=Array(h),it,ot,At,gt;for(it=0;it<h;++it)q[it]=0;for(it=h-1;it>=0;--it)for(At=g[it],gt=1,q[it]+=At,ot=1;ot<=it;++ot)gt*=(it+1-ot)/ot,q[it-ot]+=At*Math.pow(B,ot)*gt;return q[0]+=V,q}function bt(h){var g=h.length-1,B=[],V,q,it,ot,At;for(V=0;V<g;++V){for(ot=V,q=V+1;q<g;++q)Math.abs(h[V][q])>Math.abs(h[V][ot])&&(ot=q);for(it=V;it<g+1;++it)At=h[it][V],h[it][V]=h[it][ot],h[it][ot]=At;for(q=V+1;q<g;++q)for(it=g;it>=V;it--)h[it][q]-=h[it][V]*h[V][q]/h[V][V]}for(q=g-1;q>=0;--q){for(At=0,it=q+1;it<g;++it)At+=h[it][q]*B[it];B[q]=(h[g][q]-At)/h[q][q]}return B}var St=function(){var h=function(it){return it[0]},g=function(it){return it[1]},B;function V(q){var it=0,ot=0,At=0,gt=0,mt=0,Ot=0,It=B?+B[0]:Infinity,Dt=B?+B[1]:-Infinity;l(q,h,g,function(ye,we){var Ne=Math.log(ye),Ke=Math.log(we);++it,ot+=(Ne-ot)/it,At+=(Ke-At)/it,gt+=(Ne*Ke-gt)/it,mt+=(Ne*Ne-mt)/it,Ot+=(we-Ot)/it,B||(ye<It&&(It=ye),ye>Dt&&(Dt=ye))});var Ut=s(ot,At,gt,mt),Ct=Object(m.a)(Ut,2),Vt=Ct[0],Ht=Ct[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.pow(we,Ht)},pe=n(It,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=M(q,h,g,Ot,re),pe}return V.domain=function(q){return arguments.length?(B=q,V):B},V.x=function(q){return arguments.length?(h=q,V):h},V.y=function(q){return arguments.length?(g=q,V):g},V},pt={exp:d,linear:E,loess:x,log:tt,poly:vt,pow:St,quad:nt};function ct(h,g){var B=10,V={regionStyle:[{position:{start:[h,"max"],end:["max",g]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[h,g]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",g],end:[h,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[h,g],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",g],offsetX:-B,offsetY:-B,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:B,offsetY:-B,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:B,offsetY:B,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",g],offsetX:-B,offsetY:B,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return V}var zt=function(g,B){var V=B.view,q=B.options,it=q.xField,ot=q.yField,At=V.getScaleByField(it),gt=V.getScaleByField(ot),mt=g.map(function(Ot){return V.getCoordinate().convert({x:At.scale(Ot[0]),y:gt.scale(Ot[1])})});return Object(A.h)(mt,!1)},Nt=function(g){var B=g.options,V=B.xField,q=B.yField,it=B.data,ot=B.regressionLine,At=ot.type,gt=At===void 0?"linear":At,mt=ot.algorithm,Ot;if(mt)Ot=Object(e.isArray)(mt)?mt:mt(it);else{var It=pt[gt]().x(function(Dt){return Dt[V]}).y(function(Dt){return Dt[q]});Ot=It(it)}return zt(Ot,g)},wt=function(g){var B,V=g.meta,q=V===void 0?{}:V,it=g.xField,ot=g.yField,At=g.data,gt=At[0][it],mt=At[0][ot],Ot=gt>0,It=mt>0,Dt=function(Ct,Vt,Ht){var re=Object(e.get)(q,[Ct,Vt]);if(Object(e.isNumber)(re))return re;if(Ht==="x"){var pe={min:Ot?0:gt*2,max:Ot?gt*2:0};return pe[Vt]}var ye={min:It?0:mt*2,max:It?mt*2:0};return ye[Vt]};return Object(at.a)(Object(at.a)({},q),(B={},B[it]=Object(at.a)(Object(at.a)({},q[it]),{min:Dt(it,"min","x"),max:Dt(it,"max","x")}),B[ot]=Object(at.a)(Object(at.a)({},q[ot]),{min:Dt(ot,"min","y"),max:Dt(ot,"max","y")}),B))};function H(h){var g=h.data,B=g===void 0?[]:g;return B.length===1?Object(A.b)({},h,{meta:wt(h)}):h}function ht(h){var g=h.chart,B=h.options,V=B.data,q=B.type,it=B.color,ot=B.shape,At=B.pointStyle,gt=B.shapeField,mt=B.colorField,Ot=B.xField,It=B.yField,Dt=B.sizeField,Ut=B.size,Ct=B.tooltip;Dt&&(Ut||(Ut=[2,8]),Object(e.isNumber)(Ut)&&(Ut=[Ut,Ut])),Ct&&!Ct.fields&&(Ct=Object(at.a)(Object(at.a)({},Ct),{fields:[Ot,It,mt,Dt,gt]})),g.data(V),Object(i.e)(Object(A.b)({},h,{options:{seriesField:mt,point:{color:it,shape:ot,size:Ut,style:At},tooltip:Ct}}));var Vt=Object(A.c)(g,"point");return q&&Vt.adjust(q),h}function dt(h){var g,B=h.options,V=B.data,q=B.xAxis,it=B.yAxis,ot=B.xField,At=B.yField,gt=B;return V.length===1&&(gt=H(Object(A.b)({},B,{meta:wt(B)}))),Object(A.e)(Object(p.f)((g={},g[ot]=q,g[At]=it,g)))(Object(A.b)({},h,{options:gt}))}function yt(h){var g=h.chart,B=h.options,V=B.xAxis,q=B.yAxis,it=B.xField,ot=B.yField;return g.axis(it,V),g.axis(ot,q),h}function Mt(h){var g=h.chart,B=h.options,V=B.legend,q=B.colorField,it=B.shapeField,ot=B.sizeField,At=Object(e.isBoolean)(V)?V:V||!!(it||q);return At?(g.legend(q||it,V),ot&&g.legend(ot,!1)):g.legend(!1),h}function $(h){var g=h.chart,B=h.options,V=B.label,q=B.yField,it=Object(A.c)(g,"point");if(!V)it.label(!1);else{var ot=V.callback,At=Object(at.c)(V,["callback"]);it.label({fields:[q],callback:ot,cfg:Object(A.o)(At)})}return h}function lt(h){var g=h.options,B=g.quadrant,V=[];if(B){var q=B.xBaseline,it=q===void 0?0:q,ot=B.yBaseline,At=ot===void 0?0:ot,gt=B.labels,mt=B.regionStyle,Ot=B.lineStyle,It=ct(it,At),Dt=new Array(4).join(",").split(",");Dt.forEach(function(Ut,Ct){V.push(Object(at.a)(Object(at.a)({type:"region",top:!1},It.regionStyle[Ct].position),{style:Object(A.b)({},It.regionStyle[Ct].style,mt==null?void 0:mt[Ct])}),Object(at.a)({type:"text",top:!0},Object(A.b)({},It.labelStyle[Ct],gt==null?void 0:gt[Ct])))}),V.push({type:"line",top:!1,start:["min",At],end:["max",At],style:Object(A.b)({},It.lineStyle,Ot)},{type:"line",top:!1,start:[it,"min"],end:[it,"max"],style:Object(A.b)({},It.lineStyle,Ot)})}return Object(A.e)(Object(p.b)(V))(h)}function rt(h){var g=h.options,B=h.chart,V=g.regressionLine;if(V){var q=V.style,it=V.top,ot=it===void 0?!1:it,At={stroke:"#9ba29a",lineWidth:2,opacity:.5};B.annotation().shape({top:ot,render:function(mt,Ot){var It=mt.addGroup({id:B.id+"-regression-line",name:"regression-line-group"}),Dt=Nt({view:Ot,options:g});It.addShape("path",{name:"regression-line",attrs:Object(at.a)(Object(at.a)({path:Dt},At),q)})}})}return h}function z(h){var g=h.chart,B=h.options,V=B.tooltip;return V?g.tooltip(V):V===!1&&g.tooltip(!1),h}function P(h){return Object(A.e)(ht,dt,yt,Mt,z,$,p.c,lt,p.a,p.j,rt)(h)}var Y=_("hag6"),k=function(h){Object(at.b)(g,h);function g(){var B=h!==null&&h.apply(this,arguments)||this;return B.type="point",B}return g.prototype.changeData=function(B){this.updateOption(H(Object(A.b)({},this.options,{data:B})));var V=this,q=V.options,it=V.chart;dt({chart:it,options:q}),this.chart.changeData(B)},g.prototype.getSchemaAdaptor=function(){return P},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}})},g}(a.a)},tKoa:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return i}),_.d(Gt,"d",function(){return m}),_.d(Gt,"e",function(){return S}),_.d(Gt,"c",function(){return j}),_.d(Gt,"f",function(){return y.a}),_.d(Gt,"b",function(){return n});var at=_("mrSG"),a=_("5HRO"),A=_("YuPD"),e=_("WOQw");function i(s){var d=s.options,E=d.area,O=d.xField,C=d.yField,v=d.seriesField,x=d.smooth,T=d.tooltip,N=Object(a.a)(T,[O,C,v]),X=N.fields,tt=N.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"area",colorField:v,tooltipFields:X,mapping:Object(at.a)({shape:x?"smooth":"area",tooltip:tt},E)}})):s}var p=_("iTfj");function m(s){var d=s.options,E=d.line,O=d.stepType,C=d.xField,v=d.yField,x=d.seriesField,T=d.smooth,N=d.connectNulls,X=d.tooltip,tt=Object(a.a)(X,[C,v,x]),nt=tt.fields,vt=tt.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"line",colorField:x,tooltipFields:nt,mapping:Object(p.deepMix)({shape:O||(T?"smooth":"line"),tooltip:vt},E),args:{connectNulls:N}}})):s}function S(s){var d=s.options,E=d.point,O=d.xField,C=d.yField,v=d.seriesField,x=d.sizeField,T=d.shapeField,N=d.tooltip,X=Object(a.a)(N,[O,C,v,x,T]),tt=X.fields,nt=X.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"point",colorField:v,shapeField:T,tooltipFields:tt,mapping:Object(at.a)({tooltip:nt},E)}})):s}var l=_("kXyF");function M(s){var d=s.chart,E=s.options,O=s.ext,C=E.seriesField,v=E.isGroup,x=E.isStack,T=E.marginRatio,N=E.widthRatio,X=E.groupField,tt=E.theme,nt=[];if(C&&(v&&nt.push({type:"dodge",dodgeBy:X||C,marginRatio:T}),x&&nt.push({type:"stack",marginRatio:T})),nt.length&&(O==null?void 0:O.geometry)){var vt=O==null?void 0:O.geometry;vt.adjust(nt)}return Object(p.isNil)(N)||d.theme(Object(A.b)({},Object(p.isObject)(tt)?tt:Object(l.getTheme)(tt),{columnWidthRatio:N})),s}function j(s){var d=s.options,E=d.xField,O=d.yField,C=d.interval,v=d.seriesField,x=d.tooltip,T=d.minColumnWidth,N=d.maxColumnWidth,X=d.columnBackground,tt=Object(a.a)(x,[E,O,v]),nt=tt.fields,vt=tt.formatter,ft=(C?Object(e.a)(Object(A.b)({},s,{options:{type:"interval",colorField:v,tooltipFields:nt,mapping:Object(at.a)({tooltip:vt},C),args:{minColumnWidth:T,maxColumnWidth:N,background:X}}})):s).ext;return M(Object(at.a)(Object(at.a)({},s),{ext:ft}))}var y=_("KMYG");function n(s){var d=s.options,E=d.edge,O=d.xField,C=d.yField,v=d.seriesField,x=d.tooltip,T=Object(a.a)(x,[O,C,v]),N=T.fields,X=T.formatter;return E?Object(e.a)(Object(A.b)({},s,{options:{type:"edge",colorField:v,tooltipFields:N,mapping:Object(at.a)({tooltip:X},E)}})):s}},tdXX:function(Gn,Gt){},"tvR+":function(Gn,Gt,_){"use strict";var at=_("DdT1"),a=_("I4jL"),A=_("IeU1"),e=_("CSvP");Gt.a=function(){var i=a.a,p=!1,m=1,S=1,l=[0],M=e.a,j=e.a,y=e.a,n=e.a,s=e.a;function d(O){return O.x0=O.y0=0,O.x1=m,O.y1=S,O.eachBefore(E),l=[0],p&&O.eachBefore(at.a),O}function E(O){var C=l[O.depth],v=O.x0+C,x=O.y0+C,T=O.x1-C,N=O.y1-C;T<v&&(v=T=(v+T)/2),N<x&&(x=N=(x+N)/2),O.x0=v,O.y0=x,O.x1=T,O.y1=N,O.children&&(C=l[O.depth+1]=M(O)/2,v+=s(O)-C,x+=j(O)-C,T-=y(O)-C,N-=n(O)-C,T<v&&(v=T=(v+T)/2),N<x&&(x=N=(x+N)/2),i(O,v,x,T,N))}return d.round=function(O){return arguments.length?(p=!!O,d):p},d.size=function(O){return arguments.length?(m=+O[0],S=+O[1],d):[m,S]},d.tile=function(O){return arguments.length?(i=Object(A.b)(O),d):i},d.padding=function(O){return arguments.length?d.paddingInner(O).paddingOuter(O):d.paddingInner()},d.paddingInner=function(O){return arguments.length?(M=typeof O=="function"?O:Object(e.b)(+O),d):M},d.paddingOuter=function(O){return arguments.length?d.paddingTop(O).paddingRight(O).paddingBottom(O).paddingLeft(O):d.paddingTop()},d.paddingTop=function(O){return arguments.length?(j=typeof O=="function"?O:Object(e.b)(+O),d):j},d.paddingRight=function(O){return arguments.length?(y=typeof O=="function"?O:Object(e.b)(+O),d):y},d.paddingBottom=function(O){return arguments.length?(n=typeof O=="function"?O:Object(e.b)(+O),d):n},d.paddingLeft=function(O){return arguments.length?(s=typeof O=="function"?O:Object(e.b)(+O),d):s},d}},tvuL:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"catmullRomToBezier",function(){return p}),_.d(Gt,"fillPath",function(){return ct}),_.d(Gt,"fillPathByDiff",function(){return H}),_.d(Gt,"formatPath",function(){return yt}),_.d(Gt,"intersection",function(){return ft}),_.d(Gt,"parsePathArray",function(){return s}),_.d(Gt,"parsePathString",function(){return i}),_.d(Gt,"pathToAbsolute",function(){return S}),_.d(Gt,"pathToCurve",function(){return y}),_.d(Gt,"rectPath",function(){return x});var at=_("iTfj"),a=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,A=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),i=function($){if(!$)return null;if(Object(at.isArray)($))return $;var lt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},rt=[];return String($).replace(A,function(z,P,Y){var k=[],h=P.toLowerCase();if(Y.replace(e,function(g,B){B&&k.push(+B)}),h==="m"&&k.length>2&&(rt.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&rt.push([P,k[0]]),h==="r")rt.push([P].concat(k));else for(;k.length>=lt[h]&&(rt.push([P].concat(k.splice(0,lt[h]))),!!lt[h]););return $}),rt},p=function($,lt){for(var rt=[],z=0,P=$.length;P-2*!lt>z;z+=2){var Y=[{x:+$[z-2],y:+$[z-1]},{x:+$[z],y:+$[z+1]},{x:+$[z+2],y:+$[z+3]},{x:+$[z+4],y:+$[z+5]}];lt?z?P-4===z?Y[3]={x:+$[0],y:+$[1]}:P-2===z&&(Y[2]={x:+$[0],y:+$[1]},Y[3]={x:+$[2],y:+$[3]}):Y[0]={x:+$[P-2],y:+$[P-1]}:P-4===z?Y[3]=Y[2]:z||(Y[0]={x:+$[z],y:+$[z+1]}),rt.push(["C",(-Y[0].x+6*Y[1].x+Y[2].x)/6,(-Y[0].y+6*Y[1].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return rt},m=function($,lt,rt,z,P){var Y=[];if(P===null&&z===null&&(z=rt),$=+$,lt=+lt,rt=+rt,z=+z,P!==null){var k=Math.PI/180,h=$+rt*Math.cos(-z*k),g=$+rt*Math.cos(-P*k),B=lt+rt*Math.sin(-z*k),V=lt+rt*Math.sin(-P*k);Y=[["M",h,B],["A",rt,rt,0,+(P-z>180),0,g,V]]}else Y=[["M",$,lt],["m",0,-z],["a",rt,z,0,1,1,0,2*z],["a",rt,z,0,1,1,0,-2*z],["z"]];return Y},S=function($){if($=i($),!$||!$.length)return[["M",0,0]];var lt=[],rt=0,z=0,P=0,Y=0,k=0,h,g;$[0][0]==="M"&&(rt=+$[0][1],z=+$[0][2],P=rt,Y=z,k++,lt[0]=["M",rt,z]);for(var B=$.length===3&&$[0][0]==="M"&&$[1][0].toUpperCase()==="R"&&$[2][0].toUpperCase()==="Z",V=void 0,q=void 0,it=k,ot=$.length;it<ot;it++){if(lt.push(V=[]),q=$[it],h=q[0],h!==h.toUpperCase())switch(V[0]=h.toUpperCase(),V[0]){case"A":V[1]=q[1],V[2]=q[2],V[3]=q[3],V[4]=q[4],V[5]=q[5],V[6]=+q[6]+rt,V[7]=+q[7]+z;break;case"V":V[1]=+q[1]+z;break;case"H":V[1]=+q[1]+rt;break;case"R":g=[rt,z].concat(q.slice(1));for(var At=2,gt=g.length;At<gt;At++)g[At]=+g[At]+rt,g[++At]=+g[At]+z;lt.pop(),lt=lt.concat(p(g,B));break;case"O":lt.pop(),g=m(rt,z,q[1],q[2]),g.push(g[0]),lt=lt.concat(g);break;case"U":lt.pop(),lt=lt.concat(m(rt,z,q[1],q[2],q[3])),V=["U"].concat(lt[lt.length-1].slice(-2));break;case"M":P=+q[1]+rt,Y=+q[2]+z;break;default:for(var At=1,gt=q.length;At<gt;At++)V[At]=+q[At]+(At%2?rt:z)}else if(h==="R")g=[rt,z].concat(q.slice(1)),lt.pop(),lt=lt.concat(p(g,B)),V=["R"].concat(q.slice(-2));else if(h==="O")lt.pop(),g=m(rt,z,q[1],q[2]),g.push(g[0]),lt=lt.concat(g);else if(h==="U")lt.pop(),lt=lt.concat(m(rt,z,q[1],q[2],q[3])),V=["U"].concat(lt[lt.length-1].slice(-2));else for(var mt=0,Ot=q.length;mt<Ot;mt++)V[mt]=q[mt];if(h=h.toUpperCase(),h!=="O")switch(V[0]){case"Z":rt=+P,z=+Y;break;case"H":rt=V[1];break;case"V":z=V[1];break;case"M":P=V[V.length-2],Y=V[V.length-1];break;default:rt=V[V.length-2],z=V[V.length-1]}}return lt},l=function($,lt,rt,z){return[$,lt,rt,z,rt,z]},M=function($,lt,rt,z,P,Y){var k=1/3,h=2/3;return[k*$+h*rt,k*lt+h*z,k*P+h*rt,k*Y+h*z,P,Y]},j=function Mt($,lt,rt,z,P,Y,k,h,g,B){rt===z&&(rt+=1);var V=Math.PI*120/180,q=Math.PI/180*(+P||0),it=[],ot,At,gt,mt,Ot,It=function(Vr,ti,hi){var Fi=Vr*Math.cos(hi)-ti*Math.sin(hi),to=Vr*Math.sin(hi)+ti*Math.cos(hi);return{x:Fi,y:to}};if(B)At=B[0],gt=B[1],mt=B[2],Ot=B[3];else{ot=It($,lt,-q),$=ot.x,lt=ot.y,ot=It(h,g,-q),h=ot.x,g=ot.y,$===h&&lt===g&&(h+=1,g+=1);var Dt=($-h)/2,Ut=(lt-g)/2,Ct=Dt*Dt/(rt*rt)+Ut*Ut/(z*z);Ct>1&&(Ct=Math.sqrt(Ct),rt=Ct*rt,z=Ct*z);var Vt=rt*rt,Ht=z*z,re=(Y===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));mt=re*rt*Ut/z+($+h)/2,Ot=re*-z*Dt/rt+(lt+g)/2,At=Math.asin(((lt-Ot)/z).toFixed(9)),gt=Math.asin(((g-Ot)/z).toFixed(9)),At=$<mt?Math.PI-At:At,gt=h<mt?Math.PI-gt:gt,At<0&&(At=Math.PI*2+At),gt<0&&(gt=Math.PI*2+gt),k&&At>gt&&(At=At-Math.PI*2),!k&&gt>At&&(gt=gt-Math.PI*2)}var pe=gt-At;if(Math.abs(pe)>V){var ye=gt,we=h,Ne=g;gt=At+V*(k&&gt>At?1:-1),h=mt+rt*Math.cos(gt),g=Ot+z*Math.sin(gt),it=Mt(h,g,rt,z,P,0,k,we,Ne,[gt,ye,mt,Ot])}pe=gt-At;var Ke=Math.cos(At),pn=Math.sin(At),hn=Math.cos(gt),kn=Math.sin(gt),Tn=Math.tan(pe/4),Rn=4/3*rt*Tn,Mn=4/3*z*Tn,Cn=[$,lt],_n=[$+Rn*pn,lt-Mn*Ke],Kn=[h+Rn*kn,g-Mn*hn],tr=[h,g];if(_n[0]=2*Cn[0]-_n[0],_n[1]=2*Cn[1]-_n[1],B)return[_n,Kn,tr].concat(it);it=[_n,Kn,tr].concat(it).join().split(",");for(var or=[],nr=0,er=it.length;nr<er;nr++)or[nr]=nr%2?It(it[nr-1],it[nr],q).y:It(it[nr],it[nr+1],q).x;return or},y=function($,lt){var rt=S($),z=lt&&S(lt),P={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=[],h=[],g="",B="",V,q=function(Ut,Ct,Vt){var Ht,re;if(!Ut)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(!(Ut[0]in{T:1,Q:1})&&(Ct.qx=Ct.qy=null),Ut[0]){case"M":Ct.X=Ut[1],Ct.Y=Ut[2];break;case"A":Ut=["C"].concat(j.apply(0,[Ct.x,Ct.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=Ct.x*2-Ct.bx,re=Ct.y*2-Ct.by):(Ht=Ct.x,re=Ct.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(Ct.qx=Ct.x*2-Ct.qx,Ct.qy=Ct.y*2-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),Ut=["C"].concat(M(Ct.x,Ct.y,Ct.qx,Ct.qy,Ut[1],Ut[2]));break;case"Q":Ct.qx=Ut[1],Ct.qy=Ut[2],Ut=["C"].concat(M(Ct.x,Ct.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(l(Ct.x,Ct.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(l(Ct.x,Ct.y,Ut[1],Ct.y));break;case"V":Ut=["C"].concat(l(Ct.x,Ct.y,Ct.x,Ut[1]));break;case"Z":Ut=["C"].concat(l(Ct.x,Ct.y,Ct.X,Ct.Y));break;default:break}return Ut},it=function(Ut,Ct){if(Ut[Ct].length>7){Ut[Ct].shift();for(var Vt=Ut[Ct];Vt.length;)k[Ct]="A",z&&(h[Ct]="A"),Ut.splice(Ct++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(Ct,1),V=Math.max(rt.length,z&&z.length||0)}},ot=function(Ut,Ct,Vt,Ht,re){Ut&&Ct&&Ut[re][0]==="M"&&Ct[re][0]!=="M"&&(Ct.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],V=Math.max(rt.length,z&&z.length||0))};V=Math.max(rt.length,z&&z.length||0);for(var At=0;At<V;At++){rt[At]&&(g=rt[At][0]),g!=="C"&&(k[At]=g,At&&(B=k[At-1])),rt[At]=q(rt[At],P,B),k[At]!=="A"&&g==="C"&&(k[At]="C"),it(rt,At),z&&(z[At]&&(g=z[At][0]),g!=="C"&&(h[At]=g,At&&(B=h[At-1])),z[At]=q(z[At],Y,B),h[At]!=="A"&&g==="C"&&(h[At]="C"),it(z,At)),ot(rt,z,P,Y,At),ot(z,rt,Y,P,At);var gt=rt[At],mt=z&&z[At],Ot=gt.length,It=z&&mt.length;P.x=gt[Ot-2],P.y=gt[Ot-1],P.bx=parseFloat(gt[Ot-4])||P.x,P.by=parseFloat(gt[Ot-3])||P.y,Y.bx=z&&(parseFloat(mt[It-4])||Y.x),Y.by=z&&(parseFloat(mt[It-3])||Y.y),Y.x=z&&mt[It-2],Y.y=z&&mt[It-1]}return z?[rt,z]:rt},n=/,?([a-z]),?/gi,s=function($){return $.join(",").replace(n,"$1")},d=function($,lt,rt,z,P){var Y=-3*lt+9*rt-9*z+3*P,k=$*Y+6*lt-12*rt+6*z;return $*k-3*lt+3*rt},E=function($,lt,rt,z,P,Y,k,h,g){g===null&&(g=1),g=g>1?1:g<0?0:g;for(var B=g/2,V=12,q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],it=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ot=0,At=0;At<V;At++){var gt=B*q[At]+B,mt=d(gt,$,rt,P,k),Ot=d(gt,lt,z,Y,h),It=mt*mt+Ot*Ot;ot+=it[At]*Math.sqrt(It)}return B*ot},O=function($,lt,rt,z,P,Y,k,h){for(var g=[],B=[[],[]],V,q,it,ot,At=0;At<2;++At){if(At===0?(q=6*$-12*rt+6*P,V=-3*$+9*rt-9*P+3*k,it=3*rt-3*$):(q=6*lt-12*z+6*Y,V=-3*lt+9*z-9*Y+3*h,it=3*z-3*lt),Math.abs(V)<1e-12){if(Math.abs(q)<1e-12)continue;ot=-it/q,ot>0&&ot<1&&g.push(ot);continue}var gt=q*q-4*it*V,mt=Math.sqrt(gt);if(!(gt<0)){var Ot=(-q+mt)/(2*V);Ot>0&&Ot<1&&g.push(Ot);var It=(-q-mt)/(2*V);It>0&&It<1&&g.push(It)}}for(var Dt=g.length,Ut=Dt,Ct;Dt--;)ot=g[Dt],Ct=1-ot,B[0][Dt]=Ct*Ct*Ct*$+3*Ct*Ct*ot*rt+3*Ct*ot*ot*P+ot*ot*ot*k,B[1][Dt]=Ct*Ct*Ct*lt+3*Ct*Ct*ot*z+3*Ct*ot*ot*Y+ot*ot*ot*h;return B[0][Ut]=$,B[1][Ut]=lt,B[0][Ut+1]=k,B[1][Ut+1]=h,B[0].length=B[1].length=Ut+2,{min:{x:Math.min.apply(0,B[0]),y:Math.min.apply(0,B[1])},max:{x:Math.max.apply(0,B[0]),y:Math.max.apply(0,B[1])}}},C=function($,lt,rt,z,P,Y,k,h){if(!(Math.max($,rt)<Math.min(P,k)||Math.min($,rt)>Math.max(P,k)||Math.max(lt,z)<Math.min(Y,h)||Math.min(lt,z)>Math.max(Y,h))){var g=($*z-lt*rt)*(P-k)-($-rt)*(P*h-Y*k),B=($*z-lt*rt)*(Y-h)-(lt-z)*(P*h-Y*k),V=($-rt)*(Y-h)-(lt-z)*(P-k);if(!!V){var q=g/V,it=B/V,ot=+q.toFixed(2),At=+it.toFixed(2);if(!(ot<+Math.min($,rt).toFixed(2)||ot>+Math.max($,rt).toFixed(2)||ot<+Math.min(P,k).toFixed(2)||ot>+Math.max(P,k).toFixed(2)||At<+Math.min(lt,z).toFixed(2)||At>+Math.max(lt,z).toFixed(2)||At<+Math.min(Y,h).toFixed(2)||At>+Math.max(Y,h).toFixed(2)))return{x:q,y:it}}}},v=function($,lt,rt){return lt>=$.x&&lt<=$.x+$.width&&rt>=$.y&&rt<=$.y+$.height},x=function($,lt,rt,z,P){if(P)return[["M",+$+ +P,lt],["l",rt-P*2,0],["a",P,P,0,0,1,P,P],["l",0,z-P*2],["a",P,P,0,0,1,-P,P],["l",P*2-rt,0],["a",P,P,0,0,1,-P,-P],["l",0,P*2-z],["a",P,P,0,0,1,P,-P],["z"]];var Y=[["M",$,lt],["l",rt,0],["l",0,z],["l",-rt,0],["z"]];return Y.parsePathArray=s,Y},T=function($,lt,rt,z){return $===null&&($=lt=rt=z=0),lt===null&&(lt=$.y,rt=$.width,z=$.height,$=$.x),{x:$,y:lt,width:rt,w:rt,height:z,h:z,x2:$+rt,y2:lt+z,cx:$+rt/2,cy:lt+z/2,r1:Math.min(rt,z)/2,r2:Math.max(rt,z)/2,r0:Math.sqrt(rt*rt+z*z)/2,path:x($,lt,rt,z),vb:[$,lt,rt,z].join(" ")}},N=function($,lt){return $=T($),lt=T(lt),v(lt,$.x,$.y)||v(lt,$.x2,$.y)||v(lt,$.x,$.y2)||v(lt,$.x2,$.y2)||v($,lt.x,lt.y)||v($,lt.x2,lt.y)||v($,lt.x,lt.y2)||v($,lt.x2,lt.y2)||($.x<lt.x2&&$.x>lt.x||lt.x<$.x2&&lt.x>$.x)&&($.y<lt.y2&&$.y>lt.y||lt.y<$.y2&&lt.y>$.y)},X=function($,lt,rt,z,P,Y,k,h){Object(at.isArray)($)||($=[$,lt,rt,z,P,Y,k,h]);var g=O.apply(null,$);return T(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},tt=function($,lt,rt,z,P,Y,k,h,g){var B=1-g,V=Math.pow(B,3),q=Math.pow(B,2),it=g*g,ot=it*g,At=V*$+q*3*g*rt+B*3*g*g*P+ot*k,gt=V*lt+q*3*g*z+B*3*g*g*Y+ot*h,mt=$+2*g*(rt-$)+it*(P-2*rt+$),Ot=lt+2*g*(z-lt)+it*(Y-2*z+lt),It=rt+2*g*(P-rt)+it*(k-2*P+rt),Dt=z+2*g*(Y-z)+it*(h-2*Y+z),Ut=B*$+g*rt,Ct=B*lt+g*z,Vt=B*P+g*k,Ht=B*Y+g*h,re=90-Math.atan2(mt-It,Ot-Dt)*180/Math.PI;return{x:At,y:gt,m:{x:mt,y:Ot},n:{x:It,y:Dt},start:{x:Ut,y:Ct},end:{x:Vt,y:Ht},alpha:re}},nt=function($,lt,rt){var z=X($),P=X(lt);if(!N(z,P))return rt?0:[];for(var Y=E.apply(0,$),k=E.apply(0,lt),h=~~(Y/8),g=~~(k/8),B=[],V=[],q={},it=rt?0:[],ot=0;ot<h+1;ot++){var At=tt.apply(0,$.concat(ot/h));B.push({x:At.x,y:At.y,t:ot/h})}for(var ot=0;ot<g+1;ot++){var At=tt.apply(0,lt.concat(ot/g));V.push({x:At.x,y:At.y,t:ot/g})}for(var ot=0;ot<h;ot++)for(var gt=0;gt<g;gt++){var mt=B[ot],Ot=B[ot+1],It=V[gt],Dt=V[gt+1],Ut=Math.abs(Ot.x-mt.x)<.001?"y":"x",Ct=Math.abs(Dt.x-It.x)<.001?"y":"x",Vt=C(mt.x,mt.y,Ot.x,Ot.y,It.x,It.y,Dt.x,Dt.y);if(Vt){if(q[Vt.x.toFixed(4)]===Vt.y.toFixed(4))continue;q[Vt.x.toFixed(4)]=Vt.y.toFixed(4);var Ht=mt.t+Math.abs((Vt[Ut]-mt[Ut])/(Ot[Ut]-mt[Ut]))*(Ot.t-mt.t),re=It.t+Math.abs((Vt[Ct]-It[Ct])/(Dt[Ct]-It[Ct]))*(Dt.t-It.t);Ht>=0&&Ht<=1&&re>=0&&re<=1&&(rt?it+=1:it.push({x:Vt.x,y:Vt.y,t1:Ht,t2:re}))}}return it},vt=function($,lt,rt){$=y($),lt=y(lt);for(var z,P,Y,k,h,g,B,V,q,it,ot=rt?0:[],At=0,gt=$.length;At<gt;At++){var mt=$[At];if(mt[0]==="M")z=h=mt[1],P=g=mt[2];else{mt[0]==="C"?(q=[z,P].concat(mt.slice(1)),z=q[6],P=q[7]):(q=[z,P,z,P,h,g,h,g],z=h,P=g);for(var Ot=0,It=lt.length;Ot<It;Ot++){var Dt=lt[Ot];if(Dt[0]==="M")Y=B=Dt[1],k=V=Dt[2];else{Dt[0]==="C"?(it=[Y,k].concat(Dt.slice(1)),Y=it[6],k=it[7]):(it=[Y,k,Y,k,B,V,B,V],Y=B,k=V);var Ut=nt(q,it,rt);if(rt)ot+=Ut;else{for(var Ct=0,Vt=Ut.length;Ct<Vt;Ct++)Ut[Ct].segment1=At,Ut[Ct].segment2=Ot,Ut[Ct].bez1=q,Ut[Ct].bez2=it;ot=ot.concat(Ut)}}}}}return ot},ft=function($,lt){return vt($,lt)};function bt(Mt,$){var lt=[],rt=[];function z(P,Y){if(P.length===1)lt.push(P[0]),rt.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&lt.push(P[0]),h===P.length-2&&rt.push(P[h+1]),k[h]=[(1-Y)*P[h][0]+Y*P[h+1][0],(1-Y)*P[h][1]+Y*P[h+1][1]];z(k,Y)}}return Mt.length&&z(Mt,$),{left:lt,right:rt.reverse()}}function St(Mt,$,lt){var rt=[[Mt[1],Mt[2]]];lt=lt||2;var z=[];$[0]==="A"?(rt.push($[6]),rt.push($[7])):$[0]==="C"?(rt.push([$[1],$[2]]),rt.push([$[3],$[4]]),rt.push([$[5],$[6]])):$[0]==="S"||$[0]==="Q"?(rt.push([$[1],$[2]]),rt.push([$[3],$[4]])):rt.push([$[1],$[2]]);for(var P=rt,Y=1/lt,k=0;k<lt-1;k++){var h=Y/(1-Y*k),g=bt(P,h);z.push(g.left),P=g.right}z.push(P);var B=z.map(function(V){var q=[];return V.length===4&&(q.push("C"),q=q.concat(V[2])),V.length>=3&&(V.length===3&&q.push("Q"),q=q.concat(V[1])),V.length===2&&q.push("L"),q=q.concat(V[V.length-1]),q});return B}var pt=function($,lt,rt){if(rt===1)return[[].concat($)];var z=[];if(lt[0]==="L"||lt[0]==="C"||lt[0]==="Q")z=z.concat(St($,lt,rt));else{var P=[].concat($);P[0]==="M"&&(P[0]="L");for(var Y=0;Y<=rt-1;Y++)z.push(P)}return z},ct=function($,lt){if($.length===1)return $;var rt=$.length-1,z=lt.length-1,P=rt/z,Y=[];if($.length===1&&$[0][0]==="M"){for(var k=0;k<z-rt;k++)$.push($[0]);return $}for(var k=0;k<z;k++){var h=Math.floor(P*k);Y[h]=(Y[h]||0)+1}var g=Y.reduce(function(B,V,q){return q===rt?B.concat($[rt]):B.concat(pt($[q],$[q+1],V))},[]);return g.unshift($[0]),(lt[z]==="Z"||lt[z]==="z")&&g.push("Z"),g},zt=function($,lt){if($.length!==lt.length)return!1;var rt=!0;return Object(at.each)($,function(z,P){if(z!==lt[P])return rt=!1,!1}),rt};function Nt(Mt,$,lt){var rt=null,z=lt;return $<z&&(z=$,rt="add"),Mt<z&&(z=Mt,rt="del"),{type:rt,min:z}}var wt=function($,lt){var rt=$.length,z=lt.length,P,Y,k=0;if(rt===0||z===0)return null;for(var h=[],g=0;g<=rt;g++)h[g]=[],h[g][0]={min:g};for(var B=0;B<=z;B++)h[0][B]={min:B};for(var g=1;g<=rt;g++){P=$[g-1];for(var B=1;B<=z;B++){Y=lt[B-1],zt(P,Y)?k=0:k=1;var V=h[g-1][B].min+1,q=h[g][B-1].min+1,it=h[g-1][B-1].min+k;h[g][B]=Nt(V,q,it)}}return h},H=function($,lt){var rt=wt($,lt),z=$.length,P=lt.length,Y=[],k=1,h=1;if(rt[z][P].min!==z){for(var g=1;g<=z;g++){var B=rt[g][g].min;h=g;for(var V=k;V<=P;V++)rt[g][V].min<B&&(B=rt[g][V].min,h=V);k=h,rt[g][k].type&&Y.push({index:g-1,type:rt[g][k].type})}for(var g=Y.length-1;g>=0;g--)k=Y[g].index,Y[g].type==="add"?$.splice(k,0,[].concat($[k])):$.splice(k,1)}z=$.length;var q=P-z;if(z<P)for(var g=0;g<q;g++)$[z-1][0]==="z"||$[z-1][0]==="Z"?$.splice(z-2,0,$[z-2]):$.push($[z-1]),z+=1;return $};function ht(Mt,$,lt){for(var rt=[].concat(Mt),z,P=1/(lt+1),Y=dt($)[0],k=1;k<=lt;k++)P*=k,z=Math.floor(Mt.length*P),z===0?rt.unshift([Y[0]*P+Mt[z][0]*(1-P),Y[1]*P+Mt[z][1]*(1-P)]):rt.splice(z,0,[Y[0]*P+Mt[z][0]*(1-P),Y[1]*P+Mt[z][1]*(1-P)]);return rt}function dt(Mt){var $=[];switch(Mt[0]){case"M":$.push([Mt[1],Mt[2]]);break;case"L":$.push([Mt[1],Mt[2]]);break;case"A":$.push([Mt[6],Mt[7]]);break;case"Q":$.push([Mt[3],Mt[4]]),$.push([Mt[1],Mt[2]]);break;case"T":$.push([Mt[1],Mt[2]]);break;case"C":$.push([Mt[5],Mt[6]]),$.push([Mt[1],Mt[2]]),$.push([Mt[3],Mt[4]]);break;case"S":$.push([Mt[3],Mt[4]]),$.push([Mt[1],Mt[2]]);break;case"H":$.push([Mt[1],Mt[1]]);break;case"V":$.push([Mt[1],Mt[1]]);break;default:}return $}var yt=function($,lt){if($.length<=1)return $;for(var rt,z=0;z<lt.length;z++)if($[z][0]!==lt[z][0])switch(rt=dt($[z]),lt[z][0]){case"M":$[z]=["M"].concat(rt[0]);break;case"L":$[z]=["L"].concat(rt[0]);break;case"A":$[z]=[].concat(lt[z]),$[z][6]=rt[0][0],$[z][7]=rt[0][1];break;case"Q":if(rt.length<2)if(z>0)rt=ht(rt,$[z-1],1);else{$[z]=lt[z];break}$[z]=["Q"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;case"T":$[z]=["T"].concat(rt[0]);break;case"C":if(rt.length<3)if(z>0)rt=ht(rt,$[z-1],2);else{$[z]=lt[z];break}$[z]=["C"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;case"S":if(rt.length<2)if(z>0)rt=ht(rt,$[z-1],1);else{$[z]=lt[z];break}$[z]=["S"].concat(rt.reduce(function(P,Y){return P.concat(Y)},[]));break;default:$[z]=lt[z]}return $}},u3os:function(Gn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.ver=Gt.clear=Gt.bind=void 0;var at=_("P4Qj"),a=function(p,m){var S=(0,at.getSensor)(p);return S.bind(m),function(){S.unbind(m)}};Gt.bind=a;var A=function(p){var m=(0,at.getSensor)(p);(0,at.removeSensor)(m)};Gt.clear=A;var e="1.0.1";Gt.ver=e},u60a:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"CONTAINER_CLASS",function(){return at}),_.d(Gt,"TITLE_CLASS",function(){return a}),_.d(Gt,"LIST_CLASS",function(){return A}),_.d(Gt,"LIST_ITEM_CLASS",function(){return e}),_.d(Gt,"MARKER_CLASS",function(){return i}),_.d(Gt,"VALUE_CLASS",function(){return p}),_.d(Gt,"NAME_CLASS",function(){return m}),_.d(Gt,"CROSSHAIR_X",function(){return S}),_.d(Gt,"CROSSHAIR_Y",function(){return l});var at="g2-tooltip",a="g2-tooltip-title",A="g2-tooltip-list",e="g2-tooltip-list-item",i="g2-tooltip-marker",p="g2-tooltip-value",m="g2-tooltip-name",S="g2-tooltip-crosshair-x",l="g2-tooltip-crosshair-y"},"u9/z":function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return m}),_.d(Gt,"a",function(){return l});var at=_("iTfj"),a=_("YuPD"),A=_("w02o"),e=_("tKoa"),i=_("SZbK"),p=_("B3DA");function m(M){var j=M.chart,y=M.options,n=y.percent,s=y.progressStyle,d=y.color,E=y.barWidthRatio;j.data(Object(p.a)(n));var O=Object(a.b)({},M,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:E,interval:{style:s,color:Object(at.isString)(d)?[d,i.a[1]]:d}}});return Object(e.c)(O),j.tooltip(!1),j.axis(!1),j.legend(!1),M}function S(M){var j=M.chart;return j.coordinate("rect").transpose(),M}function l(M){return Object(a.e)(m,Object(A.f)({}),S,A.a,A.j,Object(A.b)())(M)}},u9VJ:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("sqD9"),i=_("DMQx"),p=function(m){Object(at.b)(S,m);function S(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="column",l}return S.prototype.changeData=function(l){this.updateOption({data:l});var M=this.options,j=M.yField,y=M.xField,n=M.isPercent;this.chart.changeData(Object(e.a)(l,j,y,j,n))},S.prototype.getDefaultOptions=function(){return Object(A.b)({},m.prototype.getDefaultOptions.call(this),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},S.prototype.getSchemaAdaptor=function(){return i.a},S}(a.a)},uCX8:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return M}),_.d(Gt,"Text",function(){return y}),_.d(Gt,"Arc",function(){return s}),_.d(Gt,"Region",function(){return E}),_.d(Gt,"Image",function(){return C}),_.d(Gt,"DataMarker",function(){return x}),_.d(Gt,"DataRegion",function(){return N}),_.d(Gt,"RegionFilter",function(){return tt}),_.d(Gt,"Shape",function(){return vt}),_.d(Gt,"Html",function(){return pt});var at=_("mrSG"),a=_("iTfj"),A=_("MeYt"),e=_("BgvD"),i=_("jqgP"),p=_("5UbV");function m(ct,zt){var Nt=zt.x,wt=zt.y,H=zt.content,ht=zt.style,dt=zt.id,yt=zt.name,Mt=zt.rotate,$=zt.maxLength,lt=zt.autoEllipsis,rt=zt.isVertical,z=zt.ellipsisPosition,P=zt.background,Y=ct.addGroup({id:dt+"-group",name:yt+"-group",attrs:{x:Nt,y:wt}}),k=Y.addShape({type:"text",id:dt,name:yt,attrs:Object(at.a)({x:0,y:0,text:H},ht)}),h=Object(p.c)(Object(a.get)(P,"padding",0));if($&&lt){var g=$-(h[1]+h[3]);Object(e.a)(!rt,k,g,z)}if(P){var B=Object(a.get)(P,"style",{}),V=k.getCanvasBBox(),q=V.minX,it=V.minY,ot=V.width,At=V.height,gt=Y.addShape("rect",{id:dt+"-bg",name:dt+"-bg",attrs:Object(at.a)({x:q-h[3],y:it-h[0],width:ot+h[1]+h[3],height:At+h[0]+h[2]},B)});gt.toBack()}Object(i.c)(Y,Nt,wt),Object(i.b)(Y,Mt,Nt,wt)}var S=_("L16w"),l=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:S.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:S.a.lineColor,lineWidth:1}}}})},zt.prototype.renderInner=function(Nt){this.renderLine(Nt),this.get("text")&&this.renderLabel(Nt)},zt.prototype.renderLine=function(Nt){var wt=this.get("start"),H=this.get("end"),ht=this.get("style");this.addShape(Nt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Object(at.a)({x1:wt.x,y1:wt.y,x2:H.x,y2:H.y},ht)})},zt.prototype.getLabelPoint=function(Nt,wt,H){var ht;return H==="start"?ht=0:H==="center"?ht=.5:Object(a.isString)(H)&&H.indexOf("%")!==-1?ht=parseInt(H,10)/100:Object(a.isNumber)(H)?ht=H:ht=1,(ht>1||ht<0)&&(ht=1),{x:Object(p.g)(Nt.x,wt.x,ht),y:Object(p.g)(Nt.y,wt.y,ht)}},zt.prototype.renderLabel=function(Nt){var wt=this.get("text"),H=this.get("start"),ht=this.get("end"),dt=wt.position,yt=wt.content,Mt=wt.style,$=wt.offsetX,lt=wt.offsetY,rt=wt.autoRotate,z=wt.maxLength,P=wt.autoEllipsis,Y=wt.ellipsisPosition,k=wt.background,h=wt.isVertical,g=h===void 0?!1:h,B=this.getLabelPoint(H,ht,dt),V=B.x+$,q=B.y+lt,it={id:this.getElementId("line-text"),name:"annotation-line-text",x:V,y:q,content:yt,style:Mt,maxLength:z,autoEllipsis:P,ellipsisPosition:Y,background:k,isVertical:g};if(rt){var ot=[ht.x-H.x,ht.y-H.y];it.rotate=Math.atan2(ot[1],ot[0])}m(Nt,it)},zt}(A.a),M=l,j=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:S.a.fontFamily}}})},zt.prototype.setLocation=function(Nt){this.set("x",Nt.x),this.set("y",Nt.y),this.resetLocation()},zt.prototype.renderInner=function(Nt){var wt=this.getLocation(),H=wt.x,ht=wt.y,dt=this.get("content"),yt=this.get("style"),Mt=this.getElementId("text"),$=this.get("name")+"-text",lt=this.get("maxLength"),rt=this.get("autoEllipsis"),z=this.get("isVertical"),P=this.get("ellipsisPosition"),Y=this.get("background"),k=this.get("rotate"),h={id:Mt,name:$,x:H,y:ht,content:dt,style:yt,maxLength:lt,autoEllipsis:rt,isVertical:z,ellipsisPosition:P,background:Y,rotate:k};m(Nt,h)},zt.prototype.resetLocation=function(){var Nt=this.getElementByLocalId("text-group");if(Nt){var wt=this.getLocation(),H=wt.x,ht=wt.y,dt=this.get("rotate");Object(i.c)(Nt,H,ht),Object(i.b)(Nt,dt,H,ht)}},zt}(A.a),y=j,n=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},zt.prototype.renderInner=function(Nt){this.renderArc(Nt)},zt.prototype.getArcPath=function(){var Nt=this.getLocation(),wt=Nt.center,H=Nt.radius,ht=Nt.startAngle,dt=Nt.endAngle,yt=Object(p.e)(wt,H,ht),Mt=Object(p.e)(wt,H,dt),$=dt-ht>Math.PI?1:0,lt=[["M",yt.x,yt.y]];if(dt-ht==Math.PI*2){var rt=Object(p.e)(wt,H,ht+Math.PI);lt.push(["A",H,H,0,$,1,rt.x,rt.y]),lt.push(["A",H,H,0,$,1,Mt.x,Mt.y])}else lt.push(["A",H,H,0,$,1,Mt.x,Mt.y]);return lt},zt.prototype.renderArc=function(Nt){var wt=this.getArcPath(),H=this.get("style");this.addShape(Nt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Object(at.a)({path:wt},H)})},zt}(A.a),s=n,d=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}}})},zt.prototype.renderInner=function(Nt){this.renderRegion(Nt)},zt.prototype.renderRegion=function(Nt){var wt=this.get("start"),H=this.get("end"),ht=this.get("style"),dt=Object(p.k)({start:wt,end:H});this.addShape(Nt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({x:dt.x,y:dt.y,width:dt.width,height:dt.height},ht)})},zt}(A.a),E=d,O=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},zt.prototype.renderInner=function(Nt){this.renderImage(Nt)},zt.prototype.getImageAttrs=function(){var Nt=this.get("start"),wt=this.get("end"),H=this.get("style"),ht=Object(p.k)({start:Nt,end:wt}),dt=this.get("src");return Object(at.a)({x:ht.x,y:ht.y,img:dt,width:ht.width,height:ht.height},H)},zt.prototype.renderImage=function(Nt){this.addShape(Nt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},zt}(A.a),C=O,v=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:S.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:S.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:S.a.fontFamily}}}})},zt.prototype.renderInner=function(Nt){Object(a.get)(this.get("line"),"display")&&this.renderLine(Nt),Object(a.get)(this.get("text"),"display")&&this.renderText(Nt),Object(a.get)(this.get("point"),"display")&&this.renderPoint(Nt),this.get("autoAdjust")&&this.autoAdjust(Nt)},zt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},zt.prototype.renderPoint=function(Nt){var wt=this.getShapeAttrs().point;this.addShape(Nt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:wt})},zt.prototype.renderLine=function(Nt){var wt=this.getShapeAttrs().line;this.addShape(Nt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:wt})},zt.prototype.renderText=function(Nt){var wt=this.getShapeAttrs().text,H=wt.x,ht=wt.y,dt=wt.text,yt=Object(at.c)(wt,["x","y","text"]),Mt=this.get("text"),$=Mt.background,lt=Mt.maxLength,rt=Mt.autoEllipsis,z=Mt.isVertival,P=Mt.ellipsisPosition,Y={x:H,y:ht,id:this.getElementId("text"),name:"annotation-text",content:dt,style:yt,background:$,maxLength:lt,autoEllipsis:rt,isVertival:z,ellipsisPosition:P};m(Nt,Y)},zt.prototype.autoAdjust=function(Nt){var wt=this.get("direction"),H=this.get("x"),ht=this.get("y"),dt=Object(a.get)(this.get("line"),"length",0),yt=this.get("coordinateBBox"),Mt=Nt.getBBox(),$=Mt.minX,lt=Mt.maxX,rt=Mt.minY,z=Mt.maxY,P=Nt.findById(this.getElementId("text-group")),Y=Nt.findById(this.getElementId("text")),k=Nt.findById(this.getElementId("line"));if(!!yt){if(P){if(H+$<=yt.minX){var h=yt.minX-(H+$);Object(i.c)(P,P.attr("x")+h,P.attr("y"))}if(H+lt>=yt.maxX){var h=H+lt-yt.maxX;Object(i.c)(P,P.attr("x")-h,P.attr("y"))}}if(wt==="upward"&&ht+rt<=yt.minY||wt!=="upward"&&ht+z>=yt.maxY){var g=void 0,B=void 0;wt==="upward"&&ht+rt<=yt.minY?(g="top",B=1):(g="bottom",B=-1),Y.attr("textBaseline",g),k&&k.attr("path",[["M",0,0],["L",0,dt*B]]),Object(i.c)(P,P.attr("x"),(dt+2)*B)}}},zt.prototype.getShapeAttrs=function(){var Nt=Object(a.get)(this.get("line"),"display"),wt=Object(a.get)(this.get("point"),"style",{}),H=Object(a.get)(this.get("line"),"style",{}),ht=Object(a.get)(this.get("text"),"style",{}),dt=this.get("direction"),yt=Nt?Object(a.get)(this.get("line"),"length",0):0,Mt=dt==="upward"?-1:1;return{point:Object(at.a)({x:0,y:0},wt),line:Object(at.a)({path:[["M",0,0],["L",0,yt*Mt]]},H),text:Object(at.a)({x:0,y:(yt+2)*Mt,text:Object(a.get)(this.get("text"),"content",""),textBaseline:dt==="upward"?"bottom":"top"},ht)}},zt}(A.a),x=v,T=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:S.a.textColor,fontFamily:S.a.fontFamily}}}})},zt.prototype.renderInner=function(Nt){var wt=Object(a.get)(this.get("region"),"style",{}),H=Object(a.get)(this.get("text"),"style",{}),ht=this.get("lineLength")||0,dt=this.get("points");if(!!dt.length){var yt=Object(p.j)(dt),Mt=[];Mt.push(["M",dt[0].x,yt.minY-ht]),dt.forEach(function(lt){Mt.push(["L",lt.x,lt.y])}),Mt.push(["L",dt[dt.length-1].x,dt[dt.length-1].y-ht]),this.addShape(Nt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({path:Mt},wt)});var $=Object(at.a)({id:this.getElementId("text"),name:"annotation-text",x:(yt.minX+yt.maxX)/2,y:yt.minY-ht},this.get("text"));m(Nt,$)}},zt}(A.a),N=T,X=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},zt.prototype.renderInner=function(Nt){var wt=this,H=this.get("start"),ht=this.get("end"),dt=this.addGroup(Nt,{id:this.getElementId("region-filter"),capture:!1});Object(a.each)(this.get("shapes"),function(Mt,$){var lt=Mt.get("type"),rt=Object(a.clone)(Mt.attr());wt.adjustShapeAttrs(rt),wt.addShape(dt,{id:wt.getElementId("shape-"+lt+"-"+$),capture:!1,type:lt,attrs:rt})});var yt=Object(p.k)({start:H,end:ht});dt.setClip({type:"rect",attrs:{x:yt.minX,y:yt.minY,width:yt.width,height:yt.height}})},zt.prototype.adjustShapeAttrs=function(Nt){var wt=this.get("color");Nt.fill&&(Nt.fill=Nt.fillStyle=wt),Nt.stroke=Nt.strokeStyle=wt},zt}(A.a),tt=X,nt=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"shape",draw:a.noop})},zt.prototype.renderInner=function(Nt){var wt=this.get("render");Object(a.isFunction)(wt)&&wt(Nt)},zt}(A.a),vt=nt,ft=_("fIp6"),bt=_("de35"),St=function(ct){Object(at.b)(zt,ct);function zt(){return ct!==null&&ct.apply(this,arguments)||this}return zt.prototype.getDefaultCfg=function(){var Nt=ct.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Nt),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},zt.prototype.render=function(){var Nt=this.getContainer(),wt=this.get("html");Object(p.a)(Nt);var H=Object(a.isFunction)(wt)?wt(Nt):wt;Object(a.isElement)(H)?Nt.appendChild(H):Object(a.isString)(H)&&Nt.appendChild(Object(ft.b)(H)),this.resetPosition()},zt.prototype.resetPosition=function(){var Nt=this.getContainer(),wt=this.getLocation(),H=wt.x,ht=wt.y,dt=this.get("alignX"),yt=this.get("alignY"),Mt=this.get("offsetX"),$=this.get("offsetY"),lt=Object(ft.d)(Nt),rt=Object(ft.c)(Nt),z={x:H,y:ht};dt==="middle"?z.x-=Math.round(lt/2):dt==="right"&&(z.x-=Math.round(lt)),yt==="middle"?z.y-=Math.round(rt/2):yt==="bottom"&&(z.y-=Math.round(rt)),Mt&&(z.x+=Mt),$&&(z.y+=$),Object(ft.e)(Nt,{position:"absolute",left:z.x+"px",top:z.y+"px",zIndex:this.get("zIndex")})},zt}(bt.a),pt=St},uFwe:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var at=_("BsWD");function a(A,e){var i;if(typeof Symbol=="undefined"||A[Symbol.iterator]==null){if(Array.isArray(A)||(i=Object(at.a)(A))||e&&A&&typeof A.length=="number"){i&&(A=i);var p=0,m=function(){};return{s:m,n:function(){return p>=A.length?{done:!0}:{done:!1,value:A[p++]}},e:function(y){throw y},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,l=!1,M;return{s:function(){i=A[Symbol.iterator]()},n:function(){var y=i.next();return S=y.done,y},e:function(y){l=!0,M=y},f:function(){try{!S&&i.return!=null&&i.return()}finally{if(l)throw M}}}}},"uw/B":function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return n});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("sqD9"),i=_("iTfj"),p=_("w02o"),m=_("tKoa"),S=_("hJqF");function l(s){var d=s.chart,E=s.options,O=E.data,C=E.areaStyle,v=E.color,x=E.point,T=E.line,N=E.isPercent,X=E.xField,tt=E.yField,nt=E.tooltip,vt=E.seriesField,ft=Object(e.a)(O,tt,X,tt,N);d.data(ft);var bt=N?Object(at.a)({formatter:function(zt){return{name:zt[vt]||zt[X],value:(Number(zt[tt])*100).toFixed(2)+"%"}}},nt):nt,St=Object(A.b)({},s,{options:{area:{color:v,style:C},line:T&&Object(at.a)({color:v},T),point:x&&Object(at.a)({color:v},x),tooltip:bt,label:void 0}}),pt=Object(A.b)({},St,{options:{tooltip:!1}});return Object(m.a)(St),Object(m.d)(pt),Object(m.e)(pt),s}function M(s){var d=s.chart,E=s.options,O=E.label,C=E.yField,v=Object(A.c)(d,"area");if(!O)v.label(!1);else{var x=O.callback,T=Object(at.c)(O,["callback"]);v.label({fields:[C],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(A.o)(T))})}return s}function j(s){var d=s.chart,E=s.options,O=E.isStack,C=E.isPercent;return(C||O)&&Object(i.each)(d.geometries,function(v){v.adjust("stack")}),s}function y(s){return Object(A.e)(l,S.d,j,p.j,S.b,S.c,p.k,M,p.h,Object(p.b)(),p.c,p.a,p.e)(s)}var n=function(s){Object(at.b)(d,s);function d(){var E=s!==null&&s.apply(this,arguments)||this;return E.type="area",E}return d.prototype.getDefaultOptions=function(){return Object(A.b)({},s.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}})},d.prototype.changeData=function(E){this.updateOption({data:E});var O=this.options,C=O.isPercent,v=O.xField,x=O.yField;this.chart.changeData(Object(e.a)(E,x,v,x,C))},d.prototype.getSchemaAdaptor=function(){return y},d}(a.a)},uzHj:function(Gn,Gt){},v7Ed:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return p});var at=_("aN7R");_.d(Gt,"Shape",function(){return at});var a=_("aFU3");for(var A in a)["default","Canvas","Group","Shape","version"].indexOf(A)<0&&function(m){_.d(Gt,m,function(){return a[m]})}(A);var e=_("wClo");_.d(Gt,"Canvas",function(){return e.a});var i=_("5z4m");_.d(Gt,"Group",function(){return i.a});var p="0.5.6"},vIgC:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"c",function(){return i}),_.d(Gt,"a",function(){return p});var at=_("sstZ"),a=_("lt7v");function A(m,S,l){var M=1;if(Object(at.h)(m)&&(M=m.split(`
`).length),M>1){var j=e(S,l);return S*M+j*(M-1)}return S}function e(m,S){return S?S-m:m*.14}function i(m,S){var l=Object(a.a)(),M=0;if(Object(at.e)(m)||m==="")return M;if(l.save(),l.font=S,Object(at.h)(m)&&m.includes(`
`)){var j=m.split(`
`);Object(at.a)(j,function(y){var n=l.measureText(y).width;M<n&&(M=n)})}else M=l.measureText(m).width;return l.restore(),M}function p(m){var S=m.fontSize,l=m.fontFamily,M=m.fontWeight,j=m.fontStyle,y=m.fontVariant;return[j,y,M,S+"px",l].join(" ").trim()}},vk7d:function(Gn,Gt){},w02o:function(Gn,Gt,_){"use strict";_.d(Gt,"d",function(){return i}),_.d(Gt,"k",function(){return p}),_.d(Gt,"c",function(){return m}),_.d(Gt,"a",function(){return S}),_.d(Gt,"j",function(){return l}),_.d(Gt,"i",function(){return M}),_.d(Gt,"h",function(){return j}),_.d(Gt,"g",function(){return y}),_.d(Gt,"f",function(){return n}),_.d(Gt,"b",function(){return s}),_.d(Gt,"e",function(){return d});var at=_("mrSG"),a=_("iTfj"),A=_("n/J0"),e=_("YuPD");function i(E){var O=E.chart,C=E.options,v=C.legend,x=C.colorField,T=C.seriesField;return v===!1?O.legend(!1):(x||T)&&O.legend(x||T,v),E}function p(E){var O=E.chart,C=E.options,v=C.tooltip;return v!==void 0&&O.tooltip(v),E}function m(E){var O=E.chart,C=E.options,v=C.interactions;return Object(a.each)(v,function(x){x.enable===!1?O.removeInteraction(x.type):O.interaction(x.type,x.cfg||{})}),E}function S(E){var O=E.chart,C=E.options,v=C.animation;return typeof v=="boolean"?O.animate(v):O.animate(!0),Object(a.each)(O.geometries,function(x){x.animate(v)}),E}function l(E){var O=E.chart,C=E.options,v=C.theme;return v&&O.theme(v),E}function M(E){var O=E.chart,C=E.options,v=C.state;return v&&Object(a.each)(O.geometries,function(x){x.state(v)}),E}function j(E){var O=E.chart,C=E.options,v=C.slider;return O.option("slider",v),E}function y(E){var O=E.chart,C=E.options,v=C.scrollbar;return O.option("scrollbar",v),E}function n(E,O){return function(C){var v=C.chart,x=C.options,T={};return Object(a.each)(E,function(N,X){T[X]=Object(e.k)(N,A.a)}),T=Object(e.b)({},O,x.meta,T),v.scale(T),C}}function s(E){return function(O){var C=O.chart,v=O.options,x=C.getController("annotation");return Object(a.each)(Object(at.d)(v.annotations||[],E||[]),function(T){x.annotation(T)}),O}}function d(E){var O=E.chart,C=E.options,v=C.yAxis,x=C.limitInPlot,T=x;return Object(a.isObject)(v)&&Object(a.isNil)(x)&&(Object.values(Object(e.k)(v,["min","max","minLimit","maxLimit"])).some(function(N){return!Object(a.isNil)(N)})?T=!0:T=!1),O.limitInPlot=T,E}},wClo:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("aFU3"),A=_("IvmH"),e=_("c0lT"),i=_("APlK"),p=_("c+wO"),m=_("aN7R"),S=_("5z4m"),l=_("iTfj"),M=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,j=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function n(Nt){var wt=Nt.match(y);if(!wt)return"";var H="";return wt.sort(function(ht,dt){return ht=ht.split(":"),dt=dt.split(":"),Number(ht[0])-Number(dt[0])}),Object(l.each)(wt,function(ht){ht=ht.split(":"),H+='<stop offset="'+ht[0]+'" stop-color="'+ht[1]+'"></stop>'}),H}function s(Nt,wt){var H=M.exec(Nt),ht=Object(l.mod)(Object(l.toRadian)(parseFloat(H[1])),Math.PI*2),dt=H[2],yt,Mt;ht>=0&&ht<.5*Math.PI?(yt={x:0,y:0},Mt={x:1,y:1}):.5*Math.PI<=ht&&ht<Math.PI?(yt={x:1,y:0},Mt={x:0,y:1}):Math.PI<=ht&&ht<1.5*Math.PI?(yt={x:1,y:1},Mt={x:0,y:0}):(yt={x:0,y:1},Mt={x:1,y:0});var $=Math.tan(ht),lt=$*$,rt=(Mt.x-yt.x+$*(Mt.y-yt.y))/(lt+1)+yt.x,z=$*(Mt.x-yt.x+$*(Mt.y-yt.y))/(lt+1)+yt.y;wt.setAttribute("x1",yt.x),wt.setAttribute("y1",yt.y),wt.setAttribute("x2",rt),wt.setAttribute("y2",z),wt.innerHTML=n(dt)}function d(Nt,wt){var H=j.exec(Nt),ht=parseFloat(H[1]),dt=parseFloat(H[2]),yt=parseFloat(H[3]),Mt=H[4];wt.setAttribute("cx",ht),wt.setAttribute("cy",dt),wt.setAttribute("r",yt),wt.innerHTML=n(Mt)}var E=function(){function Nt(wt){this.cfg={};var H=null,ht=Object(l.uniqueId)("gradient_");return wt.toLowerCase()[0]==="l"?(H=Object(p.b)("linearGradient"),s(wt,H)):(H=Object(p.b)("radialGradient"),d(wt,H)),H.setAttribute("id",ht),this.el=H,this.id=ht,this.cfg=wt,this}return Nt.prototype.match=function(wt,H){return this.cfg===H},Nt}(),O=E,C={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},v={x:"-40%",y:"-40%",width:"200%",height:"200%"},x=function(){function Nt(wt){this.type="filter",this.cfg={},this.type="filter";var H=Object(p.b)("filter");return Object(l.each)(v,function(ht,dt){H.setAttribute(dt,ht)}),this.el=H,this.id=Object(l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=wt,this._parseShadow(wt,H),this}return Nt.prototype.match=function(wt,H){if(this.type!==wt)return!1;var ht=!0,dt=this.cfg;return Object(l.each)(Object.keys(dt),function(yt){if(dt[yt]!==H[yt])return ht=!1,!1}),ht},Nt.prototype.update=function(wt,H){var ht=this.cfg;return ht[C[wt]]=H,this._parseShadow(ht,this.el),this},Nt.prototype._parseShadow=function(wt,H){var ht=`<feDropShadow
      dx="`+(wt.dx||0)+`"
      dy="`+(wt.dy||0)+`"
      stdDeviation="`+(wt.blur?wt.blur/10:0)+`"
      flood-color="`+(wt.color?wt.color:"#000")+`"
      flood-opacity="`+(wt.opacity?wt.opacity:1)+`"
      />`;H.innerHTML=ht},Nt}(),T=x,N=function(){function Nt(wt,H){this.cfg={};var ht=Object(p.b)("marker"),dt=Object(l.uniqueId)("marker_");ht.setAttribute("id",dt);var yt=Object(p.b)("path");yt.setAttribute("stroke",wt.stroke||"none"),yt.setAttribute("fill",wt.fill||"none"),ht.appendChild(yt),ht.setAttribute("overflow","visible"),ht.setAttribute("orient","auto-start-reverse"),this.el=ht,this.child=yt,this.id=dt;var Mt=wt[H==="marker-start"?"startArrow":"endArrow"];return this.stroke=wt.stroke||"#000",Mt===!0?this._setDefaultPath(H,yt):(this.cfg=Mt,this._setMarker(wt.lineWidth,yt)),this}return Nt.prototype.match=function(){return!1},Nt.prototype._setDefaultPath=function(wt,H){var ht=this.el;H.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ht.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ht.setAttribute("refY",""+5)},Nt.prototype._setMarker=function(wt,H){var ht=this.el,dt=this.cfg.path,yt=this.cfg.d;Object(l.isArray)(dt)&&(dt=dt.map(function(Mt){return Mt.join(" ")}).join("")),H.setAttribute("d",dt),ht.appendChild(H),yt&&ht.setAttribute("refX",""+yt/wt)},Nt.prototype.update=function(wt){var H=this.child;H.attr?H.attr("fill",wt):H.setAttribute("fill",wt)},Nt}(),X=N,tt=function(){function Nt(wt){this.type="clip",this.cfg={};var H=Object(p.b)("clipPath");this.el=H,this.id=Object(l.uniqueId)("clip_"),H.id=this.id;var ht=wt.cfg.el;return H.appendChild(ht),this.cfg=wt,this}return Nt.prototype.match=function(){return!1},Nt.prototype.remove=function(){var wt=this.el;wt.parentNode.removeChild(wt)},Nt}(),nt=tt,vt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ft=function(){function Nt(wt){this.cfg={};var H=Object(p.b)("pattern");H.setAttribute("patternUnits","userSpaceOnUse");var ht=Object(p.b)("image");H.appendChild(ht);var dt=Object(l.uniqueId)("pattern_");H.id=dt,this.el=H,this.id=dt,this.cfg=wt;var yt=vt.exec(wt),Mt=yt[2];ht.setAttribute("href",Mt);var $=new Image;Mt.match(/^data:/i)||($.crossOrigin="Anonymous"),$.src=Mt;function lt(){H.setAttribute("width",""+$.width),H.setAttribute("height",""+$.height)}return $.complete?lt():($.onload=lt,$.src=$.src),this}return Nt.prototype.match=function(wt,H){return this.cfg===H},Nt}(),bt=ft,St=function(){function Nt(wt){var H=Object(p.b)("defs"),ht=Object(l.uniqueId)("defs_");H.id=ht,wt.appendChild(H),this.children=[],this.defaultArrow={},this.el=H,this.canvas=wt}return Nt.prototype.find=function(wt,H){for(var ht=this.children,dt=null,yt=0;yt<ht.length;yt++)if(ht[yt].match(wt,H)){dt=ht[yt].id;break}return dt},Nt.prototype.findById=function(wt){for(var H=this.children,ht=null,dt=0;dt<H.length;dt++)if(H[dt].id===wt){ht=H[dt];break}return ht},Nt.prototype.add=function(wt){this.children.push(wt),wt.canvas=this.canvas,wt.parent=this},Nt.prototype.getDefaultArrow=function(wt,H){var ht=wt.stroke||wt.strokeStyle;if(this.defaultArrow[ht])return this.defaultArrow[ht].id;var dt=new X(wt,H);return this.defaultArrow[ht]=dt,this.el.appendChild(dt.el),this.add(dt),dt.id},Nt.prototype.addGradient=function(wt){var H=new O(wt);return this.el.appendChild(H.el),this.add(H),H.id},Nt.prototype.addArrow=function(wt,H){var ht=new X(wt,H);return this.el.appendChild(ht.el),this.add(ht),ht.id},Nt.prototype.addShadow=function(wt){var H=new T(wt);return this.el.appendChild(H.el),this.add(H),H.id},Nt.prototype.addPattern=function(wt){var H=new bt(wt);return this.el.appendChild(H.el),this.add(H),H.id},Nt.prototype.addClip=function(wt){var H=new nt(wt);return this.el.appendChild(H.el),this.add(H),H.id},Nt}(),pt=St,ct=function(Nt){Object(at.b)(wt,Nt);function wt(H){return Nt.call(this,Object(at.a)(Object(at.a)({},H),{autoDraw:!0,renderer:"svg"}))||this}return wt.prototype.getShapeBase=function(){return m},wt.prototype.getGroupBase=function(){return S.a},wt.prototype.getShape=function(H,ht,dt){var yt=dt.target||dt.srcElement;if(!A.a[yt.tagName]){for(var Mt=yt.parentNode;Mt&&!A.a[Mt.tagName];)Mt=Mt.parentNode;yt=Mt}return this.find(function($){return $.get("el")===yt})},wt.prototype.createDom=function(){var H=Object(p.b)("svg"),ht=new pt(H);return H.setAttribute("width",""+this.get("width")),H.setAttribute("height",""+this.get("height")),this.set("context",ht),H},wt.prototype.onCanvasChange=function(H){var ht=this.get("context"),dt=this.get("el");if(H==="sort"){var yt=this.get("children");yt&&yt.length&&Object(p.d)(this,function($,lt){return yt.indexOf($)-yt.indexOf(lt)?1:0})}else if(H==="clear"){if(dt){dt.innerHTML="";var Mt=ht.el;Mt.innerHTML="",dt.appendChild(Mt)}}else H==="matrix"?Object(i.c)(this):H==="clip"?Object(i.a)(this,ht):H==="changeSize"&&(dt.setAttribute("width",""+this.get("width")),dt.setAttribute("height",""+this.get("height")))},wt.prototype.draw=function(){var H=this.get("context"),ht=this.getChildren();Object(i.a)(this,H),ht.length&&Object(e.a)(H,ht)},wt}(a.AbstractCanvas),zt=Gt.a=ct},wq2r:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("aFU3"),A=_("R5nb"),e=_("9eUa"),i=_("iTfj"),p=_("cyZq"),m=function(S){Object(at.b)(l,S);function l(){return S!==null&&S.apply(this,arguments)||this}return l.prototype.onCanvasChange=function(M){Object(e.h)(this,M)},l.prototype.getShapeBase=function(){return A},l.prototype.getGroupBase=function(){return l},l.prototype._applyClip=function(M,j){j&&(M.save(),Object(e.a)(M,j),j.createPath(M),M.restore(),M.clip(),j._afterDraw())},l.prototype.cacheCanvasBBox=function(){var M=this.cfg.children,j=[],y=[];Object(i.each)(M,function(x){var T=x.cfg.cacheCanvasBBox;T&&x.cfg.isInView&&(j.push(T.minX,T.maxX),y.push(T.minY,T.maxY))});var n=null;if(j.length){var s=Math.min.apply(null,j),d=Math.max.apply(null,j),E=Math.min.apply(null,y),O=Math.max.apply(null,y);n={minX:s,minY:E,x:s,y:E,maxX:d,maxY:O,width:d-s,height:O-E};var C=this.cfg.canvas;if(C){var v=C.getViewRange();this.set("isInView",Object(p.f)(n,v))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},l.prototype.draw=function(M,j){var y=this.cfg.children,n=j?this.cfg.refresh:!0;y.length&&n&&(M.save(),Object(e.a)(M,this),this._applyClip(M,this.getClip()),Object(e.d)(M,y,j),M.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},l.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},l}(a.AbstractGroup);Gt.a=m},wy8a:function(Gn,Gt,_){var at=_("KxBF");function a(A,e,i){var p=A.length;return i=i===void 0?p:i,!e&&i>=p?A:at(A,e,i)}Gn.exports=a},x3EW:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return p}),_.d(Gt,"Circle",function(){return l}),_.d(Gt,"Line",function(){return j});var at=_("mrSG"),a=_("iTfj"),A=_("MeYt"),e=_("L16w"),i=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:e.a.lineColor}}}})},n.prototype.getLineType=function(){var s=this.get("line")||this.get("defaultCfg").line;return s.type},n.prototype.renderInner=function(s){this.drawGrid(s)},n.prototype.getAlternatePath=function(s,d){var E=this.getGridPath(s),O=d.slice(0).reverse(),C=this.getGridPath(O,!0),v=this.get("closed");return v?E=E.concat(C):(C[0][0]="L",E=E.concat(C),E.push(["Z"])),E},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(s){var d=this,E=this.get("line"),O=this.get("items"),C=this.get("alternateColor"),v=null;Object(a.each)(O,function(x,T){var N=x.id||T;if(E){var X=d.getPathStyle();X=Object(a.isFunction)(X)?X(x,T,O):X;var tt=d.getElementId("line-"+N),nt=d.getGridPath(x.points);d.addShape(s,{type:"path",name:"grid-line",id:tt,attrs:Object(a.mix)({path:nt},X)})}if(C&&T>0){var vt=d.getElementId("region-"+N),ft=T%2==0;if(Object(a.isString)(C))ft&&d.drawAlternateRegion(vt,s,v.points,x.points,C);else{var bt=ft?C[1]:C[0];d.drawAlternateRegion(vt,s,v.points,x.points,bt)}}v=x})},n.prototype.drawAlternateRegion=function(s,d,E,O,C){var v=this.getAlternatePath(E,O);this.addShape(d,{type:"path",id:s,name:"grid-region",attrs:{path:v,fill:C}})},n}(A.a),p=i;function m(y,n,s,d){var E=s-y,O=d-n;return Math.sqrt(E*E+O*O)}var S=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(s,d){var E=this.getLineType(),O=this.get("closed"),C=[];if(s.length)if(E==="circle"){var v=this.get("center"),x=s[0],T=m(v.x,v.y,x.x,x.y),N=d?0:1;O?(C.push(["M",v.x,v.y-T]),C.push(["A",T,T,0,0,N,v.x,v.y+T]),C.push(["A",T,T,0,0,N,v.x,v.y-T]),C.push(["Z"])):Object(a.each)(s,function(X,tt){tt===0?C.push(["M",X.x,X.y]):C.push(["A",T,T,0,0,N,X.x,X.y])})}else Object(a.each)(s,function(X,tt){tt===0?C.push(["M",X.x,X.y]):C.push(["L",X.x,X.y])}),O&&C.push(["Z"]);return C},n}(p),l=S,M=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"line"})},n.prototype.getGridPath=function(s){var d=[];return Object(a.each)(s,function(E,O){O===0?d.push(["M",E.x,E.y]):d.push(["L",E.x,E.y])}),d},n}(p),j=M},y753:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return E});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("w02o"),i=_("tKoa");function p(O){var C=O.chart,v=O.options,x=v.data,T=v.lineStyle,N=v.color,X=v.point,tt=v.area;C.data(x);var nt=Object(A.b)({},O,{options:{line:{style:T,color:N},point:X&&Object(at.a)({color:N},X),area:tt&&Object(at.a)({color:N},tt),label:void 0}}),vt=Object(A.b)({},nt,{options:{tooltip:!1}});return Object(i.d)(nt),Object(i.e)(vt),Object(i.a)(vt),O}function m(O){var C,v=O.options,x=v.xAxis,T=v.yAxis,N=v.xField,X=v.yField;return Object(A.e)(Object(e.f)((C={},C[N]=x,C[X]=T,C)))(O)}function S(O){var C=O.chart,v=O.options,x=v.radius;return C.coordinate("polar",{radius:x}),O}function l(O){var C=O.chart,v=O.options,x=v.xField,T=v.xAxis,N=v.yField,X=v.yAxis;return C.axis(x,T),C.axis(N,X),O}function M(O){var C=O.chart,v=O.options,x=v.label,T=v.yField,N=Object(A.c)(C,"line");if(!x)N.label(!1);else{var X=x.callback,tt=Object(at.c)(x,["callback"]);N.label({fields:[T],callback:X,cfg:Object(A.o)(tt)})}return O}function j(O){return Object(A.e)(p,m,e.j,S,l,e.d,e.k,M,e.c,e.a,Object(e.b)())(O)}var y=_("kXyF"),n=_("iTfj"),s=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return Object.defineProperty(C.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),C.prototype.getTooltipItems=function(v){var x=this.getTooltipCfg(),T=x.shared,N=x.title,X=O.prototype.getTooltipItems.call(this,v);if(X.length>0){var tt=this.view.geometries[0],nt=tt.dataArray,vt=X[0].name,ft=[];return nt.forEach(function(bt){bt.forEach(function(St){var pt=y.Util.getTooltipItems(St,tt),ct=pt[0];if(!T&&ct&&ct.name===vt){var zt=Object(n.isNil)(N)?vt:N;ft.push(Object(at.a)(Object(at.a)({},ct),{name:ct.title,title:zt}))}else if(T&&ct){var zt=Object(n.isNil)(N)?ct.name||vt:N;ft.push(Object(at.a)(Object(at.a)({},ct),{name:ct.title,title:zt}))}})}),ft}return[]},C}(y.TooltipController);Object(y.registerComponentController)("radar-tooltip",s);var d=function(O){Object(at.b)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.init=function(){var v=this.context.view;v.removeInteraction("tooltip")},C.prototype.show=function(){var v=this.context.event,x=this.getTooltipController();x.showTooltip({x:v.x,y:v.y})},C.prototype.hide=function(){var v=this.getTooltipController();v.hideTooltip()},C.prototype.getTooltipController=function(){var v=this.context.view;return v.getController("radar-tooltip")},C}(y.Action);Object(y.registerAction)("radar-tooltip",d),Object(y.registerInteraction)("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var E=function(O){Object(at.b)(C,O);function C(){var v=O!==null&&O.apply(this,arguments)||this;return v.type="radar",v}return C.prototype.changeData=function(v){this.updateOption({data:v}),this.chart.changeData(v)},C.prototype.getDefaultOptions=function(){return Object(A.b)({},O.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},C.prototype.getSchemaAdaptor=function(){return j},C}(a.a)},yU0y:function(Gn,Gt,_){"use strict";_.d(Gt,"b",function(){return at}),_.d(Gt,"a",function(){return a}),_.d(Gt,"c",function(){return A});var at=1e-6,a=typeof Float32Array!="undefined"?Float32Array:Array,A=Math.random;function e(S){a=S}var i=Math.PI/180;function p(S){return S*i}function m(S,l){return Math.abs(S-l)<=at*Math.max(1,Math.abs(S),Math.abs(l))}Math.hypot||(Math.hypot=function(){for(var S=0,l=arguments.length;l--;)S+=arguments[l]*arguments[l];return Math.sqrt(S)})},yUfG:function(Gn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"cluster",function(){return S}),_.d(Gt,"hierarchy",function(){return l.c}),_.d(Gt,"pack",function(){return pt}),_.d(Gt,"packSiblings",function(){return vt}),_.d(Gt,"packEnclose",function(){return y}),_.d(Gt,"partition",function(){return wt.a}),_.d(Gt,"stratify",function(){return Mt}),_.d(Gt,"tree",function(){return g}),_.d(Gt,"treemap",function(){return B.a}),_.d(Gt,"treemapBinary",function(){return V}),_.d(Gt,"treemapDice",function(){return q.a}),_.d(Gt,"treemapSlice",function(){return it.a}),_.d(Gt,"treemapSliceDice",function(){return ot}),_.d(Gt,"treemapSquarify",function(){return At.a}),_.d(Gt,"treemapResquarify",function(){return gt});function at(mt,Ot){return mt.parent===Ot.parent?1:2}function a(mt){return mt.reduce(A,0)/mt.length}function A(mt,Ot){return mt+Ot.x}function e(mt){return 1+mt.reduce(i,0)}function i(mt,Ot){return Math.max(mt,Ot.y)}function p(mt){for(var Ot;Ot=mt.children;)mt=Ot[0];return mt}function m(mt){for(var Ot;Ot=mt.children;)mt=Ot[Ot.length-1];return mt}var S=function(){var mt=at,Ot=1,It=1,Dt=!1;function Ut(Ct){var Vt,Ht=0;Ct.eachAfter(function(Ne){var Ke=Ne.children;Ke?(Ne.x=a(Ke),Ne.y=e(Ke)):(Ne.x=Vt?Ht+=mt(Ne,Vt):0,Ne.y=0,Vt=Ne)});var re=p(Ct),pe=m(Ct),ye=re.x-mt(re,pe)/2,we=pe.x+mt(pe,re)/2;return Ct.eachAfter(Dt?function(Ne){Ne.x=(Ne.x-Ct.x)*Ot,Ne.y=(Ct.y-Ne.y)*It}:function(Ne){Ne.x=(Ne.x-ye)/(we-ye)*Ot,Ne.y=(1-(Ct.y?Ne.y/Ct.y:1))*It})}return Ut.separation=function(Ct){return arguments.length?(mt=Ct,Ut):mt},Ut.size=function(Ct){return arguments.length?(Dt=!1,Ot=+Ct[0],It=+Ct[1],Ut):Dt?null:[Ot,It]},Ut.nodeSize=function(Ct){return arguments.length?(Dt=!0,Ot=+Ct[0],It=+Ct[1],Ut):Dt?[Ot,It]:null},Ut},l=_("a8tM"),M=function(mt){return typeof mt=="object"&&"length"in mt?mt:Array.from(mt)};function j(mt){for(var Ot=mt.length,It,Dt;Ot;)Dt=Math.random()*Ot--|0,It=mt[Ot],mt[Ot]=mt[Dt],mt[Dt]=It;return mt}var y=function(mt){for(var Ot=0,It=(mt=j(Array.from(mt))).length,Dt=[],Ut,Ct;Ot<It;)Ut=mt[Ot],Ct&&d(Ct,Ut)?++Ot:(Ct=O(Dt=n(Dt,Ut)),Ot=0);return Ct};function n(mt,Ot){var It,Dt;if(E(Ot,mt))return[Ot];for(It=0;It<mt.length;++It)if(s(Ot,mt[It])&&E(v(mt[It],Ot),mt))return[mt[It],Ot];for(It=0;It<mt.length-1;++It)for(Dt=It+1;Dt<mt.length;++Dt)if(s(v(mt[It],mt[Dt]),Ot)&&s(v(mt[It],Ot),mt[Dt])&&s(v(mt[Dt],Ot),mt[It])&&E(x(mt[It],mt[Dt],Ot),mt))return[mt[It],mt[Dt],Ot];throw new Error}function s(mt,Ot){var It=mt.r-Ot.r,Dt=Ot.x-mt.x,Ut=Ot.y-mt.y;return It<0||It*It<Dt*Dt+Ut*Ut}function d(mt,Ot){var It=mt.r-Ot.r+Math.max(mt.r,Ot.r,1)*1e-9,Dt=Ot.x-mt.x,Ut=Ot.y-mt.y;return It>0&&It*It>Dt*Dt+Ut*Ut}function E(mt,Ot){for(var It=0;It<Ot.length;++It)if(!d(mt,Ot[It]))return!1;return!0}function O(mt){switch(mt.length){case 1:return C(mt[0]);case 2:return v(mt[0],mt[1]);case 3:return x(mt[0],mt[1],mt[2])}}function C(mt){return{x:mt.x,y:mt.y,r:mt.r}}function v(mt,Ot){var It=mt.x,Dt=mt.y,Ut=mt.r,Ct=Ot.x,Vt=Ot.y,Ht=Ot.r,re=Ct-It,pe=Vt-Dt,ye=Ht-Ut,we=Math.sqrt(re*re+pe*pe);return{x:(It+Ct+re/we*ye)/2,y:(Dt+Vt+pe/we*ye)/2,r:(we+Ut+Ht)/2}}function x(mt,Ot,It){var Dt=mt.x,Ut=mt.y,Ct=mt.r,Vt=Ot.x,Ht=Ot.y,re=Ot.r,pe=It.x,ye=It.y,we=It.r,Ne=Dt-Vt,Ke=Dt-pe,pn=Ut-Ht,hn=Ut-ye,kn=re-Ct,Tn=we-Ct,Rn=Dt*Dt+Ut*Ut-Ct*Ct,Mn=Rn-Vt*Vt-Ht*Ht+re*re,Cn=Rn-pe*pe-ye*ye+we*we,_n=Ke*pn-Ne*hn,Kn=(pn*Cn-hn*Mn)/(_n*2)-Dt,tr=(hn*kn-pn*Tn)/_n,or=(Ke*Mn-Ne*Cn)/(_n*2)-Ut,nr=(Ne*Tn-Ke*kn)/_n,er=tr*tr+nr*nr-1,Sr=2*(Ct+Kn*tr+or*nr),Vr=Kn*Kn+or*or-Ct*Ct,ti=-(er?(Sr+Math.sqrt(Sr*Sr-4*er*Vr))/(2*er):Vr/Sr);return{x:Dt+Kn+tr*ti,y:Ut+or+nr*ti,r:ti}}function T(mt,Ot,It){var Dt=mt.x-Ot.x,Ut,Ct,Vt=mt.y-Ot.y,Ht,re,pe=Dt*Dt+Vt*Vt;pe?(Ct=Ot.r+It.r,Ct*=Ct,re=mt.r+It.r,re*=re,Ct>re?(Ut=(pe+re-Ct)/(2*pe),Ht=Math.sqrt(Math.max(0,re/pe-Ut*Ut)),It.x=mt.x-Ut*Dt-Ht*Vt,It.y=mt.y-Ut*Vt+Ht*Dt):(Ut=(pe+Ct-re)/(2*pe),Ht=Math.sqrt(Math.max(0,Ct/pe-Ut*Ut)),It.x=Ot.x+Ut*Dt-Ht*Vt,It.y=Ot.y+Ut*Vt+Ht*Dt)):(It.x=Ot.x+It.r,It.y=Ot.y)}function N(mt,Ot){var It=mt.r+Ot.r-1e-6,Dt=Ot.x-mt.x,Ut=Ot.y-mt.y;return It>0&&It*It>Dt*Dt+Ut*Ut}function X(mt){var Ot=mt._,It=mt.next._,Dt=Ot.r+It.r,Ut=(Ot.x*It.r+It.x*Ot.r)/Dt,Ct=(Ot.y*It.r+It.y*Ot.r)/Dt;return Ut*Ut+Ct*Ct}function tt(mt){this._=mt,this.next=null,this.previous=null}function nt(mt){if(!(Ut=(mt=M(mt)).length))return 0;var Ot,It,Dt,Ut,Ct,Vt,Ht,re,pe,ye,we;if(Ot=mt[0],Ot.x=0,Ot.y=0,!(Ut>1))return Ot.r;if(It=mt[1],Ot.x=-It.r,It.x=Ot.r,It.y=0,!(Ut>2))return Ot.r+It.r;T(It,Ot,Dt=mt[2]),Ot=new tt(Ot),It=new tt(It),Dt=new tt(Dt),Ot.next=Dt.previous=It,It.next=Ot.previous=Dt,Dt.next=It.previous=Ot;t:for(Ht=3;Ht<Ut;++Ht){T(Ot._,It._,Dt=mt[Ht]),Dt=new tt(Dt),re=It.next,pe=Ot.previous,ye=It._.r,we=Ot._.r;do if(ye<=we){if(N(re._,Dt._)){It=re,Ot.next=It,It.previous=Ot,--Ht;continue t}ye+=re._.r,re=re.next}else{if(N(pe._,Dt._)){Ot=pe,Ot.next=It,It.previous=Ot,--Ht;continue t}we+=pe._.r,pe=pe.previous}while(re!==pe.next);for(Dt.previous=Ot,Dt.next=It,Ot.next=It.previous=It=Dt,Ct=X(Ot);(Dt=Dt.next)!==It;)(Vt=X(Dt))<Ct&&(Ot=Dt,Ct=Vt);It=Ot.next}for(Ot=[It._],Dt=It;(Dt=Dt.next)!==It;)Ot.push(Dt._);for(Dt=y(Ot),Ht=0;Ht<Ut;++Ht)Ot=mt[Ht],Ot.x-=Dt.x,Ot.y-=Dt.y;return Dt.r}var vt=function(mt){return nt(mt),mt},ft=_("IeU1"),bt=_("CSvP");function St(mt){return Math.sqrt(mt.value)}var pt=function(){var mt=null,Ot=1,It=1,Dt=bt.a;function Ut(Ct){return Ct.x=Ot/2,Ct.y=It/2,mt?Ct.eachBefore(ct(mt)).eachAfter(zt(Dt,.5)).eachBefore(Nt(1)):Ct.eachBefore(ct(St)).eachAfter(zt(bt.a,1)).eachAfter(zt(Dt,Ct.r/Math.min(Ot,It))).eachBefore(Nt(Math.min(Ot,It)/(2*Ct.r))),Ct}return Ut.radius=function(Ct){return arguments.length?(mt=Object(ft.a)(Ct),Ut):mt},Ut.size=function(Ct){return arguments.length?(Ot=+Ct[0],It=+Ct[1],Ut):[Ot,It]},Ut.padding=function(Ct){return arguments.length?(Dt=typeof Ct=="function"?Ct:Object(bt.b)(+Ct),Ut):Dt},Ut};function ct(mt){return function(Ot){Ot.children||(Ot.r=Math.max(0,+mt(Ot)||0))}}function zt(mt,Ot){return function(It){if(Dt=It.children){var Dt,Ut,Ct=Dt.length,Vt=mt(It)*Ot||0,Ht;if(Vt)for(Ut=0;Ut<Ct;++Ut)Dt[Ut].r+=Vt;if(Ht=nt(Dt),Vt)for(Ut=0;Ut<Ct;++Ut)Dt[Ut].r-=Vt;It.r=Ht+Vt}}}function Nt(mt){return function(Ot){var It=Ot.parent;Ot.r*=mt,It&&(Ot.x=It.x+mt*Ot.x,Ot.y=It.y+mt*Ot.y)}}var wt=_("+Nd1"),H={depth:-1},ht={};function dt(mt){return mt.id}function yt(mt){return mt.parentId}var Mt=function(){var mt=dt,Ot=yt;function It(Dt){var Ut=Array.from(Dt),Ct=Ut.length,Vt,Ht,re,pe,ye,we,Ne,Ke=new Map;for(Ht=0;Ht<Ct;++Ht)Vt=Ut[Ht],ye=Ut[Ht]=new l.a(Vt),(we=mt(Vt,Ht,Dt))!=null&&(we+="")&&(Ne=ye.id=we,Ke.set(Ne,Ke.has(Ne)?ht:ye)),(we=Ot(Vt,Ht,Dt))!=null&&(we+="")&&(ye.parent=we);for(Ht=0;Ht<Ct;++Ht)if(ye=Ut[Ht],we=ye.parent){if(pe=Ke.get(we),!pe)throw new Error("missing: "+we);if(pe===ht)throw new Error("ambiguous: "+we);pe.children?pe.children.push(ye):pe.children=[ye],ye.parent=pe}else{if(re)throw new Error("multiple roots");re=ye}if(!re)throw new Error("no root");if(re.parent=H,re.eachBefore(function(pn){pn.depth=pn.parent.depth+1,--Ct}).eachBefore(l.b),re.parent=null,Ct>0)throw new Error("cycle");return re}return It.id=function(Dt){return arguments.length?(mt=Object(ft.b)(Dt),It):mt},It.parentId=function(Dt){return arguments.length?(Ot=Object(ft.b)(Dt),It):Ot},It};function $(mt,Ot){return mt.parent===Ot.parent?1:2}function lt(mt){var Ot=mt.children;return Ot?Ot[0]:mt.t}function rt(mt){var Ot=mt.children;return Ot?Ot[Ot.length-1]:mt.t}function z(mt,Ot,It){var Dt=It/(Ot.i-mt.i);Ot.c-=Dt,Ot.s+=It,mt.c+=Dt,Ot.z+=It,Ot.m+=It}function P(mt){for(var Ot=0,It=0,Dt=mt.children,Ut=Dt.length,Ct;--Ut>=0;)Ct=Dt[Ut],Ct.z+=Ot,Ct.m+=Ot,Ot+=Ct.s+(It+=Ct.c)}function Y(mt,Ot,It){return mt.a.parent===Ot.parent?mt.a:It}function k(mt,Ot){this._=mt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ot}k.prototype=Object.create(l.a.prototype);function h(mt){for(var Ot=new k(mt,0),It,Dt=[Ot],Ut,Ct,Vt,Ht;It=Dt.pop();)if(Ct=It._.children)for(It.children=new Array(Ht=Ct.length),Vt=Ht-1;Vt>=0;--Vt)Dt.push(Ut=It.children[Vt]=new k(Ct[Vt],Vt)),Ut.parent=It;return(Ot.parent=new k(null,0)).children=[Ot],Ot}var g=function(){var mt=$,Ot=1,It=1,Dt=null;function Ut(pe){var ye=h(pe);if(ye.eachAfter(Ct),ye.parent.m=-ye.z,ye.eachBefore(Vt),Dt)pe.eachBefore(re);else{var we=pe,Ne=pe,Ke=pe;pe.eachBefore(function(Rn){Rn.x<we.x&&(we=Rn),Rn.x>Ne.x&&(Ne=Rn),Rn.depth>Ke.depth&&(Ke=Rn)});var pn=we===Ne?1:mt(we,Ne)/2,hn=pn-we.x,kn=Ot/(Ne.x+pn+hn),Tn=It/(Ke.depth||1);pe.eachBefore(function(Rn){Rn.x=(Rn.x+hn)*kn,Rn.y=Rn.depth*Tn})}return pe}function Ct(pe){var ye=pe.children,we=pe.parent.children,Ne=pe.i?we[pe.i-1]:null;if(ye){P(pe);var Ke=(ye[0].z+ye[ye.length-1].z)/2;Ne?(pe.z=Ne.z+mt(pe._,Ne._),pe.m=pe.z-Ke):pe.z=Ke}else Ne&&(pe.z=Ne.z+mt(pe._,Ne._));pe.parent.A=Ht(pe,Ne,pe.parent.A||we[0])}function Vt(pe){pe._.x=pe.z+pe.parent.m,pe.m+=pe.parent.m}function Ht(pe,ye,we){if(ye){for(var Ne=pe,Ke=pe,pn=ye,hn=Ne.parent.children[0],kn=Ne.m,Tn=Ke.m,Rn=pn.m,Mn=hn.m,Cn;pn=rt(pn),Ne=lt(Ne),pn&&Ne;)hn=lt(hn),Ke=rt(Ke),Ke.a=pe,Cn=pn.z+Rn-Ne.z-kn+mt(pn._,Ne._),Cn>0&&(z(Y(pn,pe,we),pe,Cn),kn+=Cn,Tn+=Cn),Rn+=pn.m,kn+=Ne.m,Mn+=hn.m,Tn+=Ke.m;pn&&!rt(Ke)&&(Ke.t=pn,Ke.m+=Rn-Tn),Ne&&!lt(hn)&&(hn.t=Ne,hn.m+=kn-Mn,we=pe)}return we}function re(pe){pe.x*=Ot,pe.y=pe.depth*It}return Ut.separation=function(pe){return arguments.length?(mt=pe,Ut):mt},Ut.size=function(pe){return arguments.length?(Dt=!1,Ot=+pe[0],It=+pe[1],Ut):Dt?null:[Ot,It]},Ut.nodeSize=function(pe){return arguments.length?(Dt=!0,Ot=+pe[0],It=+pe[1],Ut):Dt?[Ot,It]:null},Ut},B=_("tvR+"),V=function(mt,Ot,It,Dt,Ut){var Ct=mt.children,Vt,Ht=Ct.length,re,pe=new Array(Ht+1);for(pe[0]=re=Vt=0;Vt<Ht;++Vt)pe[Vt+1]=re+=Ct[Vt].value;ye(0,Ht,mt.value,Ot,It,Dt,Ut);function ye(we,Ne,Ke,pn,hn,kn,Tn){if(we>=Ne-1){var Rn=Ct[we];Rn.x0=pn,Rn.y0=hn,Rn.x1=kn,Rn.y1=Tn;return}for(var Mn=pe[we],Cn=Ke/2+Mn,_n=we+1,Kn=Ne-1;_n<Kn;){var tr=_n+Kn>>>1;pe[tr]<Cn?_n=tr+1:Kn=tr}Cn-pe[_n-1]<pe[_n]-Cn&&we+1<_n&&--_n;var or=pe[_n]-Mn,nr=Ke-or;if(kn-pn>Tn-hn){var er=Ke?(pn*nr+kn*or)/Ke:kn;ye(we,_n,or,pn,hn,er,Tn),ye(_n,Ne,nr,er,hn,kn,Tn)}else{var Sr=Ke?(hn*nr+Tn*or)/Ke:Tn;ye(we,_n,or,pn,hn,kn,Sr),ye(_n,Ne,nr,pn,Sr,kn,Tn)}}},q=_("FPPI"),it=_("7IPS"),ot=function(mt,Ot,It,Dt,Ut){(mt.depth&1?it.a:q.a)(mt,Ot,It,Dt,Ut)},At=_("I4jL"),gt=function mt(Ot){function It(Dt,Ut,Ct,Vt,Ht){if((re=Dt._squarify)&&re.ratio===Ot)for(var re,pe,ye,we,Ne=-1,Ke,pn=re.length,hn=Dt.value;++Ne<pn;){for(pe=re[Ne],ye=pe.children,we=pe.value=0,Ke=ye.length;we<Ke;++we)pe.value+=ye[we].value;pe.dice?Object(q.a)(pe,Ut,Ct,Vt,hn?Ct+=(Ht-Ct)*pe.value/hn:Ht):Object(it.a)(pe,Ut,Ct,hn?Ut+=(Vt-Ut)*pe.value/hn:Vt,Ht),hn-=pe.value}else Dt._squarify=re=Object(At.c)(Ot,Dt,Ut,Ct,Vt,Ht),re.ratio=Ot}return It.ratio=function(Dt){return mt((Dt=+Dt)>1?Dt:1)},It}(At.b)},ycre:function(Gn,Gt,_){var at=_("711d"),a=at("length");Gn.exports=a},yqCL:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return ht});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("w02o"),p=_("sqD9"),m=_("4Olw"),S;(function(dt){dt.Left="Left",dt.Right="Right"})(S||(S={}));var l;(function(dt){dt.Line="line",dt.Column="column"})(l||(l={}));var M="left-axes-view",j="right-axes-view",y={nice:!0,label:{autoHide:!0,autoRotate:!1}},n=Object(at.a)(Object(at.a)({},y),{position:"left"}),s=Object(at.a)(Object(at.a)({},y),{position:"right",grid:null});function d(dt){return Object(e.get)(dt,"geometry")===l.Line}function E(dt){return Object(e.get)(dt,"geometry")===l.Column}function O(dt,yt,Mt){return E(Mt)?Object(A.b)({},{geometry:l.Column,label:Mt.label&&Mt.isRange?{content:function(lt){var rt;return(rt=lt[yt])===null||rt===void 0?void 0:rt.join("-")}}:void 0},Mt):Object(at.a)({geometry:l.Line},Mt)}function C(dt,yt){var Mt=dt[0],$=dt[1];if(Object(e.isArray)(yt)){var lt=yt[0],rt=yt[1];return[lt,rt]}var z=Object(e.get)(yt,Mt),P=Object(e.get)(yt,$);return[z,P]}function v(dt,yt){return yt===S.Left?dt===!1?!1:Object(A.b)({},n,dt):yt===S.Right?dt===!1?!1:Object(A.b)({},s,dt):dt}var x=_("kXyF");function T(dt){var yt=dt.view,Mt=dt.geometryOption,$=dt.yField,lt=dt.legend,rt=Object(e.get)(lt,"marker"),z=Object(A.c)(yt,d(Mt)?"line":"interval");if(!Mt.seriesField){var P=z.getAttribute("color"),Y=P.values[0],k=rt||(d(Mt)?{symbol:function(B,V,q){return[["M",B-q,V],["L",B+q,V]]},style:{lineWidth:2,r:6,stroke:Y}}:{symbol:"square",style:{fill:Y}});return[{value:$,name:Object(e.get)(yt,"options.scales."+$+".alias")||$,marker:k,isGeometry:!0,viewId:yt.id}]}var h=z.getGroupAttributes();return Object(e.reduce)(h,function(g,B){var V=x.Util.getLegendItems(yt,z,B,yt.getTheme(),rt);return g.concat(V)},[])}var N=_("tKoa");function X(dt){var yt=dt.options,Mt=dt.chart,$=yt.geometryOption,lt=$.isStack,rt=$.color,z=$.seriesField,P=$.groupField,Y=$.isGroup,k=["xField","yField"];if(d($)){Object(N.d)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(yt,k)),$),{line:{color:$.color,style:$.lineStyle}})})),Object(N.e)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(yt,k)),$),{point:$.point&&Object(at.a)({color:rt,shape:"circle"},$.point)})}));var h=[];Y&&h.push({type:"dodge",dodgeBy:P||z,customOffset:0}),lt&&h.push({type:"stack"}),h.length&&Object(e.each)(Mt.geometries,function(g){g.adjust(h)})}return E($)&&Object(N.c)(Object(A.b)({},dt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(yt,k)),$),{widthRatio:$.columnWidthRatio,interval:Object(at.a)(Object(at.a)({},Object(A.k)($,["color"])),{style:$.columnStyle})})})),dt}function tt(dt){var yt,Mt=dt.options,$=Mt.geometryOptions,lt=$===void 0?[]:$,rt=Mt.xField,z=Mt.yField,P=Object(e.every)(lt,function(Y){var k=Y.geometry;return k===l.Line||k===void 0});return Object(A.b)({},{options:{geometryOptions:[],meta:(yt={},yt[rt]={type:"cat",sync:!0,range:P?[0,1]:void 0},yt),tooltip:{showMarkers:P,showCrosshairs:P,shared:!0,crosshairs:{type:"x"}},interactions:P?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},dt,{options:{yAxis:C(z,Mt.yAxis),geometryOptions:[O(rt,z[0],lt[0]),O(rt,z[1],lt[1])],annotations:C(z,Mt.annotations)}})}function nt(dt){var yt=dt.chart,Mt=dt.options,$=Mt.xField,lt=Mt.yField,rt=Mt.geometryOptions,z=Mt.data,P=Mt.tooltip,Y={line:0,column:1},k=[Object(at.a)(Object(at.a)({},rt[0]),{id:M,data:z[0],yField:lt[0]}),Object(at.a)(Object(at.a)({},rt[1]),{id:j,data:z[1],yField:lt[1]})];return k.sort(function(h,g){return-Y[h.geometry]+Y[g.geometry]}).forEach(function(h){var g=h.id,B=h.data,V=h.yField,q=E(h)&&h.isPercent,it=q?Object(p.b)(B,V,$,V):B,ot=yt.createView({id:g}).data(it),At=q?Object(at.a)({formatter:function(mt){return{name:mt[h.seriesField]||V,value:(Number(mt[V])*100).toFixed(2)+"%"}}},P):P;X({chart:ot,options:{xField:$,yField:V,tooltip:At,geometryOption:h}})}),dt}function vt(dt){var yt,Mt=dt.chart,$=dt.options,lt=$.geometryOptions,rt=((yt=Mt.getTheme())===null||yt===void 0?void 0:yt.colors10)||[],z=0;return Mt.once("beforepaint",function(){Object(e.each)(lt,function(P,Y){var k=Object(m.a)(Mt,Y===0?M:j);if(!P.color){var h=k.getGroupScales(),g=Object(e.get)(h,[0,"values","length"],1),B=rt.slice(z,z+g).concat(Y===0?[]:rt);k.geometries.forEach(function(V){P.seriesField?V.color(P.seriesField,B):V.color(B[0])}),z+=g}}),Mt.render(!0)}),dt}function ft(dt){var yt,Mt,$=dt.chart,lt=dt.options,rt=lt.xAxis,z=lt.yAxis,P=lt.xField,Y=lt.yField;return Object(i.f)((yt={},yt[P]=rt,yt[Y[0]]=z[0],yt))(Object(A.b)({},dt,{chart:Object(m.a)($,M)})),Object(i.f)((Mt={},Mt[P]=rt,Mt[Y[1]]=z[1],Mt))(Object(A.b)({},dt,{chart:Object(m.a)($,j)})),dt}function bt(dt){var yt=dt.chart,Mt=dt.options,$=Object(m.a)(yt,M),lt=Object(m.a)(yt,j),rt=Mt.xField,z=Mt.yField,P=Mt.xAxis,Y=Mt.yAxis;return yt.axis(rt,!1),yt.axis(z[0],!1),yt.axis(z[1],!1),$.axis(rt,P),$.axis(z[0],v(Y[0],S.Left)),lt.axis(rt,!1),lt.axis(z[1],v(Y[1],S.Right)),dt}function St(dt){var yt=dt.chart,Mt=dt.options,$=Mt.tooltip,lt=Object(m.a)(yt,M),rt=Object(m.a)(yt,j);return yt.tooltip($),lt.tooltip({shared:!0}),rt.tooltip({shared:!0}),dt}function pt(dt){var yt=dt.chart;return Object(i.c)(Object(A.b)({},dt,{chart:Object(m.a)(yt,M)})),Object(i.c)(Object(A.b)({},dt,{chart:Object(m.a)(yt,j)})),dt}function ct(dt){var yt=dt.chart,Mt=dt.options,$=Mt.annotations,lt=Object(e.get)($,[0]),rt=Object(e.get)($,[1]);return Object(i.b)(lt)(Object(A.b)({},dt,{chart:Object(m.a)(yt,M),options:{annotations:lt}})),Object(i.b)(rt)(Object(A.b)({},dt,{chart:Object(m.a)(yt,j),options:{annotations:rt}})),dt}function zt(dt){var yt=dt.chart;return Object(i.a)(Object(A.b)({},dt,{chart:Object(m.a)(yt,M)})),Object(i.a)(Object(A.b)({},dt,{chart:Object(m.a)(yt,j)})),dt}function Nt(dt){var yt=dt.chart,Mt=dt.options,$=Mt.yAxis;return Object(i.e)(Object(A.b)({},dt,{chart:Object(m.a)(yt,M),options:{yAxis:$[0]}})),Object(i.e)(Object(A.b)({},dt,{chart:Object(m.a)(yt,j),options:{yAxis:$[1]}})),dt}function wt(dt){var yt=dt.chart,Mt=dt.options,$=Mt.legend,lt=Mt.geometryOptions,rt=Mt.yField,z=Mt.data,P=Object(m.a)(yt,M),Y=Object(m.a)(yt,j);return $===!1?yt.legend(!1):Object(e.isObject)($)&&$.custom===!0?yt.legend($):(yt.once("beforepaint",function(){var k=z[0].length?T({view:P,geometryOption:lt[0],yField:rt[0],legend:$}):[],h=z[1].length?T({view:Y,geometryOption:lt[1],yField:rt[1],legend:$}):[];yt.legend(Object(A.b)({},$,{custom:!0,items:k.concat(h)}))}),yt.on("legend-item:click",function(k){var h=Object(e.get)(k,"gEvent.delegateObject",{});if(h&&h.item){var g=h.item,B=g.value,V=g.isGeometry,q=g.viewId;if(V){var it=Object(e.findIndex)(rt,function(gt){return gt===B});if(it>-1){var ot=Object(e.get)(Object(m.a)(yt,q),"geometries");Object(e.each)(ot,function(gt){gt.changeVisible(!h.item.unchecked)})}}else{var At=Object(e.get)(yt.getController("legend"),"option.items",[]);Object(e.each)(yt.views,function(gt){var mt=gt.getGroupScales();Object(e.each)(mt,function(Ot){Ot.values&&Ot.values.indexOf(B)>-1&&gt.filter(Ot.field,function(It){var Dt=Object(e.find)(At,function(Ut){return Ut.value===It});return!Dt.unchecked})}),yt.render(!0)})}}})),dt}function H(dt){return Object(A.e)(tt,nt,ft,bt,Nt,St,pt,ct,i.j,zt,vt,wt)(dt)}var ht=function(dt){Object(at.b)(yt,dt);function yt(){var Mt=dt!==null&&dt.apply(this,arguments)||this;return Mt.type="dual-axes",Mt}return yt.prototype.getDefaultOptions=function(){return Object(A.b)({},dt.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},yt.prototype.getSchemaAdaptor=function(){return H},yt}(a.a)},z4Vf:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return s});var at=_("mrSG"),a=_("zJSt"),A=_("YuPD"),e=_("iTfj"),i=_("w02o"),p=_("tKoa");function m(d){var E=d.chart,O=d.options,C=O.data,v=O.sectorStyle,x=O.color;return E.data(C),Object(A.e)(p.c)(Object(A.b)({},d,{options:{marginRatio:1,interval:{style:v,color:x}}})),d}function S(d){var E=d.chart,O=d.options,C=O.label,v=O.xField,x=Object(A.c)(E,"interval");if(C===!1)x.label(!1);else if(Object(e.isObject)(C)){var T=C.callback,N=C.fields,X=Object(at.c)(C,["callback","fields"]),tt=X.offset,nt=X.layout;(tt===void 0||tt>=0)&&(nt=nt?Object(e.isArray)(nt)?nt:[nt]:[],X.layout=Object(e.filter)(nt,function(vt){return vt.type!=="limit-in-shape"}),X.layout.length||delete X.layout),x.label({fields:N||[v],callback:T,cfg:Object(A.o)(X)})}else Object(A.j)(A.a.WARN,C===null,"the label option must be an Object."),x.label({fields:[v]});return d}function l(d){var E=d.chart,O=d.options,C=O.legend,v=O.seriesField;return C===!1?E.legend(!1):v&&E.legend(v,C),d}function M(d){var E=d.chart,O=d.options,C=O.radius,v=O.innerRadius;return E.coordinate({type:"polar",cfg:{radius:C,innerRadius:v}}),d}function j(d){var E,O=d.options,C=O.xAxis,v=O.yAxis,x=O.xField,T=O.yField;return Object(A.e)(Object(i.f)((E={},E[x]=C,E[T]=v,E)))(d)}function y(d){var E=d.chart,O=d.options,C=O.xAxis,v=O.yAxis,x=O.xField,T=O.yField;return C?E.axis(x,C):E.axis(x,!1),v?E.axis(T,v):E.axis(T,!1),d}function n(d){Object(A.e)(m,j,S,M,y,l,i.k,i.c,i.a,i.j,Object(i.b)(),i.i)(d)}var s=function(d){Object(at.b)(E,d);function E(){var O=d!==null&&d.apply(this,arguments)||this;return O.type="rose",O}return E.prototype.changeData=function(O){this.updateOption({data:O}),this.chart.changeData(O)},E.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},E.prototype.getSchemaAdaptor=function(){return n},E}(a.a)},zJSt:function(Gn,Gt,_){"use strict";_.d(Gt,"a",function(){return l});var at=_("mrSG"),a=_("kXyF"),A=_("iTfj"),e=_("f6Jy"),i=_("u3os"),p=_.n(i),m=_("YuPD"),S="data-chart-source-type",l=function(M){Object(at.b)(j,M);function j(y,n){var s=M.call(this)||this;return s.type="base",s.container=typeof y=="string"?document.getElementById(y):y,s.options=Object(m.b)({},s.getDefaultOptions(),n),s.createG2(),s.bindEvents(),s}return j.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},j.prototype.createG2=function(){var y=this.options,n=y.width,s=y.height,d=y.padding,E=y.appendPadding,O=y.renderer,C=y.pixelRatio,v=y.syncViewPadding,x=y.supportCSSTransform,T=y.limitInPlot;this.chart=new a.Chart(Object(at.a)(Object(at.a)({container:this.container,autoFit:!1},this.getChartSize(n,s)),{padding:d,appendPadding:E,renderer:O,pixelRatio:C,localRefresh:!1,syncViewPadding:v,supportCSSTransform:x,limitInPlot:T})),this.container.setAttribute(S,"G2Plot")},j.prototype.getChartSize=function(y,n){var s=Object(m.g)(this.container);return{width:y||s.width||400,height:n||s.height||400}},j.prototype.bindEvents=function(){var y=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&y.emit(n.type,n)})},j.prototype.getDefaultOptions=function(){return j.getDefaultOptions()},j.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},j.prototype.update=function(y){this.updateOption(y),this.render()},j.prototype.updateOption=function(y){this.options=Object(m.b)({},this.options,y)},j.prototype.setState=function(y,n,s){s===void 0&&(s=!0);var d=Object(m.f)(this.chart);Object(A.each)(d,function(E){n(E.getData())&&E.setState(y,s)})},j.prototype.getStates=function(){var y=Object(m.f)(this.chart),n=[];return Object(A.each)(y,function(s){var d=s.getData(),E=s.getStates();Object(A.each)(E,function(O){n.push({data:d,state:O,geometry:s.geometry,element:s})})}),n},j.prototype.changeData=function(y){this.update({data:y})},j.prototype.changeSize=function(y,n){this.chart.changeSize(y,n)},j.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(S)},j.prototype.execAdaptor=function(){var y=this.getSchemaAdaptor(),n=this.options,s=n.padding,d=n.appendPadding;this.chart.padding=s,this.chart.appendPadding=d,y({chart:this.chart,options:this.options})},j.prototype.triggerResize=function(){this.chart.forceFit()},j.prototype.bindSizeSensor=function(){var y=this;if(!this.unbind){var n=this.options.autoFit,s=n===void 0?!0:n;s&&(this.unbind=Object(i.bind)(this.container,function(){var d=Object(m.g)(y.container),E=d.width,O=d.height;(E!==y.chart.width||O!==y.chart.height)&&y.triggerResize()}))}},j.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},j}(e.a)},zK8m:function(Gn,Gt,_){"use strict";var at=_("mrSG"),a=_("iTfj"),A=_("6JdA"),e=_("sstZ"),i=_("aSjE"),p=_("LmB6"),m=A.a.transform,S="matrix",l=["zIndex","capture","visible","type"],M=["repeat"],j=":",y="*";function n(C){for(var v=[],x=0;x<C.length;x++)Object(a.isArray)(C[x])?v.push([].concat(C[x])):v.push(C[x]);return v}function s(C,v){var x={},T=v.attrs;for(var N in C)x[N]=T[N];return x}function d(C,v){var x={},T=v.attr();return Object(a.each)(C,function(N,X){M.indexOf(X)===-1&&!Object(a.isEqual)(T[X],N)&&(x[X]=N)}),x}function E(C,v){if(v.onFrame)return C;var x=v.startTime,T=v.delay,N=v.duration,X=Object.prototype.hasOwnProperty;return Object(a.each)(C,function(tt){x+T<tt.startTime+tt.delay+tt.duration&&N>tt.delay&&Object(a.each)(v.toAttrs,function(nt,vt){X.call(tt.toAttrs,vt)&&(delete tt.toAttrs[vt],delete tt.fromAttrs[vt])})}),C}var O=function(C){Object(at.b)(v,C);function v(x){var T=C.call(this,x)||this;T.attrs={};var N=T.getDefaultAttrs();return Object(a.mix)(N,x.attrs),T.attrs=N,T.initAttrs(N),T.initAnimate(),T}return v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(x){},v.prototype.initAttrs=function(x){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var x,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var X=T[0],tt=T[1];if(!X)return this.attrs;if(Object(a.isObject)(X)){for(var nt in X)this.setAttr(nt,X[nt]);return this.afterAttrsChange(X),this}return T.length===2?(this.setAttr(X,tt),this.afterAttrsChange((x={},x[X]=tt,x)),this):this.attrs[X]},v.prototype.isClipped=function(x,T){var N=this.getClip();return N&&!N.isHit(x,T)},v.prototype.setAttr=function(x,T){var N=this.attrs[x];N!==T&&(this.attrs[x]=T,this.onAttrChange(x,T,N))},v.prototype.onAttrChange=function(x,T,N){x==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var T=this.cfg.applyTo;T&&T.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(x){this.set("zIndex",x);var T=this.getParent();return T&&T.sort(),this},v.prototype.toFront=function(){var x=this.getParent();if(!!x){var T=x.getChildren(),N=this.get("el"),X=T.indexOf(this);T.splice(X,1),T.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var x=this.getParent();if(!!x){var T=x.getChildren(),N=this.get("el"),X=T.indexOf(this);T.splice(X,1),T.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(x){x===void 0&&(x=!0);var T=this.getParent();T?(Object(e.j)(T.getChildren(),this),T.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},v.prototype.resetMatrix=function(){this.attr(S,this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr(S)},v.prototype.setMatrix=function(x){this.attr(S,x),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var T=this.attr("matrix"),N=this.cfg.parentMatrix;N&&T?x=Object(i.b)(N,T):x=T||N,this.set("totalMatrix",x)}return x},v.prototype.applyMatrix=function(x){var T=this.attr("matrix"),N=null;x&&T?N=Object(i.b)(x,T):N=T||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(x){var T=this.attr("matrix");return T?Object(i.c)(T,x):x},v.prototype.invertFromMatrix=function(x){var T=this.attr("matrix");if(T){var N=Object(i.a)(T);if(N)return Object(i.c)(N,x)}return x},v.prototype.setClip=function(x){var T=this.getCanvas(),N=null;if(x){var X=this.getShapeBase(),tt=Object(a.upperFirst)(x.type),nt=X[tt];nt&&(N=new nt({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:T}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},v.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},v.prototype.clone=function(){var x=this,T=this.attrs,N={};Object(a.each)(T,function(nt,vt){Object(a.isArray)(T[vt])?N[vt]=n(T[vt]):N[vt]=T[vt]});var X=this.constructor,tt=new X({attrs:N});return Object(a.each)(l,function(nt){tt.set(nt,x.get(nt))}),tt},v.prototype.destroy=function(){var x=this.destroyed;x||(this.attrs={},C.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var N=this.isCanvas&&this.isCanvas();if(!(!N&&!this.get("canvas"))){this.set("animating",!0);var X=this.get("timeline");X||(X=this.get("canvas").get("timeline"),this.set("timeline",X));var tt=this.get("animations")||[];X.timer||X.initTimer();var nt=x[0],vt=x[1],ft=x[2],bt=ft===void 0?"easeLinear":ft,St=x[3],pt=St===void 0?a.noop:St,ct=x[4],zt=ct===void 0?0:ct,Nt,wt,H,ht,dt;Object(a.isFunction)(nt)?(Nt=nt,nt={}):Object(a.isObject)(nt)&&nt.onFrame&&(Nt=nt.onFrame,wt=nt.repeat),Object(a.isObject)(vt)?(dt=vt,vt=dt.duration,bt=dt.easing||"easeLinear",zt=dt.delay||0,wt=dt.repeat||wt||!1,pt=dt.callback||a.noop,H=dt.pauseCallback||a.noop,ht=dt.resumeCallback||a.noop):(Object(a.isNumber)(pt)&&(zt=pt,pt=null),Object(a.isFunction)(bt)?(pt=bt,bt="easeLinear"):bt=bt||"easeLinear");var yt=d(nt,this),Mt={fromAttrs:s(yt,this),toAttrs:yt,duration:vt,easing:bt,repeat:wt,callback:pt,pauseCallback:H,resumeCallback:ht,delay:zt,startTime:X.getTime(),id:Object(a.uniqueId)(),onFrame:Nt,pathFormatted:!1};tt.length>0?tt=E(tt,Mt):X.addAnimator(this),tt.push(Mt),this.set("animations",tt),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(x){var T=this;x===void 0&&(x=!0);var N=this.get("animations");Object(a.each)(N,function(X){x&&(X.onFrame?T.attr(X.onFrame(1)):T.attr(X.toAttrs)),X.callback&&X.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var x=this.get("timeline"),T=this.get("animations"),N=x.getTime();return Object(a.each)(T,function(X){X._paused=!0,X._pauseTime=N,X.pauseCallback&&X.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},v.prototype.resumeAnimate=function(){var x=this.get("timeline"),T=x.getTime(),N=this.get("animations"),X=this.get("_pause").pauseTime;return Object(a.each)(N,function(tt){tt.startTime=tt.startTime+(T-X),tt._paused=!1,tt._pauseTime=null,tt.resumeCallback&&tt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",N),this},v.prototype.emitDelegation=function(x,T){var N=this,X=T.propagationPath,tt=this.getEvents(),nt;x==="mouseenter"?nt=T.fromShape:x==="mouseleave"&&(nt=T.toShape);for(var vt=function(ct){var zt=X[ct],Nt=zt.get("name");if(Nt){if((zt.isGroup()||zt.isCanvas&&zt.isCanvas())&&nt&&Object(e.g)(zt,nt))return"break";Object(a.isArray)(Nt)?Object(a.each)(Nt,function(wt){N.emitDelegateEvent(zt,wt,T)}):ft.emitDelegateEvent(zt,Nt,T)}},ft=this,bt=0;bt<X.length;bt++){var St=vt(bt);if(St==="break")break}},v.prototype.emitDelegateEvent=function(x,T,N){var X=this.getEvents(),tt=T+j+N.type;(X[tt]||X[y])&&(N.name=tt,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(tt,N))},v.prototype.translate=function(x,T){x===void 0&&(x=0),T===void 0&&(T=0);var N=this.getMatrix(),X=m(N,[["t",x,T]]);return this.setMatrix(X),this},v.prototype.move=function(x,T){var N=this.attr("x")||0,X=this.attr("y")||0;return this.translate(x-N,T-X),this},v.prototype.moveTo=function(x,T){return this.move(x,T)},v.prototype.scale=function(x,T){var N=this.getMatrix(),X=m(N,[["s",x,T||x]]);return this.setMatrix(X),this},v.prototype.rotate=function(x){var T=this.getMatrix(),N=m(T,[["r",x]]);return this.setMatrix(N),this},v.prototype.rotateAtStart=function(x){var T=this.attr(),N=T.x,X=T.y,tt=this.getMatrix(),nt=m(tt,[["t",-N,-X],["r",x],["t",N,X]]);return this.setMatrix(nt),this},v.prototype.rotateAtPoint=function(x,T,N){var X=this.getMatrix(),tt=m(X,[["t",-x,-T],["r",N],["t",x,T]]);return this.setMatrix(tt),this},v}(p.a);Gt.a=O},zoYe:function(Gn,Gt,_){var at=_("nmnc"),a=_("eUgh"),A=_("Z0cm"),e=_("/9aa"),i=1/0,p=at?at.prototype:void 0,m=p?p.toString:void 0;function S(l){if(typeof l=="string")return l;if(A(l))return a(l,S)+"";if(e(l))return m?m.call(l):"";var M=l+"";return M=="0"&&1/l==-i?"-0":M}Gn.exports=S}}]);
